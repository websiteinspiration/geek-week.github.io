<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë§ üñãÔ∏è üÜó Go, Vue and 3 days to develop: a real-time system for monitoring patients üë©üèΩ‚Äçüíº ‚ÜïÔ∏è üëçüèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In November 2019, people heard about the first cases of an unknown deadly disease in China. Now everyone knows that this disease is called COVID-19. A...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Go, Vue and 3 days to develop: a real-time system for monitoring patients</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/501646/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In November 2019, people heard about the first cases of an unknown deadly disease in China. </font><font style="vertical-align: inherit;">Now everyone knows that this disease is called COVID-19. </font><font style="vertical-align: inherit;">Apparently, the epidemic forever changed the world that we knew. </font><font style="vertical-align: inherit;">The virus is dangerous and very contagious. </font><font style="vertical-align: inherit;">And humanity does not know much about it yet. </font><font style="vertical-align: inherit;">I really hope that a cure for this disease will be found soon. </font><font style="vertical-align: inherit;">
The nature of the virus is such that it is very difficult to prevent its spread. </font><font style="vertical-align: inherit;">In Sri Lanka, where I live, we are faced with the same situation as people in other countries. </font><font style="vertical-align: inherit;">Here I want to talk about how programmers were able to provide all possible assistance to those who fight the disease face to face.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><img src="https://habrastorage.org/webt/up/8x/uw/up8xuwl64afjkhamgpr2cicrs8q.jpeg"></a><br>
<br><font style="vertical-align: inherit;"></font><br>
<a name="habracut"></a><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Risks related to patient care</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A person can be infected even if he makes a small mistake. </font><font style="vertical-align: inherit;">Doctors periodically have to visit infectious isolation wards to check patients' vital signs. </font><font style="vertical-align: inherit;">After visiting the detention center, protective suits must be destroyed. </font><font style="vertical-align: inherit;">And all this is just to look at the indicators displayed on the screens of medical devices. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Representatives of health authorities addressed us with a proposal to develop a system for remote monitoring of patients. </font><font style="vertical-align: inherit;">There are turnkey monitoring solutions that are very expensive. </font><font style="vertical-align: inherit;">But Sri Lanka is not such a rich country.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Beginning of work</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So, we (I and </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Keshara</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) did some research and found out that the devices from which you want to take indicators, bedside monitors, use the common HL7 protocol (Health Level 7) to exchange medical data (such as vital indicators). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We spent some time studying this protocol. </font><font style="vertical-align: inherit;">He seemed a little strange to us. </font><font style="vertical-align: inherit;">We had never worked with him before. </font><font style="vertical-align: inherit;">For us it was a new challenge. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Here's what the HL7 messages look like.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/cbb/cef/4f4/cbbcef4f4da78fbeea17de45d85d595a.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HL7 Package</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
In the section, the</font></font><code>Message</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">patient‚Äôs medical data is presented as shown below. </font></font><code>&lt;CR&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- This</font></font><code>\r</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">is a line feed character used to separate messages.</font></font><br>
<br>
<pre><code class="go hljs">MSH|^~\&amp;|||||||ORU^R01|<span class="hljs-number">103</span>|P|<span class="hljs-number">2.3</span><span class="hljs-number">.1</span>|&lt;CR&gt;<font></font>
PID|||<span class="hljs-number">14140</span>f00<span class="hljs-number">-7</span>bbc<span class="hljs-number">-0478</span><span class="hljs-number">-11122</span>d2d02000000||WEERASINGHE^KESHARA||<span class="hljs-number">19960714</span>|M|&lt;CR&gt;<font></font>
PV1||I|^^ICU&amp;<span class="hljs-number">1</span>&amp;<span class="hljs-number">3232237756</span>&amp;<span class="hljs-number">4601</span>&amp;&amp;<span class="hljs-number">1</span>|||||||||||||||A|||&lt;CR&gt;<font></font>
OBR||||Mindray Monitor|||<span class="hljs-number">0</span>|&lt;CR&gt;<font></font>
OBX||NM|<span class="hljs-number">52</span>^||<span class="hljs-number">189.0</span>||||||F&lt;CR&gt;<font></font>
OBX||NM|<span class="hljs-number">51</span>^||<span class="hljs-number">100.0</span>||||||F&lt;CR&gt;<font></font>
OBX||ST|<span class="hljs-number">2301</span>^||<span class="hljs-number">2</span>||||||F&lt;CR&gt;<font></font>
OBX||CE|<span class="hljs-number">2302</span>^Blood||<span class="hljs-number">0</span>^N||||||F&lt;CR&gt;<font></font>
OBX||CE|<span class="hljs-number">2303</span>^Paced||<span class="hljs-number">2</span>^||||||F&lt;CR&gt;<font></font>
OBX||ST|<span class="hljs-number">2308</span>^BedNoStr||BED<span class="hljs-number">-001</span>||||||F&lt;CR&gt;
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It looks weird, right? </font><font style="vertical-align: inherit;">It seemed to us. </font><font style="vertical-align: inherit;">It uses the Pipehat format. </font><font style="vertical-align: inherit;">The symbol is used here to separate data segments </font></font><code>|</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">I‚Äôm not going to talk a lot about the protocol itself. </font><font style="vertical-align: inherit;">There are many materials on the Internet about this. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We managed to find good libraries for processing HL7 messages written in different languages.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Why did we choose Go?</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Here's what they </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">write</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> about Go: ‚ÄúGo or Golang is a statically typed language whose syntax is based on the syntax of C. But Go is characterized by some additional features such as the presence of a garbage collector in the language (as in Java), safe work with types and some features for dynamic typing. Go was developed by Google in 2007. The language was created by a group of highly skilled specialists. These are Robert Griesmer, Rob Pike and Ken Thompson. ‚Äù </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Go is designed with support for multi-threaded code execution, the corresponding mechanisms are built into the language. Go has so-called goroutins and channels, the use of which allows the programmer to quickly and with minimal effort develop programs with a high level of parallelism.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Therefore, we decided to choose Go. </font><font style="vertical-align: inherit;">If we talk about the problem that confronted us, then we thought that, in solving it, we would have to deal with the need to work with a multitude of parallel tasks. </font><font style="vertical-align: inherit;">In addition, Go executables are compiled statically, which simplifies the installation of programs on hospital computers, eliminating the need for dependency care. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We looked for good libraries for supporting the HL7 protocol written in Go, and in the end we found </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">this</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> one suitable </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Its author, among other things, wrote good </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">material</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> about HL7. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This library greatly facilitates the work with HL7 messages.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Why did we choose Vue?</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
From the </font><font style="vertical-align: inherit;">Vue </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">documentation,</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> you can find out the following: ‚ÄúVue (pronounced / vjuÀê /, roughly like view) is a progressive framework for creating user interfaces. </font><font style="vertical-align: inherit;">Unlike monolith frameworks, Vue is made suitable for gradual deployment. ‚Äù </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Thanks to the use of Vue, we were able to easily create nice reactive interfaces. </font><font style="vertical-align: inherit;">We chose Vue because it is a powerful and convenient tool for creating interfaces. </font><font style="vertical-align: inherit;">In addition, we used Vuetify as a UI library.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bedside monitor</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
After we studied </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">the</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Mindray Bedside Monitor </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;">manual</font></a><font style="vertical-align: inherit;"> for programmers (there are a lot of such devices in the hospital, so we chose it), we created a small prototype for decoding HL7 messages. </font><font style="vertical-align: inherit;">The prototype was able to correctly decode messages and correctly convert them to JSON format. </font><font style="vertical-align: inherit;">We did this using the Unsolicited Result Interface described in the manual.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f13/674/04a/f1367404a1b99d972d2ee01702d017c1.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mindray uMec10</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
But when we had a real device at our disposal, it refused to work. </font><font style="vertical-align: inherit;">After that, Keshara and I began to analyze packets in Wireshark, trying to figure out what the device was actually doing. </font><font style="vertical-align: inherit;">As it turned out, the device did not use this protocol. </font><font style="vertical-align: inherit;">It used the Realtime Result Interface - a rather old interface that was no longer supported by the manufacturer.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Retrieving Messages from HL7 Packages</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Here's how to retrieve HL7 messages from devices. </font><font style="vertical-align: inherit;">We used an object for this task </font></font><code>bufio.Reader</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, since it provides the developer with efficient flow processing mechanisms. </font><font style="vertical-align: inherit;">Instead of accessing the network layer each time, </font></font><code>Reader</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">it allowed us to efficiently read data from a TCP connection.</font></font><br>
<br>
<pre><code class="go hljs"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(d *Device)</span> <span class="hljs-title">ProcessHL7Packet</span><span class="hljs-params">()</span> <span class="hljs-params">(hl7.Message, error)</span></span> {
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">//   ,   0x0B</span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;b, err := d.ReadByte()<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>, fmt.Errorf(<span class="hljs-string">"error reading start byte: %s"</span>, err)<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">if</span> b != <span class="hljs-keyword">byte</span>(<span class="hljs-number">0x0B</span>) {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>, fmt.Errorf(<span class="hljs-string">"invalid header"</span>)<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">//  </span>
&nbsp;&nbsp;&nbsp;&nbsp;payloadWithDelimiter, err := d.ReadBytes(<span class="hljs-keyword">byte</span>(<span class="hljs-number">0x1C</span>))
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>, fmt.Errorf(<span class="hljs-string">"error reading payload: %s"</span>, err)<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">//       </span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;b, err = d.ReadByte()<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>, fmt.Errorf(<span class="hljs-string">"error reading end byte %s"</span>, err)<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">if</span> b != <span class="hljs-keyword">byte</span>(<span class="hljs-number">0x0D</span>) {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>, fmt.Errorf(<span class="hljs-string">"invalid message end"</span>)<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">//   2  hl7-</span>
&nbsp;&nbsp;&nbsp;&nbsp;payload := payloadWithDelimiter[:<span class="hljs-built_in">len</span>(payloadWithDelimiter)<span class="hljs-number">-1</span>]<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;log.Debugf(<span class="hljs-string">"Length of payload %d\n"</span>, <span class="hljs-built_in">len</span>(payload))<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;m, _, err := hl7.ParseMessage(payload)<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>, fmt.Errorf(<span class="hljs-string">"error parsing hl7: %s\n"</span>, err)<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span> m, err<font></font>
}<font></font>
</code></pre><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">System architecture</font></font></font></h2><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/658/799/2dc/6587992dc3561ae132316b7976733409.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">System architecture ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">original</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
The system is designed so that, in the long run, it works reliably. We have carefully selected the best tools to solve the challenges we face.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We chose PostgreSQL as the DBMS, as this system is stable and reliable. By using HA, you can create a reliable data storage system for the monitoring system. In addition, the system we selected supports the processing of large volumes of input data, which was a plus for us.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In the future, using TimescaleDB, we plan to create a real-time analytics system. As a result, PostgreSQL has become our ideal choice, as TimescaleDB can be installed on top of PostgreSQL.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We split the Health 24 API and the Health 24 gateway based on system management considerations. </font><font style="vertical-align: inherit;">When creating the gateway, we strove for compactness and reliability. </font><font style="vertical-align: inherit;">Thanks to the use of Golang, solving this problem was easy and pleasant.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Entering the real world</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bedside monitors report their presence by broadcasting UDP messages. </font><font style="vertical-align: inherit;">We needed to capture and process these packets to extract data from them that is necessary for organizing access to devices. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Using Go, we created a separate service designed to detect broadcast UDP transmissions and to register new devices in the system. </font><font style="vertical-align: inherit;">The next step in our work was connecting devices to the gateway. </font><font style="vertical-align: inherit;">We have created on Go another service designed to support the corresponding TCP connections.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3f3/01c/b1d/3f301cb1d8403751ef87849035769fb9.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Device discovery</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Since the gateway needed to connect to the device as a client, we had to coordinate and disconnect the devices. </font><font style="vertical-align: inherit;">In addition, the status of each monitor had to be monitored on the gateway. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Through the use</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> of</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Go</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"> channels</font></a><font style="vertical-align: inherit;"> , we could easily store relevant data in a PostgreSQL database for later analysis. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Channels allow you to organize a convenient interaction between goroutines. </font><font style="vertical-align: inherit;">Using them was very convenient. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
My experience with the</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Kache</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> project</font><font style="vertical-align: inherit;">, which is a Redis-compatible memory-based database, came in handy for me in solving the various difficulties that confronted us in the course of our work.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Real-time output of vital signs</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
While developing the server part of the project, we also dealt with its client part. It was intended for doctors and was aimed at demonstrating data read from bedside monitors. The frontend was mainly occupied by Keshara. As a result, a very good system interface was created in just 3 days. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Using </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vuetify</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , we created an interface layout that looked like the interface of a bedside monitor. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To manage the state of the application, we used </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vuex</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and developed an alert service that takes into account the priority of tasks, which is used to notify hospital staff in the event of dangerous situations. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We combined the API and the frontend using </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Socket.io</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, which allowed us to create an effective communication channel, the data through which are transmitted in real time. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I want to say thanks again to Keshara for the excellent work on the frontend.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a17/fe5/b90/a17fe5b9066bd99b7d8847f41ad461ce.jpg"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Real-time dashboard</font></font></font></i><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">System deployment</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bedside monitors send large amounts of data to the network. </font><font style="vertical-align: inherit;">We decided to use a separate VLAN for the devices, and another VLAN for the API. </font><font style="vertical-align: inherit;">The purpose of this was to enable reliable traffic processing without creating congestion in the hospital network. </font><font style="vertical-align: inherit;">In addition, we were helped by our university professors - Dr. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Asitha Bandaranaike</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sunet Namal Karunaratna</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Thanks to their support, we were able to establish a reliable network. </font><font style="vertical-align: inherit;">Next, we launched Ubuntu 18.04 on the server and started deploying the system. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Keshara has done a lot in this area, risking contracting COVID-19 in the hospital.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/922/b52/fd4/922b52fd43cfa193a6bdf9f45ac7e1a7.jpg"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Keshara is deploying a system in a hospital</font></font></font></i><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusion of the system in production</font></font></font></h2><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Here is a</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> video showing </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;">how to</font></a><font style="vertical-align: inherit;"> work with the system.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b0d/e40/c34/b0de40c34813ac536d1929955ae6d26a.jpg"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dr. Wikramasinghe tests the system</font></font></font></i><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7dc/8f5/5d1/7dc8f55d188994cf38514fb6142ae575.jpg"></div><br>
<i><font color="#999999">      </font></i><br>
<br>
<h2><font color="#3AC1EF">    </font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We have created the above program complex at the request of representatives of the health authorities. This project is not commercial. Even taking into account the presence of this system in the hospital, we strongly recommend that doctors visit patients and personally check their vital signs. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Since this complex was developed very quickly, in a pandemic, we released it, equipping it with only the most important: the ability to monitor. In addition, we conducted its lengthy testing, using many devices during the tests. Until now, he has shown himself to be good. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This does not indicate that we have created a system that is already impossible to improve. We are constantly working to improve it and correct errors, achieving high stability of the system.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As a result, we must warn doctors that they should use this system with caution.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Summary</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Medical workers at the forefront of the battle with the virus work without rest. </font><font style="vertical-align: inherit;">We must provide them with all possible assistance. </font><font style="vertical-align: inherit;">We, students of computer technology, did everything we could to support them. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The system of remote monitoring of the patients' condition allows solving some problems without direct contact with patients, which means it helps doctors to do their work more efficiently and safely. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We thank everyone who has developed wonderful open source tools and libraries, without which our project would not be destined to see the light.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The decision to use Golang was a brilliant idea. </font><font style="vertical-align: inherit;">Using this language allowed us to create a very stable system in just a few days. </font><font style="vertical-align: inherit;">The same can be said of Vue. </font><font style="vertical-align: inherit;">Thanks to this framework, we were able to very quickly create a high-quality and user-friendly interface. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Together we can defeat COVID-19. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dear readers! </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">How would you go about building a system similar to the one described in this article?</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><img src="https://habrastorage.org/webt/a_/bs/aa/a_bsaactpbr8fltzymtkhqbw1d4.png"></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en501632/index.html">5 JavaScript libraries for working with strings</a></li>
<li><a href="../en501634/index.html">CSS functions min (), max () and clamp ()</a></li>
<li><a href="../en501636/index.html">How to deploy Kubernetes cluster in Morpheus in 30 minutes</a></li>
<li><a href="../en501642/index.html">Which is better: confirmation of the action or the possibility of its cancellation?</a></li>
<li><a href="../en501644/index.html">CSS Animation Performance Analysis</a></li>
<li><a href="../en501648/index.html">10 extensions for VS Code, without which I can not program</a></li>
<li><a href="../en501650/index.html">What is inside a .wasm file? Introducing wasm-decompile</a></li>
<li><a href="../en501652/index.html">Nuxt as fullstack server: frontend + backend API Server (Part 1)</a></li>
<li><a href="../en501654/index.html">Build work processes on a remote site: practical recommendations</a></li>
<li><a href="../en501656/index.html">Development of a corporate library of React components. Cross platform approach</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>