<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ô•Ô∏è üêπ üêë Dicas para usar o algoritmo de recolhimento da fun√ß√£o Wave üë©üèΩ‚Äçü§ù‚Äçüë©üèª üöÅ üôÑ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recentemente, experimentei muito a gera√ß√£o baseada em restri√ß√µes processuais. Em particular, com o algoritmo Wave Function Collapse (WFC, wave functio...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Dicas para usar o algoritmo de recolhimento da fun√ß√£o Wave</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/488336/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f2f/556/757/f2f556757da50dae74a44909dca1e76d.png" alt="imagem"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Recentemente, experimentei muito a gera√ß√£o baseada em restri√ß√µes processuais. Em particular, com o algoritmo </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wave Function Collapse</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (WFC, wave function collapse). Eu at√© escrevi minha pr√≥pria </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">biblioteca de c√≥digo aberto</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">recurso de unidade</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O WFC √© um algoritmo muito flex√≠vel, especialmente com as melhorias que desenvolvi. Mas, ao mesmo tempo, achei dif√≠cil criar </font><font style="vertical-align: inherit;">n√≠veis </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pr√°ticos</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> aplic√°veis ‚Äã‚Äãaos jogos de computador </font><font style="vertical-align: inherit;">com sua ajuda </font><font style="vertical-align: inherit;">. A principal dificuldade √© que o WFC n√£o possui estrutura global. Tudo o que ele faz √© fazer a gera√ß√£o de sa√≠da parecer localmente semelhante √† entrada, por exemplo, observando pequenos ret√¢ngulos individuais da sa√≠da.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Neste artigo, vou contar o que aprendi e o que ser√° capaz de elevar os geradores com base nas restri√ß√µes para um novo n√≠vel.</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O b√°sico</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√â dif√≠cil usar o WFC se voc√™ n√£o sabe como ele funciona. Este √© um algoritmo de gera√ß√£o de procedimentos </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">baseado em restri√ß√µes</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> que tem recebido muita aten√ß√£o recentemente. De fato, praticamente nada tem a ver com o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">conceito de f√≠sica qu√¢ntica</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> em cuja honra foi nomeado. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O WFC √© f√°cil de configurar - voc√™ fornece apenas um exemplo de cart√£o ao algoritmo, ap√≥s o qual ele gera novos cart√µes que se </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">parecem</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> com o cart√£o original devido ao uso repetido de seus pequenos fragmentos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tem dois tipos - com um arranjo vizinho ou com uma sobreposi√ß√£o de elementos. Isso pode ser feito em 2D ou 3D, e mesmo em grades de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hex√°gonos</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ou </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">irregulares</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">grades. </font><font style="vertical-align: inherit;">A maioria das minhas dicas se aplica independentemente de como voc√™ usa o algoritmo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sugiro que voc√™ jogue com </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">esta demonstra√ß√£o</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para ter uma id√©ia do algoritmo e leia </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">esta introdu√ß√£o</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> [ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tradu√ß√£o</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> em Habr√©] se estiver interessado em detalhes t√©cnicos.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Design do conjunto de pe√ßas</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O algoritmo WFC √© baseado em blocos. </font><font style="vertical-align: inherit;">Nesse sentido, sua qualidade depende dos blocos que voc√™ transfere para o trabalho. </font><font style="vertical-align: inherit;">Eu n√£o sou um artista, por isso posso ajudar pouco no desenho de belos conjuntos de pe√ßas (embora voc√™ possa </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ver aqui</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), mas um bom conjunto de pe√ßas tamb√©m requer conhecimento t√©cnico.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cubos de marcha</font></font></h3><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cubos de marcha</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √© um algoritmo que seleciona quais blocos definir, dependendo de cada v√©rtice do bloco estar cheio ou vazio. </font><font style="vertical-align: inherit;">Aqui est√° a lista de blocos usados ‚Äã‚Äãpara 2D.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/404/214/092/404214092cf2f31e96b3b6f2a267c622.svg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Se voc√™ criar ladrilhos para que os cantos preto e branco sempre correspondam, as linhas vermelhas sempre ser√£o conectadas corretamente. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui n√£o precisamos entender todo o algoritmo, mas deve-se notar que a ideia de projetar blocos levando em considera√ß√£o apenas o comportamento nos cantos √© uma t√©cnica muito poderosa. </font><font style="vertical-align: inherit;">√â usado em muitos dos melhores conjuntos de pe√ßas, pois garante que as pe√ßas sempre se conectem bem.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Essa t√©cnica √© especialmente poderosa para o WFC. </font><font style="vertical-align: inherit;">Aconteceu, porque se voc√™ perder algumas pe√ßas, o WFC n√£o importar√°. </font><font style="vertical-align: inherit;">Ele contornar√° esse problema e nunca criar√° configura√ß√µes que exijam blocos ausentes. </font><font style="vertical-align: inherit;">Isso √© muito conveniente para o 3D, pois existem dezenas de blocos em potencial e alguns deles s√£o necess√°rios apenas em situa√ß√µes muito dif√≠ceis. </font><font style="vertical-align: inherit;">Veja a se√ß√£o ‚ÄúFunda√ß√£o‚Äù abaixo, na qual eu uso esse truque ainda mais amplamente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Conhecer </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">outros padr√µes de ladrilhos</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tamb√©m pode ser √∫til </font><font style="vertical-align: inherit;">, mas o Marching Cubes √© o melhor.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Os quartos</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√Äs vezes, √© mais f√°cil trabalhar com conjuntos de pe√ßas simples. </font><font style="vertical-align: inherit;">Esta combina√ß√£o de 4 pe√ßas (uma pe√ßa est√° vazia) gera facilmente salas quadradas.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/dd0/bbb/376/dd0bbb3765876baac62417e760149058.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e76/245/14b/e7624514b5103da9afa5e4be2fce86c3.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O tamanho das salas pode ser facilmente alterado alterando o peso de cada ladrilho. </font><font style="vertical-align: inherit;">Depois de adicionar os ladrilhos da porta e do corredor, voc√™ pode criar a diversidade caracter√≠stica das plantas das pessoas.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Funda√ß√£o</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ao trabalhar com o WFC, √© interessante experimentar conjuntos de pe√ßas. </font><font style="vertical-align: inherit;">Se voc√™ simplesmente colocar um bloco, o WFC procura extrair o m√°ximo do espa√ßo restante. </font><font style="vertical-align: inherit;">√Äs vezes, isso leva a resultados radicalmente diferentes, como pode ser visto na imagem de Maxim Gumin:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a4f/980/7b9/a4f9807b976fa295e85b9ae0d36d3918.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Podemos usar esse comportamento para estimular o WFC a gerar muitas estruturas reconhec√≠veis. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui est√° um exemplo de castelo (inspirado em </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@greentecq</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ):</font></font><br>
<br>
<div class="oembed"><twitter-widget class="twitter-tweet twitter-tweet-rendered" id="twitter-widget-0" style="position: static; visibility: visible; display: block; transform: rotate(0deg); max-width: 100%; width: 500px; min-width: 220px; margin-top: 10px; margin-bottom: 10px;" data-tweet-id="1183359478734958593"></twitter-widget>
<script async="" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
</div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nele, usei o seguinte conjunto de pe√ßas:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c0b/852/df1/c0b852df1c18974c8114d48d3b7f3290.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esses ladrilhos t√™m uma propriedade importante - todos os ladrilhos na base t√™m uma largura n√£o inferior √† do topo. </font><font style="vertical-align: inherit;">Isso significa que n√£o √© poss√≠vel construir esses blocos de maneira n√£o suportada. </font><font style="vertical-align: inherit;">O WFC responde imediatamente a isso e cria edif√≠cios com uma boa base.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aproxima√ß√£o de Fractal Split</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Estudando o t√≥pico de estimular certos comportamentos escolhendo o conjunto de pe√ßas apropriado, descobri que se o conjunto de pe√ßas consiste em estradas e galhos retos, mas sem cantos, √© poss√≠vel obter uma boa aproxima√ß√£o da </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">divis√£o recursiva</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (sem a parte "recursiva"). </font><font style="vertical-align: inherit;">Isso √© muito bom para os n√≠veis da grade.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Big tiles</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voc√™ pode adicionar o WFC para oferecer suporte a blocos que s√£o v√°rias vezes maiores que um bloco regular. Por exemplo, isso √© suportado no </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">meu complemento Tessera</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ladrilhos grandes podem ser usados ‚Äã‚Äãde v√°rias maneiras. Como eles se estendem al√©m dos limites da grade, voc√™ pode us√°-los para adicionar curvas mais suaves e amplas do que normalmente √© poss√≠vel ao fazer snap na grade. Eles tamb√©m s√£o √≥timos para elementos de um grande n√∫mero de blocos, ou simplesmente para mascarar que a gera√ß√£o √© baseada em blocos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui est√° um exemplo para aprender com </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">Oscar Stalberg </font></a></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">do</font></font></a> <font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> jogo </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">Bad North</font></a><font style="vertical-align: inherit;"> . Oscar demonstra como ele usou telhas grandes para adicionar costas curvas, casas grandes e variabilidade do penhasco.</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
<br>
<div class="oembed"><twitter-widget class="twitter-tweet twitter-tweet-rendered" id="twitter-widget-1" style="position: static; visibility: visible; display: block; transform: rotate(0deg); max-width: 100%; width: 500px; min-width: 220px; margin-top: 10px; margin-bottom: 10px;" data-tweet-id="1131228226901172226"></twitter-widget>
<script async="" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
</div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Limita√ß√µes</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Na sua ess√™ncia, o WFC √© um algoritmo baseado em restri√ß√µes. </font><font style="vertical-align: inherit;">Isso significa que ele procura gerar n√≠veis que correspondam a um conjunto espec√≠fico de crit√©rios. </font><font style="vertical-align: inherit;">No WFC puro, h√° apenas um crit√©rio - que os n√≠veis pare√ßam localmente como uma entrada de amostra. </font><font style="vertical-align: inherit;">Abaixo, falarei sobre aprimoramentos do WFC para adicionar novos tipos de restri√ß√µes.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ladrilhos fixos</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√â muito f√°cil corrigir blocos individuais antes de gerar um n√≠vel no WFC. </font><font style="vertical-align: inherit;">Mais tarde, eles se integram perfeitamente ao n√≠vel gerado.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1f0/df3/619/1f0df3619f947a7a71e72b389bc38e15.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Antes da gera√ß√£o</font></font></i><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/93f/2c2/5be/93f2c25be4b716f62fa16b0b67c36a5b.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ap√≥s a gera√ß√£o</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Esta t√©cnica pode ser usada de v√°rias maneiras diferentes. </font><font style="vertical-align: inherit;">Aqui est√£o algumas id√©ias:</font></font><br>
<br>
<ul>
<li>      </li>
<li>  - ,   WFC    .</li>
<li>    ,    </li>
<li> /    WFC   </li>
</ul><br>
<br>
<h3> </h3><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Caminhos de limita√ß√£o</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (restri√ß√£o de caminho) - esta √© minha pr√≥pria contribui√ß√£o para o WFC. Essa √© uma t√©cnica extremamente poderosa, mas um artigo completo provavelmente exigir√° um artigo separado. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Essa restri√ß√£o </font><font style="vertical-align: inherit;">verifica </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">globalmente</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> toda a sa√≠da gerada e indica √† for√ßa que um caminho deve passar entre os blocos marcados. Ou, em outras palavras, diz a um subconjunto de blocos para formar um √∫nico </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">componente do gr√°fico</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Devido √† sua natureza global, ele complementa o comportamento usual do WFC, que leva em conta apenas os blocos locais. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Descobri que adicionar essa restri√ß√£o afeta fortemente a apar√™ncia do n√≠vel gerado. Sem ele, o WFC geralmente gera v√°rias salas ou √°reas divididas que parecem irreais e n√£o criadas por seres humanos.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b88/353/c19/b88353c19a3ebc27db979150a3c30af2.png"></div><br>
<i>   </i><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a91/928/346/a919283460b31c6c8b901609d9490ede.png"></div><br>
<i>   .       .</i><br>
<br>
<h3>   </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Outra situa√ß√£o em que a limita√ß√£o do caminho √© apropriada √© ... desenhar caminhos. Por padr√£o, a restri√ß√£o de caminho garante apenas </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a exist√™ncia de uma</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> rota entre blocos. N√£o garante que o caminho seja o mais simples poss√≠vel. Portanto, no caso de rios e estradas, ele desenha juntas em forma de T em locais opcionais. O truque √© simplesmente remover todos os ladrilhos das juntas em T ou dar-lhes um peso muito baixo, para que sejam selecionados apenas se for absolutamente necess√°rio. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adoro usar blocos fixos para corrigir os pontos finais de um caminho. Por esse motivo, a restri√ß√£o de caminho √© necess√°ria para inserir blocos que conectam o restante do caminho.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/aa0/448/f77/aa0448f778179d53dd4b9236fc33aa17.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Os caminhos gerados pela fixa√ß√£o de todos os quatro cantos como pontos finais dos caminhos</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Se voc√™ quiser experimentar caminhos, tenho uma pequena demonstra√ß√£o em javascript que √© apresentada </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqui</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Diversidade</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Azulejos alternativos</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√â muito f√°cil adicionar op√ß√µes de mosaico ao algoritmo WFC. </font><font style="vertical-align: inherit;">Basta adicionar os blocos √† lista de poss√≠veis blocos, fazendo com que ele tenha as mesmas conex√µes que o bloco que ele substitui. </font><font style="vertical-align: inherit;">Ou pode ser feito no est√°gio de p√≥s-processamento, como geralmente √© feito em outros estilos de gera√ß√£o de procedimentos.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3d7/b6c/43a/3d7b6c43a0be6522b6a2eac5d85dbd69.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dois azulejos, um deles com uma janela. </font><font style="vertical-align: inherit;">Eles s√£o completamente intercambi√°veis ‚Äã‚Äãe simplesmente adicionam variabilidade ao design.</font></font></i><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Variabilidade do bloco por n√≠vel</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se voc√™ se esfor√ßar bastante para criar um design de conjunto de pe√ßas, notar√° que a aleatoriedade do WFC come√ßa a prejudic√°-lo. </font><font style="vertical-align: inherit;">Ele usa todo o conjunto de pe√ßas, ou seja, voc√™ pode obter um n√≠vel com lava, neve e deserto misturados. </font><font style="vertical-align: inherit;">Muitas vezes isso parece completamente il√≥gico. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voc√™ pode restaurar a integridade de uma maneira simples: decida com anteced√™ncia a qual </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bioma o</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> n√≠vel pertencer√° e, em seguida, desative todos os blocos que n√£o s√£o adequados para esse bioma. </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bad North</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (novamente) √© um excelente exemplo disso. </font><font style="vertical-align: inherit;">Em alguns n√≠veis, as rochas s√£o completamente proibidas, em outros h√° muita vegeta√ß√£o, nas terceiras ru√≠nas e nos cemit√©rios s√£o adicionados. </font><font style="vertical-align: inherit;">Isso confere a cada n√≠vel um estilo √∫nico, sem a necessidade de uma mudan√ßa significativa no estilo de gera√ß√£o.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f2f/556/757/f2f556757da50dae74a44909dca1e76d.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apenas cerca de 10% das ilhas t√™m elementos de cavernas, vis√≠veis no canto superior direito.</font></font></i><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Variabilidade de blocos dentro do mapa</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A mistura de conjuntos de pe√ßas pode ir ainda mais longe. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se voc√™ usar o WFC para gerar um cart√£o grande, ele come√ßar√° a parecer muito uniforme. </font><font style="vertical-align: inherit;">Essa √© outra conseq√º√™ncia do fato de o algoritmo ser um solucionador de </font><font style="vertical-align: inherit;">restri√ß√µes </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">locais</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A melhor solu√ß√£o para esse problema que eu vi no jogo </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Caves of Qud</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Na hist√≥ria dos desenvolvedores sobre a gera√ß√£o ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), eles dizem que dividem o mapa em √°reas diferentes e iniciam o WFC com par√¢metros separados para os subconjuntos do mapa. </font><font style="vertical-align: inherit;">Isso significa que no mapa pode haver uma √°rea de ru√≠nas e uma √°rea de uma cidade na qual modelos e azulejos completamente diferentes s√£o usados.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1b9/45f/762/1b945f762795751a1e66eaa0712110ab.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Exemplo de </font></font><em><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">matem√°tica para desenvolvedores de jogos: gera√ß√£o de mapa com base em blocos usando o colapso da fun√ß√£o Wave em 'Caves of Qud'</font></font></a></em><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclus√£o</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O algoritmo WFC, como todas as t√©cnicas de gera√ß√£o baseadas em restri√ß√µes, tem o princ√≠pio de ser </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cuidadoso com seus desejos</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">√â f√°cil personalizar e obter resultados com apar√™ncia bonita, mas pode ser muito dif√≠cil implementar os detalhes espec√≠ficos necess√°rios para o seu jogo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Espero que as t√©cnicas apresentadas por mim ajudem voc√™ a domesticar esse monstro, mas, no final, √© melhor criar um design de jogo baseado nos pontos fortes da gera√ß√£o de procedimentos, e n√£o tentar for√ß√°-lo a criar demais para voc√™. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eu recomendo que voc√™ jogue </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bad North</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Caves of Qud</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Ambos os jogos s√£o √≥timos exemplos de uso do WFC em condi√ß√µes reais, e os desenvolvedores pensaram bem no uso ideal do algoritmo em seus jogos.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt488322/index.html">Gestos</a></li>
<li><a href="../pt488324/index.html">Fantasma do console. Panasonic M2</a></li>
<li><a href="../pt488326/index.html">Amor ou demiss√£o</a></li>
<li><a href="../pt488330/index.html">Ingl√™s com George Karlin: analisamos o engenhoso posicionamento sobre unidades fraseol√≥gicas</a></li>
<li><a href="../pt488332/index.html">Zero, um, dois, Freddy vai busc√°-lo</a></li>
<li><a href="../pt488338/index.html">Est√°gios do Google: Zurique, Londres e Vale do Sil√≠cio</a></li>
<li><a href="../pt488340/index.html">Profiss√£o: Backend Developer</a></li>
<li><a href="../pt488342/index.html">Random Forest, o m√©todo dos componentes principais e otimiza√ß√£o de hiperpar√¢metros: um exemplo de solu√ß√£o do problema de classifica√ß√£o em Python</a></li>
<li><a href="../pt488346/index.html">Instalando or-tools com SCIP e GLPK em um ambiente virtual Python 3.7 no Linux</a></li>
<li><a href="../pt488348/index.html">Webinar ‚ÄúOs dez principais desafios √°geis e como super√°-los em uma hora‚Äù 17 de fevereiro √†s 20:00, hor√°rio de Moscou</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>