<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>♥️ 🐹 🐑 Dicas para usar o algoritmo de recolhimento da função Wave 👩🏽‍🤝‍👩🏻 🚁 🙄</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recentemente, experimentei muito a geração baseada em restrições processuais. Em particular, com o algoritmo Wave Function Collapse (WFC, wave functio...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Dicas para usar o algoritmo de recolhimento da função Wave</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/488336/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f2f/556/757/f2f556757da50dae74a44909dca1e76d.png" alt="imagem"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Recentemente, experimentei muito a geração baseada em restrições processuais. Em particular, com o algoritmo </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wave Function Collapse</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (WFC, wave function collapse). Eu até escrevi minha própria </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">biblioteca de código aberto</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">recurso de unidade</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O WFC é um algoritmo muito flexível, especialmente com as melhorias que desenvolvi. Mas, ao mesmo tempo, achei difícil criar </font><font style="vertical-align: inherit;">níveis </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">práticos</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> aplicáveis ​​aos jogos de computador </font><font style="vertical-align: inherit;">com sua ajuda </font><font style="vertical-align: inherit;">. A principal dificuldade é que o WFC não possui estrutura global. Tudo o que ele faz é fazer a geração de saída parecer localmente semelhante à entrada, por exemplo, observando pequenos retângulos individuais da saída.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Neste artigo, vou contar o que aprendi e o que será capaz de elevar os geradores com base nas restrições para um novo nível.</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O básico</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
É difícil usar o WFC se você não sabe como ele funciona. Este é um algoritmo de geração de procedimentos </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">baseado em restrições</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> que tem recebido muita atenção recentemente. De fato, praticamente nada tem a ver com o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">conceito de física quântica</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> em cuja honra foi nomeado. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O WFC é fácil de configurar - você fornece apenas um exemplo de cartão ao algoritmo, após o qual ele gera novos cartões que se </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">parecem</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> com o cartão original devido ao uso repetido de seus pequenos fragmentos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tem dois tipos - com um arranjo vizinho ou com uma sobreposição de elementos. Isso pode ser feito em 2D ou 3D, e mesmo em grades de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hexágonos</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ou </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">irregulares</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">grades. </font><font style="vertical-align: inherit;">A maioria das minhas dicas se aplica independentemente de como você usa o algoritmo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sugiro que você jogue com </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">esta demonstração</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para ter uma idéia do algoritmo e leia </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">esta introdução</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> [ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tradução</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> em Habré] se estiver interessado em detalhes técnicos.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Design do conjunto de peças</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O algoritmo WFC é baseado em blocos. </font><font style="vertical-align: inherit;">Nesse sentido, sua qualidade depende dos blocos que você transfere para o trabalho. </font><font style="vertical-align: inherit;">Eu não sou um artista, por isso posso ajudar pouco no desenho de belos conjuntos de peças (embora você possa </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ver aqui</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), mas um bom conjunto de peças também requer conhecimento técnico.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cubos de marcha</font></font></h3><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cubos de marcha</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> é um algoritmo que seleciona quais blocos definir, dependendo de cada vértice do bloco estar cheio ou vazio. </font><font style="vertical-align: inherit;">Aqui está a lista de blocos usados ​​para 2D.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/404/214/092/404214092cf2f31e96b3b6f2a267c622.svg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Se você criar ladrilhos para que os cantos preto e branco sempre correspondam, as linhas vermelhas sempre serão conectadas corretamente. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui não precisamos entender todo o algoritmo, mas deve-se notar que a ideia de projetar blocos levando em consideração apenas o comportamento nos cantos é uma técnica muito poderosa. </font><font style="vertical-align: inherit;">É usado em muitos dos melhores conjuntos de peças, pois garante que as peças sempre se conectem bem.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Essa técnica é especialmente poderosa para o WFC. </font><font style="vertical-align: inherit;">Aconteceu, porque se você perder algumas peças, o WFC não importará. </font><font style="vertical-align: inherit;">Ele contornará esse problema e nunca criará configurações que exijam blocos ausentes. </font><font style="vertical-align: inherit;">Isso é muito conveniente para o 3D, pois existem dezenas de blocos em potencial e alguns deles são necessários apenas em situações muito difíceis. </font><font style="vertical-align: inherit;">Veja a seção “Fundação” abaixo, na qual eu uso esse truque ainda mais amplamente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Conhecer </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">outros padrões de ladrilhos</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> também pode ser útil </font><font style="vertical-align: inherit;">, mas o Marching Cubes é o melhor.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Os quartos</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Às vezes, é mais fácil trabalhar com conjuntos de peças simples. </font><font style="vertical-align: inherit;">Esta combinação de 4 peças (uma peça está vazia) gera facilmente salas quadradas.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/dd0/bbb/376/dd0bbb3765876baac62417e760149058.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e76/245/14b/e7624514b5103da9afa5e4be2fce86c3.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O tamanho das salas pode ser facilmente alterado alterando o peso de cada ladrilho. </font><font style="vertical-align: inherit;">Depois de adicionar os ladrilhos da porta e do corredor, você pode criar a diversidade característica das plantas das pessoas.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fundação</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ao trabalhar com o WFC, é interessante experimentar conjuntos de peças. </font><font style="vertical-align: inherit;">Se você simplesmente colocar um bloco, o WFC procura extrair o máximo do espaço restante. </font><font style="vertical-align: inherit;">Às vezes, isso leva a resultados radicalmente diferentes, como pode ser visto na imagem de Maxim Gumin:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a4f/980/7b9/a4f9807b976fa295e85b9ae0d36d3918.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Podemos usar esse comportamento para estimular o WFC a gerar muitas estruturas reconhecíveis. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui está um exemplo de castelo (inspirado em </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@greentecq</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ):</font></font><br>
<br>
<div class="oembed"><twitter-widget class="twitter-tweet twitter-tweet-rendered" id="twitter-widget-0" style="position: static; visibility: visible; display: block; transform: rotate(0deg); max-width: 100%; width: 500px; min-width: 220px; margin-top: 10px; margin-bottom: 10px;" data-tweet-id="1183359478734958593"></twitter-widget>
<script async="" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
</div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nele, usei o seguinte conjunto de peças:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c0b/852/df1/c0b852df1c18974c8114d48d3b7f3290.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esses ladrilhos têm uma propriedade importante - todos os ladrilhos na base têm uma largura não inferior à do topo. </font><font style="vertical-align: inherit;">Isso significa que não é possível construir esses blocos de maneira não suportada. </font><font style="vertical-align: inherit;">O WFC responde imediatamente a isso e cria edifícios com uma boa base.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aproximação de Fractal Split</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Estudando o tópico de estimular certos comportamentos escolhendo o conjunto de peças apropriado, descobri que se o conjunto de peças consiste em estradas e galhos retos, mas sem cantos, é possível obter uma boa aproximação da </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">divisão recursiva</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (sem a parte "recursiva"). </font><font style="vertical-align: inherit;">Isso é muito bom para os níveis da grade.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Big tiles</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Você pode adicionar o WFC para oferecer suporte a blocos que são várias vezes maiores que um bloco regular. Por exemplo, isso é suportado no </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">meu complemento Tessera</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ladrilhos grandes podem ser usados ​​de várias maneiras. Como eles se estendem além dos limites da grade, você pode usá-los para adicionar curvas mais suaves e amplas do que normalmente é possível ao fazer snap na grade. Eles também são ótimos para elementos de um grande número de blocos, ou simplesmente para mascarar que a geração é baseada em blocos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui está um exemplo para aprender com </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">Oscar Stalberg </font></a></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">do</font></font></a> <font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> jogo </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">Bad North</font></a><font style="vertical-align: inherit;"> . Oscar demonstra como ele usou telhas grandes para adicionar costas curvas, casas grandes e variabilidade do penhasco.</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
<br>
<div class="oembed"><twitter-widget class="twitter-tweet twitter-tweet-rendered" id="twitter-widget-1" style="position: static; visibility: visible; display: block; transform: rotate(0deg); max-width: 100%; width: 500px; min-width: 220px; margin-top: 10px; margin-bottom: 10px;" data-tweet-id="1131228226901172226"></twitter-widget>
<script async="" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
</div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Limitações</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Na sua essência, o WFC é um algoritmo baseado em restrições. </font><font style="vertical-align: inherit;">Isso significa que ele procura gerar níveis que correspondam a um conjunto específico de critérios. </font><font style="vertical-align: inherit;">No WFC puro, há apenas um critério - que os níveis pareçam localmente como uma entrada de amostra. </font><font style="vertical-align: inherit;">Abaixo, falarei sobre aprimoramentos do WFC para adicionar novos tipos de restrições.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ladrilhos fixos</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
É muito fácil corrigir blocos individuais antes de gerar um nível no WFC. </font><font style="vertical-align: inherit;">Mais tarde, eles se integram perfeitamente ao nível gerado.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1f0/df3/619/1f0df3619f947a7a71e72b389bc38e15.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Antes da geração</font></font></i><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/93f/2c2/5be/93f2c25be4b716f62fa16b0b67c36a5b.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Após a geração</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Esta técnica pode ser usada de várias maneiras diferentes. </font><font style="vertical-align: inherit;">Aqui estão algumas idéias:</font></font><br>
<br>
<ul>
<li>      </li>
<li>  - ,   WFC    .</li>
<li>    ,    </li>
<li> /    WFC   </li>
</ul><br>
<br>
<h3> </h3><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Caminhos de limitação</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (restrição de caminho) - esta é minha própria contribuição para o WFC. Essa é uma técnica extremamente poderosa, mas um artigo completo provavelmente exigirá um artigo separado. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Essa restrição </font><font style="vertical-align: inherit;">verifica </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">globalmente</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> toda a saída gerada e indica à força que um caminho deve passar entre os blocos marcados. Ou, em outras palavras, diz a um subconjunto de blocos para formar um único </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">componente do gráfico</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Devido à sua natureza global, ele complementa o comportamento usual do WFC, que leva em conta apenas os blocos locais. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Descobri que adicionar essa restrição afeta fortemente a aparência do nível gerado. Sem ele, o WFC geralmente gera várias salas ou áreas divididas que parecem irreais e não criadas por seres humanos.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b88/353/c19/b88353c19a3ebc27db979150a3c30af2.png"></div><br>
<i>   </i><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a91/928/346/a919283460b31c6c8b901609d9490ede.png"></div><br>
<i>   .       .</i><br>
<br>
<h3>   </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Outra situação em que a limitação do caminho é apropriada é ... desenhar caminhos. Por padrão, a restrição de caminho garante apenas </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a existência de uma</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> rota entre blocos. Não garante que o caminho seja o mais simples possível. Portanto, no caso de rios e estradas, ele desenha juntas em forma de T em locais opcionais. O truque é simplesmente remover todos os ladrilhos das juntas em T ou dar-lhes um peso muito baixo, para que sejam selecionados apenas se for absolutamente necessário. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adoro usar blocos fixos para corrigir os pontos finais de um caminho. Por esse motivo, a restrição de caminho é necessária para inserir blocos que conectam o restante do caminho.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/aa0/448/f77/aa0448f778179d53dd4b9236fc33aa17.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Os caminhos gerados pela fixação de todos os quatro cantos como pontos finais dos caminhos</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Se você quiser experimentar caminhos, tenho uma pequena demonstração em javascript que é apresentada </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqui</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Diversidade</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Azulejos alternativos</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
É muito fácil adicionar opções de mosaico ao algoritmo WFC. </font><font style="vertical-align: inherit;">Basta adicionar os blocos à lista de possíveis blocos, fazendo com que ele tenha as mesmas conexões que o bloco que ele substitui. </font><font style="vertical-align: inherit;">Ou pode ser feito no estágio de pós-processamento, como geralmente é feito em outros estilos de geração de procedimentos.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3d7/b6c/43a/3d7b6c43a0be6522b6a2eac5d85dbd69.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dois azulejos, um deles com uma janela. </font><font style="vertical-align: inherit;">Eles são completamente intercambiáveis ​​e simplesmente adicionam variabilidade ao design.</font></font></i><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Variabilidade do bloco por nível</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se você se esforçar bastante para criar um design de conjunto de peças, notará que a aleatoriedade do WFC começa a prejudicá-lo. </font><font style="vertical-align: inherit;">Ele usa todo o conjunto de peças, ou seja, você pode obter um nível com lava, neve e deserto misturados. </font><font style="vertical-align: inherit;">Muitas vezes isso parece completamente ilógico. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Você pode restaurar a integridade de uma maneira simples: decida com antecedência a qual </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bioma o</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nível pertencerá e, em seguida, desative todos os blocos que não são adequados para esse bioma. </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bad North</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (novamente) é um excelente exemplo disso. </font><font style="vertical-align: inherit;">Em alguns níveis, as rochas são completamente proibidas, em outros há muita vegetação, nas terceiras ruínas e nos cemitérios são adicionados. </font><font style="vertical-align: inherit;">Isso confere a cada nível um estilo único, sem a necessidade de uma mudança significativa no estilo de geração.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f2f/556/757/f2f556757da50dae74a44909dca1e76d.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apenas cerca de 10% das ilhas têm elementos de cavernas, visíveis no canto superior direito.</font></font></i><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Variabilidade de blocos dentro do mapa</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A mistura de conjuntos de peças pode ir ainda mais longe. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se você usar o WFC para gerar um cartão grande, ele começará a parecer muito uniforme. </font><font style="vertical-align: inherit;">Essa é outra conseqüência do fato de o algoritmo ser um solucionador de </font><font style="vertical-align: inherit;">restrições </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">locais</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A melhor solução para esse problema que eu vi no jogo </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Caves of Qud</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Na história dos desenvolvedores sobre a geração ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), eles dizem que dividem o mapa em áreas diferentes e iniciam o WFC com parâmetros separados para os subconjuntos do mapa. </font><font style="vertical-align: inherit;">Isso significa que no mapa pode haver uma área de ruínas e uma área de uma cidade na qual modelos e azulejos completamente diferentes são usados.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1b9/45f/762/1b945f762795751a1e66eaa0712110ab.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Exemplo de </font></font><em><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">matemática para desenvolvedores de jogos: geração de mapa com base em blocos usando o colapso da função Wave em 'Caves of Qud'</font></font></a></em><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusão</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O algoritmo WFC, como todas as técnicas de geração baseadas em restrições, tem o princípio de ser </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cuidadoso com seus desejos</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">É fácil personalizar e obter resultados com aparência bonita, mas pode ser muito difícil implementar os detalhes específicos necessários para o seu jogo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Espero que as técnicas apresentadas por mim ajudem você a domesticar esse monstro, mas, no final, é melhor criar um design de jogo baseado nos pontos fortes da geração de procedimentos, e não tentar forçá-lo a criar demais para você. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eu recomendo que você jogue </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bad North</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Caves of Qud</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Ambos os jogos são ótimos exemplos de uso do WFC em condições reais, e os desenvolvedores pensaram bem no uso ideal do algoritmo em seus jogos.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt488322/index.html">Gestos</a></li>
<li><a href="../pt488324/index.html">Fantasma do console. Panasonic M2</a></li>
<li><a href="../pt488326/index.html">Amor ou demissão</a></li>
<li><a href="../pt488330/index.html">Inglês com George Karlin: analisamos o engenhoso posicionamento sobre unidades fraseológicas</a></li>
<li><a href="../pt488332/index.html">Zero, um, dois, Freddy vai buscá-lo</a></li>
<li><a href="../pt488338/index.html">Estágios do Google: Zurique, Londres e Vale do Silício</a></li>
<li><a href="../pt488340/index.html">Profissão: Backend Developer</a></li>
<li><a href="../pt488342/index.html">Random Forest, o método dos componentes principais e otimização de hiperparâmetros: um exemplo de solução do problema de classificação em Python</a></li>
<li><a href="../pt488346/index.html">Instalando or-tools com SCIP e GLPK em um ambiente virtual Python 3.7 no Linux</a></li>
<li><a href="../pt488348/index.html">Webinar “Os dez principais desafios ágeis e como superá-los em uma hora” 17 de fevereiro às 20:00, horário de Moscou</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>