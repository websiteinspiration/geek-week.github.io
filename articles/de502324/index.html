<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üõ¨ üç¢ üñãÔ∏è Tauchen Sie ein in den Delta Lake: Durchsetzung und Evolution üë≤üèæ üßñüèæ ü•Ñ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo Habr! Ich pr√§sentiere Ihnen die √úbersetzung des Artikels ‚ÄûTauchen in den Delta-See: Schema-Durchsetzung und -Evolution‚Äú von Burak Yavuz, Brenner...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Tauchen Sie ein in den Delta Lake: Durchsetzung und Evolution</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/502324/"><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hallo Habr! </font><font style="vertical-align: inherit;">Ich pr√§sentiere Ihnen die √úbersetzung des Artikels </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ÄûTauchen in den Delta-See: Schema-Durchsetzung und -Evolution‚Äú</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> von Burak Yavuz, Brenner Heintz und Denny Lee, der vor dem Start des </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Data Engineer-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Kurses </font><font style="vertical-align: inherit;">von OTUS vorbereitet wurde.</font></font></b></i><br>
<br>
<img src="https://habrastorage.org/webt/ay/i_/du/ayi_duoudcu7utibiotdubtoegm.png"><br>
<br>
<hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Daten sammeln sich wie unsere Erfahrung st√§ndig an und entwickeln sich weiter. Um Schritt zu halten, m√ºssen sich unsere mentalen Modelle der Welt an neue Daten anpassen, von denen einige neue Dimensionen enthalten - neue Arten, Dinge zu beobachten, von denen wir vorher keine Ahnung hatten. Diese mentalen Modelle unterscheiden sich nicht wesentlich von Tabellenschemata, die bestimmen, wie wir neue Informationen klassifizieren und verarbeiten.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dies bringt uns zum Thema Schaltungsmanagement. </font><font style="vertical-align: inherit;">Wenn sich Gesch√§ftsaufgaben und -anforderungen im Laufe der Zeit √§ndern, √§ndert sich die Struktur Ihrer Daten. </font><font style="vertical-align: inherit;">Delta Lake macht es einfach, neue Messungen durchzuf√ºhren, wenn sich Daten √§ndern. </font><font style="vertical-align: inherit;">Benutzer haben Zugriff auf einfache Semantik zum Verwalten der Layouts ihrer Tabellen. </font><font style="vertical-align: inherit;">Zu diesen Tools geh√∂ren die Schema-Durchsetzung, mit der Benutzer vor versehentlichem Verstopfen ihrer Tabellen mit Fehlern oder unn√∂tigen Daten gesch√ºtzt werden, sowie Schema Evolution, mit dem automatisch neue Spalten mit wertvollen Daten an den entsprechenden Stellen hinzugef√ºgt werden. </font><font style="vertical-align: inherit;">In diesem Artikel werden wir uns eingehender mit der Verwendung dieser Tools befassen.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tabellenschemata verstehen</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jeder DataFrame in Apache Spark enth√§lt ein Schema, das ein Datenformular definiert, z. B. Datentypen, Spalten und Metadaten. </font><font style="vertical-align: inherit;">Mit Delta Lake wird das Tabellenschema im JSON-Format im Transaktionsprotokoll gespeichert.</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Was ist das Erzwingen eines Schemas?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Schema Enforcement, auch als Schema Validation bezeichnet, ist ein Verteidigungsmechanismus in Delta Lake, der die Datenqualit√§t garantiert, indem Datens√§tze abgelehnt werden, die nicht mit dem Tabellenschema √ºbereinstimmen. </font><font style="vertical-align: inherit;">Wie die Gastgeberin an der Rezeption in einem beliebten Restaurant, das nur nach vorheriger Reservierung akzeptiert, pr√ºft er, ob jede in der Tabelle eingegebene Datenspalte in der entsprechenden Liste der erwarteten Spalten enthalten ist (mit anderen Worten, gibt es f√ºr jede Spalte eine ‚ÄûReservierung‚Äú). und lehnt alle Eintr√§ge mit Spalten ab, die nicht in der Liste enthalten sind.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wie funktioniert die Durchsetzung einer Schaltung?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Delta Lake verwendet beim Schreiben eine Schema√ºberpr√ºfung. Dies bedeutet, dass alle neuen Datens√§tze in der Tabelle w√§hrend der Aufzeichnung auf Kompatibilit√§t mit dem Schema der Zieltabelle √ºberpr√ºft werden. </font><font style="vertical-align: inherit;">Wenn das Schema nicht kompatibel ist, bricht Delta Lake die Transaktion vollst√§ndig ab (Daten werden nicht geschrieben) und l√∂st eine Ausnahme aus, um den Benutzer √ºber die Diskrepanz zu informieren. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um die Datensatzkompatibilit√§t mit einer Tabelle zu bestimmen, verwendet Delta Lake die folgenden Regeln. </font><font style="vertical-align: inherit;">Beschreibbarer DataFrame:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">darf keine zus√§tzlichen Spalten enthalten, die nicht im Schema der Zieltabelle enthalten sind. </font><font style="vertical-align: inherit;">Und umgekehrt ist alles in Ordnung, wenn die Eingabedaten nicht absolut alle Spalten aus der Tabelle enthalten - diesen Spalten werden einfach Nullwerte zugewiesen.</font></font></li>
<li>     ,         .       StringType,     DataFrame   IntegerType,          .</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">darf keine Spaltennamen enthalten, die sich nur f√ºr den Fall unterscheiden. </font><font style="vertical-align: inherit;">Dies bedeutet, dass Sie keine Spalten mit den Namen 'Foo' und 'foo' in derselben Tabelle definieren k√∂nnen. </font><font style="vertical-align: inherit;">Obwohl Spark in Gro√ü- und Kleinschreibung oder ohne Ber√ºcksichtigung der Gro√ü- und Kleinschreibung verwendet werden kann (Standard), unterscheidet Delta Lake zwischen Gro√ü- und Kleinschreibung, jedoch nicht zwischen Gro√ü- und Kleinschreibung. </font><font style="vertical-align: inherit;">Bei Parkett wird beim Speichern und Zur√ºckgeben von Spalteninformationen zwischen Gro√ü- und Kleinschreibung unterschieden. </font><font style="vertical-align: inherit;">Um m√∂gliche Fehler, Datenbesch√§digungen oder Datenverluste (die wir pers√∂nlich in den Databricks festgestellt haben) zu vermeiden, haben wir beschlossen, diese Einschr√§nkung hinzuzuf√ºgen.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um dies zu veranschaulichen, werfen wir einen Blick darauf, was im folgenden Code passiert, wenn Sie versuchen, einige k√ºrzlich generierte Spalten zu einer Delta Lake-Tabelle hinzuzuf√ºgen, die noch nicht f√ºr die Annahme dieser Spalten konfiguriert ist.</font></font><br>
<br>
<pre><code class="apache hljs"><span class="hljs-comment">#  DataFrame ,       Delta Lake</span>
<span class="hljs-attribute">loans</span> = sql(<span class="hljs-string">""</span><span class="hljs-string">"
            SELECT addr_state, CAST(rand(10)*count as bigint) AS count,
            CAST(rand(10) * 10000 * count AS double) AS amount
            FROM loan_by_state_delta
            "</span><span class="hljs-string">""</span>)<font></font>
<font></font>
<span class="hljs-comment">#    DataFrame</span>
<span class="hljs-attribute">original_loans</span>.printSchema()<font></font>
<font></font>
<span class="hljs-attribute">root</span>
  |-- <span class="hljs-attribute">addr_state</span>: string (nullable = true)<font></font>
  |-- <span class="hljs-attribute">count</span>: integer (nullable = true)<font></font>
 <font></font>
<span class="hljs-comment">#    DataFrame</span>
<span class="hljs-attribute">loans</span>.printSchema()<font></font>
 <font></font>
<span class="hljs-attribute">root</span>
  |-- <span class="hljs-attribute">addr_state</span>: string (nullable = true)<font></font>
  |-- <span class="hljs-attribute">count</span>: integer (nullable = true)<font></font>
  |-- <span class="hljs-attribute">amount</span>: double (nullable = true) # new column<font></font>
 <font></font>
<span class="hljs-comment">#    DataFrame (  )   </span>
<span class="hljs-attribute">loans</span>.write.format(<span class="hljs-string">"delta"</span>) \<font></font>
           .<span class="hljs-attribute">mode</span>(<span class="hljs-string">"append"</span>) \<font></font>
           .<span class="hljs-attribute">save</span>(DELTALAKE_PATH)<font></font>
<font></font>
<span class="hljs-attribute">Returns</span>:<font></font>
<font></font>
<span class="hljs-attribute">A</span> schema mismatch detected when writing to the Delta table.<font></font>
 <font></font>
<span class="hljs-attribute">To</span> enable schema migration, please set:<font></font>
'.<span class="hljs-attribute">option</span>(<span class="hljs-string">"mergeSchema"</span>, <span class="hljs-string">"true"</span>)\'<font></font>
 <font></font>
<span class="hljs-attribute">Table</span> schema:
<span class="hljs-attribute">root</span>
-- <span class="hljs-attribute">addr_state</span>: string (nullable = true)<font></font>
-- <span class="hljs-attribute">count</span>: long (nullable = true)<font></font>
 <font></font>
<span class="hljs-attribute">Data</span> schema:
<span class="hljs-attribute">root</span>
-- <span class="hljs-attribute">addr_state</span>: string (nullable = true)<font></font>
-- <span class="hljs-attribute">count</span>: long (nullable = true)<font></font>
-- <span class="hljs-attribute">amount</span>: double (nullable = true)<font></font>
 <font></font>
<span class="hljs-attribute">If</span> Table ACLs are enabled, these options will be ignored. Please use the ALTER TABLE command for changing the schema.</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anstatt automatisch neue Spalten hinzuzuf√ºgen, legt Delta Lake ein Diagramm fest und beendet die Aufzeichnung. </font><font style="vertical-align: inherit;">Um festzustellen, welche Spalte (oder mehrere davon) die Ursache f√ºr die Nicht√ºbereinstimmung ist, zieht Spark beide Schemata zum Vergleich aus dem Stapelstapel.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Was n√ºtzt die Durchsetzung eines Schemas?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Da das Erzwingen eines Schemas ein ziemlich strenger Test ist, ist es ein hervorragendes Werkzeug f√ºr die Verwendung eines sauberen, vollst√§ndig transformierten Datensatzes, der als Gatekeeper f√ºr die Produktion oder den Verbrauch bereit ist. </font><font style="vertical-align: inherit;">In der Regel wird es auf Tabellen angewendet, die direkt Daten liefern:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Algorithmen f√ºr maschinelles Lernen</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BI-Dashboards</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tools f√ºr Datenanalyse und Visualisierung</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jedes Produktionssystem, das streng strukturierte, stark typisierte semantische Schemata erfordert.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um ihre Daten auf diese letzte Barriere vorzubereiten, verwenden viele Benutzer eine einfache ‚ÄûMulti-Hop‚Äú -Architektur, die ihre Tabellen schrittweise strukturiert. </font><font style="vertical-align: inherit;">Weitere Informationen hierzu finden Sie im Artikel √ºber </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">maschinelles Lernen auf Maschinenebene von Delta Lake. </font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nat√ºrlich k√∂nnen Sie die erzwungene Anwendung des Schemas an einer beliebigen Stelle in Ihrer Pipeline verwenden. Beachten Sie jedoch, dass das Streaming in eine Tabelle in diesem Fall frustrierend sein kann, da Sie beispielsweise vergessen haben, dass Sie den Eingabedaten eine weitere Spalte hinzugef√ºgt haben.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verhinderung der Datenverd√ºnnung</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
An diesem Punkt wundern Sie sich vielleicht, warum so viel Aufsehen erregt? Schlie√ülich kann manchmal ein unerwarteter Fehler ‚ÄûSchema-Nicht√ºbereinstimmung‚Äú dazu f√ºhren, dass Sie in Ihrem Workflow auf dem Zug sind, insbesondere wenn Sie Delta Lake noch nicht kennen. Warum nicht einfach das Schema nach Bedarf √§ndern lassen, damit ich meinen DataFrame schreiben kann, egal was passiert?</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie das alte Sprichwort sagt: "Eine Unze Pr√§vention ist ein Pfund Heilung wert." Wenn Sie sich nicht um die Anwendung Ihres Schemas k√ºmmern, werden Probleme mit der Datentypkompatibilit√§t irgendwann zu Ekel f√ºhren. Auf den ersten Blick k√∂nnen homogene Rohdatenquellen Grenzf√§lle, besch√§digte Spalten, fehlerhafte Zuordnungen oder andere be√§ngstigende Dinge enthalten, die tr√§umen in Albtr√§umen. Der beste Ansatz besteht darin, diese Feinde vor den Toren zu stoppen - indem Sie das Schema durchsetzen - und sie im Licht zu behandeln, nicht sp√§ter, wenn sie beginnen, die dunklen Tiefen Ihres Arbeitscodes zu durchsuchen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Durch das Erzwingen eines Schemas k√∂nnen Sie sicher sein, dass sich das Schema Ihrer Tabelle nicht √§ndert, es sei denn, Sie best√§tigen die √Ñnderungsoption selbst. </font><font style="vertical-align: inherit;">Dies verhindert die Verw√§sserung von Daten, die auftreten k√∂nnen, wenn neue Spalten so oft hinzugef√ºgt werden, dass zuvor wertvolle, komprimierte Tabellen aufgrund von Datenfluten ihren Wert und ihre N√ºtzlichkeit verlieren. </font><font style="vertical-align: inherit;">Indem Sie dazu ermutigt werden, absichtlich zu sein, hohe Standards zu setzen und hohe Qualit√§t zu erwarten, bewirkt die Durchsetzung des Systems genau das, was es Ihnen helfen soll, ehrlich zu bleiben und Ihre Tische sauber zu halten. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn bei weiterer √úberlegung, Sie entscheiden , </font><font style="vertical-align: inherit;">dass Sie wirklich </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">brauchen</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> eine neue Spalte hinzuf√ºgen - kein Problem, ist eine einzeilige fix. </font><font style="vertical-align: inherit;">Die L√∂sung ist die Entwicklung der Schaltung!</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Was ist Schaltungsentwicklung?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Schemaentwicklung ist eine Funktion, mit der Benutzer das aktuelle Tabellenschema einfach anhand von Daten √§ndern k√∂nnen, die sich im Laufe der Zeit √§ndern. </font><font style="vertical-align: inherit;">In den meisten F√§llen wird es beim Ausf√ºhren eines Hinzuf√ºgens oder Umschreibens verwendet, um das Layout automatisch so anzupassen, dass es eine oder mehrere neue Spalten enth√§lt.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wie funktioniert die Schaltungsentwicklung?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nach dem Beispiel aus dem vorherigen Abschnitt k√∂nnen Entwickler die Entwicklung des Schemas problemlos verwenden, um neue Spalten hinzuzuf√ºgen, die zuvor aufgrund der Nicht√ºbereinstimmung des Schemas abgelehnt wurden. </font><font style="vertical-align: inherit;">Die Schemaentwicklung wird durch Hinzuf√ºgen </font></font><code>.option('mergeSchema', 'true')</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zu Ihrem Spark-Team </font><font style="vertical-align: inherit;">aktiviert </font><font style="vertical-align: inherit;">.</font></font><code>.write  .writeStream.</code><br>
<br>
<pre><code class="apache hljs"><span class="hljs-comment">#   mergeSchema</span>
<span class="hljs-attribute">loans</span>.write.format(<span class="hljs-string">"delta"</span>) \<font></font>
           .<span class="hljs-attribute">option</span>(<span class="hljs-string">"mergeSchema"</span>, <span class="hljs-string">"true"</span>) \<font></font>
           .<span class="hljs-attribute">mode</span>(<span class="hljs-string">"append"</span>) \<font></font>
           .<span class="hljs-attribute">save</span>(DELTALAKE_SILVER_PATH)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
F√ºhren Sie die folgende Spark SQL-Abfrage aus, um das Diagramm anzuzeigen</font></font><br>
<br>
<pre><code class="apache hljs"><span class="hljs-comment">#     ,  ,    </span>
%<span class="hljs-attribute">sql</span>
<span class="hljs-attribute">SELECT</span> addr_state, sum(`amount`) AS amount
<span class="hljs-attribute">FROM</span> loan_by_state_delta
<span class="hljs-attribute">GROUP</span> BY addr_state
<span class="hljs-attribute"><span class="hljs-nomarkup">ORDER</span></span> BY sum(`amount`)
<span class="hljs-attribute">DESC</span> LIMIT <span class="hljs-number">10</span></code></pre><br>
<img src="https://habrastorage.org/getpro/habr/post_images/5e8/599/d11/5e8599d1121f80df2f74f80f68bcb372.png" alt="Bild"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alternativ k√∂nnen Sie diese Option f√ºr die gesamte Spark-Sitzung festlegen, indem Sie </font></font><code>spark.databricks.delta.schema.autoMerge = True</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">der Konfiguration </font><font style="vertical-align: inherit;">Spark hinzuf√ºgen </font><font style="vertical-align: inherit;">. Verwenden Sie dies jedoch mit Vorsicht, da Sie beim Durchsetzen eines Schemas nicht mehr vor versehentlichen Inkonsistenzen mit dem Schema gewarnt werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Durch </font></font><code>mergeSchema</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Einf√ºgen </font><font style="vertical-align: inherit;">eines Parameters in die Abfrage </font><font style="vertical-align: inherit;">werden alle Spalten, die im DataFrame vorhanden sind, sich jedoch nicht in der Zieltabelle befinden, als Teil der Schreibtransaktion automatisch am Ende des Schemas hinzugef√ºgt. Verschachtelte Felder k√∂nnen ebenfalls hinzugef√ºgt werden und werden auch am Ende der entsprechenden Strukturspalten hinzugef√ºgt.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Datumsingenieure und Wissenschaftler k√∂nnen diese Option verwenden, um neue Spalten (m√∂glicherweise eine k√ºrzlich erfasste Metrik oder eine Spalte mit Verkaufsmetriken in diesem Monat) zu ihren vorhandenen Produktionstabellen f√ºr maschinelles Lernen hinzuzuf√ºgen, ohne vorhandene Modelle basierend auf alten Spalten zu besch√§digen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die folgenden Arten von Schema√§nderungen sind im Rahmen der Weiterentwicklung des Schemas beim Hinzuf√ºgen oder Umschreiben einer Tabelle zul√§ssig:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hinzuf√ºgen neuer Spalten (dies ist das h√§ufigste Szenario)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√Ñndern Sie die Datentypen von NullType -&gt; einem anderen Typ oder erh√∂hen Sie sie von ByteType -&gt; ShortType -&gt; IntegerType</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Andere √Ñnderungen, die im Rahmen der Entwicklung eines Schemas nicht akzeptabel sind, erfordern, dass das Schema und die Daten durch Hinzuf√ºgen √ºberschrieben werden </font></font><code>.option("overwriteSchema", "true")</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Wenn beispielsweise die Spalte ‚ÄûFoo‚Äú urspr√ºnglich eine Ganzzahl war und das neue Schema ein Zeichenfolgendatentyp ist, m√ºssen alle Parkettdateien (Daten) neu geschrieben werden. </font><font style="vertical-align: inherit;">Diese √Ñnderungen umfassen:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Spalte l√∂schen</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√Ñndern Sie den Datentyp einer vorhandenen Spalte (vorhanden).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Umbenennen von Spalten, bei denen nur zwischen Gro√ü- und Kleinschreibung unterschieden wird (z. B. "Foo" und "foo")</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Schlie√ülich wird mit der n√§chsten Version von Spark 3.0 die explizite DDL (mit ALTER TABLE) vollst√§ndig unterst√ºtzt, sodass Benutzer die folgenden Aktionen f√ºr Tabellenschemata ausf√ºhren k√∂nnen:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Spalten hinzuf√ºgen</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Spaltenkommentare √§ndern</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Festlegen von Tabelleneigenschaften, die das Verhalten der Tabelle bestimmen, z. B. Festlegen der Dauer der Transaktionsprotokollspeicherung.</font></font></li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Was n√ºtzt die Schaltungsentwicklung?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie k√∂nnen immer Schemaevolution verwenden , </font><font style="vertical-align: inherit;">wenn Sie </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">beabsichtigen,</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> das Schema Ihrer Tabelle zu </font><font style="vertical-align: inherit;">√§ndern (im Gegensatz zu den F√§llen , im </font><font style="vertical-align: inherit;">Gegensatz , </font><font style="vertical-align: inherit;">wenn Sie versehentlich Spalten zu Ihrem Datenrahmen hinzuf√ºgen , </font><font style="vertical-align: inherit;">die nicht da sein sollen). </font><font style="vertical-align: inherit;">Dies ist der einfachste Weg, um Ihr Schema zu migrieren, da automatisch die richtigen Spaltennamen und Datentypen hinzugef√ºgt werden, ohne dass diese explizit deklariert werden m√ºssen.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fazit</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Erzwingen eines Schemas lehnt alle neuen Spalten oder andere Schema√§nderungen ab, die nicht mit Ihrer Tabelle kompatibel sind. Durch die Festlegung und Aufrechterhaltung dieser hohen Standards k√∂nnen sich Analysten und Ingenieure auf die Tatsache verlassen, dass ihre Daten ein H√∂chstma√ü an Integrit√§t aufweisen. Sie k√∂nnen dies klar und deutlich begr√ºnden und so effektivere Gesch√§ftsentscheidungen treffen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Andererseits erg√§nzt die Entwicklung der Schaltung die Durchsetzung und vereinfacht die </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">angeblichen</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> automatischen √Ñnderungen an der Schaltung. Am Ende sollte es nicht schwierig sein, eine Spalte hinzuzuf√ºgen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die erzwungene Anwendung der Schaltung ist Yang, wobei die Entwicklung der Schaltung Yin ist. Zusammengenommen machen diese Funktionen die Rauschunterdr√ºckung und Signalabstimmung einfacher als je zuvor.</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir m√∂chten uns auch bei Mukul Murti und Pranava Ananda f√ºr ihre Beitr√§ge zu diesem Artikel bedanken. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Weitere Artikel in der Reihe: </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tauchen Sie ein in Delta Lake: Auspacken eines Transaktionsprotokolls</font></font></a><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/tjb10n5wVs8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zum Thema passende Artikel</font></font></h2><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Maschinelles Lernen auf Produktionsebene in Delta Lake </font></font></a><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Was ist ein Datensee?</font></font></a><br>
<br>
<hr><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erfahren Sie mehr √ºber den Kurs</font></font></a><br>
<br>
<hr></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de502312/index.html">Visuelle und Instrumentenflugregeln</a></li>
<li><a href="../de502314/index.html">Tanezhis Aufgabe: eine neue Stufe in der Entwicklung der Mathematik?</a></li>
<li><a href="../de502316/index.html">FCC er√∂ffnet 6-GHz-Band f√ºr drahtlose Netzwerke - warum nicht jeder das f√ºr eine gute Idee h√§lt</a></li>
<li><a href="../de502318/index.html">Intelligente Pailletten</a></li>
<li><a href="../de502322/index.html">Anweisungen zur √úbertragung Ihres Bewusstseins auf digitale Medien</a></li>
<li><a href="../de502326/index.html">Wie man Programmierer bezahlt</a></li>
<li><a href="../de502328/index.html">Die beste Zeit, um ein Haustierprojekt zu ver√∂ffentlichen</a></li>
<li><a href="../de502330/index.html">Das Problem der Wahl: Wie ich versucht habe, einen Fernseher zu kaufen und nicht verr√ºckt zu werden</a></li>
<li><a href="../de502332/index.html">Schritt-f√ºr-Schritt-Codes: Aztekischer Code</a></li>
<li><a href="../de502336/index.html">Wochenendlesung: Ger√§usche, die wir vermissen, wie man der Krise entkommt und was man √ºber Audio-Gadgets liest</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>