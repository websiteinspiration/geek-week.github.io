<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë∂ üíê üêö Kubernetes: c√≥digo aberto vs fornecedor ‚úîÔ∏è üöÉ üë©üèø‚Äçüíª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ol√°, meu nome √© Dmitry Krasnov. H√° mais de cinco anos, administro clusters Kubernetes e construo arquiteturas complexas de microsservi√ßos. No in√≠cio d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Kubernetes: c√≥digo aberto vs fornecedor</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ru_mts/blog/500728/"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ol√°, meu nome √© Dmitry Krasnov. </font><font style="vertical-align: inherit;">H√° mais de cinco anos, administro clusters Kubernetes e construo arquiteturas complexas de microsservi√ßos. </font><font style="vertical-align: inherit;">No in√≠cio deste ano, lan√ßamos o servi√ßo de gerenciamento de cluster Kubernetes baseado no Containerum. </font><font style="vertical-align: inherit;">Aproveitando esta oportunidade, vou lhe dizer o que √© esse Kubernetes e como a integra√ß√£o com o fornecedor difere do c√≥digo aberto. </font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para come√ßar, o que √© </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kubernetes</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Este √© um sistema para gerenciar cont√™ineres em um grande n√∫mero de hosts. </font><font style="vertical-align: inherit;">A partir do grego, a prop√≥sito, √© traduzido como "piloto" ou "timoneiro". </font><font style="vertical-align: inherit;">Originalmente desenvolvida pelo Google, ap√≥s a qual a Cloud Native Computing Foundation, uma organiza√ß√£o internacional sem fins lucrativos que re√∫ne desenvolvedores globais l√≠deres, usu√°rios finais e fornecedores de tecnologia de cont√™ineres, foi transferida como uma contribui√ß√£o tecnol√≥gica.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jj/lu/gn/jjlugngazzbnhu-fyxvlpchazjw.jpeg"><br>
<a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Guie um grande n√∫mero de cont√™ineres </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora vamos ver que tipo de cont√™ineres s√£o esses. </font><font style="vertical-align: inherit;">Esta aplica√ß√£o com todos os seus arredores - principalmente bibliotecas das quais o programa depende. </font><font style="vertical-align: inherit;">Tudo isso √© empacotado em arquivos e apresentado na forma de uma imagem que pode ser executada independentemente do sistema operacional, testado e n√£o apenas. </font><font style="vertical-align: inherit;">Mas h√° um problema - gerenciar cont√™ineres em um grande n√∫mero de hosts √© muito dif√≠cil. </font><font style="vertical-align: inherit;">Portanto, o Kubernetes foi criado.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Uma imagem de cont√™iner √© um aplicativo mais suas depend√™ncias. O aplicativo, suas depend√™ncias e a imagem do sistema de arquivos do SO est√£o localizadas em diferentes partes da imagem, as chamadas camadas. As camadas podem ser reutilizadas para diferentes recipientes. Por exemplo, para todos os aplicativos da empresa, a camada base do Ubuntu pode ser usada. Ao iniciar cont√™ineres, n√£o h√° necessidade de armazenar v√°rias c√≥pias de uma camada base no host. Isso permite otimizar o armazenamento e a entrega de imagens.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quando queremos iniciar o aplicativo a partir do cont√™iner, as camadas necess√°rias s√£o sobrepostas umas √†s outras e um sistema de arquivos de sobreposi√ß√£o √© formado. Uma camada para grava√ß√£o √© sobreposta na parte superior que, quando o cont√™iner √© parado, √© exclu√≠da. Isso garante que, ao iniciar o cont√™iner, o aplicativo sempre tenha o mesmo ambiente, que n√£o pode ser alterado. Isso garante a reprodutibilidade do ambiente em diferentes sistemas operacionais de host. Seja Ubuntu ou CentOS, o ambiente ser√° sempre o mesmo. Al√©m disso, o cont√™iner √© isolado do host usando os mecanismos embutidos no kernel do Linux. Os aplicativos no cont√™iner n√£o veem arquivos, processos do host e cont√™ineres vizinhos. Esse isolamento de aplicativos do sistema operacional host fornece uma camada adicional de seguran√ßa.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Existem muitas ferramentas para gerenciar cont√™ineres no host. </font><font style="vertical-align: inherit;">O mais popular deles √© o Docker. </font><font style="vertical-align: inherit;">Permite garantir o ciclo de vida completo dos cont√™ineres. </font><font style="vertical-align: inherit;">No entanto, ele funciona apenas em um host. </font><font style="vertical-align: inherit;">Se voc√™ precisar gerenciar cont√™ineres em v√°rios hosts, o Docker pode transformar a vida dos engenheiros em um inferno. </font><font style="vertical-align: inherit;">√â por isso que o Kubernetes foi criado. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A demanda pelo Kubernetes √© justamente devido √† capacidade de direcionar grupos de cont√™ineres em v√°rios hosts como algumas entidades √∫nicas. </font><font style="vertical-align: inherit;">A popularidade do sistema fornece a capacidade de criar DevOps ou Opera√ß√µes de Desenvolvimento, na qual o Kubernetes √© usado para iniciar os processos desse pr√≥prio DevOps. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/l1/4k/fm/l14kfmzc4n0ohovryr9sb0m1pbc.png"><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figura 1. Representa√ß√£o esquem√°tica de como o Kubernetes funciona</font></font></i><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Automa√ß√£o completa</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O DevOps, em princ√≠pio, √© uma automa√ß√£o do processo de desenvolvimento. Grosso modo, os desenvolvedores escrevem c√≥digo que √© derramado no reposit√≥rio. Em seguida, esse c√≥digo pode ser coletado automaticamente imediatamente em um cont√™iner com todas as bibliotecas, testado e implementado no pr√≥ximo est√°gio - armazenamento tempor√°rio e, em seguida, imediatamente na produ√ß√£o. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Juntamente com o Kubernetes, o DevOps permite automatizar esse processo para que ele prossiga com pouca ou nenhuma participa√ß√£o dos pr√≥prios desenvolvedores. Devido a isso, o assembly √© significativamente acelerado, j√° que o desenvolvedor n√£o precisa fazer isso em seu computador - ele apenas escreve um c√≥digo, envia o c√≥digo para o reposit√≥rio e inicia o pipeline, que pode incluir o processo de montagem, teste e implementa√ß√£o. E isso acontece com todas as confirma√ß√µes, portanto os testes est√£o em andamento.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ao mesmo tempo, o uso do cont√™iner permite garantir que todo o ambiente deste programa entre em produ√ß√£o exatamente na forma em que foi testado. </font><font style="vertical-align: inherit;">Ou seja, n√£o haver√° problemas da categoria ‚Äúno teste houve algumas vers√µes, em produ√ß√£o - outras, mas quando configuradas - tudo caiu‚Äù. </font><font style="vertical-align: inherit;">E como hoje temos uma tend√™ncia para a arquitetura de microsservi√ßo, quando em vez de um aplicativo enorme existem centenas de aplicativos pequenos, para administr√°-los manualmente, voc√™ precisa de uma equipe enorme. </font><font style="vertical-align: inherit;">√â por isso que usamos o Kubernetes.</font></font><br>
<br>
<b><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pr√≥s, Pr√≥s, Pr√≥s</font></font></h3></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se falarmos das vantagens do Kubernetes como plataforma, ele possui vantagens significativas em termos de gerenciamento da arquitetura de microsservi√ßo. </font></font><br>
<br>
<ul>
<li> <b>  .</b>   ‚Äî      .    , ‚Äî         .          .     ,  Kubernetes      . </li>
<li> <b> .</b>   Kubernetes         .       .       ,     .     Kubernetes  ,        Service Discovery.       IP-       Kubernetes.   health check`         .</li>
<li> <b> . </b>         .    Kubernetes    ConfigMap`.             .         ,     . </li>
<li> <b>Persistent Volumes. </b>          ,    ,  .        .      Kubernetes      ‚Äî Persistent Volumes.       ,      ,   .        ,        .</li>
<li> <b>Load Balancer.</b>   ,   Kubernetes      Deployment, StatefulSet  ..,            .         . Kubernetes         .     ,   ?        ,        .      Kubernetes    Load Balancer.             .              .       ,     .        Kubernetes.</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O Kubernetes √© melhor no lan√ßamento de arquiteturas de microsservi√ßos. </font><font style="vertical-align: inherit;">A implementa√ß√£o de um sistema na arquitetura cl√°ssica √© poss√≠vel, mas sem sentido. </font><font style="vertical-align: inherit;">Se o aplicativo n√£o puder funcionar em v√°rias r√©plicas, qual √© a diferen√ßa - no Kubernetes ou n√£o?</font></font><br>
 <br>
<b><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kubernetes de c√≥digo aberto</font></font></h3></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O Kubernetes de c√≥digo aberto √© uma grande coisa: ele instalou e funciona. </font><font style="vertical-align: inherit;">Voc√™ pode implantar em seus servidores de ferro, em sua infraestrutura, colocar assistentes e trabalhadores nos quais todos os aplicativos ser√£o executados. </font><font style="vertical-align: inherit;">E o mais importante - tudo isso √© gr√°tis. </font><font style="vertical-align: inherit;">No entanto, existem nuances.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O primeiro √© a exatid√£o do conhecimento e da experi√™ncia de administradores e engenheiros que ir√£o implantar e acompanhar tudo isso. </font><font style="vertical-align: inherit;">Como o cliente recebe total liberdade de a√ß√£o no cluster, ele assume a responsabilidade pela operacionalidade do cluster. </font><font style="vertical-align: inherit;">E quebrar tudo aqui √© muito simples.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O segundo √© a falta de integra√ß√£o. </font><font style="vertical-align: inherit;">Se voc√™ executar o Kubernetes sem uma plataforma de virtualiza√ß√£o popular, n√£o obter√° todos os benef√≠cios do programa. </font><font style="vertical-align: inherit;">Como usar os servi√ßos Persistent Volumes e Load Balancer.</font></font></li>
</ul><br>
<img src="https://habrastorage.org/webt/yl/qy/s-/ylqys-vszsb7e9t4pmjylyhhh0u.png"> <br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figura 2. A arquitetura do k8s</font></font></i><br>
<br>
<b><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kubernetes do fornecedor</font></font></h3></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A integra√ß√£o com um provedor de nuvem fornece duas op√ß√µes: </font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Primeiro, uma pessoa pode simplesmente clicar no bot√£o "criar um cluster" e obter um cluster que j√° esteja configurado e pronto para o trabalho.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Em segundo lugar, o pr√≥prio fornecedor configura um cluster e configura a integra√ß√£o com a nuvem.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como isso est√° acontecendo conosco? O engenheiro que inicia o cluster indica quantos trabalhadores ele precisa e com quais par√¢metros (por exemplo, 5 trabalhadores, cada um com 10 CPUs, 16 GB de RAM e, digamos, 100 GB de disco). Em seguida, obt√©m acesso ao cluster j√° formado. Ao mesmo tempo, os trabalhadores nos quais a carga √© lan√ßada s√£o completamente entregues ao cliente, mas todo o plano de gerenciamento permanece na √°rea de responsabilidade do fornecedor (caso o servi√ßo seja fornecido de acordo com o modelo de servi√ßo gerenciado).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No entanto, esse esquema tem suas desvantagens. </font><font style="vertical-align: inherit;">Devido ao fato de o plano de gerenciamento permanecer com o fornecedor, o fornecedor n√£o fornece acesso total ao cliente e isso reduz a flexibilidade no trabalho com o Kubernetes. </font><font style="vertical-align: inherit;">√Äs vezes, o cliente deseja vincular alguma funcionalidade espec√≠fica ao Kubernetes, por exemplo, autentica√ß√£o via LDAP, e a configura√ß√£o do plano de gerenciamento n√£o permite isso. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/me/xi/lp/mexilpixodhnuve_i3i2kop5rko.png"><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figura 3. Um exemplo de cluster Kubernetes de um provedor de nuvem</font></font></i><br>
<br>
<b><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O que escolher: c√≥digo aberto ou fornecedor</font></font></h3></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ent√£o, Kubernetes de c√≥digo aberto ou fornecedor? </font><font style="vertical-align: inherit;">Se usarmos o Kubernetes de c√≥digo aberto, o usu√°rio desejar√° fazer o que ele faz. </font><font style="vertical-align: inherit;">Mas uma √≥tima chance de dar um tiro na perna. </font><font style="vertical-align: inherit;">Com os fornecedores, isso √© mais complicado, porque tudo √© pensado e configurado para a empresa. </font><font style="vertical-align: inherit;">A maior desvantagem do Kubernetes de c√≥digo aberto √© a exig√™ncia de especialistas. </font><font style="vertical-align: inherit;">Com um fornecedor, a empresa √© poupada dessa dor de cabe√ßa, mas ter√° que decidir se deve pagar seus especialistas ou o fornecedor. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/te/g1/uu/teg1uu2nmmwdork-m0khn56_3ru.png"><br>
<br>
<img src="https://habrastorage.org/webt/-2/fi/vf/-2fivf91q1hgvh5j515dccobviy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bem, os profissionais s√£o √≥bvios, os contras tamb√©m s√£o conhecidos. </font><font style="vertical-align: inherit;">Invariavelmente uma coisa: o Kubernetes resolve muitos problemas automatizando o gerenciamento de v√°rios cont√™ineres. </font><font style="vertical-align: inherit;">E qual escolher, c√≥digo aberto ou fornecedor - todo mundo decide por si mesmo. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O artigo foi preparado por Dmitry Krasnov, arquiteto principal do servi√ßo Containerum do provedor #CloudMTS</font></font></i></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt500712/index.html">Coronav√≠rus digital - uma combina√ß√£o de ransomware e infostealer</a></li>
<li><a href="../pt500718/index.html">EPAM no modo remoto: como funciona</a></li>
<li><a href="../pt500720/index.html">Novos padr√µes de seguran√ßa da informa√ß√£o: dificultam a vida dos invasores</a></li>
<li><a href="../pt500722/index.html">‚ÄúAsse at√© ficar pronto‚Äù: quem salva grava√ß√µes raras de uma maneira t√£o incomum</a></li>
<li><a href="../pt500724/index.html">Como as autoridades financeiras dos EUA limitam o impacto negativo do jogo no decl√≠nio</a></li>
<li><a href="../pt500732/index.html">Intelig√™ncia artificial e a crise das teorias da consci√™ncia</a></li>
<li><a href="../pt500734/index.html"># GitLab 12.10 lan√ßado com gerenciamento de requisitos e dimensionamento autom√°tico de IC no AWS Fargate</a></li>
<li><a href="../pt500744/index.html">‚ÄúPara ouvir melhor do que voc√™, meu falante‚Äù: como transmitir melhor em casa</a></li>
<li><a href="../pt500746/index.html">Rack de boxe para SMD e outras pequenas coisas</a></li>
<li><a href="../pt500752/index.html">MASK-RCNN para encontrar telhados a partir de imagens de drones</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>