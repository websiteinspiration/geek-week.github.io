<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👶 💐 🐚 Kubernetes: código aberto vs fornecedor ✔️ 🚃 👩🏿‍💻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Olá, meu nome é Dmitry Krasnov. Há mais de cinco anos, administro clusters Kubernetes e construo arquiteturas complexas de microsserviços. No início d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Kubernetes: código aberto vs fornecedor</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ru_mts/blog/500728/"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Olá, meu nome é Dmitry Krasnov. </font><font style="vertical-align: inherit;">Há mais de cinco anos, administro clusters Kubernetes e construo arquiteturas complexas de microsserviços. </font><font style="vertical-align: inherit;">No início deste ano, lançamos o serviço de gerenciamento de cluster Kubernetes baseado no Containerum. </font><font style="vertical-align: inherit;">Aproveitando esta oportunidade, vou lhe dizer o que é esse Kubernetes e como a integração com o fornecedor difere do código aberto. </font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para começar, o que é </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kubernetes</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Este é um sistema para gerenciar contêineres em um grande número de hosts. </font><font style="vertical-align: inherit;">A partir do grego, a propósito, é traduzido como "piloto" ou "timoneiro". </font><font style="vertical-align: inherit;">Originalmente desenvolvida pelo Google, após a qual a Cloud Native Computing Foundation, uma organização internacional sem fins lucrativos que reúne desenvolvedores globais líderes, usuários finais e fornecedores de tecnologia de contêineres, foi transferida como uma contribuição tecnológica.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jj/lu/gn/jjlugngazzbnhu-fyxvlpchazjw.jpeg"><br>
<a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Guie um grande número de contêineres </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora vamos ver que tipo de contêineres são esses. </font><font style="vertical-align: inherit;">Esta aplicação com todos os seus arredores - principalmente bibliotecas das quais o programa depende. </font><font style="vertical-align: inherit;">Tudo isso é empacotado em arquivos e apresentado na forma de uma imagem que pode ser executada independentemente do sistema operacional, testado e não apenas. </font><font style="vertical-align: inherit;">Mas há um problema - gerenciar contêineres em um grande número de hosts é muito difícil. </font><font style="vertical-align: inherit;">Portanto, o Kubernetes foi criado.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Uma imagem de contêiner é um aplicativo mais suas dependências. O aplicativo, suas dependências e a imagem do sistema de arquivos do SO estão localizadas em diferentes partes da imagem, as chamadas camadas. As camadas podem ser reutilizadas para diferentes recipientes. Por exemplo, para todos os aplicativos da empresa, a camada base do Ubuntu pode ser usada. Ao iniciar contêineres, não há necessidade de armazenar várias cópias de uma camada base no host. Isso permite otimizar o armazenamento e a entrega de imagens.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quando queremos iniciar o aplicativo a partir do contêiner, as camadas necessárias são sobrepostas umas às outras e um sistema de arquivos de sobreposição é formado. Uma camada para gravação é sobreposta na parte superior que, quando o contêiner é parado, é excluída. Isso garante que, ao iniciar o contêiner, o aplicativo sempre tenha o mesmo ambiente, que não pode ser alterado. Isso garante a reprodutibilidade do ambiente em diferentes sistemas operacionais de host. Seja Ubuntu ou CentOS, o ambiente será sempre o mesmo. Além disso, o contêiner é isolado do host usando os mecanismos embutidos no kernel do Linux. Os aplicativos no contêiner não veem arquivos, processos do host e contêineres vizinhos. Esse isolamento de aplicativos do sistema operacional host fornece uma camada adicional de segurança.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Existem muitas ferramentas para gerenciar contêineres no host. </font><font style="vertical-align: inherit;">O mais popular deles é o Docker. </font><font style="vertical-align: inherit;">Permite garantir o ciclo de vida completo dos contêineres. </font><font style="vertical-align: inherit;">No entanto, ele funciona apenas em um host. </font><font style="vertical-align: inherit;">Se você precisar gerenciar contêineres em vários hosts, o Docker pode transformar a vida dos engenheiros em um inferno. </font><font style="vertical-align: inherit;">É por isso que o Kubernetes foi criado. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A demanda pelo Kubernetes é justamente devido à capacidade de direcionar grupos de contêineres em vários hosts como algumas entidades únicas. </font><font style="vertical-align: inherit;">A popularidade do sistema fornece a capacidade de criar DevOps ou Operações de Desenvolvimento, na qual o Kubernetes é usado para iniciar os processos desse próprio DevOps. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/l1/4k/fm/l14kfmzc4n0ohovryr9sb0m1pbc.png"><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figura 1. Representação esquemática de como o Kubernetes funciona</font></font></i><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Automação completa</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O DevOps, em princípio, é uma automação do processo de desenvolvimento. Grosso modo, os desenvolvedores escrevem código que é derramado no repositório. Em seguida, esse código pode ser coletado automaticamente imediatamente em um contêiner com todas as bibliotecas, testado e implementado no próximo estágio - armazenamento temporário e, em seguida, imediatamente na produção. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Juntamente com o Kubernetes, o DevOps permite automatizar esse processo para que ele prossiga com pouca ou nenhuma participação dos próprios desenvolvedores. Devido a isso, o assembly é significativamente acelerado, já que o desenvolvedor não precisa fazer isso em seu computador - ele apenas escreve um código, envia o código para o repositório e inicia o pipeline, que pode incluir o processo de montagem, teste e implementação. E isso acontece com todas as confirmações, portanto os testes estão em andamento.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ao mesmo tempo, o uso do contêiner permite garantir que todo o ambiente deste programa entre em produção exatamente na forma em que foi testado. </font><font style="vertical-align: inherit;">Ou seja, não haverá problemas da categoria “no teste houve algumas versões, em produção - outras, mas quando configuradas - tudo caiu”. </font><font style="vertical-align: inherit;">E como hoje temos uma tendência para a arquitetura de microsserviço, quando em vez de um aplicativo enorme existem centenas de aplicativos pequenos, para administrá-los manualmente, você precisa de uma equipe enorme. </font><font style="vertical-align: inherit;">É por isso que usamos o Kubernetes.</font></font><br>
<br>
<b><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Prós, Prós, Prós</font></font></h3></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se falarmos das vantagens do Kubernetes como plataforma, ele possui vantagens significativas em termos de gerenciamento da arquitetura de microsserviço. </font></font><br>
<br>
<ul>
<li> <b>  .</b>   —      .    , —         .          .     ,  Kubernetes      . </li>
<li> <b> .</b>   Kubernetes         .       .       ,     .     Kubernetes  ,        Service Discovery.       IP-       Kubernetes.   health check`         .</li>
<li> <b> . </b>         .    Kubernetes    ConfigMap`.             .         ,     . </li>
<li> <b>Persistent Volumes. </b>          ,    ,  .        .      Kubernetes      — Persistent Volumes.       ,      ,   .        ,        .</li>
<li> <b>Load Balancer.</b>   ,   Kubernetes      Deployment, StatefulSet  ..,            .         . Kubernetes         .     ,   ?        ,        .      Kubernetes    Load Balancer.             .              .       ,     .        Kubernetes.</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O Kubernetes é melhor no lançamento de arquiteturas de microsserviços. </font><font style="vertical-align: inherit;">A implementação de um sistema na arquitetura clássica é possível, mas sem sentido. </font><font style="vertical-align: inherit;">Se o aplicativo não puder funcionar em várias réplicas, qual é a diferença - no Kubernetes ou não?</font></font><br>
 <br>
<b><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kubernetes de código aberto</font></font></h3></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O Kubernetes de código aberto é uma grande coisa: ele instalou e funciona. </font><font style="vertical-align: inherit;">Você pode implantar em seus servidores de ferro, em sua infraestrutura, colocar assistentes e trabalhadores nos quais todos os aplicativos serão executados. </font><font style="vertical-align: inherit;">E o mais importante - tudo isso é grátis. </font><font style="vertical-align: inherit;">No entanto, existem nuances.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O primeiro é a exatidão do conhecimento e da experiência de administradores e engenheiros que irão implantar e acompanhar tudo isso. </font><font style="vertical-align: inherit;">Como o cliente recebe total liberdade de ação no cluster, ele assume a responsabilidade pela operacionalidade do cluster. </font><font style="vertical-align: inherit;">E quebrar tudo aqui é muito simples.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O segundo é a falta de integração. </font><font style="vertical-align: inherit;">Se você executar o Kubernetes sem uma plataforma de virtualização popular, não obterá todos os benefícios do programa. </font><font style="vertical-align: inherit;">Como usar os serviços Persistent Volumes e Load Balancer.</font></font></li>
</ul><br>
<img src="https://habrastorage.org/webt/yl/qy/s-/ylqys-vszsb7e9t4pmjylyhhh0u.png"> <br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figura 2. A arquitetura do k8s</font></font></i><br>
<br>
<b><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kubernetes do fornecedor</font></font></h3></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A integração com um provedor de nuvem fornece duas opções: </font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Primeiro, uma pessoa pode simplesmente clicar no botão "criar um cluster" e obter um cluster que já esteja configurado e pronto para o trabalho.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Em segundo lugar, o próprio fornecedor configura um cluster e configura a integração com a nuvem.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como isso está acontecendo conosco? O engenheiro que inicia o cluster indica quantos trabalhadores ele precisa e com quais parâmetros (por exemplo, 5 trabalhadores, cada um com 10 CPUs, 16 GB de RAM e, digamos, 100 GB de disco). Em seguida, obtém acesso ao cluster já formado. Ao mesmo tempo, os trabalhadores nos quais a carga é lançada são completamente entregues ao cliente, mas todo o plano de gerenciamento permanece na área de responsabilidade do fornecedor (caso o serviço seja fornecido de acordo com o modelo de serviço gerenciado).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No entanto, esse esquema tem suas desvantagens. </font><font style="vertical-align: inherit;">Devido ao fato de o plano de gerenciamento permanecer com o fornecedor, o fornecedor não fornece acesso total ao cliente e isso reduz a flexibilidade no trabalho com o Kubernetes. </font><font style="vertical-align: inherit;">Às vezes, o cliente deseja vincular alguma funcionalidade específica ao Kubernetes, por exemplo, autenticação via LDAP, e a configuração do plano de gerenciamento não permite isso. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/me/xi/lp/mexilpixodhnuve_i3i2kop5rko.png"><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figura 3. Um exemplo de cluster Kubernetes de um provedor de nuvem</font></font></i><br>
<br>
<b><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O que escolher: código aberto ou fornecedor</font></font></h3></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Então, Kubernetes de código aberto ou fornecedor? </font><font style="vertical-align: inherit;">Se usarmos o Kubernetes de código aberto, o usuário desejará fazer o que ele faz. </font><font style="vertical-align: inherit;">Mas uma ótima chance de dar um tiro na perna. </font><font style="vertical-align: inherit;">Com os fornecedores, isso é mais complicado, porque tudo é pensado e configurado para a empresa. </font><font style="vertical-align: inherit;">A maior desvantagem do Kubernetes de código aberto é a exigência de especialistas. </font><font style="vertical-align: inherit;">Com um fornecedor, a empresa é poupada dessa dor de cabeça, mas terá que decidir se deve pagar seus especialistas ou o fornecedor. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/te/g1/uu/teg1uu2nmmwdork-m0khn56_3ru.png"><br>
<br>
<img src="https://habrastorage.org/webt/-2/fi/vf/-2fivf91q1hgvh5j515dccobviy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bem, os profissionais são óbvios, os contras também são conhecidos. </font><font style="vertical-align: inherit;">Invariavelmente uma coisa: o Kubernetes resolve muitos problemas automatizando o gerenciamento de vários contêineres. </font><font style="vertical-align: inherit;">E qual escolher, código aberto ou fornecedor - todo mundo decide por si mesmo. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O artigo foi preparado por Dmitry Krasnov, arquiteto principal do serviço Containerum do provedor #CloudMTS</font></font></i></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt500712/index.html">Coronavírus digital - uma combinação de ransomware e infostealer</a></li>
<li><a href="../pt500718/index.html">EPAM no modo remoto: como funciona</a></li>
<li><a href="../pt500720/index.html">Novos padrões de segurança da informação: dificultam a vida dos invasores</a></li>
<li><a href="../pt500722/index.html">“Asse até ficar pronto”: quem salva gravações raras de uma maneira tão incomum</a></li>
<li><a href="../pt500724/index.html">Como as autoridades financeiras dos EUA limitam o impacto negativo do jogo no declínio</a></li>
<li><a href="../pt500732/index.html">Inteligência artificial e a crise das teorias da consciência</a></li>
<li><a href="../pt500734/index.html"># GitLab 12.10 lançado com gerenciamento de requisitos e dimensionamento automático de IC no AWS Fargate</a></li>
<li><a href="../pt500744/index.html">“Para ouvir melhor do que você, meu falante”: como transmitir melhor em casa</a></li>
<li><a href="../pt500746/index.html">Rack de boxe para SMD e outras pequenas coisas</a></li>
<li><a href="../pt500752/index.html">MASK-RCNN para encontrar telhados a partir de imagens de drones</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>