<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèª‚Äçüè≠ üõåüèæ üî§ Efici√™ncia Brotli no mundo real üßò üßìüèæ üôçüèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Uma das regras mais fundamentais para o desenvolvimento de sites r√°pidos √© otimizar seus recursos. Se estamos falando sobre recursos de texto - sobre ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Efici√™ncia Brotli no mundo real</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/499278/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Uma das regras mais fundamentais para o desenvolvimento de sites r√°pidos √© otimizar seus recursos. Se estamos falando sobre recursos de texto - sobre c√≥digo escrito em HTML, CSS e JavaScript, isso significa que estamos falando sobre compacta√ß√£o de dados. </font><font style="vertical-align: inherit;">
O padr√£o de fato para compactar recursos de texto na Web √© o m√©todo Gzip. Ou seja, cerca de 80% dos recursos compactados obtidos durante os downloads do site s√£o compactados usando o Gzip. Para comprimir os 20% restantes dos recursos, um algoritmo muito mais novo √© usado - o Brotli.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/webt/f1/0c/go/f10cgoennqxp98xrt8hxus_wkii.jpeg"></a><br>
<br><font style="vertical-align: inherit;"></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Obviamente, esses 100% dos recursos compactados que entram nos navegadores quando recebem respostas √†s solicita√ß√µes de sites n√£o incluem absolutamente todos os recursos. Ainda existem muitos recursos que podem ser compactados ou que podem ser compactados. Mas esses recursos permanecem descomprimidos. M√©tricas mais detalhadas sobre compacta√ß√£o podem ser encontradas na se√ß√£o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://almanac."><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Compacta√ß√£o</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> do </font><font style="vertical-align: inherit;">recurso Web Almanac. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O m√©todo de compress√£o gzip √© incrivelmente eficiente. Todo o trabalho de Shakespeare em texto simples leva 5,3 MB. E ap√≥s a compacta√ß√£o Gzip (n√≠vel de compacta√ß√£o 6), eles ocupam apenas 1,9 MB. Isso significa que o tamanho do arquivo no qual esses dados s√£o armazenados diminuiu 2,8 vezes. Ao mesmo tempo, os dados n√£o s√£o perdidos durante a compacta√ß√£o. √ìtimo!</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Melhor ainda, o grau de compacta√ß√£o do Gzip √© afetado pela presen√ßa de linhas duplicadas nos arquivos. Quanto mais repeti√ß√µes no texto, mais eficiente √© a compacta√ß√£o. Isso √© muito bom para a web, pois o c√≥digo escrito em HTML, CSS e JS tem uma sintaxe uniforme e cont√©m muitas repeti√ß√µes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas, embora o Gzip seja um m√©todo de compacta√ß√£o muito eficiente, ele tamb√©m √© bastante antigo. Apareceu em 1992 (o que, √© claro, ajuda a explicar sua ampla preval√™ncia). Ap√≥s 21 anos, em 2013, o Google lan√ßou o Brotli, um novo algoritmo que promete n√≠veis de compress√£o ainda mais altos do que aqueles que o m√©todo Gzip √© capaz. Os mesmos trabalhos de Shakespeare, com 5,2 MB de tamanho, s√£o compactados usando Brotli para um tamanho de 1,7 MB (com um n√≠vel de compacta√ß√£o de 6). E isso j√° significa uma redu√ß√£o de 3,1 vezes no tamanho do arquivo. Isso √© ainda melhor do que usar o Gzip.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Usando uma </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ferramenta</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para avaliar o n√≠vel de compacta√ß√£o de dados usando Gzip e Brotli, √© prov√°vel que voc√™ descubra que, ao compactar alguns dados, Brotli √© muito mais eficiente que o Gzip. </font><font style="vertical-align: inherit;">Por exemplo, os dados do ReactDOM s√£o 27% menores quando compactados usando Brotli com um n√≠vel m√°ximo de compacta√ß√£o (11) do que quando se usa Gzip com um n√≠vel m√°ximo de compacta√ß√£o (9). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui est√° uma compara√ß√£o da compacta√ß√£o de Brotli com a compacta√ß√£o Gzip ao processar o ReactDOM.</font></font><br>
<br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N√≠vel de compress√£o</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tamanho (em bytes)</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Efici√™ncia de compacta√ß√£o (em compara√ß√£o com dados n√£o compactados)</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">% De melhoria em rela√ß√£o ao Gzip</font></font></strong></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1 1</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">43456</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2,73</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3%</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">39898</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2,97</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">onze%</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">39416</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.08</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">quinze%</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">38488</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.08</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">quinze%</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">36323</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3,27</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dezenove%</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">36048</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3,29</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vinte%</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">35804</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3,31</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vinte%</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">35709</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3,32</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">21%</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">35659</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3,33</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">21%</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">33590</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.53</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25%</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">onze</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">33036</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.59</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">27%</font></font></td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como voc√™ pode ver, em todos os n√≠veis de compress√£o, Brotli ignora o Gzip. No n√≠vel m√°ximo de compacta√ß√£o dispon√≠vel com o Brotli, √© 27% mais eficiente que o Gzip. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E, com base na observa√ß√£o pessoal, observo que a transi√ß√£o de um de meus clientes de Gzip para Brotli levou a uma redu√ß√£o m√©dia de 31% no tamanho dos arquivos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como resultado, nos √∫ltimos anos, eu e outros especialistas em desempenho incentivamos os clientes a mudarem de Gzip para Brotli.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vou dizer algumas palavras sobre o suporte ao navegador para Gzip e Brotli. O Gzip √© t√£o difundido que o CanIUse nem exibe uma tabela com informa√ß√µes de suporte. Diz o seguinte: "Este cabe√ßalho HTTP √© suportado em quase todos os navegadores (come√ßando com IE6 +, Firefox 2+, Chrome 1+ e assim por diante)." E Brotli, ao escrever este material, desfruta de um n√≠vel muito agrad√°vel de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">apoio.</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">em 93,17%. E isso √© muito, muito mesmo! Portanto, se o seu site tiver pelo menos algum tamanho significativo, talvez voc√™ n√£o goste do retorno de recursos n√£o compactados para mais de 6% dos usu√°rios. Mas, usando Brotli, voc√™ n√£o perde nada. Os clientes usam um modelo progressivo de suporte para novos algoritmos, para que os usu√°rios que n√£o podem aceitar os recursos Brotli simplesmente usem a op√ß√£o de fallback na forma de Gzip. Falaremos mais sobre isso abaixo.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em geral, especialmente se voc√™ usar a CDN, ativar o Brotli √© uma quest√£o de segundos. </font><font style="vertical-align: inherit;">Pelo menos √© o caso do Cloudflare, o servi√ßo que eu uso para o site CSS Wizardry. </font><font style="vertical-align: inherit;">No entanto, muitos dos meus clientes, se falamos sobre os √∫ltimos dois anos, n√£o s√£o t√£o bem-sucedidos. </font><font style="vertical-align: inherit;">Alguns deles suportam sua pr√≥pria infraestrutura, e a pr√°tica mostra que instalar e implantar o Brotli n√£o √© t√£o simples. </font><font style="vertical-align: inherit;">Alguns usam servi√ßos CDN que n√£o diferem em recursos facilmente acess√≠veis para dar suporte ao novo algoritmo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nos casos em que n√£o pod√≠amos mudar para Brotli, sempre t√≠nhamos uma pergunta sem resposta: "E se ...". </font><font style="vertical-align: inherit;">Como resultado, finalmente decidi me armar com n√∫meros e responder √† pergunta sobre o que d√° ao site a transi√ß√£o para Brotli.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Menos n√£o √© necessariamente mais r√°pido.</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Normalmente "menos", no entanto, significa "mais r√°pido". </font><font style="vertical-align: inherit;">Como regra, se voc√™ reduzir o tamanho do arquivo, ele ser√° transferido mais rapidamente do servidor para o cliente. </font><font style="vertical-align: inherit;">Mas se voc√™ criar um arquivo, digamos, 20% menor, isso n√£o significa que ele chegar√° 20% mais r√°pido. </font><font style="vertical-align: inherit;">O ponto aqui √© que o tamanho do arquivo √© apenas um aspecto do desempenho da web. </font><font style="vertical-align: inherit;">E qualquer que seja o tamanho do arquivo, o recurso entregue ao navegador est√° associado a muitos outros fatores e a muitas limita√ß√µes do sistema - atrasos na rede, perda de pacotes e similares. </font><font style="vertical-align: inherit;">Em outras palavras, economizar no tamanho do arquivo ajuda a transferir os mesmos dados de antes, enviando menos pacotes, mas a transfer√™ncia de dados entre o servidor e o cliente √© limitada por atrasos na rede, como resultado, a velocidade com que os pacotes que chegam ao cliente ser√£o menores n√£o ser√° alterada.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TCP, pacotes, atraso de ida e volta</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se for muito simplista considerar a transfer√™ncia de arquivos do servidor para o cliente, teremos que dar uma olhada no protocolo TCP. Quando recebemos um arquivo do servidor, ele n√£o chega at√© n√≥s de uma s√≥ vez. O protocolo TCP, sobre o qual o HTTP funciona, divide os arquivos em segmentos chamados pacotes. Esses pacotes s√£o enviados ao cliente em ordem, em sequ√™ncia. O cliente confirma o recebimento de cada pacote da s√©rie antes de iniciar a transfer√™ncia da pr√≥xima s√©rie. Isso acontece at√© que o cliente colete todos os pacotes necess√°rios, at√© que n√£o haja pacotes n√£o enviados no servidor e at√© que o cliente possa coletar os pacotes em algo que possa ser reconhecido como um arquivo. Para que a sess√£o de transfer√™ncia de sequ√™ncia de pacotes seja conclu√≠da com √™xito, o servidor deve envi√°-las ao cliente e o cliente deve confirmar seu recebimento. Tempo,A quantidade de dados necess√°ria para receber e confirmar a recep√ß√£o √© denominada RTT (Round Trip Time).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cada nova conex√£o TCP n√£o pode saber qual √© a largura de banda dispon√≠vel e qual a confiabilidade da conex√£o (ou seja, qual √© o n√≠vel de perda de pacotes). Se o servidor tentar enviar megabytes de dados por uma conex√£o que suporte uma taxa de transfer√™ncia de dados de um megabit por segundo, essa transfer√™ncia sobrecarregar√° a conex√£o e causar√° uma sobrecarga no canal de comunica√ß√£o. E vice-versa - se o servidor tentar transferir uma pequena quantidade de dados atrav√©s de uma conex√£o muito r√°pida, a conex√£o ser√° usada ineficientemente, ficar√° inativa.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para resolver esse quebra-cabe√ßa, o TCP usa um mecanismo chamado in√≠cio lento. </font><font style="vertical-align: inherit;">Isso faz parte da estrat√©gia de gerenciamento da janela de sobrecarga. </font><font style="vertical-align: inherit;">Cada nova conex√£o TCP √© limitada pela capacidade de enviar apenas 10 pacotes de dados na primeira sequ√™ncia de pacotes (10 pacotes - o tamanho da janela inicial de congestionamento). </font><font style="vertical-align: inherit;">Dez segmentos TCP s√£o aproximadamente 14 KB de dados. </font><font style="vertical-align: inherit;">Se esses pacotes forem recebidos com √™xito pelo cliente, a segunda s√©rie j√° conter√° 20 pacotes, haver√° 40, 80, 160 e assim por diante. </font><font style="vertical-align: inherit;">O crescimento exponencial de pacotes em seq√º√™ncias continuar√° at√© que um dos seguintes eventos ocorra:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O sistema enfrentar√° a perda de pacotes. </font><font style="vertical-align: inherit;">Nesse momento, o servidor reduzir√° o n√∫mero de pacotes na sequ√™ncia a seguir, dividindo o n√∫mero anterior de pacotes por 2 e tentar√° transferir os dados novamente.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Atingimos o limite de largura de banda dispon√≠vel e podemos us√°-lo com capacidade total.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Essa estrat√©gia simples e elegante permite que voc√™ se equilibre √† beira da cautela e do otimismo. </font><font style="vertical-align: inherit;">Aplica-se a todas as novas conex√µes TCP estabelecidas pelo aplicativo da web. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em palavras simples, o tamanho inicial da janela de congestionamento da nova conex√£o TCP √© de apenas 14 Kb. </font><font style="vertical-align: inherit;">Ou cerca de 11,8% dos dados n√£o compactados do ReactDOM. </font><font style="vertical-align: inherit;">36,94% dos dados compactados usando Gzip ou 42,38% dos dados compactados usando Brotli (no n√≠vel m√°ximo de compacta√ß√£o). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E ent√£o vamos desacelerar. </font><font style="vertical-align: inherit;">A transi√ß√£o de 11,8% para 36,94% j√° √© uma melhoria muito percept√≠vel! </font><font style="vertical-align: inherit;">Mas a transi√ß√£o de 36,94% para 42,38% - isso est√° longe de ser t√£o impressionante. </font><font style="vertical-align: inherit;">O que est√° acontecendo?</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N√∫mero da sess√£o de dados</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A quantidade de dados transferidos em uma sess√£o, Kb</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quantidade acumulada de dados transferidos, Kb</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A sequ√™ncia na qual os dados do ReactDOM s√£o transferidos</font></font></strong></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1 1</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">14</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">14</font></font></td>
<td></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">28.</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">42.</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gzip (37.904 Kb), Brotli (33.036 Kb)</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">56.</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">98</font></font></td>
<td></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">112</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">210.</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Op√ß√£o n√£o compactada (118.656 Kb)</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">224</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">434</font></font></td>
<td></td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Acontece que os dados compactados com Gzip e os dados compactados com Brotli s√£o transmitidos na mesma s√©rie de pacotes. </font><font style="vertical-align: inherit;">A transfer√™ncia de um arquivo leva duas seq√º√™ncias. </font><font style="vertical-align: inherit;">Se o RTT for bastante uniforme ao transmitir todas as seq√º√™ncias, isso significa que leva o mesmo tempo para transmitir dados compactados usando Gzip e Brotli. </font><font style="vertical-align: inherit;">Por outro lado, a transfer√™ncia de uma vers√£o n√£o compactada dos dados requer quatro s√©ries de pacotes, n√£o duas. </font><font style="vertical-align: inherit;">E isso, especialmente em conex√µes com altas lat√™ncias de rede, pode resultar em um tempo bastante percept√≠vel necess√°rio para a transfer√™ncia de dados.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Costumo aqui ao fato de que a velocidade de transfer√™ncia de dados depende n√£o apenas do tamanho dos arquivos. √â influenciado pelos recursos do funcionamento do protocolo TCP. N√£o precisamos apenas tornar os arquivos menores. Precisamos torn√°-los muito menores, levando-os a um tamanho que permita que sejam transmitidos em menos sequ√™ncias de pacotes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Isso significa, em teoria, que, para que o algoritmo de Brotli seja notavelmente mais eficiente que o Gzip, ele deve poder compactar os dados com muito mais agressividade. Isso √© necess√°rio para que os dados possam ser transmitidos em menos seq√º√™ncias de pacotes do que quando se usa o Gzip. E n√£o sei como esse algoritmo se desenvolver√° ...</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vale ressaltar que o modelo acima √© bastante simplificado. Existem muitos outros fatores a serem considerados. Por exemplo - √© uma conex√£o TCP nova ou j√° aberta? A conex√£o est√° sendo usada para outra coisa? Os mecanismos de prioriza√ß√£o de tr√°fego do servidor est√£o parando e iniciando a transfer√™ncia de dados? Os fluxos H / 2 t√™m acesso exclusivo √† largura de banda? Esta se√ß√£o √© um estudo mais s√©rio. Deve ser considerado como um bom ponto de partida para sua pr√≥pria pesquisa. Mas considere analisar minuciosamente os dados usando algo como o Wireshark e leia </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">este</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> material, que fornece uma descri√ß√£o mais profunda dos primeiros 14 Kb "m√°gicos".</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O acima se aplica somente a novas conex√µes TCP. </font><font style="vertical-align: inherit;">Os arquivos transferidos por uma conex√£o existente n√£o passar√£o pelo procedimento de inicializa√ß√£o lenta. </font><font style="vertical-align: inherit;">Isso nos leva a duas conclus√µes importantes:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Acho que n√£o vale a pena repetir, mas vou repetir: os recursos est√°ticos precisam ser hospedados. </font><font style="vertical-align: inherit;">Essa √© uma √≥tima maneira de evitar atrasos de inicializa√ß√£o lenta, j√° que usar o seu pr√≥prio servidor j√° "aquecido" significa que os pacotes que saem desse servidor t√™m acesso a uma largura de banda maior. </font><font style="vertical-align: inherit;">Essa conclus√£o me leva √† segunda conclus√£o.</font></font></li>
<li> ,              ,    .       ,            .    .</li>
</ol><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><strong>   </strong></td>
<td><strong> ,    , </strong></td>
<td><strong>   , </strong></td>
</tr>
<tr>
<td>1</td>
<td>14</td>
<td>14</td>
</tr>
<tr>
<td>2</td>
<td>28</td>
<td>42</td>
</tr>
<tr>
<td>3</td>
<td>56</td>
<td>98</td>
</tr>
<tr>
<td>4</td>
<td>112</td>
<td>210</td>
</tr>
<tr>
<td>5</td>
<td>224</td>
<td>434</td>
</tr>
<tr>
<td>6</td>
<td>448</td>
<td>882</td>
</tr>
<tr>
<td>7</td>
<td>896</td>
<td>1778</td>
</tr>
<tr>
<td>8</td>
<td>1792</td>
<td>3570</td>
</tr>
<tr>
<td>9</td>
<td>3584</td>
<td>7154</td>
</tr>
<tr>
<td>10</td>
<td>7168</td>
<td>14322</td>
</tr>
<tr>
<td>‚Ä¶</td>
<td>‚Ä¶</td>
<td>‚Ä¶</td>
</tr>
<tr>
<td>20</td>
<td>7340032</td>
<td>14680050</td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No final da 10¬™ sess√£o de transfer√™ncia de dados, a quantidade de dados transferidos em uma sess√£o √© de 7168 Kb, enquanto, no total, 14322 Kb de dados j√° foram transferidos. </font><font style="vertical-align: inherit;">Isso √© mais do que suficiente para o trabalho comum na Internet (ou seja, n√£o para ver o Game of Thrones). </font><font style="vertical-align: inherit;">De fato, geralmente acontece que carregamos a p√°gina da Web inteira e todos os seus recursos sem atingir o limite de nossa largura de banda. </font><font style="vertical-align: inherit;">Em outras palavras, o uso de um canal de comunica√ß√£o de fibra √≥ptica de 1 Gbit / s (ou seja, 0,125 GB / s) n√£o far√° com que a navega√ß√£o normal pare√ßa muito mais r√°pida do que usar uma conex√£o mais lenta, pois a maioria desse canal nem sequer ser√° usado.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E at√© a 20¬™ sess√£o de transfer√™ncia de dados, teoricamente transferimos 7,34 GB de dados em uma sequ√™ncia de pacotes.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">E o mundo real?</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
At√© agora, estivemos envolvidos em considera√ß√µes te√≥ricas. </font><font style="vertical-align: inherit;">E comecei a trabalhar neste material devido ao fato de que gostaria de saber sobre o impacto que Brotli pode ter em sites reais. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
At√© agora, os n√∫meros apresentados aqui apontam para a enorme diferen√ßa entre a falta de compacta√ß√£o e o uso do Gzip, e o fato de que o ganho do uso do Brotli, em compara√ß√£o com o Gzip, √© bastante modesto. </font><font style="vertical-align: inherit;">Isso nos diz que a transi√ß√£o da falta de compacta√ß√£o para o uso do Gzip proporcionar√° uma melhoria not√°vel, enquanto a transi√ß√£o do Gzip para Brotli provavelmente pode parecer muito menos impressionante. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selecionei, como exemplos, v√°rios sites, guiados pelas seguintes considera√ß√µes:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O site deve ser relativamente conhecido (√© melhor usar sites que possam ser comparados a algo).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O site deve ser adequado para o teste. </font><font style="vertical-align: inherit;">Ou seja, ele deve ter um tamanho adequado (portanto, ser√° mais interessante analisar seus materiais para compress√£o) e, ao mesmo tempo, n√£o deve conter principalmente materiais que n√£o s√£o compactados usando Gzip / Brotli - por exemplo, YouTube.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nem todos os sites da cole√ß√£o devem pertencer a grandes corpora√ß√µes (vale a pena analisar alguns, digamos, sites "regulares").</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Considerando esses requisitos, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">selecionei os</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sites listados abaixo e comecei a testar. </font><font style="vertical-align: inherit;">Aqui est√£o os sites que selecionei:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">m.facebook.com</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.linkedin.com</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.insider.com</font></font></a></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">yandex.com</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.esedirect.co.uk</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.story.one</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.cdm-bedrijfskleding.nl</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.everlane.com</font></font></a></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como n√£o queria complicar os testes, decidi pelos seguintes indicadores:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A quantidade de dados transferidos.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Primeira vez de pintura com conte√∫do (FCP).</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eles foram analisados ‚Äã‚Äãnas seguintes situa√ß√µes:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Falta de compress√£o.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Usando gzip.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Usando brotli.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A m√©trica FCP parece pr√≥xima do mundo real e universal o suficiente para sua aplica√ß√£o em qualquer site, pois permite avaliar o que as pessoas precisam de sites - ou seja, o conte√∫do desses sites. </font><font style="vertical-align: inherit;">Al√©m disso, escolhi essa m√©trica porque </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Paul Calvano</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , uma pessoa inteligente, disse o seguinte: ‚ÄúA experi√™ncia me diz que o uso do Brotli leva ao FCP aprimorado, especialmente quando os recursos cr√≠ticos de CSS / JS s√£o grandes‚Äù .</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Teste</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vou lhe contar um segredo sujo. Muitos estudos de desempenho da Web (n√£o todos, mas muitos) n√£o s√£o baseados em pesquisas sobre melhorias de desempenho, mas em tirar conclus√µes do oposto - da degrada√ß√£o do desempenho. Por exemplo, a BBC √© muito mais f√°cil afirmar que "eles perdem </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10% dos usu√°rios</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> por cada segundo extra que precisam para carregar seu site" do que descobrir o que est√° acontecendo gra√ßas a uma melhoria de um segundo. √â muito mais f√°cil desacelerar o site do que aceler√°-lo, e voc√™ sente que √© por isso que muitas pessoas fazem esse trabalho t√£o bem.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Diante disso, n√£o tentei primeiro baixar sites que usem o Gzip e, offline, de alguma forma compactar seu conte√∫do usando o Brotli. </font><font style="vertical-align: inherit;">Em vez disso, encontrei sites que usam o Brotli e desliguei a compacta√ß√£o. </font><font style="vertical-align: inherit;">Eu fui de Brotli para Gzip e depois de Gzip para n√£o-compress√£o, medindo como isso funciona no site. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Embora eu n√£o possa, por exemplo, conectar-me ao servidor Linkedin e desconectar o Brotli, posso simplesmente acessar este site a partir de um navegador que n√£o √© compat√≠vel com o Brotli. </font><font style="vertical-align: inherit;">Embora n√£o seja poss√≠vel desativar o suporte ao Brotli no Chrome, posso ocultar do servidor o fato de o meu navegador suportar o Brotli. </font><font style="vertical-align: inherit;">Os navegadores informam aos servidores quais algoritmos de compacta√ß√£o s√£o compat√≠veis usando o cabe√ßalho da solicita√ß√£o</font></font><code>content-encoding</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Usando o Webpagetest, posso personalizar os cabe√ßalhos. </font><font style="vertical-align: inherit;">Ent√£o, tudo √© muito simples!</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3bb/295/390/3bb2953909f7cea0ac8970049f763638.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Os recursos avan√ßados do WebPageTest nos permitem definir cabe√ßalhos de solicita√ß√£o personalizados.Aqui</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
est√° como eu configuro o campo Cabe√ßalhos personalizados:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Desligamento completo de compress√£o: </font></font><code>accept-encoding: randomstring</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Incapacitante Brotli, mas o apoio Gzip: </font></font><code>accept-encoding: gzip</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para usar o Brotli se esse m√©todo de compacta√ß√£o for suportado pelo site (e contanto que ele seja suportado pelo navegador): o campo permanece vazio.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voc√™ pode descobrir se isso funciona como planejado, verificando a presen√ßa (ou aus√™ncia) do cabe√ßalho </font></font><code>content-encoding</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">na resposta do servidor.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">resultados</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como esperado, a transi√ß√£o da falta de compacta√ß√£o para o Gzip significou uma melhoria significativa, mas a transi√ß√£o do Gzip para Brotli n√£o parece t√£o impressionante. </font><font style="vertical-align: inherit;">Os dados brutos de minhas experi√™ncias podem ser encontrados </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqui</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">A seguir, as descobertas que mais me interessam:</font></font><br>
<br>
<ul>
<li>     Gzip     : 73%.</li>
<li>  FCP   Gzip     : 23.305%.</li>
<li>     Brotli    Gzip: 5.767%.</li>
<li>  FCP   Brotli    Gzip: 3.462%.</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todos esses s√£o valores medianos. </font><font style="vertical-align: inherit;">Falando em "tamanhos de material", quero dizer apenas HTML, CSS e JavaScript. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gra√ßas ao uso do Gzip, o tamanho dos arquivos foi reduzido em 73% em compara√ß√£o com as vers√µes descompactadas. </font><font style="vertical-align: inherit;">E o uso do Brotli permitiu reduzir o tamanho dos arquivos apenas em 5,7% adicionais. </font><font style="vertical-align: inherit;">Se falamos de FCP, gra√ßas ao Gzip, esse indicador melhorou 23% em compara√ß√£o com a falta de compacta√ß√£o, e Brotli adicionou apenas mais 3,5% a isso. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Embora pare√ßa que esses resultados reforcem a teoria, existem v√°rias maneiras de melhorar esses resultados. </font><font style="vertical-align: inherit;">O primeiro √© testar um n√∫mero muito maior de sites, gostaria de discutir mais dois com mais detalhes.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dados de recursos pr√≥prios e dados de fontes externas</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nos meus testes, desliguei o Brotli em todos os lugares, e n√£o apenas nos servidores que armazenam dados do site. </font><font style="vertical-align: inherit;">Isso significa que avaliei n√£o apenas os benef√≠cios que os sites obt√™m com o Brotli, mas, em termos de potencial, os benef√≠cios que Brotli obt√©m das fontes externas usadas por esses sites. </font><font style="vertical-align: inherit;">Isso se enquadra no escopo de nossos interesses somente se recursos de terceiros forem usados ‚Äã‚Äãnas formas cr√≠ticas dos sites sob investiga√ß√£o, mas vale a pena lembrar.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N√≠veis de compress√£o</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Falando em compacta√ß√£o, discutimos frequentemente os resultados obtidos com o melhor cen√°rio de aplicativo de compacta√ß√£o. Ou seja - ao usar o Gzip, temos em mente o 9¬∫ n√≠vel de compacta√ß√£o e ao usar o Brotli - 11¬∫ n√≠vel. No entanto, √© improv√°vel que o servidor sob investiga√ß√£o seja configurado da melhor maneira poss√≠vel. Por exemplo, o Apache usa compacta√ß√£o gzip no n√≠vel 6, enquanto o NGINX usa apenas o primeiro. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Desativar o Brotli significa que estamos mudando para a op√ß√£o de fallback, para o Gzip, e dada a maneira como eu testei os sites, n√£o pude alterar uma configura√ß√£o de fallback ou agir de alguma forma. Digo isso porque os materiais dos dois locais no teste aumentaram de tamanho quando Brotli foi ligado. Isso indica para mim que o n√≠vel de compacta√ß√£o Gzip era tal que fornecia uma compacta√ß√£o mais forte que o n√≠vel de compacta√ß√£o de Brotli.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Escolher um n√≠vel de compacta√ß√£o √© um compromisso. </font><font style="vertical-align: inherit;">Todos gostariam de pedir o n√≠vel mais alto de compacta√ß√£o e, com isso, considerar o problema resolvido. </font><font style="vertical-align: inherit;">Mas essa abordagem √© impratic√°vel. </font><font style="vertical-align: inherit;">O fato √© que o tempo extra que o servidor precisar√° para executar dinamicamente essa compacta√ß√£o provavelmente negar√° os benef√≠cios de um n√≠vel de compacta√ß√£o mais alto. </font><font style="vertical-align: inherit;">Para lidar com esse problema, voc√™ pode recorrer ao seguinte:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Voc√™ pode usar um n√≠vel pragm√°tico de compacta√ß√£o que forne√ßa o equil√≠brio certo de velocidade e efici√™ncia durante a compacta√ß√£o din√¢mica de dados.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Voc√™ pode fazer upload de recursos est√°ticos pr√©-compactados para o servidor, cujo n√≠vel de compacta√ß√£o √© maior que o usado para compacta√ß√£o din√¢mica. </font><font style="vertical-align: inherit;">Nesse caso, para selecionar o n√≠vel de compacta√ß√£o din√¢mica, voc√™ pode usar a ideia descrita no primeiro par√°grafo.</font></font></li>
</ol><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sum√°rio</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ficamos com a impress√£o de que, racionalmente, podemos reconhecer a insignific√¢ncia das vantagens de Brotli sobre o Gzip. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se ativar o suporte ao Brotli √© uma quest√£o de alguns movimentos do mouse no painel de controle da sua CDN, voc√™ deve pegar o Brotli e lig√°-lo agora. O suporte para esse algoritmo de compacta√ß√£o √© amplo o suficiente, os navegadores que n√£o oferecem suporte ao Brotli mudam facilmente para mecanismos de reserva, e mesmo uma pequena melhoria √© melhor que nada. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se poss√≠vel, fa√ßa o upload dos recursos est√°ticos pr√©-compactados no n√≠vel m√°ximo de compacta√ß√£o para os servidores. E para compacta√ß√£o din√¢mica, use n√£o os n√≠veis de compacta√ß√£o mais altos, mas n√£o os mais baixos. Se voc√™ usa o NGINX, verifique se n√£o est√° usando o primeiro n√≠vel padr√£o de compacta√ß√£o do NGINX.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No entanto, se, para usar o Brotli, voc√™ pode precisar de semanas de desenvolvimento, teste e implanta√ß√£o, n√£o entre em p√¢nico - apenas certifique-se de usar a compacta√ß√£o Gzip para tudo o que pode ser compactado (isso inclui, al√©m de recursos de texto, arquivos .ico e .ttf - se eles s√£o, √© claro, usados ‚Äã‚Äãem seu projeto). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Suponho que uma vers√£o curta deste artigo possa ser assim: se voc√™ n√£o deve ou n√£o pode ativar o Brotli, n√£o est√° perdendo muito. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Queridos leitores! </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Voc√™ planeja usar o Brotli?</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/webt/iq/fi/b4/iqfib45pgphfrxv--zfemt0qnmw.jpeg"></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt499254/index.html">Membro do Comit√™ de Programa PyConRu 2020 responde a perguntas sobre Python: uma apar√™ncia atualizada e um pouco de parseltang</a></li>
<li><a href="../pt499262/index.html">Hackathon final online para SMZhack aut√¥nomo: projetos que atingir√£o as pessoas</a></li>
<li><a href="../pt499268/index.html">Consci√™ncia espacial: o que os √≥culos Hololens podem fazer?</a></li>
<li><a href="../pt499272/index.html">–ü–∞–π–∫–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ 0201. –°–ª–∞–±–æ–Ω–µ—Ä–≤–Ω—ã—Ö –ø—Ä–æ—Å—å–±–∞ —É–¥–∞–ª–∏—Ç—å—Å—è –æ—Ç —ç–∫—Ä–∞–Ω–æ–≤</a></li>
<li><a href="../pt499274/index.html">Desmontamos a nova c√°psula. Sabemos quantos microfones e como funciona</a></li>
<li><a href="../pt499280/index.html">O pre√ßo das estruturas JavaScript</a></li>
<li><a href="../pt499286/index.html">Estudo: com√©rcio corporativo de acesso √† rede est√° crescendo no mercado negro</a></li>
<li><a href="../pt499288/index.html">Todas as medidas para apoiar neg√≥cios em conex√£o com o coronav√≠rus. Parte 1</a></li>
<li><a href="../pt499290/index.html">Como escrever um padr√£o t√©cnico para seguran√ßa da informa√ß√£o para uma grande empresa</a></li>
<li><a href="../pt499296/index.html">Ingl√™s para demonstra√ß√£o (estrutura, frases, perguntas e respostas, gram√°tica, dicas)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>