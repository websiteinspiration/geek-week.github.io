<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚õàÔ∏è ‚úåüèª ‚úåüèΩ Mastering development through testing in Android using UI tests üóø ‚ùÑÔ∏è üë©üèº‚Äçüè´</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello everyone. In anticipation of the launch of a new set of basic and advanced courses on Android development, we prepared a translation of interest...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Mastering development through testing in Android using UI tests</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/492712/"><b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hello everyone. </font><font style="vertical-align: inherit;">In anticipation of the launch of a new set of </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">basic</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">advanced</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> courses on Android development, we prepared a translation of interesting material.</font></font></i></b><br>
<br>
<img src="https://habrastorage.org/webt/0i/ef/lj/0iefljfwnqnrpvgj9hizrlqeatg.png"><br>
<hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Over the last year of the work of the Android development team at Buffer, we </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">talked a lot about the cleanliness of our project</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and improving its stability. </font><font style="vertical-align: inherit;">One of the factors was the introduction () of tests, which, as we have already found out, help us avoid regressions in our code and give us more confidence in the features we provide. </font><font style="vertical-align: inherit;">And now, when we </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">launch new products in Buffer</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , we want to make sure that the same approach is applied when it comes to them - just so that we are not in the same situation as before.</font></font><a name="habracut"></a><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Background</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
When writing unit tests for Buffer applications, we have always adhered to development practice through testing (Test-Driven-Development - hereinafter TDD). </font><font style="vertical-align: inherit;">There are many resources about what TDD is, about its advantages, and where they come from, but we will not dwell on this topic, since there is a lot of information on the Internet. </font><font style="vertical-align: inherit;">At a high level, I personally note some of them:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Reduced development time</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Simpler, cleaner, and more maintainable code</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">More reliable code with more confidence in our work.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Higher test coverage (this seems kind of obvious)</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But until recently, we only followed the principles of TDD only in the form of unit tests for our implementations that were not based on the user interface ... </font></font><br>
<br>
<img src="https://habrastorage.org/webt/c8/df/_w/c8df_wzud2rosic5vw82xx1axyg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I know, I know ... We always had the habit of writing UI tests after what was implemented was completed - and that doesn't make sense. We monitored TDD for the backend so that the code we write met the requirements that the tests define, but when it comes to user interface tests, we write tests that satisfy the implementation of a specific feature. As you can see, this is a bit controversial, and in some ways it is about why TDD is used in the first place. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So, here I want to consider why this is so, and how we are experimenting with change. But why do we pay attention to this in the first place?</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It was always difficult to work with existing activities in our application because of how they are written. </font><font style="vertical-align: inherit;">This is not a complete excuse, but its many dependencies, responsibilities, and close ties make them extremely difficult to test. </font><font style="vertical-align: inherit;">For the new activities that we added, out of habit, I myself always wrote UI tests after implementation - besides habit, there was no other reason for this. </font><font style="vertical-align: inherit;">However, when creating our </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">template code</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , ready for new projects, I thought about a change. </font><font style="vertical-align: inherit;">And you will be glad to know that this habit has been broken, and now we are working on ourselves, exploring </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TDD</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> for </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UI</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tests</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">First steps</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
What we are going to explore here is a fairly simple example, so that the concept is easier to follow and understand - I hope this will be enough to see some of the advantages of this approach. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We are going to start by creating a basic activity. We need to do this so that we can run our UI test - imagine that this setup is the basis for our implementation, and not the implementation itself. Here's what our basic activity looks like:</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LoginActivity</span>: <span class="hljs-title">AppCompatActivity</span>(), <span class="hljs-title">LoginContract</span>.<span class="hljs-title">View</span> </span>{<font></font>
<font></font>
    <span class="hljs-meta">@Inject</span> lateinit <span class="hljs-keyword">var</span> loginPresenter: LoginContract.<span class="hljs-function">Presenter

    override fun <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: Bundle?)</span> </span>{
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)<font></font>
        setContentView(R.layout.activity_login)<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function">override fun <span class="hljs-title">setPresenter</span><span class="hljs-params">(presenter: LoginContract.Presenter)</span> </span>{<font></font>
        loginPresenter = presenter<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function">override fun <span class="hljs-title">showServerErrorMessage</span><span class="hljs-params">()</span> </span>{<font></font>
        TODO(<span class="hljs-string">"not implemented"</span>)<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function">override fun <span class="hljs-title">showGeneralErrorMessage</span><span class="hljs-params">()</span> </span>{<font></font>
        TODO(<span class="hljs-string">"not implemented"</span>)<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function">override fun <span class="hljs-title">showProgress</span><span class="hljs-params">()</span> </span>{<font></font>
        TODO(<span class="hljs-string">"not implemented"</span>)<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function">override fun <span class="hljs-title">hideProgress</span><span class="hljs-params">()</span> </span>{<font></font>
        TODO(<span class="hljs-string">"not implemented"</span>)<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function">override fun <span class="hljs-title">showInvalidEmailMessage</span><span class="hljs-params">()</span> </span>{<font></font>
        TODO(<span class="hljs-string">"not implemented"</span>)<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function">override fun <span class="hljs-title">hideInvalidEmailMessage</span><span class="hljs-params">()</span> </span>{<font></font>
        TODO(<span class="hljs-string">"not implemented"</span>)<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function">override fun <span class="hljs-title">showInvalidPasswordMessage</span><span class="hljs-params">()</span> </span>{<font></font>
        TODO(<span class="hljs-string">"not implemented"</span>)<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function">override fun <span class="hljs-title">hideInvalidPasswordMessage</span><span class="hljs-params">()</span> </span>{<font></font>
        TODO(<span class="hljs-string">"not implemented"</span>)<font></font>
    }<font></font>
<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
You may notice that this activity does nothing but the initial setup, which is required for the activity. In the onCreate () method, we simply set a link to the layout, we also have a link to our View interface, which is implemented using activity, but they do not yet have implementations. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
One of the most common things that we find in Espresso tests is reference views and strings by resource IDs found in our application. In this regard, we again need to provide a layout file for use in our activity. This is due to the fact that: a) our activity needs a layout file to display the layout during the tests, and b) we need an ID view for links in our tests. Let's go ahead and make a very simple layout for our login activity:</font></font><br>
<br>
<pre><code class="xml hljs"><span class="hljs-meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span> <span class="hljs-attr">xmlns:android</span>=<span class="hljs-string">"http://schemas.android.com/apk/res/android"</span>
    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
    <span class="hljs-attr">android:orientation</span>=<span class="hljs-string">"vertical"</span>&gt;</span><font></font>
<font></font>
    <span class="hljs-tag">&lt;<span class="hljs-name">EditText</span>
        <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/input_email"</span>
        <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
        <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span> /&gt;</span><font></font>
<font></font>
    <span class="hljs-tag">&lt;<span class="hljs-name">EditText</span>
        <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/input_password"</span>
        <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
        <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span> /&gt;</span><font></font>
<font></font>
    <span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
        <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/button_login"</span>
        <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
        <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span> /&gt;</span><font></font>
<font></font>
<span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Here you can see that we were not worried about any style or position, remember - while we are creating the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">foundation</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , and not the implementation. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And for the last part of the setup, we are going to define the lines that will be used in this exercise. </font><font style="vertical-align: inherit;">Again, we will need to reference them in tests - until you add them to your XML layout or activity class, just define them in the file </font></font><code>strings.xml</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<pre><code class="java hljs">&lt;string name=<span class="hljs-string">"error_message_invalid_email‚Äù&gt;‚Ä¶&lt;/string&gt;
&lt;string name="</span>error_message_invalid_password‚Äù&gt;‚Ä¶&lt;/string&gt;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
You may notice that in this setup we write as little as possible, but we provide enough details about our activity and its layout to write tests for it. </font><font style="vertical-align: inherit;">Our activity does not currently work, but it opens and has a view that can be referenced. </font><font style="vertical-align: inherit;">Now that we have enough minimum to work, let's continue and add some tests.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Adding Tests</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So, we have three situations that we must implement, so we are going to write some tests for them.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">When a user enters an invalid email address in the email input field, we need to display an error message. </font><font style="vertical-align: inherit;">So, we are going to write a test that checks whether this error message is displayed.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">When the user starts to enter data into the email input field again, the above error message should disappear - therefore we are going to write a test for this.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Finally, when the API returns an error message, it should be displayed in a warning dialog box - so we will also add a test for this.</font></font></li>
</ul><br>
<pre><code class="java hljs"><span class="hljs-meta">@Test</span>
<span class="hljs-function">fun <span class="hljs-title">invalidEmailErrorHidesWhenUserTypes</span><span class="hljs-params">()</span> </span>{<font></font>
    activity.launchActivity(<span class="hljs-keyword">null</span>)<font></font>
<font></font>
    onView(withId(R.id.button_login))<font></font>
            .perform(click())<font></font>
<font></font>
    onView(withId(R.id.input_email))<font></font>
            .perform(typeText(<span class="hljs-string">"j"</span>))<font></font>
<font></font>
    onView(withText(R.string.error_message_invalid_email))<font></font>
            .check(doesNotExist())<font></font>
}<font></font>
<font></font>
<span class="hljs-meta">@Test</span>
<span class="hljs-function">fun <span class="hljs-title">invalidPasswordErrorDisplayed</span><span class="hljs-params">()</span> </span>{<font></font>
    activity.launchActivity(<span class="hljs-keyword">null</span>)<font></font>
<font></font>
    onView(withId(R.id.button_login))<font></font>
            .perform(click())<font></font>
<font></font>
    onView(withText(R.string.error_message_invalid_password))<font></font>
            .check(matches(isDisplayed()))<font></font>
}<font></font>
<font></font>
<span class="hljs-meta">@Test</span>
<span class="hljs-function">fun <span class="hljs-title">serverErrorMessageDisplays</span><span class="hljs-params">()</span> </span>{<font></font>
    val response = ConnectResponseFactory.makeConnectResponseForError()<font></font>
    stubConnectRepositorySignIn(Single.just(response))<font></font>
    activity.launchActivity(<span class="hljs-keyword">null</span>)<font></font>
<font></font>
    onView(withId(R.id.input_email))<font></font>
            .perform(typeText(<span class="hljs-string">"joe@example.com"</span>))<font></font>
<font></font>
    onView(withId(R.id.input_password))<font></font>
            .perform(typeText(DataFactory.randomUuid()))<font></font>
<font></font>
    onView(withId(R.id.button_login))<font></font>
            .perform(click())<font></font>
<font></font>
    onView(withText(response.message))<font></font>
            .check(matches(isDisplayed()))<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ok, now we have written tests - let's continue and run them. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/2x/ac/bv/2xacbvdf2rumlv9asggjp9mwsp8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And it is not surprising that they failed - this is because we do not yet have an implementation, so this should be expected. In any case, we should be glad to see red for tests right now! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So now we need to add implementations for our activity until the tests pass. As we write focused tests that test only one concept (or at least it should be!), We can add implementations one by one, and also watch our tests turn green one by one. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So, let's look at one of the failed tests, let's start with the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">invalidPasswordErrorDisplayed ()</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> test </font><font style="vertical-align: inherit;">. We know a few things:</font></font><br>
<br>
<ul>
<li>     ,    ,       ,          ,       :</li>
</ul><br>
<pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword">private</span> fun <span class="hljs-title">setupLoginButtonClickListener</span><span class="hljs-params">()</span> </span>{<font></font>
    button_login.setOnClickListener {<font></font>
        loginPresenter.performSignIn(input_email.text.toString(),<font></font>
                input_password.text.toString()) }<font></font>
}</code></pre><br>
<ul>
<li>       ,          .    TextInputLayout,             ,    :</li>
</ul><br>
<pre><code class="java hljs"><span class="hljs-function">override fun <span class="hljs-title">showInvalidPasswordMessage</span><span class="hljs-params">()</span> </span>{<font></font>
    layout_input_password.error = getString(R.string.error_message_invalid_password)<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now we have added the logic for this situation, let's continue and run our tests again! </font></font><br>
<br>
<img src="https://habrastorage.org/webt/jq/4-/et/jq4-etd3rfq9tddsy4x0lusrti0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Great, it looks like the check </font></font><code>invalidPassworrdErrorDisplays()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">was successful. But we have not finished yet, we still have two tests that have not been passed for those parts of our login function that we must implement. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Next, we will consider the test </font></font><code>serverErrorMessageDisplays()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. This is quite simple, we know that when the API returns an error response (and not a general error from our network library), the application should display an error message to the user in a warning dialog box. To do this, we just need to create an instance of the dialog using our server error message in the dialog text:</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-function">override fun <span class="hljs-title">showServerErrorMessage</span><span class="hljs-params">(message: String)</span> </span>{<font></font>
    DialogFactory.createSimpleInfoDialog(<span class="hljs-keyword">this</span>, R.string.error_message_login_title, message, <font></font>
            R.string.error_message_login_ok).show()<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let's continue and run our tests again: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/td/le/m2/tdlem2qq8vgtq9wcggplu-dra_0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hurray! </font><font style="vertical-align: inherit;">We are moving forward, now we have only one test left, this is a test </font></font><code>invalidEmailErrorHidesWhenUserTypes()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Again, this is a simple case, but let's look at it:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">When the user clicks the login button and the email address is missing or the email address is incorrect, we show the user an error message. </font><font style="vertical-align: inherit;">We have already implemented this, I just ruled it out for simplicity</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">However, when the user begins to enter data into the field again, the error message should be removed from the display. </font><font style="vertical-align: inherit;">To do this, we need to listen when the text content of the input field changes:</font></font></li>
</ul><br>
<pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword">private</span> fun <span class="hljs-title">setupOnEmailTextChangedListener</span><span class="hljs-params">()</span> </span>{<font></font>
    input_email.addTextChangedListener(object : TextWatcher {<font></font>
<font></font>
        <span class="hljs-function">override fun <span class="hljs-title">afterTextChanged</span><span class="hljs-params">(s: Editable)</span> </span>{}<font></font>
<font></font>
        <span class="hljs-function">override fun <span class="hljs-title">beforeTextChanged</span><span class="hljs-params">(s: CharSequence, start: Int,
                                       count: Int, after: Int)</span> </span>{<font></font>
        }<font></font>
<font></font>
        <span class="hljs-function">override fun <span class="hljs-title">onTextChanged</span><span class="hljs-params">(s: CharSequence, start: Int,
                                   before: Int, count: Int)</span> </span>{<font></font>
            loginPresenter.handleEmailTextChanged(s)<font></font>
        }<font></font>
    })<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now this should be enough to guarantee that our error message will be hidden when changing the contents of the input field. </font><font style="vertical-align: inherit;">But we have tests to confirm our changes: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/du/ni/aa/duniaa83g3b84ennz4ljp03uez8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Great! </font><font style="vertical-align: inherit;">Our implementation requirements are met as we pass our tests - it's great to see the green light</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusion</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It is important to note that the example to which we applied TDD is extremely primitive. Imagine that we are developing a complex screen, such as a content feed, in which you can perform several actions with feed elements (for example, as in the Buffer application for Android) - in these cases we will use many different functions that should be implemented in the given activity / fragment. These are situations where TDD in UI tests will be revealed even more, because what can lead to the fact that we will write too complex code for these functions can be reduced to implementations that satisfy the given tests that we wrote. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To summarize, I will share some points learned from my experience:</font></font><br>
<br>
<ul>
<li>  ,   ,  TDD  .   ,        .   ,  Espresso     (/,     ),         .       activity,  ,      ,        .                .</li>
<li>  ,   ,     ,   , ,  ,   ,       .  ,        , ,      ,  ,      ( ,      !). -         .           , , ,  - .</li>
<li> ,   Ui-              ,   ,          . ,   , ,   ,       ,      ,    .</li>
<li> ,      .       ,        ‚Äî      ,      ,        ,     - .</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It seems more natural. </font><font style="vertical-align: inherit;">Because TDD is already used for unit tests, you feel a little backwards when you write unit tests, followed by implementations, followed by UI tests. </font><font style="vertical-align: inherit;">You will feel more natural by going full step with TDD, not halfway.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Are you already using TDD when writing user interface tests and are doing something similar or completely different? </font><font style="vertical-align: inherit;">Or do you want to know a little more and ask a few questions? </font><font style="vertical-align: inherit;">Feel free to comment below or tweet us at </font></font><code>@bufferdevs</code> <br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">That's all. </font><font style="vertical-align: inherit;">We are waiting for you at the courses:</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Base</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Advanced</font></font></a></li>
</ul></i></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en492702/index.html">Machine translate. From the cold war to the present</a></li>
<li><a href="../en492704/index.html">To increase the effectiveness of implant survival by 5-7 times - how is this possible?</a></li>
<li><a href="../en492706/index.html">Memory archives: how the brain encodes and reproduces memories</a></li>
<li><a href="../en492708/index.html">Global satellite Internet - is there any news from the fields?</a></li>
<li><a href="../en492710/index.html">Thorny path of candidate through various HRM systems</a></li>
<li><a href="../en492714/index.html">Effective work from home: general and personal</a></li>
<li><a href="../en492718/index.html">Security through user restriction or how to create a vulnerability</a></li>
<li><a href="../en492720/index.html">diskussion: project file service</a></li>
<li><a href="../en492724/index.html">Bj√∂rn Straustrup Answers Top 5 C ++ Questions with Stack Overflow</a></li>
<li><a href="../en492726/index.html">OS Sivelkiriya: software development process</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>