<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üïµüèº üç¥ üìû Kann ich Skripte in C ++ schreiben? üïî üôèüèº ‚ò¶Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Vor kurzem musste ich immer wieder in die wunderbare Welt der Linux-Skriptprogrammierung eintauchen. Im Prinzip ist die Sache nicht sehr schwierig, ab...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Kann ich Skripte in C ++ schreiben?</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/488962/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/-7/xg/my/-7xgmyrtvd5lv6l5kws9xiaulvg.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vor kurzem musste ich immer wieder in die wunderbare Welt der Linux-Skriptprogrammierung eintauchen. Im Prinzip ist die Sache nicht sehr schwierig, aber da ich nicht oft auf solche Aufgaben sto√üe, studiere ich sie jedes Mal neu. Ich wei√ü mit Sicherheit, dass ich morgen viel vergessen werde und in einem Monat werde ich wieder googeln, wie man dies oder das macht. Das Problem stellt sich immer noch heraus, dass Sie das Skript h√§ufig nicht erneut schreiben, sondern das vorhandene Skript √§ndern, das bereits von jemandem geschrieben wurde. Und es ist vielleicht nicht Bash, sondern Sh oder etwas anderes ... Es gibt Unterschiede in der Syntax, was in Sh funktioniert, sollte in Bash funktionieren, aber nicht immer umgekehrt. Und wenn es Dash oder Asche gibt? Ich wei√ü nicht ... Es gibt immer noch Unterschiede in diesen Skriptsprachen und sie sind verwirrend. Und nat√ºrlich f√ºr mich pers√∂nlich die Kirsche auf dem Kuchen, wenn das Skript etwas sed oder awk aufruft und es solche Parameter in der Befehlszeile gibt, dass Sie sie betrachten und sich wundern.Es ist klar, dass dies alles von den Qualifikationen des Programmierers abh√§ngt, aber nicht alles passt in meinen Kopf. Und jetzt ist meine Geduld weg und ich dachte, dass ich von nun an versuchen m√∂chte, Skripte in C ++ zu schreiben ...</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich verstehe, dass mein Gedanke f√ºr einen echten Systemadministrator aufr√ºhrerisch erscheinen kann. </font><font style="vertical-align: inherit;">Aber warum nicht?</font></font><a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Idee ist also sehr einfach. </font><font style="vertical-align: inherit;">Ich m√∂chte C ++ - Skripte genauso schreiben wie regul√§re Skripte, dh die erste Zeile des Skripts sollte Shebang und einen Hinweis auf den Pfad zum "Interpreter" enthalten:</font></font><br>
<br>
<pre><code class="plaintext hljs">#!/bin/c++</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die folgenden Zeilen des Skripts sind nur ein regul√§res C ++ - Programm. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich muss den "Interpreter" des c ++ - Skripts vorbereiten. </font><font style="vertical-align: inherit;">Sie k√∂nnen es auf alles schreiben, zumindest auf Bash (dies ist das letzte Mal, wenn auch nicht genau). </font><font style="vertical-align: inherit;">Nat√ºrlich wird es kein Interpreter sein, sondern ein Compiler. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das ist, was ich tat:</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-meta">#!/bin/bash
</span><font></font>
msg_file=/dev/null<font></font>
<span class="hljs-comment">#msg_file=/dev/stdout</span><font></font>
<font></font>
tmp_path=<span class="hljs-variable">$HOME</span><span class="hljs-string">"/.cache/c++/"</span>
mkdir -p <span class="hljs-variable">$tmp_path</span>
tmp_file=<span class="hljs-variable">$1</span><span class="hljs-string">".c++"</span>
exe_file=<span class="hljs-variable">$1</span><span class="hljs-string">".bin"</span>
<span class="hljs-keyword">if</span> <span class="hljs-built_in">test</span> <span class="hljs-variable">$1</span> -nt  <span class="hljs-variable">$tmp_path</span><span class="hljs-variable">$exe_file</span>; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Need to recompile.."</span> &gt; <span class="hljs-variable">$msg_file</span>
    tail -n +2 <span class="hljs-variable">$1</span> &gt; <span class="hljs-variable">$tmp_path</span><span class="hljs-variable">$tmp_file</span>
    <span class="hljs-built_in">eval</span> <span class="hljs-string">"g++ -o <span class="hljs-variable">$tmp_path</span><span class="hljs-variable">$exe_file</span> <span class="hljs-variable">$tmp_path</span><span class="hljs-variable">$tmp_file</span> &gt; /dev/null 2&gt;&amp;1"</span>
    <span class="hljs-keyword">if</span> [ $? -eq 0 ]
    <span class="hljs-keyword">then</span>
	<span class="hljs-built_in">echo</span> <span class="hljs-string">"Compiled ok"</span> &gt; <span class="hljs-variable">$msg_file</span>
    <span class="hljs-keyword">else</span>
	<span class="hljs-built_in">echo</span> <span class="hljs-string">"Compile error"</span> &gt; <span class="hljs-variable">$msg_file</span>
	<span class="hljs-built_in">exit</span> 255
    <span class="hljs-keyword">fi</span>
<span class="hljs-keyword">fi</span>
<span class="hljs-built_in">eval</span> <span class="hljs-string">"<span class="hljs-variable">$tmp_path</span><span class="hljs-variable">$exe_file</span> <span class="hljs-variable">$@1</span>"</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dieses Skript macht alles, was Sie brauchen. Als tempor√§ren Ordner habe ich den Ordner ~ / .cache / c ++ gew√§hlt. Das urspr√ºngliche Skript wird in diesen Ordner kopiert, jedoch ohne die erste Zeile mit shebang. Dies erfolgt √ºber den Befehl tail. Der Name der neuen Datei entspricht dem urspr√ºnglichen Skript, jedoch mit der Erweiterung c ++. Die Bin√§rdatei mit der Erweiterung .bin wird im selben Ordner gesammelt. Aber zuerst wird nat√ºrlich zum Zeitpunkt der Erstellung der Bin√§rdatei eine "Wenn-Test" -Pr√ºfung durchgef√ºhrt. Die Kompilierung erfolgt nur, wenn die vorhandene Bin√§rdatei in Bezug auf das urspr√ºngliche ‚ÄûSkript‚Äú zeitlich veraltet ist. Die Bin√§rdatei wird mit dem Befehl eval gestartet und alle Anfangsparameter werden an sie √ºbergeben. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Diese c ++ - Datei muss in den Ordner / bin kopiert und ausf√ºhrbar gemacht werden (chmod a + x). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich werde versuchen, mein erstes "C ++ - Skript" zu schreiben:</font></font><br>
<br>
<pre><code class="cpp hljs">#!/bin/c++<font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><font></font>
<font></font>
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">( <span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> *argv[] )</span>
</span>{
    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"hello world!\n"</span>;
    <span class="hljs-keyword">for</span>( <span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;argc; i++)<font></font>
    {<font></font>
	<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Param"</span> &lt;&lt; i &lt;&lt;  <span class="hljs-string">" is "</span> &lt;&lt; argv[i] &lt;&lt; <span class="hljs-string">"\n"</span>;<font></font>
    }<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-number">60</span>+argc;<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dieses Programm druckt einfach eine Liste der Eingabeparameter und gibt deren Nummer + 60 zur√ºck. Ich </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
f√ºhre mein "Skript" aus: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/1y/0c/ks/1y0cksrwf2niluhqf-adbf2cfwy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es funktioniert !!! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie einen Fehler im C ++ - Code machen, wird das Programm nicht gestartet, da es nicht kompiliert wird, sondern $? wird zur√ºckkehren 255. Aber das war es, was beabsichtigt war. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Verwendung von c ++ bietet enorme M√∂glichkeiten. Erstens die bekannte Syntax. Zweitens sind Standardklassen wie std :: vector, std :: map oder std :: string und andere unersetzliche Dinge. Dieselbe Linie - was auch immer Sie damit machen m√∂chten, schauen Sie in die Linie, zerlegen Sie sie in Teilzeichenfolgen, trennen und erobern Sie, erhalten Sie Arrays. Und ich brauche weder sed noch awk. Drittens der Debugger - Gott! was f√ºr ein Segen! Ich habe einen GDB-Debugger f√ºr das Skript! Au√üerdem k√∂nnen Sie std :: filesystem verwenden (sofern der Compiler dies zul√§sst). Du kannst weitermachen ...</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Leider passiert es bei mir oft, dass ich es zuerst mache und dann denke ich: "Was ist, wenn jemand dies bereits getan hat?" </font><font style="vertical-align: inherit;">Und tats√§chlich bin ich nicht der erste, der auf die Idee kommt, dasselbe zu tun. </font><font style="vertical-align: inherit;">Hier ein Beispiel: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://github.com/dimgel/cpp-linux-scripts Die</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Idee ist dieselbe, die Implementierung ist unterschiedlich. </font><font style="vertical-align: inherit;">Dann stellte sich heraus, dass es </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">andere Implementierungen gibt</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Allgemeinen habe ich eine leichte Entt√§uschung √ºber meine eigene Nicht-Exklusivit√§t erfahren. </font><font style="vertical-align: inherit;">Ich suchte jedoch nach Habr - ich fand keinen √§hnlichen. </font><font style="vertical-align: inherit;">Vielleicht scheint jemand zumindest neugierig?</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de488950/index.html">Zeit in einer zellularen Maschine</a></li>
<li><a href="../de488952/index.html">Phrasen-Stimmungsanalyse unter Verwendung neuronaler Netze</a></li>
<li><a href="../de488956/index.html">Organisation von Dokumentation und √úbersetzung, zum Beispiel iondv. Rahmen</a></li>
<li><a href="../de488958/index.html">Abschrift meines Interviews mit dem Ruby-Autor</a></li>
<li><a href="../de488960/index.html">Programmierung, Immunit√§t und Armee</a></li>
<li><a href="../de488964/index.html">Dringende Aufgaben. M√∂ge der Erretter kommen</a></li>
<li><a href="../de488990/index.html">√úbersicht √ºber die Vollmaske von UNIX 5100, Filter dazu, Vergleich mit den Modellen UNIX 5000, 6100 und Maske PPM-88</a></li>
<li><a href="../de488994/index.html">DDR5? Ja, wir haben DDR4 kaum getroffen</a></li>
<li><a href="../de488998/index.html">Warum KI-Anforderungen die Sache nur noch schlimmer machen k√∂nnen</a></li>
<li><a href="../de489000/index.html">So montieren Sie einen coolen Mitap: 16 Tipps von drei ‚ÄûSerien-Mitapern‚Äú. Leader-IT-Veranstaltungen # 1</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>