<!doctype html>
<html class="no-js" lang="ar">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🙂 🏐 ⏭️ تفاصيل حول حزمة الموفر لـ Flutter 👨🏾‍🚒 🦕 🧛🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="مرحبا يا هابر! 
 
 تتضمن خططنا متوسطة المدى إصدار كتاب Flutter. فيما يتعلق بلغة Dart كموضوع ، ما زلنا نتخذ موقفًا أكثر حذراً ، لذلك سنحاول تقييم ملاءم...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>تفاصيل حول حزمة الموفر لـ Flutter</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/piter/blog/503074/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">مرحبا يا هابر! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
تتضمن خططنا متوسطة المدى إصدار كتاب Flutter. </font><font style="vertical-align: inherit;">فيما يتعلق بلغة Dart كموضوع ، ما زلنا نتخذ موقفًا أكثر حذراً ، لذلك سنحاول تقييم ملاءمته وفقًا لنتائج هذه المقالة. </font><font style="vertical-align: inherit;">وسيركز على حزمة </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">الموفر</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ، وبالتالي على إدارة الدولة في Flutter.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
المزود عبارة عن حزمة إدارة دولة كتبها </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Remy Rusle</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> واعتمدتها Google </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;">ومجتمع Flutter</font></a><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ولكن ما هي إدارة الدولة؟ </font><font style="vertical-align: inherit;">بالنسبة للمبتدئين ، ما هو الشرط؟ </font><font style="vertical-align: inherit;">دعني أذكرك بأن الحالة هي مجرد بيانات لتمثيل واجهة المستخدم في تطبيقك. </font><font style="vertical-align: inherit;">إدارة الدولة هي نهج لإنشاء هذه البيانات والوصول إليها ومعالجتها والتخلص منها. </font><font style="vertical-align: inherit;">لفهم حزمة المزود بشكل أفضل ، نوجز بإيجاز تاريخ إدارة الدولة في Flutter.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. StatefulWidget</font></font></h4><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">StatelessWidget</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> هو مكون واجهة مستخدم بسيط لا يتم عرضه إلا عندما يحتوي على بيانات. لا </font></font><code>StatelessWidget</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">توجد "ذاكرة" ؛ يتم إنشاؤها وتدميرها عند الضرورة. يحتوي Flutter أيضًا على </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">StatefulWidget</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ، حيث توجد ذاكرة ، بفضله قمر صناعي طويل الأمد - كائن </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">الدولة</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . لدى هذه الفئة طريقة </font></font><code>setState()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">، عندما يتم استدعاؤها ، يتم تشغيل عنصر واجهة تعامل يعيد بناء الحالة ويعرضها في شكل جديد. هذا هو أبسط شكل من أشكال إدارة حالة Flutter المقدمة من خارج منطقة الجزاء. فيما يلي مثال على زر يعرض دائمًا وقت الضغط عليه آخر مرة:</font></font><br>
<br>
<pre><code class="dart hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">_MyWidgetState</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">State</span>&lt;<span class="hljs-title">MyWidget</span>&gt; </span>{
  <span class="hljs-built_in">DateTime</span> _time = <span class="hljs-built_in">DateTime</span>.now();  <span class="hljs-meta">@override</span><font></font>
  Widget build(BuildContext context) {<font></font>
    <span class="hljs-keyword">return</span> FlatButton(<font></font>
      child: Text(_time.toString()),<font></font>
      onPressed: () {<font></font>
        setState(() =&gt; _time = <span class="hljs-built_in">DateTime</span>.now());<font></font>
      },<font></font>
    );<font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
إذن ما هي مشكلة هذا النهج؟ </font><font style="vertical-align: inherit;">افترض أن التطبيق الخاص بك يحتوي على بعض الحالة العامة المخزنة في الجذر </font></font><code>StatefulWidget</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">يحتوي على بيانات مخصصة للاستخدام في أجزاء مختلفة من واجهة المستخدم. </font><font style="vertical-align: inherit;">تتم مشاركة هذه البيانات وتمريرها إلى كل عنصر واجهة مستخدم تابع في شكل معلمات. </font><font style="vertical-align: inherit;">أي أحداث يتم التخطيط لتغيير هذه البيانات فيها ، تنبثق في شكل استدعاءات. </font><font style="vertical-align: inherit;">وبالتالي ، من خلال جميع الحاجيات الوسيطة ، يتم إرسال الكثير من المعلمات وردود الفعل ، والتي يمكن أن تؤدي قريبًا إلى الارتباك. </font><font style="vertical-align: inherit;">الأسوأ من ذلك ، أن أي تحديثات للجذر المذكور أعلاه ستؤدي إلى إعادة بناء شجرة عنصر واجهة المستخدم بالكامل ، وهو أمر غير فعال.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. InheritedWidget</font></font></h4><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">InheritedWidget</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> هي أداة خاصة يمكن لأحفادها الوصول إليها بدون رابط مباشر. </font><font style="vertical-align: inherit;">بمجرد الانتقال إلى </font></font><code>InheritedWidget</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">، يمكن لعنصر واجهة مستخدم مستهلك التسجيل لإعادة إنشاء تلقائي ، والذي سيحدث عند إعادة بناء عنصر واجهة استخدام السلف. </font><font style="vertical-align: inherit;">تتيح لك هذه التقنية تنظيم تحديث واجهة المستخدم بشكل أكثر كفاءة. </font><font style="vertical-align: inherit;">بدلاً من إعادة إنشاء أجزاء ضخمة من التطبيق استجابة لتغيير صغير في الحالة ، يمكنك تحديد انتقائيًا فقط لتلك الأدوات المحددة التي تحتاج إلى إعادة بنائها. </font><font style="vertical-align: inherit;">كنت قد عملت بالفعل </font></font><code>InheritedWidget</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">كلما استخدمت </font></font><code>MediaQuery.of(context)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">أو </font></font><code>Theme.of(context)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">صحيح أنه من غير المحتمل أن تكون قد قمت بتطبيق InheritedWidget الخاصة بك مع الحفاظ على الحالة. </font><font style="vertical-align: inherit;">والحقيقة هي أن تنفيذها بشكل صحيح ليس بالأمر السهل.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. ScopedModel</font></font></h4><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ScopedModel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> هي حزمة تم إنشاؤها في عام 2017 بواسطة Brian Egan ، مما يجعلها سهلة الاستخدام </font></font><code>InheritedWidget</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">لتخزين حالة التطبيق. </font><font style="vertical-align: inherit;">تحتاج أولاً إلى إنشاء كائن حالة يرث من </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">الطراز</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ، ثم </font></font><code>notifyListeners()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">تسميته عندما تتغير خصائصه. </font><font style="vertical-align: inherit;">الوضع يذكرنا بتنفيذ واجهة </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PropertyChangeListener</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> في جافا.</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyModel</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Model</span> </span>{<font></font>
  String _foo;  String get foo =&gt; _foo;<font></font>
  <font></font>
  <span class="hljs-function"><span class="hljs-keyword">void</span> set <span class="hljs-title">foo</span><span class="hljs-params">(String value)</span> </span>{<font></font>
    _foo = value;<font></font>
    notifyListeners();  <font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
لتقديم كائن الحالة الخاص بنا ، نلف هذا الكائن في عنصر واجهة مستخدم </font></font><code>ScopedModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">في جذر تطبيقنا:</font></font><br>
<br>
<pre><code class="java hljs">ScopedModel&lt;MyModel&gt;(<font></font>
  model: MyModel(),<font></font>
  child: MyApp(...)<font></font>
)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
الآن سيتمكن أي </font></font><code>MyModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">عنصر واجهة مستخدم </font><font style="vertical-align: inherit;">سليل من الوصول </font><font style="vertical-align: inherit;">باستخدام عنصر واجهة مستخدم </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ScopedModelDescendant</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">يتم تمرير نسخة النموذج إلى المعلمة </font></font><code>builder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="dart hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyWidget</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{
  <span class="hljs-meta">@override</span><font></font>
  Widget build(BuildContext context) {<font></font>
    <span class="hljs-keyword">return</span> ScopedModelDescendant&lt;MyModel&gt;(<font></font>
      builder: (context, child, model) =&gt; Text(model.foo),<font></font>
    );<font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
سيتمكن أي عنصر واجهة مستخدم سليل من تحديث النموذج ، مما سيؤدي تلقائيًا إلى إعادة إنشاء أي </font></font><code>ScopedModelDescendants</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(بشرط أن يستدعي نموذجنا بشكل صحيح </font></font><code>notifyListeners()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">):</font></font><br>
<br>
<pre><code class="dart hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">OtherWidget</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{
  <span class="hljs-meta">@override</span><font></font>
  Widget build(BuildContext context) {<font></font>
    <span class="hljs-keyword">return</span> FlatButton(<font></font>
      child: Text(<span class="hljs-string">'Update'</span>),<font></font>
      onPressed: () {<font></font>
        <span class="hljs-keyword">final</span> model = ScopedModel.of&lt;MyModel&gt;(context);<font></font>
        model.foo = <span class="hljs-string">'bar'</span>;<font></font>
      },<font></font>
    );<font></font>
  }<font></font>
}</code></pre><br>
<code>ScopedModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">اكتسبت شعبية في Flutter كأداة لإدارة الدولة ، ولكن استخدامها يقتصر على توفير الكائنات التي ترث الصف </font></font><code>Model</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">واستخدام هذا النمط من الإخطار بالتغييرات.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4. BLoC</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
في مؤتمر </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Google I / O '18</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ، </font><font style="vertical-align: inherit;">تم تقديم نمط </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">مكون منطق الأعمال</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (BLoC) ، والذي يعمل كأداة أخرى لسحب الحالة من الأدوات. فئات BLoC هي مكونات طويلة العمر غير واجهة المستخدم التي تحافظ على الحالة وتكشفها كتيارات ومستقبلات. باستخدام منطق الدولة والأعمال خارج واجهة المستخدم ، يمكنك تنفيذ الأداة على أنها بسيطة </font></font><code>StatelessWidget</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">واستخدام </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">StreamBuilder</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> لإعادة البناء التلقائي. ونتيجة لذلك ، تصبح الأداة "غبية" ويصبح اختبارها أسهل. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
مثال لفئة BLoC:</font></font><br>
<br>
<pre><code class="dart hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyBloc</span> </span>{
  <span class="hljs-keyword">final</span> _controller = StreamController&lt;MyType&gt;();  Stream&lt;MyType&gt; <span class="hljs-keyword">get</span> stream =&gt; _controller.stream;<font></font>
  StreamSink&lt;MyType&gt; <span class="hljs-keyword">get</span> sink =&gt; _controller.sink;<font></font>
  <font></font>
  myMethod() {<font></font>
    <span class="hljs-comment">//  </span><font></font>
    sink.add(foo);<font></font>
  }  dispose() {<font></font>
    _controller.close();<font></font>
  }<font></font>
}<font></font>
 ,   BLoC:<font></font>
<span class="hljs-meta">@override</span><font></font>
Widget build(BuildContext context) {<font></font>
 <span class="hljs-keyword">return</span> StreamBuilder&lt;MyType&gt;(<font></font>
  stream: myBloc.stream,<font></font>
  builder: (context, asyncSnapshot) {<font></font>
    <span class="hljs-comment">//  </span><font></font>
 });<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
المشكلة في نمط BLoC هي أنه ليس من الواضح كيفية إنشاء وتدمير كائنات BLoC. </font><font style="vertical-align: inherit;">كيف تم إنشاء المثيل </font></font><code>myBloc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">في المثال أعلاه؟ </font><font style="vertical-align: inherit;">كيف نتصل </font></font><code>dispose()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">للتخلص منه؟ </font><font style="vertical-align: inherit;">تتطلب التدفقات الاستخدام </font></font><code>StreamController</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">، والذي يجب أن يكون </font></font><code>closed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">بمجرد أن يصبح غير ضروري - يتم ذلك لمنع تسرب الذاكرة. </font><font style="vertical-align: inherit;">(لا يوجد شيء مثل المدمر الطبقي في Dart ؛ فقط الطبقة </font></font><code>State</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">في </font></font><code>StatefulWidget</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">لديها طريقة </font></font><code>dispose()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">). </font><font style="vertical-align: inherit;">بالإضافة إلى ذلك ، ليس من الواضح كيفية مشاركة BLoC بين أدوات متعددة. </font><font style="vertical-align: inherit;">غالبًا ما يكون من الصعب على المطورين إتقان BLoC. </font><font style="vertical-align: inherit;">هناك العديد من الحزم التي تحاول تبسيط ذلك.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5. المزود</font></font></h4><br>
<code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">حزمة مكتوبة في عام 2018 من قبل Remy Rusle ، تشبه </font></font><code>ScopedModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">، ولكن لا تقتصر وظائفها على ، توفر فئة فرعية من النموذج. هذا أيضًا عبارة عن غلاف يختتم </font></font><code>InheritedWidget</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">، ولكن يمكن للمزود توفير أي كائنات دولة ، بما في ذلك BLoC ، والجداول ، والعقود الآجلة وغيرها. نظرًا لأن المزود بسيط ومرن للغاية ، أعلنت Google في مؤتمر </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Google I / O '19</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> أنه سيكون في المستقبل </font></font><code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">الحزمة المفضلة لإدارة الحالة. بالطبع ، يُسمح أيضًا بالحزم الأخرى ، ولكن إذا كانت لديك أي شكوك ، توصي Google بالتوقف عند </font></font><code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br>
<code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">بنيت "مع الحاجيات ، من أجل الحاجيات."</font></font><code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">يسمح لك بوضع أي كائن مع حالة في شجرة عنصر واجهة المستخدم وفتح الوصول إليها لأي أداة أخرى (طفل). </font><font style="vertical-align: inherit;">كما أنه </font></font><code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">يساعد على إدارة عمر كائنات الحالة عن طريق تهيئتها بالبيانات وإجراء عملية تنظيف بعد إزالتها من شجرة الأدوات. </font><font style="vertical-align: inherit;">لذلك ، فهي </font></font><code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">مناسبة حتى لتطبيق مكونات BLoC أو يمكن أن تكون بمثابة أساس لحلول إدارة الدولة الأخرى! </font><font style="vertical-align: inherit;">أو ببساطة تستخدم </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">لتنفيذ التبعيات</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - مصطلح خيالي يتضمن نقل البيانات إلى الأدوات بطريقة تسمح لك بفك الاتصال وتحسين قابلية اختبار الشفرة. </font><font style="vertical-align: inherit;">أخيرا،</font></font><code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">يأتي مع مجموعة من الفئات المتخصصة ، والتي بفضلها أكثر ملاءمة للاستخدام. </font><font style="vertical-align: inherit;">بعد ذلك ، سنلقي نظرة فاحصة على كل من هذه الفئات.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">الموفر الأساسي</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ChangeNotifierProvider</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">StreamProvider</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">فوتوريبروفيدر</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ValueListenableProvider</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MultiProvider</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Proxyprovider</font></font></li>
</ul><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">التركيب</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
لاستخدامه </font></font><code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">، قم أولاً بإضافة التبعية إلى ملفنا </font></font><code>pubspec.yaml</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><br>
<br>
<code>provider: ^3.0.0</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ثم نقوم باستيراد الحزمة </font></font><code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">حيث تكون هناك حاجة إليها: </font></font><br>
<br>
<code>import 'package:provider/provider.dart';</code><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">موفر القاعدة</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
إنشاء الأساس </font></font><code>Provide</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">r في جذر تطبيقنا ؛ </font><font style="vertical-align: inherit;">سيحتوي هذا على مثال لنموذجنا:</font></font><br>
<br>
<pre><code class="dart hljs">Provider&lt;MyModel&gt;(<font></font>
  builder: (context) =&gt; MyModel(),<font></font>
  child: MyApp(...),<font></font>
)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
تقوم المعلمة </font></font><code>builder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">بإنشاء مثيل </font></font><code>MyModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">إذا كنت ترغب في تمرير نسخة موجودة إليه ، استخدم المُنشئ هنا </font></font><code><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Provider.value</a></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ثم يمكنك استهلاك هذا النموذج من النموذج في أي مكان </font></font><code>MyApp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">، باستخدام الأداة </font></font><code>Consumer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="dart hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyWidget</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{
  <span class="hljs-meta">@override</span><font></font>
  Widget build(BuildContext context) {<font></font>
    <span class="hljs-keyword">return</span> Consumer&lt;MyModel&gt;(<font></font>
      builder: (context, value, child) =&gt; Text(value.foo),<font></font>
    );<font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
في المثال أعلاه ، </font></font><code>MyWidget</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">يحصل </font><font style="vertical-align: inherit;">الفصل </font><font style="vertical-align: inherit;">على مثيل </font></font><code>MyModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">باستخدام أداة </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">المستهلك</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . تعطينا هذه الأداة </font></font><code>builder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">احتواء كائننا في المعلمة </font></font><code>value</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
الآن ، ماذا نفعل إذا أردنا تحديث البيانات في نموذجنا؟ لنفترض أن لدينا أداة أخرى حيث ، عند النقر على زر ، يجب تحديث الخاصية </font></font><code>foo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="dart hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">OtherWidget</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{
  <span class="hljs-meta">@override</span><font></font>
  Widget build(BuildContext context) {<font></font>
    <span class="hljs-keyword">return</span> FlatButton(<font></font>
      child: Text(<span class="hljs-string">'Update'</span>),<font></font>
      onPressed: () {<font></font>
        <span class="hljs-keyword">final</span> model = Provider.of&lt;MyModel&gt;(context);<font></font>
        model.foo = <span class="hljs-string">'bar'</span>;<font></font>
      },<font></font>
    );<font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
لاحظ الصيغة المحددة المستخدمة للوصول إلى المثيل </font></font><code>MyModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. من الناحية الوظيفية ، هذا يعادل الوصول إلى القطعة </font></font><code>Consumer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. القطعة </font></font><code>Consumer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">مفيدة في الحالات التي يتعذر فيها على التعليمات البرمجية الحصول على الرابط بسهولة </font></font><code>BuildContext</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ما رأيك سيحدث للأداة الأصلية </font></font><code>MyWidget</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">التي أنشأناها في وقت سابق؟ هل سيتم عرض معنى جديد فيه </font></font><code>bar</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">؟ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">لسوء الحظ لا</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . لا يمكن الاستماع إلى التغييرات في كائنات Dart التقليدية القديمة (على الأقل بدون انعكاس ، وهو غير متوفر في Flutter). وبالتالي ، </font></font><code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">لن تتمكن من "معرفة" أننا قمنا بتحديث الخاصية بشكل صحيح </font></font><code>foo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">وأمرنا </font></font><code>MyWidget</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">بتحديث </font><font style="vertical-align: inherit;">القطعة </font><font style="vertical-align: inherit;">استجابة. </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ChangeNotifierProvider</font></font></i></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ولكن هناك أمل! </font><font style="vertical-align: inherit;">يمكنك جعل فصلنا </font></font><code>MyModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ينفذ شائبة </font></font><code>ChangeNotifier</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">سوف يستغرق الأمر قليلاً لتغيير تنفيذ نموذجنا واستدعاء طريقة خاصة </font></font><code>notifyListeners()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">كلما تغيرت إحدى خصائصنا. </font><font style="vertical-align: inherit;">إنه يعمل بنفس الطريقة تقريبًا </font></font><code>ScopedModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">، ولكن في هذه الحالة ، من الجيد ألا تحتاج إلى الوراثة من فئة معينة من النموذج. </font><font style="vertical-align: inherit;">يكفي أن تدرك المزيج </font></font><code>ChangeNotifier</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">إليك ما يبدو عليه:</font></font><br>
<br>
<pre><code class="dart hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyModel</span> <span class="hljs-title">with</span> <span class="hljs-title">ChangeNotifier</span> </span>{
  <span class="hljs-built_in">String</span> _foo;  <span class="hljs-built_in">String</span> <span class="hljs-keyword">get</span> foo =&gt; _foo;<font></font>
  <font></font>
  <span class="hljs-keyword">void</span> <span class="hljs-keyword">set</span> foo(<span class="hljs-built_in">String</span> value) {<font></font>
    _foo = value;<font></font>
    notifyListeners();  <font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
كما ترون، نحن استبدال ممتلكاتنا </font></font><code>foo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">مع </font></font><code>getter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">و </font></font><code>setter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">مدعومة المتغير الخاص _foo. </font><font style="vertical-align: inherit;">بهذه الطريقة يمكننا "اعتراض" أي تغييرات تم إجراؤها على خاصية foo وإخبار مستمعينا بأن جسمنا قد تغير. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
الآن ، من الخارج </font></font><code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">، يمكننا تغيير تطبيقنا بحيث يستخدم فئة مختلفة تسمى </font></font><code> ChangeNotifierProvider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="dart hljs">ChangeNotifierProvider&lt;MyModel&gt;(<font></font>
  builder: (context) =&gt; MyModel(),<font></font>
  child: MyApp(...),<font></font>
)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
مثله! </font><font style="vertical-align: inherit;">الآن ، عندما نقوم </font></font><code>OtherWidget</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">بتحديث الخاصية </font></font><code>foo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">في المثال </font></font><code>MyModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">، </font></font><code>MyWidget</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">سيتم تحديثها تلقائيًا لتعكس هذا التغيير. </font><font style="vertical-align: inherit;">رائع ، أليس كذلك؟ </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
بالمناسبة. </font><font style="vertical-align: inherit;">ربما لاحظت معالج زر </font></font><code>OtherWidget</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">استخدمنا به بناء الجملة التالي:</font></font><br>
<br>
<pre><code class="dart hljs"><span class="hljs-keyword">final</span> model = Provider.of&lt;MyModel&gt;(context);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
بشكل افتراضي ، سيؤدي بناء الجملة هذا تلقائيًا إلى إعادة بناء المثيل </font></font><code>OtherWidget</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">بمجرد أن يتغير النموذج </font></font><code>MyModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ربما لا نحتاج هذا. </font><font style="vertical-align: inherit;">في النهاية ، </font></font><code>OtherWidget</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">يحتوي ببساطة على زر لا يتغير على الإطلاق عندما تتغير القيمة </font></font><code>MyModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">لتجنب إعادة البناء ، يمكنك استخدام بناء الجملة التالي للوصول إلى نموذجنا دون التسجيل لإعادة البناء:</font></font><br>
<br>
<pre><code class="dart hljs"><span class="hljs-keyword">final</span> model = Provider.of&lt;MyModel&gt;(context, listen: <span class="hljs-keyword">false</span>);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
هذا هو سحر آخر المقدمة في الحزمة </font></font><code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">مثل هذا تماما. </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">StreamProvider</font></font></i></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
للوهلة الأولى ، ليس من الواضح سبب الحاجة إليها </font></font><code>StreamProvider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">في النهاية ، يمكنك فقط استخدام المعتاد </font></font><code>StreamBuilder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">إذا كنت بحاجة إلى استهلاك دفق في Flutter. </font><font style="vertical-align: inherit;">على سبيل المثال ، هنا نستمع إلى الدفق </font></font><code>onAuthStateChanged</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">المقدم من </font></font><code>FirebaseAuth</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="dart hljs"><span class="hljs-meta">@override</span><font></font>
Widget build(BuildContext context {<font></font>
  <span class="hljs-keyword">return</span> StreamBuilder(<font></font>
   stream: FirebaseAuth.instance.onAuthStateChanged, <font></font>
   builder: (BuildContext context, AsyncSnapshot snapshot){ <font></font>
     ...<font></font>
   });<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
للقيام بالشيء نفسه بالمساعدة </font></font><code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">، يمكننا توفير تدفقنا من خلال </font></font><code>StreamProvider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">جذر تطبيقنا:</font></font><br>
<br>
<pre><code class="dart hljs">StreamProvider&lt;FirebaseUser&gt;.value(<font></font>
  stream: FirebaseAuth.instance.onAuthStateChanged,<font></font>
  child: MyApp(...),<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ثم استهلك الأداة المصغرة التابعة ، كما هو الحال عادةً مع </font></font><code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="dart hljs"><span class="hljs-meta">@override</span><font></font>
Widget build(BuildContext context) {<font></font>
  <span class="hljs-keyword">return</span> Consumer&lt;FirebaseUser&gt;(<font></font>
    builder: (context, value, child) =&gt; Text(value.displayName),<font></font>
  );<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
لم يقتصر الأمر على أن يصبح رمز عنصر واجهة المستخدم الخاص بنا أكثر نظافة فحسب ، بل إنه يلخص الآن أيضًا حقيقة أن البيانات جاءت من الدفق. إذا قررنا في أي وقت تغيير التنفيذ الأساسي ، على سبيل المثال ، إلى </font></font><code>FutureProvider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">، فلن تكون هناك حاجة إلى تغييرات في رمز الأداة. كما سترى ، ينطبق هذا على جميع المزودين الآخرين الموضحين أدناه. </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FutureProvider</font></font></i></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
مشابه </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><i><font style="vertical-align: inherit;">للمثال</font></i></a><font style="vertical-align: inherit;"> أعلاه ، فهو </font></font><code>FutureProvider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">بديل للمعيار </font></font><code> FutureBuilder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">عند العمل مع الحاجيات. هنا مثال:</font></font><br>
<br>
<pre><code class="plaintext hljs">FutureProvider&lt;FirebaseUser&gt;.value(<font></font>
  value: FirebaseAuth.instance.currentUser(),<font></font>
  child: MyApp(...),<font></font>
);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
لاستهلاك هذه القيمة في الأداة الفرعية التابعة ، نستخدم نفس التنفيذ </font></font><code>Consumer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">كما في المثال </font></font><code>StreamProvider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">أعلاه. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ValueListenableProvider </font></font></i><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ValueListenable</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> هو واجهة دارت تنفذها </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ValueNotifier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> الطبقة </font><font style="vertical-align: inherit;">التي تأخذ قيمة وتخطر المستمعين عندما يتحول إلى قيمة أخرى. </font><font style="vertical-align: inherit;">من الممكن ، على سبيل المثال ، لف عداد صحيح في فئة نموذج بسيطة:</font></font><br>
<br>
<pre><code class="dart hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyModel</span> </span>{
  <span class="hljs-keyword">final</span> ValueNotifier&lt;<span class="hljs-built_in">int</span>&gt; counter = ValueNotifier(<span class="hljs-number">0</span>);  <font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
عند العمل مع أنواع معقدة ، فإنه </font></font><code>ValueNotifier</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">يستخدم عامل </font></font><code>==</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">الكائن المخزن فيه لتحديد ما إذا كانت القيمة قد تغيرت. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
لنقم بإنشاء أبسط واحد </font></font><code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">، والذي سيحتوي على نموذجنا الرئيسي ، وسيتبعه </font><font style="vertical-align: inherit;">خاصية استماع </font></font><code>Consumer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">متداخلة </font><font style="vertical-align: inherit;">:</font></font><code>ValueListenableProvider</code><font style="vertical-align: inherit;"></font><code>counter</code><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="dart hljs">Provider&lt;MyModel&gt;(<font></font>
  builder: (context) =&gt; MyModel(),<font></font>
  child: Consumer&lt;MyModel&gt;(builder: (context, value, child) {<font></font>
    <span class="hljs-keyword">return</span> ValueListenableProvider&lt;<span class="hljs-built_in">int</span>&gt;.value(<font></font>
      value: value.counter,<font></font>
      child: MyApp(...)<font></font>
    }<font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
يرجى ملاحظة أن هذا الموفر المتداخل من النوع </font></font><code>int</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">قد يكون هناك آخرون. </font><font style="vertical-align: inherit;">إذا كان لديك العديد من مقدمي الخدمة من نفس النوع المسجل ، فسيرجع المزود "الأقرب" (أقرب سلف). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
إليك كيفية الاستماع إلى خاصية </font></font><code>counter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">من أي أداة طفل:</font></font><br>
<br>
<pre><code class="dart hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyWidget</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{
  <span class="hljs-meta">@override</span><font></font>
  Widget build(BuildContext context) {<font></font>
    <span class="hljs-keyword">return</span> Consumer&lt;<span class="hljs-built_in">int</span>&gt;(<font></font>
      builder: (context, value, child) {<font></font>
        <span class="hljs-keyword">return</span> Text(value.toString());<font></font>
      },<font></font>
    );<font></font>
  }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ولكن إليك كيفية تحديث خاصية </font></font><code>counter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">من أداة أخرى. </font><font style="vertical-align: inherit;">يرجى ملاحظة: نحتاج إلى الوصول إلى النسخة الأصلية </font></font><code>MyModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<pre><code class="dart hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">OtherWidget</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{
  <span class="hljs-meta">@override</span><font></font>
  Widget build(BuildContext context) {<font></font>
    <span class="hljs-keyword">return</span> FlatButton(<font></font>
      child: Text(<span class="hljs-string">'Update'</span>),<font></font>
      onPressed: () {<font></font>
        <span class="hljs-keyword">final</span> model = Provider.of&lt;MyModel&gt;(context);<font></font>
        model.counter.value++;<font></font>
      },<font></font>
    );<font></font>
  }<font></font>
}</code></pre><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MultiProvider</font></font></i></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
إذا كنت تستخدم العديد من عناصر واجهة المستخدم</font></font><code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">، فعندئذٍ في جذر التطبيق تحصل على بنية قبيحة من العديد من المرفقات:</font></font><br>
<br>
<pre><code class="dart hljs">Provider&lt;Foo&gt;.value( <font></font>
  value: foo, <font></font>
  child: Provider&lt;Bar&gt;.value( <font></font>
    value: bar, <font></font>
    child: Provider&lt;Baz&gt;.value( <font></font>
      value: baz , <font></font>
      child: MyApp(...)<font></font>
    ) <font></font>
  ) <font></font>
)</code></pre><br>
<code>MultiProvider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">يسمح لك بإعلانها جميعًا على نفس المستوى. </font><font style="vertical-align: inherit;">إنه مجرد السكر النحوي: على مستوى النظام الداخلي ، تظل جميعها متداخلة على أي حال.</font></font><br>
<br>
<pre><code class="dart hljs">MultiProvider( <font></font>
  providers: [ <font></font>
    Provider&lt;Foo&gt;.value(value: foo), <font></font>
    Provider&lt;Bar&gt;.value(value: bar), <font></font>
    Provider&lt;Baz&gt;.value(value: baz), <font></font>
  ], <font></font>
  child: MyApp(...), <font></font>
)<font></font>
</code></pre><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ProxyProvider</font></font></i></a><br>
<br>
<code>ProxyProvider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> هي فئة مثيرة للاهتمام تمت إضافتها في إصدار الحزمة الثالثة</font></font><code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">يسمح لك بالإعلان عن مقدمي الخدمات الذين قد يعتمدون هم أنفسهم على مقدمي خدمات آخرين ، حتى ستة على واحد. </font><font style="vertical-align: inherit;">في هذا المثال ، تكون فئة Bar خاصة بالمثيل</font></font><code>Foo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">هذا مفيد عند تجميع مجموعة جذرية من الخدمات التي تعتمد على بعضها البعض.</font></font><br>
<br>
<pre><code class="dart hljs">MultiProvider ( <font></font>
  providers: [ <font></font>
    Provider&lt;Foo&gt; ( <font></font>
      builder: (context) =&gt; Foo(),<font></font>
    ), <font></font>
    ProxyProvider&lt;Foo, Bar&gt;(<font></font>
      builder: (context, value, previous) =&gt; Bar(value),<font></font>
    ), <font></font>
  ], <font></font>
  child: MyApp(...),<font></font>
)<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
وسيطة النوع العام الأول هي النوع الذي تعتمد عليه </font></font><code>ProxyProvider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">، والثاني هو النوع الذي يرجعه.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">كيفية الاستماع إلى العديد من مقدمي الخدمات في نفس الوقت</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ماذا لو أردنا استخدام أداة واحدة للاستماع إلى العديد من مقدمي الخدمات وإعادة البناء عندما يتغير أي منهم؟ </font><font style="vertical-align: inherit;">يمكنك الاستماع إلى ما يصل إلى 6 مزودي في نفس الوقت باستخدام خيارات الأداة </font></font><code>Consumer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">سوف نتلقى أمثلة كمعلمات طريقة إضافية </font></font><code>builder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<pre><code class="dart hljs">Consumer2&lt;MyModel, <span class="hljs-built_in">int</span>&gt;(<font></font>
  builder: (context, value, value2, child) {<font></font>
    <span class="hljs-comment">//value  MyModel</span>
    <span class="hljs-comment">//value2  int</span><font></font>
  },<font></font>
);</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">استنتاج</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
عند استخدامه ، </font></font><code>InheritedWidget</code> <code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">فإنه يسمح </font><font style="vertical-align: inherit;">لك </font><font style="vertical-align: inherit;">بإدارة الحالة كما هو معتاد في Flutter. </font><font style="vertical-align: inherit;">يسمح لعناصر واجهة المستخدم بالوصول إلى كائنات الحالة والاستماع إليها بطريقة يتم فيها تلخيص آلية الإعلام الأساسية. </font><font style="vertical-align: inherit;">من السهل إدارة عمر كائنات الحالة من خلال إنشاء نقاط ربط لإنشاء هذه الكائنات حسب الحاجة والتخلص منها عند الحاجة. </font><font style="vertical-align: inherit;">يمكن استخدام هذه الآلية لتنفيذ التبعيات بسهولة وحتى كأساس لخيارات إدارة الحالة الأكثر تقدمًا. </font><font style="vertical-align: inherit;">بفضل نعمة Google والدعم المتزايد في مجتمع Flutter ، </font></font><code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">أصبحت حزمة تستحق المحاولة دون تأخير!</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar503062/index.html">تكلفة المعيشة الحقيقية في وادي السيليكون للمطور</a></li>
<li><a href="../ar503064/index.html">إنترنت الأشياء حيث لم تنتظر (الجزء 3). بناء نموذج محاكاة</a></li>
<li><a href="../ar503068/index.html">على مفترق طرق بين التكنولوجيا والأعمال: يفتح قادة تكنولوجيا المعلومات جامعة جديدة في سويسرا</a></li>
<li><a href="../ar503070/index.html">قدح كهربائي. بناء سكوتر كهربائي مجنون / دراجة كهربائية</a></li>
<li><a href="../ar503072/index.html">مجرد أداة أخرى: التعرف على تكوين الخدمة باستخدام Desired State Configuration </a></li>
<li><a href="../ar503082/index.html">برقية مثل NAS / FTP</a></li>
<li><a href="../ar503084/index.html">مراجعة دورة أكاديمية Lightbend - العمارة التفاعلية</a></li>
<li><a href="../ar503086/index.html">هل خدمات النسخ عبر الإنترنت آمنة وسرية؟</a></li>
<li><a href="../ar503088/index.html">كيف اخترنا البضائع لشركات النقل</a></li>
<li><a href="../ar503096/index.html">لماذا يريد المديرون العمال لإعادة التدوير؟</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>