<!doctype html>
<html class="no-js" lang="zh-CN">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🦑 👩‍🔧 🤦🏽 什么是Azure Stack HCI及其工作方式 🧑🏿‍🤝‍🧑🏻 😷 📗</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="哈Ha！今天，我们想谈谈Azure Stack HCI平台的全部意义。包括一般内容，组装什么硬件，包含什么软件，如何工作等等。立即加入！
 
 
 
 这是来自AltaStor的来宾的来宾帖子。AltaStor是一家系统集成商，专门为可靠的数据存储构建解决方案。凭借在构建故障转移群集和HCI方面积累...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>什么是Azure Stack HCI及其工作方式</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/microsoft/blog/496766/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">哈Ha！</font><font style="vertical-align: inherit;">今天，我们想谈谈Azure Stack HCI平台的全部意义。</font><font style="vertical-align: inherit;">包括一般内容，组装什么硬件，包含什么软件，如何工作等等。</font><font style="vertical-align: inherit;">立即加入！</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ms/a8/ns/msa8nsszbolcqdqftfpzhmhkkci.png"><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这是来自AltaStor的来宾的来宾帖子。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AltaStor</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一家系统集成商，专门为可靠的数据存储构建解决方案。</font><font style="vertical-align: inherit;">凭借在构建故障转移群集和HCI方面积累的专业知识，可以为每个客户端选择最适合其任务的单独解决方案。</font></font></blockquote><a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">什么是Azure Stack HCI？</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
这是一个结合了以下产品的超融合解决方案：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">来自Microsoft认证OEM合作伙伴的硬件。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Windows Server 2019数据中心操作系统。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Windows管理中心软件。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Microsoft Azure服务（如有必要）。</font></font><br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
该解决方案已经在市场上存在了很长时间，并且我们的一些客户已经长期使用并成功使用了它。</font><font style="vertical-align: inherit;">但是，他们不会发布其安装的性能测试结果。</font><font style="vertical-align: inherit;">我们决定填补这一空白，并通过一个具体示例来谈谈我们使用Azure Stack HCI的经验。</font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
有关Azure Stack HCI的文档和常规信息，</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请单击此处</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
&nbsp;<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">展位布置</font></font></h2>&nbsp;<br>
<img src="https://habrastorage.org/getpro/habr/post_images/086/5d0/047/0865d0047d86f46f5e2999f9abac8409.jpg"><br>
&nbsp;<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设备</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
构建解决方案需要Microsoft推荐的硬件平台。服务器硬件的领先制造商-HPE，Dell EMC，Fujitsu，Hitachi，Lenovo等-开发了​​它们的配置，对其进行了测试，以进行兼容性测试并通过了Azure Stack HCI认证。</font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
有关兼容设备的完整列表，请</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">访问</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
根据所用驱动器的类型，平台组件将有所不同。</font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们更喜欢在具有预装Windows Server 2019 Datacenter操作系统的Fujitsu服务器的基础上构建此类解决方案。出售后的制造商不仅支持其硬件，而且还支持整个软件和硬件组合作为一个完整的解决方案。对于我们，作为合作伙伴以及对于最终客户而言，这一点都很重要。</font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
目前，富士通拥有五种经过认证的配置，可用于不同类型的驱动器，服务器型号和节点数。 Azure Stack HCI的最大节点数为16，最小为2，但某些配置限制为4。</font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
所有兼容的Fujitsu配置都可以</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在此处</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">查看</font><font style="vertical-align: inherit;">。</font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
对于安装，我们从当前已认证的设备中选择了最高效的配置-富士通Primergy，带有用于存储数据的SSD驱动器，以及通过NVMe接口连接的Intel Optane超快速存储模块作为系统缓存。我们希望获得一个软件定义的全闪存阵列，其性能可与具有SSD驱动器和NVMe缓存的经典存储相媲美。</font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
行业领导者的全闪存存储系统具有类似的介质类型配置。</font><font style="vertical-align: inherit;">我们知道实际上可以从类似的系统中获得哪些IOPS和延迟指标，并期待基于选定的Fujitsu配置从Azure Stack HCI获得类似的性能。</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">此处</font></a></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/097/a99/1f1/097a991f1f820647f030183802c834e3.jpg"><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
提供的文档中详细描述了此Fujitsu解决方案的体系结构</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">
我们建议您在安装之前先熟悉一下它。</font><font style="vertical-align: inherit;">
该文档描述了体系结构的局限性，典型的连接方案以及在实现阶段有用的许多其他信息。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
&nbsp;<br><font style="vertical-align: inherit;"></font><br>
&nbsp;<br>
<img src="https://habrastorage.org/getpro/habr/post_images/468/866/9ae/4688669aee12df9248e368a88c758af0.jpg"><br>
&nbsp;<br><font style="vertical-align: inherit;"></font><br>
&nbsp;<br>
<img src="https://habrastorage.org/getpro/habr/post_images/9b5/f47/26c/9b5f4726c82a82d0d12d6dafd967e443.jpg"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">开关</font></font></h2>&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
富士通的解决方案使用其自己的PSWITCH以太网交换机。</font><font style="vertical-align: inherit;">对于我们自己，我们注意到以下优点：&nbsp;</font></font><br>
&nbsp;<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该系列的开关生产率高，成本低。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这些开关的配置和使用类似CISCO的界面非常简单。</font><font style="vertical-align: inherit;">工程师在安装过程中没有遇到任何困难。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在管理方面没有专有的多余内容，并且提供了有效的文档。</font></font><br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
富士通交换设备是日本行业的领导者之一。</font><font style="vertical-align: inherit;">它最近已在俄罗斯市场上出售，但已经由我们的建筑师和其他Fujitsu合作伙伴定期用于项目中。</font><font style="vertical-align: inherit;">当前提供有限数量的模型。&nbsp;</font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">官方网站</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上了解有关Fujitsu交换机的更多信息</font><font style="vertical-align: inherit;">。</font></font><br>
&nbsp;<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">服务器</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在服务器内部，Intel Optane存储卡占据了很大一部分空间。&nbsp; </font></font><br>
&nbsp;<br>
<img src="https://habrastorage.org/getpro/habr/post_images/895/742/c12/895742c127ddef9ed35f44ddbfc2b6fa.jpg"><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/5bb/1dd/77f/5bb1dd77f0079b9babe09973b132156b.jpg"><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
英特尔非常关注高热量需求下的性能。一方面，为了最大程度地冷却，使用了大型散热器。另一方面，这限制了整个服务器内部的冷却气流。&nbsp; </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
这是认证配置时要考虑的关键点之一-必须考虑所有可能的情况，在这些情况下，由于散热不足，服务器会使Optane模块过热，反之亦然。</font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
当移动服务器机房时，我们的客户不止一次面临着空调系统尚未投入运行的情况。因此，我们决定检查此安装对冷却系统的要求，并测量在冷却的服务器机房外部负载下平台的寿命。&nbsp;&nbsp; </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
测试是在室温下进行的，但我们没有遇到任何热限制，也没有因过热而导致性能下降或出现错误。从我们自己的经验中我们已经看到，经过测试的服务器在高达+45摄氏度的环境温度下支持声明的工作能力。&nbsp; </font></font><br>
&nbsp;<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意。</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不建议将此实验作为放弃使用具有高质量通风的特殊服务器机房的建议。</font><font style="vertical-align: inherit;">选择硬件解决方案提供商时，请务必注意最高温度封装。</font></font><br>
&nbsp;<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">硬件平台组装</font></font></h2>&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
前视图：</font></font><br>
&nbsp;<br>
<img src="https://habrastorage.org/getpro/habr/post_images/7b5/53b/5eb/7b553b5eb67aaa8405b3aec5eb7ddfd7.jpg"><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
后视图：测试中</font></font><br>
&nbsp;<br>
<img src="https://habrastorage.org/getpro/habr/post_images/1db/a71/be8/1dba71be8bf20b34a2874dfb64d2e758.jpg"><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
仅使用了一个开关。</font><font style="vertical-align: inherit;">对于商业用途，我们始终建议您至少使用两个交换机来保留访问路径。</font><font style="vertical-align: inherit;">根据我们的统计，群集中最常见的硬件故障是电缆意外断开或连接器中的触点断开。&nbsp;</font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
富士通RX1330用作带有控制软件的服务器。</font><font style="vertical-align: inherit;">还为他分配了仲裁程序和仲裁服务器的功能。</font></font><br>
&nbsp;<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">集群部署</font></font></h2>&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
第一阶段包括硬件组件的物理安装，接口电缆的连接等。</font><font style="vertical-align: inherit;">接下来是软件设置，如 </font><font style="vertical-align: inherit;">操作系统已预先安装。</font><font style="vertical-align: inherit;">我们在每台服务器上部署了Storage Space Direct，并构建了一个由2个节点和一个仲裁器组成的集群。</font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
然后，我们使用了Fujitsu Infrastructure Manager实用程序，它是</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Windows Admin Center</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">扩展</font><font style="vertical-align: inherit;">，它与Fujitsu服务器硬件紧密集成，并包含来自Azure的所有管理工具，例如：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Azure Site Recovery提供高可用性和灾难恢复即服务（DRaaS）。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Azure Monitor是一个集中式站点，可通过基于AI的深入分析来监视应用程序，网络和基础结构的运行。</font></font><br>
</li>
<li>«-»   Azure          .<br>
</li>
<li> Azure Backup     ,      -.<br>
</li>
<li> «  Azure»          Windows,   Azure    .<br>
</li>
<li>  Azure          Azure  VPN-  « — ».<br>
</li>
<li> «  Azure»     .&nbsp;<br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
该扩展程序使您可以自动化许多任务，这些任务也可以直接在管理中心中执行。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
收集存储池，在其中创建卷。</font><font style="vertical-align: inherit;">这些卷随后位于我们进行了性能测试的虚拟机中。</font><font style="vertical-align: inherit;">卷和虚拟机都可以从一个窗口方便地进行管理。</font></font><br>
&nbsp;<br>
<img src="https://habrastorage.org/getpro/habr/post_images/f25/a14/7cf/f25a147cf1d43eb65ce7afab6c5f2e6a.jpg"><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
通过Fujitsu Infrastructure Manager，还可以方便地执行许多有关计划维护和微代码更新的事情。</font><font style="vertical-align: inherit;">所有设备的状态都清晰显示，很多可以自动化。</font></font><br>
&nbsp;<br>
<img src="https://habrastorage.org/getpro/habr/post_images/364/a36/bed/364a36bed36a81528668e7d705699c11.jpg"><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fujitsu Infrastructure Manager实用程序有两个版本-付费和免费：</font></font><br>
&nbsp;<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">自由。</font><font style="vertical-align: inherit;">可以从制造商的网站下载，对于服务器管理来说已经足够了。</font></font><br>
</li>
<li>.       Microsoft Azure HCI —      Windows Server     .<br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
为了与Microsoft Azure Stack HCI进行深入的Primergy集成，您需要Windows Server的服务器管理插件，该插件仅在付费版本中可用。因此，用于Microsoft Azure Stack HCI解决方案的FUJITSU集成系统PRIMEFLEX是其中的一部分。&nbsp; </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
安装的数量越多，该实用程序提供的自动化就越有价值。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们的展位只有2个节点，我们可以手动完成所有工作。如果您有4个或更多节点，该软件将大大减少您的安装和管理工作。公用事业成本不到项目的1％，但大大加快了设备的调试速度。</font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
对于Windows管理中心，Fujitsu Infrastructure Manager Orchestra是一个扩展包：</font></font><br>
&nbsp;<br>
<img src="https://habrastorage.org/getpro/habr/post_images/03b/747/11d/03b74711d36cdbe8d7809619e3b38e6f.jpg"><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
相同的屏幕快照显示了服务器磁盘子系统的组成：两个Optane模块用作缓存扩展，五个SSD磁盘用作Tier-1存储池。</font></font><br>
&nbsp;<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重要事项</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
构建解决方案时，必须牢记一些细微差别：有</font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
两种方法可以通过Windows Admin Center或Fujitsu Infrastructure Manager管理Microsoft Azure Stack HCI。&nbsp; </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
管理中心也有其优势-您可以将其部署在任何设备上，甚至可以部署在笔记本电脑上。可以从命令行进行控制。有了它，管理员几乎可以做任何事情。&nbsp; </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
还有一个Cluster Manager（集群管理器）-解决集群问题的必不可少的工具。&nbsp; </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
部署见证服务器（仲裁服务器）时，将其添加到Active Directory并检查其对所有节点的可用性非常重要。此任务的要求最低，可以放在任何基本服务器上。</font></font><br>
<img src="https://habrastorage.org/getpro/habr/post_images/081/cfc/f9b/081cfcf9b862e035a65600f1138f5dfe.jpg"><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
从Windows Server的角度来看，有三种类型的磁盘设备-NVMe，SSD和HDD。工作逻辑如下：NVMe设备是读/写缓存，SSD是Tier-1存储级别； HDD-第2层存储级别。接下来，您可以配置在池之间移动数据的策略。 NVDIMM也可以用作缓存。</font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
撕裂的默认块大小为4K，但可能会有所不同，具体取决于虚拟机中文件系统的类型。随后将影响性能。</font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们使用NVMe模块作为缓存，因此读写数据的速度将有很大的不同-在性能测试中可以清楚地看到：</font></font><br>
&nbsp;<br>
<ul>
<li>                 ( ),    SSD (Tier-1,  ).<br>
</li>
<li>       NVMe    ,       ,       .    .<br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在创建群集之前，必须完成故障转移群集管理器中的验证和所有测试。</font><font style="vertical-align: inherit;">该报告需要保存，因为如果没有该报告，将无法在Microsoft支持中打开服务呼叫。</font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
将新节点添加到现有群集时，这些节点将自动添加到存储池。</font><font style="vertical-align: inherit;">15分钟后，群集将自动重建，重建和平衡存储池。</font><font style="vertical-align: inherit;">这可能会影响重建期间的性能。</font></font><br>
&nbsp;<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">性能测试</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
现在，让我们继续进行最有趣的部分-负载测试。</font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
测试配置：</font></font><br>
&nbsp;<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">群集中组装了两个富士通PRIMERGY RX2540服务器；</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每台服务器都安装了两个Intel Optane存储类内存模块，用于扩展读/写缓存；</font></font><br>
</li>
<li>      SSD,      ,<br>
</li>
<li>      erasure coding ( RAID-5).<br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
实际上，这是一个运行Windows Server 2019 Azure Stack HCI的软件定义的存储系统。</font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们使用两个节点上都运行的12个虚拟机来开始第一个测试。读/写负载配置文件为70:30，块大小= 8k。选择数据块大小是基于以下事实：大多数现代事务数据库和OLTP负载都使用这样的数据块大小和大约相同的读/写比率。</font></font><br>
&nbsp;<br>
<img src="https://habrastorage.org/getpro/habr/post_images/6b2/d7c/9da/6b2d7c9dac708b1f4d5330e3f0742e00.jpg"><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
稳态群集性能为428k IOPS，延迟为0.487 ms。这是一个非常值得的结果，可以与许多制造商提供的专用全闪存存储系统相比。&nbsp;</font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在spcresults.org资源上提供了具有类似负载配置文件的独立测试-这是SPC-1测试。我们配置的区别仅在于块大小-它是4k。</font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如果我们显着简化了用于比较结果的方法，则可以将为全闪存存储系统获得的两个IOPS指标划分为两个指标，并将其与我们在相同响应时间收到的数量进行比较。在我们的两个中级服务器集群上获得的结果与大多数存储系统相当。&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
当然，这样的比较不是很正确，因为在我们的案例中，磁盘数量的增加将对性能和延迟造成的影响与专用存储系统大不相同。但是，即使考虑到所有这些假设，也可以说几年前只能在平均水平甚至更高水平的多控制器外部存储系统上看到这样的性能数据。今天，这在超融合解决方案上是可以实现的。</font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
当在先前的块大小= 8k的情况下打开重复数据删除和测量功能时，性能图会发生显着变化。如果仅在相同的负载配置文件上启用重复数据删除，则性能将低于300k IOPS。&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如果我们使用8KB块运行两个负载配置文件，其中一个配置文件为100％读取，另一个配置文件为100％写入，则以下是我们能够获得的最佳数值：</font></font><br>
&nbsp;<br>
<img src="https://habrastorage.org/getpro/habr/post_images/ed8/e3d/5e3/ed8e3d5e3a387044eb8b52b8fa45ca41.jpg"><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们看到了出色的读取结果，尤其是考虑到12μs的延迟。</font><font style="vertical-align: inherit;">在这里，Optane作为具有预知算法的读取缓存非常有用，可将预测性数据传输到缓存。</font><font style="vertical-align: inherit;">是的，位于SSD上的存储池本身也显示出非常好的读取数。</font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
但是写入速度却大不相同。</font><font style="vertical-align: inherit;">以下是一些严重的因素：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当数据落入一个节点的缓存中时，该解决方案的体系结构将通过网络复制到第二个节点的缓存中。</font></font><br>
</li>
<li>  :         —  ,         Optane.          . <br>
<br>
            45%,            ,      — ,     .       .<br>
</li>
<li>   SSD       SSD —    3D-NAND ,         3D-NAND.<br>
</li>
</ul><br>
<h2></h2><br>
<ul>
<li> OLTP-      –       8k    .&nbsp;&nbsp;<br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以随时启用重复数据删除功能，但这会大大降低性能。</font><font style="vertical-align: inherit;">在我们的测试中，重复数据删除效率为45％，性能下降超过25％。&nbsp;</font></font><br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
这使您可以自由选择-更高的存储性能或几乎两倍的容量。</font><font style="vertical-align: inherit;">此外，很大程度上取决于负载配置文件和压缩记录数据的能力。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由于该解决方案的体系结构，顺序写操作会大大增加响应时间。&nbsp;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Microsoft要求您仅基于OEM合作伙伴的经过验证的配置来构建解决方案并不是徒劳的-这使您可以避免在初始安装和后续工作中出现许多问题。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与往常一样，使用Fujitsu的硬件只能给人留下积极的印象。</font><font style="vertical-align: inherit;">这是一个明智的文档，并且从Infrastructure Manager中添加了许多有用的内容-该软件包确实大大简化了系统管理。</font><font style="vertical-align: inherit;">当增加节点数时，这尤其重要。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">富士通的PRIMEFLEX解决方案包括一组脚本，可加快部署过程。</font><font style="vertical-align: inherit;">通常，它们使启动和配置变得很容易，尤其是富士通PRIMERGY服务器。</font></font><br>
</li>
</ul><br>
<img src="https://habrastorage.org/getpro/habr/post_images/fdc/a11/060/fdca11060f83e478d5edd39134097dfa.jpg"><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
对于那些对解决方案的自我调整不感兴趣的人，可以与富士通签订技术解决方案合同。</font><font style="vertical-align: inherit;">在这种情况下，供应商的技术专家将全包部署所有内容，并将提供进一步的支持。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN496756/index.html">AWS Lambda实际应用。第2部分：了解开发和测试工具</a></li>
<li><a href="../zh-CN496758/index.html">数字中世纪医疗保健。COVID-19之后的全球技术转型</a></li>
<li><a href="../zh-CN496760/index.html">用户流程：如何创建流行的应用程序和网站</a></li>
<li><a href="../zh-CN496762/index.html">基于粒子的表面侵蚀模拟</a></li>
<li><a href="../zh-CN496764/index.html">小而自豪：DuckDuckGo与广告怪兽</a></li>
<li><a href="../zh-CN496768/index.html">忘了RGB和HEX</a></li>
<li><a href="../zh-CN496770/index.html">自动化工程师公寓。第1部分：问题陈述，铁的选择</a></li>
<li><a href="../zh-CN496772/index.html">无人驾驶汽车应“牢记”最强悍驾驶员驾驶的汽车品牌</a></li>
<li><a href="../zh-CN496774/index.html">我们通过迷你游戏提高了我们成熟的Minecraft游戏服务器。第3部分。安装迷你游戏</a></li>
<li><a href="../zh-CN496776/index.html">黑客无人驾驶汽车：谁将负责任（兰德公司研究）</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>