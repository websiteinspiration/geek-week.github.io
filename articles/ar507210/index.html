<!doctype html>
<html class="no-js" lang="ar">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐น ๐ผ ๐ฉ๐พโ๐พ ุฃุฏุงุก Java ุงูุญุฏูุซ ุนูุฏ ุงูุนูู ุจูููุงุช ูุจูุฑุฉ ูู ุงูุจูุงูุงุช ุ ุงูุฌุฒุก 2 ๐ค๐ป ๐ ๐</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ููุนูููุงุชู: ุงูุฌุฒุก ุงูุฃูู .
 
 ูุงูู ุงูุฏูุนุฉ ุงููุนูุงุฑูุฉ
 ูุนุงูุฌ ุฎุท ุงูุฃูุงุจูุจ ุงูุฏูุนู ุงููููุฉ ุงูููุงุฆูุฉ ููุจูุงูุงุช ุงููุฎุฒูุฉ. ูุง ููุฌุฏ ุฏูู ูู ูุชุงุฆุฌ ุงููุนุงูุฌุฉ ุ ูุฌุจ ุชุทุจู...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>ุฃุฏุงุก Java ุงูุญุฏูุซ ุนูุฏ ุงูุนูู ุจูููุงุช ูุจูุฑุฉ ูู ุงูุจูุงูุงุช ุ ุงูุฌุฒุก 2</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/507210/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/d1/gm/bn/d1gmbnhwk4pkhy1bck7ykdmu-uq.jpeg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุนูููุงุชู: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฌุฒุก ุงูุฃูู</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงูู ุงูุฏูุนุฉ ุงููุนูุงุฑูุฉ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุนุงูุฌ ุฎุท ุงูุฃูุงุจูุจ ุงูุฏูุนู ุงููููุฉ ุงูููุงุฆูุฉ ููุจูุงูุงุช ุงููุฎุฒูุฉ. ูุง ููุฌุฏ ุฏูู ูู ูุชุงุฆุฌ ุงููุนุงูุฌุฉ ุ ูุฌุจ ุชุทุจูู ูุงุชุฌ ุฏุงูุฉ ุงูุชุฌููุน ุนูู ูุฌููุนุฉ ุงูุจูุงูุงุช ุจุงููุงูู. ูุฐุง ูุบูุฑ ูุชุทูุจุงุช ุงูุฃุฏุงุก: ุงููููู - ุนุงูู ุฑุฆูุณู ูู ูุนุงูุฌุฉ ุงูุชุฏูู - ุบุงุฆุจ ููุง ูุฃููุง ูุนุงูุฌ ุงูุจูุงูุงุช ูู ุงูููุช ุงูุญูููู. ุงููููุงุณ ุงูููู ุงููุญูุฏ ูู ุฅุฌูุงูู ููุช ุชุดุบูู ุงููุงูู.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐูู ุ ุงุฎุชุฑูุง Parallel. </font><font style="vertical-align: inherit;">ูู ุงููุฑุญูุฉ ุงูุฃููู ูู ุงูุงุฎุชุจุงุฑ ุ ุนูุฏ ุงูุนูู ุนูู ุนูุฏุฉ ูุงุญุฏุฉ ุ ุฃุธูุฑ ูุฐุง ุงููุฌูุน ุญููุง ุฃูุถู ุฅูุชุงุฌูุฉ (ูููู ููุท ุจุนุฏ ุงูุถุจุท). </font><font style="vertical-align: inherit;">ููุน ุฐูู ุ ุชู ุงูุญุตูู ุนูู ุฐูู ุนูู ุญุณุงุจ ูุชุฑุงุช ุงูุชููู ุงูุทูููุฉ. </font><font style="vertical-align: inherit;">ุฅุฐุง ุชูููุช ุฅุญุฏู ุงูุนูุฏ ุงูุนูููุฏูุฉ ุนูุฏ ูุฌููุนุฉ ุงูููุงูุฉ ุ ููุฐุง ูููู ุฎุท ุงูุฃูุงุจูุจ ุจุงููุงูู. </font><font style="vertical-align: inherit;">ูุจูุง ุฃู ุงูุนูุฏ ุชุฌูุน ุงูููุงูุฉ ูู ุฃููุงุช ูุฎุชููุฉ ุ ูุฅู ุฅุฌูุงูู ููุช ุงูุจูุงุก ูุฒูุฏ ูุน ุฅุถุงูุฉ ูู ุนูุฏุฉ ุฅูู ุงููุชูุฉ. </font><font style="vertical-align: inherit;">ูููุง ุจุชุญููู ูุฐุง ุงูุชุฃุซูุฑ ูู ุฎูุงู ููุงุฑูุฉ ูุชุงุฆุฌ ุงูุงุฎุชุจุงุฑ ุนูู ุนูุฏุฉ ูุงุญุฏุฉ ูุนูู ูุฌููุนุฉ ูู ุซูุงุซ ุนูุฏ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูู ูุฐู ุงููุฑุญูุฉ ุ ูู ูุฃุฎุฐ ูู ุงูุงุนุชุจุงุฑ ุงููุฌูุนุงุช ุงูุชุฌุฑูุจูุฉ ููุฎูุถุฉ ุงููููู. </font><font style="vertical-align: inherit;">ูุง ุชุคุซุฑ ูุชุฑุงุช ุงูุชููู ุงููุตูุฑุฉ ููุบุงูุฉ ุนูู ูุชุงุฆุฌ ุงูุงุฎุชุจุงุฑ ุ ุนูุงูุฉ ุนูู ุฐูู ุ ูุชู ุชุญููู ุฐูู ุจุณุจุจ ุนุฑุถ ุงููุทุงู ุงูุชุฑุฏุฏู.</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุงุฎุชุจุงุฑ ุนูู ุนูุฏุฉ ูุงุญุฏุฉ: ูุงูู</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุงููุณุจุฉ ููุนูุงุฑ ุงูุฏูุนุฉ ุนูู ุนูุฏุฉ ูุงุญุฏุฉ ุ ุงุณุชุฎุฏููุง ุฎุท ุฃูุงุจูุจ ุจุณูุท. ุงูุฑูุฒ ุงููุงูู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุง</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<pre><code class="java hljs">p.readFrom(longSource)<font></font>
 .rebalance() <span class="hljs-comment">// Introduced in Jet 4.2</span><font></font>
 .groupingKey(n -&gt; n % NUM_KEYS)<font></font>
 .aggregate(summingLong(n -&gt; n))<font></font>
 .filter(e -&gt; (e.getKey() &amp; <span class="hljs-number">0xFF_FFFFL</span>) == <span class="hljs-number">0</span>)<font></font>
 .writeTo(Sinks.logger())<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงููุตุฏุฑ ูู ูุนุจ ูููุฏ ุณูุณูุฉ ูู ุฃุฑูุงู ุงูููุน </font></font><code>long</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ูุชู ุชุนุฑูู ุงููุธููุฉ ุงูุฑุฆูุณูุฉ ุจุทุฑููุฉ </font></font><code>groupingKey</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุชููู ุนุจุฑ ุงููุณุงุญุฉ ุงูุฑุฆูุณูุฉ: 0 ุ 1 ุ 2 ุ ... </font></font><code>NUM_KEYS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ 0 ุ 1 ุ 2 ุ ... ููุฐุง ูุนูู ุฃูู ุฎูุงู ุงูุฏูุฑุฉ ุงูุฃููู ูุฑู ุฎุท ุงูุฃูุงุจูุจ ุฌููุน ุงูููุงุชูุญ ููุฎูู ุจููุฉ ุจูุงูุงุช ุซุงุจุชุฉ ูุชุฎุฒูู ุงููุชุงุฆุฌ ุชุฌููุน. ูุฎูุงู ุงูุฏูุฑุงุช ุงูุชุงููุฉ ุ ูููู ุงููุธุงู ุจุชุญุฏูุซ ุงูุจูุงูุงุช ุงููุชุงุญุฉ ููุท. ูุฐุง ูุชูู ุชูุงููุง ูุน ูุฑุถูุฉ ุฌูุน ุงูููุงูุฉ ูุน ูุฑุงุนุงุฉ ุงูุฃุฌูุงู ุงููุฎุชููุฉ: ุฅูุง ุฃู ุชุฎุถุน ุงููุงุฆูุงุช ูุฌููุน ุงูุญุณุงุจุงุช ุ ุฃู ุฃููุง ุบูุฑ ููุฌูุฏุฉ ููุชุฑุฉ ุทูููุฉ ูุชุตุจุญ ููุงูุฉ ุจุนุฏ ุฅูุดุงุฆูุง. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃูุชุฌ ูุตุฏุฑูุง 400 ููููู ุนูุตุฑ ุ ููููุง ุจุฅูุดุงุก 100 ููููู ููุชุงุญ ูุฑุฏู ุ ุฃู ูุฑุช ุฃุฑุจุน ูุฑุงุช ุนุจุฑ ุฌููุน ุงูููุงุชูุญ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงููุดุบู ุฃู ุงูุนุงูู</font></font><code>.rebalance()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณุชุจุฏู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุฌููุน</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุงูุชุฑุงุถู </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;">ุซูุงุฆู ุงููุฑุงุญู</font></a><font style="vertical-align: inherit;"> ูู Jet </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;">ุจุชุฌููุน ูู ูุฑุญูุฉ</font></a><font style="vertical-align: inherit;"> ูุงุญุฏุฉ. ูุฐุง ุฌุนู ุณููู ุงููุญุฑู ูู ูุนุงููุฑูุง ุฃูุซุฑ ูุงุจููุฉ ููุชูุจุค. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุฏ ุงุฎุชุจุฑูุง ุฃูุถูุง ุฎูุงุฑูุง ุชุณุชุฎุฏู ููู ุนูููุฉ ุงูุชุฌููุน ูุซูููุง ููุงุฆู ูู ุงูููุน ูุญุงูุฉ </font></font><code>Long</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููููุฏ ุงูููุงูุฉ ูู ูู ูุฑุฉ ูุชู ูููุง ุชุญุฏูุซ ุงูุญุณุงุจ ุงูุญุงูู. ูู ูุฐู ุงูุญุงูุฉ ุ ุชููุช ุงูุนุฏูุฏ ูู ุงูุฃุดูุงุก ุจุนุฏ ููุช ูุงุฆู ูู ุงูุฌูู ุงููุฏูู. ูู ูุฐู ุงูุญุงูุฉ ุ ูุงู ุนูููุง ุชูููู ุนุฏุฏ ุงูููุงุชูุญ ุฅูู 70 ููููููุง ุ ูุฃูู ุนูุฏ 100 ููููู ุญูู ุนูู ุงููุฌูุน ูุฑุชูุน ููุบุงูุฉ.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ูุฑูุฒ ุนูู ุฌุงูุนู ุงููููู ุงูููุฎูุถ ูุฃูู ููุณ ูุฏููู ูุง ููุฏูููู ูู ุญุงูุฉ ุฎุท ุงูุฃูุงุจูุจ ุงูุฏูุนู. </font><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃููุง ุฑุฃููุง ุจุงููุนู ุฃู JDK 14 ูุนูู ุชูุฑูุจูุง ูุซู JDK 11 ุ ููุฏ ุฃุฌุฑููุง ุงุฎุชุจุงุฑูุง ูุงุญุฏูุง ููุชุฃูุฏ ูู ุฐูู. </font><font style="vertical-align: inherit;">ุซู ุฑูุฒูุง ุนูู JDK 8 ู JDK 11. ููููุง ุฃูุถูุง ุจููุงุฑูุฉ ุฌุงูุน Parallel ุงูุงูุชุฑุงุถู ุงููุณุชุฎุฏู ูู JDK 8 ุฅูู G1.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุงุฎุชุจุงุฑ ุนูู ุนูุฏุฉ ูุงุญุฏุฉ: ุงููุชุงุฆุฌ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููุง ุจุชุดุบูู ุงููุนูุงุฑ ุนูู ุฌูุงุฒ ููุจููุชุฑ ูุญููู ูุน 16 ุบูุบุงุจุงูุช ูู ุฐุงูุฑุฉ ุงููุตูู ุงูุนุดูุงุฆู ู Intel Core i7 ุณุฏุงุณู ุงูููู. ูุงู ุญุฌู ูููุฉ ุงูุฐุงูุฑุฉ ุงููุคูุชุฉ 10 ุบูุบุงุจุงูุช. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุงูุจุฏุงูุฉ ุ ูุจุณุจุจ ุงูุชูุงุฒู ุ ูุงู ุงูุฃุฏุงุก ุถุนูููุง ุฌุฏูุง ุ ูุงุถุทุฑุฑูุง ุฅูู ุถุจุท ุฌูุน ุงูููุงูุฉ. ูุฐูู ุ ููุตู ุจุดุฏุฉ ุจุงุณุชุฎุฏุงู VisualVM ูุงููููู ุงูุฅุถุงูู Visual GC. ุฅุฐุง ููุช ุจุชุนููู ุงูุญุฏ ุงูุฃูุตู ููุนุฏู ุงูุฅุทุงุฑุงุช (10 ุฅุทุงุฑุงุช ูู ุงูุซุงููุฉ) ุ ููููู ุงูุงุณุชูุชุงุน ุจุชุตูุฑ ููุตู ููุบุงูุฉ ููุนูุงูุฉ ุจูู ุชุฎุตูุต ุฐุงูุฑุฉ ุงูุชุทุจูู ูุนูู ุฌุงูุน ุงูุจูุงูุงุช ุงูููููุฉ. ุจุนุฏ ูุดุงูุฏุฉ ุงูุฑุณูู ุงููุชุญุฑูุฉ ุ ุฃุฏุฑููุง ุฃู ุงููุดููุฉ ุงูุฑุฆูุณูุฉ ูุงูุช ูุทุนูุง ูุจูุฑุฉ ุฌุฏูุง ูู ุงูุฐุงูุฑุฉ ูุฎุตุตุฉ ููุฌูู ุงูุฌุฏูุฏ. ุจุดูู ุงูุชุฑุงุถู ุ ุชููู ูุณุจุฉ ุงูุฌูู ุงููุฏูู ุฅูู ุงูุฌุฏูุฏ 2: 1 ููุท ุ ูุฃุซูุงุก ุงูุชูููุฐ ูุง ุชุชุบูุฑ ุฏููุงูููููุง. ูุฐูู ุ ูุฑุฑูุง ุชุทุจูู ุงูุฅุนุฏุงุฏ</font></font><code>-XX:NewRatio=8</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฐุง ุบูุฑ ุงูุตูุฑุฉ ูุงููุฉ. ุงูุขู ูุนูู Parallel ุจุดูู ุฃูุถู. ูููุง ุฃูุถูุง ุจุชุทุจูู </font></font><code>-XX:MaxTenuringThreshold=2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณุงูุงุช ุงููุงุฌูู ูุชูููู ูุณุฎ ุงูุจูุงูุงุช ุจูู ุงููุณุงูุงุช ูุฃู ุงููุงุฆูุงุช ุงููุคูุชุฉ ุชููุช ุจุณุฑุนุฉ ูู ุฎุท ุงูุฃูุงุจูุจ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุขู ุนู ุงููุชุงุฆุฌ. ุงููููุงุณ ุงูููุงุณุจ ุงููุญูุฏ ูุฎุท ุงูุฃูุงุจูุจ ุงูุฏูุนู ูู ูุฏุฉ ุงููููุฉ. ูุชุตูุฑ ุงููุชุงุฆุฌ ุ ุฃุฎุฐูุง ููููุง ุงููุชุจุงุฏูุฉ ุ ูุฐูู ุ ููุถุญ ุงูุฑุณู ุงูุจูุงูู ุงูุฅูุชุงุฌูุฉ ูู ุงูุนูุงุตุฑ ูู ุงูุซุงููุฉ. ููุนูุฏุฉ ุงููุงุญุฏุฉ:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a4f/87a/5c6/a4f87a5c66be2c77e0337151adb9d2ca.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/377/c40/5ab/377c405ab09606862cb1464b07624d56.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุนูู ุงูุชุฌููุน ุจุฏูู ุฌูุน ุงูููุงูุฉ ุจุดูู ุฃุณุฑุน ุจุญูุงูู 30-35ูช ุ ุนูู ุงูุฑุบู ูู ูุฌููุนุฉ ุฃูุจุฑ ูู ุงูููุงุชูุญ. ูุงูุช ุญุฒูุฉ G1 ู JDK 8 ูู ุงูุฃุณูุฃ ุ ูุถุจุท Parallel ู JDK 11. ุจุดูู ุฃูุถู. ูู ุชููุฏ ุญุฒูุฉ G1 ู JDK 11 ุงููุซูุฑ. ูุฑุฌู ููุงุญุธุฉ ุฃููุง ูู ูููุณ ุชูููู G1 ุ ููุฐู ููุทุฉ ูููุฉ. ุชูููู ุฌูุน ุงูููุงูุฉ ูุนุชูุฏ ุจุดูู ูุจูุฑ ุนูู ุงููููู. ูููู ุฃู ุชุชุบูุฑ ุงููุชุงุฆุฌ ุจุดูู ูุจูุฑ ุ ุนูู ุณุจูู ุงููุซุงู ุ ูุน ุฒูุงุฏุฉ ูู ูููุฉ ุงูุจูุงูุงุช. ูุชุญุชุงุฌ ุฅูู ุชูููู ุงููุฌููุนุฉ ุจุฃููููุง ุ ูููุน ูุนูู ูู ุงูุญูู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููุง ููู ุฃุฏุงุก ุฌุงูุน Parallel ุงูุงูุชุฑุงุถู ููุงุฑูุฉ ุจุงูุฅุตุฏุงุฑ ุงููุฎุตุต ุงูุฐู ุงุณุชุฎุฏููุงู ุนูุฏ ุงูุงุฎุชุจุงุฑ:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/81b/797/c4a/81b797c4acae8f632c51147b699c3cad.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุน ูููุฉ 10 ุบูุบุงุจุงูุช ุ ุชููู ุงููุชุงุฆุฌ ุณูุฆุฉ ููุบุงูุฉ. </font><font style="vertical-align: inherit;">ุนูู ุงููุธุงู ูู ูุชุฑุงุช ุชููู ูุงููุฉ ููุชุฌููุน ุ ุงุณุชุบุฑู ูู ูููุง ุญูุงูู 7 ุซูุงูู. </font><font style="vertical-align: inherit;">ูุน ุฒูุงุฏุฉ ูููุฉ ุงูุฐุงูุฑุฉ ุงููุคูุชุฉ ุ ุชุญุณู ุงููุถุน ุ ูููู ูุง ุชุฒุงู ุฏูุฑุงุช ุงูุชุฌููุน ุงููุงููุฉ ุชุญุฏุซ ูู ูุซูุฑ ูู ุงูุฃุญูุงู. </font><font style="vertical-align: inherit;">ูุฑุฌู ููุงุญุธุฉ ุฃูู ุชู ุงูุญุตูู ุนูู ูุฐู ุงููุชุงุฆุฌ ููุญุงูุฉ ุงูุฃูุซุฑ ุดููุนูุง - ุงูุชุฌููุน ุจุฏูู ุชุฌููุน.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุงุฎุชุจุงุฑ ุนูู ุซูุงุซ ุนูุฏ: ูุงูู</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุงุฎุชุจุงุฑ ุงููุชูุฉ ุจุดูู ุตุญูุญ ุ ูุงู ุนูููุง ุงุณุชุฎุฏุงู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฎุท ุฃูุงุจูุจ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฃูุซุฑ ุชุนููุฏูุง </font><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="java hljs">p.readFrom(longSource())<font></font>
 .rebalance()<font></font>
 .flatMap(n -&gt; {<font></font>
     Long[] items = <span class="hljs-keyword">new</span> Long[SOURCE_STEP];<font></font>
     Arrays.setAll(items, i -&gt; n + i);<font></font>
     <span class="hljs-keyword">return</span> traverseArray(items);<font></font>
 })<font></font>
 .rebalance()<font></font>
 .groupingKey(n -&gt; n % NUM_KEYS)<font></font>
 .aggregate(AggregateOperations.summingLong(n -&gt; n))<font></font>
 .filter(e -&gt; e.getKey() % <span class="hljs-number">1_000_000</span> == <span class="hljs-number">0</span>)<font></font>
 .writeTo(Sinks.logger())<font></font>
;<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุธุฑูุง ูุฃู ุงููุตุฏุฑ ูุง ูุนูู ุจุงูุชูุงุฒู ุ ููุฏ ุฃุฌุฑููุง ุจุนุถ ุงูุชุญุณููุงุช ุจุญูุซ ูุง ุชุชุญูู ุฅูู ุงุฎุชูุงู ูู ุงููุธุงู. </font><font style="vertical-align: inherit;">ูููู ุงููุตุฏุฑ ุจุชูููุฏ ุงูุฃุฑูุงู 0 ุ 10 ุ 20 ุ ... ุ ููููุง ุจููุงุฒูุฉ ุงููุฑุญูุฉ </font></font><code>flatMap</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชู ูุชู ูููุง ุงุณุชููุงู ุงูุฃุฑูุงู ุงูููููุฏุฉ. </font><font style="vertical-align: inherit;">ุฃูุถุง ุจูู ุงููุตุฏุฑ </font></font><code>flatMap</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงุณุชุฎุฏููุง </font></font><code>rebalance()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ุชูุฒูุน ุงูุจูุงูุงุช ุนุจุฑ ุงููุชูุฉ. </font><font style="vertical-align: inherit;">ููุจู ุจุฏุก ุงููุฑุญูุฉ ุงูุฑุฆูุณูุฉ (ุงูุชุฌููุน ุงูุฑุฆูุณู) ุ ุฃุนุฏูุง ุงูุชูุงุฒู ูุฑุฉ ุฃุฎุฑู. </font><font style="vertical-align: inherit;">ุจุนุฏ ุงูุชุฌููุน ุ ูุชุฑู ุฃููุงู ูู ููููู ุฒูุฌ ูู ููู ุงูููุชุงุญ ุ ุซู ููุฑุฑูุง ุฅูู ุงููุณุฌู. </font><font style="vertical-align: inherit;">ุชู ุงุณุชุฎุฏุงู ูููุงุฑ ุนูุตุฑ ุจูุงูุงุช ููุฌููุนุฉ 500 ููููู ููุชุงุญ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุง ูู ุงูุญุงู ูุน ุนูุฏุฉ ูุงุญุฏุฉ ุ ูููุง ุจุงุฎุชุจุงุฑ ุงููุงูู ูุน ุงูุชุฌููุน ุจุฏูู ุงูููุงูุฉ ููุนู.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุงุฎุชุจุงุฑ ุนูู ุซูุงุซ ุนูุฏ: ุงููุชูุฌุฉ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููุง ุจุชุดุบูู ูุฐุง ุงููุนูุงุฑ ุนูู ูุชูุฉ AWS ูู ุซูุงุซ ุญุงูุงุช c5d.4xlarge. ูุงู ูุฏููู 16 ููุงุฉ ูุนุงูุฌ ุงูุชุฑุงุถูุฉ ู 32 ุฌูุฌุง ุจุงูุช ูู ุงูุฐุงูุฑุฉ. ุนุฑุถ ุงููุทุงู ุงูุชุฑุฏุฏู ููููุงุฉ 10 ุฌูุฌุงุจุช / ุซุงููุฉ. ูุชูุฌุฉ:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/579/cc6/a6d/579cc6a6d172a6098f96b3c2b9cfbda8.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b28/32f/ca6/b2832fca67b0123a6ca976e518ecd87c.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุนูุฏ ุงูุชูุฑูุฑ ุ ููุงุญุธ ุฒูุงุฏุฉ ุฅุฌูุงููุฉ ูู ุงูุฅูุชุงุฌูุฉ ุจููุฏุงุฑ ุซูุงุซุฉ ุฃุถุนุงู ุชูุฑูุจูุง ููุงุฑูุฉู ุจุงูุนูุฏุฉ ุงููุฑุฏูุฉ. ูุฐุง ูุชูุฌุฉ ุงููุนุงูุฌุฉ ุงูููุฒุนุฉ. ุฃูุง ุจุงููุณุจุฉ ูููุฌูุนูู ุ ููุฏ ุฃุตุจุญ ุงูุฌูุน ุจูู G1 ู JDK 11 ูู ุงููุงุฆุฒ ูู ููุง ุงูุงุฎุชุจุงุฑูู. ูุงููุชูุฌุฉ ุงููุฐููุฉ ุงูุฃุฎุฑู ูู ุงููุฌููุนุฉ ุบูุฑ ุงููุงุจูุฉ ููุชุดุบูู ุชูุฑูุจูุง ูู G1 ู JDK 8. ููุน ุฐูู ุ ูุฅู ููุฐุง ุฃุณุจุงุจูุง ุฃุนูู ุชุคุซุฑ ุนูู ุงูุฃุจุนุงุฏ ุงูุฃุฎุฑู. ุนูู ุณุจูู ุงููุซุงู ุ ุงูููุฒุฉ ุงููุงุถุญุฉ ูู Parallel ุนูู JDK 8 ู JDK 11. ูุฑุฌุน ุฐูู ุฅูู ุงูุชุฃุซูุฑ ุงูุฐู ูุงุญุธูุงู ูู ุงูุจุฏุงูุฉ: ุจูุฌุฑุฏ ุชููู ุฃู ุนูุฏุฉ ูุคูุชูุง ูุฌูุน ุงูููุงูุฉ ุ ุชุชููู ุงููุนุงูุฌุฉ ุนูู ุงููุชูุฉ ุจุฃููููุง. ูุชุฑุชูุน G1 ุนูู JDK 8 ููุชุฑุฉ ุชููู ุทูููุฉ ุฌุฏูุง ุ ุฃูุซุฑ ูู ุฏูููุฉ. ูุฐุง ูููู ููู ูุนูู ูุงุดู ุงููุดู ูู ุงูุนูููุฏ ูููุฑุฑ ุฃู ุงูุนูุฏุฉ ูุฏ ูุงุชุช. ูุดูุช ุงููููุฉ ุ ูุฃุนุงุฏุช ุงููุฌููุนุฉ ุชูุธูู ููุณูุง ุ ูุชุจุฏุฃ ุงููููุฉ ูุฑุฉ ุฃุฎุฑู ุนูู ุนูุฏุชูู.ูุคุฏู ูุฐุง ุฅูู ูุดู ุฌุฏูุฏ ุจุดูู ุฃุณุฑุน ุ ูุฃู ูู ุนูุฏุฉ ุชุนุงูุฌ ุงูุขู ุงููุฒูุฏ ูู ุงูุจูุงูุงุช. ูู ููุณ ุงูููุช ุ ุชูุถู ุงูุนูุฏุฉ ุงูููุฐููุฉ ูุฑุฉ ุฃุฎุฑู ุ ูุชุจุฏุฃ ุงููููุฉ ูุฑุฉ ุฃุฎุฑู ุนูู ุนูุฏุชูู ุ ูููู ุงูุฃุฎุฑู. ููุงู ุญููุฉ ูุง ููุงูุฉ ููุง ูู ุฅุนุงุฏุฉ ุชุดุบูู ุงูููุงู.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุง ุชุชููู ุงูุชูููุงุช ุงููุชูุงุฒูุฉ ููุชุฑุฉ ุทูููุฉ ุญุชู ุชูุณุฑ ุงููุชูุฉ ุ ูููููุง ุนููุช ุจุดูู ุฃุณูุฃ ุจูุซูุฑ ูู ุงูุงุฎุชุจุงุฑุงุช ุนูู ููุณ ุงูุนูุฏุฉ. ุนูู ุซูุงุซ ุนูุฏ ุ ุฎุณุฑ 30 ูช ููุงุจู ูุฌููุนุฉ G1 ู JDK 11. ูุจุงููุณุจุฉ ูููุฌููุนุงุช ุงูุฃูุจุฑ ูุฅู ุงููุถุน ุณูููู ุฃุณูุฃ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅุฐุง ูุธุฑุช ุฅูู ุฌููุน ุงูุงุฎุชุจุงุฑุงุช ุ ููู ุงููุซูุฑ ููุฏูุดุฉ ุฃู Parallel ูุนูู ุจุดูู ุฃุณุฑุน ุนูู JDK 8 ูู JDK 11. ููุน ุฐูู ุ ูุฐุง ูุฑุฌุน ุฅูู ูุตุงุฏูุฉ ุฌูุฏุฉ ุฌุฏูุง: ูู ูุฐู ุงูุงุฎุชุจุงุฑุงุช ุงูุงุฎุชุจุงุฑูุฉ ุ ุจุฏุฃ ุงูุฅููุงู ุงููุคูุช ุงููุงูู ุจุดูู ูุชุฒุงูู ุนูู ุฌููุน ุงูุนูุฏ ุ ูุงูุชู ุชูุงุฒู ุนูู ุงููุฌูุน. ูู ุงููุงุถุญ ุฃูู ูุง ูููู ุงูุงุนุชูุงุฏ ุนูู ูุฐุง ุงูุชุฃุซูุฑ.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุนูู ุงูุฑุบู ูู ุญูููุฉ ุฃูู ูู ุชูููู ุงูุงุฎุชุจุงุฑ ุงูุฎุงุต ุจูุง ุนูุฏ ุงุณุชุฎุฏุงู Parallel ุ ูู ููุงุญุธ ุงูุชุฃุซูุฑ ุงููุงุฑุซู ููุฅููุงู ุงููุคูุช ุงูุทููู ุนูู ุงุณุชูุฑุงุฑ ุงููุชูุฉ ุ ููุฐุง ุณููุงุฑูู ูุญุชูู ุฌุฏูุง. </font><font style="vertical-align: inherit;">ูู ุงุฎุชุจุงุฑุงุช ุฃุฎุฑู ุ ุนูุฏูุง ูููุง ุจุฒูุงุฏุฉ ุงููููุฉ ููููุฉ ุงูุจูุงูุงุช ุ ุฃู ุชุฑููุง ููุณ ุงููููุฉ ุ ูููููุง ููููุง ูู ูุงูุด ุงูุชุดุบูู ุ ุชุตุฑู Parallel ุจููุณ ุงูุทุฑููุฉ ุงููุฏูุฑุฉ. </font><font style="vertical-align: inherit;">ูููู ุญุชู ุนูุฏูุง ูู ูุคุฏ ุฅูู ุงููุดู ุ ุงุฎุชูุช ููุฒุชู ุนูู ุงูุฑุณูู ุงูุจูุงููุฉ ุนูุฏ ุงูุนูู ุนูู ููุณ ุงูุนูุฏุฉ. </font><font style="vertical-align: inherit;">ูู ุงููุชููุน ุฃู ูุชูุงูู ุงููุถุน ูุน ุฅุถุงูุฉ ุนูุฏ ุฌุฏูุฏุฉ ุฅูู ุงููุชูุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ูุงุญูุฉ ุฃุฎุฑู ุ ุนููุช ูุฌููุนุฉ ูู G1 ู JDK 11 ูุน ูุชุฑุงุช ุชููู ูุตูุฑุฉ ุฅูู ุญุฏ ูุง ุ ูุฐูู ูู ูุชููู ุงููุงูู. </font><font style="vertical-align: inherit;">ูุฏููุง ุขููุฉ ุชุฎูู ูู ูุชุฑุงุช ุงูุชููู ุงููุตูุฑุฉ ุ ูุจูููุง ูุง ุชุชุฌุงูุฒ ูุชุฑุงุช ุงูุชููู ุงููุคูุช 150 ูููู ุซุงููุฉ ุ ูุฅู ุฌูุน ุงูููุงูุฉ ูู ุชุฃุซูุฑ ูุญูู ููุท.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar507198/index.html">ุงููุฏููุฉ ุงูุตูุชูุฉ ููุณุงุฆู ุฅุนูุงู ูุคุณุณูุฉ: ููููุฉ ูุณุจ ุงููุงู ุนูููุง ููุง ูู ุงูููุงููุณ ุงูุชู ูุฌุจ ุงุณุชุฎุฏุงููุง</a></li>
<li><a href="../ar507200/index.html">7 ุทุฑู ูุฎุฏุนู ุนููุงุก ุงูุจูุงูุงุช</a></li>
<li><a href="../ar507202/index.html">ููุงุก Avito Analytics</a></li>
<li><a href="../ar507204/index.html">ูุทุจุฎ ุฏุงุฎูู ุจุชุตููู ุตูุงุนู: ูู ุงูุฑุณู ุฅูู ุงูููุชุฌ ูู ุงูุตูุฏูู</a></li>
<li><a href="../ar507206/index.html">ููุฏุณุฉ ุงูุฑุณูู</a></li>
<li><a href="../ar507212/index.html">ุชุฏุฑูุจ ููุงูุณู ุงูุฃูุนุงุจ ุงูุฐููุฉ ูู Unity ุจุงุณุชุฎุฏุงู ุทุฑููุฉ "ุงููุนุจ ูุน ููุณู" ุจุงุณุชุฎุฏุงู ML-Agents</a></li>
<li><a href="../ar507214/index.html">ููููุฉ ุฅูุดุงุก ูุชุนุฏูู ููุงุฐุฌ PDF ุงูุชูุงุนููุฉ ุ ุฃู ุงูููุงุฑุฉ ุงูุฌุฏูุฏุฉ ABBYY FineReader PDF</a></li>
<li><a href="../ar507218/index.html">ุงูุฑุฃ ูู ุ ุฃู ููุงุฐุง ูุง ููุฑุฃ ุงููุต ุญุชู ุงูููุงูุฉ</a></li>
<li><a href="../ar507222/index.html">ููุงุฐุง ูุฌุจ ุนูู ุงูุฌููุน ุงุฑุชุฏุงุก ุงูุฃููุนุฉ</a></li>
<li><a href="../ar507224/index.html">ููููุฉ ุฅุฒุงูุฉ ุงูุจูุน ุงูุนููุงุก ุจุงุณุชุฎุฏุงู ุงูุงุฎุชุจุงุฑ ุงูุจุตุฑู</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>