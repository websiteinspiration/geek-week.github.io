<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèΩ‚Äçü§ù‚Äçüë®üèº üèáüèø üßïüèΩ Unity Editor Adventures: Matriochka s√©rialis√© üë®üèΩ‚Äçüíª üöæ üòô</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Br√®ve introduction
 En r√®gle g√©n√©rale, pour acc√©der au domaine d'une propri√©t√© s√©rialis√©e qui nous int√©resse, la th√©rapie manuelle nous conseille d'ut...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Unity Editor Adventures: Matriochka s√©rialis√©</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/502836/"><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Br√®ve introduction</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En r√®gle g√©n√©rale, pour acc√©der au domaine d'une propri√©t√© s√©rialis√©e qui nous int√©resse, la th√©rapie manuelle nous conseille d'utiliser la m√©thode FindPropertyRelative (), dans laquelle le nom de la variable est jet√©. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour certaines raisons, cette approche n'est pas toujours pratique. Les raisons peuvent √™tre tr√®s diverses. Par exemple, le nom d'une variable peut changer, nous avons besoin d'un acc√®s par le nez √† une propri√©t√© non s√©rialis√©e, nous devons avoir acc√®s √† des accesseurs de d√©finition ou m√™me √† des m√©thodes d'un objet s√©rialis√©. Nous ne poserons pas les questions ¬´pourquoi en avez-vous besoin du tout¬ª et ¬´pourquoi vous ne pourriez pas vous passer des m√©thodes traditionnelles¬ª. Supposons que nous ayons besoin - et c'est tout.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alors, d√©couvrons comment obtenir l'objet avec lequel nous travaillons, ainsi que tous ses objets parents √† partir de la propri√©t√© s√©rialis√©e, et ne pas se laisser prendre sur la route de s√©rialisation pleine d'emb√ªches. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Attention. </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cet article suppose que vous savez d√©j√† comment travailler avec UnityEditor, que vous avez √©crit au moins une fois des PropertyDrawers personnalis√©s et que vous comprenez en g√©n√©ral comment la propri√©t√© s√©rialis√©e diff√®re d'un objet s√©rialis√©.</font></font><br>
<br>
<a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chemin de s√©rialisation</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour commencer, mettez tous les points sur O.Dans </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
le cas le plus primitif, nous avons une certaine classe h√©riti√®re de MonoBehaviour, et elle a un certain champ appartenant √† une classe s√©rialis√©e, √©videmment pas un h√©ritier de la vache unitaire sacr√©e de A.K.A. </font><font style="vertical-align: inherit;">UnityEngine.Object.</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ExamplePulsar</span> : <span class="hljs-title">MonoBehaviour</span><font></font>
{<font></font>
...<font></font>
        [<span class="hljs-meta">Space</span>][Header(<span class="hljs-string">"Example Sandbox Inspector Field"</span>)]
        <span class="hljs-keyword">public</span> SandboxField sandboxField;<font></font>
...<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans le code ci-dessus, SandboxField est une classe avec l'attribut Serializable. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour acc√©der au MonoBehaviour du propri√©taire n'est pas un probl√®me:</font></font><br>
<br>
<pre><code class="cs hljs">UnityEngine.Object serializationRoot = property.serializedObject.targetObject;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous le souhaitez, vous pouvez le faire au fur et √† mesure, mais maintenant nous n'en avons plus besoin. </font><font style="vertical-align: inherit;">Nous nous int√©ressons au champ s√©rialis√© lui-m√™me afin de le dessiner avec tout le blackjack comme dans la figure ci-dessous.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/-w/3n/th/-w3nthkn0gmcdeuvpqlw2zctxhy.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous pouvons prendre le chemin de s√©rialisation comme suit:</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">string</span> serializationPath = property.propertyPath;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans notre cas, le chemin de s√©rialisation se composera de l'un de nos champs et renverra ¬´sandboxField¬ª, dont nous ne sommes ni froid ni chaud, car pour le premier niveau d'imbrication nous n'avons besoin de conna√Ætre que le nom de la variable (qui, soit dit en passant, nous a √©t√© retourn√©e). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Veuillez noter qu'il n'y a pas de comportement Mono parent sur le chemin. </font><font style="vertical-align: inherit;">Maintenant, cela n'a plus d'importance, mais cela deviendra important lorsque nous commencerons √† d√©monter une poup√©e russe qui ressemble √† ceci:</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nestedClassVariable.exampleSandboxesList.Array.data [0] .evenMoreNested.Array.data [0]</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Afin de ne pas se faire prendre plus tard, lorsque les propri√©t√©s sont imbriqu√©es, nous proc√©derons √† l'avance comme suit:</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">string</span>[] path = property.propertyPath.Split(<span class="hljs-string">'.'</span>);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons maintenant tous les n≈ìuds du chemin de s√©rialisation. </font><font style="vertical-align: inherit;">Mais dans le cas le plus primitif, nous n'avons besoin que du n≈ìud z√©ro. </font><font style="vertical-align: inherit;">Prends-le:</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">string</span> pathNode = path[<span class="hljs-number">0</span>];</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Allumez un peu de r√©flexion et obtenez le champ d'ici:</font></font><br>
<br>
<pre><code class="cs hljs">Type objectType = serializationRoot.GetType();<font></font>
FieldInfo objectFieldInfo = objectType.GetField(pathNode);<font></font>
<span class="hljs-keyword">object</span> field = objectFieldInfo.GetValue(serializationRoot);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous laissons derri√®re les coulisses la question de la rapidit√© de cette aventure. Pour un petit nombre de ces champs et une petite imbrication, les co√ªts de r√©flexion seront nettement inf√©rieurs √† ceux de tout ce qui se passe sous le capot d'UnityEditor lors du rendu. Si vous voulez des preuves - sur un github, les d√©veloppeurs Unity ont une chose si int√©ressante, UnityCsReference, regardez √† votre guise, comment le rendu ObjectField est impl√©ment√©, par exemple. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En fait, ce </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n'est pas (ha ha)</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tout. Nous avons le champ, nous sommes heureux, nous pouvons faire tout ce que nous voulons avec lui et m√™me essayer d'√©crire notre propre UnityEvent avec tous les boutons et actions importantes qui n'affectent que notre champ, quel que soit l'objet sur lequel il s'accroche.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Au moins, alors qu'il se bloque √† la racine de cet objet, tout ira bien, mais alors ce n'est plus tellement. </font><font style="vertical-align: inherit;">Sur le chemin de la s√©rialisation, nous attendons des tableaux et toutes sortes de listes, dont le principal d√©sir est de nous mettre dans des pantoufles, en changeant en temps opportun le nombre d'√©l√©ments. </font><font style="vertical-align: inherit;">Mais au diable avec cela, nous creuserions d'abord sous le tableau lui-m√™me.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Notre objectif est la r√©sistance √† de telles poup√©es</font></font></b>
                        <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/webt/l7/do/h3/l7doh3b9j_da24zsw9rc-7xefjs.png"></div></div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si nous n'avions pas de tableaux dans le chemin de s√©rialisation, la t√¢che serait triviale: nous ferions une boucle √† travers les n≈ìuds de s√©rialisation jusqu'√† atteindre la fin de la cha√Æne. </font><font style="vertical-align: inherit;">Quelque chose comme le code suivant:</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">object</span> currentObject = serializationRoot;
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; directSearchDepth; i++)<font></font>
{<font></font>
       <span class="hljs-keyword">string</span> pathNode = path[i];<font></font>
       Type objectType = currentObject.GetType();<font></font>
       FieldInfo objectFieldInfo = objectType.GetField(pathNode);<font></font>
       <span class="hljs-keyword">object</span> nextObject = objectFieldInfo.GetValue(currentObject);<font></font>
       currentObject = nextObject;<font></font>
}<font></font>
<span class="hljs-keyword">return</span> currentObject;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ici, nous attendons deux nouvelles d√©sagr√©ables √† la fois. </font><font style="vertical-align: inherit;">Je vais commencer par le second. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'√©tape de prise de nextObject peut soudainement retourner null au lieu de l'objet attendu. </font><font style="vertical-align: inherit;">Habituellement, cela se produit lorsque nous cr√©ons pour la premi√®re fois l'objet parent dans l'inspecteur et que le chemin de s√©rialisation existe d√©j√†, mais le champ correspondant n'existe pas (cela nous apportera encore plus de commodit√©s). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans ce cas, il serait bien d'ajouter imm√©diatement la sortie de la m√©thode avec le retour null:</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">object</span> nextObject = objectFieldInfo.GetValue(currentObject);
<span class="hljs-keyword">if</span> (nextObject == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<font></font>
currentObject = nextObject;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
"Attends une minute! </font><font style="vertical-align: inherit;">- vous dites. </font><font style="vertical-align: inherit;">"Et que faire alors dans OnGUI si z√©ro nous √©tait retourn√©?" </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
R√©ponse: rien. </font><font style="vertical-align: inherit;">Rien litt√©ralement. </font><font style="vertical-align: inherit;">Faites simplement un retour et sautez ainsi cette √©tape de dessin, en attendant que le champ soit cr√©√©. </font><font style="vertical-align: inherit;">Il ne se passera rien de terrible de cela.</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnGUI</span>(<span class="hljs-params">Rect position, SerializedProperty property, GUIContent label</span>)</span><font></font>
{<font></font>
       SandboxField sandboxField = GetTarget&lt;T&gt;(property);<font></font>
       <span class="hljs-keyword">if</span> (sandboxField == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span>;<font></font>
‚Ä¶<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ici GetTarget () est la fonction correspondante, prenant l'objet s√©rialis√© de la propri√©t√©. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Soit dit en passant, je vous conseillerai de prendre le champ d'int√©r√™t pour nous non pas ici, mais dans GetPropertyHeight. Cela sera n√©cessaire dans le cas o√π nous √©crivons des champs extensibles pliables avec diff√©rentes tailles en fonction du contenu. GetPropertyHeight () est appel√©e avant OnGUI (), donc si nous y prenons un champ et l'√©crivons dans le champ de notre PropertyDrawer, nous n'aurons pas √† le reprendre √† OnGUI.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Veuillez noter qu'une instance du PropertyDrawer personnalis√© est cr√©√©e seule pour dessiner toutes les propri√©t√©s s√©rialis√©es actuellement visibles, et de nouvelles propri√©t√©s sont lanc√©es √† son tour de haut en bas. Cela doit √™tre pris en compte afin de ne pas perturber le calcul de la hauteur de la propri√©t√© suivante, sinon vous risquez d'obtenir une situation d√©sagr√©able lorsque vous cliquez sur le d√©pliant et que le champ que vous attendez est d√©velopp√©. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En outre, tous les guirlandes responsables de l'affichage du champ dans l'√©diteur et que vous souhaitez s√©rialiser, vous devez s√©rialiser du c√¥t√© de la classe s√©rialisable, et non par PropertyDrawer, et pour des raisons de pr√©cision - joignez des crochets de compilation conditionnels afin que toute cette honte espagnole n'essaye pas d'aller √† la g√©n√©ration :</font></font><br>
<br>
<pre><code class="cs hljs">[<span class="hljs-meta">Serializable</span>]
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">SandboxField</span><font></font>
{<font></font>
‚Ä¶<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">if</span> UNITY_EDITOR</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">bool</span> editorFoldout;
<span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span><font></font>
‚Ä¶<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Autre √©cueil qui nous attend ici: tous les champs cr√©√©s via l'√©diteur ont voulu cracher sur le constructeur de classe et sur les valeurs par d√©faut sp√©cifi√©es dans la classe. </font><font style="vertical-align: inherit;">Si vous faites, par exemple, comme √ßa (exemple de mon projet, o√π c'√©tait la valeur des n≈ìuds de la surface de l'eau):</font></font><br>
<br>
<pre><code class="cs hljs">[<span class="hljs-meta">SerializeField</span>]<span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> m_nodesPerUnit = <span class="hljs-number">5</span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cette valeur sera ignor√©e de la s√©rialisation √† blanc d√®s que vous ajouterez un nouvel √©l√©ment √† la liste. </font><font style="vertical-align: inherit;">Appeler le constructeur √† l'aide n'est pas moins inutile: tout ce que vous y avez √©crit sera ignor√©. </font><font style="vertical-align: inherit;">Le nouvel objet est un objectif comme un faucon, toutes ses valeurs sont vraiment les valeurs par d√©faut, ce n'est tout simplement pas celles que vous voulez voir l√†-bas, mais toutes sortes de null, false, 0, Color.clear et autres choses obsc√®nes.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">B√©quille √† la viande</font></font></b>
                        <div class="spoiler_text">  .   NonUnitySerializableClass,       .      , DefaultEditorObject(),    . <br>
<br>
  - :<br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title">NonUnitySerializableClass</span><font></font>
{<font></font>
        <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">DefaultEditorObject</span>(<span class="hljs-params"></span>)</span><font></font>
        {<font></font>
            <span class="hljs-comment">// virtually do nothing</span><font></font>
        }<font></font>
<font></font>
        [<span class="hljs-meta">SerializeField</span>]<span class="hljs-keyword">private</span> <span class="hljs-keyword">bool</span> validated = <span class="hljs-literal">false</span>;
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">EditorCreated</span>(<span class="hljs-params"><span class="hljs-keyword">bool</span> force = <span class="hljs-literal">false</span></span>)</span><font></font>
        {<font></font>
            <span class="hljs-keyword">if</span> (validated &amp;&amp; !force) <span class="hljs-keyword">return</span>;<font></font>
            DefaultEditorObject();<font></font>
            validated = <span class="hljs-literal">true</span>;<font></font>
        }<font></font>
<font></font>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">NonUnitySerializableClass</span>(<span class="hljs-params"></span>)</span><font></font>
        {<font></font>
            EditorCreated(<span class="hljs-literal">true</span>);<font></font>
        }<font></font>
}</code></pre><br>
        DefaultEditorObject(),    ,   EditorCreated     .<br>
<br>
 :       .<br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/fg/dh/dr/fgdhdrfczfhhcki7dw6plxzj7vi.png"></div><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Revenons √† nos moutons, ou plut√¥t aux tableaux. </font><font style="vertical-align: inherit;">Un autre probl√®me qui peut survenir √† un stade encore plus pr√©coce r√©side dans cette ligne:</font></font><br>
<br>
<pre><code class="cs hljs">FieldInfo objectFieldInfo = objectType.GetField(pathNode);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le c√¥t√© droit peut nous renvoyer z√©ro s'il se heurte √† un tableau dans le chemin de s√©rialisation (et tout objet "IList" sera le tableau "Array"). </font><font style="vertical-align: inherit;">D√©sagr√©able. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Que faire? </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Essayez de ne pas tomber dans de telles situations en</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √©crivant un gestionnaire:</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; pathNode.Length; i++)<font></font>
{<font></font>
        <span class="hljs-keyword">string</span> pathNode = path[i];<font></font>
        Type objectType = currentObject.GetType();<font></font>
        FieldInfo objectFieldInfo = objectType.GetField(pathNode);<font></font>
<font></font>
        <span class="hljs-keyword">if</span> (objectFieldInfo == <span class="hljs-literal">null</span>)<font></font>
        {<font></font>
                <span class="hljs-keyword">if</span> (pathNode == <span class="hljs-string">"Array"</span>)<font></font>
                {<font></font>
                        i++;<font></font>
                        <span class="hljs-keyword">string</span> nextNode = path[i];
                        <span class="hljs-keyword">string</span> idxstr = nextNode.Substring(nextNode.IndexOf(<span class="hljs-string">"["</span>) + <span class="hljs-number">1</span>);<font></font>
                        idxstr = idxstr.Replace(<span class="hljs-string">"]"</span>, <span class="hljs-string">""</span>);
                        <span class="hljs-keyword">int</span> arrayNumber = Convert.ToInt32(idxstr);<font></font>
                        IList collection = currentObject <span class="hljs-keyword">as</span> IList;
                        <span class="hljs-keyword">if</span> (collection.Count &lt;= arrayNumber) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<font></font>
                        currentObject = collection[arrayNumber];<font></font>
                }<font></font>
                <span class="hljs-keyword">else</span><font></font>
                {<font></font>
                        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> NotImplementedException(<span class="hljs-string">"   "</span>);<font></font>
                }<font></font>
        }<font></font>
        <span class="hljs-keyword">else</span> <span class="hljs-comment">//  ,     </span><font></font>
        {<font></font>
                <span class="hljs-keyword">object</span> nextObject = objectFieldInfo.GetValue(currentObject);
                <span class="hljs-keyword">if</span> (nextObject == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<font></font>
                currentObject = nextObject;<font></font>
        }<font></font>
}<font></font>
<span class="hljs-keyword">return</span> currentObject;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Oui, nous pouvons m√™me entrer dans une situation d√©sagr√©able ici, lorsque le chemin de s√©rialisation a d√©j√†, par exemple, l'√©l√©ment data [0] ou data [1] et que le tableau ne l'a pas encore impl√©ment√©. </font><font style="vertical-align: inherit;">Par exemple, nous avons cr√©√© une liste vide. </font><font style="vertical-align: inherit;">On lui demande N √©l√©ments - et sans cette belle ligne:</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">if</span> (collection.Count &lt;= arrayNumber) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
... nous obtenons un tas d'exceptions dans les ronronnements. </font><font style="vertical-align: inherit;">Et tout ce qui √©tait n√©cessaire √©tait de sauter l'√©tape de rendu, apr√®s avoir attendu la cr√©ation des champs qui nous int√©ressaient. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je n'ai pas encore rencontr√© d'autres cas o√π objectFieldInfo == null, mais le n≈ìud de s√©rialisation n'est pas d√©sign√© comme Array, donc lancer une terrible exception dans une situation aussi hypoth√©tique exceptionnelle est de la casser par la suite. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En g√©n√©ral, nous avons une fonction plus ou moins fonctionnelle qui nous permet d'extraire un champ par sa propri√©t√© s√©rialis√©e. </font><font style="vertical-align: inherit;">√Ä l'avenir, cette fonction peut √™tre modifi√©e en for√ßant √† extraire tous les objets dans le chemin de s√©rialisation, ainsi qu'en recherchant le ¬´parent¬ª le plus proche, en incluant ou en excluant les tableaux le long du chemin.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Life hack pour dessiner des propri√©t√©s imbriqu√©es</font></font></b>
                        <div class="spoiler_text">      -  ,   Rect position  Rect indentedPosition = EditorGUI.IndentedRect(position).     ,         EditorGUI,      position ,       GUI ‚Äì    indentedPosition.   EditorGUILayout  OnGUI,       (   ,   ).<br>
<br>
    ,   MonoScript   (     -,   ),     static-,      AssetDatabase,        <i></i>         .<br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Merci pour l'attention.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr502818/index.html">Y Messenger: Messenger d√©centralis√© sur la blockchain *</a></li>
<li><a href="../fr502826/index.html">Pr√©sentation du scanner 3D Creaform MetraSCAN 3D</a></li>
<li><a href="../fr502830/index.html">Hackathon en ligne "New Reality" VirusHack. Comment c'√©tait</a></li>
<li><a href="../fr502832/index.html">Certification ISTQB disponible en ligne: exp√©rience personnelle</a></li>
<li><a href="../fr502834/index.html">Comment devenir ing√©nieur DevOps en six mois ou plus vite. Partie 5. D√©ploiement</a></li>
<li><a href="../fr502838/index.html">Quelle est la diff√©rence entre les m√©tiers de l'informatique et du num√©rique: transformation num√©rique et avis d'experts</a></li>
<li><a href="../fr502840/index.html">Test du scanner 3D Shin 3D EinScan Pro 2X Plus</a></li>
<li><a href="../fr502842/index.html">Comment prot√©ger les donn√©es biom√©triques des utilisateurs contre une utilisation criminelle</a></li>
<li><a href="../fr502844/index.html">[Partie 2/2] Guide de FFmpeg et SDL ou Comment √©crire un lecteur vid√©o en moins de 1000 lignes</a></li>
<li><a href="../fr502846/index.html">Zuckerberg a lanc√© Shops. Instagram et Facebook deviennent progressivement des magasins.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>