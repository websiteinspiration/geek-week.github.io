<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ—ºï¸ â™»ï¸ ğŸ™ğŸ¼ éºä¼çš„ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ï¼ˆã¾ãŸã¯ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¯å¸¸ã«ç‹æ§˜ã§ã™-ãã—ã¦ã—ã°ã—ã°ã°ã‹è€…ã§ã™ï¼‰ ğŸ§— ğŸ‘¨ğŸ¼â€ğŸ« ğŸ°</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ï¼ˆãƒãƒ¼ã‚¸ãƒ§ãƒ³2ã€ã‚¿ã‚¤ãƒ—ãƒŸã‚¹ãŒä¿®æ­£ã•ã‚ŒãŸ-çš†ã•ã‚“
 
 ã€ã‚ˆã‚ã—ããŠé¡˜ã„ã—ã¾ã™...ï¼‰ã“ã‚“ã«ã¡ã¯ã€Habrï¼
 
 ä»Šå½¼ã¯åº§ã£ã¦ã€å‹äººã®ãŸã‚ã«éºä¼çš„ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—ã‚’ä½œã‚Šã¾ã—ãŸã€‚ã“ã‚Œã¨ä»–ã®ã„ãã¤ã‹ã®è€ƒãˆã‚’å…±æœ‰ã™ã‚‹ã‚ˆã†ã«ä¿ƒã•ã‚ŒãŸ... 
 
 ä¸ãˆã‚‰ã‚ŒãŸï¼ˆé¡§å®¢ãŒæ³¨æ–‡ã—ãŸï¼‰ï¼šç‰¹å®šã®ç‹å›½ã§åœ¨åº«ã¯1...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>éºä¼çš„ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ï¼ˆã¾ãŸã¯ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¯å¸¸ã«ç‹æ§˜ã§ã™-ãã—ã¦ã—ã°ã—ã°ã°ã‹è€…ã§ã™ï¼‰</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/465797/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼ˆãƒãƒ¼ã‚¸ãƒ§ãƒ³2ã€ã‚¿ã‚¤ãƒ—ãƒŸã‚¹ãŒä¿®æ­£ã•ã‚ŒãŸ-çš†ã•ã‚“</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã€ã‚ˆã‚ã—ã</font><font style="vertical-align: inherit;">ãŠé¡˜ã„ã—ã¾ã™...ï¼‰</font><font style="vertical-align: inherit;">ã“ã‚“ã«ã¡ã¯ã€Habrï¼</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä»Šå½¼ã¯åº§ã£ã¦ã€å‹äººã®ãŸã‚ã«éºä¼çš„ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—ã‚’ä½œã‚Šã¾ã—ãŸã€‚</font><font style="vertical-align: inherit;">ã“ã‚Œã¨ä»–ã®ã„ãã¤ã‹ã®è€ƒãˆã‚’å…±æœ‰ã™ã‚‹ã‚ˆã†ã«ä¿ƒã•ã‚ŒãŸ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸ãˆã‚‰ã‚ŒãŸï¼ˆé¡§å®¢ãŒæ³¨æ–‡ã—ãŸï¼‰ï¼šç‰¹å®šã®</font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç‹å›½ã§</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åœ¨åº«ã¯100å€‹ã§ã™ã€‚ãã®ä¸­ã«å•†å“ãŒã‚ã‚Šã¾ã™ã€‚é–¢ä¿‚ã™ã‚‹ã™ã¹ã¦ã®ã‚»ãƒ«ã‚’æœ€å¾Œã¾ã§ç©ºã«ã™ã‚‹ãŸã‚ã«ã€æ•°é‡Xã‚’å–ã‚‹æ–¹æ³•ã¯ï¼Ÿã¾ã‚ã€ã¤ã¾ã‚Šã€ã‚ãªãŸã¯ã‚»ãƒ«ã‚¿ã‚¤ãƒ—ã‚’æŒã£ã¦ã„ã¾ã™[34ã€10ã€32ã€32ã€33ã€41ã€44ã€4ã€28ã€23ã€22ã€28ã€29ã€14ã€28ã€15ã€38ã€49ã€30ã€24ã€ 18ã€9ã€15ã€8ã€17ã€9ã€2ã€7ã€30ã€29ã€29ã€2ã€28ã€23ã€19ã€4ã€15ã€30ã€38ã€3ã€14ã€21ã€43ã€50ã€29ã€ 14ã€17ã€12ã€25ã€15ã€23ã€28ã€47ã€38ã€29ã€7ã€36ã€45ã€25ã€6ã€25ã€11ã€10ã€1ã€19ã€37ã€24ã€27ã€50ã€12 1ã€1ã€44ã€22ã€48ã€13ã€46ã€49ã€11ã€33ã€29ã€4ã€19ã€33ã€12ã€3ã€47ã€27ã€26ã€45ã€40ã€37ã€21ã€2ã€8 41ã€5ã€1ã€9ã€5]-ã©ã®ã‚ˆã†ã«ãƒ€ã‚¤ãƒ¤ãƒ«ã™ã‚‹ã‹ã€ãŸã¨ãˆã°40 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãˆãˆã¨ã€ãƒã‚¹ãƒˆã§ãã¾ã™ã€‚ç¢ºã‹ã«ã‚¹ãƒãƒ¼ãƒˆãªã‚‚ã®ãŒã‚ã‚Šã¾ã™ãŒã€éºä¼çš„ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã§è§£æ±ºã§ãã¾ã™...</font></font><br>
<a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æœ€åˆã®è³ªå•ï¼šãªãœé ­ã‚’ä¹¾ã‹ã™ã®ã§ã™ã‹ã€‚ãƒªã‚¹ãƒˆã‚’ãŸã©ã‚‹ã ã‘ãªã‚‰ã€æœ€åˆã®2ã¤ã®ã‚»ãƒ«ã‹ã‚‰å–ã‚Šå‡ºã™å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ãŸã ã—ã€2ã¤ç›®ã¯æ®‹ã‚Šã®ã‚»ãƒ«ã«ãªã‚Šã¾ã™ã€‚ãã—ã¦ã€ã‚ãªãŸã¯é ãã«è¡Œãå¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ã—ã‹ã—ã€è¦‹ã¦ã¿ã‚‹ã¨ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¯å®Œç’§ä¸»ç¾©è€…ã§ã‚ã‚Šã€è–¬å±€ã®ã‚ˆã†ã«ãªã‚ŠãŸã„ã¨æ€ã£ã¦ã„ã¾ã™ã€‚ãŠãã‚‰ãã€é‡‘ã®é‡é‡ã«è¦‹åˆã†ä¾¡å€¤ã®ã‚ã‚‹ã‚»ãƒ«å€‰åº«ã«ã„ã¾ã™ã€‚ãã‚ŒãŒèµ·ã“ã‚Šã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2ç•ªç›®ã®è³ªå•ï¼šæ˜‡é †ã§ä¸¦ã¹æ›¿ãˆã‚‹ã¨ã€ã‚ˆã‚Šå¤šãã®ã‚»ãƒ«ã‚’ç¢ºå®Ÿã«ã‚¹ãƒ¯ã‚¤ãƒ—ã§ãã¾ã™...ã“ã®ä¾‹ã§ã¯ã€ã‚»ãƒ«ãŒ10å€‹æœªæº€ã®ã‚»ãƒ«ãŒãŸãã•ã‚“ã‚ã‚Šã¾ã™ã€‚ãŠãã‚‰ãã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚‚æœ›ã‚“ã§ã„ãªã„ã§ã—ã‚‡ã†;ï¼‰ç§ã‚‚ãã®ã‚ˆã†ãªäººã€…ã«å‡ºä¼šã„ã¾ã—ãŸï¼šç§ã¯ã“ã“ã§ã®ãƒœã‚¹ã§ã™ã€‚å½¼ã‚‰ã¯ã‚ãªãŸã«è¨€ã£ãŸ-ãã‚Œã‚’ã—ãªã•ã„ã€è³ªå•ã‚’ã—ãªã„ã§ãã ã•ã„ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ï¼ˆã¾ã‚ã€ç§ã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã§ã¯ãªã„ã€ãã†ã§ãªã‘ã‚Œã°ç§ã¯ã‚‚ã†ä¸€åº¦äººé–“ã®å¿ƒã¸ã®ä¿¡ä»°ã‚’å¤±ã†ã§ã—ã‚‡ã†...ï¼‰</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã•ã¦ã€ç¥ã¯å½¼ã¨ä¸€ç·’ã«ã„ã¦ã€èª°ã‚‚ãŒç‹¬è‡ªã®å„ªå…ˆé †ä½ã‚’æŒã£ã¦ã„ã¾ã™...ãã—ã¦ç§ãŸã¡ã¯éºä¼çš„ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã«ã¤ã„ã¦è©±ã—ã¾ã™-ç§ãŸã¡ã¯ã“ã‚Œã‚’ã©ã†ã„ã†ã‚ã‘ã‹è§£æ±ºã—ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“...ç§ãŸã¡ã¯æ›¸ãã¾ã™Javaã§ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã‚Œã¾ã§å®Ÿéš›ã«èã„ãŸã“ã¨ãŒãªã„äººã®ãŸã‚ã«ï¼šæ¯ãªã‚‹è‡ªç„¶ã‚’æ¨¡å€£ã—ã¾ã™ã€‚ </font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰å‹•ä½œ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å„ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒé©åˆ‡ãªãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã§ã©ã®ç¨‹åº¦æ©Ÿèƒ½ã™ã‚‹ã‹ã‚’ç¢ºèªã—ã¾ã™</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ¬¡ä¸–ä»£ã¸ã®å±æ€§ã®æœ€é«˜ã®ãƒ‘ã‚¹</font></font></li>
</ol><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è‡ªç„¶ã®æœ€å¾Œã®ã‚¹ãƒ†ãƒƒãƒ—ã§ã¯ã€2ã¤ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒã‚ã‚Šã¾ã™ã€‚äº¤å·®ï¼ˆæŸ“è‰²ä½“ã®åŒã˜éƒ¨åˆ†é–“ã®æ–‡å­—ã®äº¤æ›ï¼‰ã¨çªç„¶å¤‰ç•°ï¼ˆéºä¼æš—å·ã®è‡ªç„¶å¤‰åŒ–ï¼‰ã§ã™ã€‚ã“ã‚“ã«ã¡ã¯ã€é«˜æ ¡;ï¼‰</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãã‚Œã¯ãŠãã‚‰ãã™ã¹ã¦ã§ã™ã€‚ã‚³ãƒ¼ãƒ‰ã‚’å–å¾—ã™ã‚‹ã‚»ãƒ«ã¨å–å¾—ã—ãªã„ã‚»ãƒ«ã‚’æŒ‡å®šã—ã¾ã™ã€‚ 100å€‹ã®ã‚»ãƒ«ãŒã‚ã‚Šã¾ã™ã€‚ã¤ã¾ã‚Šã€æŸ“è‰²ä½“ã¯100å€‹ã®true / falseè¦ç´ ã«ãªã‚Šã¾ã™ã€‚ã“ã®ãŸã‚ã€ã‚¼ãƒ­ã¨1ãŒæ›¸ãè¾¼ã¾ã‚Œã‚‹æ–‡å­—åˆ—ã‚’å–å¾—ã—ã¾ã—ãŸã€‚ã‚‚ã¡ã‚ã‚“ã€100å€‹ã‚ã‚Š</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã¾ã™ãŒã€ã“ã®ãƒ—ãƒ­ã‚»ã‚¹ã§ã¯ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ãŒæœ€ã‚‚é‡è¦ã§ã™ã€‚è‡ªç„¶ã¯ãƒ‹ãƒƒãƒã‚’æ¢ã—ã¦ãŠã‚Šã€ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼ã®è‡ªç„¶ã¯ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã«ç©´ã‚’æ¢ã—ã¦ãã‚Œã‚’ã ã¾ã—ã¦ç”Ÿãæ®‹ã‚‹ã§ã—ã‚‡ã†ã€‚ã‚ãªãŸãŒ...æ­£ç›´ã€é©šã„ã¦ã„ã‚‹</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã€ã¨è¿°ã¹ã¦ã„ã‚‹ã™ã¹ã¦ã§ã¯ã“ã®ã‚ˆã†ãªä½•ã‹ï¼š</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> <span class="hljs-title">benchmark</span><span class="hljs-params">(String chromosome, <span class="hljs-keyword">boolean</span> verbose)</span> </span>{
	<span class="hljs-keyword">int</span> sum = <span class="hljs-number">0</span>;
	<span class="hljs-keyword">char</span>[] cArr = chromosome.toCharArray();<font></font>
<font></font>
	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; cnt_bins; i++) {
		<span class="hljs-keyword">if</span> (cArr[i] == <span class="hljs-string">'1'</span>) {<font></font>
			sum += stock[i];<font></font>
			<span class="hljs-keyword">if</span> (verbose)<font></font>
				System.out.println(<span class="hljs-string">"storage bin "</span> + i + <span class="hljs-string">":\t+"</span> + stock[i] + <span class="hljs-string">"\t= "</span> + sum);<font></font>
<font></font>
		}<font></font>
		<span class="hljs-keyword">if</span> (sum == target_qty) {
			<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<font></font>
		}<font></font>
	}<font></font>
<font></font>
	<span class="hljs-keyword">return</span> Math.abs(target_qty - sum);<font></font>
}</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç†æƒ³ã¯ã€æœ›ã¾ã—ã„æ•°40ã‹ã‚‰é ã„ã»ã©ã€æ‚ªã„ã“ã¨ã§ã™ã€‚</font><font style="vertical-align: inherit;">ã‚¹ã‚³ã‚¢ãŒ40ã®å ´åˆã¯ã€æŸ“è‰²ä½“ã‚’å…ˆã«é€²ã‚ãšã€å‹ã¡ã¾ã—ãŸã€‚</font><font style="vertical-align: inherit;">ã‚‚ã¡ã‚ã‚“ã€æ˜‡é †ã§ä¸¦ã¹æ›¿ãˆã¾ã™ã€‚ãƒšãƒŠãƒ«ãƒ†ã‚£ãƒã‚¤ãƒ³ãƒˆãŒå°‘ãªã„ã»ã©è‰¯ã„ã§ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æœ€åˆã®ä¸–ä»£ã¯ãƒ©ãƒ³ãƒ€ãƒ ã«ä½œæˆã•ã‚Œã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-comment">// create 1st generation</span>
		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; generation_size; i++) {<font></font>
			StringWriter sw = <span class="hljs-keyword">new</span> StringWriter();
			<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; cnt_bins; j++) {
				<span class="hljs-comment">// take stock from this bin?</span>
				sw.append(rnd.nextBoolean() ? <span class="hljs-string">"1"</span> : <span class="hljs-string">"0"</span>);<font></font>
			}<font></font>
			chromosomes.add(sw.toString());<font></font>
			sw.close();<font></font>
		}</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
éºä¼çš„ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã¯å®Ÿéš›ã«ã¯ç›®æ¨™ã«è¿‘ã¥ãã¾ã™ãŒã€å¸¸ã«ãã‚Œã‚’é”æˆã™ã‚‹ã‚ã‘ã§ã¯ãªã„ãŸã‚ã€ä¸–ä»£æ•°ã‚’åˆ¶é™ã™ã‚‹ã“ã¨ãŒé‡è¦ã§ã™ã€‚</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> generationNo = <span class="hljs-number">0</span>; generationNo &lt; maxGenerationCnt; generationNo++) {
	<span class="hljs-comment">// evaluate</span>
	List&lt;SimpleEntry&lt;String, Integer&gt;&gt; evaluated = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;();
	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; chromosomes.size(); i++) {<font></font>
		evaluated.add(<font></font>
			<span class="hljs-keyword">new</span> SimpleEntry&lt;String, Integer&gt;(chromosomes.get(i), benchmark(chromosomes.get(i), <span class="hljs-keyword">false</span>)));<font></font>
	} <font></font>
<span class="hljs-comment">// ...    , .  ...</span><font></font>
}<font></font>
System.out.println(<span class="hljs-string">"No solution found after "</span> + maxGenerationCnt + <span class="hljs-string">" iterations"</span>);</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸¦ã¹æ›¿ãˆã€æœ€é«˜ã®ã‚‚ã®ã‚’æ®‹ã™ï¼š</font></font><br>
<br>
<pre><code class="java hljs">...
<span class="hljs-comment">// sort</span><font></font>
evaluated = evaluated.stream().sorted((e1, e2) -&gt; Integer.compare(e1.getValue(), e2.getValue()))<font></font>
					.collect(Collectors.toList());<font></font>
<font></font>
System.out.println(<span class="hljs-string">"Generation "</span> + generationNo + <span class="hljs-string">"; Best / last parent / worst: "</span>
		+ evaluated.get(<span class="hljs-number">0</span>).getValue() + <span class="hljs-string">" / "</span> + evaluated.get(best_size).getValue() + <span class="hljs-string">" / "</span>
		+ evaluated.get(evaluated.size() - <span class="hljs-number">1</span>).getValue());<font></font>
<font></font>
<span class="hljs-keyword">if</span> (evaluated.get(<span class="hljs-number">0</span>).getValue() == <span class="hljs-number">0</span>) {<font></font>
	System.out.println(<span class="hljs-string">"Solution found"</span>);<font></font>
	benchmark(evaluated.get(<span class="hljs-number">0</span>).getKey(), <span class="hljs-keyword">true</span>);<font></font>
	System.exit(<span class="hljs-number">0</span>);<font></font>
}<font></font>
<font></font>
<span class="hljs-comment">// leave only the best</span>
evaluated = evaluated.subList(<span class="hljs-number">0</span>, best_size);<font></font>
...<font></font>
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç§ãŸã¡ã¯ç¹æ®–ã—ã€å¢—æ®–ã•ã›ã€äººå£ã®å¤§ãã•ã‚’å›å¾©ã•ã›ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã¤ã¾ã‚Šã€ãƒ©ãƒ³ãƒ€ãƒ ã«è¦ªã‚’é¸æŠã—ã€åŒã˜è¨˜å·ã‚’çµ„ã¿åˆã‚ã›ï¼ˆé‹ãŒè‰¯ã‘ã‚Œã°-äº¤æ›ãƒ•ãƒ©ã‚°ã‚’å‚ç…§ï¼‰ã€å¤‰ç•°ï¼ˆå¤‰ç•°ãƒ•ãƒ©ã‚°ï¼‰ã—ã€å¥‡è·¡ã‚’å¾…ã¡ã¾ã™...</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-comment">// replication</span><font></font>
List&lt;String&gt; parents = evaluated.stream().map(e -&gt; e.getKey()).collect(Collectors.toList());<font></font>
chromosomes.clear();<font></font>
<font></font>
<span class="hljs-keyword">while</span> (chromosomes.size() &lt; generation_size) {
	<span class="hljs-keyword">int</span> parent1 = rnd.nextInt(evaluated.size());
	<span class="hljs-keyword">int</span> parent2 = rnd.nextInt(evaluated.size());
	<span class="hljs-keyword">char</span>[] cArr1 = parents.get(parent1).toCharArray();
        <span class="hljs-keyword">char</span>[] cArr2 = parents.get(parent2).toCharArray();<font></font>
<font></font>
	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; cnt_bins; i++) {
		<span class="hljs-keyword">boolean</span> exchange = rnd.nextDouble() &lt; exchange_rate;
		<span class="hljs-keyword">if</span> (exchange) {
			<span class="hljs-keyword">char</span> c1 = cArr1[i];
			<span class="hljs-keyword">char</span> c2 = cArr2[i];<font></font>
<font></font>
			<span class="hljs-comment">// exchange both values</span><font></font>
			cArr1[i] = c2;<font></font>
			cArr2[i] = c1;<font></font>
		}<font></font>
<font></font>
		<span class="hljs-comment">// mutation</span>
		<span class="hljs-keyword">boolean</span> mutation = rnd.nextDouble() &lt; mutation_rate;
		<span class="hljs-keyword">if</span> (mutation) {<font></font>
			cArr1[i] = rnd.nextBoolean() ? <span class="hljs-string">'1'</span> : <span class="hljs-string">'0'</span>;<font></font>
		}<font></font>
<font></font>
		mutation = rnd.nextDouble() &lt; mutation_rate;<font></font>
		<span class="hljs-keyword">if</span> (mutation) {<font></font>
			cArr2[i] = rnd.nextBoolean() ? <span class="hljs-string">'1'</span> : <span class="hljs-string">'0'</span>;<font></font>
		}<font></font>
	}<font></font>
<font></font>
	chromosomes.add(<span class="hljs-keyword">new</span> String(cArr1));<font></font>
	chromosomes.add(<span class="hljs-keyword">new</span> String(cArr2));<font></font>
			}<font></font>
</code></pre><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã•ã¦ã€ã“ã“ã«ã‚ãªãŸã®ãŸã‚ã®å¥‡è·¡ãŒã‚ã‚Šã¾ã™ï¼š</font></font></b><div class="spoiler_text">Target value: 40<br>
Stock: [34, 10, 32, 32, 33, 41, 44, 4, 28, 23, 22, 28, 29, 14, 28, 15, 38, 49, 30, 24, 18, 9, 15, 8, 17, 9, 2, 7, 30, 29, 29, 2, 28, 23, 19, 4, 15, 30, 38, 3, 14, 21, 43, 50, 29, 14, 17, 12, 25, 15, 23, 28, 47, 38, 29, 7, 36, 45, 25, 6, 25, 11, 10, 1, 19, 37, 24, 27, 50, 12, 1, 1, 44, 22, 48, 13, 46, 49, 11, 33, 29, 4, 19, 33, 12, 3, 47, 27, 26, 45, 40, 37, 21, 2, 8, 41, 5, 1, 9, 5]<br>
Generation 0; Best / last parent / worst: 705 / 991 / 1580<br>
Generation 1; Best / last parent / worst: 576 / 846 / 1175<br>
Generation 2; Best / last parent / worst: 451 / 722 / 1108<br>
Generation 3; Best / last parent / worst: 0 / 613 / 904<br>
Solution found<br>
storage bin 7: +4 = 4<br>
storage bin 10: +22 = 26<br>
storage bin 13: +14 = 40<br>
</div></div><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãã—ã¦ã€ã“ã‚ŒãŒã‚³ãƒ¼ãƒ‰å…¨ä½“ã§ã™</font></font></b><div class="spoiler_text"><pre><code class="java hljs"><span class="hljs-keyword">package</span> ypk;<font></font>
<font></font>
<span class="hljs-keyword">import</span> java.io.IOException;
<span class="hljs-keyword">import</span> java.io.StringWriter;
<span class="hljs-keyword">import</span> java.util.AbstractMap.SimpleEntry;
<span class="hljs-keyword">import</span> java.util.stream.Collectors;
<span class="hljs-keyword">import</span> java.util.ArrayList;
<span class="hljs-keyword">import</span> java.util.Arrays;
<span class="hljs-keyword">import</span> java.util.List;
<span class="hljs-keyword">import</span> java.util.Random;<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">YPK</span> </span>{
	<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> generation_size = <span class="hljs-number">1000</span>;
	<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> best_size = <span class="hljs-number">200</span>;
	<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> cnt_bins = <span class="hljs-number">100</span>;
	<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> max_stock = <span class="hljs-number">50</span>;
	<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">double</span> exchange_rate = .<span class="hljs-number">2</span>;
	<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">double</span> mutation_rate = .<span class="hljs-number">01</span>;
	<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Random rnd = <span class="hljs-keyword">new</span> Random();
	<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> target_qty = rnd.nextInt(cnt_bins * max_stock / <span class="hljs-number">5</span>); <span class="hljs-comment">// some quantity</span>
	<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> List&lt;String&gt; chromosomes = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;();
	<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> maxGenerationCnt = <span class="hljs-number">20</span>;<font></font>
<font></font>
	<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span>[] stock = <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[cnt_bins];<font></font>
<font></font>
	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException </span>{<font></font>
		System.out.println(<span class="hljs-string">"Target value: "</span> + target_qty);<font></font>
<font></font>
		<span class="hljs-comment">// create sample stock</span>
		stock = <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[cnt_bins];
		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; cnt_bins; i++) {<font></font>
			stock[i] = rnd.nextInt(max_stock) + <span class="hljs-number">1</span>;<font></font>
		}<font></font>
<font></font>
		System.out.println(<span class="hljs-string">"Stock: "</span> + Arrays.toString(stock));<font></font>
<font></font>
		<span class="hljs-comment">// create 1st generation</span>
		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; generation_size; i++) {<font></font>
			StringWriter sw = <span class="hljs-keyword">new</span> StringWriter();
			<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; cnt_bins; j++) {
				<span class="hljs-comment">// take stock from this bin?</span>
				sw.append(rnd.nextBoolean() ? <span class="hljs-string">"1"</span> : <span class="hljs-string">"0"</span>);<font></font>
			}<font></font>
			chromosomes.add(sw.toString());<font></font>
			sw.close();<font></font>
		}<font></font>
<font></font>
		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> generationNo = <span class="hljs-number">0</span>; generationNo &lt; maxGenerationCnt; generationNo++) {<font></font>
<font></font>
			<span class="hljs-comment">// evaluate</span>
			List&lt;SimpleEntry&lt;String, Integer&gt;&gt; evaluated = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;();
			<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; chromosomes.size(); i++) {<font></font>
				evaluated.add(<font></font>
						<span class="hljs-keyword">new</span> SimpleEntry&lt;String, Integer&gt;(chromosomes.get(i), benchmark(chromosomes.get(i), <span class="hljs-keyword">false</span>)));<font></font>
			}<font></font>
<font></font>
			<span class="hljs-comment">// sort</span><font></font>
			evaluated = evaluated.stream().sorted((e1, e2) -&gt; Integer.compare(e1.getValue(), e2.getValue()))<font></font>
					.collect(Collectors.toList());<font></font>
<font></font>
			System.out.println(<span class="hljs-string">"Generation "</span> + generationNo + <span class="hljs-string">"; Best / last parent / worst: "</span>
					+ evaluated.get(<span class="hljs-number">0</span>).getValue() + <span class="hljs-string">" / "</span> + evaluated.get(best_size).getValue() + <span class="hljs-string">" / "</span>
					+ evaluated.get(evaluated.size() - <span class="hljs-number">1</span>).getValue());<font></font>
<font></font>
			<span class="hljs-keyword">if</span> (evaluated.get(<span class="hljs-number">0</span>).getValue() == <span class="hljs-number">0</span>) {<font></font>
				System.out.println(<span class="hljs-string">"Solution found"</span>);<font></font>
				benchmark(evaluated.get(<span class="hljs-number">0</span>).getKey(), <span class="hljs-keyword">true</span>);<font></font>
				System.exit(<span class="hljs-number">0</span>);<font></font>
			}<font></font>
<font></font>
			<span class="hljs-comment">// leave only the best</span>
			evaluated = evaluated.subList(<span class="hljs-number">0</span>, best_size);<font></font>
<font></font>
			<span class="hljs-comment">// replication</span><font></font>
			List&lt;String&gt; parents = evaluated.stream().map(e -&gt; e.getKey()).collect(Collectors.toList());<font></font>
			chromosomes.clear();<font></font>
<font></font>
			<span class="hljs-keyword">while</span> (chromosomes.size() &lt; generation_size) {
				<span class="hljs-keyword">int</span> parent1 = rnd.nextInt(evaluated.size());
				<span class="hljs-keyword">int</span> parent2 = rnd.nextInt(evaluated.size());
				<span class="hljs-keyword">char</span>[] cArr1 = parents.get(parent1).toCharArray();
				<span class="hljs-keyword">char</span>[] cArr2 = parents.get(parent2).toCharArray();<font></font>
<font></font>
				<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; cnt_bins; i++) {
					<span class="hljs-keyword">boolean</span> exchange = rnd.nextDouble() &lt; exchange_rate;
					<span class="hljs-keyword">if</span> (exchange) {
						<span class="hljs-keyword">char</span> c1 = cArr1[i];
						<span class="hljs-keyword">char</span> c2 = cArr2[i];<font></font>
<font></font>
						<span class="hljs-comment">// exchange both values</span><font></font>
						cArr1[i] = c2;<font></font>
						cArr2[i] = c1;<font></font>
					}<font></font>
<font></font>
					<span class="hljs-comment">// mutation</span>
					<span class="hljs-keyword">boolean</span> mutation = rnd.nextDouble() &lt; mutation_rate;
					<span class="hljs-keyword">if</span> (mutation) {<font></font>
						cArr1[i] = rnd.nextBoolean() ? <span class="hljs-string">'1'</span> : <span class="hljs-string">'0'</span>;<font></font>
					}<font></font>
<font></font>
					mutation = rnd.nextDouble() &lt; mutation_rate;<font></font>
					<span class="hljs-keyword">if</span> (mutation) {<font></font>
						cArr2[i] = rnd.nextBoolean() ? <span class="hljs-string">'1'</span> : <span class="hljs-string">'0'</span>;<font></font>
					}<font></font>
				}<font></font>
<font></font>
				chromosomes.add(<span class="hljs-keyword">new</span> String(cArr1));<font></font>
				chromosomes.add(<span class="hljs-keyword">new</span> String(cArr2));<font></font>
			}<font></font>
		}<font></font>
		System.out.println(<span class="hljs-string">"No solution found after "</span> + maxGenerationCnt + <span class="hljs-string">" iterations"</span>);<font></font>
	}<font></font>
<font></font>
	<span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> <span class="hljs-title">benchmark</span><span class="hljs-params">(String chromosome, <span class="hljs-keyword">boolean</span> verbose)</span> </span>{
		<span class="hljs-keyword">int</span> sum = <span class="hljs-number">0</span>;
		<span class="hljs-keyword">char</span>[] cArr = chromosome.toCharArray();<font></font>
<font></font>
		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; cnt_bins; i++) {
			<span class="hljs-keyword">if</span> (cArr[i] == <span class="hljs-string">'1'</span>) {<font></font>
				sum += stock[i];<font></font>
				<span class="hljs-keyword">if</span> (verbose)<font></font>
					System.out.println(<span class="hljs-string">"storage bin "</span> + i + <span class="hljs-string">":\t+"</span> + stock[i] + <span class="hljs-string">"\t= "</span> + sum);<font></font>
<font></font>
			}<font></font>
			<span class="hljs-keyword">if</span> (sum == target_qty) {
				<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<font></font>
			}<font></font>
		}<font></font>
<font></font>
		<span class="hljs-keyword">return</span> Math.abs(target_qty - sum);<font></font>
	}<font></font>
<font></font>
}</code></pre><br>
</div></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãã—ã¦æœ€å¾Œã«ï¼šãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã‚’ã„ã˜ãã‚Šã¾ã‚ã™å ´åˆ-çªç„¶å¤‰ç•°ãŒå¤šã™ãã‚‹ã€äººå£ã‚µã‚¤ã‚ºãŒå°ã•ã™ãã‚‹ãªã© </font><font style="vertical-align: inherit;">-åœæ»ã™ã‚‹ã‹ã€ã™ã¹ã¦ã®æœ€æ‚ªã®çµæœãŒå‡ºã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã¡ãªã¿ã«ã€ã“ã®ã‚¿ã‚¹ã‚¯ã¯ã€å¤šãã®å ´åˆã€ã™ã§ã«ãƒ©ãƒ³ãƒ€ãƒ ã«è§£æ±ºã•ã‚Œã¦ãŠã‚Šã€æ¬¡ä¸–ä»£ã¯å¿…è¦ã‚ã‚Šã¾ã›ã‚“ã€‚ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã®å¯¿å‘½ã‚’è¤‡é›‘ã«ã—ãŸã„å ´åˆã¯ã€ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã‹ã‚‰ã“ã®ãƒªã‚¿ãƒ¼ãƒ³ã‚’å‰Šé™¤ã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">if</span> (sum == target_qty) {
	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<font></font>
}</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã‚Œã¯ã‚¿ã‚¹ã‚¯ã‚’è¤‡é›‘ã«ã—ã€ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã‚’å°‘ã—è‹¦ã—ã‚ã¾ã™... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãŒã‚“ã°ã£ã¦ã€</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
m_OO_m</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja465783/index.html">ãƒ­ã‚·ã‚¢ã®ã‚²ãƒ¼ãƒ é–‹ç™ºè€…ã€ç„¡æ„å‘³ã§ç„¡æ…ˆæ‚²</a></li>
<li><a href="../ja465787/index.html">ãƒ¤ã‚®ãŒå¤§å¥½ã</a></li>
<li><a href="../ja465789/index.html">Cisco 200-125 CCNA v3.0ã®ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã€‚29æ—¥ç›®ã€‚PATã¨NAT</a></li>
<li><a href="../ja465791/index.html">å°å£²æ¥­è€…ã®è„†å¼±æ€§-ãƒªã‚¯ã‚¨ã‚¹ãƒˆã§OTPã‚’å—ä¿¡ã§ãã‚‹3ã¤ã®ã‚±ãƒ¼ã‚¹</a></li>
<li><a href="../ja465795/index.html">å…ˆé€±ã®ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®ä¸–ç•Œã‹ã‚‰ã®æ–°é®®ãªé£Ÿæã®ãƒ€ã‚¤ã‚¸ã‚§ã‚¹ãƒˆç¬¬378å·ï¼ˆ2019å¹´8æœˆ26æ—¥-9æœˆ1æ—¥ï¼‰</a></li>
<li><a href="../ja465801/index.html">ãƒ•ãƒ¼ãƒ‰ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ€ã‚¤ã‚¸ã‚§ã‚¹ãƒˆ2019å¹´8æœˆ</a></li>
<li><a href="../ja465803/index.html">Goãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’æ§‹ç¯‰ã™ã‚‹ãŸã‚ã®Mavenã®æ–¹æ³•</a></li>
<li><a href="../ja465805/index.html">Gigatron-ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼ãªã—ã®è‡ªå®¶è£½ãƒã‚¤ã‚¯ãƒ­ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼</a></li>
<li><a href="../ja465807/index.html">äººæ°—ã®JavaScriptãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒç«¯æœ«ã«åºƒå‘Šã‚’è¡¨ç¤ºã—å§‹ã‚ãŸçµŒç·¯</a></li>
<li><a href="../ja465809/index.html">æ™‚æœŸå°šæ—©ã®æœ€é©åŒ–ã®ç½ ã«é™¥ã‚‰ãªã„ã§ãã ã•ã„</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>