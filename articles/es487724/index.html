<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üí™üèº üéÆ üßëüèº‚Äçü§ù‚Äçüßëüèª BlazingPizza: aplicaci√≥n Blazor de principio a fin. Parte 2. Agregar un componente üõ°Ô∏è üë∫ üßùüèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="¬°Hola todos! Para todos aquellos que quieran aprender un poco m√°s sobre Blazor. Hoy continuaremos creando nuestro sitio para una pizzer√≠a, es decir, c...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>BlazingPizza: aplicaci√≥n Blazor de principio a fin. Parte 2. Agregar un componente</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/487724/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬°Hola todos! </font><font style="vertical-align: inherit;">Para todos aquellos que quieran aprender un poco m√°s sobre Blazor. </font><font style="vertical-align: inherit;">Hoy continuaremos creando nuestro sitio para una pizzer√≠a, es decir, crearemos un controlador de API web e intentaremos mostrar los datos que provienen de √©l en el componente Blazor. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como nuestra aplicaci√≥n es sobre pizza, ser√≠a l√≥gico agregar inmediatamente una clase que represente nuestro producto principal. </font><b><font style="vertical-align: inherit;">Llame a</font></b></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
su </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BasePizza</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y a√±adirlo a la </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BlazingPizza.DomainModels</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> proyecto </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">En mi opini√≥n, agregar una nueva clase es muy bueno implementado en Rider, aparece un cuadro de di√°logo sin bloqueo, ingresamos el nombre de la clase y luego podemos elegir lo que necesitamos crear:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/q-/pl/95/q-pl95jcw5o2sdhgzzduaxzotke.png"><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Despu√©s de eso, aparecer√° un cuadro de di√°logo que le pedir√° que agregue el archivo a git, le responderemos afirmativamente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Contenido de clase:</font></font><br>
<br>
<b><pre><code class="cs hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">BasePizza</span><font></font>
{<font></font>
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> Id { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }<font></font>
    <font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">string</span> Name { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }<font></font>
    <font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">decimal</span> BasePrice { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }<font></font>
    <font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">string</span> Description { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }<font></font>
    <font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">string</span> ImageUrl { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }<font></font>
}<font></font>
</code></pre></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es una plantilla para alg√∫n tipo de pizza, luego se puede configurar a nuestro gusto, cambiar el tama√±o, agregar ingredientes y m√°s. El nombre de los campos me parece hablar por s√≠ mismo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En el proyecto </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BlazingPizza.DomainPizza</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , tendremos clases que representan el dominio comercial de nuestra aplicaci√≥n. Es decir, no deben ni sabr√°n nada sobre c√≥mo se almacenan nuestros datos o c√≥mo se muestran. Solo informaci√≥n sobre el objeto comercial, es decir, pizza. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A continuaci√≥n, necesitamos algo para llevar estos datos de alguna manera al cliente. Para hacer esto, vaya al proyecto </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BlazingPizza.Server</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font><font style="vertical-align: inherit;">agregue el </font><b><font style="vertical-align: inherit;">PizzasController</font></b><font style="vertical-align: inherit;"> a la carpeta </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Controllers</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br>
<b><pre><code class="cs hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">PizzasController</span> : <span class="hljs-title">Controller</span><font></font>
{<font></font>
    <span class="hljs-comment">// GET</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> IActionResult <span class="hljs-title">Index</span>(<span class="hljs-params"></span>)</span><font></font>
    {<font></font>
        <span class="hljs-keyword">return</span> View();<font></font>
    }<font></font>
}<font></font>
</code></pre></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Necesitamos un m√©todo que nos proporcione una lista de todos los conceptos b√°sicos para la pizza. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adem√°s de agregar un m√©todo, debe realizar algunos pasos simples:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Marquemos</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> el controlador con el atributo </font><b><font style="vertical-align: inherit;">[ApiController]</font></b><font style="vertical-align: inherit;"> que ofrece algunas ventajas, en particular, el retorno autom√°tico del c√≥digo 400 si el modelo no pas√≥ la validaci√≥n, sin √©l es un </font><font style="vertical-align: inherit;">controlador </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MVC</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> normal </font><font style="vertical-align: inherit;">que le da a View.</font></font></li>
<li>  <b>[Route(¬´pizzas¬ª)]</b>.     Attribute Routing,        ,      <b>Conventional Routing</b>,    .   ‚Äúpizzas‚Äù   ?        <b>http{s}://hostName/pizzas/{}</b><br>
      .</li>
<li>    <b>Controller</b>  <b>ControllerBase</b>,      MVC .</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ok, por ejemplo, hicimos una </font><font style="vertical-align: inherit;">solicitud </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">localhost</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : 5000 / pizzas con la esperanza de obtener una lista de todas las pizzas y no pas√≥ nada. Nuevamente, el acuerdo est√° en los acuerdos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si se trataba de una </font><font style="vertical-align: inherit;">solicitud </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Get</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , entonces tenemos que tener un m√©todo ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Acci√≥n</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en t√©rminos de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Asp.Net</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) marcado con el atributo </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[HttpGet]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , o, lo que es m√°s obvio, ¬°solo un m√©todo llamado </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Get</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y eso es todo! Todo lo dem√°s .Net y la reflexi√≥n har√°n por nosotros. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y cambie el nombre del √∫nico m√©todo de √≠ndice para obtener. </font><b><font style="vertical-align: inherit;">Cambie el</font></b><font style="vertical-align: inherit;"> tipo del valor de retorno a </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IEnumerable &lt;BasePizza&gt;</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, no olvide agregar el uso necesario. </font><font style="vertical-align: inherit;">Bueno, inserte temporalmente un c√≥digo auxiliar que el m√©todo no est√° implementado para compilar de alguna manera el c√≥digo y aseg√∫rese de que no haya errores. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como resultado, PizzasController.cs se ver√° as√≠:</font></font><br>
<br>
<b><pre><code class="cs hljs"><span class="hljs-keyword">using</span> System;
<span class="hljs-keyword">using</span> System.Collections.Generic;
<span class="hljs-keyword">using</span> Microsoft.AspNetCore.Mvc;
<span class="hljs-keyword">using</span> BlazingPizza.DomainModels;<font></font>
<font></font>
<span class="hljs-keyword">namespace</span> <span class="hljs-title">BlazingPizza.Server.Controllers</span><font></font>
{<font></font>
    [<span class="hljs-meta">ApiController</span>]<font></font>
    [<span class="hljs-meta">Route(<span class="hljs-meta-string">"pizzas"</span>)</span>]
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">PizzasController</span> : <span class="hljs-title">ControllerBase</span><font></font>
    {<font></font>
        <span class="hljs-comment">// GET</span>
        <span class="hljs-function"><span class="hljs-keyword">public</span> IEnumerable&lt;BasePizza&gt;  <span class="hljs-title">Get</span>(<span class="hljs-params"></span>)</span><font></font>
        {<font></font>
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> NotImplementedException();<font></font>
        }<font></font>
    }<font></font>
}<font></font>
</code></pre></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En este momento, inicie la aplicaci√≥n de depuraci√≥n, un bot√≥n con un error verde. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/nl/p6/pp/nlp6ppjxbnbnhjiwxb1_qbtgwsw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
y aseg√∫rese de que las rutas est√©n configuradas correctamente. </font><font style="vertical-align: inherit;">El puerto en el que necesita realizar solicitudes se puede ver en la pesta√±a </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Consola</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<br>
<img src="https://habrastorage.org/webt/yp/i0/hp/ypi0hpgkoc9cv68k8zvi9zsthnu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
en nuestro caso, es 5000, si realiza una solicitud a lo largo de la </font><font style="vertical-align: inherit;">ruta </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">localhost</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : 5000 / pizzas, entramos en la acci√≥n Obtener y capturamos una excepci√≥n NotImplementedException. </font><font style="vertical-align: inherit;">Es decir, aunque nuestro controlador no hace nada √∫til, simplemente acepta solicitudes y falla con un error.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Devolvemos datos del controlador</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es hora de que nuestro c√≥digo haga algo √∫til, como devolver pizzas. </font><font style="vertical-align: inherit;">Hasta ahora, no hemos implementado una capa de datos, por lo que solo devolvemos un par de pizzas de nuestra </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">acci√≥n</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Para hacer esto, devuelva una matriz que consta de dos objetos </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BasePizza</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">El m√©todo </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Get</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> se ver√° como el siguiente ejemplo:</font></font><br>
<br>
<b><pre><code class="cs hljs"><span class="hljs-comment">// GET</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> IEnumerable&lt;BasePizza&gt;  <span class="hljs-title">Get</span>(<span class="hljs-params"></span>)</span><font></font>
{<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span>[]<font></font>
    {<font></font>
        <span class="hljs-keyword">new</span> BasePizza()<font></font>
        {<font></font>
            BasePrice = <span class="hljs-number">500</span>,<font></font>
            Description = <span class="hljs-string">"     "</span>,<font></font>
            Id = <span class="hljs-number">0</span>,<font></font>
            ImageUrl = <span class="hljs-string">"img/pizzas/pepperoni.jpg"</span><font></font>
        },<font></font>
        <span class="hljs-keyword">new</span> BasePizza()<font></font>
        {<font></font>
            BasePrice = <span class="hljs-number">400</span>,<font></font>
            Description = <span class="hljs-string">"   "</span>,<font></font>
            Id = <span class="hljs-number">1</span>,<font></font>
            ImageUrl = <span class="hljs-string">"img/pizzas/meaty.jpg"</span><font></font>
        },<font></font>
    };<font></font>
}<font></font>
</code></pre></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El resultado de la solicitud en el navegador ser√° as√≠:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/-c/ep/f0/-cepf0dkn90kagmz-gul-dib42u.png"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configurar la p√°gina de inicio</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La parte visible de la aplicaci√≥n est√° en los componentes </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.razor del</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> proyecto </font><b><font style="vertical-align: inherit;">BlazingPizza.Client</font></b><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Estamos interesados ‚Äã‚Äãen </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Index.razor</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en la carpeta </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P√°ginas</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , √°bralo y elimine todo el contenido que heredamos del proyecto predeterminado. </font><font style="vertical-align: inherit;">Y comencemos a agregar lo que realmente necesitamos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1. A√±adir:</font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p√°gina</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"/"</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Esta directiva se usa para configurar el enrutamiento del cliente y dice que este control se cargar√° de forma predeterminada, es decir, si solo vamos a la direcci√≥n de la aplicaci√≥n </font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">localhost</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : 5000 /</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sin / Index, / Pizzas u otra cosa. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2)</font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">inyectar</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HttpClient HttpClient</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Usando la Directiva</font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">inyectar</font></font></a> </b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">agregue un servicio como HttpClient a nuestra p√°gina y llame al objeto </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HttpClient</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tambi√©n </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Blazor ya configur√≥ </font><font style="vertical-align: inherit;">un objeto de tipo </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HttpClient</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para nosotros, por lo que podemos hacer las solicitudes que necesitamos. </font><font style="vertical-align: inherit;">Este tipo de inyecci√≥n se llama </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">inyecci√≥n de propiedad</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , no se admite una implementaci√≥n m√°s familiar a trav√©s del constructor, y como dicen los desarrolladores, es poco probable que aparezca alguna vez, pero ¬øse necesita aqu√≠? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3. Agregar una directiva</font></font><br>
<br>
<b><pre><code class="cs hljs"> @code{<font></font>
<font></font>
 }<font></font>
</code></pre></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es espec√≠ficamente necesario para alojar el c√≥digo C # del cliente, el mismo que reemplaza a JavaScript. </font><font style="vertical-align: inherit;">Dentro de este bloque colocamos una colecci√≥n de objetos de tipo </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BasePizzaViewModel</font></font></b><br>
<br>
<b><pre><code class="cs hljs">IEnumerable&lt;BasePizzaViewModel&gt; PizzaViewModels;</code></pre></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
4. Como ya entendi√≥, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BasePizzaViewModel</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> no existe, es hora de crearlo, este modelo ser√° completamente an√°logo al modelo de dominio </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BasePizza</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font><font style="vertical-align: inherit;">excepto que tendr√° el cuerpo de expresi√≥n </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GetFormattedBasePrice que</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> devuelve el precio de la pizza base en el formato que necesitamos. </font><font style="vertical-align: inherit;">El modelo se agregar√° a la ra√≠z del proyecto </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BlazingPizza.ViewModels</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> archivo </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BasePizzaViewModel.cs</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<b><pre><code class="cs hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">BasePizzaViewModel</span><font></font>
{<font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> Id { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }<font></font>
    <font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">string</span> Name { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }<font></font>
    <font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">decimal</span> BasePrice { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }<font></font>
    <font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">string</span> Description { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }<font></font>
    <font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">string</span> ImageUrl { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }<font></font>
    <font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">string</span> <span class="hljs-title">GetFormattedBasePrice</span>(<span class="hljs-params"></span>)</span> =&gt; BasePrice.ToString(<span class="hljs-string">"0.00"</span>);<font></font>
}<font></font>
</code></pre></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
5. Volver a nuestro </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Index.razor</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y bloquear</font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c√≥digo</font></font></a></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, agregue un c√≥digo para obtener todas las pizzas disponibles. </font><font style="vertical-align: inherit;">Colocaremos este c√≥digo en el </font><font style="vertical-align: inherit;">m√©todo </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">as√≠ncrono </font></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OnInitializedAsync</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<b><pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">override</span> Task <span class="hljs-title">OnInitializedAsync</span>(<span class="hljs-params"></span>)</span> {<font></font>
	<font></font>
}<font></font>
</code></pre></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este m√©todo se llama despu√©s de que el componente se inicializa y en el momento de la llamada, todos sus par√°metros ya est√°n inicializados por el componente principal. En √©l, puede realizar algunas operaciones asincr√≥nicas, despu√©s de lo cual se requiere una actualizaci√≥n de estado. M√°s adelante hablar√© sobre esto con m√°s detalle. El m√©todo se llama solo una vez cuando se crea el componente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Finalmente, agregue las pizzas para obtener dentro de este m√©todo:</font></font><br>
<br>
<b><pre><code class="cs hljs"><span class="hljs-keyword">var</span> queryResult = <span class="hljs-keyword">await</span> HttpClient.GetJsonAsync&lt;IEnumerable&lt;BasePizza&gt;&gt;(<span class="hljs-string">"pizzas"</span>);
</code></pre></b><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pizzas</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : una ruta relativa que se agrega a la base y que </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Blazor</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ya nos ha establecido </font><font style="vertical-align: inherit;">. Como se deduce de la firma del m√©todo, la solicitud de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">obtenci√≥n</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> solicita los datos y luego el cliente intenta serializarlos en </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IEnumerable &lt;BasePizza&gt;</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
6. Dado que recibimos datos del tipo incorrecto que queremos mostrar en el componente, necesitamos obtener objetos del tipo </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BasePizzaViewModel.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Para esto, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Linq</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> usar√° </font><font style="vertical-align: inherit;">su m√©todo Select para convertir objetos de la colecci√≥n entrante en objetos del tipo que planeamos usar. Agregue el m√©todo </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OnInitializedAsync</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> al final </font><font style="vertical-align: inherit;">:</font></font><br>
<br>
<b><pre><code class="cs hljs">PizzaViewModels = queryResult.Select(i =&gt; <span class="hljs-keyword">new</span> BasePizzaViewModel()<font></font>
{<font></font>
    BasePrice = i.BasePrice,<font></font>
    Description = i.Description,<font></font>
    Id = i.Id,<font></font>
    ImageUrl = i.ImageUrl,<font></font>
    Name = i.Name<font></font>
});<font></font>
</code></pre></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
M√°s adelante mostrar√© c√≥mo hacerlo sin escribir este c√≥digo de plantilla, pero por ahora, dej√©moslo como est√°. </font><font style="vertical-align: inherit;">Parece que tenemos todo lo que necesitamos y podemos proceder a mostrar los datos recibidos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
7. Encima de la directiva del </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c√≥digo</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font><font style="vertical-align: inherit;">agregue el </font><font style="vertical-align: inherit;">c√≥digo </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">html</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , dentro del cual estar√°n las pizzas mismas:</font></font><br>
<br>
<b><pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"main"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"pizza-cards"</span>&gt;</span><font></font>
<font></font>
    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como puede ver, la lista ul con el nombre de la clase parlante "tarjetas de pizza" est√° vac√≠a hasta ahora, solucionaremos este descuido:</font></font><br>
<br>
<b><pre><code class="cs hljs">@foreach (<span class="hljs-keyword">var</span> pizza <span class="hljs-keyword">in</span> PizzaViewModels)<font></font>
{<font></font>
    &lt;li style=<span class="hljs-string">"background-image: url('@pizza.ImageUrl')"</span>&gt;<font></font>
        &lt;div <span class="hljs-keyword">class</span>=<span class="hljs-string">"pizza-info"</span>&gt;<font></font>
            &lt;span <span class="hljs-keyword">class</span>=<span class="hljs-string">"title"</span>&gt;@pizza.Name&lt;/span&gt;<font></font>
                @pizza.Description<font></font>
            &lt;span <span class="hljs-keyword">class</span>=<span class="hljs-string">"price"</span>&gt;@pizza.GetFormattedBasePrice()&lt;/span&gt;                    <font></font>
        &lt;/div&gt;<font></font>
    &lt;/li&gt;<font></font>
}<font></font>
</code></pre></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Toda la diversi√≥n aqu√≠ est√° dentro del circuito. </font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para cada</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(var {item} en {items})</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Este es un </font><font style="vertical-align: inherit;">marcado </font><font style="vertical-align: inherit;">t√≠pico de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Razor</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> que nos permite usar el poder de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C #</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en la misma p√°gina que el </font><font style="vertical-align: inherit;">c√≥digo </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">html</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> normal </font><font style="vertical-align: inherit;">. Lo principal es poner el s√≠mbolo </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"@"</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> delante de las palabras clave y variables del lenguaje </font><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dentro del bucle, simplemente accedemos a las propiedades del objeto </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pizza</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al final, mostramos el precio base formateado de la pizza usando el m√©todo </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GetFormattedBasePrice</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Esto, por cierto, es la diferencia entre el modelo de dominio </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BasePizza</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y su </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ViewModel</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> representaciones, ya que este m√©todo contiene la l√≥gica m√°s simple para mostrar el precio en el formato requerido, que no necesitamos en el nivel de servicio, donde de alguna manera manipulamos el precio, pero no lo mostramos en ning√∫n lado. </font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mostramos los datos recibidos en el navegador.</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tenemos todos los datos necesarios para mostrar. Es hora de lanzar nuestra aplicaci√≥n y asegurarnos de que todo funcione. Hacemos clic en el bot√≥n </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Depurar</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (en </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rider,</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> el bot√≥n </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ejecutar</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> solo inicia la aplicaci√≥n sin capacidad de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">depuraci√≥n</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y ooh-ho, nada funciona tampoco :) Abra la consola ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F12</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) y vea que est√° todo rojo, algo obviamente sali√≥ mal. </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Blazor</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> no </font><b><font style="vertical-align: inherit;">es</font></b><font style="vertical-align: inherit;"> tan desesperado en la depuraci√≥n y toda la </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pila de llamadas</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> se puede ver en la </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Consola</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , y en mi opini√≥n esto se hace a√∫n mejor que en el mismo </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Angular</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . No es necesario adivinar por signos indirectos d√≥nde ocurri√≥ el error, solo mire la </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pila de llamadas</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/g-/4f/m5/g-4fm5pnokogbwv_c7vy3ru-5zk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">produjo un</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mensaje </font><b><font style="vertical-align: inherit;">NullReferenceException</font></b><font style="vertical-align: inherit;"> al representar la p√°gina </font><font style="vertical-align: inherit;">. ¬øC√≥mo podr√≠a suceder esto? Porque inicializamos la </font><font style="vertical-align: inherit;">√∫nica colecci√≥n que usamos </font><font style="vertical-align: inherit;">en el m√©todo </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OnInitializedAsync</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para comprender un poco mejor, inserte la salida de tiempo en los lugares correctos para ver el marco temporal de lo que sucedi√≥:</font></font><br>
<br>
<b><ol>
<li> <pre><code class="cs hljs">Console.WriteLine(<span class="hljs-string">$"Time from markup block: <span class="hljs-subst">{DateTime.Now.ToString()}</span>:<span class="hljs-subst">{DateTime.Now.Millisecond.ToString()}</span>"</span>);</code></pre></li>
<li> <pre><code class="cs hljs">Console.WriteLine(<span class="hljs-string">$"Time from cycle: <span class="hljs-subst">{DateTime.Now.ToString()}</span>:<span class="hljs-subst">{DateTime.Now.Millisecond.ToString()}</span>"</span>);</code></pre></li>
<li> <pre><code class="cs hljs">Console.WriteLine(<span class="hljs-string">$"Time from code block, before await: <span class="hljs-subst">{DateTime.Now.ToString()}</span>:<span class="hljs-subst">{DateTime.Now.Millisecond.ToString()}</span>"</span>);</code></pre></li>
<li> <pre><code class="cs hljs">Console.WriteLine(<span class="hljs-string">$"Time from code block, after await: <span class="hljs-subst">{DateTime.Now.ToString()}</span>:<span class="hljs-subst">{DateTime.Now.Millisecond.ToString()}</span>"</span>); </code></pre></li>
</ol></b><br>
<img src="https://habrastorage.org/webt/oi/va/ch/oivachjfzw1mfopljcqmxwhurvy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En la captura de pantalla a continuaci√≥n, en la consola, lo que sucedi√≥ en el momento de la representaci√≥n de la p√°gina. Se puede ver que la p√°gina comienza a renderizarse incluso antes de la finalizaci√≥n de los m√©todos asincr√≥nicos. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En el primer paso, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PizzaViewModels</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> a√∫n no se hab√≠a inicializado y </font><b><font style="vertical-align: inherit;">detectamos</font></b><font style="vertical-align: inherit;"> una </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NullReferenceException</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Luego, como se esperaba despu√©s de que la </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tarea</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> devolvi√≥ </font><font style="vertical-align: inherit;">el m√©todo </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OnInitializedAsync</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> al </font><font style="vertical-align: inherit;">estado </font><b><font style="vertical-align: inherit;">RanToCompletion</font></b><font style="vertical-align: inherit;"> , el </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">control</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> fue redise√±ado. Lo que es notable, durante la segunda pasada, entramos en un ciclo, como se puede ver en los mensajes en la consola. Pero en este punto, la </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">interfaz de usuario</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ya no se actualiza y no vemos ning√∫n cambio visible.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ki/_r/yx/ki_ryxdxd-8xizlytgtgtb5lhpk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De hecho, el problema es muy f√°cil de resolver, solo necesita ejecutar una verificaci√≥n </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nula de</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> forma asincr√≥nica antes de ejecutar el ciclo </font><font style="vertical-align: inherit;">, luego no ocurrir√° una excepci√≥n por primera vez y durante la segunda pasada veremos los datos que necesitamos.</font></font><br>
<b><pre><code class="cs hljs">@if (PizzaViewModels != <span class="hljs-literal">null</span>)<font></font>
{<font></font>
    @foreach (<span class="hljs-keyword">var</span> pizza <span class="hljs-keyword">in</span> PizzaViewModels)<font></font>
    {<font></font>
        ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶.. <span class="hljs-comment">//    </span><font></font>
    }<font></font>
}</code></pre><br>
</b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Parece un poco mejor ahora, no hay m√°s mensajes de error en la consola y puede ver la informaci√≥n que nos lleg√≥ del servidor: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ed/sj/zt/edsjztoc2aqa_wibm2mpdwvm2hy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
es mucho mejor, pero no hay suficientes estilos y recursos, en particular im√°genes, reemplace el contenido de la carpeta wwwroot con el contenido de la carpeta "~ / Art√≠culos / Parte2 /BlazingPizza.Client/wwwroot "repositorio (enlace al final del art√≠culo) y ejecute el proyecto nuevamente, mucho mejor. </font><font style="vertical-align: inherit;">Aunque todav√≠a lejos de ser ideal:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/mk/ar/f-/mkarf-kymgsseuioay24uwx0wui.png"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eventos de vida de componentes</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como ya conocimos uno de los eventos de vida del componente OnInitializedAsync, ser√≠a l√≥gico mencionar los otros:</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<th colspan="2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M√©todos de inicializaci√≥n</font></font><br>
</th>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Inicializado</font></font><br>
</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Se invoca cuando el componente ya est√° inicializado y sus par√°metros ya est√°n establecidos por el componente principal. </font><font style="vertical-align: inherit;">Durante la vida de un componente, se llama una vez despu√©s de su inicializaci√≥n.</font></font><br>
</td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OnInitializedAsync</font></font><br>
</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Versi√≥n as√≠ncrona del primer m√©todo, despu√©s de la ejecuci√≥n, el componente se vuelve a representar. </font><font style="vertical-align: inherit;">Por lo tanto, al escribir c√≥digo, debe tener en cuenta que algunos objetos pueden ser nulos.</font></font><br>
</td>
</tr>
<tr>
<th colspan="2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M√©todo ejecutable antes de establecer valores de par√°metros</font></font><br>
</th>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SetParametersAsync</font></font><br>
</td>
<td> ,      .    <b>ParameterView</b>      .<br>
<br>
              <b>[Parameter]</b>  <b>[CascadingParameter]</b>    <b>ParameterView</b>.      ,    .        ,               )<br>
</td>
</tr>
<tr>
<th colspan="2">    <br>
</th>
</tr>
<tr>
<td>OnParametersSet<br>
</td>
<td>           .      ,      <br>
<br>
 ‚Äî             .<br>
 ‚Äî    ,                    .<br>
</td>
</tr>
<tr>
<td>OnParametersSetAsync</td>
<td>  OnParametersSet</td>
</tr>
<tr>
<th colspan="2">    </th>
</tr>
<tr>
<td>OnAfterRender</td>
<td>      .        .     JavaScript     DOM      .    bool  firstRender   true     .<br>
</td>
</tr>
<tr>
<td>OnAfterRenderAsync<br>
</td>
<td>   ,     Task   ,        -          .<br>
</td>
</tr>
<tr>
<th colspan="2">  <br>
</th>
</tr>
<tr>
<td>ShouldRender<br>
</td>
<td>          UI,     -  .      .             .<br>
</td>
</tr>
<tr>
<td>StateHasChanged<br>
</td>
<td>      ,    Blazor        .<br>
</td>
</tr>
<tr>
<td>Dispose<br>
</td>
<td>   ,       UI.  <b>StateHasChanged</b>  <b>Dispose</b>  .   Dispose     <b>IDisposable</b>,       <b>@implements IDisposable</b><br>
</td>
</tr>
</tbody></table></div><br>
<h2></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En esta parte, aprendimos c√≥mo recibir datos del controlador y mostrarlos al usuario. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En la siguiente parte, ordenaremos el dise√±o y agregaremos una capa de acceso a datos para mostrar datos reales en la p√°gina principal. </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Enlace</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> al repositorio de esta serie de art√≠culos. </font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Enlace</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> a la fuente original.</font></font></div>
      
    </div><p class="reference-to-source js-reference-to-source">Source: https://habr.com/ru/post/undefined/</p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es487702/index.html">Una selecci√≥n de art√≠culos sobre aprendizaje autom√°tico: estudios de casos, gu√≠as e investigaciones para enero de 2020</a></li>
<li><a href="../es487704/index.html">C√≥mo creamos informes din√°micos en SSRS 2014</a></li>
<li><a href="../es487706/index.html">Descubrimiento de servicios en sistemas distribuidos utilizando el ejemplo de Consul. Alexander Sigachev</a></li>
<li><a href="../es487716/index.html">Perfecto SAST. Analizador</a></li>
<li><a href="../es487720/index.html">Sobre el corutinismo competitivo (usando la programaci√≥n reactiva como ejemplo)</a></li>
<li><a href="../es487728/index.html">Compilaci√≥n de @Pythonetc, enero de 2020</a></li>
<li><a href="../es487730/index.html">Procesamiento natural del lenguaje. Resultados 2019 y tendencias para 2020</a></li>
<li><a href="../es487734/index.html">Acelerar Entity Framework Core</a></li>
<li><a href="../es487738/index.html">Esquema de animaci√≥n en SCADA</a></li>
<li><a href="../es487740/index.html">Ensamblar un magnet√≥metro port√°til</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>