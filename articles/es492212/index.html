<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>〽️ ♨️ Ⓜ️ Desarrollo frontal de portales en software de código abierto: comparta experiencia 🥫 🤧 🎡</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En la primera parte del artículo sobre cómo creamos soluciones de portal para los empleadores más grandes de Rusia, el backend describió la arquitectu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Desarrollo frontal de portales en software de código abierto: comparta experiencia</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/digdes/blog/492212/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">primera parte del</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> artículo sobre cómo creamos soluciones de portal para los empleadores más grandes de Rusia, el backend describió la arquitectura. </font><font style="vertical-align: inherit;">En este artículo pasaremos a frontend.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/wz/j5/rj/wzj5rj7alebchimas2cqght5dcq.png"><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como ya se señaló en la primera parte, nuestro objetivo principal era desarrollar una plataforma que se pueda escalar y mantener fácilmente. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Reutilización El</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
frente está escrito principalmente en Vue.js, y dado que todo el portal está dividido en portlets, cada uno de ellos es una instancia de Vue separada con su propio Vuex, Vue Router y componentes. Cada una de esas instancias se mueve a su propio repositorio. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dado que el portlet está en su repositorio, surge la pregunta de cómo no escribir mucho del mismo tipo de código para diferentes portlets. Para resolver este problema, transferimos todo lo que se puede reutilizar a un repositorio separado, que luego se conecta a través de .gitmodules. Por el momento hay dos submódulos de este tipo.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Uno almacena funcionalidades comunes: estos son componentes comunes, servicios, constantes, etc. Tenemos este módulo llamado Vue-common. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El segundo submódulo contiene configuraciones para el ensamblaje, almacena configuraciones para webpack, así como cargadores y ayudantes necesarios durante el ensamblaje. Este módulo se llama Vue-bundler. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para la conveniencia de trabajar con la API, los métodos REST también se dividieron en generales y locales. En Vue-common, se introdujeron métodos para obtener una lista de usuarios del portal, métodos de administración, acceso al sistema de archivos del portal y otros. Todos los puntos finales API se movieron a servicios separados que se registraron en el punto de entrada y se conectaron a la instancia de Vue. Entonces podrían usarse en cualquier lugar de la aplicación.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cada servicio individual se registra dentro del complemento. </font><font style="vertical-align: inherit;">Vue tiene una función de uso incorporada para conectar complementos. </font><font style="vertical-align: inherit;">Lea más sobre complementos en Vue </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aquí</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El complemento en sí se inicializa así:</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Api</span> </span>{<font></font>
    constructor () {<font></font>
        <span class="hljs-comment">//  http ,   </span>
        <span class="hljs-keyword">this</span>.instance = instance<font></font>
<font></font>
        <span class="hljs-comment">//     </span>
       <span class="hljs-comment">//     this,      http </span>
        Object.keys(commonServices).forEach(name =&gt; commonServices[name](<span class="hljs-keyword">this</span>))<font></font>
        <font></font>
        <span class="hljs-comment">//     </span>
	requireService.keys().forEach(filename =&gt; requireService(filename).<span class="hljs-keyword">default</span>(<span class="hljs-keyword">this</span>))<font></font>
    }<font></font>
<font></font>
    install () {<font></font>
	Vue.prototype.$api= <span class="hljs-keyword">this</span><font></font>
    }<font></font>
}<font></font>
<font></font>
<span class="hljs-function">export <span class="hljs-keyword">default</span> new <span class="hljs-title">Api</span><span class="hljs-params">()</span>
</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Además de la inicialización:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Se crea la instancia del cliente http. </font><font style="vertical-align: inherit;">Que establece la baseURL de nuestro backend y los encabezados</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">const</span> instance = axios.create({<font></font>
	baseURL: <span class="hljs-string">'/example/api'</span>,<font></font>
	responseType: <span class="hljs-string">'json'</span>,<font></font>
	headers: {<font></font>
		<span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span>,
		<span class="hljs-string">'Cache-Control'</span>: <span class="hljs-string">'no-cache'</span>,
		<span class="hljs-string">'Pragma'</span>: <span class="hljs-string">'no-cache'</span>,<font></font>
	}<font></font>
})<font></font>
                backend   ,   axios.</code></pre><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Se crean servicios que almacenan las solicitudes mismas</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-comment">// api -   http </span>
export <span class="hljs-keyword">default</span> api =&gt; {<font></font>
	api.exampleService= {<font></font>
		exampleGetRequest(params) {<font></font>
			<span class="hljs-keyword">return</span> api.instance.request({<font></font>
				method: <span class="hljs-string">'get'</span>,<font></font>
				url: `example/get`,<font></font>
				params<font></font>
			})<font></font>
		},<font></font>
		examplePostRequest(data) {<font></font>
			<span class="hljs-keyword">return</span> api.instance.request({<font></font>
				method: <span class="hljs-string">'post'</span>,<font></font>
				url: `example/post`,<font></font>
				data<font></font>
			})<font></font>
		},<font></font>
	}<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En vue-common es suficiente crear solo un servicio de este tipo, y ya está registrado para cada portlet en la clase Api</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Los servicios generales y locales están registrados.</font></font><br>
<br>
<pre><code class="java hljs">     <span class="hljs-keyword">const</span> requireService = require.context(<span class="hljs-string">'./service'</span>, <span class="hljs-keyword">false</span>, /.service.js$/)
</code></pre></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En componentes, se usan de manera muy simple. </font><font style="vertical-align: inherit;">Por ejemplo:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
	<span class="hljs-attr">methods</span>: {<font></font>
		someMethod() {<font></font>
    			<span class="hljs-keyword">this</span>.$api.exampleService.exampleGetRequest()<font></font>
}<font></font>
}<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si necesita realizar solicitudes fuera de la aplicación, puede hacer esto:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">//    (@ -     )</span>
<span class="hljs-keyword">import</span> api <span class="hljs-keyword">from</span> ‘@/api’<font></font>
<font></font>
<span class="hljs-comment">//        </span><font></font>
api.exampleService.exampleGetRequest()<font></font>
</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Escalado</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Como se indicó anteriormente, se recopila un paquete separado para cada portal, y cada paquete tiene sus propios puntos de entrada. En cada uno de ellos, se registran componentes y activos, se configura la autorización para el desarrollo local y se conectan los complementos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los componentes se registran globalmente para cada aplicación, tanto local como general. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El registro de componentes se ve así:</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">import</span> _ from “lodash”<font></font>
<font></font>
<span class="hljs-keyword">const</span> requireComponent = require.context(<span class="hljs-string">'@/components'</span>, <span class="hljs-keyword">true</span>, /^[^_].+\.vue$/i)<font></font>
<font></font>
requireComponent.keys().forEach(filename =&gt; {<font></font>
    <span class="hljs-keyword">const</span> componentConfig = requireComponent(filename)<font></font>
<font></font>
    <span class="hljs-comment">// Get PascalCase name of component</span>
    <span class="hljs-keyword">const</span> componentName = _.upperFirst(<font></font>
        _.camelCase(/\/\w+\.vue/.exec(filename)[<span class="hljs-number">0</span>].replace(/^\.\<span class="hljs-comment">//, '').replace(/\.\w+$/, ''))</span><font></font>
    )<font></font>
<font></font>
    Vue.component(componentName, componentConfig.<span class="hljs-keyword">default</span> || componentConfig)<font></font>
})<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A veces se hace necesario que el portal que estamos desarrollando agregue una funcionalidad única, y para esto debe escribir componentes que son únicos para él, o simplemente implementar un componente de una manera diferente. Es suficiente crear un componente en una carpeta separada, por ejemplo / components-portal / * nombre del portal * / *. Vue, y registrarlo en el punto de entrada deseado, agregando require.context no para una carpeta, sino para varias.</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">const</span> contexts = [<font></font>
    require.context(<span class="hljs-string">'@/components'</span>, <span class="hljs-keyword">true</span>, /^[^_].+\.vue$/i),<font></font>
   require.context(<span class="hljs-string">'@/components-portal/example'</span>, <span class="hljs-keyword">true</span>, /^[^_].+\.vue$/i)<font></font>
]<font></font>
<font></font>
contexts.forEach(requireComponent =&gt; {<font></font>
    requireComponent.keys().forEach(filename =&gt; {<font></font>
        <span class="hljs-keyword">const</span> componentConfig = requireComponent(filename)<font></font>
<font></font>
        <span class="hljs-comment">// Get PascalCase name of component</span>
        <span class="hljs-keyword">const</span> componentName = _.upperFirst(<font></font>
            _.camelCase(/\/\w+\.vue/.exec(filename)[<span class="hljs-number">0</span>].replace(/^\.\<span class="hljs-comment">//, '').replace(/\.\w+$/, ''))</span><font></font>
        )<font></font>
<font></font>
        Vue.component(componentName, componentConfig.<span class="hljs-keyword">default</span> || componentConfig)<font></font>
    })<font></font>
})<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si establece el mismo nombre para el componente para un portal específico que el de la biblioteca general de componentes, simplemente se reescribirá como una propiedad del objeto y se usará como un componente para este portal. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los activos como los iconos de svg también se registran globalmente. </font><font style="vertical-align: inherit;">Usamos svg-sprite-loader para crear un sprite a partir de los iconos de svg y luego los usamos a través de &lt;use: xlink: href = "# * icon name *" /&gt; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se registran así:</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">const</span> requireAll = (r) =&gt; r.keys().forEach(r)<font></font>
<font></font>
<span class="hljs-keyword">const</span> requireContext = require.context(<span class="hljs-string">'@/assets/icons/'</span>, <span class="hljs-keyword">true</span>, /\.svg$/)<font></font>
<font></font>
requireAll(requireContext)<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para escalar no solo la funcionalidad, sino también los estilos de los componentes, hemos implementado un mecanismo para cambiar los estilos de un portal en particular. </font><font style="vertical-align: inherit;">Los componentes de un solo archivo especifican estilos en la etiqueta &lt;style&gt; y se usan por defecto. </font><font style="vertical-align: inherit;">Para implementar estilos para un portal específico, debe registrarlos en otra etiqueta</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es492194/index.html">Conoce a un chico que vende dispositivos inalámbricos para robar rápidamente autos de lujo</a></li>
<li><a href="../es492200/index.html">Prueba de automatización: Java o Python?</a></li>
<li><a href="../es492202/index.html">Коронавирус COVID-19: только факты, без паники</a></li>
<li><a href="../es492204/index.html">Cómo evitar errores al crear informes en Power BI y llegar a la construcción de un sistema de carga para big data</a></li>
<li><a href="../es492210/index.html">Descripción técnica de la arquitectura de almacenamiento Infinidat</a></li>
<li><a href="../es492214/index.html">¿Por qué vale la pena hacer reuniones mientras camina? Probado por la ciencia, confirmado por la mafia.</a></li>
<li><a href="../es492216/index.html">Guardar valores en la aplicación .Net en la fase de construcción</a></li>
<li><a href="../es492218/index.html">Reglas de diseño de iconos para recordar</a></li>
<li><a href="../es492220/index.html">5 secretos poco conocidos de los pandas</a></li>
<li><a href="../es492222/index.html">Calificaciones CTFZone 2019: Pollo</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>