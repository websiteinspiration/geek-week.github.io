<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏿‍🤝‍👨🏾 🧝🏾 🚣🏻 公開鍵を使用したSSHによるネットワーク機器での認証 😩 🐄 🧔🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="デフォルトでは、エンジニアはユーザー名とパスワードを使用してネットワーク機器に接続します。Telnetを使用すると、ユーザー資格情報はクリアテキストで送信され、SSH経由で暗号化されます。秘密部分をネットワーク経由で送信しないために、公開鍵認証が使用されます。この認証により、ユーザーの公開鍵が機器で...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>公開鍵を使用したSSHによるネットワーク機器での認証</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/jetinfosystems/blog/490726/"><img src="https://habrastorage.org/webt/ss/yc/-o/ssyc-oz7kbnxgw-o4rmrcit6gsg.jpeg" alt="鍵の束"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
デフォルトでは、エンジニアはユーザー名とパスワードを使用してネットワーク機器に接続します。</font><font style="vertical-align: inherit;">Telnetを使用すると、ユーザー資格情報はクリアテキストで送信され、SSH経由で暗号化されます。</font><font style="vertical-align: inherit;">秘密部分をネットワーク経由で送信しないために、公開鍵認証が使用されます。</font><font style="vertical-align: inherit;">この認証により、ユーザーの公開鍵が機器でユーザーに事前に割り当てられます。</font><font style="vertical-align: inherit;">秘密鍵はネットワーク経由で送信されません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このガイドは、SSHプロトコルを使用してネットワーク機器に接続するときに、認証に公開鍵の使用をすばやく開始するのに役立ちます。</font><font style="vertical-align: inherit;">このガイドは、WindowsとMac OS Xの両方に適用できます。できるだけシンプルでわかりやすいものにしようと思いました。</font><font style="vertical-align: inherit;">それは過負荷ではありませんが、基本的な質問に答えます：</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">公開鍵の入手先と使用方法を教えてください。</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">         ?</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">           ?</a></li>
</ul><br>
<a name="habracut"></a><br>
<h2></h2><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">  RSA-</a><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> RSA-  SecureCRT</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> RSA-  PuTTYgen</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> RSA-   Putty Private Key (PuTTY)   OpenSSH (SecureCRT)</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> RSA-   VanDyke Private Key (SecureCRT)   Putty Private Key (PuTTY)</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">    MAC OS X   </a></li>
</ul></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">    </a><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">Cisco IOS XE, Catalyst (  15.1  ), IOS</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">Cisco ASA</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">   Huawei</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">Huawei USG (6000)</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">Cisco Nexus 9.3</a></li>
</ul></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">      SSH</a><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">SecureCRT</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">PuTTY</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">MAC OS X</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">    SSH  MAC OS X:</a></li>
</ul></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> </a></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
「痛い」トピックも調べました：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenSSH &lt;==&gt; SecureCRT &lt;==&gt; PuTTY間のキー変換。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">機器ごとに異なる公開鍵のペアを使用する。</font><font style="vertical-align: inherit;">1つのキーは適切ですが、実際には適用されません。</font><font style="vertical-align: inherit;">顧客または機器が異なれば、必要な公開鍵のペアも異なります（一部はパスワード付き、他はパスワードなし）。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ネイティブ（ネイティブ）MAC OS Xを使用して公開鍵を操作する。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AnsibleはデフォルトでOpenSSHと公開鍵認証を使用するため、ガイドはネットワーク機器でのAnsibleの使用にも役立つはずです。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
提示された資料の90％は実際の機器でテストされています。</font></font><br>
<br>
<a name="Introduction"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">前書き</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SSHプロトコルの標準パスワード認証（パスワード/キーボード）に加えて、公開鍵認証（RSA）もあります。</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参考のために</font></font></b><div class="spoiler_text">RSA (<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">https://ru.wikipedia.org/wiki/RSA</a>) —     .     (public key)     (private key).        :            .         .         ,       ,        .<br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
RSAキーを使用した認証は、いくつかのステップで構成されています。 </font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RSAキーのペアを作成します。</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">機器に公開鍵をインストールする。</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RSAキーを使用した機器への接続と認証。</font></font></a></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
なぜRSAだけなのですか？</font><font style="vertical-align: inherit;">なぜDSAではないのですか？</font><font style="vertical-align: inherit;">残念ながら、私はこの質問に対する答えを見つけることができませんでした（そして、本当にそれを探していませんでした）。</font><font style="vertical-align: inherit;">しかし公式には、RSAのみがシスコの機器でサポートされています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
セキュアシェルコンフィギュレーションガイド、Cisco IOSリリース15E：</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">セキュアシェルコンフィギュレーションガイド、Cisco IOSリリース15E </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
セキュアシェルバージョン2サポートの制限</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Rivest、Shamir、およびAdleman（RSA）キーの生成は、SSHサーバー側の要件です。</font><font style="vertical-align: inherit;">SSHクライアントとして機能するデバイスは、RSAキーを生成する必要はありません。</font></font><br>
</blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DSAキーデータを入力しようとしています：</font></font><br>
<br>
<pre><code class="plaintext hljs">CSR-1(conf-ssh-pubkey-data)#exit<font></font>
%SSH: Only ssh-rsa type is supported<font></font>
CSR-1(conf-ssh-pubkey-user)#<font></font>
</code></pre><br>
<a name="CreatePublicKey"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RSA公開鍵の作成</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
RSAキーのペアは、SecureCRT、PuTTYgen、またはその他のソフトウェアなどのさまざまなユーティリティを使用して作成できます。</font><font style="vertical-align: inherit;">鍵を作成するときに、パスフレーズ（鍵によるパスワード保護）を設定できます。</font></font><br>
<br>
<a name="CreatePublicKeySecureCRT"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SecureCRTでのRSAペアの生成</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SecureCRT-&gt;ツール-&gt;公開鍵の作成...：</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/2m/xb/eb/2mxbeb3d8sc8thocdojacrzizn4.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
少し理論→「次へ&gt;」ボタン：</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/wv/ii/ze/wviize2n_5dkko4v4kpyxkkwzty.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
RSA / DSA証明書のタイプ→RSAを選択→「次へ」ボタン：</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/rs/le/ni/rslenitclgxtobzvsz_ulj39q_c.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
秘密鍵の暗号化パスワード（オプション、空白のままにして暗号化しないこともできます）+コメント→「次へ&gt;」ボタン：</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/q7/_q/5v/q7_q5vwtmmpbeszmxkizeuznul4.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
キーの長さを選択します（SecureCRTバージョン6.1.0では、キーの最大長は2048ビットで、バージョン8.5.4では16 384ビットです）。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/q5/qm/zg/q5qmzgg_hzzlyg_q0qvobcddkd4.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
鍵の</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
生成</font><font style="vertical-align: inherit;">→「次へ」ボタン：</font><font style="vertical-align: inherit;">乱数を生成するには、ウィンドウ内でマウスを動かす必要があります。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/wf/w8/dh/wfw8dhn0tsfuj8nkdfprxdsjpxk.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/aw/yj/cs/awyjcsqvlbd_6tapahm4twq8kj4.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
鍵ペアの保存→保存場所の選択→保存した鍵の形式の選択（VanDuke Private形式、OpenSSHレガシー、OpenSSH新規）→「完了」ボタン： </font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/9n/ts/3s/9nts3s5p5bnfiz14nwmlo59eva4.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/kq/pw/dv/kqpwdvana4ytrh1wjrzbdtjegzu.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SecureCRTは、このキーをSecureCRTのデフォルトキーにするかどうかを尋ねます。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/zl/pa/iv/zlpaiv_a3gr6noc5hppfx-1vpoq.png"></div><br>
<a name="CreatePublicKeyPuttygen"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PuTTYgenでのRSAペアの生成</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PuTTYgenは、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：//www.chiark.greenend.org.uk/~sgtatham/putty/latest.htmlからダウンロードできます</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PuTTYgenを起動します。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/_l/wi/fo/_lwifoh8tblsbyjqqft_7ooyofu.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
パラメータを選択します（ペアタイプ：RSA、キービットディメンション：2048、オプションでパスフレーズ（パスワードによるパスワード保護）を設定）→生成：</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/b3/dw/d0/b3dwd0xoppidkvcjqwzont-kxj0.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
乱数を保証するために、ウィンドウ内でマウスを動かすように求めます。</font><font style="vertical-align: inherit;">これは、疑似乱数に対する保護です。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/ee/0a/vq/ee0avqbadgo1s4r8ir21kchtuoa.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
RSAキーを保存→[プライベートキーを保存]ボタン：</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/fp/l-/qa/fpl-qavfk_rncnkpey7leotfaqe.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意：1つのソフトウェアにプライベート形式で保存されたRSAキーは、別のメーカーのソフトウェアでは使用できません。</font><font style="vertical-align: inherit;">つまり、PuTTYgenで作成され、Putty秘密キー形式で保存されたRSAキーのペアは、SecureCRTでの使用には適しておらず、その逆も同様です。</font><font style="vertical-align: inherit;">PuTTYはPutty秘密キー形式のみをサポートします。</font><font style="vertical-align: inherit;">キーを配布するための一般的なソリューションは、キーをOpenSSH形式に変換することです（リンク2：「認証キーを使用したPuttyからSecureCRTへの変換」を参照）。</font><font style="vertical-align: inherit;">SecureCRTはOpenSSH形式で自由に動作するため。</font><font style="vertical-align: inherit;">そしてPuTTYgenソフトウェアはOpenSSH形式をPutty秘密鍵形式に変換します。</font></font><br>
<br>
<a name="ConvertPPKtoOpenSSH"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RSA鍵をPutty秘密鍵（PuTTY）形式からOpenSSH（SecureCRT）形式に変換する</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PuTTYgenで生成され、Putty秘密鍵形式（* .ppk）で保存されたSecureCRTでRSA鍵を使用するために、OpenSSH形式のPuTTYgenを使用してそれらをエクスポートします。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PuTTYgenを起動します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">既存のRSAキーをPutty秘密キー形式（* .ppk）でロードします→[ロード]ボタン。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">公開鍵ファイルを保存→「公開鍵を保存」。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">秘密鍵をOpenSSH形式にエクスポートします：メニューPuTTYgen→「変換」→「OpenSSH鍵のエクスポート」。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SecureCRTではOpenSSHファイルを使用します。</font><font style="vertical-align: inherit;">公開鍵を持つファイルの拡張子は.pubで、秘密鍵を持つファイルの拡張子はありません。</font></font></li>
</ol><br>
<a name="ConvertVanDykePrivateKeyToPPK"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RSA鍵をVanDyke秘密鍵（SecureCRT）形式からPutty秘密鍵（PuTTY）形式に変換する</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SecureCRTで生成され、VanDyke秘密鍵形式（公開鍵ファイル* .pub、秘密鍵ファイル*。（拡張子なし））で保存されたPuTTYのRSA鍵を使用するには、SecureCRTを使用してOpenSSH形式でエクスポートし、次にPuTTYgenを使用して、Putty秘密キー（* .ppk）形式にエクスポートします。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SecureCRTを起動します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メニュー「ツール」→「秘密鍵をOpenSSH形式に変換...」</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VanDyke秘密キーのキーを持つソースファイルを選択します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenSSHキーを新しい名前で保存します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PuTTYgenを起動します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">既存のRSAキーをOpenSSH形式（*。）でロードします。PuTTYgenメニュー→「変換」→「インポートキー」。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ファイルをPutty形式で保存します：「秘密鍵の保存」。</font></font></li>
</ol><br>
<a name="CreatePublicKeyMacOSX"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オペレーティングシステムを使用してMAC OS Xで公開鍵を生成する</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
組み込みのssh-keygenユーティリティ（man ssh-keygen）を使用します。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2048ビットの長さのRSA鍵を、鍵の名前と鍵の保存場所が含まれるフォルダーへのパスで生成します。</font></font><br>
<br>
<pre><code class="plaintext hljs">ssh-keygen -b 2048 -t rsa -c "Lab router R4" -f /Users/ArtemiySP/Documents/python/r4</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実行時に、プログラムはRSAキーを保護するためにパスワードを要求します。</font></font><br>
<br>
<pre><code class="plaintext hljs">artemiy-2:Downloads ArtemiySP$ ssh-keygen -b 2048 -t rsa -C "Lab router R4" -f /Users/ArtemiySP/Documents/python/r4<font></font>
Generating public/private rsa key pair.<font></font>
Enter passphrase (empty for no passphrase): <font></font>
Enter same passphrase again: <font></font>
Your identification has been saved in /Users/ArtemiySP/Documents/python/r4.<font></font>
Your public key has been saved in /Users/ArtemiySP/Documents/python/r4.pub.<font></font>
The key fingerprint is:<font></font>
SHA256:WdT47SFvgGI7danxX94p8/cO3uyU12SB3ipkc7nHxzA Lab router R4<font></font>
The key's randomart image is:<font></font>
+---[RSA 2048]----+<font></font>
|          .o     |<font></font>
|         .. . .  |<font></font>
|          .o + . |<font></font>
|        oo+ B = .|<font></font>
|       .S+ O OEoo|<font></font>
|        o + + B*+|<font></font>
|         . . =.*O|<font></font>
|            .+o**|<font></font>
|              =+O|<font></font>
+----[SHA256]-----+<font></font>
artemiy-2:Downloads ArtemiySP$<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
キー名、キーの保存場所が含まれるフォルダへのパスを示す4096ビットの長さのRSAキーを生成し、キー生成パラメータ（-N "cisco"）でパスワードを明示的に設定します。</font></font><br>
<br>
<pre><code class="plaintext hljs">artemiy-2:Downloads ArtemiySP$ ssh-keygen -b 4096 -t rsa -C "Lab router R5" -N "cisco" -f /Users/ArtemiySP/Documents/python/r5<font></font>
Generating public/private rsa key pair.<font></font>
Your identification has been saved in /Users/ArtemiySP/Documents/python/r5.<font></font>
Your public key has been saved in /Users/ArtemiySP/Documents/python/r5.pub.<font></font>
The key fingerprint is:<font></font>
SHA256:NraLRMqB4qmA8qNjKdpBBt1JBw8Osf/3GfuB2k1R+zY Lab router R5<font></font>
The key's randomart image is:<font></font>
+---[RSA 4096]----+<font></font>
|  o.+..          |<font></font>
| . * =           |<font></font>
|. o + .       .  |<font></font>
| . o         . . |<font></font>
|. + o . S   . .  |<font></font>
|o+.. = o o . . . |<font></font>
|+oo o o o o o  Eo|<font></font>
|*=.. . o = * . ..|<font></font>
|Boo.  . o =.o    |<font></font>
+----[SHA256]-----+<font></font>
artemiy-2:Downloads ArtemiySP$<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
推奨されないキー生成パラメーター：1024ビットの長さの信頼できないキー、キー名、キーの保存場所があるフォルダーへのパスを示し、キー生成パラメーターでパスワードを明示的に設定します（-N ""-パスワードなし）：</font></font><br>
<br>
<pre><code class="plaintext hljs">artemiy-2:Downloads ArtemiySP$ ssh-keygen -b 1024 -t rsa -C "Lab router R6" -N "" -f /Users/ArtemiySP/Documents/python/r6<font></font>
Generating public/private rsa key pair.<font></font>
Your identification has been saved in /Users/ArtemiySP/Documents/python/r6.<font></font>
Your public key has been saved in /Users/ArtemiySP/Documents/python/r6.pub.<font></font>
The key fingerprint is:<font></font>
SHA256:LEcfgN+58TYMDv4MpBA2FGCWc2aFiY+SxWBf7pRViWs Lab router R6<font></font>
The key's randomart image is:<font></font>
+---[RSA 1024]----+<font></font>
|.++=o*.o+..      |<font></font>
|.oB % +. o       |<font></font>
| o X * .o...     |<font></font>
|o . =  E+.=.     |<font></font>
| .   oo+So.*     |<font></font>
|      .oo o =    |<font></font>
|         + . .   |<font></font>
|          o      |<font></font>
|                 |<font></font>
+----[SHA256]-----+<font></font>
artemiy-2:Downloads ArtemiySP$<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、キーの名前とキーの場所を使用して3つのキーを作成しました（デフォルトでは、すべてのキーは/ Users / [Username 022 / .sshに格納されています）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
デフォルトでは、公開鍵による認証を使用してSSH経由で接続する場合、すべての公開鍵は順番に格納され、/ Users / [Username†/ .sshフォルダーに格納されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
R6キー：キーの名前を「id_rsa」に変更し（デフォルトでは生成されたキーファイルの名前は「id_rsa」です）、SSHキー（〜/ .ssh /）を含むフォルダーに転送します（つまり、R6キーがメインとして使用されるようにすべての手順を実行しますデフォルトのSSH接続キー）：</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
公開OpenSSHキーをRFC4716形式に変換します（Cisco IOSにエクスポート）：</font></font><br>
<br>
<pre><code class="plaintext hljs">https://serverfault.com/questions/706336/how-to-get-a-pem-file-from-ssh-key-pair<font></font>
ssh-keygen -f ~/Documents/python/r4.pub -e -m RFC4716<font></font>
ssh-keygen -f ~/Documents/python/r5.pub -e -m RFC4716<font></font>
ssh-keygen -f ~/.ssh/id_rsa.pub -e -m RFC4716<font></font>
</code></pre><br>
<a name="ConfigureKeyAtHardware"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">機器での公開鍵の使用</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
公開鍵をユーザーにバインドするためのさまざまな機器はどうですか？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
公開鍵をユーザーにバインドするプロセスは標準ではなく、機器ごとに異なるため、ネットワークで最も頻繁に使用される機器のタイプごとに例を示します。</font></font><br>
<br>
<a name="ConfigureKeyAtHardwareCiscoIOS"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cisco IOS XE、Catalyst（バージョン15.1以降）、IOS </font></font></h3><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">デバイスにはすでにユーザーがいます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ユーザー（username cisco）のSSH設定（ip ssh pubkey-chain）で、公開鍵（key-string）を指定します。</font></font><br>
<pre><code class="plaintext hljs">CSR-1#conf t<font></font>
Enter configuration commands, one per line.  End with CNTL/Z.<font></font>
CSR-1(config)#ip ssh pubkey-chain <font></font>
CSR-1(conf-ssh-pubkey)#username ssh-putty<font></font>
CSR-1(conf-ssh-pubkey-user)#key-string <font></font>
CSR-1(conf-ssh-pubkey-data)#$QAAAQEAnPbynT1+2rjlyqP4viSPdTVDFLSHzWjJnAwy     <font></font>
CSR-1(conf-ssh-pubkey-data)#$NCfaqvMTPruCgG5096q8lO0ntURmNgmfMEQPOgb8weF     <font></font>
CSR-1(conf-ssh-pubkey-data)#$AtMQYk7WFM+5iBnOQ32UAHNavCUA7YFEpAdOQO4W/qB     <font></font>
CSR-1(conf-ssh-pubkey-data)#$SlOLy+PQ47jDUINBnuUeHd8ZXyzXxWglzSvqtwMEXBW     <font></font>
CSR-1(conf-ssh-pubkey-data)#$VoUTBYbJ45DmFa93P50qf494ujaAsTbYyJ/GBzJUTK/     <font></font>
CSR-1(conf-ssh-pubkey-data)#$UADAkNGxQARfOfHZWiIYb3rif6h6hfwwVUZS/Tw==       <font></font>
CSR-1(conf-ssh-pubkey-data)#exit<font></font>
CSR-1(conf-ssh-pubkey-user)#exit<font></font>
CSR-1(conf-ssh-pubkey)#exit<font></font>
CSR-1(config)#exit<font></font>
CSR-1#exit<font></font>
<font></font>
CSR-1#show running-config | inc ssh<font></font>
username ssh-public-key secret 5 $1$ebjc$EYgwMFQXPPiywFVn6rl7t.<font></font>
username ssh-putty privilege 15 secret 5 $1$vIhh$nM8iCeBKmLyVK4hA6./h4.<font></font>
ip ssh pubkey-chain<font></font>
   key-hash ssh-rsa D4E9AD62F7F6265EAAB3FB8778477612<font></font>
  username ssh-public-key<font></font>
   key-hash ssh-rsa C331DEE821A84681A4A7B1862C100D16<font></font>
  username ssh-putty<font></font>
   key-hash ssh-rsa F32BEB60290EA75D151447C0D42D2A99<font></font>
   key-hash ssh-rsa 5432C275B363B646E02D3BA7E8D865B7<font></font>
CSR-1#<font></font>
</code></pre></li>
</ol><br>
<a name="ConfigureKeyAtHardwareCiscoASA"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cisco ASA</font></font></h3><br>
<pre><code class="plaintext hljs">LAB-ASA5516-X-01/pri/act# conf t<font></font>
LAB-ASA5516-X-01/pri/act(config)# username artemiy password artemiy privilege $<font></font>
LAB-ASA5516-X-01/pri/act(config)# username artemiy attributes <font></font>
LAB-ASA5516-X-01/pri/act(config-username)# ssh authentication publickey ?<font></font>
<font></font>
username mode commands/options:<font></font>
  WORD  Raw SSH-RSA public key<font></font>
LAB-ASA5516-X-01/pri/act(config-username)# ssh authentication publickey AAAAB3$<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
キー全体を1行に挿入します（OpenSSH形式）。</font></font><br>
<br>
<a name="ConfigureKeyAtHardwareHuaweiRouter"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Huaweiルーターとスイッチ</font></font></h3><br>
<pre><code class="plaintext hljs">[R1]rsa peer-public-key test-key1 encoding-type pem <font></font>
Enter "RSA public key" view, return system view with "peer-public-key end".<font></font>
NOTE: The number of the bits of public key must be between 769 and 2048.<font></font>
[R1-rsa-public-key]public-key-code begin <font></font>
Enter "RSA key code" view, return last view with "public-key-code end".<font></font>
[R1-rsa-key-code]---- BEGIN SSH2 PUBLIC KEY ----<font></font>
[R1-rsa-key-code]Subject: Subject<font></font>
[R1-rsa-key-code]Comment: " Subject@Subject.local"<font></font>
[R1-rsa-key-code]ModBitSize: 2048<font></font>
[R1-rsa-key-code]AAAAB3NzaC1yc2EAAAADAQABAAABAQC4YLFhPqfsz4a6PUpZOtvm6zGn5TWOVMnx<font></font>
[R1-rsa-key-code]lTH5hr/u+aYnoM2XnDTu4Ul1iB8MMPLVKXzV4LgYhaFcU1rz2/yYhTKIwbiQTHof<font></font>
[R1-rsa-key-code]63fJjyWwkvyBuVZTSKh4b2pfoF2mXgdJzzRmUaiRrZZUVJWsX+CbgtKQuktG7sTK<font></font>
[R1-rsa-key-code]2eguHwdfhilbOAsUaL0/q39Y0aTAMnLMtn0m5r6MD/UopQPI3Fxm1L9azJ7zYIZa<font></font>
[R1-rsa-key-code]yI43Solg0AOupPl8FHFI9Cxq81/uZRACx5lAyuObaQ4/t1Rdh3CAJj1qwfZjZFTP<font></font>
[R1-rsa-key-code]VdJxwTDxwfkpOzMD193M0ThOSrgfWe336Q9F3jbSWrEYUQDX8ew7<font></font>
[R1-rsa-key-code]---- END SSH2 PUBLIC KEY ----<font></font>
[R1-rsa-key-code]public-key-code end<font></font>
[R1-rsa-public-key]peer-public-key end <font></font>
[R1]display rsa peer-public-key <font></font>
<font></font>
=====================================<font></font>
    Key name: test-key1<font></font>
=====================================<font></font>
Key Code:<font></font>
---- BEGIN SSH2 PUBLIC KEY ----<font></font>
AAAAB3NzaC1yc2EAAAADAQABAAABAQC4YLFhPqfsz4a6PUpZOtvm6zGn5TWOVMnx<font></font>
lTH5hr/u+aYnoM2XnDTu4Ul1iB8MMPLVKXzV4LgYhaFcU1rz2/yYhTKIwbiQTHof<font></font>
63fJjyWwkvyBuVZTSKh4b2pfoF2mXgdJzzRmUaiRrZZUVJWsX+CbgtKQuktG7sTK<font></font>
2eguHwdfhilbOAsUaL0/q39Y0aTAMnLMtn0m5r6MD/UopQPI3Fxm1L9azJ7zYIZa<font></font>
yI43Solg0AOupPl8FHFI9Cxq81/uZRACx5lAyuObaQ4/t1Rdh3CAJj1qwfZjZFTP<font></font>
VdJxwTDxwfkpOzMD193M0ThOSrgfWe336Q9F3jbSWrEYUQDX8ew7<font></font>
---- END SSH2 PUBLIC KEY ----<font></font>
aaa<font></font>
local-user jet privilege level 15<font></font>
 local-user jet service-type telnet terminal ssh http<font></font>
ssh user jet assign rsa-key test-key1<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Huaweiにインポートされるキー形式のタイプ：</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
「SecureCRTおよびPuTTYはPEM形式でRSAキーを生成します。」</font></font><br>
<br>
<pre><code class="plaintext hljs">rsa peer-public-key test-key1 encoding-type pem</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
「OpenSSHは、RSAキーをOpenSSH形式で生成します。」</font></font><br>
<br>
<pre><code class="plaintext hljs">rsa peer-public-key test-key1 encoding-type openssh</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
「OpenSSLはDER形式でRSAキーを生成します。」</font></font><br>
<br>
<pre><code class="plaintext hljs">rsa peer-public-key test-key1 encoding-type der</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
デフォルトは16進数です。</font></font><br>
<br>
<pre><code class="plaintext hljs">rsa peer-public-key test-key1</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注：Huawei機器は、RSA形式のキーだけでなく、他の形式もサポートしています。</font></font><br>
<br>
<pre><code class="plaintext hljs">ssh user user-name assign { rsa-key | dsa-key | ecc-key } key-name</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SSHを介してユーザーの認証タイプを厳密に設定できます。</font></font><br>
<br>
<pre><code class="plaintext hljs">[R1]ssh user jet authentication-type ?<font></font>
  all           All authentication, password,RSA or ECC<font></font>
  ecc           ECC authentication<font></font>
  password      Password authentication<font></font>
  password-ecc  Both password and ECC<font></font>
  password-rsa  Both password and RSA<font></font>
  rsa           RSA authentication<font></font>
[R1]<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
つまり、パスワード、公開キーと秘密キー、またはその両方を使用したアクセスを許可します。</font></font><br>
<br>
<a name="ConfigureKeyAtHardwareHuaweiUSG"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Huawei USG（6000）</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
構成はルーターの設定と完全に似ていますが、いくつかの機能があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
デフォルトでは、証明書を使用してロギングした後の特権レベルは0であり、昇格することはできません。</font><font style="vertical-align: inherit;">したがって、優先度レベルは</font></font><br>
<br>
<pre><code class="plaintext hljs">user-interface vty 0 4 <font></font>
user privilege level 15<font></font>
user-interface vty 16 20:<font></font>
user privilege level 15<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
例：</font></font><br>
<br>
<pre><code class="plaintext hljs">[USG-a]rsa peer-public-key test-key1 encoding-type pem <font></font>
Enter "RSA public key" view, return system view with "peer-public-key end".<font></font>
[USG-a-rsa-public-key]public-key-code begin<font></font>
Enter "RSA key code" view, return last view with "public-key-code end".<font></font>
[USG-a-rsa-key-code]---- BEGIN SSH2 PUBLIC KEY ----<font></font>
[USG-a-rsa-key-code]Subject: subject<font></font>
[USG-a-rsa-key-code]Comment: " subject@subject.local"<font></font>
[USG-a-rsa-key-code]ModBitSize: 2048<font></font>
[USG-a-rsa-key-code]AAAAB3NzaC1yc2EAAAADAQABAAABAQC4YLFhPqfsz4a6PUpZOtvm6zGn5TWOVMnx<font></font>
[USG-a-rsa-key-code]lTH5hr/u+aYnoM2XnDTu4Ul1iB8MMPLVKXzV4LgYhaFcU1rz2/yYhTKIwbiQTHof<font></font>
[USG-a-rsa-key-code]63fJjyWwkvyBuVZTSKh4b2pfoF2mXgdJzzRmUaiRrZZUVJWsX+CbgtKQuktG7sTK<font></font>
[USG-a-rsa-key-code]2eguHwdfhilbOAsUaL0/q39Y0aTAMnLMtn0m5r6MD/UopQPI3Fxm1L9azJ7zYIZa<font></font>
[USG-a-rsa-key-code]yI43Solg0AOupPl8FHFI9Cxq81/uZRACx5lAyuObaQ4/t1Rdh3CAJj1qwfZjZFTP<font></font>
[USG-a-rsa-key-code]VdJxwTDxwfkpOzMD193M0ThOSrgfWe336Q9F3jbSWrEYUQDX8ew7<font></font>
[USG-a-rsa-key-code]---- END SSH2 PUBLIC KEY ----<font></font>
[USG-a-rsa-key-code]public-key-code end<font></font>
[USG-a-rsa-public-key]peer-public-key end<font></font>
[USG-a]<font></font>
[USG-a]ssh user admin assign rsa-key test-key1<font></font>
! Out-of-band management interface:<font></font>
[USG-a-GigabitEthernet0/0/0]service-manage ssh permit<font></font>
! Grant user level 15 privillege:<font></font>
[USG-a]user-interface vty 0 4<font></font>
[USG-a-ui-vty0-4]user privilege level 15<font></font>
</code></pre><br>
<a name="ConfigureKeyAtHardwareCiscoNexus"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cisco Nexus 9.3</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
オプション1：公開鍵ファイルをデバイスにプリインストールし、公開鍵ファイルをユーザーに添付します。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">公開鍵ファイルをデバイスにコピーします。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ユーザーに公開鍵ファイルを使用するように指示します。</font></font></li>
</ul><br>
<pre><code class="plaintext hljs">switch# copy tftp://10.10.1.1/secsh_file.pub bootflash:secsh_file.pub<font></font>
username User1 sshkey file bootflash:secsh_file.pub<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
オプション2：公開鍵をユーザーにコピーします。</font></font><br>
<br>
<pre><code class="plaintext hljs">username User1 sshkey<font></font>
ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC4YLFhPqfsz4a6PUpZOtvm6zGn5TWOVMnxlTH5hr/u+aYnoM2XnDTu4Ul1iB8MMPLVKXzV4LgYhaFcU1rz2/yYhTKIwbiQTHof63fJjyWwkvyBuVZTSKh4b2pfoF2mXgdJzzRmUaiRrZZUVJWsX+CbgtKQuktG7sTK2eguHwdfhilbOAsUaL0/q39Y0aTAMnLMtn0m5r6MD/UopQPI3Fxm1L9azJ7zYIZayI43Solg0AOupPl8FHFI9Cxq81/uZRACx5lAyuObaQ4/t1Rdh3CAJj1qwfZjZFTPVdJxwTDxwfkpOzMD193M0ThOSrgfWe336Q9F3jbSWrEYUQDX8ew7<font></font>
</code></pre><br>
<a name="ConfigureSoftwareToUsePublicKey"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SSH接続に秘密鍵を使用する</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このセクションでは、ネットワーク機器（またはハードウェアとソフトウェアが公開鍵認証をサポートしている場合は他の機器）でRSA鍵を使用して認証するようにSSHクライアントを構成する方法について説明します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最も一般的なプログラムであるSecureCRTとPuTTYで公開鍵の使用を設定することを検討します。</font></font><br>
<br>
<a name="ConfigureSoftwareToUsePublicKeySecureCRT"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SecureCRT</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SSH設定ウィンドウに認証リストがあります。</font><font style="vertical-align: inherit;">その中で、PublicKeyの優先度を最高に上げる必要があります-リストのトップにしてください。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/l-/ke/z4/l-kez4rg6qpuyslsuv3nmt_dti4.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/xi/jh/ah/xijhahjlx-hq9m52ugqyih0qrwi.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、PublicKeyオプションに移動し、秘密鍵ファイルを選択します。</font><font style="vertical-align: inherit;">最上位のスイッチを使用すると、この接続に対してのみ、秘密鍵またはセッション設定のグローバル設定-別の秘密鍵（デフォルト以外の鍵）-を使用できます。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/ub/js/xd/ubjsxdlmflzod5cfguosfwuqiqi.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/og/pv/ys/ogpvysr3cvrk7aliad5qxeg3jp0.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
グローバルパブリックキーを設定します。メニューオプション→グローバルオプション→カテゴリSSH2で。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/0m/yd/dg/0myddgh9flvk10qrh8pixuphke8.png"></div><br>
<a name="ConfigureSoftwareToUsePublicKeyPutty"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パテ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SSH設定（[接続]→[SSH]→[認証]）の[認証用の秘密鍵ファイル]フィールドで、ファイルPutty秘密鍵（* .ppk）を指定します。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/xm/wu/tp/xmwutpoyrfibggfiqssajegtyq0.png"></div><br>
<a name="ConfigureSoftwareToUsePublicKeyMacOSX"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MAC OS X</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
公開鍵を使用するための標準クライアントのセットアップ：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">デフォルト以外のキーを手動で指定した接続：</font></font><br>
<br>
<pre><code class="plaintext hljs">artemiy-2:~ ArtemiySP$ ssh r4@10.31.73.29 -i ~/Documents/python/r4<font></font>
The authenticity of host '10.31.73.29 (10.31.73.29)' can't be established.<font></font>
RSA key fingerprint is SHA256:fxOLFKU6YGyIqisrIh2P0O52Rr6Wx/wsSAcHsTz8fo0.<font></font>
Are you sure you want to continue connecting (yes/no)? yes<font></font>
Warning: Permanently added '10.31.73.29' (RSA) to the list of known hosts.<font></font>
CSR-4#<font></font>
</code></pre></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">デフォルト以外のキーを手動で指定した接続：</font></font><br>
<br>
<pre><code class="plaintext hljs">artemiy-2:~ ArtemiySP$ ssh r5@10.31.73.30 -i ~/Documents/python/r5<font></font>
The authenticity of host '10.31.73.30 (10.31.73.30)' can't be established.<font></font>
RSA key fingerprint is SHA256:4l67C4Il4pTaqYT4vrtWr0aY7rPmNWKsjRv2zlYtQIU.<font></font>
Are you sure you want to continue connecting (yes/no)? yes<font></font>
Warning: Permanently added '10.31.73.30' (RSA) to the list of known hosts.<font></font>
MGTU#exit<font></font>
Connection to 10.31.73.30 closed.<font></font>
</code></pre><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">エラーの例</font></font></b><div class="spoiler_text">        —      .     MAC OS X —     .<br>
</div></div></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">デフォルトキーとの接続（デフォルトキー-システム自体がデフォルトの公開キーを見つけて使用します）：</font></font><br>
<br>
<pre><code class="plaintext hljs">artemiy-2:~ ArtemiySP$ ssh r6@10.31.73.31<font></font>
The authenticity of host '10.31.73.31 (10.31.73.31)' can't be established.<font></font>
RSA key fingerprint is SHA256:2/ysACJQw48Q8S45ody4wna+6nJspcsEU558HiUN43Q.<font></font>
Are you sure you want to continue connecting (yes/no)? yes<font></font>
Warning: Permanently added '10.31.73.31' (RSA) to the list of known hosts.<font></font>
PR#exit<font></font>
Connection to 10.31.73.31 closed.<font></font>
artemiy-2:~ ArtemiySP$ <font></font>
</code></pre></li>
</ul><br>
<a name="MacOSXUseSSH"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MAC OS XでSSHを簡単に使用する方法：</font></font></h3><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SSHエイリアスを作成します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SSHエイリアスでは、すぐにユーザーを設定します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">キーの場所をすぐに登録します。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
エイリアスの場所と事前構成されたSSH構成は、〜/ .ssh /構成ファイル（/Users/[Username†/.ssh/config）で指定されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このように記入：</font></font><br>
<br>
<pre><code class="plaintext hljs">host r4<font></font>
   Hostname 10.31.73.29<font></font>
   Port 22<font></font>
   User r4<font></font>
   IdentityFile ~/Documents/python/r4<font></font>
<font></font>
host r5<font></font>
   Hostname 10.31.73.30<font></font>
   Port 22<font></font>
   User r5<font></font>
   IdentityFile ~/Documents/python/r5<font></font>
<font></font>
host r6<font></font>
   Hostname 10.31.73.31<font></font>
   Port 22<font></font>
   User r6<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注：R6ホスト（10.31.73.31）への接続には非常に長い時間がかかるため、デフォルトの接続が正しく構成されていません（正確にはわかりません）。</font><font style="vertical-align: inherit;">デフォルトキーへのパスをすぐに指定することをお勧めします。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
公開鍵と設定ファイルを使用したssh接続の例：</font></font><br>
<br>
<pre><code class="plaintext hljs">artemiy-2:Documents ArtemiySP$ ssh r5<font></font>
MGTU#exit<font></font>
Connection to 10.31.73.30 closed by remote host.<font></font>
Connection to 10.31.73.30 closed.<font></font>
artemiy-2:Documents ArtemiySP$ ssh r4<font></font>
CSR-4#exit<font></font>
Connection to 10.31.73.29 closed by remote host.<font></font>
Connection to 10.31.73.29 closed.<font></font>
artemiy-2:Documents ArtemiySP$ ssh r6<font></font>
PR#exit<font></font>
Connection to 10.31.73.31 closed.<font></font>
artemiy-2:Documents ArtemiySP$ ssh r6<font></font>
PR#<font></font>
</code></pre><br>
<a name="finale"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">結論</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
RSAキーは、パスワード認証の代わりに使用できますが、すべての場合に使用できるわけではありません。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ドメイン認証が構成されている場合、公開鍵認証は不可能です（サーバーへのLDAP要求（Kerberos）が認証のためにプロキシされるため）。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">古いネットワーク機器での公開鍵認証は不可能です（例：ファームウェア12.2を搭載したCisco Catalyst 2960で構成に失敗しました）。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
パスワードで保護された公開鍵は、ベンチ装置で便利に使用されます。短所：同僚やパートナーに大量の秘密鍵と公開鍵を送信する必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一部の機器では、1組の公開鍵が1人のユーザーに対応できます。他の機器では、1人のユーザーに対応する公開鍵は1つだけです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
公開鍵と秘密鍵のペアが格納されるさまざまな形式もあります。ただし、このガイドは、さまざまな形式でキーをエクスポートするのに役立ちます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
今日では、2048ビットの長さのキーを使用するのが最適ですが、一部の機器では、これが可能な最大キー長です（これは新しいファームウェアで修正される可能性があります）。例えば：</font></font><br>
<br>
<pre><code class="plaintext hljs">[R1]rsa peer-public-key test-key2 encoding-type pem<font></font>
Enter "RSA public key" view, return system view with "peer-public-key end".<font></font>
NOTE: The number of the bits of public key must be between 769 and 2048.<font></font>
[R1-rsa-public-key]<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
スクリプトを使用してパスワードを入力する場合は、公開鍵を使用してパスワードを置き換えることをお勧めします（例：SecureCRTでの自動ログオン）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ネットワークを介したパスワード送信から保護するために、公開鍵を使用することをお勧めします。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一部のソフトウェアは、パスワードではなくデフォルトで公開鍵をSSH認証に使用します（例：Ansible）。</font></font><br>
<br>
<a name="ListOfSources"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ソースのリスト：</font></font></h2><br>
<ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ウィキペディアRSA</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">authを使用したPuttyからSecureCRTへの変換。</font><font style="vertical-align: inherit;">キー、SecureCRTフォーラム</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">セキュアシェルコンフィギュレーションガイド、Cisco IOSリリース15E</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PuTTYgenをダウンロード</font></font></a></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Huawei </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">公式ドキュメント</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -Huaweiルーターにインポートするためのさまざまな主要形式の説明</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Huawei USG 6000、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">公開鍵認証の構成</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（CLI：STelnet（RSA認証）を使用してCLIにログインする例）</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">Nexus 9000 Configuration guide SSH public key</a></li>
<li>man ssh-keygen —      mac os x.</li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">SSH config file  MAC OS X</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">       SSH</a> </li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">       SSH config</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">  openssh public key   RFC4716</a></li>
</ol></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja490714/index.html">コードごとに10万を取得する方法。完全な初心者向けガイド</a></li>
<li><a href="../ja490716/index.html">小規模企業のローカルネットワークの高品質な運用を保証する方法</a></li>
<li><a href="../ja490718/index.html">2020年の「クリーンコード」とは何ですか？</a></li>
<li><a href="../ja490720/index.html">モーター！またはゲームの物理学とは</a></li>
<li><a href="../ja490722/index.html">ITにおける性別休暇。注意する方法</a></li>
<li><a href="../ja490728/index.html">Security Week 10：RSA Conference and Cyber​​security Awareness</a></li>
<li><a href="../ja490730/index.html">Intel x86 Root of Trust：信頼の喪失</a></li>
<li><a href="../ja490732/index.html">音声認識：非常に短い入門コース</a></li>
<li><a href="../ja490734/index.html">スイスの地形図上のイースターエッグ</a></li>
<li><a href="../ja490736/index.html">英語のボキャブラリーを学び、刺激するための9つの明確なツール</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>