<!doctype html>
<html class="no-js" lang="zh-CN">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ’© ğŸ§œğŸ¿ ğŸ‘‡ğŸ¼ åœ¨Expresså’ŒMySQLä¸Šåˆ›å»ºè‡ªå·±çš„CRUD APIï¼šç¬¬ä¸€éƒ¨åˆ† ğŸ¤±ğŸ¿ âœğŸ¼ ğŸ¦</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="å¤§å®¶å¥½ã€‚é¢„æœŸâ€œ Fullstack JavaScript Developerâ€è¯¾ç¨‹çš„å¼€å§‹ï¼Œæˆ‘ä»¬å¸Œæœ›åˆ†äº«ä¸€äº›ç”±æˆ‘ä»¬çš„è‡ªç”±æ’°ç¨¿äººç¼–å†™çš„ææ–™ã€‚
 
 
 
 Expressæ˜¯æœ€æµè¡Œçš„Webæ¡†æ¶ä¹‹ä¸€ï¼Œæ”¯æŒè·¯ç”±ï¼Œä¸­ç­‰æƒé‡å’Œæ¨¡æ¿ç³»ç»Ÿã€‚åœ¨2020å¹´åœ¨æ²¡æœ‰Expressçš„æƒ…å†µä¸‹åœ¨Node.jsä¸Šåˆ›å»ºåç«¯æ˜¯ä¸€ä»¶ç›¸å½“å¥‡...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>åœ¨Expresså’ŒMySQLä¸Šåˆ›å»ºè‡ªå·±çš„CRUD APIï¼šç¬¬ä¸€éƒ¨åˆ†</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/491408/"><b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¤§å®¶å¥½ã€‚é¢„æœŸ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">â€œ Fullstack JavaScript Developerâ€</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¯¾ç¨‹çš„å¼€å§‹</font><font style="vertical-align: inherit;">ï¼Œæˆ‘ä»¬å¸Œæœ›åˆ†äº«ä¸€äº›ç”±æˆ‘ä»¬çš„è‡ªç”±æ’°ç¨¿äººç¼–å†™çš„ææ–™ã€‚</font></font></i></b><br>
<br>
<img src="https://habrastorage.org/webt/9w/az/vb/9wazvb3h8u0o1gjvijjntbhrkgk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Expressæ˜¯æœ€æµè¡Œçš„Webæ¡†æ¶ä¹‹ä¸€ï¼Œæ”¯æŒè·¯ç”±ï¼Œä¸­ç­‰æƒé‡å’Œæ¨¡æ¿ç³»ç»Ÿã€‚åœ¨2020å¹´åœ¨æ²¡æœ‰Expressçš„æƒ…å†µä¸‹åœ¨Node.jsä¸Šåˆ›å»ºåç«¯æ˜¯ä¸€ä»¶ç›¸å½“å¥‡æ€ªçš„äº‹æƒ…ï¼Œå› ä¸ºExpressæ˜¯åœ¨Node.jsä¸Šæ„å»ºWebåº”ç”¨ç¨‹åºçš„äº‹å®ä¸Šçš„æ¡†æ¶ã€‚</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä»Šå¤©ï¼Œæˆ‘ä»¬å°†å°è¯•ä½¿ç”¨MySQLæ•°æ®åº“åˆ›å»ºä¸€ä¸ªç®€å•çš„CRUD APIã€‚</font><font style="vertical-align: inherit;">ç»éªŒä¸°å¯Œçš„Node.jsè¯»è€…ä¼šé—®ï¼ŒMongoDBåœ¨å“ªé‡Œï¼Œé€šå¸¸ä¸ä¹‹ä¸²è”ä½¿ç”¨ã€‚ä½†æˆ‘é©¬ä¸Šè¦è¯´ï¼Œè¿™ç¯‡æ–‡ç« çš„è¯»è€…æ›´å¤šæ˜¯æƒ³ç¨å¾®æ¥è§¦Node.jså¹¶å‡è½»è¿‡æ¸¡åˆ°æ–°ç”Ÿæ€ç³»ç»Ÿçš„PHPå¼€å‘äººå‘˜ã€‚æˆ‘ä»¬å°†ä½¿ç”¨MySQLã€‚</font><font style="vertical-align: inherit;">æˆ‘ä»¬å°†ä¸ºä¸€ä¸ªç®€å•çš„Todoåº”ç”¨ç¨‹åºåˆ›å»ºä¸€ä¸ªAPIï¼Œä»¥é˜²ä¸‡ä¸€æœ‰äººæƒ³è¦é™„åŠ åˆ°ä»–çš„å¾…åŠäº‹é¡¹ä¸Šï¼ˆå³ä½¿å®ƒæ˜¯å¦ç”±Reactç¼–å†™ä¹Ÿæ²¡å…³ç³»ï¼‰ï¼Œç„¶åå†é™„åŠ ä¸€ç‚¹å¹¶ä½¿ç”¨å®ƒã€‚</font></font><br>
<a name="habracut"></a><br>
<br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> â€œæ¶æ„â€ä¸æˆ‘ä»¬åº”ç”¨çš„ç²¾é«“</font></font></h5><br>
<img src="https://habrastorage.org/webt/jh/jh/si/jhjhsi1hno_tuosqmjuft3algig.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä¸­ï¼Œå¯ä»¥åˆ›å»ºï¼Œæ¥æ”¶ï¼Œæ›´æ–°å’Œåˆ é™¤Todoã€‚</font><font style="vertical-align: inherit;">æ€»çš„æ¥è¯´ï¼Œæˆ‘ä»¬å°†åªæœ‰ä¸€å¥—æœ€å°‘çš„CRUDå‡½æ•°ï¼ˆåˆ›å»ºè¯»å–æ›´æ–°åˆ é™¤ï¼‰ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æœ€åï¼Œæˆ‘ä»¬å°†åº”ç”¨ç¨‹åºä¸Reactä¸Šçš„åº”ç”¨ç¨‹åºç»“åˆèµ·æ¥ï¼Œæˆ‘ä»¬å°†è¿›è¡Œæ‰€æœ‰æµ‹è¯•ã€‚</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é¦–å…ˆï¼Œæˆ‘å°†ç»™å‡ºåº”ç”¨ç¨‹åºæ–‡ä»¶çš„ç»“æ„ï¼š</font></font><br>
<br>
<img src="https://habrastorage.org/webt/i_/ad/nq/i_adnqzj03nofwn7xqkgjki-ono.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ¥ä¸‹æ¥ï¼Œæˆ‘å°†ç»™å‡ºä¸€å¼ </font><font style="vertical-align: inherit;">åº”ç”¨ç¨‹åº</font><font style="vertical-align: inherit;">ä¸­çš„æ“ä½œå’Œæ–¹æ³•è¡¨ï¼š</font></font><br>
<br>
<div class="scrollable-table"><table>
<thead>
<tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ–¹æ³•</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç½‘å€</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åŠ¨ä½œ</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> å¾—åˆ°</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ äº¤æ˜“</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¾—åˆ°æ‰€æœ‰æ¡ˆä»¶</font></font></th>
</tr>
<tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¾—åˆ°</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/äº¤æ˜“/ 2</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è·å–ç¼–å·ä¸º2çš„ID</font></font></th>
</tr>
<tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å‘å¸ƒ</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ äº¤æ˜“ </font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> æ·»åŠ æ–°æ¡ˆä¾‹</font></font></th>
</tr>
<tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ”¾ </font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/äº¤æ˜“/ 3 </font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> æ›´æ–°ID = 3çš„ç”¨æˆ·</font></font></th>
</tr>
<tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åˆ é™¤ </font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/äº¤æ˜“/ 3 </font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> åˆ é™¤ID = 3çš„ç”¨æˆ·</font></font></th>
</tr>
<tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åˆ é™¤ </font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ äº¤æ˜“ </font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> åˆ é™¤æ‰€æœ‰ç”¨æˆ·</font></font></th>
</tr>
</tbody>
</table></div><br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> åˆ›å»ºæ‚¨çš„Node.jsåº”ç”¨ç¨‹åº </font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è½¬åˆ°æ‚¨å–œæ¬¢çš„ç›®å½•ï¼Œå¯åŠ¨ç»ˆç«¯å¹¶åˆ›å»ºæ‚¨çš„åº”ç”¨ç¨‹åºã€‚</font><font style="vertical-align: inherit;">é¡ºä¾¿è¯´ä¸€å¥ï¼Œä»æ ‡é¢˜å¯èƒ½å¾ˆæ¸…æ¥šåº”è¯¥å·²ç»å®‰è£…äº†Node.jsã€‚</font><font style="vertical-align: inherit;">å¦‚æœæ‚¨å°šæœªè¿™æ ·åšï¼Œåˆ™</font></font><strike><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ— æ³•</font></font></strike><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä»æ­¤å¤„</font><font style="vertical-align: inherit;">çš„</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é“¾æ¥ä¸­</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸‹è½½</font><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<pre><code class="plaintext hljs">    $ mkdir CRUD_API<font></font>
    $ cd CRUD_API<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 æ¥ä¸‹æ¥ï¼Œæ‚¨éœ€è¦ä½¿ç”¨</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">npm init</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åˆå§‹åŒ–æˆ‘ä»¬çš„åº”ç”¨</font><i><font style="vertical-align: inherit;">ç¨‹åº</font></i><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">å› ä¸º </font><font style="vertical-align: inherit;">æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºæ›´åƒæ˜¯ä¸€ä¸ªæµ‹è¯•å’ŒåŸ¹è®­çš„åº”ç”¨ç¨‹åºï¼Œæˆ‘å°†ä½¿ç”¨ä¸€ä¸ªå‘½ä»¤æ¥å¡«å……æ‰€æœ‰é»˜è®¤æ•°æ®ï¼Œä»¥å…åœ¨ç»†èŠ‚ä¸Šæµªè´¹æ—¶é—´ï¼š</font></font><br>
<br>
<pre><code class="plaintext hljs"> npm init -y
 </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¦‚æœæ˜¯è¿™æ ·ï¼Œé‚£ä¹ˆ</font></font><code>package.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ‚¨å¯ä»¥</font><font style="vertical-align: inherit;">åŠ¨æ‰‹</font><font style="vertical-align: inherit;">å°†æ•°æ®æ›´æ”¹ä¸ºæ‰€éœ€çš„æ•°æ®ï¼šgithubå­˜å‚¨åº“ï¼Œæ ‡ç­¾ï¼Œä½œè€…ç­‰ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç„¶åï¼Œæˆ‘ä»¬éœ€è¦æ”¾ç½®åº”ç”¨ç¨‹åºæ­£å¸¸è¿è¡Œæ‰€éœ€çš„æ‰€æœ‰è½¯ä»¶åŒ…ï¼š</font></font><br>
<br>
<pre><code class="plaintext hljs">  npm i express mysql body-parser --save
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¦‚æœä»¥åå°†å¼€å‘å†…å®¹å‘é€åˆ°githubï¼Œåˆ™åº”åˆ›å»ºä¸€ä¸ªéšè—æ–‡ä»¶ï¼Œ</font></font><code>.gitignore</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä»¥å…æ‹–æ‹½æœ€é‡çš„node_modules </font></font><strike><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¹¶ä½¿</font></font></strike><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è‡ªå·±</font><strike><font style="vertical-align: inherit;">ä¸¢è„¸</font></strike><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">æˆ‘ä»¬å†™ï¼š</font></font><br>
<br>
<pre><code class="plaintext hljs">    touch .gitignore <font></font>
    code .gitignore <font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘ä»¬åœ¨æ­¤å¤„è¾“å…¥</font></font><code>node_modules</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œç¨ååœ¨æ­¤æ–‡ä»¶ä¸­ï¼Œæ‚¨å¯ä»¥è¾“å…¥è¦ç¨ååœ¨è¿œç¨‹æœåŠ¡å™¨ä¸ŠæŸ¥çœ‹çš„æ–‡ä»¶å¤¹å’Œæ–‡ä»¶çš„åç§°ã€‚</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> åŸºæœ¬Expressè®¾å®š</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨é¡¹ç›®çš„æ ¹æ–‡ä»¶å¤¹ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªæ–‡ä»¶</font></font><code>server.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font></font><br>
<br>
<pre><code class="javascript hljs">    <span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">"express"</span>);
    <span class="hljs-keyword">const</span> bodyParser = <span class="hljs-built_in">require</span>(<span class="hljs-string">"body-parser"</span>);<font></font>
    <font></font>
    <span class="hljs-keyword">const</span> app = express();<font></font>
    <font></font>
    <span class="hljs-comment">//     json</span><font></font>
    app.use(bodyParser.json());<font></font>
    <font></font>
    <span class="hljs-comment">//    : application/x-www-form-urlencoded</span>
    app.use(bodyParser.urlencoded({ <span class="hljs-attr">extended</span>: <span class="hljs-literal">true</span> }));<font></font>
    <font></font>
    <span class="hljs-comment">//   response - request</span>
    app.get(<span class="hljs-string">"/"</span>, (req, res) =&gt; {<font></font>
      res.json({ <span class="hljs-attr">message</span>: <span class="hljs-string">"    "</span> });<font></font>
    });<font></font>
    <font></font>
    <span class="hljs-comment">//  ,   </span>
    app.listen(<span class="hljs-number">3001</span>, () =&gt; {
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"   3001 "</span>);<font></font>
    });<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¯åŠ¨æœåŠ¡å™¨ï¼š</font></font><br>
<br>
<pre><code class="plaintext hljs">node server.js
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 æˆ‘ä»¬éœ€è¦Expressæ¥åˆ›å»ºæˆ‘ä»¬çš„apiï¼Œ</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">body-parser</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åŒ…</font><font style="vertical-align: inherit;">å¯ä»¥å¸®åŠ©æˆ‘ä»¬è§£æ</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¯·æ±‚</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¹¶åˆ›å»º</font></font><code>req.body</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸€ä¸ªå¯¹è·¯ç”±æœ‰ç”¨çš„</font><i><font style="vertical-align: inherit;">è¯·æ±‚</font></i><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç°åœ¨ï¼Œæˆ‘ä»¬çš„æœåŠ¡å™¨å¯ä»¥æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ä½¿ç”¨app.useï¼ˆï¼‰åˆ›å»ºä¸€ä¸ªå¯å°†èº«ä½“åˆ†æå™¨å‘ˆç°ä¸ºä¸­é—´æ æ†çš„Expressåº”ç”¨</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> æˆ‘ä»¬æœ‰ä¸€ä¸ªç®€å•çš„è·å–ï¼Œåªæ˜¯æµ‹è¯•åº”ç”¨ç¨‹åº</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ä¾¦å¬ç«¯å£3001çš„æ‰€æœ‰ä¼ å…¥æ›´æ”¹</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æœ€åˆï¼Œæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºå¯ä»¥è¿è¡Œï¼Œç„¶åæ‚¨å¯ä»¥åˆ›å»ºæ•°æ®åº“ã€‚</font></font><br>
<br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åˆ›å»ºæ‚¨çš„MySQLæ•°æ®è¡¨</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘çœŸçš„å¸Œæœ›æœ¬æ–‡çš„è¯»è€…å¯ä»¥è‡ªè¡Œä¸‹è½½å¹¶å®‰è£…MySQLå’ŒMySQLWorkBranchã€‚</font><font style="vertical-align: inherit;">æ¥ä¸‹æ¥ï¼Œæ‚¨è‡ªå·±ä½¿ç”¨æœ€å–œæ¬¢çš„åç§°ï¼ˆåœ¨æˆ‘çš„æƒ…å†µä¸‹ä¸ºTODOï¼‰åˆ›å»ºä¸€ä¸ªæ–¹æ¡ˆï¼ˆDBï¼‰ï¼Œç„¶åé€‰æ‹©é—ªç”µè¯·æ±‚å¹¶å¤åˆ¶/é”®å…¥ä»¥ä¸‹å‘½ä»¤ï¼š</font></font><br>
<br>
<pre><code class="sql hljs">    <span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-keyword">IF</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> <span class="hljs-string">`todo`</span> (
        <span class="hljs-keyword">id</span> <span class="hljs-built_in">int</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> PRIMARY <span class="hljs-keyword">KEY</span> AUTO_INCREMENT,
        <span class="hljs-built_in">text</span> <span class="hljs-built_in">varchar</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>
      ) <span class="hljs-keyword">ENGINE</span>=<span class="hljs-keyword">InnoDB</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">CHARSET</span>=utf8;
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨æˆ‘ä»¬çš„æ•°æ®åº“ä¸­ï¼Œä¸€åˆ‡éƒ½å°†æœ€å°‘ï¼šåªæœ‰idå’Œæ¡ˆä¾‹æœ¬èº«çš„æ–‡æœ¬ã€‚</font><font style="vertical-align: inherit;">ä½†æ˜¯ï¼Œåœ¨å¦ä¸€æ å¯ä»¥æè¿°æ‚¨æ¡ˆä»¶çš„ç´§è¿«æ€§çš„æƒ…å†µä¸‹ï¼Œå¸Œæœ›å®ƒä¸ä¼šå¼•èµ·é—®é¢˜ã€‚</font></font><br>
<br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> é…ç½®å¹¶è¿æ¥æˆ‘ä»¬çš„æ•°æ®åº“</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è®©æˆ‘ä»¬å»ºç«‹å’Œé…ç½®ä¸æ•°æ®åº“çš„è¿æ¥ã€‚</font><font style="vertical-align: inherit;">æˆ‘ä»¬å°†ç›´æ¥åœ¨æ ¹æ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„appæ–‡ä»¶å¤¹ï¼Œç„¶å</font></font><code>db.config.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åœ¨è¯¥æ–‡ä»¶å¤¹ä¸­</font><font style="vertical-align: inherit;">åˆ›å»ºä¸€ä¸ªæ–‡ä»¶</font><font style="vertical-align: inherit;">ï¼Œå…¶</font></font><code>config</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å†…å®¹å¤§è‡´ç›¸åŒï¼Œè¿™å–å†³äºæ‚¨åœ¨MySQLWorkBranchä¸­çš„è®¾ç½®ã€‚</font><font style="vertical-align: inherit;">å°±æˆ‘è€Œè¨€ï¼Œè¯¥æ–‡ä»¶å°†å¦‚ä¸‹æ‰€ç¤ºï¼š</font></font><br>
<br>
<pre><code class="javascript hljs">  <span class="hljs-built_in">module</span>.exports = {
    <span class="hljs-attr">HOST</span>: <span class="hljs-string">"localhost"</span>,
    <span class="hljs-attr">USER</span>: <span class="hljs-string">"pavel"</span>,
    <span class="hljs-attr">PASSWORD</span>: <span class="hljs-string">""</span>,
    <span class="hljs-attr">DB</span>: <span class="hljs-string">"TODO"</span><font></font>
  };<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¹‹åï¼Œåˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹æ¥æè¿°æˆ‘ä»¬çš„</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åº”ç”¨ç¨‹åº/æ¨¡å¼</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ¨¡å‹</font><font style="vertical-align: inherit;">ï¼Œç„¶ååœ¨å…¶ä¸­åˆ›å»ºä¸€ä¸ªæ¨¡å‹ï¼š</font></font><br>
<br>
<pre><code class="plaintext hljs">  const mysql = require("mysql");<font></font>
  const dbConfig = require("../config/db.config.js");<font></font>
  <font></font>
  //      <font></font>
  const connection = mysql.createConnection({<font></font>
    host: dbConfig.HOST,<font></font>
    user: dbConfig.USER,<font></font>
    password: dbConfig.PASSWORD,<font></font>
    database: dbConfig.DB<font></font>
  });<font></font>
  <font></font>
  //      <font></font>
  connection.connect(err =&gt; {<font></font>
    if (err) throw error;<font></font>
    console.log("    ");<font></font>
  });<font></font>
<font></font>
  module.exports = connection;<font></font>
   //  <font></font>
</code></pre><br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> å»ºç«‹æ¨¡å‹ </font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 åœ¨è¯¥æ–‡ä»¶å¤¹ä¸­</font></font><code>model</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªåä¸ºçš„æ–‡ä»¶</font></font><code>deal.model.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">å¦‚æœä½ æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œä»€ä¹ˆæ˜¯ä¸€èˆ¬çš„æ¨¡å‹ï¼Œä½ åº”è¯¥é˜…è¯»ç­‰çš„ç‰©å“</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¿™</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸MVCè®¾è®¡æ¨¡å¼ç†Ÿæ‚‰ã€‚</font><font style="vertical-align: inherit;">æˆ‘å°†ä¸ºDealå¯¹è±¡åˆ›å»ºä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œå¹¶å°†è¿æ¥ç”¨äºä»¥ä¸‹CRUDå‡½æ•°ï¼š</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> åˆ›å»ºæ–°ä¸šåŠ¡</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> é€šè¿‡IDæŸ¥æ‰¾æ¡ˆä¾‹</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> å¾—åˆ°æ‰€æœ‰æ¡ˆä»¶</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> èƒ½å¤Ÿé€šè¿‡idæ›´æ–°æˆ‘ä»¬çš„æ¡ˆä¾‹</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> é€šè¿‡IDåˆ é™¤ä¸€ä¸ªæ¡ˆä¾‹</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> å®Œå…¨åˆ é™¤æ‰€æœ‰æ¡ˆä»¶</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 æ€»è®¡ï¼Œæˆ‘ä»¬å¿…é¡»æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š</font></font><br>
<br>
<pre><code class="javascript hljs">  <span class="hljs-comment">//   </span>
  <span class="hljs-keyword">const</span> Deal = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">deal</span>) </span>{
    <span class="hljs-keyword">this</span>.text = deal.text;<font></font>
  };<font></font>
  <span class="hljs-comment">//    ,        CRUD,      :</span>
  Deal.create = <span class="hljs-function">(<span class="hljs-params">newDeal, result</span>) =&gt;</span> {<font></font>
    sql.query(<span class="hljs-string">"INSERT INTO TODO SET ?"</span>, newDeal, (err, res) =&gt; {
      <span class="hljs-comment">//   SQL</span>
      <span class="hljs-keyword">if</span> (err) {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"error: "</span>, err);<font></font>
        result(err, <span class="hljs-literal">null</span>);
        <span class="hljs-comment">//   ,     </span>
        <span class="hljs-keyword">return</span>;<font></font>
      }<font></font>
  <font></font>
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">" "</span>, { <span class="hljs-attr">id</span>: res.insertId, ...newDeal });<font></font>
      result(<span class="hljs-literal">null</span>, { <span class="hljs-attr">id</span>: res.insertId, ...newDeal });<font></font>
    });<font></font>
  };<font></font>
<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘å°†å…¶ä½™ä»£ç æ”¾ç½®åœ¨æ‰°æµå™¨ä¸­ï¼Œå› ä¸ºæˆ‘çœ‹ä¸åˆ°ä»»ä½•ç†ç”±å°†å…¶å…¨éƒ¨åŒ…å«åœ¨å†…ï¼Œå› ä¸ºå®é™…ä¸Šåœ¨è¿™é‡Œé‡å¤äº†ä»£ç æ¨¡å¼ï¼Œåªæœ‰sqlå‘½ä»¤å’Œå‚æ•°å‘ç”Ÿäº†å˜åŒ–ï¼š</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å…¶ä½™ä»£ç </font></font></b><div class="spoiler_text"> Deal.findById = (dealId, result) =&gt; {<br>
 sql.query(`SELECT * FROM TODO WHERE id = ${dealId}`, (err, res) =&gt; {<br>
 if (err) {<br>
 console.log(Â«error: Â», err);<br>
 result(err, null);<br>
 return;<br>
 }<br>
 <br>
 if (res.length) {<br>
 console.log(Â« : Â», res[0]);<br>
 result(null, res[0]);<br>
 return;<br>
 }<br>
 <br>
 //     <br>
 result({ kind: Â«not_foundÂ» }, null);<br>
 });<br>
 };<br>
 <br>
 Deal.getAll = result =&gt; {<br>
 sql.query(Â«SELECT * FROM TODOÂ», (err, res) =&gt; {<br>
 if (err) {<br>
 console.log(Â«error: Â», err);<br>
 result(null, err);<br>
 return;<br>
 }<br>
 <br>
 console.log(Â«deals: Â», res);<br>
 result(null, res);<br>
 });<br>
 };<br>
 <br>
 Deal.updateById = (id, deal, result) =&gt; {<br>
 sql.query(<br>
 Â«UPDATE TODO SET text =? WHERE id = ?Â»,<br>
 [deal.text, id],<br>
 (err, res) =&gt; {<br>
 if (err) {<br>
 console.log(Â«error: Â», err);<br>
 result(null, err);<br>
 return;<br>
 }<br>
 <br>
 if (res.affectedRows == 0) {<br>
 result({ kind: Â«not_foundÂ» }, null);<br>
 return;<br>
 }<br>
 <br>
 console.log(Â«  Â», { id: id, ...deal });<br>
 result(null, { id: id, ...deal });<br>
 }<br>
 );<br>
 };<br>
 <br>
 Deal.remove = (id, result) =&gt; {<br>
 sql.query(Â«DELETE FROM TODO WHERE id = ?Â», id, (err, res) =&gt; {<br>
 if (err) {<br>
 console.log(Â«error: Â», err);<br>
 result(null, err);<br>
 return;<br>
 }<br>
 <br>
 if (res.affectedRows == 0) {<br>
 //       id<br>
 result({ kind: Â«not_foundÂ» }, null);<br>
 return;<br>
 }<br>
 console.log(Â«   Â», id);<br>
 result(null, res);<br>
 });<br>
 };<br>
 <br>
 Deal.removeAll = result =&gt; {<br>
 sql.query(Â«DELETE FROM TODOÂ», (err, res) =&gt; {<br>
 if (err) {<br>
 console.log(Â«error: Â», err);<br>
 result(null, err);<br>
 return;<br>
 }<br>
 <br>
 console.log(`deleted ${res.affectedRows} deals`);<br>
 result(null, res);<br>
 });<br>
 };<br>
 <br>
 </div></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç›®å‰ä¸ºæ­¢å°±è¿™æ ·äº†ã€‚</font><font style="vertical-align: inherit;">æœ¬æ–‡çš„ä¸‹ä¸€éƒ¨åˆ†å°†è¦è¿›è¡Œï¼Œåœ¨æ­¤æˆ‘ä»¬å°†å®Œæˆåå†™å¹¶å¼€å§‹å¯¹å…¶è¿›è¡Œæµ‹è¯•ã€‚</font><font style="vertical-align: inherit;">æŒ‰ç…§ä¼ ç»Ÿï¼Œä¸€äº›æœ‰ç”¨çš„é“¾æ¥ï¼š</font></font><br>
<br>
<ul>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å·¥ä½œå’Œå†…éƒ¨è®¾å¤‡express.jsçš„åŠŸèƒ½</font></font></a></li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åŸºæœ¬çš„MySQLå‘½ä»¤</font></font></a></li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> å…³äºHTTPè¯·æ±‚/å“åº”å¾ªç¯çš„ä¸€äº›çŸ¥è¯†</font></font></a> </li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> å¦‚æœæ‚¨æ˜¯åˆå­¦è€…ï¼Œè¯·äº†è§£ä¸€äº›ç®­å¤´åŠŸèƒ½</font></font></a></li>
</ul></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN491384/index.html">ä¿¡æ¯å®‰å…¨è‡ªåŠ¨åŒ–äº‹ä»¶å“åº”å¹³å°</a></li>
<li><a href="../zh-CN491388/index.html">ä»jQueryåˆ°Svelteï¼Œ</a></li>
<li><a href="../zh-CN491398/index.html">WS2813ï¼ŒWS2812Bï¼ŒWS2815å’Œç±»ä¼¼çš„æ•°å­—LEDç¯å¸¦çš„æµ‹è¯•å’Œæ¯”è¾ƒ</a></li>
<li><a href="../zh-CN491404/index.html">é‚ªæ¶ä¸ºå–„æœåŠ¡ï¼šSupervillain 3Dæ‰“å°é¢ç½©å¯ä¿æŠ¤å„¿ç«¥å…å—æ±¡æŸ“çš„ç©ºæ°”</a></li>
<li><a href="../zh-CN491406/index.html">STM32ç¬¬3éƒ¨åˆ†ï¼šç¬¬ä¸€ä¸ªé¡¹ç›®</a></li>
<li><a href="../zh-CN491412/index.html">Salesforceè®¤è¯æŒ‡å—</a></li>
<li><a href="../zh-CN491416/index.html">æœ‰è¶£çš„ç»Ÿè®¡äº‹å®çš„é€‰æ‹©ï¼ƒ5</a></li>
<li><a href="../zh-CN491422/index.html">åªæœ‰å¿—æ„¿è€…æ‰æ˜¯å‰è¿›çš„ä¸€æ­¥</a></li>
<li><a href="../zh-CN491426/index.html">C ++ä¸–ç•Œä¸­çš„Jinja2ï¼Œç¬¬ä¸‰éƒ¨åˆ†ã€‚â€œç°åœ¨ä½ åœ¨æŸ¯å—â€</a></li>
<li><a href="../zh-CN491428/index.html">luré¥®æ•æ·ã€‚ä¸‰å¤©çš„è´£ä»»ï¼Œå¼€æ”¾ï¼Œå‹‡æ°”å’Œå°Šé‡</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>