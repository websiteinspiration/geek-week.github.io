<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤙🏽 🧒🏼 🤚🏿 Arquitetura PHP pura. Como medir e controlar isso? 😸 🤸🏿 👨‍🏫</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Prefácio
 Como você já entendeu pelo nome, aqui vou falar sobre a mais pura arquitetura pura. E o ímpeto para o desenvolvimento de toda essa história ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Arquitetura PHP pura. Como medir e controlar isso?</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/504590/"><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Prefácio</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como você já entendeu pelo nome, aqui vou falar sobre a mais pura arquitetura pura. E o ímpeto para o desenvolvimento de toda essa história foi o livro de Robert Martin, "Arquitetura pura". Se ainda não o li, ouso recomendá-lo! O autor revela muitos tópicos importantes, compartilha ativamente sua rica experiência de vida (de um campo profissional, é claro) e as conclusões feitas com base nisso ocasionalmente tecem em capítulos da história como magistralmente (e não apenas, é claro) nossos pais e avós nos anos 60, 70, 80 e até mesmo nos 90, como grãos de grãos, foram coletados os princípios favoritos de todos do SOLID e seus análogos no mundo dos componentes e o que eles aprenderam nos últimos meio século. No processo de leitura do livro, a linha de desenvolvimento da indústria de desenvolvimento de software é bem traçada, problemas típicos com os quais os garotos tiveram que lidar,e métodos para resolvê-los.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Não pense, recontar o resumo do livro não é o objetivo deste post. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em seguida, falaremos sobre idéias que me levaram a desenvolver uma ferramenta (determinarei o grau de sua utilidade para você e aguardarei comentários, sugestões e críticas construtivas com grande interesse). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Parece-me que o artigo será útil para todos. Aqueles que já estão familiarizados com o livro poderão atualizar alguns de seus momentos em sua memória ou simplesmente pular a primeira parte e começar imediatamente a se familiarizar com a ferramenta. Quem não leu o livro antes pode talvez encontrar algo novo para si na primeira parte.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por conveniência, o artigo está dividido em 2 partes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No primeiro, vou falar sobre as ideias-chave que geraram na minha cabeça o desejo de automatizar tudo isso, somos programadores ou quem no final? </font><font style="vertical-align: inherit;">Aqui citarei muito do autor, além de inserir ativamente trechos e ilustrações de diferentes capítulos do livro. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A segunda parte, quase inteiramente, será dedicada à descrição da ferramenta que apareceu, revelando suas capacidades e orientações passo a passo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se você se considera uma categoria de pessoas levando tudo muito perto do seu coração, recomendo que comece a ler o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Posfácio</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conteúdo</font></font></b>
                        <div class="spoiler_text"><ul>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Parte um</font></font></a><br>
 <ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O que é arquitetura de software?</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Qual é o propósito da arquitetura?</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Onde muitos projetos começam?</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dois valores de produtos de software</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Por que você criou o SOLID e por que não basta o suficiente?</font></font></a></li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conectividade dos componentes e seus princípios determinantes</font></font></a><br>
 <ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">REP: Princípio de equivalência de reutilização / liberação</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PCC: Princípio Comum de Fechamento</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">CRP: Common Reuse Principle</a></li>
</ul><br>
 </li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">     </a><br>
 <ul>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ADP: Acyclic Dependencies Principle</a><br>
 <ul>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">   </a><br>
 <ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">1. DIP (  )</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">2.   </a></li>
</ul><br>
 </li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">  ,    </a></li>
</ul><br>
 </li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">SDP: Stable Dependencies Principle</a><br>
 <ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">    ?</a></li>
</ul><br>
 </li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">SAP: Stable Abstractions Principle</a><br>
 <ul>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">    ?</a><br>
 </li>
</ul><br>
 </li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">     ?</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">   </a></li>
</ul><br>
 </li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">  (. )</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="></a></li>
</ul><br>
 </li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> </a><br>
 <ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">   </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">   .   .</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> PHP Clean Architecture</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">    </a></li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">  </a><br>
 <ul>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">1.    </a><br>
 <ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">  A/I ,   </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">     </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">    </a></li>
</ul><br>
 </li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">2.    </a><br>
 <ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">  </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">  </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">  </a></li>
</ul><br>
 </li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">3.     </a><br>
 <ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">  </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">   / </a></li>
</ul><br>
 </li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> </a><br>
 <ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">  -    </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> - D   </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">  </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Public/Private Class  PHP</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">   ADP  SDP</a></li>
</ul><br>
 </li>
</ul><br>
 </li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">   CI/CD</a><br>
 <ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> </a></li>
</ul><br>
 </li>
</ul><br>
 </li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="></a></li>
</ul><br>
</div>
                    </div><a name="1"></a><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Parte 1</font></font></h2><a name="2"></a><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O que é arquitetura de software?</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Infelizmente, o autor do livro não dá uma definição única. </font><font style="vertical-align: inherit;">Há um grande número de formulações diferentes, e todas estão corretas à sua maneira. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No entanto, podemos ir do outro lado ..</font></font><a name="3"></a><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Qual é o propósito da arquitetura?</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Há apenas uma resposta: </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o objetivo da arquitetura de software é reduzir o trabalho humano necessário para criar e manter um sistema. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um pouco introdutório ..</font></font><a name="4"></a><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Onde muitos projetos começam?</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
"Poderemos restaurar a ordem mais tarde, entraríamos apenas no mercado!" </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como resultado, a ordem não foi restaurada, porque a pressão da concorrência no mercado nunca diminui. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
“A maior mentira que muitos desenvolvedores acreditam é que o código sujo os ajudará a entrar rapidamente no mercado, mas, na realidade, retardará seu movimento a longo prazo. </font><font style="vertical-align: inherit;">Os desenvolvedores que acreditam nessa mentira mostram a arrogância de Hare, acreditando que no futuro poderão passar da criação de desordem para a restauração da ordem, mas cometem um erro simples. </font><font style="vertical-align: inherit;">O fato é que a criação de desordem é sempre mais lenta que a constante observância da limpeza, independentemente da escala de tempo escolhida ".</font></font><a name="5"></a><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dois valores de produtos de software</font></font></h4><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comportamento (algo urgente, mas nem sempre importante)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arquitetura (algo importante, mas nem sempre urgente)</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Muitas vezes se afogam no primeiro e negligenciam completamente o segundo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tipo: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“Por que perder tempo pensando profundamente na arquitetura, o principal é que ela funcione corretamente!”</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas eles perdem um ponto importante: “Se um programa que funcione corretamente não permitir a possibilidade de alterá-lo, ele parará de funcionar corretamente quando os requisitos forem alterados e eles não serão capazes de fazê-lo funcionar corretamente. Ou seja, o programa se tornará inútil. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se o programa não funcionar corretamente, mas puder ser facilmente alterado, eles poderão fazê-lo funcionar corretamente e manter seu desempenho à medida que os requisitos forem alterados. Ou seja, o programa sempre será útil. ” </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gostei desta afirmação:</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Se você acha que uma boa arquitetura é cara, tente uma arquitetura ruim".</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (Brian Foote e Joseph Yoder) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Acontece que </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é importante</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> prestar a devida atenção à limpeza e arquitetura do código em geral desde as primeiras linhas. Mas, se tudo é relativamente claro com a pureza do código (cheire todos os tipos de maus cheiros no código e corrija-o, além de as ferramentas estarem cheias de IDEs inteligentes, analisadores estáticos e outros resíduos indubitavelmente importantes), então a arquitetura não é bem assim (pelo menos menos eu).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como você pode controlar algo que é tão vago que é difícil até mesmo ser definido por uma única frase que tem uma idéia muito versátil e a cada segundo, droga, merda vê e tenta interpretá-lo de sua própria maneira, se você não é neto de Vanga, não ganhou o programa "Intuição ”E o quinto ponto não é particularmente sensível? </font><font style="vertical-align: inherit;">Então o autor do livro lança alguns pensamentos valiosos para o pensamento ... Vamos resolver isso.</font></font><a name="6"></a><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Por que você criou o SOLID e por que não basta o suficiente?</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todos nós provavelmente conhecemos os princípios do SOLID. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Seu objetivo</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> é criar estruturas de software de nível médio que:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tolerante à mudança;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">simples e compreensível;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">formam a base para componentes que podem ser usados ​​em muitos sistemas de software.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas: “Assim como tijolos bons podem formar uma parede inutilizável, componentes tão bem projetados do nível médio podem criar um sistema inutilizável.” </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Portanto, no mundo dos componentes, existem análogos dos princípios do SOLID, bem como princípios de alto nível para a criação de arquiteturas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vou abordar esses tópicos muito superficialmente, mais detalhes podem ser encontrados no livro. </font><font style="vertical-align: inherit;">Vamos lá!</font></font><a name="7"></a><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conectividade dos componentes e seus princípios determinantes</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
“A qual componente essa ou aquela classe pertence? </font><font style="vertical-align: inherit;">Essa importante decisão deve ser tomada de acordo com os princípios estabelecidos de desenvolvimento de software. </font><font style="vertical-align: inherit;">Infelizmente, essas decisões são de natureza especial e são tomadas quase exclusivamente com base no contexto. ”</font></font><a name="8"></a><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">REP: </font></font></b> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Princípio de equivalência de reutilização / liberação - O princípio de equivalência de reutilização e liberações.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Em termos de arquitetura e design, esse princípio significa que as classes e módulos que compõem um componente devem pertencer a um grupo conectado. Um componente não pode simplesmente incluir uma mistura aleatória de classes e módulos; Deve haver algum tema ou objetivo comum a todos os módulos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Classes e módulos combinados em um componente devem ser liberados juntos.</font></font><a name="9"></a><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PCC: </font></font></b> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Princípio Comum de Fechamento - o princípio da mudança consistente.</font></font></i><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Esse é o princípio do SRP (responsabilidade única) reformulado para os componentes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Classes que mudam pelos mesmos motivos e ao mesmo tempo devem ser incluídas em um componente. Componentes diferentes devem incluir classes que mudam em momentos diferentes e por vários motivos.</font></font><a name="10"></a><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CRP: </font></font></b> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Princípio Comum de Reutilização - O princípio da reutilização compartilhada.</font></font></i><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Esse princípio é semelhante ao ISP (segregação de interface). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Não force os usuários a depender do que eles não precisam. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O princípio indica que as classes que não estão intimamente relacionadas não devem ser incluídas em um componente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
“Talvez você já tenha notado que os três princípios dos componentes conectados entram em conflito um com o outro. Os princípios de equivalência de reutilização (REP) e mudança consistente (CCP) são inclusivos: ambos se esforçam para tornar os componentes tão grandes quanto possível. O Princípio de Reutilização (CRP) é excepcional, buscando tornar os componentes o menor possível. A tarefa de um bom arquiteto é resolver essa contradição. ”</font></font><br>
<br>
<img src="https://habrastorage.org/webt/to/sk/yl/toskylulwgshxendjozwzjf9sly.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
“No passado, vimos a conectividade mais facilmente do que sugerem os princípios de equivalência de reutilização (REP), mudança consistente (CCP) e reutilização compartilhada (CRP). Uma vez que pensamos que a conectividade é apenas um atributo, que um módulo executa uma e apenas uma função. No entanto, os três princípios da conectividade de componentes descrevem uma variedade muito mais complexa. Ao escolher classes para inclusão em componentes, você deve considerar as forças opostas associadas à facilidade de reutilização e desenvolvimento. Encontrar um equilíbrio dessas forças com base nas necessidades do aplicativo não é uma tarefa fácil. Além disso, a balança é quase sempre constantemente alterada. Ou seja, a partição considerada bem-sucedida hoje pode não ser bem-sucedida após um ano. Consequentemente,a composição dos componentes quase certamente mudará com o tempo e o foco do projeto mudará da facilidade de desenvolvimento para a facilidade de reutilização. ”</font></font><a name="11"></a><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Compatibilidade de componentes</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
“Os três princípios a seguir definem as regras para o relacionamento entre componentes. </font><font style="vertical-align: inherit;">E, novamente, somos confrontados com contradições entre facilidade de desenvolvimento e organização lógica. </font><font style="vertical-align: inherit;">As forças que afetam a arquitetura da estrutura dos componentes são técnicas, políticas e voláteis. ”</font></font><a name="12"></a><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ADP: </font></font></b> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Princípio das Dependências Acíclicas - o princípio da aciclicidade das dependências. </font></font></i><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Não são permitidos loops no gráfico de dependência de componentes! </font></font><br>
<br>
<img src="https://habrastorage.org/webt/r0/od/sf/r0odsfch_htpxpurtonelpiy-em.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De qualquer componente exibido no gráfico, você começa a se mover ao longo das setas que indicam a direção da dependência, não será possível retornar ao ponto original. </font><font style="vertical-align: inherit;">Este é um gráfico orientado acíclico (DAG - Directed Acyclic Graph). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ib/wg/d8/ibwgd8xnihw0qilpi7i32rvaxkk.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nesta imagem, temos uma dependência que leva ao aparecimento de um ciclo. </font><font style="vertical-align: inherit;">A dependência cíclica resultante pode sempre ser interrompida.</font></font><a name="13"></a><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Métodos para quebrar dependências cíclicas</font></font></h4><a name="14"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1. Aplicando DIP (princípio de inversão de dependência)</font></font><br>
<br>
<img src="https://habrastorage.org/webt/oy/dp/8b/oydp8bixvzlwccqadsmdnrqqtdi.png" alt="imagem"><a name="15"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2. Introdução do novo componente </font></font><br>
<br>
<img src="https://habrastorage.org/webt/2e/51/ty/2e51tyj9bfrfimyiqxgzrqqc6ds.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
“A segunda solução envolve a dependência da estrutura dos componentes em relação à mudança de requisitos. </font><font style="vertical-align: inherit;">De fato, à medida que o aplicativo cresce, a estrutura das dependências de componentes cresce e muda. </font><font style="vertical-align: inherit;">Portanto, ele deve ser constantemente verificado quanto a ciclos. </font><font style="vertical-align: inherit;">Quando os ciclos se formam, eles precisam ser interrompidos de uma maneira ou de outra. </font><font style="vertical-align: inherit;">Às vezes, para isso, é necessário criar novos componentes, o que aumenta a estrutura das dependências. ”</font></font><a name="16"></a><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Design de cima para baixo, ou melhor, sua impraticabilidade</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
“A estrutura dos componentes não pode ser projetada de cima para baixo. Essa conclusão não é alcançada imediatamente assim que eles começam a projetar o sistema, mas isso inevitavelmente acontece com o crescimento e a mudança do sistema. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Considerando um grande diagrama de blocos, como a estrutura das dependências de componentes, acreditamos que os componentes devem, de alguma forma, representar as funções do sistema. Mas, na realidade, esse não é um atributo indispensável dos diagramas de dependência de componentes.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De fato, os diagramas de dependência dos componentes refletem fracamente as funções do aplicativo. Em maior medida, são um reflexo da conveniência de montagem e manutenção do aplicativo. Esta é a principal razão pela qual eles não são projetados no início do desenvolvimento do projeto. Durante esse período, não há software que precise ser coletado e mantido; portanto, não há necessidade de elaborar um mapa de construção e manutenção. Mas com o advento de um número crescente de módulos nos estágios iniciais de implementação e design, a necessidade de gerenciar dependências aumenta ... Além disso, há um desejo de limitar o impacto das mudanças o máximo possível, então começamos a prestar atenção aos princípios de responsabilidade única (SRP) e mudança coordenada (CCP) e combinamos as classes, o que provavelmente mudará juntos.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Uma das principais tarefas dessa estrutura de dependência é o isolamento da variabilidade. Não precisamos de componentes que geralmente mudam pelos menores motivos e afetam outros componentes que seriam completamente estáveis. Por exemplo, alterações cosméticas na GUI não devem afetar as regras de negócios. Adicionar e modificar relatórios não deve afetar políticas de alto nível. Consequentemente, um gráfico de dependência de componentes é criado e criado pelos arquitetos para proteger componentes estáveis ​​e valiosos da influência de componentes voláteis.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
À medida que o aplicativo se desenvolve, começamos a nos preocupar com a criação de itens reutilizáveis. Nesta fase, o princípio da reutilização compartilhada (CRP) começa a influenciar a composição dos componentes. Finalmente, com o advento dos loops, começamos a aplicar o princípio da aciclicidade de dependência (ADP), como resultado, o gráfico de dependência dos componentes começa a mudar e crescer. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Uma tentativa de projetar a estrutura de dependência dos componentes antes de qualquer classe provavelmente falhará. Nesse estágio, não sabemos quase nada sobre a reconciliação de mudanças, não imaginamos quais elementos podem ser usados ​​repetidamente e quase certamente criaremos componentes que formam dependências cíclicas. Portanto, a estrutura das dependências de componentes deve crescer e se desenvolver juntamente com o design lógico do sistema ”</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ei, você ainda está aqui? </font><font style="vertical-align: inherit;">Cara, isso é importante, você precisa dizer olá para isso, pelo menos, para inserir o significado da próxima parte, haverá um tutorial bruto sobre o uso do tulza.</font></font><a name="17"></a><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SDP: </font></font></b> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">princípio das dependências estáveis ​​- o princípio das dependências estáveis. </font></font></i> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As dependências devem ser direcionadas para a estabilidade! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
“O que se entende por“ sustentabilidade ”? </font><font style="vertical-align: inherit;">Imagine uma moeda em uma borda. </font><font style="vertical-align: inherit;">A posição dela é estável? </font><font style="vertical-align: inherit;">Muito provavelmente você responderá "não". </font><font style="vertical-align: inherit;">No entanto, se você o proteger de vibrações e sopros de vento, ele poderá permanecer nessa posição por um período arbitrariamente longo. </font><font style="vertical-align: inherit;">Ou seja, a sustentabilidade não está diretamente relacionada à frequência das mudanças. </font><font style="vertical-align: inherit;">A moeda não muda, mas dificilmente alguém dirá que, de pé na borda, está em uma posição estável.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O dicionário explicativo diz que sustentabilidade é "a capacidade de manter a condição de alguém sob influências externas". A sustentabilidade está relacionada à quantidade de trabalho que precisa ser feito para mudar de estado. Por um lado, uma moeda que está em uma borda está em um estado instável porque é preciso um pequeno esforço para derrubá-la. Por outro lado, a mesa está em uma condição muito estável, porque requer um esforço muito mais substancial para derrubá-la.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O que tudo isso tem a ver com software? </font><font style="vertical-align: inherit;">Existem muitos fatores que complicam a alteração de um componente, como tamanho, complexidade e clareza. </font><font style="vertical-align: inherit;">Mas deixaremos de lado todos esses fatores e focaremos em outra coisa. </font><font style="vertical-align: inherit;">Há uma maneira infalível de dificultar a alteração de um componente de software, criando muitos outros componentes que dependem dele. </font><font style="vertical-align: inherit;">Um componente com muitas dependências recebidas é muito estável, porque reconciliar alterações com todos os componentes dependentes exige um esforço considerável ".</font></font><br>
<br>
<img src="https://habrastorage.org/webt/rp/pr/x8/rpprx8mwmw7dhsnchmfpiybhy_q.png" alt="imagem"><br>
<br>
<img src="https://habrastorage.org/webt/sk/1b/gz/sk1bgzciqhgtwbbf32tnhhp6nig.png" alt="imagem"><a name="18"></a><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como avaliar a estabilidade do componente? </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O autor sugere calcular o número de suas dependências recebidas e enviadas e, com base nas mesmas, calcular a medida de sua estabilidade.</font></font><br>
<br>
<ul>
<li><b>Fan-in ( ):</b>   .        ,      .</li>
<li><b>Fan-out ( ):</b>   .        ,      .</li>
<li><b>I:</b> : <i><b>I = Fan-out ÷ (Fan-in + Fan-out)</b></i>.       [0, 1]. I = 0    , I = 1 –  .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Portanto, esse princípio diz que a métrica do componente I deve ser maior que a métrica dos componentes I que dependem dele. Ou seja, as métricas que devo diminuir na direção da dependência. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
É importante observar que, se todos os componentes do sistema forem o mais estáveis ​​possível, esse sistema não poderá ser alterado. Portanto, nem todos os componentes devem ser estáveis. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cara, não adormeça, eu estou perto. Só falta um pouco!</font></font><a name="19"></a><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SAP: </font></font></b> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">princípio das abstrações estáveis ​​- o princípio da estabilidade das abstrações.</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> A estabilidade de um componente é proporcional à sua abstração. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
“Algumas partes dos sistemas de software devem mudar muito raramente. Essas peças representam decisões arquitetônicas de alto nível e outras decisões importantes. Ninguém quer que essas decisões sejam voláteis. Portanto, o software que encapsula regras de alto nível deve residir em componentes estáveis ​​(I = 0). Volátil (I = 1) deve conter apenas código mutável - um código que pode ser alterado fácil e rapidamente.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas se você colocar regras de alto nível em componentes estáveis, isso complicará a alteração no código-fonte que as implementa. Isso pode tornar toda a arquitetura inflexível. Como tornar um componente com estabilidade máxima (I = 0) tão flexível que permaneça estável durante as mudanças? A resposta está no princípio de abertura / fechamento (OCP). Este princípio diz que é possível e necessário criar classes suficientemente flexíveis para que possam ser herdadas (estendidas) sem alterações. Quais classes cumprem esse princípio? Resumo.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O SAP (o princípio da estabilidade das abstrações) estabelece uma conexão entre estabilidade e abstração. Por um lado, ele diz que um componente estável também deve ser abstrato para que sua estabilidade não impeça a expansão e, por outro lado, ele diz que um componente instável deve ser concreto, porque a instabilidade facilita a alteração de seu código. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ou seja, um componente estável deve consistir em interfaces e classes abstratas para que possa ser facilmente estendido. Os componentes resilientes disponíveis para expansão são flexíveis o suficiente para não restringir excessivamente a arquitetura.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os princípios de estabilidade de abstrações (SAP) e dependências estáveis ​​(SDP) juntos correspondem ao princípio de inversão de dependência (DIP) para componentes. Isso é verdade porque o princípio do SDP exige que as dependências sejam direcionadas à sustentabilidade, e o princípio do SAP declara que a sustentabilidade implica abstração. Ou seja, as dependências devem ser direcionadas à abstração. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No entanto, o princípio DIP é formulado para classes e, no caso de classes, não há meios-tons. A classe é abstrata ou não. Os princípios do SDP e do SAP se aplicam aos componentes e permitem uma situação em que um componente é parcialmente abstrato ou parcialmente estável. ”</font></font><a name="20"></a><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como medir a abstração de um componente? </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aqui também tudo é muito simples. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O valor da medida do componente abstrato é determinado pela razão entre o número de suas interfaces e classes abstratas e o número total de classes.</font></font><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nc: o</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> número de classes no componente.</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Na: o</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> número de classes abstratas e interfaces no componente.</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> resumo. </font></font><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A = Na ÷ Nc</font></font></b></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O valor da métrica A varia no intervalo de 0 a 1. 0 significa a ausência completa de elementos abstratos no componente e 1 significa que o componente contém apenas classes e interfaces abstratas. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dependência entre I e A</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Se você plotar no gráfico (Y - abstração, X - instabilidade) componentes “bons” de ambos os tipos: abstrato estável e concreto instável, obtemos o seguinte: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/o9/ti/uu/o9tiuuubqfxevrke6rmxoi8xvt4.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas, porque os componentes têm diferentes graus de abstração e estabilidade, longe de cair nesses 2 pontos (0, 1) ou (1, 0), e como é impossível exigir que todos os componentes estejam neles, devemos assumir que no gráfico A / Existem alguns pontos que determinam as posições ideais para os componentes.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esse conjunto pode ser derivado pela definição de áreas onde os componentes não devem estar localizados - em outras palavras, a definição de zonas de exclusão.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/1d/q0/6u/1dq06uddhrif323kzrg2ymdlgwa.png" alt="imagem"><a name="21"></a><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zona de dor</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Considere os componentes localizados perto do ponto (0, 0). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eles são muito estáveis ​​e específicos. Tais componentes são indesejáveis, pois são muito difíceis. Eles não podem ser expandidos, porque não são abstratos e é muito difícil mudar devido à sua grande estabilidade. Quanto mais mudamos o componente que entra na zona de dor, mais ela traz. Isto é devido à complexidade de sua mudança. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Normalmente, os componentes projetados corretamente não devem estar próximos do ponto (0, 0). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No entanto, na realidade, existem entidades de software que se enquadram nessa zona. Por exemplo, o esquema do banco de dados, é o mais específico possível e muitas dependências se estendem para ele. Esse é um dos motivos pelos quais as alterações no esquema do banco de dados geralmente estão associadas a grandes problemas.</font></font><a name="22"></a><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zona inútil</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Considere os componentes localizados perto do ponto (1, 1). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tais componentes também são indesejáveis, porque eles são tão abstratos quanto possível e não têm dependências. Eles são simplesmente inúteis. Freqüentemente, essas são classes abstratas que nunca foram implementadas.</font></font><a name="23"></a><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como evitar entrar em zonas de exclusão?</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Coloque os componentes próximos ou na sequência principal. Tais componentes não são "abstratos demais" por sua estabilidade e "instáveis ​​demais" por sua abstração. Eles não são inúteis e não causam muita dor. Outros componentes dependem deles na extensão de sua abstração, e eles mesmos dependem dos outros na extensão da especificidade. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As posições mais desejáveis ​​para os componentes são os pontos finais da sequência principal. No entanto, em sistemas grandes, sempre haverá vários componentes que não são suficientemente abstratos e não são estáveis ​​o suficiente. Tais componentes têm excelentes características quando localizados na sequência principal ou nas proximidades.</font></font><a name="24"></a><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A distância para a sequência principal</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Como é desejável que o componente esteja localizado na sequência principal ou próximo a ela, é possível determinar uma métrica que expresse a distância do componente ao ideal.</font></font><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> distância. </font></font><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D = | A + I - 1 | </font></font></b></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Essa métrica usa valores do intervalo [0, 1]. </font><font style="vertical-align: inherit;">Um valor 0 indica que o componente está diretamente na sequência principal. </font><font style="vertical-align: inherit;">Um valor 1 indica que o componente está localizado na distância máxima da sequência principal.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ao adotar essa métrica, você pode explorar todo o design próximo à sequência principal. </font><font style="vertical-align: inherit;">A métrica D pode ser calculada para qualquer componente. </font><font style="vertical-align: inherit;">Qualquer componente com um valor métrico D longe de zero requer revisão e reestruturação.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gw/3n/a0/gw3na07fmc40y8-r72hoqro8wrq.png" alt="imagem"><a name="25"></a><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusão do autor (Robert Martin)</font></font></h3> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
“As métricas de gerenciamento de dependência descritas neste capítulo ajudam a quantificar a consistência da estrutura de dependência e abstração do design com o que eu chamo de design“ bom ”. A experiência mostra que existem boas dependências, existem más. Essa classificação reflete essa experiência. No entanto, as métricas não são a verdade última; estas são apenas medidas baseadas em um padrão arbitrário. Essas métricas são imperfeitas - na melhor das hipóteses, mas espero que você as ache úteis. ”</font></font><a name="26"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cara, fico feliz se você ainda estiver comigo. </font><font style="vertical-align: inherit;">Isso é tudo com a primeira parte. </font><font style="vertical-align: inherit;">Embora ainda haja muitos tópicos, os pensamentos detalhados do autor não foram afetados. </font><font style="vertical-align: inherit;">Ainda assim, o principal objetivo do meu artigo não é recontar o livro; caso contrário, você ficaria mais satisfeito em ler o original. </font><font style="vertical-align: inherit;">Eu, subi e já fui especificamente longe demais com a quantidade de conteúdo, mas serei bastardo, tentei não inflar o máximo que pude. </font><font style="vertical-align: inherit;">Volta!</font></font><a name="27"></a><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Segundo dia. </font><font style="vertical-align: inherit;">Umm, ou seja, </font><font style="vertical-align: inherit;">Parte 2</font></font></h2><a name="28"></a><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Introdução</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O que eu tenho passado por tanto tempo? "Ah, sim ... Somos como arquitetos, ou realmente queremos ser eles, certo?" </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O que nós temos? - Algum tipo de projeção miserável, ou talvez um sistema monstruoso, PROJECT, sua mãe, bem, ou finalmente ainda não há nada, mas apenas esfregamos as mãos, olhamos o calendário e descobrimos o quão bem teremos que conversar. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Não existem nós, eu trabalho sozinho! Ou talvez nós, com um ajudante, na garagem, estivéssemos preenchendo uma nova Apple, por que não? Bem, ou somos o exército e todos fazemos parte de uma empresa robusta, estamos trabalhando duro, como os negros dos pobres em casa (ou seja, os afro-americanos, é claro, você entende), ou talvez estejamos chutando em silêncio para não sermos demitidos. Por um salário alto, com bônus, biscoitos e uma vista da cidade de Moscou ou por puro entusiasmo, por uma idéia e uma participação em uma startup que naturalmente fica um inferno quando decola.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Na verdade, isso não importa. </font><font style="vertical-align: inherit;">O que é importante é isso: todos nós, no final, simplesmente queremos que nossa ideia não se dobre prematuramente, bem, pelo menos antes de nossa partida, e há todas as chances disso. </font><font style="vertical-align: inherit;">Sim, sim ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E o que fazer agora, você pergunta? </font><font style="vertical-align: inherit;">Então, se você não tem um irmão mais velho no escritório, o irmão não pode ficar sem um terceiro olho.</font></font><a name="29"></a><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Resumo da primeira parte</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Na última parte do artigo, falamos um </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pouco</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sobre métricas que permitem </font><s><font style="vertical-align: inherit;">aos</font></s><font style="vertical-align: inherit;"> arquitetos </font><s><font style="vertical-align: inherit;">medir seus</font></s><font style="vertical-align: inherit;"> números em números para refletir o grau de qualidade da arquitetura de seu sistema. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - abstração do componente </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - instabilidade do componente </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - distância da sequência principal no gráfico </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A / I</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Foram </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
reveladas </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zonas erógenas das zonas de </font></font></s><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dor</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">futilidade</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Chegamos à conclusão de que, idealmente, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> deve aumentar e diminuir proporcionalmente a uma diminuição e, consequentemente, um aumento em </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Componentes bem projetados devem estar na ou pelo menos perto da sequência principal, ou seja, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> deve estar o mais próximo possível de zero e as dependências entre os componentes devem ser acíclicas e direcionadas à estabilidade. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eu também espero que todos entendam que alguns componentes podem conhecer muitos outros, enquanto outros não devem saber nada. Assim como nos estados escravistas antes da chegada do bom tio Abraão, pelo contrário, os negros (no sentido de afro-americanos) não eram permitidos nichrome (em termos de conhecimento e não apenas); no nosso caso, os componentes mais importantes do sistema deveriam ter um mínimo de conhecimento, eles deve ser auto-suficiente e abstrato a partir de diferentes detalhes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E o terceiro olho? </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arquitetura Limpa PHP</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- uma ferramenta que surgiu como resultado da leitura de um livro, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">graças ao tio Bob</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (Robert Martin) por pensamentos valiosos e desejo louco de visualizar tudo, pela conveniência da análise e automatizar, pela possibilidade de incluir várias verificações no CI / CD (semelhante ao PHPStan, Phan e outros, apenas para identificar exatamente problemas arquitetônicos).</font></font><a name="30"></a><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ferramenta e projeto de teste. </font><font style="vertical-align: inherit;">Introdução ao tópico</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fuf, tudo parece ser uma teoria ... Agora você pode até </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sujar as mãos</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para obter detalhes. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E então para mim agora não tenho cavalos abstratos no vácuo para esfregar, e você tem o fim da leitura menos motivo para me chamar de mudiloy, por causa do qual você </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fodeu</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> gastou tanto tempo, eu tinha que </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">prosrat</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> gastar um pouco dele e preparar uma demonstração projeto, que, sobstna, agora vamos fazer hara-kiri. Para os caras “superdotados” que, sem dúvida, serão e querem sair nos comentários, sobre seus detalhes, enfatizo - </font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">este</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> é </font><u><font style="vertical-align: inherit;">um projeto DEMO</font></u><font style="vertical-align: inherit;"> .</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Piquei em cerca de meio dia, grosso modo, no joelho da minha namorada. Afinal, não posso levar e escoar para o público em geral os detalhes dos projetos de combate com os quais tenho que trabalhar ... Os caras dos feridos não vão entender, eles vão me mostrar, mas eu preciso disso? Bem, se você é um rapaz simples, não um dos "particularmente destacados", sou péssimo por uma introdução tão longa, só tive que correr os riscos e reduzir a ameaça potencial de procriação nos comentários dos bazares sobre nada. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Portanto, o próprio projeto está aqui </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github.com/Chetkov/php-clean-architecture-example-project</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No futuro, ele poderá se tornar uma loja on-line completa. Eu sou certamente um perfeccionista feroz, mas você precisa ser um </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">absurdo completo</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">comedor de sol e fígado longo, além de sofrer de insônia, a fim de gastar tanto tempo no “coelho experimental” e na moda doces dele. Como você entende, este projeto </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nunca</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> será levado à sua conclusão lógica </font><font style="vertical-align: inherit;">, no entanto, como todos os outros, até projetos de combate. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Embora não seja tão ruim. No momento, possui: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">usuário, produto e pedido</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , bem como cenários: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">registro do usuário, alteração de senha, adição de um produto e reserva de um pedido</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O projeto está mais ou menos funcionando, você pode cloná-lo e executar scripts a partir da pasta sandbox, embora, na verdade, eu nem conseguisse fazer isso, porque para a análise da arquitetura, o projeto não requer operacionalidade.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No futuro, lançarei links para confirmações específicas para corrigir imediatamente os pontos técnicos descritos no artigo. </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Estado inicial</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
: suponho que você já tenha se familiarizado com a estrutura. </font><font style="vertical-align: inherit;">Para que possamos seguir em frente.</font></font><a name="31"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nós </font><font style="vertical-align: inherit;">incluímos a </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">arquitetura limpa do PHP</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<pre><code class="bash hljs">composer require v.chetkov/php-clean-architecture:0.0.3</code></pre><a name="32"></a><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Criamos e configuramos o arquivo de configuração</font></font></a><a name="33"></a><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Visualização para análise</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Executamos no console (na raiz do projeto):</font></font><br>
<br>
<pre><code class="bash hljs">vendor/bin/phpca-build-reports</code></pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ou </font></font><pre><code class="bash hljs">vendor/bin/phpca-build-reports /path/to/phpca-config.php</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E em resposta, obtemos:</font></font><br>
<br>
<pre><code class="bash hljs">Report: /path/to/reports-dir/index.html</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O relatório consiste em 3 telas:</font></font><a name="34"></a><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. Informações gerais sobre o sistema</font></font></b><br>
<br>
<img src="https://habrastorage.org/webt/pu/fx/qr/pufxqrtzh84_faltmuyavha60na.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Essa tela exibe:</font></font><a name="35"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O mesmo </font><font style="vertical-align: inherit;">gráfico </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A / I</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mostrando a dispersão dos componentes:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/om/ef/ba/omefbattpqlmig8toha6fkaiebo.png" alt="imagem"><a name="36"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gráfico mostrando a distância dos componentes da sequência principal:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/1o/wc/c4/1owcc49v0-3xpt2ty6tlake7iu4.png" alt="imagem"><a name="37"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E um gráfico mostrando os relacionamentos entre os componentes: As </font></font><br>
<br>
<img src="https://habrastorage.org/webt/i-/g5/gu/i-g5guwpecojz4hflw0v52pfsau.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
setas indicam a direção das dependências e os números nelas indicam a força da conexão. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Porque Os IDEs modernos fornecem uma maneira fácil de refatorar (eles mesmos encontram e corrigem todas as áreas em que o método ou a classe é explicitamente chamado, por exemplo, ao renomear ou transferir para outro espaço de nome), peguei o número de elementos do módulo de dependência usado pelo módulo dependente para melhorar a comunicação. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por exemplo: os elementos do módulo de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">serviços</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> conhecem 12 elementos do módulo de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">modelo</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e os elementos de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">infraestrutura</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> conhecem 1 elemento de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">serviços</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Etc. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A propósito, o que é </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">* indefinido *</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">? </font><font style="vertical-align: inherit;">Bro, a pergunta esperada. </font><font style="vertical-align: inherit;">Este é um módulo criado automaticamente para todos os elementos que, durante a análise do sistema, não puderam ser atribuídos a nenhum dos conhecidos (ou seja, aqueles listados no arquivo de configuração). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se você corrigir a configuração desta maneira: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/cm/2i/e7/cm2ie7i06bwj3ygr6qur5hwsrqq.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No processo de análise do sistema, os pacotes conectados via compositor também serão levados em consideração (eles mesmos não serão digitalizados, mas a imagem ficará muito mais completa). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A propósito, em </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vendor_path,</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> você precisa especificar o caminho para o diretório do fornecedor e em </font><font style="vertical-align: inherit;">caminhos </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">excluídos</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para os diretórios dos pacotes que queremos excluir (por exemplo, se descrevermos algum pacote na principal configuração dos módulos para verificação). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Depois de ativar </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vendor_based_modules</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> o gráfico mudou, embora não tenhamos alterado a configuração dos próprios módulos</font></font><br>
<br>
<img src="https://habrastorage.org/webt/-k/ll/vn/-kllvnfj6fdxmxzofi3wnya1gkg.png" alt="imagem"><a name="38"></a><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. Informações detalhadas sobre o componente</font></font></b><br>
<br>
<img src="https://habrastorage.org/webt/t2/ha/tp/t2hatp-gycfkeb2ytwctj4gdgvs.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Aqui também vemos:</font></font><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gráfico de interconexões</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , mas não de todo o sistema, mas apenas dos componentes envolvidos</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gráfico A / I</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mostrando apenas o componente atual</font></font><a name="39"></a></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Principais recursos do</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> módulo</font></font><br>
<br>
<img src="https://habrastorage.org/webt/op/ma/rd/opmardxolzmxvfkk-qeefl43tba.png" alt="imagem"></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
e</font></font><a name="40"></a><br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gráfico de dependência de saída</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mostrando o número e a lista de arquivos no módulo atual, dependendo dos arquivos de outros módulos.</font></font></li>
<li><img src="https://habrastorage.org/webt/tn/95/el/tn95elws4c7m-7umkpep_wgfcvo.png" alt="imagem"></li>
</ul><a name="41"></a><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">E um </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gráfico das dependências recebidas</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , mostrando o número e a lista de arquivos em outros módulos, dependendo do módulo atual.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/kc/f_/hf/kcf_hfe1kqsm1emfwvzfqrpwfp4.png" alt="imagem"></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os últimos 2 gráficos, na minha opinião, são especialmente interessantes, porque </font><font style="vertical-align: inherit;">é fácil encontrar dependências indesejadas sobre eles, mas mais sobre isso mais tarde.</font></font><a name="42"></a><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. Informações detalhadas sobre o elemento componente</font></font></b><br>
<br>
<img src="https://habrastorage.org/webt/hl/mn/am/hlmnamudgfqzimh7ec9qscm56pc.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Aqui você pode ver:</font></font><a name="43"></a><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Principais características do</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> elemento, como </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">abstração de tipo, instabilidade, primitivo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e a </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">qual componente pertence</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o modificador de acesso</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
"Che, um modificador de acesso à classe em PHP?" </font><font style="vertical-align: inherit;">- você diz, perfurando um buraco na área do templo com o dedo, certo? </font><font style="vertical-align: inherit;">Não se apresse, eu sei que não há aulas particulares no calor, mas seria legal se elas fossem? </font><font style="vertical-align: inherit;">Em geral, mais sobre isso mais tarde.</font></font><a name="44"></a><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gráfico de dependência</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que reflete a interação do elemento em consideração com outros elementos do sistema</font></font></li>
</ul><a name="45"></a><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">E </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tablets com dependências de saída e entrada</font></font></b><br>
<br>
<img src="https://habrastorage.org/webt/w4/ay/lf/w4aylfkiqu9jxs4ik8ils0asgpw.png" alt="imagem"></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Com a descrição das telas finalizadas, vá para as configurações para escolher como ele pode ser configurado.</font></font><a name="46"></a><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Opções de configuração</font></font></h4><a name="47"></a><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Limitando a distância máxima permitida à sequência principal (para todos os componentes)</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Primeiro, vamos tentar definir todos os componentes para a distância máxima permitida para a sequência principal. Seria tolice pensar que todos eles estarão na diagonal principal, porque o mundo não é perfeito, então sejamos realistas. Eu faço </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,3</font></font></b><br>
<br>
<img src="https://habrastorage.org/webt/ky/cg/l7/kycgl7xitjnerrvsaw-duklidfy.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Reiniciar o comando de geração de relatório e ver imediatamente a violação na página principal. O componente do </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">modelo</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> excede a distância permitida em </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,192</font></font></b><br>
<br>
<img src="https://habrastorage.org/webt/nq/1l/nk/nq1lnkttwkz2ukpybccin99sarg.png" alt="imagem"><a name="48"></a><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Limitando a distância máxima permitida para a sequência principal (para um componente específico)</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
É ótimo, mas vamos assumir que é o componente do </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">modelo</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> que </font><font style="vertical-align: inherit;">pode violar essa restrição. Coisas diferentes acontecem ... Afinal, muitas vezes já não temos sistemas ideais com os quais temos que trabalhar, apoiá-los e melhorar. Alguém entende que ninguém será capaz de reduzir rapidamente essa distância, mesmo provavelmente com um deus (espero que ele me perdoe). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Na minha opinião, o principal é corrigir o estado atual, trabalhar em direção a melhorias e controlar a situação para não agravar. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Novamente, vá para a configuração e defina </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">max_allowable_distance</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , apenas para um módulo específico. Eu fixo em seu valor atual </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,492</font></font></b><br>
<br>
<img src="https://habrastorage.org/webt/cz/nh/3y/cznh3ykeuoalp65gflqjxg0tlag.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ZBS, agora tudo está normal novamente. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/-z/pq/2u/-zpq2um__xoxqtdyqy2sw81xa0m.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas se, com alguns ** ka Vasya, ele fumar algo de novo e piorar - </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">corte as mãos!</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Um CI / CD que inclui a execução do comando </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">phpca-check</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (falaremos sobre isso mais tarde) o repreende, talvez até uma linguagem suja, e é claro que destacará erros.</font></font><a name="49"></a><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Controle de dependência de componentes</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
O que mais seria bom ter em nosso arsenal para lidar com uma arquitetura ruim? Claro, controle de dependência. Quem pode saber sobre quem, ou vice-versa, não deve saber. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O que você acha que pode a parte mais central do sistema, digamos, o </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">domínio</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , para que seja completamente possível ao DDDowski saber algo sobre alguma </font><font style="vertical-align: inherit;">infraestrutura </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fedorenta</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ? </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Claro que sim, para alguns, é diretamente um atributo de sucesso (bem, estou falando daqueles que tornam o HTML misturado à lógica de negócios). Mas finalmente, como seja, eu não deveria ... eu certamente xs, mas todos os tipos de tipos inteligentes de livros dizem que isso não é patsansky. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Então vamos mexer assim ... Tudo está no mesmo lugar, na configuração de restrições para o </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">modelo</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<img src="https://habrastorage.org/webt/t9/d-/vq/t9d-vqmz0wzxd9axkfmlise2e1y.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hmm ... Até agora, todas as regras, porque</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">modelo</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sobre </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">infraestrutura</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> realmente não sabe de nada ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bem, então vamos nos divertir ... A estupidez é certamente rara, mas não achei nada melhor. Krch, no momento da criação do usuário, enviaremos o SMS e, no momento da criação do pedido, enviaremos os emails. E fazer isso através de implementações específicas de notificadores que estão na </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">infraestrutura</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github.com/Chetkov/php-clean-architecture-example-project/commit/6bad365176b30999035967319a9c07fae69fabf9</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Agora, examinamos o relatório ... Como podemos ver, os gráficos nas diferentes páginas do relatório destacam essa conexão como ilegítima. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Casa. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/k1/ti/e_/k1tie_5t4puunp-vo9cemwfgcu8.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Relatório de componentes. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/xw/r1/qv/xwr1qvfggdbhblauxmfekjbfnfs.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nos gráficos do </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">modelo</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> "dependências de saída" </font><font style="vertical-align: inherit;">e "dependências de entrada"</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">infra-estrutura</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , vemos imediatamente elementos que violam a regra introduzida </font></font><br>
<br>
<img src="https://habrastorage.org/webt/yx/lq/fm/yxlqfmhtpyx81pdmjjjggzered0.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nas tabelas de "dependências de saída" de elementos de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">modelo</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e "dependências de entrada" de elementos de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">infraestrutura</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , da mesma forma. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PHPCAEP \ Modelo \ Usuário \ Usuário </font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/_k/ka/du/_kkadurra4ab9onv9kazkypmr8s.png" alt="imagem"><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PHPCAEP \ Infraestrutura \ Notificação \ Sms \ SmsNotifier</font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/vw/ho/es/vwhoestwzf3m41hr5sbux7n5shs.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Assim como no gráfico de relacionamentos de elementos. Eu acho que no futuro me livrar completamente disso, porque não é muito informativo (especialmente para classes usadas ativamente, devido ao tamanho do nome dos nós + seu grande número) </font></font><br>
<br>
<img src="https://habrastorage.org/webt/tn/10/wn/tn10wnmnrwjup2vvdfzzghfhwyw.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ações semelhantes podem ser executadas com a </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">configuração</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> allowed_dependencies </font><font style="vertical-align: inherit;">. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/lh/8t/ki/lh8tkinfuyuzmfe-f4i2giq2p54.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O resultado será completamente oposto. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
É possível compor uma configuração indicando para o módulo e </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">proibido</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, e </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">permitido</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (se houver um desejo, discutiremos mais detalhadamente nos comentários). Ainda </font><font style="vertical-align: inherit;">não é possível </font><font style="vertical-align: inherit;">especificar um componente, tanto em </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">proibido</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> quanto </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">permitido</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ... Pensou-se em introduzir uma configuração para indicar prioridade, mas até agora não fiz isso e não tenho certeza do que farei. Tudo depende do seu feedback. Talvez tudo isso seja desperdiçado?</font></font><a name="50"></a><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Classe pública / privada em PHP</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Aprendemos como restringir e controlar a gama de conhecimentos dos componentes. Já não é ruim. Qual é o próximo? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E depois outro problema. O inimigo não dorme, embora na maioria dos casos esse inimigo, nós mesmos somos, ou nossos companheiros no escritório. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Afinal, você conheceu uma garota, conversou, descobriu algo sobre ela, talvez até cortejou, mas caramba, isso não funciona para você. Somos amigos e tudo mais ... Ela pode beijar você quando o conhecer, pode ouvir e apoiá-lo com uma palavra gentil, mas </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">não lhe dá</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nada para </font><s><font style="vertical-align: inherit;">matar</font></s><font style="vertical-align: inherit;"> . Então, do que estou falando ... Ah, aqui ... É tudo sobre acessibilidade. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas no código, constantemente ... Conecte um novo pacote, não passou um dia, mas ele já está sendo usado, mas direto </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para todos os lugares</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">de todos os lados. Metade da sua base de código já está vinculada a suas várias classes. Em suma, ele tem uma conexão muito íntima com o resto. Talvez em algumas situações essa seja a norma, mas não em todas, certo? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Você: </font></font></b> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“Tudo é bom, é tímido. Como resolver o problema? " </font></font></i><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eu: </font></font></b> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Deixe apenas classes permitidas para interação e restrinja o acesso ao restante." </font></font></i><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Você: </font></font></b> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Mas no PHP não há modificadores de acesso para classes." </font></font></i><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eu: </font></font></b> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Eu concordo, mas existe uma </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">arquitetura limpa do PHP</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ".</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Um exemplo agora será novamente de viciados em drogas, mas o que fazer. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em projetos reais, é claro, os casos estão cheios de casos, mas eles podem trazer uma garrafa para drenar as informações e pedir que eles se sentem. É por isso que você tem que compor.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vamos supor que no </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">modelo</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , por algum motivo, haja apenas duas classes que outras pessoas possam conhecer ... Usuário e Ordem, todo o resto deve estar oculto. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/qy/e9/4x/qye94xgk0qilcsun6t2b7xcyjfa.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O que nós temos agora? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Conte com o principal. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/5p/jh/89/5pjh89hoarwanv9cg5s4bnxftqa.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Você pode ver imediatamente quais componentes precisam ser revisados. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Subimos para ver o que há de errado com a </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">infraestrutura</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<img src="https://habrastorage.org/webt/6e/os/a7/6eosa7uzvggaixprcwujm6zo7iw.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No gráfico de “dependências de saída”, vemos elementos que violam a regra: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ce/cv/kh/cecvkhbffs9w0zoedu5h19-bqde.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Na página de informações do elemento, da mesma forma. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/7b/08/-x/7b08-x0k64pug5ab97xzjeweggc.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Obteremos exatamente o resultado oposto se especificarmos </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">private_elements</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> na configuração </font><font style="vertical-align: inherit;">. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ea/bi/z7/eabiz7uuzgdvoer2hlcgrbquya4.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por exemplo, proibimos que todos saibam sobre o Fio. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora na </font></font><br>
<br>
<img src="https://habrastorage.org/webt/1w/be/xw/1wbexwzh6qyeud-klfzf6ixd4uu.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
página </font><font style="vertical-align: inherit;">principal: </font><font style="vertical-align: inherit;">Na página de informações do componente de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">serviços</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<img src="https://habrastorage.org/webt/rq/k4/qt/rqk4qtsjvdt320d0nhm9mpgmv9c.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E na página de informações do elemento </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PHPCAEP \ Model \ User \ Fio</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<img src="https://habrastorage.org/webt/yp/z1/fb/ypz1fbiu9tvqqawxcyxe7lj1rbk.png" alt="imagem"><a name="51"></a><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Monitorando violações dos princípios do ADP e SDP</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Ainda assim, talvez seja necessário destacar a possibilidade de incluir verificações:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">por violações do princípio ADP, ou seja, </font><font style="vertical-align: inherit;">para a existência de dependências cíclicas no gráfico ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">check_acyclic_dependencies_principle</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e por violações do princípio do SDP, ou seja, </font><font style="vertical-align: inherit;">para dependências direcionadas de módulos mais estáveis ​​para menos estáveis ​​( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">check_stable_dependencies_principle</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font></li>
</ul><br>
<img src="https://habrastorage.org/webt/wv/q-/4e/wvq-4e6g7ecklhsoiwhveftlvgm.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas isso só funciona no </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">phpca-check</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> até agora </font><font style="vertical-align: inherit;">e não é exibido no relatório. </font><font style="vertical-align: inherit;">No futuro, acho que vou corrigi-lo.</font></font><a name="52"></a><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Controle automático em CI / CD</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todo esse tempo eu falei sobre a primeira parte - visualização. </font><font style="vertical-align: inherit;">E a análise que pode ser realizada em sua base. </font><s><font style="vertical-align: inherit;">Chegou</font></s></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
a hora de fazer com que nossos </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">amigos govnokodera</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> colegas respeitáveis ​​sofram. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lançamos no console (na raiz do projeto):</font></font><br>
<br>
<pre><code class="bash hljs">vendor/bin/phpca-check</code></pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ou </font></font><br>
<br>
<pre><code class="bash hljs">vendor/bin/phpca-check /path/to/phpca-config.php</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Supõe-se que a execução desse comando seja adicionada ao processo de CI / CD do seu projeto. </font><font style="vertical-align: inherit;">Nesse caso, o erro bloqueará a montagem adicional. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O script termina com um erro e lança algo como isto: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/gw/fk/yi/gwfkyinqrff76x6_ywh99mkzja0.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eu dou o dente, a lista será muito mais longa em um projeto real.</font></font><a name="53"></a><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Interrogatório</font></font></b><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Violação do princípio de aciclicidade de dependências (ADP)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Da mesma forma, mas o ciclo é um pouco mais curto</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 elementos de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">modelo</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (listados) dependem da </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">infraestrutura</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , o que não é permitido pela configuração</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Violação ADP novamente</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Outro loop e violação de ADP</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Violação do SDP porque </font><font style="vertical-align: inherit;">um </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">modelo</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mais sustentável </font><font style="vertical-align: inherit;">depende de uma </font><b><font style="vertical-align: inherit;">infraestrutura</font></b><font style="vertical-align: inherit;"> menos sustentável</font></font><b><font style="vertical-align: inherit;"></font></b></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mais uma vez dependência cíclica, seja errado</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1 elemento de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">serviços</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (listado) depende de fio não público</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aproximadamente esse resultado, temos graças aos nossos esforços </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e diligência em governar</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora vamos virar tudo na bunda. </font><font style="vertical-align: inherit;">Bem, isto é, </font><font style="vertical-align: inherit;">nem tudo, deixo as configurações naturalmente. </font><font style="vertical-align: inherit;">Eu governo apenas o código. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para iniciantes, faz sentido corrigir arquivos que violam as regras para as seguintes dependências. </font><font style="vertical-align: inherit;">Neste projeto, a maioria dos ciclos provavelmente desaparecerá por si só, mas, em reais, definitivamente precisará mexer por mais tempo (embora isso dependa do grau de negligência do sistema e das configurações da configuração).</font></font><a name="54"></a><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Solução de problemas</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Eu removi um vício anteriormente inventado. </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github.com/Chetkov/php-clean-architecture-example-project/commit/f6bbbff1313bb4a22dfb6061f347ef007ba3b422f</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Reinicie o </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fornecedor / bin / phpca-check</font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/h8/4f/ww/h84fwwfjzezdnpbb4pfo9bafbso.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Bem, há apenas uma configuração para editar, porque </font><font style="vertical-align: inherit;">um exemplo foi realmente inventado por um viciado em drogas. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/dd/ak/t5/ddakt51werp2dhetkwxra8ejyn0.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Novamente </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vendor / bin / phpca-check</font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/pb/k7/tw/pbk7twux3ah-6novxv9adktsw4m.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
E o CI / CD continuou! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Isso é tudo.</font></font><a name="55"></a><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Posfácio</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pegue um quinto se você o ler até o fim; se não, cheire o pé na estrada (de qualquer maneira, você não viu isso). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas, falando sério, obrigado pelo seu tempo, não importa se você mesclou no meio ou leu, mergulhou em cada linha e analisou cada tela ou folheou as duas partes na diagonal. </font><font style="vertical-align: inherit;">Obrigado mesmo assim. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Peço desculpas novamente se algo estava errado. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Talvez, meu modo de apresentação possa parecer a alguém muito imponente ou desrespeitoso, eu só queria diluir um pouco o artigo e de forma alguma queria ofender alguém. </font><font style="vertical-align: inherit;">Acho que sem isso, seria muito seco e difícil de ler. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Estou realmente interessado em saber sua opinião e, se você tiver quaisquer pensamentos, idéias, sugestões ou objeções, vamos discutir nos comentários.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Código limpo e arquitetura flexível para você!</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt504572/index.html">Fale como Winston Churchill: quem precisa vender sua alma para se comunicar em inglês SO</a></li>
<li><a href="../pt504576/index.html">Como o áudio doméstico se desenvolveu - das noites das músicas aos primeiros jogadores mecânicos</a></li>
<li><a href="../pt504578/index.html">Como os americanos se tornam milionários: princípios do FOGO</a></li>
<li><a href="../pt504582/index.html">HackTheBox. Passo a passo resolvido. Pulverização de senha. De DnsAdmin para SYSTEM</a></li>
<li><a href="../pt504586/index.html">Inovações ES2020 que eu realmente gosto</a></li>
<li><a href="../pt504592/index.html">PuppetConf 2016. Kubernetes para administradores de sistema. Parte 3</a></li>
<li><a href="../pt504598/index.html">Banco de dados de números primos de até cem bilhões no joelho</a></li>
<li><a href="../pt504600/index.html">O que espera a companhia aérea após a crise: a opinião de Warren Buffett</a></li>
<li><a href="../pt504602/index.html">Telemetria → métricas sem tensão</a></li>
<li><a href="../pt504604/index.html">O que está acontecendo no mercado de serviços de vídeo hoje?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>