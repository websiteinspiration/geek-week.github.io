<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧚🏽 🤲🏻 👸🏻 ブラウザのES6モジュール：準備ができているかどうか 🐀 🤧 🚫</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ブラウザでのES6モジュールの使用について聞いたことがありますか？実際、これらは通常のES6モジュールです。これらは、ブラウザ向けのコードにのみ適用されます。
 
 
 
 誰も知らない場合-これはどのように見えるかです。
 
 ページがありますindex.html：
 
 

<!DOCTYPE ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>ブラウザのES6モジュール：準備ができているかどうか</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/492510/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ブラウザでのES6モジュールの使用について聞いたことがありますか？</font><font style="vertical-align: inherit;">実際、これらは通常のES6モジュールです。</font><font style="vertical-align: inherit;">これらは、ブラウザ向けのコードにのみ適用されます。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/webt/yl/q1/wl/ylq1wlx8jeaaomnc9kwintirrma.jpeg"></a><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
誰も知らない場合-これはどのように見えるかです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ページがあります</font></font><code>index.html</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<br>
<pre><code class="html hljs xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"app"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><font></font>
&nbsp;&nbsp;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"module"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"index.mjs"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">&lt;!--     "module" --&gt;</span>
&nbsp;&nbsp;<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre><br><font style="vertical-align: inherit;"></font><code>index.mjs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ページに接続されたモジュールを表す</font><font style="vertical-align: inherit;">
ファイルがあり</font><font style="vertical-align: inherit;">ます：</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span> { doSomething } <span class="hljs-keyword">from</span> <span class="hljs-string">'./utils.mjs'</span>;<font></font>
<font></font>
doSomething(<span class="hljs-string">'Make me a sandwich'</span>);
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、このモジュール</font></font><code>doSomething</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はモジュールから</font><font style="vertical-align: inherit;">関数</font><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">インポート</font><font style="vertical-align: inherit;">します</font></font><code>utils.mjs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> doSomething = <span class="hljs-function"><span class="hljs-params">message</span> =&gt;</span> {
&nbsp;&nbsp;<span class="hljs-built_in">console</span>.log(<span class="hljs-string">'No.'</span>);<font></font>
};<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ES6モジュールは長年使用されています。</font><font style="vertical-align: inherit;">そして多分あなたはそれらを試すことを考えています。</font><font style="vertical-align: inherit;">自分のプロジェクトで約1か月使用しました。</font><font style="vertical-align: inherit;">同時に、</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
サスペンス</font><font style="vertical-align: inherit;">という結論に至りました</font><font style="vertical-align: inherit;">！</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">モジュールのブラウザサポートについて</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私が理解していることについて話す前に、モジュールのブラウザーサポートを確認することをお勧めします。</font><font style="vertical-align: inherit;">私は2020年の初めにこの資料を書いているので</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">モジュール</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">のサポートレベルは</font></a><font style="vertical-align: inherit;"> 90％とかなり印象的です。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/484/cfd/9e6/484cfd9e669b731f483cfdd99a638777.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">caniuse.comによるブラウザでのモジュールのサポート</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
私はこれらの90％（ユーザーの10％のニーズは考慮していません）で非常に満足していますが、もっと責任を負いたいと思うかもしれません。</font><font style="vertical-align: inherit;">しかし、これを考慮しても、プロジェクトがIE、UC、またはOpera Mini向けに設計されていない場合、このレベルのサポートは、対象読者のほぼ100％が問題なくプロジェクトで作業できることを意味します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
確かに、モジュールのブラウザーサポートはほんの始まりにすぎません。</font><font style="vertical-align: inherit;">ここで、モジュールへの旅の最初に生じた3つの質問に対する答えを見つけたいと思います。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ブラウザでのモジュールの使用には利点がありますか？</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">短所はどうですか？</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3つ目の質問があったはずですが、今は思い出せません。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それを理解しましょう...</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ブラウザでモジュールを使用する利点は何ですか？</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは純粋なJavaScriptです！</font><font style="vertical-align: inherit;">アセンブリプロジェクトパイプライン、400行のWebpack構成ファイル、バベル、プラグインとプリセット、45 npmモジュールの追加はありません。</font><font style="vertical-align: inherit;">あなたとあなたのコードだけ。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それが作成された形式で正確にブラウザで実行されるコードを書くことに関して、新鮮な何かがあります。</font><font style="vertical-align: inherit;">これはもう少し努力が必要かもしれませんが、結果は非常に楽しいです。</font><font style="vertical-align: inherit;">これがマニュアルトランスミッションで車を運転する方法です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そう。</font><font style="vertical-align: inherit;">ES6モジュールの利点は、純粋なJavaScriptです。これは、アセンブリの欠如、プロジェクト構成、および不要になった依存関係の拒否です。</font><font style="vertical-align: inherit;">ほかに何か？</font><font style="vertical-align: inherit;">他に何かありますか？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
いいえ、それ以上はありません。</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ブラウザでモジュールを使用することの欠点は何ですか？</font></font></font></h2><br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">modulesモジュールとバンドラーの比較</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ブラウザでES6モジュールを使用するかどうかを検討する場合、実際には、モジュールとWebpack、Parcel、Rollupなどのバンドラーのどちらを使用するかを選択する必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
（おそらく）両方を使用できますが、実際には、バンドラーを介してコードを実行する場合は、設計</font></font><code>&lt;script type="module"&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">使用し</font><font style="vertical-align: inherit;">てバンドルファイルをロード</font><font style="vertical-align: inherit;">する必要はありません</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、誰かがバンドラーの代わりにES6モジュールを使用する可能性を検討しているという仮定に基づいて、ここで彼はあきらめる必要があります：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">完成したコードの縮小。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最先端のJavaScript機能。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JavaScript構文とは異なる構文（React、TypeScriptなど）。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Npmモジュール。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">キャッシング</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このリストの最初の3つの段落をさらに詳しく検討してください。</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▍ファイルサイズ</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
モジュールを使用する私のプロジェクトのサイズは34 Kbです。私はプロジェクトのビルドステップを使用しないため、ネットワーク経由で送信されるコードには非常に長い変数名が含まれており、その中に非常に多くのコメントがあります。さらに、それは小さなファイルの束全体を表しており、データ圧縮の点ではあまり良くありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらすべてを</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Parcel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用してバンドルに入れる</font><font style="vertical-align: inherit;">と、結果のサイズは18 KBになります。私のカジュアルカシオ計算機は、これがバンドラーが使用されていないプロジェクトコードの「約半分」であると報告しています。これは、パーセルがファイルを縮小するという事実が原因の1つですが、このアプローチのマテリアルはgzipを使用して圧縮されているためです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
データ圧縮は、別の問題に注意を向けます。ファイルを編成する方法（開発の便宜という意味で）は、ネットワークを介してファイルを転送する方法に直接転送されます。また、開発中のファイルの編成方法は、サイトでの表示方法に必ずしも対応していません。たとえば、150のモジュール（ファイル）は、プロジェクトでの作業中に意味をなす場合があります。また、ブラウザに転送された同じ資料を12のバンドルに整理することを正当化できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このことについて説明します。モジュールを使用することは、ファイルをバンドルしたり縮小したりすることができないことを意味しているのではありません（これを実行できないのは幻想です）。両方を行うのは意味がないということです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
はい、ここに面白い観察があります。</font><font style="vertical-align: inherit;">私のアプリケーションでは、このセクションを作成するまで、モジュールが使用されていました（強調します！）。</font><font style="vertical-align: inherit;">Parcelをインストールして、正しいアセンブリサイズを計算しました。</font><font style="vertical-align: inherit;">そして今、私は通常のモジュールに戻る理由はありません。</font><font style="vertical-align: inherit;">さて、面白くないですか！</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">trans蒸散しない生活</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
長年にわたって、私は最新のJavaScript構文構造と、それらをすべてのブラウザーが理解できるコードに変換するすばらしいBabelツールに非常に慣れています。私はそれに慣れすぎて、ブラウザーのサポートについてはほとんど考えませんでした（もちろん、DOMとCSSを除いて）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私が最初に試したとき</font></font><code>type=«module»</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、私は自分ですべてをするつもりでした。私の目標は新鮮なブラウザーだったので、慣れ親しんだ最新のJavaScriptを使用できると思いました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、現実はそれほどバラ色ではありませんでした。次の質問にすばやく回答し、どこにも目を向けないようにしてください。 Edgeサポートはありますか</font></font><code>flatMap()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">？ Safariは破壊的な割り当て（オブジェクトと配列）をサポートしていますか？ Chromeは最後の関数引数の後のカンマをサポートしていますか？ Firefoxは指数をサポートしていますか？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
たとえば、私はこれらの質問に対する答えを探し、クロスブラウザテストを実施する必要がありました。しかし、私はこれらすべてを長い間使用していました。十分な大きさのアプリケーションでは、これが生産エラーを引き起こす可能性が非常に高くなります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これはまた、配列メソッド</font></font><code>slice()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（いわゆる</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オプションのシーケンス演算子）</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の登場以来、最も注目すべきJavaScriptの革新を使用できないことを意味し</font><font style="vertical-align: inherit;">ます。私は魔法のようなデザインを使いました</font></font><code>prop?.value</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">約1か月（Create React Appツールが追加設定なしでサポートを開始した瞬間から）。</font><font style="vertical-align: inherit;">しかし、私がそれらなしで働くのは、すでに不便です。</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▍キャッシングの負担</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
キャッシングは私にとって最大の障害でした。実際、キャッシング問題の解決策が非常に興味深いことが判明したことが、この資料を作成することにした主な理由であることが判明しました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ご存知のように、マテリアルがバンドラを使用して処理されると、結果のファイルのそれぞれに一意の名前が付けられます</font></font><code>index.38fd9e.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。この名前のファイルの内容は決して（決して）変更されません。したがって、無制限の期間、ブラウザでキャッシュできます。このようなファイルを一度ダウンロードした場合は、再度ダウンロードする必要はありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは驚くべきシステムです-キャッシュをクリアする方法の質問に対する答えを見つけようとしない限り。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
モジュールは、次のような設計を使用してロードされます</font></font><code>&lt;script type="module" src="index.mjs"&gt;&lt;/script&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">ファイル名のハッシュは使用されません。</font><font style="vertical-align: inherit;">この状況で</font></font><code>index.mjs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、キャッシュまたはネットワークから</font><font style="vertical-align: inherit;">ダウンロードする場所をブラウザに通知するにはどうすればよい</font><font style="vertical-align: inherit;">ですか？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
キャッシュを許容できるようにすることはほぼ可能ですが、多少の努力が必要です。</font><font style="vertical-align: inherit;">これに必要なものは次のとおりです。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">すべての回答のタイトルを</font></font><code>cache-control</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">値に</font><font style="vertical-align: inherit;">設定する必要があり</font><font style="vertical-align: inherit;">ます</font></font><code>no-cache</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">信じられないことに、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">キャッシュなし</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は「</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">キャッシュ</font></a><font style="vertical-align: inherit;">しない」という意味ではありません。</font><font style="vertical-align: inherit;">これは、ファイルをキャッシュする必要があることを意味しますが、ファイルを「ソースサーバーでの検証に成功せずに後続の要求を満たすために使用する」ことはできません。</font></font></li>
<li>    ETag.    —  ()   , ,   ,    .  , <code>38fd9e</code>      .</li>
<li>   CDN-  ,   .     ETag       .     .   CDN-   .       (     ETag)      . (, ,     Firebase).</li>
<li>  -,    ,  «  »  .        ,     ,  ,  ,    .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その結果、訪問者がサイトに再度アクセスすると、ブラウザには次のように表示されます。「ファイルをダウンロードする必要があります</font></font><code>index.mjs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。このファイルはすでにキャッシュに存在していることがわかります</font></font><code>38fd9e</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">そのETagは</font><font style="vertical-align: inherit;">です。私はサーバーにこのファイルを要求しますが、ETagがそうでない場合にのみ私に送信するように彼に伝えます</font></font><code>38fd9e</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。」 Service Workerはこのリクエストをインターセプトし、ETagを無視</font></font><code>index.mjs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">してキャッシュから</font><font style="vertical-align: inherit;">返し</font><font style="vertical-align: inherit;">ます（このファイルは、ページが最後にロードされたときにキャッシュに入りました）。次に、Service Workerはリクエストをサーバーにリダイレクトします。サーバーは、ファイルが変更されていないことを示すメッセージ、またはキャッシュに保存されるファイルを返します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私の意見では、これはすべて非常に厄介です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここで、興味がある場合は、Service Workerのコード：</font></font><br>
<br>
<pre><code class="javascript hljs">self.addEventListener(<span class="hljs-string">'fetch'</span>, e =&gt; {<font></font>
&nbsp;&nbsp;e.respondWith(<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-function">(<span class="hljs-params"><span class="hljs-keyword">async</span> (</span>) =&gt;</span> {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">//       </span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> cacheResponse = <span class="hljs-keyword">await</span> caches.match(e.request);<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">//   (),   </span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">// (ETag-    )</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fetch(e.request).then(<span class="hljs-function"><span class="hljs-params">fetchResponse</span> =&gt;</span> {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;caches<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.open(CACHE_NAME)<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.then(<span class="hljs-function"><span class="hljs-params">cache</span> =&gt;</span> cache.put(e.request, fetchResponse));<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">if</span> (cacheResponse) <span class="hljs-keyword">return</span> cacheResponse;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span> fetch(e.request);<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;})()<font></font>
&nbsp;&nbsp;);<font></font>
});<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私は怠惰だったので、勉強せず、最新の</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FetchEvent.navigationPreload</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プロパティを使用しませんでした</font><font style="vertical-align: inherit;">。実際のところ、私はアプリケーションの作成よりもキャッシュに多くの時間を費やしていました（参考までに、これらの問題にそれぞれ10時間と11時間費やしました）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
はい、私</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「輸入カード」の</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">提案が</font></a><font style="vertical-align: inherit;">上記の問題のいくつかを解決することを目的としていること</font><font style="vertical-align: inherit;">に注意したいと思い</font><font style="vertical-align: inherit;">ます。それはあなたがマッピングするようなものを整理することができます</font></font><code>index.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上</font></font><code>index.38fd9e.mj</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の。ただし、ハッシュを生成するには、何らかのアセンブリパイプラインが必要であり、インポートカードをHTMLファイルに埋め込む必要があります。これは、ここでバンドラーが必要であることを意味します...実際、この状況では、ブラウザーでモジュールは不要になります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その結果、これらすべてを理解するのは面白かったですが、一年中一輪車でどこでも運転した方法と比較することができます。</font><font style="vertical-align: inherit;">私はもうこれをしません。</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">しかし、おそらく誰もがバンドラーを使用しているわけではありませんか？</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この資料は、誰もが構文</font></font><code>import/export</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">または</font><font style="vertical-align: inherit;">を使用してモジュールで</font></font><code>require</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コードを記述し、Webpack、Grunt、Gulpなどを使用してコードを製品バンドルに収集する</font><font style="vertical-align: inherit;">ことを想定して作成しまし</font><font style="vertical-align: inherit;">た。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
バンドラーを使用しない開発者はいますか？</font><font style="vertical-align: inherit;">JavaScriptコードを複数のファイルに入れて、バンドルせずに本番環境に送信する人はいますか？</font><font style="vertical-align: inherit;">たぶんこれらの人々の一人はあなたですか？</font><font style="vertical-align: inherit;">もしそうなら、私はあなたの人生についてすべてを知りたいのです。</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">概要</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私は、効果的な開発の主な原則に基づいて、モジュールとバンドルのどちらを選択するかなど、すべての深刻な決定を下すよう努めています。これが生産性と品質です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
残念ながら、ブラウザでのモジュールの使用はどちらにも寄与しません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
明日新しいプロジェクトに取り掛かるのであれば、頭の中で、古き良きcreate-react-appを実行するかどうかは疑問に思わないでしょう。すべての初期設定には約30秒かかります。プロジェクトの初期サイズである40 KBは少し大きくなりますが、ほとんどのサイトではこれは何の役割も果たしません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、これは別の状況です。ある種の実験のために少しのHTML / CSSとJavaScriptを組み合わせる必要があるとしましょう。そのような実験は、いくつかよりも少し多くのファイルを含むプロジェクトになります。このプロジェクトに取り組んでいる間に、システムをセットアップして構築する時間を費やすことを計画していなかった場合、おそらくブラウザーでモジュールを使用します。そして-私がこのプロジェクトのパフォーマンスを気にしなかった場合。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Webpackとその関連ツールがブラウザでES6モジュールとどのように連携するか知りたいです。将来的には、「インポートカード」の提案が十分にサポートされたときに、バンドル業者はおそらく、現在使用されている見苦しいハッシュを抽象化するメカニズムとしてそれらを使用するでしょう。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">読者の皆様！</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ブラウザでES6モジュールを使用しましたか？</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja492500/index.html">ロシア語の科学ガレージ。アメリカの番組の翻訳経験</a></li>
<li><a href="../ja492502/index.html">MIP * = RE：物理学と数学にドミノ効果を引き起こしたコンピュータサイエンスの分野からの画期的な証拠</a></li>
<li><a href="../ja492504/index.html">JSモジュールを2回インポートするとどうなりますか？</a></li>
<li><a href="../ja492506/index.html">Angularで大きなリストをレンダリングする3つの方法</a></li>
<li><a href="../ja492508/index.html">DevOpsのKubernetesを予約する</a></li>
<li><a href="../ja492512/index.html">CSS：半透明の国での冒険</a></li>
<li><a href="../ja492514/index.html">ロシアとカザフスタンで取引相手の法的に重要な電子文書フローを確立する方法は？</a></li>
<li><a href="../ja492518/index.html">ウイルスの発生にはリモートでの作業が必要です。つまり、ドキュメントのデジタル署名が必要です</a></li>
<li><a href="../ja492520/index.html">nanoCAD Plus 20のベアリングカップのパラメーター化された3Dモデリング</a></li>
<li><a href="../ja492522/index.html">リモートチームコミュニケーション</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>