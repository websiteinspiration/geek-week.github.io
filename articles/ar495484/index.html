<!doctype html>
<html class="no-js" lang="ar">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ค ๐ฑ ๐๐พ ููู ูุชู ุชูููุฐ ุฎุทูุท ุฃูุงุจูุจ ููููุณ ๐ ๐ฌ๏ธ ๐๐พ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ุชูุถุญ ูุฐู ุงูููุงูุฉ ุชูููุฐ ุฎุทูุท ุงูุฃูุงุจูุจ ูู ููุงุฉ ููููุณ. ุดุนุฑุช ุจุฎูุจุฉ ุฃูู ุฅูู ุญุฏ ูุง ูุน ููุงู ุญุฏูุซ ุจุนููุงู " ููู ุชุนูู ุฎุทูุท ุงูุฃูุงุจูุจ ุนูู ููููุณุ" " ูู ููู ุนู ุงูุฌู...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>ููู ูุชู ุชูููุฐ ุฎุทูุท ุฃูุงุจูุจ ููููุณ</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/495484/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/ge/sl/9i/gesl9iqjuhatlmgyrdps28zgje0.jpeg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชูุถุญ ูุฐู ุงูููุงูุฉ ุชูููุฐ ุฎุทูุท ุงูุฃูุงุจูุจ ูู ููุงุฉ ููููุณ. </font><font style="vertical-align: inherit;">ุดุนุฑุช ุจุฎูุจุฉ ุฃูู ุฅูู ุญุฏ ูุง ูุน ููุงู ุญุฏูุซ ุจุนููุงู " </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููู ุชุนูู ุฎุทูุท ุงูุฃูุงุจูุจ ุนูู ููููุณุ" </font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">" </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ููู</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุนู ุงูุฌูุงุฒ ุงูุฏุงุฎูู. </font><font style="vertical-align: inherit;">ุฃุตุจุญุช ููุชูุฉ ุ ูุฏููุช ููุณู ูู ุงููุตุงุฏุฑ ุงููุฏููุฉ ูุฃุฌุฏ ุงูุฅุฌุงุจุฉ.</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนู ูุงุฐุง ูุชุญุฏุซุ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฎุทูุท ุงูุฃูุงุจูุจ - "ุฑุจูุง ูููู ุฃูู ุงุฎุชุฑุงุน ูู ููููุณ" - ูู ุงูุณูุฉ ุงููููุฒุฉ ูููุณูุฉ ููููุณ ุงููุงููุฉ ูู ุงูุฌูุน ุจูู ุงูุจุฑุงูุฌ ุงูุตุบูุฑุฉ ูุนูุง ุ ููุฐูู ุณุทุฑ ุงูุฃูุงูุฑ ุงููุฃููู:</font></font><br>
<br>
<pre><code class="plaintext hljs">$ echo hello | wc -c<font></font>
6<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐู ุงููุธููุฉ ุชุนุชูุฏ ุนูู ุงุณุชุฏุนุงุก ุงููุธุงู ุงูุชู ุชูุฏููุง ุงูููุงุฉ </font></font><code>pipe</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ุงูุฐู ููุตู ุนูู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฃูุงุจูุจ (7)</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฃูุงุจูุจ (2)</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุตูุญุงุช ุงููุซุงุฆู </font><font style="vertical-align: inherit;">:</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชููุฑ ุงููุงููุงุช ููุงุฉ ุงุชุตุงู ุจูู ุงูุนูููุงุช ุฃุญุงุฏูุฉ ุงูุงุชุฌุงู. </font><font style="vertical-align: inherit;">ูุญุชูู ุฎุท ุงูุฃูุงุจูุจ ุนูู ุฅุฏุฎุงู (ููุงูุฉ ูุชุงุจุฉ) ููุฎุฑุฌ (ูุฑุงุกุฉ ููุงูุฉ). </font><font style="vertical-align: inherit;">ูููู ูุฑุงุกุฉ ุงูุจูุงูุงุช ุงูููุชูุจุฉ ููุฏุฎูุงุช ุฎุท ุงูุฃูุงุจูุจ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุชู ุฅูุดุงุก ุฎุท ุงูุฃูุงุจูุจ ุจุงุณุชุฎุฏุงู ุงุณุชุฏุนุงุก ูููู </font></font><code>pipe(2)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุฅุฑุฌุงุน ูุงุตู ููููู: ูุดูุฑ ุฃุญุฏููุง ุฅูู ุฅุฏุฎุงู ุฎุท ุงูุฃูุงุจูุจ ุ ูุงูุซุงูู ุฅูู ุงูุฅุฎุฑุงุฌ.</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชูุถุญ ูุชุงุฆุฌ ุงูุชุชุจุน ููุฃูุฑ ุฃุนูุงู ุฅูุดุงุก ุฎุท ุฃูุงุจูุจ ูุชุฏูู ุงูุจูุงูุงุช ุฎูุงูู ูู ุนูููุฉ ุฅูู ุฃุฎุฑู:</font></font><br>
<br>
<pre><code class="plaintext hljs">$ strace -qf -e execve,pipe,dup2,read,write \<font></font>
    sh -c 'echo hello | wc -c'<font></font>
<font></font>
execve("/bin/sh", ["sh", "-c", "echo hello | wc -c"], โฆ)<font></font>
pipe([3, 4])                            = 0<font></font>
[pid 2604795] dup2(4, 1)                = 1<font></font>
[pid 2604795] write(1, "hello\n", 6)    = 6<font></font>
[pid 2604796] dup2(3, 0)                = 0<font></font>
[pid 2604796] execve("/usr/bin/wc", ["wc", "-c"], โฆ)<font></font>
[pid 2604796] read(0, "hello\n", 16384) = 6<font></font>
[pid 2604796] write(1, "6\n", 2)        = 2<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชุณุชุฏุนู ุงูุนูููุฉ ุงูุฑุฆูุณูุฉ </font></font><code>pipe()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุญุตูู ุนูู ูุงุตูุงุช ุงููููุงุช ุงููุฑููุฉ. </font><font style="vertical-align: inherit;">ููุชุจ ุฃุญุฏ ุงูุนูููุงุช ุงูุชุงุจุนุฉ ุฅูู ูุงุตู ูุงุญุฏ ููุฑุงุกุฉ ุนูููุฉ ุฃุฎุฑู ููุณ ุงูุจูุงูุงุช ูู ูุงุตู ุขุฎุฑ. </font><font style="vertical-align: inherit;">ุงููุฌูุน ุจุงุณุชุฎุฏุงู ูุงุตูุงุช "ุฅุนุงุฏุฉ ุชุณููุฉ" Dup2 3 ู 4 ููุทุงุจูุฉ stdin ู stdout. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุฏูู ุฎุทูุท ุงูุฃูุงุจูุจ ุ ุณูุชุนูู ุนูู shell ูุชุงุจุฉ ูุชูุฌุฉ ุนูููุฉ ูุงุญุฏุฉ ุฅูู ููู ูููููุง ุฅูู ุนูููุฉ ุฃุฎุฑู ุจุญูุซ ุชูุฑุฃ ุงูุจูุงูุงุช ูู ุงูููู. </font><font style="vertical-align: inherit;">ููุชูุฌุฉ ูุฐูู ุ ุณูููู ุงููุฒูุฏ ูู ุงูููุงุฑุฏ ููุณุงุญุฉ ุงููุฑุต. </font><font style="vertical-align: inherit;">ููุน ุฐูู ุ ูุฅู ุฎุทูุท ุงูุฃูุงุจูุจ ุฌูุฏุฉ ููุณ ููุท ูุฃููุง ุชุชุฌูุจ ุงุณุชุฎุฏุงู ุงููููุงุช ุงููุคูุชุฉ:</font></font><br>
<br>
<blockquote>      ,  <code>read(2)</code>    ,     .       ,  <code>write(2)</code>    ,           .</blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุซู ูุชุทูุจุงุช POSIX ุ ูุฐู ุฎุงุตูุฉ ูููุฉ: ุงููุชุงุจุฉ ุฅูู ุฎุท ุงูุฃูุงุจูุจ ุญุชู </font></font><code>PIPE_BUF</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุงูุช (ุนูู ุงูุฃูู 512) ูุฌุจ ุฃู ุชููู ุฐุฑูุฉ ุจุญูุซ ูููู ููุนูููุงุช ุงูุชูุงุตู ูุน ุจุนุถูุง ุงูุจุนุถ ุนุจุฑ ุฎุท ุงูุฃูุงุจูุจ ุจููุณ ุงูุทุฑููุฉ ุงูุชู ูููู ูููููุงุช ุงูุนุงุฏูุฉ (ุงูุชู ูุง ุชููุฑ ูุซู ูุฐู ุงูุถูุงูุงุช). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุนูุฏ ุงุณุชุฎุฏุงู ููู ุนุงุฏู ุ ูููู ููุนูููุฉ ูุชุงุจุฉ ุฌููุน ุจูุงูุงุช ุงูุฅุฎุฑุงุฌ ุงูุฎุงุตุฉ ุจูุง ูููููุง ุฅูู ุนูููุฉ ุฃุฎุฑู. </font><font style="vertical-align: inherit;">ุฃู ูููู ุฃู ุชุนูู ุงูุนูููุงุช ูู ูุถุน ููุงุฒู ุตุนุจ ุ ุจุงุณุชุฎุฏุงู ุขููุฉ ุฅุดุงุฑุงุช ุฎุงุฑุฌูุฉ (ูุซู ุฅุดุงุฑุฉ ุงูุฅุดุงุฑุฉ) ูุฅุจูุงุบ ุจุนุถูุง ุงูุจุนุถ ุจุดุฃู ุฅููุงู ุงููุชุงุจุฉ ุฃู ุงููุฑุงุกุฉ. </font><font style="vertical-align: inherit;">ูููุฐูุง ุงููุงูููู ูู ูุฐู ุงููุดุงูู.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง ุงูุฐู ุชุจุญุซ ุนููุ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุณุฃุดุฑุญ ุฐูู ุนูู ุฃุตุงุจุนู ูุชุณููู ุนููู ุฃู ุชุชุฎูู ููู ูููู ุฃู ูุนูู ุงููุงูู. </font><font style="vertical-align: inherit;">ุณุชุญุชุงุฌ ุฅูู ุชุฎุตูุต ูุฎุฒู ูุคูุช ูุจุนุถ ุงูุญุงูุงุช ูู ุงูุฐุงูุฑุฉ. </font><font style="vertical-align: inherit;">ุณุชุญุชุงุฌ ุฅูู ูุธุงุฆู ูุฅุถุงูุฉ ุงูุจูุงูุงุช ูุฅุฒุงูุชูุง ูู ุงููุฎุฒู ุงููุคูุช. </font><font style="vertical-align: inherit;">ุณูู ูุณุชุบุฑู ุงูุฃูุฑ ุจุนุถ ุงููุณุงุฆู ูุงุณุชุฏุนุงุก ุงููุธุงุฆู ุฃุซูุงุก ุนูููุงุช ุงููุฑุงุกุฉ ูุงููุชุงุจุฉ ุฅูู ูุงุตูุงุช ุงููููุงุช. </font><font style="vertical-align: inherit;">ูุงูุฃููุงู ูุทููุจุฉ ูุชูููุฐ ุงูุณููู ุงูุฎุงุต ุงูููุตูู ุฃุนูุงู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุขู ูุญู ุนูู ุงุณุชุนุฏุงุฏ ููุงุณุชุฌูุงุจ ูู ุงูุถูุก ุงูุณุงุทุน ูููุตุงุจูุญ ุงูููุฏ ุงููุตุฏุฑ ููููุงุฉ ูุชุฃููุฏ ุฃู ุฏุญุถ ูููุฐุฌูุง ุงูุนููู ุงูุบุงูุถ. </font><font style="vertical-align: inherit;">ููู ูู ูุณุชุนุฏูุง ุฏุงุฆููุง ููุง ูู ุบูุฑ ูุชููุน.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃูู ููุธุฑุ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุง ุฃุนุฑู ุฃูู ุชูุฌุฏ ูุณุฎุชู ูู ูุชุงุจ " </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lions book</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> " </font><font style="vertical-align: inherit;">ุงูุดููุฑ </font><font style="vertical-align: inherit;">ูุน ุดูุฑุฉ ูุตุฏุฑ Unix 6 ุ ูููู ุจูุถู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฌูุนูุฉ Unix Heritage</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููููู ุงูุจุญุซ ุนุจุฑ ุงูุฅูุชุฑูุช ุนู </font><font style="vertical-align: inherit;">ุฅุตุฏุงุฑุงุช ุฃูุฏู ูู Unix </font><font style="vertical-align: inherit;">ูู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุดูุฑุฉ ุงููุตุฏุฑ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅู ุงูุชุฌูู ูู ุฃุฑุดููุงุช TUHS ูุดุจู ุฒูุงุฑุฉ ูุชุญู. </font><font style="vertical-align: inherit;">ูููููุง ุฅููุงุก ูุธุฑุฉ ุนูู ุชุงุฑูุฎูุง ุงููุดุชุฑู ุ ูุฃูุง ุฃุญุชุฑู ุณููุงุช ุนุฏูุฏุฉ ูู ุงูุฌููุฏ ูุงุณุชุนุงุฏุฉ ูู ูุฐู ุงูููุงุฏ ุดูุฆูุง ูุดูุฆูุง ูู ุงูุฃุดุฑุทุฉ ูุงููุทุจูุนุงุช ุงููุฏููุฉ. </font><font style="vertical-align: inherit;">ูุฃูุง ูุฏุฑู ุชูุงููุง ูุชูู ุงูุฃุฌุฒุงุก ุงูุชู ูุง ุชุฒุงู ููููุฏุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุนุฏ ุฅุฑุถุงุก ูุถูููุง ูููุง ูุชุนูู ุจุงูุชุงุฑูุฎ ุงููุฏูู ูููุงููุงุช ุ ูููููุง ุฃู ููุธุฑ ุฅูู ุงูููู ุงูุญุฏูุซุฉ ููููุงุฑูุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุงูููุงุณุจุฉ ุ </font></font><code>pipe</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุฑูู ุงุณุชุฏุนุงุก ุงููุธุงู 42 ูู ุงูุฌุฏูู </font></font><code>sysent[]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุตุฏูุฉุ</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงุฉ ููููุณ ุงูุชูููุฏูุฉ (1970-1974)</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุฃุฌุฏ ุฃู ุฃุซุฑ </font></font><code>pipe(2)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณูุงุก ูู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PDP-7 Unix</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (ููุงูุฑ 1970) ุ ุฃู ูู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฅุตุฏุงุฑ ุงูุฃูู ูู Unix</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (ููููุจุฑ 1971) ุ ุฃู ูู ุดูุฑุฉ ุงููุตุฏุฑ ุบูุฑ ุงูููุชููุฉ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุทุจุนุฉ ุงูุซุงููุฉ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (ููููู 1972). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชุฏุนู TUHS ุฃู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฅุตุฏุงุฑ ุงูุซุงูุซ ูู Unix</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (ูุจุฑุงูุฑ 1973) ูุงู ุงูุฅุตุฏุงุฑ ุงูุฃูู ูุน ุฎุทูุท ุงูุฃูุงุจูุจ:</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงูุช ุงููุณุฎุฉ ุงูุซุงูุซุฉ ูู Unix ุฃุญุฏุซ ุฅุตุฏุงุฑ ูุน ููุงุฉ ููุชูุจุฉ ุจูุบุฉ ุงูุชุฌููุน ุ ูููู ุงูุฅุตุฏุงุฑ ุงูุฃูู ูุน ุฎุทูุท ุงูุฃูุงุจูุจ. </font><font style="vertical-align: inherit;">ุฎูุงู ุนุงู 1973 ุ ุชู ุงูุนูู ุนูู ุชุญุณูู ุงูุฅุตุฏุงุฑ ุงูุซุงูุซ ุ ูุชู ุฅุนุงุฏุฉ ูุชุงุจุฉ ุงูุฃุณุงุณูุฉ ูู C ุ ูููุฐุง ุธูุฑุช ุงูุทุจุนุฉ ุงูุฑุงุจุนุฉ ูู Unix.</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฌุฏ ุฃุญุฏ ุงููุฑุงุก ูุณุญูุง ููุซููุฉ ุงูุชุฑุญ ูููุง ุฏูุบ ูุงููุฑูู ููุฑุฉ "ุฑุจุท ุงูุจุฑุงูุฌ ุจูุจุฏุฃ ุฎุฑุทูู ุงูุญุฏููุฉ".</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c6c/8c2/c8c/c6c8c2c8c5720d79227246af98c9b8d5.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ูุชุงุจ Brian Kernighan " </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unix: A History and Memoir</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> " ุ ูู ุชุงุฑูุฎ ุธููุฑ ุงููุงููุงุช ุ ุชู ุฐูุฑ ูุฐู ุงููุซููุฉ ุฃูุถูุง: "... ุนููุช ุนูู ุงูุญุงุฆุท ูู ููุชุจู ูู Bell Labs ููุฏุฉ 30 ุนุงููุง." ุฅููู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงุจูุฉ ูุน McIlroy</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ููุตุฉ ุฃุฎุฑู ูู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูู McIlroy ููุชูุจุฉ ูู ุนุงู 2014</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<blockquote>  Unix,        ,  ,  ,   - ,     ,       .  ,   . ,  ,  ,       .                ?           ยซยป     , , -, : ยซ  !ยป.<br>
<br>
 .        ,    ,       (    ),     .          .              .      API          ,      .</blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุณูุก ุงูุญุธ ุ ูุชู ููุฏุงู ุดูุฑุฉ ูุตุฏุฑ kernel ููุทุจุนุฉ ุงูุซุงูุซุฉ ูู Unix. ูุนูู ุงูุฑุบู ูู ุฃู ูุฏููุง ุดูุฑุฉ ุงููุตุฏุฑ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููุณุฎุฉ ุงูุฑุงุจุนุฉ ูู</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูููุงุฉ ุงูููุชูุจุฉ ูู C </font><font style="vertical-align: inherit;">ุ ูุงูุชู ุชู ุฅุตุฏุงุฑูุง ูู ููููุจุฑ 1973 ุ ููุฏ ุชู ุฅุตุฏุงุฑูุง ูุจู ุจุถุนุฉ ุฃุดูุฑ ูู ุงูุฅุตุฏุงุฑ ุงูุฑุณูู ููุง ุชุญุชูู ุนูู ุชุทุจููุงุช ุฎุท ุงูุฃูุงุจูุจ. ุฅูู ูุฃูุฑ ูุคุณู ุฃู ูุชู ููุฏุงู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงููุตุฏุฑ ููุธููุฉ Unix ุงูุฃุณุทูุฑูุฉ ุ ุฑุจูุง ุฅูู ุงูุฃุจุฏ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฏููุง ูุต ุงููุซุงุฆู </font></font><code>pipe(2)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ููุง ุงูุฅุตุฏุงุฑูู ุ ูุฐุง ููููู ุงูุจุฏุก ุจุงูุจุญุซ ูู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฅุตุฏุงุฑ ุงูุซุงูุซ ูู</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงููุซุงุฆู </font><font style="vertical-align: inherit;">(ุจุงููุณุจุฉ ูุจุนุถ ุงููููุงุช ุ ุงูุชู ุชุญุชูุง ุฎุท "ูุฏูููุง" ุ ุณูุณูุฉ ูู ุงูุญุฑู ุงูุญุฑููุฉ ^ H ุ ูุชุจูุนุฉ ุจุดุฑุทุฉ ุณูููุฉ!). ุชูุช ูุชุงุจุฉ ูุฐุง ุงูุฅุตุฏุงุฑ ุงูุฃููู ูู ุฃุฏุงุฉ </font></font><code>pipe(2)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุฌููุน ูุฅุฑุฌุงุน ูุงุตู ููู ูุงุญุฏ ููุท ุ ููููู ูููุฑ ุจุงููุนู ุงููุธุงุฆู ุงูุฃุณุงุณูุฉ ุงููุชููุนุฉ:</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู ุงุณุชุฏุนุงุก ูุธุงู </font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฃูุงุจูุจ</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจุฅูุดุงุก ุขููุฉ ุฅุฏุฎุงู ุงูุฅุฎุฑุงุฌ ุชุณูู ุฎุท ุงูุฃูุงุจูุจ. </font><font style="vertical-align: inherit;">ูููู ุงุณุชุฎุฏุงู ูุงุตู ุงูููู ุงูุฐู ุชู ุฅุฑุฌุงุนู ูุนูููุงุช ุงููุฑุงุกุฉ ูุงููุชุงุจุฉ. </font><font style="vertical-align: inherit;">ุนูุฏูุง ูุชู ูุชุงุจุฉ ุดูุก ูุง ุนูู ุฎุท ุงูุฃูุงุจูุจ ุ ูุชู ุชุฎุฒูู ูุง ูุตู ุฅูู 504 ุจุงูุช ูู ุงูุจูุงูุงุช ุ ูุจุนุฏ ุฐูู ูุชู ุฅููุงู ุนูููุฉ ุงููุชุงุจุฉ ูุคูุชูุง. </font><font style="vertical-align: inherit;">ุนูุฏ ุงููุฑุงุกุฉ ูู ุฎุท ุงูุฃูุงุจูุจ ุ ูุชู ุฃุฎุฐ ุงูุจูุงูุงุช ุงููุฎุฒูุฉ ูุคูุชูุง.</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุญููู ุงูุนุงู ุงูุชุงูู ุ ุชู ุฅุนุงุฏุฉ ูุชุงุจุฉ ุงูููุงุฉ ุจุงูุญุฑู C ุ </font><font style="vertical-align: inherit;">ููุฌุฏ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฃูุจูุจ (2) ูู ุงูุทุจุนุฉ ุงูุฑุงุจุนุฉ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุธูุฑู ุงูุญุฏูุซ ูุน ุงููููุฐุฌ ุงูุฃููู " </font></font><code>pipe(fildes)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">":</font></font><br>
<br>
<blockquote>  <i>pipe</i>    ,   .          .  -   ,   ,   r1 (. fildes[1]),    4096  ,     .     ,   r0 (. fildes[0]),  .<br>
<br>
,      ( )   (   <i>fork</i>)         <i>read</i>  <i>write</i>.<br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุญุชูู ุงูุบูุงู ุนูู ุจูุงุก ุฌููุฉ ูุชุญุฏูุฏ ูุฌููุนุฉ ุฎุทูุฉ ูู ุงูุนูููุงุช ุงููุชุตูุฉ ุนุจุฑ ุฎุท ุฃูุงุจูุจ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุงููุงุช ุงููุฑุงุกุฉ ูู ุฎุท ุฃูุงุจูุจ ูุงุฑุบ (ูุง ูุญุชูู ุนูู ุจูุงูุงุช ูุฎุฒูุฉ) ููุง ููุงูุฉ ูุงุญุฏุฉ ููุท (ุฌููุน ูุงุตูุงุช ููู ุงููุชุงุจุฉ ูุบููุฉ) ุชูุฑุฌุน "ููุงูุฉ ุงูููู". </font><font style="vertical-align: inherit;">ูุชู ุชุฌุงูู ุชุณุฌูู ุงูููุงููุงุช ูู ูููู ููุงุซู.</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃูุฑุจ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุจุงููู ุนูู ููุฏ ุงูุญูุงุฉ ุชูููุฐ ุฎุท ุฃูุงุจูุจ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุนูุฏ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅูู ุงูุทุจุนุฉ ุงูุฎุงูุณุฉ ูู ููููุณ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (ููููู 1974)ุ ูุฅููุง ูู ูุทุงุจู ุชูุฑูุจุง ูุชูู ุงูุชู ุธูุฑุช ูู ุงูุฅุตุฏุงุฑ ุงูุชุงูู. </font><font style="vertical-align: inherit;">ุชูุช ุฅุถุงูุฉ ุงูุชุนูููุงุช ููุท ุ ูุฐูู ูููู ุชุฎุทู ุงูุฅุตุฏุงุฑ ุงูุฎุงูุณ.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุทุจุนุฉ ุงูุณุงุฏุณุฉ ูู ูููููุณ (1975)</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุจุฏุฃ ูู ูุฑุงุกุฉ ุงูููุฏ ุงููุตุฏุฑู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฅุตุฏุงุฑ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูููููุณ </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;">ุงูุณุงุฏุณ</font></a><font style="vertical-align: inherit;"> (ูุงูู 1975) </font><font style="vertical-align: inherit;">ุจูุถู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lions</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅูู ุญุฏ ูุจูุฑ </font><i><font style="vertical-align: inherit;">ุ ูุฅู</font></i><font style="vertical-align: inherit;"> ุงูุนุซูุฑ ุนููู ุฃุณูู ุจูุซูุฑ ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงููุตุฏุฑ ููุฅุตุฏุงุฑุงุช ุงูุณุงุจูุฉ:</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณููุงุช ุนุฏูุฏุฉ ุ ูุงูุช </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฃุณูุฏ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุซููุฉ ููููุณ ุงูุฃุณุงุณูุฉ ุงููุญูุฏุฉ ุงููุชุงุญุฉ ุฎุงุฑุฌ ุฃุณูุงุฑ Bell Labs. </font><font style="vertical-align: inherit;">ุนูู ุงูุฑุบู ูู ุฃู ุฑุฎุตุฉ ุงูุฅุตุฏุงุฑ ุงูุณุงุฏุณ ุณูุญุช ูููุนูููู ุจุงุณุชุฎุฏุงู ุดูุฑุฉ ุงููุตุฏุฑ ุงูุฎุงุตุฉ ุจูุง ุ ุฅูุง ุฃู ุฑุฎุตุฉ ุงูุฅุตุฏุงุฑ ุงูุณุงุจุน ุงุณุชุจุนุฏุช ูุฐู ุงูุฅููุงููุฉ ุ ูุฐูู ุชู ุชูุฒูุน ุงููุชุงุจ ูู ุดูู ูุณุฎ ูุทุจูุนุฉ ุบูุฑ ูุงููููุฉ.</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููููู ุงูููู ุดุฑุงุก ูุณุฎุฉ ูุนุงุฏ ุทุจุงุนุชูุง ูู ุงููุชุงุจ ุชุธูุฑ ุนูู ุบูุงููุง ุขูุฉ ูุณุฎ. ูุจูุถู ูุงุฑูู ุชููู (ุงูุฐู ุฃุทูู ูุดุฑูุน TUHS) ุ ููููู ุชูุฒูู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููู PDF ุจุฑูุฒ ุงููุตุฏุฑ ููุทุจุนุฉ ุงูุณุงุฏุณุฉ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ุฃุฑูุฏ ุฃู ุฃุนุทูู ููุฑุฉ ุนู ููุฏุงุฑ ุงูุฌูุฏ ุงููุจุฐูู ูุฅูุดุงุก ุงูููู:</font></font><br>
<br>
<blockquote> 15       ,   <i>Lions</i>,             . TUHS   ,         .   1988-      9 ,        PDP11.   ,   ,      /usr/src/,       1979- ,     .        PWB,   .<br>
<br>
            .     ,    ,    +=   =+. -  ,  -   ,    .</blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุงูููู ูููููุง ุฃู ููุฑุฃ ุนูู ุงูุฅูุชุฑูุช ุนูู TUHS ุดูุฑุฉ ุงููุตุฏุฑ ููุทุจุนุฉ ุงูุณุงุฏุณุฉ ูู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฃุฑุดูู ุ ูุงูุชู ูุงู ูุฏูููุณ ุฑูุชุดู ูุฏ ููุง</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุงูููุงุณุจุฉ ุ ูููููุฉ ุงูุฃููู ุ ูุฅู ุงูุณูุฉ ุงูุฑุฆูุณูุฉ ูุฑูุฒ C ูุจู ูุชุฑุฉ Kernigan ู Richie ูู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅูุฌุงุฒูุง</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ูู ูุซูุฑ ูู ุงูุฃุญูุงู ุ ุฃุชููู ูู ุชุถููู ููุชุทูุงุช ุงูุดูุฑุฉ ุฏูู ุชุญุฑูุฑ ุดุงูู ูุชูุงุณุจ ููุทูุฉ ุนุฑุถ ุถููุฉ ูุณุจููุง ุนูู ูููุนู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุจุฏุงูุฉ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/usr/sys/ken/pipe.c</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุฌุฏ ุชุนููู ุชูุถูุญู (ููุนู ููุงู ุฃูุถูุง </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ usr / sys / dmr</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ):</font></font><br>
<br>
<pre><code class="plaintext hljs">/*<font></font>
 * Max allowable buffering per pipe.<font></font>
 * This is also the max size of the<font></font>
 * file created to implement the pipe.<font></font>
 * If this size is bigger than 4096,<font></font>
 * pipes will be implemented in LARG<font></font>
 * files, which is probably not good.<font></font>
 */<font></font>
#define    PIPSIZ    4096<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ูุชุบูุฑ ุญุฌู ุงููุฎุฒู ุงููุคูุช ููุฐ ุงูุฅุตุฏุงุฑ ุงูุฑุงุจุน. ูููู ููุง ุ ุฏูู ุฃู ูุซุงุฆู ุนุงูุฉ ุ ูุฑู ุฃูู ุจูุฌุฑุฏ ุฃู ุชุณุชุฎุฏู ุฎุทูุท ุงูุฃูุงุจูุจ ุงููููุงุช ููุฎุฒู ุงุญุชูุงุทู! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃูุง ุจุงููุณุจุฉ ููููุงุช LARG ุ ููู ุชุชูุงูู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุน ุฅุดุงุฑุฉ LARG inode</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ูุงูุชู ุชุณุชุฎุฏููุง "ุงูุฎูุงุฑุฒููุฉ ุนุงููุฉ ุงููุนุงูุฌุฉ" ููุนุงูุฌุฉ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุชู ุบูุฑ ุงููุจุงุดุฑุฉ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฏุนู ุฃูุธูุฉ ุงููููุงุช ุงูุฃูุจุฑ ุญุฌููุง. ุจูุง ุฃู ููู ูุงู ุฃูู ูู ุงูุฃูุถู ุนุฏู ุงุณุชุฎุฏุงููุง ุ ูุณุฃููู ุจูููุงุชู ุจูู ุณุฑูุฑ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุง ุงุณุชุฏุนุงุก ุงููุธุงู ุงูุญูููู </font></font><code>pipe</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="plaintext hljs">/*<font></font>
 * The sys-pipe entry.<font></font>
 * Allocate an inode on the root device.<font></font>
 * Allocate 2 file structures.<font></font>
 * Put it all together with flags.<font></font>
 */<font></font>
pipe()<font></font>
{<font></font>
    register *ip, *rf, *wf;<font></font>
    int r;<font></font>
<font></font>
    ip = ialloc(rootdev);<font></font>
    if(ip == NULL)<font></font>
        return;<font></font>
    rf = falloc();<font></font>
    if(rf == NULL) {<font></font>
        iput(ip);<font></font>
        return;<font></font>
    }<font></font>
    r = u.u_ar0[R0];<font></font>
    wf = falloc();<font></font>
    if(wf == NULL) {<font></font>
        rf-&gt;f_count = 0;<font></font>
        u.u_ofile[r] = NULL;<font></font>
        iput(ip);<font></font>
        return;<font></font>
    }<font></font>
    u.u_ar0[R1] = u.u_ar0[R0]; /* wf's fd */<font></font>
    u.u_ar0[R0] = r;           /* rf's fd */<font></font>
    wf-&gt;f_flag = FWRITE|FPIPE;<font></font>
    wf-&gt;f_inode = ip;<font></font>
    rf-&gt;f_flag = FREAD|FPIPE;<font></font>
    rf-&gt;f_inode = ip;<font></font>
    ip-&gt;i_count = 2;<font></font>
    ip-&gt;i_flag = IACC|IUPD;<font></font>
    ip-&gt;i_mode = IALLOC;<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุตู ุงูุชุนููู ุจูุถูุญ ูุง ูุญุฏุซ ููุง. ูููู ููู ูููู ุฑูุฒ ููุณุช ุณููุฉุ ูุฐูู ุฌุฒุฆูุง ุจุณุจุจ ุงูุทุฑููุฉ ุจูุณุงุนุฏุฉ ยซ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณุชุฎุฏู ุงูุจููุฉ ุด</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ยป ูุณุฌูุงุช </font></font><code>R0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ู </font></font><code>R1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุนููุงุช ููู ุงูููุงููุงุช ุงููุธุงู ูุนูุฏุฉ ุงูููู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฏุนููุง ูุญุงูู ุงุณุชุฎุฏุงู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ialloc ()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุถุน </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">inode (inode </font></font></a><font style="vertical-align: inherit;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;">)</font></a><font style="vertical-align: inherit;"> ุนูู ุงููุฑุต </font><font style="vertical-align: inherit;">ุ ูุงุณุชุฎุฏุงู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">falloc ()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุถุน </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููููู</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ุงูุฐุงูุฑุฉ </font><font style="vertical-align: inherit;">. ุฅุฐุง ูุงู ูู ุดูุก ูุณูุฑ ุนูู ูุง ูุฑุงู ุ ูุณูู ูููู ุจุชุนููู ุฅุดุงุฑุงุช ูุชุนุฑูู ูุฐู ุงููููุงุช ุนูู ุฃููุง ุทุฑูู ุฎุท ุงูุฃูุงุจูุจ ุ ูุชูุฌูููุง ุฅูู ููุณ inode (ุณูููู ุนุฏุฏ ูุฑุฌุนูุง 2) ุ ููุถุน ุนูุงูุฉ ุนูู inode ุนูู ุฃููุง ุชุบูุฑุช ูุงุณุชุฎุฏูุช. ุงูุชุจู ููููุงููุงุช ุฅูู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">iput ()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ูุณุงุฑุงุช ุงูุฎุทุฃ ูุชูููู ุงูุนุฏุฏ ุงููุฑุฌุนู ูู inode ุงูุฌุฏูุฏ. </font></font><br>
<br>
<code>pipe()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฌุจ ูู ุฎูุงู </font></font><code>R0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฅุนุงุฏุฉ </font></font><code>R1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุฑูุงู ูุงุตู ุงูููู ูููุฑุงุกุฉ ูุงููุชุงุจุฉ. </font></font><code>falloc()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฑุฌุงุน ูุคุดุฑ ุฅูู ุจููุฉ ุงูููู ุ ูููู ุฃูุถูุง "ุฅุฑุฌุงุน" ูู ุฎูุงู </font></font><code>u.u_ar0[R0]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงุตู ุงูููู. ุฃู ุฃู ุงูุดูุฑุฉ ุชุญูุธ ูู </font></font><code>r</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงุตู ููู ูููุฑุงุกุฉ ูุชุนูู ูุงุตููุง ูููุชุงุจุฉ ูุจุงุดุฑุฉ ูู </font></font><code>u.u_ar0[R0]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุนุฏ ุงูููุงููุฉ ุงูุซุงููุฉ </font></font><code>falloc()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุชุชุญูู </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุนูุงูุฉ </font></font><code>FPIPE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชู ูููุง ุจุชุนููููุง ุนูุฏ ุฅูุดุงุก ุฎุท ุงูุฃูุงุจูุจ ูู ุณููู ูุธููุฉ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rdwr () ูู sys2.c</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ูุงูุชู ุชุณุชุฏุนู </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;">ุฅุฌุฑุงุกุงุช ุฅุฏุฎุงู</font></a><font style="vertical-align: inherit;"> / ุฅุฎุฑุงุฌ ูุญุฏุฏุฉ:</font></font><br>
<br>
<pre><code class="plaintext hljs">/*<font></font>
 * common code for read and write calls:<font></font>
 * check permissions, set base, count, and offset,<font></font>
 * and switch out to readi, writei, or pipe code.<font></font>
 */<font></font>
rdwr(mode)<font></font>
{<font></font>
    register *fp, m;<font></font>
<font></font>
    m = mode;<font></font>
    fp = getf(u.u_ar0[R0]);<font></font>
        /* โฆ */<font></font>
<font></font>
    if(fp-&gt;f_flag&amp;FPIPE) {<font></font>
        if(m==FREAD)<font></font>
            readp(fp); else<font></font>
            writep(fp);<font></font>
    }<font></font>
        /* โฆ */<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุซู </font><font style="vertical-align: inherit;">ุชูุฑุฃ </font><font style="vertical-align: inherit;">ุงููุธููุฉ </font></font><code>readp()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู </font></font><code>pipe.c</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุจูุงูุงุช ูู ุฎุท ุงูุฃูุงุจูุจ. </font><font style="vertical-align: inherit;">ููู ุชุชุจุน ุงูุชูููุฐ ูุจุฏุฃ ุจุดูู ุฃูุถู </font></font><code>writep()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูุฑุฉ ุฃุฎุฑู ุ ุฃุตุจุญ ุงูุฑูุฒ ุฃูุซุฑ ุชุนููุฏูุง ุจุณุจุจ ุชูุงุตูู ุงุชูุงููุฉ ููู ุงููุณูุทุฉ ุ ูููู ูููู ุญุฐู ุจุนุถ ุงูุชูุงุตูู.</font></font><br>
<br>
<pre><code class="plaintext hljs">writep(fp)<font></font>
{<font></font>
    register *rp, *ip, c;<font></font>
<font></font>
    rp = fp;<font></font>
    ip = rp-&gt;f_inode;<font></font>
    c = u.u_count;<font></font>
<font></font>
loop:<font></font>
    /* If all done, return. */<font></font>
<font></font>
    plock(ip);<font></font>
    if(c == 0) {<font></font>
        prele(ip);<font></font>
        u.u_count = 0;<font></font>
        return;<font></font>
    }<font></font>
<font></font>
    /*<font></font>
     * If there are not both read and write sides of the<font></font>
     * pipe active, return error and signal too.<font></font>
     */<font></font>
<font></font>
    if(ip-&gt;i_count &lt; 2) {<font></font>
        prele(ip);<font></font>
        u.u_error = EPIPE;<font></font>
        psignal(u.u_procp, SIGPIPE);<font></font>
        return;<font></font>
    }<font></font>
<font></font>
    /*<font></font>
     * If the pipe is full, wait for reads to deplete<font></font>
     * and truncate it.<font></font>
     */<font></font>
<font></font>
    if(ip-&gt;i_size1 == PIPSIZ) {<font></font>
        ip-&gt;i_mode =| IWRITE;<font></font>
        prele(ip);<font></font>
        sleep(ip+1, PPIPE);<font></font>
        goto loop;<font></font>
    }<font></font>
<font></font>
    /* Write what is possible and loop back. */<font></font>
<font></font>
    u.u_offset[0] = 0;<font></font>
    u.u_offset[1] = ip-&gt;i_size1;<font></font>
    u.u_count = min(c, PIPSIZ-u.u_offset[1]);<font></font>
    c =- u.u_count;<font></font>
    writei(ip);<font></font>
    prele(ip);<font></font>
    if(ip-&gt;i_mode&amp;IREAD) {<font></font>
        ip-&gt;i_mode =&amp; ~IREAD;<font></font>
        wakeup(ip+2);<font></font>
    }<font></font>
    goto loop;<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฑูุฏ ูุชุงุจุฉ ูุญุฏุงุช ุงูุจุงูุช ููุฏุฎูุงุช ุฎุท ุงูุฃูุงุจูุจ </font></font><code>u.u_count</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูุญุชุงุฌ ุฃููุงู ุฅูู ููู Inode (ุงูุธุฑ ุฃุฏูุงู </font></font><code>plock</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ </font></font><code>prele</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุซู ุชุญูู ูู ุนุฏุฏ ูุฑุฌุน inode. </font><font style="vertical-align: inherit;">ูู ุญูู ุฃู ุทุฑูู ุฎุท ุงูุฃูุงุจูุจ ูุง ูุฒุงูุงู ููุชูุญูู ุ ูุฌุจ ุฃู ูููู ุงูุนุฏุงุฏ ูู 2. ูุญุชูุธ ุจูุตูุฉ ูุงุญุฏุฉ (ุฎุงุฑุฌ </font></font><code>rp-&gt;f_inode</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) ุ ูุฐูู ุฅุฐุง ูุงู ุงูุนุฏุงุฏ ุฃูู ูู 2 ุ ููุฐุง ูุนูู ุฃู ุนูููุฉ ุงููุฑุงุกุฉ ูุฏ ุฃุบููุช ููุงูุฉ ุฎุท ุงูุฃูุงุจูุจ. </font><font style="vertical-align: inherit;">ุจุนุจุงุฑุฉ ุฃุฎุฑู ุ ูุญู ูุญุงูู ุงููุชุงุจุฉ ุจุฎุท ุฃูุงุจูุจ ูุบูู ุ ููุฐุง ุฎุทุฃ. </font><font style="vertical-align: inherit;">ุธูุฑ ุฑูุฒ ุงูุฎุทุฃ </font></font><code>EPIPE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงูุฅุดุงุฑุฉ ูุฃูู </font></font><code>SIGPIPE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฑุฉ ูู ุงูุฅุตุฏุงุฑ ุงูุณุงุฏุณ ูู Unix.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููู ุญุชู ูู ูุงู ุงููุงูู ููุชูุญูุง ุ ููุฏ ูููู ููุชูุฆูุง. ูู ูุฐู ุงูุญุงูุฉ ุ ูุฒูู ุงูููู ููุฐูุจ ุฅูู ุงูููู ุนูู ุฃูู ุฃู ุชุชู ูุฑุงุกุฉ ุนูููุฉ ุฃุฎุฑู ูู ุฎุท ุงูุฃูุงุจูุจ ูุชุญุฑูุฑ ูุณุงุญุฉ ูุงููุฉ ููู. ุจุนุฏ ุงูุงุณุชููุงุธ ุ ูุนูุฏ ุฅูู ุงูุจุฏุงูุฉ ุ ููุฑุฉ โโุฃุฎุฑู ูุญุฌุจ ุงูููู ููุจุฏุฃ ุฏูุฑุฉ ุชุณุฌูู ุฌุฏูุฏุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅุฐุง ูุงูุช ููุงู ูุณุงุญุฉ ุฎุงููุฉ ูุงููุฉ ูู ุฎุท ุงูุฃูุงุจูุจ ุ ูุฅููุง ููุชุจ ุงูุจูุงูุงุช ุฅูููุง ุจุงุณุชุฎุฏุงู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">writei ()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ุชุดูุฑ ุงููุนููุฉ </font></font><code>i_size1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู inode (ูุน ุฎุท ุฃูุงุจูุจ ูุงุฑุบ ุฅูู 0) ุฅูู ููุงูุฉ ุงูุจูุงูุงุช ุงูุชู ุชุญุชูู ุนูููุง ุจุงููุนู. ุฅุฐุง ูุงู ููุงู ูุณุงุญุฉ ุชุณุฌูู ูุงููุฉ ุ ูููููุง ููุก ุงููุงูู ูู </font></font><code>i_size1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅูู</font></font><code>PIPESIZ</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ุซู ูุฒูู ุงูููู ููุญุงูู ุฅููุงุธ ุฃู ุนูููุฉ ุชูุชุธุฑ ูุฑุตุฉ ุงููุฑุงุกุฉ ูู ุฎุท ุงูุฃูุงุจูุจ. ูุนูุฏ ุฅูู ุงูุจุฏุงูุฉ ููุฑู ูุง ุฅุฐุง ุชูููุง ูู ูุชุงุจุฉ ุฃู ุนุฏุฏ ูู ูุญุฏุงุช ุงูุจุงูุช ุญุณุจ ุงูุญุงุฌุฉ. ุฅุฐุง ูุดูุช ุ ูุฅููุง ูุจุฏุฃ ุฏูุฑุฉ ุชุณุฌูู ุฌุฏูุฏุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุนุงุฏุฉ </font></font><code>i_mode</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ </font><font style="vertical-align: inherit;">ูุชู </font><font style="vertical-align: inherit;">ุงุณุชุฎุฏุงู </font><font style="vertical-align: inherit;">ูุนููุฉ </font><font style="vertical-align: inherit;">inode ูุชุฎุฒูู ุงูุฃุฐููุงุช </font></font><code>r</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ </font></font><code>w</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ู </font></font><code>x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ูููู ูู ุญุงูุฉ ุฎุทูุท ุงูุฃูุงุจูุจ ุ ูุดูุฑ ุฅูู ุฃู ุจุนุถ ุงูุนูููุงุช ุชูุชุธุฑ ุงููุชุงุจุฉ ุฃู ุงููุฑุงุกุฉ ุจุงุณุชุฎุฏุงู ุงูุจุชุงุช </font></font><code>IREAD</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูุนูู </font></font><code>IWRITE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชูุงูู. ุชุญุฏุฏ ุงูุนูููุฉ ุนูุงูุฉ ูููุงููุงุช </font></font><code>sleep()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ููู ุงููุชููุน ุฃู ุชุณุชุฏุนู ุนูููุฉ ุฃุฎุฑู ูู ุงููุณุชูุจู </font></font><code>wakeup()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุญุฏุซ ุงูุณุญุฑ ุงูุญูููู ูู </font></font><code>sleep()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ู </font></font><code>wakeup()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ูุชู ุชูููุฐูุง ูู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">slp.c</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูุตุฏุฑ ุงูุชุนููู ุงูุดููุฑ ุ "ูู ุบูุฑ ุงููุชููุน ุฃู ุชููู ุฐูู." </font><font style="vertical-align: inherit;">ูุญุณู ุงูุญุธ ุ ูุณูุง ูุทุงูุจูู ุจููู ุงูุดูุฑุฉ ุ ููุท ุงูุธุฑ ุจุนุถ ุงูุชุนูููุงุช:</font></font><br>
<br>
<pre><code class="plaintext hljs">/*<font></font>
 * Give up the processor till a wakeup occurs<font></font>
 * on chan, at which time the process<font></font>
 * enters the scheduling queue at priority pri.<font></font>
 * The most important effect of pri is that when<font></font>
 * pri&lt;0 a signal cannot disturb the sleep;<font></font>
 * if pri&gt;=0 signals will be processed.<font></font>
 * Callers of this routine must be prepared for<font></font>
 * premature return, and check that the reason for<font></font>
 * sleeping has gone away.<font></font>
 */<font></font>
sleep(chan, pri) /* โฆ */<font></font>
<font></font>
/*<font></font>
 * Wake up all processes sleeping on chan.<font></font>
 */<font></font>
wakeup(chan) /* โฆ */<font></font>
</code></pre><br><font style="vertical-align: inherit;"></font><code>sleep()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฏ ุชุณุชููุธ </font><font style="vertical-align: inherit;">
ุงูุนูููุฉ ุงูุชู ุชุณุชุฏุนู </font><font style="vertical-align: inherit;">ููุงุฉ ูุนููุฉ ูู ููุช ูุงุญู ูู ุฎูุงู ุนูููุฉ ุฃุฎุฑู ูุชู ุงุณุชุฏุนุงุคูุง </font></font><code>wakeup()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููููุงุฉ ููุณูุง. </font></font><code>writep()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ู </font></font><code>readp()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชูุณูู ุฃุนูุงููู ูู ุฎูุงู ูุซู ูุฐู ุงูุฏุนูุงุช ุงูููุชุฑูุฉ. </font><font style="vertical-align: inherit;">ูุฑุฌู ููุงุญุธุฉ ุฃูู </font></font><code>pipe.c</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููุญ ุงูุฃููููุฉ ุฏุงุฆููุง </font></font><code>PPIPE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูุฏ ุงูุงุชุตุงู </font></font><code>sleep()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ุจุญูุซ </font></font><code>sleep()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู </font><font style="vertical-align: inherit;">ููุฌููุน </font><font style="vertical-align: inherit;">ููุงุทุนุฉ ุงูุฅุดุงุฑุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุขู ูุฏููุง ูู ุดูุก ูููู ุงููุธููุฉ </font></font><code>readp()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="plaintext hljs">readp(fp)<font></font>
int *fp;<font></font>
{<font></font>
    register *rp, *ip;<font></font>
<font></font>
    rp = fp;<font></font>
    ip = rp-&gt;f_inode;<font></font>
<font></font>
loop:<font></font>
    /* Very conservative locking. */<font></font>
<font></font>
    plock(ip);<font></font>
<font></font>
    /*<font></font>
     * If the head (read) has caught up with<font></font>
     * the tail (write), reset both to 0.<font></font>
     */<font></font>
<font></font>
    if(rp-&gt;f_offset[1] == ip-&gt;i_size1) {<font></font>
        if(rp-&gt;f_offset[1] != 0) {<font></font>
            rp-&gt;f_offset[1] = 0;<font></font>
            ip-&gt;i_size1 = 0;<font></font>
            if(ip-&gt;i_mode&amp;IWRITE) {<font></font>
                ip-&gt;i_mode =&amp; ~IWRITE;<font></font>
                wakeup(ip+1);<font></font>
            }<font></font>
        }<font></font>
<font></font>
        /*<font></font>
         * If there are not both reader and<font></font>
         * writer active, return without<font></font>
         * satisfying read.<font></font>
         */<font></font>
<font></font>
        prele(ip);<font></font>
        if(ip-&gt;i_count &lt; 2)<font></font>
            return;<font></font>
        ip-&gt;i_mode =| IREAD;<font></font>
        sleep(ip+2, PPIPE);<font></font>
        goto loop;<font></font>
    }<font></font>
<font></font>
    /* Read and return */<font></font>
<font></font>
    u.u_offset[0] = 0;<font></font>
    u.u_offset[1] = rp-&gt;f_offset[1];<font></font>
    readi(ip);<font></font>
    rp-&gt;f_offset[1] = u.u_offset[1];<font></font>
    prele(ip);<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฏ ุชุฌุฏ ุฃูู ูู ุงูุฃุณูู ูุฑุงุกุฉ ูุฐู ุงููุธููุฉ ูู ุงูุฃุณูู ุฅูู ุงูุฃุนูู. ุนุงุฏุฉ ูุง ูุณุชุฎุฏู ูุฑุน "ุงููุฑุงุกุฉ ูุงูุนูุฏุฉ" ุนูุฏูุง ูููู ููุงู ุจุนุถ ุงูุจูุงูุงุช ูู ุฎุท ุงูุฃูุงุจูุจ. ูู ูุฐู ุงูุญุงูุฉ ุ ูุณุชุฎุฏู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">readi ()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุฑุงุกุฉ ุฃูุจุฑ ูุฏุฑ ูููู ูู ุงูุจูุงูุงุช ุจุฏุกูุง ูู </font></font><code>f_offset</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุฑุงุกุฉ </font><font style="vertical-align: inherit;">ุงูุญุงููุฉ </font><font style="vertical-align: inherit;">ุ ุซู </font><font style="vertical-align: inherit;">ูููู </font><font style="vertical-align: inherit;">ุจุชุญุฏูุซ ูููุฉ ุงูุฅุฒุงุญุฉ ุงูููุงุจูุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุนูููุงุช ุงููุฑุงุกุฉ ุงููุงุญูุฉ ุ ุณูููู ุฎุท ุงูุฃูุงุจูุจ ูุงุฑุบูุง ุฅุฐุง ูุตู ุฅุฒุงุญุฉ ุงููุฑุงุกุฉ ุฅูู ูููุฉ </font></font><code>i_size1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฅูููุฏ. ูุนูุฏ ุชุนููู ุงูููุถุน ุฅูู 0 ููุญุงูู ุฅููุงุธ ุฃู ุนูููุฉ ุชุฑูุฏ ูุชุงุจุชูุง ุฅูู ุฎุท ุงูุฃูุงุจูุจ. ูุญู ูุนูู ุฃูู ุนูุฏูุง ูููู ุงููุงูู ููุชูุฆูุง ุ ูุฅูู </font></font><code>writep()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณูู ููุงู </font></font><code>ip+1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ูุงูุขู ุจุนุฏ ุฃู ุฎุท ุงูุฃูุงุจูุจ ูุงุฑุบ ุ ูููููุง ุฅููุงุธู ุญุชู ูุณุชุฃูู ุฏูุฑุฉ ุงูุชุณุฌูู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅุฐุง ูู ููู ููุงู ุดูุก ูููุฑุงุกุฉ ุ </font></font><code>readp()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููููู ูุถุน ุนูู </font></font><code>IREAD</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงูููู ุนููู</font></font><code>ip+2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูุญู ูุนูู ูุง ุงูุฐู ุณูููุธู </font></font><code>writep()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูุฏูุง ููุชุจ ุจุนุถ ุงูุจูุงูุงุช ูุฎุท ุงูุฃูุงุจูุจ. </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;">ุณุชุณุงุนุฏ</font></a></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ุงูุชุนูููุงุช ุนูู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">readi () ู writei ()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุนูู ููู ุฃูู ุจุฏูุงู ูู ุชูุฑูุฑ ุงููุนููุงุช ูู ุฎูุงู " </font></font><code>u</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">" ุ ูููููุง ูุนุงููุชูุง ูุซู ูุธุงุฆู ุงูุฅุฏุฎุงู / ุงูุฅุฎุฑุงุฌ ุงูุนุงุฏูุฉ ุ ูุงูุชู ุชุฃุฎุฐ ููููุง </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;">ูููุถุนูุง ููุฎุฒููุง ูุคูุชูุง</font></a><font style="vertical-align: inherit;"> ูู ุงูุฐุงูุฑุฉ ูุชุญุณุจ ุนุฏุฏ ูุญุฏุงุช ุงูุจุงูุช ูููุฑุงุกุฉ ุฃู ุงููุชุงุจุฉ .</font></font><br>
<br>
<pre><code class="plaintext hljs">/*<font></font>
 * Read the file corresponding to<font></font>
 * the inode pointed at by the argument.<font></font>
 * The actual read arguments are found<font></font>
 * in the variables:<font></font>
 *    u_base        core address for destination<font></font>
 *    u_offset    byte offset in file<font></font>
 *    u_count        number of bytes to read<font></font>
 *    u_segflg    read to kernel/user<font></font>
 */<font></font>
readi(aip)<font></font>
struct inode *aip;<font></font>
/* โฆ */<font></font>
<font></font>
/*<font></font>
 * Write the file corresponding to<font></font>
 * the inode pointed at by the argument.<font></font>
 * The actual write arguments are found<font></font>
 * in the variables:<font></font>
 *    u_base        core address for source<font></font>
 *    u_offset    byte offset in file<font></font>
 *    u_count        number of bytes to write<font></font>
 *    u_segflg    write to kernel/user<font></font>
 */<font></font>
writei(aip)<font></font>
struct inode *aip;<font></font>
/* โฆ */<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃูุง ุจุงููุณุจุฉ ููุชุฃููู "ุงููุญุงูุธ"ุ ุซู </font></font><code>readp()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ู </font></font><code>writep()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชูุฉ inode ูุทุงููุง ูุงููุง ุงูุงูุชูุงุก ูู ุงูุนูู ุฃู ูุง ุชุญุตู ุนูู ุงููุชูุฌุฉ (ุฃู ูุถูุฉ </font></font><code>wakeup</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">). </font></font><code>plock()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฃููุง </font></font><code>prele()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุนูู ุจุจุณุงุทุฉ: ุงุณุชุฎุฏุงู ูุฌููุนุฉ ูุฎุชููุฉ ูู ุงูููุงููุงุช </font></font><code>sleep</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ู </font></font><code>wakeup</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุณูุญ ููุง ุฃู ูุณุชููุธ ุฃู ุงูุนูููุฉ ุงูุชู ุชุญุชุงุฌ ุฅูู ุชุฃููู ุงูุชู ุฃุฒููุง ููุท:</font></font><br>
<br>
<pre><code class="plaintext hljs">/*<font></font>
 * Lock a pipe.<font></font>
 * If its already locked, set the WANT bit and sleep.<font></font>
 */<font></font>
plock(ip)<font></font>
int *ip;<font></font>
{<font></font>
    register *rp;<font></font>
<font></font>
    rp = ip;<font></font>
    while(rp-&gt;i_flag&amp;ILOCK) {<font></font>
        rp-&gt;i_flag =| IWANT;<font></font>
        sleep(rp, PPIPE);<font></font>
    }<font></font>
    rp-&gt;i_flag =| ILOCK;<font></font>
}<font></font>
<font></font>
/*<font></font>
 * Unlock a pipe.<font></font>
 * If WANT bit is on, wakeup.<font></font>
 * This routine is also used to unlock inodes in general.<font></font>
 */<font></font>
prele(ip)<font></font>
int *ip;<font></font>
{<font></font>
    register *rp;<font></font>
<font></font>
    rp = ip;<font></font>
    rp-&gt;i_flag =&amp; ~ILOCK;<font></font>
    if(rp-&gt;i_flag&amp;IWANT) {<font></font>
        rp-&gt;i_flag =&amp; ~IWANT;<font></font>
        wakeup(rp);<font></font>
    }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุงูุจุฏุงูุฉ ูู ุฃุชููู ูู ููู ุณุจุจ </font></font><code>readp()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนุฏู ุงูุงุชุตุงู </font></font><code>prele(ip)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุจู ุงูููุงููุฉ </font></font><code>wakeup(ip+1)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ุฃูู ุดูุก </font></font><code>writep()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชุณุจุจ ูู ุญููุชู ูู ุฃูู </font></font><code>plock(ip)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุคุฏู ุฅูู ุทุฑูู ูุณุฏูุฏ ุฅุฐุง </font></font><code>readp()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ููู ุจุฅุฒุงูุฉ ูุชูุชู ุจุนุฏ ุ ูุฐุง ูุฌุจ ุฃู ูุนูู ุงูุฑูุฒ ุจุทุฑููุฉ ุฃู ุจุฃุฎุฑู ุจุทุฑููุฉ ุตุญูุญุฉ. ุฅุฐุง ูุธุฑุช ุฅูููุง </font></font><code>wakeup()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูุตุจุญ ูู ุงููุงุถุญ ุฃูู ูุถุน ุนูุงูุฉ ุนูู ุนูููุฉ ุงูููู ููุท ุนูู ุฃููุง ุฌุงูุฒุฉ ููุชูููุฐ ุ ุจุญูุซ ูุชู </font></font><code>sched()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุทูุงููุง </font><font style="vertical-align: inherit;">ูู ุงููุณุชูุจู </font><font style="vertical-align: inherit;">. ูุฐุง ุ ูุฅูู </font></font><code>readp()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณุจุจ </font></font><code>wakeup()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููุชุญ ููุถุจุท </font></font><code>IREAD</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุชุตู </font></font><code>sleep(ip+2)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- ูู ูุฐุง ูุจู ุฃู </font></font><code>writep()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณุชุฃูู ุงูุฏูุฑุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐุง ูููู ูุตู ุงููุงููุงุช ูู ุงูุทุจุนุฉ ุงูุณุงุฏุณุฉ. ููุฏ ุจุณูุท ุ ุนูุงูุจ ุจุนูุฏุฉ ุงููุฏู. </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุทุจุนุฉ ุงูุณุงุจุนุฉ ูู ููููุณ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(ููุงูุฑ 1979) ูุงู ุงูุฅุตุฏุงุฑ ุงูุฑุฆูุณู ุงูุฌุฏูุฏ (ุจุนุฏ ุฃุฑุจุน ุณููุงุช) ุ ุญูุซ ุธูุฑุช ุงูุนุฏูุฏ ูู ุงูุชุทุจููุงุช ุงูุฌุฏูุฏุฉ ูุฎุตุงุฆุต ุงูููุงุฉ. </font><font style="vertical-align: inherit;">ุฃูุถุง ุ ูุงูุช ููุงู ุชุบููุฑุงุช ูุจูุฑุฉ ูููุง ูุชุนูู ุจุงุณุชุฎุฏุงู ููุน ุงูุตุจ ุ union'ov ูุงููุคุดุฑุงุช ุงูููุชูุจุฉ ุนูู ุงูููุงูู. </font><font style="vertical-align: inherit;">ููุน ุฐูู ุ </font><font style="vertical-align: inherit;">ูู ูุชุบูุฑ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฑูุฒ ุฎุท ุงูุฃูุงุจูุจ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุซูุฑูุง. </font><font style="vertical-align: inherit;">ูููููุง ุชุฎุทู ูุฐู ุงูุทุจุนุฉ.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Xv6 ุ ููุงุฉ ุจุณูุทุฉ ุนูู ุดูู ููููุณ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุซุฑุช ุงููุณุฎุฉ ุงูุณุงุฏุณุฉ ูู Unix ุนูู </font><font style="vertical-align: inherit;">
ุฅูุดุงุก </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Xv6</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> core </font><font style="vertical-align: inherit;">ุ ูููููุง ููุชูุจุฉ ุจูุบุฉ C ุงูุญุฏูุซุฉ ูุชุนูู ุนูู ูุนุงูุฌุงุช x86. ุงูููุฏ ุณูู ุงููุฑุงุกุฉ ุ ุฅูู ูุงุถุญ. ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ุนูู ุนูุณ ูุตุงุฏุฑ Unix ูุน TUHS ุ ููููู ุชุฌููุนูุง ูุชุนุฏูููุง ูุชุดุบูููุง ุนูู ุดูุก ุขุฎุฑ ุบูุฑ PDP 11/70. ูุฐูู ุ ูุณุชุฎุฏู ูุฐุง ุงูููุงุฉ ุนูู ูุทุงู ูุงุณุน ูู ุงูุฌุงูุนุงุช ูููุงุฏ ุชุนููููุฉ ุนูู ุฃูุธูุฉ ุงูุชุดุบูู. ุงููุตุงุฏุฑ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุฌูุซุจ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุญุชูู ุงูููุฏ ุนูู ุชุทุจูู ูุงุถุญ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฏุฑูุณ ุฌูุฏูุง ููุฃูุจูุจ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;">c</font></a><font style="vertical-align: inherit;"> ุ ูุฏุนูููุง ุจูุฎุฒู ูุคูุช ูู ุงูุฐุงูุฑุฉ ุจุฏูุงู ูู inode ุนูู ุงููุฑุต. ููุง ุฃุนุทู ููุท ุชุนุฑูู "ุฎุท ุงูุฃูุงุจูุจ ุงูููููู" ูุงููุธููุฉ </font></font><code>pipealloc()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="plaintext hljs">#define PIPESIZE 512<font></font>
<font></font>
struct pipe {<font></font>
  struct spinlock lock;<font></font>
  char data[PIPESIZE];<font></font>
  uint nread;     // number of bytes read<font></font>
  uint nwrite;    // number of bytes written<font></font>
  int readopen;   // read fd is still open<font></font>
  int writeopen;  // write fd is still open<font></font>
};<font></font>
<font></font>
int<font></font>
pipealloc(struct file **f0, struct file **f1)<font></font>
{<font></font>
  struct pipe *p;<font></font>
<font></font>
  p = 0;<font></font>
  *f0 = *f1 = 0;<font></font>
  if((*f0 = filealloc()) == 0 || (*f1 = filealloc()) == 0)<font></font>
    goto bad;<font></font>
  if((p = (struct pipe*)kalloc()) == 0)<font></font>
    goto bad;<font></font>
  p-&gt;readopen = 1;<font></font>
  p-&gt;writeopen = 1;<font></font>
  p-&gt;nwrite = 0;<font></font>
  p-&gt;nread = 0;<font></font>
  initlock(&amp;p-&gt;lock, "pipe");<font></font>
  (*f0)-&gt;type = FD_PIPE;<font></font>
  (*f0)-&gt;readable = 1;<font></font>
  (*f0)-&gt;writable = 0;<font></font>
  (*f0)-&gt;pipe = p;<font></font>
  (*f1)-&gt;type = FD_PIPE;<font></font>
  (*f1)-&gt;readable = 0;<font></font>
  (*f1)-&gt;writable = 1;<font></font>
  (*f1)-&gt;pipe = p;<font></font>
  return 0;<font></font>
<font></font>
 bad:<font></font>
  if(p)<font></font>
    kfree((char*)p);<font></font>
  if(*f0)<font></font>
    fileclose(*f0);<font></font>
  if(*f1)<font></font>
    fileclose(*f1);<font></font>
  return -1;<font></font>
}<font></font>
</code></pre><br>
<code>pipealloc()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญุฏุฏ ุญุงูุฉ ุจุงูู ุงูุชูููุฐ ุ ูุงูุชู ุชุชุถูู ุงููุธุงุฆู </font></font><code>piperead()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ </font></font><code>pipewrite()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ู </font></font><code>pipeclose()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุงุณุชุฏุนุงุก ุงููุธุงู ุงููุนูู </font></font><code>sys_pipe</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนุจุงุฑุฉ ุนู ุจุฑูุงูุฌ ูุฌูุน ูุชู ุชูููุฐู ูู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sysfile.c</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ุฃูุตู ุจูุฑุงุกุฉ ุฌููุน ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงูุฎุงุตุฉ ุจู. </font><font style="vertical-align: inherit;">ุงูุชุนููุฏ ุนูู ูุณุชูู ุงููุตุฏุฑ ููุทุจุนุฉ ุงูุณุงุฏุณุฉ ุ ููู ูุฑุงุกุชู ุฃุณูู ูุฃูุซุฑ ุฅูุชุงุนูุง.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููููุณ 0.01</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููููู ุงูุนุซูุฑ ุนูู ุดูุฑุฉ ุงููุตุฏุฑ ููุธุงู ุงูุชุดุบูู Linux 0.01. </font><font style="vertical-align: inherit;">ุณูููู ูู ุงููููุฏ ุฏุฑุงุณุฉ ุชูููุฐ ุฎุทูุท ุงูุฃูุงุจูุจ ูู ุจูุฏู </font></font><code>fs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ </font></font><code>pipe.c</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ููุง ุ ูุชู ุงุณุชุฎุฏุงู inode ูุชูุซูู ุฎุท ุงูุฃูุงุจูุจ ุ ูููู ุฎุท ุงูุฃูุงุจูุจ ููุณู ููุชูุจ ุจูุบุฉ C ุงูุญุฏูุซุฉ. ุฅุฐุง ุญุตูุช ุนูู ููุฏ ุงูุฅุตุฏุงุฑ ุงูุณุงุฏุณ ุ ููู ุชูุงุฌู ุตุนูุจุงุช. </font><font style="vertical-align: inherit;">ููุฐุง ุชุจุฏู ุงููุธููุฉ </font></font><code>write_pipe()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="plaintext hljs">int write_pipe(struct m_inode * inode, char * buf, int count)<font></font>
{<font></font>
    char * b=buf;<font></font>
<font></font>
    wake_up(&amp;inode-&gt;i_wait);<font></font>
    if (inode-&gt;i_count != 2) { /* no readers */<font></font>
        current-&gt;signal |= (1&lt;&lt;(SIGPIPE-1));<font></font>
        return -1;<font></font>
    }<font></font>
    while (count--&gt;0) {<font></font>
        while (PIPE_FULL(*inode)) {<font></font>
            wake_up(&amp;inode-&gt;i_wait);<font></font>
            if (inode-&gt;i_count != 2) {<font></font>
                current-&gt;signal |= (1&lt;&lt;(SIGPIPE-1));<font></font>
                return b-buf;<font></font>
            }<font></font>
            sleep_on(&amp;inode-&gt;i_wait);<font></font>
        }<font></font>
        ((char *)inode-&gt;i_size)[PIPE_HEAD(*inode)] =<font></font>
            get_fs_byte(b++);<font></font>
        INC_PIPE( PIPE_HEAD(*inode) );<font></font>
        wake_up(&amp;inode-&gt;i_wait);<font></font>
    }<font></font>
    wake_up(&amp;inode-&gt;i_wait);<font></font>
    return b-buf;<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุญุชู ุจุฏูู ุงููุธุฑ ุฅูู ุชุนุฑููุงุช ุงูููุงูู ุ ููููู ูุนุฑูุฉ ููููุฉ ุงุณุชุฎุฏุงู ุงูุนุฏุงุฏ ุงููุฑุฌุนู inode ููุชุญูู ููุง ุฅุฐุง ูุงูุช ุนูููุฉ ุงููุชุงุจุฉ ุชุคุฏู ุฅูู </font></font><code>SIGPIPE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุจุงูุฅุถุงูุฉ ุฅูู ุนูู ุงูุจุงูุช ุ ุชุฑุชุจุท ูุฐู ุงููุธููุฉ ุจุณูููุฉ ุจุงูุฃููุงุฑ ุงููุฐููุฑุฉ ุฃุนูุงู. </font><font style="vertical-align: inherit;">ุญุชู ุงูููุทู </font></font><code>sleep_on</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ </font></font><code>wake_up</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง ูุจุฏู ุบุฑูุจูุง ุฌุฏูุง.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงุฉ ููููุณ ุงูุญุฏูุซุฉ ุ ูุฑู ุจู ุฅุณ ุฏู ุ ูุช ุจู ุฅุณ ุฏู ุ ููุงุฉ ุฃูุจู ุจู ุฅุณ ุฏู</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุณุฑุนุงู ูุง ุฐูุจุช ุฅูู ุจุนุถ ุงูููู ุงูุญุฏูุซุฉ. ูุง ููุฌุฏ ูุฏู ุฃู ูููู ุจุงููุนู ุชุทุจูู ุงููุฑุต (ูููุณ ูู ุงููุณุชุบุฑุจ). ููููุณ ูุฏูู ุชุทุจููู ุงูุฎุงุต. ุนูู ุงูุฑุบู ูู ุฃู ููุงุฉ BSD ุงูุซูุงุซุฉ ุงูุญุฏูุซุฉ ุชุญุชูู ุนูู ุชุทุจููุงุช ุชุณุชูุฏ ุฅูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงูุชู ูุชุจูุง ุฌูู ุฏุงูุณูู ุ ุฅูุง ุฃููุง ุนูู ูุฑ ุงูุณููู ุฃุตุจุญุช ูุฎุชููุฉ ุชูุงููุง ุนู ุจุนุถูุง ุงูุจุนุถ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุฑุงุกุฉ </font></font><code>fs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ </font></font><code>pipe.c</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(ุนูู Linux) ุฃู </font></font><code>sys</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ </font></font><code>kern</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ </font></font><code>sys_pipe.c</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(ุนูู * BSD) ุ ููุฒู ุงูุชูุงูู ุงูุญูููู. ุฅู ุงูุฃุฏุงุก ูุงูุฏุนู ูููุฒุงุช ูุซู ุงููุชุฌู ูุงูุฅุฏุฎุงู / ุงูุฅุฎุฑุงุฌ ุบูุฑ ุงููุชุฒุงูู ูููุงู ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงูููู. ูุชูุงุตูู ุชุฎุตูุต ุงูุฐุงูุฑุฉ ูุงูุฃููุงู ูุชูููู ุงูููุงุฉ - ูู ูุฐุง ูุฎุชูู ุชูุงููุง. ููุณ ูุฐุง ูุง ุชุญุชุงุฌู ุงูุฌุงูุนุงุช ูุฏูุฑุฉ ุชูููุฏูุฉ ุญูู ุฃูุธูุฉ ุงูุชุดุบูู.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุนูู ุฃู ุญุงู ุ ูุงู ูู ุงููุซูุฑ ููุงูุชูุงู ุจุงููุณุจุฉ ูู ุงูุชุดุงู ุงูุนุฏูุฏ ูู ุงูุฃููุงุท ุงููุฏููุฉ (ุนูู ุณุจูู ุงููุซุงู ุ ุชูููุฏ </font></font><code>SIGPIPE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงูุนูุฏุฉ </font></font><code>EPIPE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูุฏ ุงููุชุงุจุฉ ุฅูู ุฎุท ุฃูุงุจูุจ ูุบูู) ูู ูู ูุฐู ุงูููู ุงูุญุฏูุซุฉ ุงููุฎุชููุฉ ุฌุฏูุง. </font><font style="vertical-align: inherit;">ุฑุจูุง ูู ุฃุฑู ุฃุจุฏูุง ุฌูุงุฒ ููุจููุชุฑ ุญู PDP-11 ุ ูููู ูุง ูุฒุงู ููุงู ุงููุซูุฑ ููุชุนููู ูู ุงูุดูุฑุฉ ุงูุชู ุชูุช ูุชุงุจุชูุง ูุจู ุจุถุน ุณููุงุช ูู ููุงุฏุชู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุงู ูุชุจู Divi Kapoor ูู ุนุงู 2011 ุ ููุฏู ููุงู " </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชูููุฐ ููุงุฉ Linux ููุฃูุงุจูุจ ู FIFOs</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> " ูุธุฑุฉ ุนุงูุฉ ุนูู ููููุฉ ุนูู ุฎุทูุท ุงูุฃูุงุจูุจ (ุญุชู ุงูุขู) ุนูู Linux. </font><font style="vertical-align: inherit;">ู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุคุฎุฑุง ููููุณ ุงุฑุชูุงุจ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุถุญ ูููุฐุฌ ุงูุชูุงุนู ุนุจุฑ ุฎุท ุงูุงุจูุจ ุงูุฐูู ุชุชุฌุงูุฒ ูุฏุฑุงุช ุงููููุงุช ุงููุคูุชุฉ ุงููุฏุฑุงุช. </font><font style="vertical-align: inherit;">ููุธูุฑ ุฃูุถูุง ุงููุฏู ุงูุฐู ูุตูุช ุฅููู ุฎุทูุท ุงูุฃูุงุจูุจ ูู "ุงูููู ุงููุญุงูุธ ููุบุงูุฉ" ูู ุงูุฅุตุฏุงุฑ ุงูุณุงุฏุณ ูู Unix kernel.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar495472/index.html">ุงูุชุญูู ุฅูู ุงููุจุงุชูุฉ ูุง ูููุน ุงููุงุณ ูู ุงูุฅุตุงุจุฉ ุจุฃูุฑุงุถ ูุซู COVID-19</a></li>
<li><a href="../ar495474/index.html">DataGrip 2020.1: ุชุดุบูู ุงูุชููููุงุช ูุงูุชุตุฏูุฑ ุฅูู Excel ูุงููุชุงุฆุฌ ูู ุงููุญุฑุฑ ูุงููุฒูุฏ</a></li>
<li><a href="../ar495476/index.html">ููุงุฐุง ูุงู ูุฌุงุญ Atari DeepMind AI ูุฎูุจุง ููุขูุงู</a></li>
<li><a href="../ar495478/index.html">ุงุฎุชุจุงุฑ ุงูุจูุงูุงุช ุงููุจูุฑุฉ ูุงูุตุบูุฑุฉ: ุงูุงุชุฌุงูุงุช ูุงููุธุฑูุฉ ููุตุชู</a></li>
<li><a href="../ar495480/index.html">ุฅูุดุงุก ุฑูุงุจุท Python ูููุชุจุงุช C / C ++ ุจุงุณุชุฎุฏุงู SIP. ุงูุฌุฒุก ุงูุฃูู</a></li>
<li><a href="../ar495486/index.html">ุชูุฏูุฏุงุช ุฌุฏูุฏุฉ ููุจูุงูุงุช ุงูุณุฑูุฉ: ูุชุงุฆุฌ ุงุณุชุทูุงุน Acronis Global</a></li>
<li><a href="../ar495490/index.html">ูุณู ุงูุงุฎุชุจุงุฑุงุช ูุถูุงู ุงูุฌูุฏุฉ ูู ูุคุชูุฑ DUMP 2020. ูุงุฐุง ุชุชููุน ูุฐุง ุงูุนุงูุ ุงูููุณุฏ: ุฒูุฌ ูู ุงููุณููุงุช ูุงููุฑุฒ</a></li>
<li><a href="../ar495492/index.html">Unreal Engine 4 iOS Game Release Features</a></li>
<li><a href="../ar495494/index.html">ุฅูุดุงุก ุฌุฏููุฉ kube ุฅุถุงููุฉ ูุน ูุฌููุนุฉ ูุฎุตุตุฉ ูู ููุงุนุฏ ุงูุชุฎุทูุท</a></li>
<li><a href="../ar495500/index.html">ุฃูููุณู ููุงููุงู: "ุญุชู ุนุงู 2018 ุ ุงุณุชุฎุฏูุช OSM ููุท ูุฑููุฒุฉ ูู ูุฏููุชู"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>