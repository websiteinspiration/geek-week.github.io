<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëºüèº üå¶Ô∏è üë∂üèø Alexey Naydenov. ITooLabs Case study on the Go (Golang) phone platform. Part 2 üó®Ô∏è üò∞ üñçÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Alexey Naydenov, CEO of ITooLabs , talks about the development of a telecommunication platform for telecom operators in the Go programming language (G...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Alexey Naydenov. ITooLabs Case study on the Go (Golang) phone platform. Part 2</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/491656/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alexey Naydenov, CEO of </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ITooLabs</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , talks about the development of a telecommunication platform for telecom operators in the Go programming language (Golang). </font><font style="vertical-align: inherit;">Alexey also shares his experience of deploying and operating the platform in one of the largest Asian telecom operators, who used the platform to provide voice mail services (VoiceMail) and Virtual PBX (Cloud PBX).</font></font><br>
<br>
<img src="https://habrastorage.org/webt/bf/rk/hi/bfrkhijhrmewwlonzj_jfxi4jqq.jpeg"><a name="habracut"></a><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alexey Naydenov. </font><font style="vertical-align: inherit;">ITooLabs </font><font style="vertical-align: inherit;">Case study on the Go (Golang) phone platform. </font><font style="vertical-align: inherit;">Part 1</font></font></a><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Go: channels</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It is clear that when you have parallel execution, you need synchronization tools. Go provides all the synchronization tools that are needed: mutex's, shared memory ... But channels are a regular mechanism for it. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A channel can be considered as a unidirectional typed queue of n elements (the default is 1). The channel itself can be a parameter, a member of the structure. Moreover, a channel can be transmitted on a channel - at the same time this channel will have the type ‚Äúchannel of channels of this or that type‚Äù.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/xv/_2/iy/xv_2iy4td7lxo9jqyg3m4ut-mde.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
What does this example do in 20 lines? </font><font style="vertical-align: inherit;">This is an http call counter. </font><font style="vertical-align: inherit;">He simply counts where he starts the http server and shows how many times this server has been accessed. </font><font style="vertical-align: inherit;">How is this usually done? </font><font style="vertical-align: inherit;">Usually you make a variable, wrap it with mutex, and increment it. </font><font style="vertical-align: inherit;">Or you make an atomic variable, increment atomically. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Go is different. </font><font style="vertical-align: inherit;">A developer, having tried Go, very quickly begins to write this way. </font><font style="vertical-align: inherit;">In Go, you run the goroutine function, which is called count (8th line) and go count (17th); </font><font style="vertical-align: inherit;">make a variable; </font><font style="vertical-align: inherit;">and then just increment the local variable - the next number is sent to the channel. </font><font style="vertical-align: inherit;">Those of you who remembered Atmos Script Generators, of course, will be right, but in Go channels allow much wider use.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Go: select</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Finally, there is the Select statement, which allows you to select from multiple channels at once. </font><font style="vertical-align: inherit;">This is a typical template in Go, how to complete a goroutine: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/e8/wl/p6/e8wlp6sbekgrkpusmkfwb8kb5ww.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
you transmit two channels. </font><font style="vertical-align: inherit;">Requests go to one channel, and signals go to the other that it is time to round off.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Go: C API (CGO)</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For us, as for the developers of the telephony platform, it was important that Go has a C API, which allows us to write some pieces in C directly in the Go code, which will then be normally compiled, normally linked and then work normally. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/yb/2o/lf/yb2olflx1demq3fy2mlm4z9tt9a.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
That is, you can access all the C libraries that you have on the operating system. </font><font style="vertical-align: inherit;">However, they will also be linked statically.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Go: tools</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Go's toolkit is another reason why they love it. Everything is done with one command - (go). There is a go build command that builds, there is a go test that runs special test functions described in a particular package. There is a go run command that starts and builds right away. There is a command that updates dependencies (go get). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
There are those that format the source: go fmt - we have it, for example, on push'ah. There is no more debate about where, in what way and what formatting style we use - tab or space: there is a go fmt command, there is a certain style that it formats, and there are no disputes. Don't like something? Run go fmt - it will be as it should be.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/v4/gi/cr/v4gicr5uhwblxjbxhb30kjj_hdu.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The go doc command allows you to read documentation and display it in html. </font><font style="vertical-align: inherit;">There is a go tool pprof for profiling, a parsing generator (go tool yacc) and much more. </font><font style="vertical-align: inherit;">In short, the Go toolkit is highly developed for such a young language. </font><font style="vertical-align: inherit;">Many of the ideas in it were not that innovative, but very interesting, which later migrated to other systems - for example, the same Goget and the ability to specify the immediate repository as the name of the package.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Go: IDE</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Generally, I prefer Emacs. </font><font style="vertical-align: inherit;">If there are lovers, then we can fight. </font><font style="vertical-align: inherit;">But for development, I prefer the "adult" IDE: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/x8/p2/0w/x8p20wsl75vdkygrnzj59aracta.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I tried them all, including VIM. </font><font style="vertical-align: inherit;">I can say that at the moment the coolest IDE is the usual one, some kind of IDEA Edition with a plugin for Go. </font><font style="vertical-align: inherit;">The best! </font><font style="vertical-align: inherit;">Recommend. </font><font style="vertical-align: inherit;">If anyone will use it, one must immediately begin and not suffer.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Go: libraries</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Libraries - this was another very, very pleasant surprise, because literally on anyone we found something right away. </font><font style="vertical-align: inherit;">Even when we needed a Javascript interpreter, we thought that we had to write ourselves - we just found it, it already was. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fm/dk/xd/fmdkxdsyusk848vdsss9my-lusw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To date, more than 35,000 different repositories with at least one star have been registered in Git. </font><font style="vertical-align: inherit;">I can repeat my thought: there are our libraries, and foreign ones, and there are a lot of companies that open some kind of internal libraries. </font><font style="vertical-align: inherit;">In general, I can‚Äôt recall the case when I needed something, and I would not immediately find it on GitHub (in the case of Go).</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Go: operation</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Exploitation is a dream, especially for those who, for example, have worked with Java.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Static assembly. </font><font style="vertical-align: inherit;">No run-time dependencies!</font></font></li>
<li> .   ,         : ,     C++  ,       ,   .  Garbage Collector‚Äô!         ,   ,   .</li>
<li>  ‚Äì      .           .</li>
<li> ,   .      .</li>
</ul><br>
<h3>Go: </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Community - it also bribed. </font><font style="vertical-align: inherit;">The Go community is just wonderful and it is flying a rising star. </font><font style="vertical-align: inherit;">Unfortunately, the slide shows little and is not visible: on the left is the repository on GitHub, on the right are the Stack Overflow tags: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/wz/59/h4/wz59h48gz9urulmx6gulgkvkdco.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If you look at Go, then it is in the company of languages ‚Äã‚Äãthat are five times older than it!</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Go vs Node.js</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Battle! </font><font style="vertical-align: inherit;">Compare with Node.js, for example. </font><font style="vertical-align: inherit;">You can actually compare with anything. </font><font style="vertical-align: inherit;">But why with Node? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Suppose Google planned that Go would supplant Java, compete with Java. </font><font style="vertical-align: inherit;">Not really. </font><font style="vertical-align: inherit;">Go turned out to be the main competitor for Node.js, Python, for interpreted languages. </font><font style="vertical-align: inherit;">Why? </font><font style="vertical-align: inherit;">Because on Go, due to type inference, due to many small details (such as the go run command), you get the feeling of an interpreted language, that is, an easy language on which you can make layouts, quickly build and prototype something. </font><font style="vertical-align: inherit;">But at the same time, it really works: it really compiles, starts up and works quickly. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Here we have two simple servers - both there and there http: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/3w/06/ci/3w06ci6nfxo3tiywbvuvugevlzi.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The difference.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Compiled in Go, interpreted in Node.js. </font><font style="vertical-align: inherit;">Launched - it immediately works (well, there too).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Go has a lot of threads (as many processors as there are in the machine). </font><font style="vertical-align: inherit;">In Node.js, as you know, there is one thread (if you want a lot of threads, please start cluster).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Now we begin to complicate the logic - we complicate it in the Handler. </font><font style="vertical-align: inherit;">In Go, you do not complicate anything, but simply take and do as you wrote a linear program that is blocked (send a request to the database - calculate - send a response to the client).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">And questions immediately arise in Node.js ... What will you use now - callbacks, promise, Q, async.js or newfangled yield?</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
When you have a model like Erlang or Go, life becomes much easier.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Go: flaws?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Yes dofiga!</font></font><br>
<br>
<img src="https://habrastorage.org/webt/nm/rv/zi/nmrvzienoyyzehjf_oaby94hpw4.jpeg"><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No parameterized polymorphism, patterns, generics. </font><font style="vertical-align: inherit;">There are only special operations for working with array, arrays and associative arrays. </font><font style="vertical-align: inherit;">All the rest is not.</font></font></li>
<li>    .       ,   .</li>
<li>  cut‚Äôn‚Äôpaste.     Go  , ,        ‚Äì  .  ,   .</li>
<li>  ,  . , ,    Haskell,        ,  ,   .  Go ‚Äì !      , ,    - .</li>
<li>   ‚Äì      ,         .    ‚Äì    .</li>
<li> .  panic/recover,      .</li>
<li>  ,     (   ).</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">There is no place for imagination - too easy!</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Why is Go still?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maybe because of the fast assembly or because of the deployment of one binary? </font><font style="vertical-align: inherit;">Due to competitiveness or efficient iron utilization? </font><font style="vertical-align: inherit;">Maybe due to the fact that he is developing rapidly or thanks to a cool community? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For a long time I tried to answer this question myself. </font><font style="vertical-align: inherit;">In the end, I realized: no, none of these reasons! </font><font style="vertical-align: inherit;">Everything is much simpler: Go works. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/nb/bi/ki/nbbikikxfbybmqln-hp6bbd3vp8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Go is an extremely practical language for engineers. </font><font style="vertical-align: inherit;">For engineers who are engaged in the development of web services and distributed systems - to write interfaces on it, a lot of things ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Is it possible to write "Bitrix" on it? </font><font style="vertical-align: inherit;">I dont know. </font><font style="vertical-align: inherit;">Most likely not, because there are too many interfaces. </font><font style="vertical-align: inherit;">But to write on it a platform on which Bitrix will work faster (for example, a bus for sending messages) is what I need, I'm sure.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Who is using Go?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Who has already managed to jump into this car?</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ed/iv/hp/edivhpyius6ig1fznkt0v0nixvo.jpeg"><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Google is understandable: he has many projects that use Go and have switched to it a long time ago.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Docker.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">InfluxData </font><font style="vertical-align: inherit;">If someone has not tried it, I recommend it. </font><font style="vertical-align: inherit;">Also a rising star.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Twitter</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dropbox</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kodding.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Even Baidu. </font><font style="vertical-align: inherit;">Go, by the way, is very popular in China.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A lot others.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
There is a list of companies that have one way or another noted, doing some projects on Go: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://github.com/golang/go/wiki/GoUsers</font></font></a><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What have we done on Go? </font><font style="vertical-align: inherit;">ITooLabs Centrex</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
What did we write for the year?</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A dynamic cluster that allows you to evenly distribute the load between all its nodes (by hash ring).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Uses Protobuffer for internal communication.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Uses SIP / HTTP / WebSocket, anything for external communication.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It has a media processor (let‚Äôs leave it aside, it is in C ++).</font></font></li>
<li>     JavaScript,    node (    ).    ,   Go:    ,   .      Lua, ,  ,     ‚Äì   JavaScript  Go      ( ).</li>
<li>     ? ,   , , - ,      , ,    ‚Äì   .    - /  ,        2    .</li>
<li>,     ‚Äì  DevOps-friendly. ,         ,     ,      -      ,     , ,         .        ,   ‚Äì .</li>
<li>   1        .</li>
</ol><br>
<h3> </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As I said, around 2012, we realized that the wall was ahead of us. </font><font style="vertical-align: inherit;">It was pretty scary. </font><font style="vertical-align: inherit;">We didn‚Äôt make a big mistake in our forecasts (which is another two years and there will be cranks), because at the beginning of 2014 we really were very bad ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And we quickly migrated a significant part of the generating functionality to our new platform, in particular, records, all kinds of external trunks - that generates a lot of load on the CPU, and with which the old vendor platform already categorically could not cope.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/6h/nt/ok/6hntok5psd_vgsyxlt5jdppdf5q.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Case. </font><font style="vertical-align: inherit;">Voice mail for 70 million subscribers</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now all this is already working successfully and almost the entire record that goes on the platform goes through our system on Go. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If you work for a long time for a reputation, at some point the reputation begins to work for me. </font><font style="vertical-align: inherit;">And for a long time different people have come to us from operators with offers to do something.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">At the end of last year, ‚Äúsomething‚Äù turned out to be a voice mail system for 70 million subscribers for the Indonesian operator Indosat. </font><font style="vertical-align: inherit;">We thought and made on the basis of our platform. </font><font style="vertical-align: inherit;">About three weeks passed from the moment the decision was made (more precisely, from the moment the iron was placed because it took a long time) to the moment it was deployed.</font></font></li>
<li>  16 ,  ,  ,  7  ‚Äì  Application Service  SIB-  Go.   ‚Äì   ++.  16   1800    50&nbsp;000  .  6,5     (   ‚Äì BHCA).</li>
<li>280    ‚Äì    ,    .  1  BHCA  36  , , 2     .  ,    ‚Äì  100    .</li>
<li>        ,  ,   600   .       Ceph   .</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We checked and tested: the system fully withstands a system failure of up to two servers. </font><font style="vertical-align: inherit;">That is, they can simply be turned off. </font><font style="vertical-align: inherit;">This actually happened with us, because the Indonesian people who installed the cables made a little mistake.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Finally, we normally do Rolling updates.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Could we do it in some other language in such a short time? </font><font style="vertical-align: inherit;">Let me remind you, from 2012 to 2015 - 3 years for a product that holds such a load and works for millions of Indonesia subscribers. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I don‚Äôt know, but I think we could do it on Erlang. </font><font style="vertical-align: inherit;">Maybe we could do it in Java. </font><font style="vertical-align: inherit;">Since I, besides the main work, also give lectures on real-time systems and parallel programming at Tula University, for me one of the final results, the reasons why we decided to use Go, was a very simple experiment.</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I gave students a lab and made sure that the Go learning curve is steeper than any language I have ever come across (in this particular area). </font><font style="vertical-align: inherit;">Students began to write more or less decent code, because indecent Go simply does not allow writing. </font><font style="vertical-align: inherit;">Go gives boring code, and only boring code! </font><font style="vertical-align: inherit;">But indecent does not work out - very hard. </font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/ek/ip/7q/ekip7qqbu0cxtdx57lz1vicwi6m.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I can boast that on December 31, 2015, just a month after deployment, 160 thousand messages were recorded on the system in one day, which subscribers send to each other.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Questions</font></font></h3><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Question from the audience (hereinafter - B):</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Thank you very much for the report! Very interesting cases. Tell me, please, how does Go look now for error handling? For example, when I write in Node and I need to do 5 asynchronous operations in a row, my code looks in 5 lines: wait, wait, wait, wait, wait. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AN:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - As I said, there are no exceptions. In any case, in the sense in which you can use them for control, management. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Q:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - How do you manage errors? </font></font><br>
<br>
<img src="https://habrastorage.org/webt/_v/nf/eo/_vnfeojhhes_vsn6thppaoetegy.jpeg"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AN:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - ifs! I repeat that Golang allows you to write quite boring code and provokes cut'n'paste. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Q:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - And how many of these ifs will be on 5 asynchronous operations, each of which can explode? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AN:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- From my point of view, they will be synchronous (from the point of view of this goroutine). 5 ifs. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Q:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - There is almost a doubling of the code. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AN:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Probably, if I paid the developers of the code, I would be upset. But since I pay for the fact that they make good, working code, I am glad of this in principle. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Q:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Is it possible to link some kind of C-library dynamically at all? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AN:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Yes. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Q:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - That is, this functionality remains? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AN:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- What I showed and talked about CGO - there it is linked with a static library, if there is one, and if not, a dynamic one is connected. Moreover, in Go 1.5 a dynamic linking appeared in principle, even now it allows you to create dynamic libraries. But we are so used to it, we have felt such a mechanism so much that we no longer feel the need. Of course, you can connect dynamic C libraries, C ++ - no. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Q:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - And the binary as a result is not too gigantic? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AN:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - No. The binary of our entire system that handles all these calls (along with the JavaScript interpreter inside) is just 6 megabytes. This is a binary that basically fits into the second cache. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AT:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- I myself often heard comparisons: Go is often compared precisely with interpreted languages, and few people have the task of writing a full-fledged communication platform. </font><font style="vertical-align: inherit;">What simpler practical cases are there? </font></font><br>
<br>
<img src="https://habrastorage.org/webt/al/hz/wb/alhzwbpeqqpje-srlzgcptzcula.jpeg"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AN:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - A simpler case is excellent. </font><font style="vertical-align: inherit;">For Megafon, we wrote pre-billing - something like a bus that collects platforms from various components inside (billing, ‚ÄúMultifon‚Äù - a large operator always has a lot of them), this whole thing integrates within itself, adds to the database, calculates what is needed and sends events to different places.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In the same Indonesia, a simple gateway (albeit simple, but distributed), which receives events from our system and passes on to the system that sends its SSD ... These are the kind of tasks - of course, all this is written very, very quickly, which attracts.</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/HoEn7lXNQOU" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A bit of advertising :)</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Thank you for staying with us. </font><font style="vertical-align: inherit;">Do you like our articles? </font><font style="vertical-align: inherit;">Want to see more interesting materials? </font><font style="vertical-align: inherit;">Support us by placing an order or recommending to your friends, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cloud VPS for developers from $ 4.99</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , a </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">unique analog of entry-level servers that was invented by us for you: </font></font></b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The whole truth about VPS (KVM) E5-2697 v3 (6 Cores) 10GB DDR4 480GB SSD 1Gbps from $ 19 or how to divide the server? </font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(options are available with RAID1 and RAID10, up to 24 cores and up to 40GB DDR4). </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dell R730xd 2 times cheaper at the Equinix Tier IV data center in Amsterdam? </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Only we have </font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 x Intel TetraDeca-Core Xeon 2x E5-2697v3 2.6GHz 14C 64GB DDR4 4x960GB SSD 1Gbps 100 TV from $ 199</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> in the Netherlands!</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dell R420 - 2x E5-2430 2.2Ghz 6C 128GB DDR3 2x960GB SSD 1Gbps 100TB - from $ 99! </font></font></b></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Read about</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> How to Build Infrastructure Bldg. </font><font style="vertical-align: inherit;">class c using Dell R730xd E5-2650 v4 servers costing 9,000 euros for a penny?</font></font></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en491642/index.html">How we make videos at Alconost and how the client participates in this</a></li>
<li><a href="../en491644/index.html">Choose a plugin for two-factor authentication in Wordpress</a></li>
<li><a href="../en491648/index.html">Moscow travel hack through the eyes of the participants</a></li>
<li><a href="../en491650/index.html">Design technologies for the implementation of billing systems for corporate clients (part 1)</a></li>
<li><a href="../en491652/index.html">Alexey Naydenov. ITooLabs Case study on the Go (Golang) phone platform. Part 1</a></li>
<li><a href="../en491660/index.html">PHP Digest No. 175 (February 25 - March 10, 2020)</a></li>
<li><a href="../en491666/index.html">SPTDC 2020 - Third School of Practice and Theory of Distributed Computing</a></li>
<li><a href="../en491670/index.html">Digital events in Moscow from March 10 to 15</a></li>
<li><a href="../en491672/index.html">Suddenly: quotation marks against obscurantism. Whatever that means</a></li>
<li><a href="../en491674/index.html">32 differences in the design of a mobile application for iOS and Android</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>