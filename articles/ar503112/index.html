<!doctype html>
<html class="no-js" lang="ar">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ฅ ๐จ๐พโ๐ค ๐ง๐พโ๐คโ๐ง๐ฝ ูุตุฉ ุฏุนู ุณุญุงุจุฉ DNS ููููุฏุฉ ูู Google Cloud โน๐พ ๐๐พ ๐ค</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูู ูุญุฑุฑ ูุฏููุฉ Google: ูู ุชุณุงุกูุช ููููุง ููู ูุชุนุงูู ูููุฏุณู Google Cloud Technical Solutions (TSE) ูุน ููุงููุงุช ุงูุฏุนู ุงููููุ ุชุชูุซู ูุณุคูููุฉ ูููุฏุณู ุงูุฏุนู ุงููู...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>ูุตุฉ ุฏุนู ุณุญุงุจุฉ DNS ููููุฏุฉ ูู Google Cloud</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/dcmiran/blog/503112/"><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ูุญุฑุฑ ูุฏููุฉ Google:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ุชุณุงุกูุช ููููุง ููู ูุชุนุงูู ูููุฏุณู Google Cloud Technical Solutions (TSE) ูุน ููุงููุงุช ุงูุฏุนู ุงููููุ ุชุชูุซู ูุณุคูููุฉ ูููุฏุณู ุงูุฏุนู ุงูููู ูู TSE ูู ุงููุดู ุนู ูุตุงุฏุฑ ุงููุดููุงุช ุงูุชู ุญุฏุฏูุง ุงููุณุชุฎุฏููู ูุญููุง. ุจุนุถ ูุฐู ุงููุดุงูู ุจุณูุทุฉ ููุบุงูุฉ ุ ูููู ูู ุจุนุถ ุงูุฃุญูุงู ุชุตุงุฏู ูุฏุงุก ูุชุทูุจ ุงูุชูุงู ุงูุนุฏูุฏ ูู ุงููููุฏุณูู ูุฑุฉ ูุงุญุฏุฉ. ูู ูุฐู ุงูููุงูุฉ ุ ุณูุฎุจุฑูุง ุฃุญุฏ ููุธูู TSE ุนู ูุดููุฉ ุตุนุจุฉ ููุบุงูุฉ ูู ููุงุฑุณุชู ุงูุฃุฎูุฑุฉ - </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุงูุฉ ุญุฒู DNS ุงูููููุฏุฉ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ูู ุณูุงู ูุฐู ุงููุตุฉ ุ ุณูุฑู ููู ุชููู ุงููููุฏุณูู ูู ุญู ุงููููู ุ ููุง ูู ุงูุฃุดูุงุก ุงูุฌุฏูุฏุฉ ุงูุชู ุชุนููููุง ูู ุณูุงู ุฅุฒุงูุฉ ุงูุฎุทุฃ. ูุฃูู ุฃูุง ุชุฎุจุฑู ูุฐู ุงููุตุฉ ููุท ุนู ุฎุทุฃ ูุชุฌุฐุฑ ุ ุจู ุชููุฑ ุฃูุถูุง ููููุง ููุนูููุงุช ุงูุชู ุชุญุฏุซ ุนูุฏ ุฅุฑุณุงู ุทูุจ ูุฏุนู Google Cloud.</font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/_6/_r/hh/_6_rhhetn5m7cydp0wpyweduawo.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ุงุณุชูุดุงู ุงูุฃุฎุทุงุก ูุฅุตูุงุญูุง ูู ูู ูู ุงูุนูู ูุงููู. ูุจุฏุฃ ูู ุดูุก ุจุจูุงุก ูุฑุถูุฉ ุญูู ุณุจุจ ุงูุณููู ุบูุฑ ุงูููุงุณู ูููุธุงู ุ ูุจุนุฏ ุฐูู ูุชู ุงุฎุชุจุงุฑู ููููุฉ. ููุน ุฐูู ุ ูุจู ุตูุงุบุฉ ุงููุฑุถูุฉ ุ ูุฌุจ ุนูููุง ุชุญุฏูุฏ ุงููุดููุฉ ุจูุถูุญ ูุตูุงุบุชูุง ุจุฏูุฉ. ุฅุฐุง ูุงู ุงูุณุคุงู ูุจุฏู ุบุงูุถูุง ููุบุงูุฉ ุ ูุนููู ุชุญููู ูู ุดูุก ุจุดูู ุตุญูุญ ุ ูุฐุง ูู "ูู" ุงุณุชูุดุงู ุงูุฃุฎุทุงุก ูุฅุตูุงุญูุง.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุณูุงู Google Cloud ุ ุชููู ูุฐู ุงูุนูููุงุช ูุนูุฏุฉ ูู ุจุนุถ ุงูุฃุญูุงู ุ ุญูุซ ุฅู Google Cloud ุชูุงูุญ ูุถูุงู ุฎุตูุตูุฉ ูุณุชุฎุฏูููุง. </font><font style="vertical-align: inherit;">ูุจุณุจุจ ูุฐุง ุ ูุง ูุชูุชุน ูููุฏุณู TSE ุจุญู ุงููุตูู ูุชุนุฏูู ุฃูุธูุชู ุ ููุง ุงููุฏุฑุฉ ุนูู ุนุฑุถ ุงูุชููููุงุช ุนูู ูุทุงู ูุงุณุน ููุง ููุนู ุงููุณุชุฎุฏููู. </font><font style="vertical-align: inherit;">ูุฐูู ุ ูุงุฎุชุจุงุฑ ุฃู ูู ูุฑุถูุงุชูุง ุ ูุง ูููููุง (ุงููููุฏุณูู) ุชุนุฏูู ุงููุธุงู ุจุณุฑุนุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุนุชูุฏ ุจุนุถ ุงููุณุชุฎุฏููู ุฃููุง ุณูุตูุญ ูู ุดูุก ููุง ูู ุฃู ุงููููุงูููุง ูู ุฎุฏูุฉ ุงูุณูุงุฑุฉ ุ ููุฑุณู ุฅูููุง ุจุจุณุงุทุฉ ูุนุฑูู ุงูุขูุฉ ุงูุงูุชุฑุงุถูุฉ ุ ุจูููุง ูู ุงููุงูุน ุชุณุชูุฑ ุงูุนูููุฉ ูู ุดูู ูุญุงุฏุซุฉ: ุฌูุน ุงููุนูููุงุช ุ ูุฅูุดุงุก ูุชุฃููุฏ (ุฃู ุฏุญุถ) ุงููุฑุถูุงุช ุ ููู ุงูููุงูุฉ ุ ุญู ูุชู ุจูุงุก ุงููุดุงูู ุนูู ุงูุชูุงุตู ูุน ุงูุนููู.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุถูุฉ ููุฏ ุงููุธุฑ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูููู ูุฏููุง ูุตุฉ ุฐุงุช ููุงูุฉ ุฌูุฏุฉ. </font><font style="vertical-align: inherit;">ุฃุญุฏ ุฃุณุจุงุจ ุงูุญู ุงููุงุฌุญ ููุญุงูุฉ ุงูููุชุฑุญุฉ ูู ูุตู ุชูุตููู ูุฏููู ููุบุงูุฉ ูููุดููุฉ. </font><font style="vertical-align: inherit;">ุฃุฏูุงู ููููู ุฑุคูุฉ ูุณุฎุฉ ูู ุงูุชุฐูุฑุฉ ุงูุฃููู (ุชู ุชุญุฑูุฑูุง ูู ุฃุฌู ุฅุฎูุงุก ุงููุนูููุงุช ุงูุณุฑูุฉ): </font></font><br>
<img src="https://habrastorage.org/webt/_y/ug/qo/_yugqouzqk51y1z9gqx_nv_n-qa.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชุญุชูู ูุฐู ุงูุฑุณุงูุฉ ุนูู ุงููุซูุฑ ูู ุงููุนูููุงุช ุงููููุฏุฉ ููุง:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VM ุงููุญุฏุฏ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุดุงุฑ ุฅูู ุงููุดููุฉ - ูุง ูุนูู DNS</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุดุงุฑ ุฅูู ุญูุซ ุชุชุฌูู ุงููุดููุฉ - VM ูุงูุญุงููุฉ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุดุงุฑ ุฅูู ุงูุฎุทูุงุช ุงูุชู ุงุชุฎุฐูุง ุงููุณุชุฎุฏู ูุชุญุฏูุฏ ุงููุดููุฉ.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชู ุชุณุฌูู ุงูุงูุชูุงุณ ุนูู ุฃูู "P1: ุงูุฃุซุฑ ุงูุญุฑุฌ - ุงูุฎุฏูุฉ ุบูุฑ ูุงุจูุฉ ููุงุณุชุฎุฏุงู ูู ุงูุฅูุชุงุฌ" ุ ููุง ูุนูู ุงููุฑุงูุจุฉ ุงููุณุชูุฑุฉ ููุญุงูุฉ ุนูู ูุฏุงุฑ ุงูุณุงุนุฉ ุทูุงู ุฃูุงู ุงูุฃุณุจูุน ููููุง ููุธุงู "Follow the Sun" (ูููู ูุฑุงุกุฉ ุงูุฑุงุจุท ุจูุฒูุฏ ูู ุงูุชูุงุตูู ุญูู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃููููุงุช ููุงููุงุช ุงููุณุชุฎุฏู</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) ุ ูุน ูููู ูู ูุฑูู ุฏุนู ููู ูุงุญุฏ ุฅูู ุงูุขุฎุฑ ูู ูู ุชุญูู ููููุทูุฉ ุงูุฒูููุฉ. </font><font style="vertical-align: inherit;">ูู ุงููุงูุน ุ ุนูุฏูุง ูุตูุช ุงููุดููุฉ ุฅูู ูุฑูููุง ูู ุฒููุฑุฎ ุ ุชูููุช ูู ุงูุฅุจุญุงุฑ ุญูู ุงูุนุงูู. </font><font style="vertical-align: inherit;">ุจุญููู ูุฐุง ุงูููุช ุ ุงุชุฎุฐ ุงููุณุชุฎุฏู ุชุฏุงุจูุฑ ูุชูููู ุงูุนูุงูุจ ุ ููุน ุฐูู ุ ูุงู ูุฎุดู ุชูุฑุงุฑ ุงููููู ุนูู ุงูุฅูุชุงุฌ ุ ุญูุซ ูู ูุชู ุงูุนุซูุฑ ุนูู ุงูุณุจุจ ุงูุฑุฆูุณู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุงูููุช ุงูุฐู ูุตูุช ููู ุงูุชุฐูุฑุฉ ุฅูู ุฒููุฑุฎ ุ ูุงูุช ูุฏููุง ุจุงููุนู ุงููุนูููุงุช ุงูุชุงููุฉ ูู ูุชูุงูู ุงููุฏ:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุญุชูู </font></font><code>/etc/hosts</code></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุญุชูู </font></font><code>/etc/resolv.conf</code></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุณุชูุชุงุฌ </font></font><code>iptables-save</code></li>
<li><font style="vertical-align: inherit;"></font><code>ngrep</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููู pcap ุงูุฐู </font><font style="vertical-align: inherit;">ุชู ุชุฌููุนู ุจูุงุณุทุฉ ุงูุฃูุฑ</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจูุฐู ุงูุจูุงูุงุช ุ ููุง ุนูู ุงุณุชุนุฏุงุฏ ูุจุฏุก ูุฑุญูุฉ "ุงูุชุญููู" ูุงุณุชูุดุงู ุงูุฃุฎุทุงุก ูุฅุตูุงุญูุง.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฎุทูุงุชูุง ุงูุฃููู</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุงุฏุฆ ุฐู ุจุฏุก ุ ูููุง ุจูุญุต ุงูุณุฌูุงุช ูุญุงูุฉ ุฎุงุฏู ุงูุจูุงูุงุช ุงููุตููุฉ ูุงูุชุฃูุฏ ูู ุฃูู ูุนูู ุจุดูู ุตุญูุญ. </font><font style="vertical-align: inherit;">ูุณุชุฌูุจ ุฎุงุฏู ุงูุจูุงูุงุช ุงููุตููุฉ ุจุนููุงู IP 169.254.169.254 ููู ูุณุคูู ุ ูู ุจูู ุฃููุฑ ุฃุฎุฑู ุ ุนู ุงูุชุญูู ูู ุฃุณูุงุก ุงููุทุงูุงุช. </font><font style="vertical-align: inherit;">ููุฏ ุชุญูููุง ุฃูุถูุง ูู ุฃู ุฌุฏุงุฑ ุงูุญูุงูุฉ ูุนูู ุจุดูู ุตุญูุญ ูุน VM ููุง ูููุน ุงูุญุฒู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุงูุช ููุงู ูุดููุฉ ุบุฑูุจุฉ: ุฏุญุถ ุงุฎุชุจุงุฑ nmap ูุฑุถูุชูุง ุงูุฑุฆูุณูุฉ ุญูู ููุฏุงู ุญุฒู UDP ุ ูุฐูู ุงุณุชูุชุฌูุง ุนููููุง ุนุฏุฉ ุฎูุงุฑุงุช ูุทุฑู ุฃุฎุฑู ููุชุญูู ูููุง:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุชุฎุชูู ุงูุญุฒู ุจุดูู ุงูุชูุงุฆูุ </font><font style="vertical-align: inherit;">=&gt; ุชุญูู ูู ููุงุนุฏ iptables</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญุฏุฉ ุงูุฅุฑุณุงู ุงููุจุฑู</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุตุบูุฑุฉ ุฌุฏูุง </font><font style="vertical-align: inherit;">ุ </font><font style="vertical-align: inherit;">=&gt; ุงูุชุญูู ูู ุงูุฅุฎุฑุงุฌ</font></font><code>ip a show</code></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุชุคุซุฑ ุงููุดููุฉ ููุท ุนูู ุญุฒู UDP ุฃู TCPุ </font><font style="vertical-align: inherit;">=&gt; ุงุจุชุนุฏ</font></font><code>dig +tcp</code></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชู ุฅุฑุฌุงุน ุงูุญุฒู ุญูุฑ ููุฏุชุ </font><font style="vertical-align: inherit;">=&gt; ุงุจุชุนุฏ</font></font><code>tcpdump</code></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุชุนูู libdns ุจุดูู ุตุญูุญุ </font><font style="vertical-align: inherit;">=&gt; ุงุฐูุจ ุจุนูุฏูุง </font></font><code>strace</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุชุญูู ูู ููู ุงูุญุฒูุฉ ูู ููุง ุงูุงุชุฌุงููู</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุง ููุฑุฑ ุงูุงุชุตุงู ุจุงููุณุชุฎุฏู ูุงุณุชูุดุงู ุงูุฃุฎุทุงุก ูุฅุตูุงุญูุง ุจุดูู ูุจุงุดุฑ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฎูุงู ุงูููุงููุฉ ุ ุชูููุง ูู ุงูุชุญูู ูู ุนุฏุฉ ุฃุดูุงุก:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุนุฏ ุนุฏุฉ ุนูููุงุช ุชุญูู ุ ูุณุชุจุนุฏ ููุงุนุฏ iptables ูู ูุงุฆูุฉ ุงูุฃุณุจุงุจ.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชุญูู ูู ูุงุฌูุงุช ุงูุดุจูุฉ ูุฌุฏุงูู ุงูุชูุฌูู ุ ููุชุญูู ูุฑุฉ ุฃุฎุฑู ูู MTU</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฌุฏ ุฃู </font></font><code>dig +tcp google.com</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(TCP) ูุนูู ููุง ููุจุบู ุ ููู </font></font><code>dig google.com</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(UDP) ูุง ูุนูู</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุนุฏ </font></font><code>tcpdump</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุดุบูู ุฃุซูุงุก ุงูุนูู </font></font><code>dig</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูุฌุฏ ุฃูู ูุชู ุฅุฑุฌุงุน ุญุฒู UDP</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญู ุชุดุบูู </font></font><code>strace dig google.com</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฑู ููู ุญูุฑ ุจุดูู ุตุญูุญ ุงูููุงููุงุช </font></font><code>sendmsg()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ู </font></font><code>recvms()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ููุน ุฐููุ ุชูุช ููุงุทุนุฉ ุงูุซุงููุฉ ูู ุงููููุฉ</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุณูุก ุงูุญุธ ุ ูุฐุง ุงูุชุญูู ุนูู ูุดู ุงูุงูุชูุงุก ุ ููุญู ูุถุทุฑูู ุฅูู ููู ุงููุดููุฉ ุฅูู ุงูููุทูุฉ ุงูุฒูููุฉ ุงูุชุงููุฉ. ููุน ุฐูู ุ ุฃุซุงุฑ ุงููุฏุงุก ุงูุชูุงููุง ุจูุฑูููุง ุ ูููุชุฑุญ ุฃุญุฏ ุงูุฒููุงุก ุฅูุดุงุก ุญุฒูุฉ DNS ุงููุตุฏุฑ ุจุงุณุชุฎุฏุงู ุฎุฑุฏุฉ ูุญุฏุฉ Python.</font></font><br>
<pre><code class="bash hljs">from scapy.all import *<font></font>
<font></font>
answer = sr1(IP(dst=<span class="hljs-string">"169.254.169.254"</span>)/UDP(dport=53)/DNS(rd=1,qd=DNSQR(qname=<span class="hljs-string">"google.com"</span>)),verbose=0)
<span class="hljs-built_in">print</span> (<span class="hljs-string">"169.254.169.254"</span>, answer[DNS].summary())</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุดุฆ ูุฐุง ุงูุฌุฒุก ุญุฒูุฉ DNS ููุฑุณู ุงูุทูุจ ุฅูู ุฎุงุฏู ุจูุงูุงุช ุงูุชุนุฑูู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููู ุงููุณุชุฎุฏู ุจุชุดุบูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุ ููุชู ุฅุฑุฌุงุน ุงุณุชุฌุงุจุฉ DNS ุ ููุชููู ุงูุชุทุจูู ุฐูู ุ ููุง ูุคูุฏ ุนุฏู ูุฌูุฏ ูุดููุฉ ุนูู ูุณุชูู ุงูุดุจูุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุนุฏ "ุงูุฌููุฉ ุญูู ุงูุนุงูู" ุงูุชุงููุฉ ุ ูุนูุฏ ุงูุงูุชูุงุณ ุฅูู ูุฑูููุง ุ ูุฃูุง ุฃููู ุจุชุฑุฌูุชู ุจุงููุงูู ุฅูู ููุณู ุ ูุนุชูุฏูุง ุฃูู ุณูููู ุฃูุซุฑ ููุงุกูุฉ ูููุณุชุฎุฏู ุฅุฐุง ุชููู ุงูุงูุชูุงุณ ุญููู ูู ููุงู ุฅูู ุขุฎุฑ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุบุถูู ุฐูู ุ ููุงูู ุงููุณุชุฎุฏู ุจูุทู ุนูู ุชูุฏูู ููุทุฉ ูุตูุฑุฉ ุงููุธุงู. ูุฐู ุฃุฎุจุงุฑ ุฌูุฏุฉ ุฌุฏูุง: ุฅู ุงููุฏุฑุฉ ุนูู ุงุฎุชุจุงุฑ ุงููุธุงู ุจููุณู ุชุณุฑูุน ุนูููุฉ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก ูุฅุตูุงุญูุง ุจุดูู ููุญูุธ ุ ูุฃูู ูู ุชุนุฏ ุจุญุงุฌุฉ ุฅูู ูุทุงูุจุฉ ุงููุณุชุฎุฏู ุจุชุดุบูู ุงูุฃูุงูุฑ ุ ูุฅุฑุณุงู ุงููุชุงุฆุฌ ุฅููู ูุชุญููููุง ุ ูููููู ุงูููุงู ุจูู ุดูุก ุจููุณู!</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุฏุฃ ุงูุฒููุงุก ูุญุณุฏูููู ููููุงู. </font><font style="vertical-align: inherit;">ูู ุงูุบุฏุงุก ุ ููุงูุด ุงููุฏุงุก ุ ูููู ูุง ุฃุญุฏ ูุฏูู ููุฑุฉ ุนูุง ูุญุฏุซ. </font><font style="vertical-align: inherit;">ูุญุณู ุงูุญุธ ุ ูุฅู ุงููุณุชุฎุฏู ููุณู ูุฏ ุงุชุฎุฐ ุจุงููุนู ุฅุฌุฑุงุกุงุช ููุชุฎููู ูููุณ ูู ุนุฌูุฉ ูู ุฃูุฑู ุ ูุฐูู ูุฏููุง ุงูููุช ูุฅุนุฏุงุฏ ุงููุดููุฉ. </font><font style="vertical-align: inherit;">ูุจูุง ุฃููุง ููุชูู ุตูุฑุฉ ุ ูููููุง ุฅุฌุฑุงุก ุฃู ุงุฎุชุจุงุฑุงุช ุชูููุง. </font><font style="vertical-align: inherit;">ุบุฑุงูุฉ!</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฑุฌูุน ุฎุทูุฉ ุฅูู ุงููุฑุงุก</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃุญุฏ ุงูุฃุณุฆูุฉ ุงูุฃูุซุฑ ุดููุนูุง ูู ููุงุจูุฉ ููููุฏุณ ูุธู ูู: "ูุงุฐุง ูุญุฏุซ ุนูุฏูุง ุชููู ping </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.google.com</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ" </font><font style="vertical-align: inherit;">ุงูุณุคุงู ูู ุฃููู ุ ูุฃู ุงููุฑุดุญ ูุญุชุงุฌ ุฅูู ูุตู ูู ุงููุดุฑุฉ ุฅูู ูุณุงุญุฉ ุงููุณุชุฎุฏู ุ ุฅูู ููุจ ุงููุธุงู ููุฐูู ุฅูู ุงูุดุจูุฉ. </font><font style="vertical-align: inherit;">ุฃุจุชุณู: ุฃุญูุงููุง ุชููู ุฃุณุฆูุฉ ุงูููุงุจูุฉ ูููุฏุฉ ุฃูุถูุง ูู ุงูุญูุงุฉ ุงููุงูุนูุฉ ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃูุฑุฑ ุชุทุจูู ุณุคุงู ุฅูุดุงุฑ ุนูู ุงููุดููุฉ ุงูุญุงููุฉ. </font><font style="vertical-align: inherit;">ุชุญุฏุซ ุชูุฑูุจูุง ุ ุนูุฏ ูุญุงููุฉ ุชุญุฏูุฏ ุงุณู DNS ุ ูุญุฏุซ ูุง ููู:</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณุชุฏุนู ุงูุชุทุจูู ููุชุจุฉ ุงููุธุงู ุ ุนูู ุณุจูู ุงููุซุงู libdns</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุญุต libdns ุชูููู ุงููุธุงู ุงูุฐู ูุฌุจ ุฃู ูุณุชุฎุฏูู ุฎุงุฏู DNS (ูู ุงูุฑุณู ุงูุจูุงูู ูู 169.254.169.254 ุ ุฎุงุฏู ุงูุจูุงูุงุช ุงููุตููุฉ)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณุชุฎุฏู libdns ููุงููุงุช ุงููุธุงู ูุฅูุดุงุก ููุจุณ UDP (SOKET_DGRAM) ูุฅุฑุณุงู ุญุฒู UDP ูุน ุทูุจ DNS ูู ููุง ุงูุงุชุฌุงููู</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุงุณุชุฎุฏุงู ูุงุฌูุฉ sysctl ุ ููููู ุชูููู ููุฏุณ UDP ุนูู ูุณุชูู kernel</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุชูุงุนู ุงูููุงุฉ ูุน ุงูุฌูุงุฒ ูุฅุฑุณุงู ุงูุญุฒู ุนุจุฑ ุงูุดุจูุฉ ูู ุฎูุงู ูุงุฌูุฉ ุงูุดุจูุฉ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุชูุท ูุฑุงูุจ ุงููุฑุงูุจุฉ ูููุฑุฑ ุงูุญุฒูุฉ ุฅูู ุฎุงุฏู ุงูุจูุงูุงุช ุงููุตููุฉ ุนูุฏูุง ูุชูุงูุณ ูุนูุง</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญุฏุฏ ุฎุงุฏู ุงูุจูุงูุงุช ุงููุตููุฉ ุงุณู DNS ูู ุฎูุงู ุงูุณุญุฑ ุงูุฎุงุต ุจู ููุนูุฏ ุงูุงุณุชุฌุงุจุฉ ููุณูุง</font></font></li>
</ol><br>
<img src="https://habrastorage.org/webt/iq/sx/nk/iqsxnkobn1stcxrcbnpiuaovl_w.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฏุนูู ุฃุฐูุฑู ุจุงููุฑุถูุงุช ุงูุชู ูุฌุญูุง ูู ุฃุฎุฐูุง ูู ุงูุงุนุชุจุงุฑ: </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุฑุถูุฉ: ุงูููุชุจุงุช ุงูููุณูุฑุฉ</font></font></b><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุฎุชุจุงุฑ 1: ุชุดุบูู ุณุฑูุน ูู ุงููุธุงู ุ ุชุญูู ูู ุฃู ุญูุฑ ูุณุจุจ ููุงููุงุช ุงููุธุงู ุงูุตุญูุญุฉ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุชูุฌุฉ: ุงุณุชุฏุนุงุก ููุงููุงุช ุงููุธุงู ุงูุตุญูุญุฉ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุงุฎุชุจุงุฑ 2: ูู ุฎูุงู srapy ููุชุญูู ููุง ุฅุฐุง ูุงู ุจุฅููุงููุง ุชุญุฏูุฏ ุงูุฃุณูุงุก ุงูุชู ุชุชุฌุงูุฒ ููุชุจุงุช ุงููุธุงู</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุชูุฌุฉ: ูุณุชุทูุน</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุงุฎุชุจุงุฑ 3: ุชุดุบูู rpm โV ุนูู ุญุฒูุฉ libdns ููููุงุช ููุชุจุฉ md5sum</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุชูุฌุฉ: ุฑูุฒ ุงูููุชุจุฉ ูุทุงุจู ุชูุงููุง ููุฑูุฒ ุงูููุฌูุฏ ูู ูุธุงู ุงูุชุดุบูู ุงูุนุงูู</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุฎุชุจุงุฑ 4: ุชุญููู ุตูุฑุฉ ูุธุงู ุงูุฌุฐุฑ ูููุณุชุฎุฏู ุนูู ุงูุฌูุงุฒ ุงูุธุงูุฑู ุจุฏูู ูุฐุง ุงูุณููู ุ ุชุดุบูู chroot ุ ูุนุฑูุฉ ูุง ุฅุฐุง ูุงู DNS ูุนูู</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุชูุฌุฉ: ูุนูู DNS ุจุดูู ุตุญูุญ</font></font></li>
</ul><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฎูุงุตุฉ ุนูู ุฃุณุงุณ ุงูุงุฎุชุจุงุฑุงุช:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงููุดููุฉ ููุณุช ูู ุงูููุชุจุงุช </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุฑุถูุฉ: ููุฌุฏ ุฎุทุฃ ูู ุฅุนุฏุงุฏุงุช DNS</font></font></b><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุฎุชุจุงุฑ 1: ุชุญูู ูู tcpdump ููุนุฑูุฉ ูุง ุฅุฐุง ุชู ุฅุฑุณุงู ุญุฒู DNS ูุฅุนุงุฏุชูุง ุจุดูู ุตุญูุญ ุจุนุฏ ุชุดุบูู ุญูุฑ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุชูุฌุฉ: ุฅุฑุณุงู ุงูุญุฒู ุจุดูู ุตุญูุญ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุฎุชุจุงุฑ 2: ุฅุนุงุฏุฉ ูุญุต ุนูู ุงูุฎุงุฏู </font></font><code>/etc/nsswitch.conf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ู</font></font><code>/etc/resolv.conf</code></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุชูุฌุฉ: ูู ุดูุก ุตุญูุญ</font></font></li>
</ul><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุงุณุชูุชุงุฌ ุงููุงุฆู ุนูู ุงูุงุฎุชุจุงุฑ:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงููุดููุฉ ููุณุช ูู </font><b><font style="vertical-align: inherit;">ูุฑุถูุฉ</font></b><font style="vertical-align: inherit;"> ุชูููู DNS </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: ุชูู Kernel</font></font></b><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุฎุชุจุงุฑ: ุชุซุจูุช ููุงุฉ ุฌุฏูุฏุฉ ุ ูุงูุชุญูู ูู ุงูุชูููุน ุ ูุฅุนุงุฏุฉ ุงูุชุดุบูู</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุชูุฌุฉ: ุณููู ููุงุซู</font></font></li>
</ul><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฎูุงุตุฉ ุจูุงุกู ุนูู ุงูุงุฎุชุจุงุฑุงุช:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูููุงุฉ ุบูุฑ ุชุงููุฉ </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุฑุถูุฉ: ุงูุณููู ุบูุฑ ุงูุตุญูุญ ูุดุจูุฉ ุงููุณุชุฎุฏู (ุฃู ูุงุฌูุฉ ุงูุดุจูุฉ ุงูุฎุงุตุฉ ุจุจุฑูุงูุฌ Hypervisor)</font></font></b><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุฎุชุจุงุฑ 1: ุชุญูู ูู ุฅุนุฏุงุฏุงุช ุฌุฏุงุฑ ุงูุญูุงูุฉ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุชูุฌุฉ: ูููู ุฌุฏุงุฑ ุงูุญูุงูุฉ ุจุชูุฑูุฑ ุญุฒู DNS ุนูู ูู ูู ุงููุถูู ู GCP</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุฎุชุจุงุฑ 2: ุงุนุชุฑุงุถ ุญุฑูุฉ ุงููุฑูุฑ ูุชุชุจุน ุตุญุฉ ููู ูุฅุฑุฌุงุน ุงุณุชุนูุงูุงุช DNS</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุชูุฌุฉ: ููุฑ tcpdump ุจุงุณุชูุงู ุญุฒู ุงูุฅุฑุฌุงุน ูู ูุจู ุงููุถูู</font></font></li>
</ul><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุงุณุชูุชุงุฌ ุงููุงุฆู ุนูู ุงูุงุฎุชุจุงุฑ:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงููุดููุฉ ููุณุช ูู ุดุจูุฉ </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุฑุถูุฉ: ุฎุงุฏู ุจูุงูุงุช ุงูุชุนุฑูู ูุง ูุนูู</font></font></b><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุงุฎุชุจุงุฑ 1: ุงูุชุญูู ูู ุณุฌูุงุช ุฎุงุฏู ุงูุจูุงูุงุช ุงููุตููุฉ ุจุญุซูุง ุนู ุงูุญุงูุงุช ุงูุดุงุฐุฉ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุชูุฌุฉ: ูุง ููุฌุฏ ุดุฐูุฐ ูู ุงูุณุฌูุงุช</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุงุฎุชุจุงุฑ 2: ุชุฌุงูุฒ ุฎุงุฏู ุจูุงูุงุช ุงูุชุนุฑูู ูู ุฎูุงู </font></font><code>dig @8.8.8.8</code></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุชูุฌุฉ: ุชู ุงูุชูุงู ุงูุฅุฐู ุญุชู ุจุฏูู ุงุณุชุฎุฏุงู ุฎุงุฏู ุจูุงูุงุช ุงูุชุนุฑูู</font></font></li>
</ul><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุงุณุชูุชุงุฌ ุงููุงุฆู ุนูู ุงูุงุฎุชุจุงุฑ:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงููุดููุฉ ููุณุช ูู </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฎูุงุตุฉ ุงูููุงุฆูุฉ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฎุงุฏู ุงูุจูุงูุงุช ุงููุตููุฉ </font><b><font style="vertical-align: inherit;">:</font></b><font style="vertical-align: inherit;"> ููุฏ ุงุฎุชุจุฑูุง ุฌููุน ุงูุฃูุธูุฉ ุงููุฑุนูุฉ ุจุงุณุชุซูุงุก </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุนุฏุงุฏุงุช ููุช ุงูุชุดุบูู!</font></font></b><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุบูุต ูู ุฅุนุฏุงุฏุงุช ููุช ุชุดุบูู ุงูููุงุฉ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุชููุฆุฉ ููุช ุชุดุบูู kernel ุ ููููู ุงุณุชุฎุฏุงู ุฎูุงุฑุงุช ุณุทุฑ ุงูุฃูุงูุฑ (grub) ุฃู ูุงุฌูุฉ sysctl. </font><font style="vertical-align: inherit;">ุจุญุซุช </font></font><code>/etc/sysctl.conf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููุฑุช ููุท ุ ูุฌุฏุช ุจุนุถ ุงูุฅุนุฏุงุฏุงุช ุงููุฎุตุตุฉ. </font><font style="vertical-align: inherit;">ุฃุดุนุฑ ููุฃููู ูุฏ ุฃูุณูุช ุจุดูุก ูุง ุ ููุฏ ุฑูุถุช ุฌููุน ุงูุฅุนุฏุงุฏุงุช ุบูุฑ ุงููุชุตูุฉ ุจุงูุดุจูุฉ ุฃู ุบูุฑ TCP ุ ุงููุชุจููุฉ ูู ุฅุนุฏุงุฏุงุช ุงูุฌุจู </font></font><code>net.core</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุซู ุงูุชููุช ุฅูู ุงูููุงู ุงูุฐู ููุชูู ููู VM ุฃุฐููุงุช ุงููุถูู ูุจุฏุฃุช ูู ุชุทุจูู ูุงุญุฏ ุชูู ุงูุขุฎุฑ ุ ูุงุญุฏูุง ุชูู ุงูุขุฎุฑ ูุน ุฅุนุฏุงุฏุงุช VM ููุณูุฑุฉ ุ ุญุชู ูุตูุช ุฅูู ุงููุฌุฑู:</font></font><br>
<pre><code class="bash hljs">net.core.rmem_default = 2147483647</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุง ูู ุ ุชูููู ูุณุฑ DNS! ููุฏ ูุฌุฏุช ุฃุฏุงุฉ ููุฌุฑููุฉ. ูููู ููุงุฐุง ูุญุฏุซ ูุฐุงุ ูุง ุฒูุช ุจุญุงุฌุฉ ุฅูู ุฏุงูุน. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุญุฏุซ ุชุนููู ุงูุญุฌู ุงูุฃุณุงุณู ูููุฎุฒู ุงููุคูุช ูุญุฒูุฉ DNS ูู ุฎูุงู </font></font><code>net.core.rmem_default</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ุชุฎุชูู ุงููููุฉ ุงููููุฐุฌูุฉ ูู ููุงู ูุง ุถูู 200 ููููุจุงูุช ุ ููุน ุฐูู ุ ุฅุฐุง ูุงู ุงูุฎุงุฏู ุงูุฎุงุต ุจู ูุชููู ุงููุซูุฑ ูู ุญุฒู DNS ุ ููููู ุฒูุงุฏุฉ ุญุฌู ุงููุฎุฒู ุงููุคูุช. ุฅุฐุง ูุงู ุงููุฎุฒู ุงููุคูุช ููุชูุฆูุง ูู ุงูููุช ุงูุญุงูู ุ ุชุตู ุญุฒูุฉ ุฌุฏูุฏุฉ ุ ุนูู ุณุจูู ุงููุซุงู ุ ูุฃู ุงูุชุทุจูู ูุง ูุนุงูุฌูุง ุจุงูุณุฑุนุฉ ุงููุงููุฉ ุ ูุณุชุจุฏุฃ ูู ููุฏุงู ุงูุญุฒู. ูุงู ุนููููุง ุจุฒูุงุฏุฉ ุญุฌู ุงููุฎุฒู ุงููุคูุช ุจุดูู ุตุญูุญ ูุฃูู ูุงู ูุฎุดู ููุฏุงู ุงูุจูุงูุงุช ุ ูุฃูู ุงุณุชุฎุฏู ุงูุชุทุจูู ูุฌูุน ุงูููุงููุณ ูู ุฎูุงู ุญุฒู DNS. ุงููููุฉ ุงูุชู ุญุฏุฏูุง ูู ุงูุญุฏ ุงูุฃูุตู ุงููููู: 2 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">31</font></font></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -1 (ุฅุฐุง ููุช ุจุชุนููู 2 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">31</font></font></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ูุณูู ุชูุฑุฌุน ุงูููุงุฉ "INVALID ARGUMENT").</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฌุฃุฉ ุ ุฃุฏุฑูุช ุณุจุจ ุนูู nmap ู scapy ุจุดูู ุตุญูุญ: ููุฏ ุงุณุชุฎุฏููุง ูุขุฎุฐ ุบูุฑ ูุทููุฉ! ุชุฎุชูู ูุขุฎุฐ ุงูุชูุตูู ุงูุฃูููุฉ ุนู ูุขุฎุฐ ุงูุชูุตูู ุงูุนุงุฏูุฉ: ููู ุชุนูู ุนูู ุชุฌุงูุฒ ุฃุฌูุฒุฉ iptables ุ ููุง ูุชู ุชุฎุฒูููุง ูุคูุชูุง! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููู ููุงุฐุง "ุงููุฎุฒู ุงููุคูุช ุงููุจูุฑ ููุบุงูุฉ" ูุณุจุจ ูุดุงููุ ูู ุงููุงุถุญ ุฃูู ูุง ูุนูู ุนูู ุงููุญู ุงูููุดูุฏ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุนูุฏ ูุฐู ุงูููุทุฉ ุ ูููููู ุฅุนุงุฏุฉ ุฅูุชุงุฌ ุงููุดููุฉ ุนูู ููู ูุชุนุฏุฏุฉ ูุชูุฒูุนุงุช ูุชุนุฏุฏุฉ. ููุฏ ุชุฌูุช ุงููุดููุฉ ุจุงููุนู ูู ููุงุฉ 3.x ูุชุชุฌูู ุงูุขู ุฃูุถูุง ูู ููุงุฉ 5.x. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุงููุงูุน ุ ุนูุฏ ุจุฏุก ุงูุชุดุบูู</font></font><br>
<pre><code class="bash hljs">sysctl -w net.core.rmem_default=$((<span class="hljs-number">2</span>**<span class="hljs-number">31</span>-<span class="hljs-number">1</span>))</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชููู DNS ุนู ุงูุนูู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุฏุฃุช ุงูุจุญุซ ุนู ููู ุงูุนูู ูู ุฎูุงู ุฎูุงุฑุฒููุฉ ุจุญุซ ุซูุงุฆูุฉ ุจุณูุทุฉ ููุฌุฏุช ุฃู ุงููุธุงู ูุนูู ูุน 2147481343 ุ ูููู ูุฐุง ุงูุฑูู ูุงู ุนุจุงุฑุฉ ุนู ูุฌููุนุฉ ูุง ูุนูู ููุง ูู ุงูุฃุฑูุงู. ุฏุนูุช ุงูุนููู ูุชุฌุฑุจุฉ ูุฐุง ุงูุฑูู ุ ูุฃุฌุงุจ ุจุฃู ุงููุธุงู ูุนูู ูุน google.com ุ ููููู ูุง ูุฒุงู ูุฎุทุฆ ูู ุงููุฌุงูุงุช ุงูุฃุฎุฑู ุ ูุฐูู ูุงุตูุช ุชุญูููู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุฏ ููุช ุจุชุซุจูุช </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dropwatch</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ููู ุฃุฏุงุฉ ูุงู ูุฌุจ ุฃู </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;">ุฃุณุชุฎุฏููุง ูู</font></a><font style="vertical-align: inherit;"> ูุจู: ููู ุชูุถุญ ููุงู ูุตูู ุงูุญุฒูุฉ ุจุงูุถุจุท ุฅูู ุงูููุงุฉ. ูุงูุช ุงููุธููุฉ ูุฐูุจุฉ </font></font><code>udp_queue_rcv_skb</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ููุฏ ููุช ุจุชูุฒูู ูุตุงุฏุฑ kernel ูุฃุถูุช ุนุฏุฉ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุธุงุฆู</font></font></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><code>printk</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุชุชุจุน ุงูููุงู ุงูุฐู ุชุญุตู ููู ุงูุญุฒูุฉ ุนูู ูุฌู ุงูุชุญุฏูุฏ. ููุฏ ูุฌุฏุช ุจุณุฑุนุฉ ุงูุดุฑุท ุงูุตุญูุญ</font></font><code>if</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ู ููุชุฑุฉ ูู ุงูููุช ูุงู ูุญุฏู ุจู ุจุจุณุงุทุฉ ุ ูุฃูู ูู ุฐูู ุงูููุช ุงุฌุชูุน ูู ุดูุก ุฃุฎูุฑูุง ูู ุตูุฑุฉ ูุงููุฉ: 2 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">31</font></font></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -1 ุ ุฑูู ูุง ูุนูู ูู ุ ูุฌุงู ุฎุงูู ... ูุงู ุฌุฒุกูุง ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ูู </font></font><code>__udp_enqueue_schedule_skb</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<pre><code class="bash hljs"><span class="hljs-keyword">if</span> (rmem &gt; (size + sk-&gt;sk_rcvbuf))<font></font>
		goto uncharge_drop;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุญูุธุฉ:</font></font><br>
<ul>
<li><code>rmem</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฏูู ููุน int</font></font></li>
<li><code>size</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ูู ููุน u16 (ุบูุฑ ูููุนุฉ ุณุชุฉ ุนุดุฑ ุจุช) ููุฎุฒู ุญุฌู ุงูุญุฒูุฉ</font></font></li>
<li><code>sk-&gt;sk_rcybuf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ูู ููุน int ููุฎุฒู ุญุฌู ุงููุฎุฒู ุงููุคูุช ุ ุงูุฐู ูุณุงูู ุงููููุฉ ูู ุงูุชุนุฑูู </font></font><code>net.core.rmem_default</code></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุนูุฏ </font></font><code>sk_rcvbuf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุงูุชุฑุงุจ ูู 2 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">31</font></font></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ูููู ุฃู ูุคุฏู ุฌูุน ุญุฌู ุงูุญุฒูุฉ ุฅูู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุฌุงูุฒ ุนุฏุฏ ุตุญูุญ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ููุฃูู int ุ ุชุตุจุญ ูููุชู ุณุงูุจุฉ ุ ูุฐุง ูุตุจุญ ุงูุดุฑุท ุตุญูุญูุง ุนูุฏูุง ูุฌุจ ุฃู ูููู ูุงุฐุจูุง (ูููู ุงูุนุซูุฑ ุนูู ุงููุฒูุฏ ุญูู ูุฐุง ุนู ุทุฑูู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุฑุฌุน</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุชู ุชุตุญูุญ ุงูุฎุทุฃ ุจุทุฑููุฉ ุชุงููุฉ: ุนู ุทุฑูู ุงูุฅุฑุณุงู ุฅูู </font></font><code>unsigned int</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ููุช ุจุชุทุจูู ุงูุชุตุญูุญ ูุฃุนุฏุช ุชุดุบูู ุงููุธุงู ุ ูุจุนุฏ ุฐูู ุจุฏุฃ DNS ูู ุงูุนูู ูุฑุฉ ุฃุฎุฑู.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุทุนู ุงููุตุฑ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุช ุจุฅุนุงุฏุฉ ุชูุฌูู ุงููุชุงุฆุฌ ุงูุชู ุชูุตูุช ุฅูููุง ุฅูู ุงูุนููู ูุฃุฑุณูุช </font><font style="vertical-align: inherit;">ุชุตุญูุญ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LKML</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> kernel. </font><font style="vertical-align: inherit;">ุฃูุง ุฑุงุถู: ูู ุฌุฒุก ูู ุงููุบุฒ ุงุฌุชูุน ูุนูุง ูู ูุญุฏุฉ ูุงุญุฏุฉ ุ ูููููู ุฃู ุฃุดุฑุญ ุจุฏูุฉ ููุงุฐุง ูุงุญุธูุง ูุง ูุงุญุธูุงู ุ ูุงูุฃูู ูู ุฐูู ุ ุชูููุง ูู ุฅูุฌุงุฏ ุญู ูููุดููุฉ ูู ุฎูุงู ุงูุนูู ูุนูุง! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชุฌุฏุฑ ุงูุฅุดุงุฑุฉ ุฅูู ุฃู ุงูุญุงูุฉ ุงุชุถุญ ุฃููุง ูุงุฏุฑุฉ ุ ููุญุณู ุงูุญุธ ุ ูุงุฏุฑูุง ูุง ูุชู ุชููู ูุซู ูุฐู ุงูููุงููุงุช ุงููุนูุฏุฉ ูู ุงููุณุชุฎุฏููู ููุง.</font></font><br>
<br>
<hr><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><img src="https://habrastorage.org/webt/0i/q1/3c/0iq13ceb1rqhy6ymre4-xvedsfu.jpeg"><br>
</a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar503096/index.html">ููุงุฐุง ูุฑูุฏ ุงููุฏูุฑูู ุงูุนูุงู ูุฅุนุงุฏุฉ ุงูุชุฏููุฑุ</a></li>
<li><a href="../ar503100/index.html">ุฑุฆูุณ ุงูุฅูุชุฑูุช</a></li>
<li><a href="../ar503106/index.html">ููุฎุต ุงูุงูุชุดุงู ุบูุฑ ุงูููุงุณู: ุนูู ุงูุฃูุณุงุจ ูููุจุงุชุงุช ุงูููุชุฑุณุฉ ูุงููุทุฑูุงุช ุนูู ุชููุชุฑ ูุบุงุฒ ุงูุถุญู ูู ุฐุฑู ุงูุทุงุฆุฑ</a></li>
<li><a href="../ar503108/index.html">ุซูุงููุฉ ุฃููุงู ูู ููุณ ูุฒุญ: ุนู ุงูููู ูู ุญูุซ ุงูุฑูุงุถูุงุช</a></li>
<li><a href="../ar503110/index.html">ุงููุจุงุก ุงูุฑููู: CoronaVirus vs CoViper</a></li>
<li><a href="../ar503118/index.html">ุฏูููุฏ ูุงูุบ - ุนู ุนุฏู ุงูุชุฏุฎู ูุงูุฃุฒูุงุช ูุงูุฃุฑุถ ุงููุญุฑููุฉ</a></li>
<li><a href="../ar503126/index.html">Likbez ุญูู VPS: ููููุฉ ุชูููู ุณุทุญ ุงูููุชุจ ุงูุจุนูุฏ ุฅุฐุง ููุช ูุณุชุฎุฏู Win</a></li>
<li><a href="../ar503128/index.html">ููููุฉ ุชุถููู ColorPicker ูู JavaScript Gantt ูุชุบููุฑ ููุงู ุงูููู</a></li>
<li><a href="../ar503132/index.html">ุจุงุฑููู ุฃุจุงุชุดู ุนุงูู ุงูุณุฑุนุฉ ูู Python ูุน Apache Arrow</a></li>
<li><a href="../ar503134/index.html">ุงูุฅุฏุงุฑุฉ = ูุฑูู + ููุชุฌ. ููุดู ุนู ุตูุบุฉ ูุฐุง ุงูุนุงู: ุงูุฃูุซุฑ ูุงุฆุฏุฉ ุญูู ุงููุงุณ ููููุงุณ ูู DUMP 2020</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>