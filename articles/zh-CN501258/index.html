<!doctype html>
<html class="no-js" lang="zh-CN">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💺 🙍🏼 🍤 JavaScript触摸滑块 🧙🏼 💉 🍩</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="当我开始学习JavaScript时，我真的很想了解滑块的工作原理以及可以用滑动或鼠标翻转的滑块，但是我没有找到能很好地说明我所需要的材料。一段时间后，我设法做类似的事情。现在，我想写一篇有关此的文章，以便其他想了解它的工作原理并为滑块（不仅是）创建触摸事件的人，可以更轻松地弄清楚它。我将尝试按顺序列...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>JavaScript触摸滑块</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/501258/"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当我开始学习JavaScript时，我真的很想了解滑块的工作原理以及可以用滑动或鼠标翻转的滑块，但是我没有找到能很好地说明我所需要的材料。</font><font style="vertical-align: inherit;">一段时间后，我设法做类似的事情。</font><font style="vertical-align: inherit;">现在，我想写一篇有关此的文章，以便其他想了解它的工作原理并为滑块（不仅是）创建触摸事件的人，可以更轻松地弄清楚它。</font><font style="vertical-align: inherit;">我将尝试按顺序列出并通过示例性说明来支持这些解释。</font></font><a name="habracut"></a></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我不认为自己是JavaScript方面的专家，总是有一些需要学习的东西，因此，如果您知道如何更好/更容易/更高效地编写一些代码片段，请务必在注释中编写。</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内容：</font></font></p><br>
<ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们将执行什么功能？</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">编写HTML和CSS</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如何运作？</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">编写JavaScript</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">总</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">完整版本代码</font></font></a></li>
</ol><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您可以立即看到</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" title="代码库" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个示例</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p><br>
<a name="1"></a><br>
<h3 id="1-kakoy-funkcional-budem-delat"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.我们将执行哪些功能？</font></font></h3><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">让我们用0编写一个简单的滑块，它将具有以下功能：</font></font></p><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们实现了触摸和拖动翻转幻灯片的功能；</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用箭头键切换幻灯片；</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">分别锁定第一张和最后一张幻灯片上的箭头键←和→。</font></font></li>
</ul><br>
<p>          .<br>
 -  ,      - ,  -,   ,  ,       ..       .     .        - ,   .</p><br>
<a name="2"></a><br>
<h3 id="2-pishem-html-i-css">2.  HTML  CSS</h3><br>
<p>         HTML  CSS?</p><br>
<p>   (1 )   200200 .   - .<br>
      :</p><br>
<p><img src="https://habrastorage.org/webt/nf/xo/f9/nfxof9n0y88bw3s-w0dcac3vem8.jpeg"></p><br>
<p>  .<br>
           .        ,    <code>.slider-track</code>    <code>display: flex</code>.        ,     ,       <code>flex-shrink: 0</code>,    .</p><br>
<p><img src="https://habrastorage.org/webt/jw/sz/pu/jwszpu8yl1cpl9ptgblu8kuppqe.jpeg"></p><br>
<p>      .      track    ,   <code>.slider-list</code>.            ,     <code>overflow: hidden</code>.       ,   .</p><br>
<p><img src="https://habrastorage.org/webt/xr/zg/ba/xrzgbax_n7tfjmeru_t6u1b5lay.jpeg"></p><br>
<p>   -.  ́        <code>.slider-arrows</code>     .    <code>.slider-list</code> (<code>overflow: hidden</code>)    ,  :</p><br>
<ul>
<li>  <code>.slider-list</code> padding-bottom         ;</li>
<li> <code>.slider-list</code>    ,     <code>.slider</code>    (   )     .</li>
</ul><br>
<p> ́       CSS. </p><br>
<p>HTML   :</p><br>
<pre><code class="html hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"slider"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"slider-list"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"slider-track"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"slide"</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"slide"</span>&gt;</span>2<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"slide"</span>&gt;</span>3<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"slide"</span>&gt;</span>4<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"slide"</span>&gt;</span>5<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"slider-arrows"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"prev"</span>&gt;</span><span class="hljs-symbol">&amp;larr;</span><span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"next"</span>&gt;</span><span class="hljs-symbol">&amp;rarr;</span><span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></code></pre><br>
<p><code>&amp;larr;</code>  <code>&amp;rarr;</code>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"> HTML-</a>,    ,       .</p><br>
<p>CSS  :</p><br>
<pre><code class="css hljs"><span class="hljs-selector-class">.slider</span> {
  <span class="hljs-attribute">position</span>: relative;
  <span class="hljs-attribute">width</span>: <span class="hljs-number">200px</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">200px</span>;
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">50px</span> auto <span class="hljs-number">0</span>;
  <span class="hljs-comment">/*           */</span>
  <span class="hljs-attribute">user-select</span>: none;
  <span class="hljs-comment">/*    ,        X */</span>
  <span class="hljs-attribute">touch-action</span>: pan-y;<font></font>
}<font></font>
<font></font>
<span class="hljs-comment">/*  -    ,
    pointer-events: none,
     */</span><font></font>
<font></font>
<span class="hljs-selector-class">.slider</span> <span class="hljs-selector-tag">img</span> {
  <span class="hljs-attribute">poiner-events</span>: none;<font></font>
}<font></font>
<font></font>
<span class="hljs-selector-class">.slider-list</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">200px</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">200px</span>;
  <span class="hljs-attribute">overflow</span>: hidden;<font></font>
}<font></font>
<font></font>
<span class="hljs-selector-class">.slider-list</span><span class="hljs-selector-class">.grab</span> {
  <span class="hljs-attribute">cursor</span>: grab;<font></font>
}<font></font>
<font></font>
<span class="hljs-selector-class">.slider-list</span><span class="hljs-selector-class">.grabbing</span>{
  <span class="hljs-attribute">cursor</span>: grabbing;<font></font>
}<font></font>
<font></font>
<span class="hljs-selector-class">.slider-track</span> {
  <span class="hljs-attribute">display</span>: flex;<font></font>
}<font></font>
<font></font>
<span class="hljs-selector-class">.slide</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">200px</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">200px</span>;
  <span class="hljs-comment">/*     */</span>
  <span class="hljs-attribute">flex-shrink</span>: <span class="hljs-number">0</span>;
  <span class="hljs-comment">/*       */</span>
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">50px</span>;
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">align-items</span>: center;
  <span class="hljs-attribute">justify-content</span>: center;
  <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#000</span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-selector-class">.slider-arrows</span> {
  <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">15px</span>;
  <span class="hljs-attribute">text-align</span>: center;<font></font>
}<font></font>
<font></font>
<span class="hljs-selector-class">.next</span>,
<span class="hljs-selector-class">.prev</span> {
  <span class="hljs-attribute">background</span>: none;
  <span class="hljs-attribute">border</span>: none;
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> <span class="hljs-number">10px</span>;
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">30px</span>;
  <span class="hljs-attribute">cursor</span>: pointer;<font></font>
}<font></font>
<font></font>
<span class="hljs-selector-class">.next</span><span class="hljs-selector-class">.disabled</span>,
<span class="hljs-selector-class">.prev</span><span class="hljs-selector-class">.disabled</span> {
  <span class="hljs-attribute">opacity</span>: .<span class="hljs-number">25</span>;
  <span class="hljs-attribute">pointer-events</span>: none;<font></font>
}</code></pre><br>
<p>    :</p><br>
<p><img src="https://habrastorage.org/webt/oj/yr/s2/ojyrs2bcyolvwx2ufm4d86acsz0.jpeg"></p><br>
<p> <code>overflow: hidden</code>:</p><br>
<p><img src="https://habrastorage.org/webt/fs/wq/lz/fswqlz2fxxri-kierfd5ihrop8a.png"></p><br>
<p>  ,       .</p><br>
<a name="3"></a><br>
<h3 id="3-kak-eto-budet-rabotat">3.    ?</h3><br>
<p>       <code>transform: translate3d(x, y, z)</code>,       .    <code>transform: translateX(x)</code>    <code>will-change: transform</code>.  <code>style</code>        <code>match()</code>.<br>
         <code>slideIndex</code>.   ,      (200px).      —   <code>transform: translate3d(x, y, z)</code>   <code>x</code>   : <code>  *  </code>.             -.</p><br>
<p>  ,  .</p><br>
<p>       .      <code>touchstart</code> (   <code>mousedown</code>),      — <code>touchmove</code> (<code>mousemove</code>),    — <code>touchend</code> (<code>mouseup</code>).</p><br>
<p>       <code>event.clientX</code> (  )  :</p><br>
<ol>
<li><p> 3       — <code>swipeStart</code>, <code>swipeAction</code>  <code>swipeEnd</code>.</p><br>
</li>
<li><p>      ()   X ( <code>posX1</code>  <code>posInit</code>,  <code>posX1</code>    ,  <code>posInit</code> ).</p><br>
</li>
<li><p>  ,     <code>posX1</code>,     <code>posX2</code>,     <code>style.transform</code>,   .   <code>posX1</code>  .<br>
<strong>   :</strong></p><br>
<ul>
<li><code>posX1</code>  <code>posInit</code> — ,     (   <code>event.clientX</code>).      <code>swipeStart</code>, ,     320px,      <code>posInit</code>  <code>posX1</code>  160.  <code>swipeAction</code>  <code>posX1</code>  .</li>
</ul><br>
<p><img src="https://habrastorage.org/webt/dz/bz/6m/dzbz6mo5sfew2rulzo0w5yl7fmq.gif"></p><br>
<ul>
<li><code>posX2</code> —  <code>posX1</code>  <code>event.clientX</code>.          <code>swipeAction</code>, ,     - ,  " " = 161,  160 — 161 = -1,    -1px.    :</li>
</ul><br>
<p><img src="https://habrastorage.org/webt/zt/gl/r3/ztglr32votan_w0nonxcjrefny8.gif"></p><br>
<p> ,     ,         X,       <code>posX2</code>     ,       .     0.5  10,     (    ,   ́ ,     ,  ).</p><br>
</li>
<li><p>  ,            (<code>posFinal</code>)   ""   (<code>posThreshold</code>),    .<br>
   .     .       ,    :</p><br>
<ul>
<li><code>posFinal</code> = <code>posInit</code> – <code>posX1</code> (    ,      <code>swipeAction</code>, ,    200px,             , <code>posFinal</code>   100).</li>
</ul><br>
<p><img src="https://habrastorage.org/webt/ua/1c/mc/ua1cmcv-ugb8rj4hrqaactjhogw.gif"></p><br>
<ul>
<li><code>posThreshold</code> =   (200px) * 0,3 = 60.       <code>posFinal</code>, ,  <code>posFinal</code> &gt; 60,   ,     .  :<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">if</span> (posFinal &gt;= posThreshold) nextSlide()  prevSlide(); <span class="hljs-keyword">else</span> currentSlide();</code></pre></li>
</ul><br>
<p>    <code>else</code> - ,      .</p><br>
<p>    <code>posThreshold</code>    ,          ,   <code>prev()</code>  <code>next()</code> .      <code>posInit</code>  <code>posX1</code>.     320px, ́    ,   0px-320px (     0,      320). ,     ,        <code>posInit</code> 160. ,       (   ),  <code>posX1</code>    160  0.        ,  <code>posX1</code>   c 160  320. ,         ,    <code>posInit</code> 160,  <code>posX1</code> 100,     <code>posThreshold</code>      .   :</p><br>
<pre><code class="javascript hljs"><span class="hljs-keyword">if</span> (posInit &gt; posX1) nextSlide(); <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (posInit &lt; posX1) prevSlide();</code></pre><br>
<p>  ,       ,   <code>click</code>.    <code>posInit</code> === <code>posX1</code>.      ,    .</p><br>
</li>
</ol><br>
<p>       .     JavaScript.</p><br>
<a name="4"></a><br>
<h3 id="4-pishem-javascript">4.  JavaScript</h3><br>
<p>      ,      ,        ""    ,      ,    .       ,     .        ,   .</p><br>
<p>    :</p><br>
<ul>
<li><code>.slider-track</code>     <code>transfrom: translate3d(Xpx, 0px, 0px)</code>;</li>
<li>     <code>transfrom: translate3d(0px, 0px, 0px)</code>   <code>style</code>,     ;</li>
<li>      <code>style.transform</code>      <code>match()</code>        ;</li>
<li>     <code>swipeStart</code>  <code>.slider-list</code>     <code>touchstart</code>  <code>mousedown</code>;</li>
<li>  <code>swipeStart</code>      <code>document</code>  <code>swipeAction</code>  <code>swipeEnd</code>     <code>touchmove</code> (<code>mousemove</code>)  <code>touchend</code> (<code>mouseup</code>) ,  ;</li>
<li>        <code>posThreshold</code>,      <code>slideIndex</code>     ;</li>
<li>  <code>posThreshold</code>   ,      ;</li>
<li>   -,   .</li>
</ul><br>
<p>        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="></a>.<br>
       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="> </a></p><br>
<p>      .    HTML-         querySelector   DOM,       querySelector.          ,    .    .</p><br>
<pre><code class="javascript hljs"><span class="hljs-keyword">let</span> slider = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.slider'</span>),<font></font>
  sliderList = slider.querySelector(<span class="hljs-string">'.slider-list'</span>),<font></font>
  sliderTrack = slider.querySelector(<span class="hljs-string">'.slider-track'</span>),<font></font>
  slides = slider.querySelectorAll(<span class="hljs-string">'.slide'</span>),<font></font>
  arrows = slider.querySelector(<span class="hljs-string">'.slider-arrows'</span>),<font></font>
  prev = arrows.children[<span class="hljs-number">0</span>],<font></font>
  next = arrows.children[<span class="hljs-number">1</span>],<font></font>
  slideWidth = slides[<span class="hljs-number">0</span>].offsetWidth,<font></font>
  slideIndex = <span class="hljs-number">0</span>,<font></font>
  posInit = <span class="hljs-number">0</span>,<font></font>
  posX1 = <span class="hljs-number">0</span>,<font></font>
  posX2 = <span class="hljs-number">0</span>,<font></font>
  posFinal = <span class="hljs-number">0</span>,<font></font>
  posThreshold = slideWidth * <span class="hljs-number">.35</span>,<font></font>
  trfRegExp = <span class="hljs-regexp">/[-0-9.]+(?=px)/</span>,<font></font>
  slide = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{<font></font>
    sliderTrack.style.transition = <span class="hljs-string">'transform .5s'</span>;<font></font>
    sliderTrack.style.transform = <span class="hljs-string">`translate3d(-<span class="hljs-subst">${slideIndex * slideWidth}</span>px, 0px, 0px)`</span>;<font></font>
<font></font>
    <span class="hljs-comment">//   prev    </span>
    <span class="hljs-comment">//     </span>
    <span class="hljs-comment">//   next    </span>
    <span class="hljs-comment">//     </span>
    prev.classList.toggle(<span class="hljs-string">'disabled'</span>, slideIndex === <span class="hljs-number">0</span>);<font></font>
    next.classList.toggle(<span class="hljs-string">'disabled'</span>, slideIndex === --slides.length);<font></font>
  } ...</code></pre><br>
<p><code>trfRegExp</code> —     ,        <code>transform</code>   <code>.slider-track</code>.</p><br>
<p>          <code>event.clientX</code>,         touches — <code>event.touches[0].clientX</code>.     <code>event</code>     ..       ,       <code>getEvent</code>.    <code>event.type</code>    touch          touch   event.      .</p><br>
<pre><code class="javascript hljs">getEvent = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">return</span> event.type.search(<span class="hljs-string">'touch'</span>) !== <span class="hljs-number">-1</span> ? event.touches[<span class="hljs-number">0</span>] : event;
  <span class="hljs-comment">// p.s. event -     </span><font></font>
},<font></font>
<span class="hljs-comment">//  es6</span>
getEvent = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> event.type.search(<span class="hljs-string">'touch'</span>) !== <span class="hljs-number">-1</span> ? event.touches[<span class="hljs-number">0</span>] : event,<font></font>
<font></font>
swipeStart = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">let</span> evt = getEvent();<font></font>
<font></font>
  <span class="hljs-comment">//       </span><font></font>
  posInit = posX1 = evt.clientX;<font></font>
<font></font>
  <span class="hljs-comment">//   ,  track     </span>
  <span class="hljs-comment">// ..      slide()</span>
  sliderTrack.style.transition = <span class="hljs-string">''</span>;<font></font>
<font></font>
  <span class="hljs-comment">//        </span>
  <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'touchmove'</span>, swipeAction);
  <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'touchend'</span>, swipeEnd);
  <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'mousemove'</span>, swipeAction);
  <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'mouseup'</span>, swipeEnd);<font></font>
},<font></font>
swipeAction = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">let</span> evt = getEvent(),
    <span class="hljs-comment">//          transform</span><font></font>
    style = sliderTrack.style.transform,<font></font>
    <span class="hljs-comment">//           </span>
    transform = +style.match(trfRegExp)[<span class="hljs-number">0</span>];<font></font>
<font></font>
  posX2 = posX1 - evt.clientX;<font></font>
  posX1 = evt.clientX;<font></font>
<font></font>
  sliderTrack.style.transform = <span class="hljs-string">`translate3d(<span class="hljs-subst">${transform - posX2}</span>px, 0px, 0px)`</span>;
  <span class="hljs-comment">//       .replace():</span>
  <span class="hljs-comment">// sliderTrack.style.transform = style.replace(trfRegExp, match =&gt; match - posX2);</span>
  <span class="hljs-comment">//          </span>
} ...</code></pre><br>
<p>   <code>swipeAction</code>:<br>
      <code>transform</code>.  :<br>
       <code>translate3d(0px, 0px, 0px)</code>    "<code>px</code>".          <code>transform</code>.       .<br>
   : <code>[-0-9.]+(?=px)</code>,   :</p><br>
<ul>
<li><code>[-0-9.]</code> —   ,     ""  "  0  9"  "";</li>
<li><code>+</code> —    ,        1   ,      , : 5, 101.10, -19, -12.5  ..;</li>
<li><code>(?=px)</code> — ,      ,      "px".</li>
</ul><br>
<p>     <code>.slider-track</code>   ,       <code>sliderTrack.style.transform = 'translate3d(0px, 0px, 0px)'</code>,    <code>swipeAction</code>   . :</p><br>
<p><img src="https://habrastorage.org/webt/4-/bn/wc/4-bnwcpct0an3z9ugo_fwrjhvgi.gif"></p><br>
<p>     (      ) —  <code>swipeAction</code>  , <code>.slider-track</code>      .     <code>swipeEnd</code>   ,      ,     :</p><br>
<pre><code class="javascript hljs">swipeEnd = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-comment">//   </span><font></font>
  posFinal = posInit - posX1;<font></font>
<font></font>
  <span class="hljs-built_in">document</span>.removeEventListener(<span class="hljs-string">'touchmove'</span>, swipeAction);
  <span class="hljs-built_in">document</span>.removeEventListener(<span class="hljs-string">'mousemove'</span>, swipeAction);
  <span class="hljs-built_in">document</span>.removeEventListener(<span class="hljs-string">'touchend'</span>, swipeEnd);
  <span class="hljs-built_in">document</span>.removeEventListener(<span class="hljs-string">'mouseup'</span>, swipeEnd);<font></font>
<font></font>
  <span class="hljs-comment">//         </span>
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Math</span>.abs(posFinal) &gt; posThreshold) {
    <span class="hljs-comment">//    ,     </span>
    <span class="hljs-keyword">if</span> (posInit &lt; posX1) {<font></font>
      slideIndex--;<font></font>
    <span class="hljs-comment">//    ,     </span>
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (posInit &gt; posX1) {<font></font>
      slideIndex++;<font></font>
    }<font></font>
  }<font></font>
<font></font>
  <span class="hljs-comment">//   ,     </span>
  <span class="hljs-keyword">if</span> (posInit !== posX1) {<font></font>
    slide();<font></font>
  }<font></font>
<font></font>
};</code></pre><br>
<p> touch  drag     ,  . :  <code>posFinal</code>   <code>posThreshold</code>,   , ,     .   <code>Math.abs()</code>   .</p><br>
<p><img src="https://habrastorage.org/webt/ap/nl/va/apnlvaasqnkfe_cfdcfi8nxjkjq.gif"></p><br>
<p>    .        ,            .</p><br>
<pre><code class="javascript hljs">arrows.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">let</span> target = event.target;<font></font>
<font></font>
  <span class="hljs-keyword">if</span> (target === next) {<font></font>
    slideIndex++;<font></font>
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (target === prev) {<font></font>
    slideIndex--;<font></font>
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">return</span>;<font></font>
  }<font></font>
<font></font>
  slide();<font></font>
});<font></font>
<font></font>
sliderTrack.style.transform = <span class="hljs-string">'translate3d(0px, 0px, 0px)'</span>;<font></font>
<font></font>
slider.addEventListener(<span class="hljs-string">'touchstart'</span>, swipeStart);<font></font>
slider.addEventListener(<span class="hljs-string">'mousedown'</span>, swipeStart);</code></pre><br>
<p>       .        .</p><br>
<a name="5"></a><br>
<h3 id="itogo"></h3><br>
<p>    .   tocuh , drag   -.     ,    ,    :</p><br>
<ul>
<li>        ,         .   ,            ,        :</li>
</ul><br>
<p><img src="https://habrastorage.org/webt/tb/hs/ze/tbhszevifizhaslvl6ecu-atqzc.gif"></p><br>
<p>          Y,     ,         (    ).</p><br>
<ul>
<li>     ,     :</li>
</ul><br>
<p><img src="https://habrastorage.org/webt/sd/63/pt/sd63pt4pzjjnf8vuo4mrbvvexsq.gif"></p><br>
<p>                   ,       ,      .</p><br>
<ul>
<li>     ,    :</li>
</ul><br>
<p><img src="https://habrastorage.org/webt/ek/yh/u0/ekyhu0zljt-xdjiixmxmw7yeslq.gif"></p><br>
<p>                ,         .             <code>swipeAction</code>,    <code>swipeStart</code>   1 .</p><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当滑块尚未完成移动时，可以“抓住”滑块。</font></font></li>
</ul><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要解决此问题，您需要声明一个变量</font></font><code>allowSwipe</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并调整对其的滑动禁止。</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我不会详细描述。</font><font style="vertical-align: inherit;">只需在</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下面</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">布置此代码</font><font style="vertical-align: inherit;">。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在此</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" title="代码库" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例中，</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所有这些条件都已经满足。</font><font style="vertical-align: inherit;">另外，为清楚起见，滑块上的光标也会更改。</font></font></p><br>
<a name="full"></a><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">完整代码（滑动，拖动，箭头）</font></font></b>
                        <div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-keyword">let</span> slider = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.slider'</span>),<font></font>
  sliderList = slider.querySelector(<span class="hljs-string">'.slider-list'</span>),<font></font>
  sliderTrack = slider.querySelector(<span class="hljs-string">'.slider-track'</span>),<font></font>
  slides = slider.querySelectorAll(<span class="hljs-string">'.slide'</span>),<font></font>
  arrows = slider.querySelector(<span class="hljs-string">'.slider-arrows'</span>),<font></font>
  prev = arrows.children[<span class="hljs-number">0</span>],<font></font>
  next = arrows.children[<span class="hljs-number">1</span>],<font></font>
  slideWidth = slides[<span class="hljs-number">0</span>].offsetWidth,<font></font>
  slideIndex = <span class="hljs-number">0</span>,<font></font>
  posInit = <span class="hljs-number">0</span>,<font></font>
  posX1 = <span class="hljs-number">0</span>,<font></font>
  posX2 = <span class="hljs-number">0</span>,<font></font>
  posFinal = <span class="hljs-number">0</span>,<font></font>
  posThreshold = slides[<span class="hljs-number">0</span>].offsetWidth * <span class="hljs-number">0.35</span>,<font></font>
  trfRegExp = <span class="hljs-regexp">/([-0-9.]+(?=px))/</span>,<font></font>
  getEvent = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> (event.type.search(<span class="hljs-string">'touch'</span>) !== <span class="hljs-number">-1</span>) ? event.touches[<span class="hljs-number">0</span>] : event;<font></font>
  },<font></font>
  slide = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">if</span> (transition) {<font></font>
      sliderTrack.style.transition = <span class="hljs-string">'transform .5s'</span>;<font></font>
    }<font></font>
    sliderTrack.style.transform = <span class="hljs-string">`translate3d(-<span class="hljs-subst">${slideIndex * slideWidth}</span>px, 0px, 0px)`</span>;<font></font>
<font></font>
    prev.classList.toggle(<span class="hljs-string">'disabled'</span>, slideIndex === <span class="hljs-number">0</span>);<font></font>
    next.classList.toggle(<span class="hljs-string">'disabled'</span>, slideIndex === --slides.length);<font></font>
  },<font></font>
  swipeStart = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">let</span> evt = getEvent();<font></font>
<font></font>
    posInit = posX1 = evt.clientX;<font></font>
<font></font>
    sliderTrack.style.transition = <span class="hljs-string">''</span>;<font></font>
<font></font>
    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'touchmove'</span>, swipeAction);
    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'mousemove'</span>, swipeAction);
    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'touchend'</span>, swipeEnd);
    <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'mouseup'</span>, swipeEnd);<font></font>
  },<font></font>
  swipeAction = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{<font></font>
<font></font>
    <span class="hljs-keyword">let</span> evt = getEvent(),<font></font>
      style = sliderTrack.style.transform,<font></font>
      transform = +style.match(trfRegExp)[<span class="hljs-number">0</span>];<font></font>
<font></font>
    posX2 = posX1 - evt.clientX;<font></font>
    posX1 = evt.clientX;<font></font>
<font></font>
    sliderTrack.style.transform = <span class="hljs-string">`translate3d(<span class="hljs-subst">${transform - posX2}</span>px, 0px, 0px)`</span>;<font></font>
  },<font></font>
  swipeEnd = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{<font></font>
    posFinal = posInit - posX1;<font></font>
<font></font>
    <span class="hljs-built_in">document</span>.removeEventListener(<span class="hljs-string">'touchmove'</span>, swipeAction);
    <span class="hljs-built_in">document</span>.removeEventListener(<span class="hljs-string">'mousemove'</span>, swipeAction);
    <span class="hljs-built_in">document</span>.removeEventListener(<span class="hljs-string">'touchend'</span>, swipeEnd);
    <span class="hljs-built_in">document</span>.removeEventListener(<span class="hljs-string">'mouseup'</span>, swipeEnd);<font></font>
<font></font>
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Math</span>.abs(posFinal) &gt; posThreshold) {
      <span class="hljs-keyword">if</span> (posInit &lt; posX1) {<font></font>
        slideIndex--;<font></font>
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (posInit &gt; posX1) {<font></font>
        slideIndex++;<font></font>
      }<font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">if</span> (posInit !== posX1) {<font></font>
      slide();<font></font>
    }<font></font>
  };<font></font>
<font></font>
  sliderTrack.style.transform = <span class="hljs-string">'translate3d(0px, 0px, 0px)'</span>;<font></font>
<font></font>
  slider.addEventListener(<span class="hljs-string">'touchstart'</span>, swipeStart);<font></font>
  slider.addEventListener(<span class="hljs-string">'mousedown'</span>, swipeStart);<font></font>
<font></font>
  arrows.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">let</span> target = event.target;<font></font>
<font></font>
    <span class="hljs-keyword">if</span> (target === next) {<font></font>
      slideIndex++;<font></font>
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (target === prev) {<font></font>
      slideIndex--;<font></font>
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">return</span>;<font></font>
    }<font></font>
<font></font>
    slide();<font></font>
  });</code></pre></div>
                    </div><br>
<a name="fixedFull"></a><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最完整的代码</font></font></b>
                        <div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-keyword">let</span> slider = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.slider'</span>),<font></font>
  sliderList = slider.querySelector(<span class="hljs-string">'.slider-list'</span>),<font></font>
  sliderTrack = slider.querySelector(<span class="hljs-string">'.slider-track'</span>),<font></font>
  slides = slider.querySelectorAll(<span class="hljs-string">'.slide'</span>),<font></font>
  arrows = slider.querySelector(<span class="hljs-string">'.slider-arrows'</span>),<font></font>
  prev = arrows.children[<span class="hljs-number">0</span>],<font></font>
  next = arrows.children[<span class="hljs-number">1</span>],<font></font>
  slideWidth = slides[<span class="hljs-number">0</span>].offsetWidth,<font></font>
  slideIndex = <span class="hljs-number">0</span>,<font></font>
  posInit = <span class="hljs-number">0</span>,<font></font>
  posX1 = <span class="hljs-number">0</span>,<font></font>
  posX2 = <span class="hljs-number">0</span>,<font></font>
  posY1 = <span class="hljs-number">0</span>,<font></font>
  posY2 = <span class="hljs-number">0</span>,<font></font>
  posFinal = <span class="hljs-number">0</span>,<font></font>
  isSwipe = <span class="hljs-literal">false</span>,<font></font>
  isScroll = <span class="hljs-literal">false</span>,<font></font>
  allowSwipe = <span class="hljs-literal">true</span>,<font></font>
  transition = <span class="hljs-literal">true</span>,<font></font>
  nextTrf = <span class="hljs-number">0</span>,<font></font>
  prevTrf = <span class="hljs-number">0</span>,<font></font>
  lastTrf = --slides.length * slideWidth,<font></font>
  posThreshold = slides[<span class="hljs-number">0</span>].offsetWidth * <span class="hljs-number">0.35</span>,<font></font>
  trfRegExp = <span class="hljs-regexp">/([-0-9.]+(?=px))/</span>,<font></font>
  getEvent = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> (event.type.search(<span class="hljs-string">'touch'</span>) !== <span class="hljs-number">-1</span>) ? event.touches[<span class="hljs-number">0</span>] : event;<font></font>
  },<font></font>
  slide = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">if</span> (transition) {<font></font>
      sliderTrack.style.transition = <span class="hljs-string">'transform .5s'</span>;<font></font>
    }<font></font>
    sliderTrack.style.transform = <span class="hljs-string">`translate3d(-<span class="hljs-subst">${slideIndex * slideWidth}</span>px, 0px, 0px)`</span>;<font></font>
<font></font>
    prev.classList.toggle(<span class="hljs-string">'disabled'</span>, slideIndex === <span class="hljs-number">0</span>);<font></font>
    next.classList.toggle(<span class="hljs-string">'disabled'</span>, slideIndex === --slides.length);<font></font>
  },<font></font>
  swipeStart = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">let</span> evt = getEvent();<font></font>
<font></font>
    <span class="hljs-keyword">if</span> (allowSwipe) {<font></font>
<font></font>
      transition = <span class="hljs-literal">true</span>;<font></font>
<font></font>
      nextTrf = (slideIndex + <span class="hljs-number">1</span>) * -slideWidth;<font></font>
      prevTrf = (slideIndex - <span class="hljs-number">1</span>) * -slideWidth;<font></font>
<font></font>
      posInit = posX1 = evt.clientX;<font></font>
      posY1 = evt.clientY;<font></font>
<font></font>
      sliderTrack.style.transition = <span class="hljs-string">''</span>;<font></font>
<font></font>
      <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'touchmove'</span>, swipeAction);
      <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'mousemove'</span>, swipeAction);
      <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'touchend'</span>, swipeEnd);
      <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'mouseup'</span>, swipeEnd);<font></font>
<font></font>
      sliderList.classList.remove(<span class="hljs-string">'grab'</span>);<font></font>
      sliderList.classList.add(<span class="hljs-string">'grabbing'</span>);<font></font>
    }<font></font>
  },<font></font>
  swipeAction = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{<font></font>
<font></font>
    <span class="hljs-keyword">let</span> evt = getEvent(),<font></font>
      style = sliderTrack.style.transform,<font></font>
      transform = +style.match(trfRegExp)[<span class="hljs-number">0</span>];<font></font>
<font></font>
    posX2 = posX1 - evt.clientX;<font></font>
    posX1 = evt.clientX;<font></font>
<font></font>
    posY2 = posY1 - evt.clientY;<font></font>
    posY1 = evt.clientY;<font></font>
<font></font>
    <span class="hljs-comment">//     </span>
    <span class="hljs-keyword">if</span> (!isSwipe &amp;&amp; !isScroll) {
      <span class="hljs-keyword">let</span> posY = <span class="hljs-built_in">Math</span>.abs(posY2);
      <span class="hljs-keyword">if</span> (posY &gt; <span class="hljs-number">7</span> || posX2 === <span class="hljs-number">0</span>) {<font></font>
        isScroll = <span class="hljs-literal">true</span>;<font></font>
        allowSwipe = <span class="hljs-literal">false</span>;<font></font>
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (posY &lt; <span class="hljs-number">7</span>) {<font></font>
        isSwipe = <span class="hljs-literal">true</span>;<font></font>
      }<font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">if</span> (isSwipe) {
      <span class="hljs-comment">//      </span>
      <span class="hljs-keyword">if</span> (slideIndex === <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">if</span> (posInit &lt; posX1) {<font></font>
          setTransform(transform, <span class="hljs-number">0</span>);
          <span class="hljs-keyword">return</span>;<font></font>
        } <span class="hljs-keyword">else</span> {<font></font>
          allowSwipe = <span class="hljs-literal">true</span>;<font></font>
        }<font></font>
      }<font></font>
<font></font>
      <span class="hljs-comment">//      </span>
      <span class="hljs-keyword">if</span> (slideIndex === --slides.length) {
        <span class="hljs-keyword">if</span> (posInit &gt; posX1) {<font></font>
          setTransform(transform, lastTrf);<font></font>
          <span class="hljs-keyword">return</span>;<font></font>
        } <span class="hljs-keyword">else</span> {<font></font>
          allowSwipe = <span class="hljs-literal">true</span>;<font></font>
        }<font></font>
      }<font></font>
<font></font>
      <span class="hljs-comment">//     </span>
      <span class="hljs-keyword">if</span> (posInit &gt; posX1 &amp;&amp; transform &lt; nextTrf || posInit &lt; posX1 &amp;&amp; transform &gt; prevTrf) {<font></font>
        reachEdge();<font></font>
        <span class="hljs-keyword">return</span>;<font></font>
      }<font></font>
<font></font>
      <span class="hljs-comment">//  </span>
      sliderTrack.style.transform = <span class="hljs-string">`translate3d(<span class="hljs-subst">${transform - posX2}</span>px, 0px, 0px)`</span>;<font></font>
    }<font></font>
<font></font>
  },<font></font>
  swipeEnd = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{<font></font>
    posFinal = posInit - posX1;<font></font>
<font></font>
    isScroll = <span class="hljs-literal">false</span>;<font></font>
    isSwipe = <span class="hljs-literal">false</span>;<font></font>
<font></font>
    <span class="hljs-built_in">document</span>.removeEventListener(<span class="hljs-string">'touchmove'</span>, swipeAction);
    <span class="hljs-built_in">document</span>.removeEventListener(<span class="hljs-string">'mousemove'</span>, swipeAction);
    <span class="hljs-built_in">document</span>.removeEventListener(<span class="hljs-string">'touchend'</span>, swipeEnd);
    <span class="hljs-built_in">document</span>.removeEventListener(<span class="hljs-string">'mouseup'</span>, swipeEnd);<font></font>
<font></font>
    sliderList.classList.add(<span class="hljs-string">'grab'</span>);<font></font>
    sliderList.classList.remove(<span class="hljs-string">'grabbing'</span>);<font></font>
<font></font>
    <span class="hljs-keyword">if</span> (allowSwipe) {
      <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Math</span>.abs(posFinal) &gt; posThreshold) {
        <span class="hljs-keyword">if</span> (posInit &lt; posX1) {<font></font>
          slideIndex--;<font></font>
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (posInit &gt; posX1) {<font></font>
          slideIndex++;<font></font>
        }<font></font>
      }<font></font>
<font></font>
      <span class="hljs-keyword">if</span> (posInit !== posX1) {<font></font>
        allowSwipe = <span class="hljs-literal">false</span>;<font></font>
        slide();<font></font>
      } <span class="hljs-keyword">else</span> {<font></font>
        allowSwipe = <span class="hljs-literal">true</span>;<font></font>
      }<font></font>
<font></font>
    } <span class="hljs-keyword">else</span> {<font></font>
      allowSwipe = <span class="hljs-literal">true</span>;<font></font>
    }<font></font>
<font></font>
  },<font></font>
  setTransform = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">transform, comapreTransform</span>) </span>{
    <span class="hljs-keyword">if</span> (transform &gt;= comapreTransform) {
      <span class="hljs-keyword">if</span> (transform &gt; comapreTransform) {<font></font>
        sliderTrack.style.transform = <span class="hljs-string">`translate3d(<span class="hljs-subst">${comapreTransform}</span>px, 0px, 0px)`</span>;<font></font>
      }<font></font>
    }<font></font>
    allowSwipe = <span class="hljs-literal">false</span>;<font></font>
  },<font></font>
  reachEdge = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{<font></font>
    transition = <span class="hljs-literal">false</span>;<font></font>
    swipeEnd();<font></font>
    allowSwipe = <span class="hljs-literal">true</span>;<font></font>
  };<font></font>
<font></font>
sliderTrack.style.transform = <span class="hljs-string">'translate3d(0px, 0px, 0px)'</span>;<font></font>
sliderList.classList.add(<span class="hljs-string">'grab'</span>);<font></font>
<font></font>
sliderTrack.addEventListener(<span class="hljs-string">'transitionend'</span>, () =&gt; allowSwipe = <span class="hljs-literal">true</span>);<font></font>
slider.addEventListener(<span class="hljs-string">'touchstart'</span>, swipeStart);<font></font>
slider.addEventListener(<span class="hljs-string">'mousedown'</span>, swipeStart);<font></font>
<font></font>
arrows.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">let</span> target = event.target;<font></font>
<font></font>
  <span class="hljs-keyword">if</span> (target.classList.contains(<span class="hljs-string">'next'</span>)) {<font></font>
    slideIndex++;<font></font>
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (target.classList.contains(<span class="hljs-string">'prev'</span>)) {<font></font>
    slideIndex--;<font></font>
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">return</span>;<font></font>
  }<font></font>
<font></font>
  slide();<font></font>
});</code></pre></div>
                    </div><br>
<p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" title="代码库" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代码库</font></font></a></p></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN501248/index.html">JavaScript工作场所名人堂，第2部分</a></li>
<li><a href="../zh-CN501250/index.html">再次关于BLE，温度和小米传感器-第2部分-MQTT</a></li>
<li><a href="../zh-CN501252/index.html">Java中的模式匹配：InstanceOf（JEP 305）</a></li>
<li><a href="../zh-CN501254/index.html">来自OpenStreetMap 510（04.21.2020-27.04.2020）世界的新闻</a></li>
<li><a href="../zh-CN501256/index.html">速成课程：波音公司的管理革命如何催生了737 MAX灾难</a></li>
<li><a href="../zh-CN501260/index.html">浏览Money Podcast播客</a></li>
<li><a href="../zh-CN501262/index.html">如何在六个月甚至更快的时间内成为一名DevOps工程师。第2部分。配置</a></li>
<li><a href="../zh-CN501266/index.html">Wi-Fi 7，IEEE 802.11be等着我们吗？</a></li>
<li><a href="../zh-CN501268/index.html">ttf2mesh库-将TrueType字体转换为网格</a></li>
<li><a href="../zh-CN501270/index.html">是时候分发玩具了</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>