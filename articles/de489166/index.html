<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚óºÔ∏è üë≠ üèÜ Informationen zum Betrieb eines PCs am Beispiel von Windows 10 und der Tastatur von Teil 2 üßùüèæ ‚õ©Ô∏è ü•ä</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In diesem Teil werden wir √ºberlegen, in welche Richtung die Informationen √ºber die gedr√ºckte Taste von der Tastatur zur CPU gelangen. Es werden viele ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Informationen zum Betrieb eines PCs am Beispiel von Windows 10 und der Tastatur von Teil 2</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/489166/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In diesem Teil werden wir √ºberlegen, in welche Richtung die Informationen √ºber die gedr√ºckte Taste von der Tastatur zur CPU gelangen. Es werden viele Bilder angezeigt, und dies ist nicht der letzte Teil. Ich werde dar√ºber aus der Sicht eines Programmierers sprechen, der im Benutzermodus schreibt - Benutzerprogramme, Web, mobile Anwendungen - daher kann es zu Ungenauigkeiten kommen. Es ist unwahrscheinlich, dass Menschen, die mit Elektronik zu tun haben, etwas N√ºtzliches f√ºr sich finden. Der erste Teil ist </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/wl/me/mo/wlmemoyr_plutwlcq7nhezslr78.jpeg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Problem der Hochschulausbildung von Programmierern besteht darin, dass die Sch√ºler einzelne Aspekte, die aus dem Zusammenhang gerissen wurden, detailliert untersuchen, ohne zu verstehen, wie dies alles zusammenpasst. Mehrere Semester h√∂herer Mathematik, um Physik zu verstehen, um Elektrotechnik, Elektroger√§te, Assembler, Betriebssystem, Algorithmen, Systemprogrammierung und eine Reihe anderer F√§cher zu verstehen, die in einem Standard-F√ºnfjahresprogramm zusammengefasst sind. Die F√ºlle an Details und niemand erkl√§rt, wie dies in das Gesamtbild passt. Es wird davon ausgegangen, dass der Sch√ºler es nach 5 Jahren selbst in seinen Kopf bindet und dann mit .Net arbeitet und niemals den Elektronik- und Kernel-Modus ber√ºhrt. Ich glaube, dass es nicht notwendig ist, so detailliert √ºber den Betrieb eines Computers Bescheid zu wissen. Es reicht aus, ein allgemeines Verst√§ndnis daf√ºr zu haben, was auf dem technologischen Stapel geschieht. Wenn die Personen, aus denen die Ausbildungsprogramme f√ºr Universit√§ten bestehen, Fahrschulen er√∂ffnen,Sie w√ºrden Russisch, Kalligraphie und Hydrodynamik lernen, weil Sie mit Inspektoren kommunizieren, Fl√ºssigkeiten wechseln und Erl√§uterungen schreiben m√ºssen. Der Artikel enth√§lt einige Ungenauigkeiten, sodass er nicht zum Bestehen der Pr√ºfung in speziellen F√§chern geeignet ist. Danach ist das PC-Ger√§t leichter zu verstehen.</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unter Katzenverkehr.</font></font></i><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eine Tastaturtaste ist eine Taste, die die Kontakte schlie√üt und durch die elektrischer Strom flie√üt. </font><font style="vertical-align: inherit;">Der Mechanismus zum Schlie√üen / √ñffnen ist so ausgef√ºhrt, dass der Knopf nicht vollst√§ndig gedr√ºckt werden muss, da sonst die Finger schnell m√ºde werden und die Tastatur nicht ergonomisch ist. </font><font style="vertical-align: inherit;">Im Abschnitt sieht der Schl√ºssel so aus. </font><font style="vertical-align: inherit;">Auf der rechten Seite befindet sich der Kontakt, an den die Spannung angelegt wird.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/g5/c1/ay/g5c1aykcd7h6pbxwih_ci_dcsk0.gif"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das ‚ÄûGehirn‚Äú der Tastatur, das den Tastenanschlag bestimmen kann, ist ein </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mikrocontroller</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , bei dem es sich im Wesentlichen um einen Mini-Computer handelt, dessen Programm jede Taste durch Anlegen einer Spannung √ºberpr√ºft. Wenn sie √ºbergeben wird, wird die Taste gedr√ºckt. Die Beine des Mikrocontrollers haben ihre eigenen Namen und k√∂nnen im Code abgerufen werden. Sie dienen zur Kommunikation mit der Au√üenwelt. Die Beine k√∂nnen den Betrieb des Mikrocontrollers steuern, den Status des Chips melden oder zum Lesen / √úbertragen von Daten dienen.</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><img src="https://habrastorage.org/webt/ek/uq/om/ekuqom94exvedvmbel6ky6botvm.png"></td>
<td><img src="https://habrastorage.org/webt/mb/wm/14/mbwm14xm-h71gr7plnv5oglrhak.png"></td>
</tr>
</tbody></table></div><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das Programm ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Firmware</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) kann in C oder Assembler geschrieben werden, es wird √ºber den </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Programmierer</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> auf den Mikrocontroller hochgeladen </font><font style="vertical-align: inherit;">. Es ist ein Ger√§t mit einem Anschluss zum Installieren eines Mikrocontrollers und kann √ºber USB an einen Computer angeschlossen werden, auf dem spezielle Software ausgef√ºhrt wird. So sieht der Programmierer im wirklichen Leben aus:</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><img src="https://habrastorage.org/webt/4q/qz/ut/4qqzutlhi4hlltp4ubcclyv2rtu.png"></td>
<td><img src="https://habrastorage.org/webt/hy/ex/xj/hyexxj5ezr-gkg4jva6rerfkbnw.png"></td>
</tr>
</tbody></table></div><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Durch das Programm kann jeder Zweig eingestellt oder die Spannung gemessen werden. </font><font style="vertical-align: inherit;">Der Algorithmus zum Finden der gedr√ºckten Taste besteht darin, Spannung an einen Zweig anzulegen und auf dem anderen zu messen. Wenn die Taste gedr√ºckt wurde, hat der zweite Zweig ungef√§hr die gleiche Spannung wie der Eingang. </font><font style="vertical-align: inherit;">In einer Endlosschleife werden also alle Tasten √ºberpr√ºft. </font><font style="vertical-align: inherit;">In der Regel verf√ºgt die Tastatur √ºber 80-110 Tasten und der Kontaktcontroller (Pins) ist viel kleiner. </font><font style="vertical-align: inherit;">Daher verwenden sie einen solchen Ansatz wie die ‚ÄûTastaturmatrix‚Äú - alle Tasten sind in Spalten und Zeilen verteilt, und der Algorithmus ist darauf reduziert, eine Spalte zu finden, die die Zeile schneidet, an die das Programm Spannung angelegt hat. </font><font style="vertical-align: inherit;">Die Spalten- / Zeilenkorrespondenz zu Kontakten wird hier hervorgehoben.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/dm/3w/yn/dm3wynvz4faugjchr5h94ywdwgq.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In Wirklichkeit kann die Matrix so aussehen. </font><font style="vertical-align: inherit;">Links ist industriell und rechts ist hausgemacht.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/-y/3o/ik/-y3oikaoyykmeihyhgskuihxgoo.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Pseudocode kann der Teil des Firmware-Programms, der die gedr√ºckten Tasten bestimmt, so aussehen.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; COLSC; i++) {<font></font>
 	SetPower(columns[i], <span class="hljs-number">3.0</span> f);
  	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; ROWSC; j++) {
    		<span class="hljs-keyword">float</span> power = GetPower(rows[j]);
    		<span class="hljs-keyword">if</span> (power &gt;= <span class="hljs-number">3.0f</span> - THRESHOLD) {<font></font>
      			BYTE key = keys[i, j];<font></font>
      			SendKey(key);<font></font>
    		}<font></font>
  	}<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jeder Schl√ºssel entspricht einem Scan-Code, ist standardisiert und eine 8-Bit-Zahl, d.h. ein Byte. Wenn die Y-Taste gedr√ºckt wird, muss der Tastaturcontroller daher die Nummer 21 (0x15) und beim Loslassen die Nummer 149 (0x95) senden. Wie erfolgt der Versand? Sicherlich haben Sie mit JSON, Webdiensten oder gesendeten Daten zwischen Prozessen gearbeitet und wissen, dass Sie zum Senden von Daten </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">serialisieren m√ºssen</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , d. H. in ein Array von Bytes oder formatiertem Text verwandeln, das der Empf√§nger </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">deserialisieren</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> kann </font><font style="vertical-align: inherit;">, d.h. Erstellen Sie ein Objekt in seinem Adressraum neu. Und was kann Daten auf so niedrigem Niveau serialisieren? Wir m√ºssen nur 1 Byte (8 Bit) √ºbertragen. Mit Blick auf die Zukunft werde ich sagen, dass wir Daten St√ºck f√ºr St√ºck √ºbertragen werden.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In der Mathematik gibt es eine Formel, die jede uns bekannte Dezimalzahl in eine Folge von Nullen und Einsen umwandeln kann und umgekehrt. Diese Formel hat Anwendung in der Computertechnologie gefunden. Im ersten Teil erw√§hnte ich beil√§ufig, dass die analoge Technologie die Gesetze der Physik ausnutzt, w√§hrend die digitale auf der Ebene von Nullen und Einsen arbeitet. Dies bedeutet, dass ein analoges Telefon das gesamte Spektrum der menschlichen Stimme in eine Folge elektromagnetischer Wellen codiert und ein digitales Telefon einen Chip verwendet, der die menschliche Stimme beispielsweise in WAV-Dateien in digitale Daten umwandelt und diese dann in einer Folge von Nullen und Einsen in Form elektromagnetischer Wellen √ºbertr√§gt. Nur in diesem Fall m√ºssen anstelle des gesamten Spektrums der Stimme nur zwei Werte dargestellt werden - 0 und 1. Sie k√∂nnen durch Wellen unterschiedlicher L√§nge, unterschiedlicher Spannungen, dargestellt werden.Lichtimpulse durch die Glasfaser, schwarze und wei√üe Streifen auf Papier, L√∂cher in der Lochkarte.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Scan-Code der gedr√ºckten Y-Taste in Bin√§rform sieht aus wie 0001 0101. Wir √ºbertragen sie entlang des Mikrocontroller-Abschnitts, der f√ºr die Daten ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DATA</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) verantwortlich ist. </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die logische Einheit</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ist 3,3 V oder h√∂her, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">logische Null</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Die Spannung betr√§gt ca. 0V. Hier ist der Haken: Wie √ºbergebe ich drei Nullen hintereinander? Dazu ben√∂tigen wir einen zweiten Abschnitt, den wir CLOCK nennen, wenn auf diesem eine bedeutet, dass die √úbertragungssitzung eines Bits begonnen hat und Null beendet ist. Eine solche √Ñnderung der Werte (Spannungen) tritt mit einem bestimmten Zeitintervall auf, beispielsweise 50 Nanosekunden, da sich am anderen Ende ein zweiter Mikrocontroller befindet, der mit seiner eigenen Geschwindigkeit arbeitet und auf die Beine h√∂rt, mit denen CLOCK und DATA in einer Endlosschleife verbunden sind. In diesem Beispiel gehe ich davon aus, dass die Tastatur √ºber den unten gezeigten PS2-Anschluss angeschlossen ist. √úber den USB-Anschluss unterscheidet sich der √úbertragungsalgorithmus. Wie Sie sehen k√∂nnen, verf√ºgt der PS2-Port √ºber Pins namens Data, Clock.Zus√§tzlich gibt es einen Kontakt, √ºber den der PS2-Port-Controller die f√ºr den Betrieb erforderliche 5-V-Spannung auf die Tastatur verteilt, und einen Erdungskontakt, der einfach auf dem Tastaturk√∂rper angezeigt wird. Andere Kontakte werden nicht verwendet.</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><img src="https://habrastorage.org/webt/8g/ug/g7/8gugg7htfuyfrzclfypvowdzkhq.png"></td>
<td><img src="https://habrastorage.org/webt/dy/zf/_w/dyzf_w-iqlutb2xiju_om0e4abq.png"></td>
</tr>
</tbody></table></div><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der PS / 2- </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Port</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> wird als </font><i><font style="vertical-align: inherit;">serieller Bus bezeichnet</font></i><font style="vertical-align: inherit;"> , da er nacheinander Bits √ºbertr√§gt (eine Folge von Bits). </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der parallele Port</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √ºbertr√§gt Daten gleichzeitig an mehrere Kontakte und kann beispielsweise ein Byte (8 Bit) gleichzeitig f√ºr eine Daten√ºbertragungssitzung √ºbertragen. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Was ist der Unterschied zwischen einem Port, einem Bus und einem Protokoll? Ein Bus ist wie ein Port eine Reihe von Kontakten (Verkabelung) und eine Vereinbarung √ºber deren Verwendung. Nur der Port verf√ºgt √ºber eine Verbindung zum Anschlie√üen externer Ger√§te, und der Bus wird zur Kommunikation von Komponenten auf der Hauptplatine verwendet. Ein Port ist im Wesentlichen ein Bus mit einem Anschluss in der Mitte. Ein Protokoll ist eine Interaktion durch Kontakte. Im Beispiel mit PS / 2 war dies die Reihenfolge der Daten√ºbertragung √ºber die Clock- und Datenkontakte.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zuvor war der Intel 8042-Mikrocontroller sehr verbreitet und wurde sowohl in der Tastatur als auch als PS2-Port-Controller verwendet, d. H. Zwei identische Chips tauschten Daten aus. Der PS2-Porttreiber in Windows hei√üt 8042prt.sys.</font></font><br>
</i><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Tats√§chlich √ºbertragen wir nicht 8 Bits, sondern 11, da die Daten als </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Datenpaket</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> oder </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nachricht √ºbertragen werden</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Zus√§tzliche 3 Bits geben den Anfang und das Ende der Daten an - eine Null am Anfang und 0 1 am Ende, ein solches Protokoll zum √úbertragen von Daten vom Ger√§t zum Host in PS2. Dies kann wie die </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SendKey-</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Funktion </font><font style="vertical-align: inherit;">im Pseudocode </font><font style="vertical-align: inherit;">aussehen </font><font style="vertical-align: inherit;">, wenn Sie den Code </font><i><font style="vertical-align: inherit;">besser</font></i><font style="vertical-align: inherit;"> verstehen m√∂chten. Es sendet Daten √ºber die gedr√ºckte Taste √ºber den PS2-Bus.</font></font><br>
<br>
<pre><code class="cpp hljs">
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">SendBit</span><span class="hljs-params">(BYTE bit)</span> </span>{
	<span class="hljs-keyword">float</span> power = (bit != <span class="hljs-number">0</span>) ? <span class="hljs-number">3.3f</span> : <span class="hljs-number">0.0f</span>;<font></font>
	SetPower(DATA, power);<font></font>
	SetPower(CLOCK, <span class="hljs-number">3.3f</span>);<font></font>
	Sleep(<span class="hljs-number">50</span>);<font></font>
	SetPower(CLOCK, <span class="hljs-number">0.0f</span>);<font></font>
	Sleep(<span class="hljs-number">50</span>);<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">SendData</span><span class="hljs-params">(BYTE data)</span> </span>{<font></font>
	SendBit(<span class="hljs-number">0</span>);<font></font>
	<font></font>
	<span class="hljs-keyword">for</span> (BYTE i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-keyword">sizeof</span>(BYTE); i++) {<font></font>
		BYTE bit = (data &gt;&gt; i) &amp; <span class="hljs-number">1</span>;<font></font>
		SendBit(bit);<font></font>
	}<font></font>
<font></font>
	SendBit(<span class="hljs-number">0</span>);<font></font>
	SendBit(<span class="hljs-number">1</span>);<font></font>
}<font></font>
</code></pre><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es ist nicht immer erforderlich, die Spannung an jedem Zweig f√ºr die Daten√ºbertragung manuell einzustellen. </font><font style="vertical-align: inherit;">In einigen F√§llen wird der im Register gespeicherte Wert automatisch auf den Kontakten angezeigt. </font></font><br>
</i><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In der Grafik wird eine solche Daten√ºbertragung wie folgt dargestellt. </font><font style="vertical-align: inherit;">Die Zeit liegt entlang der X-Achse und die Spannung entlang der Y-Achse.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/zs/cy/p8/zscyp8ur1i1t0lmau3n50evbuke.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In der analogen Technologie kann das Signal verzerrt sein, d.h. </font><font style="vertical-align: inherit;">Der Draht ist an nichts angeschlossen, aber das Voltmeter zeigt 0,5 V an, da sich in der N√§he ein elektromagnetisches Feld befindet. </font><font style="vertical-align: inherit;">Daher wird das Konzept der Schwellenspannung verwendet. </font><font style="vertical-align: inherit;">Wenn die Spannung kleiner als der Schwellenwert ist, nehmen wir an, dass wir eine logische Null haben, andernfalls Einheit. </font><font style="vertical-align: inherit;">Unter Ber√ºcksichtigung m√∂glicher Verzerrungen kann der Scan-Code der gedr√ºckten Y-Taste folgenderma√üen aussehen:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/sl/u4/3k/slu43kce6evjxlk3qgrzzwpfhmg.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bevor wir uns genauer ansehen, wie Daten von der Tastatur zur CPU gelangen, wollen wir uns mit </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mikrochips</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bussen</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Motherboards befassen</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mikrocontroller und Mikroschaltungen</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Mikrocontroller kann ein in ihn eingen√§htes Programm ausf√ºhren, verf√ºgt √ºber einen bestimmten RAM-Speicher und einen Speicherort f√ºr Daten und Programmcode. Im </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chip kann das</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Programm bereits in der Entwurfsphase eingestellt werden. Das manuelle Erstellen einer elektrischen Schaltung, die einen Algorithmus implementiert, ist sehr zeitaufw√§ndig und daher kann eine spezielle Programmiersprache namens </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VHDL</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (Hardware Description Language) </font><font style="vertical-align: inherit;">zum Entwerfen von Mikroschaltungen verwendet werden </font><font style="vertical-align: inherit;">. Dies ist eine Programmiersprache auf hoher Ebene, die in einen Schaltplan √ºbersetzt wird. Sie wird durch ein Programm ausgef√ºhrt, das die optimale Position der Funkelemente auf der Platine findet und letztendlich in physischer Form erstellt wird. Die Bilder dienen nur zur Veranschaulichung.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/6c/rt/vp/6crtvpo861utguxs56v37-7syx4.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/gk/r8/q7/gkr8q7m78x8ldyxvdxu7tp9pxhc.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie werden die Daten und Befehle in Mikrochips und Mikrocontrollern dargestellt? </font><font style="vertical-align: inherit;">Die Basis der Computertechnologie ist ein Transistor, den die Menschheit in mikroskopischen Dimensionen herstellen gelernt hat. </font><font style="vertical-align: inherit;">Ein Transistor ist ein solches Funkelement, das drei Zweige hat: einen Eingang, einen Ausgang und zwischen ihnen eine Steuerung, die einen Strom zwischen zwei Zweigen √∂ffnet oder schlie√üt. </font><font style="vertical-align: inherit;">Die folgende Abbildung zeigt den Betrieb des Transistors, Wasser zeigt den Strom.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/1g/kj/bw/1gkjbwtax3xmpshjmbllzgpvkoo.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
An den Eingangszweig wird eine Spannung angelegt. Wenn die Steuerung eine Spannung hat, flie√üt der Strom zum Ausgang, andernfalls liegt 0 V an. </font><font style="vertical-align: inherit;">Mit 8 Transistoren, von denen jeder eine LED an den Ausgangszweig angeschlossen hat, die entweder aufleuchtet oder nicht, k√∂nnen wir uns 256 einzigartige Kombinationen vorstellen (2 hoch 8). </font><font style="vertical-align: inherit;">Lapochki werden von rechts nach links sowie Dezimalzahlen interpretiert. </font><font style="vertical-align: inherit;">Die unteren Ziffern befinden sich rechts.</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><img src="https://habrastorage.org/webt/bt/gb/9l/btgb9ln9dejdgz-v-e7l_6mjx9u.png"></td>
<td><img src="https://habrastorage.org/webt/vb/js/yg/vbjsygneuovkp0ocaml6yfvoigy.png"></td>
</tr>
</tbody></table></div><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jene. </font><font style="vertical-align: inherit;">Eine Lampe repr√§sentiert ein Informationsbit (0 oder 1), und acht solcher Lampen entsprechen einem Byte. </font><font style="vertical-align: inherit;">Es ist m√∂glich, logische Operatoren AND, OR, NOT, XOR auf Transistoren zu erstellen.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/wu/rw/gz/wurwgzgga7mny0qhn3daju6hdic.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In der UND-Operatorschaltung (links im Bild oben) hat der Ausgang beispielsweise nur dann eine Spannung, wenn beide Eingangsspannungen ungleich Null sind. </font><font style="vertical-align: inherit;">Jemand hat bereits Algorithmen f√ºr Addition, Multiplikation, Division und Subtraktion erfunden, die auf bitweisen logischen Operationen und Bitverschiebungen basieren. </font><font style="vertical-align: inherit;">Chiphersteller m√ºssen sie nur implementieren. </font><font style="vertical-align: inherit;">Die Funktionsweise des bitweisen Additionsalgorithmus ist unten dargestellt, wir werden ihn nicht analysieren:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/9k/t3/m5/9kt3m5uiw9wp1xk7ferifgngpzi.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Nanotransistoren sind mikroskopisch klein und k√∂nnen millionenfach auf der Platine platziert werden. </font><font style="vertical-align: inherit;">Der Intel-Prozessor wird unten gezeigt und wie ungef√§hr einer seiner Kerne aussehen k√∂nnte. </font><font style="vertical-align: inherit;">Das Bild ist illustrativ.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/hy/77/gt/hy77gt038gktsayjog-kg9rh65u.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mikroschaltungen k√∂nnen einen Mikrocontroller auf derselben Platine und im selben Fall enthalten.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Reifen</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In Lehrb√ºchern werden Reifen normalerweise als fette Pfeile angezeigt (siehe Abbildung unten). </font><font style="vertical-align: inherit;">Dies geschieht, um nicht alle Verbindungen der Kontakte zu zeichnen, die viele sein k√∂nnen. </font><font style="vertical-align: inherit;">Die Bedienung des PS2-Busses ist sehr einfach. Sie ben√∂tigen lediglich drei Pins. </font><font style="vertical-align: inherit;">Es gibt jedoch Busse, die beispielsweise 124 Kontakte f√ºr die Daten√ºbertragung haben.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/zu/-a/vd/zu-avduvaicswxtkaeihnnwureu.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gibt folgende Reifentypen:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Datenbits auf diesen Kontakten werden als Daten interpretiert: Nummer, Symbol, Teil eines Bildes oder andere Bin√§rdaten. </font><font style="vertical-align: inherit;">Die Busbreite beeinflusst den Durchsatz und die Anzahl der pro Sekunde √ºbertragenen Bits</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Adressen - Bits auf diesen Pins werden als physikalische Adresse im Speicher interpretiert. </font><font style="vertical-align: inherit;">Die Breite dieses Busses bestimmt die maximal unterst√ºtzte RAM-Kapazit√§t.</font></font></li>
<li> ‚Äî          . CPU         RAM   I/O.</li>
<li>.         ,      .    ATX 24 Pin 12V PSU Connector,       .<br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/am/cb/mq/amcbmq-jxkqdth45s_79xrg6uwa.png"></div></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein Reifen kann aus </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Substraten bestehen</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , d.h. </font><font style="vertical-align: inherit;">Einige Kontakte werden f√ºr Daten verwendet, andere f√ºr Adressen, andere f√ºr die Steuerung und Kontakte, an die Strom √ºbertragen wird. </font><font style="vertical-align: inherit;">Der Ansatz, bei dem dieselben Kontakte abwechselnd zum √úbertragen von Daten und Adressen verwendet werden, wird als </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Multiplexing bezeichnet</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Beispielsweise verf√ºgt der Intel 8086-Prozessor √ºber einen Daten- und Adressbus von 20 Bit. Auf dem Pin-Diagramm sind seine Kontakte mit </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AD0-AD19</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">Abschnitte</font></a><font style="vertical-align: inherit;"> 16-2 und 39-35) gekennzeichnet.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/jp/wy/tx/jpwytxl5cbiuv_hky79ledmfzjk.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In einem komplexeren Fall sind m√∂glicherweise mehrere Mikroschaltungen mit denselben Kontakten verbunden. </font><font style="vertical-align: inherit;">F√ºr die normale Kommunikation ben√∂tigen sie einen zus√§tzlichen Chip, der bestimmt, wer zu welchem ‚Äã‚ÄãZeitpunkt sie verwenden kann. Dieser wird als </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Buscontroller bezeichnet</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. In der folgenden Abbildung ein sph√§rischer Bus im Vakuum: Vier identische Mikrocontroller √ºbertragen Daten √ºber den Buscontroller an den Consumer-Mikrocontroller. Das rote Kabel ist die Spannung, die der Buscontroller an alle daran angeschlossenen Chips verteilt. Daten werden √ºber die gr√ºnen Dr√§hte √ºbertragen und es wird ein ‚ÄûVerhandeln‚Äú mit der Bussteuerung durchgef√ºhrt, und die blaue Leitung ist Clock, √ºber die die Bussteuerung die Kommunikation der Steuerungen synchronisiert, da diese mit unterschiedlichen Geschwindigkeiten arbeiten k√∂nnen. Befindet sich die logische Einheit auf dem blauen Draht, kann der Chip, der zur Nutzung des Busses berechtigt ist, einen Interaktionsakt mit der Au√üenwelt ausf√ºhren - zum Beispiel ein bisschen lesen.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/3a/tc/pq/3atcpqqtqdpmnbvrjho1h1y-bww.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Buscontroller kann als integraler Bestandteil betrachtet werden, da die Kommunikation mit der Au√üenwelt √ºber ihn erfolgt und es nicht wichtig ist, wie viele Chips oder echte externe Ger√§te sich tats√§chlich auf dem Bus befinden. </font><font style="vertical-align: inherit;">F√ºr die Daten√ºbertragung verf√ºgt das Motherboard √ºber ein umfangreiches Busnetz. </font><font style="vertical-align: inherit;">Trotz der Tatsache, dass es sehr viele Chips√§tze gibt, folgen sie gr√∂√ütenteils einem typischen Layout, da alle an das Motherboard angeschlossenen Ger√§te unterteilt sind in:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Langsam - Tastatur, Festplatte, Netzwerkkarte, Audio usw. </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schnell - CPU, RAM, GPU. </font></font></li>
</ul><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Basierend auf dieser Aufteilung verf√ºgt das Motherboard √ºber zwei Hauptchips - die </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">South Bridge</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , die die Arbeit aller langsamen Ger√§te koordiniert, und die </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">North Bridge</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> zur Koordination schneller Ger√§te. In modernen Computern befindet sich die Northbridge in der CPU selbst, und die Southbridge kann als Platform Controller Hub bezeichnet werden, dies √§ndert jedoch nichts an der Essenz. Beide Br√ºcken sind durch einen Bus miteinander verbunden, √ºber den sie sich gegenseitig √ºber wichtige Ereignisse informieren. Von besonderem Interesse ist der </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Taktgenerator,</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mit dem der Prozessor, der RAM und die Grafikkarte ihre Arbeit synchronisieren, das gleiche blaue Kabel. </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√úbertakten</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dadurch werden die BIOS-Einstellungen im Wesentlichen ge√§ndert, sodass die Synchronisierung h√§ufiger erfolgt, w√§hrend sich die Hardware, haupts√§chlich die CPU, st√§rker erw√§rmt, mehr Strom verbraucht und ihre Ressourcen schneller entwickelt. Das Gegenteil ist das </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Untertakten</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , wenn die Geschwindigkeit abnimmt, um Batteriestrom zu sparen oder Ger√§usche zu reduzieren. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ein Chipsatz</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ist ein Satz von Chips, die alle so konzipiert sind, dass sie miteinander arbeiten. Sie bieten Kommunikation zwischen Komponenten auf dem Motherboard und Funktionen wie Timer. Der Chipsatz funktioniert nur mit einer Prozessormarke, AMD kann mit dem Intel-Chipsatz nicht in das Motherboard eingesetzt werden, sie haben sogar unterschiedliche Kontakte. Das Motherboard-Diagramm ist unten dargestellt:</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><img src="https://habrastorage.org/webt/hd/zk/ld/hdzkldbz0h6vjddegg2iqwir-f0.png"></td>
<td><img src="https://habrastorage.org/webt/2h/sl/-f/2hsl-f2t77a-x4xy0dn5xqo2ua0.png"></td>
</tr>
</tbody></table></div><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M√∂chten Sie ein Beispiel f√ºr die Hardware-Kapselung? </font><font style="vertical-align: inherit;">Intel-Chips√§tze haben einen Chip namens </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Super IO</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , der in der folgenden Abbildung dargestellt ist und √ºber den LPC-Bus mit der South Bridge verbunden ist. </font><font style="vertical-align: inherit;">LPC ist der intelligente Name f√ºr die Verkabelung von CLOCK, DATA, VCC (POWER). </font><font style="vertical-align: inherit;">Dieser Chip enth√§lt die Emulation aller alten Chips, die jemals f√ºr Peripherieger√§te verwendet wurden, einschlie√ülich des 8042-Chips, der f√ºr den PS2-Port verwendet wurde. </font><font style="vertical-align: inherit;">Es gibt auch einen Port-Controller-Emulator f√ºr Floppy und andere Relikte, die den Fortschritt st√∂ren. </font><font style="vertical-align: inherit;">Im allgemeinen Diagramm des Motherboards sind oben sowohl Super IO als auch der </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LPC-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Bus angegeben </font><font style="vertical-align: inherit;">.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/bf/wx/sm/bfwxsm3i9gekd4yjd0uizbusb3u.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der moderne PS2-Port wird direkt mit dem Super I / O-Chip verbunden. </font><font style="vertical-align: inherit;">Gr√ºn ist die Tastatur, Lila ist die Maus. </font><font style="vertical-align: inherit;">Zuvor war es mit dem Intel 8042-Mikrocontroller verbunden.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/ae/za/tj/aezatje8p9gbwod0uap92v7sv-e.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Motherboard besteht aus einem Dielektrikum, d.h. </font><font style="vertical-align: inherit;">Material, das keinen Strom leitet. </font><font style="vertical-align: inherit;">Der Strom kann nur √ºber die auf der Tafel gedruckten Linien flie√üen. </font><font style="vertical-align: inherit;">Das Motherboard hat viele Ebenen, von denen jede ihre eigenen Kontakte gedruckt hat. Wenn Sie also das Motherboard dort bohren, wo die Linien nicht sichtbar sind, k√∂nnen Sie es verderben, indem Sie die unsichtbaren Kontakte im Board besch√§digen. </font><font style="vertical-align: inherit;">Jetzt k√∂nnen Sie sich den Prozess der Verteilung von Daten von der PS2 an die CPU genauer ansehen.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der Weg von der PS2 zum Prozessor</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In der Regel wird die Computerarchitektur auf dem 8086-Prozessor ber√ºcksichtigt. Dies ist zum einen richtig, weil sie im Vergleich zu modernen CPUs recht einfach ist, zum anderen ist sie falsch, weil sie alt ist und nicht die Architektur einer modernen Maschine widerspiegelt. Intel 8086 ben√∂tigte keine Bridges, da es so langsam war, dass es mit Peripherieger√§ten an einem Bus arbeiten konnte, d. H. bei einer Frequenz. Ich kenne die modernen CPU- und Chips√§tze nicht, daher werde ich sie an fiktiven erkl√§ren, die echten √§hneln. In meinem Beispiel wird es eine fiktive CPU geben, die </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">Intel 8086</font></a><font style="vertical-align: inherit;"> sehr √§hnlich ist</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Der Super IO-Chip hat mehr als hundert Kontakte und es gibt Dokumentationen im Internet, aber ich sehe keinen Sinn darin, herauszufinden, welche Pins die Tastatur und der LPC-Bus tats√§chlich f√ºr die Kommunikation mit South Bridge verwenden. Hauptsache das Prinzip, das unterschiedlich umgesetzt werden kann. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Werfen wir einen kurzen Blick auf das Bild, um uns daran zu erinnern, dass wir bereits bestanden haben. Die gr√ºnen Pfeile zeigen den Weg an, den wir nehmen werden.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/82/ic/2e/82ic2e8smxmv-z0epnfxzk1f6n8.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Daten von der Tastatur sind also bereits auf den PS2-Port-Controller gelangt, der einst ein Intel 8042-Chip war und jetzt von einem Super IO-Chip emuliert wird. Und jetzt analysieren wir die weitere Vorgehensweise auf meinem fiktiven Motherboard mit einer fiktiven CPU. Der PS2-Controller hat einen Scan-Code der gedr√ºckten Y-Taste empfangen und liefert nun Spannung an das Kontaktsignal (violette Linie, siehe Abbildung unten), auf dem der programmierbare Interrupt-Controller √ºber Daten von der Tastatur benachrichtigen soll. Dieses Signal wird von einem Chip zum anderen √ºbertragen, bis die North Bridge es an den Interrupt-Manager weiterleitet.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/zh/jb/jb/zhjbjbwyj8dgyhydsaeryyfyfrm.jpeg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Programmable Interrupt Controller</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ist ein </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Intel 8259</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Chip , </font><font style="vertical-align: inherit;">in dem 8 Beine (ihre Namen IRQ0-IRQ7) sind reserviert f√ºr Meldungen von bestimmten Ports empfangen ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nterrupt </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">R</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Q</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> uest). Eine Tastatur ist mit dem IRQ1-Pin verbunden, IRQ7 mit einem Drucker, eine Diskette mit einem Pin, einer Soundkarte, parallelen Anschl√ºssen und </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">anderen</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Nat√ºrlich kann es viel mehr als acht Ger√§te geben, so dass eine Technik wie Kaskadierung verwendet wurde, wenn ein anderer √§hnlicher PIC mit einem Bein mit dem Namen IRQ2 verbunden wurde, bei dem die Z√§hlung nicht bei 0, sondern bei 7 begann. Die Maus ist an IRQ12 gebunden, d.h. Fu√ü IRQ5 auf dem zweiten PIC. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Interrupt-Controller sollte nun die CPU √ºber das Ereignis auf der Tastatur informieren. Dies geschieht wie folgt:</font></font><br>
<ol>
<li>      INT (Interrupt) ,     INTR (<i>Interrupt Request</i>) . CPU            ,        , ..       .     ,       .        exception  .</li>
<li>               INTR,        .</li>
<li>       ( D0-D7)  ,    .      PIC          (   IRQ).<br>
<br>
<i> ,   ?     .               .   ‚Äî      (x, y, z, w).        .</i></li>
<li>CPU     AD0-AD7  ,  .      IDT (<i>Interrupt Descriptior Table</i>)    ,     ,         .   CPU   .<br>
<br>
<i>             .       .    ,   IDT        C# .</i><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">IDT_entry</span>{</span>
	<span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">short</span> <span class="hljs-keyword">int</span> offset_lowerbits;
	<span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">short</span> <span class="hljs-keyword">int</span> selector;
	<span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">char</span> zero;
	<span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">char</span> type_attr;
	<span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">short</span> <span class="hljs-keyword">int</span> offset_higherbits;<font></font>
};<font></font>
 <font></font>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">IDT_entry</span> <span class="hljs-title">IDT</span>[256];</span>
</code></pre></li>
<li>        ,          INTA (<b>Int</b>errupt <b>A</b>cknowledged).<br>
</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Tastatur-Interrupt-Handler im einfachsten Code sieht folgenderma√üen aus. Es ruft einen Befehl auf, der den Abschluss der Interrupt-Verarbeitung signalisiert, d. H. sendet ein Signal an den INTA-Fu√ü.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">irq1_handler</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span> </span>{<font></font>
	  outb(<span class="hljs-number">0x20</span>, <span class="hljs-number">0x20</span>); <span class="hljs-comment">//EOI</span><font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie k√∂nnen mehr dar√ºber erfahren, wie die Interrupt- </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vektortabelle</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> auf </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">osdev</font></a><font style="vertical-align: inherit;"> konfiguriert </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">ist</font></a><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt wissen wir, wie der Interrupt passiert ist, aber wir wissen nicht, wie der Interrupt-Handler Informationen √ºber die gedr√ºckte Taste liest. Aus Softwaresicht besteht der PS2-Port aus zwei Registern, auf die nur </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√ºber die E / A-Portnummer</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nicht √ºber Namen oder Adressen im Speicher zugegriffen werden kann </font><font style="vertical-align: inherit;">. Diese beiden Einzelbyte-Register sind den Ports 0x60 und 0x64 zugeordnet, das erste (0x60) enth√§lt den Scan-Code des Schl√ºssels. Der zweite Port wird verwendet, um Status und Befehle an den PS2-Port (nicht an die Tastatur!) Zu √ºbertragen. Der x86 - </font><font style="vertical-align: inherit;">Architektur - </font><font style="vertical-align: inherit;">Befehlssatz hat den Befehl </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IN </font></font></a><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">storeTo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fromPortNum</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hiermit wird der Wert vom angegebenen E / A-Port in das angegebene Register gelesen. </font><font style="vertical-align: inherit;">Zum Beispiel IN 0 AL speichert 0x60 die Daten von der Tastatur im AL-Register. </font><font style="vertical-align: inherit;">Es k√∂nnte ungef√§hr so ‚Äã‚Äãfunktionieren:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In dem Prozessor, den wir in Betracht ziehen, gibt es Beine AD0-AD20, die zur Angabe der Adresse und der Daten verwendet werden k√∂nnen. </font><font style="vertical-align: inherit;">Dies ist sowohl ein Datenbus als auch ein Adressbus. </font><font style="vertical-align: inherit;">Zus√§tzlich zu ihnen gibt es eine Reihe von Steuerzweigen, zum Beispiel Pin Nr. 28 (S2), deren Wert der Nordbr√ºcke anzeigt, wo das Lesen stattfinden wird - aus dem Speicher oder einem Eingabe- / Ausgabeger√§t. </font><font style="vertical-align: inherit;">Der Befehl IN legt hier den Wert fest, der sich auf das E / A-Ger√§t bezieht.</font></font></li>
<li>   CPU (-   AD0-AD20)   0110 0000,    0x60.      CPU    ,     .        , -   , - .       0x60        SuperIO ,    -    .</li>
<li>    Super IO            .   0x60        PS2,         . </li>
<li>    .   Intel 8042,     SuperIO,   LPC       ,       . ..        ,    .</li>
<li>     CPU              (- 8   AD0-AD20). </li>
<li> CPU                   AL.         .</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dieser gesamte Algorithmus arbeitet im Nanosekundenbereich und wird daher fast sofort ausgef√ºhrt, obwohl der Prozessor einige Zeit auf die E / A-Operation gewartet hat. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie Sie jetzt verstehen, lesen Sie von externen Ger√§ten, auch von RAM-Speicher mit so weiter. Die CPU ist ziemlich langsam. Diese Langsamkeit kann festgestellt werden, indem ein Programm geschrieben wird, das zeilenweise 10.000 Zeilen in einer Datei druckt, anstatt sie in den Puffer zu kopieren und sofort zu speichern. Die Festplatte ist mit der South Bridge verbunden und darin befindet sich auch ein Controller, der die direkte Platzierung von Daten steuert.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der RAM ist √ºber den Bus mit der CPU verbunden und das Lesen dauert einige Zeit. Um die CPU zu beschleunigen, hat sie einen Cache, d.h. In dem Bereich, in dem sich Transistoren befinden, die Daten darstellen, die bald ben√∂tigt oder h√§ufig verwendet werden, ist ihr Lesen viel schneller als von der RAM-Karte, die √ºber die North Bridge mit der CPU kommuniziert. RAM wird als </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dynamischer Direktzugriffsspeicher bezeichnet</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , da Kondensatoren zur Darstellung der darin enthaltenen Daten verwendet werden. Ein Kondensator ist ein Funkelement, das wie eine Batterie eine Weile eine Ladung h√§lt, bis sie vollst√§ndig entladen ist. Nur hier erfolgt die Entladung sehr schnell. Daher m√ºssen die Kondensatoren aufgeladen werden, dies geschieht sofort, es reicht aus, Spannung anzulegen. Geladener Kondensator - logisch 1, sonst 0. F√ºr den Cache wird Speicher verwendet</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Statischer RAM,</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> d.h. </font><font style="vertical-align: inherit;">es muss nicht aufgeladen werden und arbeitet daher schneller, kostet aber mehr. </font><font style="vertical-align: inherit;">Der Cache ist in 3 Ebenen unterteilt, die w√§hrend der Suche nach den angeforderten Daten nacheinander √ºberpr√ºft werden, bevor der Prozessor auf den RAM zugreift. </font><font style="vertical-align: inherit;">Auf √§lteren Prozessoren war der Cache der ersten Ebene (L1) Teil der CPU und arbeitete mit derselben Frequenz damit, wenn sowohl L2- als auch L3-Caches externe Chips waren. </font><font style="vertical-align: inherit;">Jetzt befinden sich alle mit dem Prozessor auf dem gleichen Chip. </font><font style="vertical-align: inherit;">Der L1-Cache ist der schnellste und kleinste Speicher, L2 hat mehr Speicher, ist aber langsamer. </font><font style="vertical-align: inherit;">L3 ist der gr√∂√üte und langsamste Cache, der h√§ufig als </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gemeinsam genutzter Cache bezeichnet wird</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , da er Daten f√ºr alle CPU-Kerne speichert, w√§hrend L1 und L2 f√ºr jeden einzelnen Kern erstellt werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im n√§chsten Teil werden wir dar√ºber sprechen, wie Windows die empfangenen Daten empf√§ngt und verarbeitet.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de489152/index.html">Petersburg gegen Paris: Wie Museen auff√ºllen und wie die √ñffentlichkeit verkleinern</a></li>
<li><a href="../de489156/index.html">Wer ist schlauer als IDEA?</a></li>
<li><a href="../de489160/index.html">Ergebnisse einer Studie zu Stellenausschreibungen f√ºr einen digitalen Produktdesigner. Erster Teil - Ergebnisse und Statistiken</a></li>
<li><a href="../de489162/index.html">Manager wird √ºbergeben</a></li>
<li><a href="../de489164/index.html">Kubernetes Cluster-Upgrade ohne Ausfallzeiten</a></li>
<li><a href="../de489172/index.html">Wir verbinden die ActiveDirectory-Autorisierung mit Keycloak mit Kubernetes</a></li>
<li><a href="../de489174/index.html">Single Responsibility Principle (SRP) mit Laravel</a></li>
<li><a href="../de489178/index.html">GSMout - SMS empfangen und "zu Hause" anrufen</a></li>
<li><a href="../de489188/index.html">Anmelden in einer Microservice .Net-Umgebung in der Praxis</a></li>
<li><a href="../de489190/index.html">RedHat-Studie: Open Source vertreibt propriet√§re Software aus dem Unternehmenssegment</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>