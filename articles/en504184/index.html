<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💨 🖼️ 👨🏿‍🤝‍👨🏼 Creating a trading bot using machine learning in time series analysis 👩🏻‍🤝‍👨🏿 👦🏼 👌🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This is not a technical article; there is no detailed analysis of methods and theory. It’s just that somehow I got carried away with machine learning ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Creating a trading bot using machine learning in time series analysis</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/504184/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">This is not a technical article; there is no detailed analysis of methods and theory. </font><font style="vertical-align: inherit;">It’s just that somehow I got carried away with machine learning and, like many people who are new to this topic, I decided to make a trading bot. </font><font style="vertical-align: inherit;">However, this has grown into more than just a training project. </font><font style="vertical-align: inherit;">That's what I want to tell about all this.</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A Little About Machine Learning</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Machine learning (Machine Learning; hereinafter referred to as MO), in one way or another, is an integral part of the industry of Artificial Intelligence (Artificial Intelligence; hereinafter AI), science and technology, which allows “intelligent” computer systems to simulate human behavior. This industry also includes the concept of Deep Learning, which affects neural networks and imitation of human thinking. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The academic discipline of AI is studied as a machine, i.e. computer, solve problems that are subject only to the human mind. This can be a task such as understanding the text read, or determining the moves in a game of checkers, or solving a puzzle. MO is to develop algorithms that help the computer draw conclusions based on the information received. Fuel to everything in this case is data.</font></font><br>
<br>
<img src="https://cdn.app.compendium.com/uploads/user/e7c690e8-6ff9-102a-ac6d-e4aebca50425/6ffef59f-8495-451c-becb-adb3faf15e7b/File/7e007e67ce118d11faf8e6859f070fe0/7e007e67ce118d11faf8e6859f070fe0.png" alt="image"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(c) </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Oracle</font></font></a></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
In the information age, information and data are the most valuable. Everything we do, offline or online, generates new data: whether it is text, audio, video data, sensory measurements, “smart” gadgets and the exchange of data between them. Opportunities for collecting large and new data are rapidly increasing due to the availability of hardware devices, the development of cloud infrastructure and, due to the massive use of these technologies, a drop in their cost. Knowledge, or information, is power - the axiom is true but there is a “but."</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The possession of huge volumes of information does not yet benefit its holder. But it is through the algorithms and methods of MO that Big Data begins to make sense and benefit. More specifically, MO systems notice patterns and build conclusions based on many factors in the data system, without being programmed for it. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The main applications of MO today are object recognition, computer vision, data analysis, quality control (monitoring) and predictive analytics. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So, we know that machine learning relies on data processing algorithms and the data itself. About MO methods, you can delve into a separate series of articles. Describing them would be comparable to listing possible technologies in web development and their application if each of these technologies has its advantages and disadvantages.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It should only be noted that over time, the algorithms and methods of data processing improve, and the data becomes more and more, thereby the quality of data processing becomes better. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Of the data types, I would like to pay attention to the time series on the example of a personal project - automated cryptocurrency trading.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Time Series Analysis</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A time series is a type of data that can be represented as sequences of measurements ordered at nonrandom time instants. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
There are two main goals of time series analysis: </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">determining the nature of a series</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">forecasting</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (predicting future values ​​of a time series from present and past values). This involves the identification and description of the series model, and data interpretation, which allows us to derive the future value of the series. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Using MO methods for such data, we are able to find deeper patterns in the data. As a result, we get a more “intelligent” forecast of future values.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unlike the analysis of random data samples, the analysis of time series is based on the assumption that sequential values ​​in the data file are observed at regular intervals. In other methods, we are not important and often not interested in linking observations to time. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In other words, for the analysis it is important that the event X occurred at time Y. For example, the exchange rate, we are important in the selection, where the price is tied to a specific point in time. If you disrupt the order of dates in a series of date-price, then it will become meaningless.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For example, using financial time series, the MO algorithm can make a forecast about growth or decline in profitability. </font><font style="vertical-align: inherit;">When processing audio files, where time series will be expressed by changes in tone in relation to timing, you can analyze the meaning of the speech. </font><font style="vertical-align: inherit;">Given meteorological data, complex weather forecasts can be derived through the MO and time series. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If the algorithms of the MO analyze, say, the images of seals, then we don’t care about the timing, or even the order in which the pictures arrive.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Using cryptocurrencies as an example</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In my project, I tried to answer the question of whether it is possible to build a fully automatic trading system based on machine learning methods. To do this, I found and collected historical data on bitcoin prices, transaction volumes, as well as placed and withdrawn orders. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
After some time, through trial and error, I came to a certain understanding of how this data should be interpreted, which neural network architecture to use, how to label data, etc. In particular, training is conducted with a granularity of 10 seconds, and the price in the future is used as the resulting value.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now the algorithm uses several models trained at different times, because I constantly improved the learning algorithm and added new collected data to it. For implementation, the Python programming language was used with the libraries Keras, Scipy, Pandas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The script for executing trading operations places orders on the Bitmex trading platform around the clock. When a signal appears to open a position and complete the relevant transaction, the script will wait until the price reaches the Take Profit or Stop Loss levels, or until the transaction expires (Time To Live). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/uk/7g/bo/uk7gbobthesvwkv-7zmofqxtj60.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The main log file that displays real-time data processing</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The data processing algorithm relies on technical data analysis, trading history, previous orders, orders, and news related to cryptocurrency (through natural language processing, or Natural Language Processing - NLP). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The main success metric is accuracy based on the number of Take profit orders in relation to the total number of orders. </font><font style="vertical-align: inherit;">In total, the forecast is considered successful when the Take Profit order is reached, while Stop Loss and Time to Live are recognized by the model as unsuccessful.</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Accuracy = (Number of orders of type Take profit) / (Total number of orders) </font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bargaining is considered profitable when accuracy of 67% is achieved.</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Month</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Accuracy</font></font></th>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">January 2020</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">72%</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">February 2020</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">70%</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">March 2020</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">60%</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">April 2020</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">70%</font></font></td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Below are visually presented transactions made using such a software solution. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fc/b8/g9/fcb8g9xjetorym1p0ux62hvuidk.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Green triangles are successful transactions (Take profit achieved), red triangles are unsuccessful (Stop loss, Time to Live). </font><font style="vertical-align: inherit;">Triangles looking up are buying deals, triangles looking down are selling deals.</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In custody</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Automated trading is just one of the most obvious possible applications of time series analysis. If we talk about business, then forecasting different indicators based on the data collected can be critically important. Based on such forecasts, important business decisions can now be made, and in the future the volume of automatically made decisions will only grow. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Performing such calculations is a fairly resource-intensive process. Fortunately, the computing power of computer systems is constantly increasing. Moreover, the modern branch of computer science that studies AI is aimed at creating algorithms that most effectively use available computing resources to identify patterns in the accumulated data.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Derivation and construction of forecasts is impossible without the use of time series. </font><font style="vertical-align: inherit;">It is this kind of data that underlies forecasts that help executives make decisions that are vital to business. </font><font style="vertical-align: inherit;">Undoubtedly, the analysis of time series and their processing by the MO algorithms is an integral part of the business processes of the future.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en504164/index.html">Minitel: French Internet Cousin</a></li>
<li><a href="../en504166/index.html">Features of designing a data model for NoSQL</a></li>
<li><a href="../en504176/index.html">[Launch postponed to May 30 due to weather conditions] Historical launch of Demo-2: today SpaceX will send people to the ISS</a></li>
<li><a href="../en504180/index.html">The tale of how we tamed BigQuery</a></li>
<li><a href="../en504182/index.html">Reviewix Solution500 C500 3D Scanner</a></li>
<li><a href="../en504186/index.html">Paul Graham: How to Write Useful Texts (Full)</a></li>
<li><a href="../en504188/index.html">Quarantine, online systems and data science. Who thinks about customer retention?</a></li>
<li><a href="../en504190/index.html">MVCC as one way to ensure transaction isolation</a></li>
<li><a href="../en504194/index.html">The result of a survey of developers on Stack Overflow 2020 (+ habraopros)</a></li>
<li><a href="../en504196/index.html">NFC: Parsing Near Field Communication Technology</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>