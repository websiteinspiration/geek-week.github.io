<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>↖️ ⚱️ 🌙 Wann wird die Pandemie abnehmen? Auswertung in Python mit Pandas 💇🏾 👨‍💼 👩‍💼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo alle zusammen. 
 
 Ich habe mehrere Dashboards auf COVID-19 gesehen, aber ich habe die Hauptsache noch nicht gefunden - die Vorhersage des Zeitp...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Wann wird die Pandemie abnehmen? Auswertung in Python mit Pandas</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/495752/"><img src="https://habrastorage.org/webt/m3/fz/ve/m3fzvefgb0glikzia-3tq3b_vju.png" alt="Bild"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hallo alle zusammen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich habe mehrere Dashboards auf COVID-19 gesehen, aber ich habe die Hauptsache noch nicht gefunden - die Vorhersage des Zeitpunkts des Niedergangs der Epidemie. </font><font style="vertical-align: inherit;">Deshalb habe ich ein kleines Python-Skript geschrieben. </font><font style="vertical-align: inherit;">Er nimmt Daten aus WHO-Tabellen zu Github, legt sie nach Ländern an und zeichnet Trendlinien. </font><font style="vertical-align: inherit;">Und er macht darauf basierende Vorhersagen - wenn in jedem Land der TOP 20 nach der Anzahl der Fälle von COVID-19 ein Rückgang der Infektionen zu erwarten ist. </font><font style="vertical-align: inherit;">Ich gebe zu, ich bin kein Experte auf dem Gebiet der Epidemiologie. </font><font style="vertical-align: inherit;">Die folgenden Berechnungen basieren auf öffentlich verfügbaren Daten und gesundem Menschenverstand. </font><font style="vertical-align: inherit;">Alle Details sind unterschnitten. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Update vom 10.04.2020 - Die Haupttabelle und die Grafiken wurden aktualisiert. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Update 16.04.2020 - Benutzer</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">h3cksl</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hat die Grafiken aktualisiert und auf </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">seiner Website veröffentlicht</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Update vom 29.04.2020 - Es hat sich nun gezeigt, dass die Kurven der täglichen Anzahl von Infektionen in verschiedenen Ländern sehr unterschiedlich sind. </font><font style="vertical-align: inherit;">Und es scheint stark vom Ausmaß der Infektion abzuhängen. </font><font style="vertical-align: inherit;">Eine ideale glockenförmige Kurve nach dem Vorbild Südkoreas ist eher eine Ausnahme von der Regel. </font><font style="vertical-align: inherit;">Eine häufigere Form ist eine starke Zunahme eines Peaks und eine anschließende Abnahme, die sich im Laufe der Zeit verlängert. </font><font style="vertical-align: inherit;">In der Realität wird der Rückgang der Inzidenz daher länger anhalten als von diesem Modell Anfang April vorhergesagt.</font></font><br>
<a name="habracut"></a><br>
<blockquote><img src="https://habrastorage.org/webt/fi/0x/4z/fi0x4z2nhcc3-3bdzugakb4csji.png" align="left"><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UFO Care Minute</font></font></h3><br>
     COVID-19 —     ,   SARS-CoV-2 (2019-nCoV).        —    ,      /,   .<br>
<br>
<h4>        </h4><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"> </b>
                        <div class="spoiler_text"><ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">C   </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">C </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">  ()</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"> </a></li>
<li>       </li>
</ul><br>
     ,      .</div>
                    </div><br>
 ,  ,       .<br>
<br>
  : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="></a> | <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="> </a></blockquote><br>
<h1>  </h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um den Zeitpunkt der Epidemie zu beurteilen, habe ich zunächst öffentlich zugängliche Dashboards verwendet. Eine der ersten war die </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Website</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> des Zentrums für Systemwissenschaft und -technik der Johns Hopkins University. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/3b/wp/qo/3bwpqo8nkyxvnxchi1u9yodfdyy.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Er ist ziemlich hübsch mit seiner bedrohlichen Einfachheit. Bis vor kurzem war es nicht möglich, die Dynamik der Zunahme von Infektionen um Tage aufzubauen, aber es wurde korrigiert. Und es ist insofern merkwürdig, als Sie die Ausbreitung einer Pandemie auf einer Weltkarte sehen können. Angesichts der Schwarz-Rot-Farbskala des Dashboards wird nicht empfohlen, es lange anzusehen. Ich denke, dies kann mit dem Auftreten von Angstattacken behaftet sein, die sich in verschiedene Formen der Panik verwandeln. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um immer am Puls der Zeit zu bleiben, hat mir die </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">Seite über COVID-19 mehr</font></a><font style="vertical-align: inherit;"> gefallen</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">auf der Worldometer-Ressource. </font><font style="vertical-align: inherit;">Es enthält Informationen zu Ländern in Form einer Tabelle: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/48/w5/rf/48w5rfy3tmloezx_cpg-yver0ea.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie auf das gewünschte Land klicken, werden detailliertere Informationen dazu angezeigt, einschließlich täglicher und kumulativer Kurven für Infizierte / Wiederhergestellte / Tote. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gibt andere Dashboards. </font><font style="vertical-align: inherit;">Für detaillierte Informationen über unser Land können Sie beispielsweise einfach "COVID-19" in die Yandex-Suchzeile eingeben und Sie werden Folgendes finden: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/uy/pi/zj/uypizjcftuxfhofadcrw5decnsy.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nun, vielleicht </font><font style="vertical-align: inherit;">hört </font><font style="vertical-align: inherit;">dies auf. </font><font style="vertical-align: inherit;">Weder auf diesen drei Dashboards noch auf mehreren anderen konnte ich Informationen mit Prognosen finden, wann die Pandemie schließlich abnehmen wird.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ein bisschen über Grafiken</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Derzeit gewinnt die Infektion nur an Dynamik und am interessantesten sind die Grafiken mit einer täglichen Zunahme der Fallzahlen. Hier ein Beispiel für die USA: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/o-/mp/w6/o-mpw6ch2rb7ymt49ofpx7cpdum.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es ist zu sehen, dass die Zahl der Infizierten täglich steigt. In solchen Grafiken sprechen wir natürlich nicht über alle infizierten Personen (ihre genaue Anzahl kann nicht bestimmt werden), sondern nur über bestätigte Fälle. Der Kürze halber werden wir diese bestätigten Infektionen im Folgenden einfach als "infiziert" bezeichnen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie sieht eine </font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gezähmte Pandemie</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> aus </font><font style="vertical-align: inherit;">? Ein Beispiel hier ist eine Grafik von Südkorea:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/06/wd/r4/06wdr4j_z8ypumhggh-awymerw0.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es ist ersichtlich, dass das tägliche Inkrement der Infizierten zuerst wuchs, dann einen Höhepunkt erreichte, sank und auf ein bestimmtes konstantes Niveau (etwa 100 Personen pro Tag) fixierte. </font><font style="vertical-align: inherit;">Dies ist kein vollständiger Sieg über das Virus, sondern ein bedeutender Erfolg. </font><font style="vertical-align: inherit;">Dies ermöglichte es dem Land, die Wirtschaft anzukurbeln (obwohl es den Koreanern gelungen ist, sie nicht zu verlangsamen) und zu einem weniger normalen Leben zurückzukehren. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es ist davon auszugehen, dass sich die Situation in anderen Ländern ähnlich entwickeln wird. </font><font style="vertical-align: inherit;">Das heißt, das Wachstum in der ersten Phase wird durch eine Stabilisierung ersetzt, und dann wird die Zahl der Kranken jeden Tag sinken. </font><font style="vertical-align: inherit;">Das Ergebnis ist eine glockenförmige Kurve. </font><font style="vertical-align: inherit;">Lassen Sie uns nach den Spitzen der Kurven der am stärksten „infizierten“ Länder suchen.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Daten herunterladen und verarbeiten</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Coronaverteilungsdaten werden laufend auf dem </font><font style="vertical-align: inherit;">neuesten Stand </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Die Quelltabellen enthalten kumulative Kurven, sie können mit einem kleinen Skript aufgenommen und vorverarbeitet werden.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">So was</font></font></b>
                        <div class="spoiler_text"><pre><code class="python">import pandas as pd<font></font>
import ipywidgets as widgets<font></font>
from ipywidgets import interact<font></font>
import matplotlib.pyplot as plt<font></font>
<font></font>
pd.set_option('display.max_columns', None)<font></font>
<font></font>
#  <font></font>
url = 'https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/'<font></font>
confirmed = pd.read_csv(url + 'time_series_covid19_confirmed_global.csv', sep = ',')<font></font>
deaths = pd.read_csv(url + 'time_series_covid19_deaths_global.csv', sep = ',')<font></font>
recovered = pd.read_csv(url + 'time_series_covid19_recovered_global.csv', sep = ',')<font></font>
<font></font>
#   -   'dd.mm.yy'<font></font>
new_cols = list(confirmed.columns[:4]) + list(confirmed.columns[4:].map(lambda x: '{0:02d}.{1:02d}.{2:d}'.format(int(x.split(sep='/')[1]), int(x.split(sep='/')[0]), int(x.split(sep='/')[2]))))<font></font>
confirmed.columns = new_cols<font></font>
recovered.columns = new_cols<font></font>
deaths.columns = new_cols<font></font>
<font></font>
#     <font></font>
confirmed_daily = confirmed.copy()<font></font>
confirmed_daily.iloc[:,4:] = confirmed_daily.iloc[:,4:].diff(axis=1)<font></font>
deaths_daily = deaths.copy()<font></font>
deaths_daily.iloc[:,4:] = deaths_daily.iloc[:,4:].diff(axis=1)<font></font>
recovered_daily = recovered.copy()<font></font>
recovered_daily.iloc[:,4:] = recovered_daily.iloc[:,4:].diff(axis=1)<font></font>
<font></font>
#       <font></font>
smooth_conf_daily = confirmed_daily.copy()<font></font>
smooth_conf_daily.iloc[:,4:] = smooth_conf_daily.iloc[:,4:].rolling(window=8, min_periods=2, center=True, axis=1).mean()<font></font>
smooth_conf_daily.iloc[:,4:] = smooth_conf_daily.iloc[:,4:].round(1)<font></font>
<font></font>
#   ,    <font></font>
last_date = confirmed.columns[-1]<font></font>
<font></font>
#  20       <font></font>
confirmed_top = confirmed.iloc[:, [1, -1]].groupby('Country/Region').sum().sort_values(last_date, ascending = False).head(20)<font></font>
countries = list(confirmed_top.index)<font></font>
<font></font>
# ,      20 <font></font>
conf_tot_ratio = confirmed_top.sum() / confirmed.iloc[:, 4:].sum()[-1]<font></font>
<font></font>
#    <font></font>
# countries.append('Russia')<font></font>
<font></font>
#       ,   <font></font>
l1 = 'Infected at ' + last_date + ' - ' + str(confirmed.iloc[:, 4:].sum()[-1])<font></font>
l2 = 'Recovered at ' + last_date + ' - ' + str(recovered.iloc[:, 4:].sum()[-1])<font></font>
l3 = 'Dead at ' + last_date + ' - ' + str(deaths.iloc[:, 4:].sum()[-1])<font></font>
<font></font>
#      <font></font>
fig, ax = plt.subplots(figsize = [16,6])<font></font>
ax.plot(confirmed.iloc[:, 4:].sum(), '-', alpha = 0.6, color = 'orange', label = l1)<font></font>
ax.plot(recovered.iloc[:, 4:].sum(), '-', alpha = 0.6, color = 'green', label = l2)<font></font>
ax.plot(deaths.iloc[:, 4:].sum(), '-', alpha = 0.6, color = 'red', label = l3)<font></font>
<font></font>
ax.legend(loc = 'upper left', prop=dict(size=12))<font></font>
ax.xaxis.grid(which='minor')<font></font>
ax.yaxis.grid()<font></font>
ax.tick_params(axis = 'x', labelrotation = 90)<font></font>
plt.title('COVID-19 in all countries. Top 20 countries consists {:.2%} of total confirmed infected cases.'.format(conf_tot_ratio[0]))<font></font>
plt.show()</code></pre><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Auf diese Weise können Sie dieselben Kurven wie auf Dashboards erhalten: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/bw/i0/fg/bwi0fgdbszgcpqxywa4be9qr3lk.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Skript enthält ein kleines Extra, das nicht zum Anzeigen des Diagramms benötigt wird, aber in den nächsten Schritten benötigt wird. </font><font style="vertical-align: inherit;">Zum Beispiel habe ich sofort eine Liste von 20 Ländern mit der heutigen Höchstzahl an Infizierten erstellt. </font><font style="vertical-align: inherit;">Übrigens - das sind 90% aller Infizierten. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mach weiter. </font><font style="vertical-align: inherit;">Die Zahlen der täglichen Zunahme der Kranken sind ziemlich "laut". </font><font style="vertical-align: inherit;">Daher wäre es schön, das Diagramm zu glätten. </font><font style="vertical-align: inherit;">Fügen Sie den Tages-Charts eine Trendlinie hinzu (ich habe einen zentrierten gleitenden Durchschnitt verwendet). </font><font style="vertical-align: inherit;">Es stellt sich irgendwie so heraus:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/kk/gj/33/kkgj33clru3yphaaet6jt7vifde.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Trend ist schwarz dargestellt. Dies ist eine ziemlich glatte Kurve mit einem einzelnen Peak. Es bleibt der Beginn des Ausbruchs der Krankheit (roter Pfeil) und die maximale Inzidenz (grün) zu ermitteln. Mit einem Peak ist alles einfach - dies ist das Maximum für geglättete Daten. Wenn das Maximum auf den äußersten rechten Punkt des Diagramms fällt, wurde der Peak noch nicht überschritten. Wenn das Maximum links bleibt, ist der Peak höchstwahrscheinlich in der Vergangenheit geblieben. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Beginn des Bursts kann auf verschiedene Arten gefunden werden. Nehmen wir der Einfachheit halber an, dass dies der Zeitpunkt ist, an dem die Anzahl der Infizierten pro Tag 1% der maximalen Anzahl der Infizierten pro Tag überschreitet. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Graph ist ziemlich symmetrisch. Das heißt, die Dauer vom Ausbruch der Epidemie bis zu einem Höhepunkt entspricht ungefähr der Dauer vom Höhepunkt bis zum Rückgang.</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn wir also die Anzahl der Tage vom Beginn bis zum Höhepunkt finden, muss ungefähr die gleiche Anzahl von Tagen warten, bis die Epidemie abgeklungen ist</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir werden all diese Logik in das folgende Skript legen.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In solch einem</font></font></b>
                        <div class="spoiler_text"><pre><code class="python">from datetime import timedelta, datetime<font></font>
<font></font>
#     20  + .<font></font>
confirmed_top = confirmed_top.rename(columns={str(last_date): 'total_confirmed'})<font></font>
dates = [i for i in confirmed.columns[4:]]<font></font>
<font></font>
for country in countries:<font></font>
    <font></font>
    #       ,      ,  <font></font>
    confirmed_top.loc[country, 'total_confirmed'] = confirmed.loc[confirmed['Country/Region'] == country,:].sum()[4:][-1]<font></font>
    confirmed_top.loc[country, 'last_day_conf'] = confirmed.loc[confirmed['Country/Region'] == country,:].sum()[-1] - confirmed.loc[confirmed['Country/Region'] == country,:].sum()[-2]<font></font>
    confirmed_top.loc[country, 'mortality, %'] = round(deaths.loc[deaths['Country/Region'] == country,:].sum()[4:][-1]/confirmed.loc[confirmed['Country/Region'] == country,:].sum()[4:][-1]*100, 1)<font></font>
    <font></font>
    #       .<font></font>
    smoothed_conf_max = round(smooth_conf_daily[smooth_conf_daily['Country/Region'] == country].iloc[:,4:].sum().max(), 2)<font></font>
    peak_date = smooth_conf_daily[smooth_conf_daily['Country/Region'] == country].iloc[:,4:].sum().idxmax()<font></font>
    peak_day = dates.index(peak_date)<font></font>
    <font></font>
    #      ,      1%    <font></font>
    start_day = (smooth_conf_daily[smooth_conf_daily['Country/Region'] == country].iloc[:,4:].sum() &lt; smoothed_conf_max/100).sum()<font></font>
    start_date = dates[start_day-1]<font></font>
    <font></font>
    #     <font></font>
    confirmed_top.loc[country, 'trend_max'] = smoothed_conf_max<font></font>
    confirmed_top.loc[country, 'start_date'] = start_date<font></font>
    confirmed_top.loc[country, 'peak_date'] = peak_date<font></font>
    confirmed_top.loc[country, 'peak_passed'] = round(smooth_conf_daily.loc[smooth_conf_daily['Country/Region'] == country, last_date].sum(), 2) != smoothed_conf_max<font></font>
    confirmed_top.loc[country, 'days_to_peak'] = peak_day - start_day<font></font>
    <font></font>
    #   ,    <font></font>
    if confirmed_top.loc[country, 'peak_passed']:<font></font>
         confirmed_top.loc[country, 'end_date'] = (datetime.strptime(confirmed_top.loc[country, 'peak_date']+'20', "%d.%m.%Y").date() + timedelta(confirmed_top.loc[country, 'days_to_peak'])).strftime('%d.%m.%Y')<font></font>
<font></font>
#    <font></font>
confirmed_top.loc['China', 'start_date'] = '22.01.20'<font></font>
confirmed_top</code></pre><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Am Ausgang bekommen wir genau eine solche Tabelle für die Top 20 Länder. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Update 10.04.2020: Zum Zeitpunkt des Schreibens war Russland nicht unter den Top 20, aber am 7. April erschien es auf dem 20. Platz. Der 10. April reiste am 18. ab. Die Tabelle enthält auch die Daten der Quarantänemaßnahmen in verschiedenen Ländern. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/py/s7/za/pys7zajylfkbzgavdz84et5pt2q.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die folgenden Spalten befinden sich in der Tabelle: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
total_confirmed - die Gesamtzahl der im Land infizierten Personen; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
last_day_conf - die Anzahl der am letzten Tag infizierten Personen; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mortalität,% - Mortalitätsrate (Anzahl der Toten / Anzahl der Infizierten); </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
trend_max - Trendmaximum; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
start_date - Datum, an dem die Epidemie im Land begann; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
peak_date - Spitzendatum; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Peak_passed - Peak Flag (wenn True - Peak bestanden); </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
days_to_peak - wie viele Tage sind vom Anfang bis zum Höhepunkt vergangen;</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
end_date - Enddatum der Epidemie. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Update 10.04.2020: Der Inzidenzpeak wurde in 14 von 20 Ländern erreicht. Darüber hinaus dauert es im Durchschnitt vom Beginn der Masseninfektionen bis zum Peak durchschnittlich 25 Tage: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/1e/dm/ok/1edmoktmg1_mhsc2qhscociq0o8.png" alt="Bild"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nach der obigen Logik muss sich die Situation bis Ende April in fast allen betrachteten Ländern normalisieren</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Wie es sein wird, wird nur die Zeit zeigen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Update 10.04.2020: Sie können sehen, dass die Charts der europäischen Länder im Gegensatz zum Chart von Südkorea nach dem Höhepunkt eine leichtere Rezession haben. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gibt ein anderes Skript, mit dem Sie Diagramme für jedes Land anzeigen können.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Diese</font></font></b>
                        <div class="spoiler_text"><pre><code class="python">@interact<font></font>
def plot_by_country(country = countries):<font></font>
    <font></font>
    #   <font></font>
    l1 = 'Infected at ' + last_date + ' - ' + str(confirmed.loc[confirmed['Country/Region'] == country,:].sum()[-1])<font></font>
    l2 = 'Recovered at ' + last_date + ' - ' + str(recovered.loc[recovered['Country/Region'] == country,:].sum()[-1])<font></font>
    l3 = 'Dead at ' + last_date + ' - ' + str(deaths.loc[deaths['Country/Region'] == country,:].sum()[-1])<font></font>
    <font></font>
    #        <font></font>
    df = pd.DataFrame(confirmed_daily.loc[confirmed_daily['Country/Region'] == country,:].sum()[4:])<font></font>
    df.columns = ['confirmed_daily']<font></font>
    df['recovered_daily'] = recovered_daily.loc[recovered_daily['Country/Region'] == country,:].sum()[4:]<font></font>
    df['deaths_daily'] = deaths_daily.loc[deaths_daily['Country/Region'] == country,:].sum()[4:]<font></font>
    df['deaths_daily'] = deaths_daily.loc[deaths_daily['Country/Region'] == country,:].sum()[4:]<font></font>
    df['smooth_conf_daily'] = smooth_conf_daily.loc[smooth_conf_daily['Country/Region'] == country,:].sum()[4:]<font></font>
    <font></font>
    #  <font></font>
    fig, ax = plt.subplots(figsize = [16,6], nrows = 1)<font></font>
    plt.title('COVID-19 dinamics daily in ' + country)<font></font>
    <font></font>
    #      ,   <font></font>
    ax.bar(df.index, df.confirmed_daily, alpha = 0.5, color = 'orange', label = l1)<font></font>
    ax.bar(df.index, df.recovered_daily, alpha = 0.6, color = 'green', label = l2)<font></font>
    ax.bar(df.index, df.deaths_daily, alpha = 0.7, color = 'red', label = l3)<font></font>
    ax.plot(df.index, df.smooth_conf_daily, alpha = 0.7, color = 'black')<font></font>
    <font></font>
    #     .<font></font>
    start_date = confirmed_top[confirmed_top.index == country].start_date.iloc[0]<font></font>
    start_point = smooth_conf_daily.loc[smooth_conf_daily['Country/Region'] == country, start_date].sum()<font></font>
    ax.plot_date(start_date, start_point, 'o', alpha = 0.7, color = 'black')<font></font>
    shift = confirmed_top.loc[confirmed_top.index == country, 'trend_max'].iloc[0]/40<font></font>
    plt.text(start_date, start_point + shift, 'Start at ' + start_date, ha ='right', fontsize = 20)<font></font>
    <font></font>
    peak_date = confirmed_top[confirmed_top.index == country].peak_date.iloc[0]<font></font>
    peak_point = smooth_conf_daily.loc[smooth_conf_daily['Country/Region'] == country, peak_date].sum()<font></font>
    ax.plot_date(peak_date, peak_point, 'o', alpha = 0.7, color = 'black')<font></font>
    plt.text(peak_date, peak_point + shift, 'Peak at ' + peak_date, ha ='right', fontsize = 20)<font></font>
    <font></font>
    ax.xaxis.grid(False)<font></font>
    ax.yaxis.grid(False)<font></font>
    ax.tick_params(axis = 'x', labelrotation = 90)<font></font>
    ax.legend(loc = 'upper left', prop=dict(size=12))<font></font>
    <font></font>
    #         .<font></font>
    max_pos = max(df['confirmed_daily'].max(), df['recovered_daily'].max())<font></font>
    if confirmed_top[confirmed_top.index == country].peak_passed.iloc[0]:<font></font>
        estimation = 'peak is passed - end of infection ' + confirmed_top[confirmed_top.index == country].end_date.iloc[0]<font></font>
    else:<font></font>
        estimation = 'peak is not passed - end of infection is not clear'<font></font>
    plt.text(df.index[len(df.index)//2], 3*max_pos//4, country, ha ='center', fontsize = 50)<font></font>
    plt.text(df.index[len(df.index)//2], 2*max_pos//3, estimation, ha ='center', fontsize = 20)<font></font>
    <font></font>
    #plt.savefig(country + '.png', bbox_inches='tight', dpi = 75)<font></font>
    plt.show()</code></pre><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier ist die aktuelle Situation in Russland (Aktualisierung vom 10.04.2020): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ax/qu/x5/axqux5c-nlco0-3z0axjcu7npzc.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Leider wurde der Höchststand noch nicht überschritten, so dass es schwierig ist, Vorhersagen über den Zeitpunkt des Rückgangs der Inzidenz zu treffen. </font><font style="vertical-align: inherit;">Angesichts der Tatsache, dass der Ausbruch derzeit 26 Tage dauert, können wir davon ausgehen, dass wir während der Woche einen Höhepunkt sehen und die Inzidenz abnehmen wird. </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ich würde es wagen vorzuschlagen, dass sich die Situation Anfang Mai normalisiert</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (ich war immer ein Optimist, muss ich sagen). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vielen Dank für das Lesen bis zum Ende. </font><font style="vertical-align: inherit;">Sei gesund und Kraft wird bei uns sein. </font><font style="vertical-align: inherit;">Nachfolgend finden Sie Diagramme für die übrigen zwanzig Länder in absteigender Reihenfolge der Anzahl der Infizierten. </font><font style="vertical-align: inherit;">Wenn Sie neuere Daten benötigen - Sie können die im Text angegebenen Skripte ausführen, wird alles für das aktuelle Datum neu berechnet. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Update 10.04.2020 - Die Grafiken werden aktualisiert.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">USA</font></font></b>
                        <div class="spoiler_text"><img src="https://habrastorage.org/webt/il/sc/gt/ilscgts5k2vcr1se1jrfwcclyha.png" alt="image"><br>
</div>
                    </div><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Spanien</font></font></b>
                        <div class="spoiler_text"><img src="https://habrastorage.org/webt/84/k_/jm/84k_jmnkj3-bkmkdhiultruhjcs.png" alt="image"><br>
</div>
                    </div><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Italien</font></font></b>
                        <div class="spoiler_text"><img src="https://habrastorage.org/webt/eg/nk/l4/egnkl4v7lyot-jpyzktk6gnogug.png" alt="image"><br>
</div>
                    </div><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Deutschland</font></font></b>
                        <div class="spoiler_text"><img src="https://habrastorage.org/webt/mm/zr/65/mmzr65zadf0ecueq5ju-zqzoo4k.png" alt="image"><br>
</div>
                    </div><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Frankreich</font></font></b>
                        <div class="spoiler_text"><img src="https://habrastorage.org/webt/j3/cr/1o/j3cr1oy1awvbiivptl0imdyful4.png" alt="image"><br>
</div>
                    </div><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">China</font></font></b>
                        <div class="spoiler_text"><img src="https://habrastorage.org/webt/rt/og/us/rtogusfbdsp9e66zqod2fgbsf2m.png" alt="image"><br>
</div>
                    </div><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ich rannte</font></font></b>
                        <div class="spoiler_text"><img src="https://habrastorage.org/webt/26/ba/uf/26baufs15jticwrerqseuaizhhq.png" alt="image"><br>
</div>
                    </div><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Großbritannien</font></font></b>
                        <div class="spoiler_text"><img src="https://habrastorage.org/webt/-h/64/46/-h6446hkss6wh24idxkiarw5uxi.png" alt="image"><br>
</div>
                    </div><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Truthahn</font></font></b>
                        <div class="spoiler_text"><img src="https://habrastorage.org/webt/w5/so/hk/w5sohkutmgaqnmpq0ya8h5hde5i.png" alt="image"><br>
</div>
                    </div><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schweiz</font></font></b>
                        <div class="spoiler_text"><img src="https://habrastorage.org/webt/hi/yq/2a/hiyq2a9_pkbtwsnr7-8-x6dsh9g.png" alt="image"><br>
</div>
                    </div><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Belgien</font></font></b>
                        <div class="spoiler_text"><img src="https://habrastorage.org/webt/08/fb/pf/08fbpfwchavnnbr6v36hmal4m2e.png" alt="image"><br>
</div>
                    </div><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Niederlande</font></font></b>
                        <div class="spoiler_text"><img src="https://habrastorage.org/webt/aj/x6/yd/ajx6ydt2gqjyuprhvvzxui3f5ci.png" alt="image"><br>
</div>
                    </div><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kanada</font></font></b>
                        <div class="spoiler_text"><img src="https://habrastorage.org/webt/c6/lo/up/c6louppbvtnghvf79gutf7ajqeq.png" alt="image"><br>
</div>
                    </div><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Österreich</font></font></b>
                        <div class="spoiler_text"><img src="https://habrastorage.org/webt/kd/hq/xd/kdhqxdtdaragxjqotg0et0zkuum.png" alt="image"><br>
</div>
                    </div><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Portugal</font></font></b>
                        <div class="spoiler_text"><img src="https://habrastorage.org/webt/00/tb/go/00tbgotvnbd0qmnxcze7be7kf7w.png" alt="image"><br>
</div>
                    </div><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Brasilien</font></font></b>
                        <div class="spoiler_text"><img src="https://habrastorage.org/webt/pa/xp/km/paxpkm9aour3qqdqa98ouvs0imo.png" alt="image"><br>
</div>
                    </div><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Südkorea</font></font></b>
                        <div class="spoiler_text"><img src="https://habrastorage.org/webt/ma/d7/ld/mad7lddh5h4oa7yjvnwjm-k4tao.png" alt="image"><br>
</div>
                    </div><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Israel</font></font></b>
                        <div class="spoiler_text"><img src="https://habrastorage.org/webt/uw/iz/ya/uwizyarggjredvypw81e66_58-a.png" alt="image"><br>
</div>
                    </div><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schweden</font></font></b>
                        <div class="spoiler_text"><img src="https://habrastorage.org/webt/oy/4l/8r/oy4l8rsf_ljgqp_zf_4t2tlbiaa.png" alt="image"><br>
</div>
                    </div><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Norwegen</font></font></b>
                        <div class="spoiler_text"><img src="https://habrastorage.org/webt/hx/3z/77/hx3z77hiuzyzmypehwjexzw3nom.png" alt="image"><br>
</div>
                    </div></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de495730/index.html">Hack The Box. Durchgangsregister. Docker, RCE in CMS Bolt und Restic</a></li>
<li><a href="../de495732/index.html"># 03 - Und ein ganzes Byte reicht nicht ... | 2B oder nicht 2B</a></li>
<li><a href="../de495740/index.html">Da wir eine Woche lang kein Geld hatten, haben Verbindungen und Software einen Lieferservice für Lebensmittel gestartet und es fast nicht vermasselt</a></li>
<li><a href="../de495746/index.html">Wir bilden View in SwiftUI, ausgehend von den Bedingungen</a></li>
<li><a href="../de495748/index.html">Neuer Punto Switcher für Linux: xswitcher</a></li>
<li><a href="../de495754/index.html">Sim-Sim Open oder Reverse Engineering Smart Intercom</a></li>
<li><a href="../de495756/index.html">Schlüsselprinzipien für die Verwendung von ECS in der Spieleentwicklung</a></li>
<li><a href="../de495758/index.html">Feuer und Strategie</a></li>
<li><a href="../de495760/index.html">Heller als die Sterne: HGST-Rebranding und Nachschub der Ultrastar-Linie</a></li>
<li><a href="../de495762/index.html">Prosto: Entfernen Sie die Boilerplate, wenn Sie mit RecyclerView arbeiten</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>