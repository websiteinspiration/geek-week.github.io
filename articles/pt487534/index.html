<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèª üóΩ ü§öüèΩ etcd 3.4.3: confiabilidade de armazenamento e pesquisa de seguran√ßa üí§ üîµ üë©‚Äç‚ù§Ô∏è‚Äçüíã‚Äçüë©</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Nota perev. : O conte√∫do deste artigo n√£o √© totalmente t√≠pico do nosso blog. No entanto, como muitas pessoas sabem, o etcd est√° localizado no cora√ß√£o ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>etcd 3.4.3: confiabilidade de armazenamento e pesquisa de seguran√ßa</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/flant/blog/487534/"><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nota perev.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : O conte√∫do deste artigo n√£o √© totalmente t√≠pico do nosso blog. No entanto, como muitas pessoas sabem, o etcd est√° localizado no cora√ß√£o de Kubernetes, motivo pelo qual este estudo, conduzido por um consultor independente no campo da confiabilidade, mostrou-se interessante entre os engenheiros que operam este sistema. Al√©m disso, √© interessante no contexto de como os projetos de c√≥digo aberto que j√° se comprovaram na produ√ß√£o est√£o sendo aprimorados, mesmo em um n√≠vel t√£o "baixo".</font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/xd/av/d3/xdavd35rjqklgnrnd-0wulkpayo.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
O</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> cofre de</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> valor-chave (KV)</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"> etc</font></a><font style="vertical-align: inherit;"> √© um banco de dados distribu√≠do baseado no algoritmo de consenso Raft. Em uma an√°lise</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> realizada em 2014</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , descobrimos que o etcd 0.4.1 foi afetado pelas chamadas leituras obsoletas por padr√£o</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(leia opera√ß√µes que retornam um valor antigo e irrelevante devido a um atraso na sincroniza√ß√£o - aprox. transl.)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Decidimos retornar ao etcd (desta vez - para a vers√£o 3.4.3) para avaliar novamente em detalhes seu potencial no campo da confiabilidade e seguran√ßa.</font></font><a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Descobrimos que a opera√ß√£o com pares de "valor-chave" √© estritamente serializ√°vel e que os processos do observador </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(rel√≥gios)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> entregam todas as altera√ß√µes na chave de ordem. </font><font style="vertical-align: inherit;">No entanto, os </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bloqueios</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> no etcd s√£o fundamentalmente inseguros e os riscos associados a eles s√£o exacerbados por um bug, como resultado da qual a relev√¢ncia da </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">concess√£o</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> n√£o √© verificada </font><font style="vertical-align: inherit;">ap√≥s a espera do bloqueio. </font><font style="vertical-align: inherit;">Voc√™ pode ler o coment√°rio dos desenvolvedores etcd em nosso relat√≥rio </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">no blog do projeto</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O estudo foi patrocinado pela </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cloud Native Computing Foundation</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (CNCF), parte da Linux Foundation. </font><font style="vertical-align: inherit;">Foi realizado em total conformidade com </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">as pol√≠ticas √©ticas da Jepsen</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. Fundo</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O reposit√≥rio Etc KV √© um sistema distribu√≠do projetado para ser usado como base de coordena√ß√£o. Como o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zookeeper</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Consul</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , o etcd armazena pequenas quantidades de estados raramente atualizados ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">por padr√£o, at√© 8 GB</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) na forma de um mapa de valores-chave e fornece </font><font style="vertical-align: inherit;">leitura, grava√ß√£o e microtransa√ß√µes </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">estritamente serializ√°veis ‚Äã‚Äãem</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> todo o data warehouse, al√©m de primitivas de coordena√ß√£o como </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bloqueios</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , rastreamento </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(rel√≥gios)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e sele√ß√£o de l√≠der. Muitos sistemas distribu√≠dos, como </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kubernetes</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenStack</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , usam o etcd para armazenar metadados de cluster, coordenar visualiza√ß√µes coordenadas de dados, escolher um l√≠der etc.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em 2014, j√° realizamos uma avalia√ß√£o do </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">etcd 0.4.1</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Em seguida, descobrimos que, por padr√£o, √© propenso a leituras obsoletas devido √† otimiza√ß√£o. Enquanto o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">trabalho sobre os princ√≠pios do Raft</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> discute a necessidade de dividir as opera√ß√µes de leitura em threads e pass√°-las por um sistema de consenso para garantir a viabilidade, o etcd l√™ qualquer l√≠der localmente, sem verificar se h√° um estado mais atual no l√≠der mais novo. A equipe de desenvolvimento do etcd implementou o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sinalizador de quorum opcional</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e, na API da vers√£o 3.0 do etcd </font><font style="vertical-align: inherit;">, a </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">lineariza√ß√£o</font></a><font style="vertical-align: inherit;"> de todas as opera√ß√µes, exceto as opera√ß√µes de rastreamento, </font><font style="vertical-align: inherit;">apareceu </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">por padr√£o</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">
A API etcd 3.0 concentra-se em um mapa plano KV, onde as chaves e os valores s√£o opacos</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">matrizes de bytes </font><i><font style="vertical-align: inherit;">( </font></i><i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">opacos</font></a></i><i><font style="vertical-align: inherit;"> )</font></i><font style="vertical-align: inherit;"> . Usando consultas de intervalo, voc√™ pode simular chaves hier√°rquicas. Os usu√°rios podem ler, escrever e excluir chaves, bem como monitorar o fluxo de atualiza√ß√µes para uma √∫nica chave ou intervalo de chaves. O kit de ferramentas etcd √© complementado por concess√µes (objetos vari√°veis ‚Äã‚Äãcom vida √∫til limitada, que s√£o mantidas no estado ativo por solicita√ß√µes de pulsa√ß√£o do cliente), bloqueios (objetos nomeados dedicados vinculados a concess√µes) e a escolha de l√≠deres. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Na vers√£o 3.0, o etcd oferece uma </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">API transacional</font></a><font style="vertical-align: inherit;"> limitada</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para opera√ß√µes at√¥micas com muitas chaves. </font><font style="vertical-align: inherit;">Nesse modelo, uma transa√ß√£o √© uma express√£o condicional com um predicado, uma ramifica√ß√£o verdadeira e uma ramifica√ß√£o falsa. </font><font style="vertical-align: inherit;">Um predicado pode ser uma conjun√ß√£o de v√°rias compara√ß√µes de chaves: igualdade ou v√°rias desigualdades, de acordo com vers√µes de uma chave, revis√£o global etcd ou o valor atual da chave. </font><font style="vertical-align: inherit;">Ramos verdadeiros e falsos podem incluir v√°rias opera√ß√µes de leitura e grava√ß√£o; </font><font style="vertical-align: inherit;">todos eles s√£o aplicados atomicamente, dependendo do resultado da estimativa do predicado.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.1 Garantias de consist√™ncia na documenta√ß√£o</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em outubro de 2019, a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">documenta√ß√£o</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> etcd </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">da API</font></a><font style="vertical-align: inherit;"> afirma que "todas as chamadas da API demonstram consist√™ncia consistente - a forma mais forte de garantia de consist√™ncia dispon√≠vel em sistemas distribu√≠dos". N√£o √© assim: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">consist√™ncia consistente √©</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> estritamente mais fraca que </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">linearidade</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, e a linearizabilidade √© definitivamente poss√≠vel em sistemas distribu√≠dos. Al√©m disso, a documenta√ß√£o afirma que "durante a opera√ß√£o de leitura, etcd n√£o garante a transfer√™ncia do valor [mais recente (medido pelo rel√≥gio externo ap√≥s a conclus√£o da consulta)] dispon√≠vel em qualquer membro do cluster". Essa tamb√©m √© uma declara√ß√£o muito conservadora: se o etcd fornecer linearizabilidade, as opera√ß√µes de leitura sempre ser√£o associadas ao estado confirmado mais recente na ordem de lineariza√ß√£o. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A documenta√ß√£o tamb√©m afirma que o etcd garante </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">isolamento serializ√°vel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: todas as opera√ß√µes (mesmo aquelas que afetam v√°rias teclas) s√£o executadas em alguma ordem geral. Os autores descrevem o isolamento serializ√°vel como "o n√≠vel de isolamento mais forte dispon√≠vel em sistemas distribu√≠dos". Isso (dependendo do que voc√™ quer dizer com "n√≠vel de isolamento") tamb√©m n√£o √© verdadeiro; a serializa√ß√£o estrita √© mais forte que a serializa√ß√£o simples, enquanto a primeira tamb√©m √© poss√≠vel em sistemas distribu√≠dos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A documenta√ß√£o diz que todas as opera√ß√µes (exceto rastreamento) no etcd s√£o lineariz√°veis ‚Äã‚Äãpor padr√£o. Nesse caso, linearizabilidade √© definida como consist√™ncia com rel√≥gios globais fracamente sincronizados. Note-se que essa defini√ß√£o n√£o √© apenas incompat√≠vel com a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">defini√ß√£o de linearizabilidade</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Herlihy &amp; Wing, mas tamb√©m implica uma viola√ß√£o da causalidade: os n√≥s com hor√°rio de expediente tentar√£o ler os resultados das opera√ß√µes que nem sequer come√ßaram. Assumimos que o etcd ainda n√£o √© uma m√°quina do tempo e, como √© baseado no algoritmo Raft, a defini√ß√£o geralmente aceita de linearizabilidade deve ser aplicada. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como as opera√ß√µes KV no etcd s√£o serializ√°veis ‚Äã‚Äãe lineariz√°veis, acreditamos que o etcd fornece </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">serializa√ß√£o estrita</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> por padr√£o </font><font style="vertical-align: inherit;">. Isso faz sentido, uma vez que todas as chaves etcd est√£o em uma √∫nica m√°quina de estado, e o Raft fornece a ordem completa de todas as opera√ß√µes nessa m√°quina de estado. De fato, todo o conjunto de dados etcd √© um √∫nico objeto lineariz√°vel. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O sinalizador opcional </font></font><code>serializable</code> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">diminui</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O n√≠vel de opera√ß√µes de leitura da consist√™ncia serializ√°vel estrita para regular, permitindo a leitura de um estado confirmado desatualizado. </font><font style="vertical-align: inherit;">Observe que a bandeira </font></font><code>serializable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n√£o afeta a serializa√ß√£o da hist√≥ria; </font><font style="vertical-align: inherit;">As opera√ß√µes KV etcd s√£o serializ√°veis ‚Äã‚Äãem todos os casos.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. Desenvolvimento de Teste</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para criar </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">um conjunto de testes,</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> usamos a </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">biblioteca Jepsen</font></a><font style="vertical-align: inherit;"> apropriada</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. A vers√£o etcd 3.4.3 (a mais recente em outubro de 19) foi analisada, trabalhando em clusters Debian Stretch que consistem em 5 n√≥s. Implementamos v√°rias falhas nesses clusters, incluindo parti√ß√µes de rede, isolando n√≥s individuais, particionando o cluster em maioria e minoria, al√©m de parti√ß√µes n√£o transitivas com maioria sobreposta. Eles ‚Äúderrubaram‚Äù e suspenderam subconjuntos aleat√≥rios de n√≥s, e tamb√©m deliberadamente desabilitaram l√≠deres. Foram introduzidas distor√ß√µes temporais de v√°rias centenas de segundos, tanto em intervalos de multissegundos quanto em milissegundos ("flicker" r√°pido). Como o etcd suporta a altera√ß√£o din√¢mica do n√∫mero de componentes, adicionamos e removemos aleatoriamente n√≥s durante o teste.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As cargas de teste inclu√≠am registros, conjuntos e testes transacionais para opera√ß√µes de verifica√ß√£o em KV, bem como cargas especializadas para bloqueios e rel√≥gios.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.1 Registros</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para avaliar a confiabilidade do etcd durante as opera√ß√µes de KV, foi desenvolvido um </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">teste de registro</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> durante o qual as </font><font style="vertical-align: inherit;">opera√ß√µes </font><font style="vertical-align: inherit;">aleat√≥rias de leitura, grava√ß√£o, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">compara√ß√£o e configura√ß√£o</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> foram realizadas </font><font style="vertical-align: inherit;">nas teclas da unidade. </font><font style="vertical-align: inherit;">Os resultados foram </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">avaliados</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> usando a </font><font style="vertical-align: inherit;">ferramenta de lineariza√ß√£o </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">Knossos</font></a><font style="vertical-align: inherit;"> , </font><font style="vertical-align: inherit;">usando o modelo de registro de compara√ß√£o / instala√ß√£o e informa√ß√µes sobre a vers√£o.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.2 Conjuntos</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para quantificar leituras obsoletas, foi desenvolvido um </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">teste</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> que usou uma transa√ß√£o de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">comparar e definir</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para ler um conjunto de n√∫meros inteiros de uma √∫nica chave e, em seguida, adicionar um valor a esse conjunto. </font><font style="vertical-align: inherit;">Durante o teste, tamb√©m fizemos uma leitura paralela de todo o conjunto. </font><font style="vertical-align: inherit;">Ap√≥s a conclus√£o do teste, os resultados foram analisados ‚Äã‚Äãpara a ocorr√™ncia de casos em que o elemento, que se sabia </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">estar</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> presente no conjunto, estava ausente nos resultados da leitura. </font><font style="vertical-align: inherit;">Esses casos foram usados ‚Äã‚Äãpara quantificar leituras obsoletas e atualiza√ß√µes perdidas.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.3 Anexar teste</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para verificar a serializa√ß√£o estrita, um </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">teste de acr√©scimo</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> foi desenvolvido </font><font style="vertical-align: inherit;">durante o qual as transa√ß√µes eram lidas em paralelo e adicionavam valores a listas que consistiam em conjuntos √∫nicos de n√∫meros inteiros. Cada lista foi armazenada em uma chave etcd, e foram feitas adi√ß√µes em cada transa√ß√£o, lendo </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cada chave que precisava ser alterada</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> em uma transa√ß√£o e, em seguida, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">essas chaves foram gravadas e as leituras foram executadas</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> na segunda transa√ß√£o, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">protegida</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para garantir que nenhuma chave gravada tenha sido alterada desde a primeira leitura. </font><font style="vertical-align: inherit;">No final do teste, plotamos o relacionamento entre transa√ß√µes com base na prioridade em tempo real e o relacionamento das opera√ß√µes de leitura e adi√ß√£o. </font><font style="vertical-align: inherit;">A verifica√ß√£o deste gr√°fico em busca de loops tornou poss√≠vel determinar se as opera√ß√µes eram estritamente serializ√°veis. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Enquanto o etcd impede que as transa√ß√µes gravem a mesma chave v√°rias vezes, voc√™ pode criar transa√ß√µes com at√© um registro por chave. </font><font style="vertical-align: inherit;">Tamb√©m garantimos que as opera√ß√µes de leitura dentro da mesma transa√ß√£o refletissem opera√ß√µes de grava√ß√£o anteriores da mesma transa√ß√£o.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.4 Fechaduras</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como um servi√ßo de coordena√ß√£o, o etcd promete </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">suporte</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> interno </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">para bloqueio distribu√≠do</font></a><font style="vertical-align: inherit;"> . Investigamos esses bloqueios de duas maneiras. Inicialmente, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">foram</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> geradas </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">solicita√ß√µes aleat√≥rias de bloqueio e desbloqueio</font></a><font style="vertical-align: inherit;"> , recebendo uma </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">concess√£o para cada bloqueio e deixando-o aberto</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> usando o cliente </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">etc</font></a><font style="vertical-align: inherit;"> embutido no cliente Java </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><code> keepalive</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">at√© o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lan√ßamento</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Testamos os resultados com o Knossos para verificar se eles formam uma implementa√ß√£o linearizada do servi√ßo de bloqueio. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para um teste mais pr√°tico (e para quantificar a frequ√™ncia de falhas de bloqueio), usamos bloqueios e etcd para organizar </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a exclus√£o m√∫tua ao fazer atualiza√ß√µes para o conjunto na mem√≥ria</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e procurou por atualiza√ß√µes perdidas neste conjunto. </font><font style="vertical-align: inherit;">Este teste nos permitiu confirmar diretamente se os sistemas que usam o etcd como mutex podem atualizar com seguran√ßa o estado interno. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A terceira vers√£o do teste de bloqueio envolvia </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">prote√ß√µes na chave de concess√£o</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para modificar o conjunto armazenado no etcd.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.5 Rastreamento</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para verificar se os rel√≥gios fornecem informa√ß√µes sobre cada atualiza√ß√£o de chave, uma chave foi criada como parte do teste e </font><font style="vertical-align: inherit;">valores inteiros exclusivos </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">atribu√≠dos √†s cegas</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Enquanto isso, os clientes compartilhavam </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">essa chave</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> por v√°rios segundos por vez. </font><font style="vertical-align: inherit;">Cada vez ap√≥s o in√≠cio do rel√≥gio, o cliente come√ßou com a revis√£o em que havia parado da √∫ltima vez. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No final deste processo, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">garantimos</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> que cada cliente observasse a mesma sequ√™ncia de altera√ß√µes importantes.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. Resultados</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.1 Rastreamento a partir da 0¬™ revis√£o</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ao rastrear uma chave, os clientes podem especificar uma </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">revis√£o inicial</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que √© "uma revis√£o opcional com a qual o rastreamento inicia (inclusive)". Se o usu√°rio quiser ver cada opera√ß√£o com uma determinada chave, ele poder√° especificar a primeira revis√£o do etcd. O que √© essa auditoria? </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O modelo de dados</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gloss√°rio</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> n√£o fornecem uma resposta para esta pergunta; as revis√µes s√£o descritas como monotonicamente aumentando os contadores de 64 bits, mas n√£o est√° claro se o etcd inicia de 0 ou 1. √â razo√°vel supor que a contagem regressiva √© do zero (apenas no caso). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Infelizmente, isso est√° errado. Solicitar a 0¬™ revis√£o faz com que o etcd comece a transmitir atualiza√ß√µes, come√ßando com a </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">revis√£o atual no servidor mais uma</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, mas n√£o com o primeiro. </font><font style="vertical-align: inherit;">A solicita√ß√£o para a 1¬™ revis√£o fornece todas as altera√ß√µes. </font><font style="vertical-align: inherit;">Esse comportamento </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n√£o</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est√° </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">documentado em nenhum lugar</font></a><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Acreditamos que, na pr√°tica, √© improv√°vel que essa sutileza leve a problemas na produ√ß√£o, uma vez que a maioria dos clusters n√£o permanece na primeira revis√£o. </font><font style="vertical-align: inherit;">Al√©m disso, o etcd comprime a hist√≥ria de qualquer maneira ao longo do tempo, portanto, em aplicativos do mundo real, provavelmente, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">em qualquer caso,</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> n√£o √© necess√°rio ler todas as vers√µes, come√ßando com a 1¬™ revis√£o. </font><font style="vertical-align: inherit;">Esse comportamento √© justificado, mas n√£o prejudicaria a descri√ß√£o correspondente na documenta√ß√£o.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.2 Fechaduras m√≠ticas</font></font></h3><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A documenta√ß√£o da API para bloqueios</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> afirma que uma chave bloqueada "pode ‚Äã‚Äãser usada em conjunto com transa√ß√µes para garantir que as atualiza√ß√µes no etcd ocorram somente quando o bloqueio for de propriedade". Estranho, mas n√£o fornece nenhuma garantia para os bloqueios e seu objetivo n√£o √© explicado. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No entanto, em outros materiais, os mantenedores etcd ainda compartilham informa√ß√µes sobre o uso de bloqueios. Por exemplo, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o comunicado de lan√ßamento do etcd 3.2</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> descreve um aplicativo </font></font><code>etcdctl</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para bloquear altera√ß√µes no compartilhamento de arquivos em um disco. Al√©m disso, em um problema no GitHub com uma pergunta sobre a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">finalidade espec√≠fica dos bloqueios,</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> um dos desenvolvedores do etcd respondeu ao seguinte:</font></font><br>
<br>
<blockquote>     etcd  ,   (  )        ,     (        etcd), - :<br>
<br>
<ol>
<li>    etcd;</li>
<li>  - ( ,     etcd);</li>
<li>    .</li>
</ol></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apenas um exemplo √© dado em </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><code>  etcdctl</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: um bloqueio foi usado para proteger a equipe </font></font><code>put</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, mas n√£o vinculou a chave de bloqueio √† atualiza√ß√£o. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Infelizmente, isso n√£o √© seguro, pois permite que v√°rios clientes mantenham o mesmo bloqueio simultaneamente. O problema √© agravado pela suspens√£o de processos, falhas de rede ou parti√ß√µes, no entanto, tamb√©m pode ocorrer em clusters completamente √≠ntegros, sem falhas externas. Por exemplo, nesta </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">execu√ß√£o de teste, o</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> processo n√∫mero 3 define com √™xito o bloqueio e o processo 1 obt√©m o mesmo bloqueio em paralelo, mesmo antes que o processo 3 tenha a oportunidade de remov√™-lo:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ko/hy/lz/kohylznbfb8bh5a2m1l88kysrg4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A viola√ß√£o do mutex foi mais percept√≠vel em concess√µes com TTLs curtos: TTLs de 1, 2 e 3 segundos n√£o foram capazes de fornecer exclus√£o m√∫tua ap√≥s apenas alguns minutos de teste (mesmo em clusters saud√°veis). Suspens√µes de processo e parti√ß√µes de rede levaram a problemas ainda mais rapidamente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em uma de nossas variantes de teste de bloqueio, mutexes etcd foram usados ‚Äã‚Äãpara proteger atualiza√ß√µes conjuntas de um conjunto de n√∫meros inteiros (como sugere a documenta√ß√£o etcd). Cada atualiza√ß√£o l√™ o valor atual da amostra na mem√≥ria e, ap√≥s cerca de um segundo, grava essa cole√ß√£o novamente com a adi√ß√£o de um elemento exclusivo. Com concess√µes com TTL de dois segundos, cinco processos paralelos e uma pausa de processo a cada cinco segundos, conseguimos causar uma perda constante de cerca de 18% das atualiza√ß√µes confirmadas.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esse problema foi agravado pelo mecanismo de travamento interno no etcd. Se o cliente aguardou o outro cliente desbloque√°-lo, perdeu a concess√£o e depois que o bloqueio foi liberado, o servidor </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n√£o verificou novamente o contrato</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para garantir que ele ainda √© v√°lido antes de informar ao cliente que o bloqueio est√° por tr√°s dele. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A inclus√£o de uma verifica√ß√£o adicional de concess√£o, bem como a sele√ß√£o de TTLs mais longos e a defini√ß√£o cuidadosa dos </font><font style="vertical-align: inherit;">tempos limite </font><font style="vertical-align: inherit;">das </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">elei√ß√µes</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> reduzir√£o a frequ√™ncia desse problema. No entanto, as viola√ß√µes de mutex n√£o podem ser completamente eliminadas, pois os bloqueios distribu√≠dos s√£o fundamentalmente inseguros em sistemas ass√≠ncronos. O Dr. Martin Kleppmann descreve isso de maneira convincente em </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">seu artigo</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sobre bloqueios distribu√≠dos. Segundo ele, os servi√ßos de bloqueio devem sacrificar a corre√ß√£o para manter a viabilidade em sistemas ass√≠ncronos: se o processo travar ao controlar o bloqueio, o servi√ßo de bloqueio precisar√° de alguma maneira para for√ßar o desbloqueio. No entanto, se o processo realmente n√£o cair, mas simplesmente executar lentamente ou estiver temporariamente indispon√≠vel, desbloque√°-lo pode causar a reten√ß√£o em v√°rios locais ao mesmo tempo.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas mesmo que o servi√ßo de bloqueio distribu√≠do use, digamos, algum tipo de detector de falha m√°gica e possa realmente garantir exclus√£o m√∫tua, no caso de algum recurso n√£o local, seu uso ainda ser√° inseguro. Suponha que o processo A envie uma mensagem para o banco de dados D enquanto mant√©m um cadeado. Depois disso, o processo A trava e o processo B recebe um bloqueio e tamb√©m envia uma mensagem para a base D. O problema √© que uma mensagem do processo A (devido √† assincronia) pode vir ap√≥s uma mensagem do processo B, violando a exce√ß√£o m√∫tua que o bloqueio deveria fornecer. . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para evitar esse problema, √© necess√°rio confiar no fato de que </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o pr√≥prio sistema de armazenamento</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> oferecer√° suporte √† corre√ß√£o das transa√ß√µes ou, se o servi√ßo de bloqueio fornecer esse mecanismo, use</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O </font><font style="vertical-align: inherit;">token </font><font style="vertical-align: inherit;">" </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">esgrima"</font></font></i><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> que ser√° inclu√≠do em todas as opera√ß√µes realizadas pelo detentor da trava. Isso garantir√° que nenhuma opera√ß√£o do suporte anterior da trava ocorra repentinamente entre as opera√ß√µes do atual propriet√°rio da trava. Por exemplo, no </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">servi√ßo de bloqueio gordinho</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> do Google </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">,</font></a><font style="vertical-align: inherit;"> esses tokens s√£o chamados </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sequenciadores</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . No etcd, voc√™ pode usar a revis√£o da chave de bloqueio como um token de bloqueio ordenado globalmente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al√©m disso, as chaves de bloqueio no etcd podem ser usadas para proteger atualiza√ß√µes transacionais no pr√≥prio etcd. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verificando a vers√£o da chave de bloqueio como parte da transa√ß√£o</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, os usu√°rios podem impedir uma transa√ß√£o se o bloqueio n√£o for mais retido (ou seja, a vers√£o da chave de bloqueio for maior que zero). </font><font style="vertical-align: inherit;">Em nossos testes, essa abordagem nos permitiu isolar com √™xito as opera√ß√µes de leitura, modifica√ß√£o e grava√ß√£o nas quais a grava√ß√£o era a √∫nica transa√ß√£o protegida pelo bloqueio. </font><font style="vertical-align: inherit;">Essa abordagem fornece isolamento semelhante aos tokens de barragem, mas (como tokens de barragem) n√£o garante atomicidade: um processo pode travar ou perder um mutex durante uma atualiza√ß√£o que consiste em muitas opera√ß√µes, deixando o etcd em um estado logicamente inconsistente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os resultados do trabalho nas quest√µes do projeto:</font></font><br>
<ul>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Os rel√≥gios que come√ßam na revis√£o 0 come√ßam mais tarde</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - n√£o decididos;</font></font></li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Os bloqueios retornam ap√≥s o bloqueio sem verificar a propriedade</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - no mestre;</font></font></li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Os bloqueios n√£o s√£o documentados como inseguros</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - n√£o resolvidos.</font></font></li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4. Discuss√£o</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em nossos testes, o etcd 3.4.3 atendeu √†s expectativas em rela√ß√£o √†s opera√ß√µes KV: observamos consist√™ncia estritamente serializ√°vel de leitura, grava√ß√£o e at√© transa√ß√µes com v√°rias chaves, apesar da suspens√£o de processos, falhas, manipula√ß√£o do rel√≥gio e da rede, al√©m de uma altera√ß√£o no n√∫mero de membros do cluster . </font><font style="vertical-align: inherit;">O comportamento estritamente serializ√°vel foi implementado por padr√£o nas opera√ß√µes KV; </font><font style="vertical-align: inherit;">o desempenho das leituras com o </font></font><code>serializable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">conjunto de </font><font style="vertical-align: inherit;">sinalizadores </font><font style="vertical-align: inherit;">levou ao aparecimento de leituras obsoletas (conforme descrito na documenta√ß√£o). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Monitore </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(rel√≥gios)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para funcionar corretamente - pelo menos nas teclas individuais. </font><font style="vertical-align: inherit;">At√© a compacta√ß√£o do hist√≥rico destruir os dados antigos, o rel√≥gio emitiu com √™xito cada atualiza√ß√£o de chave.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No entanto, os bloqueios no etcd (como todos os bloqueios distribu√≠dos) n√£o fornecem exclus√£o m√∫tua. Diferentes processos podem manter a trava ao mesmo tempo - mesmo em clusters saud√°veis ‚Äã‚Äãcom rel√≥gios perfeitamente sincronizados. A documenta√ß√£o com a API de bloqueio n√£o disse nada sobre isso, e os exemplos de bloqueios apresentados n√£o eram seguros. No entanto, alguns dos problemas com os bloqueios tiveram que ocorrer ap√≥s o lan√ßamento </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">deste patch</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como resultado de nossa colabora√ß√£o, a equipe etcd fez uma s√©rie de altera√ß√µes na documenta√ß√£o (elas j√° apareceram no GitHub e ser√£o publicadas em vers√µes futuras do site do projeto). A p√°gina da API GitHub Warranties agora declara que, por padr√£o, o etcd √© </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">estritamente serializ√°vel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e a alega√ß√£o de que serial e serializ√°vel s√£o os n√≠veis mais fortes de consist√™ncia dispon√≠veis em sistemas distribu√≠dos foi removida. Com rela√ß√£o √†s revis√µes, agora √© indicado que o in√≠cio deve ser </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">da unidade (1)</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , embora a documenta√ß√£o da API </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ainda n√£o diga</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> que uma tentativa de iniciar a partir da 0¬™ revis√£o resultar√° em "eventos de sa√≠da que ocorreram ap√≥s a revis√£o atual mais 1" em vez do esperado "envio de todos os eventos". A documenta√ß√£o dos problemas de seguran√ßa de bloqueio est√° </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">em desenvolvimento</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Algumas altera√ß√µes na documenta√ß√£o, como a descri√ß√£o do comportamento especial do etcd ao tentar ler, iniciando com uma revis√£o zero, ainda requerem aten√ß√£o.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como sempre, enfatizamos que Jepsen prefere uma abordagem experimental √† verifica√ß√£o de seguran√ßa: podemos confirmar a presen√ßa de bugs, mas n√£o a aus√™ncia deles. </font><font style="vertical-align: inherit;">Esfor√ßos consider√°veis ‚Äã‚Äãest√£o sendo feitos para encontrar problemas, mas n√£o podemos provar a corre√ß√£o geral do etcd.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.1 Recomenda√ß√µes</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se voc√™ usar bloqueios no etcd, pense se voc√™ precisa deles para seguran√ßa ou para simplesmente aumentar o desempenho limitando probabilisticamente a simultaneidade. Os bloqueios Etcd podem ser usados ‚Äã‚Äãpara aumentar o desempenho, mas us√°-los para fins de seguran√ßa pode ser arriscado. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em particular, se voc√™ usar o bloqueio etcd para proteger um recurso compartilhado, como um arquivo, banco de dados ou servi√ßo, esse recurso dever√° garantir a seguran√ßa </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sem</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> bloquear. Uma maneira de conseguir isso √© usar um </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">token de barragem mon√≥tono</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Pode ser, por exemplo, uma revis√£o etcd associada √† chave de bloqueio atual. O recurso compartilhado deve garantir que, uma vez que o cliente tenha usado o token</font></font><code>y</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para executar alguma opera√ß√£o, qualquer opera√ß√£o com um token </font></font><code>x &lt; y</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ser√° rejeitada. Essa abordagem n√£o garante a atomicidade, mas garante que as opera√ß√µes dentro da estrutura do bloqueio sejam executadas em ordem e n√£o de forma intermitente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Suspeitamos que √© improv√°vel que usu√°rios comuns encontrem esse problema. Mas se voc√™ ainda </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">confiar</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> na leitura de todas as mudan√ßas de ETCD, come√ßando com a primeira revis√£o, lembre-se que voc√™ precisa para passar 1, n√£o 0 como par√¢metro. Nossos experimentos mostram que uma revis√£o zero neste meio de caso "revis√£o atual", n√£o "Mais cedo".</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Finalmente, bloqueios e etcd (como todos os bloqueios distribu√≠dos) enganam os usu√°rios: eles podem querer us√°-los como bloqueios regulares, mas ficar√£o muito surpresos quando perceberem que esses bloqueios n√£o fornecem exclus√£o m√∫tua. </font><font style="vertical-align: inherit;">A documenta√ß√£o da API, as postagens no blog, os problemas no GitHub n√£o dizem nada sobre esse risco. </font><font style="vertical-align: inherit;">Recomendamos que voc√™ inclua informa√ß√µes na documenta√ß√£o etcd de que os bloqueios n√£o fornecem exclus√£o m√∫tua e fornece exemplos de uso de tokens de barrage para atualizar o status de recursos compartilhados em vez de exemplos que podem levar √† perda de atualiza√ß√µes.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.2 Planos adicionais</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O projeto etcd √© considerado est√°vel h√° v√°rios anos: o algoritmo Raft baseado nele funcionou bem, a API para opera√ß√µes KV √© simples e direta. Embora alguns recursos adicionais tenham recebido recentemente uma nova API, sua sem√¢ntica √© relativamente simples. Acreditamos que j√° estudamos comandos b√°sicos suficientes como </font></font><code>get</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e </font></font><code>put</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, transa√ß√µes, bloqueio e rastreamento. No entanto, existem outros testes que devem ser realizados. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No momento, n√£o realizamos uma avalia√ß√£o suficientemente detalhada das </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">exclus√µes.</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: Pode haver casos de limite associados a vers√µes e revis√µes, quando objetos s√£o criados e exclu√≠dos constantemente. Em testes futuros, pretendemos submeter as opera√ß√µes de remo√ß√£o a um estudo mais cuidadoso. Tamb√©m n√£o testamos consultas de intervalo ou opera√ß√µes de rastreamento com v√°rias chaves, embora suspeitemos que suas sem√¢nticas sejam semelhantes √†s opera√ß√µes com chaves √∫nicas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nos testes, utilizamos a suspens√£o de processos, falhas, manipula√ß√µes com o rel√≥gio, a rede foi dividida e a composi√ß√£o do cluster alterada; nos bastidores, havia problemas como danos ao disco e outras </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">falhas bizantinas</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> no n√≠vel de um n√≥. Essas oportunidades podem ser exploradas em pesquisas futuras. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O trabalho foi apoiado pela </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cloud Native Computing Foundation.</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, parte da </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Linux Foundation</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e est√° em conformidade com </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">as pol√≠ticas √©ticas da Jepsen</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Queremos agradecer √† equipe etcd por sua ajuda, e aos seguintes representantes em particular: Chris Aniszczyk, Gyuho Lee, Xiang Li, Hitoshi Mitake, Jingyi Hu e Brandon Philips.</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PS do tradutor</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Leia tamb√©m no nosso blog:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚Äú </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TiKV - banco de dados de valor-chave distribu√≠do para nuvem nativa</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ‚Äù;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">" </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zetcd do CoreOS: substituindo o ZooKeeper por ... storage etcd</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ";</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚Äú </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KeyDB como um substituto [potencial] para Redis</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ‚Äù;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">" </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bancos de dados e Kubernetes (revis√£o e relat√≥rio de v√≠deo)</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ."</font></font></li>
</ul></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt487534/">https://habr.com/ru/post/pt487534/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt487516/index.html">T√©cnicas e t√°ticas de ca√ßa de atacantes usando arquivos de pr√©-busca</a></li>
<li><a href="../pt487518/index.html">Produtos radioativos. Espectr√¥metro gama. Parte 2</a></li>
<li><a href="../pt487522/index.html">N√≥s fazemos o terminal voar (parte 1)</a></li>
<li><a href="../pt487524/index.html">Por que um hackathon de inicializa√ß√£o de hardware precisa</a></li>
<li><a href="../pt487528/index.html">–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–º —Å–æ–≥–ª–∞—à–µ–Ω–∏–∏ –∏ –ø–æ–ª–∏—Ç–∏–∫–µ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏ –Ω–∞ —Å–µ—Ä–≤–∏—Å–∞—Ö –•–∞–±—Ä–∞</a></li>
<li><a href="../pt487538/index.html">A .NET Interactive est√° aqui! | Pr√©-visualiza√ß√£o do .NET Notebooks 2</a></li>
<li><a href="../pt487540/index.html">HighLoad ++, Anastasia Tsymbalyuk, Stanislav Tselovalnikov (Sberbank): como nos tornamos MDA</a></li>
<li><a href="../pt487542/index.html">PRESENT - Criptografia de bloco ultraleve (tradu√ß√£o do PRESENT original: uma cifra de bloco ultraleve)</a></li>
<li><a href="../pt487544/index.html">Documenta√ß√£o do .NET: Novidades de janeiro</a></li>
<li><a href="../pt487548/index.html">Nova experi√™ncia: Chamando servi√ßos .NET gRPC de um navegador com gRPC-Web</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>