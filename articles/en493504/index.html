<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üçÜ üçÖ üòÄ Our remote work experience in creating online stores üî∏ üîÑ ü§≤üèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Today, the reality is that due to quarantine and coronavirus, many companies have to think about how to provide remote work for their employees. Almos...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Our remote work experience in creating online stores</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/493504/"><img src="https://habrastorage.org/webt/0g/5b/6o/0g5b6onefz3yh3jhpfksb9xywhg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Today, the reality is that due to quarantine and coronavirus, many companies have to think about how to provide remote work for their employees. Almost every day, articles appear that reveal both the technical and psychological aspects of the transition to remote work. At the same time, vast experience has already been accumulated in such work, for example, by freelancers or those IT companies that have long been working with employees and customers living all over the world.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Transferring a large IT company to remote work may not be easy. </font><font style="vertical-align: inherit;">However, in many cases, you can do with well-known tools and techniques. </font><font style="vertical-align: inherit;">In this article, we will review our remote experience from the technical side. </font><font style="vertical-align: inherit;">We hope that this information will help companies adapt to new conditions. </font><font style="vertical-align: inherit;">I would be grateful for any comments, suggestions and additions.</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Remote access to company resources</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If an IT company works in an office, then, as a rule, there are system units, laptops, servers, printers and scanners, as well as telephones. </font><font style="vertical-align: inherit;">All this is connected to the Internet through a router. </font><font style="vertical-align: inherit;">Our company in the early years of its existence housed just such equipment in the office. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now imagine that you need to quickly, in 1-2 days, send all employees home, and even so that work on projects does not stop. </font><font style="vertical-align: inherit;">What to do in this case? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
With laptops, everything is clear - employees can simply take them with them. </font><font style="vertical-align: inherit;">System units and monitors are more difficult to transport, but still it can be done. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But what to do with servers, printers and phones?</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Solving the problem of access to servers in the office</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
When employees move home, and the servers remain in the office and there is someone to look after, it remains only to solve the issue of organizing secure remote access for employees to the servers of your company. This is a job for the system administrator. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If Microsoft Windows Server is installed on office servers (as we had in our early years), then as soon as the administrator sets up terminal access using the RDP protocol, employees will be able to work with the server from home. It is possible that you will have to purchase an additional license for terminal access. In any case, employees will need a computer with Microsoft Windows at home.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Servers with Linux OS will be accessible from home and without the purchase of any licenses. </font><font style="vertical-align: inherit;">It will be enough for your company administrator to configure access via protocols such as SSH, POP3, IMAP and SMTP. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If this has not yet been done, then to protect the servers from unauthorized access to the administrator, it makes sense to at least install a firewall (firewall) on office servers, as well as configure remote access for your employees using a VPN. </font><font style="vertical-align: inherit;">We use OpenVPN software, which is available for almost any platform and operating system. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But what if the office closes completely with all servers turned off? </font><font style="vertical-align: inherit;">There are four options left:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">if possible, completely switch to cloud technologies - use a cloud CRM system, store general documents on Google Docs, etc .;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">transport servers home to the system administrator (he will be happy ...);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">move the servers to some data center that agrees to accept them;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rent server capacities in the data center or in the cloud</font></font></li>
</ul> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The first option is good because you do not need to transfer and install any servers. </font><font style="vertical-align: inherit;">The results of the transition to cloud technologies will be useful to you further, they will save money and effort on maintenance and maintenance. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The second option creates problems at home with the system administrator, since the server will be around the clock and quite a lot of noise. </font><font style="vertical-align: inherit;">And if the company has not one server in the office, but a whole rack?</font></font><br>
<br>
<img src="https://habrastorage.org/webt/4_/lj/nn/4_ljnnkhezdauw3vuznguq_igde.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Transporting servers to a data center is not easy either. As a rule, only servers suitable for installation in a rack can be placed in a data center. At the same time, the office often uses servers in a Big Tower type enclosure or even ordinary desktop computers. It will be difficult for you to find a data center that agrees to host similar equipment in your home (although there are such data centers, for example, we placed it in the PlanetaHost data center). You can, of course, rent the right number of racks and mount your equipment there. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Another problem with moving servers to the data center is that you will most likely need to change the IP addresses of the servers. This, in turn, may require reconfiguring the server software or making changes to some software licenses if they are tied to IP addresses.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The option of renting server capacities in a data center is easier in terms of the lack of the need to transport servers somewhere. But your system administrator will have to reinstall all the software and copy the necessary data from the servers installed in the office. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If your office technologies are based on the use of Microsoft Windows, you can rent a Microsoft Windows server in the data center with the required number of terminal licenses. Take one such license for each of your employees working with the server remotely. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Renting physical servers can cost 2-3 times cheaper than renting virtual servers in the cloud. But if you need very small capacities, and not a whole server, then the option with the cloud may be cheaper.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The increased price of cloud resources is a consequence of the reservation of hardware resources in the cloud. </font><font style="vertical-align: inherit;">As a result, the cloud will probably be more reliable than a rented physical server. </font><font style="vertical-align: inherit;">But here it is already necessary to assess the risks and count the money. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As for our company, which is engaged in the creation of online stores, then all the necessary resources with us have long been in data centers and are available remotely. </font><font style="vertical-align: inherit;">These are proprietary and leased physical servers that are used for hosting stores, as well as virtual machines for software developers, layout designers and testers.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Transfer jobs from office to home</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As we already said, employees can simply take their work computers with them - laptops or system units with monitors. If necessary, you can buy new laptops for employees by ordering their home delivery. Of course, new computers will have to install the necessary software, which will lead to additional time costs. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If employees already have home computers with Microsoft Windows, then they can use them as Microsoft Windows Server terminals or to access Linux servers. It will be enough to configure VPN access.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Our employees work both on Windows and Linux. </font><font style="vertical-align: inherit;">We have very few Microsoft Windows servers, so there is no need to purchase terminal licenses for this OS. </font><font style="vertical-align: inherit;">As for access to resources located in data centers, it is organized using a VPN and is additionally limited by firewalls installed on each server. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Do not forget to provide employees working at home with headsets (headphones with microphones) and a video camera. </font><font style="vertical-align: inherit;">This will allow you to communicate remotely with great efficiency, almost like in an office. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Many people try to control what employees do during working hours at home by installing various specialized monitors on their computers. </font><font style="vertical-align: inherit;">We never did this, we controlled only the results of work. </font><font style="vertical-align: inherit;">As a rule, this is quite enough.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What to do with the printer and scanner</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Web site software developers rarely need printers and scanners. </font><font style="vertical-align: inherit;">However, if such equipment is necessary for employees, there will be a problem when switching to remote work. </font></font><br>
<img src="https://habrastorage.org/webt/tq/qt/gc/tqqtgcntmcrsjgphcozuq7dxa1c.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Typically, an office MFP is installed, high-speed, large and heavy. </font><font style="vertical-align: inherit;">Yes, you can send him home to such an employee who needs to print and scan most often. </font><font style="vertical-align: inherit;">Unless, of course, this employee has the opportunity to host him. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But if many of your employees often scan and print documents, you will have to purchase MFPs and install them at home, or change the company's business processes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As an alternative to the transportation and acquisition of new MFPs - an accelerated transition to electronic document management wherever possible.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Work with paper and electronic documents</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It‚Äôs best if you manage to translate the entire document flow into electronic form before switching to remote work. For example, we use DIADOK for the exchange of accounting documents, and we pay bills through a client-bank. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
When introducing such a system, it will be necessary to provide all employees involved in electronic document management (for example, accountants) with key fobs with an enhanced qualified electronic signature. It may take some time to get such trinkets, so it is better to be puzzled by this question in advance. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In DIADOK (as in similar services), you can configure roaming with other electronic document management operators. This will be required if the contractors use other workflow systems than yours.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If you or some of your contractors work with documents in the old fashioned way, you will have to send and receive ordinary paper letters with a visit to the post office or calling couriers. </font><font style="vertical-align: inherit;">In the case of quarantine, such operations will have to be minimized.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What to do with telephony</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In the first years of work, our company used landline and mobile phones. However, we very soon realized that with a large number of employees and customers we need some more adequate solution. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The most convenient for us was a virtual PBX from MangoTelecom. With its help, we got rid of binding to city phone numbers (and hence the physical location of the office). We also got the opportunity to integrate the PBX with our CRM, record customer service conversations, set up call forwarding, etc. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Next, you can install the virtual PBX application on a smartphone, laptop or desktop computer. This will allow you to make calls to Russian numbers or receive calls at domestic rates even from abroad.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Thus, the virtual PBX allows you to make the move of employees from office to home almost invisible in terms of business continuity. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If you use an office PBX, and when it is switched off, it is inevitable that it will shut down, consider switching to a virtual PBX. </font><font style="vertical-align: inherit;">Find out from your telephone provider if it is possible to enable call forwarding from the city numbers of the office PBX to the incoming numbers of the virtual PBX. </font><font style="vertical-align: inherit;">In this case, when switching to a virtual PBX, you will not lose incoming calls. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As for calls between employees, when working with a virtual telephone exchange, such calls, as a rule, are not charged.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Remote selection and training of employees</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Replenishing the staff, in the early years of our company, we always invited candidates to the office, conducted classic interviews and gave assignments. Next, we engaged in the office of individual training for beginners in the office. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
However, over time, we switched completely to remote selection of personnel. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The initial selection can be carried out using the tests attached to the vacancy on the HH website or some other recruiting service. I must say that, with proper preparation, these tests allow you to filter a significant number of candidates who do not meet the requirements. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And then everything is simple - we use Skype. Using Skype and always with the camcorder turned on, you can conduct an interview no less effectively than if the candidate was sitting next to the table.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jh/xy/ti/jhxytimoz13tx1oo_wefuoq2gp4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If there are certain disadvantages, Skype has very important advantages over similar systems. First of all, via Skype you can organize a demonstration of the desktop of your computer, and this is very necessary when training and discussing working issues. Further, Skype is free, available on all major platforms, and it is easy to install on a computer or smartphone. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If you need to organize a meeting or train several employees, just create a group in Skype. Using the demonstration of his desktop, the speaker or teacher can bring to the meeting participants all the necessary materials. At the same time, in the chat window, you can publish links, text messages, exchange files or conduct dialogs.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In addition to classes on Skype, we are preparing training films (using the Camtasia Studio program, but you can use what you are used to). If these films are for internal use only, then we post them on our servers, and if for all, then on YouTube. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In most cases, this combination of educational films, Skype group classes with dialogue and desktop demonstrations, as well as individual communication between the teacher and students allows us to conduct training remotely.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Yes, there are services designed to demonstrate the desktop to a group of users, to conduct webinars, and even training platforms (including free ones). </font><font style="vertical-align: inherit;">But for all this you need to pay either with money or with the time spent studying the methods of working with the platform. </font><font style="vertical-align: inherit;">At the same time, free platforms may become paid. </font><font style="vertical-align: inherit;">At the same time, Skype will be sufficient in many cases.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Project Collaboration</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In the course of joint work on projects, we hold daily and weekly meetings, use pair programming and code reviews. Skype groups have been created for meetings and viewing the code; if necessary, desktop demos are used. As for the code, it is stored in our GitLab server, which is located in the data center. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We will organize collaboration on documents using Google Docs.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In addition to all this, we have an internal Klondike knowledge base integrated with the application processing and resource planning system (our CRM and ERP). </font><font style="vertical-align: inherit;">These tools, located on servers in the data center, we have created and improved over the years. </font><font style="vertical-align: inherit;">They allow us to efficiently process numerous applications from our customers, appoint performers, conduct discussions on applications, take into account working hours and do much more. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Most likely, your company is already using something similar, and when switching to remote work of employees, it will be enough to provide remote access to relevant resources.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Remote user support</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Our users are owners and managers of online stores operating in almost all regions of Russia. Of course, we support them remotely. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Our support service works through a ticket system, answers questions by e-mail and phone, chatting through the administrative website of the online store and the website of our company. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
At the stage of discussing tasks, we use any messengers available to the client, for example, Telegram, WhatsApp, Skype. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sometimes it becomes necessary to see what the client does on his computer. This can be done via Skype in the desktop demo mode.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If necessary, you can remotely work at the user's computer using tools such as TeamViewer, Ammee Admin, AnyDesk, etc. </font><font style="vertical-align: inherit;">To use these tools, the client will have to install the appropriate software on their computer.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VPN Access Setup</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We have OpenVPN servers installed on virtual machines located in different data centers (using Debian 10 OS). </font><font style="vertical-align: inherit;">The OpenVPN client is installed on the working computers of our employees in the environment of Debian, Ubuntu, MacOS and Microsoft Windows. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
On the Internet you can find a lot of instructions for installing the OpenVPN server and client. </font><font style="vertical-align: inherit;">You can also use my </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenVPN Installation and Configuration Guide</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I must say that the manual procedure for creating keys for employees is very tiring. </font><font style="vertical-align: inherit;">To connect a new user in no more than ten seconds, we use a script similar to the one below under the spoiler.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Script for creating keys</font></font></b><div class="spoiler_text"><pre><code class="bash hljs"><span class="hljs-meta">#!/bin/bash
</span>
<span class="hljs-keyword">if</span> [ -z <span class="hljs-string">"<span class="hljs-variable">$1</span>"</span> ]
<span class="hljs-keyword">then</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"============================================================="</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"VPN -- Generate crt key pair"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"============================================================="</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Usage:  bash gen.sh username"</span>
<span class="hljs-built_in">exit</span>
<span class="hljs-keyword">fi</span><font></font>
<font></font>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"============================================================="</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"VPN -- Generate crt key pair for user: <span class="hljs-variable">$1</span>"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"============================================================="</span><font></font>
<font></font>
ADMIN_EMAIL=<span class="hljs-string">"admin@mycompany.ru"</span>
USER=<span class="hljs-variable">$1</span><font></font>
<font></font>
RSA=<span class="hljs-string">"/home/ca/easy-rsa-master/easyrsa3/"</span>
PKI=<span class="hljs-string">"<span class="hljs-variable">$RSA</span>"</span>pki/<font></font>
PKI_KEY=<span class="hljs-string">"<span class="hljs-variable">$PKI</span>"</span>private/<font></font>
PKI_CRT=<span class="hljs-string">"<span class="hljs-variable">$PKI</span>"</span>issued/<font></font>
USR_CRT=<span class="hljs-string">"/home/ca/cert_generation/user_crt/"</span>
USR_DISTR=<span class="hljs-string">"/home/ca/cert_generation/user_distr/"</span><font></font>
<font></font>
<span class="hljs-comment"># If user key does not exists, create it</span><font></font>
<font></font>
<span class="hljs-keyword">if</span> [ ! -f <span class="hljs-string">"<span class="hljs-variable">$PKI_KEY</span><span class="hljs-variable">$USER</span>.key"</span> ]
<span class="hljs-keyword">then</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">"File <span class="hljs-variable">$PKI_KEY</span><span class="hljs-variable">$USER</span>.key does not exists, creating..."</span>
  <span class="hljs-built_in">cd</span> <span class="hljs-string">"<span class="hljs-variable">$RSA</span>"</span>
  ./easyrsa build-client-full <span class="hljs-variable">$USER</span> nopass
<span class="hljs-keyword">fi</span><font></font>
<font></font>
<span class="hljs-comment"># Removing user folder, if exists</span><font></font>
<font></font>
<span class="hljs-keyword">if</span> [ -e <span class="hljs-string">"<span class="hljs-variable">$USR_CRT</span><span class="hljs-variable">$USER</span>/"</span> ]
<span class="hljs-keyword">then</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Already exists, removing user folder <span class="hljs-variable">$USR_CRT</span><span class="hljs-variable">$USER</span>..."</span>
rm -r -f <span class="hljs-string">"<span class="hljs-variable">$USR_CRT</span><span class="hljs-variable">$USER</span>/"</span>
<span class="hljs-keyword">fi</span><font></font>
<font></font>
<span class="hljs-comment"># Create user folder for key and other files</span><font></font>
<font></font>
mkdir <span class="hljs-variable">$USR_CRT</span>/<span class="hljs-variable">$USER</span>/<font></font>
<font></font>
<span class="hljs-comment"># Copy OpenVPN key, cert and config files to user folder</span><font></font>
<font></font>
cp <span class="hljs-string">"<span class="hljs-variable">$PKI_KEY</span><span class="hljs-variable">$USER</span>.key"</span> <span class="hljs-string">"<span class="hljs-variable">$USR_CRT</span><span class="hljs-variable">$USER</span>/<span class="hljs-variable">$USER</span>.key"</span>
cp <span class="hljs-string">"<span class="hljs-variable">$PKI_CRT</span><span class="hljs-variable">$USER</span>.crt"</span> <span class="hljs-string">"<span class="hljs-variable">$USR_CRT</span><span class="hljs-variable">$USER</span>/<span class="hljs-variable">$USER</span>.crt"</span>
cp <span class="hljs-string">"<span class="hljs-variable">$PKI</span>"</span>ca.crt <span class="hljs-string">"<span class="hljs-variable">$USR_CRT</span><span class="hljs-variable">$1</span>"</span><font></font>
<font></font>
cp <span class="hljs-string">"<span class="hljs-variable">$USR_DISTR</span>"</span>ta.key <span class="hljs-string">"<span class="hljs-variable">$USR_CRT</span><span class="hljs-variable">$USER</span>"</span>
cp <span class="hljs-string">"<span class="hljs-variable">$USR_DISTR</span>"</span>openssl.cnf <span class="hljs-string">"<span class="hljs-variable">$USR_CRT</span><span class="hljs-variable">$USER</span>"</span><font></font>
<font></font>
<span class="hljs-comment"># Copy Manual files</span><font></font>
<font></font>
cp <span class="hljs-string">"<span class="hljs-variable">$USR_DISTR</span>"</span>readme_vpn_win.txt <span class="hljs-string">"<span class="hljs-variable">$USR_CRT</span><span class="hljs-variable">$USER</span>"</span><font></font>
<font></font>
<span class="hljs-comment"># Replace string "change_me" in configuration files whis user name $USER</span><font></font>
<font></font>
cp <span class="hljs-string">"<span class="hljs-variable">$USR_DISTR</span>"</span>server.conf <span class="hljs-string">"<span class="hljs-variable">$USR_CRT</span><span class="hljs-variable">$USER</span>"</span>/server.conf.1<font></font>
cp <span class="hljs-string">"<span class="hljs-variable">$USR_DISTR</span>"</span>mycompany_vpn.ovpn <span class="hljs-string">"<span class="hljs-variable">$USR_CRT</span><span class="hljs-variable">$USER</span>"</span>/mycompany_vpn_<span class="hljs-variable">$USER</span>.ovpn.1<font></font>
cp <span class="hljs-string">"<span class="hljs-variable">$USR_DISTR</span>"</span>readme_vpn_win.txt <span class="hljs-string">"<span class="hljs-variable">$USR_CRT</span><span class="hljs-variable">$USER</span>"</span>/readme_vpn_win.txt.1<font></font>
<font></font>
sed <span class="hljs-string">"s/change_me/<span class="hljs-variable">$USER</span>/g"</span> <span class="hljs-string">"<span class="hljs-variable">$USR_CRT</span><span class="hljs-variable">$1</span>"</span>/server.conf.1 &gt; <span class="hljs-string">"<span class="hljs-variable">$USR_CRT</span><span class="hljs-variable">$1</span>"</span>/server.conf<font></font>
rm <span class="hljs-string">"<span class="hljs-variable">$USR_CRT</span><span class="hljs-variable">$USER</span>"</span>/server.conf.1<font></font>
<font></font>
sed <span class="hljs-string">"s/change_me/<span class="hljs-variable">$USER</span>/g"</span> <span class="hljs-string">"<span class="hljs-variable">$USR_CRT</span><span class="hljs-variable">$1</span>"</span>/mycompany_vpn_<span class="hljs-variable">$USER</span>.ovpn.1 &gt; <span class="hljs-string">"<span class="hljs-variable">$USR_CRT</span><span class="hljs-variable">$1</span>"</span>/mycompany_vpn_<span class="hljs-variable">$USER</span>.ovpn<font></font>
rm <span class="hljs-string">"<span class="hljs-variable">$USR_CRT</span><span class="hljs-variable">$USER</span>"</span>/mycompany_vpn_<span class="hljs-variable">$USER</span>.ovpn.1<font></font>
<font></font>
sed <span class="hljs-string">"s/change_me/<span class="hljs-variable">$USER</span>/g"</span> <span class="hljs-string">"<span class="hljs-variable">$USR_CRT</span><span class="hljs-variable">$1</span>"</span>/readme_vpn_win.txt.1 &gt; <span class="hljs-string">"<span class="hljs-variable">$USR_CRT</span><span class="hljs-variable">$1</span>"</span>/readme_vpn_win.txt<font></font>
rm <span class="hljs-string">"<span class="hljs-variable">$USR_CRT</span><span class="hljs-variable">$USER</span>"</span>/readme_vpn_win.txt.1<font></font>
<font></font>
<span class="hljs-comment"># Create tar.gz and send it to administrator e-mail</span><font></font>
<font></font>
tar -cvzf <span class="hljs-string">"<span class="hljs-variable">$USR_CRT</span><span class="hljs-variable">$USER</span>/<span class="hljs-variable">$USER</span>.tar.gz"</span> <span class="hljs-string">"<span class="hljs-variable">$USR_CRT</span><span class="hljs-variable">$USER</span>/"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"VPN: crt, key and configuration files for user <span class="hljs-variable">$USER</span>"</span> | mutt <span class="hljs-variable">$ADMIN_EMAIL</span> -a <span class="hljs-variable">$USR_CRT</span>/<span class="hljs-variable">$USER</span>/<span class="hljs-variable">$USER</span>.tar.gz -s <span class="hljs-string">"VPN: crt, key and configuration files for user <span class="hljs-variable">$USER</span>"</span><font></font>
<font></font>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"---------&gt;  DONE!"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Keys fo user <span class="hljs-variable">$USER</span> sent to <span class="hljs-variable">$ADMIN_EMAIL</span>"</span>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This script is passed the user identifier (using Latin letters) as a parameter at startup. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The script asks for the password Certificate Authority, which is created when the OpenVPN server is installed. Further, this script forms a directory with all the necessary certificates and configuration files for OpenVPN clients, as well as a documentation file for installing the OpenVPN client. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
When creating configuration and documentation files, the user ID is substituted for change_me. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Next, the directory with all the necessary files is packaged and sent to the administrator (the address is specified directly in the script). It remains only to forward the resulting archive to the user at his email address.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We hope that you can spend your home imprisonment period profitably. </font><font style="vertical-align: inherit;">Having worked out the methods of working without an office, perhaps you will continue to actively use the work of remote employees. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Good luck in moving and fruitful work at home!</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en493482/index.html">Meet the cybernetic turtle, the predecessor of Roomba</a></li>
<li><a href="../en493484/index.html">Your C # is already ‚Äúfunctional,‚Äù just let it.</a></li>
<li><a href="../en493486/index.html">The most interesting automotive startups 2019-2020</a></li>
<li><a href="../en493488/index.html">Unity + git = friendship: part 1 gentleman's set</a></li>
<li><a href="../en493496/index.html">ReactJS. Warning: Can't perform a React state update on an unmounted component. This is a no-op, but it indicates a memo</a></li>
<li><a href="../en493506/index.html">Why do geophysicists believe in flat earth theory in the 21st century?</a></li>
<li><a href="../en493508/index.html">Podcast: what awaits beginner scientists in the field of defense</a></li>
<li><a href="../en493512/index.html">"Pandemic" of scientific publications about COVID-19</a></li>
<li><a href="../en493514/index.html">Autonomous security system on Arduino + GSM</a></li>
<li><a href="../en493516/index.html">Lines 9753: Groundhog Day</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>