<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üà∫ üßëüèª ‚ôäÔ∏è Como construir uma casa inteligente e n√£o enlouquecer üòõ üßë ü•ä</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="M√≥veis inteligentes, que cuidam da ordem da casa, s√£o essenciais para praticamente qualquer imagem futurista. De fato, um clima auto-regul√°vel, luzes ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Como construir uma casa inteligente e n√£o enlouquecer</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/bary_io/blog/502056/"><img src="https://habrastorage.org/webt/io/mx/xk/iomxxk5qmmqlguhptngp9zjlptu.jpeg" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
M√≥veis inteligentes, que cuidam da ordem da casa, s√£o essenciais para praticamente qualquer imagem futurista. De fato, um clima auto-regul√°vel, luzes autom√°ticas para ligar e desligar e controle por voz de eletrodom√©sticos - tudo isso pode ser configurado agora. Mas ser√° necess√°rio um pouco de experi√™ncia, conhecimentos b√°sicos no campo da tecnologia e, √†s vezes, programa√ß√£o, al√©m de todo um mar de fantasia. No meu caso, eu fiz isso apenas fantasia √© suficiente, mas as primeiras coisas primeiro ...</font></font><br>
<a name="habracut"></a><br>
<img src="https://habrastorage.org/webt/bq/rp/k5/bqrpk5eo6zggo-delsghlgs7y1o.jpeg" width="300" height="200" align="right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fiquei interessado na ideia de uma ‚Äúcasa inteligente‚Äù cerca de cinco anos atr√°s. No come√ßo eu criei o sistema mais simples. Ela controlava a luz no corredor e no banheiro pelo sensor de movimento, o cap√¥ pelo sensor de umidade e tamb√©m pela esta√ß√£o meteorol√≥gica - naquela √©poca todos estavam loucos por eles. Toda caixa de bricolage que se preze tinha que fazer uma esta√ß√£o meteorol√≥gica. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Antes de tudo, eu equipava o apartamento com um rel√© controlado para acender automaticamente a luz no corredor e no banheiro. Era assim: um sensor estava no corredor, o segundo no banheiro.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se algu√©m estava entrando no banheiro, o sensor do corredor detectou seu movimento e imediatamente acendeu a luz no corredor e no banheiro. Ao mesmo tempo, se ningu√©m entra no banheiro, isso j√° foi corrigido pelo sensor localizado dentro do banheiro. Ap√≥s 15 segundos, a luz apagou-se. Se uma pessoa entra no banheiro, a luz no corredor apaga-se ap√≥s um minuto.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tamb√©m pensei nesses casos se algu√©m estivesse pensando demais enquanto estava sentado em um "amigo branco" no banheiro (eu tinha um banheiro combinado). Para isso, a luz no banheiro foi dividida em dois grupos. Um desligado 3 minutos depois que o sensor no banheiro parou de detectar movimentos, o outro ap√≥s 5 minutos. Portanto, por mais de cinco minutos para ficar im√≥vel no banheiro, a luz n√£o funcionou. Muito disciplinador. No entanto, voc√™ sempre pode mexer a m√£o e continuar pensando no essencial. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um sensor de umidade tamb√©m funcionava no banheiro, que acionava automaticamente o exaustor se a umidade excedesse 50%. Assim que a sala foi ventilada com 45% de umidade, o cap√¥ foi desligado.&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A ger√™ncia passou - ou melhor, tentou passar - pela plataforma Arduino.&nbsp; </font></font><br>
<br>
<img src="https://habrastorage.org/webt/a8/lo/0v/a8lo0valnq03awxxkgr-j2bvnxa.jpeg" width="265" height="222"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Foto tirada </font></font></i><font style="vertical-align: inherit;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><i><font style="vertical-align: inherit;">do</font></i></a><i><font style="vertical-align: inherit;"> site </font></i></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">do fabricante</font></font></i></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quase imediatamente, ficou claro que essa plataforma n√£o era inteiramente para criar uma casa inteligente. A principal desvantagem de trabalhar com o Arduino era que a plataforma funcionava sem uma rede e, sem ela, nenhum ecossistema verdadeiramente unificado poderia ser obtido. Claro, eu poderia refazer o Arduino e adicionar suporte √† rede, mas por qu√™? Eu escolhi um caminho mais simples e mudei essa plataforma para outra.&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tendo tocado o suficiente com o Arduino, reconectei a casa ao quadro ESP-8266. Na verdade, esse √© o mesmo Arduino, mas com o Wi-Fi + √© mais compacto. Este m√≥dulo ainda √© popular entre os fabricantes de gadgets para casas inteligentes.&nbsp; </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ui/kh/ql/uikhqljobo7gz8pz2tpcfcqhbvm.jpeg" width="265" height="222"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Foto tirada da </font></font></i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Internet</font></font></i></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Paralelamente, tentei tornar a casa inteligente ainda mais inteligente. Por exemplo, resolva o problema de piso radiante 24 horas por dia ou de um ar condicionado sempre ligado. Para isso, comprei termostatos chineses Beok WiFi. Eles permitiram desligar o aquecimento do piso remotamente, mas tiveram que faz√™-lo atrav√©s de um aplicativo especial no telefone.&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Resolvi o problema do controle remoto do ar condicionado usando o emulador de sinal infravermelho Broadlink RM Pro. Nada complicado: voc√™ grava um sinal do painel de controle do ar-condicionado no emulador (pode haver qualquer t√©cnica controlada pelo controle remoto) e, no telefone, pressiona um bot√£o no aplicativo e o emulador reproduz o sinal gravado anteriormente. No caso do ar condicionado, tive a oportunidade de lig√°-lo e deslig√°-lo, definir o modo de opera√ß√£o e definir outros par√¢metros remotamente.&nbsp;&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tamb√©m instalou switches Livolo. Com a ajuda deles, eu tamb√©m pude ligar e desligar as luzes pelo ar.&nbsp; </font></font><br>
<br>
<img src="https://habrastorage.org/webt/to/bz/s6/tobzs6u41nh4d_b_eq7tovpop8y.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das desvantagens: para controle, tive que instalar um aplicativo separado novamente e n√£o houve retorno, ou seja, n√£o consegui ver que a luz estava acesa se algu√©m a ligasse ou desligasse manualmente usando um interruptor convencional.&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
V√°rios rel√©s WiFi controlados, como Sonoff ou Tuya e at√© o caro Danalock para trancar o apartamento, que tamb√©m exigia uma aplica√ß√£o separada, tamb√©m apareceram na casa. Comprei quase todas essas coisinhas (com exce√ß√£o da Danalock) no site chin√™s Aliexpress, onde elas custam um centavo e me permitiram experimentar sem investimentos s√©rios.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Uma das primeiras compras relativamente s√©rias foi o respirador Tion. </font><font style="vertical-align: inherit;">Com o controle autom√°tico de CO2, ele lidava mais ou menos, mas a temperatura do aquecimento do ar no inverno precisava constantemente ser ajustada manualmente. </font><font style="vertical-align: inherit;">E, novamente - para gerenciar, era necess√°rio instalar um aplicativo separado.&nbsp;</font></font><br>
<br>
<img src="https://habrastorage.org/webt/8w/pn/pd/8wpnpdu6oip9ck-a_qn8z6bv8i4.jpeg" width="265" height="222"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A foto foi tirada do site </font></font></i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">do fabricante.</font></font></i></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Todos os sensores e controladores que tentei na √©poca, nem me lembro. </font><font style="vertical-align: inherit;">Meu smartphone estava entupido de aplicativos para gerenci√°-los. </font><font style="vertical-align: inherit;">Era um zool√≥gico inteiro, que constantemente precisava ser seguido. </font><font style="vertical-align: inherit;">Tentei combinar o gerenciamento desses aplicativos atrav√©s de todos os tipos de agregadores, como HomeBridge / MajorDomo, etc. </font><font style="vertical-align: inherit;">Mas todos mostraram suas defici√™ncias significativas:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">interface hostil e, √†s vezes, apenas uma interface terr√≠vel</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">falta de suporte para todos os aplicativos usados</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">conex√£o complexa</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A busca por um aplicativo para gerenciamento centralizado de um volume t√£o grande de sensores, controladores e outros sistemas de controle n√£o levou ao sucesso. Depois, tentei lembrar de forma independente um dos dispositivos "inteligentes" - o pr√≥prio respirador Tion. Escrevi um script para controlar automaticamente a temperatura do aquecimento, dependendo da temperatura ambiente. O fato √© que o sistema de ventila√ß√£o n√£o teve um ajuste autom√°tico da temperatura do aquecimento do ar. Verificou-se que a sala estava super quente ou super fria. N√£o havia como alcan√ßar um meio termo. Aqui, com a ajuda de um roteiro escrito e um respiro, esse problema foi resolvido.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O sucesso com um script para o respiro me levou a criar meu pr√≥prio aplicativo para gerenciar uma casa inteligente. O objetivo principal era criar um programa com integra√ß√£o conveniente de dispositivos inteligentes, condi√ß√µes de automa√ß√£o em v√°rios n√≠veis e a capacidade de gerenciar todos os dispositivos em casa.&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por cerca de um ano, eu pr√≥prio participei do desenvolvimento de aplicativos back-end e front-end.&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O lado do servidor est√° escrito no NodeJS. A escolha a favor do NodeJS foi feita devido √† comunidade desenvolvida, na qual existem protocolos implementados para quase todos os dispositivos no mercado. A parte do cliente √© escrita em Angular (Ionic) e √© executada no Android / iOS. Em geral, a arquitetura cl√°ssica cliente-servidor. </font></font><br>
<br>
<i><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Em uma nota:</font></font></strong></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No processo de trabalho no aplicativo, obtive uma vis√£o t√©cnica sobre o uso de impurezas ao escrever drivers de dispositivo. </font><font style="vertical-align: inherit;">Eu n√£o sei, talvez para alguns seja elementar, mas realmente ficou mais f√°cil para mim respirar. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Reescrevi os drivers de dispositivo v√°rias vezes at√© chegar a algo assim:</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C√≥digo de exemplo de um dos dispositivos</font></font></b>
                        <div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-keyword">import</span> {XiaomiSubdeviceV2} <span class="hljs-keyword">from</span> <span class="hljs-string">'../xiaomi.subdevice.v2'</span>;
<span class="hljs-keyword">import</span> {load_power} <span class="hljs-keyword">from</span> <span class="hljs-string">'../capabilities/load_power'</span>;
<span class="hljs-keyword">import</span> {power_plug} <span class="hljs-keyword">from</span> <span class="hljs-string">'../capabilities/power_plug'</span>;
<span class="hljs-keyword">import</span> {PowerPurpose} <span class="hljs-keyword">from</span> <span class="hljs-string">'../../base/PowerPurpose'</span>;
<span class="hljs-keyword">import</span> {Relay} <span class="hljs-keyword">from</span> <span class="hljs-string">'../../base/types/Relay'</span>;
<span class="hljs-keyword">import</span> {HomeKitAccessory} <span class="hljs-keyword">from</span> <span class="hljs-string">'../../hap/HomeKitAccessory'</span>;
<span class="hljs-keyword">import</span> {Lightbulb2Accessory} <span class="hljs-keyword">from</span> <span class="hljs-string">'../../hap/Lightbulb2Accessory'</span>;
<span class="hljs-keyword">import</span> {Yandex} <span class="hljs-keyword">from</span> <span class="hljs-string">'../../yandex/Yandex'</span>;
<span class="hljs-keyword">import</span> {YandexLightOrSwitch} <span class="hljs-keyword">from</span> <span class="hljs-string">'../../yandex/YandexLightOrSwitch'</span>;<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LumiPlug</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">XiaomiSubdeviceV2</span>.<span class="hljs-title">with</span>(<span class="hljs-title">Relay</span>, <span class="hljs-title">power_plug</span>, <span class="hljs-title">load_power</span>, <span class="hljs-title">PowerPurpose</span>,
  <span class="hljs-title">HomeKitAccessory</span>, <span class="hljs-title">Lightbulb2Accessory</span>,
  <span class="hljs-title">Yandex</span>, <span class="hljs-title">YandexLightOrSwitch</span>) </span>{<font></font>
<font></font>
  onCreate() {<font></font>
    <span class="hljs-keyword">super</span>.onCreate();
    <span class="hljs-keyword">this</span>.model = <span class="hljs-string">'Mi Smart Plug'</span>;
    <span class="hljs-keyword">this</span>.class_name = <span class="hljs-string">'lumi.plug'</span>;
    <span class="hljs-keyword">this</span>.driver_name = <span class="hljs-string">'Mi Smart Plug'</span>;
    <span class="hljs-keyword">this</span>.driver_type = <span class="hljs-number">3</span>;
    <span class="hljs-keyword">this</span>.parent_class_name = <span class="hljs-string">'lumi.gateway'</span>;<font></font>
  }<font></font>
<font></font>
  getIcon() {<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-string">'socket'</span>;<font></font>
  }<font></font>
}<font></font>
</code></pre><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A conclus√£o √© que, apesar da abund√¢ncia de dispositivos diferentes, todos fazem aproximadamente a mesma coisa e fornecem aproximadamente a mesma informa√ß√£o. </font><font style="vertical-align: inherit;">Portanto, todas as capacidades dos dispositivos foram colocadas em impurezas separadas, das quais o driver final consiste finalmente. </font><font style="vertical-align: inherit;">Por exemplo, o aplicativo suporta muitos dispositivos que possuem a fun√ß√£o liga / desliga. </font><font style="vertical-align: inherit;">√â fabricado em uma impureza separada e √© usado de forma id√™ntica para todos os dispositivos. </font><font style="vertical-align: inherit;">Elementar, Watson!</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em que isso resultou: qualquer driver de um novo dispositivo √© gravado de maneira r√°pida e f√°cil, porque tudo √© padronizado e n√£o h√° necessidade de se preocupar com o armazenamento adicional das informa√ß√µes recebidas. Para protocolos completamente novos (que eu ainda n√£o tinha), tamb√©m s√£o escritas impurezas baseadas nos j√° existentes. Eles j√° recebem informa√ß√µes do dispositivo e as transmitem mais adiante na cadeia. Essa abordagem nos permitiu reduzir a quantidade de c√≥digo em dezenas de vezes (inicialmente, cada driver era uma c√≥pia de um driver semelhante). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ent√£o, gradualmente, passei por todos os c√≠rculos do inferno para terminar o apoio e a frente. Quando o aplicativo adquiriu uma apar√™ncia bastante toler√°vel, pensei: por que n√£o compartilhar seu desenvolvimento com o p√∫blico? Foram encontrados parceiros para o projeto e assistentes para lembrar o aplicativo.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Antes de tudo, era necess√°rio lembrar o design do aplicativo. Para fazer isso, tive que recorrer a designers profissionais. Ingenuamente, acreditava que levaria de 3 a 4 meses, mas no final o processo se arrastou. Apesar do fato de a estrutura do aplicativo n√£o ter mudado muito em rela√ß√£o √† fonte original, literalmente tudo teve que ser refeito. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Paralelamente, eu - n√£o sozinho, mas com uma equipe de parceiros do projeto - comprei os dispositivos mais populares para uma casa inteligente e adicionei um aplicativo se n√£o suportasse esses gadgets. Em breve, por√©m, ficou claro que n√£o haveria dinheiro suficiente para todos os dispositivos inteligentes, por isso decidimos conversar com os players existentes no mercado e concordar com amostras de teste gratuitas de equipamentos gratuitamente. N√£o fomos negados e a Wirenboard e o MiMiSmart se tornaram os primeiros fornecedores s√©rios.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ent√£o, junto com os caras, criei um novo aplicativo para automa√ß√£o residencial inteligente com a arquitetura cl√°ssica cliente-servidor, que √© colocada em qualquer plataforma e com um design moderno e conveniente. </font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conhe√ßa o BARY *. </font></font></a></b><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">* O nome n√£o veio do nome de Bari Alibasov, mas do personagem do livro de Arthur C. Doyle "O C√£o dos Baskervilles", do mordomo de Barrymore - seu "mordomo inteligente" pessoal.&nbsp;</font></font></i><br>
<br>
<h1><font color="#5153e1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O que aconteceu: descri√ß√£o do aplicativo com belas fotos e gatos</font></font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A tela principal √© um painel conveniente com a capacidade de visualizar e gerenciar par√¢metros de salas automatizadas. Conveniente - esta √© a palavra-chave, porque os pain√©is nos aplicativos que tentei trabalhar comigo precisavam ser configurados manualmente. N√£o √© o passatempo mais agrad√°vel: a </font></font><br>
<br>
<img src="https://habrastorage.org/webt/gz/dl/9k/gzdl9kdk2n5x2fjmlmfwtcnxjas.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
casa pode ser dividida em zonas e zonas - em quartos. Cada sala possui v√°rios par√¢metros: temperatura, umidade, consumo atual de eletricidade, etc., al√©m de a√ß√µes selecionadas. Se clicarmos na sala, entraremos na lista de dispositivos conectados a ela: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/yg/f-/22/ygf-224hyp7be9qrzf2ifh3plv8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui voc√™ pode ligar / desligar o dispositivo e tamb√©m ver seu par√¢metro principal. Ao mudar para um dispositivo, um controle mais detalhado com uma lista completa de fun√ß√µes estar√° dispon√≠vel.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todos os dispositivos est√£o conectados usando as mesmas configura√ß√µes. Para muitos dispositivos, existe um assistente de conex√£o. Nenhuma configura√ß√£o para quem gosta de mais quente! Basicamente, tudo se resume a especificar o endere√ßo IP do dispositivo (para muitos dispositivos, h√° uma pesquisa autom√°tica). Se o endere√ßo IP mudar repentinamente, tudo bem, o servidor o encontrar√° no novo endere√ßo automaticamente.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/q1/2b/ee/q12beeqowea3lu7egovw_8y0yry.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
H√° integra√ß√£o com o Apple HomeKit, que √© usado para controle de voz atrav√©s do Siri. Todos os dispositivos suportados no BARY se integram ao Apple HomeKit com um √∫nico tique (ol√° aos f√£s do HomeBridge). N√£o sem o apoio da Yandex Alice. Ela era mais amig√°vel em termos de comandos de interface. Por exemplo, a Siri n√£o deseja fechar as cortinas com o comando "fechar as cortinas", n√£o pode definir um determinado n√≠vel de volume na TV e assim por diante. O Yandex.Alice n√£o tem esses kookies.&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para a conveni√™ncia de gerenciar terras inteligentes, a automa√ß√£o foi implementada: as regras para a execu√ß√£o de qualquer a√ß√£o no cumprimento de um conjunto de condi√ß√µes. As automa√ß√µes s√£o l√≥gicas, de v√°rios n√≠veis, ou seja, voc√™ pode fazer algo como: "Condi√ß√£o 1 e (Condi√ß√£o 2 ou Condi√ß√£o 3)". Tudo em um belo editor de automa√ß√£o l√≥gica:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/c-/hg/bf/c-hgbflmqnmyu7ld7owltj5g5ao.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pessoalmente, eu j√° tinha cem programas de automa√ß√£o, e qualquer um deles pode ser encontrado rapidamente, porque tudo √© agrupado por sala e dispositivo: os </font></font><br>
<br>
<img src="https://habrastorage.org/webt/xl/xz/n9/xlxzn9o8tycbcxwnvtlw9w014ym.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
scripts tamb√©m s√£o suportados no aplicativo. Um cen√°rio √© um complexo de a√ß√µes que s√£o executadas sob alguma condi√ß√£o da automa√ß√£o. Para minha casa inteligente, uso apenas o conjunto padr√£o: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fy/62/_d/fy62_dwup-9j5zyhvj-b3jd0i-4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
sa√≠ de casa / voltei para casa via Apple TV - ele liga / desliga automaticamente quando todos saem de casa ou algu√©m volta para casa. Voc√™ chega em casa e o locutor com olhos tristes do canal 1 j√° o encontra l√°. Bem, √≥timo? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bem, que tipo de casa inteligente sem a capacidade de assistir a um gato? </font></font><br>
<br>
<img src="https://habrastorage.org/webt/cl/4l/sj/cl4lsjn0wyslby9mavknwlmplts.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voc√™ pode conectar qualquer c√¢mera capaz de fornecer um fluxo RTSP.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Separadamente, quero dizer sobre o bloco de estat√≠sticas. Foi bastante informativo: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/8k/vh/g4/8kvhg4ixvnkduzunurcf-lputrg.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
na legenda, a barra vermelha √© o desvio dos valores m√©dios nos √∫ltimos seis meses, a barra cinza √© a taxa de fluxo dentro dos valores m√©dios. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Na foto, minhas estat√≠sticas para setembro. Estava frio, o aquecimento ainda n√£o havia sido realizado, portanto o aquecimento era constantemente ligado √† ventila√ß√£o. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voc√™ tamb√©m pode ver estat√≠sticas de qualquer dispositivo conectado: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/at/iw/ju/atiwjujpwobznspvzjvidoc8g9m.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A prop√≥sito, a disponibilidade de automa√ß√£o e estat√≠sticas reduziu os custos de eletricidade em mais de duas vezes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todos os eventos que ocorrem s√£o armazenados e podem ser visualizados: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/qh/ss/kw/qhsskw7yzjbhg8vhfpj1bsohmdo.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tamb√©m na p√°gina principal, h√° uma guia especial que coleta todos os principais indicadores selecionados pelo usu√°rio:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/lw/78/kc/lw78kcs-ca7xyq_uljlybmp5uqc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A prop√≥sito, a medi√ß√£o de √°gua √© implementada atrav√©s do sensor de porta / janela da Xiaomi. </font><font style="vertical-align: inherit;">Para fazer isso, em vez de um comutador reed, a sa√≠da do contador de pulsos √© soldada em um contato especial e um contador virtual √© criado em BARY, no qual voc√™ pode especificar esse sensor como a fonte de pulsos.</font></font><br>
<br>
<h1><font color="#5153e1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arquitetura e Seguran√ßa</font></font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A troca cliente-servidor √© criptografada usando a tecnologia AES e o servidor est√° localizado diretamente dentro da sala automatizada. </font><font style="vertical-align: inherit;">Na minha opini√£o, isso protege ao m√°ximo o sistema de interven√ß√µes indesejadas de terceiros. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se n√£o houver um endere√ßo IP branco, voc√™ poder√° conectar a nuvem. </font><font style="vertical-align: inherit;">Ele atuar√° como intermedi√°rio, sem a capacidade de descriptografar comandos, porque </font><font style="vertical-align: inherit;">chaves est√£o no servidor.&nbsp;</font></font><br>
<br>
<h1><font color="#5153e1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Onde conseguir</font></font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O lado do servidor pode ser executado em praticamente qualquer plataforma existente - gra√ßas ao NodeJS. </font><font style="vertical-align: inherit;">Para as plataformas mais comuns, preparamos scripts que far√£o todo o trabalho automaticamente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para Raspberry Pi baseado no Debian Stretch: </font></font><br>
<br>
<code>wget -qO- "http://bary.io/install?target=pi" | sudo bash</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O par√¢metro target √© respons√°vel pela plataforma de destino e pode ter os seguintes valores:</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Raspberry Pi (Extens√£o do Debian)</font></font><br>
</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pi</font></font><br>
</td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Raspberry Pi (Debian Buster)</font></font><br>
</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pi_buster</font></font><br>
</td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tinker Board (Debian Stretch)</font></font><br>
</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tb</font></font><br>
</td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Placa Wiren (Debian Stretch)</font></font><br>
</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wb</font></font><br>
</td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se algu√©m quiser instalar em outra plataforma, escreva para n√≥s e atualizaremos o script. </font><font style="vertical-align: inherit;">Se voc√™ encontrar alguma dificuldade - escreva tamb√©m. </font><font style="vertical-align: inherit;">N√≥s realmente precisamos de feedback.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O aplicativo est√° dispon√≠vel gratuitamente no </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Google Play</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e na </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">App Store</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Talvez at√© o final do ano, o aplicativo seja pago.</font></font><br>
<br>
<h1><font color="#5153e1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclus√£o</font></font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por que escrevi este artigo? </font><font style="vertical-align: inherit;">O objetivo principal √© obter feedback de voc√™. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Atualmente, o projeto est√° se desenvolvendo rapidamente e toda a nossa equipe est√° tentando maximizar a lista de equipamentos suportados dispon√≠veis no mercado. </font><font style="vertical-align: inherit;">Embora eu n√£o esteja sozinho trabalhando no projeto, as tarefas permaneceram as mesmas - criar o aplicativo mais conveniente que leva em conta os desejos e resolve os problemas de todos os envolvidos na instala√ß√£o independente de solu√ß√µes inteligentes para o lar. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Estamos abertos ao di√°logo sobre poss√≠veis integra√ß√µes e prontos para implementar o suporte de equipamentos de empresas interessadas em parceria o mais r√°pido poss√≠vel. </font><font style="vertical-align: inherit;">Voc√™ obt√©m um aplicativo pronto e n√£o perde tempo desenvolvendo software. </font><font style="vertical-align: inherit;">E temos uma ampla gama de dispositivos suportados para todos os gostos e cores. </font><font style="vertical-align: inherit;">Tudo est√° bem.&nbsp;</font></font><br>
<br>
<h1><font color="#5153e1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Planos imediatos e lista de desejos</font></font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Atualmente, minha equipe e eu estamos ativamente envolvidos no desenvolvimento de uma unidade de armazenamento de v√≠deo. Ser√° poss√≠vel colocar o v√≠deo em seu armazenamento dom√©stico ou em um servi√ßo em nuvem. Eu acho que no come√ßo do pr√≥ximo ano ser√° poss√≠vel falar sobre um novo lan√ßamento. Deveria ser poss√≠vel rever as melhores p√©rolas de um gato se divertindo enquanto os donos n√£o est√£o em casa?&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No pr√≥ximo ano, planejamos mais integra√ß√µes com v√°rios servi√ßos: uma lista de compras e tarefas, um calend√°rio etc. Ele apareceu, olhou para uma tela - e tudo estava √† vista. V√°rios projetos chave na m√£o mostraram que essa tarefa √© relevante. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tamb√©m planejamos iniciar a produ√ß√£o de controladores com software pr√©-instalado para solu√ß√µes em lote de uma casa inteligente (atualmente a solu√ß√£o em lote "software + hardware" est√° dispon√≠vel junto com nossos parceiros</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wiren Board</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E suporte para o Google Home e o Amazon Alexa. </font><font style="vertical-align: inherit;">Bem, a expans√£o da gama de equipamentos suportados, √© claro. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A prop√≥sito, quem se importa, voc√™ pode ver a lista de dispositivos suportados (n√£o completos) em </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nosso site</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e, se algo n√£o for encontrado na lista, pergunte no </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">grupo de telegramas</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ficamos muito gratos se voc√™ compartilhar o que falta em aplicativos existentes e quais fun√ß√µes voc√™ adicionaria em nosso lugar. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Obrigado a todos pela leitura. </font><font style="vertical-align: inherit;">Vamos tornar nossas casas mais inteligentes!</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt502046/index.html">Ferrugem de cinco anos</a></li>
<li><a href="../pt502048/index.html">Comportamento complexo sem redes neurais e treinamento. A base filos√≥fica</a></li>
<li><a href="../pt502050/index.html">Algumas notas sobre Cultura</a></li>
<li><a href="../pt502052/index.html">Melhores pr√°ticas do Kubernetes. Crie cont√™ineres pequenos</a></li>
<li><a href="../pt502054/index.html">Rede neural convolucional e sua integra√ß√£o no iOS (parte 2)</a></li>
<li><a href="../pt502066/index.html">Comandos simples do console que todos devem conhecer</a></li>
<li><a href="../pt502068/index.html">110 volts no seu computador</a></li>
<li><a href="../pt502070/index.html">A hist√≥ria da Pentax (artigo mais v√≠deo)</a></li>
<li><a href="../pt502072/index.html">Ancorando a ISS usando JavaScript e b√∫ssola</a></li>
<li><a href="../pt502076/index.html">Rob√¥ de carrinho 2.0. Parte 1. Navega√ß√£o aut√¥noma de um rob√¥ dom√©stico baseado em ROS</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>