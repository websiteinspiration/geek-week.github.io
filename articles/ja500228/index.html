<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🆎 🤐 🐶 ギャツビーがNext.jsをどのように回避したか 🚄 🕯️ 🤰🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="この記事の著者は、私たちが今日出版した翻訳で、アントラーのプログラマーとして働いています。この会社はグローバルなスタートアップジェネレーターです。Antlerでは年に数回デモの日があり、世界中から多くのスタートアップクリエイターや投資家が集まります。COVID-19に関する状況により、アントラーはイ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>ギャツビーがNext.jsをどのように回避したか</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/500228/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">この記事の著者は、私たちが今日出版した翻訳で、アントラーのプログラマーとして働いています。</font><font style="vertical-align: inherit;">この会社はグローバルなスタートアップジェネレーターです。</font><font style="vertical-align: inherit;">Antlerでは年に数回デモの日があり、世界中から多くのスタートアップクリエイターや投資家が集まります。</font><font style="vertical-align: inherit;">COVID-19に関する状況により、アントラーはイベントをオンライン形式に変換する必要がありました。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/webt/hq/r9/an/hqr9anmkfyicv4znlhi2ynk16rm.jpeg"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同社は、何にも邪魔されず、どこにも行き詰まらないように、仮想イベントの訪問者が最も重要なことを確認できるようにしたいと考えていました。</font><font style="vertical-align: inherit;">つまり、一般に公開されたスタートアップのアイデアを、ウェブページのコンテンツとして表現したものです。</font><font style="vertical-align: inherit;">バーチャルデモンストレーションの日は、かなり幅広い聴衆にとって興味深いかもしれません。</font><font style="vertical-align: inherit;">このオーディエンスの一部のメンバーは、このようなものに初めて参加している可能性があります。</font><font style="vertical-align: inherit;">したがって、会社は可能な限り最善の方法ですべてを行い、スタートアップを表すページを高速でロードする必要がありました。</font><font style="vertical-align: inherit;">これは、高性能のプログレッシブWebアプリケーション（PWA、プログレッシブWebアプリ）が役立つ場合にぴったりだと判断しました。</font><font style="vertical-align: inherit;">主な問題は、PWAを開発するための適切なテクノロジーを見つけることでした。</font></font><br>
<a name="habracut"></a><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f54/6f9/1fa/f546f91fa52e40c139cc78fe26b1ad06.gif"></div><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サーバーレンダリングまたは静的サイトジェネレータ？</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まず、コースを少し紹介します。すべてのプロジェクトは、ReactとMaterial-UIライブラリに基づいています。その結果、当初はこのテクノロジスタックから離れないことを決定しました。これにより、高速な開発を確保し、新しいプロジェクトを既存のものと互換性のあるものにすることができます。この新しいプロジェクトと他のReact-applicationsの主な違いは、それらのデータベースがcreate-react-appを使用して作成され、それらがクライアントで完全にレンダリングされたこと（CSR、クライアント側レンダリング）です。これにより、特に、アプリケーションが最初にロードされたときに、プロジェクトのJavaScriptコードのロード、処理、および実行中にユーザーが空白の白い画面を観察する必要がありました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
妥協のないレベルのパフォーマンスが必要でした。したがって、アプリケーションの初期読み込みができるだけ速くなるように、サーバー側レンダリング（SSR、サーバー側レンダリング）または静的サイトジェネレーター（SSG、静的サイトジェネレーター）の使用を検討し始めました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
データはCloud Firestoreに保存され、Algoliaを使用してアクセスします。これにより、データベースフィールドレベルで、制限されたAPIキーを持つデータへのパブリックアクセスを制御できます。これにより、クエリのパフォーマンスも向上します。経験から、Algoliaクエリは通常より高速であり、圧縮されたFirestore JavaScript SDKのサイズは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">86 KB</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">であることがわかっています</font><font style="vertical-align: inherit;">。 Algoliaの場合、これは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.5 Kb</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、お客様に提供するデータをできる限り最新のものにしたいと考えました。これにより、誤って公開される可能性がある誤ったデータを迅速に修正できます。 SSGの標準的な手法では、プロジェクトのアセンブリ中にデータの関連する要求を実装できますが、データベースではデータが非常に頻繁に書き込まれると予想していました。特に、</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ファイアテーブル</font></a><font style="vertical-align: inherit;">インターフェースを使用して管理者が開始したデータの記録について話します。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、およびWebポータルを使用してプロジェクトの創設者の主導で。これは、プロジェクトの競争力のある組み立てにつながります。さらに、データベースの構造上の特徴により、わずかな変更によって新しいプロジェクトのアセンブリ操作が発生する場合があります。このため、CI / CDパイプラインは非常に非効率的です。したがって、ユーザーがページのロードを要求するたびに実行されるように、リポジトリーからデータを受信する要求が必要でした。残念ながら、これは私たちのソリューションが「クリーンな」SSGプロジェクトの例ではないことを意味しました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初は、Gatsbyに基づいて作成されたランディングページを既に使用しており、そのうちの1つでMaterial-UIライブラリがすでに使用されているため、アプリケーションはGatsbyに基づいて作成されました。</font><font style="vertical-align: inherit;">プロジェクトの最初のバージョンは、データのロード中に「スケルトン」を表示するページを形成しました。</font><font style="vertical-align: inherit;">同時に、最初のContentful Paint（FCP）は1秒の領域にありました。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d75/578/718/d7557871834d0d244f8501327d68810d.gif"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ページの「スケルトン」をダウンロードし、その後にデータをロードする</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
このソリューションは興味深いものでしたが、ページの出力用のデータがクライアントの主導でダウンロードされたため、欠点がありました。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ページのコンテンツを表示するには、ユーザーはこのページ自体のダウンロードと、そこに表示されるデータ（Algoliaへの4つのリクエストで取得）を待つ必要があります。</font></font></li>
<li>    JS-    .   ,  React   «»      .         DOM.</li>
<li>         .  ,  ,    .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その結果、長い週末の間、Next.jsを使用して作成されたプロジェクトのSSRバージョンを試すことにしました。幸いなことに、Material-UIのドキュメントにはNext.jsのサンプルプロジェクトがありました。したがって、このフレームワークをすべてゼロから学ぶ必要はありませんでした。チュートリアルとドキュメントの一部を調べなければなりませんでした。アプリケーションをサーバーにレンダリングされるプロジェクトに変換しました。ユーザーがページの読み込みをリクエストすると、サーバーはページを埋めるために必要なデータのリクエストを実行しました。この手順により、上記の3つの問題すべてを解決することができました。 2つのアプリケーションオプションのテスト結果を次に示します。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b60/0da/cda/b600dacda702f25e97808ed9f762ff8c.jpg"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Google PageSpeed Insights</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用してアプリケーションを調査した結果</font><font style="vertical-align: inherit;">。左側はGatsby（SSG）、右側はNext.js（SSR）（</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">元の画像</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）です</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
。プロジェクトのNext.jsバージョンのFCPは、GatsbyベースのバージョンのFCPの約3倍でした。ギャツビーバージョンのプロジェクトの速度インデックスは3.3秒でしたが、Next.jsバージョンは6.2秒でした。最初のバイト（TTFB、最初のバイトまでの時間）までの時間は、Next.jsを使用した場合は2.56秒、Gatsbyを使用した場合は10〜20 msでした。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
サイトのNext.jsバージョンが別のサービスにデプロイされたことに注意してください（ここではZEIT NowおよびFirebase Hostingサービスを使用しました-これはTTFBの増加にも影響する可能性があります）。しかし、それにもかかわらず、すべてのページマテリアルがほぼ同時に読み込まれたにもかかわらず、サーバーへのデータアップロード操作の転送により、サイトの表示が遅くなることは明らかでした。実際のところ、プロジェクトのNext.jsバージョンでは、しばらくの間、ユーザーには空白の白いページしか表示されません。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6e0/8a2/ab3/6e08a2ab3bcb4c06471cc92545848d8a.gif"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アプリケーションの2つのバージョンのロードを示す画面取り。</font><font style="vertical-align: inherit;">同時にダウンロードが完了しませんでした。</font><font style="vertical-align: inherit;">レコードは、Enterキーを押すとすぐに同期されます</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
これにより、Web開発の分野からの重要な教訓が得られます。ユーザーに視覚的なフィードバックを提供する必要があります。</font><font style="vertical-align: inherit;">ある</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">研究に</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">よると、骨格スクリーンを使用するアプリケーションの方がロードが速いようです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに、この結果は、過去数年間にWeb開発に関する記事を読んだときに感じた気分とは一致しません。</font><font style="vertical-align: inherit;">つまり、クライアントのリソースの使用に問題はなく、SSRはパフォーマンスの問題を包括的に解決するものではないということです。</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">静的サイト生成パフォーマンス：GatsbyとNext.jsの比較</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
検討中の2つのフレームワークであるGatsbyとNext.jsはそれぞれ、静的サイトとサーバーレンダリングを生成する機能で知られています</font><font style="vertical-align: inherit;">が、SSGのサポート</font><font style="vertical-align: inherit;">は</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Next.js 9.3</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">で改善され</font><font style="vertical-align: inherit;">、</font><font style="vertical-align: inherit;">Gatsbyと競合しています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この記事の執筆時点では、静的サイトを生成するNext.jsの機能はまだ非常に新鮮でした。彼女は1か月強でした。彼女はまだプロジェクトの最初のページで報告されています。現在、GatsbyとNext.jsのSSG機能の比較はあまりありません（あるいは、そのような比較はまだまったくないかもしれません）。その結果、自分で実験することにしました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gatsbyバージョンのプロジェクトをクライアントにデータがダウンロードされたときの状態に戻し、アプリケーションの両方のバージョンがまったく同じ機能セットを持つようにしました。つまり、Gatsbyプラグインが担当するものを削除する必要がありました。SEO関数、ファビコンの生成、PWAマニフェストです。フレームワークによって作成されたJavaScriptバンドルのみを比較するために、外部ソースからダウンロードした画像やその他のコンテンツをプロジェクトに含めませんでした。アプリケーションの両方のバージョンがFirebase Hostingプラットフォームにデプロイされました。参考までに、アプリケーションの2つのバージョンは、Gatsby 2.20.9とNext.js 9.3.4に基づいて作成されました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コンピューターでLighthouseをバージョンごとに6回実行しました。結果は、ギャツビーにわずかな利点を示しました。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/82a/522/059/82a522059afba13a70e62df76144b6e6.jpg"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">各フレームワークの6つのLighthouseの起動後に取得された平均値（</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">元の画像</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
全体的なパフォーマンス評価の観点から、Next.jsバージョンは、Gatsbyバージョンよりもわずかに遅れていました。 FCPと速度インデックスについても同様です。アプリケーションのNext.jsバージョンの次の潜在的な最初の入力遅延は、Gatsbyバージョンの場合よりもわずかに高くなります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
何が起こっているのかをよりよく理解するために、Chromeデベロッパーツールの[ネットワーク]タブに移動しました。結局のところ、プロジェクトのNext.jsバージョンでは、JavaScriptコードが分割されるフラグメントの数は、Gatsbyバージョン（マニフェストファイルを除く）よりも3つ多くなっていますが、圧縮コードは20 KB小さくなっています。これらのファイルをダウンロードするために必要な追加の要求は、パフォーマンスを低下させるほどの小さなバンドルの利点を上回ることができますか？</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/27b/d84/d9a/27bd84d9aad10ae1f3421a0f829c3fa2.jpg"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プロジェクトのGatsbyバージョンでは、379 KBのデータをダウンロードするために7つのリクエストが実行されます。プロジェクトのNext.jsバージョン-359 KBのデータ（</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">元の画像</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">をダウンロードするための12リクエスト</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
JavaScriptのパフォーマンスを分析すると、開発者ツールは、プロジェクトのNext.jsバージョンが最初のレンダリングに追加の300ミリ秒を必要とすると言い、このバージョンでは、スクリプトの評価タスクにより多くの時間を費やしています。開発者のツールでは、このタスクは「長いタスク」としてマークされていました。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/24b/1be/11c/24b1be11c62fc6a1561a413555e53c0f.jpg"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chrome開発者ツールの[パフォーマンス]タブを使用したさまざまなプロジェクトオプションのパフォーマンスの分析（</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">元の画像</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
プロジェクトコードを比較して、パフォーマンスに影響を与える可能性のある実装の違いがないか調べました。 TypeScriptタイプの欠落に関連する不要なコードと修正を削除することを除いて、唯一の違いは、個々の部分に移動するときのページのスムーズなスクロールの実装でした。この機能は以前にファイルによって導入され</font></font><code>gatsby-browser.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">動的にインポートされたコンポーネント</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に移動されました</font><font style="vertical-align: inherit;">。その結果、このコードはブラウザでのみ実行されます。 （</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> smooth-scroll</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> npmパッケージを使用しましたが</font><font style="vertical-align: inherit;">、それをインポートすると、オブジェクトが必要になります</font></font><code>window</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。）この問題が原因である可能性がありますが、Next.jsでの処理方法がわかりません。</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ギャツビーは開発者の観点からより便利です</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
結局、私はギャツビー版のプロジェクトを選ぶことにしました。さらに、ここでは、Next.js SSGメカニズムと比較して、Gatsbyが示した非常に小さなパフォーマンス上の利点を考慮していません（0.6秒の利点に真剣に取り組みませんか？）。実際のところ、プロジェクトのGatsbyバージョンでは多くのPWA機能がすでに実装されており、アプリケーションのNext.jsバージョンでそれらを再度実装する意味がわかりませんでした。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プロジェクトの最初のGatsbyバージョンを作成していたとき、便利なPWA機能をプロジェクトにすばやく追加することができました。たとえば、SEOに必要な独自のメタタグを各ページに追加するに</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、マニュアル</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">読む</font></a><font style="vertical-align: inherit;">だけで済み</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ます</font></a><font style="vertical-align: inherit;">。プロジェクトにPWAマニフェストを装備するには、適切な</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">プラグイン</font></a><font style="vertical-align: inherit;">を使用するだけで済みました</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。利用可能なすべてのプラットフォームをサポートするファビコンをプロジェクトに装備するために（そして、この場合でも</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ひどい混乱があります</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）、ファビコンのサポートはマニフェストを担当するプラグインの一部であるため、何もする必要はありませんでした。とても快適です！</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アプリケーションのNext.jsバージョンに同じ機能を実装するには、さらに多くの作業が必要になります。トレーニングマニュアル、あらゆる種類の「ベストプラクティス」を探す必要があります。とにかく、私が成功するという事実は私に何の利点も与えません。結局のところ、それでも、プロジェクトのNext.jsバージョンは、Gatsbyバージョンと比べて高いパフォーマンスに違いはありません。さらに、これが、プロジェクトのGatsbyバージョンの対応する機能を無効にして、Next.jsバージョンと比較することにした理由です。 Next.jsのドキュメントは、Gatsbyのドキュメントよりも簡潔です（たぶん、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Next.jsは</font></font></a><font style="vertical-align: inherit;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">Gatsby</font></a><font style="vertical-align: inherit;">よりも小さい</font><font style="vertical-align: inherit;">というのが事実です）</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">私はゲーム化されたNext.jsチュートリアルが本当に好きです </font><font style="vertical-align: inherit;">しかし、一見すると巨大に見えますが、より広範なGatsbyのドキュメントは、PWAの実際の開発にとってより価値があります。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/010/138/800/0101388008c84ce2dda5f6f8f522cf6d.jpg"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gatsbyドキュメンテーション</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
確かに、私はNext.jsの強みについて黙っていることはできません。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">チュートリアルとNext.jsの簡潔なドキュメントのおかげで、このフレームワークはGatsbyよりも速く学習できるように感じられます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Next.jsで使用されるデータ読み込みシステムは、非同期関数とFetch APIに基づいています。</font><font style="vertical-align: inherit;">その結果、Next.jsを開発するとき、開発者はフレームワークの機能を最大限に活用するためにGraphQLを学ぶ必要があると感じていません。</font></font></li>
<li> Next.js    TypeScript,      Gatsby        ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">   </a> (    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a>).     Next.js      ,     ,        ,        .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Next.jsがSSGサポートを改善したという事実のおかげで、このフレームワークは、個々のページのレベルで、それを使用する方法を選択できる強力なツールになりました。</font><font style="vertical-align: inherit;">SSR、SSG、CSRのいずれかです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私は完全に静的な形で、このアプリケーションを生成することができれば、私は、標準Algolia JS-APIを使用することができますし、データをロードするためのコードを保つことができるので、実際には、その後、Next.jsは、より良い私に合うか</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、同じファイルに</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ようおよびコンポーネントコード。</font><font style="vertical-align: inherit;">AlgoliaにはGraphQL APIが組み込まれておらず、Algolia用のGatsbyプラグインがないため、このようなメカニズムをGatsbyに実装するには、このコード</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を新しいファイルに</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">追加する必要があり</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ます</font></a><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">そして、これはページを説明する直感的な宣言的な方法に反します。</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プロジェクトのパフォーマンスを向上させる追加の方法について</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
フレームワークを選択する問題を解決した後、フレームワークに関連しないプロジェクトのパフォーマンスを向上させる追加の方法があることに注意してください。</font><font style="vertical-align: inherit;">これらの改善により、Lighthouseプロジェクトの評価が100になる可能性があります。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">で</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">月</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Algoliaの</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">メーリングリスト、</font></a><font style="vertical-align: inherit;">それがヒントを追加することが推奨された</font></font><code>preconnect</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">更なる増加にクエリ実行のスピードを。</font><font style="vertical-align: inherit;">（誠に残念ながら、間違ったコードフラグメントがニュースレターに記載されてい</font><font style="vertical-align: inherit;">ます。正​​しいコード</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は次の</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">とおりです。）</font></font></li>
<li>    .   JS-  CSS-,  webpack- Gatsby.   Gatsby  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> </a>   .  ,       ,   Netlify  Amazon S3. ,  Firebase Hosting,  ,    .</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アプリケーションでは、スタートアップクリエイターによってアップロードされたJPEGおよびPNG画像を使用します。</font><font style="vertical-align: inherit;">圧縮や最適化は行いません。</font><font style="vertical-align: inherit;">アプリケーションのこの側面を改善することは非常に困難であり、このプロジェクトの範囲を超えています。</font><font style="vertical-align: inherit;">さらに、これらのすべての画像がWebP形式に変換されれば、それは素晴らしいことです。</font><font style="vertical-align: inherit;">その結果、非常に効率的なグラフィック形式を1つだけ使用して画像を保存する必要があります。</font><font style="vertical-align: inherit;">残念ながら、他の多くのPWA機能と同様に、Safari WebKit開発チームはWebPサポートに依存しています。</font><font style="vertical-align: inherit;">現在、</font><font style="vertical-align: inherit;">この形式を</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サポートしない</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">唯一の主要なブラウザー</font><font style="vertical-align: inherit;">です。</font></font></li>
</ul><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">概要</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここで話していたことを簡単に要約すると、次のようになります。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クライアントによるデータの読み込み中のページの「骨格」バージョンの出力により、ユーザーは、サーバーがデータを読み込んでいる間にユーザーが空白のページを見るときよりも高速なWebサイト操作を感じます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サイトのgatsbyバージョンはNext.jsバージョンよりもわずかに高速でした。</font><font style="vertical-align: inherit;">ただし、Gatsbyプラグインシステムと高品質のプロジェクトドキュメントにより、開発者はこのフレームワークの使いやすさが向上します。</font></font></li>
</ul><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">読者の皆様！</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">静的サイトジェネレーターまたはサーバー側レンダリングシステムを使用してプロジェクトを高速化していますか？</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/webt/a_/bs/aa/a_bsaactpbr8fltzymtkhqbw1d4.png"></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja500216/index.html">人類を忘れて：合成時代に入った</a></li>
<li><a href="../ja500218/index.html">疫学モデルCovid-19</a></li>
<li><a href="../ja500220/index.html">Androidでレコードやカセットを直接録音</a></li>
<li><a href="../ja500222/index.html">イギリスの第一次世界大戦複葉機のコードレス電話</a></li>
<li><a href="../ja500224/index.html">DIY電子鼻</a></li>
<li><a href="../ja500232/index.html">Akka.NETの学習：簡単なオンラインゲームのサーバー</a></li>
<li><a href="../ja500234/index.html">Git + JSの個人経費会計プロジェクトを作成した理由</a></li>
<li><a href="../ja500238/index.html">何が気になるのか教えて</a></li>
<li><a href="../ja500244/index.html">アレイの外側</a></li>
<li><a href="../ja500246/index.html">Xbox 360の保護とハッキング（パート3）</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>