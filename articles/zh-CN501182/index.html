<!doctype html>
<html class="no-js" lang="zh-CN">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏿‍✈️ ◻️ 👩🏾‍⚕️ oVirt在2小时内。第2部分。安装管理器和主机 🏏 🚴🏿 📷</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="本文是关于oVirt的系列文章的下一篇，从这里开始。
 
 文章
 

1. 介绍
2. 管理器（ovirt引擎）和管理程序（主机）的安装-我们在这里
3. 其他设置
4. 基本操作
 因此，我们将考虑ovirt-engine和ovirt-host组件的初始安装问题。
 
 您总是可以在文档中更详细...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>oVirt在2小时内。第2部分。安装管理器和主机</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/501182/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">本文是关于oVirt的系列文章的下一篇，从</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这里</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">开始</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文章</font></font></h2><br>
<ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">介绍</font></font></a></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">管理器（ovirt引擎）和管理程序（主机）的安装-我们在这里</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">其他设置</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">基本操作</font></font></a></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
因此，我们将考虑ovirt-engine和ovirt-host组件的初始安装问题。</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
您总是可以在</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文档</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">中更详细地了解安装过程</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内容</font></font></h2><br>
<ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">安装ovirt-engine</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">安装ovirt-host</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">向oVirtN添加节点</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">网络接口设置</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FC设置</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">配置FCoE</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ISO映像存储</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第一个虚拟机</font></font></a></li>
</ol><br>
<a name="setup-engine"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">安装ovirt-engine</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
对于Engine，最低要求是2核/ 4 GiB RAM / 25 GiB存储。推荐-从4核/ 16 GiB RAM / 50 GiB存储。当引擎在托管群集之外的专用物理或虚拟机上运行时，我们使用Standalone Manager选项。对于我们的安装，让我们以虚拟机为例，例如，在单独的ESXi </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">*上</font></font></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。使用部署自动化工具或从先前准备的模板克隆或安装kickstart十分方便。</font></font><br>
<br>
<i><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">*</font></font></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意：对于生产系统，这是个坏主意，因为经理毫无保留地工作，成为瓶颈。在这种情况下，最好考虑选择“自托管引擎”。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
如有必要，</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">文档</font></a><font style="vertical-align: inherit;">中将详细介绍将Standalone转换为Self Hosted的过程。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">特别是，需要为主机提供重装命令，并支持主机引擎。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以最低配置在VM上安装CentOS 7，然后更新并重新启动系统：</font></font><br>
<br>
<pre><code class="bash hljs">$ sudo yum update -y &amp;&amp; sudo reboot</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
对于虚拟机，安装来宾代理很有用：</font></font><br>
<br>
<pre><code class="bash hljs">$ sudo yum install open-vm-tools</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
对于VMware ESXi主机或oVirt：</font></font><br>
<br>
<pre><code class="bash hljs">$ sudo yum install ovirt-guest-agent</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们连接存储库并安装管理器：</font></font><br>
<br>
<pre><code class="bash hljs">$ sudo yum install https://resources.ovirt.org/pub/yum-repo/ovirt-release43.rpm<font></font>
$ sudo yum install ovirt-engine<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
基本设定：</font></font><br>
<br>
<pre><code class="bash hljs">$ sudo engine-setup</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在大多数情况下，选择的默认设置就足够了；要自动使用这些默认设置，可以使用以下项启动配置：</font></font><br>
<br>
<pre><code class="bash hljs">$ sudo engine-setup --accept-defaults</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
现在，我们可以通过</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ovirt.lab.example.com</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">连接到我们的新引擎</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这里仍然是空的，所以让我们继续安装虚拟机管理程序。</font></font><br>
<a name="setup-host"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">安装ovirt-host</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以最低配置在物理主机上安装CentOS 7，然后连接存储库，更新并重新引导系统：</font></font><br>
<br>
<pre><code class="bash hljs">$ sudo yum install https://resources.ovirt.org/pub/yum-repo/ovirt-release43.rpm<font></font>
$ sudo yum update -y &amp;&amp; sudo reboot<font></font>
</code></pre><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意：使用部署自动化工具或kickstart安装进行安装很方便。</font></font></i><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kickstart文件示例</font></font></b>
                        <div class="spoiler_text">! <b>   !</b>  !<br>
<br>
<pre><code class="plaintext hljs"># System authorization information<font></font>
auth --enableshadow --passalgo=sha512<font></font>
# Use CDROM installation media<font></font>
cdrom<font></font>
# Use graphical install<font></font>
graphical<font></font>
# Run the Setup Agent on first boot<font></font>
firstboot --enable<font></font>
ignoredisk --only-use=sda<font></font>
# Keyboard layouts<font></font>
keyboard --vckeymap=us --xlayouts='us','ru' --switch='grp:alt_shift_toggle'<font></font>
# System language<font></font>
lang ru_RU.UTF-8<font></font>
<font></font>
# Network information<font></font>
network  --bootproto=dhcp --device=ens192 --ipv6=auto --activate<font></font>
network  --hostname=kvm01.lab.example.com<font></font>
<font></font>
# Root password 'monteV1DE0'<font></font>
rootpw --iscrypted $6$6oPcf0GW9VdmJe5w$6WBucrUPRdCAP.aBVnUfvaEu9ozkXq9M1TXiwOm41Y58DEerG8b3Ulme2YtxAgNHr6DGIJ02eFgVuEmYsOo7./<font></font>
# User password 'metroP0!is'<font></font>
user --name=mgmt --groups=wheel --iscrypted --password=$6$883g2lyXdkDLbKYR$B3yWx1aQZmYYi.aO10W2Bvw0Jpkl1upzgjhZr6lmITTrGaPupa5iC3kZAOvwDonZ/6ogNJe/59GN5U8Okp.qx.<font></font>
# System services<font></font>
services --enabled="chronyd"<font></font>
# System timezone<font></font>
timezone Europe/Moscow --isUtc<font></font>
# System bootloader configuration<font></font>
bootloader --append=" crashkernel=auto" --location=mbr --boot-drive=sda<font></font>
# Partition clearing information<font></font>
clearpart --all<font></font>
# Disk partitioning information<font></font>
part /boot --fstype xfs --size=1024 --ondisk=sda  --label=boot<font></font>
part pv.01 --size=45056 --grow<font></font>
volgroup HostVG pv.01 --reserved-percent=20<font></font>
logvol swap --vgname=HostVG --name=lv_swap --fstype=swap --recommended<font></font>
logvol none --vgname=HostVG --name=HostPool --thinpool --size=40960 --grow<font></font>
logvol / --vgname=HostVG --name=lv_root --thin --fstype=ext4 --label="root" --poolname=HostPool --fsoptions="defaults,discard" --size=6144 --grow<font></font>
logvol /var --vgname=HostVG --name=lv_var --thin --fstype=ext4 --poolname=HostPool --fsoptions="defaults,discard" --size=16536<font></font>
logvol /var/crash --vgname=HostVG --name=lv_var_crash --thin --fstype=ext4 --poolname=HostPool --fsoptions="defaults,discard" --size=10240<font></font>
logvol /var/log --vgname=HostVG --name=lv_var_log --thin --fstype=ext4 --poolname=HostPool --fsoptions="defaults,discard" --size=8192<font></font>
logvol /var/log/audit --vgname=HostVG --name=lv_var_audit --thin --fstype=ext4 --poolname=HostPool --fsoptions="defaults,discard" --size=2048<font></font>
logvol /home --vgname=HostVG --name=lv_home --thin --fstype=ext4 --poolname=HostPool --fsoptions="defaults,discard" --size=1024<font></font>
logvol /tmp --vgname=HostVG --name=lv_tmp --thin --fstype=ext4 --poolname=HostPool --fsoptions="defaults,discard" --size=1024<font></font>
<font></font>
%packages<font></font>
@^minimal<font></font>
@core<font></font>
chrony<font></font>
kexec-tools<font></font>
<font></font>
%end<font></font>
<font></font>
%addon com_redhat_kdump --enable --reserve-mb='auto'<font></font>
<font></font>
%end<font></font>
<font></font>
%anaconda<font></font>
pwpolicy root --minlen=6 --minquality=1 --notstrict --nochanges --notempty<font></font>
pwpolicy user --minlen=6 --minquality=1 --notstrict --nochanges --emptyok<font></font>
pwpolicy luks --minlen=6 --minquality=1 --notstrict --nochanges --notempty<font></font>
%end<font></font>
# Reboot when the install is finished.<font></font>
reboot --eject<font></font>
</code></pre><br>
  , .,  <a href="" rel="nofollow">ftp.example.com/pub/labkvm.cfg</a>.           'Install CentOS 7',     ( Tab)    ( ,  )  <br>
<br>
<pre><code class="plaintext hljs">' inst.ks=ftp://ftp.example.com/pub/labkvm.cfg'</code></pre>.<br>
      /dev/sda,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"> </a> (      lsblk).     kvm01.lab.example.com (     hostnamectl set-hostname kvm03.lab.example.com),  IP  — ,   — ,    .<br>
<br>
  root: monteV1DE0,   mgmt: metroP0!is.<br>
<b>!    !  !</b><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在所有主机上重复（或并行执行）。</font><font style="vertical-align: inherit;">从打开“空”服务器到完成状态（考虑2次长时间下载），大约需要20分钟。</font></font><br>
<a name="add-host"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">向oVirt添加节点</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
这非常简单：</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
计算→主机→新建→... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在向导中，需要字段名称（显示名称，例如kvm03），主机名（FQDN，例如kvm03.lab.example.com）和身份验证部分</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-root用户（总是）</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -密码或SSH公钥。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
单击</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">确定</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">按钮后，</font><font style="vertical-align: inherit;">您将收到消息</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“您尚未为此主机配置电源管理。你确定你要继续吗？ ”</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。这是正常现象-主机成功连接后，我们将在以后考虑电源管理。但是，如果安装了主机的计算机不支持管理（IPMI，iLO，DRAC等），则建议将其关闭：“计算”→“群集”→“默认”→“编辑”→“隔离防护”→“启用隔离”，请取消选中它。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如果主机上未连接oVirt储存库，则安装将失败，但可以-您需要添加它，然后单击“安装”-&gt;“重新安装”。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
主机连接不超过5-10分钟。</font></font><br>
<a name="host-nic"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">网络接口设置</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在构建容错系统时，网络连接也应提供冗余连接，该连接可在“计算”→“主机”→“ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">主机”</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> →“网络接口-设置主机网络</font><font style="vertical-align: inherit;">”选项卡上完成</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
根据您的网络设备的功能和体系结构方法，可以选择。最好连接到机架式交换机的堆栈，这样一来，当发生故障时，网络可用性就不会中断。考虑聚合的LACP通道的示例。要配置聚合通道，请使用鼠标“拿起”第二个未使用的适配器，并将其“拿起”到第一个。将打开“ </font><b><font style="vertical-align: inherit;">创建新债券”</font></b><font style="vertical-align: inherit;">窗口。</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">其中默认选择了LACP（模式4，动态链接聚合，802.3ad）。</font><font style="vertical-align: inherit;">在交换机端，将执行正常的LACP组配置。</font><font style="vertical-align: inherit;">如果无法构建交换机堆栈，则可以使用主动备份模式（模式1）。</font><font style="vertical-align: inherit;">我们将在下一篇文章中考虑VLAN设置，并在《</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规划和前提条件指南》</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文档中对网络设置的建议进行更详细的讨论</font><font style="vertical-align: inherit;">。</font></font><br>
<a name="host-fc"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FC设置</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
开箱即用地支持光纤通道（FC），其使用非常简单。</font><font style="vertical-align: inherit;">我们不会配置存储网络，包括作为oVirt配置一部分的存储系统配置和光纤交换机分区。</font></font><br>
<a name="ovirt-fcoe"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">配置FCoE</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我认为FCoE并未在存储网络中得到广泛使用，但经常在服务器上用作“最后一英里”，例如在HPE Virtual Connect中。</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">配置FCoE需要其他简单步骤。</font></font></b>
                        <div class="spoiler_text"><h4>Setup FCoE Engine</h4><br>
   Red Hat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">B.3. How to Set Up Red Hat Virtualization Manager to Use FCoE<br>
On the Manager</a>,         :<br>
<br>
<pre><code class="bash hljs">
$ sudo engine-config -s UserDefinedNetworkCustomProperties=<span class="hljs-string">'fcoe=^((enable|dcb|auto_vlan)=(yes|no),?)*$'</span><font></font>
$ sudo systemctl restart ovirt-engine.service<font></font>
</code></pre><br>
<h4>Setup Node FCoE</h4><br>
 oVirt-Host'   <br>
<br>
<pre><code class="bash hljs">$ sudo yum install vdsm-hook-fcoe</code></pre><br>
   FCoE,   Red Hat: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">25.5. Configuring a Fibre Channel over Ethernet Interface</a>.<br>
<br>
 Broadcom CNA   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">User Guide FCoE Configuration for Broadcom-Based Adapters</a>.<br>
<br>
,    (   minimal):<br>
<br>
<pre><code class="bash hljs">$ sudo yum install fcoe-utils lldpad</code></pre><br>
   ( ens3f2  ens3f3   CNA,    ):<br>
<br>
<pre><code class="bash hljs">$ sudo cp /etc/fcoe/cfg-ethx /etc/fcoe/cfg-ens3f2<font></font>
$ sudo cp /etc/fcoe/cfg-ethx /etc/fcoe/cfg-ens3f3<font></font>
$ sudo vim /etc/fcoe/cfg-ens3f2<font></font>
$ sudo vim /etc/fcoe/cfg-ens3f3<font></font>
</code></pre><br>
<b></b>:      DCB/DCBX,  DCB_REQUIRED     no.<br>
<br>
DCB_REQUIRED=«yes» → <b>#</b>DCB_REQUIRED=«yes»<br>
<br>
  ,  adminStatus    ,  ..   FCoE:<br>
<br>
<pre><code class="bash hljs">$ sudo lldptool <span class="hljs-built_in">set</span>-lldp -i ens3f0 adminStatus=disabled<font></font>
...<font></font>
$ sudo lldptool <span class="hljs-built_in">set</span>-lldp -i ens3f3 adminStatus=disabled
</code></pre><br>
    ,   LLDP:<br>
<br>
<pre><code class="bash hljs">$ sudo systemctl start lldpad<font></font>
$ sudo systemctl <span class="hljs-built_in">enable</span> lldpad
</code></pre><br>
  ,    DCB/DCBX,  DCB_REQUIRED     <b>no</b>      .<br>
<br>
<pre><code class="bash hljs">$ sudo dcbtool sc ens3f2 dcb on<font></font>
$ sudo dcbtool sc ens3f3 dcb on<font></font>
$ sudo dcbtool sc ens3f2 app:fcoe e:1<font></font>
$ sudo dcbtool sc ens3f3 app:fcoe e:1<font></font>
$ sudo ip link <span class="hljs-built_in">set</span> dev ens3f2 up<font></font>
$ sudo ip link <span class="hljs-built_in">set</span> dev ens3f3 up<font></font>
$ sudo systemctl start fcoe<font></font>
$ sudo systemctl <span class="hljs-built_in">enable</span> fcoe
</code></pre><br>
      :<br>
<br>
<pre><code class="bash hljs">$ sudo vim /etc/sysconfig/network-scripts/ifcfg-ens3f2<font></font>
$ sudo vim /etc/sysconfig/network-scripts/ifcfg-ens3f3<font></font>
</code></pre><br>
<pre><code class="plaintext hljs">ONBOOT=yes</code></pre><br>
  FCoE ,      .<br>
<br>
<pre><code class="bash hljs">$ sudo fcoeadm -i</code></pre><br>
  FCoE     FC.<br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以下是存储系统和网络的配置-分区，SAN主机，创建和显示卷/ LUN，之后可以将存储连接到ovirt-hosts：存储→域→新域。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
域功能我们保留数据，存储类型-光纤通道，主机-任何名称，例如-storNN-volMM。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
当然，您的存储系统允许的连接不仅是路径的保留，而且是平衡。</font><font style="vertical-align: inherit;">许多现代系统都能够沿所有路径均等优化地传输数据（ALUA主动/主动）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
要使所有路径都处于活动状态，您需要配置多路径，以下文章中对此进行了详细介绍。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
配置NFS和iSCSI的方法类似。</font></font><br>
<a name="host-iso"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ISO映像存储</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
要安装操作系统，您将需要它们的安装文件，这些文件通常以ISO映像的形式提供。</font><font style="vertical-align: inherit;">您可以使用内置路径，但是为了在oVirt中处理图像，开发了一种特殊类型的存储-ISO，该存储可以针对NFS服务器。</font><font style="vertical-align: inherit;">添加它：</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
存储→域→新域，</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
域功能→ISO，</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
导出路径-例如mynfs01.example.com:/exports/ovirt-iso（在连接时，该文件夹应该为空，管理者应该能够对其进行写操作），</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
名称-例如mynfs01-iso。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
要存储图像，管理器将创建结构</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
/导出/ ovirt-iso </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ &lt;some UUID&gt; /图像/ 11111111-1111-1111-1111-111111111111 /</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如果您在我们的NFS服务器上已经有ISO映像，可以方便地将它们链接到此文件夹，而不是复制文件以节省空间。</font></font><br>
<a name="1stVM"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第一个虚拟机</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在此阶段，您已经可以创建第一个虚拟机，并在其上安装OS和应用程序软件。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
计算→虚拟机→新建</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
对于新计算机，请指定名称（名称），创建磁盘（实例映像→创建）并连接网络接口（通过选择vNIC配置文件来实例化VM网络接口→从到目前为止的列表中选择唯一的ovirtmgmt）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在客户端，您需要现代的浏览器和</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SPICE客户端</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">才能与控制台进行交互。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
第一台机器成功启动。</font><font style="vertical-align: inherit;">但是，为了使系统更完整地运行，需要进行许多其他设置，我们将在以下文章中继续进行。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN501168/index.html">有序的人会救自己-他们会保存，保存，精疲力尽吗？</a></li>
<li><a href="../zh-CN501170/index.html">使用DOM的最佳方法</a></li>
<li><a href="../zh-CN501172/index.html">我的Mikrosh电脑：继续怀旧的一周</a></li>
<li><a href="../zh-CN501178/index.html">看色情片如何影响工作和学习的生产力</a></li>
<li><a href="../zh-CN501180/index.html">[问题后]您需要有关冠状病毒和“副作用”的FACTS的IT运动吗？</a></li>
<li><a href="../zh-CN501184/index.html">如何配置Apollo以在Android中使用GraphQL</a></li>
<li><a href="../zh-CN501188/index.html">如何使用Sen2Cor处理卫星图像</a></li>
<li><a href="../zh-CN501190/index.html">如何创办初创公司，进入中国市场并获得1500万投资</a></li>
<li><a href="../zh-CN501192/index.html">提升英语软技能的5大技巧</a></li>
<li><a href="../zh-CN501194/index.html">在热粒子之后。威尔逊会议厅</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>