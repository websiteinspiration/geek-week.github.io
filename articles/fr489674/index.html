<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👲🏽 🎤 🤴🏽 Angular: une introduction claire à NGRX 👨🏼‍🎤 ☔️ 🕦</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Le but de cet article est de donner une vue claire et claire de ngrx . Pour ce faire, je vais vous expliquer ce que vous devez savoir et comprendre su...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Angular: une introduction claire à NGRX</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/489674/"><img src="https://habrastorage.org/webt/rz/7h/ee/rz7heen5ey-lo47udm7sn4owfzg.png" alt="image"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le but de cet article est de donner une vue claire et claire de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ngrx</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Pour ce faire, je vais vous expliquer ce que vous devez savoir et comprendre sur ngrx, puis nous le verrons en action avec des exemples de code simples et clairs. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voici une liste de sujets que nous aborderons dans cet article:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Qu'est-ce que ngrx</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Avantages de l'utilisation de ngrx</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Inconvénients de l'utilisation de ngrx</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quand utiliser ngrx</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Actions, boîtes de vitesses, sélecteurs, stockage et effets</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Suite de l'article avec un exemple d'utilisation: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Angulaire: un exemple d'utilisation de NGRX</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;">"</font></a></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Qu'est-ce que NGRX</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
NGRX est un groupe de bibliothèques «inspirées» par le modèle Redux, qui, à son tour, est «inspiré» par le modèle Flux. </font><font style="vertical-align: inherit;">Autrement dit, cela signifie que le modèle Redux est une version simplifiée du modèle Flux, et NGRX est la version angulaire / rxjs du modèle Redux.</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ce que je veux dire par la version "angulaire / rxjs" de redux ... la partie "angulaire" est que ngrx est une bibliothèque à utiliser dans les applications angulaires. </font><font style="vertical-align: inherit;">Une partie des «rxjs» est que l'implémentation ngrx fonctionne autour du flux </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rxjs</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Cela signifie qu'il fonctionne en utilisant des opérateurs observables et divers observables fournis par rxjs.</font></font></blockquote><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'objectif principal de ce schéma est d'assurer l'état prévisible du conteneur sur la base de trois principes de base.</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Examinons les trois principes du modèle Redux et soulignons les avantages les plus importants qu'ils offrent.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La seule source de vérité</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans le cas de l'architecture redux / ngrx, cela signifie que l'état de l'ensemble de votre application est stocké dans l'arborescence d'objets dans le même référentiel.</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans un magasin? </font><font style="vertical-align: inherit;">Nous parlerons des référentiels plus tard, mais pour une compréhension générale, ils sont responsables du maintien de l'état et de l'application des modifications lorsqu'ils en sont informés (lorsque l'action est envoyée, nous en parlerons également plus tard).</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les avantages d'avoir une seule source de vérité sont nombreux, mais pour moi le plus intéressant (car c'est ce qui affectera toute application angulaire) est le suivant:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lorsque vous créez une application angulaire, vous divisez généralement l'état et gérez plusieurs services. </font><font style="vertical-align: inherit;">Au fur et à mesure que votre application se développe, le suivi des modifications de votre état devient de plus en plus difficile et, par conséquent, il devient désordonné, il est difficile de le déboguer et de le maintenir. Le fait d'avoir une seule source de vérité résout ce problème, car l'état n'est traité que dans un seul objet et dans un seul. l'emplacement, donc le débogage ou l'ajout de modifications devient beaucoup plus facile.</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">État en lecture seule</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous ne modifierez jamais directement l'état, au lieu de cela, vous enverrez des actions qui décrivent les actions avec l'objet (il peut s'agir, par exemple, d'obtenir, d'ajouter, de supprimer ou de mettre à jour l'état).</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Soumettre une action? .. Nous parlerons des actions plus tard, mais pour une compréhension générale, ce sont les identifiants de l'opération sur votre application, et ils peuvent être lancés (ou envoyés) pour dire à l'application d'exécuter l'opération que l'action représente.</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En évitant de mettre à jour le statut à partir de différents endroits et en ayant un endroit centralisé pour apporter des modifications qui répond à des actions spécifiques, vous obtenez de nombreux avantages. </font><font style="vertical-align: inherit;">Sans oublier le plus important:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous savez que tout changement d'état se produira en un seul endroit. </font><font style="vertical-align: inherit;">Cela a un impact important sur le débogage et les tests.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous savez que si une certaine action est envoyée, alors l'opération dans l'état est toujours la même. </font><font style="vertical-align: inherit;">Encore une fois, cela affecte directement le débogage et les tests.</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Des modifications sont apportées avec des fonctionnalités simples.</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une opération initiée par l'envoi d'une action sera une simple fonction appelée réducteurs dans le cadre de l'architecture redux. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ces réducteurs (rappelez-vous qu'il s'agit de fonctions simples) reçoivent une action et un état, selon l'action envoyée (généralement avec l'instruction switch), ils effectuent l'opération et renvoient un nouvel objet état. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'état dans l'application redux est inchangé! Par conséquent, lorsqu'un réducteur modifie quelque chose dans un état, il renvoie un nouvel objet d'état. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les avantages de l'utilisation de fonctions pures sont bien connus, tels que le fait qu'elles peuvent être testées immédiatement si vous passez les mêmes arguments que vous obtenez en conséquence.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cette approche nous permet également de passer d'une instance à l'autre de notre état à l'aide des outils de développement Redux / ngrx et de voir ce qui a changé entre les instances et qui l'a changé, entre autres. </font><font style="vertical-align: inherit;">Ainsi, l'utilisation de fonctions pures et le renvoi de nouvelles instances d'état ont également un impact important sur le débogage. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais le principal avantage, à mon avis, est qu'en liant toutes les données d'entrée de nos composants aux propriétés d'état, nous pouvons changer la stratégie de détection des changements à pousser, ce qui augmentera les performances de l'application.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Génial ... Alors, quels sont les avantages d'utiliser NGRX?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons déjà mentionné la plupart d'entre eux lorsque nous avons parlé des principes du modèle redux. </font><font style="vertical-align: inherit;">Mais notons les avantages les plus importants de l'utilisation du modèle redux dans l'application (à mon avis):</font></font><br>
<br>
<ul>
<li>      ,       ,     .</li>
<li> redux      ,  .</li>
<li>   ,         ,   ,  , ngrx  rxjs,      .</li>
<li>        ngrx,           .</li>
</ul><br>
<h2>…  </h2><br>
<ul>
<li> NGRX, ,   .   ,       ,   ,           .         ,        .</li>
<li>     .   ,    -   ,    , ,       , ,   ,  .      () rxjs    .</li>
<li>NGRX          Google,   , ,     Angular   ngrx.   - ,     ,       .</li>
</ul><br>
<h2>   NGRX</h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ainsi, il est généralement admis que ngrx devrait être utilisé dans des projets de moyenne / grande envergure lorsque la gestion de l'État devient difficile à maintenir. Des gens plus fanatiques diront quelque chose comme "si vous avez une fortune, alors vous avez NGRX." </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je suis d'accord qu'il devrait être utilisé dans des projets moyens ou grands lorsque vous avez un état significatif et de nombreux composants qui utilisent cet état, mais vous devez considérer que Angular lui-même fournit de nombreuses solutions de gestion d'état, et si vous avez une forte Équipe de développement angulaire, alors vous n'avez peut-être pas à vous soucier de ngrx.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans le même temps, je crois qu'une équipe de développement Angular solide peut également décider d'inclure ngrx dans la solution, car ils connaissent la pleine puissance du modèle redux, ainsi que la force ajoutée par les opérateurs rxjs, et ils se sentent à l'aise de travailler avec les deux ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous attendiez une réponse simple, pour décider quand utiliser ngrx, vous ne l’obtiendrez pas et ne faites confiance à personne qui vous fournira cette réponse en dehors de votre organisation ou groupe. </font><font style="vertical-align: inherit;">La décision dépend de l'étude des avantages et des inconvénients, de la compréhension de votre équipe et de la prise en compte de leurs opinions.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Actions NGRX, boîtes de vitesses, sélecteurs, stockage et effets</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ce sont les éléments de base du flux ngrx. </font><font style="vertical-align: inherit;">Chacun d'eux prend une partie du processus de démarrage d'une opération pour changer notre état et obtenir des données. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/0p/ms/zd/0pmszdg8q_8lifpdv5uw3j3cahc.jpeg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans l'image, nous voyons le flux ngrx. </font><font style="vertical-align: inherit;">Expliquons-le ...</font></font><br>
<br>
<ol>
<li>        .  ,  ,    ,    <b></b>.<br>
<blockquote>…<br>
<br>
  «»    () .  —  ,   NGRX Action.    Action'    (        GetUserName):<br>
<br>
<b>type</b> ():     , ,   . : '[User] Get User Login''.<br>
<br>
<b>payload</b> ( ):      ,     .       ,   .       .<br>
</blockquote></li>
<li>      , <b>    </b> (    switch)    ,        ,    .<br>
<blockquote><b>...</b><br>
<br>
 —   ,   :    .    ngrx    ,        ,   ,     ,   ,       .<br>
</blockquote></li>
<li>      ,    - ,        . ,    -    HTTP   .<br>
<blockquote><b>...</b><br>
<br>
    ngrx       ,          ngrx.<br>
<br>
Effects ,  -  , ,  ,  ,        ,    .<br>
<br>
   ,       API.<br>
<br>
  ,      ,        (success, error  ..),     ,        ngrx.<br>
</blockquote> <b> ,    (  ),   «-»   </b> ( ,     ).<br>
</li>
<li>     .      ,  <b>ngrx  ,        ,      .</b><br>
<blockquote><b>...</b><br>
<br>
   ,       ,          ,      .<br>
<br>
 NGRX    «»     .  ,         ,      .<br>
<br>
   .           .   «store»      ,     .<br>
<br>
<b> ...</b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un magasin est un objet (une instance de la classe Store ngrx) qui combine les choses que nous avons mentionnées précédemment (actions, réducteurs, sélecteurs). </font><font style="vertical-align: inherit;">Par exemple, lorsqu'une action est envoyée (en utilisant la fonction d'envoi de l'objet de stockage), le stockage est celui qui trouve et exécute le réducteur correspondant. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il est également titulaire de l'état de demande.</font></font><br>
</blockquote></li>
</ol><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Suite de l'article avec des exemples d'utilisation: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Angular: an example of using NGRX</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;">"</font></a></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr489662/index.html">PHP Digest n ° 174 (10-24 février 2020)</a></li>
<li><a href="../fr489664/index.html">NPS, convoyeur, calcul automatique et encore ... coroutines</a></li>
<li><a href="../fr489666/index.html">Surcharge en C ++. Partie II Surcharge de l'opérateur</a></li>
<li><a href="../fr489668/index.html">Limites du processeur et limitation agressive dans Kubernetes</a></li>
<li><a href="../fr489672/index.html">Nous ressuscitons l'hexapode. Deuxième partie</a></li>
<li><a href="../fr489676/index.html">Nous faisons un clone du service de livraison de nourriture en utilisant Nuxt.js, GraphQL, Strapi et Stripe. Partie 1/7</a></li>
<li><a href="../fr489678/index.html">Mémoire indestructible, processus indestructibles</a></li>
<li><a href="../fr489682/index.html">CORB (Cross-Origin Read Blocking) dans les extensions Chrome</a></li>
<li><a href="../fr489684/index.html">C'est la norme - 4: résoudre les problèmes avec les cartes normales</a></li>
<li><a href="../fr489688/index.html">OData + RxJava + Retrofit 2 pour application Android</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>