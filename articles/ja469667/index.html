<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏻‍🚒 🍡 🤴🏼 Linuxの権利（chown、chmod、SUID、GUID、スティッキービット、ACL、umask） 👩🏿‍✈️ 👶 👐🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="みなさん、こんにちは。これは、RedHat RHCSA RHCE 7 RedHat Enterprise Linux 7 EX200およびEX300からの記事の翻訳です。
 
 私自身から：この記事が初心者だけでなく、経験豊富な管理者が知識を体系化するのにも役立つことを願っています。
 
 じゃ、行...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Linuxの権利（chown、chmod、SUID、GUID、スティッキービット、ACL、umask）</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/469667/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">みなさん、こんにちは。</font><font style="vertical-align: inherit;">これは、RedHat RHCSA RHCE 7 RedHat Enterprise Linux 7 EX200およびEX300からの記事の翻訳です。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">私自身から：</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">この記事が初心者だけでなく、経験豊富な管理者が知識を体系化するのにも役立つことを願っています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
じゃ、行こう。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/95b/e9d/a00/95be9da00b36434d2b2445fe1379b5ae.png" alt="画像"><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Linux上のファイルにアクセスするには、権限が使用されます。</font><font style="vertical-align: inherit;">これらの権限は、ファイル、グループ、および別のオブジェクト（つまり、他のすべてのユーザー）の3つのオブジェクトに割り当てられます。</font><font style="vertical-align: inherit;">この記事では、権限を適用する方法を学びます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この記事は基本的な概念の復習から始まり、その後、特別なアクセス許可とアクセス制御リスト（ACL）について説明します。</font><font style="vertical-align: inherit;">この記事の最後では、umaskを使用したデフォルトのアクセス権の設定と、高度なユーザー属性の管理について説明します。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ファイル所有権管理</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アクセス許可について説明する前に、ファイルとディレクトリの所有者の役割を知っておく必要があります。</font><font style="vertical-align: inherit;">ファイルとディレクトリを所有することは、権限を操作するために不可欠です。</font><font style="vertical-align: inherit;">このセクションでは、最初に所有者を確認する方法を学びます。</font><font style="vertical-align: inherit;">次に、ファイルとディレクトリのグループ所有者とユーザーを変更する方法を学びます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ファイルまたはディレクトリの所有者を表示する</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Linuxでは、各ファイルと各ディレクトリに2人の所有者（ユーザーとグループ）があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらの所有者は、ファイルまたはディレクトリの作成時に設定されます。</font><font style="vertical-align: inherit;">ファイルを作成したユーザーがこのファイルの所有者になり、同じユーザーを含むプライマリグループもこのファイルの所有者になります。</font><font style="vertical-align: inherit;">ユーザーとしてのユーザーにファイルまたはディレクトリへのアクセス権があるかどうかを判断するために、シェルはその所有権をチェックします。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これは次の順序で行われます。</font></font></b><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">シェルは、アクセスしたいファイルを所有しているかどうかを確認します。</font><font style="vertical-align: inherit;">この所有者である場合、権限を取得し、シェルはチェックを停止します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ファイルを所有していない場合、シェルは、このファイルに対する権限を持つグループのメンバーであるかどうかを確認します。</font><font style="vertical-align: inherit;">このグループのメンバーである場合は、グループに設定されている権限でファイルにアクセスでき、シェルはチェックを停止します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ユーザーでもグループの所有者でもない場合は、他のユーザー（その他）の権限を取得します。</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
現在の所有者の割り当てを表示するには、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ls -lコマンドを</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用できます</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">このコマンドは、ユーザーと所有者のグループを表示します。</font><font style="vertical-align: inherit;">以下に、/ホームディレクトリ内のディレクトリの所有者設定を示します。</font></font><br>
<br>
<pre><code class="bash hljs">[root@server1 home]<span class="hljs-comment"># ls -l</span><font></font>
total 8<font></font>
drwx------. 3  bob            bob            74     Feb   6   10:13 bob<font></font>
drwx------. 3  caroline       caroline       74     Feb   6   10:13 caroline<font></font>
drwx------. 3  fozia          fozia          74     Feb   6   10:13 fozia<font></font>
drwx------. 3  lara           lara           74     Feb   6   10:13 lara<font></font>
drwx------. 5  lisa           lisa           4096   Feb   6   10:12 lisa<font></font>
drwx------. 14 user           user           4096   Feb   5   10:35 user<font></font>
</code></pre><br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lsコマンド</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
を使用</font><font style="vertical-align: inherit;">すると、このディレクトリ内のファイルの所有者を表示できます。</font><font style="vertical-align: inherit;">ユーザーまたはグループが所有者として指定されているシステム内のすべてのファイルのリストを取得すると便利な場合があります。</font><font style="vertical-align: inherit;">このために</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">findを</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用できます</font><font style="vertical-align: inherit;">。</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">検索-user引数は</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、この目的のために使用することができます。</font><font style="vertical-align: inherit;">たとえば、次のコマンドは、lindaユーザーが所有者として指定されているすべてのファイルを表示します。</font></font><br>
<br>
<pre><code class="bash hljs">find / -user linda</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">find</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">使用</font><font style="vertical-align: inherit;">して、特定のグループがファイルを所有しているファイルを検索</font><font style="vertical-align: inherit;">することもでき</font><b><font style="vertical-align: inherit;">ます</font></b><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
たとえば、次のコマンドは、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">users</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">グループに属するすべてのファイルを検索します</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="bash hljs">find / -group users</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所有権の変更</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アクセス許可を適用するには、最初に検討する必要があるのは所有権です。</font><font style="vertical-align: inherit;">このための</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chownコマンド</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">があり</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">このコマンドの構文は理解しやすいです：</font></font><br>
<br>
<pre><code class="bash hljs">chown  </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
たとえば、次のコマンドは、/ home / accountディレクトリの所有者をユーザーlindaに変更します。</font></font><br>
<br>
<pre><code class="bash hljs">chown linda /home/account</code></pre><br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chownコマンドコマンドには</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、いくつかのオプションを持っているのは、特に便利です：</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-R</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">このオプションは他の多くのチームでも利用できるので、あなたはそれが何をするかを推測することができます。</font><font style="vertical-align: inherit;">これにより、所有者を再帰的に設定できます。これにより、現在のディレクトリと以下のすべての所有者を設定できます。</font><font style="vertical-align: inherit;">次のコマンドは、/ホームディレクトリ</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
の所有者</font><font style="vertical-align: inherit;">とその下のすべてをlisaに変更します</font><font style="vertical-align: inherit;">。所有者は次のようになります。</font></font><br>
<br>
<pre><code class="bash hljs">[root@localhost ~]<span class="hljs-comment"># ls -l /home</span><font></font>
total 0<font></font>
drwx------. 2 account account 62 Sep 25 21:41 account<font></font>
drwx------. 2 lisa    lisa    62 Sep 25 21:42 lisa<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実行：</font></font><br>
<br>
<pre><code class="bash hljs">[root@localhost ~]<span class="hljs-comment"># chown -R lisa /home/account</span>
[root@localhost ~]<span class="hljs-comment">#</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これで、lisaがアカウントディレクトリの所有者になりました。</font></font><br>
<br>
<pre><code class="bash hljs">[root@localhost ~]<span class="hljs-comment"># ls -l /home</span><font></font>
total 0<font></font>
drwx------. 2 lisa account 62 Sep 25 21:41 account<font></font>
drwx------. 2 lisa lisa    62 Sep 25 21:42 lisa<font></font>
</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">グループオーナーの変更</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
グループの所有権を変更するには2つの方法があります。</font><font style="vertical-align: inherit;">これは</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chown</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用して行うことができます</font><font style="vertical-align: inherit;">が、ジョブを実行する</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chgrp</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font><font style="vertical-align: inherit;">呼ばれる特別なコマンドがあり</font><font style="vertical-align: inherit;">ます。</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chownコマンド</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用する場合は</font><font style="vertical-align: inherit;">、を使用してください</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">または</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">グループ名の前。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次のコマンドは、/ home / accountグループの所有者をアカウントグループに変更します。</font></font><br>
<br>
<pre><code class="bash hljs">chown .account /home/account
</code></pre><br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chown</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">
使用して</font><font style="vertical-align: inherit;">、ユーザーやグループの所有者をいくつかの方法で変更</font><font style="vertical-align: inherit;">でき</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">ここではいくつかの例を示します。</font></font><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chown lisa myfile1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、lisaがmyfile1を所有するように設定します。</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chown lisa.sales myfile</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、lisaユーザーをmyfileファイルの所有者に設定し、salesグループを同じファイルの所有者に設定します。</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chown lisa：sales myfileは</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">前のコマンドと同じです。</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chown .sales myfile</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、ユーザーの所有者を変更せずに、販売グループをmyfileファイルの所有者に設定します。</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chown：sales myfileは</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">前のコマンドと同じです。</font></font></li>
</ul><br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chgrp</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
コマンド</font><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">使用して</font><font style="vertical-align: inherit;">、グループの所有者を変更</font><font style="vertical-align: inherit;">できます</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">次の例を考えてみます。ここでは、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chgrpを</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用</font><b><font style="vertical-align: inherit;">して</font></b><font style="vertical-align: inherit;">、salesグループをアカウントディレクトリの所有者として設定</font><font style="vertical-align: inherit;">できます</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="bash hljs">chgrp .sales /home/account</code></pre><br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chown</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font><font style="vertical-align: inherit;">
同様に</font><font style="vertical-align: inherit;">、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-R</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オプション</font><font style="vertical-align: inherit;">を</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chgrp</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">で</font><font style="vertical-align: inherit;">使用し</font><font style="vertical-align: inherit;">たり、グループ所有者を再帰的に変更したり</font><font style="vertical-align: inherit;">できます</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">デフォルトの所有者について</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ユーザーがファイルを作成すると、デフォルトの所有権が適用されます。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ファイルを作成したユーザーが自動的にこのファイルの所有者になり、このユーザーのメイングループが自動的にこのファイルの所有者になります。</font><font style="vertical-align: inherit;">これは通常、/ etc / passwdファイルでユーザーのメイングループとして指定されているグループです。</font><font style="vertical-align: inherit;">ただし、ユーザーが複数のグループのメンバーである場合、有効なコアグループを変更できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
現在有効なプライマリグループを表示するには、ユーザーは</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">groups</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コマンドを使用できます</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="bash hljs">[root@server1 ~]<span class="hljs-comment"># groups lisa</span><font></font>
lisa : lisa account sales<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
現在のユーザーlindaが有効なプライマリグループを変更する場合は、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">newgrp</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コマンドに</font><font style="vertical-align: inherit;">続けて、新しい有効なプライマリグループとして設定するグループの名前を指定します。</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">newgrp</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コマンドを使用すると、</font><font style="vertical-align: inherit;">プライマリグループは、ユーザーが</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">exitコマンドを</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">発行する</font><font style="vertical-align: inherit;">か</font><font style="vertical-align: inherit;">ログアウト</font><font style="vertical-align: inherit;">する</font><font style="vertical-align: inherit;">までアクティブになります</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以下は、lisaがこのコマンドを使用して、salesグループがプライマリグループになる方法を示しています。</font></font><br>
<br>
<pre><code class="bash hljs">lisa@server1 ~]$ groups<font></font>
lisa account sales<font></font>
[lisa@server1 ~]$ newgrp sales<font></font>
[lisa@server1 ~]$ groups<font></font>
sales lisa account<font></font>
[lisa@server1 ~]$ touch file1<font></font>
[lisa@server1 ~]$ ls -l<font></font>
total 0<font></font>
-rw-r--r--. 1 lisa sales 0 Feb 6 10:06 file1<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
現在のメイングループを変更すると、ユーザーが作成したすべての新しいファイルは、このグループを所有者グループとして受け取ります。プライマリグループの初期設定に戻るには、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">exitを</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用し</font><b><font style="vertical-align: inherit;">ます</font></b><font style="vertical-align: inherit;">。</font><b><font style="vertical-align: inherit;">newgrp</font></b></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
コマンドを使用できるようにするには</font><font style="vertical-align: inherit;">、ユーザーはプライマリとして使用するグループのメンバーである必要があります。</font><font style="vertical-align: inherit;">さらに、</font><b><font style="vertical-align: inherit;">gpasswd</font></b><font style="vertical-align: inherit;">コマンドを使用して、グループのパスワードをグループに使用できます</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">ユーザーが</font><b><font style="vertical-align: inherit;">newgrp</font></b><font style="vertical-align: inherit;">コマンドを使用した</font><font style="vertical-align: inherit;">が、ターゲットグループのメンバーではない場合、シェルはグループのパスワードを要求します。</font><font style="vertical-align: inherit;">正しいグループパスワードを入力すると、新しい有効なプライマリグループが設定されます。</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">基本的な権利管理</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Linux許可システムは1970年代に発明されました。</font><font style="vertical-align: inherit;">当時はコンピューティングのニーズが限られていたため、基本的な許可システムはかなり制限されていました。</font><font style="vertical-align: inherit;">この権限システムは、ファイルとディレクトリに適用できる3つの権限を使用します。</font><font style="vertical-align: inherit;">このセクションでは、これらの権限を使用および変更する方法を学習します。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">読み取り、書き込み、および実行権について</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3つの基本的な権限により、ファイルの読み取り、書き込み、実行が可能になります。これらのアクセス許可の効果は、ファイルまたはディレクトリに適用した場合とは異なります。ファイルの場合、読み取りアクセス許可により、読み取りのためにファイルを開く権利が与えられます。したがって、その内容を読み取ることはできますが、これはコンピューターがファイルを開いて何かを実行できることを意味します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
たとえば、ライブラリへのアクセスが必要なプログラムファイルには、そのライブラリへの読み取りアクセス権が必要です。つまり、読み取り権限は、ファイルを操作するために必要な最も基本的な権限です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ディレクトリの場合、読み取りにより、そのディレクトリの内容を表示できます。この権限では、ディレクトリ内のファイルを読み取ることができないことを知っておく必要があります。 Linuxのアクセス許可は継承を認識していないため、ファイルを読み取る唯一の方法は、そのファイルの読み取りアクセス許可を使用することです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ご想像のとおり、書き込み権限をファイルに適用すると、ファイルへの書き込みが許可されます。つまり、既存のファイルの内容を変更できます。ただし、新しいファイルの作成や削除、ファイルのアクセス許可の変更はできません。これを行うには、ファイルを作成するディレクトリに書き込み権限を与える必要があります。ディレクトリでは、この権限により、新しいサブディレクトリを作成および削除することもできます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実行権限は、ファイルを実行するために必要なものです。</font><font style="vertical-align: inherit;">デフォルトではインストールされないため、Linuxはほぼ完全にウイルスの影響を受けません。</font><font style="vertical-align: inherit;">実行権限を適用できるのは、ディレクトリへの書き込み権限を持つ人だけです。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下は、基本的な権限の使用をまとめたものです。</font></font></b><br>
<br>
<img src="https://habrastorage.org/webt/rr/-a/ty/rr-atyy5ru2por4kcyrmd-x87n8.jpeg"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chmodの使用</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
権限を管理するには、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chmodコマンドを</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用し</font><font style="vertical-align: inherit;">ます。</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chmod</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用する場合</font><font style="vertical-align: inherit;">、ユーザー（ユーザー）、グループ（グループ）、その他（その他）のアクセス許可を設定できます。このコマンドは、相対モードと絶対モードの2つのモードで使用できます。絶対モードでは、基本的な権限を設定するために3桁が使用されます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/3r/6l/va/3r6lvaw_mpvo7sxfsggtxik3ofs.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
権限を設定するときは、必要な値を計算します。 / somefileで、ユーザーに対して読み取り、書き込み、実行、グループに対して読み取り、実行、他のユーザーに対して読み取り、実行を設定する場合は、次の</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chmodコマンド</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用します</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="bash hljs">chmod 755 /somefile</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">この方法で</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chmod</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
を使用すると</font><font style="vertical-align: inherit;">、現在のすべての権限が、設定した権限に置き換えられます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
現在のアクセス許可を基準にしてアクセス許可を変更する場合は</font><font style="vertical-align: inherit;">、相対モードで</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chmod</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">使用でき</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">相対モードで</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chmod</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">使用する場合</font><font style="vertical-align: inherit;">、3つのインジケーターを使用して、何をしたいかを示します。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最初に、アクセス許可を変更するユーザーを指定します。</font><font style="vertical-align: inherit;">これを行うには、ユーザー（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">u</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）、グループ（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">g</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）、その他（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）から</font><font style="vertical-align: inherit;">選択できます</font><font style="vertical-align: inherit;">。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">次に、演算子を使用して、現在のモードのアクセス許可を追加または削除するか、完全に設定します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最後に、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">r</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">w、</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">および</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">使用して</font><font style="vertical-align: inherit;">、</font><font style="vertical-align: inherit;">設定する権限を示します。</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
相対モードで権限を変更する場合、「to」の部分をスキップして、すべてのオブジェクトの権限を追加または削除できます。</font><font style="vertical-align: inherit;">たとえば、次のコマンドは、すべてのユーザーに実行権限を追加します。</font></font><br>
<br>
<pre><code class="bash hljs">chmod +x somefile</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
相対モードで作業する場合は、より複雑なコマンドを使用することもできます。</font><font style="vertical-align: inherit;">たとえば、次のコマンドは、グループに書き込み権限を追加し、他のユーザーの読み取りを削除します。</font></font><br>
<br>
<pre><code class="bash hljs">chmod g+w,o-r somefile</code></pre><br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chmod -R o + rx / data</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
を使用する場合は</font><font style="vertical-align: inherit;">、すべてのディレクトリ、および/ dataディレクトリ内のファイルに実行権限を設定します。</font><font style="vertical-align: inherit;">ファイルではなくディレクトリに対してのみ実行する権限を設定するには、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chmod -R o + rX / dataを</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用し</font><b><font style="vertical-align: inherit;">ます</font></b><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
大文字のXは、ファイルが一部のオブジェクトに対して実行する権限をまだ設定していない場合に、ファイルが実行する権限を取得しないことを保証します。</font><font style="vertical-align: inherit;">これにより、Xは実行権限を操作するよりスマートな方法になります。</font><font style="vertical-align: inherit;">これにより、必要のないファイルにこの権限をインストールする必要がなくなります。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">拡張された権利</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
先ほどお読みになった基本的な権限に加えて、Linuxには一連の高度な権限もあります。</font><font style="vertical-align: inherit;">これらは設定したデフォルトの権限ではありませんが、便利な追加機能を提供する場合があります。</font><font style="vertical-align: inherit;">このセクションでは、それらが何であるか、およびそれらを構成する方法を学びます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">拡張SUID、GUID、スティッキービットの権利について</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3つの高度な権限があります。これらの最初は、ユーザー識別子（SUID）を設定する権限です。一部の特殊なケースでは、このアクセス許可を実行可能ファイルに適用できます。デフォルトでは、実行可能ファイルを実行しているユーザーは、独自の権限でファイルを実行します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
通常のユーザーにとって、これは通常、プログラムの使用が制限されていることを意味します。ただし、場合によっては、ユーザーは特定のタスクを実行するためにのみ特別な権限を必要とします。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
たとえば、ユーザーがパスワードを変更する必要がある状況を考えます。これを行うには、ユーザーは新しいパスワードを/ etc / shadowファイルに書き込む必要があります。ただし、このファイルはroot以外のユーザーは書き込みできません。</font></font><br>
<br>
<pre><code class="bash hljs">root@hnl ~]<span class="hljs-comment"># ls -l /etc/shadow</span><font></font>
----------. 1 root root 1184 Apr 30 16:54 /etc/shadow<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
解決策SUIDは、この問題の解決策を提供します。 / usr / bin / passwdユーティリティでは、この権限がデフォルトで使用されます。つまり、パスワードが変更されると、ユーザーは一時的にroot権限を取得し、/ etc / shadowファイルに書き込むことができます。</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ls -l</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">として使用</font><font style="vertical-align: inherit;">してSUIDの解決を確認でき</font><font style="vertical-align: inherit;">ます。通常</font><font style="vertical-align: inherit;">、ユーザーのアクセス許可</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に対してx</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が表示さ</font><font style="vertical-align: inherit;">れると予想される位置にあります</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="bash hljs">[root@hnl ~]<span class="hljs-comment"># ls -l /usr/bin/passwd</span><font></font>
-rwsr-xr-x. 1 root root 32680 Jan 28 2010 /usr/bin/passwd<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SUIDアクセス許可は便利に見える場合があります（場合によっては役立つ場合もあります）が、同時に潜在的に危険です。正しく適用しないと、誤ってrootアクセス許可を与える可能性があります。したがって、細心の注意を払ってのみ使用することをお勧めします。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ほとんどの管理者はこれを使用する必要はありません。オペレーティングシステムがデフォルトで設定する必要がある一部のファイルでのみ表示されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2番目の特別なアクセス許可は、グループ識別子（SGID）です。この解像度には2つの影響があります。実行可能ファイルに適用すると、ファイルを実行しているユーザーに、このファイルのグループ所有者の権限が付与されます。したがって、SGIDはSUIDとほぼ同じように実行できます。ただし、SGIDは実際にはこの目的には使用されません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SUID権限と同様に、SGIDはデフォルト設定として一部のシステムファイルに適用されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SGIDをディレクトリに適用すると、SGIDを使用して、このディレクトリで作成されたファイルとサブディレクトリのデフォルトのグループ所有者を設定できるので便利です。デフォルトでは、ユーザーがファイルを作成すると、そのユーザーの有効なプライマリグループがこのファイルのグループ所有者として設定されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
特にRed Hat / CentOSユーザーにはユーザーと同じ名前のグループがあり、そのユーザーが唯一のメンバーであるので、これは常に非常に役立つとは限りません。したがって、デフォルトでは、ユーザーが作成したファイルが共有されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
lindaとloriのユーザーが経理部門で働いていて、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アカウント</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">グループのメンバーである状況を想像してみてください</font><font style="vertical-align: inherit;">。デフォルトでは、これらのユーザーは、自分が唯一のメンバーであるプライベートグループのメンバーです。ただし、両方のユーザーはアカウントグループのメンバーですが、セカンダリグループのパラメーターとしても使用されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
デフォルトの状況では、これらのユーザーのいずれかがファイルを作成すると、メイングループが所有者になります。</font><font style="vertical-align: inherit;">したがって、デフォルトでは、lindaはloriによって作成されたファイルにアクセスできず、その逆も同様です。</font><font style="vertical-align: inherit;">ただし、共有グループディレクトリ（たとえば/ groups / account）を作成し、SGID権限がこのディレクトリに適用され、そのグループアカウンティングがこのディレクトリのグループ所有者として設定されていることを確認すると、このディレクトリとそのすべてのサブディレクトリに作成されたすべてのファイル、デフォルトのグループ所有者としてアカウントグループも取得します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このため、SGID権限は、共有グループディレクトリにインストールするのに非常に便利な権限です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SGID権限は</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ls -ld出力</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に</font><b><font style="vertical-align: inherit;">s</font></b><font style="vertical-align: inherit;">として</font><font style="vertical-align: inherit;">表示され</font><b><font style="vertical-align: inherit;">ます</font></b></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通常、グループを実行する権限が見つかる位置：</font></font><br>
<br>
<pre><code class="bash hljs">[root@hnl data]<span class="hljs-comment"># ls -ld account</span><font></font>
drwxr-sr-x. 2 root account 4096 Apr 30 21:28 account<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
特別な権限の3番目はスティッキービットです。この権限は、複数のユーザーが同じディレクトリへの書き込み権限を持っている環境で、誤ってファイルを削除しないようにするために役立ちます。スティッキービットが使用されている場合、ユーザーは、ファイルが置かれているファイルまたはディレクトリを所有しているユーザーである場合にのみ、ファイルを削除できます。このため、/ tmpディレクトリのデフォルトのアクセス権として使用され、共有グループディレクトリにも役立ちます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
スティッキービットがなければ、ユーザーがディレクトリにファイルを作成できる場合、ユーザーはこのディレクトリからファイルを削除することもできます。</font><font style="vertical-align: inherit;">パブリックグループ環境では、これは煩わしい場合があります。</font><font style="vertical-align: inherit;">/データ/アカウントディレクトリへの書き込み権限を持ち、アカウントグループのメンバーシップを通じてこれらの権限を受け取るユーザーlindaとloriを想像してください。</font><font style="vertical-align: inherit;">したがって、lindaはloriによって作成されたファイルを削除でき、その逆も可能です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
スティッキービットを使用する場合、ユーザーは次の条件のいずれかに該当する場合にのみファイルを削除できます。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ユーザーはファイルの所有者です。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ユーザーは、ファイルが置かれているディレクトリの所有者です。</font></font></li>
</ul><br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ls -ld</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
を使用</font><font style="vertical-align: inherit;">すると、通常は他のユーザーの実行権限が表示される位置に、</font><font style="vertical-align: inherit;">スティッキービットが</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">t</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">として</font><font style="vertical-align: inherit;">表示されます。</font></font><br>
<br>
<pre><code class="bash hljs">[root@hnl data]<span class="hljs-comment"># ls -ld account/</span><font></font>
drwxr-sr-t. 2 root account 4096 Apr 30 21:28 account/<font></font>
</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">権利の強化</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SUID、SGID、スティッキービットを適用するには、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chmodを</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用することもできます</font><font style="vertical-align: inherit;">。 SUIDの数値は4、SGIDの数値は2、スティッキビットの数値は1です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらの権限を適用する場合は、4桁の引数を</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chmod</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に追加する必要があります</font><b><font style="vertical-align: inherit;">。chmod</font></b><font style="vertical-align: inherit;">の最初の桁は特別な権限を示します。たとえば、次の行は、SGID権限をディレクトリに追加し、ユーザーにrwxを、グループなどにrxを設定します。</font></font><br>
<br>
<pre><code class="bash hljs">chmod 2755 /somedir</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">絶対モード</font><font style="vertical-align: inherit;">
で</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chmod</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">使用する前に設定されている現在のアクセス許可を確認する必要がある場合、これはかなり非現実</font><font style="vertical-align: inherit;">的です。</font><font style="vertical-align: inherit;">（そうしないと、アクセス許可を上書きするリスクがあります。）したがって、特別なアクセス許可を適用する必要がある場合は、相対モードで作業することをお勧めします。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SUIDには、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chmod u + sを</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用します</font><font style="vertical-align: inherit;">。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SGIDの場合は、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chmod g + sを</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用します</font><font style="vertical-align: inherit;">。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スティッキービットの場合は、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chmod + t</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">使用して</font><font style="vertical-align: inherit;">から、アクセス権を設定するファイルまたはディレクトリの名前を使用します。</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この表は、特別な権限の管理について知っておく必要がある重要なすべてをまとめています。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ls/bk/1d/lsbk1dyrexjjgwx6g1__fws8ols.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">特別な権利を扱う例</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この例では、特別な権限を使用して、チームメンバーが共有グループディレクトリのファイルを簡単に共有できるようにします。</font><font style="vertical-align: inherit;">設定したグループ識別子のIDビットとスティッキービットを割り当てると、それらがインストールされた後、グループメンバーの共同作業を容易にする機能が追加されます。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lindaユーザーであるターミナルを開きます。</font><font style="vertical-align: inherit;">コマンド</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">useradd linda</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用してユーザーを作成し</font><font style="vertical-align: inherit;">、パスワード</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">passwd lindaを</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">追加できます</font><font style="vertical-align: inherit;">。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コマンド</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mkdir -p / data / salesを使用</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">して、ルートに/ dataディレクトリとサブディレクトリ/ data / salesを作成します</font><font style="vertical-align: inherit;">。</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cd / data / sales</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">実行</font><font style="vertical-align: inherit;">して、salesディレクトリに移動します。</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">touch linda1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">touch linda2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">実行</font><font style="vertical-align: inherit;">して、lindaが所有する2つの空のファイルを作成します。</font></font></li>
<li> <b>su — lisa</b>       lisa,      sales.</li>
<li> <b>cd /data/sales</b>      <b>ls -l</b>.    ,     linda    linda.  <b>rm -f linda*</b>.    .</li>
<li> <b>touch lisa1</b>  <b>touch lisa2</b>,    ,    lisa.</li>
<li> <b>su -</b>       root.</li>
<li> <b>chmod g+s,o+t /data/sales</b>,      (GUID),   sticky bit    .</li>
<li> <b>su — linda</b>.   <b>touch linda3</b>  <b>touch linda4</b>.    ,        sales,      /data/sales.</li>
<li> <b>rm -rf lisa*</b>. Sticky bit        linda,       .  ,    linda    /data/sales,        !</li>
</ol><br>
<h2> ACL (setfacl, getfacl)  Linux</h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
上記の拡張された権利により、Linuxがアクセス許可を処理する方法に有用な機能が追加されても、1つのファイルで複数のユーザーまたは1つのグループにアクセス許可を付与することはできません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アクセス制御リストはこの機能を提供します。</font><font style="vertical-align: inherit;">さらに、管理者はデフォルトのアクセス権を複雑な方法で設定することができ、設定されたアクセス権はディレクトリごとに異なる場合があります。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ACLについて</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ACLサブシステムはサーバーに優れた機能を追加しますが、欠点が1つあります。すべてのユーティリティがサポートしているわけではありません。したがって、ファイルをコピーまたは移動するとACL設定が失われる可能性があり、バックアップソフトウェアがACL設定をバックアップしない可能性があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
tarユーティリティはACLをサポートしていません。バックアップ時にACL設定が失われないようにする</font><font style="vertical-align: inherit;">には、tarではなく</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">star</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">使用します</font><font style="vertical-align: inherit;">。</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">star</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はtarと同じパラメーターで機能します。 ACL設定のサポートを追加するだけです。</font><b><font style="vertical-align: inherit;">getfacl</font></b></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
を使用してACLをバックアップすることも</font><font style="vertical-align: inherit;">できます。これは、setfaclコマンドを使用して復元できます。バックアップを作成するには、</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">getfacl -R / directory&gt; file.acls</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">バックアップファイルから設定を復元するには、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">setfacl --restore = file.aclを</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用します</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一部のツールでのサポートの欠如は問題にはなりません。</font><font style="vertical-align: inherit;">ACLは、個々のファイルではなく、構造的手段としてディレクトリに適用されることがよくあります。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、ファイルシステムのスマートな場所に適用されることは多くありませんが、ごく一部です。</font><font style="vertical-align: inherit;">したがって、バックアップソフトウェアでサポートされていない場合でも、使用した元のACLを復元するのは比較的簡単です。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ACL用のファイルシステムの準備</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ACLの操作を開始する前に、ACLをサポートするファイルシステムを準備する必要がある場合があります。</font><font style="vertical-align: inherit;">ファイルシステムのメタデータを拡張する必要があるため、ファイルシステムでのACLのデフォルトのサポートは常にありません。</font><font style="vertical-align: inherit;">ファイルシステムのACLを設定するときに「操作はサポートされていません」というメッセージが表示される場合は、ファイルシステムでACLがサポートされていない可能性があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これを修正するに</font><font style="vertical-align: inherit;">は、/ etc / fstabファイルに</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aclマウント</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オプションを追加し</font><font style="vertical-align: inherit;">て、ファイルシステムがデフォルトでACLサポートで</font><b><font style="vertical-align: inherit;">マウントさ</font></b><font style="vertical-align: inherit;">れるようにする必要があり</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">setfaclおよびgetfaclを使用してACL設定を変更および表示する</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ACLを設定するには、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">setfacl</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コマンドが必要</font><font style="vertical-align: inherit;">です。現在のACL設定を表示するには、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">getfacl</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が必要</font><font style="vertical-align: inherit;">です。</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ls -lコマンドは</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、既存のACLは表示されません。許可リストの後に+が表示されるだけで、ACLがファイルにも適用されることを示しています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ACLを構成する前に、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">getfacl</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用して現在のACL設定を表示すると便利です</font><font style="vertical-align: inherit;">。以下の例では、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ls -ld</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">getfaclで</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示されているように</font><font style="vertical-align: inherit;">、現在の権限を確認できます</font><font style="vertical-align: inherit;">。注意深く見ると、表示される情報がまったく同じであることがわかります。</font></font><br>
<br>
<pre><code class="bash hljs">[root@server1 /]<span class="hljs-comment"># ls -ld /dir</span><font></font>
drwxr-xr-x. 2 root root 6 Feb 6 11:28 /dir<font></font>
[root@server1 /]<span class="hljs-comment"># getfacl /dir</span>
getfacl: Removing leading <span class="hljs-string">'/'</span> from absolute path names
<span class="hljs-comment"># file: dir</span>
<span class="hljs-comment"># owner: root</span>
<span class="hljs-comment"># group: root</span><font></font>
user::rwx<font></font>
group::r-x<font></font>
other::r-x<font></font>
</code></pre><br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">getfacl</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
コマンド</font><font style="vertical-align: inherit;">を実行すると、以下のように、ユーザー、グループ、その他の3つの異なるオブジェクトに対する権限が表示されます。次に、ACLを追加して、salesグループに読み取りと実行の権限を付与します。このためのコマンドは</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">setfacl -mg：sales：rx / dir</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。このコマンドの</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-m</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、現在のACL設定を変更する必要があることを示します。その後、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">g：sales：rx</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、</font><font style="vertical-align: inherit;">グループ（</font><b><font style="vertical-align: inherit;">g</font></b><font style="vertical-align: inherit;">）salesの</font><font style="vertical-align: inherit;">読み取りと実行（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rx</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）を</font><font style="vertical-align: inherit;">行うようにACLを設定するようにチームに指示し</font><font style="vertical-align: inherit;">ます。以下に、現在のACL設定を変更した後のコマンドの外観とgetfaclコマンドの出力を示します。</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="bash hljs">[root@server1 /]<span class="hljs-comment"># setfacl -m g:sales:rx /dir</span>
[root@server1 /]<span class="hljs-comment"># getfacl /dir</span>
getfacl: Removing leading <span class="hljs-string">'/'</span> from absolute path names
<span class="hljs-comment"># file: dir</span>
<span class="hljs-comment"># owner: root</span>
<span class="hljs-comment"># group: root</span><font></font>
user::rwx<font></font>
group::r-x<font></font>
group:sales:r-x<font></font>
mask::r-x<font></font>
other::r-x<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
グループACLの設定方法を理解したので、ユーザーと他のユーザーのACLを簡単に理解できます。</font><font style="vertical-align: inherit;">たとえば、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">setfacl -mu：linda：rwx / data</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コマンド</font><font style="vertical-align: inherit;">は、/ dataディレクトリのlindaユーザーに、所有者にすることなく、現在の所有者の宛先を変更することなく、アクセス権を</font><b><font style="vertical-align: inherit;">付与し</font></b><font style="vertical-align: inherit;">ます。</font><b><font style="vertical-align: inherit;">setfacl</font></b></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
コマンドに</font><font style="vertical-align: inherit;">は、多くの機能とオプションがあります。</font><font style="vertical-align: inherit;">1つのオプション、特に</font><b><font style="vertical-align: inherit;">-R</font></b><font style="vertical-align: inherit;">オプションが重要</font><font style="vertical-align: inherit;">です。</font><font style="vertical-align: inherit;">このオプションを使用すると、ACLをインストールするディレクトリに現在存在するすべてのファイルとサブディレクトリのACLが構成されます。</font><font style="vertical-align: inherit;">既存のディレクトリのACLを変更する場合は、常にこのオプションを使用することをお勧めします。</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">デフォルトのACLを使用する</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ACLを使用する利点の1つは、ディレクトリ内の複数のユーザーまたはグループにアクセス許可を付与できることです。もう1つの利点は、デフォルトのACLを使用して継承を有効にできることです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
デフォルトのACLを設定することにより、ディレクトリに作成されるすべての新しいアイテムに設定される権限を定義します。デフォルトのACLでは、既存のファイルとサブディレクトリの権限は変更されないことに注意してください。それらを変更するには、通常のACLを追加する必要があります。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これは重要です。</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ACLを使用して、同じディレクトリへの複数のユーザーまたはグループのアクセスを構成する場合は、ACLを2回設定する必要があります。最初に</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">setfacl -R -m</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">使用</font><font style="vertical-align: inherit;">して、現在のファイルのACLを変更します。次に使用します</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">setfacl -md：</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作成されるすべての新しい要素を処理します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
デフォルトのACLを設定する</font><font style="vertical-align: inherit;">には、</font><b><font style="vertical-align: inherit;">-m</font></b><font style="vertical-align: inherit;">オプションの後に</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オプションを追加するだけです</font><font style="vertical-align: inherit;">（順序が重要です！）。したがって</font><font style="vertical-align: inherit;">、/ dataディレクトリに作成される</font><b><font style="vertical-align: inherit;">すべてのオブジェクト</font></b><font style="vertical-align: inherit;">への読み取りおよび実行アクセス権をsales groupに持たせたい場合</font><font style="vertical-align: inherit;">は、</font><b><font style="vertical-align: inherit;">setfacl -md：g：sales：rx / data</font></b><font style="vertical-align: inherit;">を使用します。</font><font style="vertical-align: inherit;">
デフォルトのACLを使用する場合、他の人にACLを設定すると便利な場合があります。</font><b><font style="vertical-align: inherit;">chmod</font></b><font style="vertical-align: inherit;">を使用して他のユーザーのアクセス許可を変更することもできるため、これは通常あまり意味がありません</font><font style="vertical-align: inherit;">。ただし、</font><b><font style="vertical-align: inherit;">chmodでは</font></b><font style="vertical-align: inherit;">できないこと</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、これは、これから作成される新しいファイルごとに他のユーザーに付与する必要がある権限を示します。</font><font style="vertical-align: inherit;">たとえば、/ dataで作成されたものに対する権限を他のユーザーに与えないようにするには、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">setfacl -md：o ::-/ dataを使用します</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ACLと通常のアクセス許可は、必ずしも完全に統合されているわけではありません。</font><font style="vertical-align: inherit;">デフォルトのACLをディレクトリに適用した後、このディレクトリにアイテムを追加し、通常のアクセス許可を変更しようとすると、問題が発生する可能性があります。</font><font style="vertical-align: inherit;">通常の権限に適用される変更は、ACLの概要に十分に反映されません。</font><font style="vertical-align: inherit;">問題を回避するには、まず通常の権限を設定してから、デフォルトのACLを設定します（その後、それらを再度変更しないようにします）。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ACLを使用した高度な権利管理の例</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この例では、先ほど作成したディレクトリ/ data / accountおよび/ data / salesを引き続き使用します。</font><font style="vertical-align: inherit;">前の例では、salesグループに/ data / salesに対する権限があり、アカウントグループに/ data / accountに対する権限があることを保証しました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まず、アカウントグループが/ data / accountディレクトリの読み取り権限を取得し、salesグループが/ data / accountディレクトリの読み取り権限を取得していることを確認します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、デフォルトのACLを設定して、すべての新しいファイルにすべての新しいアイテムに対する権限が正しく設定されていることを確認します。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">端末を開きます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ラン</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、setfacl -mg：アカウント：RX /データ/販売</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、setfacl -mg：売上高：RX /データ/アカウント</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
<li> <b>getfacl</b>,  ,      ,   .</li>
<li> <b>setfacl -m d:g:account:rwx,g:sales:rx /data/sales</b>,   ACL     sales.</li>
<li> ACL     /data/account,  <b>setfacl -m d:g:sales:rwx,g:account:rx /data/account</b>.</li>
<li>,   ACL ,     /data/sales.  <b>touch /data/sales/newfile</b>   <b>getfacl /data/sales/newfile</b>    .</li>
</ol><br>
<h2>      umask</h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
上記で、デフォルトでACLを使用する方法を学びました。 ACLを使用していない場合は、受け取るデフォルトの権限を定義するシェルパラメータ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">umask</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（後方マスク）があります。このセクションでは、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">umask</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用してデフォルトの権限を変更する方法を学びます</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
新しいファイルを作成すると、いくつかのデフォルトの権限が設定されていることに気づいたでしょう。これらの権限は、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">umask</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">設定によって決定されます</font><font style="vertical-align: inherit;">。このシェルオプションは、ログオン時にすべてのユーザーに適用されます。</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">umask</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パラメーター</font><font style="vertical-align: inherit;">は、ファイルに自動的に設定できる最大許可から差し引かれた数値を使用します。ファイルの最大設定は666、ディレクトリの最大設定は777です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ただし、このルールにはいくつかの例外が適用されます。</font><font style="vertical-align: inherit;">次の表に、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">umask</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">設定の完全な概要を</font><font style="vertical-align: inherit;">示します。</font><b><font style="vertical-align: inherit;">umask</font></b><font style="vertical-align: inherit;">で</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
使用される数字のうち、</font><b><font style="vertical-align: inherit;">chmodコマンドの</font></b><font style="vertical-align: inherit;">数値引数の場合と同様に</font><font style="vertical-align: inherit;">、最初の数字はユーザー権限を示し、2番目の数字はグループ権限を示し、最後の数字は他のユーザーに設定されているデフォルトの権限を示します。</font><font style="vertical-align: inherit;">デフォルトの</font><b><font style="vertical-align: inherit;">umask</font></b><font style="vertical-align: inherit;">値</font><font style="vertical-align: inherit;">022では、サーバー上に作成されるすべての新しいファイルに644、すべての新しいディレクトリに755が与えられます。</font><font style="vertical-align: inherit;">
すべての</font><b><font style="vertical-align: inherit;">umask</font></b><font style="vertical-align: inherit;">数値の完全な概要</font><font style="vertical-align: inherit;">とその結果を下の表に示します。</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br>
<img src="https://habrastorage.org/webt/yi/l8/x0/yil8x0tn7hy6ecxndifimssztnk.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
umaskパラメーターがどのように機能するかを確認する簡単な方法は次のとおりです。まず、ファイルのデフォルトのアクセス権を666に設定し、umaskを減算して有効なアクセス権を取得します。ディレクトリとそのデフォルトのアクセス権である777についても同じことを行います</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
。umask設定を変更するには、すべてのユーザーと個々のユーザーの2つの方法があります。すべてのユーザーにumaskをインストールする場合は、シェル環境ファイルを実行するときに、/ etc / profileで指定されているように、umaskパラメーターが考慮されていることを確認する必要があります。正しい方法は、/ etc / profile.dディレクトリにumask.shという名前のシェルスクリプトを作成し、このシェルスクリプトで使用するumaskを指定することです。このファイルでumaskが変更されている場合、サーバーに入った後、すべてのユーザーに適用されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
システム上のすべてのユーザーに適用される/ etc / profileおよび関連ファイルを介してumaskを設定する代わりに、各ユーザーのホームディレクトリに作成される.profileという名前のファイルのumask設定を変更します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このファイルで適用される設定は、個々のユーザーにのみ適用されます。</font><font style="vertical-align: inherit;">したがって、これは、詳細が必要な場合に適した方法です。</font><font style="vertical-align: inherit;">私は個人的にこの機能が好きで、rootユーザーのデフォルトのumask値を027に変更しますが、通常のユーザーはデフォルトのumask 022を使用します。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">高度なユーザー属性の操作</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これはLinuxの権利に関する最後のセクションです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アクセス許可を操作する場合、ユーザーまたはグループオブジェクトと、これらのユーザーまたはグループオブジェクトがファイルまたはディレクトリに対して持つアクセス許可の間には、常に関係があります。 Linuxサーバー上のファイルを保護する別の方法は、属性を使用することです。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
属性は、ファイルにアクセスするユーザーに関係なく機能します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ACLと同様に、ファイル属性に</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">マウント</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オプションを含める必要がある場合があります</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">user_xattr</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オプション</font><font style="vertical-align: inherit;">です。高度なユーザー属性を操作しているときに「操作がサポートされていません」というメッセージが表示された場合は、必ず</font><font style="vertical-align: inherit;">/ etc / fstabファイルで</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">マウント</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パラメータを設定してください</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
多くの属性が文書化されています。一部の属性は使用可能ですが、まだ実装されていません。それらを使用しないでください。彼らはあなたに何ももたらさないでしょう。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下は、適用できる最も有用な属性です</font></font></b><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。A</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">この属性は、ファイルのファイルへのアクセス時間が変更されないようにします。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
通常、ファイルを開くたびに、ファイルのアクセス時刻をファイルのメタデータに書き込む必要があります。これはパフォーマンスに悪影響を及ぼします。したがって、定期的にアクセスされるファイルの場合、属性</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用してこの機能を無効にすることができます。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">この属性は、追加が、ファイルを削除しないことを可能にします。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ボリュームレベルの圧縮をサポートするファイルシステムを使用する場合、このファイル属性により、圧縮エンジンが初めて有効になったときにファイルが確実に圧縮されます。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">この属性により、ファイルへの変更がすぐにディスクに書き込まれ、最初にキャッシュされることがなくなります。これは重要なデータベースファイルで有用な属性であり、ファイルキャッシュとハードドライブの間で失われないようにします。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">この属性は、ダンプユーティリティが使用されるバックアップにファイルが保存されないようにします。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">私</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">この属性は、それが含まれているディレクトリのインデックス作成を有効にします。これにより、Ext3などのプリミティブファイルシステムに高速なファイルアクセスが提供されます。Ext3は、迅速なファイルアクセスにBツリーデータベースを使用しません。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">この属性は、ファイルを変更しません。したがって、ファイルに変更を加えることはできません。これは、追加の保護が必要なファイルに役立ちます。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">j</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">この属性により、ext3ファイルシステムでは、ファイルが最初にログに書き込まれ、次にハードディスク上のデータブロックに書き込まれます。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">■</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ファイルを削除した後、ファイルが保存されたブロックを0 </font><b><font style="vertical-align: inherit;">秒間</font></b><font style="vertical-align: inherit;">上書きします。これにより、ファイルが削除された後にファイルを回復することができなくなります。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">あなた</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">この属性は削除情報を格納します。</font><font style="vertical-align: inherit;">これにより、この情報を使用して削除されたファイルを保存するユーティリティを開発できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
属性を適用する場合は、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chatrt</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コマンドを使用できます</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">たとえば、</font><font style="vertical-align: inherit;">属性をsomefileに適用するには</font><font style="vertical-align: inherit;">、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chattr + s somefile</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">使用</font><font style="vertical-align: inherit;">します。</font><font style="vertical-align: inherit;">属性を削除する必要がありますか？</font><font style="vertical-align: inherit;">次に、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chatr -s somefile</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">使用</font><font style="vertical-align: inherit;">すると、削除されます。</font><font style="vertical-align: inherit;">現在使用されているすべての属性の概要を取得するには、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lsattrコマンドを</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用し</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">概要</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この記事では、パーミッションを操作する方法を学びました。 3つの基本的なアクセス許可、詳細なアクセス許可、およびACLをファイルシステムに適用する方法について説明します。また、umaskパラメータを使用してデフォルトの権限を適用する方法も学びました。この記事の最後では、ユーザー拡張属性を使用して、ファイルシステムセキュリティの追加のレイヤーを適用する方法を学びました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この翻訳が気に入った場合は、コメントに記入してください。有用な翻訳をするためのより多くの動機があります。</font></font><br>
<br>
<blockquote>       .          . <br>
<br>
 « -          .»   « -          .»,    . <br>
<br>
   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" class="user_link">berez</a>.<br>
</blockquote><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">置き換え：</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ユーザーの所有者でない場合、シェルは、ユーザーがファイルグループとも呼ばれるグループのメンバーであるかどうかを確認します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
オン：</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ファイルを所有していない場合、シェルは、自分がこのファイルに対する権限を持つグループのメンバーであるかどうかを確認します。</font><font style="vertical-align: inherit;">このグループのメンバーである場合は、グループに設定されている権限でファイルにアクセスでき、シェルはチェックを停止します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コメントありがとうございます</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">暗号</font></font></a><br>
</blockquote></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja469651/index.html">WIBA攻撃。新しいSIMカードの脆弱性はひどいですか？</a></li>
<li><a href="../ja469655/index.html">サポートしていないサポートサービスが必要なのはなぜですか？</a></li>
<li><a href="../ja469657/index.html">分析：ロシアの投資家に最大の利益をもたらす為替資産</a></li>
<li><a href="../ja469659/index.html">ラジコンカー：はじめに</a></li>
<li><a href="../ja469663/index.html">DashaMailのストーリー：アメリカの電子メールの新興企業の立ち上げから投資家との喧嘩、そして新たなスタートまで</a></li>
<li><a href="../ja469669/index.html">エドワードスノーデンが情報提供者になった理由について語る</a></li>
<li><a href="../ja469671/index.html">Ada言語を使用してシステムをプログラムする理由</a></li>
<li><a href="../ja469677/index.html">喫煙、健康的なライフスタイル、モチベーション、ソフトウェア開発のスピード</a></li>
<li><a href="../ja469681/index.html">TensorFlow 2.0最終リリースがリリースされました</a></li>
<li><a href="../ja469683/index.html">原子力安全および産業用ビデオ監視</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>