<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëÜüèª üì≤ üòû HighLoad ++, Anastasia Tsymbalyuk, Stanislav Tselovalnikov (Sberbank): Wie wir zu MDA wurden ‚öõÔ∏è üßíüèº ‚òÆÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Die n√§chste HighLoad ++ - Konferenz findet am 6. und 7. April 2020 in St. Petersburg statt. 
 Details und Tickets hier . HighLoad ++ Sibirien 2019. Ha...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>HighLoad ++, Anastasia Tsymbalyuk, Stanislav Tselovalnikov (Sberbank): Wie wir zu MDA wurden</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/487540/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die n√§chste HighLoad ++ - Konferenz findet am 6. und 7. April 2020 in St. Petersburg statt. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Details und Tickets </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . HighLoad ++ Sibirien 2019. Halle "Krasnojarsk". 25. Juni, 14 Uhr Abstracts und </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pr√§sentation</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Entwicklung eines industriellen Datenverwaltungs- und -verbreitungssystems von Grund auf ist keine leichte Aufgabe. Insbesondere bei einem vollst√§ndigen R√ºckstand betr√§gt die Arbeitszeit ein Viertel, und die Produktanforderungen sind st√§ndige Turbulenzen. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/uj/hf/lo/ujhflolbmpow2ysfvjjdsiomcya.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir werden am Beispiel des Aufbaus eines Metadatenverwaltungssystems erl√§utern, wie in kurzer Zeit ein industriell skalierbares System aufgebaut werden kann, das die Speicherung und Verteilung von Daten umfasst.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unser Ansatz nutzt Metadaten, dynamischen SQL-Code und Codegenerierung basierend auf Swagger-Codegen und Lenker voll aus. Diese L√∂sung reduziert die Entwicklungs- und Rekonfigurationszeit des Systems und das Hinzuf√ºgen neuer Verwaltungsobjekte erfordert keine einzige Zeile neuen Codes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir werden Ihnen sagen, wie es in unserem Team funktioniert: Welche Regeln halten wir ein, welche Tools verwenden wir, auf welche Schwierigkeiten wir gesto√üen sind und wie wir sie heldenhaft √ºberwinden.</font></font><a name="habracut"></a><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anastasia Tsymbalyuk (im Folgenden - AC):</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Mein Name ist Nastya und das ist Stas! </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Stas Tselovalnikov (im Folgenden - SC):</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Hallo allerseits! </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AC:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Heute werden wir Ihnen etwas √ºber MDA erz√§hlen und wie wir mit diesem Ansatz die Entwicklungszeit verk√ºrzt und der Welt ein industriell skalierbares Metadatenmanagementsystem vorgestellt haben. </font><font style="vertical-align: inherit;">Hurra! </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SC:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Nastya, was ist MDA? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AC:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Stas, ich denke, wir werden jetzt reibungslos weitermachen. </font><font style="vertical-align: inherit;">Genauer gesagt werde ich am Ende der Pr√§sentation ein wenig dar√ºber sprechen. </font><font style="vertical-align: inherit;">Lassen Sie uns zuerst √ºber uns sprechen: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zy/5q/t1/zy5qt1-etpbxnwskirsjg_sq-ri.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich kann mich als Synergiesucher in industriellen IT-L√∂sungen bezeichnen. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SC:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Und ich?</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Was macht das SberData-Team?</font></font></h3><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AC:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Und du bist nur ein industrieller Mastodon, weil du mehr als eine L√∂sung zum Abschlussball gebracht hast! </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SC:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Tats√§chlich arbeiten wir bei Sberbank im selben Team zusammen und verwalten SberData-Metadaten: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/n9/ou/qj/n9ouqjstpumrwh93zv0zcl6olby.jpeg"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AC:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - SberData, wenn auch auf einfache Weise - Dies ist eine Analyseplattform, auf der alle digitalen Spuren jedes Kunden flie√üen. Wenn Sie Kunde der Sberbank sind, flie√üen alle Informationen √ºber Sie genau dorthin. Dort werden viele Datens√§tze gespeichert, aber wir verstehen, dass die Datenmenge nicht deren Qualit√§t bedeutet. Und Daten ohne Kontext sind manchmal v√∂llig nutzlos, weil wir sie nicht anwenden, interpretieren, sch√ºtzen und anreichern k√∂nnen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gerade diese Aufgaben werden durch Metadaten gel√∂st. Sie zeigen uns den Gesch√§ftskontext und die technische Komponente der Daten, dh wo sie erschienen sind, wie sie transformiert wurden, an welchem ‚Äã‚ÄãPunkt die minimale Beschreibung, das Markup jetzt ist. Dies reicht bereits aus, um die Daten zu verwenden und ihnen zu vertrauen. Dies ist genau die Aufgabe, die Metadaten l√∂sen. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SC:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Mit anderen Worten, die Mission unseres Teams ist es, die Effizienz der Sberbank-Informationsanalyseplattform zu steigern, da die Informationen, √ºber die Sie gerade gesprochen haben, zur richtigen Zeit am richtigen Ort an die richtigen Personen geliefert werden sollten. Und denken Sie daran, Sie sagten auch, wenn Daten modernes √ñl sind, dann sind Metadaten eine Karte der Ablagerungen dieses √ñls. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AC:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- In der Tat ist dies eine meiner brillanten Aussagen, auf die ich sehr stolz bin. </font><font style="vertical-align: inherit;">Technisch gesehen wurde diese Aufgabe auf die Tatsache reduziert, dass wir ein Metadaten-Management-Tool innerhalb unserer Plattform erstellen und dessen vollst√§ndigen Lebenszyklus sicherstellen mussten. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aber um in die Probleme unseres Themenbereichs einzutauchen und zu verstehen, an welchem ‚Äã‚ÄãPunkt wir uns befinden, schlage ich vor, vor 9 Monaten einen Rollback durchzuf√ºhren. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Stellen Sie sich also vor: Vor dem Fenster ist der Monat November, die V√∂gel flogen alle nach S√ºden, wir sind traurig ... Und als wir einen erfolgreichen Piloten mit dem Team hatten, gab es Kunden - wir blieben alle in der Komfortzone, bis es zu keiner R√ºckkehr kam.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Modell-Metadaten-Management-System</font></font></h3><br>
<img src="https://habrastorage.org/webt/ga/hc/yp/gahcyp-lwacxan__ba3h4amhsbe.jpeg"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SC:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Sie hatten noch etwas anderes an einer Komfortzone ... Tats√§chlich hatten wir die Aufgabe, einen Metadaten-Broker zu erstellen, der die M√∂glichkeit bieten sollte, mit unseren Kunden, Programmen und Systemen zu kommunizieren. </font><font style="vertical-align: inherit;">Unsere Kunden h√§tten auf Backend-Ebene die M√∂glichkeit haben sollen, entweder eine Art Metadatenpaket zu senden oder zu empfangen. </font><font style="vertical-align: inherit;">Und wir, die diese Funktion bereitstellen, mussten auf unserer Ebene die konsistentesten und relevantesten Informationen zu Metadaten auf vier logischen Ebenen sammeln:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Business Glossary Level.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Ebene des logischen Modells.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Ebene des physikalischen Modells.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der Zustand der Umwelt, den wir aufgrund der Umkehrung der industriellen Umgebung erhalten haben.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und das alles muss konsequent sein. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AC:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Ja, wirklich. Aber hier w√ºrde ich es auch irgendwie auf einfache Weise erkl√§ren, denn ich schlie√üe nicht aus, dass der Themenbereich unklar und unverst√§ndlich ist ... In einem </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Business-Glossar geht es darum, was kluge Leute in Anz√ºgen stundenlang finden ... wie man einen Begriff benennt, wie man eine Formel entwickelt Berechnung. Sie denken lange nach und haben am Ende nur ein Business-Glossar. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das logische Modell handelt davon, wie sich der Analytiker in der Welt sieht, der in der Lage ist, mit diesen klugen Leuten in Anz√ºgen und Krawatten zu kommunizieren, aber gleichzeitig versteht, wie es m√∂glich w√§re, zu landen. Weit entfernt von den Details der physischen Verwirklichung.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das physikalische Modell handelt davon, wann harte Programmierer an der Reihe sind, Architekten, die wirklich verstehen, wie man diese Objekte landet - in welche Tabelle zu legen, welche Felder zu erstellen sind, welche Indizes zu h√§ngen sind ... Der </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zustand der Umgebung ist eine Art Besetzung. </font><font style="vertical-align: inherit;">Dies ist wie ein Zeugnis aus einem Auto. </font><font style="vertical-align: inherit;">Ein Programmierer m√∂chte der Maschine manchmal eines sagen, aber sie versteht es falsch. </font><font style="vertical-align: inherit;">Allein der Zustand der Umwelt zeigt uns den tats√§chlichen Zustand, und wir vergleichen st√§ndig alles; </font><font style="vertical-align: inherit;">und wir verstehen, dass es einen Unterschied zwischen dem, was der Programmierer gesagt hat, und dem tats√§chlichen Zustand der Umgebung gibt.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fall zur Beschreibung von Metadaten</font></font></h3><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SC:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Lassen Sie es uns anhand eines konkreten Beispiels erkl√§ren. Zum Beispiel haben wir vier dieser festgelegten Ebenen. Nehmen wir an, wir haben diese ernsthaften Leute in Beziehungen, die auf der Ebene eines Gesch√§ftsglossars arbeiten - sie verstehen √ºberhaupt nicht, wie und was darin angeordnet ist. Sie verstehen jedoch, dass sie ein obligatorisches Berichtsformular erstellen m√ºssen, sie m√ºssen beispielsweise den durchschnittlichen Kontostand auf pers√∂nlichen Konten ermitteln: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/xm/4y/5g/xm4y5gvemtitzrlgzug4znuhbtk.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Auf dieser Ebene sollte eine Person bereits √ºber ein Gesch√§ftsglossar (Bedingungen f√ºr die obligatorische Berichterstattung) verf√ºgen oder √ºber einen durchschnittlichen Kontostand auf einem pers√∂nlichen Konto verf√ºgen. Als n√§chstes kommt der Analytiker, der ihn perfekt versteht, mit ihm dieselbe Sprache sprechen kann, aber er kann auch mit Programmierern dieselbe Sprache sprechen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Er sagt: "H√∂ren Sie, hier haben Sie die ganze Geschichte in separate Konten als Entit√§ten unterteilt, und sie haben ein Attribut - das durchschnittliche Gleichgewicht." </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als n√§chstes kommt der Architekt und sagt: ‚ÄûWir werden diese Pr√§sentation von Darlehen an juristische Personen durchf√ºhren. Dementsprechend erstellen wir eine physische Tabelle mit pers√∂nlichen Konten. Wir erstellen eine physische Tabelle mit t√§glichen Guthaben auf pers√∂nlichen Konten (da diese jeden Tag zum Handelsschluss eingehen). Und einmal im Monat zum Stichtag berechnen wir den Durchschnitt (Tabelle der monatlichen Salden) wie gew√ºnscht. ‚Äú</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gesagt, getan. </font><font style="vertical-align: inherit;">Und dann kam unser Parser, der zum Industriekreis ging und sagte: "Ja, ich verstehe - es gibt notwendige Tische ..." Was hat diesen Tisch noch bereichert? </font><font style="vertical-align: inherit;">Hier (als Beispiel) - Partitionen und Indizes, obwohl genau genommen sowohl Partitionen als auch Indizes auf der Entwurfsebene des physischen Modells liegen k√∂nnten, k√∂nnte es aber noch etwas anderes geben (zum Beispiel Datenvolumen).</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Registrierung und Speicherung auf Metadatenebene</font></font></h3><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AC:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Wie wird alles bei uns gespeichert? Dies ist eine super vereinfachte Form des Beispiels, das Stas zuvor gemalt hat! Wie wird das alles bei uns liegen? </font></font><br>
<br>
<img src="https://habrastorage.org/webt/cl/6b/cu/cl6bcun8zmcowyo5pocbcjy64j8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tats√§chlich ist es eine Zeile im Glossarobjekt, eine im Terms-Objekt, eine in den Entities, eine in den Attributen und so weiter. In der obigen Abbildung ist jedes Rechteck ein Objekt in unserem Steuerungssystem, das diese oder jene dort gespeicherten Informationen darstellt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um Sie langsam in die Terminologie einzuf√ºhren, bitte ich Sie, Folgendes zu beachten ... Was ist ein Metadatenverwaltungsobjekt? Physikalisch wird dies in Form einer Tabelle dargestellt, tats√§chlich werden dort jedoch bestimmte Informationen zu Begriffen, Glossaren, Entit√§ten, Attributen usw. gespeichert. Diesen Begriff ‚ÄûObjekt‚Äú werden wir in unserer Pr√§sentation weiterhin verwenden. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SC:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Hier muss gesagt werden, dass jeder Cube nur eine Tabelle in unserem System ist, in der wir Metadaten speichern, und wir nennen dies das Steuerobjekt.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Metadatenanforderungen</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Was hatten wir am Eingang? </font><font style="vertical-align: inherit;">Am Eingang erhielten wir recht interessante Anforderungen. </font><font style="vertical-align: inherit;">Es gab viele von ihnen, aber hier wollen wir drei Hauptmerkmale zeigen: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/by/he/sa/byhesadzdaf8chjm3cncp9hhzxs.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die erste Anforderung ist ziemlich klassisch. </font><font style="vertical-align: inherit;">Uns wird gesagt: "Leute, alles, was einmal zu dir gekommen ist, muss f√ºr immer kommen." </font><font style="vertical-align: inherit;">Die Historisierung ist abgeschlossen und jede √Ñnderung in Ihrem Metadatensystem, die zu Ihnen gekommen ist (es spielt keine Rolle, ob ein Paket mit 100 Feldern eingetroffen ist (100 √Ñnderungen) oder ein Feld in einer Tabelle ge√§ndert wurde), erfordert eine neue Registrierung der Metadaten. </font><font style="vertical-align: inherit;">Sie erfordern auch die R√ºckgabe einer Antwort:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Standardm√§√üig - aktueller Status;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nach Datum;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nach Revisionsnummer.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die zweite Anforderung war interessanter: Uns wurde gesagt, dass sie mit uns an Objekten arbeiten k√∂nnen, aber sie m√ºssen viel in Java programmieren, aber sie wollen nicht. Sie schlugen vor, 100 Objekte (oder 10) gleichzeitig zu mischen, und wir sollten dieses Gesch√§ft abwickeln (weil wir k√∂nnen). Was bedeutet das Mischen? Zum Beispiel kamen 10 Spalten. Sie haben einen Link zur Tabellenkennung, aber wir haben die Tabelle selbst nicht - sie wurde am Ende von JSON erstellt. "Sie denken und verarbeiten - es ist notwendig, dass Sie k√∂nnen"! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In der Reihenfolge des zunehmenden Interesses - das dritte: ‚ÄûWir m√∂chten nicht nur die API verwenden k√∂nnen, die Sie uns erstellen, sondern uns selbst verstehen wollen ...‚Äú Und in einer willk√ºrlichen Reihenfolge sagen Sie: ‚ÄûGeben Sie uns die Vereinigung von diesem Objekt zu dem durch das dritte Objekt. Lassen Sie Ihr System selbst verstehen, wie das alles funktioniert, fragen Sie die Datenbank und geben Sie das Ergebnis in JSON zur√ºck. ‚Äú</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir hatten eine solche Geschichte am Eingang.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gesch√§tzte Sch√§tzungen</font></font></h3><br>
<img src="https://habrastorage.org/webt/nj/e3/jg/nje3jgkluyviljufojbo92jkd48.jpeg"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AC:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Nach unseren ungef√§hren Berechnungen musste jedes Steuerobjekt zur Implementierung dieses gesamten Konzepts an sieben Schnittstellen teilnehmen: einfach (einfach), f√ºr objektweites Schreiben / Lesen und L√∂schen ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Drei weitere - f√ºr universelles Schreiben / Lesen / L√∂schen, t Das hei√üt, wir k√∂nnen alles in beliebiger Reihenfolge werfen und wie das Suppenset auf das System √ºbertragen wird, und sie wird herausfinden, in welcher Reihenfolge es gel√∂scht, abgelegt, gelesen werden soll. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eine weitere Sache - eine Hierarchie aufzubauen, damit wir dem System anzeigen k√∂nnen - ‚ÄûGib uns von Objekt zu Objekt zur√ºck‚Äú; </font><font style="vertical-align: inherit;">und es gibt einen Baum verschachtelter Objekte zur√ºck.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Komplexit√§t der Implementierung</font></font></h3><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SC:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Zus√§tzlich zu den technischen Anforderungen, die uns zum Zeitpunkt des Beginns dieser Geschichte gestellt wurden, hatten wir zus√§tzliche Schwierigkeiten. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ge/h4/pg/geh4pgnrayjpjtko_vryyvoco2y.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Erstens ist dies eine gewisse Unsicherheit der Anforderungen. Nicht jedes Team konnte nicht immer klar artikulieren, was es vom Service ben√∂tigt, und oft wurde der Moment der Wahrheit im Moment des Prototyping einer Geschichte auf der Def-Rennstrecke geboren. Und w√§hrend es den Abschlussball erreichte, konnte es mehrere Zyklen geben. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AC:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Dies sind genau die Turbulenzen, die zu Beginn angek√ºndigt wurden. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SC:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Weiter ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gab eine unzul√§ssige Frist, da selbst zum Zeitpunkt des Starts mehr als f√ºnf Teams von uns abh√§ngig waren. Klassiker des Genres: Das Ergebnis wurde gestern gebraucht. Die Arbeitsoption ist im Verbr√ºhungsmodus, was wir auch getan haben.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der dritte ist eine gro√üe Menge an Entwicklung. </font><font style="vertical-align: inherit;">Nastya auf ihrer Folie hat gezeigt, dass wir bei der Betrachtung der Anforderungen, was und wie zu tun ist, festgestellt haben: 1 Objekt erfordert sieben APIs (entweder daf√ºr oder die Teilnahme an sieben APIs). </font><font style="vertical-align: inherit;">Dies bedeutet, dass wenn wir einen Patch (6 Objekte, Modell, 42 API) in einer Woche haben ...</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Standardansatz</font></font></h3><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AC:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Ja, tats√§chlich sind 42 APIs pro Woche nur die Spitze des Eisbergs. </font><font style="vertical-align: inherit;">Wir sind uns bewusst, dass wir Folgendes ben√∂tigen, um sicherzustellen, dass diese 42 APIs funktionieren:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erstellen Sie zun√§chst eine Speicherstruktur f√ºr das Objekt.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zweitens, um die Logik seiner Verarbeitung sicherzustellen;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">drittens schreiben Sie genau die API, an der das Objekt teilnimmt (oder speziell daf√ºr konfiguriert ist);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">viertens w√§re es sch√∂n, all dies idealerweise mit den Konturen des Testens abzudecken, zu testen und zu sagen, dass alles in Ordnung ist;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">f√ºnftens (die gleiche Kirsche auf dem Kuchen), um diese ganze Geschichte zu dokumentieren.</font></font></li>
</ul><br>
<img src="https://habrastorage.org/webt/rv/lt/c_/rvltc_6nldjheqzq5hnju6eqhiq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das erste, was uns einfiel (zu Beginn haben wir Ihnen ein ungef√§hres Diagramm gezeigt) - wir hatten nat√ºrlich ungef√§hr 35 Objekte. </font><font style="vertical-align: inherit;">Mit ihnen musste etwas getan werden, all dies musste abgeleitet werden, und es blieb sehr wenig Zeit. </font><font style="vertical-align: inherit;">Und die erste Idee, die uns einfiel, war, uns hinzusetzen, die √Ñrmel hochzukrempeln und mit dem Codieren zu beginnen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selbst nachdem wir ein paar Tage in diesem Modus gearbeitet hatten (wir hatten drei Teams), erreichten wir eine so gl√ºhende Temperatur ... Alle waren nerv√∂s ... Und wir erkannten, dass wir nach einem anderen Ansatz suchen mussten.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Benutzerdefinierter Ansatz</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir begannen darauf zu achten, was wir tun. Die Idee dieses Ansatzes war schon immer vor unseren Augen, weil wir uns schon sehr lange mit Metadaten besch√§ftigt haben. Irgendwie ist es uns nicht sofort in den Sinn gekommen ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie Sie sich vorstellen k√∂nnen, besteht die Essenz dieser Idee darin, Metadaten zu verwenden. Es besteht in der Tatsache, dass wir die Struktur unseres Repositorys erfassen (dies sind bestimmte Metadaten), sobald wir eine Vorlage f√ºr einen Code erstellt haben (z. B. mehrere APIs oder Prozeduren zur Verarbeitung von Logik, Skripte zum Erstellen von Strukturen). Sobald wir diese Vorlage erstellt haben, werden alle Metadaten durchlaufen. Durch Tags werden Eigenschaften in den Code eingesetzt (Objektnamen, Felder, wichtige Merkmale), und der resultierende Code ist fertig.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/hy/rl/xt/hyrlxt2uztvqeakue0olbbmctzs.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das hei√üt, es reicht aus, einmal verwirrt zu sein - erstellen Sie eine Vorlage und verwenden Sie dann alle diese Informationen sowohl f√ºr vorhandene als auch f√ºr neue Objekte. </font><font style="vertical-align: inherit;">Hier stellen wir ein anderes Konzept vor - #META_META. </font><font style="vertical-align: inherit;">Ich werde erkl√§ren warum, um Sie nicht zu verwirren. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unser System befasst sich mit der Verwaltung von Metadaten, und der von uns verwendete Ansatz beschreibt ein Metadatenverwaltungssystem, d. H. Zwei Metas. </font><font style="vertical-align: inherit;">"MetaMeta" - wir haben es zu Hause im Team genannt. </font><font style="vertical-align: inherit;">Um die anderen nicht weiter zu verwirren, werden wir genau diesen Begriff verwenden.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mechanismus zur Sicherstellung der Historisierung und √úberarbeitung</font></font></h3><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SC:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Sie haben den Rest unserer Rede zusammengefasst. Wir werden es genauer erz√§hlen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich muss sagen, dass wir bei der Vorbereitung der Rede gebeten wurden, technische Informationen zu geben, die f√ºr Kollegen von Interesse sein k√∂nnten. Wir werden es tun. Au√üerdem werden die Folien technischer - vielleicht sieht jemand etwas Interessantes f√ºr sich. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Erstens, wie wir das Problem der Historisierung und Revision gel√∂st haben. Vielleicht ist das √§hnlich wie bei vielen. Betrachten Sie dies anhand von Metadaten als Beispiel, die ein einzelnes Feld in der Buchungstabelle beschreiben (als Beispiel):</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ny/7m/dd/ny7mddafiwemxmigli7who-mee8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es hat eine ID - "7", einen Namen - Carry_note, eine Link-ID_Tabelle 73 und ein Feld - 255. Wir geben im Prim√§r- und Alternativschl√ºssel ein Feld (vom Typ Datum) ab dem Zeitpunkt ein, ab dem dieser Eintrag g√ºltig wird - valid_from. Und noch ein Feld - bis zu welchem ‚Äã‚ÄãDatum dieser Datensatz g√ºltig ist (valid_to). In diesem Fall werden sie standardm√§√üig ausgef√ºllt - es ist klar, dass dieser Eintrag grunds√§tzlich immer g√ºltig ist. Und dies geschieht so lange, bis wir beispielsweise die L√§nge des Feldes √§ndern m√∂chten.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sobald wir dies tun m√∂chten, schlie√üen wir den Datensatz valid_to (wir legen den Zeitstempel fest, zu dem das Ereignis aufgetreten ist). Gleichzeitig machen wir einen neuen Rekord ("300"). Es ist leicht zu bemerken, dass in dieser Situation, wenn Sie die Datenbank von einem bestimmten Zeitpunkt an durch den ‚ÄûKampf‚Äú (zwischen) zwischen valid_from und valid_to betrachten, wir einen einzigen Datensatz erhalten, der jedoch zu diesem Zeitpunkt relevant ist. Gleichzeitig haben wir gleichzeitig ein Revisionsprotokoll gef√ºhrt: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zt/-k/s9/zt-ks9u2di9jbuzxgyd-dpnqllc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Darin haben wir </font><font style="vertical-align: inherit;">Revisionen </font><font style="vertical-align: inherit;">aufgezeichnet </font><font style="vertical-align: inherit;">, deren </font><font style="vertical-align: inherit;">Sequenz (Sequenz) id zunimmt, und den Zeitpunkt, der dieser Revisions-ID entspricht. So konnten wir die erste Nachfrage schlie√üen. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AC:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Ich denke ja! </font><font style="vertical-align: inherit;">Hier ist der Ansatz der gleiche. </font><font style="vertical-align: inherit;">Wir verstehen, dass jedes Objekt im System diese beiden erforderlichen Felder hat. Sobald wir verwirrt sind, codieren wir die Verarbeitungslogik dieser Vorlage und ersetzen dann (beim Generieren des dynamischen Codes) einfach die Namen der entsprechenden Objekte. </font><font style="vertical-align: inherit;">So wird jedes Objekt in unserem System √ºberarbeitet, und all dies kann verarbeitet werden - wir schreiben im Allgemeinen keine einzige Codezeile.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Batch-Update</font></font></h3><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SC:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Die zweite Anforderung war f√ºr mich etwas interessanter. Ehrlich gesagt, als es um den Eingang ging, war ich zuerst nur bet√§ubt. Aber die Entscheidung ist gekommen! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich erinnere Sie daran, dass dies der gleiche Fall ist, als JSON mit einem Paket f√ºr die n-te Anzahl von Objekten zu uns kam, die in das System eingef√ºgt werden m√ºssen. Gleichzeitig haben wir zu Beginn 10 Spalten, die auf eine nicht vorhandene Tabelle verweisen, und die Tabelle wurde in den JSON-Tail aufgenommen. Was zu tun ist? </font></font><br>
<br>
<img src="https://habrastorage.org/webt/pd/ja/nn/pdjann3lit7axfk1infab47y8rm.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir haben einen Ausweg gefunden, indem wir den Mechanismus rekursiver hierarchischer Abfragen verwendet haben - dies ist mit Sicherheit die bekannte Verbindung durch vorherige Konstruktion. Wir haben es wie folgt gemacht: Hier ist ein Fragment unseres Produktionscodes:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/sk/zz/i7/skzzi7gzikn81bg2lmlk4fzd9wq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
An dieser Stelle (ein Codeabschnitt, der in einem roten Oval eingekreist ist) ist der Hauptpunkt, der eine Idee gibt. Und hier ist das Objekt mit einem anderen Objekt verkn√ºpft, das durch einen Fremdschl√ºssel im System verkn√ºpft ist. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zum Verst√§ndnis: Wenn jemand Code in Oracle schreibt, gibt es All_columns, All_all_-Tabellen, All_constraint-Tabellen - dies ist das W√∂rterbuch, das von den Skripten verarbeitet wird (wie die auf der Folie oben gezeigten). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bei der Ausgabe erhalten wir Felder, die uns die Priorit√§t der Verarbeitung von Objekten geben, und zus√§tzlich einen Deskriptor - es ist im Wesentlichen eine eindeutige Zeichenfolgenkennung f√ºr jeden Metadatensatz. Der Code, mit dem der Deskriptor empfangen wird, ist auch auf der Folie oben angegeben.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zum Beispiel ein Feld - wie k√∂nnte es aussehen? Dies ist der Plattformcode: oracle KP., Production. KP, my_scheme. KP, my_table. KP usw., wobei KP der Feldcode ist. Es wird also einen solchen Deskriptor geben. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AC:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Was sind die Probleme hier? Wir haben Objekte im System und die Reihenfolge ihrer Einf√ºgung ist f√ºr uns sehr wichtig. Beispielsweise k√∂nnen wir keine Spalten vor Tabellen einf√ºgen, da eine Spalte auf eine bestimmte Tabelle verweisen muss. Wie gewohnt: Zuerst f√ºgen wir die Tabellen ein, als Antwort erhalten wir ein ID-Array, durch diese IDs werfen wir die Spalten und f√ºhren die zweite Einf√ºgeoperation aus. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In Wirklichkeit erreicht die L√§nge dieser Kette, wie Stas gezeigt hat, 8-9 Objekte. Der Benutzer muss unter Verwendung des Standardansatzes alle diese Operationen nacheinander ausf√ºhren (alle diese 9 Operationen) und ihre Reihenfolge klar verstehen, damit kein Fehler auftritt.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Soweit ich Stas richtig interpretiere, k√∂nnen wir alle diese Objekte in beliebiger Reihenfolge auf das System √ºbertragen und k√ºmmern uns nicht darum, wie wir dies einf√ºgen m√ºssen. Wir haben nur ein Suppenset in das System geworfen und alles bestimmt, in welcher Reihenfolge es eingef√ºgt werden soll. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich habe nur die Frage: Was ist, wenn wir das Objekt zum ersten Mal einf√ºgen? Wir haben die Tabelle bereits eingef√ºgt und kennen ihre ID nicht. Wie geben wir an (ein rein hypothetisches Beispiel), dass wir zwei Tabellen einf√ºgen m√ºssen, von denen jede eine Spalte hat? Wie geben wir an, dass sich diese JSON-Spalte auf Tabelle1 bezieht, nicht auf Tabelle2? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SC:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Ein Deskriptor! Der Griff, den wir auf dieser Folie angegeben haben (vorher). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und auf dieser Folie ist genau die L√∂sung angegeben:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/au/_v/o2/au_vo2urh2ur5fllwuhuvgfaw78.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Deskriptoren werden im System als eine Art Ged√§chtnisfeld verwendet, das nicht existiert, aber id ersetzt. </font><font style="vertical-align: inherit;">In diesem Moment, wenn das System zun√§chst versteht, dass die Tabelle eingef√ºgt werden muss, erh√§lt es eine ID. </font><font style="vertical-align: inherit;">und bereits in der Phase der Generierung der SQL-Abfrage f√ºr die Einf√ºgung und Spalte wird die ID verarbeitet. </font><font style="vertical-align: inherit;">Der Benutzer kann kein Dampfbad nehmen: ‚ÄûGriff geben und ausf√ºhren!‚Äú. </font><font style="vertical-align: inherit;">Das System wird es tun.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Universelle Abfrage f√ºr eine Gruppe verwandter Objekte</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vielleicht mein Lieblingsfall. Dies ist die bevorzugte technische Anforderung, die wir hatten. Sie kamen zu uns und sagten: ‚ÄûLeute, macht es so, dass das System alles kann! Bitte von Objekt zu Objekt. Ratet mal, wie sich alles untereinander verbindet. Gib uns zur√ºck, JSON, bitte. Wir m√∂chten mit Ihrem Service nicht viel programmieren. "... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Frage:" Wie ?! " </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir sind tats√§chlich den gleichen Weg gegangen. Genau die gleiche Konstruktion: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/xm/ya/rm/xmyarmfesokkzn31kval5xnbvnu.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie wurde verwendet, um dieses Problem zu l√∂sen. Der einzige Unterschied besteht darin, dass es einen g√ºltigen Filter gab, der diesen hierarchischen Baum nur f√ºr die Storys abwickelte, f√ºr die ein Deskriptor erforderlich war. Relativ gesehen war es f√ºr jedes Objekt einzigartig. Hier sind alle m√∂glichen Verbindungen im System ungedreht (wir haben ungef√§hr 50 Objekte).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alle m√∂glichen Verbindungen zwischen Objekten werden im Voraus vorbereitet. Wenn wir ein Objekt haben, das an drei Beziehungen beteiligt ist, werden drei Zeilen vorbereitet, damit der Algorithmus verstehen kann. Und sobald die JSON-Anfrage bei uns eintrifft, gehen wir zu dem Ort, an dem diese Geschichte im Voraus in MeteMet vorbereitet wurde. Wir suchen nach dem Weg, den wir brauchen. Wenn wir nicht finden, ist dies eine Geschichte. Wenn wir sie finden, bilden wir eine Abfrage in der Datenbank. Wird ausgef√ºhrt - JSON wird zur√ºckgegeben (wie angefordert). </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AC:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Infolgedessen k√∂nnen wir auf das System √ºbertragen, von welchem ‚Äã‚ÄãObjekt wir empfangen m√∂chten. Wenn Sie eine eindeutige Verbindung zwischen zwei Objekten skizzieren k√∂nnen, ermittelt das System selbst, auf welcher Verschachtelungsebene das Objekt im Baum zu Ihnen zur√ºckkehrt:</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es ist sehr flexibel! Unsere Benutzer sind wieder einmal in einem Zustand der ‚ÄûTurbulenzen‚Äú: Heute brauchen sie eine Sache, morgen brauchen sie eine andere. Und diese L√∂sung erm√∂glicht es uns, die Struktur sehr flexibel anzupassen. Dies waren drei Schl√ºsself√§lle, die auf unserer Kernseite verwendet wurden. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SC:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Lassen Sie uns einige zusammenfassen. Es ist klar, dass wir jetzt aufgrund der begrenzten Zeit nicht alle Chips erz√§hlen werden. Drei F√§lle haben wir unserer Meinung nach durchgef√ºhrt und erz√§hlt. Es ist uns gelungen, die komplexeste Logik und die Logik, die f√ºr jedes Metadatenverwaltungsobjekt einheitlich funktionieren sollte, in den Kernelcode zu integrieren.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir konnten diesen Code nicht 100% dynamisch gestalten, was bedeutet, dass bei erstellten Objekten (es spielt keine Rolle, ob sie bereits erstellt wurden oder sp√§ter erstellt werden; die Hauptsache ist, dass sie gem√§√ü den Regeln erstellt werden) das System funktionieren kann - es muss nichts hinzugef√ºgt und neu geschrieben werden. </font><font style="vertical-align: inherit;">Nur testen ist genug. </font><font style="vertical-align: inherit;">Wir haben diese ganze Geschichte in drei universelle Methoden geparkt. </font><font style="vertical-align: inherit;">Meiner Meinung nach gibt es genug davon, um fast jedes gesch√§ftliche Problem zu l√∂sen:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erstens ist derselbe universelle ‚ÄûUpdater‚Äú eine Methode, mit der ein oder eine Gruppe von Objekten, die in zuf√§lliger Reihenfolge √ºbertragen werden, aktualisiert / eingef√ºgt / gel√∂scht werden kann (L√∂schen schlie√üt einen Datensatz).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die zweite Methode ist eine Methode, die universelle Informationen zu nur einem Objekt zur√ºckgeben kann.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die dritte Methode ist dieselbe Methode, die Join-Informationen zur√ºckgeben kann, die durch Gruppen von Objekten verbunden sind.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So stellte sich heraus, und wir machten den Kern. </font><font style="vertical-align: inherit;">Und dann gehen wir zu Ihrem Lieblingsteil √ºber.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anwendungseinstiegspunkt</font></font></h3><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AC:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Ja, dies ist mein Lieblingsteil, da dies mein Verantwortungsbereich ist - Application Server. </font><font style="vertical-align: inherit;">Um zu verstehen, in welcher Situation ich mich befand, werde ich versuchen, Sie erneut in ein Problem zu st√ºrzen. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Stas hat gute Arbeit geleistet und mir diese drei Standardmethoden √ºbergeben, mit denen diese Objekte manipuliert wurden. </font><font style="vertical-align: inherit;">Dies ist eine rein skizzenhafte Beschreibung - in Wirklichkeit gibt es noch viel mehr: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/5o/dk/mo/5odkmo2v_zex8mki419gtahlk3c.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gehen wir zur√ºck zum Anfang, um Sie zu vertiefen ... Wie werden die Metadaten im System hier dargestellt? </font></font><br>
<br>
<img src="https://habrastorage.org/webt/kc/b1/yk/kcb1yk6tgcqfrnez3dm_umstpzu.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn wir sehen, dass sich in der Umgebung eine Tabelle befindet, f√§llt diese als ein Datensatz im Tabellenobjekt und einige Datens√§tze im Feldobjekt in unser System. </font><font style="vertical-align: inherit;">Im Wesentlichen haben wir eine Struktur zusammengestellt.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir k√∂nnen feststellen, dass die Menge dieser Objekte unterschiedlich ist. Um diese Objekte zu manipulieren und alles in eine universelle Struktur zu bringen, damit alle drei Methoden verstehen, wor√ºber gesprochen wird, bewegt sich Stas mit dem Pferd. Es nimmt alle Objekte und dreht sie um, das hei√üt, es repr√§sentiert jedes Objekt in unserem Metadatenverwaltungssystem als vier Zeilen: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/wv/bg/ne/wvbgne8ly7inu5jwunv3f8xnmne.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Da jedes Objekt in unserem Metadatenverwaltungssystem physisch eine Tabelle ist, kann jedes Objekt gem√§√ü diesen vier Zeichen zerlegt werden: Zeilennummer , Tabelle, Feld und Feldwert. Es war Stas, der sich all das ausgedacht hat, und ich musste es irgendwie implementieren und den Benutzern geben. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SC:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Entschuldigung, aber wie kann ich Ihnen beispielsweise in einer flachen Antwortspalte, die noch nicht erstellt wurde, irgendwann erstellen, und Gott wei√ü, was sie sein k√∂nnen? .. Daher besteht die einzige Option unter den Bedingungen des dynamischen Codes darin, die Interaktion zwischen zu konfigurieren Kern und Anwendung, um diese Informationen an Sie zu √ºbermitteln - nur so, wie wir es sehen. Ich glaube, dass diese Entscheidung aus meiner Sicht genial war, weil sie nur von Ihnen kam. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AC:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Jetzt werden wir nicht dar√ºber streiten. Zwei Wochen vor Ablauf der Frist blieb ich bei der Tatsache, dass ich diese drei Methoden an meinen H√§nden hatte (links auf der vorherigen Folie), die die universelle Struktur manipulierten (rechts auf derselben Folie).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mein erster Gedanke war, einfach alles auf API-Ebene zusammenzufassen und damit zum Benutzer zu gehen und zu sagen: ‚ÄûSchau, was f√ºr eine brillante Sache! </font><font style="vertical-align: inherit;">Du kannst alles machen! </font><font style="vertical-align: inherit;">√úbertragen Sie alle oder sogar nicht vorhandene Objekte. </font><font style="vertical-align: inherit;">Cool, ja "?! </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ml/iq/qp/mliqqpbuethupkpzjgr-tstqgm4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und sie sagen: ‚ÄûAber Sie verstehen, dass Ihr Service √ºberhaupt nicht spezialisiert ist? </font><font style="vertical-align: inherit;">Als Benutzer verstehe ich nicht, welche Objekte ich auf das System √ºbertragen kann, wie ich sie bearbeiten kann ... F√ºr mich ist es eine Black Box, ich habe generell Angst, dass ich Daten √ºbermitteln werde. </font><font style="vertical-align: inherit;">Ich kann mich irren - ich habe Angst. </font><font style="vertical-align: inherit;">Stellen Sie sicher, dass ich den Anweisungen klar folgen und sehen kann, welche Objekte sich im System befinden und welche Manipulationsmethoden ich verwenden kann. ‚Äú</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fleck. </font><font style="vertical-align: inherit;">Ein Ansatz</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dann wurde uns klar, dass es cool war, eine Spezifikation f√ºr unseren Service zu erstellen. Kurz gesagt, um eine Liste der Objekte unseres Systems zu erstellen, eine Liste der Punkte, Manipulationen und welche Objekte sie miteinander jonglieren. So kam es, dass wir in unserer Firma Swagger f√ºr diese Zwecke als eine Art architektonische L√∂sung verwenden. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/we/vz/fo/wevzfoicvrvvkasgu3ihlkbcv7a.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nachdem ich mir die Swagger-Struktur angesehen hatte, wurde mir klar, dass ich die Struktur von Objekten, die sich im System befinden, irgendwohin bringen muss. Vom Kernel erhielt ich nur drei Standardmethoden und einen Tabellenwechsler. Sonst nichts. F√ºr mich schien es dann eine unm√∂gliche Aufgabe zu sein, die gesamte Struktur, die sich im Repository befindet, aus diesen vier Standardfeldern zu erhalten. Ich habe aufrichtig nicht verstanden, woher ich alle Beschreibungen von Objekten, alle zul√§ssigen Werte, alle Logik ... </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SC:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Was bedeutet es wo? </font><font style="vertical-align: inherit;">Sie und ich haben MetaMeta, das den Kernel im Echtzeitmodus bereitstellt. </font><font style="vertical-align: inherit;">Der Kernel in Echtzeitausf√ºhrung generiert eine SQL-Abfrage, die mit der Datenbank kommuniziert. </font><font style="vertical-align: inherit;">Alles ist da, nicht nur was Sie brauchen. </font><font style="vertical-align: inherit;">Es gibt auch Verkn√ºpfungen zwischen Objekten. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AC:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Auf Anraten von Stas ging ich dann zu MetaMetu und war √ºberrascht, weil dort alle notwendigen Gentleman-Kits zur Erstellung von Standardspezifikationen vorhanden waren. </font><font style="vertical-align: inherit;">Dann kam die Idee auf, dass Sie eine Vorlage erstellen und alles nach sieben m√∂glichen Szenarien malen m√ºssen - 7 Standard-APIs f√ºr jedes Objekt.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fleck. </font><font style="vertical-align: inherit;">OAS + Lenker</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es ist also leicht zu erkennen, woraus die Spezifikation besteht: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/0w/y5/wt/0wy5wtfsnvh9bpunt-fpdtgwce4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie k√∂nnen auf der OAS-Website und im Lenker (unten auf der Folie) nachsehen, woraus sie bestehen sollte - es gibt eine Reihe von Endpunkten, eine Reihe von Methoden und am Ende gibt es Modelle. Der Code wird von Zeit zu Zeit wiederholt. F√ºr jedes Objekt m√ºssen wir get, put schreiben. l√∂schen; F√ºr eine Gruppe von Objekten m√ºssen wir dies und so weiter schreiben. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Trick bestand darin, die ganze Geschichte einmal zu schreiben und nicht mehr zu baden. Die Folie zeigt ein Beispiel f√ºr echten Code. Blaue Objekte sind Tags im Lenker. Dies ist eine Vorlagen-Engine. Sehr flexibel, rate ich jedem - Sie k√∂nnen es selbst anpassen, benutzerdefinierte Tag-Handler schreiben ...</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anstelle dieser blauen Tags werden beim Ausf√ºhren dieser Vorlage √ºber alle Metadaten alle wichtigen Eigenschaften ersetzt - der Name des Objekts, seine Beschreibung, eine Art Logik (zum Beispiel, dass wir abh√§ngig von der Eigenschaft einen zus√§tzlichen Parameter hinzuf√ºgen m√ºssen) und so weiter. </font><font style="vertical-align: inherit;">Am Ende steht ein Link zu dem Modell, das er interpretiert.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anwendungscode. </font><font style="vertical-align: inherit;">Swagger Codegen + Lenker</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
All dies haben wir codiert, aufgezeichnet und eine Spezifikation erstellt. Alles war sehr cool und gut. Wir haben alle 7 m√∂glichen Szenarien f√ºr jedes Objekt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hat es dem Benutzer gegeben. Er sagte: ‚ÄûWow! Cool! Jetzt wollen wir es nutzen! ‚Äú Was ist wieder das Problem? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir haben eine Spezifikation, die jede Methode im Detail beschreibt, was damit zu tun ist, welche Objekte zu manipulieren sind. Und es gibt drei Standard-Kernel-Methoden, die die oben beschriebene invertierte Tabelle als Eingabe verwenden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dann musste man einfach eins mit dem anderen kreuzen (jetzt scheint es mir einfach). Das hei√üt, wenn ein Benutzer eine Methode in der Benutzeroberfl√§che aufruft, mussten wir sie korrekt und korrekt an den Kernel weiterleiten und das Modell (wo wir sch√∂ne Spezifikationen haben) in diese vier Standardfelder umwandeln. Das war alles was getan werden musste.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ql/20/bm/ql20bmpw34giiqlmn73ndf3thyy.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um all dies in die Praxis umzusetzen, brauchten wir "nominative" Transformationen ...</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Konvertierungen</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Swagger hat zun√§chst ein solches Werkzeug - Swagger Codegen. Wenn Sie sich jemals mit erfundenen Spezifikationen befasst haben, gibt es eine Schaltfl√§che ‚ÄûServerteil generieren‚Äú. Klicken Sie auf, w√§hlen Sie eine Sprache aus - ein fertiges Projekt wird f√ºr Sie generiert. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es wird bemerkenswert generiert: Es gibt alle Klassenbeschreibungen, alle Endpunktbeschreibungen ... - es funktioniert. Sie k√∂nnen es lokal ausf√ºhren - es wird funktionieren. Das Problem ist eines: Es gibt Stubs zur√ºck - jede Methode wird nicht inkrementiert. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Idee war, Logik basierend auf diesen sieben Szenarien in den Codegenerator einzuf√ºgen - eine der Standardvorlagen zu ‚Äûverderben‚Äú und selbst zu konfigurieren. Hier ist nur ein Beispiel f√ºr echten Code, den wir in der Vorlagen-Engine verwenden, und eine Liste der Aktionen, die wir ausf√ºhren mussten, um diesen Codegenerator f√ºr uns selbst zu konfigurieren:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/tt/ye/ls/ttyelscqkjzd0js6dfnzpr_4opg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Wichtigste war, die erforderlichen Bibliotheken zu verbinden, Klassen f√ºr die Kommunikation mit dem Kernel zu schreiben und (je nach Szenario) den Aufruf einer oder mehrerer Methoden auf der Kernelseite zu interpretieren. Das Modell wurde ebenfalls umgedreht: von dem in der Spezifikation angegebenen sch√∂nen auf vier Felder und dann zur√ºck transformiert.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der wahrscheinlich schwierigste Fall war hier, dem Benutzer einen Baum zu geben, da der Kernel auch vier Zeilen an uns zur√ºckgibt - sehen Sie, auf welcher Ebene sich die Hierarchie befindet. Wir haben den Mechanismus der Au√üenbeziehungen verwendet, der in der IDE enthalten ist, dh wir sind zu MetaMetu gegangen, haben alle Pfade von einem zum anderen untersucht und dynamisch einen Baum durch sie generiert. Der Benutzer kann uns von jedem Objekt nach dem fragen, was er will - am Ausgang wird ihm ein sch√∂ner Baum zur√ºckgegeben, in dem bereits alles strukturell angelegt ist. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SC:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Ich werde dich f√ºr eine Sekunde aufhalten, weil ich mich schon verlaufen habe. Ich werde Sie im Stil von "Verstehe ich das richtig" fragen ...</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie m√∂chten sagen, dass wir den kompliziertesten und komplexesten Code berechnet haben, der f√ºr ein neues Objekt geschrieben werden m√ºsste. Und um Zeit zu sparen, um es nicht zu tun, haben wir es geschafft, alles in den Kernel zu schieben und diese Geschichte dynamisch zu machen ... Aber diese API (wie sie scherzten, "hartn√§ckig") ist so "alles", dass es be√§ngstigend ist, sie herauszugeben: unpassende Adressierung Damit k√∂nnen Sie Metadaten besch√§digen. Dies ist einerseits. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Andererseits haben wir festgestellt, dass wir nur dann mit unseren Kunden kommunizieren k√∂nnen, wenn wir ihnen eine API geben, die eine eindeutige Projektion der im System eingebetteten Metadatenverwaltungsobjekte darstellt (tats√§chlich einen bestimmten Vertrag f√ºr unseren Service ausf√ºhren). Es scheint, dass alles - wir treffen: Wenn das Objekt nicht da ist - es noch nicht da ist, und wenn es erscheint - erscheint die Vertragsverl√§ngerung bereits ein neuer Code.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir scheinen in vermeidbare manuelle Codierung geraten zu sein, aber hier schlagen Sie vor, diesen Code per Button auszuf√ºhren. </font><font style="vertical-align: inherit;">Wieder schaffen wir es, von der Geschichte wegzukommen, wenn wir etwas mit unseren H√§nden schreiben m√ºssen. </font><font style="vertical-align: inherit;">Ist das so? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AC:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Ja, das ist es wirklich. </font><font style="vertical-align: inherit;">Im Allgemeinen war meine Idee, ein f√ºr alle Mal mit der Programmierung zu beginnen, zumindest mit Hilfe von Template-Engines. </font><font style="vertical-align: inherit;">Schreiben Sie den Code einmal und entspannen Sie sich dann. </font><font style="vertical-align: inherit;">Und selbst wenn ein neues Objekt im System erscheint - durch die Schaltfl√§che, mit der wir das Update starten, wird alles versch√§rft, wir haben eine neue Struktur, neue Methoden werden generiert, alles ist in Ordnung und in Ordnung.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MetaMeta optimieren</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um unseren Service noch besser zu machen, haben wir das Standard-MetaMeta bereichert. Am Eingang hatten wir, was vom Kern √ºbrig war. Wir haben den Objekten auch eine zus√§tzliche Beschreibung hinzugef√ºgt. Objekte sind in Bereichen gruppiert. Wir zeigen dies alles in der Spezifikation an, damit der Benutzer versteht, was er manipuliert und mit welchem ‚Äã‚ÄãObjekt er gerade kommuniziert. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/l8/jw/z2/l8jwz2tyod81csu9xxpkwi1lwb4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nur haben wir dort einige Kleinigkeiten hinzugef√ºgt - Typen, Formate, Listen akzeptabler Werte, Muster, Beispiele. Dies freut auch die Benutzer - sie verstehen bereits klar, was eingef√ºgt werden kann, was nicht. Wir stellen dem Benutzer auch ein Client-Artefakt zur Verf√ºgung, mit dem wir Fehler bei der Kommunikation mit unserem Service abfangen k√∂nnen (genau nach Format, bereits in der Kompilierungsphase).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aber vor allem, damit all diese Magie funktioniert, mussten wir uns auf das Innere einigen: eine Reihe bestimmter Regeln erstellen. </font><font style="vertical-align: inherit;">Es gibt nicht viele von ihnen - ich habe drei gez√§hlt (es gibt zwei von ihnen auf der Folie, also muss man sich an eine erinnern):</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Namenskonvention. </font><font style="vertical-align: inherit;">Wir benennen Objekte im System speziell, um das Erkennen von Szenarien f√ºr ihre weitere Verwendung zu erleichtern.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schreibvereinbarung. </font><font style="vertical-align: inherit;">Um die Typen, Formate und den Kampf zwischen dem Kernel und dem Anwendungsserver korrekt zu bestimmen, verwenden wir das Pr√ºfsystem, mit dem wir verstehen, zu welchem ‚Äã‚ÄãFormat eine bestimmte Eigenschaft geh√∂rt.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">G√ºltige Fremdschl√ºssel. </font><font style="vertical-align: inherit;">Wenn das Objekt einen ung√ºltigen Link zu einem anderen Objekt erh√§lt, funktioniert all diese Magie falsch.</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ergebnis</font></font></h3><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SC:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Es ist cool, aber viel Theorie. K√∂nnen Sie ein praktisches Beispiel geben? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AC:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Ja, ich habe es speziell vorbereitet. Bevor Stas am Freitagabend, buchst√§blich 5 Minuten vor Ende des Arbeitstages, zur Konferenz aufbrach, sagte er zu mir: ‚ÄûOh, sieh mal! Ich habe einen Modell-Patch ver√∂ffentlicht - wie cool! Es w√§re sch√∂n, unseren Service zu aktualisieren. " Der Patch enthielt nur zwei Objekte, aber ich verstehe, dass ich mit dem alten Ansatz verwirrt werden und 7 APIs schreiben oder hinzuf√ºgen m√ºsste. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sofort hatte ich nur einen Knopfdruck, um all diese Magie zum Laufen zu bringen. Ich habe </font></font><br>
<br>
<img src="https://habrastorage.org/webt/jf/gr/ae/jfgraecrwtkmqpkaro8dd33ce2e.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
den </font><font style="vertical-align: inherit;">Ort, an dem die Magie stattfinden soll, speziell </font><font style="vertical-align: inherit;">rot eingekreist </font><font style="vertical-align: inherit;">: Ich </font><font style="vertical-align: inherit;">klicke auf den Button ... Dies sind nat√ºrlich Screenshots, aber in Wirklichkeit funktioniert alles so:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/9e/i9/f2/9ei9f2kb_hwoehod_unzzigzfgm.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir haben eine neue Methode (zwischen den beiden), die bereits Daten liefert, mit denen wir in der Hierarchie die gesamte Struktur abfragen k√∂nnen, alle verschachtelten Objekte: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/9m/yu/vp/9myuvpinmkso-52vkoumvvrt2r8.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/zc/x8/7b/zcx87bkyy3xqnaqnbhlbifvs014.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/7w/_p/kh/7w_pkhczrzpdq8knnr2ief_9abe.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und alles funktioniert! </font><font style="vertical-align: inherit;">Ich habe √ºberhaupt keine einzige Codezeile geschrieben.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zusammenfassung</font></font></h3><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SC:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Erstens, was ist die Tatsache? Wir haben die komplexeste Logik verwaltet, die unsere Programmierer am meisten Zeit in Anspruch nehmen w√ºrden, um 100% dynamischen Kernel-Code zu packen, der mit Objekten arbeiten kann - diejenigen, die es sind und diejenigen, die es sein werden: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/d8/xp/qe/d8xpqeq5w0itd_cch0ei793hh_u.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zweitens haben wir es auf der Ebene des Anwendungsservers geschafft (wo es nicht m√∂glich ist), um auch die Programmierung aufgrund der Codegenerierung zu vermeiden - dieselbe Schaltfl√§che, die Sie demonstriert haben: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/bc/07/a7/bc07a74gn9n8lnrekq5dzjjfnva.jpeg"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AC:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Wir haben versucht, denselben Ansatz basierend auf Metadaten auf andere Bereiche, auf den Testbereich, auszudehnen. Wir schreiben auch einmal eine Vorlage f√ºr ein Objekt und f√ºgen dort Tags ein. Wenn diese Vorlage entlang der Metadaten ausgef√ºhrt wird, wird ein fertiges Blatt mit allen Testszenarien erstellt. Das hei√üt, wir decken alle Objekte mit Tests ab.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/qc/wp/rf/qcwprf4610fb9txjxag0mu_jbye.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als n√§chstes ist die Kirsche auf dem Kuchen. Ich wei√ü, dass nur wenige Leute gerne dokumentieren, was sie tun. Wir haben diesen Schmerz auch anhand von Metadaten gel√∂st. Nachdem wir eine Vorlage mit HTML-Markup vorbereitet hatten, markierten wir sie. Wenn wir die Metadaten durchgehen, werden alle diese Tags durch ihre Eigenschaften ersetzt, die den Objekten entsprechen. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/br/fw/qd/brfwqd8kkmrzw4i3vtj00nihefw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Ausgabe ist eine sch√∂ne fertige HTML-Seite. Dann ver√∂ffentlichen wir in Confluence und k√∂nnen unseren Benutzern ein f√ºr Menschen lesbares Format zur Verf√ºgung stellen, damit sie sehen k√∂nnen, was wir im System haben, wie wir damit arbeiten, einige minimale Beschreibungen, akzeptable Werte, erforderliche Eigenschaften, Schl√ºssel ... Sie alle k√∂nnen dies tun sehen und kann es ganz leicht herausfinden.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Infolgedessen haben wir vier Hauptpunkte, und dieser Ansatz wird als MDA (Model Driven Architecture) bezeichnet. </font><font style="vertical-align: inherit;">Aus irgendeinem Grund bedeutet dies ‚Äûmodellgetriebene Architektur‚Äú, obwohl ich es als ‚ÄûSoftwareentwicklungsmethode‚Äú bezeichnen w√ºrde. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/td/eg/xc/tdegxczzes1iuf9cabkvfyqpnsq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Was ist der Sinn? </font><font style="vertical-align: inherit;">Sie erstellen ein Modell, einigen bestimmten Regeln. </font><font style="vertical-align: inherit;">Anschlie√üend erstellen Sie einmal Transformationsmuster dieses Modells in einer Programmiersprache, die Ihnen zur Verf√ºgung steht. </font><font style="vertical-align: inherit;">All dies funktioniert, um alte Objekte zu √§ndern und neue hinzuzuf√ºgen. </font><font style="vertical-align: inherit;">Sie schreiben den Code einmal und k√ºmmern sich nicht mehr darum. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SC:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Ich habe ehrlich auf den gesamten Bericht gewartet, als Sie diese Frage beantwortet haben. </font><font style="vertical-align: inherit;">Kommen wir zu meinen Lieblingsfolien.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Entscheidung. </font><font style="vertical-align: inherit;">Prozess. </font><font style="vertical-align: inherit;">Vor</font></font></h3><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AC:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - ‚ÄûDer Prozess. Vorher ‚Äú- das ist unser Stolz, weil wir viel programmiert haben, fast nichts gegessen haben - waren wir sehr b√∂se. Ich musste all diese 5 Schritte f√ºr jedes Objekt ausf√ºhren: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ww/md/b5/wwmdb5ner6xv170apuzcaipk7bw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es war sehr traurig und hat uns viel Zeit gekostet. Jetzt haben wir diese Nahrungskette auf drei Glieder reduziert, von denen das wichtigste einfach darin besteht, das Objekt korrekt zu erstellen, und nicht mehr: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/rx/vi/3a/rxvi3axe32vloy0xw77jbs5whrw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MetaMeta wird durch eine Schaltfl√§che (Aktualisierung) gestartet und anschlie√üend getestet. Wir versuchen derzeit sicherzustellen, dass nichts von uns abf√§llt, da wir diesen Ansatz k√ºrzlich angewendet haben. Wir versuchen, diesen gesamten Prozess zu kontrollieren. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sch√§tzungen zufolge wurden alle unsere Arbeitskosten f√ºr die Entwicklung unserer gesamten Software um das Sechsfache gesenkt. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SC:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Von mir selbst m√∂chte ich aufrichtig sagen, dass die Nummer 6 nicht durchgebrannt ist, sondern sogar konservativ. </font><font style="vertical-align: inherit;">In der Tat ist der Wirkungsgrad sogar noch h√∂her.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zukunftspl√§ne</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie haben am Ende des Berichts gebeten, sich mit unseren Pl√§nen zu befassen. </font><font style="vertical-align: inherit;">Zun√§chst scheint es, dass wir nicht nur eine vollst√§ndige, sondern auch eine entfremdete und verpackte L√∂sung erreichen m√ºssen. </font><font style="vertical-align: inherit;">Diese Technologien k√∂nnen gegebenenfalls irgendwo in der N√§he angewendet werden. </font><font style="vertical-align: inherit;">Ich m√∂chte ein fertiges Produkt erzielen, das entwickelt wird und das wir im Auftrag der Sberbank anbieten k√∂nnen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn wir √ºber unmittelbare Aufgaben sprechen, werden diese nat√ºrlich alle mit Aufz√§hlungszeichen auf den Folien angezeigt. </font><font style="vertical-align: inherit;">Trotz der Optimierung, die wir erhalten haben, ist die Belastung des Teams immer noch sehr ernst. </font><font style="vertical-align: inherit;">Ich kann nicht mit Sicherheit sagen, ab welchem ‚Äã‚ÄãQuartal wir mit der Umsetzung dieser Schritte fortfahren k√∂nnen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nummer 6 und der Fall, den Nastya gebracht hat - sie sind ehrlich. Es war wirklich am Freitag, als wir Dokumente (Flugzeug, Reisen usw.) besorgen mussten. Das benachbarte Team sollte am Montag getestet werden, und wir mussten diesen Patch ver√∂ffentlichen, um die Jungs nicht einzurichten. Es funktionierte! Dies ist ein realer Fall. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/dl/zz/t7/dlzzt7b-gf7fr_piyeigv5dvyeu.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich w√ºrde mich freuen, wenn dies f√ºr einen von Ihnen n√ºtzlich sein k√∂nnte. Bei Fragen stehen wir Ihnen gerne zur Verf√ºgung. Und nach dem Bericht ist auch hier noch etwas Zeit. Fragen. Wir helfen Ihnen gerne weiter! </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AC:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- In der Tat kann dieser Ansatz, glaube ich, von allen genutzt werden. </font><font style="vertical-align: inherit;">Nicht unbedingt in unserer Form (wir besch√§ftigen uns mit der Verwaltung von Metadaten). </font><font style="vertical-align: inherit;">Es kann ein Kontrollsystem f√ºr alles sein. </font><font style="vertical-align: inherit;">Alles, was Sie zur Hand haben m√ºssen, ist eine relationale Sicht der Dinge, Metadaten von dort zu nehmen, einige Template-Engines zu verstehen und eine Programmiersprache zu verstehen (wie es funktioniert). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alle diese Tools sind gemeinfrei - Sie k√∂nnen bereits mit dem Googeln beginnen und verstehen, wie Sie sie verwenden. </font><font style="vertical-align: inherit;">Ich bin sicher, dass ihre Verwendung Ihr Leben einfacher, besser und im Allgemeinen Zeit f√ºr neue, ehrgeizige und coole Aufgaben machen wird. </font><font style="vertical-align: inherit;">Danke!</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fragen</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Frage des Publikums (im Folgenden - A): - Verstehe ich richtig, dass alles gestapelt ist, weil Sie eine relationale Datenbank verwenden? Mir scheint, wenn Sie sich die dokumentenorientierte Datenbank ansehen, w√§re all diese L√∂sung f√ºr Sie viel einfacher als ich jetzt sehe. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SC:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Nicht wirklich. Womit wir angefangen haben, als wir √ºber Leute gesprochen haben, die auf Glossarebene arbeiten, und die Spinne, die zum Abschlussball geht, diese Geschichten liest und pr√ºft - tats√§chlich findet die Tabelle mit dem Feld, das f√ºr diesen Glossarbegriff verantwortlich ist, beim Abschlussball statt . Sie sagten von unserem Service: ‚ÄûLeute, ihr solltet eine REST-API haben. Wie Sie es tun, ist Ihr Problem. Hier ist eine Liste der zul√§ssigen Technologien - verwenden Sie etwas aus dieser Liste (das k√∂nnen wir in der Sberbank verwenden). ‚Äú</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dies ist die Ebene unserer L√∂sung, angewandte Architektur. Im Gegenteil, f√ºr uns war es einfacher, dies nicht relational zu tun. Warum? Ich werde ein Beispiel geben, eines von vielen ... Zum Beispiel muss ich beim Schreiben eines Feldes sicherstellen, dass es nirgendwo auf eine Tabelle verweist, die nicht existiert. Ich mache nur einen Fremdschl√ºssel in der Datenbank und mache mir keine Sorgen. Ich schreibe keine Zeile - sie l√§sst mich diese Aufnahme nicht machen. Und es gibt viele solche Beispiele! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier sollten wir lieber √ºber etwas anderes sprechen. Eine kompliziertere Geschichte: Wir werden einen Modell-Patch mit einem Anpassungs- / Zertifizierungsdatensatz ver√∂ffentlichen, und dort gibt es 6 Objekte. Und um diese Gentleman-APIs bereitzustellen, ben√∂tigen Sie zwangsl√§ufig drei Monate, um (ohne weiteres) zu arbeiten. Wir werden anderthalb Wochen brauchen. Ohne diese Technologien war es einfach unm√∂glich, unter diesen Bedingungen zu √ºberleben. Wir w√ºrden einfach keinen solchen Service bieten!</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dies ist m√∂glich, wenn Sie die Produktion so erstellt haben, dass Sie einen Modell-Patch (neues Objekt), eine Schaltfl√§che ‚ÄûAlles gut machen‚Äú und eine Software haben, die im Client-Emulationsmodus getestet wird. Ein neues verdient, das alte fiel nicht ab - dies musste erreicht werden, aber wie - es war die Wahl des Teams. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/um/ln/nb/umlnnbfg3yswh30rmviy9zwevlc.jpeg"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Ich habe eine zweite Frage. Und was ist ein Beispiel f√ºr die Verwendung aus dem Leben? Ich verstehe, dass es theoretisch so aussieht, als k√∂nnten Sie mit Ihrem META_META-Objekt zumindest die ganze Welt beschreiben ... Aber wie verwenden Sie es im Leben? Gemessen an der Implementierung (alles sollte ineinander gesteckt werden) sollte es langsamer werden! </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SC:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- √úbrigens nein (√ºberraschend)! Eine andere Anwendung dieser Geschichte sind Codegeneratoren. Hier werden einige Storefronts, Speicher erstellt und Sie sind ETL. Sie versuchen, alle m√∂glichen Optionen auf neun Vorlagen zu parken, neun Template-Engines, die im Voraus beschrieben wurden. Mithilfe von Metadaten beschreiben Sie diese Umwandlung, indem Sie diese Vorlagen als Stubs verwenden. Au√üerdem gibt diese Maschine ohne Programmierung einen ETL-Code aus und generiert Code basierend auf Metadaten. Ich glaube, dass es auch solche Technologien gibt, Ans√§tze werden angemessen und korrekt sein. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Ich habe mit einem genaueren Beispiel gerechnet. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Sagen Sie mir bitte, es wurde in Ihren Anforderungen geschrieben, dass Sie komplexe strukturelle Abfragen durchf√ºhren m√ºssen (Join und dergleichen). In welcher Sprache ist es implementiert oder beschreiben Sie es irgendwie logisch? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SC:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Zugriff √ºber die REST-API, meistens Java, obwohl es sich um eine beliebige Sprache handeln kann. Unser Service wurde ver√∂ffentlicht (dhttps, fragen Sie https - Sie erhalten JSON zur√ºck). Die Code-Teile, die wir gezeigt haben, sind SQL. Um zu verstehen, in welcher Reihenfolge es verarbeitet werden soll, haben wir einige SQL-Optimierungen an den DBMS-W√∂rterb√ºchern vorgenommen und es in Form von materialisierten Darstellungen in einem separaten Schema geparkt. Wenn ein Modell-Patch ver√∂ffentlicht wird, wird dementsprechend auf die Schaltfl√§che "Materialisierte Ansicht aktualisieren" geklickt (+ Felder werden angezeigt). Aber unser Code ist wirklich Java und Oracle. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AC:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Hier ist anzumerken, dass wir beschlossen haben, die Verantwortungsbereiche aufzuteilen. Wir haben die ganze Magie absichtlich auf den Kernel √ºbertragen, und Application interpretiert diese Antworten einfach richtig. Das hei√üt, der Join-Mechanismus selbst tritt im Kernel auf, und Java streut einfach alles kompetent in den Baum und gibt dem Benutzer das Endergebnis. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Und was macht Code Gens - schreiben Sie dort bereits die Logik komplexer Abfragen auf? Oder wird es auf der Client-Seite gemacht? Wir m√ºssen verstehen, welche Seite beschrieben wird ... Sie haben, wie sich herausstellt, Code Gen vorgestellt, auf dem es notwendig ist, in einer bestimmten Struktur genau zu beschreiben: Ich m√∂chte zum Beispiel, dass meine API so und so Join lernt, gehe die Liste durch; Dann sagen Sie, ob es drinnen ist oder nicht ... - komplexe Abfragen sind genug. Wann ist das geschrieben? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SC:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Wenn ich Ihre Frage richtig verstehe, ist dies genau die Geschichte, in der unsere Kunden, unsere Kunden (dies ist ein Team innerhalb des Kernels, der Plattform) sagen: "H√∂ren Sie, wir wollen nicht programmieren - geben Sie uns dies." "Das ist es" alles wurde im Kern gemacht. Der Kern - im Wesentlichen was? 80 Prozent, vielleicht 90 - dies ist die Generierung von dynamischem Code, dem Text, der unter PL / SQL aufgerufen, aber an die Datenbank weitergeleitet wird. Dort wird diese Zeile auch mit der Zeit l√§nger generiert, dann wird auf die Datenbank zugegriffen (z. B. die Join-Anforderung), sie wird zur√ºckgegeben, in JSON eingeschlossen und verkehrt herum angezeigt. Dar√ºber hinaus wandelt Java all dies in einen Vertrag um, der von der Struktur abh√§ngt. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UND:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Enth√ºllte eine Batch-Update-L√∂sung. Und wie erfolgt die Liefergarantie - ist das gesamte Paket oder ein Teil des Pakets angekommen? Haben sie ein bestimmtes Cachend? Und wie kann sichergestellt werden, dass weder der Dienst ausf√§llt noch die Datenstrukturen koh√§rent sind, damit keine Fehler auftreten? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SC:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Wir haben ein Protokoll - es gibt zwei Aktualisierungsmodi. In einem von ihnen k√∂nnen Sie das Flag "Wenden Sie alles an, was Sie k√∂nnen" setzen. Es gibt eine Software, die Excel in JSON konvertiert - m√∂glicherweise sind 10.000 Zeilen vorhanden. Und genau genommen k√∂nnen zwei Zeilen ung√ºltig sein (Fehler). Und entweder sagst du: "Wende alles an, was du kannst"; oder "Nur anwenden, wenn die ganze Geschichte keinen einzigen Fehler enth√§lt." Dort wird der Integralstatus beispielsweise ein Rollback sein. Tats√§chlich wird eine Einf√ºgung in die Datenbank vorgenommen, aber das Festschreiben wird nicht aufgerufen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Fehlerfall - es ruft Rollback auf, befindet es sich im Protokoll; Sie erhalten das Protokoll trotzdem. Sie erhalten in jeder Zeile einen Status und haben eine Kennung in einem separaten Feld - entweder eine Nummer (Objekt-ID) oder einen alternativen Schl√ºssel oder beides. Das Protokoll macht es m√∂glich zu verstehen, was mit meiner Anfrage passiert ist. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AC:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Der Benutzer selbst gibt an, in welche der Optionen er sich bewegen soll. Wir √ºbergeben diesen Parameter an die Seite des Kerns, und der Kern erzeugt bereits die gesamte Magie, gibt uns die Antwort und interpretiert sie. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UND:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Warum haben Sie keinen integrierten Ausdrucks-Compiler verwendet, mit dem Sie die Regel definieren k√∂nnen?" Angenommen, wir haben eine Vorlage. Ich blogge in einer Sprache (getippte / nicht getippte Skriptsprache). schrieb: "Ich m√∂chte eine Liste." Hat dieses Snippet √ºbergeben, damit ein Code-Prozessor alles zerkaut und in eine NoSQL-Datenbank stellt, wie in der ersten Frage vorgeschlagen ... Es ist jedoch nicht klar, warum eine relationale Datenbank und warum und wie mit Datenredundanz umzugehen ist. Ein Mann schickt Ihnen eine Vorlage mit einer Milliarde M√ºll ... Wie werden diese Vereinbarungen getroffen, wenn eine Person sie braucht? </font></font><br>
<br>
<img src="https://habrastorage.org/webt/gw/kd/7h/gwkd7h6jpjvt37swvv7nbnaiq7c.jpeg"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SC:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Ich werde versuchen zu antworten, sobald ich die Frage verstanden habe." Der gr√∂√üte Teil des Programms kommuniziert jetzt mit uns. Wenn der Mechanismus der Integrationsinteraktion eingerichtet ist, kommunizieren nicht so viele Menschen mit uns als Programme. Es gibt nat√ºrlich F√§lle, in denen Leute a la exelniks f√ºr die prim√§re Versch√ºttung senden: Wir erstellen JSONs aus ihnen, laden sie hoch, aber dies ist eher eine prim√§re Einstellung. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und wir haben einen Modus, in dem Sie 5.000 Zeilen gesendet haben, von denen 4.900 mit dem Status "Ich habe verarbeitet, ich habe keine √Ñnderungen gefunden, ich habe nichts getan" zur√ºckgegeben wurden. Dies spiegelt sich jedoch im Protokoll wider und es liegt kein Fehler vor. Dies ist einerseits Redundanz. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir haben diese ganze Geschichte ungef√§hr in der dritten, normalen Form gespeichert, was im Gegensatz zu einigen denormalisierten Strukturen, die beispielsweise f√ºr Schaufenster verwendet werden, keine Redundanz bedeutet.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Warum relational? Codegeneratoren arbeiten f√ºr uns und die Sensibilit√§t f√ºr die Qualit√§t der Metadaten im System ist sehr hoch. Und wenn wir die M√∂glichkeit haben, Fremdschl√ºssel mithilfe von relationalen Konfigurationen zu konfigurieren und sicherzustellen ... Der Datensatz legt sich einfach nicht hin - es tritt ein Fehler auf, wenn im System etwas nicht stimmt, wenn ein Fehler auftritt. Und wir wollen, aber wir suchen keine zus√§tzliche Arbeit ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir werden nicht daran gemessen, wie viele Codezeilen wir geschrieben haben: "Haben Sie die Frage nach dem Dienst und seiner Stabilit√§t gel√∂st oder nicht?" Sie k√∂nnen √ºberhaupt nicht schreiben - die Hauptsache ist, dass es funktioniert. In diesem Sinne war es f√ºr uns einfach schneller und bequemer.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich nehme keinen bestimmten Anbieter, aber relationale Datenbanken werden seit 20 Jahren entwickelt! Es ist nicht einfach so. Nehmen Sie zum Beispiel Word oder Excel unter Windows - Sie programmieren dort nicht den Code, der mit Hilfe von "Assembler" auf die K√∂pfe der Festplatte zugreift und diese bewegt, um eine Datei zu schreiben ... Das gleiche ist hier! Wir haben nur die Entwicklungen in RDBMS verwendet, und es war praktisch. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AC:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Um alle unsere Anforderungen zu gew√§hrleisten, war uns die Integrit√§t der Metadaten wichtig. Und hier wollten wir wahrscheinlich auch vermitteln, dass wir uns √ºberhaupt nicht festhalten m√ºssen - wir verwenden relational, nicht relational ... Das Wesentliche des Berichts ist, dass Sie ihn auch verwenden k√∂nnen. Nicht unbedingt auf relationaler Basis, denn sicher haben auch andere Metadaten, die gesammelt werden k√∂nnen: zumindest, welche Tabellen, Felder und dies alles programmiert ist. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Das System erfordert eine gewisse Verwendung. Wie planen Sie die √úbermittlung von Daten an Ihr System (oder haben Sie dies bereits getan)? Es ist klar, dass eine Art Aktualisierung der Datenstruktur im Lebensmittelgesch√§ft stattfindet. Wie kommt das alles zu dir? Automatisch oder Ihr Agent steht oder biegen Sie alle Entwicklungsteams, damit Sie Updates erhalten? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AC:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Wir haben zwei Betriebsarten. Eine davon ist, wenn die Entwickler selbst oder die Teams selbst gezwungen sind, Metadaten √ºber REST-Services in das System einzutragen. Die zweite Betriebsart ist der gleiche ‚ÄûStaubsauger‚Äú: Wir gehen selbst in die Umwelt und nehmen von dort alle m√∂glichen Metadaten. Wir machen das einmal am Tag und √ºberpr√ºfen nur, was uns die Entwickler geschickt haben. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/o0/om/qs/o0omqsz1ftq17pwp2_urym0g4he.jpeg"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SC:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Von den vier Ebenen, die wir untersucht haben, sind die drei obersten Ebenen (Glossar, logische Modelle, physische Modelle) die Geschichte, die uns standardm√§√üig im Metadata Broker-Modus einf√§llt, und wir sind ein passiver Teilnehmer. Sie rufen uns an, geben uns etwas, fragen; Unsere Aufgabe ist es, konsequent zu parken. Obwohl es F√§lle gibt, in denen wir einige Storys mit den Ressourcen des Teams erstellen, sind wir sehr daran interessiert, diese Metadaten zu haben.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie Nastya sagte, gehen wir in Bezug auf die Geschichte mit der Umkehrung (im Fachjargon nennen wir sie ‚ÄûStaubsauger‚Äú) in die industrielle Umgebung und lesen einige Daten. Es gibt verschiedene F√§lle - wir sind bereit, sp√§ter zu diskutieren, wir sind bereit, viele interessante Geschichten zu erz√§hlen. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Ich komme aus dem Zentrum der Finanztechnologie. Ich habe dort ein bekanntes Wort gesehen - Haupt-DACUM. Unsere Plattform verf√ºgt √ºber eigene Metadaten. Wie sind Sie befreundet - in diesem Fall direkt mit den Oracle-Tabellen oder mit unseren Metadaten? In unserem Fall ist es nicht ganz bezeichnend, mit Oracle-Tabellen befreundet zu sein. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SC:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Es gibt eine solche Tabelle Haupt-DACUM, die die Verkabelung enth√§lt. </font><font style="vertical-align: inherit;">Dies ist kein Geheimnis: Es gab und gibt Produkte, die an dieser Geschichte arbeiten. </font><font style="vertical-align: inherit;">Dies ist eine der Informationsquellen im Repository. </font><font style="vertical-align: inherit;">Es gibt eine Art System, das ein Datenanbieter ist. </font><font style="vertical-align: inherit;">Nat√ºrlich steht es in Bezug auf Metadaten im Mittelpunkt unserer Aufmerksamkeit, denn eine der Geschichten, die wir hier zeigen sollten und die wir (aufgrund des Themas des Berichts) √ºberhaupt nicht ber√ºhrt haben, ist die Datenlinie. </font><font style="vertical-align: inherit;">Sie m√ºssen zeigen, woher der Datenverlauf dieses Felds stammt. </font><font style="vertical-align: inherit;">In diesem Sinne wissen wir Bescheid, wenn es eine DACUM-Haupttabelle gibt.</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/GUUSIMn9mao" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ein bisschen Werbung :)</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vielen Dank f√ºr Ihren Aufenthalt bei uns. Gef√§llt dir unser Artikel? M√∂chten Sie weitere interessante Materialien sehen? Unterst√ºtzen Sie uns, indem Sie eine Bestellung </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">aufgeben</font></a><font style="vertical-align: inherit;"> oder Ihren Freunden </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cloud-basiertes VPS f√ºr Entwickler ab 4,99 US-Dollar</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> empfehlen </font><font style="vertical-align: inherit;">, ein </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">einzigartiges Analogon von Einstiegsservern, das von uns f√ºr Sie erfunden wurde: </font></font></b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die ganze Wahrheit √ºber VPS (KVM) E5-2697 v3 (6 Kerne) 10 GB DDR4 480 GB SSD 1 Gbit / s ab 19 $ oder wie teilt man den Server?</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (Optionen sind mit RAID1 und RAID10, bis zu 24 Kernen und bis zu 40 GB DDR4 verf√ºgbar). </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dell R730xd 2-mal g√ºnstiger im Equinix Tier IV-Rechenzentrum in Amsterdam?</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Nur wir haben </font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 x Intel TetraDeca-Core Xeon 2x E5-2697v3 2,6 GHz 14C 64 GB DDR4 4 x 960 GB SSD 1 Gbit / s 100 TV von 199 US-Dollar</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> in den Niederlanden!</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dell R420 - 2x E5-2430 2,2 GHz 6C 128 GB DDR3 2x960 GB SSD 1 Gbit / s 100 TB - ab 99 US-Dollar! </font></font></b></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lesen Sie mehr √ºber</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> den Aufbau eines Infrastrukturgeb√§udes. </font><font style="vertical-align: inherit;">Klasse C mit Dell R730xd E5-2650 v4-Servern f√ºr 9.000 Euro pro Cent?</font></font></a></div>
      
    </div><p class="reference-to-source js-reference-to-source">Source: https://habr.com/ru/post/undefined/</p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de487522/index.html">Wir lassen das Terminal fliegen (Teil 1)</a></li>
<li><a href="../de487524/index.html">Warum braucht ein Hardware-Startup-Hackathon?</a></li>
<li><a href="../de487528/index.html">–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–º —Å–æ–≥–ª–∞—à–µ–Ω–∏–∏ –∏ –ø–æ–ª–∏—Ç–∏–∫–µ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏ –Ω–∞ —Å–µ—Ä–≤–∏—Å–∞—Ö –•–∞–±—Ä–∞</a></li>
<li><a href="../de487534/index.html">etcd 3.4.3: Speicherzuverl√§ssigkeits- und Sicherheitsforschung</a></li>
<li><a href="../de487538/index.html">.NET Interactive ist da! | .NET Notebooks Vorschau 2</a></li>
<li><a href="../de487542/index.html">PRESENT - Ultraleichte Blockverschl√ºsselung (√úbersetzung des Originals PRESENT: Eine ultraleichte Blockverschl√ºsselung)</a></li>
<li><a href="../de487544/index.html">.NET-Dokumentation: Was ist neu im Januar?</a></li>
<li><a href="../de487548/index.html">Neues Experiment: Aufrufen von .NET gRPC-Diensten √ºber einen Browser mit gRPC-Web</a></li>
<li><a href="../de487550/index.html">3D-Bild in Python mit (fast) normaler Leistung</a></li>
<li><a href="../de487552/index.html">Swift 5.2 - was ist neu?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>