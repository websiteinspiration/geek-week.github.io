<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü•¢ üà≥ üë©üèª‚Äçüè´ Wir √ºberpr√ºfen uns selbst: Bereitstellung und Verwaltung von 1C: Dokumentenfluss innerhalb des 1C-Unternehmens üçπ üòù üí™üèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Wir bei 1C nutzen unsere eigenen Entwicklungen weitgehend, um die Arbeit des Unternehmens zu organisieren. Insbesondere ‚Äû1C: Document Management 8‚Äú . ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Wir √ºberpr√ºfen uns selbst: Bereitstellung und Verwaltung von 1C: Dokumentenfluss innerhalb des 1C-Unternehmens</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/1c/blog/496532/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir bei 1C nutzen unsere eigenen Entwicklungen weitgehend, um die Arbeit des Unternehmens zu organisieren. Insbesondere </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚Äû1C: Document Management 8‚Äú</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Neben der Dokumentenverwaltung (wie der Name schon sagt) handelt es sich auch um ein modernes </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ECM-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> System (Enterprise Content Management - Corporate Content Management) mit einer Vielzahl von Funktionen - E-Mail, Arbeitskalender f√ºr Mitarbeiter, Organisation des gemeinsamen Zugriffs auf Ressourcen (z. B. Buchung von Konferenzr√§umen), Buchhaltung Arbeitszeit, Unternehmensforum und vieles mehr. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bei 1C verwenden mehr als tausend Mitarbeiter Dokumente. Die Datenbank ist bereits beeindruckend (11 Milliarden Datens√§tze), was bedeutet, dass eine gr√ºndlichere Wartung und leistungsf√§higere Ausr√ºstung erforderlich sind.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie die Arbeit unseres Systems angeordnet ist, mit welchen Schwierigkeiten wir bei der Wartung der Datenbank konfrontiert sind und wie wir sie l√∂sen (wir verwenden MS SQL Server als DBMS), werden wir in diesem Artikel beschreiben. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F√ºr diejenigen, die zuerst √ºber 1C-Produkte lesen. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1C: Document Management ist eine Anwendungsl√∂sung (Konfiguration), die auf der Grundlage eines Frameworks f√ºr die Entwicklung von Gesch√§ftsanwendungen implementiert wird - 1C: Enterprise-Plattform.</font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/5a/ts/rb/5atsrbr1r_0dfqiyrdimcyze4by.png" alt="Bild"><br>
<br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mit ‚Äû1C: Document Management 8‚Äú (in Kurzform - DO) k√∂nnen Sie die Arbeit mit Dokumenten im Unternehmen automatisieren. </font><font style="vertical-align: inherit;">Eines der wichtigsten Tools f√ºr die Interaktion mit Mitarbeitern ist E-Mail. </font><font style="vertical-align: inherit;">Neben Mail l√∂st DO auch andere Aufgaben:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zeiterfassung</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bilanzierung von Abwesenheiten</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Antr√§ge f√ºr Kuriere / Transport</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mitarbeiterkalender</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Registrierung der Korrespondenz</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mitarbeiterkontakte (Adressbuch)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unternehmensforum</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zimmerreservierung</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Veranstaltungsplanung</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CRM</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kollektive Arbeit mit Dateien (unter Beibehaltung von Dateiversionen)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">usw. </font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In der Dokumentenverwaltung geben wir den </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Thin Client</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (native ausf√ºhrbare Anwendung) von Windows, Linux, macOS, dem </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Webclient</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (von Browsern) und dem </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mobilen Client ein</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - je nach Situation. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und dank unseres anderen Produkts, das mit dem Dokumentenmanagement verbunden ist - </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dem Interaktionssystem</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Wir erhalten direkt in der Dokumentenverwaltung die Messenger-Funktionalit√§t - Chats, Audio- und Videoanrufe (einschlie√ülich Gruppenanrufe, die jetzt besonders wichtig geworden sind, auch von einem mobilen Client), schnelle Dateifreigabe sowie die M√∂glichkeit, Chat-Bots zu schreiben, die die Arbeit mit dem System vereinfachen. Ein weiteres Plus bei der Verwendung des Interaktionssystems (im Vergleich zu anderen Messenger) ist die M√∂glichkeit, kontextbezogene Diskussionen zu f√ºhren, die an bestimmte Objekte der Dokumentenverwaltung gebunden sind - Dokumente, Ereignisse usw. Das hei√üt, das Interaktionssystem ist tief in die Zielanwendung integriert und fungiert nicht als ‚Äûseparate Schaltfl√§che‚Äú.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Anzahl der Briefe in unserem DL hat bereits 100 Millionen √ºberschritten, und im Allgemeinen im DBMS - mehr als 11 Milliarden Datens√§tze. </font><font style="vertical-align: inherit;">Insgesamt verbraucht das System fast 30 TB Speicher: Die Datenbank ist 7,5 TB gro√ü, Dateien f√ºr die kollektive Arbeit sind separat und belegen weitere 21 TB. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn wir √ºber spezifischere Zahlen sprechen, dann ist hier die Anzahl der Buchstaben und Dateien im Moment:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ausgehende Briefe - 14,7 Millionen.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eingehende Briefe - 85,4 Millionen</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dateiversionen - 70,8 Millionen</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Interne Dokumente - 30,6 Tausend</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In DO gibt es nicht nur Mail und Dateien. </font><font style="vertical-align: inherit;">Nachfolgend finden Sie die Nummern anderer Buchhaltungsobjekte:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Konferenzraumreservierung - 52 126</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wochenberichte - 153.940</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">T√§gliche Berichte - 628 153</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Visumgenehmigung - 11.821</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eingehende Dokumente - 79 677</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ausgehende Dokumente - 28 357</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aufzeichnungen von Ereignissen in den Arbeitskalendern der Benutzer - 168.228</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Antr√§ge f√ºr Kuriere - 21 883</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gegenparteien - 81 029</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aufzeichnungen √ºber die Arbeit mit Auftragnehmern - 45 632</font></font></li>
<li>   ‚Äì 41 795</li>
<li> ‚Äì 10 243</li>
<li> ‚Äì 6 320</li>
<li>  ‚Äì 245 980</li>
<li>   ‚Äì 26 282</li>
<li>   ‚Äì 891 095</li>
<li>- ‚Äì 109 056.       ‚Äì , , , ,   ..     ,  ,  ,  ,     .      ,  ,           .</li>
</ul><br>
<h2>      ?</h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Diese Zahlen weisen auf eine beeindruckende Anzahl von Aufgaben hin, sodass wir vor der Notwendigkeit standen, ziemlich produktive Ausr√ºstung f√ºr die Bed√ºrfnisse interner Tochterunternehmen bereitzustellen. </font><font style="vertical-align: inherit;">Bisher sind seine Eigenschaften wie folgt: 38 Kerne, 240 GB RAM, 26 TB Laufwerke. </font><font style="vertical-align: inherit;">Wir </font></font><br>
<img src="https://habrastorage.org/webt/lt/l1/8t/ltl18tfpfsmxrdo8drblk-04r2o.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
geben die </font><font style="vertical-align: inherit;">Tabelle der Server an: </font><font style="vertical-align: inherit;">In Zukunft planen wir, die Kapazit√§t der Ger√§te zu erh√∂hen.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Was ist mit dem Laden des Servers?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Netzwerkaktivit√§t war f√ºr uns oder unsere Kunden nie ein Problem. Die Schwachstelle ist in der Regel der Prozessor und die Festplatten, da jeder bereits wei√ü, wie man mit Speichermangel umgeht. Hier sind Screenshots unserer Server von Resource Monitor, die zeigen, dass wir keine schreckliche Last haben, es ist sehr bescheiden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im folgenden Screenshot sehen wir beispielsweise einen SQL Server, auf dem die CPU zu 23% ausgelastet ist. Und dies ist ein sehr guter Indikator (zum Vergleich: Wenn sich die Last 70% n√§hert, werden die Mitarbeiter h√∂chstwahrscheinlich erhebliche Verlangsamungen beobachten). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vz/-w/oo/vz-woobphp0n1zll7bnpvwlxflk.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der zweite Screenshot zeigt den Anwendungsserver, auf dem die 1C: Enterprise-Plattform ausgef√ºhrt wird - er dient nur Benutzersitzungen. Hier ist die Prozessorlast etwas h√∂her - 38%, es ist glatt und ruhig. Es wird eine Festplatte geladen, dies ist jedoch akzeptabel.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/bz/qd/uv/bzqduvuuvjk4i0dchiimfrauum0.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der dritte Screenshot zeigt einen weiteren 1C: Enterprise-Server (es ist der zweite, wir haben zwei davon im Cluster). </font><font style="vertical-align: inherit;">Nur der vorherige dient Benutzern, und Roboter arbeiten daran. </font><font style="vertical-align: inherit;">Zum Beispiel erhalten sie Post, leiten Dokumente weiter, tauschen Daten aus, pr√ºfen Rechte usw. </font><font style="vertical-align: inherit;">Alle diese Hintergrundaktivit√§ten f√ºhren ungef√§hr 90-100 Hintergrundaufgaben aus. </font><font style="vertical-align: inherit;">Und dieser Server ist mit 88% sehr besch√§ftigt. </font><font style="vertical-align: inherit;">Dies betrifft jedoch nicht die Mitarbeiter und implementiert nur die gesamte Automatisierung, die das Dokumentenmanagement ausf√ºhren sollte.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/fi/k7/o3/fik7o3yrdbucybkekjymjrgq1aa.png" alt="Bild"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Welche Metriken bestimmen die Leistung?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir haben in die BS ein seri√∂ses Subsystem zur Messung von Leistungsindikatoren und zur Berechnung verschiedener Metriken eingebaut. </font><font style="vertical-align: inherit;">Dies ist notwendig, um zum gegenw√§rtigen Zeitpunkt und in der historischen Perspektive zu verstehen, was im System geschieht, was schlechter wird, was besser wird. </font><font style="vertical-align: inherit;">√úberwachungstools - Metriken und Zeitmessungen - sind im Standardpaket "1C: Document Management 8" enthalten. </font><font style="vertical-align: inherit;">Metriken m√ºssen bei der Implementierung angepasst werden, der Mechanismus selbst ist jedoch typisch. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Metriken sind Messungen verschiedener Gesch√§ftsindikatoren zu bestimmten Zeitpunkten (z. B. durchschnittliche Postzustellzeit zum Zeitpunkt von 10 Minuten). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eine der Metriken zeigt die Anzahl der aktiven Benutzer in der Datenbank. </font><font style="vertical-align: inherit;">Im Durchschnitt gibt es 1000-1400 davon pro Tag. </font><font style="vertical-align: inherit;">Die Grafik zeigt, dass sich zum Zeitpunkt des Screenshots 2144 aktive Benutzer in der Datenbank befanden.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/pr/ca/is/prcaismpjrysr1jm8pr3m77w4j8.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gibt mehr als 30 solcher Aktionen, die Liste ist unter dem Schnitt.</font></font><div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Liste</font></font></b><div class="spoiler_text"><ul>
<li>  </li>
<li>  </li>
<li> </li>
<li>  </li>
<li>  </li>
<li>  </li>
<li>   </li>
<li>  </li>
<li> </li>
<li> </li>
<li>  </li>
<li> </li>
<li> </li>
<li> </li>
<li>  </li>
<li> </li>
<li> </li>
<li> </li>
<li></li>
<li></li>
<li> </li>
<li></li>
<li>  </li>
<li> </li>
<li>  </li>
<li> </li>
<li>    </li>
<li>  </li>
<li>  </li>
<li></li>
<li> </li>
</ul><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In der vorletzten Woche hat sich unsere durchschnittliche Benutzeraktivit√§t um das Eineinhalbfache erh√∂ht (die Grafik ist rot dargestellt) - dies ist auf den √úbergang der meisten Mitarbeiter zur Fernarbeit zur√ºckzuf√ºhren (im Zusammenhang mit bekannten Ereignissen). Au√üerdem erh√∂hte sich die Anzahl der aktiven Benutzer um das Dreifache (blau auf dem Bildschirm angezeigt), als die Mitarbeiter anfingen, das Handy aktiv zu nutzen: Jeder mobile Client stellt eine Verbindung zum Server her. Im Durchschnitt gibt es f√ºr jeden unserer Mitarbeiter zwei Verbindungen zum Server.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/_p/la/oy/_plaoyah-fhvkshuadl9ftidsty.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
F√ºr uns wie f√ºr Administratoren ist dies ein Signal, dass wir auf Geschwindigkeitsprobleme achten m√ºssen, um zu sehen, ob es schlimmer geworden ist. Und wir sehen es anders. Zum Beispiel, wie sich die Zustellzeit f√ºr das interne Routing √§ndert (der Screenshot unten zeigt blau). Wir sehen, dass es bis zu diesem Jahr gesprungen ist und jetzt stabil ist - f√ºr uns ist es ein Indikator daf√ºr, dass mit dem System alles in Ordnung ist. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ws/-j/es/ws-jes5n002oaglztg92x6rhc70.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eine weitere f√ºr uns angewendete Metrik ist die durchschnittliche Wartezeit f√ºr das Herunterladen von Briefen vom Mailserver (im Screenshot rot dargestellt). Grob gesagt, wie lange wird der Brief im Internet bleiben, bevor er an unseren Mitarbeiter geht. Der Screenshot zeigt, dass sich diese Zeit auch in letzter Zeit nicht ge√§ndert hat. Es gibt separate Ausbr√ºche - diese sind jedoch nicht mit Verz√∂gerungen verbunden, sondern mit der Tatsache, dass auf Mailservern Zeit verloren geht.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/e-/tq/yk/e-tqykeehhyd-ztfieowpmodpro.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Oder zum Beispiel eine andere Metrik (im Screenshot blau dargestellt) - Aktualisieren von Buchstaben in einem Ordner. Das √ñffnen eines E-Mail-Ordners ist ein sehr h√§ufiger Vorgang und muss schnell erledigt werden. Wir messen, wie schnell es durchgef√ºhrt wird. Dieser Indikator wird f√ºr jeden Kunden gemessen. Sie sehen das Gesamtbild des Unternehmens und beispielsweise die Dynamik eines einzelnen Mitarbeiters. Der Screenshot zeigt, dass die Metrik bis zu diesem Jahr unausgeglichen war, dann haben wir eine Reihe von Verbesserungen vorgenommen, und jetzt wird es nicht schlimmer - ein fast gleichm√§√üiger Zeitplan. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/w-/ew/ay/w-eway3c2wyaubpqk1onjq4ptjm.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Metriken sind im Grunde ein Administrator-Tool zur √úberwachung des Systems, um schnell auf √Ñnderungen im Systemverhalten zu reagieren. Auf einem Screenshot - Metriken der internen DO f√ºr ein Jahr. Der Sprung in die Grafiken ist darauf zur√ºckzuf√ºhren, dass wir die Aufgabe haben, interne Tochtergesellschaften zu entwickeln.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/fj/pt/d1/fjptd1wgq42u1dpgl6p96cwuwv4.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier ist eine Liste weiterer Metriken (unter dem Schnitt).</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Metriken</font></font></b><div class="spoiler_text"><ul>
<li> </li>
<li> </li>
<li> </li>
<li> </li>
<li>  ()</li>
<li> </li>
<li>    </li>
<li> </li>
<li> </li>
<li>          10 </li>
<li>  :  </li>
<li>    </li>
<li> </li>
<li> </li>
<li>      </li>
<li>      ( )</li>
<li>      ( )</li>
<li>      ( )</li>
<li>      ( )</li>
<li>      ()</li>
<li>  </li>
<li>  </li>
<li>  ¬´    ¬ª</li>
<li>    </li>
<li>   </li>
<li>    </li>
<li>   </li>
</ul><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unser System misst rund um die Uhr mehr als 150 Indikatoren, aber nicht alle k√∂nnen schnell √ºberwacht werden. </font><font style="vertical-align: inherit;">Sie k√∂nnen sp√§ter aus historischer Sicht n√ºtzlich sein, und Sie k√∂nnen sich auf das Wichtigste f√ºr das Gesch√§ft konzentrieren.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bei einer der Implementierungen wurden beispielsweise nur 5 Indikatoren ausgew√§hlt. Der Kunde hat sich zum Ziel gesetzt, ein Mindestma√ü an Indikatoren zu erstellen, gleichzeitig aber auch die wichtigsten Arbeitsszenarien abzudecken. Es w√§re ungerechtfertigt, 150 Indikatoren in den Akt der Akzeptanz aufzunehmen, da es selbst innerhalb des Unternehmens schwierig ist, zu vereinbaren, welche Indikatoren als akzeptabel angesehen werden. Und sie wussten von diesen 5 Indikatoren und pr√§sentierten sie dem System bereits vor Beginn des Implementierungsprojekts, einschlie√ülich in der Ausschreibungsdokumentation: Karten√∂ffnungszeit nicht mehr als 3 Sekunden, Aufgabenausf√ºhrungszeit mit einer Datei nicht mehr als 5 Sekunden usw. In unseren Tochtergesellschaften gab es genau Kennzahlen, die die urspr√ºngliche Anforderung der Kundenanforderungen sehr deutlich widerspiegelten.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Au√üerdem haben wir eine Profilanalyse von Leistungsmessungen. </font><font style="vertical-align: inherit;">Leistungsindikatoren sind die Festlegung der Dauer jeder ausgef√ºhrten Operation (Schreiben eines Briefes an die Datenbank, Senden eines Briefes an den Mailserver usw.). </font><font style="vertical-align: inherit;">Es wird ausschlie√ülich von technischen Spezialisten verwendet. </font><font style="vertical-align: inherit;">Wir haben viele Leistungsindikatoren in unserem Programm. </font><font style="vertical-align: inherit;">Wir messen jetzt ungef√§hr 1.500 Schl√ºsseloperationen, die nach Profilen aufgeschl√ºsselt sind. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/kp/kw/ht/kpkwhtmfno5e6log8ozegzltuie.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eines der wichtigsten Profile f√ºr uns ist die ‚ÄûListe der Schl√ºsselindikatoren f√ºr Post aus Sicht der Verbraucher‚Äú. </font><font style="vertical-align: inherit;">Dieses Profil enth√§lt beispielsweise die folgenden Indikatoren:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Befehlsausf√ºhrung: Nach Tag filtern</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Formular √∂ffnen: Formular auflisten</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Befehlsausf√ºhrung: Nach Ordner ausw√§hlen</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zeigen Sie Buchstaben im Lesebereich an</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Speichern eines Briefes in Ihrem Lieblingsordner</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Buchstaben nach Details suchen</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erstellen Sie einen Brief</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn wir feststellen, dass die Metrik f√ºr einen Gesch√§ftsindikator zu gro√ü geworden ist (z. B. kamen Briefe eines bestimmten Benutzers sehr lange an), beginnen wir zu verstehen und wenden uns der Messung der Zeit des technischen Betriebs zu. </font><font style="vertical-align: inherit;">Wir haben die technische Operation "Briefe auf dem Mailserver archivieren" - wir sehen den Zeit√ºberschuss f√ºr diese Operation f√ºr den letzten Zeitraum. </font><font style="vertical-align: inherit;">Dieser Vorgang zerlegt sich wiederum in andere Vorg√§nge, z. B. das Herstellen einer Verbindung zum Mailserver. </font><font style="vertical-align: inherit;">Wir sehen, dass es aus irgendeinem Grund pl√∂tzlich sehr gro√ü wurde (wir haben alle Messungen in einem Monat - wir k√∂nnen diese letzte Woche 10 Millisekunden und jetzt 1000 Millisekunden vergleichen). </font><font style="vertical-align: inherit;">Und wir verstehen, dass hier etwas kaputt ist - wir m√ºssen es reparieren.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wie pflegen wir eine so gro√üe Datenbank?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unsere interne DO ist ein Beispiel f√ºr ein wirklich funktionierendes, hoch belastetes Projekt. </font><font style="vertical-align: inherit;">Lassen Sie uns √ºber die technischen Funktionen der Datenbank sprechen.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wie lange dauert die Umstrukturierung gro√üer Datenbanktabellen?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SQL Server erfordert eine regelm√§√üige Wartung und Bereinigung der Tabellen. </font><font style="vertical-align: inherit;">In guter Weise sollte dies mindestens einmal am Tag und bei stark nachgefragten Tischen erfolgen - noch h√§ufiger. </font><font style="vertical-align: inherit;">Wenn die Basis jedoch gro√ü ist (und unsere Anzahl von Datens√§tzen bereits 11 Milliarden √ºberschritten hat), ist es nicht einfach, sich darum zu k√ºmmern. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir haben die Tische vor 6 Jahren umstrukturiert, aber dann dauerte es so lange, dass wir nicht mehr in die n√§chtlichen Intervalle passten. </font><font style="vertical-align: inherit;">Und da diese Vorg√§nge den SQL Server stark belasten, kann er anderen Benutzern keine hochwertigen Dienste bereitstellen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Deshalb m√ºssen wir jetzt verschiedene Tricks anwenden. Beispielsweise k√∂nnen wir diese Prozeduren nicht f√ºr vollst√§ndige Datens√§tze ausf√ºhren. Sie m√ºssen auf die Prozedur "Beispiel 500000 Zeilen aktualisieren" zur√ºckgreifen - dies dauert 14 Minuten. Es aktualisiert nicht die Statistiken f√ºr alle Daten in der Tabelle, sondern w√§hlt eine halbe Million Zeilen aus und berechnet daraus Statistiken, die f√ºr die gesamte Tabelle verwendet werden. Dies ist eine Annahme, aber wir sind gezwungen, uns daf√ºr zu entscheiden, da f√ºr eine bestimmte Tabelle die Sammlung von Statistiken f√ºr die gesamte Milliarde Datens√§tze unannehmbar lang sein wird. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/dl/mq/9q/dlmq9qvlqsafte96p7yjhllxegm.png" alt="Bild"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir haben auch andere Wartungsvorg√§nge optimiert, indem wir sie teilweise gemacht haben.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Wartung eines DBMS ist im Allgemeinen eine schwierige Aufgabe. </font><font style="vertical-align: inherit;">Bei aktiver Interaktion zwischen Mitarbeitern w√§chst die Datenbank schnell und es wird f√ºr Administratoren immer schwieriger, sie zu verwalten - Statistiken aktualisieren, defragmentieren und indizieren. </font><font style="vertical-align: inherit;">Hier m√ºssen wir verschiedene Strategien anwenden, wir wissen genau, wie das geht, wir haben Erfahrung, wir k√∂nnen sie teilen.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wie wird das Backup mit solchen Volumes implementiert?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eine vollst√§ndige Sicherung des DBMS wird einmal t√§glich nachts schrittweise durchgef√ºhrt - jede Stunde. </font><font style="vertical-align: inherit;">Au√üerdem wird jeden Tag ein Dateiverzeichnis erstellt, das Teil der inkrementellen Sicherung des Dateispeichers ist.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wie lange dauert eine vollst√§ndige Sicherung?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Auf einer Festplatte wird eine vollst√§ndige Sicherung in drei Stunden durchgef√ºhrt, teilweise in einer Stunde. </font><font style="vertical-align: inherit;">Das Schreiben auf das Band dauert l√§nger (ein spezielles Ger√§t, das eine Sicherungskopie auf eine au√üerhalb des B√ºros gespeicherte spezielle Kassette erstellt; eine ver√§u√üerbare Kopie wird auf das Band erstellt, die gespeichert wird, wenn beispielsweise der Server durchbrennt). </font><font style="vertical-align: inherit;">Die Sicherung erfolgt genau auf demselben Server, dessen Parameter h√∂her waren - SQL-Server mit 20% Prozessorlast. </font><font style="vertical-align: inherit;">Zum Zeitpunkt der Sicherung wird das System nat√ºrlich viel schlechter, aber es ist immer noch betriebsbereit.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/xq/sb/6j/xqsb6jqlw7y8fg5pgpwwhghhm74.png" alt="Bild"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gibt es eine Deduplizierung?</font></font></h3><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es gibt eine </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">Dateideduplizierung</font></a><font style="vertical-align: inherit;"> , wir f√ºhren sie selbst aus und bald wird sie in der neuen Version von Document Management enthalten sein. </font><font style="vertical-align: inherit;">Wir arbeiten auch mit dem Deduplizierungsmechanismus der Gegenpartei. </font><font style="vertical-align: inherit;">Auf DBMS-Ebene erfolgt keine Deduplizierung von Datens√§tzen, da dies nicht erforderlich ist. </font><font style="vertical-align: inherit;">Die 1C: Enterprise-Plattform speichert Objekte im DBMS, und nur die Plattform kann f√ºr deren Konsistenz verantwortlich sein.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gibt es schreibgesch√ºtzte Knoten?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gibt keine Knoten zum Lesen (dedizierte Systemknoten, die diejenigen bedienen, die Lesedaten empfangen m√ºssen). </font><font style="vertical-align: inherit;">DO ist kein Abrechnungssystem f√ºr einen separaten BI-Knoten, aber es gibt einen separaten Knoten f√ºr die Entwicklungsabteilung, der mit Nachrichten im JSON-Format ausgetauscht wird. Typische Replikationszeiten sind Einheiten und mehrere zehn Sekunden. </font><font style="vertical-align: inherit;">Der Knoten ist immer noch klein, hat ungef√§hr 800 Millionen Eintr√§ge, w√§chst aber schnell.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Und zum L√∂schen markierte Nachrichten werden √ºberhaupt nicht gel√∂scht?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Noch nicht. </font><font style="vertical-align: inherit;">Wir haben keine Aufgaben, um die Basis zu erleichtern. </font><font style="vertical-align: inherit;">Es gab mehrere ziemlich schwerwiegende F√§lle, in denen ich mich Briefen zuwenden musste, die zum L√∂schen markiert waren, einschlie√ülich 2009. </font><font style="vertical-align: inherit;">Deshalb haben wir uns vorerst entschlossen, alles zu behalten. </font><font style="vertical-align: inherit;">Aber wenn die Kosten daf√ºr ungerechtfertigt werden, werden wir √ºber die Entfernung nachdenken. </font><font style="vertical-align: inherit;">Wenn Sie jedoch einen separaten Buchstaben mit den Enden aus der Datenbank entfernen m√ºssen, damit keine Spuren vorhanden sind, kann dies auf besonderen Wunsch erfolgen.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Warum aufbewahren? </font><font style="vertical-align: inherit;">Gibt es Statistiken √ºber den Zugriff auf alte Dokumente?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gibt keine Statistiken. </font><font style="vertical-align: inherit;">Genauer gesagt liegt es in Form eines Benutzerprotokolls vor, das jedoch nicht lange gespeichert wird. </font><font style="vertical-align: inherit;">Datens√§tze, die √§lter als ein Jahr sind, werden aus dem Protokoll gel√∂scht. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gab Situationen, in denen es notwendig war, die alte Korrespondenz von vor f√ºnf oder sogar zehn Jahren zu erheben. </font><font style="vertical-align: inherit;">Und dies geschah immer nicht aus m√º√üiger Neugier, sondern um komplexe Gesch√§ftsentscheidungen zu treffen. </font><font style="vertical-align: inherit;">Es gab einen Fall, in dem ohne die Geschichte der Korrespondenz die falsche Gesch√§ftsentscheidung getroffen w√ºrde.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wie ist die Pr√ºfung des Wertes und der Vernichtung von Dokumenten nach der Aufbewahrungsdauer?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bei Papierdokumenten erfolgt dies wie bei allen anderen auf die √ºbliche traditionelle Weise. </font><font style="vertical-align: inherit;">F√ºr elektronische Ger√§te tun wir das nicht - lassen Sie es speichern. </font><font style="vertical-align: inherit;">Das Sitzen ist hier. </font><font style="vertical-align: inherit;">Es gibt einen Vorteil. </font><font style="vertical-align: inherit;">Alles ist gut.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Was sind die Entwicklungsperspektiven?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt l√∂st unser DO ungef√§hr 30 interne Probleme, von denen einige am Anfang des Artikels aufgef√ºhrt sind. </font><font style="vertical-align: inherit;">DO wird auch verwendet, um Konferenzen vorzubereiten, die wir zweimal im Jahr f√ºr unsere Partner abhalten: das gesamte Programm, alle Berichte, alle parallelen Abschnitte, Hallen - all dies wird in DO erstellt und dann von dort heruntergeladen und ein gedrucktes Programm erstellt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Auf dem Weg zu DO gibt es noch einige weitere Aufgaben, zus√§tzlich zu denen, die er bereits l√∂st. </font><font style="vertical-align: inherit;">Es gibt unternehmensweite Aufgaben, aber es gibt einzigartige und seltene Aufgaben, die nur von einer bestimmten Einheit ben√∂tigt werden. </font><font style="vertical-align: inherit;">Es ist notwendig, ihnen zu helfen und daher die "Geographie" der Verwendung des Systems innerhalb von 1C zu erweitern - um den Umfang zu erweitern, die Aufgaben aller Abteilungen zu l√∂sen. </font><font style="vertical-align: inherit;">Dies w√§re der beste Test f√ºr Leistung und Zuverl√§ssigkeit. </font><font style="vertical-align: inherit;">Ich w√ºrde gerne sehen, dass das System mit Billionen von Datens√§tzen und Petabyte an Informationen arbeitet.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de496512/index.html"># 05 - Und ein ganzes Byte reicht nicht ... | Anime</a></li>
<li><a href="../de496514/index.html">IPIP IPsec VPN-Tunnel zwischen Linux-Maschine und Mikrotik hinter NAT-Provider</a></li>
<li><a href="../de496516/index.html">Telegrammbot in Python gegen COVID-19</a></li>
<li><a href="../de496518/index.html">Wie sind wir zur Fernbedienung gekommen?</a></li>
<li><a href="../de496528/index.html">Die Lokalisierung eines QR-Codes ist eine wichtige Aufgabe, die zu Unrecht der Aufmerksamkeit beraubt wird</a></li>
<li><a href="../de496536/index.html">DeepCode: Seitenansicht</a></li>
<li><a href="../de496538/index.html">Fraktale in Python. Exemplarische Vorgehensweise</a></li>
<li><a href="../de496542/index.html">Der Internetverkehr in Europa ist eineinhalb Mal gewachsen. Backbone-Anbieter zeichnen Ladedatens√§tze auf</a></li>
<li><a href="../de496544/index.html">Online-Hackathon von Projekten f√ºr Selbstst√§ndige: 500 Tausend Rubel f√ºr ihre Ideen und Unterst√ºtzung durch den Bundessteuerdienst</a></li>
<li><a href="../de496546/index.html">Startup innerhalb des Unternehmens</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>