<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>答   Reaccionar forma de desarrollo. Principios de KISS, YAGNI, DRY en la pr谩ctica  猬锔 ｏ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hola, en este tutorial veremos c贸mo desarrollar una forma muy simple pero controlada en React, centr谩ndonos en la calidad del c贸digo. 
 
 Al desarroll...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Reaccionar forma de desarrollo. Principios de KISS, YAGNI, DRY en la pr谩ctica</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/495518/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hola, en este tutorial veremos c贸mo desarrollar una forma muy simple pero controlada en React, centr谩ndonos en la calidad del c贸digo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al desarrollar nuestro formulario, seguiremos los principios de "BESO", "YAGNI", "SECO". </font><font style="vertical-align: inherit;">Para completar con 茅xito este tutorial no necesita conocer estos principios, los explicar茅 a lo largo del camino. </font><font style="vertical-align: inherit;">Sin embargo, creo que tiene un buen dominio del javascript moderno y puede </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pensar en React</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><a name="habracut"></a> <br>
<br>
<hr><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Estructura tutorial</font></font></h3><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A la causa! </font><font style="vertical-align: inherit;">Escribir un formulario simple usando KISS y YAGNI</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Refactorizaci贸n y SECO</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Qu茅 m谩s se puede hacer?</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">隆Oh no! </font><font style="vertical-align: inherit;">隆No lo hagas, por favor!</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">recomendaciones</font></font></a></li>
</ul><br>
<br>
<hr><br>
<a name="react-form-with-kiss-and-yagni"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A la causa! </font><font style="vertical-align: inherit;">Escribir un formulario simple usando KISS y YAGNI</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces, imaginemos que tenemos la tarea de implementar un formulario de autorizaci贸n:</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C贸digo de copia</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-keyword">const</span> logInData = {
  <span class="hljs-attr">nickname</span>: <span class="hljs-string">'Vasya'</span>,
  <span class="hljs-attr">email</span>: <span class="hljs-string">'pupkin@gmail.com'</span>,
  <span class="hljs-attr">password</span>: <span class="hljs-string">'Reac5$$$'</span>,<font></font>
};<font></font>
</code></pre></div></div><br>
<img src="https://habrastorage.org/webt/um/1u/vm/um1uvmjncpnlgaabmaui6rscw0s.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comenzamos nuestro desarrollo analizando los principios de KISS y YAGNI, olvidando temporalmente el resto de los principios. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
BESO - "Deje el c贸digo simple y tonto". Creo que est谩 familiarizado con el concepto de c贸digo simple. Pero, 驴qu茅 significa el c贸digo "tonto"? Seg煤n tengo entendido, este es un c贸digo que resuelve el problema utilizando el n煤mero m铆nimo de abstracciones, mientras que el anidamiento de estas abstracciones entre s铆 tambi茅n es m铆nimo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
YAGNI: "No lo necesitar谩s". El c贸digo debe poder hacer solo para lo que est谩 escrito. No creamos ninguna funcionalidad que pueda ser necesaria m谩s adelante o que mejore la aplicaci贸n en nuestra opini贸n. Hacemos solo lo que se necesita espec铆ficamente para la implementaci贸n de la tarea. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sigamos estrictamente estos principios, pero tambi茅n consideremos:</font></font><br>
<br>
<ul>
<li><code>initialData</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y </font></font><code>onSubmit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para </font></font><code>LogInForm</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">viene de la parte superior (esta es una t茅cnica 煤til, especialmente cuando el formulario debe ser capaz de procesar </font></font><code>create</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y </font></font><code>update</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">al mismo tiempo)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">debe tener para cada campo </font></font><code>label</code></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adem谩s, echemos de menos la estilizaci贸n, ya que no es interesante para nosotros y es v谩lida, ya que este es un tema para un tutorial por separado. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Implemente el formulario usted mismo, siguiendo los principios descritos anteriormente.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mi forma de implementaci贸n</font></font></b><div class="spoiler_text"> <div class="spoiler"><b class="spoiler_title">  </b><div class="spoiler_text"> <pre><code class="javascript hljs"><span class="hljs-keyword">const</span> LogInForm = <span class="hljs-function">(<span class="hljs-params">{ initialData, onSubmit }</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> [logInData, setLogInData] = useState(initialData);<font></font>
<font></font>
  <span class="hljs-keyword">const</span> handleSubmit = <span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> {<font></font>
    e.preventDefault();<font></font>
    onSubmit(logInData);<font></font>
  };<font></font>
<font></font>
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">{handleSubmit}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>
        Enter your nickname
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
          <span class="hljs-attr">value</span>=<span class="hljs-string">{logInData.nickname}</span>
          <span class="hljs-attr">onChange</span>=<span class="hljs-string">{e</span> =&gt;</span> setLogInData({ ...logInData, nickname: e.target.value })}
        /&gt;
      <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>
        Enter your email
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
          <span class="hljs-attr">type</span>=<span class="hljs-string">"email"</span>
          <span class="hljs-attr">value</span>=<span class="hljs-string">{logInData.email}</span>
          <span class="hljs-attr">onChange</span>=<span class="hljs-string">{e</span> =&gt;</span> setLogInData({ ...logInData, email: e.target.value })}
        /&gt;
      <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>
        Enter your password
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
          <span class="hljs-attr">type</span>=<span class="hljs-string">"password"</span>
          <span class="hljs-attr">value</span>=<span class="hljs-string">{logInData.password}</span>
          <span class="hljs-attr">onChange</span>=<span class="hljs-string">{e</span> =&gt;</span> setLogInData({ ...logInData, password: e.target.value })}
        /&gt;
      <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>Submit<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span><font></font>
  );<font></font>
};<font></font>
    </code></pre><br>
 </div></div><br>
 <img src="https://habrastorage.org/webt/kv/i6/l0/kvi6l0hduiubopcittxuxczjqby.png"><br>
</div></div><br>
 <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Su decisi贸n, muy probablemente, es algo diferente, porque cada desarrollador piensa de manera diferente. </font><font style="vertical-align: inherit;">Puede crear su propio estado para cada campo o colocar funciones de controlador en una variable separada, en cualquier caso, esto no es importante. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero si cre贸 inmediatamente una funci贸n de controlador para todos los campos, entonces esta ya no es la soluci贸n "m谩s tonta" del problema. </font><font style="vertical-align: inherit;">Y nuestro objetivo en esta etapa es crear el c贸digo m谩s simple y "tonto" para que luego podamos ver la imagen completa y seleccionar la mejor abstracci贸n. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si tiene exactamente el mismo c贸digo, 隆esto es genial y significa que nuestro pensamiento converge! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adem谩s trabajaremos con este c贸digo. </font><font style="vertical-align: inherit;">Es simple, pero a煤n lejos de ser ideal.</font></font><br>
<br>
<hr><br>
<a name="refactoring-and-dry"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Refactorizaci贸n y SECO</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es hora de lidiar con el principio DRY. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DRY, redacci贸n simplificada: "no duplique su c贸digo". </font><font style="vertical-align: inherit;">El principio parece simple, pero tiene un inconveniente: para deshacerse de la duplicaci贸n de c贸digo, debe crear abstracciones. </font><font style="vertical-align: inherit;">Si estas abstracciones no son lo suficientemente buenas, violaremos el principio KISS. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tambi茅n es importante comprender que DRY no es necesario para escribir c贸digo m谩s r谩pido. </font><font style="vertical-align: inherit;">Su tarea es simplificar la lectura y el soporte de nuestra soluci贸n. </font><font style="vertical-align: inherit;">Por lo tanto, no se apresure a crear abstracciones de inmediato. </font><font style="vertical-align: inherit;">Es mejor hacer una implementaci贸n simple de alguna parte del c贸digo, y luego analizar qu茅 abstracciones necesita crear para simplificar la lectura del c贸digo y reducir el n煤mero de lugares para los cambios cuando sean necesarios. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lista de verificaci贸n de la abstracci贸n correcta:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">el nombre de la abstracci贸n es totalmente consistente con su prop贸sito</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">la abstracci贸n realiza una tarea espec铆fica y comprensible</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La lectura del c贸digo del que se extrajo la abstracci贸n mejor贸</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces, vamos a refactorizar. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y hemos pronunciado c贸digo duplicado:</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C贸digo de copia</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs">  &lt;label&gt;<font></font>
    Enter your email<font></font>
    &lt;input<font></font>
      type=<span class="hljs-string">"email"</span><font></font>
      value={logInData.email}<font></font>
      onChange={e =&gt; setLogInData({ ...logInData, <span class="hljs-attr">email</span>: e.target.value })}<font></font>
    /&gt;<font></font>
  &lt;/label&gt;<font></font>
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>
    Enter your password
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
      <span class="hljs-attr">type</span>=<span class="hljs-string">"password"</span>
      <span class="hljs-attr">value</span>=<span class="hljs-string">{logInData.password}</span>
      <span class="hljs-attr">onChange</span>=<span class="hljs-string">{e</span> =&gt;</span> setLogInData({ ...logInData, password: e.target.value })}
    /&gt;
  <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></span>
</code></pre></div></div><br>
<img src="https://habrastorage.org/webt/sl/u5/1t/slu51tnyjsk5ki1kowgso6qx5mk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este c贸digo duplica una composici贸n de 2 elementos: </font></font><code>label</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>input</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Fusion茅moslos en una nueva abstracci贸n </font></font><code>InputField</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C贸digo de copia</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs">  &lt;label&gt;<font></font>
    Enter your email<font></font>
    &lt;input<font></font>
      type=<span class="hljs-string">"email"</span><font></font>
      value={logInData.email}<font></font>
      onChange={e =&gt; setLogInData({ ...logInData, <span class="hljs-attr">email</span>: e.target.value })}<font></font>
    /&gt;<font></font>
  &lt;/label&gt;<font></font>
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>
    Enter your password
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
      <span class="hljs-attr">type</span>=<span class="hljs-string">"password"</span>
      <span class="hljs-attr">value</span>=<span class="hljs-string">{logInData.password}</span>
      <span class="hljs-attr">onChange</span>=<span class="hljs-string">{e</span> =&gt;</span> setLogInData({ ...logInData, password: e.target.value })}
    /&gt;
  <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></span>
</code></pre></div></div><br>
<img src="https://habrastorage.org/webt/ff/wi/j5/ffwij5ors822a6fu8n7_ciuwe3w.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora el nuestro se </font></font><code>LogInForm</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ve as铆:</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C贸digo de copia</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-keyword">const</span> LogInForm = <span class="hljs-function">(<span class="hljs-params">{ initialData, onSubmit }</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> [logInData, setLogInData] = useState(initialData);<font></font>
<font></font>
  <span class="hljs-keyword">const</span> handleSubmit = <span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> {<font></font>
    e.preventDefault();<font></font>
    onSubmit(logInData);<font></font>
  };<font></font>
<font></font>
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">{handleSubmit}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">InputField</span>
        <span class="hljs-attr">label</span>=<span class="hljs-string">"Enter your nickname"</span>
        <span class="hljs-attr">value</span>=<span class="hljs-string">{logInData.nickname}</span>
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{e</span> =&gt;</span> setLogInData({ ...logInData, nickname: e.target.value })}
      /&gt;
      <span class="hljs-tag">&lt;<span class="hljs-name">InputField</span>
        <span class="hljs-attr">type</span>=<span class="hljs-string">"email"</span>
        <span class="hljs-attr">label</span>=<span class="hljs-string">"Enter your email"</span>
        <span class="hljs-attr">value</span>=<span class="hljs-string">{logInData.email}</span>
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{e</span> =&gt;</span> setLogInData({ ...logInData, email: e.target.value })}
      /&gt;
      <span class="hljs-tag">&lt;<span class="hljs-name">InputField</span>
        <span class="hljs-attr">type</span>=<span class="hljs-string">"password"</span>
        <span class="hljs-attr">label</span>=<span class="hljs-string">"Enter your password"</span>
        <span class="hljs-attr">value</span>=<span class="hljs-string">{logInData.password}</span>
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{e</span> =&gt;</span> setLogInData({ ...logInData, password: e.target.value })}
      /&gt;
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>Submit<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span><font></font>
  );<font></font>
};<font></font>
</code></pre></div></div><br>
<img src="https://habrastorage.org/webt/ns/ah/yi/nsahyidxew9tz3tqub5mcz09184.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Leer se ha vuelto m谩s f谩cil. </font><font style="vertical-align: inherit;">El nombre de la abstracci贸n corresponde a la tarea que resuelve. </font><font style="vertical-align: inherit;">El prop贸sito del componente es obvio. </font><font style="vertical-align: inherit;">El c贸digo se ha vuelto menos. </font><font style="vertical-align: inherit;">隆Entonces vamos en la direcci贸n correcta! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora est谩 claro que la </font></font><code>InputField.onChange</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">l贸gica est谩 duplicada. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lo que sucede all铆 se puede dividir en 2 etapas:</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C贸digo de copia</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-keyword">const</span> stage1 = <span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> e.target.value;
<span class="hljs-keyword">const</span> stage2 = <span class="hljs-function"><span class="hljs-params">password</span> =&gt;</span> setLogInData({ ...logInData, password });
</code></pre></div></div><br>
<img src="https://habrastorage.org/webt/n-/_o/dq/n-_odqnut4_5zg9-48xvusajjlg.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La primera funci贸n describe los detalles para obtener el valor del evento </font></font><code>input</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Tenemos la opci贸n de 2 abstracciones en las que podemos almacenar esta l贸gica: </font></font><code>InputField</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y </font></font><code>LogInForm</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para determinar correctamente a cu谩l de las abstracciones necesitamos referir nuestro c贸digo, tendremos que recurrir a la formulaci贸n completa del principio DRY: "Cada parte del conocimiento debe tener una representaci贸n 煤nica, consistente y autorizada dentro del sistema". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Parte del conocimiento en el ejemplo concreto es saber c贸mo obtener el valor del evento en </font></font><code>input</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Si almacenaremos este conocimiento en el nuestro </font></font><code>LogInForm</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, entonces es obvio que al usar nuestro</font></font><code>InputField</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en otra forma, tendremos que duplicar nuestro conocimiento, o llevarlo a una abstracci贸n separada y usarlo desde all铆. </font><font style="vertical-align: inherit;">Y seg煤n el principio KISS, deber铆amos tener el m铆nimo n煤mero posible de abstracciones. </font><font style="vertical-align: inherit;">De hecho, 驴por qu茅 necesitamos crear otra abstracci贸n si solo podemos poner esta l贸gica en la nuestra </font></font><code>InputField</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y el c贸digo externo no sabr谩 nada sobre c贸mo funciona la entrada en el interior </font></font><code>InputField</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">? </font><font style="vertical-align: inherit;">Simplemente tomar谩 un significado ya hecho, lo mismo que pasa hacia adentro. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si est谩 confundido de que pueda necesitar un evento en el futuro, recuerde el principio de YAGNI. </font><font style="vertical-align: inherit;">Siempre puedes agregar un accesorio adicional </font></font><code>onChangeEvent</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a nuestro componente </font></font><code>InputField</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hasta entonces se </font></font><code>InputField</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ver谩 as铆:</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C贸digo de copia</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-keyword">const</span> InputField = <span class="hljs-function">(<span class="hljs-params">{ label, type, value, onChange }</span>) =&gt;</span> (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>
    {label}
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
      <span class="hljs-attr">type</span>=<span class="hljs-string">{type}</span>
      <span class="hljs-attr">value</span>=<span class="hljs-string">{value}</span>
      <span class="hljs-attr">onChange</span>=<span class="hljs-string">{e</span> =&gt;</span> onChange(e.target.value)}
    /&gt;
  <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></span><font></font>
);<font></font>
</code></pre></div></div><br>
<img src="https://habrastorage.org/webt/cz/bc/bg/czbcbgp-xlbirtjno8_5enjc9lk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por lo tanto, se observa uniformidad del tipo durante la entrada y salida en el componente y se oculta la verdadera naturaleza de lo que est谩 sucediendo para el c贸digo externo. </font><font style="vertical-align: inherit;">Si en el futuro necesitamos otro componente ui, por ejemplo, casilla de verificaci贸n o selecci贸n, entonces tambi茅n mantendremos la uniformidad de tipo en la entrada-salida. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este enfoque nos brinda flexibilidad adicional, ya que nuestro formulario puede funcionar con cualquier fuente de entrada-salida sin la necesidad de producir controladores 煤nicos adicionales para cada uno. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este truco heur铆stico est谩 incorporado de forma predeterminada en muchos marcos. </font><font style="vertical-align: inherit;">Por ejemplo, esta es la idea principal </font></font><code>v-model</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en la </font></font><code>Vue</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que muchas personas adoran por su facilidad para trabajar con formularios. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Volvamos al negocio, actualice nuestro componente </font></font><code>LogInForm</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">de acuerdo con los cambios en </font></font><code>InputField</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C贸digo de copia</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-keyword">const</span> LogInForm = <span class="hljs-function">(<span class="hljs-params">{ initialData, onSubmit }</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> [logInData, setLogInData] = useState(initialData);<font></font>
<font></font>
  <span class="hljs-keyword">const</span> handleSubmit = <span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> {<font></font>
    e.preventDefault();<font></font>
    onSubmit(logInData);<font></font>
  };<font></font>
<font></font>
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">{handleSubmit}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">InputField</span>
        <span class="hljs-attr">label</span>=<span class="hljs-string">"Enter your nickname"</span>
        <span class="hljs-attr">value</span>=<span class="hljs-string">{logInData.nickname}</span>
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{nickname</span> =&gt;</span> setLogInData({ ...logInData, nickname })}
      /&gt;
      <span class="hljs-tag">&lt;<span class="hljs-name">InputField</span>
        <span class="hljs-attr">type</span>=<span class="hljs-string">"email"</span>
        <span class="hljs-attr">label</span>=<span class="hljs-string">"Enter your email"</span>
        <span class="hljs-attr">value</span>=<span class="hljs-string">{logInData.email}</span>
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{email</span> =&gt;</span> setLogInData({ ...logInData, email })}
      /&gt;
      <span class="hljs-tag">&lt;<span class="hljs-name">InputField</span>
        <span class="hljs-attr">type</span>=<span class="hljs-string">"password"</span>
        <span class="hljs-attr">label</span>=<span class="hljs-string">"Enter your password"</span>
        <span class="hljs-attr">value</span>=<span class="hljs-string">{logInData.password}</span>
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{password</span> =&gt;</span> setLogInData({ ...logInData, password })}
      /&gt;
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>Submit<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span><font></font>
  );<font></font>
};<font></font>
</code></pre></div></div><br>
<img src="https://habrastorage.org/webt/6b/cq/wb/6bcqwbfusg_fmw1pqbc8yxhxlsy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ya se ve bastante bien, 隆pero podemos hacerlo a煤n mejor! </font></font><br>
<br>
<code>Callback</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que se pasa </font></font><code>onChange</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">siempre hace lo mismo. </font><font style="vertical-align: inherit;">Solo se cambia la clave: contrase帽a, correo electr贸nico, apodo. </font><font style="vertical-align: inherit;">Por lo tanto, podemos sustituirla por una llamada a la funci贸n: </font></font><code>handleChange('password')</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Implementemos esta funci贸n:</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C贸digo de copia</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs">  <span class="hljs-keyword">const</span> handleChange = <span class="hljs-function"><span class="hljs-params">fieldName</span> =&gt;</span> <span class="hljs-function"><span class="hljs-params">fieldValue</span> =&gt;</span> {<font></font>
    setLogInData({<font></font>
      ...logInData,<font></font>
      [fieldName]: fieldValue,<font></font>
    });<font></font>
  };<font></font>
</code></pre></div></div><br>
<img src="https://habrastorage.org/webt/z7/po/o5/z7poo5vlkkdxtc939hzlt1gendk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como puede ver, la funci贸n recibe el argumento y lo almacena en el cierre del controlador, y el controlador vuelve inmediatamente al c贸digo externo. </font><font style="vertical-align: inherit;">Las funciones que parecen tomar argumentos uno a la vez para una llamada tambi茅n se denominan curry. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Veamos el c贸digo resultante:</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C贸digo de copia</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs">  <span class="hljs-keyword">const</span> LogInForm = <span class="hljs-function">(<span class="hljs-params">{ initialData, onSubmit }</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> [logInData, setLogInData] = useState(initialData);<font></font>
  <font></font>
    <span class="hljs-keyword">const</span> handleSubmit = <span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> {<font></font>
      e.preventDefault();<font></font>
      onSubmit(logInData);<font></font>
    };<font></font>
  <font></font>
    <span class="hljs-keyword">const</span> handleChange = <span class="hljs-function"><span class="hljs-params">fieldName</span> =&gt;</span> <span class="hljs-function"><span class="hljs-params">fieldValue</span> =&gt;</span> {<font></font>
      setLogInData({<font></font>
        ...logInData,<font></font>
        [fieldName]: fieldValue,<font></font>
      });<font></font>
    };<font></font>
  <font></font>
    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">{handleSubmit}</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">InputField</span>
          <span class="hljs-attr">label</span>=<span class="hljs-string">"Enter your nickname"</span>
          <span class="hljs-attr">value</span>=<span class="hljs-string">{logInData.nickname}</span>
          <span class="hljs-attr">onChange</span>=<span class="hljs-string">{handleChange(</span>'<span class="hljs-attr">nickname</span>')}
        /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">InputField</span>
          <span class="hljs-attr">type</span>=<span class="hljs-string">"email"</span>
          <span class="hljs-attr">label</span>=<span class="hljs-string">"Enter your email"</span>
          <span class="hljs-attr">value</span>=<span class="hljs-string">{logInData.email}</span>
          <span class="hljs-attr">onChange</span>=<span class="hljs-string">{handleChange(</span>'<span class="hljs-attr">email</span>')}
        /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">InputField</span>
          <span class="hljs-attr">type</span>=<span class="hljs-string">"password"</span>
          <span class="hljs-attr">label</span>=<span class="hljs-string">"Enter your password"</span>
          <span class="hljs-attr">value</span>=<span class="hljs-string">{logInData.password}</span>
          <span class="hljs-attr">onChange</span>=<span class="hljs-string">{handleChange(</span>'<span class="hljs-attr">password</span>')}
        /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>Submit<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span><font></font>
    );<font></font>
  };<font></font>
  <font></font>
  <span class="hljs-comment">// InputField.js</span>
  <span class="hljs-keyword">const</span> InputField = <span class="hljs-function">(<span class="hljs-params">{ type, label, value, onChange }</span>) =&gt;</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>
      {label}
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">{type}</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{value}</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">{e</span> =&gt;</span> onChange(e.target.value)} /&gt;
    <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></span><font></font>
  );<font></font>
</code></pre></div></div><br>
<img src="https://habrastorage.org/webt/bm/nu/td/bmnutdzasqokociudliqjyhli_k.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este c贸digo es una implementaci贸n breve, concisa y moderadamente declarativa de la tarea. </font><font style="vertical-align: inherit;">Refactorizar m谩s en el contexto de la tarea, en mi opini贸n, no tiene sentido.</font></font><br>
<br>
<hr><br>
<a name="what-else-can-we-do"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Qu茅 m谩s se puede hacer?</font></font></h2><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si tiene muchas formas en el proyecto, puede colocar el c谩lculo de handleChange en un gancho separado </font></font><code>useFieldChange</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C贸digo de copia</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs">  <span class="hljs-comment">// hooks/useFieldChange.js</span>
  <span class="hljs-keyword">const</span> useFieldChange = <span class="hljs-function"><span class="hljs-params">setState</span> =&gt;</span> <span class="hljs-function"><span class="hljs-params">fieldName</span> =&gt;</span> <span class="hljs-function"><span class="hljs-params">fieldValue</span> =&gt;</span> {<font></font>
    setState(<span class="hljs-function"><span class="hljs-params">state</span> =&gt;</span> ({<font></font>
      ...state,<font></font>
      [fieldName]: fieldValue,<font></font>
    }));<font></font>
  };<font></font>
  <span class="hljs-comment">// LogInForm.js</span>
  <span class="hljs-keyword">const</span> handleChange = useFieldChange(setLogInData);
</code></pre></div></div><br>
<img src="https://habrastorage.org/webt/eb/b8/eg/ebb8egvqobm-n27dn3tsuflcvly.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como se trata de una funci贸n pura (es decir, la primera vez que se llama porque siempre devuelve la misma funci贸n), no tiene que ser un enlace. </font><font style="vertical-align: inherit;">Pero el gancho parece conceptualmente una soluci贸n m谩s correcta y natural para React. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tambi茅n puede agregar soporte </font></font><code>callback</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en el lugar </font></font><code>fieldValue</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para replicar completamente el comportamiento habitual </font></font><code>setState</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">de </font></font><code>React</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C贸digo de copia</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs">  <span class="hljs-keyword">const</span> isFunc = <span class="hljs-function"><span class="hljs-params">val</span> =&gt;</span> <span class="hljs-keyword">typeof</span> val === <span class="hljs-string">"function"</span>;<font></font>
<font></font>
  <span class="hljs-keyword">const</span> useFieldChange = <span class="hljs-function"><span class="hljs-params">setState</span> =&gt;</span> <span class="hljs-function"><span class="hljs-params">fieldName</span> =&gt;</span> <span class="hljs-function"><span class="hljs-params">fieldValue</span> =&gt;</span> {<font></font>
    setState(<span class="hljs-function"><span class="hljs-params">state</span> =&gt;</span> ({<font></font>
      ...state,<font></font>
      [fieldName]: isFunc(fieldValue) ? fieldValue(state[fieldName]) : fieldValue,<font></font>
    }));<font></font>
  };<font></font>
</code></pre></div></div><br>
<img src="https://habrastorage.org/webt/fz/t5/pd/fzt5pdldmj5gdy7duoycglqqrfe.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un ejemplo de uso con nuestro formulario:</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C贸digo de copia</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs">  <span class="hljs-keyword">const</span> LogInForm = <span class="hljs-function">(<span class="hljs-params">{ initialData, onSubmit }</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> [logInData, setLogInData] = useState(initialData);
    <span class="hljs-keyword">const</span> handleChange = useFieldChange(setLogInData);<font></font>
  <font></font>
    <span class="hljs-keyword">const</span> handleSubmit = <span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> {<font></font>
      e.preventDefault();<font></font>
      onSubmit(logInData);<font></font>
    };<font></font>
  <font></font>
    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">{handleSubmit}</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">InputField</span>
          <span class="hljs-attr">label</span>=<span class="hljs-string">"Enter your nickname"</span>
          <span class="hljs-attr">value</span>=<span class="hljs-string">{logInData.nickname}</span>
          <span class="hljs-attr">onChange</span>=<span class="hljs-string">{handleChange(</span>'<span class="hljs-attr">nickname</span>')}
        /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">InputField</span>
          <span class="hljs-attr">type</span>=<span class="hljs-string">"email"</span>
          <span class="hljs-attr">label</span>=<span class="hljs-string">"Enter your email"</span>
          <span class="hljs-attr">value</span>=<span class="hljs-string">{logInData.email}</span>
          <span class="hljs-attr">onChange</span>=<span class="hljs-string">{handleChange(</span>'<span class="hljs-attr">email</span>')}
        /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">InputField</span>
          <span class="hljs-attr">type</span>=<span class="hljs-string">"password"</span>
          <span class="hljs-attr">label</span>=<span class="hljs-string">"Enter your password"</span>
          <span class="hljs-attr">value</span>=<span class="hljs-string">{logInData.password}</span>
          <span class="hljs-attr">onChange</span>=<span class="hljs-string">{handleChange(</span>'<span class="hljs-attr">password</span>')}
        /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>Submit<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span><font></font>
    );<font></font>
  };<font></font>
</code></pre></div></div><br>
<img src="https://habrastorage.org/webt/os/zb/ua/oszbuaygonezp9c2epw4st-msqy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero si su solicitud tiene solo un formulario, 隆no necesita hacer todo esto! </font><font style="vertical-align: inherit;">Porque contradice el principio YAGNI, siguiendo el cual no debemos hacer lo que no necesitamos para resolver un problema espec铆fico. </font><font style="vertical-align: inherit;">Si solo tiene una forma, los beneficios reales de tales movimientos no son suficientes. </font><font style="vertical-align: inherit;">Despu茅s de todo, redujimos el c贸digo de nuestro componente solo en 3 l铆neas, pero introdujimos una abstracci贸n adicional, ocultando una cierta l贸gica de la forma, que es mejor mantener en la superficie.</font></font><br>
<br>
<hr><br>
<a name="do-not-do-that-please"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">隆Oh no! </font><font style="vertical-align: inherit;">隆No lo hagas, por favor!</font></font></h2><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Formas de configuraci贸n en forma</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Las configuraciones bloqueadas son como una configuraci贸n de paquete web, solo para el formulario. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mejor con un ejemplo, mira este c贸digo:</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C贸digo de copia</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs">  <span class="hljs-keyword">const</span> Form = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">{handleSubmit}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">InputField</span>
        <span class="hljs-attr">label</span>=<span class="hljs-string">"Enter your nickname"</span>
        <span class="hljs-attr">value</span>=<span class="hljs-string">{state.nickname}</span>
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{handleChange(</span>'<span class="hljs-attr">nickname</span>')}
      /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">InputField</span>
        <span class="hljs-attr">type</span>=<span class="hljs-string">"email"</span>
        <span class="hljs-attr">label</span>=<span class="hljs-string">"Enter your email"</span>
        <span class="hljs-attr">value</span>=<span class="hljs-string">{state.email}</span>
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{handleChange(</span>'<span class="hljs-attr">email</span>')}
      /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">InputField</span>
        <span class="hljs-attr">type</span>=<span class="hljs-string">"password"</span>
        <span class="hljs-attr">label</span>=<span class="hljs-string">"Enter your password"</span>
        <span class="hljs-attr">value</span>=<span class="hljs-string">{state.password}</span>
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{handleChange(</span>'<span class="hljs-attr">password</span>')}
      /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>Submit<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span><font></font>
  );<font></font>
</code></pre></div></div><br>
<img src="https://habrastorage.org/webt/0t/ro/cn/0trocndcco4vp8yld7cl6qfc0pa.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A algunos les puede parecer que el c贸digo est谩 duplicado aqu铆, porque llamamos al mismo componente InputField, pasando all铆 la misma etiqueta, valor y par谩metros onChange. </font><font style="vertical-align: inherit;">Y comienzan a SECAR su propio c贸digo para evitar la duplicaci贸n imaginaria. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A menudo hacen esto as铆:</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C贸digo de copia</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-keyword">const</span> fields = [<font></font>
  {<font></font>
    <span class="hljs-attr">name</span>: <span class="hljs-string">'nickname'</span>,
    <span class="hljs-attr">label</span>: <span class="hljs-string">'Enter your nickname'</span>,<font></font>
  },<font></font>
  {<font></font>
    <span class="hljs-attr">type</span>: <span class="hljs-string">'email'</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">'email'</span>,
    <span class="hljs-attr">label</span>: <span class="hljs-string">'Enter your email'</span>,<font></font>
  },<font></font>
  {<font></font>
    <span class="hljs-attr">type</span>: <span class="hljs-string">'password'</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">'password'</span>,
    <span class="hljs-attr">label</span>: <span class="hljs-string">'Enter your password'</span>,<font></font>
  },<font></font>
];<font></font>
<font></font>
<span class="hljs-keyword">const</span> Form = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">{handleSubmit}</span>&gt;</span>
    {fields.map(({ type, name, label }) =&gt; (
      <span class="hljs-tag">&lt;<span class="hljs-name">InputField</span>
        <span class="hljs-attr">type</span>=<span class="hljs-string">{type}</span>
        <span class="hljs-attr">label</span>=<span class="hljs-string">{label}</span>
        <span class="hljs-attr">value</span>=<span class="hljs-string">{state[name]}</span>
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{handleChange(name)}</span>
      /&gt;</span>
    ))}
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>Submit<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span><font></font>
);<font></font>
</code></pre></div></div><br>
<img src="https://habrastorage.org/webt/qi/f4/b4/qif4b4hwl1wjsinh3d7pi5xtv74.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como resultado, con 17 l铆neas de c贸digo jsx obtenemos 16 l铆neas de la configuraci贸n. </font><font style="vertical-align: inherit;">隆Bravo! </font><font style="vertical-align: inherit;">Esto es lo que entiendo DRY. </font><font style="vertical-align: inherit;">Si tenemos 100 de estas entradas aqu铆, entonces obtenemos 605 y 506 l铆neas, respectivamente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero, como resultado, obtuvimos un c贸digo m谩s complejo, violando el principio KISS. </font><font style="vertical-align: inherit;">De hecho, ahora consta de 2 abstracciones: campos y un algoritmo (s铆, un algoritmo tambi茅n es una abstracci贸n), lo que lo convierte en un 谩rbol de elementos React. </font><font style="vertical-align: inherit;">Al leer este c贸digo, tendremos que saltar constantemente entre estas abstracciones. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero el mayor problema con este c贸digo es su soporte y extensi贸n. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Imagina lo que le suceder谩 si:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Se agregar谩n algunos tipos de campos m谩s con diferentes propiedades posibles</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">los campos se representan o no se basan en la entrada de otros campos</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">algunos campos requieren un procesamiento adicional al cambiar</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">los valores en selecciones dependen de selecciones anteriores</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esta lista puede continuar durante mucho tiempo ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para implementar esto, siempre tendr谩 que almacenar algunas funciones en su configuraci贸n, y el c贸digo que representa la configuraci贸n se convertir谩 gradualmente en Frankenstein, tomando un mont贸n de accesorios diferentes y lanz谩ndolos sobre diferentes componentes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El c贸digo que se escribi贸 anteriormente, basado en la composici贸n de los componentes, se expandir谩 silenciosamente, cambiar谩 a su gusto, sin ser muy complicado debido a la falta de abstracci贸n intermedia, un algoritmo que construye un 谩rbol de elementos React desde nuestra configuraci贸n. </font><font style="vertical-align: inherit;">Este c贸digo no est谩 duplicado. </font><font style="vertical-align: inherit;">Simplemente sigue un cierto patr贸n de dise帽o y, por lo tanto, parece "modelado".</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Optimizaci贸n in煤til</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Despu茅s de que aparecieron los ganchos en React, hubo una tendencia a envolver todos los manipuladores y componentes indiscriminadamente en </font></font><code>useCallback</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y </font></font><code>memo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">隆Por favor, no hagas eso! </font><font style="vertical-align: inherit;">Los desarrolladores de React no proporcionaron estos ganchos porque React es lento y todo necesita ser optimizado. </font><font style="vertical-align: inherit;">Proporcionan espacio para optimizar su aplicaci贸n en caso de que tenga problemas de rendimiento. </font><font style="vertical-align: inherit;">E incluso si encuentra tales problemas, no necesita envolver todo el proyecto </font></font><code>memo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y </font></font><code>useCallback</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Use </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Profiler</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para identificar problemas y solo luego memorizar en el lugar correcto. </font></font><br>
<br>
<u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La memorizaci贸n siempre har谩 que su c贸digo sea m谩s complicado, pero no siempre m谩s productivo. </font></font></u><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Veamos el c贸digo de un proyecto real. </font><font style="vertical-align: inherit;">Compare c贸mo se ve la funci贸n con </font></font><code>useCallback</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y sin:</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C贸digo de copia</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs">  <span class="hljs-keyword">const</span> applyFilters = useCallback(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    <span class="hljs-keyword">const</span> newSelectedMetrics = <span class="hljs-built_in">Object</span>.keys(selectedMetricsStatus).filter(
      <span class="hljs-function"><span class="hljs-params">metric</span> =&gt;</span> selectedMetricsStatus[metric],<font></font>
    );<font></font>
    onApplyFilterClick(newSelectedMetrics);<font></font>
  }, [selectedMetricsStatus, onApplyFilterClick]);<font></font>
<font></font>
  <span class="hljs-keyword">const</span> applyFilters = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    <span class="hljs-keyword">const</span> newSelectedMetrics = <span class="hljs-built_in">Object</span>.keys(selectedMetricsStatus).filter(
      <span class="hljs-function"><span class="hljs-params">metric</span> =&gt;</span> selectedMetricsStatus[metric],<font></font>
    );<font></font>
    onApplyFilterClick(newSelectedMetrics);<font></font>
  };<font></font>
</code></pre></div></div><br>
<img src="https://habrastorage.org/webt/nh/iq/r1/nhiqr1y0yajlgo101b-dytdcq0u.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La legibilidad del c贸digo aument贸 claramente despu茅s de la eliminaci贸n del contenedor, porque el c贸digo ideal es su falta. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El rendimiento de este c贸digo no ha aumentado, porque esta funci贸n se usa as铆:</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C贸digo de copia</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs">  &lt;RightFooterButton onClick={applyFilters}&gt;APPLY&lt;/RightFooterButton&gt;
</code></pre></div></div><br>
<img src="https://habrastorage.org/webt/wb/-7/a3/wb-7a33k1c2cjctumjl9wqi7ztu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De d贸nde </font></font><code>RightFooterButton</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: es solo </font></font><code>styled.button</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">de </font></font><code>styled-components</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, que se actualizar谩 muy r谩pidamente. </font><font style="vertical-align: inherit;">Pero el consumo de memoria aumenta nuestra aplicaci贸n porque React siempre se mantendr谩 en la memoria </font></font><code>selectedMetricsStatus</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>onApplyFilterClick</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y la versi贸n de la funci贸n </font></font><code>applyFilters</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, relevante para estas dependencias. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si estos argumentos no son suficientes para usted, lea el </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">art铆culo</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> que trata este tema m谩s ampliamente.</font></font><br>
<br>
<hr><br>
<a name="conclusions"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">recomendaciones</font></font></h2><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Las formas de reacci贸n son f谩ciles. </font><font style="vertical-align: inherit;">Los problemas con ellos surgen debido a los propios desarrolladores y la documentaci贸n de React, en la que este tema no se divulga con suficiente detalle.</font></font><br>
 </li>
<li>           aka value  onChange  .      useFieldChange,  ,     ,      <code>v-model</code>  <code>Vue</code>   .<br>
 </li>
<li>         KISS  YAGNI.    DRY,  ,      .</li>
<li>       ,         ,        React-    .<br>
 </li>
<li>  ,      .</li>
</ul><br>
<br>
<hr><br>
<h3>P.S.</h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Inicialmente, plane茅 escribir sobre la validaci贸n declarativa de formas anidadas complejas. </font><font style="vertical-align: inherit;">Pero, al final, decid铆 preparar a la audiencia para esto, de modo que la imagen fuera lo m谩s completa posible. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El siguiente tutorial tratar谩 sobre la validaci贸n del formulario simple implementado en este tutorial. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
隆Muchas gracias a todos los que leyeron hasta el final! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No importa c贸mo escriba el c贸digo o lo que haga, lo principal es disfrutarlo.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es495500/index.html">Alexey Klyanin: "Hasta 2018, us茅 OSM solo como sustrato en mi blog"</a></li>
<li><a href="../es495504/index.html">Kingston KC600 512GB: cohete s贸lido</a></li>
<li><a href="../es495508/index.html">驴El navegador necesita una voz?</a></li>
<li><a href="../es495512/index.html">驴Cu谩l es la mejor manera de calentar pizza?</a></li>
<li><a href="../es495516/index.html">La plantilla de visitante est谩 en desuso para Kotlin, pero vale la pena saber</a></li>
<li><a href="../es495520/index.html">Lista de verificaci贸n para un arquitecto</a></li>
<li><a href="../es495524/index.html">Qu茅 lenguaje de programaci贸n aprender para que las grandes empresas de recursos humanos lo busquen</a></li>
<li><a href="../es495526/index.html">Organizaci贸n del acceso remoto mediante Fortinet.</a></li>
<li><a href="../es495530/index.html">Convertidor de hardware HDMI-RGB (18/24 bits)</a></li>
<li><a href="../es495532/index.html">C贸mo las grandes empresas de TI transfirieron su personal al trabajo remoto</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>