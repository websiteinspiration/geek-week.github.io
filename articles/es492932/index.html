<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💥 🏐 🤖 13 herramientas de procesamiento de texto basadas en shell 🔳 🔢 👩🏽‍🏫</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Aquí hay un fragmento de un libro futuro, Herramientas y prácticas básicas para un desarrollador de software novato, de Balthazar Ruberol y Etienne Br...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>13 herramientas de procesamiento de texto basadas en shell</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/itsumma/blog/492932/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aquí hay un fragmento de un libro futuro, Herramientas y prácticas básicas para un desarrollador de software novato, de Balthazar Ruberol y </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Etienne Broad</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">El libro debería ayudar a educar a la generación más joven de desarrolladores. </font><font style="vertical-align: inherit;">Se tratarán temas tales como el dominio de la consola, la configuración y el trabajo de manera eficiente en la consola de comandos, control de versiones de código usando </font></font><code>git</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">conceptos básicos de SQL, como herramientas </font></font><code>Make</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>jq</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y expresiones regulares, fundamentos de la creación de redes, así como las mejores prácticas para el desarrollo de software y la colaboración. </font><font style="vertical-align: inherit;">Los autores están trabajando duro en este proyecto y están invitando a todos a participar en </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">la lista de correo</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contenido</font></font></h1><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gato</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cabeza</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cola</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">baño</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">grep</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cortar</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pegar</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ordenar</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">uniq</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">awk</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tr</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">doblez</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sed</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ejemplos reales</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Profundización: for y xargs loops</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Resumen</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Que sigue</font></font></a></li>
</ul><a name="habracut"></a><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Procesamiento de texto de shell</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Una de las razones que hacen que el shell de comandos sea una herramienta invaluable es la gran cantidad de comandos de procesamiento de texto y la capacidad de combinarlos fácilmente en la tubería, creando plantillas de procesamiento complejas. </font><font style="vertical-align: inherit;">Estos comandos hacen que muchas tareas sean triviales para analizar texto y datos, convertir datos entre diferentes formatos, filtrar cadenas, etc. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al trabajar con datos de texto, el principio principal es dividir cualquier problema complejo en muchos más pequeños, y resolver cada uno de ellos utilizando una herramienta especializada.</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Haga que cada programa haga una cosa bien: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">los fundamentos de la filosofía de Unix</font></font></a></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los ejemplos en este capítulo pueden parecer un poco exagerados a primera vista, pero esto se hace a propósito. </font><font style="vertical-align: inherit;">Cada una de las herramientas está diseñada para resolver un pequeño problema. </font><font style="vertical-align: inherit;">Sin embargo, cuando se combinan, se vuelven extremadamente poderosos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Analizaremos algunos de los comandos de procesamiento de texto más comunes y útiles en el shell de comandos y demostraremos los flujos de trabajo reales que los conectan entre sí. </font><font style="vertical-align: inherit;">Sugiero mirar el maná de estos equipos para ver todas las posibilidades a tu disposición.</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un archivo CSV de ejemplo </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">está disponible en línea</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Puede descargarlo para consultar el material.</font></font></blockquote><br>
<a name="1"></a><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gato</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El comando se </font></font><code>cat</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">utiliza para compilar una lista de uno o más archivos y mostrar su contenido en la pantalla.</font></font><br>
<br>
<pre><code class="plaintext hljs">$ cat Documents/readme<font></font>
Thanks again for reading this book!<font></font>
I hope you're following so far!<font></font>
<font></font>
$ cat Documents/computers<font></font>
Computers are not intelligent<font></font>
They're just fast at making dumb things.<font></font>
<font></font>
$ cat Documents/readme Documents/computers<font></font>
Thanks again for reading this book!<font></font>
I hope you are following so far!<font></font>
<font></font>
Computers are not intelligent<font></font>
They're just fast at making dumb things.</code></pre><br>
<a name="2"></a><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cabeza</font></font></h1><br>
<code>head</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">imprime las primeras n líneas en el archivo. </font><font style="vertical-align: inherit;">Esto puede ser muy útil para buscar un archivo de estructura y formato desconocidos sin llenar toda la consola con un montón de texto.</font></font><br>
<br>
<pre><code class="bash hljs">$ head -n 2 metadata.csv<font></font>
metric_name,metric_type,interval,unit_name,per_unit_name,description,orientation,integration,short_name<font></font>
mysql.galera.wsrep_cluster_size,gauge,,node,,The current number of nodes <span class="hljs-keyword">in</span> the Galera cluster.,0,mysql,galera cluster size</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si </font></font><code>-n</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">no se especifica, </font></font><code>head</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">imprime las primeras diez líneas del archivo o flujo de entrada especificado.</font></font><br>
<br>
<a name="3"></a><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cola</font></font></h1><br>
<code>tail</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- un análogo </font></font><code>head</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, solo muestra las últimas n líneas en el archivo.</font></font><br>
<br>
<pre><code class="bash hljs">$ tail -n 1 metadata.csv<font></font>
mysql.performance.queries,gauge,,query,second,The rate of queries.,0,mysql,queries</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si desea imprimir todas las líneas ubicadas después de la enésima línea (incluida), puede usar el argumento </font></font><code>-n +n</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<pre><code class="bash hljs">$ tail -n +42 metadata.csv<font></font>
mysql.replication.slaves_connected,gauge,,,,Number of slaves connected to a replication master.,0,mysql,slaves connected<font></font>
mysql.performance.queries,gauge,,query,second,The rate of queries.,0,mysql,queries</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hay 43 líneas en nuestro archivo, por lo tanto, </font></font><code>tail -n +42</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">solo genera las líneas 42 y 43. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si </font></font><code>-n</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">no se especifica </font><font style="vertical-align: inherit;">el parámetro </font><font style="vertical-align: inherit;">, </font></font><code>tail</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">generará las últimas diez líneas en el archivo o flujo de entrada especificado. </font></font><br>
<br>
<code>tail -f</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o </font></font><code>tail --follow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mostrar las últimas líneas en el archivo y cada nueva línea a medida que se escriben en el archivo. </font><font style="vertical-align: inherit;">Esto es muy útil para ver la actividad en tiempo real, por ejemplo, lo que se registra en los registros del servidor web, etc.</font></font><br>
<br>
<a name="4"></a><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">baño</font></font></h1><br>
<code>wc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(recuento de palabras) muestra el número de caracteres ( </font></font><code>-c</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">), palabras ( </font></font><code>-w</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) o líneas ( </font></font><code>-l</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) en el archivo o flujo especificado.</font></font><br>
<br>
<pre><code class="bash hljs">$ wc -l metadata.csv<font></font>
43  metadata.csv<font></font>
$ wc -w metadata.csv<font></font>
405 metadata.csv<font></font>
$ wc -c metadata.csv<font></font>
5094 metadata.csv</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por defecto, se muestra todo lo anterior.</font></font><br>
<br>
<pre><code class="bash hljs">$ wc metadata.csv<font></font>
43     405    5094 metadata.csv</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si los datos de texto se canalizan o se redirigen a </font></font><code>stdin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, solo se muestra el contador.</font></font><br>
<br>
<pre><code class="bash hljs">$ cat metadata.csv | wc<font></font>
43     405    5094<font></font>
$ cat metadata.csv | wc -l<font></font>
43<font></font>
$ wc -w &lt; metadata.csv<font></font>
405</code></pre><br>
<a name="5"></a><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">grep</font></font></h1><br>
<code>grep</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Este es un cuchillo suizo que filtra las cuerdas de acuerdo con un patrón dado. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por ejemplo, podemos encontrar todas las apariciones de la palabra </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mutex</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en un archivo.</font></font><br>
<br>
<pre><code class="bash hljs">$ grep mutex metadata.csv<font></font>
mysql.innodb.mutex_os_waits,gauge,,event,second,The rate of mutex OS waits.,0,mysql,mutex os waits<font></font>
mysql.innodb.mutex_spin_rounds,gauge,,event,second,The rate of mutex spin rounds.,0,mysql,mutex spin rounds<font></font>
mysql.innodb.mutex_spin_waits,gauge,,event,second,The rate of mutex spin waits.,0,mysql,mutex spin waits</code></pre><br>
<code>grep</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">puede procesar archivos especificados como argumentos o una secuencia de texto que se le pasa </font></font><code>stdin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Por lo tanto, podemos concatenar varios comandos </font></font><code>grep</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para filtrar aún más el texto. </font><font style="vertical-align: inherit;">En el siguiente ejemplo, filtramos las líneas en nuestro archivo </font></font><code>metadata.csv</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para encontrar líneas que contengan tanto </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mutex</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> como </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OS</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<pre><code class="bash hljs">$ grep mutex metadata.csv | grep OS<font></font>
mysql.innodb.mutex_os_waits,gauge,,event,second,The rate of mutex OS waits.,0,mysql,mutex os waits</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Consideremos algunas opciones </font></font><code>grep</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y su comportamiento. </font></font><br>
<br>
<code>grep -v</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Realiza la coincidencia inversa: filtra las cadenas que </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">no</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> coinciden con el patrón de argumento.</font></font><br>
<br>
<pre><code class="bash hljs">$ grep -v gauge metadata.csv<font></font>
metric_name,metric_type,interval,unit_name,per_unit_name,description,orientation,integration,short_name</code></pre><br>
<code> grep -i</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Realiza coincidencias entre mayúsculas y minúsculas. </font><font style="vertical-align: inherit;">El siguiente ejemplo se </font></font><code>grep -i os</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">encuentra tanto </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OS</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OS</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<pre><code class="bash hljs">$ grep -i os metadata.csv<font></font>
mysql.innodb.mutex_os_waits,gauge,,event,second,The rate of mutex OS waits.,0,mysql,mutex os waits<font></font>
mysql.innodb.os_log_fsyncs,gauge,,write,second,The rate of fsync writes to the <span class="hljs-built_in">log</span> file.,0,mysql,<span class="hljs-built_in">log</span> fsyncs</code></pre><br>
<code>grep -l</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Enumera archivos que contienen una coincidencia.</font></font><br>
<br>
<pre><code class="bash hljs">$ grep -l mysql metadata.csv<font></font>
metadata.csv</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El equipo </font></font><code>grep -c</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cuenta cuántas veces se encontró una muestra.</font></font><br>
<br>
<pre><code class="bash hljs">$ grep -c select metadata.csv<font></font>
3</code></pre><br>
<code>grep -r</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> busca archivos de forma recursiva en el directorio de trabajo actual y todos sus subdirectorios.</font></font><br>
<br>
<pre><code class="bash hljs">$ grep -r are ~/Documents<font></font>
/home/br/Documents/computers:Computers are not intelligent<font></font>
/home/br/Documents/readme:I hope you are following so far!</code></pre><br>
<code>grep -w</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> muestra solo palabras completas coincidentes.</font></font><br>
<br>
<pre><code class="bash hljs">$ grep follow ~/Documents/readme<font></font>
I hope you are following so far!<font></font>
$ grep -w follow ~/Documents/readme<font></font>
$</code></pre><br>
<a name="6"></a><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cortar</font></font></h1><br>
<code>cut</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">extrae parte del archivo (o, como de costumbre, la secuencia de entrada). </font><font style="vertical-align: inherit;">El comando define el separador de campo (que separa las columnas) usando la opción </font></font><code>-d</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, y los números de columna para recuperar usando la opción </font></font><code>-f</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por ejemplo, el siguiente comando recupera la primera columna de las últimas cinco líneas de nuestro archivo CSV.</font></font><br>
<br>
<pre><code class="bash hljs">$ tail -n 5 metadata.csv | cut -d , -f 1<font></font>
mysql.performance.user_time<font></font>
mysql.replication.seconds_behind_master<font></font>
mysql.replication.slave_running<font></font>
mysql.replication.slaves_connected<font></font>
mysql.performance.queries</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como estamos tratando con CSV, las columnas están separadas por una coma, y ​​la opción es responsable de recuperar la primera columna </font></font><code>-f 1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se puede seleccionar la primera y segunda columnas utilizando la opción </font></font><code>-f 1,2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<pre><code class="bash hljs">$ tail -n 5 metadata.csv | cut -d , -f 1,2<font></font>
mysql.performance.user_time,gauge<font></font>
mysql.replication.seconds_behind_master,gauge<font></font>
mysql.replication.slave_running,gauge<font></font>
mysql.replication.slaves_connected,gauge<font></font>
mysql.performance.queries,gauge</code></pre><br>
<a name="7"></a><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pegar</font></font></h1><br>
<code>paste</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> combina dos archivos diferentes en un archivo de varias columnas.</font></font><br>
<br>
<pre><code class="bash hljs">$ cat ingredients<font></font>
eggs<font></font>
milk<font></font>
butter<font></font>
tomatoes<font></font>
$ cat prices<font></font>
1$<font></font>
1.99$<font></font>
1.50$<font></font>
2$/kg<font></font>
$ paste ingredients prices<font></font>
eggs    1$<font></font>
milk    1.99$<font></font>
butter  1.50$<font></font>
tomatoes    2$/kg</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por defecto, se </font></font><code>paste</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">utiliza un delimitador de pestaña, pero se puede cambiar mediante el parámetro </font></font><code>-d</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<pre><code class="bash hljs">$ paste ingredients prices -d:<font></font>
eggs:1$<font></font>
milk:1.99$<font></font>
butter:1.50$<font></font>
tomatoes:2$/kg</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Otro caso de uso común </font></font><code>paste</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;es combinar todas las líneas en una secuencia o archivo usando el delimitador especificado, usando una combinación de </font></font><code>-s</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y </font></font><code>-d</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<pre><code class="bash hljs">$ paste -s -d, ingredients<font></font>
eggs,milk,butter,tomatoes</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si un parámetro se especifica como un archivo de entrada </font></font><code>-</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, se leerá en su lugar </font></font><code>stdin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<pre><code class="bash hljs">$ cat ingredients | paste -s -d, -<font></font>
eggs,milk,butter,tomatoes</code></pre><br>
<a name="8"></a><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ordenar</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El comando </font></font><code>sort</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">realmente clasifica los datos (en el archivo o flujo de entrada especificado).</font></font><br>
<br>
<pre><code class="bash hljs">$ cat ingredients<font></font>
eggs<font></font>
milk<font></font>
butter<font></font>
tomatoes<font></font>
salt<font></font>
$ sort ingredients<font></font>
butter<font></font>
eggs<font></font>
milk<font></font>
salt<font></font>
tomatoes</code></pre><br>
<code>sort -r</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> realiza la clasificación inversa.</font></font><br>
<br>
<pre><code class="bash hljs">$ sort -r ingredients<font></font>
tomatoes<font></font>
salt<font></font>
milk<font></font>
eggs<font></font>
butter</code></pre><br>
<code>sort -n</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ordena los campos por su valor aritmético.</font></font><br>
<br>
<pre><code class="bash hljs">$ cat numbers<font></font>
0<font></font>
2<font></font>
1<font></font>
10<font></font>
3<font></font>
$ sort numbers<font></font>
0<font></font>
1<font></font>
10<font></font>
2<font></font>
3<font></font>
$ sort -n numbers<font></font>
0<font></font>
1<font></font>
2<font></font>
3<font></font>
10</code></pre><br>
<a name="9"></a><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">uniq</font></font></h1><br>
<code>uniq</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Detecta y filtra líneas idénticas adyacentes en el archivo o flujo de entrada especificado.</font></font><br>
<br>
<pre><code class="bash hljs">$ cat duplicates<font></font>
and one<font></font>
and one<font></font>
and two<font></font>
and one<font></font>
and two<font></font>
and one, two, three<font></font>
$ uniq duplicates<font></font>
and one<font></font>
and two<font></font>
and one<font></font>
and two<font></font>
and one, two, three</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como solo </font></font><code>uniq</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">filtra </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">las</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> líneas </font><i><font style="vertical-align: inherit;">adyacentes</font></i><font style="vertical-align: inherit;"> , es posible que aún queden duplicados en nuestros datos. </font><font style="vertical-align: inherit;">Para filtrar las mismas líneas de un archivo, primero debe ordenar su contenido.</font></font><br>
<br>
<pre><code class="bash hljs">$ sort duplicates | uniq<font></font>
and one<font></font>
and one, two, three<font></font>
and two</code></pre><br>
<code>uniq -c</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> al comienzo de cada línea inserta el número de sus ocurrencias.</font></font><br>
<br>
<pre><code class="bash hljs">$ sort duplicates | uniq -c<font></font>
   3 and one<font></font>
   1 and one, two, three<font></font>
   2 and two</code></pre><br>
<code>uniq -u</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Muestra solo cadenas únicas.</font></font><br>
<br>
<pre><code class="bash hljs">$ sort duplicates | uniq -u<font></font>
and one, two, three</code></pre><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nota. </font></font><code>uniq</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es especialmente útil en combinación con la clasificación, ya que la tubería le </font></font><code>| sort | uniq</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">permite eliminar todas las líneas duplicadas en un archivo o secuencia.</font></font></blockquote><br>
<a name="10"></a><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">awk</font></font></h1><br>
<code>awk</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Esto es un poco más que una simple herramienta de procesamiento de texto: de hecho, tiene </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">un lenguaje de programación completo</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Lo que es </font></font><code>awk</code> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">realmente</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> bueno es dividir archivos en columnas, y lo hace con un brillo especial cuando los espacios y las pestañas se mezclan en los archivos.</font></font><br>
<br>
<pre><code class="bash hljs">$ cat -t multi-columns<font></font>
John Smith    Doctor^ITardis<font></font>
Sarah-James Smith^I    Companion^ILondon<font></font>
Rose Tyler   Companion^ILondon</code></pre><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nota. </font></font><code>cat -t</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">muestra pestañas como </font></font><code>^I</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como puede ver, las columnas están separadas por espacios o pestañas, y no siempre por el mismo número de espacios. </font></font><code>cut</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">es inútil aquí porque funciona con un solo carácter separador. </font><font style="vertical-align: inherit;">Pero </font></font><code>awk</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">es fácil lidiar con un archivo así. </font></font><br>
<br>
<code>awk '{ print $n }'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">muestra la enésima columna en el texto.</font></font><br>
<br>
<pre><code class="bash hljs">$ cat multi-columns | awk <span class="hljs-string">'{ print $1 }'</span><font></font>
John<font></font>
Sarah-James<font></font>
Rose<font></font>
$ cat multi-columns | awk <span class="hljs-string">'{ print $3 }'</span><font></font>
Doctor<font></font>
Companion<font></font>
Companion<font></font>
$ cat multi-columns | awk <span class="hljs-string">'{ print $1,$2 }'</span><font></font>
John Smith<font></font>
Sarah-James Smith<font></font>
Rose Tyler</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aunque es </font></font><code>awk</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">capaz de mucho más, la salida de los altavoces es probablemente el 99% de los casos de uso en mi caso personal.</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nota. </font></font><code>{ print $NF }</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">muestra la última columna en una fila.</font></font></blockquote><br>
<a name="11"></a><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tr</font></font></h1><br>
<code>tr</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">significa </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">traducir</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Este comando reemplaza un personaje con otro. </font><font style="vertical-align: inherit;">Funciona con caracteres o </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">clases de</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> caracteres como minúsculas, mecanografiadas, espacios, alfanuméricos, etc. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En la entrada estándar, </font></font><code>tr &lt;char1&gt; &lt;char2&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">reemplaza todas las apariciones de &lt;char1&gt; con &lt;char2&gt;.</font></font><br>
<br>
<pre><code class="bash hljs">$ <span class="hljs-built_in">echo</span> <span class="hljs-string">"Computers are fast"</span> | tr a A<font></font>
computers Are fAst</code></pre><br>
<code>tr</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">puede traducir clases de caracteres usando notación </font></font><code>[:class:]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">En la página del manual se describe una lista completa de las clases disponibles </font></font><code>tr</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, pero aquí se muestran algunas. </font></font><br>
<br>
<code>[:space:]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">representa todo tipo de espacios, desde espacios simples hasta pestañas o líneas nuevas.</font></font><br>
<br>
<pre><code class="bash hljs">$ <span class="hljs-built_in">echo</span> <span class="hljs-string">"computers are fast"</span> | tr <span class="hljs-string">'[:space:]'</span> <span class="hljs-string">','</span>
computers,are,fast,%</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todos los caracteres, como los espacios, están separados por comas. </font><font style="vertical-align: inherit;">Tenga en cuenta que el carácter </font></font><code>%</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">al final de la salida indica la ausencia de una nueva línea de terminación. </font><font style="vertical-align: inherit;">De hecho, este personaje también se convierte en una coma. </font></font><br>
<br>
<code>[:lower:]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">representa todos los caracteres en minúscula y </font></font><code>[:upper:]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;todos los </font><font style="vertical-align: inherit;">caracteres en </font><font style="vertical-align: inherit;">mayúscula. </font><font style="vertical-align: inherit;">Por lo tanto, la transformación entre ellos se vuelve trivial.</font></font><br>
<br>
<pre><code class="bash hljs">$ <span class="hljs-built_in">echo</span> <span class="hljs-string">"computers are fast"</span> | tr <span class="hljs-string">'[:lower:]'</span> <span class="hljs-string">'[:upper:]'</span><font></font>
COMPUTERS ARE FAST<font></font>
$ <span class="hljs-built_in">echo</span> <span class="hljs-string">"COMPUTERS ARE FAST"</span> | tr <span class="hljs-string">'[:upper:]'</span> <span class="hljs-string">'[:lower:]'</span>
computers are fast</code></pre><br>
<code>tr -c SET1 SET2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">convierte cualquier carácter </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">no</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> incluido en SET1 en caracteres en SET2. </font><font style="vertical-align: inherit;">En el siguiente ejemplo, todos los caracteres, excepto las vocales indicadas, se reemplazan con espacios.</font></font><br>
<br>
<pre><code class="bash hljs">$ <span class="hljs-built_in">echo</span> <span class="hljs-string">"computers are fast"</span> | tr -c <span class="hljs-string">'[aeiouy]'</span> <span class="hljs-string">' '</span>
 o  u e   a e  a</code></pre><br>
<code>tr -d</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Elimina los caracteres especificados, pero no los reemplaza. </font><font style="vertical-align: inherit;">Este es el equivalente </font></font><code>tr &lt;char&gt; ''</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<pre><code class="bash hljs">$ <span class="hljs-built_in">echo</span> <span class="hljs-string">"Computers Are Fast"</span> | tr -d <span class="hljs-string">'[:lower:]'</span>
C A F</code></pre><br>
<code>tr</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">También puede reemplazar rangos de caracteres, por ejemplo, todas las letras entre </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">una</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> o todos los números entre 1 y 8, usando la notación </font></font><code>s-e</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, en donde </font></font><code>s</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;es el carácter de partida, y </font></font><code>e</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;es el final.</font></font><br>
<br>
<pre><code class="bash hljs">$ <span class="hljs-built_in">echo</span> <span class="hljs-string">"computers are fast"</span> | tr <span class="hljs-string">'a-e'</span> <span class="hljs-string">'x'</span><font></font>
xomputxrs xrx fxst<font></font>
$ <span class="hljs-built_in">echo</span> <span class="hljs-string">"5uch l337 5p34k"</span> | tr <span class="hljs-string">'1-4'</span> <span class="hljs-string">'x'</span>
5uch lxx7 5pxxk</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El comando </font></font><code>tr -s string1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">comprime todas las apariciones múltiples de caracteres </font></font><code>string1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en una sola. </font><font style="vertical-align: inherit;">Uno de los usos más útiles </font></font><code>tr -s</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">es reemplazar múltiples espacios consecutivos con uno.</font></font><br>
<br>
<pre><code class="bash hljs">$ <span class="hljs-built_in">echo</span> <span class="hljs-string">"Computers         are       fast"</span> | tr -s <span class="hljs-string">' '</span>
Computers are fast</code></pre><br>
<a name="12"></a><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">doblez</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El comando </font></font><code>fold</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">contrae todas las líneas de entrada al ancho especificado. </font><font style="vertical-align: inherit;">Por ejemplo, puede ser útil asegurarse de que el texto se ajuste a pantallas pequeñas. </font><font style="vertical-align: inherit;">Entonces, </font></font><code>fold -w n</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">apila cadenas de ancho n caracteres.</font></font><br>
<br>
<pre><code class="bash hljs">$ cat ~/Documents/readme | fold -w 16<font></font>
Thanks again <span class="hljs-keyword">for</span><font></font>
 reading this bo<font></font>
ok!<font></font>
I hope you<span class="hljs-string">'re fo
llowing so far!</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El comando </font></font><code>fold -s</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">romperá líneas solo en caracteres de espacio. </font><font style="vertical-align: inherit;">Se puede combinar con el anterior para limitar la cadena al número especificado de caracteres.</font></font><br>
<br>
<pre><code class="bash hljs">Thanks again
<span class="hljs-keyword">for</span> reading<font></font>
this book!<font></font>
I hope you<span class="hljs-string">'re
following so
far!</span></code></pre><br>
<a name="13"></a><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sed</font></font></h1><br>
<code>sed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es un editor de flujo no interactivo que se utiliza para convertir texto en el flujo de entrada línea por línea. </font><font style="vertical-align: inherit;">Como entrada, ya sea un archivo o, o </font></font><code>stdin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, en la salida, ya sea un archivo o </font></font><code>stdout</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los comandos del editor pueden incluir una o más </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">direcciones</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , una </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">función</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">parámetros</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Por lo tanto, los comandos son los siguientes:</font></font><br>
<br>
<pre><code class="bash hljs">[address[,address]]<span class="hljs-keyword">function</span>[arguments]</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aunque </font></font><code>sed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">realiza muchas funciones, solo consideraremos reemplazar el texto como uno de los casos de uso más comunes.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Reemplazo de texto</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El comando de reemplazo es el </font></font><code>sed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">siguiente:</font></font><br>
<br>
<pre><code class="bash hljs">s/PATTERN/REPLACEMENT/[options]</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ejemplo</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : reemplazar la primera instancia de una palabra en cada línea de un archivo:</font></font><br>
<br>
<pre><code class="bash hljs">$ cat hello<font></font>
hello hello<font></font>
hello world!<font></font>
hi<font></font>
$ cat hello | sed <span class="hljs-string">'s/hello/Hey I just met you/'</span><font></font>
Hey I just met you hello<font></font>
Hey I just met you world<font></font>
hi</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vemos que en la primera línea solo se reemplaza la primera instancia </font></font><code>hello</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Para reemplazar </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">todas las</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ocurrencias </font></font><code>hello</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en todas las líneas, puede usar la opción </font></font><code>g</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(significa </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">global</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ).</font></font><br>
<br>
<pre><code class="bash hljs">$ cat hello | sed <span class="hljs-string">'s/hello/Hey I just met you/g'</span><font></font>
Hey I just met you Hey I just met you<font></font>
Hey I just met you world<font></font>
hi</code></pre><br>
<code>sed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">le permite usar cualquier delimitador excepto </font></font><code>/</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, lo que mejora especialmente la legibilidad si hay barras en los argumentos del comando.</font></font><br>
<br>
<pre><code class="bash hljs">$ cat hello | sed <span class="hljs-string">'s@hello@Hey I just met you@g'</span><font></font>
Hey I just met you Hey I just met you<font></font>
Hey I just met you world<font></font>
hi</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La dirección le dice al editor en qué línea o rango de líneas realizar la sustitución.</font></font><br>
<br>
<pre><code class="bash hljs">$ cat hello | sed <span class="hljs-string">'1s/hello/Hey I just met you/g'</span><font></font>
Hey I just met you hello<font></font>
hello world<font></font>
hi<font></font>
$ cat hello | sed <span class="hljs-string">'2s/hello/Hey I just met you/g'</span><font></font>
hello hello<font></font>
Hey I just met you  world<font></font>
hi</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La dirección </font></font><code>1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">indica reemplazar </font></font><code>hello</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en </font></font><code>Hey I just met you</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">la primera línea. </font><font style="vertical-align: inherit;">Podemos especificar el rango de direcciones en la notación </font></font><code>&lt;start&gt;,&lt;end&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, donde </font></font><code>&lt;end&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">puede ser el número de línea o </font></font><code>$</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, es decir, la última línea del archivo.</font></font><br>
<br>
<pre><code class="bash hljs">$ cat hello | sed <span class="hljs-string">'1,2s/hello/Hey I just met you/g'</span><font></font>
Hey I just met you Hey I just met you<font></font>
Hey I just met you world<font></font>
hi<font></font>
$ cat hello | sed <span class="hljs-string">'2,3s/hello/Hey I just met you/g'</span><font></font>
hello hello<font></font>
Hey I just met you world<font></font>
hi<font></font>
$ cat hello | sed <span class="hljs-string">'2,$s/hello/Hey I just met you/g'</span><font></font>
hello hello<font></font>
Hey I just met you world<font></font>
hi</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por defecto, </font></font><code>sed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">produce el resultado en sí mismo </font></font><code>stdout</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, pero también puede editar el archivo original con la opción </font></font><code>-i</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<pre><code class="bash hljs">$ sed -i <span class="hljs-string">''</span> <span class="hljs-string">'s/hello/Bonjour/'</span> sed-data<font></font>
$ cat sed-data<font></font>
Bonjour hello<font></font>
Bonjour world<font></font>
hi</code></pre><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nota. </font><font style="vertical-align: inherit;">En Linux, lo suficiente </font></font><code>-i</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Pero en macOS, el comportamiento del comando es ligeramente diferente, por lo </font></font><code>-i</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que debe agregarlo </font><font style="vertical-align: inherit;">inmediatamente después </font></font><code>''</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></blockquote><br>
<a name="14"></a><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ejemplos reales</font></font></h1><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Filtrado CSV con grep y awk</font></font></h3><br>
<pre><code class="bash hljs">$ grep -w gauge metadata.csv | awk -F, <span class="hljs-string">'{ if ($4 == "query") { print $1, "per", $5 } }'</span><font></font>
mysql.performance.com_delete per second<font></font>
mysql.performance.com_delete_multi per second<font></font>
mysql.performance.com_insert per second<font></font>
mysql.performance.com_insert_select per second<font></font>
mysql.performance.com_replace_select per second<font></font>
mysql.performance.com_select per second<font></font>
mysql.performance.com_update per second<font></font>
mysql.performance.com_update_multi per second<font></font>
mysql.performance.questions per second<font></font>
mysql.performance.slow_queries per second<font></font>
mysql.performance.queries per second</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En este ejemplo </font></font><code>grep</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, el archivo </font></font><code>metadata.csv</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">primero filtra las líneas que contienen la palabra </font></font><code>gauge</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, luego aquellas con la </font></font><code>query</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cuarta columna, y muestra el nombre de la métrica (primera columna) con el valor correspondiente </font></font><code>per_unit_name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(quinta columna).</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Muestra la dirección IPv4 asociada con la interfaz de red.</font></font></h3><br>
<pre><code class="bash hljs">$ ifconfig en0 | grep inet | grep -v inet6 | awk <span class="hljs-string">'{ print $2 }'</span>
192.168.0.38</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El comando </font></font><code>ifconfig &lt;interface name&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">muestra información sobre la interfaz de red especificada. </font><font style="vertical-align: inherit;">Por ejemplo:</font></font><br>
<br>
<pre><code class="bash hljs">en0: flags=8863&lt;UP,BROADCAST,SMART,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500<font></font>
    ether 19:64:92:de:20:ba<font></font>
    inet6 fe80::8a3:a1cb:56ae:7c7c%en0 prefixlen 64 secured scopeid 0x7<font></font>
    inet 192.168.0.38 netmask 0xffffff00 broadcast 192.168.0.255<font></font>
    nd6 options=201&lt;PERFORMNUD,DAD&gt;<font></font>
    media: autoselect<font></font>
    status: active</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Luego corre </font></font><code>grep</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hacia </font></font><code>inet</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, eso producirá dos líneas de correspondencia.</font></font><br>
<br>
<pre><code class="bash hljs">$ ifconfig en0 | grep inet<font></font>
    inet6 fe80::8a3:a1cb:56ae:7c7c%en0 prefixlen 64 secured scopeid 0x7<font></font>
    inet 192.168.0.38 netmask 0xffffff00 broadcast 192.168.0.255</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Luego, usando </font></font><code>grep -v</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">excluir la línea con </font></font><code>ipv6</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<pre><code class="bash hljs">$ ifconfig en0 | grep inet | grep -v inet6<font></font>
inet 192.168.0.38 netmask 0xffffff00 broadcast 192.168.0.255</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Finalmente, con la ayuda, </font></font><code>awk</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">solicitamos la segunda columna en esta fila: esta es la dirección IPv4 asociada con nuestra interfaz de red </font></font><code>en0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<pre><code class="bash hljs">$ ifconfig en0 | grep inet | grep -v inet6 | awk <span class="hljs-string">'{ print $2 }'</span>
192.168.0.38</code></pre><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nota. </font><font style="vertical-align: inherit;">Me </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ofrecieron</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> reemplazar con </font></font><code>grep inet | grep -v inet6</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">un equipo tan confiable </font></font><code>awk</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="bash hljs">$ ifconfig en0 | awk <span class="hljs-string">' $1 == "inet" { print $2 }'</span>
192.168.0.38</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es más corto y está específicamente dirigido a IPv4 con la condición </font></font><code>$1 == "inet"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></blockquote><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Recuperando un valor de un archivo de configuración</font></font></h3><br>
<pre><code class="bash hljs">$ grep <span class="hljs-string">'editor ='</span> ~/.gitconfig  | cut -d = -f2 | sed <span class="hljs-string">'s/ //g'</span>
/usr/bin/vim</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En el archivo de configuración de git del usuario actual, busque el valor </font></font><code>editor =</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, recorte el carácter </font></font><code>=</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, extraiga la segunda columna y elimine todos los espacios.</font></font><br>
<br>
<pre><code class="bash hljs">$ grep <span class="hljs-string">'editor ='</span> ~/.gitconfig<font></font>
     editor = /usr/bin/vim<font></font>
$ grep <span class="hljs-string">'editor ='</span> ~/.gitconfig  | cut -d<span class="hljs-string">'='</span> -f2<font></font>
 /usr/bin/vim<font></font>
$ grep <span class="hljs-string">'editor ='</span> ~/.gitconfig  | cut -d<span class="hljs-string">'='</span> -f2 | sed <span class="hljs-string">'s/ //'</span>
/usr/bin/vim</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Extraer IP de un archivo de registro</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El siguiente código real busca un mensaje en el registro de la base de datos </font></font><code>Too many connections from</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(seguido de una dirección IP) y muestra los diez intrusos principales.</font></font><br>
<br>
<pre><code class="bash hljs">$ grep <span class="hljs-string">'Too many connections from'</span> db.log | \<font></font>
  awk <span class="hljs-string">'{ print $12 }'</span> | \<font></font>
  sed <span class="hljs-string">'s@/@@'</span> | \<font></font>
  sort | \<font></font>
  uniq -c | \<font></font>
  sort -rn | \<font></font>
  head -n 10 | \<font></font>
  awk <span class="hljs-string">'{ print $2 }'</span><font></font>
   10.11.112.108<font></font>
   10.11.111.70<font></font>
   10.11.97.57<font></font>
   10.11.109.72<font></font>
   10.11.116.156<font></font>
   10.11.100.221<font></font>
   10.11.96.242<font></font>
   10.11.81.68<font></font>
   10.11.99.112<font></font>
   10.11.107.120</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Veamos qué hace esta tubería. </font><font style="vertical-align: inherit;">Primero, cómo se ve la línea en el registro.</font></font><br>
<br>
<pre><code class="bash hljs">$ grep <span class="hljs-string">"Too many connections from"</span> db.log | head -n 1<font></font>
2020-01-01 08:02:37,617 [myid:1] - WARN  [NIOServerCxn.Factory:1.2.3.4/1.2.3.4:2181:NIOServerCnxnFactory@193] - Too many connections from /10.11.112.108 - max is 60</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Luego </font></font><code>awk '{ print $12 }'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">extrae la dirección IP de la cadena.</font></font><br>
<br>
<pre><code class="bash hljs">$ grep <span class="hljs-string">"Too many connections from"</span> db.log | awk <span class="hljs-string">'{ print $12 }'</span><font></font>
/10.11.112.108<font></font>
...</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El comando </font></font><code>sed 's@/@@'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">elimina la barra diagonal inicial.</font></font><br>
<br>
<pre><code class="bash hljs">$ grep <span class="hljs-string">"Too many connections from"</span> db.log | awk <span class="hljs-string">'{ print $12 }'</span> | sed <span class="hljs-string">'s@/@@'</span><font></font>
10.11.112.108<font></font>
...</code></pre><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nota. </font><font style="vertical-align: inherit;">Como vimos anteriormente, </font></font><code>sed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">puede usar cualquier separador en. </font><font style="vertical-align: inherit;">Aunque generalmente se usa como separador </font></font><code>/</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, aquí estamos reemplazando este carácter en particular, lo que perjudicará ligeramente la legibilidad de la expresión de sustitución.</font></font><br>
<br>
<pre><code class="bash hljs">sed <span class="hljs-string">'s/\///'</span></code></pre></blockquote><br>
<code>sort | uniq -c</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> clasifica las direcciones IP en orden lexicográfico y luego elimina los duplicados, agregando el número de entradas antes de cada dirección IP.</font></font><br>
<br>
<pre><code class="bash hljs">$ grep <span class="hljs-string">'Too many connections from'</span> db.log | \<font></font>
  awk <span class="hljs-string">'{ print $12 }'</span> | \<font></font>
  sed <span class="hljs-string">'s@/@@'</span> | \<font></font>
  sort | \<font></font>
  uniq -c<font></font>
   1379 10.11.100.221<font></font>
   1213 10.11.103.168<font></font>
   1138 10.11.105.177<font></font>
    946 10.11.106.213<font></font>
   1211 10.11.106.4<font></font>
   1326 10.11.107.120<font></font>
   ...</code></pre><br>
<code>sort -rn | head -n 10</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ordena las líneas por el número de ocurrencias, numéricamente y en orden inverso, de modo que los infractores principales se muestren primero, de los cuales se muestran 10 líneas. </font><font style="vertical-align: inherit;">El último comando </font></font><code>awk { print $2 }</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">recupera las direcciones IP.</font></font><br>
<br>
<pre><code class="bash hljs">$ grep <span class="hljs-string">'Too many connections from'</span> db.log | \<font></font>
  awk <span class="hljs-string">'{ print $12 }'</span> | \<font></font>
  sed <span class="hljs-string">'s@/@@'</span> | \<font></font>
  sort | \<font></font>
  uniq -c | \<font></font>
  sort -rn | \<font></font>
  head -n 10 | \<font></font>
  awk <span class="hljs-string">'{ print $2 }'</span><font></font>
  10.11.112.108<font></font>
  10.11.111.70<font></font>
  10.11.97.57<font></font>
  10.11.109.72<font></font>
  10.11.116.156<font></font>
  10.11.100.221<font></font>
  10.11.96.242<font></font>
  10.11.81.68<font></font>
  10.11.99.112<font></font>
  10.11.107.120</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Renombrar una función en el archivo fuente</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Imagine que estamos trabajando en un proyecto y nos gustaría cambiar el nombre de la función (o clase, variable, etc.) en el archivo fuente. </font><font style="vertical-align: inherit;">Puede hacer esto con un comando </font></font><code>sed -i</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que reemplaza directamente en el archivo original.</font></font><br>
<br>
<pre><code class="bash hljs">$ cat izk/utils.py<font></font>
def bool_from_str(s):<font></font>
    <span class="hljs-keyword">if</span> s.isdigit():
        <span class="hljs-built_in">return</span> int(s) == 1
    <span class="hljs-built_in">return</span> s.lower() <span class="hljs-keyword">in</span> [<span class="hljs-string">'yes'</span>, <span class="hljs-string">'true'</span>, <span class="hljs-string">'y'</span>]</code></pre><br>
<pre><code class="bash hljs">$ sed -i <span class="hljs-string">'s/def bool_from_str/def is_affirmative/'</span> izk/utils.py<font></font>
$ cat izk/utils.py<font></font>
def is_affirmative(s):<font></font>
    <span class="hljs-keyword">if</span> s.isdigit():
        <span class="hljs-built_in">return</span> int(s) == 1
    <span class="hljs-built_in">return</span> s.lower() <span class="hljs-keyword">in</span> [<span class="hljs-string">'yes'</span>, <span class="hljs-string">'true'</span>, <span class="hljs-string">'y'</span>]</code></pre><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nota. </font><font style="vertical-align: inherit;">En macOS, </font></font><code>sed -i</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">use </font><font style="vertical-align: inherit;">en </font><font style="vertical-align: inherit;">su </font><font style="vertical-align: inherit;">lugar </font></font><code>sed -i ''</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sin embargo, cambiamos el nombre de la función solo en el archivo original. </font><font style="vertical-align: inherit;">Esto interrumpirá la importación </font></font><code>bool_from_str</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en cualquier otro archivo ya que esta función ya no está definida. </font><font style="vertical-align: inherit;">Necesitamos encontrar una manera de cambiar el nombre de </font></font><code>bool_from_str</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nuestro proyecto. </font><font style="vertical-align: inherit;">Esto se puede lograr usando comandos </font></font><code>grep</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>sed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">así como bucles </font></font><code>for</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o usando </font></font><code>xargs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<a name="15"></a><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Profundización: ciclos </font></font><code>for</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y</font></font><code>xargs</code></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para reemplazar todas las ocurrencias en nuestro proyecto </font></font><code>bool_from_str</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, primero debe encontrarlas recursivamente con </font></font><code>grep -r</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<pre><code class="bash hljs">$ grep -r bool_from_str .<font></font>
./tests/test_utils.py:from izk.utils import bool_from_str<font></font>
./tests/test_utils.py:def test_bool_from_str(s, expected):<font></font>
./tests/test_utils.py:    assert bool_from_str(s) == expected<font></font>
./izk/utils.py:def bool_from_str(s):<font></font>
./izk/prompt.py:from .utils import bool_from_str<font></font>
./izk/prompt.py:                    default = bool_from_str(os.environ[envvar])</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como solo estamos interesados ​​en archivos con coincidencias, también debe usar la opción </font></font><code>-l/--files-with-matches</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="bash hljs">-l, --files-with-matches<font></font>
        Only the names of files containing selected lines are written to standard out-<font></font>
        put.  grep will only search a file until a match has been found, making<font></font>
        searches potentially less expensive.  Pathnames are listed once per file<font></font>
        searched.  If the standard input is searched, the string ``(standard input)<span class="hljs-string">''</span>
        is written.</code></pre><br>
<pre><code class="bash hljs">$ grep -r --files-with-matches bool_from_str .<font></font>
./tests/test_utils.py<font></font>
./izk/utils.py<font></font>
./izk/prompt.py</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces podemos usar el comando </font></font><code>xargs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para llevar a cabo acciones desde cada línea de la salida (es decir, todos los archivos que contienen la línea </font></font><code>bool_from_str</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">).</font></font><br>
<br>
<pre><code class="bash hljs">$ grep -r --files-with-matches bool_from_str . | \<font></font>
  xargs -n 1 sed -i <span class="hljs-string">'s/bool_from_str/is_affirmative/'</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La opción </font></font><code>-n 1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">indica que cada línea en la salida debe ejecutar un comando separado </font></font><code>sed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Luego se ejecutan los siguientes comandos:</font></font><br>
<br>
<pre><code class="bash hljs">$ sed -i <span class="hljs-string">'s/bool_from_str/is_affirmative/'</span> ./tests/test_utils.py<font></font>
$ sed -i <span class="hljs-string">'s/bool_from_str/is_affirmative/'</span> ./izk/utils.py<font></font>
$ sed -i <span class="hljs-string">'s/bool_from_str/is_affirmative/'</span> ./izk/prompt.py</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si el comando con el que llamas </font></font><code>xargs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(en nuestro caso </font></font><code>sed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) admite múltiples argumentos, entonces debes descartar el argumento </font></font><code>-n 1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">por rendimiento.</font></font><br>
<br>
<pre><code class="bash hljs">grep -r --files-with-matches bool_from_str . | xargs sed -i <span class="hljs-string">'s/bool_from_str/is_affirmative/'</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este comando se ejecutará</font></font><br>
<br>
<pre><code class="bash hljs">$ sed -i <span class="hljs-string">'s/bool_from_str/is_affirmative/'</span> ./tests/test_utils.py ./izk/utils.py ./izk/prompt.py</code></pre><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nota. </font><font style="vertical-align: inherit;">De la sinopsis </font></font><code>sed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en la página del manual, se puede ver que el equipo puede tomar varios argumentos.</font></font><br>
<br>
<pre><code class="bash hljs">SYNOPSIS<font></font>
     sed [-Ealn] <span class="hljs-built_in">command</span> [file ...]<font></font>
     sed [-Ealn] [-e <span class="hljs-built_in">command</span>] [-f command_file] [-i extension] [file ...]</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De hecho, como vimos en el capítulo anterior, </font></font><code>file ...</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">significa que se aceptan varios argumentos, que son nombres de archivos.</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vemos que se hacen reemplazos para todas las ocurrencias </font></font><code>bool_from_str</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<pre><code class="bash hljs">$ grep -r is_affirmative .<font></font>
./tests/test_utils.py:from izk.utils import is_affirmative<font></font>
./tests/test_utils.py:def test_is_affirmative(s, expected):<font></font>
./tests/test_utils.py:    assert is_affirmative(s) == expected<font></font>
./izk/utils.py:def is_affirmative(s):<font></font>
./izk/prompt.py:from .utils import is_affirmative<font></font>
./izk/prompt.py:                    default = is_affirmative(os.environ[envvar])</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como suele suceder, hay varias formas de lograr el mismo resultado. </font><font style="vertical-align: inherit;">En cambio, </font></font><code>xargs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">podríamos usar bucles </font></font><code>for</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para iterar sobre las líneas de la lista y tomar medidas sobre cada elemento. </font><font style="vertical-align: inherit;">Estos bucles tienen la siguiente sintaxis:</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> list; <span class="hljs-keyword">do</span>
    <span class="hljs-built_in">command</span> <span class="hljs-variable">$item</span>
<span class="hljs-keyword">done</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si envolvemos nuestro mando </font></font><code>grep</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en </font></font><code>$()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, a continuación, la cáscara se ejecutará en un </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">subnivel</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , el resultado de que luego se repiten en un bucle </font></font><code>for</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<pre><code class="bash hljs">$ <span class="hljs-keyword">for</span> file <span class="hljs-keyword">in</span> $(grep -r --files-with-matches bool_from_str .); <span class="hljs-keyword">do</span>
  sed -i <span class="hljs-string">'s/bool_from_str/is_affirmative/'</span> <span class="hljs-variable">$file</span>
<span class="hljs-keyword">done</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este comando se ejecutará</font></font><br>
<br>
<pre><code class="bash hljs">$ sed -i <span class="hljs-string">'s/bool_from_str/is_affirmative/'</span> ./tests/test_utils.py<font></font>
$ sed -i <span class="hljs-string">'s/bool_from_str/is_affirmative/'</span> ./izk/utils.py<font></font>
$ sed -i <span class="hljs-string">'s/bool_from_str/is_affirmative/'</span> ./izk/prompt.py</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La sintaxis del bucle </font></font><code>for</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">me parece más clara que eso </font></font><code>xargs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, pero este último puede ejecutar comandos en paralelo utilizando parámetros </font></font><code>-P n</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, donde </font></font><code>n</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">es el número máximo de comandos paralelos ejecutados al mismo tiempo, lo que puede proporcionar una ganancia de rendimiento.</font></font><br>
<br>
<a name="16"></a><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Resumen</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todas estas herramientas abren todo un mundo de posibilidades, ya que le permiten extraer y transformar datos, creando canalizaciones enteras de equipos que nunca tuvieron la intención de trabajar juntos. Cada uno de ellos realiza una función relativamente pequeña (clasificación </font></font><code>sort</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, combinación </font></font><code>cat</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, filtros </font></font><code>grep</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, edición </font></font><code>sed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, corte </font></font><code>cut</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, etc.). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cualquier tarea que incluya texto puede reducirse a una tubería de tareas más pequeñas, cada una de las cuales realiza una acción simple y transfiere su salida a la siguiente tarea. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por ejemplo, si queremos saber cuántas direcciones IP únicas hay en el archivo de registro, y para que estas direcciones IP siempre aparezcan en la misma columna, entonces podemos ejecutar la siguiente secuencia de comandos:</font></font><br>
<br>
<ul>
<li><code>grep</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> cadenas que coinciden con el patrón de cadenas con direcciones IP</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">encuentre la columna con la dirección IP, extráigala con </font></font><code>awk</code><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ordenar la lista de direcciones IP usando </font></font><code>sort</code><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">eliminar duplicados adyacentes con </font></font><code>uniq</code><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cuente el número de líneas (es decir, direcciones IP únicas) usando </font></font><code>wc -l</code></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dado que hay muchas herramientas de procesamiento de texto nativas y de terceros, también hay muchas formas de resolver cualquier problema. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los ejemplos en este artículo fueron exagerados, pero le sugiero que lea el increíble artículo </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Las herramientas de línea de comandos pueden ser 235 veces más rápidas que su clúster Hadoop"</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para tener una idea de cuán útiles y poderosos son realmente estos comandos y qué problemas reales ellos pueden decidir.</font></font><br>
<br>
<a name="17"></a><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Que sigue</font></font></h1><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cuente la cantidad de archivos y directorios ubicados en su directorio de inicio.</font></font><br>
</li>
<li>     .<br>
</li>
<li>,       .<br>
</li>
<li>    .         .</li>
</ol><br>
<hr><br>
<i>  «        » (Essential Tools and Practices for the Aspiring Software Developer)    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="> </a>            ,     .    ,    ,   ,       ,      <code>git</code>,  SQL,   <code>Make</code>, <code>jq</code>   ,   ,          .<br>
<br>
    ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="> </a>!</i></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es492910/index.html">Control de motor paso a paso a través del controlador Canny</a></li>
<li><a href="../es492914/index.html">Cómo proteger a los empleados remotos o la seguridad de la oficina en casa</a></li>
<li><a href="../es492918/index.html">Papa: ética para la IA y los vehículos no tripulados</a></li>
<li><a href="../es492920/index.html">Cuarentena en la República Checa: una mirada al interior</a></li>
<li><a href="../es492924/index.html">Cómo visualizar y animar modelos (geofísicos). Informatividad de la visualización.</a></li>
<li><a href="../es492934/index.html">Dificultades para criar un asistente de voz. El aspecto de un lingüista y desarrollador</a></li>
<li><a href="../es492938/index.html">Portal de entornos de prueba, o guarde nuestros devops</a></li>
<li><a href="../es492940/index.html">Sumérgete en Charles Proxy</a></li>
<li><a href="../es492942/index.html">Ontol (= más útil) sobre trabajo remoto [compilación de más de 100 artículos]</a></li>
<li><a href="../es492946/index.html">Coronavirus: como nos engañamos a nosotros mismos</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>