<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏻‍✈️ 🤞🏼 🕘 Montando um computador de 8 bits: como reduzir o número de chips para seis ✴️ 🌭 🆕</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A combinação do velho truque com a codificação de cores NTSC e o ferro moderno possibilita a montagem de uma máquina surpreendentemente eficiente.Os
 ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Montando um computador de 8 bits: como reduzir o número de chips para seis</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/vdsina/blog/494124/"><img src="https://habrastorage.org/webt/10/p7/70/10p770cfa9wj0aj3xrs0ajhonoq.jpeg"><br>
<font color="99999999"><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A combinação do velho truque com a codificação de cores NTSC e o ferro moderno possibilita a montagem de uma máquina surpreendentemente eficiente.Os</font></font></sup></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
sistemas de 8 bits têm algo permanentemente atraente: você pode criar um sistema autônomo poderoso o suficiente para suportar a interação adequada do usuário, mas simples o suficiente para monte e programe você mesmo. A maioria das máquinas modernas de 8 bits criadas por amadores estão ligadas a processadores clássicos que viveram na</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> era de ouro dos</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> computadores domésticos da década de 1980, quando milhões de TVs foram usadas como monitores. Inicialmente, a ideia era construir meu carro baseado no</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> processador Motorola 6809</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">da mesma época. Tentei usar o mínimo possível de chips, mas, apesar dos meus esforços, ainda precisava de 13 chips adicionais para trabalhar com RAM e transferência de dados seriais. Então pensei: e se eu usar um processador de 8 bits mais moderno? Quanto posso reduzir o número de chips que preciso?</font></font><br>
<a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como resultado, montei um carro chamado </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ametista</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Como qualquer computador doméstico, possui um teclado embutido e pode produzir áudio e vídeo. Ele também possui uma linguagem de programação interna de alto nível para que os usuários possam escrever seus próprios programas. Consegui reduzir o número de microcircuitos para seis: </font><font style="vertical-align: inherit;">CPU </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ATMEGA1284P</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , interface USB e quatro circuitos integrados simples. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O ATMEGA1284P de 2008 (ou 1284P) possui 128 kilobytes de memória flash e 16 kilobytes de RAM. Pode operar com uma frequência de até 20 megahertz. Possui controladores seriais integrados a bordo e 32 entradas / saídas digitais.</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/6GKgxBEGH1M" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Graças à memória interna e às interfaces seriais, a necessidade de muitos chips auxiliares desapareceu. </font><font style="vertical-align: inherit;">Eu poderia gerar áudio diretamente, interrompendo e aplicando um sinal na entrada / saída com diferentes frequências. </font><font style="vertical-align: inherit;">Assim, aprendi a emitir um tom que, no entanto, possuía a nitidez característica de uma onda quadrada. </font><font style="vertical-align: inherit;">Mas e quanto a gerar um sinal de vídeo analógico? </font><font style="vertical-align: inherit;">Isso realmente exigirá equipamento especial?</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Truque padrão</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No final de 2018, vi um truque que Steve Wozniak usou na década de 1970 para implementar o suporte a gráficos coloridos no Apple II. Nos EUA, esse truque foi usado na transmissão em cores no sistema NTSC nos anos 50. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Inicialmente, a televisão americana era apenas preto e branco e usava o padrão NTSC bastante simples (desenvolvido pelo Comitê Nacional de Sistemas de Televisão). Para formar uma imagem na tela, um feixe de elétrons traça pontos em sua superfície, linha após linha. A amplitude do sinal de vídeo recebido determinou o brilho do feixe em qualquer local ao longo da linha. Então, em 1953, o NTSC </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">foi atualizado</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para oferecer suporte à televisão em cores, mantendo a compatibilidade com as TVs em preto e branco existentes.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os engenheiros decidiram apresentar informações sobre cores na forma de um sinal sinusoidal de alta frequência. Para isso, a subportadora foi dividida em dois componentes com desvio de fase de 90 °, cada um dos quais sofreu modulação. O resultado foi um sinal modulado em amplitude e fase. A amplitude do sinal determinou a saturação da cor. Este sinal de croma de alta frequência foi então adicionado ao sinal de luminância de baixa frequência para criar o chamado sinal de vídeo composto. Este método ainda é usado para muitos televisores e monitores mais baratos.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/bu/u_/aw/buu_awktun52nw_57p5oi95vopm.png"><br>
<br>
<blockquote><i><b>« »</b>:    ,    [ ],   - ,         [ ].      .         [ ]   ,       :      .             [ ],          .</i></blockquote><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Uma TV em preto e branco percebe um sinal colorido como ruído e o ignora. Mas uma TV colorida pode separar o sinal colorido do sinal de luminância usando loops de filtro.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Na década de 1970, os engenheiros perceberam que esse esquema de filtragem poderia ser muito útil para computadores domésticos, pois permite que um sinal digital retangular simule a maior parte do sinal analógico composto. O fluxo de zeros enviado pelo computador para a TV será percebido como uma tensão analógica de baixa frequência constante, ou seja, preta. O fluxo de unidades será considerado como uma tensão de alta frequência constante, ou seja, branca. Porém, com uma taxa de bits suficientemente alta, surgirão estruturas binárias mais complexas que os esquemas de filtragem passa-alto reconhecem como sinais de cores. Esse truque permitiu ao Apple II exibir até 16 cores.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No começo, pensei que precisava trocar o pino de entrada / saída muito rapidamente para gerar diretamente um sinal de vídeo. No entanto, logo percebi que, com o meu 1284P rodando a 14,318 MHz, não conseguia alterná-lo rápido o suficiente para exibir mais de quatro cores. O fato é que suas interfaces seriais internas precisariam de dois ciclos de clock para enviar um bit, o que limitaria minha frequência de clock a 7,159 MHz. O Apple II usou rápido acesso direto à memória para conectar seu chip externo à saída de vídeo, enquanto sua CPU estava ocupada com o processamento interno. Mas, como a RAM do meu computador está integrada ao chip, não pude usar essa abordagem.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Então olhei dentro das minhas gavetas e puxei quatro microcircuitos da série 7400 - dois multiplexadores e dois registradores de turno serial-paralelo. </font><font style="vertical-align: inherit;">Consegui instalar oito pinos 1284P em paralelo e enviar dados deles simultaneamente para os multiplexadores e registradores de deslocamento, que os convertem em um fluxo de bits serial de alta velocidade. </font><font style="vertical-align: inherit;">Assim, aprendi a gerar bits com rapidez suficiente para exibir cerca de 215 cores diferentes na tela. </font><font style="vertical-align: inherit;">No entanto, eu tive que pagar por isso com meu poder de computação: o processamento de vídeo consome constantemente 75% dos recursos do processador.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/67/ti/wd/67tiwdceh1mxpre-pg9qypcb43o.png"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Computador compacto</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ametista é um computador de placa única. Ele é montado a partir de apenas seis circuitos integrados - um processador, uma interface USB e quatro microcircuitos da série 7400, usados ​​para criar uma imagem de 215 cores. Os comutadores do teclado são soldados diretamente na placa, que também suporta áudio e quatro conexões seriais de E / S para periféricos, como controladores de jogo e dispositivos de armazenamento. Você pode escrever programas e executá-los graças à máquina virtual incorporada Forth.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eu precisava de um ambiente de programação leve para os usuários, o que me fez escolher o Forth ao invés do tradicional Basic. A Forth é uma linguagem de programação antiga para sistemas embarcados, suporta interatividade e é capaz de compilar código com eficiência. Com isso, você pode fazer bastante usando a quantidade mínima de recursos. Como o 1284P não permite que o código de máquina compilado seja executado diretamente de sua RAM, o código do usuário é compilado no bytecode intermediário. Esse bytecode é então alimentado como entrada para uma máquina virtual executando a partir da memória flash 1284P. O código da máquina virtual foi escrito no assembler e otimizado manualmente para torná-lo o mais rápido possível.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como engenheiro que trabalha para uma empresa que produz impressoras a laser 3D, tenho acesso a avançadas máquinas de corte a laser. </font><font style="vertical-align: inherit;">Por isso, projetei e fabricei facilmente uma caixa de madeira (observei o acabamento em madeira no </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Atari 2600</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font><font style="vertical-align: inherit;">Os interruptores mecânicos do teclado foram soldados diretamente a uma única placa de circuito Amethyst. </font><font style="vertical-align: inherit;">Este teclado tem uma característica curiosa - a ausência da grande lacuna usual. </font><font style="vertical-align: inherit;">Em vez disso, apenas um botão, modestamente localizado acima da tecla Enter. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O esquema completo, os arquivos PCB para a placa de circuito e o código fonte estão disponíveis no meu </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">repositório GitHub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Então você pode criar sua própria Ametista ou até melhorar meu projeto. </font><font style="vertical-align: inherit;">E se você descobrir como economizar mais algumas fichas?</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/9fa/cf4/a34/9facf4a348ef01048b4eb5e16ae66daa.png"></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt494096/index.html">Implantação da intranet. Experiência, erros, recomendações</a></li>
<li><a href="../pt494098/index.html">Abordagem imperativa para dados reativos no exemplo de Jetbrains KTor e R2DBC</a></li>
<li><a href="../pt494100/index.html">O que você precisa para criar o modelo ideal de um centro educacional para treinar especialistas em TI</a></li>
<li><a href="../pt494114/index.html">Como reduzir o número e aumentar a legibilidade do código em react-redux, redux-saga</a></li>
<li><a href="../pt494118/index.html">COVID-19 Telegram-bot // Respondemos perguntas frequentes automaticamente</a></li>
<li><a href="../pt494126/index.html">CIÊNCIA SUPERIOR. Mídia dez de fevereiro: feministas zumbis de caranguejo, salamandras pré-históricas e alcoólatras exagerados</a></li>
<li><a href="../pt494128/index.html">Hackspace Neuron - um local de encontro para hackers em Moscou</a></li>
<li><a href="../pt494130/index.html">O que acontece com eventos online: algumas de nossas estatísticas</a></li>
<li><a href="../pt494132/index.html">Compilador Befunge em Python</a></li>
<li><a href="../pt494136/index.html">O que pingar nos olhos, para não coçar</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>