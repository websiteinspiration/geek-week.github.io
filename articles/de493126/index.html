<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘¨ ğŸ¤½ğŸ¼ ğŸ¥ Antimuster der ereignisorientierten Architektur ğŸ‘¶ ğŸ‘¨ğŸ¿â€ğŸ¤â€ğŸ‘¨ğŸ½ ğŸ‘¨ğŸ»â€ğŸš’</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo wieder! Im Vorfeld des Kurses â€Software Architectâ€œ haben wir eine Ãœbersetzung eines weiteren interessanten Materials vorbereitet.
 
 
 
 In den ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Antimuster der ereignisorientierten Architektur</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/493126/"><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hallo wieder! </font><font style="vertical-align: inherit;">Im Vorfeld des Kurses </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">â€Software Architectâ€œ haben wir</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> eine Ãœbersetzung eines weiteren interessanten Materials vorbereitet.</font></font></b></i><br>
<br>
<img src="https://habrastorage.org/webt/ux/s7/8i/uxs78ikkfkxapciwl-uda02zsu4.png"><br>
<hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In den letzten Jahren hat die PopularitÃ¤t der Microservice-Architektur zugenommen. </font><font style="vertical-align: inherit;">Es gibt viele Ressourcen, die Ihnen beibringen, wie man es richtig implementiert, aber ziemlich oft wird darÃ¼ber als Silberpool gesprochen. </font><font style="vertical-align: inherit;">Es gibt viele Argumente gegen die Verwendung von Microservices, aber das wichtigste davon ist, dass diese Art von Architektur mit ungewisser KomplexitÃ¤t behaftet ist, deren Ebene davon abhÃ¤ngt, wie Sie die Beziehung zwischen Ihren Services und Teams verwalten. </font><font style="vertical-align: inherit;">Sie kÃ¶nnen eine Menge Literatur finden, die erklÃ¤rt, warum (vielleicht) in Ihrem Fall Microservices nicht die beste Wahl sind.</font></font><a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir bei letgo sind von einem Monolithen auf Microservices umgestiegen, um das BedÃ¼rfnis nach Skalierbarkeit zu befriedigen, und haben uns sofort von dessen positiven Auswirkungen auf die Arbeit von Teams Ã¼berzeugt. </font><font style="vertical-align: inherit;">Bei richtiger Anwendung haben Microservices uns mehrere Vorteile gebracht, nÃ¤mlich:</font></font><br>
<br>
<ul>
<li><i> </i>:   ,         .        (   ..)           .      (  )     Users. </li>
<li><i> </i>:            ,    .        .   ,         , ,        ,         .           .</li>
</ul><br>
<h3>- </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Nicht alle Microservice-Architekturen sind ereignisgesteuert. Einige Leute befÃ¼rworten die synchrone Kommunikation zwischen Diensten in dieser Architektur Ã¼ber HTTP (gRPC, REST usw.). Bei letgo versuchen wir, diesem Muster nicht zu folgen und unsere Dienste asynchron mit </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DomÃ¤nenereignissen zu</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> verknÃ¼pfen </font><font style="vertical-align: inherit;">. Hier sind die GrÃ¼nde, warum wir dies tun:</font></font><br>
<br>
<ul>
<li><i>   </i>:          . , DDoS           .     ,   DDoS       .       ,    .                  .</li>
<li> <br>
<br>
<img src="https://habrastorage.org/webt/mf/4a/dh/mf4adhih7pyi63blge6uj6uz-ei.png"><br>
 <i> (bulkheads) â€“      ,   ,            </i>. </li>
<li><i></i>:        .  ,   ,     ,  ,      .      , ,  API,     , ,              ,         .      Users       ,     Chat. </li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Auf dieser Grundlage versuchen wir bei letgo, die asynchrone Kommunikation zwischen Diensten einzuhalten, und synchron funktioniert nur in AusnahmefÃ¤llen wie Feature-MVP. </font><font style="vertical-align: inherit;">Wir tun dies, weil wir mÃ¶chten, dass jeder Dienst seine eigenen EntitÃ¤ten basierend auf DomÃ¤nenereignissen generiert, die von anderen Diensten in unserem Nachrichtenbus verÃ¶ffentlicht wurden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unserer Meinung nach hÃ¤ngt der Erfolg oder Misserfolg bei der Implementierung der Microservice-Architektur davon ab, wie Sie mit der inhÃ¤renten KomplexitÃ¤t umgehen und wie Ihre Services miteinander interagieren. </font><font style="vertical-align: inherit;">Wenn Sie Code teilen, ohne die Kommunikationsinfrastruktur auf asynchron zu Ã¼bertragen, wird Ihre Anwendung zu einem verteilten Monolithen.</font></font><br>
 <br>
<img src="https://habrastorage.org/webt/jl/oe/7s/jloe7s2cfhx0t11yw1-uemrovuc.png"> <br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ereignisgesteuerte Architektur in letgo</font></font><br>
</h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Heute mÃ¶chte ich ein Beispiel dafÃ¼r geben, wie wir DomÃ¤nenereignisse und asynchrone Kommunikation in letgo verwenden: Unsere BenutzerentitÃ¤t ist in vielen Diensten vorhanden, aber ihre Erstellung und Bearbeitung wird zunÃ¤chst vom Benutzerdienst verarbeitet. In der Datenbank des Benutzerdienstes speichern wir viele Daten wie Name, E-Mail-Adresse, Avatar, Land usw. In unserem Chat-Dienst haben wir auch ein Benutzerkonzept, aber wir benÃ¶tigen nicht die Daten, Ã¼ber die die BenutzerentitÃ¤t aus dem Benutzerdienst verfÃ¼gt. Der Name, der Avatar und die ID des Benutzers (Link zum Profil) werden in der Liste der Dialogfelder angezeigt. Wir sagen, dass es in einem Chat nur eine Projektion der BenutzerentitÃ¤t gibt, die Teildaten enthÃ¤lt. TatsÃ¤chlich sprechen wir im Chat nicht Ã¼ber Benutzer, sondern nennen sie "Sprecher". Diese Projektion bezieht sich auf den Chat-Dienst und basiert auf den Ereignissen, die der Chat vom Benutzerdienst empfÃ¤ngt.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir machen das gleiche mit Listings. </font><font style="vertical-align: inherit;">Im Produktservice speichern wir n Bilder jeder Auflistung, aber in der Listenansicht der Dialoge zeigen wir ein Hauptbild, sodass fÃ¼r unsere Projektion von Produkten zum Chat nur ein Bild anstelle von n erforderlich ist. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/kz/uo/ly/kzuoly0z_rap8-cy7w06cusjsza.png"><br>
 <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zeigen Sie eine Liste der Dialoge in unserem Chat an. </font><font style="vertical-align: inherit;">Es zeigt, welcher spezifische Dienst im Backend Informationen bereitstellt. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie sich die Liste der Dialogfelder noch einmal ansehen, werden Sie feststellen, dass fast alle von uns angezeigten Daten nicht vom Chat-Dienst erstellt wurden, sondern dazu gehÃ¶ren, da die Benutzer- und Chat-Projektionen dem Chat gehÃ¶ren. </font><font style="vertical-align: inherit;">Es gibt einen Kompromiss zwischen ZugÃ¤nglichkeit und Konsistenz von Projektionen, auf den wir in diesem Artikel nicht eingehen werden, aber ich mÃ¶chte nur sagen, dass es eindeutig einfacher ist, viele kleine Datenbanken als eine groÃŸe zu skalieren. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/5m/_s/jx/5m_sjxcdbfcu09dzm7im2sj7lmu.png"> <br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vereinfachte Ansicht der Letgo-Architektur</font></font></i><br>
 <br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Antipatterns</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Einige intuitive LÃ¶sungen wurden oft zu Fehlern. Hier ist eine Liste der wichtigsten Antimuster, die wir in unserer domÃ¤nenbezogenen Architektur angetroffen haben. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. Dicke Ereignisse</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Wir versuchen, unsere Domain-Events so klein wie mÃ¶glich zu halten, ohne ihren Domain-Wert zu verlieren. Wir hÃ¤tten vorsichtig sein mÃ¼ssen, wenn wir Ã¤ltere Codebasen mit groÃŸen EntitÃ¤ten umgestaltet und zur Ereignisarchitektur gewechselt haben. Solche EntitÃ¤ten kÃ¶nnen uns zu fetten Ereignissen fÃ¼hren, aber da unsere Domain-Ereignisse in einen Ã¶ffentlichen Auftrag umgewandelt wurden, mussten wir sie so einfach wie mÃ¶glich gestalten. In diesem Fall wird das Refactoring am besten von der Seite betrachtet. Zu Beginn gestalten wir unsere Events mit der </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">Event-Storm-</font></a><font style="vertical-align: inherit;"> Technik</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und Ã¼berarbeiten Sie dann den Service-Code, um ihn an unsere Ereignisse anzupassen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir sollten auch beim Problem â€Produkt und Benutzerâ€œ vorsichtiger sein: Viele Systeme verwenden Produkt- und BenutzerentitÃ¤ten, und diese EntitÃ¤ten ziehen in der Regel die gesamte Logik hinter sich her, und dies bedeutet, dass alle DomÃ¤nenereignisse mit ihnen verknÃ¼pft sind. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. Ereignisse als Absichten Ein</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
DomÃ¤nenereignis ist per Definition ein Ereignis, das bereits aufgetreten ist. Wenn Sie etwas im Nachrichtenbus verÃ¶ffentlichen, um anzufordern, was in einem anderen Dienst passiert ist, fÃ¼hren Sie hÃ¶chstwahrscheinlich einen asynchronen Befehl aus, anstatt ein DomÃ¤nenereignis zu erstellen. In der Regel beziehen wir uns auf vergangene Domain-Ereignisse: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ser_registered</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">product_published</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">usw. Je weniger ein Dienst Ã¼ber den anderen weiÃŸ, desto besser. Die Verwendung von Ereignissen als Befehle verknÃ¼pft Dienste und erhÃ¶ht die Wahrscheinlichkeit, dass sich eine Ã„nderung eines Dienstes auf andere Dienste auswirkt. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. Fehlende unabhÃ¤ngige Serialisierung oder Komprimierung. Die</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Systeme zur Serialisierung und Komprimierung von Ereignissen in unserem Themenbereich sollten nicht von der Programmiersprache abhÃ¤ngen. Sie mÃ¼ssen nicht einmal wissen, in welcher Sprache Verbraucherdienste geschrieben sind. Deshalb kÃ¶nnen wir zum Beispiel Java- oder PHP-Serializer verwenden. Lassen Sie Ihr Team Zeit damit verbringen, einen Serializer zu diskutieren und auszuwÃ¤hlen, da das Ã„ndern in Zukunft schwierig und zeitaufwÃ¤ndig sein wird. Wir bei letgo verwenden JSON, es gibt jedoch viele andere Serialisierungsformate mit guter Leistung. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4. Fehlende Standardstruktur</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als wir damit begannen, das letgo-Backend auf eine ereignisorientierte Architektur zu portieren, einigten wir uns auf eine gemeinsame Struktur fÃ¼r DomÃ¤nenereignisse. </font><font style="vertical-align: inherit;">Es sieht ungefÃ¤hr so â€‹â€‹aus:</font></font><br>
<br>
<pre><code class="bash hljs">{<font></font>
  â€œdataâ€: {<font></font>
    â€œidâ€: [uuid], // event id.<font></font>
    â€œ<span class="hljs-built_in">type</span>â€: â€œuser_registeredâ€,<font></font>
    â€œattributesâ€: {<font></font>
      â€œidâ€: [uuid], // aggregate/entity id, <span class="hljs-keyword">in</span> this <span class="hljs-keyword">case</span> user_id<font></font>
      â€œuser_nameâ€: â€œJohn Doeâ€,<font></font>
      â€¦<font></font>
    }<font></font>
  },<font></font>
  â€œmetaâ€ : {<font></font>
    â€œcreated_atâ€: timestamp, // when was the event created?<font></font>
    â€œhostâ€: â€œusers-serviceâ€ // <span class="hljs-built_in">where</span> was the event created?<font></font>
    â€¦<font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Durch eine gemeinsame Struktur unserer DomÃ¤nenereignisse kÃ¶nnen wir Dienste schnell integrieren und einige Bibliotheken mit Abstraktionen implementieren. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5. Fehlende</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
SchemaÃ¼berprÃ¼fung WÃ¤hrend der Serialisierung hatten wir bei letgo Probleme mit Programmiersprachen ohne starke Typisierung.</font></font><br>
<br>
<pre><code class="bash hljs"><font></font>
{<font></font>
  â€œnull_value_oneâ€: null, // thank god<font></font>
  â€œnull_value_twoâ€: â€œnullâ€,<font></font>
  â€œnull_value_threeâ€: â€œâ€,<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eine etablierte Testkultur, die die Serialisierung unserer Ereignisse garantiert, und ein VerstÃ¤ndnis der Funktionsweise der Serialisierungsbibliothek tragen dazu bei, damit umzugehen. Wir bei letgo wechseln zu Avro und der Confluent Schema Registry, die uns einen einzigen Punkt zur Bestimmung der Struktur der Ereignisse unserer Domain bietet und Fehler dieser Art sowie veraltete Dokumentation vermeidet. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6. AnÃ¤mische DomÃ¤nenereignisse</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Wie ich bereits sagte und wie der Name schon sagt, mÃ¼ssen DomÃ¤nenereignisse auf DomÃ¤nenebene einen Wert haben. So wie wir versuchen, die Inkonsistenz von ZustÃ¤nden in unseren EntitÃ¤ten zu vermeiden, mÃ¼ssen wir dies bei DomÃ¤nenereignissen vermeiden. Lassen Sie uns dies anhand des folgenden Beispiels veranschaulichen: Das Produkt in unserem System verfÃ¼gt Ã¼ber eine Geolokalisierung mit LÃ¤ngen- und Breitengrad, die in zwei verschiedenen Feldern der Produkttabelle des Produktservices gespeichert sind. Alle Produkte kÃ¶nnen "verschoben" werden, daher haben wir Domain-Ereignisse, um dieses Update zu prÃ¤sentieren. Zuvor hatten wir zwei Ereignisse: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">product_latitude_updated</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">product_longitude_updated</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , was wenig Sinn machte, wenn Sie kein Turm auf einem Schachbrett waren. In diesem Fall sind die Ereignisse </font><i><font style="vertical-align: inherit;">product_location_updated</font></i><font style="vertical-align: inherit;"> sinnvoller.</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">oder </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">product_moved</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<img src="https://habrastorage.org/webt/1h/ok/ff/1hokffsq9losxaqclezfkrpknlq.png"> <br>
 <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ein Turm ist eine Schachfigur. FrÃ¼her hieÃŸ es Tour. Ein Turm kann sich nur vertikal oder horizontal durch eine beliebige Anzahl nicht besetzter Felder bewegen. </font></font></i><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7. Fehlende Debugging-Tools</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir bei letgo produzieren Tausende von Domain-Events pro Minute. All diese Ereignisse werden zu einer Ã¤uÃŸerst nÃ¼tzlichen Ressource, um zu verstehen, was in unserem System geschieht, BenutzeraktivitÃ¤ten zu registrieren oder sogar den Status eines Systems zu einem bestimmten Zeitpunkt mithilfe der Ereignissuche zu rekonstruieren. Wir mÃ¼ssen diese Ressource geschickt nutzen, und dafÃ¼r benÃ¶tigen wir Tools zum ÃœberprÃ¼fen und Debuggen unserer Ereignisse. Anfragen wie "Zeigen Sie mir alle Ereignisse, die John Doe in den letzten 3 Stunden generiert hat" kÃ¶nnen ebenfalls hilfreich sein, um Betrug aufzudecken. Zu diesem Zweck haben wir einige Tools fÃ¼r ElasticSearch, Kibana und S3 entwickelt. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8. Fehlende EreignisÃ¼berwachung</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir kÃ¶nnen DomÃ¤nenereignisse verwenden, um den Zustand des Systems zu testen. Wenn wir etwas bereitstellen (was je nach Dienst mehrmals tÃ¤glich geschieht), benÃ¶tigen wir Tools, um den korrekten Vorgang schnell zu Ã¼berprÃ¼fen. Zum Beispiel, wenn wir eine neue Version des </font><i><font style="vertical-align: inherit;">Produktservices</font></i><font style="vertical-align: inherit;"> in der Produktion bereitstellen und eine Verringerung der Anzahl von </font><i><font style="vertical-align: inherit;">product_published-</font></i><font style="vertical-align: inherit;"> Ereignissen </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">feststellen</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">20%, man kann mit Sicherheit sagen, dass wir etwas kaputt gemacht haben. Wir verwenden derzeit InfluxDB, Grafana und Prometheus, um dies mit abgeleiteten Funktionen zu erreichen. Wenn Sie sich an den Verlauf der Mathematik erinnern, werden Sie verstehen, dass die Ableitung der Funktion f (x) am Punkt x gleich der Tangente des Tangentenwinkels ist, der an diesem Punkt zum Diagramm der Funktion gezogen wird. Wenn Sie eine Funktion zum VerÃ¶ffentlichen der Geschwindigkeit eines bestimmten Ereignisses in einem Themenbereich haben und daraus eine Ableitung ableiten, werden die Spitzen dieser Funktion angezeigt und Sie kÃ¶nnen Benachrichtigungen basierend darauf festlegen. Mit diesen Benachrichtigungen kÃ¶nnen Sie AusdrÃ¼cke wie "Warnen Sie mich, wenn wir 5 Minuten lang weniger als 200 Ereignisse pro Sekunde verÃ¶ffentlichen" vermeiden und sich auf eine signifikante Ã„nderung der VerÃ¶ffentlichungsgeschwindigkeit konzentrieren.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/q4/h9/vw/q4h9vwonlfi429wmycxph_w27cu.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hier ist etwas Seltsames passiert ... Oder vielleicht ist es nur eine Marketingkampagne </font></font></i><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9. Die Hoffnung, dass alles gut wird</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Wir versuchen, nachhaltige Systeme zu schaffen und die Kosten fÃ¼r ihre Wiederherstellung zu senken. Neben Infrastrukturproblemen und dem menschlichen Faktor ist der Verlust von Ereignissen eines der hÃ¤ufigsten Dinge, die die Ereignisarchitektur beeinflussen kÃ¶nnen. Wir brauchen einen Plan, mit dem wir den korrekten Zustand des Systems wiederherstellen kÃ¶nnen, indem wir alle verlorenen Ereignisse erneut verarbeiten. Hier basiert unsere Strategie auf zwei Punkten:</font></font><br>
<br>
<ul>
<li><i>  :</i>       ,  Â«   ,   Â»,   -  ,       .  letgo       Data,   Backend.</li>
<li><i> :</i>  -                   .   ,          ,  ,  <i>message bus</i>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">  </a>. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="></a> â€“ ,   ,     . ,        <i>user_registered</i>   <i>Users</i>,      ,       MySQL,   <i>user_id</i>    .      <i>user_registered</i>,      ,         .   ,        ,       -      MySQL ( ,  30 ).          -,     DynamoDB.      ,   ,      ,      .    ,         ,       ,   ,     .</li>
</ul><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10. Fehlende Dokumentation zu DomÃ¤nenereignissen</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Unsere DomÃ¤nenereignisse sind zu unserer Ã¶ffentlichen Schnittstelle fÃ¼r alle Systeme im Backend geworden. So wie wir unsere REST-APIs dokumentieren, mÃ¼ssen wir auch DomÃ¤nenereignisse dokumentieren. Jeder Mitarbeiter der Organisation sollte in der Lage sein, aktualisierte Dokumentationen fÃ¼r jedes von jedem Dienst verÃ¶ffentlichte DomÃ¤nenereignis anzuzeigen. Wenn wir Schemata zum ÃœberprÃ¼fen von DomÃ¤nenereignissen verwenden, kÃ¶nnen diese auch als Dokumentation verwendet werden. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11. Widerstand gegen den Konsum eigener Ereignisse</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie dÃ¼rfen und werden sogar dazu ermutigt, Ihre eigenen DomÃ¤nenereignisse zu verwenden, um Projektionen in Ihrem System zu erstellen, die beispielsweise zum Lesen optimiert sind. </font><font style="vertical-align: inherit;">Einige Teams widersetzten sich diesem Konzept, weil sie sich auf das Konzept des Konsums von Ereignissen anderer Leute beschrÃ¤nkten. </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir sehen uns auf dem Kurs!</font></font></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de493114/index.html">Wie Data Engineer Daten beobachtete</a></li>
<li><a href="../de493116/index.html">"Mehr InteraktivitÃ¤t!" oder Wie war TeamLead Conf 2020?</a></li>
<li><a href="../de493118/index.html">Ãœbersicht Ã¼ber die Speicher-Tagging-Erweiterung (Armv8.5-A)</a></li>
<li><a href="../de493122/index.html">BÃ¼ro der Banzai Games: Japan im Zentrum von Moskau</a></li>
<li><a href="../de493124/index.html">Bare-Metal-Provisioning zum Selbermachen oder automatische Servervorbereitung von Grund auf neu</a></li>
<li><a href="../de493130/index.html">Warum Sie keine Angst vor Coronavirus haben sollten: Mythen und fast die Wahrheit Ã¼ber COVID-2019</a></li>
<li><a href="../de493132/index.html">Rund um data.table</a></li>
<li><a href="../de493136/index.html">FAST VP in Unity Storage: So funktioniert es</a></li>
<li><a href="../de493138/index.html">Sprechen Sie mit mir: Was Voice Bots heute kÃ¶nnen</a></li>
<li><a href="../de493140/index.html">Die Abenteuer von Cipollino: QuarantÃ¤ne IT Quest von Flant</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>