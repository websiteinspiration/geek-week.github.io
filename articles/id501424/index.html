<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ÄºÔ∏è üë©üèΩ‚Äçüè≠ ‚ôüÔ∏è Dari kehidupan dengan Kubernetes: Bagaimana kami menghapus DBMS (dan tidak hanya) dari lingkungan ulasan menjadi statis üë≤üèº üàµ üêΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Catatan : artikel ini tidak mengklaim sebagai praktik terbaik. Ini menggambarkan pengalaman implementasi spesifik tugas infrastruktur dalam hal menggu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Dari kehidupan dengan Kubernetes: Bagaimana kami menghapus DBMS (dan tidak hanya) dari lingkungan ulasan menjadi statis</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/flant/blog/501424/"><img src="https://habrastorage.org/webt/ae/yu/zw/aeyuzw9pz0k6d0pbc0g86pxkfd0.png"><br>
<br>
<i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Catatan</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : artikel ini tidak mengklaim sebagai praktik terbaik. </font><font style="vertical-align: inherit;">Ini menggambarkan pengalaman implementasi spesifik tugas infrastruktur dalam hal menggunakan Kubernetes dan Helm, yang dapat berguna dalam memecahkan masalah terkait. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Menggunakan lingkungan ulasan di CI / CD bisa sangat berguna, baik untuk pengembang dan insinyur sistem. </font><font style="vertical-align: inherit;">Pertama-tama mari kita menyinkronkan ide-ide umum tentang mereka:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Lingkungan tinjauan dapat dibuat dari cabang terpisah di repositori Git yang didefinisikan oleh pengembang (yang disebut cabang fitur).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mereka dapat memiliki instance DBMS yang terpisah, prosesor antrian, layanan caching, dll. </font><font style="vertical-align: inherit;">- secara umum, semuanya untuk reproduksi penuh dari lingkungan produksi.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mereka memungkinkan pengembangan paralel, secara signifikan mempercepat pelepasan fitur baru dalam aplikasi. </font><font style="vertical-align: inherit;">Pada saat yang sama, lusinan lingkungan seperti itu mungkin diperlukan setiap hari, itulah sebabnya kecepatan penciptaannya sangat penting.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di persimpangan titik kedua dan ketiga, kesulitan sering muncul: karena infrastruktur sangat berbeda, komponennya dapat digunakan untuk waktu yang lama. </font><font style="vertical-align: inherit;">Waktu yang dihabiskan ini, misalnya, termasuk mengembalikan database dari cadangan yang sudah disiapkan *. </font><font style="vertical-align: inherit;">Artikel ini adalah tentang cara menarik yang pernah kami lakukan untuk menyelesaikan masalah seperti itu.</font></font><a name="habracut"></a><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">* Ngomong-ngomong, secara khusus tentang dump database besar dalam konteks ini, kami sudah menulis di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">materi tentang mempercepat database bootstrap</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .)</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Masalah dan cara mengatasinya</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam salah satu proyek, kami diberi tugas "menciptakan titik masuk tunggal untuk pengembang dan insinyur QA." </font><font style="vertical-align: inherit;">Formulasi ini menyembunyikan secara teknis hal berikut:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Untuk menyederhanakan pekerjaan QA-engineer dan beberapa karyawan lainnya, keluarkan semua basis data (dan vhosts terkait) yang digunakan dalam tinjauan, dalam lingkungan statis - terpisah. </font><font style="vertical-align: inherit;">Untuk alasan yang berlaku dalam proyek ini, cara berinteraksi dengan mereka adalah optimal.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kurangi waktu yang diperlukan untuk membuat lingkungan ulasan. </font><font style="vertical-align: inherit;">Seluruh proses penciptaan mereka dari awal tersirat, yaitu. </font><font style="vertical-align: inherit;">termasuk kloning basis data, migrasi, dll.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dari sudut pandang implementasi, masalah utama bermuara pada memastikan idempotensi saat membuat dan menghapus lingkungan ulasan. Untuk mencapai ini, kami mengubah mekanisme untuk menciptakan lingkungan ulasan dengan memigrasi layanan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PostgreSQL, MongoDB, dan RabbitMQ terlebih dahulu</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ke lingkungan statis. Statis mengacu pada lingkungan "permanen" yang tidak akan dibuat atas permintaan pengguna (seperti halnya dengan lingkungan ulasan). </font></font><br>
<br>
<i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Penting!</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Pendekatan dengan lingkungan statis </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jauh dari ideal</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - untuk kekurangan spesifiknya, lihat bagian akhir artikel. Namun, kami membagikan pengalaman ini secara terperinci, karena dapat lebih atau kurang berlaku dalam tugas-tugas lain, dan pada saat yang sama berfungsi sebagai argumen saat membahas masalah desain infrastruktur.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jadi, urutan tindakan dalam implementasi:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Saat membuat lingkungan ulasan, berikut ini harus terjadi sekali: pembuatan database di dua DBMS (MongoDB dan PostgreSQL), pemulihan database dari cadangan / templat, dan pembuatan vhost di RabbitMQ. </font><font style="vertical-align: inherit;">Ini akan membutuhkan cara yang nyaman untuk memuat dump saat ini. </font><font style="vertical-align: inherit;">(Jika Anda pernah memiliki lingkungan ulasan sebelumnya, kemungkinan besar Anda sudah memiliki solusi yang siap pakai untuk ini.)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Setelah menyelesaikan lingkungan ulasan, Anda harus menghapus database dan host virtual di RabbitMQ.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam kasus kami, infrastruktur beroperasi dalam kerangka Kubernetes (menggunakan Helm). </font><font style="vertical-align: inherit;">Oleh karena itu, untuk pelaksanaan tugas-tugas di atas, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kait Helm sangat</font></font></b></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> baik </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Mereka dapat dilakukan baik sebelum penciptaan semua komponen lain dalam rilis Helm, dan / atau setelah mereka dihapus. </font><font style="vertical-align: inherit;">Karena itu:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">untuk tugas inisialisasi, kami akan menggunakan pengait </font></font><code>pre-install</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">untuk meluncurkannya sebelum membuat semua sumber daya dalam rilis;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">untuk tugas hapus, sebuah kait </font></font><code>post-delete</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mari beralih ke detail implementasi.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Implementasi praktis</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam versi aslinya, proyek ini hanya menggunakan satu Pekerjaan, yang terdiri dari tiga kontainer. </font><font style="vertical-align: inherit;">Tentu saja, ini tidak sepenuhnya nyaman, karena hasilnya adalah manifes besar yang sulit dibaca. </font><font style="vertical-align: inherit;">Karena itu, kami membaginya menjadi tiga pekerjaan kecil. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Berikut ini adalah daftar untuk PostgreSQL, dan dua lainnya (MongoDB dan RabbitMQ) identik dalam struktur manifes:</font></font><br>
<br>
<pre><code class="plaintext hljs">{{- if .Values.global.review }}<font></font>
---<font></font>
apiVersion: batch/v1<font></font>
kind: Job<font></font>
metadata:<font></font>
  name: db-create-postgres-database<font></font>
  annotations:<font></font>
    "helm.sh/hook": "pre-install"<font></font>
    "helm.sh/hook-weight": "5"<font></font>
spec:<font></font>
  template:<font></font>
    metadata:<font></font>
      name: init-db-postgres<font></font>
    spec:<font></font>
      volumes:<font></font>
      - name: postgres-scripts<font></font>
        configMap:<font></font>
          defaultMode: 0755<font></font>
          name: postgresql-configmap<font></font>
      containers:<font></font>
      - name: init-postgres-database<font></font>
        image: private-registry/postgres <font></font>
        command: ["/docker-entrypoint-initdb.d/01-review-load-dump.sh"]<font></font>
        volumeMounts:<font></font>
        - name: postgres-scripts<font></font>
          mountPath: /docker-entrypoint-initdb.d/01-review-load-dump.sh<font></font>
          subPath: review-load-dump.sh<font></font>
        env:<font></font>
{{- include "postgres_env" . | indent 8 }}<font></font>
      restartPolicy: Never<font></font>
{{- end }}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Komentar pada isi manifes:</font></font><br>
<br>
<ol>
<li> Job    review-.  review   CI/CD       Helm- (. <code>if</code>  <code>.Values.global.review</code>    ).</li>
<li>  Job      ‚Äî , ConfigMap.       ,  ,       .       ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>hook-weight</code></a>.</li>
<li>      cURL   ,        PostgreSQL,       .</li>
<li>      PostgreSQL    :     ,     shell- .</li>
</ol><br>
<h3>PostgreSQL</h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Yang paling menarik adalah di skrip shell ( </font></font><code>review-load-dump.sh</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) yang </font><font style="vertical-align: inherit;">telah disebutkan dalam daftar </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Apa opsi umum untuk memulihkan database di PostgreSQL?</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Pemulihan "Standar" dari cadangan;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pemulihan menggunakan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">templat</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam kasus kami, perbedaan antara kedua pendekatan terutama dalam kecepatan membuat database untuk lingkungan baru. </font><font style="vertical-align: inherit;">Yang pertama - kita memuat dump database dan mengembalikannya dengan </font></font><code>pg_restore</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Dan bersama kami ini terjadi lebih lambat dari metode kedua, sehingga pilihan yang sesuai dibuat. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Menggunakan opsi kedua ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pemulihan dengan templat</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) Anda dapat mengkloning basis data pada tingkat fisik tanpa mengirim data ke dalamnya dari wadah di lingkungan lain - ini mengurangi waktu pemulihan. </font><font style="vertical-align: inherit;">Namun, ada batasan: Anda tidak dapat mengkloning database yang koneksi aktifnya tetap. </font><font style="vertical-align: inherit;">Karena kita menggunakan stage sebagai lingkungan statis (dan bukan lingkungan ulasan terpisah), kita perlu membuat database kedua dan mengubahnya menjadi templat, memperbaruinya setiap hari (misalnya, di pagi hari). </font><font style="vertical-align: inherit;">CronJob kecil disiapkan untuk ini:</font></font><br>
<br>
<pre><code class="plaintext hljs">---<font></font>
apiVersion: batch/v1beta1<font></font>
kind: CronJob<font></font>
metadata:<font></font>
  name: update-postgres-template<font></font>
spec:<font></font>
  schedule: "50 4 * * *"<font></font>
  concurrencyPolicy: Forbid<font></font>
  successfulJobsHistoryLimit: 3<font></font>
  failedJobsHistoryLimit: 3<font></font>
  startingDeadlineSeconds: 600<font></font>
  jobTemplate:<font></font>
    spec:<font></font>
      template:<font></font>
        spec:<font></font>
          restartPolicy: Never<font></font>
          imagePullSecrets:<font></font>
          - name: registrysecret<font></font>
          volumes:<font></font>
          - name: postgres-scripts<font></font>
            configMap:<font></font>
              defaultMode: 0755<font></font>
              name: postgresql-configmap-update-cron<font></font>
          containers:<font></font>
          - name: cron<font></font>
            command: ["/docker-entrypoint-initdb.d/update-postgres-template.sh"]<font></font>
          image: private-registry/postgres <font></font>
            volumeMounts:<font></font>
            - name: postgres-scripts<font></font>
              mountPath: /docker-entrypoint-initdb.d/update-postgres-template.sh<font></font>
              subPath: update-postgres-template.sh<font></font>
            env:<font></font>
{{- include "postgres_env" . | indent 8 }}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Manifes ConfigMap lengkap yang berisi skrip kemungkinan besar tidak masuk akal (laporkan dalam komentar jika ini bukan masalahnya). </font><font style="vertical-align: inherit;">Sebagai gantinya, saya akan memberikan hal yang paling penting - skrip bash:</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-comment">#!/bin/bash -x</span><font></font>
<font></font>
CREDENTIALS=<span class="hljs-string">"postgresql://<span class="hljs-variable">${POSTGRES_USER}</span>:<span class="hljs-variable">${POSTGRES_PASSWORD}</span>@<span class="hljs-variable">${POSTGRES_HOST}</span>/postgres"</span><font></font>
<font></font>
psql -d <span class="hljs-string">"<span class="hljs-variable">${CREDENTIALS}</span>"</span> -w -c <span class="hljs-string">"REVOKE CONNECT ON DATABASE <span class="hljs-variable">${POSTGRES_DB_TEMPLATE}</span> FROM public"</span>
psql -d <span class="hljs-string">"<span class="hljs-variable">${CREDENTIALS}</span>"</span> -w -c <span class="hljs-string">"SELECT pg_terminate_backend(pg_stat_activity.pid) FROM pg_stat_activity WHERE pg_stat_activity.datname = '<span class="hljs-variable">${POSTGRES_DB_TEMPLATE}</span>'"</span><font></font>
<font></font>
curl --fail -vsL <span class="hljs-variable">${HOST_FORDEV}</span>/latest_<span class="hljs-variable">${POSTGRES_DB_STAGE}</span>.psql -o /tmp/<span class="hljs-variable">${POSTGRES_DB}</span>.psql<font></font>
<font></font>
psql -d <span class="hljs-string">"<span class="hljs-variable">${CREDENTIALS}</span>"</span> -w -c <span class="hljs-string">"ALTER DATABASE <span class="hljs-variable">${POSTGRES_DB_TEMPLATE}</span> WITH is_template false allow_connections true;"</span>
psql -d <span class="hljs-string">"<span class="hljs-variable">${CREDENTIALS}</span>"</span> -w -c <span class="hljs-string">"DROP DATABASE <span class="hljs-variable">${POSTGRES_DB_TEMPLATE}</span>;"</span> || <span class="hljs-literal">true</span>
psql -d <span class="hljs-string">"<span class="hljs-variable">${CREDENTIALS}</span>"</span> -w -c <span class="hljs-string">"CREATE DATABASE <span class="hljs-variable">${POSTGRES_DB_TEMPLATE}</span>;"</span> || <span class="hljs-literal">true</span>
pg_restore -U <span class="hljs-variable">${POSTGRES_USER}</span> -h <span class="hljs-variable">${POSTGRES_HOST}</span> -w -j 4 -d <span class="hljs-variable">${POSTGRES_DB_TEMPLATE}</span> /tmp/<span class="hljs-variable">${POSTGRES_DB}</span>.psql<font></font>
<font></font>
psql -d <span class="hljs-string">"<span class="hljs-variable">${CREDENTIALS}</span>"</span> -w -c <span class="hljs-string">"ALTER DATABASE <span class="hljs-variable">${POSTGRES_DB_TEMPLATE}</span> WITH is_template true allow_connections false;"</span><font></font>
<font></font>
rm -v /tmp/<span class="hljs-variable">${POSTGRES_DB}</span>.psql</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anda dapat memulihkan beberapa database sekaligus dari satu templat tanpa konflik. </font><font style="vertical-align: inherit;">Yang utama adalah bahwa koneksi database harus dilarang, dan database itu sendiri harus berupa template. </font><font style="vertical-align: inherit;">Ini dilakukan pada langkah kedua dari belakang. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Manifes yang berisi skrip shell untuk memulihkan database ternyata seperti ini:</font></font><br>
<br>
<pre><code class="plaintext hljs">---<font></font>
apiVersion: v1<font></font>
kind: ConfigMap<font></font>
metadata:<font></font>
  name: postgresql-configmap<font></font>
  annotations:<font></font>
    "helm.sh/hook": "pre-install"<font></font>
    "helm.sh/hook-weight": "1"<font></font>
    "helm.sh/hook-delete-policy": before-hook-creation,hook-succeeded<font></font>
data:<font></font>
  review-load-dump.sh: |<font></font>
    #!/bin/bash -x<font></font>
    <font></font>
 <font></font>
 <font></font>
    CREDENTIALS="postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}/postgres"<font></font>
<font></font>
    if [ "$( psql -d "${CREDENTIALS}" -tAc "SELECT CASE WHEN EXISTS (SELECT * FROM pg_stat_activity WHERE datname = '${POSTGRES_DB}' LIMIT 1) THEN 1 ELSE 0 END;" )" = '1' ]<font></font>
      then<font></font>
          echo "Open connections has been found in ${POSTGRES_DB} database, will drop them"<font></font>
          psql -d "${CREDENTIALS}" -c "SELECT pg_terminate_backend(pg_stat_activity.pid) FROM pg_stat_activity WHERE pg_stat_activity.datname = '${POSTGRES_DB}' -- AND pid &lt;&gt; pg_backend_pid();"<font></font>
      else<font></font>
          echo "No open connections has been found ${POSTGRES_DB} database, skipping this stage"<font></font>
    fi<font></font>
<font></font>
    psql -d "${CREDENTIALS}" -c "DROP DATABASE ${POSTGRES_DB}"<font></font>
<font></font>
    if [ "$( psql -d "${CREDENTIALS}" -tAc "SELECT 1 FROM pg_database WHERE datname='${POSTGRES_DB}'" )" = '1' ]<font></font>
      then<font></font>
          echo "Database ${POSTGRES_DB} still exists, delete review job failed"<font></font>
          exit 1<font></font>
      else<font></font>
          echo "Database ${POSTGRES_DB} does not exist, skipping"<font></font>
    fi<font></font>
<font></font>
<font></font>
    psql ${CREDENTIALS} -d postgres -c 'CREATE DATABASE ${POSTGRES_DB} TEMPLATE "loot-stage-copy"'</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Rupanya, mereka terlibat di sini </font></font><code>hook-delete-policy</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Rincian tentang penerapan kebijakan ini ditulis di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sini</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Dalam manifes yang diberikan kami menggunakan </font></font><code>before-hook-creation,hook-succeeded</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">yang memungkinkan untuk memenuhi persyaratan berikut: hapus objek sebelumnya sebelum membuat hook baru dan hapus hanya ketika hook berhasil. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami akan menghapus basis data dalam ConfigMap ini:</font></font><br>
<br>
<pre><code class="plaintext hljs">---<font></font>
apiVersion: v1<font></font>
kind: ConfigMap<font></font>
metadata:<font></font>
  name: postgresql-configmap-on-delete<font></font>
  annotations:<font></font>
    "helm.sh/hook": "post-delete, pre-delete"<font></font>
    "helm.sh/hook-weight": "1"<font></font>
    "helm.sh/hook-delete-policy": before-hook-creation<font></font>
data:<font></font>
  review-delete-db.sh: |<font></font>
    #!/bin/bash -e<font></font>
<font></font>
    CREDENTIALS="postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}/postgres"<font></font>
<font></font>
    psql -d "${CREDENTIALS}" -w postgres -c "DROP DATABASE ${POSTGRES_DB}"</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Meskipun kami memindahkannya ke ConfigMap yang terpisah, ia dapat ditempatkan di ConfigMap biasa </font></font><code>command</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Bagaimanapun, itu dapat dibuat satu garis tanpa menyulitkan penampilan manifes itu sendiri. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika opsi dengan templat PostgreSQL karena alasan tertentu tidak sesuai atau tidak cocok, Anda dapat kembali ke </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jalur pemulihan "standar" yang</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> disebutkan di atas </font><b><font style="vertical-align: inherit;">menggunakan cadangan</font></b><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Algoritma akan sepele:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Setiap malam, cadangan database dibuat sehingga dapat diunduh dari jaringan lokal cluster.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Pada saat pembuatan lingkungan ulasan, database dimuat dan dipulihkan dari dump.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ketika dump dikerahkan, semua tindakan lain dilakukan.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam hal ini, skrip pemulihan akan menjadi kira-kira sebagai berikut:</font></font><br>
<br>
<pre><code class="plaintext hljs">---<font></font>
apiVersion: v1<font></font>
kind: ConfigMap<font></font>
metadata:<font></font>
  name: postgresql-configmap<font></font>
  annotations:<font></font>
    "helm.sh/hook": "pre-install"<font></font>
    "helm.sh/hook-weight": "1"<font></font>
    "helm.sh/hook-delete-policy": before-hook-creation,hook-succeeded<font></font>
data:<font></font>
  review-load-dump.sh: |<font></font>
    #!/bin/bash -x<font></font>
<font></font>
    CREDENTIALS="postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}/postgres"<font></font>
    psql -d "${CREDENTIALS}" -w -c "DROP DATABASE ${POSTGRES_DB}" || true<font></font>
    psql -d "${CREDENTIALS}" -w -c "CREATE DATABASE ${POSTGRES_DB}"<font></font>
<font></font>
    curl --fail -vsL ${HOST_FORDEV}/latest_${POSTGRES_DB_STAGE}.psql -o /tmp/${POSTGRES_DB}.psql<font></font>
<font></font>
    psql psql -d "${CREDENTIALS}" -w -c "CREATE EXTENSION ip4r;"<font></font>
    pg_restore -U ${POSTGRES_USER} -h ${POSTGRES_HOST} -w -j 4 -d ${POSTGRES_DB} /tmp/${POSTGRES_DB}.psql<font></font>
    rm -v /tmp/${POSTGRES_DB}.psql</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Prosedur sesuai dengan apa yang telah dijelaskan di atas. Satu-satunya perubahan adalah penghapusan file psql setelah semua pekerjaan ditambahkan. </font></font><br>
<br>
<i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Catatan</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : baik dalam skrip pemulihan dan skrip uninstall, database dihapus setiap waktu. Hal ini dilakukan untuk menghindari kemungkinan konflik selama pembuatan ulang ulasan: Anda perlu memastikan bahwa database benar-benar dihapus. Juga, masalah ini berpotensi dapat diselesaikan dengan menambahkan flag </font></font><code>--clean</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">di utilitas </font></font><code>pg_restore</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, tetapi hati-hati: flag ini membersihkan data hanya dari elemen-elemen yang ada di dump itu sendiri, jadi dalam kasus kami opsi ini tidak berfungsi.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Akibatnya, kami mendapat mekanisme kerja yang membutuhkan perbaikan lebih lanjut (hingga mengganti skrip Bash dengan kode yang lebih elegan). </font><font style="vertical-align: inherit;">Kami akan meninggalkan mereka di luar ruang lingkup artikel (walaupun komentar pada topik, tentu saja, selamat datang).</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mongodb</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Komponen selanjutnya adalah MongoDB. </font><font style="vertical-align: inherit;">Kesulitan utama dengan itu adalah bahwa untuk DBMS ini, opsi untuk menyalin database (seperti dalam PostgreSQL) ada agak nominal, karena:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dia dalam </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kondisi usang</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Menurut hasil pengujian kami, kami tidak menemukan perbedaan besar dalam waktu pemulihan basis data dibandingkan dengan yang biasa </font></font><code>mongo_restore</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Namun, saya perhatikan bahwa pengujian dilakukan sebagai bagian dari satu proyek - dalam kasus Anda, hasilnya bisa sangat berbeda.</font></font></i></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ternyata dalam kasus volume basis data yang besar, masalah serius dapat muncul: kami menghemat waktu untuk memulihkan basis data di PgSQL, tetapi pada saat yang sama mengembalikan dump di Mongo untuk waktu yang sangat lama. </font><font style="vertical-align: inherit;">Pada saat penulisan, dan dalam kerangka infrastruktur yang ada, kami melihat tiga cara (omong-omong, mereka dapat digabungkan):</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pemulihan bisa memakan waktu lama, misalnya, jika DBMS Anda berada di sistem file jaringan (untuk kasus-kasus yang </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tidak</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dengan lingkungan produksi). </font><font style="vertical-align: inherit;">Kemudian Anda cukup mentransfer DBMS dari stage ke node yang terpisah dan menggunakan penyimpanan lokal. </font><font style="vertical-align: inherit;">Karena ini bukan produksi, kecepatan membuat ulasan lebih penting bagi kami.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anda dapat memindahkan setiap pemulihan Pekerjaan ke pod yang terpisah, memungkinkan Anda untuk melakukan pra-eksekusi migrasi dan proses lain yang bergantung pada DBMS. </font><font style="vertical-align: inherit;">Jadi kami menghemat waktu dengan menyelesaikannya terlebih dahulu.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kadang-kadang Anda dapat mengurangi ukuran dump dengan menghapus data lama / tidak relevan - sampai pada titik itu cukup untuk hanya meninggalkan struktur database. </font><font style="vertical-align: inherit;">Tentu saja, ini bukan untuk kasus-kasus ketika dump penuh diperlukan (katakanlah, untuk tugas pengujian QA).</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika Anda tidak perlu membuat lingkungan ulasan dengan cepat, maka semua kesulitan yang dijelaskan dapat diabaikan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami, karena tidak dapat menyalin basis data yang mirip dengan PgSQL, akan pergi dengan cara pertama, yaitu </font><font style="vertical-align: inherit;">pemulihan standar dari cadangan. </font><font style="vertical-align: inherit;">Algoritmanya sama dengan PgSQL. </font><font style="vertical-align: inherit;">Ini mudah dilihat jika Anda melihat manifestonya:</font></font><br>
<br>
<pre><code class="plaintext hljs">---<font></font>
apiVersion: v1<font></font>
kind: ConfigMap<font></font>
metadata:<font></font>
  name: mongodb-scripts-on-delete<font></font>
  annotations:<font></font>
    "helm.sh/hook": "post-delete, pre-delete"<font></font>
    "helm.sh/hook-weight": "1"<font></font>
    "helm.sh/hook-delete-policy": before-hook-creation<font></font>
data:<font></font>
  review-delete-db.sh: |<font></font>
    #!/bin/bash -x<font></font>
<font></font>
    mongo ${MONGODB_NAME} --eval "db.dropDatabase()" --host ${MONGODB_REPLICASET}/${MONGODB_HOST}<font></font>
---<font></font>
apiVersion: v1<font></font>
kind: ConfigMap<font></font>
metadata:<font></font>
  name: mongodb-scripts<font></font>
  annotations:<font></font>
    "helm.sh/hook": "pre-install"<font></font>
    "helm.sh/hook-weight": "1"<font></font>
    "helm.sh/hook-delete-policy": before-hook-creation,hook-succeeded<font></font>
data:<font></font>
  review-load-dump.sh: |<font></font>
    #!/bin/bash -x<font></font>
<font></font>
    curl --fail -vsL ${HOST_FORDEV}/latest_${MONGODB_NAME_STAGE}.gz -o /tmp/${MONGODB_NAME}.gz<font></font>
<font></font>
    mongo ${MONGODB_NAME} --eval "db.dropDatabase()" --host ${MONGODB_REPLICASET}/${MONGODB_HOST}<font></font>
    mongorestore --gzip --nsFrom "${MONGODB_NAME_STAGE}.*" --nsTo "${MONGODB_NAME}.*" --archive=/tmp/${MONGODB_NAME}.gz --host ${MONGODB_REPLICASET}/${MONGODB_HOST}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ada detail penting di sini. Dalam kasus kami, MongoDB ada di gugus dan Anda perlu memastikan bahwa </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">koneksi selalu terjadi pada simpul Primer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Jika Anda menentukan, misalnya, host pertama dalam kuorum, maka setelah beberapa waktu host tersebut dapat beralih dari Utama ke Sekunder, yang akan mencegah pembuatan database. Oleh karena itu, Anda harus terhubung bukan ke satu host, tetapi segera ke </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ReplicaSet</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , mendaftar semua host di dalamnya. Untuk alasan ini saja, Anda perlu menjadikan MongoDB sebagai StatefulSet sehingga nama host selalu sama (belum lagi bahwa MongoDB adalah aplikasi stateful secara alami). Dalam opsi ini, Anda dijamin untuk terhubung ke simpul Utama. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk MongoDB, kami juga menghapus database sebelum membuat ulasan - ini dilakukan karena alasan yang sama seperti di PostgreSQL.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nuansa terakhir: karena basis data untuk peninjauan berada di lingkungan yang sama dengan tahap, nama yang terpisah diperlukan untuk basis data yang dikloning. </font><font style="vertical-align: inherit;">Jika dump bukan file BSON, kesalahan berikut akan terjadi:</font></font><br>
<br>
<pre><code class="plaintext hljs">the --db and --collection args should only be used when restoring from a BSON file. Other uses are deprecated and will not exist in the future; use --nsInclude instead</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Karena itu, dalam contoh di atas, </font></font><code>--nsFrom</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan </font><font style="vertical-align: inherit;">digunakan </font></font><code>--nsTo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami tidak menemukan masalah lain dengan pemulihan. </font><font style="vertical-align: inherit;">Pada akhirnya, saya hanya akan menambahkan bahwa dokumentasi untuk </font></font><code>copyDatabase</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MongoDB tersedia di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sini</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - jika Anda ingin mencoba opsi ini.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rabbitmq</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aplikasi terakhir pada daftar persyaratan kami adalah RabbitMQ. </font><font style="vertical-align: inherit;">Sederhana dengan itu: Anda perlu membuat vhost baru atas nama pengguna yang dengannya aplikasi akan terhubung. </font><font style="vertical-align: inherit;">Dan kemudian hapus. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Manifesto untuk membuat dan menghapus vhosts:</font></font><br>
<br>
<pre><code class="plaintext hljs">---<font></font>
apiVersion: v1<font></font>
kind: ConfigMap<font></font>
metadata:<font></font>
  name: rabbitmq-configmap<font></font>
  annotations:<font></font>
    "helm.sh/hook": "pre-install"<font></font>
    "helm.sh/hook-weight": "1"<font></font>
    "helm.sh/hook-delete-policy": before-hook-creation,hook-succeeded<font></font>
data:<font></font>
  rabbitmq-setup-vhost.sh: |<font></font>
    #!/bin/bash -x<font></font>
<font></font>
    /usr/local/bin/rabbitmqadmin -H ${RABBITMQ_HOST} -u ${RABBITMQ_USER} -p ${RABBITMQ_PASSWORD} declare vhost name=${RABBITMQ_VHOST}<font></font>
---<font></font>
apiVersion: v1<font></font>
kind: ConfigMap<font></font>
metadata:<font></font>
  name: rabbitmq-configmap-on-delete<font></font>
  annotations:<font></font>
    "helm.sh/hook": "post-delete, pre-delete"<font></font>
    "helm.sh/hook-weight": "1"<font></font>
    "helm.sh/hook-delete-policy": before-hook-creation<font></font>
data:<font></font>
  rabbitmq-delete-vhost.sh: |<font></font>
    #!/bin/bash -x<font></font>
<font></font>
    /usr/local/bin/rabbitmqadmin -H ${RABBITMQ_HOST} -u ${RABBITMQ_USER} -p ${RABBITMQ_PASSWORD} delete vhost name=${RABBITMQ_VHOST}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dengan kesulitan besar di RabbitMQ kita (sejauh ini?) Belum pernah bertemu. </font><font style="vertical-align: inherit;">Secara umum, pendekatan yang sama dapat berlaku untuk layanan lain yang tidak memiliki ikatan kritis untuk data.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kerugian</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mengapa keputusan ini tidak mengklaim sebagai "praktik terbaik"?</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ternyata satu titik kegagalan dalam bentuk lingkungan panggung.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jika aplikasi dalam lingkungan panggung hanya berjalan dalam satu replika, kita menjadi semakin bergantung pada host tempat aplikasi ini berjalan. </font><font style="vertical-align: inherit;">Dengan demikian, dengan peningkatan jumlah tinjauan lingkungan, beban pada simpul meningkat secara proporsional tanpa kemampuan untuk menyeimbangkan beban ini.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tidaklah mungkin untuk sepenuhnya menyelesaikan dua masalah ini, dengan mempertimbangkan kemampuan infrastruktur proyek tertentu, namun, pengelompokan (penambahan node baru) dan penskalaan vertikal dapat meminimalkan potensi kerusakan. </font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kesimpulan</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saat aplikasi berkembang dan dengan peningkatan jumlah pengembang, cepat atau lambat, beban pada lingkungan peninjauan meningkat dan persyaratan baru ditambahkan pada mereka. Penting bagi pengembang untuk memberikan perubahan produksi berikutnya secepat mungkin, tetapi untuk mewujudkannya, kita perlu lingkungan tinjauan dinamis yang membuat pengembangan ‚Äúparalel‚Äù. Akibatnya, beban pada infrastruktur semakin meningkat, dan waktu untuk menciptakan lingkungan seperti itu semakin meningkat. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Artikel ini ditulis berdasarkan pengalaman nyata dan agak spesifik. Hanya dalam kasus luar biasa kita mengisolasi layanan apa pun di lingkungan statis, dan di sini khusus tentangnya. Ukuran yang diperlukan seperti itu memungkinkan kami untuk mempercepat pengembangan dan debugging aplikasi - berkat kemampuan untuk dengan cepat membuat lingkungan ulasan dari awal.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ketika kami mulai melakukan tugas ini, rasanya sangat sederhana, tetapi ketika kami mengerjakannya, kami menemukan banyak nuansa. </font><font style="vertical-align: inherit;">Merekalah yang dirangkum dalam artikel terakhir: meskipun tidak universal, mereka dapat menjadi contoh untuk dasar / inspirasi keputusan mereka sendiri dalam mempercepat lingkungan ulasan.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PS</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Baca juga di blog kami:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚Äú </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kubernetes tips &amp; trik: mempercepat bootstrap dari database besar</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ‚Äù;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚Äú </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Migrasi RabbitMQ yang tidak terhalang ke Kubernetes</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ‚Äù;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">" </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Migrasi MongoDB yang tidak terhalang ke Kubernetes</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ";</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">" </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Menjalankan tim dalam proses pengiriman rilis aplikasi baru ke Kubernetes</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ."</font></font></li>
</ul></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id501412/index.html">Pelacakan mata seluler di PyTorch</a></li>
<li><a href="../id501414/index.html">Mengkonfigurasi Debian, Nginx, dan Gunicorn untuk Proyek Django</a></li>
<li><a href="../id501416/index.html">Sedikit tentang WebRTC: apa yang harus digunakan dan kasing dari latihan</a></li>
<li><a href="../id501418/index.html">Minggu 4 Maraton: Motivasi</a></li>
<li><a href="../id501420/index.html">Mitapas Online dan Pertunjukan YouTube: JUG Ru Group Stream Week</a></li>
<li><a href="../id501426/index.html">Serentak: mengatur dan mengotomatisasi sinkronisasi dua arah direktori pada dua server</a></li>
<li><a href="../id501430/index.html">Panduan Luar Biasa untuk Desain dan Perencanaan Konten Situs Web</a></li>
<li><a href="../id501432/index.html">Dua alternatif untuk JDBC</a></li>
<li><a href="../id501434/index.html">Security Week 20: meretas komputer melalui Thunderbolt</a></li>
<li><a href="../id501436/index.html">Algoritma pengenalan angka pada gambar dengan probabilitas rendah dari jenis kesalahan kedua</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>