<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üõåüèΩ ‚õ™Ô∏è üë©üèø‚Äç‚öñÔ∏è We port Angular project on ESLint, with Prettier, Husky and lint-staged üì• üåó üè©</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello, Habr! My name is Bogdan, I work in PIC Digital Front-End team lead. We are developing most of the projects on Angular, and recently I decided t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>We port Angular project on ESLint, with Prettier, Husky and lint-staged</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/501830/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hello, Habr! </font><font style="vertical-align: inherit;">My name is Bogdan, I work in PIC Digital Front-End team lead. </font><font style="vertical-align: inherit;">We are developing most of the projects on Angular, and recently I decided to review our style guides, as well as add new tools for more convenient work. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As a linter, I decided to use ESLint, as they plan to transfer Angular to it soon. </font><font style="vertical-align: inherit;">And in this article I want to share instructions on switching from TSLint to ESLint, and at the same time tell how to run Prettier from ESLint, how to add AirBnB style guide rules, and how to make linting convenient and invisible by setting VS Code and Git hooks.</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Prettier &amp; ESLint</font></font></h2><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ESLint</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> is a tool for static code analysis, the rules are divided into two groups:</font></font><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Formatting</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - to bring the code into one view: line lengths, commas, semicolons, etc.</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Code quality</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - searching for problematic code templates: unnecessary code, errors.</font></font></li>
</ul><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Prettier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> is an automatic code formatting tool. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The question that interested me was: why use Prettier if ESLint can also format code? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The answer is simple - Prettier formats the code much better: removes all formatting and completely rewrites the code in a single style. </font><font style="vertical-align: inherit;">This allows developers to forget about code formatting and not waste time discussing code style for review. </font><font style="vertical-align: inherit;">For example, we have a long line of code: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ey/i-/u-/eyi-u-iudnfy6rscgqpgxuxpvgi.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If we try to change the formatting through ESLint, it will simply give us an error:</font></font><br>
<br>
<pre><code class="bash hljs">eslint example.ts --fix<font></font>
<font></font>
output:<font></font>
error    This line has a length of 97. Maximum allowed is 80<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Such an example shows that linter can not always help with code formatting, and developers can format this code in different ways, based on their personal considerations. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If we save or format the file with Prettier, the line will take the form: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zg/mb/c9/zgmbc984enmbcpijrg5bzmq4emk.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Prettier provides a uniform style throughout the code base. </font><font style="vertical-align: inherit;">Therefore, it can and should be used together with ESLint, but you need to configure them so that they do not interfere with each other.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ESLint setup</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The essence of linting using ESLint is in parsers that transform the code into </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AST</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (Abstract Syntax Tree) for further software processing, and plugins that contain rules, for example, recommended rules for TypeScript linting or AirBnB code guide rules.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Installation</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To migrate an Angular application to ESLint, we need the following dependencies:</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">eslint</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - the linter itself,</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@ angular-eslint / builder</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &nbsp;- Angular CLI Builder to run ESLint for Angular applications using the standard ng lint command,</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@ angular-eslint / eslint-plugin</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &nbsp;- a plugin containing rules for Angular linting,</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@ angular-eslint / template-parser</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &nbsp;is a parser that with</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">angular</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ compiler makes it possible to write rules for lining Angular templates,</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@ angular-eslint / eslint-plugin-template</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &nbsp;- a plugin that, when used together with @ angular-eslint / template-parser, launches rules for lining Angular templates,</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@ typescript-eslint / parser</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - plugin for parsing TypeScript code,</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@ typescript-eslint / eslint-plugin</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - a plugin that runs TypeScript rules for linting.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To install them, just run the command:</font></font><br>
<br>
<pre><code class="bash hljs">ng add @angular-eslint/schematics</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
At the time of writing, typescript-eslint and angular-eslint do not have all the equivalents for the rules from the standard </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Codelyzer</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> configuration </font><font style="vertical-align: inherit;">for TSLint, but most of them already exist. </font><font style="vertical-align: inherit;">You can monitor the current status of transferring rules from TSLint to ESLint in the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Angular ESLint</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TypeScript ESLint mono-repositories</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Config configuration</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Everything we need to lint Angular applications, we installed. </font><font style="vertical-align: inherit;">Now let's move on to configuring ESLint. </font><font style="vertical-align: inherit;">Let's create a .eslintrc.js file and add the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">recommended</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> settings for Angular ESLint:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-built_in">module</span>.exports = {
  <span class="hljs-attr">extends</span>: [<span class="hljs-string">'plugin:@angular-eslint/recommended'</span>],
  <span class="hljs-attr">rules</span>: {
    <span class="hljs-string">'@angular-eslint/directive-selector'</span>: [
      <span class="hljs-string">'error'</span>,<font></font>
      { <span class="hljs-attr">type</span>: <span class="hljs-string">'attribute'</span>, <span class="hljs-attr">prefix</span>: <span class="hljs-string">'app'</span>, <span class="hljs-attr">style</span>: <span class="hljs-string">'camelCase'</span> },<font></font>
    ],<font></font>
    <span class="hljs-string">'@angular-eslint/component-selector'</span>: [
      <span class="hljs-string">'error'</span>,<font></font>
      { <span class="hljs-attr">type</span>: <span class="hljs-string">'element'</span>, <span class="hljs-attr">prefix</span>: <span class="hljs-string">'app'</span>, <span class="hljs-attr">style</span>: <span class="hljs-string">'kebab-case'</span> },<font></font>
    ],<font></font>
  },<font></font>
  <span class="hljs-attr">overrides</span>: [
    <span class="hljs-comment">//   ,       *.component.ts</span><font></font>
    {<font></font>
      <span class="hljs-attr">files</span>: [<span class="hljs-string">'*.component.ts'</span>],
      <span class="hljs-attr">parser</span>: <span class="hljs-string">'@typescript-eslint/parser'</span>,
      <span class="hljs-attr">parserOptions</span>: {
        <span class="hljs-attr">ecmaVersion</span>: <span class="hljs-number">2020</span>,
        <span class="hljs-attr">sourceType</span>: <span class="hljs-string">'module'</span>,<font></font>
      },<font></font>
      <span class="hljs-attr">plugins</span>: [<span class="hljs-string">'@angular-eslint/template'</span>],
      <span class="hljs-attr">processor</span>: <span class="hljs-string">'@angular-eslint/template/extract-inline-html'</span>,<font></font>
    },<font></font>
  ],<font></font>
};<font></font>
</code></pre><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configs can be described in different formats: JavaScript, JSON or YAML file. </font><font style="vertical-align: inherit;">You can leave comments in JavaScript.</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚ÄúPlugin: @ angular-eslint / recommended‚Äù contains settings for 3 plugins at once: ‚Äú@ typescript-eslint / eslint-plugin‚Äù, ‚Äú@ angular-eslint / eslint-plugin‚Äù and ‚Äú@ angular-eslint / eslint-plugin-template " </font><font style="vertical-align: inherit;">You can read what rules he sets </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">here</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ng lint command update</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Also in the angular.json configuration, you need to update the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ng lint</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> command </font><font style="vertical-align: inherit;">to run </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@ angular-eslint / builder</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="json hljs"><span class="hljs-string">"lint"</span>: {
  <span class="hljs-attr">"builder"</span>: <span class="hljs-string">"@angular-eslint/builder:lint"</span>,
  <span class="hljs-attr">"options"</span>: {
    <span class="hljs-attr">"eslintConfig"</span>: <span class="hljs-string">".eslintrc.js"</span>,
    <span class="hljs-attr">"tsConfig"</span>: [
      <span class="hljs-string">"tsconfig.app.json"</span>,
      <span class="hljs-string">"tsconfig.spec.json"</span>,
      <span class="hljs-string">"e2e/tsconfig.json"</span><font></font>
    ],<font></font>
    <span class="hljs-attr">"exclude"</span>: [
      <span class="hljs-string">"**/node_modules/**"</span><font></font>
    ]<font></font>
  }<font></font>
},<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The basic ESLint setup is ready, now you can start ESLint with the standard </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ng lint</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> command </font><font style="vertical-align: inherit;">.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Install additional plugins</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To install the plugin for ESLint, for example, for linting unit tests in Angular, you need to download and add the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jasmine plugin</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> to the settings </font><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="bash hljs">npm install eslint-plugin-jasmine --save-dev
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And add a new settings block for files with the * .spec.ts extension to the ‚Äúoverrides‚Äù property:</font></font><br>
<br>
<pre><code class="javascript hljs">overrides: [<font></font>
  ...,<font></font>
  {<font></font>
    <span class="hljs-attr">files</span>: [<span class="hljs-string">'src/**/*.spec.ts'</span>, <span class="hljs-string">'src/**/*.d.ts'</span>],
    <span class="hljs-attr">parserOptions</span>: {
      <span class="hljs-attr">project</span>: <span class="hljs-string">'./src/tsconfig.spec.json'</span>,<font></font>
    },<font></font>
    <span class="hljs-comment">//   </span>
    <span class="hljs-attr">extends</span>: [<span class="hljs-string">'plugin:jasmine/recommended'</span>],
    <span class="hljs-comment">//    </span>
    <span class="hljs-attr">plugins</span>: [<span class="hljs-string">'jasmine'</span>],
    <span class="hljs-attr">env</span>: { <span class="hljs-attr">jasmine</span>: <span class="hljs-literal">true</span> },
    <span class="hljs-comment">//   'no-unused-vars'</span>
    <span class="hljs-attr">rules</span>: {
      <span class="hljs-string">'@typescript-eslint/no-unused-vars'</span>: <span class="hljs-string">'off'</span>,<font></font>
    },<font></font>
  }<font></font>
],<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
By analogy, you can add other plugins for different file extensions.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Adding Style Guide Guides</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To achieve greater consistency of the code base, you can select and add the rules of one of the popular style guides to the ESLint config:</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AirBnB</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : The most popular and strictest of the three, mandatory trailing commas and semicolons.</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Google</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : similar to AirBnB in terms of formatting, but less strict, mandatory JSDoc comments.</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">StandartJS</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : prohibits the use of trailing commas and semicolons.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Choose a style guide that is more suitable for your team. </font><font style="vertical-align: inherit;">You can take turns trying all the style guides on some large project, see what errors the linter produces and based on this make a choice.</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Choose an implementation of the TypeScript style guide because JavaScript rules may not work correctly on TypeScript.</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As an example, let's add the AirBnB style guide to our ESLint config. </font><font style="vertical-align: inherit;">To do this, install the config with AirBnB rules for TypeScript and the plugin with rules for working with import / export syntax:</font></font><br>
<br>
<pre><code class="bash hljs">npm install eslint-plugin-import eslint-config-airbnb-typescript --save-dev</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In order not to change the top-level settings, we will create a new block of rules in the ‚Äúoverrides‚Äù property with the AirBnB style guide rules and the TypeScript parser necessary for their work:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-built_in">module</span>.exports = {<font></font>
  ...,<font></font>
  <span class="hljs-attr">overrides</span>: [<font></font>
    ...,<font></font>
    {<font></font>
      <span class="hljs-attr">files</span>: [<span class="hljs-string">'*.ts'</span>],
      <span class="hljs-attr">extends</span>: [
        <span class="hljs-string">'airbnb-typescript/base'</span>,<font></font>
      ],<font></font>
      <span class="hljs-attr">parser</span>: <span class="hljs-string">'@typescript-eslint/parser'</span>,
      <span class="hljs-attr">parserOptions</span>: {
        <span class="hljs-attr">ecmaVersion</span>: <span class="hljs-number">2020</span>,
        <span class="hljs-attr">sourceType</span>: <span class="hljs-string">'module'</span>,<font></font>
      },<font></font>
    },<font></font>
  ]<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To add another style guide, you need to install a set of rules for TypeScript, create a new block of rules in "overrides" with the rules of the style guide and specify the parser necessary for their work.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Customization rules</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If you want to disable or redefine some rules in the style of the guide, you can do this in the "rules" property:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-built_in">module</span>.exports = {<font></font>
  ...,<font></font>
  <span class="hljs-attr">overrides</span>: [<font></font>
    ...,<font></font>
    {<font></font>
      <span class="hljs-attr">files</span>: [<span class="hljs-string">'*.ts'</span>],
      <span class="hljs-attr">extends</span>: [
        <span class="hljs-string">'airbnb-typescript/base'</span>,<font></font>
      ],<font></font>
      <span class="hljs-attr">parser</span>: <span class="hljs-string">'@typescript-eslint/parser'</span>,
      <span class="hljs-attr">parserOptions</span>: {
        <span class="hljs-attr">ecmaVersion</span>: <span class="hljs-number">2020</span>,
        <span class="hljs-attr">sourceType</span>: <span class="hljs-string">'module'</span>,<font></font>
      },<font></font>
      <span class="hljs-comment">//  </span>
      <span class="hljs-attr">rules</span>: {
        <span class="hljs-string">'import/no-unresolved'</span>: <span class="hljs-string">'off'</span>,
        <span class="hljs-string">'import/prefer-default-export'</span>: <span class="hljs-string">'off'</span>,
        <span class="hljs-string">'class-methods-use-this'</span>: <span class="hljs-string">'off'</span>,
        <span class="hljs-string">'lines-between-class-members'</span>: <span class="hljs-string">'off'</span>,
        <span class="hljs-string">'@typescript-eslint/unbound-method'</span>: [
          <span class="hljs-string">'error'</span>,<font></font>
          {<font></font>
            <span class="hljs-attr">ignoreStatic</span>: <span class="hljs-literal">true</span>,<font></font>
          },<font></font>
        ],<font></font>
      },<font></font>
    },<font></font>
  ]<font></font>
}<font></font>
</code></pre><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configure Prettier</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To add Prettier to our configuration, we need to install Prettier itself, a plugin with Prettier rules, as well as a config that will disable all rules that may conflict with Prettier:</font></font><br>
<br>
<pre><code class="bash hljs">npm i prettier eslint-config-prettier eslint-plugin-prettier --save-dev
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In the "overrides" in the block with the rules of files with the extension * .ts in the property "extends" at the very bottom add the rules and Prettier settings:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-built_in">module</span>.exports = {<font></font>
  ...,<font></font>
  <span class="hljs-attr">overrides</span>: [<font></font>
    ...,<font></font>
    {<font></font>
      <span class="hljs-attr">files</span>: [<span class="hljs-string">'*.ts'</span>],
      <span class="hljs-attr">extends</span>: [
        <span class="hljs-comment">//   AirBnB</span>
	<span class="hljs-string">'airbnb-typescript/base'</span>,
	<span class="hljs-comment">//   Prettier</span>
	<span class="hljs-string">'prettier/@typescript-eslint'</span>,
	<span class="hljs-string">'plugin:prettier/recommended'</span>,<font></font>
      ],<font></font>
      ...,<font></font>
    },<font></font>
  ]<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The configuration for Prettier must always be at the very bottom of the list to overwrite any rules that may conflict with Prettier. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
`prettier / @ typescript-eslint` disables the` @ typescript-eslint` rules, which may conflict with Prettier, and `plugin: prettier / recommended` does three things:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">includes eslint-plugin-prettier,</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">prints prettier / prettier rule errors to the console as "error",</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Adds Prettier eslint-config-prettier formatting rules.</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Config for Prettier:</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Prettier can format code without any settings, but to match the AirBnB style guide, you need to add some settings. </font><font style="vertical-align: inherit;">Create the .prettierrc.js file in the root of the application:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-built_in">module</span>.exports = {
  <span class="hljs-attr">trailingComma</span>: <span class="hljs-string">"all"</span>,
  <span class="hljs-attr">tabWidth</span>: <span class="hljs-number">2</span>,
  <span class="hljs-attr">semi</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">singleQuote</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">bracketSpacing</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">printWidth</span>: <span class="hljs-number">100</span><font></font>
};<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
These settings will be used by both ESLint and Prettier if you use it to format files in VS Code or with the command:</font></font><br>
<br>
<pre><code class="bash hljs">prettier <span class="hljs-string">"--write ."</span></code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configure VS Code</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
VS Code can highlight and correct ESLint found errors when saving errors. </font><font style="vertical-align: inherit;">To do this, download the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ESLint plugin</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> for VS Code and create a file inside the project with the settings for the workspace .vscode / settings.json:</font></font><br>
<br>
<pre><code class="json hljs">  <span class="hljs-string">"eslint.validate"</span>: [ <span class="hljs-string">"javascript"</span>, <span class="hljs-string">"typescript"</span>, <span class="hljs-string">"html"</span>],<font></font>
<font></font>
  <span class="hljs-string">"eslint.options"</span>: {
    <span class="hljs-attr">"extensions"</span>: [<span class="hljs-string">".js"</span>, <span class="hljs-string">".ts"</span>, <span class="hljs-string">"html"</span>]<font></font>
  },<font></font>
<font></font>
  <span class="hljs-string">"editor.codeActionsOnSave"</span>: {
    <span class="hljs-attr">"source.fixAll.eslint"</span>: <span class="hljs-literal">true</span>,<font></font>
  },<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Here we configure ESLint to emphasize and correct errors when saving files with the .js, .ts and .html extensions. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And to format a document using the ‚Äúshift + option + F‚Äù or ‚Äúshift + alt + F‚Äù key combinations, download the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Prettier plugin</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> for VS Code and set it as the default formatter.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Setting up git hooks</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Git hooks are scripts that Git invokes on certain events: commit, push, recieve. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
With the help of them, we can start linting the code when creating a commit so that fewer errors get into the request pool. </font><font style="vertical-align: inherit;">For more convenient work with Git hooks, install </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Husky</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , and to check only the code that is added to the commit (this is useful in large projects where linting takes a lot of time) </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lint-staged</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="bash hljs">npm i husky lint-staged --save-dev
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Add the settings for these plugins to package.json:</font></font><br>
<br>
<pre><code class="json hljs"><span class="hljs-string">"scripts"</span>: {<font></font>
  ...<font></font>
},<font></font>
<span class="hljs-string">"husky"</span>: {
  <span class="hljs-attr">"hooks"</span>: {
    <span class="hljs-attr">"pre-commit"</span>: <span class="hljs-string">"lint-staged --relative"</span><font></font>
  }<font></font>
},<font></font>
<span class="hljs-string">"lint-staged"</span>: {
  <span class="hljs-attr">"*.{js,ts}"</span>: [
     <span class="hljs-string">"eslint --fix"</span><font></font>
  ]<font></font>
},<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
lint-staged passes an array of modified files to the called command. </font><font style="vertical-align: inherit;">The </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ng lint</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> command </font><font style="vertical-align: inherit;">does not know how to accept an array of files, and to use it, you need to write an additional script handler. </font><font style="vertical-align: inherit;">Or you can just call ESLint, as in this example. </font><font style="vertical-align: inherit;">This solution can be used for precommits, and you can </font><font style="vertical-align: inherit;">run </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ng lint</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> to </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">lint the</font></a><font style="vertical-align: inherit;"> entire project, for example, in the CI pipeline.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">findings</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In future versions of Angular, ESLint with basic rules will be out of the box. Now the ESLint configuration process requires some additional steps, ESLint has no equivalents for some rules from TSLint, and Angular ESLint is still in alpha version. Therefore, to switch to ESLint now or not is up to you. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
However, the guide code, additional rules, Prettier, Husky and lint-staged you will have to configure yourself. I hope this article has helped you figure out how all these things work together. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Configuring linters may seem like a trivial task, but it includes several important organizational issues: choosing style guides, synchronizing various solutions with each other.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But the time spent on configuring the linter in the future will significantly save you time discussing the style and formatting of the code in the code review process, reduce the number of errors that fall into the request pool, and ensure the consistency of the code base. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
An example implementation can be found on </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Github</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If you find a mistake in the config, or you have add-ons - write!</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">References</font></font></h2><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Monular repository Angular ESLint</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TypeScript ESLint Monorepository</font></font></a></li>
</ul></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en501820/index.html">Integration of Netflow and SIEM Monitoring Solutions</a></li>
<li><a href="../en501822/index.html">Third Generation Engineer</a></li>
<li><a href="../en501824/index.html">Getting ready for a hackathon at home</a></li>
<li><a href="../en501826/index.html">About ambitious founders or how I tried to collect investments for a startup</a></li>
<li><a href="../en501828/index.html">Unreal Engine 5 sets the bar for gaming realism</a></li>
<li><a href="../en501834/index.html">Overview of Creaform Metrascan 3D Scanners</a></li>
<li><a href="../en501836/index.html">Supply ventilation combined with channel air conditioning (part 2 - water)</a></li>
<li><a href="../en501840/index.html">HTTP over UDP - use the QUIC protocol with benefit</a></li>
<li><a href="../en501842/index.html">Fine-tuning routing for MetalLB in L2 mode</a></li>
<li><a href="../en501844/index.html">How I stopped being afraid and wrote a game bot</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>