<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üìå ü§µüèª üåÜ Visualisation de la couverture du test automatique üôåüèø üßëüèæ‚Äçü§ù‚Äçüßëüèæ üö±</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Les rapports de couverture modernes sont dans certains cas plut√¥t inutiles, et les m√©thodes pour les mesurer ne conviennent principalement qu'aux d√©ve...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Visualisation de la couverture du test automatique</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/jugru/blog/491844/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les rapports de couverture modernes sont dans certains cas plut√¥t inutiles, et les m√©thodes pour les mesurer ne conviennent principalement qu'aux d√©veloppeurs. </font><font style="vertical-align: inherit;">Vous pouvez toujours conna√Ætre le pourcentage de couverture ou afficher le code qui n'a pas √©t√© utilis√© lors des tests, mais que faire si vous voulez de la visibilit√©, de la simplicit√© et de l'automatisation? </font></font><br>
<br>
<img src="https://habrastorage.org/webt/_r/ms/rr/_rmsrr9pfqqgiu7vvskxe93g2po.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sous la coupe - vid√©o et transcription d'un rapport d'Artem Eroshenko de Qameta Software de la conf√©rence </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Heisenbug</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Il a pr√©sent√© plusieurs solutions simples et √©l√©gantes d√©velopp√©es qui aident l'√©quipe Yandex.Verticals √† √©valuer la couverture des tests r√©dig√©s par les ing√©nieurs d'automatisation des tests. </font><font style="vertical-align: inherit;">Artem vous dira comment trouver rapidement ce qui est couvert, comment couvert, quels tests ont r√©ussi et voir instantan√©ment les rapports visuels.</font></font><br>
<br>
<a name="habracut"></a><br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/N2k4LKPWuSw" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je m'appelle Artyom Eroshenko </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">eroshenkoam</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, Je fais de l'automatisation des tests depuis plus de 10 ans. </font><font style="vertical-align: inherit;">J'√©tais responsable de l'automatisation des tests, responsable de l'√©quipe de d√©veloppement d'outils, d√©veloppeur d'outils. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En ce moment je suis consultant dans le domaine de l'automatisation des tests, je travaille avec plusieurs entreprises avec lesquelles nous construisons des processus. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je suis √©galement d√©veloppeur et gestionnaire secret d'Allure Report. </font><font style="vertical-align: inherit;">Nous avons r√©cemment </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">corrig√© une chose sympa</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : maintenant dans JUnit 5, il y a des fixtures.</font></font><br>
<br>
<h2><font color="#DB8E0D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cadre Atlas</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mon d√©veloppement est le </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Framework Atlas</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Si quelqu'un a commenc√© √† automatiser en 2012, alors que les pilotes Web Java commen√ßaient √† peine, √† ce moment-l√†, j'ai cr√©√© une biblioth√®que open source appel√©e </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HTML Elements</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Html Elements a sa suite et repense dans la biblioth√®que Atlas, qui est construite sur des interfaces: il n'y a pas de classes en tant que telles, pas de champs, une biblioth√®que tr√®s pratique, l√©g√®re et facilement extensible. Si vous avez envie de le comprendre, vous pouvez lire l' </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">article</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ou consulter le </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rapport</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mon rapport est consacr√© au probl√®me de l'automatisation des tests et principalement aux rev√™tements. Comme arri√®re-plan, je voudrais me r√©f√©rer √† la fa√ßon dont les processus de test sont organis√©s dans Yandex.Verticals.</font></font><br>
<br>
<h2><font color="#DB8E0D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comment fonctionne l'automatisation dans les verticales?</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'√©quipe d'automatisation des tests de Yandex.Verticals ne compte que quatre personnes qui automatisent quatre services: Yandex.Avto, Work, Real Estate et Parts. </font><font style="vertical-align: inherit;">Autrement dit, il s'agit d'une petite √©quipe d'automatiseurs qui font beaucoup. </font><font style="vertical-align: inherit;">Nous automatisons l'API, l'interface Web, les applications mobiles, etc. </font><font style="vertical-align: inherit;">Au total, nous avons quelque part environ 15,5 mille tests qui sont effectu√©s √† diff√©rents niveaux.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La stabilit√© des tests dans l'√©quipe est d'environ 97%, bien que certains de mes coll√®gues disent environ 99%. Une telle stabilit√© √©lev√©e est obtenue pr√©cis√©ment gr√¢ce √† de courts tests sur des technologies tr√®s natives. En r√®gle g√©n√©rale, nos tests prennent environ 15 minutes, ce qui est tr√®s volumineux, et nous les ex√©cutons dans environ 800 threads. Autrement dit, nous avons 800 navigateurs d√©marrant en m√™me temps - un tel test de r√©sistance de nos tests. Comme fer, nous utilisons le s√©l√©no√Øde (Aerokube). Vous pouvez en savoir plus sur les tests d'automatisation dans Yandex.Verticals en regardant mon rapport 2017, qui est toujours pertinent.</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/gwXpYB6ZayE" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une autre caract√©ristique de notre √©quipe est que </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nous automatisons tout</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , y compris les testeurs manuels, qui contribuent grandement au d√©veloppement de l'automatisation des tests. Pour eux, nous organisons des √©coles, leur enseignons des tests, apprenons √† r√©diger des tests pour l'API, l'interface Web, et souvent ils aident √† accompagner les tests. Ainsi, les gars qui sont responsables de la lib√©ration eux-m√™mes peuvent imm√©diatement corriger le test, si n√©cessaire. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans Verticals, les d√©veloppeurs de tests √©crivent des tests, et ils sont tellement passionn√©s par le d√©veloppement de tests qu'ils nous rivalisent. Vous pouvez en savoir plus sur ce processus dans le rapport </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬´Le cycle complet de test des applications React¬ª</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, o√π Alexei Androsov et Natalya Stus expliquent comment ils √©crivent des tests unitaires sur Puppeteer en parall√®le avec nos tests Java de bout en bout. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les ing√©nieurs d'automatisation des tests r√©digent √©galement des tests dans notre √©quipe. </font><font style="vertical-align: inherit;">Mais souvent, nous d√©veloppons de nouvelles approches pour les optimiser. </font><font style="vertical-align: inherit;">Par exemple, nous avons impl√©ment√© des tests de capture d'√©cran, des tests via moki, une r√©duction des tests. </font><font style="vertical-align: inherit;">En g√©n√©ral, notre domaine est principalement d√©veloppeur de logiciels en test (SDET), nous sommes plus sur la fa√ßon d'√©crire des tests, et la base de test est partiellement remplie par nous et est prise en charge par des testeurs manuels.</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les d√©veloppeurs nous aident √©galement, et c'est cool.</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le probl√®me qui se pose dans ces processus est que nous ne comprenons pas toujours ce qui est d√©j√† couvert et ce qui ne l'est pas. </font><font style="vertical-align: inherit;">√Ä travers 15 000 tests, il n'est pas toujours clair de savoir exactement ce que nous v√©rifions. </font><font style="vertical-align: inherit;">Cela est particuli√®rement vrai dans le contexte de la communication avec les gestionnaires, qui, bien s√ªr, ne testent pas, mais surveillent et posent des questions. </font><font style="vertical-align: inherit;">En particulier, si la question se pose de savoir si un bouton particulier a √©t√© test√© dans l'interface ou le flux, il est difficile de r√©pondre, car vous devez acc√©der au code de test et consulter ces informations.</font></font><br>
<br>
<h2><font color="#DB8E0D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Qu'est-ce qui est test√© et qu'est-ce qui ne l'est pas?</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous avez de nombreux tests dans diff√©rentes langues et que vous √™tes √©crit par des personnes ayant divers degr√©s de formation, alors t√¥t ou tard la question se pose, ces tests ne sont-ils pas du tout entrecoup√©s? </font><font style="vertical-align: inherit;">Dans le contexte de ce probl√®me, la question de la couverture devient particuli√®rement pertinente. </font><font style="vertical-align: inherit;">Je d√©crirai trois sujets cl√©s:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fa√ßons de mesurer efficacement la couverture.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Couverture pour les tests API.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Couverture pour les tests Web.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout d'abord, d√©terminons qu'il existe deux fa√ßons de couvrir: la couverture des exigences et la couverture du code produit.</font></font><br>
<br>
<h4><font color="#DB8E0D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comment la couverture des besoins est mesur√©e</font></font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Consid√©rez la couverture des exigences en utilisant auto.ru comme exemple. Au lieu du testeur auto.ru, je ferais ce qui suit. Tout d'abord, je recherche sur Google et je trouve imm√©diatement un tableau des exigences sp√©ciales. C'est la base de la couverture des exigences. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/nf/v6/fh/nfv6fhqm8ukolt_4bv6bxyycohm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans ce tableau, les noms des exigences sont √©crits √† gauche. Dans ce cas: compte, annonces, v√©rification et paiement, c'est-√†-dire v√©rification de l'annonce. En g√©n√©ral, c'est la couverture. Le d√©tail de la partie gauche d√©pend du niveau du testeur. Par exemple, les ing√©nieurs de Google ont 49 types de rev√™tements qui sont test√©s √† diff√©rents niveaux. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le c√¥t√© droit du tableau contient les attributs des exigences. Nous pouvons utiliser n'importe quoi sous forme d'attributs, par exemple: priorit√©, couverture et √©tat. Cela peut √™tre la date de la derni√®re version.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ox/3a/kj/ox3akjf5fcmwxlmt_utf3uhnsas.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ainsi, certaines donn√©es apparaissent dans le tableau. Vous pouvez utiliser des outils professionnels pour g√©rer une table d'exigences, par exemple, TestRail. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il y a des informations sur l'arborescence √† droite: les dossiers indiquent quelles exigences nous avons, comment elles peuvent √™tre couvertes. Il y a des cas de test et ainsi de suite. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/wh/he/aj/whheajlxedwdqlmspx_iofg4wai.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans les verticales, ce processus ressemble √† ceci: un testeur manuel d√©crit les exigences et les cas de test, puis les transmet √† l'automatisation des tests, et l'outil automatis√© √©crit du code pour ces tests. De plus, plus t√¥t, nous avons re√ßu des cas de test d√©taill√©s dans lesquels le testeur manuel d√©crivait la structure enti√®re. Ensuite, quelqu'un a fait un commit sur le github, et le test a commenc√© √† √™tre b√©n√©fique.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quels sont les avantages et les inconv√©nients de cette approche? Le plus est que cette approche r√©pond √† nos questions. Si le gestionnaire demande ce que nous avons couvert, j'ouvrirai la tablette et montrerai quelles fonctionnalit√©s sont couvertes. En revanche, ces exigences doivent toujours √™tre tenues √† jour et elles deviennent obsol√®tes tr√®s rapidement. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lorsque vous avez 15 000 tests, regarder TestRail, c'est comme regarder une √©toile dans l'espace: elle a explos√© pendant longtemps, et la lumi√®re vous a atteint tout √† l'heure. Vous regardez le cas de test actuel, et il est d√©j√† obsol√®te depuis longtemps et irr√©vocablement.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ce probl√®me est difficile √† r√©soudre. </font><font style="vertical-align: inherit;">Pour nous, ce sont g√©n√©ralement deux mondes diff√©rents: il y a un monde d'automatisation qui tourne selon ses propres lois, o√π chaque test qui √©choue est imm√©diatement corrig√©, et il y a un monde de tests manuels et de cartes d'exigences. </font><font style="vertical-align: inherit;">Le mur entre eux est imp√©n√©trable, sauf si vous utilisez Allure Server. </font><font style="vertical-align: inherit;">Nous venons maintenant de r√©soudre ce probl√®me pour eux. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le troisi√®me point des ¬´avantages et inconv√©nients¬ª est la n√©cessit√© d'un travail manuel. </font><font style="vertical-align: inherit;">Dans un nouveau projet, vous devez recr√©er une carte des exigences, √©crire tous les cas de test, etc. </font><font style="vertical-align: inherit;">Cela n√©cessite toujours un travail manuel, et c'est en fait tr√®s triste.</font></font><br>
<br>
<h4><font color="#DB8E0D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comment la couverture du code est mesur√©e</font></font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une alternative √† cette approche est la couverture du code. </font><font style="vertical-align: inherit;">Cela semble √™tre la solution √† notre probl√®me. </font><font style="vertical-align: inherit;">Voici √† quoi ressemble la couverture du code produit: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/5o/-c/oe/5o-coev_livsv-tudln9ztpau_e.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
elle refl√®te la couverture de l'emballage, ou plut√¥t une petite partie de ce que le produit a r√©ellement. </font><font style="vertical-align: inherit;">Le package est √©crit sur la gauche, comme les fonctionnalit√©s ont √©t√© √©crites auparavant. </font><font style="vertical-align: inherit;">Autrement dit, notre rev√™tement est finalement attach√© √† des choses tangibles, dans ce cas - Package. </font><font style="vertical-align: inherit;">Les attributs sont √©crits √† droite: couverture par classe, couverture par m√©thodes, couverture par blocs de code et couverture par lignes de code. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le processus de collecte de la couverture consiste √† comprendre quelle ligne de code le test a r√©ussi et laquelle n'a pas r√©ussi. </font><font style="vertical-align: inherit;">Il s'agit d'une t√¢che assez simple, mais r√©cemment tr√®s pertinente.</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La premi√®re mention de la couverture du code remonte √† 1963, mais de s√©rieux progr√®s dans ce sens n'apparaissent que maintenant.</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons donc un test qui interagit avec le syst√®me. Peu importe la fa√ßon dont il interagit avec elle: via le front-end, l'API ou se glisse directement dans le back-end - nous supposerons simplement que nous l'avons. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, l'instrumentation doit √™tre effectu√©e. Il s'agit d'un processus qui vous permet de comprendre quelles lignes de code ont √©t√© v√©rifi√©es et lesquelles ne l'ont pas √©t√©. Vous n'avez pas besoin de l'√©tudier en d√©tail, il vous suffit de rechercher le nom de votre framework sur lequel vous √©crivez, disons </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Spring</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , puis l' </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">instrumentation</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et la </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">couverture</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - ces trois mots vous aideront √† comprendre comment cela se fait. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lorsque vos tests v√©rifient quelle ligne de code le test a atteint et laquelle ne l'a pas atteint, ils enregistrent des fichiers avec des informations sur les lignes couvertes. Sur la base de ces informations, vous disposez de donn√©es.</font></font><br>
<br>
<h4><font color="#DB8E0D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quels sont les avantages et les inconv√©nients de la couverture du code?</font></font></font></h4><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Couverture du code J'appellerais imm√©diatement un moins</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Vous ne viendrez pas chez le manager, vous ne montrerez pas cette plaque et vous ne direz pas que tout le monde a automatis√©, car ces donn√©es ne peuvent pas √™tre lues, il vous demandera de renvoyer des donn√©es claires que vous pourrez rapidement consulter et tout comprendre. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Rapport de couverture du code plus proche du d√©veloppement. </font><font style="vertical-align: inherit;">Il ne peut pas √™tre utilis√© comme une approche normale pour fournir toutes les donn√©es √† une √©quipe si nous voulons que toute l'√©quipe puisse regarder. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/jm/kr/bw/jmkrbwezcyzyx90-qxgm4jrrlbm.png"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'avantage de cette approche est qu'elle fournit toujours des donn√©es pertinentes. </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous n'avez pas √† faire beaucoup de travail, tout est automatis√© pour vous. </font><font style="vertical-align: inherit;">Branchez simplement la biblioth√®que, vos couvertures commencent √† d√©coller - et c'est vraiment cool.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un autre avantage de cette approche est qu'elle ne n√©cessite qu'une personnalisation. Il n'y a rien de sp√©cial √† faire l√†-bas - venez avec une instruction sp√©cifique, ajustez la couverture et cela fonctionne automatiquement. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La couverture des exigences vous permet d'identifier les exigences non satisfaites, mais ne permet pas d'√©valuer l'exhaustivit√© par rapport au code. Par exemple, vous avez commenc√© √† √©crire une nouvelle fonctionnalit√© ¬´autorisation¬ª, entrez simplement la ¬´fonctionnalit√© d'autorisation¬ª, vous commencez √† lancer des cas de test dessus. Vous ne pouvez pas voir imm√©diatement cette couverture dans le code, m√™me si vous √©crivez une nouvelle classe, il n'y aura toujours pas d'informations - il y a un √©cart. En revanche, il s'agit d'une exigence d'autorisation, m√™me lorsqu'elle sera d√©j√† mise en ≈ìuvre, lorsque vous comptez sur la couverture, cette partie ne peut pas √™tre pertinente, elle doit √™tre tenue √† jour manuellement.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par cons√©quent, nous avons eu une id√©e: que faire si nous tirons le meilleur parti de tout le monde? </font><font style="vertical-align: inherit;">Pour que la couverture r√©ponde √† nos questions, elle √©tait toujours pertinente et ne n√©cessitait qu'une personnalisation. </font><font style="vertical-align: inherit;">Il suffit de regarder le rev√™tement sous un angle diff√©rent, c'est-√†-dire de prendre un autre syst√®me comme base du rev√™tement. </font><font style="vertical-align: inherit;">Dans le m√™me temps, assurez-vous qu'il est collect√© de mani√®re enti√®rement automatique et apporte un tas d'avantages. </font><font style="vertical-align: inherit;">Et pour cela, nous allons entrer dans la couverture des tests API.</font></font><br>
<br>
<h2><font color="#DB8E0D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">API de couverture de test</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quelle est la base de la couverture? </font><font style="vertical-align: inherit;">Pour ce faire, nous utilisons </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Swagger</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - c'est l'API de documentation. </font><font style="vertical-align: inherit;">Maintenant, je ne peux pas imaginer mon travail sans Swagger, c'est un outil que j'utilise constamment pour les tests. </font><font style="vertical-align: inherit;">Si vous n'utilisez pas Swagger, je vous recommande fortement de visiter le site et de vous familiariser. </font><font style="vertical-align: inherit;">Vous y verrez imm√©diatement un exemple d'utilisation tr√®s intuitif et compr√©hensible. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En fait, Swagger est la documentation g√©n√©r√©e par votre service. </font><font style="vertical-align: inherit;">Il contient:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Liste des demandes.</font></font><br>
 <img src="https://habrastorage.org/webt/in/nc/pe/inncpekmy4a699gk-eh0o4be_jy.png"></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Demander des param√®tres: il n'est pas n√©cessaire de tirer le d√©veloppeur et de demander quels sont les param√®tres.</font></font><br>
<img src="https://habrastorage.org/webt/yz/48/yg/yz48yg1kw8nnqdb3wn7fdcq0g1o.png"></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Codes de r√©ponse</font></font><br>
<img src="https://habrastorage.org/webt/zz/y2/ku/zzy2kucjpovwr2xxue4zvct543o.png"><br>
</li>
</ul><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le principe de fonctionnement de Swagger est la g√©n√©ration. Peu importe le framework que vous utilisez. Disons que Spring or Go Server, vous utilisez le composant </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Swagger </font></font></a><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Codegen</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et g√©n√©rez </font><i><font style="vertical-align: inherit;">swagger.json</font></i><font style="vertical-align: inherit;"> . Il s'agit d'une sp√©cification, sur la base de laquelle une belle interface utilisateur est ensuite dessin√©e. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il est important pour nous que </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">swagger.json</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> soit </font><i><font style="vertical-align: inherit;">utilis√©</font></i><font style="vertical-align: inherit;"> : son support est disponible pour toutes les langues largement utilis√©es. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons la sp√©cification Open API </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">swagger.json</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Il ressemble √† ceci: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/jn/hl/km/jnhlkmmo1pd-7vxllopdvjhbdr0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les requ√™tes ressemblent √† ceci: r√©sum√©, description, codes de r√©ponse et un "handle" (chemin: / utilisateurs). Il y a aussi des informations sur le param√®tre de requ√™te: tout est structur√©, il y a un param√®tre d'ID utilisateur, il est dans le chemin o√π il est n√©cessaire, une telle description et type - entier.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/3a/bs/7h/3abs7hrvpakohvaejel8utqdtc4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il y a des codes de r√©ponse, ils sont aussi tous document√©s: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/so/3s/yq/so3syqf7mawlmlqomizvoqdj1-u.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et l'id√©e nous est venue: nous avons un service que Swagger g√©n√®re, et nous voulions garder le m√™me Swagger dans les tests pour pouvoir les comparer plus tard. </font><font style="vertical-align: inherit;">En d'autres termes, lorsque les tests s'ex√©cutent, ils g√©n√®rent exactement le m√™me Swagger, nous le jetons au Swagger Diff, nous comprenons quels param√®tres, poign√©es, codes d'√©tat que nous avons v√©rifi√©s, etc. </font><font style="vertical-align: inherit;">C'est la m√™me instrumentation, la m√™me couverture, que finalement dans les exigences que nous comprenons.</font></font><br>
<br>
<h2><font color="#DB8E0D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mais que faire si vous construisez un diff?</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous nous sommes tourn√©s vers la biblioth√®que de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">diff√©rences Swagger</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , ce dont nous avons besoin pour cela. Son principe de fonctionnement est quelque chose comme ceci: vous avez la version 1.0, avec l'API version 1.1, ils g√©n√®rent tous les deux </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">swagger.json</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , puis vous les lancez sur Swagger diff et voyez le r√©sultat. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le r√©sultat ressemble √† ceci: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/qk/qn/ls/qkqnlsxnssknuv8p8t9cg5ckryu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
vous disposez d'informations indiquant, par exemple, un nouveau stylo. Vous avez √©galement des informations sur ce qui est supprim√©. Cela signifie qu'il est temps de supprimer les tests, ils ne sont plus pertinents. Avec l'apparition d'informations sur les changements, les param√®tres changent √©galement, il est donc √©vident que vos tests tomberont √† ce moment-l√†.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons aim√© cette id√©e et nous avons commenc√© √† la mettre en ≈ìuvre. Comme nous avons d√©cid√© de le faire: nous avons un Swagger ¬´de r√©f√©rence¬ª qui g√©n√®re √† partir du code du d√©veloppeur, nous avons √©galement des tests d'API qui g√©n√©reront notre Swagger, et nous les diff√©rencierons. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous effectuons donc des tests pour le service: nous avons </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rest Assured</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , qui acc√®de lui-m√™me aux services sur l'API. Et nous l'instruisons. Il existe une approche: vous pouvez cr√©er des filtres, la demande y est </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">envoy√©e</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - et il enregistre </font><font style="vertical-align: inherit;">directement </font><font style="vertical-align: inherit;">les informations sur la demande sous la forme de </font><i><font style="vertical-align: inherit;">swagger.json</font></i><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voici tout le code que nous avions besoin d'√©crire, il y avait 69-70 lignes - c'est un code tr√®s simple.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/6_/m6/ck/6_m6cka7jfewruree9d9561tayo.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le plus dr√¥le, c'est que nous avons utilis√© le client natif pour Swagger, a √©crit juste l√†. </font><font style="vertical-align: inherit;">Nous n'avions m√™me pas besoin de cr√©er nos binaires, nous venons de remplir la sp√©cification Swagger. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/lr/rl/fw/lrrlfwuiqrgykrprpjnxr1fcfmq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons eu beaucoup de fichiers .json avec lesquels nous devions faire quelque chose - ils ont √©crit un agr√©gateur Swagger. </font><font style="vertical-align: inherit;">Il s'agit d'un programme tr√®s simple qui fonctionne selon le principe suivant:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Elle r√©pond √† une nouvelle demande, si elle n'est pas dans notre base de donn√©es, ajoute-t-elle.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Elle r√©pond √† la demande, il a un nouveau param√®tre - ajoute.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M√™me chose avec les codes d'√©tat.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ainsi, nous obtenons des informations sur tous les stylos, param√®tres et codes d'√©tat que nous avons utilis√©s. </font><font style="vertical-align: inherit;">De plus, vous pouvez collecter ici les donn√©es avec lesquelles ces demandes ont √©t√© effectu√©es: nom d'utilisateur, identifiants de connexion, etc. </font><font style="vertical-align: inherit;">Nous n'avons pas encore compris comment utiliser ces informations, car tout est g√©n√©r√© avec nous, mais vous pouvez comprendre avec quels param√®tres certaines demandes ont √©t√© appel√©es.</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Donc, nous √©tions presque √† un jet de pierre de la victoire, mais en cons√©quence, nous avons refus√© Swagger Diff, car cela fonctionne dans un concept l√©g√®rement diff√©rent - dans le concept de diff√©rentiel.</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Swagger Diff dit ce qui a chang√©, pas ce qui est couvert, mais nous voulions afficher le r√©sultat de la couverture. </font><font style="vertical-align: inherit;">Il y a beaucoup de donn√©es suppl√©mentaires, il stocke des informations sur la description, le r√©sum√© et d'autres m√©ta-informations, mais nous ne disposons pas de ces informations. </font><font style="vertical-align: inherit;">Et quand nous faisons Diff, ils nous √©crivent que "ce stylo n'a pas de description", mais il n'existait pas.</font></font><br>
<br>
<h2><font color="#DB8E0D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Propre rapport</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons fait notre impl√©mentation, et cela fonctionne comme suit: nous avons de nombreux fichiers provenant d'autotests, nous avons l'API du service Swagger, et nous g√©n√©rons un rapport sur cette base. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un rapport simple ressemble √† ceci: vous pouvez voir ci-dessus des informations sur le nombre total de plumes (349), des informations sur celles qui sont enti√®rement couvertes (chaque param√®tre, code d'√©tat, etc.). Vous pouvez choisir vos propres crit√®res, par exemple, couvrir plusieurs param√®tres. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il y a √©galement des informations ici que 40% sont partiellement couverts - cela signifie que nous avons d√©j√† des tests pour ces stylos, mais certaines choses ne sont pas encore couvertes, et vous devez y regarder attentivement. La couverture vide est √©galement refl√©t√©e. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/pc/og/p5/pcogp5jnc8m88l8fylt2p2uc0eq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Passons en revue les onglets. Ceci est une </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">couverture compl√®te</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , nous voyons tous les param√®tres que nous avons, qui sont couverts, les codes d'√©tat et ainsi de suite.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/9o/gl/2q/9ogl2q9tf_xb1xw9dl9j8sxsku0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, nous avons une </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">couverture partielle</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Nous voyons que sur la poign√©e de connexion sociale, un param√®tre est couvert, et deux ne le sont pas. </font><font style="vertical-align: inherit;">Et nous pouvons l'√©tendre et voir quels param√®tres sp√©cifiques et codes d'√©tat sont couverts. </font><font style="vertical-align: inherit;">Et en ce moment cela devient tr√®s pratique pour le d√©veloppeur: les versions de l'application roulent tr√®s rapidement, et on peut souvent oublier certains param√®tres. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fo/pf/sc/fopfscyojnuzokszhkw8ntgrqio.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cet outil vous permet d'√™tre toujours en forme et de comprendre ce que nous avons partiellement couvert, quel param√®tre est oubli√©, etc. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dernier - Gloire de la honte, nous devons encore le faire. </font><font style="vertical-align: inherit;">Lorsque vous regardez cette page et voyez Vider l√†: 172 - vos mains tombent, puis vous commencez √† enseigner aux testeurs manuels comment √©crire des autotests, c'est le point.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/p8/2k/o5/p82ko5nzine_u6odc8dtl9bho5s.png"><br>
<br>
<h4><font color="#DB8E0D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quel avantage avons-nous obtenu lorsque nous avons d√©ploy√© notre solution?</font></font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout d'abord, nous avons commenc√© √† √©crire des tests de mani√®re plus significative. </font><font style="vertical-align: inherit;">Nous comprenons que nous testons, et en m√™me temps, nous avons deux strat√©gies. </font><font style="vertical-align: inherit;">Tout d'abord, nous automatisons quelque chose qui n'est pas l√† lorsque des testeurs manuels viennent et disent que pour un service particulier, il est essentiel qu'une demande soit ex√©cut√©e au moins une fois, et nous ouvrons Empty. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La deuxi√®me option - nous n'oublions pas les queues. </font><font style="vertical-align: inherit;">Comme je l'ai dit, les API seront publi√©es tr√®s rapidement, il peut y avoir des sorties deux ou trois fois par jour. </font><font style="vertical-align: inherit;">Certains param√®tres y sont constamment ajout√©s: dans cinq mille tests, il est impossible de comprendre ce qui est v√©rifi√© et ce qui ne l'est pas. </font><font style="vertical-align: inherit;">Par cons√©quent, c'est la seule fa√ßon de choisir consciemment une strat√©gie de test et au moins de faire quelque chose.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le troisi√®me b√©n√©fice est un processus enti√®rement automatique. </font><font style="vertical-align: inherit;">Nous avons emprunt√© l'approche, et l'automatisation fonctionne: nous n'avons rien √† faire, tout est collect√© automatiquement.</font></font><br>
<br>
<h4><font color="#DB8E0D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Id√©es de d√©veloppement</font></font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Premi√®rement, je ne veux vraiment pas conserver le deuxi√®me rapport, mais je veux l'int√©grer dans Swagger UI. </font><font style="vertical-align: inherit;">Voici mon ¬´rapport Photoshop Edition¬ª pr√©f√©r√©: une puce que j'ai d√©velopp√©e r√©cemment. </font><font style="vertical-align: inherit;">Voici imm√©diatement des informations sur les param√®tres que nous avons test√©s et qui ne le sont pas. </font><font style="vertical-align: inherit;">Et ce serait cool de donner ces informations tout de suite avec Swagger. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/v6/ll/n8/v6lln82kyue5errknkoxj9mkq-k.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par exemple, le front-end peut voir par lui-m√™me quels param√®tres n'ont pas √©t√© test√©s, hi√©rarchiser et d√©cider que m√™me s'ils n'ont pas besoin d'√™tre pris en compte dans le d√©veloppement, on ne sait pas dans quelle mesure ils fonctionnent. </font><font style="vertical-align: inherit;">Ou le backend √©crit un nouveau stylo, voit du rouge et donne un coup de pied aux testeurs pour que tout soit vert. </font><font style="vertical-align: inherit;">C'est assez facile √† faire, on va dans ce sens.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La deuxi√®me id√©e est de soutenir d'autres outils. </font><font style="vertical-align: inherit;">En fait, je ne veux pas √©crire de filtres pour des impl√©mentations sp√©cifiques: pour Java, Python, etc. </font><font style="vertical-align: inherit;">Il y a une id√©e de faire une sorte de proxy qui passera toutes les demandes par lui-m√™me et enregistrera les informations Swagger pour lui-m√™me. </font><font style="vertical-align: inherit;">Ainsi, nous aurons une biblioth√®que universelle qui peut √™tre utilis√©e quelle que soit la langue que vous utilisez. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La troisi√®me id√©e de d√©veloppement est l'int√©gration avec Allure Report. </font><font style="vertical-align: inherit;">Je le vois comme ceci: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ym/b3/ad/ymb3adazpdly9uhljv8jjqpyg04.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En r√®gle g√©n√©rale, lorsque le param√®tre est ¬´test√©¬ª, cela ne nous dit pas toujours comment il est test√©. </font><font style="vertical-align: inherit;">Et je veux pointer sur ce param√®tre et voir les √©tapes sp√©cifiques du test.</font></font><br>
<br>
<h4><font color="#DB8E0D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Couverture des tests Web</font></font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le point suivant dont je veux parler est la couverture des tests Web. La couverture est bas√©e sur le site que vous testez, en √©crivant des tests sur le site. Mais vous pouvez en faire une interface Web pour votre couverture. Par exemple, cela ressemblera √† ceci: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vq/1k/tg/vq1ktgatdwq9v-v-fpzz1444hf0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous regardez votre site - il s'agit d'un ensemble d'√©l√©ments et de fa√ßons d'interagir avec eux. Voici une description compl√®te: "un √©l√©ment est un moyen d'interagir avec lui". Vous pouvez cliquer sur le lien, vous pouvez copier le texte, vous pouvez mettre quelque chose en entr√©e. Le site dans son ensemble se compose d'√©l√©ments et de modes d'interaction: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/f3/07/z-/f307z-lt44swcsgdas_vsspvyrk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
comment les tests s'ex√©cutent: ils commencent √† un moment donn√©, puis, par exemple, remplissent un formulaire, par exemple un formulaire d'autorisation, puis se dispersent sur d'autres pages, puis un autre sur un autre et se terminent .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si le gestionnaire demande si un bouton particulier est en cours de test, mais cette question est difficile √† r√©pondre: vous devez ouvrir le code ou aller √† TestRail, alors je veux voir cette solution au probl√®me: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/hh/7q/mv/hh7qmvkk8gefu94bigbkofhdgak.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
je veux pointer sur cet √©l√©ment et voir tous les tests que nous avons sur cet article. S'il existait un tel instrument, je serais heureux. Lorsque nous avons commenc√© √† r√©fl√©chir √† cette id√©e, nous avons d'abord examin√© Yandex.Metrica. Ils ont en fait √† peu pr√®s les m√™mes fonctionnalit√©s qu'une carte de liens. Une bonne id√©e.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'essentiel est qu'ils sont mis en √©vidence exactement comme s'ils donnaient d√©j√† les informations dont nous avons besoin. Ils disent: "Ici, nous avons pass√© ce lien 14 fois", ce qui en traduction dans la langue de test signifie: "14 tests ont √©t√© test√©s dans ce lien" et en quelque sorte l'ont travers√©. Mais ce lien rouge a pris jusqu'√† 120 tests, quels tests int√©ressants! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pouvez dessiner toutes sortes de tendances, ajouter des m√©ta-informations, mais que se passe-t-il si nous prenons tout cela et dessinons du point de vue des tests? Donc, nous avons une t√¢che: pointer un √©l√©ment et obtenir une note avec une liste de tests. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/xa/hr/dj/xahrdjma8punc8jmujxg_vwtlvs.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour mettre en ≈ìuvre cela, vous devez cliquer sur l'ic√¥ne, puis √©crire une note, et c'est tout notre test. Nous utilisons Atlas chez nous, et l'int√©gration jusqu'√† pr√©sent n'est qu'avec lui. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Atlas ressemble √† ceci:</font></font><br>
<br>
<pre><code class="java hljs">SearchPage.open ();<font></font>
SearchPage.offersList().should(hasSizeGreaterThan(<span class="hljs-number">0</span>));
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous voulons qu'au moins un r√©sultat soit affich√©, sinon nous ne le testerons pas. </font><font style="vertical-align: inherit;">Ensuite, nous d√©pla√ßons le curseur sur l'√©l√©ment, puis nous cliquons dessus.</font></font><br>
<br>
<pre><code class="java hljs">searchPage.offer(FIRST).moveCursor();<font></font>
searchPage.offer(FIRST).actionBar().note().click();<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, nous enregistrons en </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">entr√©e User_Text</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et le soumettons.</font></font><br>
<br>
<pre><code class="java hljs">searchPage.offer(FIRST).addNoteInput().sendKeys(USER_TEXT);<font></font>
searchPage.offer(FIRST).saveNote().click();<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apr√®s cela, nous v√©rifions que le texte est exactement celui qui aurait d√ª √™tre.</font></font><br>
<br>
<pre><code class="java hljs"> searchPage.offer(FIRST).addNoteInput().should(hasValue(USER_TEXT));
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les tests s'ex√©cutent dans un navigateur, Atlas est un proxy pour ce test, nous appliquons ici la m√™me approche que tout le monde utilise lors de la collecte de couverture: nous allons faire un localisateur avec .json. Nous y enregistrerons des informations sur toutes les ouvertures de page, toutes les it√©rations avec des √©l√©ments, qui ont soumis, qui a envoy√© la cl√©, qui ont cliqu√©, quels ID, etc. - nous garderons un journal complet. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, nous attachons ce journal √† Allure sous la forme de chaque test, et lorsque nous avons beaucoup de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">locators.json</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , nous g√©n√©rons </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">meta.json</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Le sch√©ma est le m√™me pour tous les √©l√©ments. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons un plugin pour Google Chrome. Nous voulions prendre une d√©cision sous la forme d'un plugin. J'ai sp√©cialement fait une capture d'√©cran de la courbe afin qu'un d√©tail important soit visible sur le </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chemin de</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> la diapositive </font><i><font style="vertical-align: inherit;">vers locators.json</font></i><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<img src="https://habrastorage.org/webt/rx/kg/nz/rxkgnzghdmiw9syocwbkaqx27yy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous avez g√©n√©r√© un rapport maintenant, il existe une carte de couverture pour aujourd'hui. Si vous prenez le rapport des deux semaines pr√©c√©dentes et le collez ici, une carte de couverture pour la p√©riode d'il y a deux semaines appara√Ætra. Vous avez une machine √† remonter le temps! </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cependant, lorsque vous branchez ce plugin, il dessine une interface peu conviviale. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/mx/q4/vx/mxq4vxhpjqlrewxte3xn_o75upm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Chaque √©l√©ment a un certain nombre de tests qui le traversent: il est clair que 40 tests passent par ¬´acheter un appartement¬ª, l'en-t√™te est test√© un test √† la fois, c'est cool, et l'option ¬´appartement¬ª est √©galement affich√©e. Vous obtenez une carte de couverture compl√®te. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous survolez un √©l√©ment, il prendra les donn√©es et imprimera vos vrais tests depuis votre tms, Allure Board et ainsi de suite. Le r√©sultat est une information compl√®te sur ce qui est test√© et comment.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Veuillez noter qu'√† partir de chaque test, vous pouvez √©chouer directement dans le rapport Allure. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/he/nw/iy/henwiyzy6if8o1ak2ky1i9v2s-e.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lorsque vous ouvrez quelque chose, il charge de nouveaux s√©lecteurs: si vous avez des tests qui passent par ces s√©lecteurs et que vous avez fait quelque chose avec le site, il traitera et affichera l'image enti√®re.</font></font><br>
<br>
<h2><font color="#DB8E0D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quel est le profit?</font></font></font></h2><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D√®s que nous avons mis en ≈ìuvre cette approche simple, alors, principalement, nous avons commenc√© √† comprendre ce que nous avons test√© dans les tests.</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, n'importe qui peut entrer et trouver n'importe quel "fil" qui m√®ne au script. Par exemple, vous supposez que vous devez tester le paiement. Le paiement, √©videmment, passe par le bouton de paiement: cliquez - tous les tests qui passent par le bouton de paiement apparaissent. C'est bon! Vous allez dans l'un d'eux et regardez le script. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De plus, vous comprenez ce qui a √©t√© test√© auparavant. Nous g√©n√©rons un fichier statique, vous pouvez sp√©cifier le chemin vers celui-ci et indiquer quels tests √©taient il y a deux semaines. Si le responsable dit qu'il y a un bug dans la production et demande si nous avons test√© telle ou telle fonctionnalit√© il y a quelques semaines, vous prenez le rapport Allure, disons, par exemple, que vous ne l'avez pas test√©.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un autre b√©n√©fice est l'examen apr√®s avoir test√© l'automatisation. Avant cela, nous avions un examen avant de tester l'automatisation, vous pouvez maintenant faire vos tests exactement comme vous les voyez. Si vous vouliez faire un test - termin√©, avez pris une branche, lanc√© Allure, laiss√© tomber le lien vers le plug-in vers un testeur manuel et demand√© √† voir les tests. C'est exactement le processus qui vous permettra de renforcer la strat√©gie Agile: le chef d'√©quipe fait une revue de code, et les testeurs manuels font vos tests (scripts). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un autre avantage de cette approche est les √©l√©ments fr√©quemment utilis√©s. Si nous rempla√ßons ce bloc, dans lequel il y a 87 tests, alors tous tomberont. Vous commencez √† comprendre √† quel point vos tests sont flasques.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/x3/jh/ye/x3jhyewo2z60_6-xi5iz6q-2rzs.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et si le bloc "prix √† partir de" est annul√©, alors √ßa va, un test tombera, une personne le corrigera. </font><font style="vertical-align: inherit;">Si vous modifiez le bloc avec 87 tests, la couverture s'affaissera consid√©rablement, car 87 tests ne passeront pas et ne v√©rifieront aucun r√©sultat. </font><font style="vertical-align: inherit;">Ce bloc n√©cessite une attention accrue. </font><font style="vertical-align: inherit;">Ensuite, vous devez dire au d√©veloppeur que ce bloc doit √™tre avec un ID, car s'il part, tout s'effondrera.</font></font><br>
<br>
<h2><font color="#DB8E0D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comment pouvez-vous vous d√©velopper davantage?</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par exemple, vous pouvez suivre la voie du d√©veloppement de la prise en charge d'autres outils, par exemple, pour Selenide. Je voudrais m√™me prendre en charge non pas un s√©l√©niure sp√©cifique, mais une impl√©mentation de pilote qui vous permettra de collecter des localisateurs, quel que soit l'outil que vous utilisez. Ce proxy vide les informations puis les affiche. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une autre id√©e est d'afficher le r√©sultat du test actuel. Par exemple, il est pratique de jeter imm√©diatement une telle image √† un testeur manuel: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/e4/w-/q8/e4w-q8xjavk2dfern8u_fncyfu4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
vous n'avez pas √† penser aux tests qui ont √©chou√©, car vous pouvez aller sur le site, cliquer sur le test et le passer √† la main sans v√©rifier les autres tests. C'est facile, vous pouvez r√©cup√©rer ces informations aupr√®s d'Allure et les dessiner ici.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pouvez √©galement ajouter le score total, car tout le monde aime les graphiques, car je veux traiter des tests en double qui sont tr√®s similaires les uns aux autres, dont la partie centrale est la m√™me, et le d√©but et la queue ont un peu chang√©. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/op/lw/xq/oplwxqvq08hv-uaqs3c97owcuxy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je voudrais √©galement voir imm√©diatement le nombre de s√©lecteurs en double. S'il est √©lev√©, sur cette page, vous devez effectuer une refactorisation et ex√©cuter des tests, sinon ils tomberont dans un ensemble trop volumineux. Il en va de m√™me pour le nombre d'√©l√©ments avec lesquels nous avons interagi. Ceci est un sympt√¥me courant. Cependant, d√®s que vous interagissez avec la page, la figure sautera en raison de nouveaux √©l√©ments et du nombre total de cas de test, vous devez donc ajouter une sorte d'analyse, ce ne sera pas superflu.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pouvez √©galement ajouter la distribution des tests par couches, car vous voulez voir non seulement que nous avons ces tests, mais tous les types de tests qui sont sur cette page, √©ventuellement m√™me des tests manuels. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ainsi, s'il existe des tests Java et des tests sur Puppeteer qu'une autre √©quipe √©crit, nous pouvons regarder une page sp√©cifique et dire imm√©diatement o√π nos tests se croisent. Autrement dit, nous parlerons la m√™me langue avec eux et nous n'aurons pas besoin de collecter ces informations petit √† petit. Si nous avons un outil qui montre tout dans l'interface Web, la t√¢che de comparer les tests en Java et Puppeteer ne semble plus insoluble.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Enfin, parlons de la strat√©gie g√©n√©rale. </font><font style="vertical-align: inherit;">Nous avons d√©j√† parl√© des types de couverture, nomm√©s deux, avec un troisi√®me type de rev√™tement, que nous avons utilis√© en cons√©quence. </font><font style="vertical-align: inherit;">Nous avons donc pris et examin√© ce probl√®me sous un angle diff√©rent.</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D'une part, il y a une couverture qui a √©t√© lanc√©e depuis 1963, d'autre part, il y a des testeurs manuels qui ont l'habitude de vivre dans un monde plus r√©el que le code. </font><font style="vertical-align: inherit;">Il ne reste plus qu'√† combiner ces deux approches.</font></font><br>
</blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les personnes int√©ress√©es peuvent toujours rejoindre notre communaut√©. </font><font style="vertical-align: inherit;">Voici deux r√©f√©rentiels de nos gars qui traitent du probl√®me de couverture:</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">couverture de fanfaronnade</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">localisateurs-hotspots-plugin-chrome</font></font></a></li>
</ul></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr491826/index.html">Bitrix Audit √† faire soi-m√™me</a></li>
<li><a href="../fr491828/index.html">DataMatrix ou comment √©tiqueter correctement les chaussures</a></li>
<li><a href="../fr491832/index.html">8 avantages de Flutter par rapport √† React Native</a></li>
<li><a href="../fr491838/index.html">Le MIPT lance un cours en ligne ouvert sur la programmation sportive</a></li>
<li><a href="../fr491840/index.html">Visualisation du travail des travailleurs des services</a></li>
<li><a href="../fr491846/index.html">V√©rification de l'isomorphisme de deux graphiques et recherche de sous-graphiques isomorphes: une approche bas√©e sur l'analyse des chemins NB</a></li>
<li><a href="../fr491848/index.html">Redux Toolkit n'est plus n√©cessaire?</a></li>
<li><a href="../fr491852/index.html">Flask-DJ: Structure Django (mvc) pour un projet sur flask</a></li>
<li><a href="../fr491854/index.html">T√©l√©phones d'entreprise pour chacun des 31 000 employ√©s</a></li>
<li><a href="../fr491856/index.html">LinkedIn pour les √©tudiants et les dipl√¥m√©s: premi√®res √©tapes</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>