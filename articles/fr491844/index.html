<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>📌 🤵🏻 🌆 Visualisation de la couverture du test automatique 🙌🏿 🧑🏾‍🤝‍🧑🏾 🚱</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Les rapports de couverture modernes sont dans certains cas plutôt inutiles, et les méthodes pour les mesurer ne conviennent principalement qu'aux déve...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Visualisation de la couverture du test automatique</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/jugru/blog/491844/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les rapports de couverture modernes sont dans certains cas plutôt inutiles, et les méthodes pour les mesurer ne conviennent principalement qu'aux développeurs. </font><font style="vertical-align: inherit;">Vous pouvez toujours connaître le pourcentage de couverture ou afficher le code qui n'a pas été utilisé lors des tests, mais que faire si vous voulez de la visibilité, de la simplicité et de l'automatisation? </font></font><br>
<br>
<img src="https://habrastorage.org/webt/_r/ms/rr/_rmsrr9pfqqgiu7vvskxe93g2po.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sous la coupe - vidéo et transcription d'un rapport d'Artem Eroshenko de Qameta Software de la conférence </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Heisenbug</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Il a présenté plusieurs solutions simples et élégantes développées qui aident l'équipe Yandex.Verticals à évaluer la couverture des tests rédigés par les ingénieurs d'automatisation des tests. </font><font style="vertical-align: inherit;">Artem vous dira comment trouver rapidement ce qui est couvert, comment couvert, quels tests ont réussi et voir instantanément les rapports visuels.</font></font><br>
<br>
<a name="habracut"></a><br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/N2k4LKPWuSw" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je m'appelle Artyom Eroshenko </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">eroshenkoam</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, Je fais de l'automatisation des tests depuis plus de 10 ans. </font><font style="vertical-align: inherit;">J'étais responsable de l'automatisation des tests, responsable de l'équipe de développement d'outils, développeur d'outils. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En ce moment je suis consultant dans le domaine de l'automatisation des tests, je travaille avec plusieurs entreprises avec lesquelles nous construisons des processus. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je suis également développeur et gestionnaire secret d'Allure Report. </font><font style="vertical-align: inherit;">Nous avons récemment </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">corrigé une chose sympa</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : maintenant dans JUnit 5, il y a des fixtures.</font></font><br>
<br>
<h2><font color="#DB8E0D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cadre Atlas</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mon développement est le </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Framework Atlas</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Si quelqu'un a commencé à automatiser en 2012, alors que les pilotes Web Java commençaient à peine, à ce moment-là, j'ai créé une bibliothèque open source appelée </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HTML Elements</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Html Elements a sa suite et repense dans la bibliothèque Atlas, qui est construite sur des interfaces: il n'y a pas de classes en tant que telles, pas de champs, une bibliothèque très pratique, légère et facilement extensible. Si vous avez envie de le comprendre, vous pouvez lire l' </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">article</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ou consulter le </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rapport</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mon rapport est consacré au problème de l'automatisation des tests et principalement aux revêtements. Comme arrière-plan, je voudrais me référer à la façon dont les processus de test sont organisés dans Yandex.Verticals.</font></font><br>
<br>
<h2><font color="#DB8E0D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comment fonctionne l'automatisation dans les verticales?</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'équipe d'automatisation des tests de Yandex.Verticals ne compte que quatre personnes qui automatisent quatre services: Yandex.Avto, Work, Real Estate et Parts. </font><font style="vertical-align: inherit;">Autrement dit, il s'agit d'une petite équipe d'automatiseurs qui font beaucoup. </font><font style="vertical-align: inherit;">Nous automatisons l'API, l'interface Web, les applications mobiles, etc. </font><font style="vertical-align: inherit;">Au total, nous avons quelque part environ 15,5 mille tests qui sont effectués à différents niveaux.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La stabilité des tests dans l'équipe est d'environ 97%, bien que certains de mes collègues disent environ 99%. Une telle stabilité élevée est obtenue précisément grâce à de courts tests sur des technologies très natives. En règle générale, nos tests prennent environ 15 minutes, ce qui est très volumineux, et nous les exécutons dans environ 800 threads. Autrement dit, nous avons 800 navigateurs démarrant en même temps - un tel test de résistance de nos tests. Comme fer, nous utilisons le sélénoïde (Aerokube). Vous pouvez en savoir plus sur les tests d'automatisation dans Yandex.Verticals en regardant mon rapport 2017, qui est toujours pertinent.</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/gwXpYB6ZayE" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une autre caractéristique de notre équipe est que </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nous automatisons tout</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , y compris les testeurs manuels, qui contribuent grandement au développement de l'automatisation des tests. Pour eux, nous organisons des écoles, leur enseignons des tests, apprenons à rédiger des tests pour l'API, l'interface Web, et souvent ils aident à accompagner les tests. Ainsi, les gars qui sont responsables de la libération eux-mêmes peuvent immédiatement corriger le test, si nécessaire. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans Verticals, les développeurs de tests écrivent des tests, et ils sont tellement passionnés par le développement de tests qu'ils nous rivalisent. Vous pouvez en savoir plus sur ce processus dans le rapport </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">«Le cycle complet de test des applications React»</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, où Alexei Androsov et Natalya Stus expliquent comment ils écrivent des tests unitaires sur Puppeteer en parallèle avec nos tests Java de bout en bout. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les ingénieurs d'automatisation des tests rédigent également des tests dans notre équipe. </font><font style="vertical-align: inherit;">Mais souvent, nous développons de nouvelles approches pour les optimiser. </font><font style="vertical-align: inherit;">Par exemple, nous avons implémenté des tests de capture d'écran, des tests via moki, une réduction des tests. </font><font style="vertical-align: inherit;">En général, notre domaine est principalement développeur de logiciels en test (SDET), nous sommes plus sur la façon d'écrire des tests, et la base de test est partiellement remplie par nous et est prise en charge par des testeurs manuels.</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les développeurs nous aident également, et c'est cool.</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le problème qui se pose dans ces processus est que nous ne comprenons pas toujours ce qui est déjà couvert et ce qui ne l'est pas. </font><font style="vertical-align: inherit;">À travers 15 000 tests, il n'est pas toujours clair de savoir exactement ce que nous vérifions. </font><font style="vertical-align: inherit;">Cela est particulièrement vrai dans le contexte de la communication avec les gestionnaires, qui, bien sûr, ne testent pas, mais surveillent et posent des questions. </font><font style="vertical-align: inherit;">En particulier, si la question se pose de savoir si un bouton particulier a été testé dans l'interface ou le flux, il est difficile de répondre, car vous devez accéder au code de test et consulter ces informations.</font></font><br>
<br>
<h2><font color="#DB8E0D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Qu'est-ce qui est testé et qu'est-ce qui ne l'est pas?</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous avez de nombreux tests dans différentes langues et que vous êtes écrit par des personnes ayant divers degrés de formation, alors tôt ou tard la question se pose, ces tests ne sont-ils pas du tout entrecoupés? </font><font style="vertical-align: inherit;">Dans le contexte de ce problème, la question de la couverture devient particulièrement pertinente. </font><font style="vertical-align: inherit;">Je décrirai trois sujets clés:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Façons de mesurer efficacement la couverture.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Couverture pour les tests API.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Couverture pour les tests Web.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout d'abord, déterminons qu'il existe deux façons de couvrir: la couverture des exigences et la couverture du code produit.</font></font><br>
<br>
<h4><font color="#DB8E0D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comment la couverture des besoins est mesurée</font></font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Considérez la couverture des exigences en utilisant auto.ru comme exemple. Au lieu du testeur auto.ru, je ferais ce qui suit. Tout d'abord, je recherche sur Google et je trouve immédiatement un tableau des exigences spéciales. C'est la base de la couverture des exigences. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/nf/v6/fh/nfv6fhqm8ukolt_4bv6bxyycohm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans ce tableau, les noms des exigences sont écrits à gauche. Dans ce cas: compte, annonces, vérification et paiement, c'est-à-dire vérification de l'annonce. En général, c'est la couverture. Le détail de la partie gauche dépend du niveau du testeur. Par exemple, les ingénieurs de Google ont 49 types de revêtements qui sont testés à différents niveaux. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le côté droit du tableau contient les attributs des exigences. Nous pouvons utiliser n'importe quoi sous forme d'attributs, par exemple: priorité, couverture et état. Cela peut être la date de la dernière version.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ox/3a/kj/ox3akjf5fcmwxlmt_utf3uhnsas.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ainsi, certaines données apparaissent dans le tableau. Vous pouvez utiliser des outils professionnels pour gérer une table d'exigences, par exemple, TestRail. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il y a des informations sur l'arborescence à droite: les dossiers indiquent quelles exigences nous avons, comment elles peuvent être couvertes. Il y a des cas de test et ainsi de suite. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/wh/he/aj/whheajlxedwdqlmspx_iofg4wai.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans les verticales, ce processus ressemble à ceci: un testeur manuel décrit les exigences et les cas de test, puis les transmet à l'automatisation des tests, et l'outil automatisé écrit du code pour ces tests. De plus, plus tôt, nous avons reçu des cas de test détaillés dans lesquels le testeur manuel décrivait la structure entière. Ensuite, quelqu'un a fait un commit sur le github, et le test a commencé à être bénéfique.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quels sont les avantages et les inconvénients de cette approche? Le plus est que cette approche répond à nos questions. Si le gestionnaire demande ce que nous avons couvert, j'ouvrirai la tablette et montrerai quelles fonctionnalités sont couvertes. En revanche, ces exigences doivent toujours être tenues à jour et elles deviennent obsolètes très rapidement. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lorsque vous avez 15 000 tests, regarder TestRail, c'est comme regarder une étoile dans l'espace: elle a explosé pendant longtemps, et la lumière vous a atteint tout à l'heure. Vous regardez le cas de test actuel, et il est déjà obsolète depuis longtemps et irrévocablement.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ce problème est difficile à résoudre. </font><font style="vertical-align: inherit;">Pour nous, ce sont généralement deux mondes différents: il y a un monde d'automatisation qui tourne selon ses propres lois, où chaque test qui échoue est immédiatement corrigé, et il y a un monde de tests manuels et de cartes d'exigences. </font><font style="vertical-align: inherit;">Le mur entre eux est impénétrable, sauf si vous utilisez Allure Server. </font><font style="vertical-align: inherit;">Nous venons maintenant de résoudre ce problème pour eux. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le troisième point des «avantages et inconvénients» est la nécessité d'un travail manuel. </font><font style="vertical-align: inherit;">Dans un nouveau projet, vous devez recréer une carte des exigences, écrire tous les cas de test, etc. </font><font style="vertical-align: inherit;">Cela nécessite toujours un travail manuel, et c'est en fait très triste.</font></font><br>
<br>
<h4><font color="#DB8E0D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comment la couverture du code est mesurée</font></font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une alternative à cette approche est la couverture du code. </font><font style="vertical-align: inherit;">Cela semble être la solution à notre problème. </font><font style="vertical-align: inherit;">Voici à quoi ressemble la couverture du code produit: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/5o/-c/oe/5o-coev_livsv-tudln9ztpau_e.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
elle reflète la couverture de l'emballage, ou plutôt une petite partie de ce que le produit a réellement. </font><font style="vertical-align: inherit;">Le package est écrit sur la gauche, comme les fonctionnalités ont été écrites auparavant. </font><font style="vertical-align: inherit;">Autrement dit, notre revêtement est finalement attaché à des choses tangibles, dans ce cas - Package. </font><font style="vertical-align: inherit;">Les attributs sont écrits à droite: couverture par classe, couverture par méthodes, couverture par blocs de code et couverture par lignes de code. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le processus de collecte de la couverture consiste à comprendre quelle ligne de code le test a réussi et laquelle n'a pas réussi. </font><font style="vertical-align: inherit;">Il s'agit d'une tâche assez simple, mais récemment très pertinente.</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La première mention de la couverture du code remonte à 1963, mais de sérieux progrès dans ce sens n'apparaissent que maintenant.</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons donc un test qui interagit avec le système. Peu importe la façon dont il interagit avec elle: via le front-end, l'API ou se glisse directement dans le back-end - nous supposerons simplement que nous l'avons. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, l'instrumentation doit être effectuée. Il s'agit d'un processus qui vous permet de comprendre quelles lignes de code ont été vérifiées et lesquelles ne l'ont pas été. Vous n'avez pas besoin de l'étudier en détail, il vous suffit de rechercher le nom de votre framework sur lequel vous écrivez, disons </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Spring</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , puis l' </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">instrumentation</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et la </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">couverture</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - ces trois mots vous aideront à comprendre comment cela se fait. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lorsque vos tests vérifient quelle ligne de code le test a atteint et laquelle ne l'a pas atteint, ils enregistrent des fichiers avec des informations sur les lignes couvertes. Sur la base de ces informations, vous disposez de données.</font></font><br>
<br>
<h4><font color="#DB8E0D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quels sont les avantages et les inconvénients de la couverture du code?</font></font></font></h4><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Couverture du code J'appellerais immédiatement un moins</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Vous ne viendrez pas chez le manager, vous ne montrerez pas cette plaque et vous ne direz pas que tout le monde a automatisé, car ces données ne peuvent pas être lues, il vous demandera de renvoyer des données claires que vous pourrez rapidement consulter et tout comprendre. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Rapport de couverture du code plus proche du développement. </font><font style="vertical-align: inherit;">Il ne peut pas être utilisé comme une approche normale pour fournir toutes les données à une équipe si nous voulons que toute l'équipe puisse regarder. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/jm/kr/bw/jmkrbwezcyzyx90-qxgm4jrrlbm.png"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'avantage de cette approche est qu'elle fournit toujours des données pertinentes. </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous n'avez pas à faire beaucoup de travail, tout est automatisé pour vous. </font><font style="vertical-align: inherit;">Branchez simplement la bibliothèque, vos couvertures commencent à décoller - et c'est vraiment cool.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un autre avantage de cette approche est qu'elle ne nécessite qu'une personnalisation. Il n'y a rien de spécial à faire là-bas - venez avec une instruction spécifique, ajustez la couverture et cela fonctionne automatiquement. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La couverture des exigences vous permet d'identifier les exigences non satisfaites, mais ne permet pas d'évaluer l'exhaustivité par rapport au code. Par exemple, vous avez commencé à écrire une nouvelle fonctionnalité «autorisation», entrez simplement la «fonctionnalité d'autorisation», vous commencez à lancer des cas de test dessus. Vous ne pouvez pas voir immédiatement cette couverture dans le code, même si vous écrivez une nouvelle classe, il n'y aura toujours pas d'informations - il y a un écart. En revanche, il s'agit d'une exigence d'autorisation, même lorsqu'elle sera déjà mise en œuvre, lorsque vous comptez sur la couverture, cette partie ne peut pas être pertinente, elle doit être tenue à jour manuellement.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par conséquent, nous avons eu une idée: que faire si nous tirons le meilleur parti de tout le monde? </font><font style="vertical-align: inherit;">Pour que la couverture réponde à nos questions, elle était toujours pertinente et ne nécessitait qu'une personnalisation. </font><font style="vertical-align: inherit;">Il suffit de regarder le revêtement sous un angle différent, c'est-à-dire de prendre un autre système comme base du revêtement. </font><font style="vertical-align: inherit;">Dans le même temps, assurez-vous qu'il est collecté de manière entièrement automatique et apporte un tas d'avantages. </font><font style="vertical-align: inherit;">Et pour cela, nous allons entrer dans la couverture des tests API.</font></font><br>
<br>
<h2><font color="#DB8E0D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">API de couverture de test</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quelle est la base de la couverture? </font><font style="vertical-align: inherit;">Pour ce faire, nous utilisons </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Swagger</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - c'est l'API de documentation. </font><font style="vertical-align: inherit;">Maintenant, je ne peux pas imaginer mon travail sans Swagger, c'est un outil que j'utilise constamment pour les tests. </font><font style="vertical-align: inherit;">Si vous n'utilisez pas Swagger, je vous recommande fortement de visiter le site et de vous familiariser. </font><font style="vertical-align: inherit;">Vous y verrez immédiatement un exemple d'utilisation très intuitif et compréhensible. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En fait, Swagger est la documentation générée par votre service. </font><font style="vertical-align: inherit;">Il contient:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Liste des demandes.</font></font><br>
 <img src="https://habrastorage.org/webt/in/nc/pe/inncpekmy4a699gk-eh0o4be_jy.png"></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Demander des paramètres: il n'est pas nécessaire de tirer le développeur et de demander quels sont les paramètres.</font></font><br>
<img src="https://habrastorage.org/webt/yz/48/yg/yz48yg1kw8nnqdb3wn7fdcq0g1o.png"></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Codes de réponse</font></font><br>
<img src="https://habrastorage.org/webt/zz/y2/ku/zzy2kucjpovwr2xxue4zvct543o.png"><br>
</li>
</ul><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le principe de fonctionnement de Swagger est la génération. Peu importe le framework que vous utilisez. Disons que Spring or Go Server, vous utilisez le composant </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Swagger </font></font></a><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Codegen</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et générez </font><i><font style="vertical-align: inherit;">swagger.json</font></i><font style="vertical-align: inherit;"> . Il s'agit d'une spécification, sur la base de laquelle une belle interface utilisateur est ensuite dessinée. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il est important pour nous que </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">swagger.json</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> soit </font><i><font style="vertical-align: inherit;">utilisé</font></i><font style="vertical-align: inherit;"> : son support est disponible pour toutes les langues largement utilisées. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons la spécification Open API </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">swagger.json</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Il ressemble à ceci: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/jn/hl/km/jnhlkmmo1pd-7vxllopdvjhbdr0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les requêtes ressemblent à ceci: résumé, description, codes de réponse et un "handle" (chemin: / utilisateurs). Il y a aussi des informations sur le paramètre de requête: tout est structuré, il y a un paramètre d'ID utilisateur, il est dans le chemin où il est nécessaire, une telle description et type - entier.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/3a/bs/7h/3abs7hrvpakohvaejel8utqdtc4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il y a des codes de réponse, ils sont aussi tous documentés: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/so/3s/yq/so3syqf7mawlmlqomizvoqdj1-u.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et l'idée nous est venue: nous avons un service que Swagger génère, et nous voulions garder le même Swagger dans les tests pour pouvoir les comparer plus tard. </font><font style="vertical-align: inherit;">En d'autres termes, lorsque les tests s'exécutent, ils génèrent exactement le même Swagger, nous le jetons au Swagger Diff, nous comprenons quels paramètres, poignées, codes d'état que nous avons vérifiés, etc. </font><font style="vertical-align: inherit;">C'est la même instrumentation, la même couverture, que finalement dans les exigences que nous comprenons.</font></font><br>
<br>
<h2><font color="#DB8E0D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mais que faire si vous construisez un diff?</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous nous sommes tournés vers la bibliothèque de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">différences Swagger</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , ce dont nous avons besoin pour cela. Son principe de fonctionnement est quelque chose comme ceci: vous avez la version 1.0, avec l'API version 1.1, ils génèrent tous les deux </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">swagger.json</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , puis vous les lancez sur Swagger diff et voyez le résultat. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le résultat ressemble à ceci: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/qk/qn/ls/qkqnlsxnssknuv8p8t9cg5ckryu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
vous disposez d'informations indiquant, par exemple, un nouveau stylo. Vous avez également des informations sur ce qui est supprimé. Cela signifie qu'il est temps de supprimer les tests, ils ne sont plus pertinents. Avec l'apparition d'informations sur les changements, les paramètres changent également, il est donc évident que vos tests tomberont à ce moment-là.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons aimé cette idée et nous avons commencé à la mettre en œuvre. Comme nous avons décidé de le faire: nous avons un Swagger «de référence» qui génère à partir du code du développeur, nous avons également des tests d'API qui généreront notre Swagger, et nous les différencierons. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous effectuons donc des tests pour le service: nous avons </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rest Assured</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , qui accède lui-même aux services sur l'API. Et nous l'instruisons. Il existe une approche: vous pouvez créer des filtres, la demande y est </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">envoyée</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - et il enregistre </font><font style="vertical-align: inherit;">directement </font><font style="vertical-align: inherit;">les informations sur la demande sous la forme de </font><i><font style="vertical-align: inherit;">swagger.json</font></i><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voici tout le code que nous avions besoin d'écrire, il y avait 69-70 lignes - c'est un code très simple.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/6_/m6/ck/6_m6cka7jfewruree9d9561tayo.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le plus drôle, c'est que nous avons utilisé le client natif pour Swagger, a écrit juste là. </font><font style="vertical-align: inherit;">Nous n'avions même pas besoin de créer nos binaires, nous venons de remplir la spécification Swagger. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/lr/rl/fw/lrrlfwuiqrgykrprpjnxr1fcfmq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons eu beaucoup de fichiers .json avec lesquels nous devions faire quelque chose - ils ont écrit un agrégateur Swagger. </font><font style="vertical-align: inherit;">Il s'agit d'un programme très simple qui fonctionne selon le principe suivant:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Elle répond à une nouvelle demande, si elle n'est pas dans notre base de données, ajoute-t-elle.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Elle répond à la demande, il a un nouveau paramètre - ajoute.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Même chose avec les codes d'état.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ainsi, nous obtenons des informations sur tous les stylos, paramètres et codes d'état que nous avons utilisés. </font><font style="vertical-align: inherit;">De plus, vous pouvez collecter ici les données avec lesquelles ces demandes ont été effectuées: nom d'utilisateur, identifiants de connexion, etc. </font><font style="vertical-align: inherit;">Nous n'avons pas encore compris comment utiliser ces informations, car tout est généré avec nous, mais vous pouvez comprendre avec quels paramètres certaines demandes ont été appelées.</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Donc, nous étions presque à un jet de pierre de la victoire, mais en conséquence, nous avons refusé Swagger Diff, car cela fonctionne dans un concept légèrement différent - dans le concept de différentiel.</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Swagger Diff dit ce qui a changé, pas ce qui est couvert, mais nous voulions afficher le résultat de la couverture. </font><font style="vertical-align: inherit;">Il y a beaucoup de données supplémentaires, il stocke des informations sur la description, le résumé et d'autres méta-informations, mais nous ne disposons pas de ces informations. </font><font style="vertical-align: inherit;">Et quand nous faisons Diff, ils nous écrivent que "ce stylo n'a pas de description", mais il n'existait pas.</font></font><br>
<br>
<h2><font color="#DB8E0D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Propre rapport</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons fait notre implémentation, et cela fonctionne comme suit: nous avons de nombreux fichiers provenant d'autotests, nous avons l'API du service Swagger, et nous générons un rapport sur cette base. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un rapport simple ressemble à ceci: vous pouvez voir ci-dessus des informations sur le nombre total de plumes (349), des informations sur celles qui sont entièrement couvertes (chaque paramètre, code d'état, etc.). Vous pouvez choisir vos propres critères, par exemple, couvrir plusieurs paramètres. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il y a également des informations ici que 40% sont partiellement couverts - cela signifie que nous avons déjà des tests pour ces stylos, mais certaines choses ne sont pas encore couvertes, et vous devez y regarder attentivement. La couverture vide est également reflétée. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/pc/og/p5/pcogp5jnc8m88l8fylt2p2uc0eq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Passons en revue les onglets. Ceci est une </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">couverture complète</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , nous voyons tous les paramètres que nous avons, qui sont couverts, les codes d'état et ainsi de suite.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/9o/gl/2q/9ogl2q9tf_xb1xw9dl9j8sxsku0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, nous avons une </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">couverture partielle</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Nous voyons que sur la poignée de connexion sociale, un paramètre est couvert, et deux ne le sont pas. </font><font style="vertical-align: inherit;">Et nous pouvons l'étendre et voir quels paramètres spécifiques et codes d'état sont couverts. </font><font style="vertical-align: inherit;">Et en ce moment cela devient très pratique pour le développeur: les versions de l'application roulent très rapidement, et on peut souvent oublier certains paramètres. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fo/pf/sc/fopfscyojnuzokszhkw8ntgrqio.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cet outil vous permet d'être toujours en forme et de comprendre ce que nous avons partiellement couvert, quel paramètre est oublié, etc. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dernier - Gloire de la honte, nous devons encore le faire. </font><font style="vertical-align: inherit;">Lorsque vous regardez cette page et voyez Vider là: 172 - vos mains tombent, puis vous commencez à enseigner aux testeurs manuels comment écrire des autotests, c'est le point.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/p8/2k/o5/p82ko5nzine_u6odc8dtl9bho5s.png"><br>
<br>
<h4><font color="#DB8E0D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quel avantage avons-nous obtenu lorsque nous avons déployé notre solution?</font></font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout d'abord, nous avons commencé à écrire des tests de manière plus significative. </font><font style="vertical-align: inherit;">Nous comprenons que nous testons, et en même temps, nous avons deux stratégies. </font><font style="vertical-align: inherit;">Tout d'abord, nous automatisons quelque chose qui n'est pas là lorsque des testeurs manuels viennent et disent que pour un service particulier, il est essentiel qu'une demande soit exécutée au moins une fois, et nous ouvrons Empty. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La deuxième option - nous n'oublions pas les queues. </font><font style="vertical-align: inherit;">Comme je l'ai dit, les API seront publiées très rapidement, il peut y avoir des sorties deux ou trois fois par jour. </font><font style="vertical-align: inherit;">Certains paramètres y sont constamment ajoutés: dans cinq mille tests, il est impossible de comprendre ce qui est vérifié et ce qui ne l'est pas. </font><font style="vertical-align: inherit;">Par conséquent, c'est la seule façon de choisir consciemment une stratégie de test et au moins de faire quelque chose.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le troisième bénéfice est un processus entièrement automatique. </font><font style="vertical-align: inherit;">Nous avons emprunté l'approche, et l'automatisation fonctionne: nous n'avons rien à faire, tout est collecté automatiquement.</font></font><br>
<br>
<h4><font color="#DB8E0D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Idées de développement</font></font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Premièrement, je ne veux vraiment pas conserver le deuxième rapport, mais je veux l'intégrer dans Swagger UI. </font><font style="vertical-align: inherit;">Voici mon «rapport Photoshop Edition» préféré: une puce que j'ai développée récemment. </font><font style="vertical-align: inherit;">Voici immédiatement des informations sur les paramètres que nous avons testés et qui ne le sont pas. </font><font style="vertical-align: inherit;">Et ce serait cool de donner ces informations tout de suite avec Swagger. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/v6/ll/n8/v6lln82kyue5errknkoxj9mkq-k.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par exemple, le front-end peut voir par lui-même quels paramètres n'ont pas été testés, hiérarchiser et décider que même s'ils n'ont pas besoin d'être pris en compte dans le développement, on ne sait pas dans quelle mesure ils fonctionnent. </font><font style="vertical-align: inherit;">Ou le backend écrit un nouveau stylo, voit du rouge et donne un coup de pied aux testeurs pour que tout soit vert. </font><font style="vertical-align: inherit;">C'est assez facile à faire, on va dans ce sens.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La deuxième idée est de soutenir d'autres outils. </font><font style="vertical-align: inherit;">En fait, je ne veux pas écrire de filtres pour des implémentations spécifiques: pour Java, Python, etc. </font><font style="vertical-align: inherit;">Il y a une idée de faire une sorte de proxy qui passera toutes les demandes par lui-même et enregistrera les informations Swagger pour lui-même. </font><font style="vertical-align: inherit;">Ainsi, nous aurons une bibliothèque universelle qui peut être utilisée quelle que soit la langue que vous utilisez. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La troisième idée de développement est l'intégration avec Allure Report. </font><font style="vertical-align: inherit;">Je le vois comme ceci: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ym/b3/ad/ymb3adazpdly9uhljv8jjqpyg04.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En règle générale, lorsque le paramètre est «testé», cela ne nous dit pas toujours comment il est testé. </font><font style="vertical-align: inherit;">Et je veux pointer sur ce paramètre et voir les étapes spécifiques du test.</font></font><br>
<br>
<h4><font color="#DB8E0D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Couverture des tests Web</font></font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le point suivant dont je veux parler est la couverture des tests Web. La couverture est basée sur le site que vous testez, en écrivant des tests sur le site. Mais vous pouvez en faire une interface Web pour votre couverture. Par exemple, cela ressemblera à ceci: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vq/1k/tg/vq1ktgatdwq9v-v-fpzz1444hf0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous regardez votre site - il s'agit d'un ensemble d'éléments et de façons d'interagir avec eux. Voici une description complète: "un élément est un moyen d'interagir avec lui". Vous pouvez cliquer sur le lien, vous pouvez copier le texte, vous pouvez mettre quelque chose en entrée. Le site dans son ensemble se compose d'éléments et de modes d'interaction: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/f3/07/z-/f307z-lt44swcsgdas_vsspvyrk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
comment les tests s'exécutent: ils commencent à un moment donné, puis, par exemple, remplissent un formulaire, par exemple un formulaire d'autorisation, puis se dispersent sur d'autres pages, puis un autre sur un autre et se terminent .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si le gestionnaire demande si un bouton particulier est en cours de test, mais cette question est difficile à répondre: vous devez ouvrir le code ou aller à TestRail, alors je veux voir cette solution au problème: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/hh/7q/mv/hh7qmvkk8gefu94bigbkofhdgak.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
je veux pointer sur cet élément et voir tous les tests que nous avons sur cet article. S'il existait un tel instrument, je serais heureux. Lorsque nous avons commencé à réfléchir à cette idée, nous avons d'abord examiné Yandex.Metrica. Ils ont en fait à peu près les mêmes fonctionnalités qu'une carte de liens. Une bonne idée.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'essentiel est qu'ils sont mis en évidence exactement comme s'ils donnaient déjà les informations dont nous avons besoin. Ils disent: "Ici, nous avons passé ce lien 14 fois", ce qui en traduction dans la langue de test signifie: "14 tests ont été testés dans ce lien" et en quelque sorte l'ont traversé. Mais ce lien rouge a pris jusqu'à 120 tests, quels tests intéressants! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pouvez dessiner toutes sortes de tendances, ajouter des méta-informations, mais que se passe-t-il si nous prenons tout cela et dessinons du point de vue des tests? Donc, nous avons une tâche: pointer un élément et obtenir une note avec une liste de tests. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/xa/hr/dj/xahrdjma8punc8jmujxg_vwtlvs.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour mettre en œuvre cela, vous devez cliquer sur l'icône, puis écrire une note, et c'est tout notre test. Nous utilisons Atlas chez nous, et l'intégration jusqu'à présent n'est qu'avec lui. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Atlas ressemble à ceci:</font></font><br>
<br>
<pre><code class="java hljs">SearchPage.open ();<font></font>
SearchPage.offersList().should(hasSizeGreaterThan(<span class="hljs-number">0</span>));
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous voulons qu'au moins un résultat soit affiché, sinon nous ne le testerons pas. </font><font style="vertical-align: inherit;">Ensuite, nous déplaçons le curseur sur l'élément, puis nous cliquons dessus.</font></font><br>
<br>
<pre><code class="java hljs">searchPage.offer(FIRST).moveCursor();<font></font>
searchPage.offer(FIRST).actionBar().note().click();<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, nous enregistrons en </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">entrée User_Text</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et le soumettons.</font></font><br>
<br>
<pre><code class="java hljs">searchPage.offer(FIRST).addNoteInput().sendKeys(USER_TEXT);<font></font>
searchPage.offer(FIRST).saveNote().click();<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Après cela, nous vérifions que le texte est exactement celui qui aurait dû être.</font></font><br>
<br>
<pre><code class="java hljs"> searchPage.offer(FIRST).addNoteInput().should(hasValue(USER_TEXT));
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les tests s'exécutent dans un navigateur, Atlas est un proxy pour ce test, nous appliquons ici la même approche que tout le monde utilise lors de la collecte de couverture: nous allons faire un localisateur avec .json. Nous y enregistrerons des informations sur toutes les ouvertures de page, toutes les itérations avec des éléments, qui ont soumis, qui a envoyé la clé, qui ont cliqué, quels ID, etc. - nous garderons un journal complet. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, nous attachons ce journal à Allure sous la forme de chaque test, et lorsque nous avons beaucoup de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">locators.json</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , nous générons </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">meta.json</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Le schéma est le même pour tous les éléments. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons un plugin pour Google Chrome. Nous voulions prendre une décision sous la forme d'un plugin. J'ai spécialement fait une capture d'écran de la courbe afin qu'un détail important soit visible sur le </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chemin de</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> la diapositive </font><i><font style="vertical-align: inherit;">vers locators.json</font></i><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<img src="https://habrastorage.org/webt/rx/kg/nz/rxkgnzghdmiw9syocwbkaqx27yy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous avez généré un rapport maintenant, il existe une carte de couverture pour aujourd'hui. Si vous prenez le rapport des deux semaines précédentes et le collez ici, une carte de couverture pour la période d'il y a deux semaines apparaîtra. Vous avez une machine à remonter le temps! </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cependant, lorsque vous branchez ce plugin, il dessine une interface peu conviviale. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/mx/q4/vx/mxq4vxhpjqlrewxte3xn_o75upm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Chaque élément a un certain nombre de tests qui le traversent: il est clair que 40 tests passent par «acheter un appartement», l'en-tête est testé un test à la fois, c'est cool, et l'option «appartement» est également affichée. Vous obtenez une carte de couverture complète. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous survolez un élément, il prendra les données et imprimera vos vrais tests depuis votre tms, Allure Board et ainsi de suite. Le résultat est une information complète sur ce qui est testé et comment.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Veuillez noter qu'à partir de chaque test, vous pouvez échouer directement dans le rapport Allure. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/he/nw/iy/henwiyzy6if8o1ak2ky1i9v2s-e.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lorsque vous ouvrez quelque chose, il charge de nouveaux sélecteurs: si vous avez des tests qui passent par ces sélecteurs et que vous avez fait quelque chose avec le site, il traitera et affichera l'image entière.</font></font><br>
<br>
<h2><font color="#DB8E0D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quel est le profit?</font></font></font></h2><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dès que nous avons mis en œuvre cette approche simple, alors, principalement, nous avons commencé à comprendre ce que nous avons testé dans les tests.</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, n'importe qui peut entrer et trouver n'importe quel "fil" qui mène au script. Par exemple, vous supposez que vous devez tester le paiement. Le paiement, évidemment, passe par le bouton de paiement: cliquez - tous les tests qui passent par le bouton de paiement apparaissent. C'est bon! Vous allez dans l'un d'eux et regardez le script. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De plus, vous comprenez ce qui a été testé auparavant. Nous générons un fichier statique, vous pouvez spécifier le chemin vers celui-ci et indiquer quels tests étaient il y a deux semaines. Si le responsable dit qu'il y a un bug dans la production et demande si nous avons testé telle ou telle fonctionnalité il y a quelques semaines, vous prenez le rapport Allure, disons, par exemple, que vous ne l'avez pas testé.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un autre bénéfice est l'examen après avoir testé l'automatisation. Avant cela, nous avions un examen avant de tester l'automatisation, vous pouvez maintenant faire vos tests exactement comme vous les voyez. Si vous vouliez faire un test - terminé, avez pris une branche, lancé Allure, laissé tomber le lien vers le plug-in vers un testeur manuel et demandé à voir les tests. C'est exactement le processus qui vous permettra de renforcer la stratégie Agile: le chef d'équipe fait une revue de code, et les testeurs manuels font vos tests (scripts). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un autre avantage de cette approche est les éléments fréquemment utilisés. Si nous remplaçons ce bloc, dans lequel il y a 87 tests, alors tous tomberont. Vous commencez à comprendre à quel point vos tests sont flasques.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/x3/jh/ye/x3jhyewo2z60_6-xi5iz6q-2rzs.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et si le bloc "prix à partir de" est annulé, alors ça va, un test tombera, une personne le corrigera. </font><font style="vertical-align: inherit;">Si vous modifiez le bloc avec 87 tests, la couverture s'affaissera considérablement, car 87 tests ne passeront pas et ne vérifieront aucun résultat. </font><font style="vertical-align: inherit;">Ce bloc nécessite une attention accrue. </font><font style="vertical-align: inherit;">Ensuite, vous devez dire au développeur que ce bloc doit être avec un ID, car s'il part, tout s'effondrera.</font></font><br>
<br>
<h2><font color="#DB8E0D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comment pouvez-vous vous développer davantage?</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par exemple, vous pouvez suivre la voie du développement de la prise en charge d'autres outils, par exemple, pour Selenide. Je voudrais même prendre en charge non pas un séléniure spécifique, mais une implémentation de pilote qui vous permettra de collecter des localisateurs, quel que soit l'outil que vous utilisez. Ce proxy vide les informations puis les affiche. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une autre idée est d'afficher le résultat du test actuel. Par exemple, il est pratique de jeter immédiatement une telle image à un testeur manuel: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/e4/w-/q8/e4w-q8xjavk2dfern8u_fncyfu4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
vous n'avez pas à penser aux tests qui ont échoué, car vous pouvez aller sur le site, cliquer sur le test et le passer à la main sans vérifier les autres tests. C'est facile, vous pouvez récupérer ces informations auprès d'Allure et les dessiner ici.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pouvez également ajouter le score total, car tout le monde aime les graphiques, car je veux traiter des tests en double qui sont très similaires les uns aux autres, dont la partie centrale est la même, et le début et la queue ont un peu changé. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/op/lw/xq/oplwxqvq08hv-uaqs3c97owcuxy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je voudrais également voir immédiatement le nombre de sélecteurs en double. S'il est élevé, sur cette page, vous devez effectuer une refactorisation et exécuter des tests, sinon ils tomberont dans un ensemble trop volumineux. Il en va de même pour le nombre d'éléments avec lesquels nous avons interagi. Ceci est un symptôme courant. Cependant, dès que vous interagissez avec la page, la figure sautera en raison de nouveaux éléments et du nombre total de cas de test, vous devez donc ajouter une sorte d'analyse, ce ne sera pas superflu.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pouvez également ajouter la distribution des tests par couches, car vous voulez voir non seulement que nous avons ces tests, mais tous les types de tests qui sont sur cette page, éventuellement même des tests manuels. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ainsi, s'il existe des tests Java et des tests sur Puppeteer qu'une autre équipe écrit, nous pouvons regarder une page spécifique et dire immédiatement où nos tests se croisent. Autrement dit, nous parlerons la même langue avec eux et nous n'aurons pas besoin de collecter ces informations petit à petit. Si nous avons un outil qui montre tout dans l'interface Web, la tâche de comparer les tests en Java et Puppeteer ne semble plus insoluble.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Enfin, parlons de la stratégie générale. </font><font style="vertical-align: inherit;">Nous avons déjà parlé des types de couverture, nommés deux, avec un troisième type de revêtement, que nous avons utilisé en conséquence. </font><font style="vertical-align: inherit;">Nous avons donc pris et examiné ce problème sous un angle différent.</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D'une part, il y a une couverture qui a été lancée depuis 1963, d'autre part, il y a des testeurs manuels qui ont l'habitude de vivre dans un monde plus réel que le code. </font><font style="vertical-align: inherit;">Il ne reste plus qu'à combiner ces deux approches.</font></font><br>
</blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les personnes intéressées peuvent toujours rejoindre notre communauté. </font><font style="vertical-align: inherit;">Voici deux référentiels de nos gars qui traitent du problème de couverture:</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">couverture de fanfaronnade</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">localisateurs-hotspots-plugin-chrome</font></font></a></li>
</ul></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr491826/index.html">Bitrix Audit à faire soi-même</a></li>
<li><a href="../fr491828/index.html">DataMatrix ou comment étiqueter correctement les chaussures</a></li>
<li><a href="../fr491832/index.html">8 avantages de Flutter par rapport à React Native</a></li>
<li><a href="../fr491838/index.html">Le MIPT lance un cours en ligne ouvert sur la programmation sportive</a></li>
<li><a href="../fr491840/index.html">Visualisation du travail des travailleurs des services</a></li>
<li><a href="../fr491846/index.html">Vérification de l'isomorphisme de deux graphiques et recherche de sous-graphiques isomorphes: une approche basée sur l'analyse des chemins NB</a></li>
<li><a href="../fr491848/index.html">Redux Toolkit n'est plus nécessaire?</a></li>
<li><a href="../fr491852/index.html">Flask-DJ: Structure Django (mvc) pour un projet sur flask</a></li>
<li><a href="../fr491854/index.html">Téléphones d'entreprise pour chacun des 31 000 employés</a></li>
<li><a href="../fr491856/index.html">LinkedIn pour les étudiants et les diplômés: premières étapes</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>