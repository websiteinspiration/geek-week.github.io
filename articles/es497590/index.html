<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßÄ üßõüèª üéÉ Nos ocupamos del algoritmo de colapso de la funci√≥n de onda üà∂ ‚úçüèª üßëüèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Desde la llegada de DeBroglie y Tessera, muchas veces me han pedido que explique c√≥mo funcionan. Generar puede parecer magia, pero las reglas detr√°s d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Nos ocupamos del algoritmo de colapso de la funci√≥n de onda</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/497590/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/0p/3h/m9/0p3hm9jziz_gbzi9tajbo2p_s3a.jpeg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Desde la llegada de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DeBroglie</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tessera,</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> muchas veces me han pedido que explique c√≥mo funcionan. </font><font style="vertical-align: inherit;">Generar puede parecer magia, pero las reglas detr√°s de esto son realmente simples.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces, ¬øqu√© es el algoritmo de colapso de funci√≥n de onda (WFC)? </font><font style="vertical-align: inherit;">Fue desarrollado por </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Maxim Gumin</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para crear im√°genes "en mosaico" basadas en una configuraci√≥n simple o muestras de im√°genes. </font><font style="vertical-align: inherit;">El algoritmo puede hacer mucho: mira los ejemplos proporcionados por Maxim y Twitter </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">#wavefunctioncollapse</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , mira </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">este video</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">La variedad es asombrosa.</font></font><br>
<br>
<div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Su navegador no admite video HTML5.</font></font><source src="https://www.boristhebrave.com/wp-content/uploads/2020/04/platformer.webm" type="video/webm"></video></div></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maxim en README explic√≥ brevemente el trabajo de WFC, pero me parece que este problema requiere una divulgaci√≥n m√°s detallada, desde lo m√°s b√°sico. Dado que el algoritmo est√° relacionado con la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">programaci√≥n en restricciones</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , la mayor parte del art√≠culo est√° dedicado a </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">explicar el concepto de programaci√≥n en restricciones, y al final volveremos a WFC</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La programaci√≥n restringida es una forma de instruir a las computadoras. A diferencia de la programaci√≥n imperativa, cuando especifica una lista de funciones expl√≠citas, o programaci√≥n funcional, cuando especifica funciones matem√°ticas, aqu√≠ proporciona a la computadora una descripci√≥n estricta del problema, y ‚Äã‚Äãutiliza los algoritmos integrados para encontrar una soluci√≥n. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nota:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Esta gu√≠a describe varios conceptos, no m√©todos y c√≥digo. </font><font style="vertical-align: inherit;">Si est√° m√°s interesado en la implementaci√≥n, puede usar mi biblioteca de c√≥digo abierto WFC ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">documentaci√≥n</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font><font style="vertical-align: inherit;">Aunque es mejor comenzar el estudio con la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">implementaci√≥n de Maxim</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Si usa Unity, puede comprar </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tessera</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , esta es mi herramienta para aplicar WFC en este motor.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mini sudoku</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como tarea ilustrativa, tom√© un mini </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sudoku</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Este es un rompecabezas que parece una cuadr√≠cula de 4 √ó 4 con n√∫meros en algunas celdas.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2d2/079/ce5/2d2079ce585502dbe9329e0a34cfbed8.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El objetivo es llenar cada celda vac√≠a con un n√∫mero del 1 al 4 de acuerdo con las reglas:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cada n√∫mero del 1 al 4 debe estar presente en cada fila en una sola copia.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cada n√∫mero del 1 al 4 debe estar presente en cada columna en una sola copia.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cada n√∫mero del 1 al 4 debe estar presente en cada cuadrado de esquina 2 √ó 2 en una sola copia. </font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De acuerdo con estas reglas, la soluci√≥n ser√° la siguiente:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d9e/ebf/927/d9eebf92740912d10aaaf6e63db189f3.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es posible que haya resuelto f√°cilmente este rompecabezas. </font><font style="vertical-align: inherit;">Pero estamos interesados ‚Äã‚Äãen c√≥mo una computadora puede hacer esto. </font><font style="vertical-align: inherit;">El problema se puede dividir en dos partes: una descripci√≥n de las condiciones para la computadora, y luego una soluci√≥n usando el algoritmo.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Descripci√≥n de condiciones</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por lo general, se usa un lenguaje de programaci√≥n con restricciones para esto. Existen varios lenguajes de este tipo, y sus principios de acci√≥n son similares. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Primero definimos las </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">variables</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Aqu√≠ no son lo mismo que en la programaci√≥n convencional. En el contexto de un solucionador de problemas, una variable es un valor desconocido que debe resolverse para resolver un problema. En nuestro ejemplo de Sudoku, crearemos variables para todas las celdas vac√≠as. Para mayor comodidad, tambi√©n puede crear variables para celdas rellenas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Luego, para cada variable definimos un </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dominio</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : un conjunto de valores posibles. En nuestro sudoku, para cada celda vac√≠a, el dominio ser√° {1, 2, 3, 4}. Y para una celda en la que ya se ingres√≥ 1, el dominio ser√° {1}. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Finalmente, establecemos las </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">restricciones</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: reglas que vinculan nuestras variables. </font><font style="vertical-align: inherit;">En la mayor√≠a de los lenguajes de programaci√≥n, ya existe una funci√≥n con restricciones </font></font><code>all_distinct(..)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que necesita pasar valores √∫nicos. </font><font style="vertical-align: inherit;">Por lo tanto, las reglas de Sudoku se pueden traducir en 12 restricciones </font></font><code>all_distinct</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, una para cada fila y columna, as√≠ como para cuadrados de esquina de 2 √ó 2. </font><font style="vertical-align: inherit;">Solo necesitamos un tipo de restricci√≥n para resolver este problema, sin embargo, los solucionadores de problemas para satisfacer las restricciones generalmente vienen con una gran biblioteca de diferentes tipos de restricciones para describir su problema. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nota</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : en la pr√°ctica, los lenguajes de programaci√≥n admiten matrices en restricciones, por lo que hay formas m√°s precisas de formular esta tarea. </font><font style="vertical-align: inherit;">Hay muchos art√≠culos en la red sobre la resoluci√≥n de sudoku.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Algoritmos para resolver problemas de satisfacci√≥n de restricciones</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Existen varias t√©cnicas de soluci√≥n diferentes. </font><font style="vertical-align: inherit;">Pero considerar√© el m√°s simple de ellos para demostrarte el principio de su trabajo. </font><font style="vertical-align: inherit;">Los dominios para cada celda se muestran aqu√≠:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/192/dd5/6d7/192dd56d7c6fad65e9d0ff0cd672b8b8.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todos estos son valores posibles en dominios variables. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora toma la primera limitaci√≥n. </font><font style="vertical-align: inherit;">Requiere que todos los valores en la fila superior sean √∫nicos. </font><font style="vertical-align: inherit;">En una celda, el valor 4 ya est√° inscrito, por lo tanto, en otras celdas de la serie este valor </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">no</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> puede </font><i><font style="vertical-align: inherit;">ser</font></i><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Lo eliminamos de los dominios de estas c√©lulas.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ea5/f37/ab8/ea5f37ab81c6fe4e923999a01d9c5b81.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Repita este proceso con las 12 restricciones. </font><font style="vertical-align: inherit;">Esto se llama </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">propagaci√≥n de restricciones</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , porque la informaci√≥n se distribuye de una variable a otra a trav√©s de restricciones.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c06/08e/1fa/c0608e1fa9d933b28269217ae9678831.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y mira, tenemos variables, en los dominios de los cuales queda un valor. </font><font style="vertical-align: inherit;">Estas </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">deber√≠an</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ser las soluciones correctas para estas variables.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/02e/074/d2c/02e074d2cdcde1220efade75f26d7234.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Parece que podemos obtener a√∫n m√°s beneficios de la distribuci√≥n de restricciones: las nuevas unidades rojas indican que tendremos a√∫n m√°s variables con un solo dominio, y esto tambi√©n contribuir√° a la distribuci√≥n. </font><font style="vertical-align: inherit;">Repita el procedimiento hasta que se resuelva el rompecabezas.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f78/94d/b63/f7894db63f3238fab4cf689941bd9d69.png"></div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Complicamos la tarea</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Desafortunadamente, no todos los acertijos l√≥gicos se pueden resolver tan r√°pido. </font><font style="vertical-align: inherit;">Aqu√≠ hay un gran sudoku, funciona de la misma manera, excepto que ahora tenemos 9 valores diferentes, 9 filas, 9 columnas y 9 cuadrados de 3 √ó 3.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fd2/97d/434/fd297d4345a2593633a88bbf0bf26764.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si intentamos aplicar la t√©cnica anterior, nos quedaremos atascados:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/481/f68/a82/481f68a826b65b43441ddae08821f1ba.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora todas las restricciones son comunes, pero todav√≠a hay variables indefinidas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Una persona decidir√° esto, pero un algoritmo inform√°tico no podr√° hacerlo. Los manuales para personas dicen que ahora necesitamos buscar conclusiones l√≥gicas cada vez m√°s complicadas. Pero no necesitamos un algoritmo inform√°tico para hacer esto, porque es dif√≠cil, pero necesitamos un </font><font style="vertical-align: inherit;">algoritmo </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">universal</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> que pueda funcionar con cualquier conjunto de restricciones, y no solo de acuerdo con las reglas de sudoku. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por lo tanto, las computadoras hacen lo m√°s est√∫pido: </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">asumen</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Primero, registramos el estado actual del rompecabezas. Luego seleccionamos una variable arbitraria y la configuramos en uno de los valores posibles. Digamos que asignamos el valor 1 a la celda central.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora podemos extender las restricciones un poco m√°s. </font><font style="vertical-align: inherit;">Esto es lo que obtuve para la columna central:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f8b/176/f83/f8b176f83864aad8a4907714b7d0b790.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los valores azules son las conclusiones que hicimos despu√©s de la suposici√≥n. </font><font style="vertical-align: inherit;">Como puede ver, sucedi√≥ algo. </font><font style="vertical-align: inherit;">Anotamos algunas variables m√°s, pero echemos un vistazo a la celda superior media. </font><font style="vertical-align: inherit;">Est√° vac√≠o: </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en su dominio no hay valores posibles que</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> satisfagan las restricciones (no puede haber 5, porque este valor ya existe en el mismo cuadrado de 3 √ó 3, y todos los dem√°s n√∫meros ya est√°n en esta columna). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si obtenemos una variable con un dominio vac√≠o, esto significa que no podemos asignarle ning√∫n valor. </font><font style="vertical-align: inherit;">Es decir, el rompecabezas no se puede resolver. </font><font style="vertical-align: inherit;">Resulta que </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nuestra suposici√≥n era err√≥nea</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ante tal contradicci√≥n, realizamos el proceso de </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">b√∫squeda de retorno</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(retroceso). Primero, restauramos el estado anterior a nuestra suposici√≥n. Luego eliminamos del dominio el valor que usamos como suposici√≥n: ya no puede ser la respuesta correcta.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b1f/6b5/684/b1f6b5684064aab0ed2c355774b3d7aa.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se ha hecho mucho trabajo, pero han avanzado. Sin embargo, incluso despu√©s de la exclusi√≥n de 1 de la celda central, todav√≠a estamos en un punto muerto. Es hora de hacer una suposici√≥n una y otra vez. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No hay muchas acciones algor√≠tmicas aqu√≠. Cada vez que no podemos distribuir restricciones, hacemos una suposici√≥n y seguimos adelante. Y dado que puede quedar atrapado varias veces antes de encontrar una contradicci√≥n, acumular√° varios estados y suposiciones guardados. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Con cada iteraci√≥n con un retorno, reduce el dominio en al menos una variable, de modo que, a pesar de las numerosas reversiones, el algoritmo </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">finalmente</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> completar√° el trabajo.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este tema es mucho m√°s extenso de lo que describo. </font><font style="vertical-align: inherit;">En la pr√°ctica, las optimizaciones como la elecci√≥n de supuestos, la comprensi√≥n de cu√°ndo distribuir y cu√°ndo sacar conclusiones l√≥gicas m√°s complejas pueden tener un gran impacto en la ejecuci√≥n del programa. </font><font style="vertical-align: inherit;">Y dado que los problemas con restricciones, como regla, crecen exponencialmente, puede obtener una respuesta ma√±ana o despu√©s de 5000 a√±os.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Volvemos al colapso de la funci√≥n de onda.</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El colapso de la funci√≥n de onda es una tarea dif√≠cil con una limitaci√≥n: hay miles de posibles soluciones. Si hacemos suposiciones al azar, entonces en lugar de un </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">solucionador,</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> obtenemos un </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">generador</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Al mismo tiempo, seguir√° cumpliendo con todas las restricciones dadas, es decir, ser√° mucho m√°s manejable que la mayor√≠a de los otros generadores de procedimientos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La tarea del algoritmo WFC es llenar celdas con mosaicos para que las im√°genes en los mosaicos se combinen entre s√≠. Dentro de la terminolog√≠a utilizada anteriormente, cada mosaico es un valor, cada celda es una variable y las reglas para colocar mosaicos son restricciones.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maxim, el autor de WFC, descubri√≥ que con una selecci√≥n razonable de mosaicos y una aleatorizaci√≥n adecuada, rara vez tiene que usar el seguimiento, por lo que este procedimiento no se puede implementar. </font><font style="vertical-align: inherit;">Por lo tanto, la esencia de WFC es la siguiente:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Se crea una matriz booleana para cada celda, que representa el dominio de esta variable. </font><font style="vertical-align: inherit;">Los dominios contienen un registro por mosaico, y todos ellos se inicializan con un valor </font></font><code>true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Un mosaico ingresa a un dominio si su valor es igual </font></font><code>true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Al mismo tiempo, hay celdas en las que los dominios contienen varios elementos:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Selecci√≥n de una celda aleatoria utilizando el m√©todo heur√≠stico de "menos entrop√≠a".</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Seleccione un mosaico aleatorio del dominio de celda y elimine todos los dem√°s mosaicos de all√≠.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La actualizaci√≥n de los dominios de otras c√©lulas en funci√≥n de esta nueva informaci√≥n es la propagaci√≥n de la restricci√≥n celular. </font><font style="vertical-align: inherit;">Esto debe hacerse repetidamente, ya que los cambios en las c√©lulas pueden tener m√°s consecuencias.</font></font></li>
</ul></li>
</ul><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nota</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : mis t√©rminos son diferentes de los t√©rminos de Maxim. </font><font style="vertical-align: inherit;">√âl llama a la matriz de dominios una ola, y elegir un mosaico aleatorio es una observaci√≥n. </font><font style="vertical-align: inherit;">Es decir, se dibuja una analog√≠a con la mec√°nica cu√°ntica. </font><font style="vertical-align: inherit;">Pero la comparaci√≥n es superficial, por lo que la ignoraremos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hay muchas adiciones a los principios anteriores que agregan gracia y rendimiento al algoritmo. </font><font style="vertical-align: inherit;">Pero primero veamos los pasos descritos.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ejemplo</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Digamos que necesitamos llenar una cuadr√≠cula de 3 por 3 con cuatro tipos de mosaicos:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/749/647/d6b/749647d6ba27126a9e7769a479cd79a5.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Las limitaciones son: los colores de las fichas adyacentes deben coincidir entre s√≠. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como en el ejemplo de Sudoku, ilustrar√© el contenido de dominios con im√°genes monocromas. </font><font style="vertical-align: inherit;">Cuando solo quede un elemento en el dominio, lo aumentar√© de tama√±o y lo mostrar√© en color. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Primero, en cada celda, se pueden ubicar mosaicos de cualquier tipo:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/780/406/ba9/780406ba92fd3d6cd89234b1aa2b8431.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ejecute el bucle principal de WFC. </font><font style="vertical-align: inherit;">Seleccione aleatoriamente una celda, por ejemplo, la esquina superior izquierda. </font><font style="vertical-align: inherit;">Ahora seleccione un mosaico en el dominio y elimine todos los dem√°s.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c6b/053/8a4/c6b0538a47c9355d22fe75fada7252cc.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Distribuir las restricciones. </font><font style="vertical-align: inherit;">La √∫nica regla se aplica a los mosaicos adyacentes, por lo que debemos actualizar dos celdas:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/90e/a7f/440/90ea7f440d0b3805b324a4bbaef6a7e3.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øPodemos actualizar otros mosaicos dados los dominios reducidos? </font><font style="vertical-align: inherit;">¬°Si! </font><font style="vertical-align: inherit;">Aunque no estamos seguros acerca de la elecci√≥n del primer mosaico, vemos que las opciones restantes conducen a la derecha. </font><font style="vertical-align: inherit;">Es decir, algunos tipos de mosaicos no se pueden colocar en la esquina superior derecha. </font><font style="vertical-align: inherit;">Lo mismo con la esquina inferior izquierda.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4dc/4f3/d07/4dc4f3d070fe3268639e9fc3e2877661.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ya no podemos distribuir las restricciones, por lo que repetimos el ciclo principal: selecci√≥n de celdas, selecci√≥n de mosaicos y distribuci√≥n. </font><font style="vertical-align: inherit;">Esta vez tomamos la celda media superior:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b58/44c/01a/b5844c01a98770f203587dd46d02a3df.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Otro ciclo: tome la celda media izquierda. </font><font style="vertical-align: inherit;">Despu√©s de la proliferaci√≥n de restricciones para la c√©lula central, queda un valor posible.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/066/f76/a13/066f76a13cda6b5e275a371b3561c02a.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En general, entiendes la idea. </font><font style="vertical-align: inherit;">Puede completar el resto de las celdas usted mismo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si desea experimentar con un </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ejemplo interactivo m√°s complejo</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , le recomiendo </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">este</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La entrop√≠a m√°s peque√±a</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al elegir la siguiente celda para completar, algunas opciones ser√°n preferibles. </font><font style="vertical-align: inherit;">Si elige al azar desde cualquier lugar de la cuadr√≠cula, puede surgir una situaci√≥n en la que al mismo tiempo tendr√° diferentes √°reas de la cuadr√≠cula llena. </font><font style="vertical-align: inherit;">Esto puede generar problemas: dependiendo de los mosaicos disponibles, las √°reas rellenas no se pueden unir. </font><font style="vertical-align: inherit;">Por lo tanto, es mejor elegir celdas que tengan menos probabilidades de provocar tales problemas en el futuro. </font><font style="vertical-align: inherit;">En otras palabras, debe tomar celdas con el menor n√∫mero de valores posibles en el dominio (pero no menos de dos valores):</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lo m√°s probable es que est√©n al lado de las celdas ya llenas.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si los dejamos para el futuro, pueden surgir dificultades, porque los valores disponibles ya son pocos.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El enfoque de dominio m√°s peque√±o funciona bien si todos los mosaicos son igualmente probables. </font><font style="vertical-align: inherit;">Pero si elige entre una </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">distribuci√≥n aleatoria ponderada</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , entonces debe considerar otra cosa. </font><font style="vertical-align: inherit;">Maxima recomienda "entrop√≠a m√≠nima", es decir, elija una celda que minimice:</font></font><br>
<br>
<p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>e</mi><mi>n</mi><mi>t</mi><mi>r</mi><mi>o</mi><mi>p</mi><mi>y</mi><mo>=</mo><mo>&amp;#x2014;</mo><mo>&amp;#x2211;</mo><msub><mi>p</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>i</mi></mrow></msub><mi>l</mi><mi>o</mi><mi>g</mi><mo stretchy=&quot;false&quot;>(</mo><msub><mi>p</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>i</mi></mrow></msub><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="25.41ex" height="3.634ex" viewBox="0 -1024.6 10940.2 1564.8" role="img" focusable="false" style="vertical-align: -1.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/mailru/blog/497590/&amp;usg=ALkJrhhx-2QNmNSX-hqyyKKS5EMEiTANUQ#MJMATHI-65" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/mailru/blog/497590/&amp;usg=ALkJrhhx-2QNmNSX-hqyyKKS5EMEiTANUQ#MJMATHI-6E" x="466" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/mailru/blog/497590/&amp;usg=ALkJrhhx-2QNmNSX-hqyyKKS5EMEiTANUQ#MJMATHI-74" x="1067" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/mailru/blog/497590/&amp;usg=ALkJrhhx-2QNmNSX-hqyyKKS5EMEiTANUQ#MJMATHI-72" x="1428" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/mailru/blog/497590/&amp;usg=ALkJrhhx-2QNmNSX-hqyyKKS5EMEiTANUQ#MJMATHI-6F" x="1880" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/mailru/blog/497590/&amp;usg=ALkJrhhx-2QNmNSX-hqyyKKS5EMEiTANUQ#MJMATHI-70" x="2365" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/mailru/blog/497590/&amp;usg=ALkJrhhx-2QNmNSX-hqyyKKS5EMEiTANUQ#MJMATHI-79" x="2869" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/mailru/blog/497590/&amp;usg=ALkJrhhx-2QNmNSX-hqyyKKS5EMEiTANUQ#MJMAIN-3D" x="3644" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/mailru/blog/497590/&amp;usg=ALkJrhhx-2QNmNSX-hqyyKKS5EMEiTANUQ#MJMAIN-2014" x="4422" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/mailru/blog/497590/&amp;usg=ALkJrhhx-2QNmNSX-hqyyKKS5EMEiTANUQ#MJSZ2-2211" x="5589" y="0"></use><g transform="translate(7201,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/mailru/blog/497590/&amp;usg=ALkJrhhx-2QNmNSX-hqyyKKS5EMEiTANUQ#MJMATHI-70" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/mailru/blog/497590/&amp;usg=ALkJrhhx-2QNmNSX-hqyyKKS5EMEiTANUQ#MJMATHI-69" x="712" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/mailru/blog/497590/&amp;usg=ALkJrhhx-2QNmNSX-hqyyKKS5EMEiTANUQ#MJMATHI-6C" x="8048" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/mailru/blog/497590/&amp;usg=ALkJrhhx-2QNmNSX-hqyyKKS5EMEiTANUQ#MJMATHI-6F" x="8347" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/mailru/blog/497590/&amp;usg=ALkJrhhx-2QNmNSX-hqyyKKS5EMEiTANUQ#MJMATHI-67" x="8832" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/mailru/blog/497590/&amp;usg=ALkJrhhx-2QNmNSX-hqyyKKS5EMEiTANUQ#MJMAIN-28" x="9313" y="0"></use><g transform="translate(9702,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/mailru/blog/497590/&amp;usg=ALkJrhhx-2QNmNSX-hqyyKKS5EMEiTANUQ#MJMATHI-70" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/mailru/blog/497590/&amp;usg=ALkJrhhx-2QNmNSX-hqyyKKS5EMEiTANUQ#MJMATHI-69" x="712" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/mailru/blog/497590/&amp;usg=ALkJrhhx-2QNmNSX-hqyyKKS5EMEiTANUQ#MJMAIN-29" x="10550" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>e</mi><mi>n</mi><mi>t</mi><mi>r</mi><mi>o</mi><mi>p</mi><mi>y</mi><mo>=</mo><mo>‚Äî</mo><mo>‚àë</mo><msub><mi>p</mi><mrow class="MJX-TeXAtom-ORD"><mi>i</mi></mrow></msub><mi>l</mi><mi>o</mi><mi>g</mi><mo stretchy="false">(</mo><msub><mi>p</mi><mrow class="MJX-TeXAtom-ORD"><mi>i</mi></mrow></msub><mo stretchy="false">)</mo></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-1">entropy = ‚Äî \sum p_{i}log(p_{i})</script></p><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esta es una suma de mosaicos en el dominio donde </font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>p</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>i</mi></mrow></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.059ex" height="1.884ex" viewBox="-38.5 -540.2 886.3 811.3" role="img" focusable="false" style="vertical-align: -0.63ex; margin-left: -0.089ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/mailru/blog/497590/&amp;usg=ALkJrhhx-2QNmNSX-hqyyKKS5EMEiTANUQ#MJMATHI-70" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/company/mailru/blog/497590/&amp;usg=ALkJrhhx-2QNmNSX-hqyyKKS5EMEiTANUQ#MJMATHI-69" x="712" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>p</mi><mrow class="MJX-TeXAtom-ORD"><mi>i</mi></mrow></msub></math></span></span><script type="math/tex" id="MathJax-Element-2">p_{i}</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - probabilidad de esta ficha.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Computaci√≥n eficiente</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aunque no quiero entrar en detalles, sin embargo, hay dos optimizaciones que me permiten aumentar la velocidad tanto que no se pueden ignorar. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como nuestra √∫nica regla est√° relacionada con los mosaicos adyacentes, solo podemos verificar aquellas restricciones que pueden dar resultados que difieren de los anteriores. Es decir, al actualizar una celda, la agregamos a la cola de celdas en espera de una decisi√≥n. Luego eliminamos una celda de la cola, comprobando cada vez sus celdas adyacentes. Si dichos controles conducen a la renovaci√≥n de otras celdas, tambi√©n entran en la cola. Repitiendo este procedimiento hasta que la cola est√© vac√≠a, nos aseguramos de verificar todas las restricciones. Pero no los verificamos hasta que cambie el dominio de al menos una celda asociada con estas restricciones.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adem√°s, para verificar la restricci√≥n de adyacencia, debemos responder la pregunta: "Dadas las fichas en el dominio de la celda A, ¬øqu√© fichas son posibles en el dominio de la celda B si las celdas son adyacentes?" </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A veces, esta pregunta se llama el "soporte" de la celda A. Para un mosaico dado "b" en el dominio B, es f√°cil calcular los ciclos para los mosaicos en el dominio A. Si A tiene al menos un mosaico que se puede colocar al lado de "b", entonces "b" sigue siendo adecuado, al menos para el par de fichas en cuesti√≥n. Si en A no existe ese mosaico, entonces no puede colocar el mosaico "b" del dominio B, y podemos descartarlo.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los bucles facilitan la implementaci√≥n de esto en el c√≥digo, pero funcionar√°n extremadamente lentamente. </font><font style="vertical-align: inherit;">Y si almacenamos informaci√≥n en una estructura de datos adicional, podemos responder r√°pidamente la pregunta seg√∫n sea necesario. </font><font style="vertical-align: inherit;">Los nuevos datos son una gran matriz con entradas para cada lado de cada celda y cada mosaico. </font><font style="vertical-align: inherit;">En nuestro ejemplo, hay 9 celdas, cada una con 4 lados y 4 tipos de mosaicos. </font><font style="vertical-align: inherit;">Entonces necesitamos 9 * 4 * 4 registros. </font><font style="vertical-align: inherit;">Guardaremos contadores de soporte en la matriz: para cada celda / mosaico / lado, contamos el n√∫mero de mosaicos en el dominio de celda adyacente que se puede colocar al lado del mosaico en cuesti√≥n. </font><font style="vertical-align: inherit;">Si el contador cae a cero, entonces esta ficha no se puede poner, porque nadie puede estar adyacente a ella.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Extensiones de Algoritmo</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Debido a que WFC se basa en una comprensi√≥n m√°s general de los problemas restringidos, hay muchas formas de extender el algoritmo cambiando las restricciones utilizadas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Uno de los cambios obvios es que nadie nos obliga a usar celdas cuadradas. WFC funciona muy bien en </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">celdas hexagonales, en tres dimensiones</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> o incluso en </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">superficies</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> m√°s </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">inusuales</font></a><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/98f/35a/0b9/98f35a0b9ccd9fd4fce689cd7f911d64.png" width="300"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/848/881/d32/848881d3216ac003a312c1fc8cfd56ea.png" width="300"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/497/0d2/706/4970d270636d7203d3e8e1e4bcb4befd.png" width="300"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Puede introducir restricciones adicionales: arreglar ciertos mosaicos o crear "m√≥dulos" a partir de varias celdas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La introducci√≥n de restricciones adicionales puede desempe√±ar un papel muy importante desde un punto de vista pr√°ctico. </font><font style="vertical-align: inherit;">Dado que WFC limita solo los mosaicos adyacentes, rara vez genera grandes estructuras que proporcionan un alto nivel de homogeneidad y se ven inusuales. </font><font style="vertical-align: inherit;">Este algoritmo funciona mejor al elegir mosaicos, pero para trabajar con algunas estructuras grandes, es mejor usar una t√©cnica diferente o introducir otras restricciones. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">otro art√≠culo,</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> habl√© sobre c√≥mo puedes lograr los mejores resultados de WFC.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WFC superpuesto</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Una de las extensiones interesantes para el algoritmo es el WFC "superpuesto". En los ejemplos anteriores, la limitaci√≥n principal estaba relacionada con pares de fichas adyacentes. Esto es suficiente para garantizar la conexi√≥n de l√≠neas y crear estructuras simples como cuevas, habitaciones, etc. Pero al mismo tiempo se pierde mucha informaci√≥n. Si necesitamos, digamos, que los mosaicos rojos siempre se encuentran junto al azul, pero nunca fueron adyacentes a ellos, entonces esto ser√° dif√≠cil de expresar solo en t√©rminos de contig√ºidad. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maxim propuso el concepto de WFC superpuesto: reemplazamos la restricci√≥n de adyacencia con una nueva restricci√≥n que afecta a varios mosaicos a la vez. Por ejemplo, para que en la salida cada grupo de celdas 3 √ó 3 corresponda a un grupo 3 √ó 3 de una muestra de cuadr√≠cula. Los patrones presentes en la muestra se repetir√°n una y otra vez en diferentes variaciones en la salida:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/42d/72b/b76/42d72bb7631b24f33858756ade67fa55.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esta restricci√≥n es mucho m√°s sensible que las restricciones de adyacencia "simples". </font><font style="vertical-align: inherit;">Y dado que depende de una muestra dada, es muy adecuado para resolver alg√∫n tipo de tareas art√≠sticas. </font><font style="vertical-align: inherit;">Hasta ahora, no he encontrado nada tan interesante. </font><font style="vertical-align: inherit;">Quiz√°s la raz√≥n es que dicho algoritmo es m√°s dif√≠cil de implementar, o funciona m√°s lentamente, o a veces reproduce la muestra original demasiado bien, lo que hace que se pierda alg√∫n tipo de naturalidad y naturalidad.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬øQue sigue?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Resolver problemas con restricciones es un campo grande y de desarrollo activo de la inform√°tica, y solo lo mencion√©. </font><font style="vertical-align: inherit;">WFC, al igual que cualquier otro algoritmo de generaci√≥n de procedimientos para resolver problemas restringidos, todav√≠a es nuevo. </font><font style="vertical-align: inherit;">Recomiendo leer </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">r / proceduralgeneration</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">#wavefunctioncollapse</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@exutumno</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@osksta</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para tener una idea de los casos de uso recientes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tambi√©n puede leer mi </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">art√≠culo sobre WFC</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , experimentar con mi </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">biblioteca de c√≥digo abierto</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">herramienta Unity</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">No te olvides de mis otros art√≠culos sobre </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">generaci√≥n de procedimientos</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es497578/index.html">AMD se compromete a ganar una parte importante del mercado de centros de datos.</a></li>
<li><a href="../es497580/index.html">Cuarentena dura es muy muy mala</a></li>
<li><a href="../es497582/index.html">Habr ocupa el primer lugar en el ranking de derechos digitales de los usuarios</a></li>
<li><a href="../es497584/index.html">Auto cuantificado: c√≥mo Madrobots trajo las b√°sculas inteligentes Picooc a Rusia</a></li>
<li><a href="../es497588/index.html">Spring Security: un ejemplo de aplicaci√≥n web de autorizaci√≥n OAuth2 a trav√©s de BitBucket</a></li>
<li><a href="../es497594/index.html">Almacenamiento externo de datos: desde la √©poca de IBM 1311 hasta la actualidad. Parte 1</a></li>
<li><a href="../es497596/index.html">Larga vida a PHP</a></li>
<li><a href="../es497602/index.html">¬øTe consideras un firmante? A quien estas bromeando</a></li>
<li><a href="../es497606/index.html">Sistema de riego autom√°tico de jardines para Home Assistant, ESP8266 y MiFlora</a></li>
<li><a href="../es497608/index.html">C√≥mo los sistemas de an√°lisis de tr√°fico detectan t√°cticas de piratas inform√°ticos por MITER ATT & CK, Parte 5</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>