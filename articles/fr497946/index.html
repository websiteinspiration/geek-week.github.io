<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèº‚Äçüîß üë©‚Äç‚öïÔ∏è üë©üèΩ‚ÄçüöÄ Y avait-il une vie avant un CD audio? D√©codeur logiciel PCM üòá üë©üèæ‚Äçüé§ ‚úàÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans le dernier article, nous avons parl√© des codes QR dynamiques qui ont √©t√© enregistr√©s sur des cassettes VHS. L'√©pid√©mie de PCM m'a √©galement attra...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Y avait-il une vie avant un CD audio? D√©codeur logiciel PCM</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/497946/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans le </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dernier article,</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nous avons parl√© des codes QR dynamiques qui ont √©t√© enregistr√©s sur des cassettes VHS. </font><font style="vertical-align: inherit;">L'√©pid√©mie de PCM m'a √©galement attrap√©, il est donc temps de choisir ce format.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/5q/yw/xq/5qywxqy8gm11ivsraheotf1t5lq.png" alt="Capture avec un processeur PCM"><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans un premier temps, nous allons essayer d'impl√©menter un d√©codeur logiciel. Ce n'est pas le dernier article sur ce sujet, car aux ench√®res japonaises, les processeurs peuvent se terminer et PCM devrait √™tre dans chaque maison! </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Trouver un lecteur vid√©o n'est pas un probl√®me.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Pour travailler, vous avez besoin d'un fichier avec l'enregistrement de ces m√™mes QR codes. Vous pouvez l'obtenir en utilisant la carte de capture vid√©o. Eh bien, la source du signal, bien s√ªr. Vous pouvez capturer directement la sortie du processeur ou enregistrer sur un magn√©tophone. Id√©alement, travaillez imm√©diatement avec le p√©riph√©rique de capture pour d√©coder le signal en temps r√©el.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
N'importe quelle langue fera l'affaire. J'ai commenc√© avec Python. Mais cela s'est av√©r√© plut√¥t lent sur mon ordinateur portable, donc je suis pass√© au C ++. Soit dit en passant, ind√©pendamment les uns des autres (presque) notre petite communaut√© d√©veloppe 3 projets de d√©codeur: sur OpenCV (C ++), sur Qt (C ++) et sur LabView. Le premier sera discut√©. OpenCV a √©t√© choisi en raison de la simplicit√© de travailler avec des appareils de capture et des vid√©os pr√©enregistr√©es. De plus, toutes les manipulations avec l'image y sont hautement optimis√©es. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le premier probl√®me que vous rencontrerez est la perte de donn√©es. En tout √©tat de cause, ils seront et ne pourront √™tre √©vit√©s en aucune mani√®re sans un √©quipement ¬´sp√©cialis√©¬ª. PCM utilise plus de lignes que ne le permet la zone visible du cadre. Dans le cas de la r√©gion NTSC, ce nombre est de 492 lignes par image avec une zone visible de 480. Dans le cas de PAL, tout est beaucoup plus triste.</font></font><br>
<blockquote>  1. PCM    NTSC    44,056 kHz,   PAL   44,1 kHz.</blockquote> <blockquote>  2.           VHS   .       (   ).      ,      . ,            .  ,        .  .</blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Il y a deux solutions pour ce probl√®me. Travaillez avec la carte de capture d'une mani√®re d√©licate en contournant le pilote et prenez les donn√©es de l'ADC, apr√®s quoi elles peuvent √™tre converties en une trame PCM compl√®te, ou marteler sur les lignes manquantes. La deuxi√®me option semble un peu sauvage, mais le format de stockage des donn√©es vous permet de r√©cup√©rer une partie des donn√©es. Dans le cas de la r√©gion NTSC, il s'av√®re r√©pondre aux limites du syst√®me de correction d'erreur. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En raison de l'utilisation de lignes de service, vous ne pouvez pas prendre une carte vid√©o avec une sortie composite et faire jouer le processeur PCM. Iron ignorera tout le cadre s'il ne trouve pas le titre dans une ligne sp√©cifique. Il y a quelques r√©flexions √† ce sujet, mais √† ce sujet plus tard.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour commencer, le signal vid√©o est entrelac√©. Chaque trame contient pour ainsi dire deux, compos√©es de lignes paires et impaires. Ils sont appel√©s champs. C'est avec les champs que fonctionne le processeur PCM. Par cons√©quent, nous devons √©galement diviser le flux d'origine. Juste avant cela, il serait int√©ressant de convertir une image en noir et blanc (nuances de gris) en binaire afin de faciliter le travail. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√Ä ce stade, nous rencontrons trois difficult√©s associ√©es aux fonctionnalit√©s des appareils de capture vid√©o. Vous ne pouvez pas utiliser un seuil statique pour binariser une image. Mais OpenCV lui-m√™me r√©sout ce probl√®me, avec l'aide duquel nous obtenons un r√©sultat assez d√©cent avec une ligne magique.</font></font><br>
<br>
<pre><code class="cpp hljs">threshold(greyFrame, fullFrame, <span class="hljs-number">0</span>, <span class="hljs-number">255</span>, THRESH_BINARY + THRESH_OTSU);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le deuxi√®me probl√®me est, tout √† coup, la couleur. Les processeurs PCM n'utilisent pas la composante couleur du signal vid√©o, mais les cartes de capture peuvent essayer de l'extraire du bruit. Cela est particuli√®rement visible sur l'EasyCAP le moins cher. Cela peut g√¢cher un peu le r√©sultat de la binarisation, vous devez donc d'abord convertir l'image en nuances de gris.</font></font><br>
<br>
<pre><code class="cpp hljs">cvtColor(srcFrame, greyFrame, CV_BGR2GRAY);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En plus de ce qui pr√©c√®de, EasyCAP parvient √† confondre les champs par endroits. Plus pr√©cis√©ment, il saute la premi√®re ligne, car toutes les autres lignes ne sont pas en place. Pour enregistrer une matin√©e de maternelle, ce n'est pas tr√®s important, mais ici √ßa devient d√©j√† un probl√®me. Organiser les lignes dans le bon ordre est assez simple. √Ä la fin de chaque trame, il y a une zone sans donn√©es. Si nous d√©pla√ßons les lignes contenant le signal utile vers le bas, alors les champs sont garantis de revenir √† leur place. Lors de mes √©tudes, j'ai essay√© d'utiliser trois appareils de capture de diff√©rentes gammes de prix, mais le plus utile s'est finalement av√©r√© √™tre le moins cher, car cela a r√©v√©l√© un certain nombre de probl√®mes. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/yy/rg/rg/yyrgrgxhp3qrb1lho4kpmor3hti.png" alt="Capture EasyCAP √† partir d'une cassette vid√©o"><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Des taches de couleur et un niveau plus √©lev√© de luminosit√© des bits de donn√©es peuvent √™tre observ√©s dans l'image par rapport √† la premi√®re illustration d'un article captur√© sur le Magewell Pro Capture AIO.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il est temps de se rappeler sur quoi le signal est stock√©. Les magn√©tophones VHS ne diff√®rent pas par leur qualit√© sp√©ciale, car il s'agit d'un format domestique. Les impulsions de synchronisation de trame et de ligne seules ne suffisent pas pour un fonctionnement stable. Par cons√©quent, des marques de synchronisation suppl√©mentaires sont ajout√©es au signal vid√©o. Dans chaque ligne au d√©but, il y a une s√©quence d'alternance de deux ¬´pixels¬ª blancs et deux noirs, et √† la fin de la ligne il y a une petite zone avec une luminosit√© maximale, qui ajuste l'AGC. Les bits de donn√©es eux-m√™mes ont une luminosit√© de 60% du maximum pour 1 et de moins de 20% pour 0. Voici un exemple de la raison pour laquelle ces √©tiquettes sont n√©cessaires: inversion de l'image des cassettes au d√©but et √† la fin de la trame. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/en/nb/fe/ennbfefb-kuattynm437n8a7lh8.png" alt="Torsions au d√©but du cadre"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selon les marques de synchronisation, dans chaque ligne il y a une zone de donn√©es. Ensuite, vous devez d√©terminer la largeur de bits (seulement 128 bits par ligne) et r√©duire la ligne d'image √† 16 octets.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Examinons de plus pr√®s le format des donn√©es. La ligne se compose de 8 blocs de 14 bits chacun, contenant des valeurs pour la sortie vers le DAC (√©chantillons) et des codes de correction d'erreur, et un bloc avec une somme de contr√¥le (CRC-16 / CCITT-FALSE). Par des sommes de contr√¥le, les lignes abandonn√©es sont d√©termin√©es, les donn√©es dans lesquelles l'appareil tentera de r√©cup√©rer. Chaque ligne contient trois √©chantillons pour les canaux gauche et droit, un bloc de parit√© P (xor de tous les √©chantillons) et un myst√©rieux Q. L'ordre est le suivant: L0, R0, L1, R1, L2, R2, P, Q.Aujourd'hui, la correction Q n'est pas possible nous le ferons, car ce mat√©riel n'est pas encore enti√®rement compris et la mise en ≈ìuvre n√©cessite un d√©bogage.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/u_/eq/sz/u_eqsz0ffb6x1qckzle0q9c99aw.png" alt="Ordre des donn√©es en lignes"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous utilisez "tel quel", une ligne discontinue signifie la perte de trois √©chantillons √† la fois, ce qui sera visible √† l'oreille sur un anneau m√©tallique. Mais dida √©tait plus intelligent et a d√©cid√© d'enregistrer des donn√©es avec des √©chelles. Un seul bloc est pris sur une ligne. La suivante est prise avec un l√©ger d√©calage. La marche de l'escalier prend 16 lignes. Le bloc L0 provient d'une ligne. Bloc R0 avec ligne 17 ... Ainsi, en utilisant le bloc de parit√©, vous pouvez r√©cup√©rer les donn√©es de 16 lignes perdues d'affil√©e. Mais seulement s'il y a une erreur √† l'int√©rieur de l'√©chelle. Le bloc Q vous permet de corriger deux erreurs, ce qui restaure jusqu'√† 32 lignes perdues.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/fs/4g/ok/fs4goklri5veci8g_38cx2sawce.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Prenons un exemple simple. Il y a un fragment d'une trame PCM dans laquelle plusieurs lignes sont interrompues (surlign√©es en rouge). Les 4 premi√®res √©chelles sont trait√©es normalement. Le cinqui√®me capturera la ligne bris√©e. Le bloc Q est d'abord perdu, mais puisqu'il sert √† corriger les erreurs et que les √©chantillons eux-m√™mes ne sont pas endommag√©s, vous pouvez aller plus loin. Avec la sixi√®me √©chelle, nous faisons de m√™me. L√† encore, il y a des √©chelles intactes jusqu'√† 21. Le bloc P en souffre. Il sert √©galement √† restaurer les donn√©es. Vous pouvez sauter. Nous allons donc √† 37 escaliers, o√π l'√©chantillon du canal droit sera endommag√©. Pour le restaurer, vous devez effectuer XOR pour le bloc de parit√© et tous les autres √©chantillons:</font></font><br>
<p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>R</mi><mn>2</mn><mo>=</mo><mi>L</mi><mn>0</mn><mo>&amp;#x2295;</mo><mi>R</mi><mn>0</mn><mo>&amp;#x2295;</mo><mi>L</mi><mn>1</mn><mo>&amp;#x2295;</mo><mi>R</mi><mn>1</mn><mo>&amp;#x2295;</mo><mi>L</mi><mn>2</mn><mo>&amp;#x2295;</mo><mi>P</mi></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="36.061ex" height="2.134ex" viewBox="0 -755.5 15526.3 918.9" role="img" focusable="false" style="vertical-align: -0.38ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/497946/&amp;usg=ALkJrhhNbUQjcf_43nOwEjEkzVOv31VpyQ#MJMATHI-52" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/497946/&amp;usg=ALkJrhhNbUQjcf_43nOwEjEkzVOv31VpyQ#MJMAIN-32" x="759" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/497946/&amp;usg=ALkJrhhNbUQjcf_43nOwEjEkzVOv31VpyQ#MJMAIN-3D" x="1537" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/497946/&amp;usg=ALkJrhhNbUQjcf_43nOwEjEkzVOv31VpyQ#MJMATHI-4C" x="2594" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/497946/&amp;usg=ALkJrhhNbUQjcf_43nOwEjEkzVOv31VpyQ#MJMAIN-30" x="3275" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/497946/&amp;usg=ALkJrhhNbUQjcf_43nOwEjEkzVOv31VpyQ#MJMAIN-2295" x="3998" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/497946/&amp;usg=ALkJrhhNbUQjcf_43nOwEjEkzVOv31VpyQ#MJMATHI-52" x="4999" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/497946/&amp;usg=ALkJrhhNbUQjcf_43nOwEjEkzVOv31VpyQ#MJMAIN-30" x="5758" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/497946/&amp;usg=ALkJrhhNbUQjcf_43nOwEjEkzVOv31VpyQ#MJMAIN-2295" x="6481" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/497946/&amp;usg=ALkJrhhNbUQjcf_43nOwEjEkzVOv31VpyQ#MJMATHI-4C" x="7481" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/497946/&amp;usg=ALkJrhhNbUQjcf_43nOwEjEkzVOv31VpyQ#MJMAIN-31" x="8163" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/497946/&amp;usg=ALkJrhhNbUQjcf_43nOwEjEkzVOv31VpyQ#MJMAIN-2295" x="8886" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/497946/&amp;usg=ALkJrhhNbUQjcf_43nOwEjEkzVOv31VpyQ#MJMATHI-52" x="9886" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/497946/&amp;usg=ALkJrhhNbUQjcf_43nOwEjEkzVOv31VpyQ#MJMAIN-31" x="10646" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/497946/&amp;usg=ALkJrhhNbUQjcf_43nOwEjEkzVOv31VpyQ#MJMAIN-2295" x="11369" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/497946/&amp;usg=ALkJrhhNbUQjcf_43nOwEjEkzVOv31VpyQ#MJMATHI-4C" x="12369" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/497946/&amp;usg=ALkJrhhNbUQjcf_43nOwEjEkzVOv31VpyQ#MJMAIN-32" x="13051" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/497946/&amp;usg=ALkJrhhNbUQjcf_43nOwEjEkzVOv31VpyQ#MJMAIN-2295" x="13774" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/497946/&amp;usg=ALkJrhhNbUQjcf_43nOwEjEkzVOv31VpyQ#MJMATHI-50" x="14774" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>R</mi><mn>2</mn><mo>=</mo><mi>L</mi><mn>0</mn><mo>‚äï</mo><mi>R</mi><mn>0</mn><mo>‚äï</mo><mi>L</mi><mn>1</mn><mo>‚äï</mo><mi>R</mi><mn>1</mn><mo>‚äï</mo><mi>L</mi><mn>2</mn><mo>‚äï</mo><mi>P</mi></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-1">R2=L0\oplus R0\oplus L1\oplus R1\oplus L2\oplus P</script></p><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En cons√©quence, nous obtenons la valeur initiale. </font><font style="vertical-align: inherit;">S'il y a deux erreurs, une tentative est faite pour restaurer en utilisant le bloc Q. S'il y en a plus, alors il n'y a rien √† faire avec cela sauf pour interpoler les valeurs des √©chantillons battus ou pour les r√©initialiser. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le processus de passage √† travers le champ peut √™tre observ√© sur une petite animation GIF. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/hg/a1/9o/hga19ot290hpakcghkmrw2ycyz8.gif" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et donc nous allons jusqu'√† ce que la derni√®re marche de l'√©chelle repose contre la fin du champ. </font><font style="vertical-align: inherit;">Le PCM mat√©riel a un tampon circulaire. </font><font style="vertical-align: inherit;">D√®s que la ligne a √©t√© trait√©e, elle peut √™tre remplie de nouvelles donn√©es. </font><font style="vertical-align: inherit;">Ainsi, la derni√®re √©tape saute sans interrompre la lecture.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai choisi un principe de travail l√©g√®rement diff√©rent. Maintenant, il n'y a plus une telle limite de m√©moire, donc le tampon a une taille l√©g√®rement plus grande: la hauteur du champ plus la hauteur de l'√©chelle. D√®s que l'√©chelle atteint la fin de la m√©moire tampon, les 111 derni√®res lignes sont transf√©r√©es au d√©but, et le remplissage de nouvelles donn√©es se fait d√©j√† √† partir de 112 lignes. Bien s√ªr, nous ne devons pas oublier que lorsque nous travaillons avec la carte de capture, nous perdons certaines lignes. Par cons√©quent, assurez-vous de remplir les lignes manquantes avec des z√©ros afin de les marquer pour une r√©cup√©ration ult√©rieure par des erreurs CRC. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PCM √©tait √† l'origine 14 bits. Mais au fil du temps, lorsque les enregistreurs vid√©o VHS ont am√©lior√© la qualit√© d'image, les fabricants sont pass√©s √† 16 bits, sans oublier la compatibilit√© descendante.</font></font><br>
<blockquote>  3.   14- PCM   12  .             (    ).</blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans le PCM 16 bits, il n'y a pas de bloc Q du tout, il y a donc une marque sp√©ciale dans le champ intitul√© "La correction Q n'est pas possible". Au lieu de cela, 2 bits d'√©chantillons manquants et P. ont √©t√© collect√©s. Dans ce cas, la hauteur de l'√©chelle n'est pas de 8 marches, mais seulement de 7, car les bits manquants du bloc sont stock√©s sur sa propre ligne, et non s√©par√©ment. Comprendre le fonctionnement d'un PCM 16 bits est assez simple en utilisant l'exemple de la capture d'un m√©andre avec une fr√©quence de 100 Hz et une amplitude maximale. Tout se met imm√©diatement en place. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ck/xr/ex/ckxrexdsdif_1dqeueylnokj-kw.png" alt="Comparaison de PCM 14 bits et 16 bits"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il est maintenant temps d'enregistrer le r√©sultat dans un fichier wav. La biblioth√®que libsndfile vous y aidera. Bien que ... PCM n'enregistre pas les fichiers, mais les lit imm√©diatement. Ici, vous vous souvenez d'une chose aussi cool, comme la pipe. Lorsque la sortie d'un programme est entr√©e dans un autre. Nous sp√©cifions simplement stdout comme destination et redirige le flux vers le programme ffplay.</font></font><br>
<br>
<pre><code class="bash hljs">./ggg -i easycap.avi -o - | ffplay -</code></pre><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous pouvez maintenant profiter des gouttes et continuer √† d√©boguer le code pour vous en d√©barrasser ...</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
C'est tout pour aujourd'hui. </font><font style="vertical-align: inherit;">Vous pouvez t√©l√©charger la source du d√©codeur √† partir de la page sur GitHub: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://github.com/walhi/pcm</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Il y a aussi un g√©n√©rateur. </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un jour, je vais le concevoir comme un plugin pour foobar ...</font></font></s><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Un travail actif est en cours pour terminer la r√©cup√©ration sur le bloc Q, donc pour un travail plus ou moins correct, vous devrez sauter par-dessus les commits. </font><font style="vertical-align: inherit;">Mais ce sont des bagatelles. </font><font style="vertical-align: inherit;">Ceux qui souhaitent jouer peuvent </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">t√©l√©charger l'exemple de</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> capture.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr497932/index.html">Nous √©tudions le moteur VoIP Mediastreamer2. Partie 10</a></li>
<li><a href="../fr497934/index.html">COVID-19: ce qu'ils essaient de traiter, ce qui peut √™tre trait√© et quelques th√©ories du complot</a></li>
<li><a href="../fr497938/index.html">Le r√©veil d'un Sleeping Institute: comment supprimer les marcheurs en python de REAPER</a></li>
<li><a href="../fr497940/index.html">D√©veloppeur Heart: Sega Saturn Devkits</a></li>
<li><a href="../fr497944/index.html">Utilisation de NAT Traversal pour connecter les utilisateurs de mani√®re passive</a></li>
<li><a href="../fr497950/index.html">21 le√ßons apprises en 21 ans de programmation</a></li>
<li><a href="../fr497952/index.html">Abr√©viations anglaises et titres informatiques que nous pronon√ßons mal</a></li>
<li><a href="../fr497956/index.html">Sars miraculeux? G√©n√©alogie du coronavirus de Wuhan</a></li>
<li><a href="../fr497958/index.html">Ils sont parmi nous: explorer les vuln√©rabilit√©s et les codes malveillants dans Zoom pour Windows</a></li>
<li><a href="../fr497960/index.html">Installation r√©seau Linux</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>