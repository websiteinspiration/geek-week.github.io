<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏼‍🔧 👩‍⚕️ 👩🏽‍🚀 Y avait-il une vie avant un CD audio? Décodeur logiciel PCM 😇 👩🏾‍🎤 ✈️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans le dernier article, nous avons parlé des codes QR dynamiques qui ont été enregistrés sur des cassettes VHS. L'épidémie de PCM m'a également attra...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Y avait-il une vie avant un CD audio? Décodeur logiciel PCM</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/497946/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans le </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dernier article,</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nous avons parlé des codes QR dynamiques qui ont été enregistrés sur des cassettes VHS. </font><font style="vertical-align: inherit;">L'épidémie de PCM m'a également attrapé, il est donc temps de choisir ce format.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/5q/yw/xq/5qywxqy8gm11ivsraheotf1t5lq.png" alt="Capture avec un processeur PCM"><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans un premier temps, nous allons essayer d'implémenter un décodeur logiciel. Ce n'est pas le dernier article sur ce sujet, car aux enchères japonaises, les processeurs peuvent se terminer et PCM devrait être dans chaque maison! </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Trouver un lecteur vidéo n'est pas un problème.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Pour travailler, vous avez besoin d'un fichier avec l'enregistrement de ces mêmes QR codes. Vous pouvez l'obtenir en utilisant la carte de capture vidéo. Eh bien, la source du signal, bien sûr. Vous pouvez capturer directement la sortie du processeur ou enregistrer sur un magnétophone. Idéalement, travaillez immédiatement avec le périphérique de capture pour décoder le signal en temps réel.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
N'importe quelle langue fera l'affaire. J'ai commencé avec Python. Mais cela s'est avéré plutôt lent sur mon ordinateur portable, donc je suis passé au C ++. Soit dit en passant, indépendamment les uns des autres (presque) notre petite communauté développe 3 projets de décodeur: sur OpenCV (C ++), sur Qt (C ++) et sur LabView. Le premier sera discuté. OpenCV a été choisi en raison de la simplicité de travailler avec des appareils de capture et des vidéos préenregistrées. De plus, toutes les manipulations avec l'image y sont hautement optimisées. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le premier problème que vous rencontrerez est la perte de données. En tout état de cause, ils seront et ne pourront être évités en aucune manière sans un équipement «spécialisé». PCM utilise plus de lignes que ne le permet la zone visible du cadre. Dans le cas de la région NTSC, ce nombre est de 492 lignes par image avec une zone visible de 480. Dans le cas de PAL, tout est beaucoup plus triste.</font></font><br>
<blockquote>  1. PCM    NTSC    44,056 kHz,   PAL   44,1 kHz.</blockquote> <blockquote>  2.           VHS   .       (   ).      ,      . ,            .  ,        .  .</blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Il y a deux solutions pour ce problème. Travaillez avec la carte de capture d'une manière délicate en contournant le pilote et prenez les données de l'ADC, après quoi elles peuvent être converties en une trame PCM complète, ou marteler sur les lignes manquantes. La deuxième option semble un peu sauvage, mais le format de stockage des données vous permet de récupérer une partie des données. Dans le cas de la région NTSC, il s'avère répondre aux limites du système de correction d'erreur. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En raison de l'utilisation de lignes de service, vous ne pouvez pas prendre une carte vidéo avec une sortie composite et faire jouer le processeur PCM. Iron ignorera tout le cadre s'il ne trouve pas le titre dans une ligne spécifique. Il y a quelques réflexions à ce sujet, mais à ce sujet plus tard.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour commencer, le signal vidéo est entrelacé. Chaque trame contient pour ainsi dire deux, composées de lignes paires et impaires. Ils sont appelés champs. C'est avec les champs que fonctionne le processeur PCM. Par conséquent, nous devons également diviser le flux d'origine. Juste avant cela, il serait intéressant de convertir une image en noir et blanc (nuances de gris) en binaire afin de faciliter le travail. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
À ce stade, nous rencontrons trois difficultés associées aux fonctionnalités des appareils de capture vidéo. Vous ne pouvez pas utiliser un seuil statique pour binariser une image. Mais OpenCV lui-même résout ce problème, avec l'aide duquel nous obtenons un résultat assez décent avec une ligne magique.</font></font><br>
<br>
<pre><code class="cpp hljs">threshold(greyFrame, fullFrame, <span class="hljs-number">0</span>, <span class="hljs-number">255</span>, THRESH_BINARY + THRESH_OTSU);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le deuxième problème est, tout à coup, la couleur. Les processeurs PCM n'utilisent pas la composante couleur du signal vidéo, mais les cartes de capture peuvent essayer de l'extraire du bruit. Cela est particulièrement visible sur l'EasyCAP le moins cher. Cela peut gâcher un peu le résultat de la binarisation, vous devez donc d'abord convertir l'image en nuances de gris.</font></font><br>
<br>
<pre><code class="cpp hljs">cvtColor(srcFrame, greyFrame, CV_BGR2GRAY);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En plus de ce qui précède, EasyCAP parvient à confondre les champs par endroits. Plus précisément, il saute la première ligne, car toutes les autres lignes ne sont pas en place. Pour enregistrer une matinée de maternelle, ce n'est pas très important, mais ici ça devient déjà un problème. Organiser les lignes dans le bon ordre est assez simple. À la fin de chaque trame, il y a une zone sans données. Si nous déplaçons les lignes contenant le signal utile vers le bas, alors les champs sont garantis de revenir à leur place. Lors de mes études, j'ai essayé d'utiliser trois appareils de capture de différentes gammes de prix, mais le plus utile s'est finalement avéré être le moins cher, car cela a révélé un certain nombre de problèmes. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/yy/rg/rg/yyrgrgxhp3qrb1lho4kpmor3hti.png" alt="Capture EasyCAP à partir d'une cassette vidéo"><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Des taches de couleur et un niveau plus élevé de luminosité des bits de données peuvent être observés dans l'image par rapport à la première illustration d'un article capturé sur le Magewell Pro Capture AIO.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il est temps de se rappeler sur quoi le signal est stocké. Les magnétophones VHS ne diffèrent pas par leur qualité spéciale, car il s'agit d'un format domestique. Les impulsions de synchronisation de trame et de ligne seules ne suffisent pas pour un fonctionnement stable. Par conséquent, des marques de synchronisation supplémentaires sont ajoutées au signal vidéo. Dans chaque ligne au début, il y a une séquence d'alternance de deux «pixels» blancs et deux noirs, et à la fin de la ligne il y a une petite zone avec une luminosité maximale, qui ajuste l'AGC. Les bits de données eux-mêmes ont une luminosité de 60% du maximum pour 1 et de moins de 20% pour 0. Voici un exemple de la raison pour laquelle ces étiquettes sont nécessaires: inversion de l'image des cassettes au début et à la fin de la trame. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/en/nb/fe/ennbfefb-kuattynm437n8a7lh8.png" alt="Torsions au début du cadre"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selon les marques de synchronisation, dans chaque ligne il y a une zone de données. Ensuite, vous devez déterminer la largeur de bits (seulement 128 bits par ligne) et réduire la ligne d'image à 16 octets.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Examinons de plus près le format des données. La ligne se compose de 8 blocs de 14 bits chacun, contenant des valeurs pour la sortie vers le DAC (échantillons) et des codes de correction d'erreur, et un bloc avec une somme de contrôle (CRC-16 / CCITT-FALSE). Par des sommes de contrôle, les lignes abandonnées sont déterminées, les données dans lesquelles l'appareil tentera de récupérer. Chaque ligne contient trois échantillons pour les canaux gauche et droit, un bloc de parité P (xor de tous les échantillons) et un mystérieux Q. L'ordre est le suivant: L0, R0, L1, R1, L2, R2, P, Q.Aujourd'hui, la correction Q n'est pas possible nous le ferons, car ce matériel n'est pas encore entièrement compris et la mise en œuvre nécessite un débogage.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/u_/eq/sz/u_eqsz0ffb6x1qckzle0q9c99aw.png" alt="Ordre des données en lignes"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous utilisez "tel quel", une ligne discontinue signifie la perte de trois échantillons à la fois, ce qui sera visible à l'oreille sur un anneau métallique. Mais dida était plus intelligent et a décidé d'enregistrer des données avec des échelles. Un seul bloc est pris sur une ligne. La suivante est prise avec un léger décalage. La marche de l'escalier prend 16 lignes. Le bloc L0 provient d'une ligne. Bloc R0 avec ligne 17 ... Ainsi, en utilisant le bloc de parité, vous pouvez récupérer les données de 16 lignes perdues d'affilée. Mais seulement s'il y a une erreur à l'intérieur de l'échelle. Le bloc Q vous permet de corriger deux erreurs, ce qui restaure jusqu'à 32 lignes perdues.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/fs/4g/ok/fs4goklri5veci8g_38cx2sawce.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Prenons un exemple simple. Il y a un fragment d'une trame PCM dans laquelle plusieurs lignes sont interrompues (surlignées en rouge). Les 4 premières échelles sont traitées normalement. Le cinquième capturera la ligne brisée. Le bloc Q est d'abord perdu, mais puisqu'il sert à corriger les erreurs et que les échantillons eux-mêmes ne sont pas endommagés, vous pouvez aller plus loin. Avec la sixième échelle, nous faisons de même. Là encore, il y a des échelles intactes jusqu'à 21. Le bloc P en souffre. Il sert également à restaurer les données. Vous pouvez sauter. Nous allons donc à 37 escaliers, où l'échantillon du canal droit sera endommagé. Pour le restaurer, vous devez effectuer XOR pour le bloc de parité et tous les autres échantillons:</font></font><br>
<p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>R</mi><mn>2</mn><mo>=</mo><mi>L</mi><mn>0</mn><mo>&amp;#x2295;</mo><mi>R</mi><mn>0</mn><mo>&amp;#x2295;</mo><mi>L</mi><mn>1</mn><mo>&amp;#x2295;</mo><mi>R</mi><mn>1</mn><mo>&amp;#x2295;</mo><mi>L</mi><mn>2</mn><mo>&amp;#x2295;</mo><mi>P</mi></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="36.061ex" height="2.134ex" viewBox="0 -755.5 15526.3 918.9" role="img" focusable="false" style="vertical-align: -0.38ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/497946/&amp;usg=ALkJrhhNbUQjcf_43nOwEjEkzVOv31VpyQ#MJMATHI-52" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/497946/&amp;usg=ALkJrhhNbUQjcf_43nOwEjEkzVOv31VpyQ#MJMAIN-32" x="759" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/497946/&amp;usg=ALkJrhhNbUQjcf_43nOwEjEkzVOv31VpyQ#MJMAIN-3D" x="1537" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/497946/&amp;usg=ALkJrhhNbUQjcf_43nOwEjEkzVOv31VpyQ#MJMATHI-4C" x="2594" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/497946/&amp;usg=ALkJrhhNbUQjcf_43nOwEjEkzVOv31VpyQ#MJMAIN-30" x="3275" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/497946/&amp;usg=ALkJrhhNbUQjcf_43nOwEjEkzVOv31VpyQ#MJMAIN-2295" x="3998" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/497946/&amp;usg=ALkJrhhNbUQjcf_43nOwEjEkzVOv31VpyQ#MJMATHI-52" x="4999" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/497946/&amp;usg=ALkJrhhNbUQjcf_43nOwEjEkzVOv31VpyQ#MJMAIN-30" x="5758" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/497946/&amp;usg=ALkJrhhNbUQjcf_43nOwEjEkzVOv31VpyQ#MJMAIN-2295" x="6481" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/497946/&amp;usg=ALkJrhhNbUQjcf_43nOwEjEkzVOv31VpyQ#MJMATHI-4C" x="7481" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/497946/&amp;usg=ALkJrhhNbUQjcf_43nOwEjEkzVOv31VpyQ#MJMAIN-31" x="8163" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/497946/&amp;usg=ALkJrhhNbUQjcf_43nOwEjEkzVOv31VpyQ#MJMAIN-2295" x="8886" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/497946/&amp;usg=ALkJrhhNbUQjcf_43nOwEjEkzVOv31VpyQ#MJMATHI-52" x="9886" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/497946/&amp;usg=ALkJrhhNbUQjcf_43nOwEjEkzVOv31VpyQ#MJMAIN-31" x="10646" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/497946/&amp;usg=ALkJrhhNbUQjcf_43nOwEjEkzVOv31VpyQ#MJMAIN-2295" x="11369" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/497946/&amp;usg=ALkJrhhNbUQjcf_43nOwEjEkzVOv31VpyQ#MJMATHI-4C" x="12369" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/497946/&amp;usg=ALkJrhhNbUQjcf_43nOwEjEkzVOv31VpyQ#MJMAIN-32" x="13051" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/497946/&amp;usg=ALkJrhhNbUQjcf_43nOwEjEkzVOv31VpyQ#MJMAIN-2295" x="13774" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/497946/&amp;usg=ALkJrhhNbUQjcf_43nOwEjEkzVOv31VpyQ#MJMATHI-50" x="14774" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>R</mi><mn>2</mn><mo>=</mo><mi>L</mi><mn>0</mn><mo>⊕</mo><mi>R</mi><mn>0</mn><mo>⊕</mo><mi>L</mi><mn>1</mn><mo>⊕</mo><mi>R</mi><mn>1</mn><mo>⊕</mo><mi>L</mi><mn>2</mn><mo>⊕</mo><mi>P</mi></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-1">R2=L0\oplus R0\oplus L1\oplus R1\oplus L2\oplus P</script></p><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En conséquence, nous obtenons la valeur initiale. </font><font style="vertical-align: inherit;">S'il y a deux erreurs, une tentative est faite pour restaurer en utilisant le bloc Q. S'il y en a plus, alors il n'y a rien à faire avec cela sauf pour interpoler les valeurs des échantillons battus ou pour les réinitialiser. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le processus de passage à travers le champ peut être observé sur une petite animation GIF. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/hg/a1/9o/hga19ot290hpakcghkmrw2ycyz8.gif" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et donc nous allons jusqu'à ce que la dernière marche de l'échelle repose contre la fin du champ. </font><font style="vertical-align: inherit;">Le PCM matériel a un tampon circulaire. </font><font style="vertical-align: inherit;">Dès que la ligne a été traitée, elle peut être remplie de nouvelles données. </font><font style="vertical-align: inherit;">Ainsi, la dernière étape saute sans interrompre la lecture.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai choisi un principe de travail légèrement différent. Maintenant, il n'y a plus une telle limite de mémoire, donc le tampon a une taille légèrement plus grande: la hauteur du champ plus la hauteur de l'échelle. Dès que l'échelle atteint la fin de la mémoire tampon, les 111 dernières lignes sont transférées au début, et le remplissage de nouvelles données se fait déjà à partir de 112 lignes. Bien sûr, nous ne devons pas oublier que lorsque nous travaillons avec la carte de capture, nous perdons certaines lignes. Par conséquent, assurez-vous de remplir les lignes manquantes avec des zéros afin de les marquer pour une récupération ultérieure par des erreurs CRC. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PCM était à l'origine 14 bits. Mais au fil du temps, lorsque les enregistreurs vidéo VHS ont amélioré la qualité d'image, les fabricants sont passés à 16 bits, sans oublier la compatibilité descendante.</font></font><br>
<blockquote>  3.   14- PCM   12  .             (    ).</blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans le PCM 16 bits, il n'y a pas de bloc Q du tout, il y a donc une marque spéciale dans le champ intitulé "La correction Q n'est pas possible". Au lieu de cela, 2 bits d'échantillons manquants et P. ont été collectés. Dans ce cas, la hauteur de l'échelle n'est pas de 8 marches, mais seulement de 7, car les bits manquants du bloc sont stockés sur sa propre ligne, et non séparément. Comprendre le fonctionnement d'un PCM 16 bits est assez simple en utilisant l'exemple de la capture d'un méandre avec une fréquence de 100 Hz et une amplitude maximale. Tout se met immédiatement en place. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ck/xr/ex/ckxrexdsdif_1dqeueylnokj-kw.png" alt="Comparaison de PCM 14 bits et 16 bits"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il est maintenant temps d'enregistrer le résultat dans un fichier wav. La bibliothèque libsndfile vous y aidera. Bien que ... PCM n'enregistre pas les fichiers, mais les lit immédiatement. Ici, vous vous souvenez d'une chose aussi cool, comme la pipe. Lorsque la sortie d'un programme est entrée dans un autre. Nous spécifions simplement stdout comme destination et redirige le flux vers le programme ffplay.</font></font><br>
<br>
<pre><code class="bash hljs">./ggg -i easycap.avi -o - | ffplay -</code></pre><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous pouvez maintenant profiter des gouttes et continuer à déboguer le code pour vous en débarrasser ...</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
C'est tout pour aujourd'hui. </font><font style="vertical-align: inherit;">Vous pouvez télécharger la source du décodeur à partir de la page sur GitHub: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://github.com/walhi/pcm</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Il y a aussi un générateur. </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un jour, je vais le concevoir comme un plugin pour foobar ...</font></font></s><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Un travail actif est en cours pour terminer la récupération sur le bloc Q, donc pour un travail plus ou moins correct, vous devrez sauter par-dessus les commits. </font><font style="vertical-align: inherit;">Mais ce sont des bagatelles. </font><font style="vertical-align: inherit;">Ceux qui souhaitent jouer peuvent </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">télécharger l'exemple de</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> capture.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr497932/index.html">Nous étudions le moteur VoIP Mediastreamer2. Partie 10</a></li>
<li><a href="../fr497934/index.html">COVID-19: ce qu'ils essaient de traiter, ce qui peut être traité et quelques théories du complot</a></li>
<li><a href="../fr497938/index.html">Le réveil d'un Sleeping Institute: comment supprimer les marcheurs en python de REAPER</a></li>
<li><a href="../fr497940/index.html">Développeur Heart: Sega Saturn Devkits</a></li>
<li><a href="../fr497944/index.html">Utilisation de NAT Traversal pour connecter les utilisateurs de manière passive</a></li>
<li><a href="../fr497950/index.html">21 leçons apprises en 21 ans de programmation</a></li>
<li><a href="../fr497952/index.html">Abréviations anglaises et titres informatiques que nous prononçons mal</a></li>
<li><a href="../fr497956/index.html">Sars miraculeux? Généalogie du coronavirus de Wuhan</a></li>
<li><a href="../fr497958/index.html">Ils sont parmi nous: explorer les vulnérabilités et les codes malveillants dans Zoom pour Windows</a></li>
<li><a href="../fr497960/index.html">Installation réseau Linux</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>