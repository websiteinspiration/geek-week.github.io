<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🐓 🛀🏾 🏂🏻 実際にRosa Linux用のRPMパッケージを構築する 🏷️ 🤜🏼 👷</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Linuxオペレーティングシステムを長い間使用していて、プログラミングについて少しでも知っている場合は、遅かれ早かれ、ソースコードからプログラムをコンパイルする必要があるかもしれません。おそらく、必要なプログラムが配布リポジトリに表示されないでしょう。または、これらのリポジトリにある古いバージョンの...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>実際にRosa Linux用のRPMパッケージを構築する</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/464993/"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Linuxオペレーティングシステムを長い間使用していて、プログラミングについて少しでも知っている場合は、遅かれ早かれ、ソースコードからプログラムをコンパイルする必要があるかもしれません。</font><font style="vertical-align: inherit;">おそらく、必要なプログラムが配布リポジトリに表示されないでしょう。</font><font style="vertical-align: inherit;">または、これらのリポジトリにある古いバージョンのプログラムであり、最新のものが必要です。</font><font style="vertical-align: inherit;">または、新しいプログラムを作成して他のユーザーと共有したい場合もあります。</font></font><br>
</p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">もちろん、ソースコードに付属の指示に​​従ってプログラムをインストールできます。</font><font style="vertical-align: inherit;">ただし、プログラムファイルを手動で管理し、その依存関係を監視する必要があります。</font><font style="vertical-align: inherit;">プログラムでパッケージを構築し、オペレーティングシステムに組み込まれたアプリケーションマネージャを使用する方がはるかに優れています。</font></font><br>
</p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">この記事が、</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rosa Linux</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">またはRPMパッケージマネージャー（Mandriva、RedHat）を使用する別の</font><em><font style="vertical-align: inherit;">ディストリビューション</font></em><font style="vertical-align: inherit;">用のRPMパッケージを構築する方法をすぐに理解するのに役立つことを願っています</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">または、少なくとも情報を探す場所を教えてください。</font></font><br>
</p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ここでは、簡単な例を使用して、ローカルコンピュータでRPMパッケージを作成する方法を示します。</font><em><font style="vertical-align: inherit;">Rosa Linux</font></em><font style="vertical-align: inherit;">オペレーティングシステムで</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">xkb-switch</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プログラムを構築</font><font style="vertical-align: inherit;">します</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">プログラムのソースコードを</font><em><font style="vertical-align: inherit;">GitHub</font></em><font style="vertical-align: inherit;">から取得し</font><em><font style="vertical-align: inherit;">ます</font></em><font style="vertical-align: inherit;">。</font></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"></font><br>
</p><br>
<br>
<a name="habracut"></a><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">記事は多くの短い部分に分かれているので、目次はネタバレの下にあります</font></font></b><div class="spoiler_text"><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">目次</font></font></h2><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rosa Linuxについて少し</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">xkb-switchについて少し</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プログラムのセットアップ、ファイナライズ、チェック</font></font></a><br>
 <ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">       GitHub</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">       GitHub</a><br>
 <ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> </a></li>
</ul><br>
 </li>
</ul><br>
 </li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> « »   </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">  -</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">   -</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> -</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> </a><br>
 <ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">  rpmlint</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">  RPM  Rosa Linux</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> </a></li>
</ul><br>
 </li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">     </a><br>
 <ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">  </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">  </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">  </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">   </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">  </a></li>
</ul><br>
 </li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> </a><br>
 <ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">    </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">  </a></li>
</ul><br>
 </li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">  ( )</a></li>
</ul><br>
</div></div><br>
<br>
<a name="foreword"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rosa Linuxについて少し</font></font></h2><br>
<p><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rosa Linux</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ロシアの開発</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">者によって作成およびサポートされている</font><em><font style="vertical-align: inherit;">ディストリビューション</font></em><font style="vertical-align: inherit;">です</font><font style="vertical-align: inherit;">。</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mandriva</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に</font><font style="vertical-align: inherit;">基づい</font><font style="vertical-align: inherit;">ていますが、いくつかの機能があります。</font><font style="vertical-align: inherit;">2014年にリリースされた</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rosa Fresh R8</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の32ビットバージョンを使用してい</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">現在、</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">R8</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">バージョンは</font><font style="vertical-align: inherit;">開発者によってサポートされていません（リポジトリは更新されていません）が、私のラップトップでは正常に動作するため、新しいバージョンをインストールしたくありません。</font></font><br>
</p><br>
<p><em>Rosa Fresh R8</em>    <em>KDE4</em>.           <code>rpm</code>  <code>urpm</code>,   : <code>rpm</code>, <code>urpmi</code>, <code>urpme</code>, <code>urpmq</code>, <code>urpmf</code>.<br>
</p><br>
<p>            Linux.  ,     ,       <em>Rosa</em>.<br>
</p><br>
<p>   Rosa Linux  ,     ,   <em>RPM</em>.        .<br>
</p><br>
<br>
<a name="foreword-xkb-switch"></a><br>
<h2>  xkb-switch</h2><br>
<p>        Vim — <em>xkbswitch</em>,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">  </a>.             ,   —  ,        —      .       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">xkb-switch</a>,              <em>Vim</em>.   <em>Rosa Linux R8</em>     (,  ,     ,    ,   <em>xkb-switch</em>   ).<br>
</p><br>
<br>
<a name="test_program"></a><br>
<h2>, ,  </h2><br>
<p>                . ,           -  .   ,          ,   .        RPM       ,     ,    .<br>
</p><br>
<p>  ,      ,               .      ,            (  <em>makefile</em>),             -.<br>
</p><br>
<br>
<a name="test_program-local"></a><br>
<h3>       GitHub</h3><br>
<p>          ,        GitHub     ,       .         (   <code>~/Projects/cpp</code>     <em>C++</em>):<br>
</p><br>
<br>
<pre><code class="bash hljs"><span class="hljs-built_in">cd</span> ~/Projects/cpp<font></font>
git <span class="hljs-built_in">clone</span> https://github.com/ierton/xkb-switch.git
</code></pre><br>
<br>
<p>   <code>~/Projects/cpp/xkb-switch</code>,   . ,   <code>git</code>        .<br>
</p><br>
<p>  <code>README.md</code>     ,       <code>cmake</code>.       —        <code>CMakeLists.txt</code>.        ,   .      ,      <code>README.md</code>   .<br>
</p><br>
<br>
<pre><code class="bash hljs"><span class="hljs-built_in">cd</span> xkb-switch<font></font>
mkdir build &amp;&amp; <span class="hljs-built_in">cd</span> build<font></font>
cmake ..<font></font>
make<font></font>
./xkb-switch<font></font>
<span class="hljs-comment">#        </span><font></font>
./xkb-switch -l<font></font>
<span class="hljs-comment">#      </span><font></font>
./xkb-switch -s ru<font></font>
<span class="hljs-comment">#       (  )</span>
</code></pre><br>
<br>
<p> ,    ,      <code>build</code>        .    :<br>
</p><br>
<br>
<pre><code class="bash hljs"><span class="hljs-built_in">cd</span> ~/Projects/cpp/xkb-switch<font></font>
rm -rf ./build<font></font>
<span class="hljs-built_in">cd</span> ~/Projects/cpp<font></font>
zip -r xkb-switch.zip xkb-switch<font></font>
</code></pre><br>
<br>
<p> <code>xkb-switch.zip</code>       .<br>
</p><br>
<br>
<a name="test_program-github"></a><br>
<h3>       GitHub</h3><br>
<p>   ,    ,       <em>git</em>       <em>GitHub</em>.     ,       ,    ,    .<br>
</p><br>
<p>  «»     <em>GitHub</em>.  ,    ,      ,      (  ,   — <em>alexandersolovyov</em>):<br>
</p><br>
<br>
<pre><code class="bash hljs"><span class="hljs-built_in">cd</span> ~/Projects/cpp<font></font>
git <span class="hljs-built_in">clone</span> https://github.com/alexandersolovyov/xkb-switch.git
</code></pre><br>
<br>
<p>   ,    .         .            pull-request'. ,       <code>CMakeLists.txt</code>,        :<br>
</p><br>
<br>
<pre><code class="bash hljs">git branch cmake_corrections
</code></pre><br>
<br>
<p> ,   ,      (  <code>git commit -am " "</code>),       GitHub:<br>
</p><br>
<br>
<pre><code class="bash hljs">git push origin cmake_corrections
</code></pre><br>
<br>
<p>    pull-request,   .<br>
</p><br>
<p>     :<br>
</p><br>
<br>
<pre><code class="bash hljs">git remote add ierton https://github.com/ierton/xkb-switch.git
</code></pre><br>
<br>
<p>      ,    :<br>
</p><br>
<br>
<pre><code class="bash hljs">git pull ierton master
</code></pre><br>
<br>
<p> ,   ,      RPM.    -         :<br>
</p><br>
<br>
<pre><code class="plaintext hljs">Source0: https://github.com/-/-/archive/---.zip
</code></pre><br>
<br>
<p>, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">   specblog</a>, -   .       .                      (<code>~/rpmbuild/SOURCES/</code>).       -.     ,    — <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">  </a>.    ,   , —    .<br>
</p><br>
<br>
<a name="test_program-github-patches"></a><br>
<div class="spoiler"><b class="spoiler_title">     git</b><div class="spoiler_text"><h4> </h4><br>
<p><em></em>,   <em></em> —  ,        .      <code>git pull</code>  <code>git push</code>         ,  «»      ,          ,    .<br>
</p><br>
<br>
<p> ,        <code>CMakeLists.txt</code>.       :  <em>master</em>     GitHub      ,        <em>cmake_corrections</em>.      ,        <em>git</em>   .<br>
</p><br>
<p>          <code>~/rpmbuild/SOURCES</code> (    Rosa Linux,    <code>SOURCES</code>   ).   (,       — , <code>~/Projects/cpp/xkb-switch</code> —    <code>cmake_corrections</code>):<br>
</p><br>
<pre><code class="bash hljs">git format-patch -o ~/rpmbuild/SOURCES origin/master
</code></pre><br>
<p> <code>git format-patch</code>    -   .         ,   ,      .     :   ,    <em>HEAD</em>   ,      . ,         ,     <code>git log</code>.        ,     .<br>
</p><br>
<p>   ( ),        ,        . ,     ,   :<br>
</p><br>
<pre><code class="bash hljs">git format-patch -o ~/rpmbuild/SOURCES -2
</code></pre><br>
<p>      <code>-2</code>.        .<br>
</p><br>
<p>   ,     ,          :<br>
</p><br>
<pre><code class="bash hljs">git format-patch -o ~/rpmbuild/SOURCES master..cmake_corrections
</code></pre><br>
<p>            .      ,          .  :<br>
</p><br>
<pre><code class="bash hljs">mv 0001-Return-memory-allocated-by-XkbRf-getNamesProp()-<span class="hljs-keyword">for</span>-tmp.patch 001-Fix-memory-leak.patch
</code></pre><br>
<p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">        -</a>        <em>_--rosa-</em>.  ,   ,       ,     .      ,     <code>~/rpmbuild/SOURCES</code>    ,          .<br>
</p><br>
<p>        (<em>master</em>),    ,       (<em>cmake_corrections</em>)       <code>git rebase</code>.  ,   , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">  </a>.       .<br>
</p><br>
</div></div><br>
<br>
<a name="prepare"></a><br>
<h2> « »   </h2><br>
<p>     .      <code>rpmbuild</code>    .          -:<br>
</p><br>
<br>
<pre><code class="bash hljs">mkdir -p ~/rpmbuild/SPECS &amp;&amp; <span class="hljs-built_in">cd</span> ~/rpmbuild/SPECS
</code></pre><br>
<br>
<p> Rosa Linux  :     .<br>
</p><br>
<p>          .  ,  ,      .     ,     Rosa Linux. , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">      Red Hat</a>.<br>
</p><br>
<p>    ,   ,   <code>rpmbuild</code>,   —  ,     .       ,  ,    ,  .     ,     .   cleanup.sh      <code>~/rpmbuild/SPECS</code>.   :<br>
</p><br>
<br>
<pre><code class="bash hljs">!<span class="hljs-comment">#/bin/sh</span><font></font>
rm -rf ~/rpmbuild/BUILD/*<font></font>
rm -rf ~/rpmbuild/BUILDROOT/*<font></font>
rm -rf ~/rpmbuild/RPMS/*<font></font>
rm -rf ~/rpmbuild/SRPMS/*<font></font>
</code></pre><br>
<br>
<p>,          <code>chmod u+x cleanup.sh</code>.<br>
</p><br>
<p>      ,     , —     <em>GitHub</em>      ,        ,      , —      (, <code>.zip</code>, <code>.tar</code>  <code>.tar.gz</code>)      <code>SOURCES</code>. , :<br>
</p><br>
<br>
<pre><code class="bash hljs"><span class="hljs-built_in">cd</span> ~/Projects/cpp/<font></font>
zip -r xkb-switch.zip xkb-switch<font></font>
mkdir -p ~/rpmbuild/SOURCES<font></font>
cp xkb-switch.zip ~/rpmbuild/SOURCES/<font></font>
</code></pre><br>
<br>
<p>            ,   ,         <code>~/rpmbuild/SOURCES</code>,         (      <em>GitHub</em>)    (  ).   ,  ,     <em>GitHub</em> ( —  ),       ,      .<br>
</p><br>
<br>
<a name="specfile_start"></a><br>
<h2>  -</h2><br>
<p>   RPM —   <em>-</em>.       <code>rpmbuild</code> ( <code>rpm</code>),    .<br>
</p><br>
<p>  <code>xkb-switch.spec</code>   <code>~/rpmbuild/SPECS/</code>.     ,      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">Template Spec Files</a>.<br>
</p><br>
<p>  <code>README</code>    <em>xkb-switch</em> ,       <code>cmake</code>.   <strong>Spec file for a program built using CMake</strong>       -. ,  ,     RPM-,     ,    .<br>
</p><br>
<br>
<a name="specfile_syntax"></a><br>
<h2>   -</h2><br>
<ul>
<li> -      bash.<br>
 </li>
<li>       ,     ,   ,        (   —  ,    ). <strong>:</strong>          ,          -,   .<br>
 </li>
<li>-            ( ) .        . :<br>
 <pre><code class="plaintext hljs">    Name: xkb-switch
    </code></pre><br>
 </li>
<li>     <code>%</code> (, <code>%description</code>),   —   .     ,   .       ,   .    ,       .        ,          ,      .        .<br>
 </li>
<li>   ,        <code>%{_}</code>.     ,     (, <code>Name: xkb-switch</code>)      <code>%define</code>.      .      .<br>
 </li>
</ul><br>
<br>
<a name="specfile_header"></a><br>
<h2> -</h2><br>
<p> -    .   ,      RPM.    ,          .     :<br>
</p><br>
<br>
 <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">概要：</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
 パッケージの簡単な説明。私は、ファイル内の記述を見張られ</font></font><code>README.md</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">たプロジェクトで</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XKB-switch文</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><code>Query and change XKB layout state</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
 <br>
 <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名前：</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
 パッケージの名前。私たちの場合、これ</font></font><code>xkb-switch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
 <br>
 <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">バージョン：</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
 プログラムのバージョン。調べるに</font></font><code>CMakeLists.txt</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、プロジェクトのルートフォルダーにある</font><font style="vertical-align: inherit;">ファイルを確認することをお勧めし</font><font style="vertical-align: inherit;">ます。もちろん、アセンブリに使用するプロジェクトのコピーからファイルを取得する必要があります。元のプロジェクトを使用する場合</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、GitHubページから直接ファイルを開くことができます</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。あなたが見ることができるように、バージョンが構成され</font></font><code>MAJOR_VERSION</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code>MINOR_VERSION</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">そして</font></font><code>RELEASE_VERSION</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。バージョンプログラムを使用しました</font></font><code>1.6.0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
 <br>
 <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リリース：</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 パッケージ自体のバージョン番号。同じバージョンのプログラムを含むパッケージがアセンブルされている時間を表示します。私たちの場合、このバージョンのプログラムを誰も組み立てたことがないため、これは「1」です。理想的なケースでは、我々はすでにパッケージを組み立てるためにしようとした場合とアセンブリが（エラーがあった場合でも）最後に到達し、その後、それぞれの新たな試みの後に、あなたは1で、この数を増やす必要があるとフォルダから古い収集したパッケージを削除しない</font></font><code>rpmbuild/RPMS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><code>rpmbuild/SRPMS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新しいパッケージは、次を作成されます。新しいビルド番号で。アセンブリに特別なサーバーを使用する場合は、おそらくこれを行う必要があります。コンピューターを使用して、代わりにフォルダーをクリーンアップします。このバージョンのプログラムを含むパッケージがすでにLinuxディストリビューションのリポジトリにあるが、他の設定でコンパイルする場合は、そのパッケージよりも1つ多いリリース番号を指定することをお勧めします。</font></font><br>
 <br>
 <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ライセンス：</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 プログラムが配布されるライセンスの短縮名。 Rosa Linuxのルールによれば、無料で配布できるライセンスを持つパッケージのみをビルドできます。ファイルから</font></font><code>README.md</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ライセンスが</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GNU GPLv3である</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">こと</font><font style="vertical-align: inherit;">がわかります</font><font style="vertical-align: inherit;">。だから私たちは書き</font></font><code>GPLv3+</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font></font><br>
 <br>
 <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">グループ：</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
 プログラムが属するグループまたはカテゴリ。これらのグループを使用して、プログラムはアプリケーションの起動メニューとウィンドウプログラムマネージャー（「プログラムの追加と削除」）でソートされます。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rosa Linuxのグループのリストはここにあります</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><code>Development\X11</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プログラムはX11に接続されており、主にVimのスクリプトとプラグインを作成するために必要であるため、</font><font style="vertical-align: inherit;">私には最適だと思います</font><font style="vertical-align: inherit;">。</font></font><br>
 <br>
 <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">URL：</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 プログラムの元のソースコードをダウンロードできるインターネットアドレス。 RPMパッケージ情報を表示するときに指定されます。この項目はオプションですが、次のことを示します</font></font><code>https://github.com/ierton/xkb-switch</code><br>
 <br>
 <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。Source0：</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
 ソースコードを含むアーカイブファイルの名前、またはダウンロードできるインターネットアドレス。インターネット上のアドレスを指定すると、最初のアセンブリでファイルがにダウンロードされ</font></font><code>~/rpmbuild/SOURCES/</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。そのようなファイルがすでに存在する場合、そのファイルはダウンロードされなくなります。つまり、プログラム</font></font><code>rpmbuild</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はこのURLの末尾に示されているファイル名のみを使用します。ファイル名だけを指定することもできますが、その場合は</font></font><code>~/rpmbuild/SOURCES/</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">手動で</font><font style="vertical-align: inherit;">フォルダに配置する必要があります</font><font style="vertical-align: inherit;">。プロジェクトのコピーのアドレスをGitHubに提供することをお勧めします。ファイルを使用しました</font></font><code>https://github.com/alexandersolovyov/xkb-switch/archive/master.zip</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。 1つのスペックファイルを使用して、複数の異なるソースを指定して、複数のアーカイブからソースを収集できます。次に、次の各ファイル番号を追加するオプションの名前を増やす必要があります（</font></font><code>Source1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">など</font></font><code>Source2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）D。 RPMパッケージ情報を表示する場合、これらのファイルアドレスは表示されません。</font></font><br>
 <br>
 <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Patch0：</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
 このオプションはテンプレートファイルにはありません。プログラムのプロジェクトファイルの変更をパッチの形式で転送する場合に便利です。オプション</font></font><code>Source0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font><font style="vertical-align: inherit;">同様に</font><font style="vertical-align: inherit;">、各ファイルは別々の行に指定する必要があり、オプション名の末尾の数字は毎回増加する必要があります。パッチファイルはフォルダー内にある必要があります</font></font><code>~/rpmbuild/SOURCES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（ダウンロードされたアーカイブとソースの隣）。各ファイルの名前は、ファイルへのパスなしで書き込む必要があります。ここですべてのパッチファイルを指定する必要はありません。適用したいパッチファイルのみを使用できます。</font></font><br>
 <br>
 <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BuildRequires：</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
 プログラムのビルドに必要なパッケージ。テンプレートにより、指定するように求められます</font></font><code>cmake</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。このファイル</font></font><code>CMakeLists.txt</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、アセンブリ用のCMakeの最小バージョンが</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.6</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以上</font><font style="vertical-align: inherit;">であることを示しているため、指定することをお勧めします</font></font><code>cmake &gt;= 2.6</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。別のオプションを使用して、他のパッケージをそれぞれ別の行に追加できます</font></font><code>BuildRequires:</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。ファイル読み込むことで学ぶことができるビルドに必要なパッケージのリスト、</font></font><code>README</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プロジェクトのを、慎重にファイルを見直し</font></font><code>CMakeLists.txt</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（特に機能を</font></font><code>FIND_PACKAGE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code>TARGET_LINK_LIBRARY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code>FIND_PROGRAM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）次に、コマンドを使用して、リポジトリで正しいパッケージ名を見つける必要があります</font></font><code>urpmq -a __</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。この場合、コンパイル設定ファイル（</font></font><code>CMakeLists.txt</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）には、システムに必要なパッケージが存在するかどうかを確認する行がすでに含まれています。ただし、ここでもリスト全体を指定することをお勧めします。</font></font><br>
 <pre><code class="plaintext hljs"># CMake  2.6  <font></font>
BuildRequires: cmake &gt;= 2.6<font></font>
#  C/C++<font></font>
BuildRequires: gcc<font></font>
#    libxkbfile<font></font>
BuildRequires: libxkbfile-devel<font></font>
#   X11   libxkbfile,<font></font>
#  libx11-devel   .<font></font>
#    man:<font></font>
BuildRequires: xz<font></font>
    </code></pre><br>
 <br>
 <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">必要：、提供：</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
 これらのオプションはサンプルにはありませんが、便利な場合があります。パッケージ間の依存関係を確立します。このオプション</font><font style="vertical-align: inherit;">は、ビルドされるパッケージによって提供される</font><i><font style="vertical-align: inherit;">機能を</font></i></font><code>Provides</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指定し</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。これは、言語ファイルヘッダー</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cの</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名前、ダイナミックリンクライブラリ名、または任意の特別な関数です。また、オプション</font></font><code>Requires</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は</font><font style="vertical-align: inherit;">、パッケージが依存する他のパッケージの</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">機能を</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示し</font><font style="vertical-align: inherit;">ます。パッケージマネージャ（</font></font><code>rpm</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code>urpm</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">あなたのディストリビューションを使用するか、他の人が）、これらの追求の依存関係を検索する際</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の機会を</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パッケージ名ではなく。したがって、</font></font><code>Provides</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">提供のバージョンを示すのに優れている</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">機会を</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、とのために</font></font><code>Requires</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-提供されている</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">機能の</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">どのバージョン</font><font style="vertical-align: inherit;">が適していますか。記号</font></font><code>&gt;=</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">で</font><font style="vertical-align: inherit;">示されているバージョン</font><font style="vertical-align: inherit;">、</font></font><code>=</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">または</font></font><code>&lt;=</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">空白で囲まれている</font><font style="vertical-align: inherit;">バージョン</font><font style="vertical-align: inherit;">。通常、すべてのオプションが最初</font></font><code>Requires</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に</font><font style="vertical-align: inherit;">示され</font><font style="vertical-align: inherit;">、次に- </font></font><code>Provides</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と同じように、1行に1つの機能名</font><font style="vertical-align: inherit;">が示さ</font><font style="vertical-align: inherit;">れ</font></font><code>BuildRequires:</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。通常、Rosa Linuxでパッケージをビルドすると、依存関係が自動的に認識され、これらのオプションを指定する必要はほとんどありません。</font></font><br>
 <br>
 <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AutoReq：、AutoProv：</font></font></b><font style="vertical-align: inherit;"><em><font style="vertical-align: inherit;">rpm</font></em></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
 マネージャーが</font><font style="vertical-align: inherit;">新しい</font><font style="vertical-align: inherit;">言語</font><font style="vertical-align: inherit;">または独自の</font><font style="vertical-align: inherit;">言語で記述され</font><b><font style="vertical-align: inherit;">た</font></b><font style="vertical-align: inherit;">プログラムを</font><b><font style="vertical-align: inherit;">構築して</font></b><font style="vertical-align: inherit;">いて</font><font style="vertical-align: inherit;">、依存関係が自動的に正しく検出されない場合は、</font><em><font style="vertical-align: inherit;">機会</font></em><font style="vertical-align: inherit;">の自動検出を無効にできます</font><font style="vertical-align: inherit;">（</font><font style="vertical-align: inherit;">または、</font><em><font style="vertical-align: inherit;">依存関係</font></em><font style="vertical-align: inherit;">を使用</font><font style="vertical-align: inherit;">）。</font></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"></font><code>AutoProv: no</code><font style="vertical-align: inherit;"></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（助けを借りて</font></font><code>AutoReq: no</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font></font><br>
 <br>
 <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">％description</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
 このブロックはヘッダーの一部ではなくなりましたが、関連付けられています。</font><font style="vertical-align: inherit;">彼は、RPMパッケージにプログラムの完全な説明を追加します。</font><font style="vertical-align: inherit;">その後に空の行を残す必要があります。</font><font style="vertical-align: inherit;">説明は次のようになります。</font></font><br>
 <pre><code class="plaintext hljs">%description<font></font>
xkb-switch is a C++ program that allows to query and change the keyboard layout<font></font>
state for X11 Window System (XKB) via command line. It provides a command<font></font>
'xkb-switch', and bindings for API of the Vim text editor via<font></font>
'libxkbswitch.so'. It is mainly used by a plugin for Vim text editor,<font></font>
vim-xkbswitch. Originally ruby-based code written by J.Broomley.<font></font>
    </code></pre><br>
 <br>
<br>
<br>
<p><font style="vertical-align: inherit;"></font><code>%files</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">およびで</font><font style="vertical-align: inherit;">始まるテンプレートの行は、</font></font><code>%find_lang</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">複数の言語をサポートするアプリケーションをビルドする場合にのみ必要なので、削除します。</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">さらに、分割行コメントの後、ファイルをパックする前に完了する必要があるコマンドとマクロが続きます。</font><font style="vertical-align: inherit;">これらのコマンドはすべて、特別なキーワードを使用して定義されたブロックに分割されます。</font></font></p><br>
<br>
<a name="prep"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ソースの準備</font></font></h2><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最初は、</font></font><code>%prep</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンパイルの準備をするコマンドを示す</font><font style="vertical-align: inherit;">ブロック</font><font style="vertical-align: inherit;">です。</font><font style="vertical-align: inherit;">その中にはマクロコマンドがあり</font></font><code>%setup</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">彼女は次のことを行うスクリプトを実行します。</font></font></p><br>
<br>
<ul>
<li>      ,      <code>SourceX:</code>    (  —  <code>Source0:</code>).         ,    .<br>
 </li>
<li>     <code>~/rpmbuild/SOURCES/</code>.<br>
 </li>
<li>     <code>~/rpmbuild/BUILD/</code>.<br>
 </li>
<li>     .<br>
 </li>
</ul><br>
<br>
<p>  <code>-q</code> ,       .</p><br>
<p>    ,     <code>%prep</code>:</p><br>
<br>
<pre><code class="bash hljs">rpmbuild -bp ~/rpmbuild/SPECS/xkb-switch.spec
</code></pre><br>
<br>
<p>    <code>rpmbuild</code>.       ,      <code>rpm</code>    : <code>rpmbuild</code>    ,      .           (   <code>root</code>    <code>sudo</code>).    <code>rpmbuild</code>  ,  <code>man rpmbuild</code>.      ,       ,   , —  ,          <code>rpmbuild</code>.<br>
</p><br>
<p>     : <code>xkb-switch-1.6.0: No such file or directory</code>.    ,          <code>~/rpmbuild/BUILD/xkb-switch-1.6.0</code>,  .  <br>
</p><br>
<br>
<pre><code class="bash hljs">ls ~/rpmbuild/BUILD/
</code></pre><br>
<br>
<p>,     <code>xkb-switch-master</code>.     <code>%setup</code>    <code>-n</code>.    <code>%prep</code>  -   :<br>
</p><br>
<br>
<pre><code class="bash hljs">%prep<font></font>
%setup -q -n xkb-switch-master<font></font>
</code></pre><br>
<br>
<p>   <code>~/rpmbuild/SPECS/cleanup.sh</code>,    <code>BUILD</code>,     ,   <code>%prep</code>.  ,     <code>exit 0</code>.  ,     .<br>
</p><br>
<p>         ,         .       <code>%prep</code>.       ,    ,      :<br>
</p><br>
<pre><code class="plaintext hljs">%apply_patches
</code></pre><br>
<p>      <code>rpmbuild -bp xkb-switch.spec</code>.    —    .<br>
</p><br>
<p>      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">  Maximum RPM</a>.<br>
</p><br>
<p>   .<br>
</p><br>
<br>
<a name="build"></a><br>
<h2></h2><br>
<p>     <code>%build</code>.   <code>README</code>  ,     <code>cmake ..</code>  <code>make</code>,     -   .  :           ,     .    ,        <code>%build</code> :<br>
</p><br>
<br>
<pre><code class="bash hljs">~/rpmbuild/SPECS/cleanup.sh<font></font>
rpmbuild -bc ~/rpmbuild/SPECS/xkb-switch.spec<font></font>
</code></pre><br>
<br>
<p>    <code>exit 0</code>:    .<br>
</p><br>
<p>,         .     shell (  bash  zsh,     ).  <code>rpmbuild</code>      ,           .    shell    - —        . (    .)<br>
</p><br>
<p>    -  , ,  ,     <code>%build</code>  shell  .<br>
</p><br>
<p>    ,    ,   .      <code>cmake</code>, , ,        <code>%cmake</code>      -  ,      ,    .         (   — <code>CMakeLists.txt</code>).             ,    .<br>
</p><br>
<br>
<a name="install"></a><br>
<h2></h2><br>
<p>, <em></em>.   <code>%install</code>   ,               ,     ,    <code>~/rpmbuild/BUILDROOT/__-buildroot/</code>.<br>
</p><br>
<p> <code>__</code>    ,     <code>Name:</code>   -,   (<code>Version:</code>  -),   (<code>Release:</code>  -),  ,     .<br>
</p><br>
<p>  <code>README</code>  ,     <code>make install</code>,    <code>build</code>   .  - - <code>%makeinstall_std -C build</code>    ,   .       ( ,   ):<br>
</p><br>
<br>
<pre><code class="bash hljs">~/rpmbuild/SPECS/cleanup.sh<font></font>
rpmbuild -bi ~/rpmbuild/SPECS/xkb-switch.spec<font></font>
</code></pre><br>
<br>
<p>     ,       RPM.   -   ,     .<br>
</p><br>
<br>
<a name="packing"></a><br>
<h2> </h2><br>
<p>        ,      -  .     ,     <code>~/rpmbild/BUILDROOT/</code>. ( , ,     <code>tree</code>,  -      Linux.)  ,       ,       <code>.debug</code>.    , ,    :        .<br>
</p><br>
<p> ,       ,   <code>%files</code>  -.   ,     ,      .  .<br>
</p><br>
<p>      <code>%files</code>  -.  ,    .   Rosa Linux       <code>%prep</code> (  -   ).   ,   ,     ,  ,        —   .          - (,    ,     ).<br>
</p><br>
<p>  <code>%files</code>    ,      RPM. ,     :<br>
</p><br>
<br>
<pre><code class="plaintext hljs">%files<font></font>
%{_bindir}/%{name}<font></font>
%{_libdir}/libxkbswitch.so<font></font>
%{_libdir}/libxkbswitch.so.1<font></font>
%{_libdir}/libxkbswitch.so.%{version}<font></font>
%{_mandir}/man1/%{name}.1.xz<font></font>
</code></pre><br>
<br>
<p>        -.   , ,     <code>/usr/lib/rpm/macros</code>.  , <code>%{_bindir}</code>     , <code>%{_libdir}</code> —   ,  <code>%{_mandir}</code> —    man.   <code>%{name}</code>  <code>%{version}</code>    <code>Name:</code>  <code>Version:</code>   -.<br>
</p><br>
<p>    :<br>
</p><br>
<br>
<pre><code class="bash hljs">~/rpmbuild/SPECS/cleanup.sh<font></font>
rpmbuild -ba ~/rpmbuild/SPECS/xkb-switch.spec<font></font>
</code></pre><br>
<br>
<p>…   2   1 .    <code>rpmlint</code>,      .  ,   ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> Rpmlint Errors</a>  ,   :<br>
</p><br>
 <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">`xkb-switch.i586：E：incoherent-version-in-name（Badness：50）1`</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
 エラー：ライブラリパッケージ名のバージョンが正しく指定されていません。</font></font><br>
 <br>
 <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">`xkb-switch.i586：E：</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
 ライブラリーパッケージの実行可能ファイル</font><b><font style="vertical-align: inherit;">（悪さ：1）/ usr / bin / xkb-switch`</font></b><font style="vertical-align: inherit;">エラー：ライブラリパッケージに実行可能ファイルが含まれています。</font></font><br>
 <br>
 <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">`xkb-switch.i586：W：devel-file-in-non-devel-package / usr / lib / libxkbswitch.so` </font></font></b><font style="vertical-align: inherit;"><em><font style="vertical-align: inherit;">開発</font></em><font style="vertical-align: inherit;">用ではないパッケージで</font><em><font style="vertical-align: inherit;">開発パッケージ</font></em></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
 ファイル</font><font style="vertical-align: inherit;">（</font><font style="vertical-align: inherit;">）が見つかったという</font><font style="vertical-align: inherit;">警告</font></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"></font><code>-devel</code><font style="vertical-align: inherit;"></font><br>
 <br>
<br>
<br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">すべてクリア？</font><font style="vertical-align: inherit;">私はそうは思いません。</font><font style="vertical-align: inherit;">ここで何が起こっているのかを詳しく見てみましょう。</font></font><br>
</p><br>
<br>
<a name="packing-rpmlint"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rpmlintとは</font></font></h3><br>
<p>    Rosa Linux  <code>rpmbuild</code>   <code>rpmlint</code>,    .  <code>rpmlint</code>    ,   ,      .   ,     Rosa Linux (  ,     <code>rpmlint</code>)     .<br>
</p><br>
<p>    ,     ,      .       <code>~/rpmbuild/RPMS/_/</code>         <code>rpmlint -i __</code>.<br>
</p><br>
<p>,      RPM   - ,  ,    ,  ,      Rosa Linux,      <code>rpmlint -i __</code>.<br>
</p><br>
<br>
<a name="packing-package_types"></a><br>
<h3>  RPM  Rosa Linux</h3><br>
<p>  Rosa Linux   6 .   ,          .<br>
</p><br>
 <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">実行可能パッケージ</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
 バイナリです。直接実行することを目的としたバイナリファイルまたはスクリプトのみが含まれます。これらのパッケージのファイルは、ほとんどの場合、フォルダー</font></font><code>/bin/</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">またはに</font><font style="vertical-align: inherit;">インストールされます</font></font><code>/usr/bin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。リンクを含めることもできます-複数の異なる名前を使用してプログラムを呼び出す可能性があります。パッケージの名前はプログラムの名前に対応しています。このようなパッケージは多くの場合、ライブラリに依存しています。</font></font><br>
 <br>
 <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ライブラリ</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
 プログラムで使用される動的に接続された（「共有」、「共有」）ライブラリのコンパイル済みファイルが含まれています。通常、これは、名前がバージョンで終わるライブラリファイル自体と、名前が最初のバージョン番号で終わるこのファイルへのリンクです。たとえば、ライブラリ</font></font><code>libxkbfile</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">バージョン1.0.2の場合、これはファイル</font></font><code>libxkbfile.so.1.0.2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">とそのリンクになります。</font></font><code>libxkbfile.so.1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。インストーラーのリポジトリで認識されるライブラリパッケージの名前は、最初のバージョン番号で終わり、プレフィックスで始まります</font></font><code>lib</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。ライブラリの</font></font><code>libxkbfile</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名前</font><font style="vertical-align: inherit;">は</font><font style="vertical-align: inherit;">正しい- </font></font><code>libxkbfile1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。これは通常、互換性のないライブラリの変更によってのみ最初のバージョン番号が変更されるためです。したがって、一部のプログラムが古いバージョンのライブラリを使用し、他のプログラムが新しいバージョンを使用する場合、異なるバージョンのライブラリを使用して複数のパッケージをインストールすることができます。</font></font><br>
 <br>
 <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">開発者用パッケージ</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
 ライブラリを使用するプログラムのコンパイルに必要ですが、既製のプログラムの作業には不要なファイル。単純な</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> / </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C ++</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プログラムの</font><font style="vertical-align: inherit;">場合、これはライブラリファイルへのリンクですが、名前にバージョンがありません（たとえば、</font></font><code>libxkbfile.so</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）、およびヘッダーファイル（拡張子</font></font><code>.h</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。パッケージの名前は、</font></font><code>-devel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">たとえばで</font><font style="vertical-align: inherit;">終わり</font><font style="vertical-align: inherit;">ます</font></font><code>libxkbfile-devel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。インストール中は、常に適切なライブラリに依存します。たとえば、パッケージ</font></font><code>libxkbfile-devel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はに依存してい</font></font><code>libxkbfile1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font></font><br>
 <br>
 <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ソースコード</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
 ローザのLinuxリポジトリは、いくつかのプログラムのソースコードが含まれているRPMパッケージを持っている-ほとんど唯一のもの</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は本当にする必要が</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">再構築。これらのパッケージの名前は、</font></font><code>-src</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">またはで</font><font style="vertical-align: inherit;">終わります</font></font><code>-source</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（たとえば、</font></font><code>apache-source</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font></font><code>rpmbuild</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">このようなパッケージは常に自動的に作成され、に配置され</font></font><code>~/rpmbuild/SRPMS/</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font></font><br>
 <br>
 <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">シンボルのデバッグ</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 これは、完成したプログラムのデバッグに使用できる情報です。</font><font style="vertical-align: inherit;">コンパイルされたファイル内の場所をソースコードに関連付けます。</font><font style="vertical-align: inherit;">このようなパッケージはチームによって</font></font><code>rpmbuild</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">自動的に</font><font style="vertical-align: inherit;">作成され、</font><font style="vertical-align: inherit;">エンディングがその名前に割り当てられ</font></font><code>-debuginfo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">Rosa Linuxリポジトリーにそのようなパッケージは見つかりませんでした。</font></font><br>
 <br>
 <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ドキュメント</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
 Rosa Linuxリポジトリには、さまざまなプログラムおよびライブラリ用のドキュメントパッケージがあります。</font><font style="vertical-align: inherit;">私は（今のところ）そのようなパッケージをビルドする機能を知りません。</font><font style="vertical-align: inherit;">彼らの名前は、通常で終わる</font></font><code>doc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：例えば</font></font><code>libx11-doc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code>java-1.7.0-openjdk-javadoc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">ちなみに、それらのほとんどはウェブサイトのスタイルで作成されており、それらを表示するには、ブラウザーを開いてアドレスに移動し</font></font><code>file:///usr/share/doc/</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、目的のフォルダーとファイルを選択するの</font><font style="vertical-align: inherit;">が最善</font><font style="vertical-align: inherit;">です。</font></font><br>
 <br>
<br>
<br>
<a name="packing-result"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">私たちの結果</font></font></h3><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">今、すべてがより明確になりました。</font></font><br>
</p><br>
<br>
<ul>
<li>   <code>xkb-switch</code>   <code>libxkbswitch.so</code>, ,  ,    <em>  </em>.   ,          : <code>xkb-switch.i586: W: devel-file-in-non-devel-package /usr/lib/libxkbswitch.so</code>.<br>
 </li>
<li>    <em></em>,      <code>/usr/lib/libxkbswitch.so.1</code>  <code>/usr/lib/libxkbswitch.so.1.6.0</code>.       ,       .  : <code>xkb-switch.i586: E: executable-in-library-package (Badness: 1) /usr/bin/xkb-switch</code>.<br>
 </li>
<li>   ,          (1).   : <code>xkb-switch.i586: E: incoherent-version-in-name (Badness: 50) 1</code>.<br>
 </li>
</ul><br>
<br>
<p>,  <code>rpmlint</code>,     .          .   <em>xkb-switch</em> ,      <code>libxkbswitch.so.1.6.0</code>       ,        <em>Vim</em>.            <em>xkb-switch</em>,          <em>C</em>  <em>C++</em>.  RPM-    .<br>
</p><br>
<p>      -:<br>
</p><br>
<br>
<div class="spoiler"><b class="spoiler_title">-   xkb-switch</b><div class="spoiler_text"><pre><code class="plaintext hljs">Summary:       Query and change XKB layout state<font></font>
Name:          xkb-switch<font></font>
Version:       1.6.0<font></font>
Release:       1<font></font>
License:       GPLv3+<font></font>
Group:         Development/X11<font></font>
URL:           https://github.com/ierton/xkb-switch<font></font>
Source0:       https://github.com/alexandersolovyov/xkb-switch/archive/master.zip<font></font>
BuildRequires: cmake &gt;= 2.6<font></font>
BuildRequires: gcc<font></font>
BuildRequires: libxkbfile-devel<font></font>
BuildRequires: xz<font></font>
<font></font>
%description<font></font>
xkb-switch is a C++ program that allows to query and change the keyboard layout<font></font>
state for X11 Window System (XKB) via command line. It provides a command<font></font>
'xkb-switch', and bindings for API of the Vim text editor via<font></font>
'libxkbswitch.so'. It is mainly used by a plugin for Vim text editor,<font></font>
vim-xkbswitch. Originally ruby-based code written by J.Broomley.<font></font>
<font></font>
%files<font></font>
%{_bindir}/%{name}<font></font>
%{_libdir}/libxkbswitch.so<font></font>
%{_libdir}/libxkbswitch.so.1<font></font>
%{_libdir}/libxkbswitch.so.%{version}<font></font>
%{_mandir}/man1/%{name}.1.xz<font></font>
<font></font>
#------------------------------------------------------------------<font></font>
<font></font>
%prep<font></font>
%setup -q -n xkb-switch-master<font></font>
<font></font>
%build<font></font>
%cmake<font></font>
%make<font></font>
<font></font>
%install<font></font>
%makeinstall_std -C build<font></font>
</code></pre><br>
</div></div><br>
<br>
<a name="subpackaging"></a><br>
<h2>     </h2><br>
<p>       — ,         .    ,  ,       <code>xkb-switch</code>  3 : <em></em>, <em></em>   <em></em>. :<br>
</p><br>
<br>
<ul>
<li> <em></em>     <code>/usr/bin/xkb-switch</code>    <code>/usr/share/man/man1/xkb-switch.1.xz</code>,<br>
 </li>
<li> <em></em> —  <code>/usr/lib/libxkbswitch.so.1</code>  <code>/usr/lib/libxkbswitch.so.1.6.0</code>,<br>
 </li>
<li>   <em> </em> — <code>/usr/lib/libxkbswitch.so</code>.<br>
 </li>
</ul><br>
<br>
<p>      -.  ,   ,<br>
   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">  - Maximum RPM</a>.     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> -  libxkbfile</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">   Rosa Linux</a>.<br>
</p><br>
<p>   .<br>
</p><br>
<br>
<a name="subpackaging-macros"></a><br>
<h3>  </h3><br>
<p>       —   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">-  libxkbfile</a>.     -  :<br>
</p><br>
<br>
<pre><code class="plaintext hljs">%define major       1<font></font>
%define libname     %mklibname xkbswitch %{major}<font></font>
%define develname   %mklibname -d xkbswitch<font></font>
</code></pre><br>
<br>
<p>   <code>%define</code>  .        ,    (     ) —   ,       .     ,    <code>%{major}</code>   <code>1</code>,      .<br>
</p><br>
<p> <code>%mklibname</code>   «lib»,     ,      —   (  ).     <code>%{libname}</code>  <em>«lib» + «xkbswitch» + (  %{major}) =</em> <code>libxkbswitch1</code> —   .<br>
</p><br>
<p> <code>-d</code>  <code>%mklibname</code>   <code>-devel</code>.    <code>%{develname}</code>  <code>libxkbswitch-devel</code> —    .<br>
</p><br>
<br>
<a name="subpackaging-change_header"></a><br>
<h3>  </h3><br>
<p>    <code>Version:</code>  <br>
</p><br>
<br>
<pre><code class="plaintext hljs">Version:    %{major}.6.0
</code></pre><br>
<br>
<p> ,           -.<br>
</p><br>
<p>     -       .      .      :<br>
</p><br>
<pre><code class="plaintext hljs">Name:          xkb-switch<font></font>
Version:       %{major}.6.0<font></font>
Release:       1<font></font>
Summary:       Query and change XKB layout state<font></font>
License:       GPLv3+<font></font>
Group:         Development/X11<font></font>
URL:           https://github.com/alexandersolovyov/xkb-switch<font></font>
Source0:       https://github.com/alexandersolovyov/xkb-switch/archive/master.zip<font></font>
BuildRequires: cmake &gt;= 2.6<font></font>
BuildRequires: gcc<font></font>
BuildRequires: libxkbfile-devel<font></font>
BuildRequires: xz<font></font>
<font></font>
%description<font></font>
xkb-switch is a C++ program that allows to query and change the keyboard layout<font></font>
state for X11 Window System (XKB) via command line. It provides a command<font></font>
'xkb-switch', and bindings for API of the Vim text editor, a library<font></font>
'libxkbswitch'. It is mainly used for some plugins for Vim text editor, such as<font></font>
vim-xkbswitch. Originally ruby-based code written by J.Broomley.<font></font>
</code></pre><br>
<br>
<a name="subpackaging-packages"></a><br>
<h3>  </h3><br>
<p>    <em>-</em>     . <em>-</em>   , -      (    <em>rpm</em>).       <code>%package</code>.        -.     ,    -.          <code>Version</code>, <code>Summary</code>, <code>Group</code>.      <code>Provides</code>  <code>Requires</code>   <em></em>  <em></em> ,     .  <code>Name</code>   :    ,     <code>%package</code>.<br>
</p><br>
<p>     .     <code>%description</code>       —   ,     <code>%package</code>.<br>
</p><br>
<p> Rosa Linux   -   <code>%description</code>  -.    <code>libxkbswitch1</code>:<br>
</p><br>
<pre><code class="plaintext hljs">%package -n %{libname}<font></font>
Version:  %{version}<font></font>
Summary:  A library for xkb-switch tool, provides API bindings for Vim text editor<font></font>
Group:    Development/X11<font></font>
<font></font>
%description -n %{libname}<font></font>
libxkbswitch library, required by xkb-switch tool. It provides bindings for API<font></font>
of the Vim text editor, which can be used via 'libxkbswitch.so.1'.<font></font>
</code></pre><br>
<br>
<p> <code>-n</code>    <code>%package</code>  <code>%description</code> ,       .    -        ,    <code>xkb-switch-libxkbswitch1</code>.       <code>libxkbswitch1</code>.           .<br>
</p><br>
<p>   <em> </em>:<br>
</p><br>
<pre><code class="plaintext hljs">%package -n %{develname}<font></font>
Version:  %{version}<font></font>
Summary:  Development library libxkbswitch, provides API bindings for Vim text editor<font></font>
Group:    Development/X11<font></font>
<font></font>
%description -n %{develname}<font></font>
Development files for libxkbswitch. Provides bindings for<font></font>
API of the Vim text editor via 'libxkbswitch.so'.<font></font>
</code></pre><br>
<br>
<a name="subpackaging-files"></a><br>
<h3>   </h3><br>
<p>  ,      .     <code>%files</code>.<br>
</p><br>
<p>     ,     ,    <code>%package</code>, <code>%description</code>  <code>%files</code>.  ,    <code>%description</code>  -    .   ,      ,    — <code>xkb-switch</code>.<br>
</p><br>
<p> -  Rosa Linux     <code>%files</code>   ,    <code>%prep</code>.       :<br>
</p><br>
<pre><code class="plaintext hljs">%files<font></font>
%{_bindir}/%{name}<font></font>
%{_mandir}/%{name}.1.xz<font></font>
<font></font>
%files -n %{libname}<font></font>
%{_libdir}/libxkbswitch.so.%{major}<font></font>
%{_libdir}/libxkbswitch.so.%{version}<font></font>
<font></font>
%files -n %{develname}<font></font>
%{_libdir}/libxkbswitch.so<font></font>
</code></pre><br>
<br>
<p>   , :<br>
</p><br>
<br>
<ul>
<li>  <code>xkb-switch</code>   <code>~/usr/bin/xkb-switch</code>  <code>~/usr/share/man/man1/xkb-switch.1</code>,<br>
 </li>
<li>  <code>libxkbswitch1</code>   <code>~/usr/lib/libxkbswitch.so.1</code>  <code>~/usr/lib/libxkbswitch.so.1.6.0</code>,<br>
 </li>
<li>   <code>libxkbswitch-devel</code>   <code>~/usr/lib/libxkbswitch.so</code>.<br>
 </li>
</ul><br>
<br>
<p>      <code>cleanup.sh</code>       <code>rpmbuild -ba ~/rpmbuild/SPECS/xkb-switch.spec</code>.    3 :<br>
</p><br>
<br>
<pre><code class="plaintext hljs">libxkbswitch1.i586: W: no-documentation<font></font>
<font></font>
libxkbswitch-devel.i586: W: no-documentation<font></font>
<font></font>
libxkbswitch-devel.i586: W: no-dependency-on<font></font>
libxkbswitch/libxkbswitch-libs/liblibxkbswitch<font></font>
</code></pre><br>
<br>
<p>  ,       .   ,     .     .   .<br>
</p><br>
<br>
<a name="subpackaging-problems"></a><br>
<h3>  </h3><br>
<p>,      ,  ,        <code>README.md</code> .     <code>%files</code>      —    <code>%doc</code>:<br>
</p><br>
<br>
<pre><code class="plaintext hljs">%doc README.md
</code></pre><br>
<br>
<p>     .    <code>%doc</code> —    .        <code>~/rpmbuild/BUILD/xkb-switdh-master/README.md</code>.<br>
</p><br>
<p>      : <code>libxkbswitch-devel.i586: W: no-dependency-on libxkbswitch/libxkbswitch-libs/liblibxkbswitch</code>.  ,    <code>libxkbswitch-devel</code>    <code>libxkbswitch</code>  .<br>
</p><br>
<p>   <code>rpm -qp  --</code>       .            :<br>
</p><br>
<pre><code class="bash hljs">[user@pc ~] $ <span class="hljs-built_in">cd</span> ~/rpmbuild/RPMS/i586/<font></font>
[user@pc ~/rpmbuild/RPMS/i586] $ ls<font></font>
libxkbswitch1-1.6.0-1-rosa2014.1.i586.rpm<font></font>
xkb-switch-1.6.0-1-rosa2014.1.i586.rpm<font></font>
libxkbswitch-devel-1.6.0-1-rosa2014.1.i586.rpm<font></font>
xkb-switch-debuginfo-1.6.0-1-rosa2014.1.i586.rpm<font></font>
<font></font>
[user@pc ~/rpmbuild/RPMS/i586] $ rpm -qp --provides libxkbswitch1-1.6.0-1-rosa2014.1.i586.rpm<font></font>
libxkbswitch.so.1<font></font>
libxkbswitch1 = 1.6.0-1:2014.1<font></font>
<font></font>
[user@pc ~/rpmbuild/RPMS/i586] $ rpm -qp --provides libxkbswitch-devel-1.6.0-1-rosa2014.1.i586.rpm<font></font>
devel(libxkbswitch)<font></font>
libxkbswitch-devel = 1.6.0-1:2014.1<font></font>
<font></font>
[user@pc ~/rpmbuild/RPMS/i586] $ rpm -qp --requires libxkbswitch-devel-1.6.0-1-rosa2014.1.i586.rpm<font></font>
devel(libX11)<font></font>
devel(libgcc_s)<font></font>
devel(libstdc++)<font></font>
devel(libxkbfile)<font></font>
rpmlib(PayloadIsXz) &lt;= 5.2-1<font></font>
<font></font>
[user@pc ~/rpmbuild/RPMS/i586] $ rpm -qp --requires xkb-switch-1.6.0-1-rosa2014.1.i586.rpm<font></font>
libc.so.6<font></font>
libc.so.6(GLIBC_2.0)<font></font>
libc.so.6(GLIBC_2.1.3)<font></font>
libgcc_s.so.1<font></font>
libgcc_s.so.1(GCC_3.0)<font></font>
libstdc++.so.6<font></font>
libstdc++.so.6(CXXABI_1.3)<font></font>
libstdc++.so.6(GLIBCXX_3.4)<font></font>
libstdc++.so.6(GLIBCXX_3.4.11)<font></font>
libstdc++.so.6(GLIBCXX_3.4.20)<font></font>
libstdc++.so.6(GLIBCXX_3.4.9)<font></font>
libxkbswitch.so.1<font></font>
rpmlib(PayloadIsXz) &lt;= 5.2-1<font></font>
</code></pre><br>
<br>
<p> ,    <code>libxkbswitch1</code>   <code>libxkbswitch.so.1</code>  <code>libxkbswitch1</code>.  <code>xkb-switch</code>   <code>libxkbswitch.so.1</code>,     <code>libxkbswitch-devel</code>    <code>libxkbswitch1</code>.   ,     <code>%package</code>  <code>libxkbswitch-devel</code>.      :<br>
</p><br>
<br>
<pre><code class="plaintext hljs">%package -n %{develname}<font></font>
Version:  %{version}<font></font>
Summary:  Development library libxkbswitch, provides API bindings for Vim text editor<font></font>
Group:    Development/X11<font></font>
Requires: %{libname} &gt;= %{version}<font></font>
</code></pre><br>
<br>
<p>       , …       .     <code>libxkbswitch-devel</code>  ,  ,    .     ,         ,  <code>rpmbuild</code>      .<br>
</p><br>
<p>-,     (  <code>README.md</code>    ), —  :<br>
</p><br>
<br>
<div class="spoiler"><b class="spoiler_title">-    </b><div class="spoiler_text"><pre><code class="plaintext hljs">%define major           1<font></font>
%define libname         %mklibname xkbswitch %{major}<font></font>
%define develname       %mklibname -d xkbswitch<font></font>
<font></font>
# Main package. Automaticaly requires libxkbswitch and libxkbswitch-devel<font></font>
Name:          xkb-switch<font></font>
Version:       %{major}.6.0<font></font>
Release:       1<font></font>
Summary:       Query and change XKB layout state<font></font>
License:       GPLv3+<font></font>
Group:         Development/X11<font></font>
URL:           https://github.com/alexandersolovyov/xkb-switch<font></font>
Source0:       https://github.com/alexandersolovyov/xkb-switch/archive/master.zip<font></font>
BuildRequires: cmake &gt;= 2.6<font></font>
BuildRequires: gcc<font></font>
BuildRequires: libxkbfile-devel<font></font>
BuildRequires: xz<font></font>
<font></font>
%description<font></font>
xkb-switch is a C++ program that allows to query and change the keyboard layout<font></font>
state for X11 Window System (XKB) via command line. It provides a command<font></font>
'xkb-switch', and bindings for API of the Vim text editor, a library<font></font>
'libxkbswitch'. It is mainly used for some plugins for Vim text editor, such as<font></font>
vim-xkbswitch. Originally ruby-based code written by J.Broomley.<font></font>
<font></font>
# libxkbswitch<font></font>
%package -n %{libname}<font></font>
Version: %{version}<font></font>
Summary: A library for xkb-switch tool, provides API bindings for Vim text editor<font></font>
Group:   Development/X11<font></font>
<font></font>
%description -n %{libname}<font></font>
libxkbswitch library, required by xkb-switch tool. It provides bindings for API<font></font>
of the Vim text editor, which can be used via 'libxkbswitch.so.1'.<font></font>
<font></font>
# libxkbswitch-devel<font></font>
%package -n %{develname}<font></font>
Version:  %{version}<font></font>
Summary:  Development library libxkbswitch, provides API bindings for Vim text editor<font></font>
Group:    Development/X11<font></font>
Requires: %{libname} &gt;= %{version}<font></font>
<font></font>
%description -n %{develname}<font></font>
Development files for libxkbswitch. Provides bindings for<font></font>
API of the Vim text editor via 'libxkbswitch.so'.<font></font>
<font></font>
# xkb-switch<font></font>
%files<font></font>
%{_bindir}/%{name}<font></font>
%{_mandir}/man1/%{name}.1.xz<font></font>
<font></font>
# libxkbswitch1<font></font>
%files -n %{libname}<font></font>
%{_libdir}/libxkbswitch.so.%{major}<font></font>
%{_libdir}/libxkbswitch.so.%{version}<font></font>
%doc README.md<font></font>
<font></font>
# libxkbswitch-devel<font></font>
%files -n %{develname}<font></font>
%{_libdir}/libxkbswitch.so<font></font>
%doc README.md<font></font>
<font></font>
#------------------------------------------------------------------<font></font>
<font></font>
%prep<font></font>
%setup -q -n xkb-switch-master<font></font>
<font></font>
%build<font></font>
%cmake<font></font>
%make<font></font>
<font></font>
%install<font></font>
%makeinstall_std -C build<font></font>
</code></pre><br>
</div></div><br>
<br>
<a name="summary"></a><br>
<h2></h2><br>
<p> ,      RPM    <em>Rosa Linux</em> (       ).       ,   -. ,       — ,   ,   <em>rpmrc</em>,      <em>ABF</em>   , —         .<br>
</p><br>
<p>       —    ,      -,         - , —     .<br>
</p><br>
<br>
<a name="commands"></a><br>
<h2> </h2><br>
<br>
<a name="commands-build"></a><br>
<h3>   </h3><br>
 <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rpmbuild -bp specfile.spec </font></font></b><font style="vertical-align: inherit;"><em><font style="vertical-align: inherit;">準備を</font></em></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
 実行します</font><font style="vertical-align: inherit;">（％準備）。</font><b><font style="vertical-align: inherit;">rpmbuildの-bc specfile.spec</font></b><font style="vertical-align: inherit;"> 
 実行</font><em><font style="vertical-align: inherit;">コンパイル</font></em><font style="vertical-align: inherit;">（ビルド％）および以前のすべてのアクション。</font><b><font style="vertical-align: inherit;">rpmbuildの-bi specfile.spec</font></b><font style="vertical-align: inherit;"> 
 行って</font><em><font style="vertical-align: inherit;">擬似が</font></em><font style="vertical-align: inherit;">インストール（％をインストール）し、以前のすべてのステップ。</font><b><font style="vertical-align: inherit;">rpmbuild -ba specfile.spec</font></b><font style="vertical-align: inherit;"> 
 パッケージを完全にビルドします。</font></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"></font><br>
 <br>
 <b><font style="vertical-align: inherit;"></font></b><br><font style="vertical-align: inherit;"></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"></font><br>
 <br>
 <b><font style="vertical-align: inherit;"></font></b><br><font style="vertical-align: inherit;"></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"></font><br>
 <br>
 <b><font style="vertical-align: inherit;"></font></b><br><font style="vertical-align: inherit;"></font><br>
 <br>
<br>
<br>
<a name="commands-package"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">完成したパッケージの確認</font></font></h3><br>
 <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rpmlint -i package_file_name.rpm</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
 一般的なチェック-パッケージの構築</font><b><font style="vertical-align: inherit;">状況</font></b><font style="vertical-align: inherit;">。</font></font><br>
 <br>
 <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rpm -qp --provides package_filename.rpm</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
 パッケージによって提供される「機能」を確認します。</font></font><br>
 <br>
 <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rpm -qp --requires package_filename.rpm</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
 このパッケージが依存する他のパッケージの「機能」を確認します。</font></font><br>
 <br>
 <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rpm -qpl package_file_name.rpm</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
 パッケージに含まれるファイルのリスト。</font></font><br>
 <br>
 <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rpm -qpi package-file-name.rpm</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
 パッケージに関する情報（スペックファイルの「ヘッダー」または</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">％パッケージ</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ブロックから</font><font style="vertical-align: inherit;">）。</font></font><br>
 <br>
<br>
<br>
<p>         ,    <code>p</code>.    ,     Rosa Linux,   .     <code>urpmq</code>,   <code>rpm -q</code>. , <code>urpmq -l _</code>    ,  <code>urpmq --requires _</code>   .<br>
</p><br>
<br>
<a name="links"></a><br>
<h2>  ( )</h2><br>
<ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">Building RPMs — Quick Start</a> —         RPM  Rosa Linux.</li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> RPM</a> —    ,   ,       .   .</li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">RPM:  spec </a> —    -  Rosa Linux.</li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">Maximum RPM</a> —        <code>rpm</code>   RPM-  RedHat Linux.         ,      Rosa Linux.    .</li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">Template Spec Files</a> —  <code>.spec</code>.  ,      -.</li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">Automatic Build Farm (ABF)</a> —      Rosa Linux.             ,   ,     ,    <code>.spec</code> .     -.</li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">Rpmlint Errors</a> —    ,   <code>rpmlint</code>.</li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パッケージンググループ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -Rosa Linuxプログラムカテゴリのリスト。</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ローザLinuxライブラリデザインポリシー</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Git-rebase</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gitで</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ブランチをマージする別の方法</font><font style="vertical-align: inherit;">。</font></font></li>
</ol></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja464979/index.html">9月5日、サンクトペテルブルク-カアル通信</a></li>
<li><a href="../ja464981/index.html">Googleはユーザー追跡を正当化するための議論を提供している-会社は不誠実さと操作で非難されている</a></li>
<li><a href="../ja464987/index.html">Kubernetesのリポジトリ：OpenEBS対Rook（Ceph）対Rancher Longhorn対StorageOS対Robin対Portworx対Linstor</a></li>
<li><a href="../ja464989/index.html">Extravaganza Context</a></li>
<li><a href="../ja464991/index.html">離陸しなかったプロジェクト</a></li>
<li><a href="../ja464995/index.html">Swiftでシーケンスをラップする</a></li>
<li><a href="../ja464997/index.html">VRテクノロジーの開発について：それらが使用される場所、VRビジネスを使用する理由、および使用するデバイス</a></li>
<li><a href="../ja464999/index.html">OpenLibertyの例を使用して、アプリケーションサーバーでの作業の詳細がどのように変化するか</a></li>
<li><a href="../ja465001/index.html">2019年Amazonプライムデー-Powered by AWS</a></li>
<li><a href="../ja465003/index.html">ARPGジャンルの興味</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>