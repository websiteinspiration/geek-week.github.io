<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üòß üõ•Ô∏è üìä Gro√üe √§gyptische Firewall üèáüèæ üöÜ üêπ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In der Welt tobt eine Pandemie, die Menschen kaufen Toilettenpapier und Buchweizen im industriellen Ma√üstab und die meisten IT-Unternehmen verlegen Mi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Gro√üe √§gyptische Firewall</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/495380/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In der Welt tobt eine Pandemie, die Menschen kaufen Toilettenpapier und Buchweizen im industriellen Ma√üstab und die meisten IT-Unternehmen verlegen Mitarbeiter an einen entfernten Ort. </font><font style="vertical-align: inherit;">Mein Arbeitgeber auch - ein deutsches parastatales B√ºro.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Grunds√§tzlich gab es keine Probleme, aber einer unserer Mitarbeiter vor einem Monat, als noch alles nicht so be√§ngstigend aussah, machte ich Urlaub bei meinen Verwandten in √Ñgypten und sa√ü dort wegen der Grenzschlie√üung sicher fest. Nun, sie ist selbst gesund, ein funktionierender Laptop mit ihr - sie hat sich unter Quarant√§ne gestellt und arbeitet √ºber ein VPN. Eine Woche funktioniert, zwei ... In der dritten Woche hat das VPN die Verbindung unterbrochen. Die Unterst√ºtzung der ersten Zeile √ºberpr√ºfte das Allt√§gliche wie ein Neustart - es half nicht. Die zweite Zeile begann mit der Diagnose: Die Verbindung wird in der TLS-Handshake-Phase st√§ndig unterbrochen. Deaktivierte eine lokale Firewall - es hat nicht geholfen. Wir haben ein anderes Auto ausprobiert - es funktioniert nicht. Ein anderer Anbieter funktioniert nicht. Zu diesem Zeitpunkt gab das Support-Team auf und schob mir das Problem freudig nach dem guten alten Prinzip ‚ÄûDer Netzwerkmanager ist schuld‚Äú vor.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir schauen in die Serverprotokolle: Er sieht keine Versuche, es zu erreichen, nachdem er das erste Paket beantwortet hat. Lustig und ziemlich vertraut. Ich rief einen Mitarbeiter an und interessierte mich daf√ºr, wie er mit den Menschenrechten im Allgemeinen und der Freiheit des Internets im Besonderen umgeht. Er sagt, dass die Dinge schlecht sind, das Internet sie blockiert, so dass die Kamele Schluckauf haben und Roskomnadzor nerv√∂s am Rande raucht. Ja ... Ein kurzes Googeln zeigt eine Reihe von Beschwerden √ºber √§hnliche VPN-Probleme in √Ñgypten seit 2017. Um das Bild zu vervollst√§ndigen, frage ich, ob der Mitarbeiter in den letzten Jahren l√§nger als zwei Wochen in der Heimat war - nein, sagt sie, nie besucht. Das Puzzle nimmt Gestalt an. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir erstellen eine Kopie des Unternehmens-VPN-Servers auf einer kostenlosen wei√üen IP - es besteht keine Verbindung. Erwartet. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir wechseln den Port - es besteht keine Verbindung. Das ist trauriger.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir √§ndern das Protokoll - es besteht keine Verbindung. </font><font style="vertical-align: inherit;">Das R√§tsel hat sich entwickelt - vor uns liegt DPI wie eine gro√üe chinesische Firewall. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Angestellte ist traurig, der Chef fragt klagend: "Sie sind ein russischer Hacker, tun Sie etwas." </font><font style="vertical-align: inherit;">Nun ... Entdecken Sie Darknets schwere Artillerie und drehen Sie obfsproxy. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
F√ºr einen Server (CentOS 7) sieht es folgenderma√üen aus:</font></font><br>
<br>
<pre><code class="bash hljs">~ sudo pip install virtualenv<font></font>
~ <span class="hljs-built_in">cd</span> /etc/openvpn &amp;&amp; virtualenv venv &amp;&amp; <span class="hljs-built_in">source</span> venv/bin/activate<font></font>
~ sudo pip install obfsproxy<font></font>
~ sudo -u openvpn /etc/openvpn/venv/bin/python /etc/openvpn/venv/bin/obfsproxy obfs3 --dest=127.0.0.1:1194 server 1.2.3.4:49416</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
F√ºr einen Client (MacOS) wie diesen:</font></font><br>
<br>
<pre><code class="bash hljs">~ brew install pip<font></font>
~ pip install pyopenssl obfsproxy<font></font>
~ obfsproxy obfs3 socks 127.0.0.1:8443</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
F√ºgen Sie in der OpenVPN-Konfiguration auf dem Client Folgendes hinzu:</font></font><br>
<br>
<pre><code class="bash hljs">socks-proxy-retry<font></font>
socks-proxy 127.0.0.1 8443</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Profitieren </font><font style="vertical-align: inherit;">OpenVPN im obfsproxy-Wrapper wird von lokalen Signaturerkennungsalgorithmen nicht erkannt, die Sitzung wird gestartet, Pings gehen, der Datenverkehr wird ausgef√ºhrt, der Mitarbeiter ist zufrieden. </font><font style="vertical-align: inherit;">Es bleibt nur, den obfsproxy-Client-Teil auf </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">diese</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ‚Äûoffensichtliche‚Äú Weise </font><font style="vertical-align: inherit;">zum automatischen Laden hinzuzuf√ºgen </font><font style="vertical-align: inherit;">(ich hasse Mohnblumen). </font><font style="vertical-align: inherit;">Ich verabschiede mich erleichtert von unserem Gefangenen und schreibe einen Brief zur Unterst√ºtzung im Sinne von "Dieses Problem ist so gel√∂st, aber ich kann keine Stabilit√§t garantieren, und Sie k√∂nnen diese Problemumgehung nur verwenden, wenn es keinen anderen Ausweg gibt." </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anscheinend gibt es in √Ñgypten einen Ort, an dem DPI besonders gerissen ist, was zun√§chst die Kommunikation mit neuen Abonnenten und / oder den Verkehr mit neuen Hosts nicht blockiert und diese auf die bedingte Kategorie "Touristen" verweist. </font><font style="vertical-align: inherit;">Und nach Ablauf einer bestimmten Zeitspanne wird der Benutzer als "sein" eingestuft und schneidet freudig den Verkehr ab, um den lokalen K√∂nigen zu gefallen.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de495368/index.html">Wir registrieren uns selbst f√ºr selbstlaufende Selbsthunde unter Bedingungen der Selbstisolation</a></li>
<li><a href="../de495370/index.html">√ñffentlichkeit ist b√∂se</a></li>
<li><a href="../de495374/index.html">Dekorative Deckenleuchte General Lumino 02</a></li>
<li><a href="../de495376/index.html">Langeweile in Quarant√§ne. So geben Sie mit einem Klick das meiste Geld in Azure aus</a></li>
<li><a href="../de495378/index.html">DEFCON 27 Konferenz. Buttplug: True Penetration Testing. Teil 1</a></li>
<li><a href="../de495384/index.html">Meine Praktikumserfahrung bei Microsoft Redmond und ein Angebot bekommen</a></li>
<li><a href="../de495388/index.html">1970er Fernsehsendung, die ein Vorfahr des eSports wurde</a></li>
<li><a href="../de495390/index.html">STM32CubeMonitor ist einen Versuch wert</a></li>
<li><a href="../de495392/index.html">So suchen Sie im Frontend nach Fehlern: 4 Hauptphasen</a></li>
<li><a href="../de495396/index.html">Erster Eindruck von Konzepten</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>