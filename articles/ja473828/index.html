<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤢 🤤 🧙🏻 オフィスパスの代替としてのコンピュータビジョン 🙍 🏨 👨🏻‍🍳</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="今日は、ビジョン顔認識サービスに基づいて、オフィスでアクセス制御システムをどのように作成したかをお伝えします。まず、少し背景。他のメールサービスと同様に、スパム対策システムを作成しました。そのようなシステムは現在機械学習に基づいて作成されており、私たちにはそれを担当する強力なチームがあります。そして...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>オフィスパスの代替としてのコンピュータビジョン</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/473828/"><img src="https://habrastorage.org/webt/un/xu/h1/unxuh13fdsjq-aryuwovmchvjxw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
今日は、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ビジョン</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">顔認識サービスに基づいて、オフィスでアクセス制御システムをどのように作成したかをお伝えします</font><font style="vertical-align: inherit;">。まず、少し背景。他のメールサービスと同様に、スパム対策システムを作成しました。そのようなシステムは現在機械学習に基づいて作成されており、私たちにはそれを担当する強力なチームがあります。そして、機械学習が存在する場所には、コンピュータビジョンがあります。したがって、Visionサービスは非常に自然に発生しました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これと並行して、数年前にクラウドを立ち上げました。クラウドは、個人と企業の両方が使用できる、データセンターへの地理的分散を備えた信頼性の高いファイルストレージです。</font><font style="vertical-align: inherit;">時間の経過とともに、ファイルを保存するだけでなく、仮想マシンを注文できる「ビジネス向けクラウド」を手に入れました。</font><font style="vertical-align: inherit;">徐々に、それはMCS-Mail.ruクラウドソリューションに変わり、そこでVisionはサービスの1つとして有機的に適合しました。</font></font><br>
<a name="habracut"></a><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">雲</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちのニューラルネットワークは、顔だけでなく</font><font style="vertical-align: inherit;">、</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">視覚</font></a><font style="vertical-align: inherit;">を含む</font><font style="vertical-align: inherit;">さまざまな</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オブジェクト、オブジェクト、シーン</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を認識することができ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">現在、彼らは約1万のカテゴリを認識でき、マシンビジョンは人間よりもうまく機能することがあります。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/399/b8d/be4/399b8dbe4c0ba7bb25dcc7701b9efc34.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは2012年、2015年、2018年の私の娘です。</font><font style="vertical-align: inherit;">私が彼女を個人的に知らなかったとしたら、おそらくこれが同じ人物であることをすぐには理解できなかったでしょう。</font><font style="vertical-align: inherit;">そして、ニューラルネットワークは一致して理解することができました。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/543/a67/56d/543a6756d6caa113dd04657c45f8b550.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここで女の子は背を向けて目を細めました、そして男の子は一般的に帽子の中に顔の半分に影が付いていました。</font><font style="vertical-align: inherit;">しかし同時に、そのような困難な状況にもかかわらず、ニューラルネットワークはそれらを正確に認識しました。</font><font style="vertical-align: inherit;">当然のことながら、社内で開発されているテクノロジーは、社内サービスのサポートを見つけるしかありませんでした。</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">私たちのイントラネット</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちのイントラネットはsysと呼ばれています。</font><font style="vertical-align: inherit;">これは一種のソーシャルネットワークです（私たちにはいくつかあります）。</font><font style="vertical-align: inherit;">その中で、従業員はさまざまなイベントから写真をアップロードします。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/e2c/f0b/a5b/e2cf0ba5b544efc7d8d52f1c2c7ef640.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
イベントから数百枚の写真が配置されると、そこにいるのを見つけるのは非常に困難です。</font><font style="vertical-align: inherit;">したがって、これらのアルバムに接続されたマシンビジョンがあり、イントラネットの1か所に、私が描かれている写真が表示されます。</font><font style="vertical-align: inherit;">ここで、システムは夏の企業パーティーの1つで私を見つけました。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/b47/69c/5b9/b4769c5b9c349f443e9968574d5417d3.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ニューラルネットワークのおかげで、夕暮れ時でも私を認識でき、写真にはまだ多くの人がいます。</font></font><br>
 <br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">会議ラック</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その後、会議用ラックを作りました。</font><font style="vertical-align: inherit;">ラック内に設置するiPad用のソフトウェアを書いたのですが、一般的に私はiOS開発者であり、コンピュータービジョンとは何の関係もありません。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/p5/01/ul/p501uly37m546fdxxrwwtuegigo.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このラックの本質は何ですか？</font><font style="vertical-align: inherit;">イベントを通じて、会議、会議、企業パーティー、または少なくとも誕生日-あなたは写真家によって撮影されます。</font><font style="vertical-align: inherit;">時々、それはクラウドに蓄積された画像を落とします。</font><font style="vertical-align: inherit;">いつでもカウンターに行き、写真を撮り、「検索」ボタンをクリックしてください。</font><font style="vertical-align: inherit;">また、システムがまだ画像のインデックス作成を管理していない場合、ラックには、キャプチャしたすべての写真がすぐに表示されるか、これまで何も見つからなかったと表示され、電子メールの入力を求められます。</font><font style="vertical-align: inherit;">そしてイベントの後、あなたはあなたがいるすべての写真を含むクラウドのフォルダへのリンクをメールで受け取ります。</font><font style="vertical-align: inherit;">これは、Visionサービスのアプリケーションの1つです。</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アクセスシステム</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
当然のことながら、このような顔認識機能を使用して、会社の画像で人相を検索するだけでなく、より実用的なものも探していました。</font><font style="vertical-align: inherit;">たとえば、自動スループットシステムの場合です。</font><font style="vertical-align: inherit;">フロアの各入り口にパスを適用することはあまり便利ではありません。パスを忘れることが多く、夏の薄着の女の子にとっては、パスを修正する場所すらありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そのため、実験することにしました。</font><font style="vertical-align: inherit;">このため、私たちはすべての条件を満たしています。許可を求める必要はありません。非常に敏感な管理部門がため息をついて言っています。</font><font style="vertical-align: inherit;">カメラを取り付けます。</font><font style="vertical-align: inherit;">ドアではありません。</font><font style="vertical-align: inherit;">ドアは火災安全に関連しています。」</font><font style="vertical-align: inherit;">私たちは次のとおりです。</font><font style="vertical-align: inherit;">側面に取り付けます。」</font><font style="vertical-align: inherit;">私たちにも忍耐強い同僚がいて、彼らは私たちに苦しんでいます。</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">建築 </font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一見すると、アクセスシステムのアーキテクチャは非常にシンプルに見えます。カメラが写真を撮ってVisionに送信し、Visionがドアを開けます。しかし、実際にこれを行う方法を同僚と描き始めたとき、私たちはこのスキームを得ました：</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/7be/683/61c/7be68361c530fdb7f8da32500b7a5c4c.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
右側のブロックは「カメラ」と呼ばれます。これはドアに掛かっているモジュールです。これは3つの部分で構成されています。 Raspberry PiはUSBカメラからビデオを受信し、FFmpegでエンコードして送信します。手頃な価格帯のIPカメラをいくつかテストしたところ、だれも約0.5秒の顕著な遅延がありました。また、他の段階では遅延があるため、人が立ち上がってカメラを見ても数秒間何も起こらないので、彼はすでにパスを作成したいと考えています。したがって、可能な限り遅延を減らし、USBカメラを搭載したRaspberry Piは、多くの商用IPカメラよりも高速であることが判明しました。ラズベリーには、マルチカラーのLEDとスクイーカーを備えた小さなArduinoも接続されています。デフォルトのLEDは赤です。人が近づいて認識されると、緑が点灯します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、Raspberry Piは、有線イーサネットを介してサーバーに到達するビデオストリームを送信します。各フロアにサーバールームがあり、そこにはスイッチ、従業員のデスクへのケーブルの接続、フルタイムのアクセスコントロールシステム（アクセスコントロールおよび管理システム）があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
別のRaspberry Piをサーバールームに配置します。サーバールームは、ビデオストリームをリアルタイムで受信し、OpenCVを介して実行します。なぜまだOpenCVが必要なのですか？写真に顔があるかどうかを判断する必要があります。写真に写っている人物を定義するニューラルネットワークは少し長く機能し、ビデオストリームを絶えずフィードに送るにはコストがかかりすぎます。したがって、OpenCVを通じて顔の存在を判断し、顔が表示された場合はVisionに送信します。このサービスは、この従業員が見つからなかったと回答するか、HRデータベースで従業員IDを送信します。この従業員IDを使用して、ACSに関連付けられているイントラネットにアクセスし、パスIDを返します。さらに、このパス識別子をArduinoにスローし、ACSに渡します。アクセス制御システムの場合、これはパスを申請する人に相当します。つまり、ACSを変更することはありません。それでも、ACSは従業員の出入りを記録します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
システムとACSをどのように統合しましたか？</font><font style="vertical-align: inherit;">私たちのオフィスでは、Bolid C2000-2デバイスが使用されています。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/351/01a/0de/35101a0de56c7879ac661be35a5060b8.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは国内の出入管理システムです。</font><font style="vertical-align: inherit;">ほとんどの場合、485番目のインターフェースを介してこれらのデバイスに接続できますが、ウィーガンドプロトコルを介して接続しました。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/e5d/36e/70b/e5d36e70b78094589c3c63df5f6ee934.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ドアの近くに設置されたパスリーダーに、プロキシとして機能するArduinoを接続しました。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/9bc/26d/700/9bc26d7009e2dae347db5223fd50dfa8.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
写真は、電源接続とパスリーダーからの2本のデータラインを示しています。</font><font style="vertical-align: inherit;">パッドは、より便利な接続に使用されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Arduinoは、USB経由でリーダーまたはRaspberry Piからパス番号を受け取り、ACSに渡します。</font><font style="vertical-align: inherit;">ACSは、パス番号がどこから受信されたかさえ知りません。</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ウィーガンド</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これはアクセス制御システムの標準プロトコルであり、ほとんどのリーダーでサポートされています。プロトコルは非常に単純です。2つのデータライン、1つのゼロのラインと1つのユニットのライン。ゼロ線を地面に接続するとすぐに、ユニットと同じようにゼロが送信されることを読者は理解します。つまり、プロトコルには標準化されたタイミングがなく、スキップ数はArduinoの割り込みを介して簡単に読み取ることができ、データシーケンスとして表すのは簡単です。そして、録音にはある種のタイミングが必要なので、これらの値に焦点を合わせました：</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/6aa/d03/ee3/6aad03ee3eb8aa49fab36710af32b342.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Arduino用のライブラリはすでにあります。彼女はさまざまなウィーガンド形式を読み取ることができますが、彼女の機能はこれに制限されています。そして、私はまだ送信する必要がありました。そのため、Wiegand-26形式でのみ機能するライブラリを作成しました。 26はビット数です。スキップ数の3バイトと2つのパリティビットです。さらに、すべてのドキュメントと記事で、おそらく最新のコントローラーはパリティビットを無視するように書かれているため、私は怠惰でそれらを数えませんが、常にゼロを送信します。 ACSはこれを正常に認識します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちは別の問題を抱えていました：誰かが最初にカメラの前に現れ、それから応答を待たずにパスを適用した場合、レース状況が発生しました。同時に、パス番号がリーダーと認識から取得されました。</font><font style="vertical-align: inherit;">ACSはこれに対処できず、人々を入れませんでした。</font><font style="vertical-align: inherit;">したがって、4つのコードを含むリングバッファーをライブラリに追加する必要がありました。</font><font style="vertical-align: inherit;">コードがどこから来たかに関係なく、それらはバッファに配置され、0.5秒のタイムアウトでACSに送信されます。</font><font style="vertical-align: inherit;">それ以来、同僚は許可されていないと不平を言うのをやめました。</font></font><br>
 <br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">テストスタンド</font></font></h1><br>
<img src="https://habrastorage.org/getpro/habr/post_images/158/b78/43f/158b7843fe5152a47f530123a3342908.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初のプロトタイプは恐ろしいものから組み立てられました。 Raspberry Piがとんでもないラックのボックスにぶら下がっており、両面テープの上にカメラが接着されていました。 Arduinoはサイドスクリードにぶら下がっています。一般的に、私たちが愛するものはすべて非常にDIYです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
もちろん、このままでは残せない、美しく発行する必要がありました。私たちはいくつかの請負業者と話をしました、彼らは中国でサンプルを注文することを約束しました、しかしその後すべての合意された締め切りは過ぎました、そして誰も私たちに何も提供しませんでした。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
カスタム製品には1つの問題があります-すべてのソリューションは高度に専門化されており、特に私たちのために作られます。</font><font style="vertical-align: inherit;">まず、サプライヤーに依存するようになります。</font><font style="vertical-align: inherit;">第二に、循環の少ない独自の回路設計が得られるため、1個のコストが高くなります。</font><font style="vertical-align: inherit;">第3に、制作時間は十分に長く、コピーが失敗した場合、店舗ですぐに代替品を購入することはできません。次の印刷が完了するまで待つ必要があります。すぐに行うと、残りのコピーが倉庫にほこりを集めます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべての潜在的なパートナーが私たちを失望させた後、私はVisionの同僚のところに行き、「Volodya、それを美しく見せるために3Dプリンターでケースを印刷させてください。」と言いました。</font><font style="vertical-align: inherit;">彼はため息をついて言った。</font><font style="vertical-align: inherit;">何をすべきか？"</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">カメラV 1</font></font></h1><br>
<img src="https://habrastorage.org/getpro/habr/post_images/6f1/4f0/c61/6f14f0c6132add7dcd3eb753d95e822e.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
フュージョンでは、そんなフランケンシュタインの怪物を描きました。隅にあるのは、イーサネットケーブル用の入力を備えたRaspberry Piでした。パワー用のサイドエントランス。 「2階」はカメラでした。その結果、構造が大きくなり、プラスチックをあまり使わないように薄い層で印刷することさえしました。それはひどく見え、それをぶら下げることはさらに恥ずかしいことでした。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/d5b/8ba/682/d5b8ba6826307a63d09473ef779d646c.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに、同僚からそのような参照が送られてきました。これはできないと答えましたが、別の建物を設計することにしました。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/9f6/668/e5e/9f6668e5e503946ad94e4a75319d4816.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
新しいケースは直径11 cmで、CDよりも小さかった。フィリングの配置も2層です。最初のバージョンを印刷したので、USBカメラ全体を本来のケースに入れるのは意味がないことに気付きました。慎重に分解したところ、フロントパネルに4つの着陸穴があることがわかりました。このパネルをカメラと組み合わせて、ツイーターとLEDを備えた共通のアセンブリにしました。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/031/180/4a4/0311804a49018e3b8f7f84b86caffc22.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初に、gpioを介してRaspberry Piにきしみ音を生成しようとしました。それは非常にひどいことが判明しました。したがって、この機能をRaspberry Piとは別にするために、スクイーカーとLEDがはんだ付けされた小さなarduino（実際にはIskra mini）をTTLを介してブロックに直接接続することにしました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは戦闘での様子です。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/93b/9fe/6ec/93b9fe6ecea2fff3b39c6c60a83240a9.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
デバイスを床に吊り下げました。</font><font style="vertical-align: inherit;">この形で、それは十分に長く生きました。</font><font style="vertical-align: inherit;">きしむ音、美しく光る音、ドアを開ける音。</font><font style="vertical-align: inherit;">しかし、同僚はLEDが明るすぎると不満を述べました。</font><font style="vertical-align: inherit;">私はそれを4回弱めなければなりませんでした。</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">カメラV 2</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それから彼らはこのオプションを作りました：</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/b73/9b4/caf/b739b4caf65d413e545e9f1f1a3bd784.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それはXiaomiハブのデザインに触発され、周囲に発光リングが付いています。</font><font style="vertical-align: inherit;">とても綺麗に見えます。</font><font style="vertical-align: inherit;">ビジョンのロゴは、異なる色のプラスチックで印刷された個々のパーツで作られています。</font><font style="vertical-align: inherit;">モデルは次のとおりです。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/1ea/e91/536/1eae91536fc7fb62bf7b9dc8c4ee24d5.jpg"><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/d70/1ab/64d/d701ab64dc264959923d6c67ce011bd8.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
今回は、背面の壁のきしみを取り除き、LEDを周囲の透明なリングに取り付け、透明なPLAから印刷しました。</font><font style="vertical-align: inherit;">もともとは摩擦で挿入されただけだったので、すぐに内装が崩壊し、接着剤を付けなければなりませんでした。</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">カメラの問題</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この決定を建物全体に再現するというアイデアがありました。</font><font style="vertical-align: inherit;">しかし、問題があります。ほとんどすべてのフロアに2つのドアがあり、それぞれに2つのカメラが必要です。タワーの1つだけに96台のカメラがあり、2番目のタワーは現在活発に開発されています。</font><font style="vertical-align: inherit;">非常に多くのケースを印刷することは可能ですが、すでに複雑に見えます。</font><font style="vertical-align: inherit;">さらに、デバイスには多数のコンポーネントがあるため、多くの障害点があります。</font><font style="vertical-align: inherit;">ソリューションを建物全体に拡大する場合、これらのカメラを常に維持します。</font><font style="vertical-align: inherit;">繰り返しになりますが、各カメラは単一のデバイスであるため、迅速な交換の複雑さです。</font><font style="vertical-align: inherit;">そして、それらを余白を付けて大量に印刷するか、何かが発生した場合はすぐに実行して新しいものを印刷して収集する必要があります。</font><font style="vertical-align: inherit;">DIYソリューションは優れているが、複製にはもっと便利なものが必要であることがわかりました。</font><font style="vertical-align: inherit;">そして、すべてをiPadに転送するというアイデアが生まれました。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">iPad</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
iPadにはいくつかの利点があります。</font><font style="vertical-align: inherit;">最初は画面です。</font><font style="vertical-align: inherit;">フィードバックの欠如について同僚は不満を述べ、彼らは適切であり、認識が始まっているかどうかを理解していない、彼らを待つか待たないかを理解していませんでした。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、iOSには顔認識機能が組み込まれています。</font><font style="vertical-align: inherit;">OpenCVが実行する機能がiPadに渡されました。</font><font style="vertical-align: inherit;">画面に枠が表示されますが、人は顔がこの枠に収まるまで遠くに来る必要があります。</font><font style="vertical-align: inherit;">その後、システムが自動的に認識を開始します。何も押す必要はありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
第三に、iPadは量産品です。</font><font style="vertical-align: inherit;">失敗した場合は、別のものを設定します。</font><font style="vertical-align: inherit;">タブレット自体の価格は約2万ルーブルですが、パートナーから提供されたカスタムカメラよりも安価です。</font><font style="vertical-align: inherit;">さらに、より高速で信頼性が高くなります。</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新しいアーキテクチャ</font></font></h1><br>
<img src="https://habrastorage.org/getpro/habr/post_images/35e/90f/685/35e90f685bd150fcc133f73a24b07cee.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
iPadがほとんどの機能を引き継いだ。サーバールームにあるRaspberry Piには、実際には、パスIDのあるGETリクエストを受け入れるHTTPホストのみがあります。彼はすぐにArduinoでコードをプロキシし、彼女はACSでプロキシします。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初のバージョンでは、Raspberry Piは非常にロードされていました。OpenCVが常にそれに取り組んでいたためです。 2台目のカメラを接続することができなくなったため、十分な計算能力がありませんでした。私たちはすでにそこに正直なコンピューターを置くことを考えました、それは2つのドアから4つのスレッドを解析するでしょう。しかし、それは実現しませんでした。これで、画像内の顔検索が各iPadで個別に実行されます。十字架には、各ドアに1つずつ、2つのArduinoがあります。どちらのボードも、入口と出口のパスで機​​能します。出入国パスを操作することがなぜ重要なのですか？まず、顔が認識されてドアが開くと、カードリーダーの緑色のライトが点灯し、同僚が外出できることがわかります。次に、ACSは入力と出力をログに記録します。入力と出力を別々にエミュレートするため、ACSの操作スキームを壊しません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
当然、デザイナーは美しいインターフェースを思い付きました。</font><font style="vertical-align: inherit;">これは現在、私たちのオフィスのフロアの1つに表示されています。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/t_/mv/27/t_mv273f9oor1vamysoa-hwybxe.jpeg"><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ビジョンを活用する</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MCSはビジネス製品であるという事実にもかかわらず、アマチュアもそれを使用できます。</font><font style="vertical-align: inherit;">このサービスでは、毎月5000件のトランザクション、つまり1日あたり166件を無料で提供しています。</font><font style="vertical-align: inherit;">したがって、もちろん、制限に収まれば、国内のニーズにも対応できます。</font><font style="vertical-align: inherit;">どうやってやるの？</font></font><br>
<br>
<pre><code class="python hljs">python examples/python/smarty.py \<font></font>
-u<font></font>
<span class="hljs-string">"https://smarty.mail.ru/api/v1/persons/recognize
?oauth_provider=mcs&amp;oauth_token=e50b000614a371ce
99c01a80a4558d8ed93b313737363830"</span> \<font></font>
-p friends1.jpg \<font></font>
--meta <span class="hljs-string">'{"space":"1", "create_new":true}'</span> \<font></font>
-v</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
写真を撮って、アクセストークンと一緒にVisionに送信します。</font><font style="vertical-align: inherit;">最初のスペースで作業していることを示し、質問します。</font></font><code>create_new</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">次に、見知らぬ人ごとに、システムが新しい識別子を作成します。</font><font style="vertical-align: inherit;">これが私たちの応答です：</font></font><br>
<br>
<pre><code class="python hljs">{ <span class="hljs-string">"status"</span>:<span class="hljs-number">200</span>, <span class="hljs-string">"body"</span>:{ <span class="hljs-string">"objects"</span>: [ { <span class="hljs-string">"status"</span>:<span class="hljs-number">0</span>, <span class="hljs-string">"name"</span>:<span class="hljs-string">"file_0"</span>, <span class="hljs-string">"persons"</span>:[<font></font>
{<span class="hljs-string">"tag"</span>:<span class="hljs-string">"person1"</span>,<span class="hljs-string">"coord"</span>:[<span class="hljs-number">102</span>,<span class="hljs-number">30</span>,<span class="hljs-number">184</span>,<span class="hljs-number">134</span>],<span class="hljs-string">"confidence"</span>:<span class="hljs-number">0.99999</span>,<span class="hljs-string">"awesomeness"</span>:<span class="hljs-number">0.5025</span>},<font></font>
{<span class="hljs-string">"tag"</span>:<span class="hljs-string">"person2"</span>,<span class="hljs-string">"coord"</span>:[<span class="hljs-number">393</span>,<span class="hljs-number">74</span>,<span class="hljs-number">461</span>,<span class="hljs-number">166</span>],<span class="hljs-string">"confidence"</span>:<span class="hljs-number">0.99987</span>,<span class="hljs-string">"awesomeness"</span>:<span class="hljs-number">0.548</span>},<font></font>
{<span class="hljs-string">"tag"</span>:<span class="hljs-string">"person3"</span>,<span class="hljs-string">"coord"</span>:[<span class="hljs-number">458</span>,<span class="hljs-number">48</span>,<span class="hljs-number">535</span>,<span class="hljs-number">149</span>],<span class="hljs-string">"confidence"</span>:<span class="hljs-number">0.99976</span>,<span class="hljs-string">"awesomeness"</span>:<span class="hljs-number">0.4766</span>},<font></font>
{<span class="hljs-string">"tag"</span>:<span class="hljs-string">"person4"</span>,<span class="hljs-string">"coord"</span>:[<span class="hljs-number">273</span>,<span class="hljs-number">45</span>,<span class="hljs-number">352</span>,<span class="hljs-number">147</span>],<span class="hljs-string">"confidence"</span>:<span class="hljs-number">0.99963</span>,<span class="hljs-string">"awesomeness"</span>:<span class="hljs-number">0.504</span>},<font></font>
{<span class="hljs-string">"tag"</span>:<span class="hljs-string">"person5"</span>,<span class="hljs-string">"coord"</span>:[<span class="hljs-number">525</span>,<span class="hljs-number">81</span>,<span class="hljs-number">600</span>,<span class="hljs-number">184</span>],<span class="hljs-string">"confidence"</span>:<span class="hljs-number">0.99954</span>,<span class="hljs-string">"awesomeness"</span>:<span class="hljs-number">0.4849</span>},<font></font>
{<span class="hljs-string">"tag"</span>:<span class="hljs-string">"person6"</span>,<span class="hljs-string">"coord"</span>:[<span class="hljs-number">194</span>,<span class="hljs-number">76</span>,<span class="hljs-number">258</span>,<span class="hljs-number">167</span>],<span class="hljs-string">"confidence"</span>:<span class="hljs-number">0.9984</span>,<span class="hljs-string">"awesomeness"</span>:<span class="hljs-number">0.5725</span>}<font></font>
] } ], <span class="hljs-string">"aliases_changed"</span>:false }, <span class="hljs-string">"htmlencoded"</span>:false, <span class="hljs-string">"last_modified"</span>:<span class="hljs-number">0</span> }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
JSONを少しフォーマットしました。</font><font style="vertical-align: inherit;">応答には、人物の識別子、写真内の顔の座標、および2つのパラメーターが含まれます。顔がどれだけよく認識されているか、この人物が標準とどのように一致しているかです。</font><font style="vertical-align: inherit;">プログラミング言語の画像を含むPOSTリクエストを送信し、JSONを取得してレスポンスを解析できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
大きな十字架があり、12人だけを決定する必要がある場合は、手動で設定できます。</font><font style="vertical-align: inherit;">次に、システムは身近な人には識別子を提供し、不慣れな人には定義されません。</font><font style="vertical-align: inherit;">また、従業員が退職した場合など、人を選択的に削除することもできます。</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アイデア</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
どのプロジェクトで顔認識を使用できますか？帯域幅システムを実装する場合は、スプーフィング対策について心配する必要があります。たとえば、赤外線カメラを追加して、写真なのか生きている人なのかを判断します。または、2つのカメラを配置してオブジェクトの深度を決定します。これは、OpenCVを使用して行うことができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
入口で人の認識を整理できます。これらがあなたの隣人である場合、すべてが順調であり、誰かが部外者である場合は、自分にアラートを送信できます。私たちの家にはこんな問題があり、見知らぬ人が時々やって来て、着陸時にゴミをたくさん残しています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
「スマートミラー」を作成すると、家族の認識を備えたものにできるため、誰もが彼にとって興味深いものを示すことができます。</font><font style="vertical-align: inherit;">鏡が今日の会議のスケジュールを見せてくれるとしましょう。娘が元気に挨拶し、いつものようにではなく2分間、歯を磨くように提案します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
別のアイデアは、国の自動ゲートによるナンバープレートの認識です。</font><font style="vertical-align: inherit;">外出したり、キーホルダーを押したりしないように、番号を削除するカメラを置くと、ゲートが自動的に開きます。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja473816/index.html">気づかないかもしれない最新のJavaScriptの機能</a></li>
<li><a href="../ja473818/index.html">TSD上のアプリケーションと1Cとの通信：HTTPサービスによるエンタープライズ8.3。パート4（OnKeyUp。キーボードエミュレーション付きSCスキャナー）</a></li>
<li><a href="../ja473822/index.html">1日での求人：同じ日に面接してフィードバックを提供した方法</a></li>
<li><a href="../ja473824/index.html">単一システムで販売計画のためのビジネス技術を構築する方法</a></li>
<li><a href="../ja473826/index.html">Apache WebサーバーでのOTP認証</a></li>
<li><a href="../ja473832/index.html">ShIoTiny：アップデートと通知</a></li>
<li><a href="../ja473834/index.html">Closネットワークでのブラックボックスモニタリング。Yandexレポート</a></li>
<li><a href="../ja473838/index.html">DJI Mavic Mini：最軽量の折りたたみ式クワドロコプター</a></li>
<li><a href="../ja473840/index.html">JAVAアプリケーションでUDPを介してAndroidデバイスからビデオをストリーミングする</a></li>
<li><a href="../ja473842/index.html">10月の機械学習と人工知能のニュースダイジェスト</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>