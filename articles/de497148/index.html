<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏿‍🍳 🕳️ 💃 Erstellen einer Desktop-Anwendung mit Golang und Fyne 👈🏽 🧓🏾 ↪️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Heute werden wir eine Desktop-Anwendung auf Golang entwickeln
 Das Entwickeln einer Golang-Desktop-Anwendung ist nicht gerade eine typische Aufgabe fü...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Erstellen einer Desktop-Anwendung mit Golang und Fyne</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/497148/"><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Heute werden wir eine Desktop-Anwendung auf Golang entwickeln</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Entwickeln einer Golang-Desktop-Anwendung ist nicht gerade eine typische Aufgabe für einen Golang-Programmierer. </font></font><a name="habracut"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es gibt nicht so viele vorgefertigte Open-Source-Bibliotheken, die Google auf Anfrage von Golang Desktop lösen kann. Beispiele dafür, was gefunden wurde:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gotk</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fyne</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gxui</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fyne wurde ausgewählt, da das Github-Repository dieses Projekts die meisten Sterne enthält und auch das berüchtigte Materialdesign unterstützt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mal sehen, welche Optionen für die Anzeige der Schnittstelle es bietet. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die folgenden Widgets sind in der Box verfügbar:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Taste.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ein Container (zum Gruppieren von untergeordneten Widgets und zum horizontalen oder vertikalen Ausrichten).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kontrollkästchen, Felder zur Eingabe von Text oder Passwort.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Formen und Gruppen.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hyperlink.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das Symbol.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das Etikett.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fortschrittsanzeige.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ein scrollbarer Container.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schalter.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wählen</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tabs.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Symbolleiste.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Für den Fall, dass unter den Schnittstellenelementen das erforderliche nicht gefunden wurde, können benutzerdefinierte Widgets mithilfe einer einfachen API implementiert werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lassen Sie uns versuchen, eine Golang-GUI-Anwendung für die Anzeige von Wettervorhersagen für die nächsten Tage mit Fyne zu schreiben. </font><font style="vertical-align: inherit;">Den vollständigen Anwendungscode finden Sie unter dem Link auf github. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Erstellen Sie zunächst ein leeres Projekt auf Golang und installieren Sie Fyne.</font></font><br>
<br>
<pre><code class="bash hljs">go get fyne.io/fyne</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Da die Anwendung Wetterinformationen anzeigt, müssen Sie diese Informationen abrufen. </font><font style="vertical-align: inherit;">Wenden Sie sich dazu an die Open Weather Map API.</font></font><br>
<br>
<pre><code class="go hljs"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">getWeatherForecast</span><span class="hljs-params">(result <span class="hljs-keyword">interface</span>{})</span> <span class="hljs-title">error</span></span> {
  <span class="hljs-keyword">var</span> url = fmt.Sprintf(<span class="hljs-string">"https://api.openweathermap.org/data/2.5/forecast?q=Voronezh&amp;cnt=4&amp;units=metric&amp;appid=%s"</span>, openWeatherMapApiKey) <span class="hljs-comment">//    </span><font></font>
  response, err := http.Get(url)<font></font>
  <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {<font></font>
     fmt.Print(err)<font></font>
  }<font></font>
  <span class="hljs-keyword">defer</span> response.Body.Close()
  <span class="hljs-keyword">return</span> json.NewDecoder(response.Body).Decode(result)<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zum Speichern von Daten können Sie die folgende Struktur verwenden (darin habe ich nur einige der von der API zurückgegebenen Felder belassen). Beachten Sie, dass alle Felder der Struktur groß geschrieben sind, in der API-Antwort jedoch mit einer kleinen beschrieben werden.</font></font><br>
<br>
<pre><code class="go hljs"><span class="hljs-keyword">type</span> WeatherInfo <span class="hljs-keyword">struct</span> {<font></font>
  List []WeatherListItem <span class="hljs-string">`json:list`</span><font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">type</span> WeatherListItem <span class="hljs-keyword">struct</span> {<font></font>
  Dt      <span class="hljs-keyword">int</span>           <span class="hljs-string">`json:dt`</span>
  Main    WeatherMain   <span class="hljs-string">`json:main`</span>
  Weather []WeatherType <span class="hljs-string">`json:weather`</span><font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">type</span> WeatherMain <span class="hljs-keyword">struct</span> {<font></font>
  Temp      <span class="hljs-keyword">float32</span> <span class="hljs-string">`json:temp`</span>
  FeelsLike <span class="hljs-keyword">float32</span> <span class="hljs-string">`json:feels_like`</span>
  Humidity  <span class="hljs-keyword">int</span>     <span class="hljs-string">`json:humidity`</span><font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">type</span> WeatherType <span class="hljs-keyword">struct</span> {<font></font>
  Icon <span class="hljs-keyword">string</span> <span class="hljs-string">`json:icon`</span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt können wir Wetterdaten in Form einer Struktur empfangen. Es bleibt die Implementierung der Golang-Desktop-Anwendungsoberfläche.</font></font><br>
<br>
<pre><code class="go hljs"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">setupUi</span><span class="hljs-params">(weatherInfo WeatherInfo)</span></span> {<font></font>
  app := app.New()<font></font>
<font></font>
  w := app.NewWindow(<span class="hljs-string">"   "</span>)<font></font>
<font></font>
  <span class="hljs-keyword">var</span> vBox = widget.NewVBox() <span class="hljs-comment">//        </span><font></font>
<font></font>
  <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-built_in">len</span>(weatherInfo.List); i++ {
     <span class="hljs-keyword">var</span> weatherForDay = weatherInfo.List[i] <span class="hljs-comment">//     </span>
     <span class="hljs-keyword">var</span> weatherMainGroup = widget.NewVBox(<font></font>
        widget.NewLabel(fmt.Sprintf(<span class="hljs-string">": %.2f °C"</span>, weatherForDay.Main.Temp)),<font></font>
        widget.NewLabel(fmt.Sprintf(<span class="hljs-string">" : %.2f °C"</span>, weatherForDay.Main.FeelsLike)),<font></font>
        widget.NewLabel(fmt.Sprintf(<span class="hljs-string">": %d%%"</span>, weatherForDay.Main.Humidity)),<font></font>
     ) <span class="hljs-comment">//  3    </span><font></font>
<font></font>
     <span class="hljs-keyword">var</span> weatherTypeGroup = widget.NewVBox()
     <span class="hljs-keyword">for</span> weatherTypeI := <span class="hljs-number">0</span>; weatherTypeI &lt; <span class="hljs-built_in">len</span>(weatherForDay.Weather); weatherTypeI++ {
        <span class="hljs-keyword">var</span> resource, _ = fyne.LoadResourceFromURLString(fmt.Sprintf(<span class="hljs-string">"http://openweathermap.org/img/wn/%s.png"</span>, weatherForDay.Weather[weatherTypeI].Icon)) <span class="hljs-comment">//   ,   </span>
        <span class="hljs-keyword">var</span> icon = widget.NewIcon(resource)<font></font>
        weatherTypeGroup.Append(icon)<font></font>
     }<font></font>
<font></font>
     <span class="hljs-keyword">var</span> time = time2.Unix(<span class="hljs-keyword">int64</span>(weatherInfo.List[i].Dt), <span class="hljs-number">0</span>).String()<font></font>
     vBox.Append(widget.NewGroup(time)) <font></font>
     vBox.Append(widget.NewHBox(weatherMainGroup, weatherTypeGroup))<font></font>
  }<font></font>
  vBox.Append(widget.NewButton(<span class="hljs-string">""</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {<font></font>
     app.Quit()<font></font>
  }))<font></font>
<font></font>
  w.SetContent(vBox) <span class="hljs-comment">//    </span><font></font>
<font></font>
  w.ShowAndRun() <span class="hljs-comment">//   </span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier erstellen wir unsere Widgets, füllen sie mit Daten und sammeln sie in Gruppen, um die Reihenfolge zu organisieren, in der sie angezeigt werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Erledigt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es bleibt nur, um die Anwendung auszuführen und zu sehen, wie sie aussieht. </font><font style="vertical-align: inherit;">Da das Framework plattformübergreifend ist, können Sie es sowohl unter Windows als auch unter MacOS und Linux ausführen. </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/d36/269/9d6/d362699d6e617cfdd88314cff903ffc2.png" alt="Bild"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gestartete Golang Mac OS-Anwendung </font></font></i><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/6af/19d/18b/6af19d18b2c51392eba592f3c55264fb.png" alt="Bild"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Und es sieht aus wie eine Golang Windows-Anwendung.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Als Ergebnis stellte sich heraus, dass eine einfache plattformübergreifende Golang-Desktop-Anwendung erstellt und Fyne in Aktion ausprobiert wurde. </font><font style="vertical-align: inherit;">Leider ist go als geeignete Sprache für die Entwicklung moderner Desktop-Anwendungen kaum in Betracht zu ziehen. In der Praxis ist es jedoch immer interessant, etwas Neues und Ungewöhnliches zu berühren. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vielen Dank für Ihre Aufmerksamkeit.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de497136/index.html">"Save Concord" oder ein Bericht aus den Tests des russischen Radarsystems zur Suche nach Fremdkörpern auf der Landebahn</a></li>
<li><a href="../de497140/index.html">Entschlüsselung von Daten in der CAN-Bus VW Polo Limousine</a></li>
<li><a href="../de497142/index.html">Wie wir der inDriver Android-Anwendung Harmony OS-Unterstützung hinzugefügt haben</a></li>
<li><a href="../de497144/index.html">Keil für Keil: Verwendung des PIV5-Virus zur Herstellung eines Impfstoffs gegen MERS-CoV und möglicherweise gegen SARS-CoV-2</a></li>
<li><a href="../de497146/index.html">Angewandte Kryptographie. Wie wir Bitcoins für 300.000 Dollar restaurierten</a></li>
<li><a href="../de497152/index.html">Wo das Produktherz lebt: Metriken zur Messung des Glücks</a></li>
<li><a href="../de497166/index.html">Ein Versuch, die Mehrdimensionalität der M-Theorie zu verstehen</a></li>
<li><a href="../de497170/index.html">So speichern Sie Datenverkehr auf einem Webserver</a></li>
<li><a href="../de497174/index.html">Udalenka als Bedrohung</a></li>
<li><a href="../de497178/index.html">"1C: ERP" und "1C: CRM": Funktionalität und vergleichende Analyse von Konfigurationen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>