<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üìê üÖ±Ô∏è ‚èÆÔ∏è Die Lokalisierung eines QR-Codes ist eine wichtige Aufgabe, die zu Unrecht der Aufmerksamkeit beraubt wird üîà üí• üì∑</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Wir sind sicher, dass es heute keinen einzigen Habr-Leser gibt, der mit QR-Codes nicht vertraut w√§re. Diese zweidimensionalen Barcodes sind √ºberall. E...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Die Lokalisierung eines QR-Codes ist eine wichtige Aufgabe, die zu Unrecht der Aufmerksamkeit beraubt wird</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/smartengines/blog/496528/"><img src="https://habrastorage.org/webt/5g/mo/eg/5gmoegkwyn0bmh_t_kewswuiboc.png" width="250" align="right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir sind sicher, dass es heute keinen einzigen Habr-Leser gibt, der mit QR-Codes nicht vertraut w√§re. Diese zweidimensionalen Barcodes sind √ºberall. Es ist logisch, dass es weltweit viele Tools gibt, mit denen Sie Ihrem Projekt QR-Codes mit einem gewissen Grad an Effizienz hinzuf√ºgen k√∂nnen. Der springende Punkt ist, dass diese erw√§hnte Effizienz direkt von der Qualit√§t des Werkzeugs abh√§ngt, mit dem QR-Codes erkannt werden. Und hier kommt der klassische Stecker: Sie k√∂nnen das Problem (sehr) gut und (sehr) teuer l√∂sen, oder Sie k√∂nnen es kostenlos und irgendwie. Ist es m√∂glich, das freie so zu modifizieren, dass es das Problem trotzdem gut l√∂st? Bei Interesse unter die Katze schauen.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Erkennen eines QR-Codes auf einem Foto ist eine gut gestellte Aufgabe der Bildverarbeitung. Zun√§chst wird in der Aufgabe ein Objekt untersucht, das urspr√ºnglich speziell f√ºr die ‚Äûbequeme‚Äú Erkennung entwickelt wurde. Zweitens ist die Aufgabe selbst in mehrere unabh√§ngige verst√§ndliche Unteraufgaben unterteilt: Lokalisierung des QR-Codes, Ausrichtung des QR-Codes und direkte Dekodierung des QR-Codes. Es stellte sich heraus, dass die Public Domain seit langem gute Bibliotheken hat, die die letzten beiden Probleme l√∂sen k√∂nnen: Orientierung und Dekodierung eines QR-Codes. Ein Problem: F√ºr eine qualitativ hochwertige Decodierung erwarten solche Bibliotheken, dass ein gutes Bin√§rbild direkt vom Barcode eingegeben wird. Umgekehrt wird der Aufgabe der Barcode-Lokalisierung im Bild wenig Aufmerksamkeit geschenkt.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nach unserer Erfahrung ist es umso einfacher, die richtigen Vorverarbeitungswerkzeuge auszuw√§hlen und tats√§chlich zu erkennen, je genauer Sie ein Erkennungsobjekt lokalisieren. Wenn Sie daher die Qualit√§t der Erkennung von QR-Codes in Ihrem Projekt verbessern m√∂chten, beginnen Sie mit der Modernisierung der Methoden zur Lokalisierung von QR-Codes. Selbst wenn Sie sp√§ter ein Bild bin√§risieren m√ºssen, ist es viel effizienter (sowohl aus rechnerischer als auch aus qualitativer Sicht), eine Region mit einem Barcode zu binarisieren als das gesamte Originalbild. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In diesem Artikel erfahren Sie, wie Sie die Qualit√§t der Lokalisierung von QR-Codes mithilfe klassischer Bildverarbeitungsmethoden auf einfache Weise verbessern und numerische Merkmale f√ºr die Wirksamkeit des vorgeschlagenen Algorithmus bereitstellen k√∂nnen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir werden √ºber die urspr√ºngliche Art der Lokalisierung von QR-Codes auf Bildern sprechen, wobei die modifizierte Viola- und Jones-Methode als Grundlage dient.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hinweis zum Thema des Artikels</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In diesem Abschnitt beschreiben wir die Hauptmerkmale des QR-Codes, die zum Erstellen der Lokalisierungsmethode verwendet werden, sowie eine kurze Beschreibung der Originalversion der Viola- und Jones-Methode.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">QR-Code</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der QR-Code (kurz f√ºr Quick Response Code) ist ein zweidimensionaler Barcode, der Mitte der 90er Jahre in Japan f√ºr die Automobilindustrie entwickelt wurde. </font><font style="vertical-align: inherit;">Aufgrund der F√§higkeit zum schnellen Lesen und der gr√∂√üeren Kapazit√§t im Vergleich zu linearen Barcodes ist das QR-Code-System in verschiedenen Lebensbereichen weltweit beliebt geworden.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Gegensatz zu linearen Standard-Barcodes, die normalerweise von Hardware gescannt werden, wird ein QR-Code h√§ufig von einer Kamera gescannt. </font><font style="vertical-align: inherit;">Die Struktur des QR-Codes ist vollst√§ndig in ISO / IEC 18004 (ISO / IEC-Norm 18004) beschrieben. </font><font style="vertical-align: inherit;">Um einen robusten Erkennungsalgorithmus f√ºr solche Bilder zu erstellen, verf√ºgt der QR-Code √ºber einige Referenzpunkte, die ein Funktionsmuster bilden: drei Quadrate in den Ecken des Barcode-Bildes (als Finder-Muster bezeichnet) und kleinere Synchronisationsquadrate im gesamten Barcode-Bild (als Ausrichtungsmuster bezeichnet). . </font><font style="vertical-align: inherit;">Mit solchen Punkten k√∂nnen Sie die Bildgr√∂√üe und ihre Ausrichtung normalisieren.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/qp/ut/kn/qputknsphjra1c0nwyoxpfnwniy.png"><br>
<p><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Feige. </font><font style="vertical-align: inherit;">QR-Code-Struktur</font></font></i></p><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Obwohl visuell alle QR-Codes einander √§hnlich sind, k√∂nnen unterschiedliche Kopien von QR-Codes abh√§ngig von der Menge der codierten Daten ein unterschiedliches Layout der internen Elemente aufweisen. </font><font style="vertical-align: inherit;">Dar√ºber hinaus sind die sogenannten Designer-QR-Codes sehr beliebt, bei denen anstelle des Teils zus√§tzlicher Informationen, die eine qualitativ hochwertige Erkennung des Barcodes gew√§hrleisten, grafische Elemente von Drittanbietern (Logos, Embleme, Inschriften usw.) verwendet werden. </font><font style="vertical-align: inherit;">Alle diese Merkmale von QR-Codes m√ºssen bei der Erstellung von Methoden zur Lokalisierung und Erkennung von QR-Codes ber√ºcksichtigt werden.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/1k/f2/f0/1kf2f024blycs3yruzzsk3cnxr0.png"><br>
<br>
<p><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Feige. </font><font style="vertical-align: inherit;">Verschiedene g√ºltige QR-Code-Optionen</font></font></i></p><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Viola und Jones Methode</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nur die Faulen auf Habr√© haben noch nicht √ºber die Methode von Viola und Jones geschrieben. Sogar wir in unserem Block haben dies mehrmals getan (zum Beispiel </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> oder </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). Und dennoch halten wir es f√ºr notwendig, sehr kurz, buchst√§blich in zwei Abs√§tzen, zu sagen, was es ist. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Objekterkennungsmethode von Viola und Jones wurde entwickelt, um in Echtzeit in einem Bild nach Gesichtern zu suchen. Dieses Verfahren reduziert das Erfassungsproblem auf das bin√§re Klassifizierungsproblem an jedem Bildpunkt, d. H. F√ºr jeden rechteckigen Bildbereich, der mit allen Arten von Verschiebungen und Skalen aufgenommen wurde, wird die Hypothese des Vorhandenseins des gew√ºnschten Objekts in dem Bereich unter Verwendung eines vorab trainierten Klassifizierers √ºberpr√ºft.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als Merkmalsraum verwendet die Viola- und Jones-Methode rechteckige Haar-Merkmale, deren Wert als Differenz zwischen den Helligkeitssummen der Pixel der Bildbereiche innerhalb benachbarter Rechtecke berechnet wird. Um den Wert von Haar-Merkmalen effektiv zu berechnen, wird ein integriertes Bild verwendet, das in der Literatur auch unter dem Begriff Summenbereichstabelle bekannt ist. Ein bin√§rer "schwacher" Klassifikator </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">h</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ): </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Œß</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ‚Üí {-1, + 1}, normalerweise als Erkennungsbaum mit einem Zweig dargestellt: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/y7/ly/se/y7lyseencrhtwi3hefy1xsl3kya.png" width="237"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
wobei </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Œ∏</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- der Schwellenwert des Attributs bzw. die Parit√§t des Klassifikators. </font><font style="vertical-align: inherit;">Als n√§chstes wird unter Verwendung der AdaBoost-Methode f√ºr maschinelles Lernen ein "starker" Klassifikator als lineare √úberlagerung der obigen "schwachen" Klassifikatoren konstruiert. </font><font style="vertical-align: inherit;">Die hohe Geschwindigkeit der Viola- und Jones-Methode wird durch die Verwendung einer Kaskade von ‚Äûstarken‚Äú Klassifizierern sichergestellt, die es erm√∂glicht, ‚Äûleere‚Äú (objektfreie) Bildbereiche in einer kleinen Anzahl von Berechnungen zu lokalisieren.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">QR-Code-Erkennungsalgorithmus</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bei der Erstellung einer Methode zum Lokalisieren eines QR-Codes haben wir uns auf die folgenden Funktionen der Aufgabe verlassen. Erstens muss die entwickelte Methode eine hohe Leistung f√ºr die Verwendung in Erkennungssystemen aufweisen, die in Echtzeit arbeiten. Zweitens muss das Verfahren gegen zul√§ssige Verzerrungen des Barcodes im Bild best√§ndig sein. Drittens sollte die Methode die gesamte vorhandene Variabilit√§t der QR-Codes ber√ºcksichtigen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie oben erw√§hnt, haben wir die Methode von Viola und Jones als grundlegende Methode gew√§hlt. Diese Methode hat sich bei verschiedenen Aufgaben der Suche nach starren Objekten bew√§hrt, w√§hrend die Methode die erforderliche Leistung bietet. In der Originalversion kann die Viola- und Jones-Methode jedoch aus folgenden Gr√ºnden nicht verwendet werden:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bei der klassischen Methode von Viola und Jones wird eine Familie von Haar-Attributen verwendet, die die Texturmerkmale des Objekts ‚Äûhervorheben‚Äú. In unserem Fall unterscheidet sich ihre Verteilung vom Barcode zum Barcode stark, obwohl der QR-Code aus schwarzen und wei√üen Strichcodes besteht.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die klassische Viola- und Jones-Methode ist f√ºr die gleiche Art der Erkennung von Objekten in einer bestimmten Ausrichtung ausgelegt, die auch in unserer Aufgabe nicht beobachtet wird.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Damit die Viola- und Jones-Methode zur L√∂sung des Problems angewendet werden kann, verwenden wir die urspr√ºngliche Familie von Grenzmerkmalen und einen √ºbergeordneten Klassifikator in Form eines Entscheidungsbaums. </font><font style="vertical-align: inherit;">Die erste Modifikation erm√∂glicht es, sich auf die Grenzmerkmale des untersuchten Objekts und nicht auf die Textur zu konzentrieren. </font><font style="vertical-align: inherit;">Mit der zweiten √Ñnderung k√∂nnen Sie einen einzelnen Klassifizierer erstellen, der variable Objekte erkennen kann. </font><font style="vertical-align: inherit;">Als n√§chstes werden wir Ihnen etwas mehr √ºber jede √Ñnderung erz√§hlen.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gradientenzeichen von Haar.</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um einen effektiven Detektor f√ºr QR-Codes zu erstellen, haben wir eine spezielle Familie von Gradientenmerkmalen verwendet [1]. </font><font style="vertical-align: inherit;">Diese Zeichen sind Haar-Rechteckzeichen, die √ºber der Karte der gerichteten Grenzen berechnet werden und deren Generalisierungskraft erheblich verbessern k√∂nnen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Karte der Richtungsgrenzen ist ein Bild des Gradientenmoduls, das zus√§tzlich die Vorzugsrichtung des Gradienten am Punkt ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) </font><font style="vertical-align: inherit;">ber√ºcksichtigt </font><font style="vertical-align: inherit;">, definiert als Diskretisierung des Randwinkels in horizontale, vertikale, + 45 ¬∞ - und ‚Äì45 ¬∞ -Richtungen. </font><font style="vertical-align: inherit;">Um einen QR-Code-Detektor zu erstellen, haben wir zwei Arten von Richtungsgrenzkarten verwendet: eine gerade Grenzkarte und eine diagonale Fl√§chenkarte. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lassen Sie das Originalbild </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">f</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ,</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). Anschlie√üend k√∂nnen Sie den ungef√§hren Wert der Ableitung entlang der horizontalen und vertikalen Richtung mit dem Sobel-Operator </font><font style="vertical-align: inherit;">berechnen </font><font style="vertical-align: inherit;">: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/pf/yg/_p/pfyg_pwalnr_vdg6dm-fi_jnv9o.png" width="466"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zus√§tzlich k√∂nnen Sie mit </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">g </font></font></i><sub><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x</font></font></i></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">g </font></font></i><sub><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y</font></font></i></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> die Richtung des Verlaufs an jedem Punkt des Bildes berechnen: Die </font></font><br>
<br>
<img src="https://habrastorage.org/webt/28/7w/w1/287ww1jnk9sr3fbrtgsr-q4ygoc.png" width="301"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Karte der geraden R√§nder enth√§lt haupts√§chlich horizontale und vertikale R√§nder und wird wie folgt berechnet: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vi/bj/ie/vibjieyjzpf4rmokqrwozdru7ba.png" width="328"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Karte Diagonale R√§nder enthalten haupts√§chlich R√§nder entlang der Diagonalen und werden wie folgt berechnet: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/kg/zy/zy/kgzyzyc1owgaxci7skuiotoirw4.png" width="405"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Auf der konstruierten Karte der gerichteten R√§nder (diagonal oder gerade) werden rechteckige Haarzeichen berechnet. Im Gegensatz zu den klassischen Haar-Merkmalen verallgemeinern solche Grenzmerkmale Brunnenobjekte, die eine gro√üe Anzahl von Grenzen enthalten.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/mv/mo/fd/mvmofd__pwr9myrhvp4xxh9-_gi.png"><br>
<br>
<p><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Feige. </font><font style="vertical-align: inherit;">Darstellung einer Karte gerichteter R√§nder: (a) das Originalbild eines QR-Codes, (b) eine Karte gerader R√§nder, (c) ein Bild eines gedrehten QR-Codes (d) eine Karte der diagonalen R√§nder eines gedrehten QR-Codes</font></font></i></p><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der entscheidende Baum starker Klassifikatoren</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Baum der starken Klassifizierer [2] ist eine Art bin√§rer Entscheidungsbaum: Der Baumknoten ist ein starker Klassifizierer, an dessen rechtem Rand sich vermutlich Unterfenster befinden, die das Objekt enthalten, und am linken Rand diejenigen, die nicht als Objekt erkannt wurden. </font><font style="vertical-align: inherit;">Die endg√ºltige Antwort wird nur in Bl√§ttern gegeben. </font><font style="vertical-align: inherit;">Der klassische Kaskadenklassifikator, der in der Originalarbeit von Viola und Jones beschrieben wurde, ist in der Tat ein Baumklassifikator, der nur eine ‚Äûpositive‚Äú Ausgabe (Blatt) und viele ‚Äûnegative‚Äú Ausgaben enth√§lt.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In [2] wird gezeigt, dass jeder Pfad von der Wurzel zum untersten Knoten des Baumklassifikators als eine Kaskade dargestellt werden kann, in die einzelne starke Klassifikatoren mit einer invertierten Antwort eintreten. </font><font style="vertical-align: inherit;">Dank dessen ist es m√∂glich, einen Lernalgorithmus f√ºr den Baumklassifikator zu konstruieren, der das Trainingsverfahren des klassischen Kaskadenklassifikators verwendet, um einzelne Pfade zu lehren. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mit dem Baumklassifikator k√∂nnen Sie Klassifikatoren trainieren, die hinsichtlich der Vollst√§ndigkeit f√ºr variable Objekte im Vergleich zu klassischen Kaskadenklassifikatoren effektiver sind.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Experimentelle Ergebnisse</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Rahmen eines Experiments zur Bewertung der Wirksamkeit der in diesem Artikel vorgeschlagenen Barcode-Lokalisierungsmethode wurde ein Satz von Barcode-Bildern aus 264 Bildern erstellt. </font><font style="vertical-align: inherit;">Die physikalische Gr√∂√üe der Bilder betrug etwa 1 MPix. </font><font style="vertical-align: inherit;">Jedes Bild enth√§lt nur einen QR-Code in beliebiger Ausrichtung, der Barcode-Bereich betrug mindestens 10% des gesamten Bildbereichs. </font><font style="vertical-align: inherit;">Die folgende Abbildung zeigt Beispiele f√ºr Bilder aus dem zusammengesetzten Set.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/rb/vv/bd/rbvvbdyp8t7mffaqa38b4olv-_m.png"><br>
<br>
<p><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Feige. </font><font style="vertical-align: inherit;">Beispiele f√ºr Bilder aus dem zusammengestellten Barcode-Bildsatz</font></font></i></p><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der vorbereitete Satz von Bildern wurde in einen Trainingssatz und einen Testsatz unterteilt. Die Gr√∂√üe der Trainingsprobe betrug 88 Bilder, die Gr√∂√üe der Testprobe betrug 176 Bilder. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Trainingsset wurde sowohl zur Vorbereitung positiver als auch zur Vorbereitung negativer Beispiele verwendet. Da die anf√§ngliche Anzahl positiver Beispiele gering war, verwendeten wir die Datenerweiterungstechnologie [3]. Insbesondere haben wir die Drehung um die Mitte des Barcodes in Schritten von 15 ¬∞ angewendet. Nach der Augmentation betrug die Anzahl der positiven Beispiele 2088 Beispiele.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anhand der gleichen positiven und negativen Beispiele haben wir drei QR-Code-Detektoren trainiert: einen klassischen Kaskadenklassifikator mit Standard-Haar-Merkmalen, einen klassischen Kaskadenklassifikator mit Grenzmerkmalen und einen Baumklassifikator mit Grenzmerkmalen. </font><font style="vertical-align: inherit;">Der erste Kaskadenklassifikator bestand aus 12 Ebenen und enthielt insgesamt 58 Attribute. </font><font style="vertical-align: inherit;">Der zweite Kaskadenklassifikator bestand aus 8 Ebenen und enthielt insgesamt 39 Attribute. </font><font style="vertical-align: inherit;">Der trainierte Baumklassifikator bestand aus 39 Eckpunkten, enthielt insgesamt 110 Zeichen und der maximale Pfad von oben zum Blatt betrug 9. Unten sehen Sie ein Diagramm des trainierten Baumklassifikators.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/0e/pp/rx/0epprxrwsrqho130ykkanqj_cs8.png"><br>
<br>
<p><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Feige. </font><font style="vertical-align: inherit;">Schema des trainierten Baumklassifikators</font></font></i></p><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um die Qualit√§t der konstruierten QR-Code-Detektoren zu beurteilen, verwendeten wir das Barcode-Decodierungsmodul aus der OpenCV-Open-Source-Computer-Vision-Bibliothek. </font><font style="vertical-align: inherit;">Auf dem vorbereiteten Testsatz von Bildern (der, wie oben erw√§hnt, aus 176 Bildern bestand) haben wir das Decodierungsmodul ohne spezielle Vorverarbeitung sowie nach einer vorl√§ufigen Suche nach QR-Codes unter Verwendung geschulter Detektoren gestartet. </font><font style="vertical-align: inherit;">Nachfolgend sind die Ergebnisse der Barcode-Dekodierung aufgef√ºhrt:</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nein.</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Experimenteller Titel</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anzahl der dekodierten Bilder</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dekodierungsqualit√§t</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nur OpenCV</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">104</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">59,09%</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VJ (Graustufenfunktionen, Cascade Classifier) ‚Äã‚Äã+ OpenCV</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">105</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">59,66%</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VJ (Edge Features, Cascade Classifier) ‚Äã‚Äã+ OpenCV</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">123</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">69,89%</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VJ (Edge Features, Tree Classifier) ‚Äã‚Äã+ OpenCV</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">136</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">77,27%</font></font></td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Tabelle zeigt, dass die vorl√§ufige Lokalisierung des QR-Codes unter Verwendung des beschriebenen Verfahrens die Qualit√§t der Barcode-Decodierung erheblich verbessern kann (die Anzahl der Decodierungsfehler verringerte sich um 44%). Dar√ºber hinaus zeigen die Ergebnisse auch, dass die Anwendung der urspr√ºnglichen Viola- und Jones-Methode (mit klassischen Haar-Merkmalen und einem kaskadierenden Klassifikator) bei der Lokalisierung von QR-Codes nicht effektiv ist.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nun wollen wir sehen, wie genau jeder Klassifikator den Barcode lokalisiert. </font><font style="vertical-align: inherit;">Die Abbildung von links nach rechts zeigt die Ergebnisse der Erkennung desselben Barcodes mit einem klassischen Kaskadenklassifikator mit Standard-Haar-Merkmalen, einem klassischen Kaskadenklassifikator mit Grenzmerkmalen und einem Baumklassifikator mit Grenzmerkmalen. </font><font style="vertical-align: inherit;">Es ist ersichtlich, dass der Baumklassifizierer die beste Genauigkeit der Barcode-Lokalisierung bietet, indem er die Variabilit√§t von QR-Codes ber√ºcksichtigt.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/o-/um/wr/o-umwrnaxpniz5oziynxxm-bjja.png"><br>
<br>
<p><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Feige. </font><font style="vertical-align: inherit;">Illustration der Arbeit von geschulten Detektoren auf dem gleichen Bild</font></font></i></p><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fazit</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Heutzutage werden QR-Codes in verschiedenen Lebensbereichen verwendet: in der Werbebranche zum Codieren von URLs, im staatlichen Segment als Teil elektronischer Dienste usw. </font><font style="vertical-align: inherit;">Trotz der extrem hohen Verbreitung solcher Barcodes konzentrieren sich die vorhandenen Open Source-Bibliotheken auf den Decodierungsprozess und nicht auf das Lokalisierungsproblem. </font><font style="vertical-align: inherit;">Um ehrlich zu sein, bestand der wahre Zweck dieses Artikels nicht darin, eine effektive Methode zur Lokalisierung von QR-Codes zu beschreiben, sondern vielmehr darin, Ihnen, lieber Leser, zu erkl√§ren, wie Sie mithilfe von wissenschaftlichem Denken und Systemanalyse verstehen, wie Sie mit klassischen digitalen Bildverarbeitungswerkzeugen umgehen k√∂nnen Bibliotheken bringen auf das eigentliche industrielle Niveau. </font><font style="vertical-align: inherit;">Vielen Dank f√ºr Ihre Aufmerksamkeit.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Liste der verwendeten Quellen</font></font></b><div class="spoiler_text">[1] A.A. Kotov, S.A. Usilin, S.A. Gladilin, and D.P. Nikolaev, ‚ÄúConstruction of robust features for detection and classification of objects without characteristic brightness contrasts,‚Äù Journal of information technologies and computing systems, 1, 53-60, (2014).<br>
[2] A. Minkina, D. Nikolaev, S. Usilin, and V. Kozyrev, ‚ÄúGeneralization of the Viola-Jones method as a decision tree of strong classifiers for real-time object recognition in video stream,‚Äù in Seventh International Conference on Machine Vision (ICMV 2014), 9445, International Society for Optics and Photonics, (2015), doi:10.1117/12.2180941.<br>
[3] D. P. Matalov, S. A. Usilin, and V. V. Arlazarov, ‚ÄúModification of the viola-jones approach for the detection of the government seal stamp of the russian federation,‚Äù in Eleventh International Conference on Machine Vision (ICMV 2018), 11041, International Society for Optics and Photonics, (2019), doi:10.1117/12.2522793.</div></div></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de496510/index.html">Wie man NICHT ein Game Designer wird</a></li>
<li><a href="../de496512/index.html"># 05 - Und ein ganzes Byte reicht nicht ... | Anime</a></li>
<li><a href="../de496514/index.html">IPIP IPsec VPN-Tunnel zwischen Linux-Maschine und Mikrotik hinter NAT-Provider</a></li>
<li><a href="../de496516/index.html">Telegrammbot in Python gegen COVID-19</a></li>
<li><a href="../de496518/index.html">Wie sind wir zur Fernbedienung gekommen?</a></li>
<li><a href="../de496532/index.html">Wir √ºberpr√ºfen uns selbst: Bereitstellung und Verwaltung von 1C: Dokumentenfluss innerhalb des 1C-Unternehmens</a></li>
<li><a href="../de496536/index.html">DeepCode: Seitenansicht</a></li>
<li><a href="../de496538/index.html">Fraktale in Python. Exemplarische Vorgehensweise</a></li>
<li><a href="../de496542/index.html">Der Internetverkehr in Europa ist eineinhalb Mal gewachsen. Backbone-Anbieter zeichnen Ladedatens√§tze auf</a></li>
<li><a href="../de496544/index.html">Online-Hackathon von Projekten f√ºr Selbstst√§ndige: 500 Tausend Rubel f√ºr ihre Ideen und Unterst√ºtzung durch den Bundessteuerdienst</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>