<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üôÜüèø ‚ò£Ô∏è üë®üèø‚Äçüíº So verbessern Sie die Arbeit mit Microsoft Remote Desktop ü§∑üèø üë©üèæ‚Äçü§ù‚Äçüë®üèª ü§¥üèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ich m√∂chte einige Tipps zum Einrichten einer Remoteverbindung zu Arbeitsstationen √ºber RDP geben. Ich werde Ihnen sagen, wie Sie das alte RPC-HTTP auf...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>So verbessern Sie die Arbeit mit Microsoft Remote Desktop</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/501132/"><img src="https://habrastorage.org/webt/dx/s8/wi/dxs8wiugrbhaov1gzied15gldk8.png" align="left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ich m√∂chte einige Tipps zum Einrichten einer Remoteverbindung zu Arbeitsstationen √ºber RDP geben. Ich werde Ihnen sagen, wie Sie das alte RPC-HTTP auf UDP aktualisieren, Windows 10 und AVC loben und schelten. Ich werde eine L√∂sung f√ºr einige typische Probleme finden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir glauben, dass Remotedesktop-Gateway (RDGW) f√ºr die Verbindung verwendet wird und Workstations als Server fungieren. Die Verwendung von RDGW ist sehr praktisch, da das Gateway zu einem gemeinsamen Einstiegspunkt f√ºr alle Clients wird. Dies erm√∂glicht eine bessere Kontrolle des Zugriffs, Aufzeichnungen √ºber Verbindungen und deren Dauer. Selbst wenn Sie mit dem VPN eine direkte Verbindung zu Arbeitsmaschinen herstellen k√∂nnen, ist dies nicht die beste Option. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
RDGW ist schnell, einfach zu konfigurieren und Let's Encrypt und Win-Acme l√∂sen das Problem einfach mit einem vertrauensw√ºrdigen Zertifikat.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gibt drei Transportprotokolle, √ºber die der Client eine Verbindung zum Server herstellen kann: </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RPC-HTTP</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><font color="red"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">schlecht</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HTTP</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><font color="orange"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">besser</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HTTP + UDP</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><font color="green"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ausgezeichnet</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mit Server meinen wir eine funktionierende Maschine, mit einem Client - zu Hause. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das erste, was Sie anfangen m√ºssen, ist, "schlecht" in "ausgezeichnet" zu verwandeln.</font></font><br>
<a name="habracut"></a><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aktualisieren Sie RPC-HTTP auf HTTP</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Verbindung zu einer Sitzung √ºber RPC-HTTP l√§sst sich leicht anhand des Erscheinungsbilds des Verbindungsstreifens feststellen. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/7w/-0/aa/7w-0aativt247pvbumddqkf4epg.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gibt kein Symbol f√ºr die Verbindungsqualit√§t (siehe unten), was bedeutet, dass wir den alten, in TLS verpackten RPC verwenden - dies ist sehr langsam. </font><font style="vertical-align: inherit;">Der Punkt liegt nat√ºrlich nicht nur im Wrapper - das Protokoll selbst √§ndert sich mit jeder Version des Betriebssystems, Codecs und Bildverpackungsalgorithmen √§ndern sich. </font><font style="vertical-align: inherit;">Je frischer das Protokoll, desto besser. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Was zu tun ist?</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Windows XP oder Vista</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In XP k√∂nnen Sie das Protokoll von 5.1 auf 7 </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">erh√∂hen</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Der </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">WindowsXP-kb969084-x86.exe-Hotfix.</font></a></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
In Vista von 6 auf 7. Der Hotfix hat dieselbe Nummer: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Windows6.0-kb969084-x64.msu oder Windows6.0-KB969084-x86-Dateien .msu</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
RDP 7 funktioniert jedoch nicht √ºber HTTP und UDP. Nur ein Upgrade des Clients und des Servers auf Windows 7 und h√∂her hilft. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Windows 7</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Zuerst m√ºssen Sie das Protokoll auf RDP 8.1 aktualisieren und dann aktivieren. Unterst√ºtzung wird durch Updates hinzugef√ºgt , </font><font style="vertical-align: inherit;">die in einem einzigen Download - </font><font style="vertical-align: inherit;">Paket gruppiert sind: </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.microsoft.com/en-US/download/details.aspx?id=40986</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Windows6.1-KB2574819-v2-x64.msu </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
windows6.1-kb2592687-x64.msu </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Windows6.1-KB2830477-x64.msu </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Windows6.1-KB2857650-x64.msu </font></font><br>
<s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Windows6.1-KB2913751-x64.msu</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (ersetzt durch kb2923545)</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">windows6.1-kb2923545-x64.msu</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Sie erhalten also sowohl den neuen mstsc.exe-Client als auch RDP 8.1-Unterst√ºtzung f√ºr die Serverseite des Betriebssystems. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es war: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/yx/37/pl/yx37plxdymw73eubymzh1v0zgzm.png"><br>
<br>
<img src="https://habrastorage.org/webt/r1/kh/ip/r1khiphuyrmxmmodab_ecjiktiq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es wurde: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/rt/9v/dj/rt9vdjdnfmus27h9nyn7ctpyp7g.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Danach muss das Protokoll mit dem Registrierungsschl√ºssel aktiviert werden (hierf√ºr k√∂nnen Sie die mit Windows 7 mitgelieferte Adm-Vorlage verwenden).</font></font><br>
<br>
<pre><code class="powershell hljs">[<span class="hljs-type">HKEY_LOCAL_MACHINE</span>\<span class="hljs-type">SOFTWARE</span>\<span class="hljs-type">Policies</span>\<span class="hljs-type">Microsoft</span>\<span class="hljs-type">Windows</span> <span class="hljs-type">NT</span>\<span class="hljs-type">Terminal</span> <span class="hljs-type">Services</span>]
<span class="hljs-string">"fServerEnableRDP8"</span>=dword:<span class="hljs-number">00000001</span><font></font>
 <font></font>
[<span class="hljs-type">HKEY_LOCAL_MACHINE</span>\<span class="hljs-type">SOFTWARE</span>\<span class="hljs-type">Wow6432Node</span>\<span class="hljs-type">Policies</span>\<span class="hljs-type">Microsoft</span>\<span class="hljs-type">Windows</span> <span class="hljs-type">NT</span>\<span class="hljs-type">Terminal</span> <span class="hljs-type">Services</span>]
<span class="hljs-string">"fServerEnableRDP8"</span>=dword:<span class="hljs-number">00000001</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aktivieren Sie die UDP-Transportunterst√ºtzung in Gruppenrichtlinien. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/bg/_t/ds/bg_tdse5uudrekmylffvhh_gqzq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir starten den Server mit Windows 7 neu. Der gleiche Fall, in dem Sie m√∂glicherweise zweimal neu starten m√ºssen - der Wert in der Registrierung muss festgelegt werden, bevor RDP aktiviert wird, und Gruppenrichtlinien werden sp√§ter angewendet. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn alles </font><font style="vertical-align: inherit;">
geklappt </font><font style="vertical-align: inherit;">hat, wird beim Herstellen einer Verbindung zum Server ein Symbol f√ºr die Verbindungsqualit√§t (wie in einem Telefon f√ºr ein Mobilfunknetz) in der Sitzungsleiste angezeigt: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/8b/_0/ok/8b_0okltugyxpizhhcydchtsve8.png"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Windows 8 und h√∂her Das</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Protokoll funktioniert sofort.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aktualisieren Sie HTTP auf HTTP + UDP</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Ihr Netzwerk nicht anf√§llig f√ºr Paketverluste ist, verbessert UDP die Serverreaktivit√§t erheblich (f√ºr CAD - drastisch), indem </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FEC verwendet wird</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , um die erneute √úbertragung zu reduzieren, und die Best√§tigung der Paketzustellung vom TCP / IP-Systemstapel auf die RDP-UDP-Protokollebene umgeschaltet wird. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Von jedem Client ist eine Hauptsteuerungssitzung √ºber HTTP verbunden (in diesem Kanal wird auch eine Tastatur / Maus √ºbertragen) sowie eine oder mehrere UDP-Sitzungen zum √úbertragen eines Bildes oder anderer virtueller Kan√§le.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir werden nur die Spitze des Eisbergs ber√ºhren. Es gibt 3 verschiedene Versionen des RDP-UDP-Protokolls. Dar√ºber hinaus kann UDP selbst in zwei Modi betrieben werden: UDP-R (zuverl√§ssig) und UDP-L (verlustbehaftet). Mit Microsoft passiert nichts. Aber da hier nichts von uns abh√§ngt, denken Sie daran - je neuer das Betriebssystem, desto moderner wird das Thema. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Drau√üen ist RDP-UDP in DTLS (Datagram Transport Layer Security) RFC4347 eingeschlossen, wie Sie durch √ñffnen von Wireshark sehen k√∂nnen. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Weitere Details in den Dokumenten: </font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[MS-RDPEMT]: Remotedesktopprotokoll: Multitransporterweiterung </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[MS-RDPEUDP]: Remotedesktopprotokoll: UDP-Transporterweiterung </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[MS-RDPEUDP2]: Remotedesktopprotokoll: UDP-Transporterweiterung Version 2</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Wo falsch, richtig Bitte sch√∂n.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Was ben√∂tigen Sie, um UDP zu aktivieren? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
RDP-UDP wird ab RDP 8 unterst√ºtzt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der udp / 3389-Port muss auf dem Client ge√∂ffnet sein. Wenn Sie es mit einer lokalen Firewall, einer ACL auf dem Switch oder einer externen Firewall geschlossen haben, muss der Port ge√∂ffnet sein. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√ñffnen Sie f√ºr den Remotedesktop-Gateway-Server zum TCP / 443-Port udp / 3391. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Port kann wie folgt konfiguriert werden: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/o6/n0/w3/o6n0w3fmookrhmxaqomyx8wretk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
F√ºr Windows 7 muss NLA (Network Level Authentication) aktiviert sein. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/nt/kz/ny/ntkznyeqsvsh3msad2u59_rxcck.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kann in Gruppenrichtlinien </font></font><br>
<br>
<img src="https://habrastorage.org/webt/my/hj/sw/myhjswie2h7znzjoamnhf6clzq4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
oder √ºber die Registrierung </font><font style="vertical-align: inherit;">aktiviert </font><font style="vertical-align: inherit;">werden</font></font><br>
<br>
<pre><code class="powershell hljs">[<span class="hljs-type">HKEY_LOCAL_MACHINE</span>\<span class="hljs-type">SYSTEM</span>\<span class="hljs-type">CurrentControlSet</span>\<span class="hljs-type">Control</span>\<span class="hljs-type">Terminal</span> <span class="hljs-type">Server</span>\<span class="hljs-type">WinStations</span>\<span class="hljs-type">RDP</span>-<span class="hljs-type">Tcp</span>]
<span class="hljs-string">"SecurityLayer"</span>=dword:<span class="hljs-number">00000001</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Was ist die Verbindung ist nicht klar. Aber ohne NLA auf 7-ke funktioniert nicht, bei neueren Versionen von NLA f√ºr Arbeit ist UDP nicht erforderlich. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nach dem Einrichten einer Sitzung √ºber HTTP </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">versuchen</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Client und Server </font><i><font style="vertical-align: inherit;">,</font></i><font style="vertical-align: inherit;"> eine UDP-Verbindung auszuhandeln. Wenn es zu einem Paketverlust oder einer Verz√∂gerung kommt, wird die UDP-Sitzung nicht gestartet. Der genaue Fehleralgorithmus f√ºr die UDP-Aushandlung ist nicht vollst√§ndig bekannt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn alles konfiguriert ist, klicken Sie nach dem Verbinden auf die Schaltfl√§che Linkqualit√§t. Das Fenster zeigt an, dass UDP ausgehandelt wird. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/d7/y4/jx/d7y4jx5ubs4i9zop5myyzg21oyo.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Auf dem Gateway sieht es so aus: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/oc/ld/7n/ocld7nbslu8dt_fjahnvd-zqvso.png"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Windows 10</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie Windows 10 sowohl auf dem Server als auch auf dem Client haben, ist dies die schnellste und problemloseste Option. Microsoft stellt RDP aktiv fertig, und in den neuesten Versionen 10 k√∂nnen Sie sich auf eine gute Geschwindigkeit verlassen. Kollegen konnten den Unterschied zwischen Citrix und Windows 10 RDP in der AutoCAD-Geschwindigkeit nicht erkennen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gibt einen guten Artikel √ºber die Entwicklung von AVC-basierten RDP-Codecs in Windows 10 </font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Remote Desktop Protocol (RDP) 10 AVC / H.264-Verbesserungen in Windows 10 und Windows Server 2016 Technische Vorschau Die</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
√úbereinstimmung von AVC mit der Hardwarecodierung finden Sie im Ereignisprotokoll (weitere Informationen finden Sie im obigen Artikel). ):</font></font><br>
<br>
<img src="https://habrastorage.org/webt/kf/4_/_n/kf4__nmejj4amr9nctpufhwfb6a.png"><br>
<br>
<img src="https://habrastorage.org/webt/ld/rn/ld/ldrnldvgbclldmcr2f8pxoztfxo.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich stelle nur fest, dass es auch bei h.264 4: 4: 4 immer noch ein Verzerrungsproblem gibt. </font><font style="vertical-align: inherit;">Wenn Sie in PowerShell ISE arbeiten, f√§llt dies sofort auf - der Fehlertext wird mit unangenehmer Verzerrung angezeigt. </font><font style="vertical-align: inherit;">Au√üerdem ist im Screenshot und auf dem Foto alles in Ordnung. </font><font style="vertical-align: inherit;">Magie. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein indirektes Zeichen f√ºr die Arbeit von AVC sind von Zeit zu Zeit gr√ºne Quadrate in den Ecken. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die AVC- und Hardware-Codierung in neuen Builds sollte sofort funktionieren, aber Gruppenrichtlinien sind niemals √ºberfl√ºssig: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/pn/hc/uo/pnhcuobl3frw-p4pfodd9xr_tsa.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Da AVC mit einer Grafikkarte hardwarecodiert ist, ist die Aktualisierung von Grafiktreibern eine gute Idee.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√úber Probleme</font></font></h1><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XP und Vista</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Wenn das Problem unter Windows XP oder Vista auftritt, aktualisieren Sie zuerst das Protokoll auf Version 7 (geschrieben am Anfang des Artikels). Stellen Sie sicher, dass die CredSSP-Unterst√ºtzung aktiviert ist. Microsoft hat bereits Artikel auf der Website gel√∂scht, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aber das Internet erinnert sich</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn es nicht hilft, "spricht der Arzt mit der Leichenhalle, dann mit der Leichenhalle." Was das Betriebssystem in den letzten 15 Jahren erlebt hat, ist besser, nicht einmal dar√ºber nachzudenken. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NLA</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Manchmal hilft es, NLA auf dem Server zu deaktivieren. Es hat die Ursache nicht gekl√§rt, die Heimautos sind alle unterschiedlich. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NTLM</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Einige Clients versuchen, sich mit NTLMv1 anzumelden. Die Gr√ºnde sind unterschiedlich, aber Sie k√∂nnen es auf dem Client folgenderma√üen beheben:</font></font><br>
<br>
<pre><code class="powershell hljs">[<span class="hljs-type">HKEY_LOCAL_MACHINE</span>\<span class="hljs-type">SYSTEM</span>\<span class="hljs-type">CurrentControlSet</span>\<span class="hljs-type">Control</span>\<span class="hljs-type">Lsa</span>]
<span class="hljs-string">"LmCompatibilityLevel"</span>=dword:<span class="hljs-number">00000003</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein Neustart ist erforderlich. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jung sind und mutig</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Angst vor nichts haben, gibt es eine radikalere L√∂sung: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Deaktivieren der Kanalbindung</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> auf dem Remotedesktop-Gateway</font></font><br>
<br>
<pre><code class="powershell hljs">HKLM\Software\Microsoft\Windows NT\CurrentVersion\TerminalServerGateway\Config\Core
<span class="hljs-built_in">Type</span>: REG_DWORD<font></font>
Name: EnforceChannelBinding<font></font>
Value: <span class="hljs-number">0</span> (Decimal)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie m√ºssen dies nicht tun. </font><font style="vertical-align: inherit;">Aber wir haben es getan. </font><font style="vertical-align: inherit;">:-) F√ºr einen Kunden, der darauf bestand (nicht falsch, darauf bestanden), dass NTLMv1 auf Workstations ben√∂tigt wird. </font><font style="vertical-align: inherit;">Ich wei√ü nicht, vielleicht sind noch Server auf NT4 ohne SP in Betrieb. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Deaktivieren von RDP 8+ in Windows 10</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Wenn alles andere fehlschl√§gt und die Ideen ausgehen, k√∂nnen Sie das RDP-Protokoll mit dem undokumentierten Schl√ºssel auf Version 7 herunterstufen.</font></font><br>
<br>
<pre><code class="powershell hljs">[<span class="hljs-type">HKEY_CURRENT_USER</span>\<span class="hljs-type">Software</span>\<span class="hljs-type">Microsoft</span>\<span class="hljs-type">Terminal</span> <span class="hljs-type">Server</span> <span class="hljs-type">Client</span>]
<span class="hljs-string">"RDGClientTransport"</span>=dword:<span class="hljs-number">00000001</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich habe es nicht selbst gemacht und rate dir nicht. Aber jemandem schreiben sie, dass es hilft. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DrWeb Die Dr.Web</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
SpIDerGate-Komponente verhindert m√∂glicherweise die Verbindung. In diesem Fall wird ein Fehler zur√ºckgegeben: </font></font><br>
<img src="https://habrastorage.org/webt/fs/76/zj/fs76zj-otc0v-v_qxkkwa0gviwo.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In der Dr.Web-Statistik wird ein Datensatz angezeigt </font><font style="vertical-align: inherit;">: </font><font style="vertical-align: inherit;">Ein Dr.Web- </font></font><br>
<img src="https://habrastorage.org/webt/ik/fe/qy/ikfeqyljaepzhnieksw4qsomh6y.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mitarbeiter hat mich in den Kommentaren zu diesem Artikel kontaktiert, und unser Problem wurde beim n√§chsten Update der Antiviren-Datenbanken behoben. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie den gleichen Fehler haben, wenden Sie sich am besten an den Support. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als vor√ºbergehende L√∂sung k√∂nnen Sie die URL Ihres RDGW zu den Ausnahmen hinzuf√ºgen: </font></font><br>
<img src="https://habrastorage.org/webt/7c/do/k-/7cdok-2f6-4f2jj-bhlmjwqd2tq.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und nur, wenn dies nicht dazu </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">beigetragen hat, die SpIDer Gate-Komponente vollst√§ndig</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> zu </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">deaktivieren</font></a><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Systemproxy Ich</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
habe einen stillgelegten Computer einer Firma getroffen, bei dem ein lokales TMG als Systemproxy registriert war und die Verbindung zu RDGW nicht funktionierte. Dies kann folgenderma√üen behoben werden:</font></font><br>
<br>
<pre><code class="powershell hljs">netsh winhttp show proxy &amp;&amp; netsh winhttp reset proxy</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wechseln der Tastaturlayouts</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Manchmal kommen zus√§tzliche Layouts. </font><font style="vertical-align: inherit;">Sie k√∂nnen die Layoutweiterleitung vom Client aus deaktivieren</font></font><br>
<pre><code class="powershell hljs">[<span class="hljs-type">HKLM</span>\<span class="hljs-type">System</span>\<span class="hljs-type">CurrentControlSet</span>\<span class="hljs-type">Control</span>\<span class="hljs-type">Keyboard</span> <span class="hljs-type">Layout</span>]
<span class="hljs-string">"IgnoreRemoteKeyboardLayout"</span>=dword:<span class="hljs-number">00000001</span></code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DPI-Probleme Die</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Skalierung erfolgt vom Client-Computer. Wenn sie auf dem Heim-Laptop 125% kostet, ist sie auf dem Arbeitscomputer gleich. </font><font style="vertical-align: inherit;">Auf Servern kann dies deaktiviert werden, aber auf Workstations konnte ich nicht finden, wie. </font><font style="vertical-align: inherit;">Der Windows 10 App Store verf√ºgt jedoch √ºber einen </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚Äûmodernen‚Äú Client</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie k√∂nnen DPI darin konfigurieren:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ig/dz/sm/igdzsmxjjsxc7bsmrixgkbachpm.png"><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">So √ºberwachen Sie ein Gateway mit RDGW</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gibt einen Leistungsindikator "TS Gateway \ Current Connections", der etwas fehlerhaft ist, wenn keine Verbindungen bestehen oder der Server l√§ngere Zeit nicht neu gestartet wurde. Es zeigt genau die Anzahl der Verbindungen, aber wie wir uns erinnern, gibt es f√ºr HTTP + UDP mindestens zwei und m√∂glicherweise mehr. Daher ist dies kein vollst√§ndig objektiver Indikator f√ºr die Anzahl der Mitarbeiterverbindungen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gibt eine WMI-Klasse Win32_TSGatewayConnection. Der Inhalt entspricht dem, was Sie im Abschnitt √úberwachung des Remotedesktop-Gateways sehen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Damit kann die Anzahl der Verbindungen genauer berechnet werden:</font></font><br>
<br>
<pre><code class="powershell hljs"><span class="hljs-built_in">Get-WmiObject</span> <span class="hljs-literal">-class</span> <span class="hljs-string">"Win32_TSGatewayConnection"</span> <span class="hljs-literal">-namespace</span> <span class="hljs-string">"root\cimv2\TerminalServices"</span> 
|?{<span class="hljs-variable">$_</span>.transportprotocol <span class="hljs-operator">-ne</span> <span class="hljs-number">2</span>}|<span class="hljs-built_in">select</span> username,connectedresource|<span class="hljs-built_in">sort</span> username|<span class="hljs-built_in">Get-Unique</span> <span class="hljs-literal">-AsString</span>| <span class="hljs-built_in">measure</span>|<span class="hljs-built_in">select</span> <span class="hljs-literal">-ExpandProperty</span> count
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nur zum Spa√ü gibt es ein </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Remote Display Analyzer-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Dienstprogramm </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Die kostenlose Version hat mir nichts N√ºtzliches gezeigt, aber pl√∂tzlich wird es f√ºr jemanden n√ºtzlich sein. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aber was ist mit der Feinabstimmung, der Einstellung einiger Dutzend Sitzungsparameter? </font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier gilt das Pareto-Prinzip: 20% der Bem√ºhungen ergeben 80% des Ergebnisses. </font><font style="vertical-align: inherit;">Wenn Sie bereit sind, Ihre Zeit in die verbleibenden 20% des Ergebnisses zu investieren - ausgezeichnet. </font><font style="vertical-align: inherit;">Denken Sie daran, dass Sie beim Lesen eines Artikels √ºber das Einrichten eines Protokolls in Windows 7 nicht wissen, √ºber welches Protokoll der Autor geschrieben hat - 7, 8 oder 8.1. </font><font style="vertical-align: inherit;">Wenn Sie √ºber Windows 10 lesen, ohne eine Version anzugeben, sind die Probleme dieselben. </font><font style="vertical-align: inherit;">Sie schreiben beispielsweise, dass in neuen Builds von Windows 10 der AVC / h.264-Codec in RDPGFX_CODECID_AVC444 </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ge√§ndert </font><font style="vertical-align: inherit;">wurde und in Windows Server 2016 RDPGFX_CODECID_AVC444 erhalten bleibt.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Von all diesen Tipps verwenden wir nur zwei Einstellungen:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">16-Bit-Farbe finden Sie im Artikel </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MS RDP-Leistung / Bandbreitennutzung</font></font></a></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Deaktivieren der </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schriftgl√§ttung Schriftgl√§ttung: i: 0</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> im obigen Artikel oder </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Leistungsoptimierung Remotedesktop-Sitzungshosts</font></font></a></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich bezweifle, dass sie ein greifbares Ergebnis liefern. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir sind also am Ende des Artikels angelangt. </font><font style="vertical-align: inherit;">Ich wollte k√ºrzer sein, aber es stellte sich wie immer heraus. </font><font style="vertical-align: inherit;">Ich bin froh, wenn diese Tipps jemandem helfen, Zeit zu sparen oder die Konfiguration seiner Infrastruktur zu verbessern.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de501118/index.html">Hurra (Oh nein) - udalenka</a></li>
<li><a href="../de501120/index.html">Was ist ein Google Ads Data Hub?</a></li>
<li><a href="../de501126/index.html">Problem Nr. 38: IT-Schulung - aktuelle Probleme und Herausforderungen f√ºhrender Unternehmen</a></li>
<li><a href="../de501128/index.html">Warum VR-Entwicklung nicht zu Ihnen passt</a></li>
<li><a href="../de501130/index.html">Halt and Catch Fire - ein Team, das eine Anpassung verdient</a></li>
<li><a href="../de501134/index.html">Wie das GitLab QA-Team das GitLab Performance Tool verwendet</a></li>
<li><a href="../de501138/index.html">10 Online-Events, an denen Sie am 2. Mai teilnehmen k√∂nnen</a></li>
<li><a href="../de501140/index.html">Erh√∂hung der Parser-Loyalit√§t von Serverdaten unter iOS</a></li>
<li><a href="../de501142/index.html">Verwenden Sie einen Ziffernblock?</a></li>
<li><a href="../de501144/index.html">Ist es m√∂glich, das Gehirn mit Ton zu hacken?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>