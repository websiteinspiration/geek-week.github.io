<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üìá ü§ôüèº üö∑ How to organize the backend of a mobile application? üè∞ ‚õπüèΩ üë©‚Äçüîß</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="What are we doing? User registration and authorization service for a mobile application
 
 In pet projects of each mobile developer, sooner or later t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>How to organize the backend of a mobile application?</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/493762/"><img src="https://habrastorage.org/webt/cx/ck/zj/cxckzjwahn-3ez4gx8w1tlrzspq.jpeg" alt="image"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What are we doing? User registration and authorization service for a mobile application</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
In pet projects of each mobile developer, sooner or later there comes a time when you need to quickly and without too much headache create a server for your application. It does not matter what function the server should perform: whether it is data storage or user registration / authorization. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">As a rule, in the beginning everyone goes (well, or most) along the path of least resistance.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> We are looking for a turnkey solution and see how quickly it can be adapted to our needs.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
At this stage, the first thing that you can ‚Äúgoogle‚Äù is Firebase services, the free limits of which are more than enough to organize the backend of a small mobile application. </font><font style="vertical-align: inherit;">But in this case, considering exactly the Russian developer, we risk stepping on the rake of our legislation - cross-border data transfer and storage of the user's personal data. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
(Federal Law 152 ‚ÄúOn Personal Data‚Äù, Article 12, Chapter 2) The </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
temptation to use Firebase is great, but if we want to insure ourselves against unnecessary fuss with various supervisory agencies, we begin to look at alternative options.</font></font><br>
<a name="habracut"></a><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The next stage is the use of a VDS server with some kind of open-source or freemium solution, where the ready-made ‚Äúservice-as-a-service‚Äù or a solution allowing to deploy similar functionality is taken as the basis.</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Several years ago on Habr√© I already wrote a detailed BaasBox setup guide (the article was removed from the public due to outdated information) on a rented server and gave an example of using various calls in the iOS application for the Objective C language. But BaasBox is really ‚Äúheavy weight‚Äù and dictates your minimum for a rented server. Having played a little with him, it was decided to use a different solution. At that time, the Parse-server was only recently put into open-source development by Facebook, it did not have as many adapters as it is currently, but its capabilities were more than enough for personal projects and applications of private customers (many projects are still exist and work stably).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In fairness, it is worth noting that parse-server has matured very much and is actively developing. At the moment, almost all the functionality that was available in a commercial ancestor has been recreated. You can write your own hooks, localized push notifications, a process manager, and there is even a subscription for changing objects based on sockets (ParseLiveQuery - if it‚Äôs interesting, I‚Äôll write a separate article on setting up ParseLiveQuery).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But parse-server ceased to be interesting precisely at the moment when it was required to implement a non-standard data type, which is difficult to work on the basis of types defined in the system. It also interferes with the fact that, not being a specialized server developer, I previously did not attach importance to more efficient deployment of the environment and many configuration files were made by hand, while the actions were constantly repeated on each new server. It is at this moment that the understanding comes that a boxed solution is not a solution to all problems, and you should proceed to the next stage of organizing your server for a mobile application. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Recently, my main development language is Swift.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Therefore, it is he who is of interest to me primarily in writing server-side code. </font><font style="vertical-align: inherit;">Swift itself is easy to install on a unix system, but it will not give any obvious advantages. </font><font style="vertical-align: inherit;">At its core, it will resemble the development of a console application with complex logic. </font><font style="vertical-align: inherit;">It will take a lot of time to recreate the basic methods required in the server. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">As in many other languages, server side swift has its own frameworks and communities involved in the development of these solutions. </font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
At the moment, there are three most significant solutions for developing server side swift:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Perfect</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vapor </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kitura</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
There are other options, but they are not worth mentioning because of their long-stopped development and their death. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In terms of documentation and support, I like Vapor more, but it's a matter of taste. Other solutions will be close to someone. One way or another, in many moments they are similar. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Naturally, further throughout the cycle of articles in my examples I will use Vapor. Based on it, we implement the user registration / authorization service, sending and confirming email, the ability to reset and change the password. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vw/cb/al/vwcbalyvknowex3y_gfdmut4gzg.png" alt="image"><img src="https://habrastorage.org/webt/3p/vg/os/3pvgos4ozvoxeqhby2co5gd53b8.png" alt="image"><br>
<img src="https://habrastorage.org/webt/tj/r3/qb/tjr3qbenlq1jqhmuwfasf4mduqq.png" alt="image"><img src="https://habrastorage.org/webt/hj/kb/vy/hjkbvy9ei-pojewwbv4z6ywnu84.png" alt="image"><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Is it worth doing an implementation without practical benefit?</font></font></b> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Probably no! Therefore, we will make the most adult service that you can take and use to organize the logic for storing user data on your server.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If the decision is adult, then it entails the use of deliberate decisions. </font><font style="vertical-align: inherit;">We must simplify the scaling, implement data validation and provide for the storage of the user session, so as not to force him to enter his username and password each time. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What do we need for this?</font></font></b><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VAPOR 4 (yes, still in beta, but the release is coming soon, as the developers promised)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PostgreSQL (there is an excellent adapter for working with this database)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nginx</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SSL (close all our requests from the client to the server using a certificate)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Localhost (consider the development method locally, so as not to get attached to the network and work on the road without any problems)</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Well, we </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">will pack all this in Docker</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> to ensure the same work, independent of the current runtime environment. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Honestly, I was skeptical of the docker at one time, but I should have looked more closely at this technology. The purpose of the article is not to explain his work and to learn how to work with him (I suspect that I myself still have to learn many interesting features of the docker). But those who don‚Äôt know what it is and how to work with it, can independently get acquainted with Docker through the official link: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.docker.com</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Looking ahead, I‚Äôll leave a useful link to the Kitematic application, which is designed to simplify the work with docker containers : </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kitematic.com</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (must have for those who do not like to use the terminal).</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">So, let's start by installing Docker on a mac-computer: </font></font></b><font style="vertical-align: inherit;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">Follow the</font></a></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
link </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hub.docker.com/editions/community/docker-ce-desktop-mac</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> link </font><font style="vertical-align: inherit;">and download </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Get Docker Desktop For Mac (Stable).</font></font></b><br>
<br>
<img src="https://habrastorage.org/webt/-2/kn/cl/-2knclw93ax6stjjuiijrsr02fq.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Open the resulting image and then install nothing differs from the standard copying of the application to the program directory. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ea/0o/t1/ea0ot1fxqjce-px54lvazivob7q.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
After that, just start the application and wait until the service is fully initialized. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/tc/fp/pc/tcfppc1iaj4q8ozy5cpgfziywfo.png" alt="image"><img src="https://habrastorage.org/webt/yp/_h/1s/yp_h1sn62l0sbk0fugzerwpqyhe.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If there is no Docker ID yet, then it should be created on </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hub.docker.com.</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> And if there is, then simply log in to the application. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/wy/xv/iq/wyxviqdri5ynenssj2-oayiy5mi.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
That's all, the preparation for using Docker is complete. It remains only to check the current version and information about the environment. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&gt; docker version </font></font><br>
<img src="https://habrastorage.org/webt/8g/yb/_k/8gyb_kqje0p5rsbelsf9wpzf9fm.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&gt; docker info</font></font><br>
<img src="https://habrastorage.org/webt/oc/g5/x1/ocg5x1slt4bmqm4srhm7adobq2i.png" alt="image"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This completes the preparation for the development of the authorization service. </font><font style="vertical-align: inherit;">In the next part, we will see how you can use containers of various services, we will deal with docker-compose to automate the assembly of our environment and begin to write code. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PS: A little advice from personal experience. </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">When we develop services on our local machine, Docker allocates default resources for our use. </font><font style="vertical-align: inherit;">If we want to visualize the expected behavior of the service on a remote server, we should take care of the resources on the local machine, as close as possible to the characteristics of the server. </font><font style="vertical-align: inherit;">You can do this in the settings of the Docker Desktop application, which we downloaded: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/hs/h9/ds/hsh9dspn18hwwbsqywrj-hjjuds.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Article author: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vitaly Podolsky, HackerU teacher</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en493752/index.html">CAPTCHA for codeigniter 4</a></li>
<li><a href="../en493754/index.html">Logistics. Part 1. Optimization of air traffic in directions and schedule formation</a></li>
<li><a href="../en493756/index.html">How to launch a startup in foreign markets during quarantine: Reddit, Product Hunt, resources in Latin America</a></li>
<li><a href="../en493758/index.html">Artificial intelligence will first create a corpus of ancient Slavic manuscripts</a></li>
<li><a href="../en493760/index.html">Li-Ion technology: unit cost decreases faster than predicted</a></li>
<li><a href="../en493768/index.html">React Native Listing</a></li>
<li><a href="../en493772/index.html">Top 10 Kubernetes Tips and Tricks</a></li>
<li><a href="../en493774/index.html">Optimization of cloud services in AnyConnect VPN tunnel on Cisco ASA</a></li>
<li><a href="../en493790/index.html">Where did COVID-19 come from, and how to deal with it?</a></li>
<li><a href="../en493792/index.html">Reports of the second ROS Meetup on robot navigation</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>