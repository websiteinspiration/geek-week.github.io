<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🚴🏽 🕗 🧜 Cara cepat menangkap dunia atau mengelola jaringan komputer windows menggunakan OPSI 🛠️ ☔️ 👩‍🏭</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Penafian: 
 Penulis menyukai kruk pendek dan lurus, dan juga sangat menyukai perangkat lunak terbuka gratis untuk fleksibilitas dan skalabilitas yang ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Cara cepat menangkap dunia atau mengelola jaringan komputer windows menggunakan OPSI</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/497826/"><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Penafian: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Penulis menyukai kruk pendek dan lurus, dan juga sangat menyukai perangkat lunak terbuka gratis untuk fleksibilitas dan skalabilitas yang diberikannya. </font><font style="vertical-align: inherit;">Tujuan artikel ini adalah keinginan untuk mempromosikan, serta berbicara tentang sistem manajemen perangkat lunak OPSI (Open PC Server Integration), yang tidak dikenal di Internet Rusia.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya sedang duduk di kantor dan minum kopi ketika Ilon Mask memanggil saya dan dalam bahasa Rusia murni mengatakan kepada saya bahwa sudah cukup untuk menahannya, sudah waktunya untuk mengumpulkan pikiran terbaik untuk melawan virus tertentu, dan untuk itu sekarang, lima menit kemudian saya masuk kantor akan membawa 100 komputer, yang saya perlu segera gunakan windows 10, dan besok pagi para ilmuwan dari seluruh dunia akan datang ke kantor untuk mulai bekerja pada antivirus. </font><font style="vertical-align: inherit;">Nah, bukankah itu yang saya tunggu-tunggu seumur hidup? </font><font style="vertical-align: inherit;">Tantangan yang layak untuk alat yang bagus.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk mengimplementasikan rencana tersebut, saya akan menggunakan sistem OPSI - Open PC Server Integration. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
OPSI ditulis dengan python di Jerman dan, tampaknya, kruk, gratis dan skalabilitas juga sangat menyukainya. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fitur sistem dasar:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Penerapan perangkat lunak otomatis </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ini berfungsi seperti ini: Anda menganalisis penginstal dan membuat paket opsi darinya, yang menginstal program dengan cara yang benar. </font><font style="vertical-align: inherit;">Ia bekerja paling baik dengan paket-paket msi, ia tahu beberapa format lagi yang juga diatasi. </font><font style="vertical-align: inherit;">Itu dapat menjalankan file bat atau skrip PowerShell, tetapi pada prinsipnya, setiap penerjemah. </font><font style="vertical-align: inherit;">Ada built-in sistem registry, secara umum, isian penuh, mungkin bagian terbaik dari sistem.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Instalasi otomatis sistem operasi </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya hanya menggunakan instalasi dari gambar, sebagai yang tercepat, tetapi ada opsi dengan instalasi sistem offline dari awal.</font></font></li>
<li>   <br>
<br>
         ,          ,       ,      ,      windows.  ,   ,    windows,    ,          . </li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Beberapa antarmuka manajemen yang mudah digunakan dengan opsi integrasi fleksibel </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ada program dengan antarmuka grafis, ada antarmuka http yang dapat Anda kirimi perintah, Anda dapat mengontrol OPSI dari konsol server, menanamkan perintah dalam skrip, Anda dapat mengakses backend dari python, tapi saya, sayangnya , sementara aku tidak memiliki sihir seperti itu.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dukungan untuk beberapa server depot (server yang berisi secara langsung perangkat lunak dari mana penyebaran sedang berlangsung). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anda dapat menambahkan banyak server ke setiap subnet atau grup komputer, yang masing-masing akan melayani jaringannya sendiri.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fitur sistem diimplementasikan oleh modul (ada modul gratis dan berbayar):</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Konektor LDAP (berbayar) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Konektor yang menghubungkan domain dan opsi menjadi satu kesatuan</font></font></li>
<li>  ()<br>
<br>
     : , ...</li>
<li>MySQL  () <br>
<br>
  OPSI  mysql   ,  300 </li>
<li>Nagios  ()<br>
<br>
 </li>
<li>   ()<br>
<br>
 , opsi      ,   ,      .</li>
<li>    ()<br>
<br>
    .</li>
<li>  ()<br>
<br>
  ,   ,      ,  . ,    ansible  puppet,    .    linux  windows      .</li>
<li>WAN  ()<br>
<br>
        ,   . </li>
<li>   ()<br>
<br>
 </li>
<li>OTRS::ITSM  ()<br>
<br>
  </li>
<li>   ()<br>
<br>
 ,      ,            ,   «   »,  ,  . </li>
</ol><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anda dapat mempelajari lebih lanjut di sini.</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Model monetisasi yang mereka miliki adalah sebagai berikut: mereka menjual modul hingga mereka mengumpulkan jumlah untuk membebaskannya. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sementara komputer dibawa ke kantor saya dan dirakit, saya menginstal server AD pada server Windows, meningkatkan domain domain. Lokal di atasnya, serta DNS dan DHCP. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anda dapat menginstal OPSI di workgroup dan di domain, kami akan menginstal di domain, tetapi tanpa mengikat ke AD (konektor LDAP).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami akan menyebarkan windows 10 ke jaringan komputer sesuai dengan skema berikut: kami akan menyiapkan gambar windows 10 yang dapat digunakan dengan semua program, boot melalui jaringan melalui opsi, gunakan clonezilla untuk secara otomatis menyimpannya ke file, kemudian mengatur semua komputer untuk menginstal secara otomatis melalui opsi, boot melalui jaringan dan secara otomatis kami akan menumpahkan file ini di semua komputer di segmen jaringan siaran melalui tftp. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk melakukan ini, pada area server DHCP, atur parameter 66 di ip opsi 192.168.1.229 server kami di masa depan </font></font><br>
<br>
<img src="https://habrastorage.org/webt/at/sl/hj/atslhjfu6ebadvwdih0bcdzzg2q.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
dan atur parameter 67 ke linux / pxelinux.0. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam DNS, tambahkan opsiserver.domain.local di bawah alamat statis 192.168.1.229</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kemudian kami akan membuat mesin virtual untuk server opsi kami pada besi, yang akan menahan beban Anda dan akan sesuai dengan Anda dalam hal kecepatan. Ssd dan beberapa kartu jaringan dipersilakan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Opsi tidak mendukung semua sistem, daftar </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kompatibilitas dapat ditemukan di sini</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami segera menginstal di lokal bahasa Inggris, saya sangat menyarankan Anda untuk tidak menggunakan alfabet Cyrillic di mana saja di server ini. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Distribusi debian 10 favorit saya saya instal dalam konfigurasi minimal dengan nama opsiserver. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setelah instalasi dan reboot, untuk berjaga-jaga, kami mengkonfigurasi locales:</font></font><br>
<br>
<pre><code class="bash hljs">dpkg-reconfigure locales</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya memilih semua yang ada de_ en_ dan sistem ru_ meninggalkan en_US.UTF8. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Instalasi lebih lanjut adalah menceritakan kembali </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tutorial ini yang</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> disesuaikan dengan tugas </font><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ubah nama server jika berbeda dari yang kita butuhkan:</font></font><br>
<br>
<pre><code class="bash hljs">hostname opsiserver.domain.local</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Verifikasi:</font></font><br>
<br>
<pre><code class="bash hljs">hostname -f</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mari bawa /etc/hosting ke form berikut:</font></font><br>
<br>
<pre><code class="plaintext hljs">127.0.0.1 localhost<font></font>
127.1.1.1 localhost.localdomain<font></font>
192.168.1.229 opsiserver.domain.local opsiserver</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan kita akan melupakan keberadaannya selamanya, karena opsi menuntut konten dari file ini, dan ketika diubah, kadang-kadang mulai memberontak dan menaburkan kesalahan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Instal paket yang diperlukan:</font></font><br>
<br>
<pre><code class="bash hljs">apt install wget host pigz mc -y</code></pre> <br>
<pre><code class="bash hljs">apt install samba samba-common smbclient cifs-utils -y </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami menginstal server mysql secara default, maria-db bangun untuk saya, itu akan berfungsi juga.</font></font><br>
<br>
<pre><code class="bash hljs">apt install default-mysql-server -y</code></pre><br>
<pre><code class="bash hljs">sudo mysql_secure_installation</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami menjawab pertanyaan di afirmatif, mengubah kata sandi root dan mengingatnya. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tambahkan repositori OPSI ke sistem:</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-built_in">echo</span> <span class="hljs-string">"deb http://download.opensuse.org/repositories/home:/uibmz:/opsi:/4.1:/stable/Debian_10/ /"</span> &gt; /etc/apt/sources.list.d/opsi.list</code></pre><br>
<pre><code class="bash hljs">wget -nv https://download.opensuse.org/repositories/home:uibmz:opsi:4.1:stable/Debian_10/Release.key -O Release.key<font></font>
apt-key add - &lt; Release.key</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Diperbarui:</font></font><br>
<br>
<pre><code class="bash hljs">apt update</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami menghapus tftpd jika ya, karena OPSI akan bertentangan dengan itu:</font></font><br>
<br>
<pre><code class="bash hljs">apt remove tftpd</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami menghapus dukungan tftp dari inetd, karena jika ya, OPSI akan konflik dengannya:</font></font><br>
<br>
<pre><code class="bash hljs">update-inetd --remove tftp<font></font>
apt install opsi-tftpd-hpa</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan langsung menginstal server opsi:</font></font><br>
<br>
<pre><code class="bash hljs">apt install opsi-server</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
dalam proses mereka akan meminta data yang diperlukan untuk membuat sertifikat yang ditandatangani sendiri, yang pada gilirannya diperlukan untuk koneksi terenkripsi klien dengan server. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Instal dukungan windows:</font></font><br>
<br>
<pre><code class="bash hljs">apt install opsi-windows-support</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
konfigurasikan backend mysql:</font></font><br>
<br>
<pre><code class="bash hljs">opsi-setup --configure-mysql</code></pre><br>
<img src="https://habrastorage.org/webt/b0/7g/zh/b07gzhpoteem9-pgzopqghvkmga.png" width="600" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami menetapkan alamat server (localhost), pengguna dari siapa kami bertindak (root), kata sandi root di mysql (yang kami ingat sebelumnya), nama database untuk opsi (opsi), nama pengguna yang akan bekerja di database (opsi) ini, kata sandi untuk pengguna ini (kami menemukan baru). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selanjutnya, untuk debian 10 Anda perlu menambahkan / usr / sbin ke PATH:</font></font><br>
<br>
<pre><code class="bash hljs">PATH=<span class="hljs-variable">$PATH</span>:/usr/sbin</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
dan baris yang sama harus ditambahkan ke .bashrc di direktori home Anda. </font><font style="vertical-align: inherit;">Jika ini tidak dilakukan, pada langkah selanjutnya Anda akan mendapatkan kesalahan "chpasswd not found". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami menginisialisasi sistem dan menetapkan hak yang diperlukan untuk file dan direktori sistem:</font></font><br>
<br>
<pre><code class="bash hljs">opsi-setup --init-current-config<font></font>
opsi-set-rights</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Layanan restart:</font></font><br>
<br>
<pre><code class="bash hljs">systemctl restart opsiconfd.service<font></font>
systemctl restart opsipxeconfd.service</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Konfigurasikan samba:</font></font><br>
<br>
<pre><code class="bash hljs">opsi-setup --auto-configure-samba</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Klien OPSI terhubung ke server utama melalui https pada port 4447, dan jika Anda perlu memanggil semacam instalasi, klien akan memasang bola samba dari server opsi dan menginstal perangkat lunak darinya. </font><font style="vertical-align: inherit;">Untuk memungkinkan ini, kami mengizinkan OPSI untuk mengkonfigurasi ulang samba. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Samba restart:</font></font><br>
<br>
<pre><code class="bash hljs">systemctl restart smbd.service<font></font>
systemctl restart nmbd.service</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tetapkan kata sandi administrator untuk pengguna sistem pcpatch: </font></font><br>
<br>
<pre><code class="bash hljs">opsi-admin -d task setPcpatchPassword</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang buat pengguna untuk mengelola sistem:</font></font><br>
<br>
<pre><code class="bash hljs">useradd -m -s /bin/bash adminuser</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Buat kata sandi untuknya:</font></font><br>
<br>
<pre><code class="bash hljs">passwd adminuser</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang kata sandi untuk samba, saya buat sama seperti di sistem:</font></font><br>
<br>
<pre><code class="bash hljs">smbpasswd -a adminuser</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tambahkan ke grup:</font></font><br>
<br>
<pre><code class="bash hljs">usermod -aG pcpatch adminuser</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika kami akan melakukan sesuatu dengan OPSI di bawah root, maka kami perlu menambahkan root ke grup:</font></font><br>
<br>
<pre><code class="bash hljs">usermod -aG pcpatch root</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beberapa kruk lagi:</font></font><br>
<br>
<pre><code class="bash hljs">opsi-setup --patch-sudoers-file</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang Anda dapat mengunduh paket ke sistem, dan saat mereka memuat, minum kopi.</font></font><br>
<br>
<pre><code class="bash hljs">opsi-package-updater -v install</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selanjutnya, paket-paket dapat diperbarui dengan perintah:</font></font><br>
<br>
<pre><code class="bash hljs">opsi-package-updater -v update</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang buka </font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://download.uib.de/opsi4.1/misc/helper/</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , unduh dan instal antarmuka manajemen opsi-konfigurasi dari sana untuk </font></font><br>
<br>
<code>opsi-configed-setup.exe</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
masuk ke server, masukkan alamat server, pengguna pengguna admin kami dan kata sandinya, </font></font><br>
<br>
<code>https://opsiserver.domain.local:4447/</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
dan kami berada dalam sistem. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pada titik ini, server sudah diinstal! </font></font><br>
<br>
<img src="https://habrastorage.org/webt/a-/yg/ft/a-ygftvat-_6wioezy6v7rmuszq.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1 - semua klien yang terhubung ke server ini, mereka dapat dibongkar ke dalam grup, termasuk yang bersarang, menerapkan tugas ke seluruh grup sekaligus. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2 - tab dengan klien, ini adalah daftar komputer yang dikendalikan oleh opsi </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3 - klien adalah daftar, di sini Anda dapat memilihnya untuk menerapkan tujuan </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
4 - "konfigurasi produk" - korban terjemahan. Bahkan, ada paket yang bisa diinstal di Windows, dalam terminologi opsi - localboot products</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
5 - produk Netboot - ini semua yang diunduh melalui jaringan </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
6 - opsi-mac-address - poppy komputer adalah apa yang ditentukan selama boot jaringan </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
7 - opsiHostKey adalah "kata sandi" klien dalam sistem opsi, jika Anda menghapusnya dari klien opsi komputer, dan kemudian instal ulang, itu tidak akan berfungsi, karena kata sandi akan tetap lama dan tidak akan cocok. Ini adalah bug dan fitur. Dan bagaimana yang akan Anda lakukan? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang kita akan menyiapkan gambar windows 10 yang akan kita tumpahkan. Clonezilla, yang akan kita gunakan, tidak sebagus acronis, tetapi masih tahu bagaimana menumpahkan gambar dari disk yang lebih kecil ke disk yang sama atau lebih besar. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami memasukkan ke dalam sistem semua program yang kami butuhkan, serta Alat Administrasi Server Jarak Jauh untuk Windows 10. Saya memiliki windows 10 1903, saya menginstal untuk 1803 dan semua yang perlu dimulai. Anda dapat mengunduhnya dari sini:</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://www.microsoft.com/en-us/download/details.aspx?id=45520</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Kami membutuhkannya untuk utilitas netdom, yang memungkinkan Anda memasukkan komputer secara otomatis ke dalam domain. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk melakukan ini, kami mengunduh file dari sini </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://github.com/valmont2k/renamejoin</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ke direktori c: \ renamejoin. Kami membuat administrator domain pada pengontrol domain dengan kemampuan untuk hanya memasukkan komputer ke domain dengan login Joinadmin dengan kata sandi1234QWE. Jika penyerang mencegat kata sandi ini, maka ia hanya dapat membawa komputer ke domain kami. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jalankan baris dari createtesk.txt di konsol admin dari Windows yang sepenuhnya siap, yang akan membuat tugas untuk memulai saat boot. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seluruh skema akan berfungsi sebagai berikut:</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ketika kita membagi gambar ke semua komputer, di boot pertama, jendela akan meluncurkan tugas </font></font><code>C:\renamejoin\step1.cmd</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">yang mengganti nama komputer untuk </font></font><code>win-%random%</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, reboot komputer, menghapus </font></font><code>C:\renamejoin\step1.cmd</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan mengubah nama </font></font><code>C:\renamejoin\step2.cmd</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">untuk </font></font><code>C:\renamejoin\step1.cmd</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Pada boot berikutnya, windows akan mulai </font></font><code>C:\renamejoin\step1.cmd</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, yang akan memasukkan komputer ini ke dalam domain, reboot dan hapus </font></font><code>C:\renamejoin\step1.cmd</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Kami dapat menghapus tugas yang berpotensi berbahaya dari komputer domain nanti. Melalui OPSI tentu saja! </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ft/58/nn/ft58nnalinh1dzsqyx2clhilaym.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saatnya untuk mengubah Windows yang disiapkan menjadi gambar.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Melalui ikon komputer dengan tanda tambah, tambahkan komputer kami ke antarmuka manajemen opsi-konfigurasi, atur alamat poppy-nya. </font><font style="vertical-align: inherit;">Menyimpan. </font><font style="vertical-align: inherit;">Kami beralih ke produk Netboot, di seberang clonezilla kami menempatkan "pengaturan". </font><font style="vertical-align: inherit;">Dalam konfigurasi untuk klien, kami mengekspos semuanya seperti pada tangkapan layar: nama file dan perintah yang digunakan untuk mengisi seluruh disk ke dalam gambar. </font><font style="vertical-align: inherit;">Di BIOS komputer dengan Windows, kami mengatur unduhan dari jaringan. </font><font style="vertical-align: inherit;">Nyalakan ulang comp. </font><font style="vertical-align: inherit;">Jika Anda melakukan semuanya dengan benar, Anda akan melihat bagaimana Windows mengalir ke dalam gambar tanpa bantuan tangan. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/wu/zi/e6/wuzie6bgshbkngnutgpsqw9lfz0.png" width="500" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sementara itu, komputer dirakit, tetapi mereka perlu ditambahkan sebagai klien dalam opsi bersama dengan alamat poppy mereka, menambahkannya dengan pena sama sekali bukan urusan boyar, kan? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Solusinya adalah:</font></font><br>
<br>
<pre><code class="bash hljs">apt install tcpdump</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jalankan pada opsiserver:</font></font><br>
<br>
<pre><code class="bash hljs">tcpdump -n udp -vvvvv -e port 69 &gt; /var/<span class="hljs-built_in">log</span>/tftp</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan, pengaturan pengaturan BIOS untuk semua komputer untuk boot melalui jaringan (dan pada saat yang sama bangun dari perangkat PCI-E, melalui jaringan, Anda akan mengerti mengapa nanti), memuatnya. Jika jendela biru pada menu opsi boot muncul saat boot, </font></font><br>
<br>
<img src="https://habrastorage.org/webt/po/7c/h7/po7ch7eco5daftbhmaqr3fspcjs.png" width="500" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
maka Anda melakukan semuanya dengan benar. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saat boot, komputer mengakses server kami, tcpdump menulis alamat poppy mereka ke file </font></font><code>/var/log/tftp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, dan menggunakan script repo </font></font><code>https://github.com/valmont2k/opsi-hosts-importer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">untuk berjalan di opsiserver setelah semua komputer ditandai dalam opsi dan meninggalkan alamat poppy mereka di sana. Script ini menggunakan API opsi dari sini </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://download.uib.de/opsi4.1/experimental/documentation/html/opsi-api-documentation/opsi_API.html</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan sedikit keajaiban. Setelah memulainya, Anda akan memiliki klien di opsiserver dari formulir win% random32% .domain.local</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Langkah selanjutnya adalah melemparkan gambar windows (yang seharusnya sudah dilakukan) ke semua komputer. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/yn/6g/ik/yn6gikht6l5aizhym_t839uk7mo.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk melakukan ini, pilih semua komputer yang Anda perlukan untuk menginstal Windows dan sebaliknya clonezilla kami menetapkan nilainya seperti pada tangkapan layar. Anda mematikan komputer, kemudian nyalakan beberapa dari mereka secara bergantian dan perhatikan bagaimana Windows secara otomatis menggulir ke mereka, mereka sendiri dinamai dan dimasukkan ke dalam domain. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika Anda ingin mengotomatiskan ini juga, letakkan etherwake dan tulis skrip yang dengan penundaan tertentu mengambil alamat mac dari file / tmp / newmacs dan membangunkan host mereka sehingga mereka bergiliran memutar Windows. Lihat </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pembaruan 1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya memberi isyarat kepada Ronaldo dari iklan sampo dan sudah berkemas untuk kopi ketika Ilon Mask kembali menelepon telepon saya dan menambahkan:</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - Ya, saya lupa mengatakan, perlu bahwa </font></font><code>%program%</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">versi terbaru ada </font><font style="vertical-align: inherit;">di semua komputer besok </font><font style="vertical-align: inherit;">, bisakah Anda menanganinya? </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - Tentu saja, semuanya akan terjadi besok! </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya tidak bisa mengecewakan idola teknokrat, jadi Anda harus mengembalikan otak Anda ke tangan Anda. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alangkah baiknya jika pada saat startup komputer mengatur sendiri sebuah opsi klien yang disebut opsi-client-agent. Ini dapat dilakukan melalui kebijakan grup domain. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agar hal ini terjadi tanpa memasukkan kata sandi selama instalasi, Anda perlu </font><font style="vertical-align: inherit;">
menambahkan kata sandi pengguna Anda </font><font style="vertical-align: inherit;">di </font><font style="vertical-align: inherit;">file </font></font><br>
<code>/var/lib/opsi/depot/opsi-client-agent/files/opsi/cfg/config.ini</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pada opsiserver </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sebagai nilai service_hidden_password</font></font><code>adminuser</code><font style="vertical-align: inherit;"></font><code>base64</code><br>
<br>
<pre><code class="plaintext hljs">[installation]<font></font>
service_user=adminuser<font></font>
service_password=none<font></font>
service_hidden_password=base64HERE</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selanjutnya, tambahkan kebijakan grup di domain setupOPSI dan ambil skripnya dari sini. </font></font><code>https://github.com/valmont2k/opsi-install-opsi-client-agent-over-active-directory-domain-policy</code><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ingatlah untuk memasukkan nilai Anda dalam skrip. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/pi/bq/gr/pibqgrvntzwy6vlhvkwljjs4fki.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika Anda melakukan semuanya dengan benar, maka pada reboot pertama di domain, klien akan menginstal </font></font><code>opsi-client-agent</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, reboot dan muncul di bawah nama mereka </font></font><code>win-%random%</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">di antarmuka manajemen OPSI. </font><font style="vertical-align: inherit;">Pelanggan lama dengan alamat poppy yang sama dapat dihapus. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang Anda dapat melanjutkan ke instalasi </font></font><code>%program%</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami buka di sini </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://forum.opsi.org/viewtopic.php?f=22&amp;t=7573</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan menemukan tautan ke paket </font></font><code>*.opsi</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dengan nama </font></font><code>packagebuilder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, semacamnya </font></font><code>"opsi PackageBuilder Windows (opsi Paket)"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unduh paket ke direktori </font></font><code>/var/lib/opsi/workbench</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pada opsiserver</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-built_in">cd</span> /var/lib/opsi/workbench</code></pre><br>
<pre><code class="bash hljs">wget https://opsipackagebuilder.s3.amazonaws.com/opsiPackageBuilder/python/opsipackagebuilder_8.4.4-1.opsi </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
dan pasang:</font></font><br>
<br>
<pre><code class="bash hljs">opsi-package-manager -d ALL -i opsipackagebuilder_8.4.4-1.opsi</code></pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang, di antarmuka manajemen opsi, klik tombol perbarui dan lihat bahwa kami memiliki paket </font></font><code>opsipackagebuilder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan </font></font><code>opsi-setup-detector</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami menempatkan mereka melalui antarmuka kontrol pada mesin uji di bawah Windows. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ketika program </font></font><code>opsipackagebuilder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan </font></font><code>opsi-setup-detector</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">didirikan, jalankan </font></font><code>opsi-setup-detector</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan mainkan pada program installer </font></font><code>windirstat</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, diunduh dari pra-program situs web resmi. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sebelum menginstal, Anda perlu mengkonfigurasi pengaturan program. Kami memasang bola pada mesin uji \\ opsiserver.domain.local \ opsi_workbench sebagai drive z: kami menulis nama dan surat kami di bidang yang ditentukan: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/a3/zx/gz/a3zxgzhluvq6-vb6utpdveqfoqi.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
OPSI dapat membuat satu paket menggunakan 32 dan 64 installer secara bersamaan dan mengaturnya berdasarkan kapasitas sistem, kami memiliki 64 bit di mana-mana, jadi klik "Analisis file tunggal ...":</font></font><br>
<br>
<img src="https://habrastorage.org/webt/n-/ev/s9/n-evs94sic7qrqsafbish6zhjno.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami melihat bahwa detektor tidak memahami direktori instalasi, kami dapat mencari tahu sendiri dengan mencoba menginstal program melalui installer. Tetapi dia mendeteksi jenis pemasang, versi program, ukuran aplikasi dalam bentuk rakitan dan digunakan, kunci instalasi offline, kunci penghapusan offline dan nama uninstaller. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vh/u7/ys/vhu7ysu1f6hjlkxbvuetosk2xcu.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami memasuki direktori instalasi sendiri dan klik Langkah Berikutnya: </font></font><br>
<img src="https://habrastorage.org/webt/wl/lx/nf/wllxnfx3gtvrhtdspigvxznyply.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di sini Anda dapat menambahkan nama produk, ID-nya, deskripsi dan mengatur versi paket, yaitu, dimasukkan ke dalam upaya yang kami buat untuk merakit paket (dalam kasus kami, upaya pertama): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ip/_g/fa/ip_gfarn7c49hwtnvhdy0cnxesm.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anda dapat meletakkan dependensi, ini berarti bahwa untuk menginstal paket saat ini, paket-paket yang dinyatakan dalam persyaratan untuk kita akan disiapkan untuk instalasi: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/be/mn/os/bemnosq2zhjnugxp5ywu8ahysqi.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Buat paket OPSI: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vd/s8/-2/vds8-2ho3zriw5pt7l4dtjouhpq.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami membuat paket, sekarang kita harus pergi ke opsiserver di</font></font><code>/var/lib/opsi/workbench/windirstat</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kumpulkan paket:</font></font><br>
<br>
<pre><code class="bash hljs">opsi-makepackage</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pasang itu:</font></font><br>
<br>
<pre><code class="bash hljs">opsi-package-manager -d ALL -i windirstat-1.1.2-1.opsi</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika semuanya berjalan dengan baik, maka di antarmuka manajemen opsi-configed, klik tombol "perbarui" dan lihat bahwa kami memiliki paket baru </font></font><code>windirstat</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">yang dapat diinstal pada komputer tertentu di jaringan kami. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bingo! </font><font style="vertical-align: inherit;">Paket pertama dirakit! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk mempersulit tugas kami, menggunakan PowerShell kami akan membuat aturan di firewall Windows yang memberikan akses ke klien ke port 4441 dan 4447 dan membuat aplikasi ini memuat secara otomatis untuk pengguna melalui tweak registri, seolah-olah itu akan, misalnya, sebuah messenger. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Buka pembuat paket opsi: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ry/35/br/ry35brmfbx9wcefpvejn45ofq1i.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pilih untuk membuka paket dan buka paket kami dengan windirstat:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/7q/fi/tb/7qfitbgjqlx1kceksjhko2qokc0.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
OPSI secara default bertindak sebagai berikut: ketika Anda menghapus program dari uninstall.opsiscript, delsub.opsiscript dipanggil, yang menghapus program. Saat menginstal program dari setup.opsiscript, delsub.opsiscript dipanggil, yang menghapus program, dan kemudian setup.opsiscript menginstalnya. Oleh karena itu, kami mengedit untuk membuat sesuatu di setup.opsiscript, dan mengedit untuk menghapus sesuatu di delsub.opsiscript. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Semua keajaiban skrip ini tercermin dalam dokumentasi </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://download.uib.de/opsi4.1/documentation/html/en/opsi-winst-manual/opsi-winst-manual.html</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
setup.opsiscript dapat dibuka melalui ikon pensil, dan delsub.opsiscript via Script Tree. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/bk/_s/y_/bk_sy_fdgjsl6x4lbokjcrtjhc0.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ini adalah menu file lengkap. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/o9/wc/lb/o9wclbi4d3hob_bx9mdrlibnxwi.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setiap upaya untuk membangun paket harus ditingkatkan satu.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/km/8n/ry/km8nrypi8ie323expcio-ms0kum.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami menambahkan program untuk memuat otomatis melalui opsi, untuk ini, masukkan baris di setup.opsiscript:</font></font><br>
<br>
<pre><code class="plaintext hljs">Registry_changes  /AllNTUserdats /64bit<font></font>
[Registry_changes]<font></font>
OpenKey [Software\Microsoft\Windows\CurrentVersion\Run]<font></font>
Set "WinDirStat" = "C:\Program Files (x86)\WinDirStat\windirstat.exe"</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan di delsub.opsiscript, masukkan baris:</font></font><br>
<br>
<pre><code class="plaintext hljs">Registry_changes  /AllNTUserdats /64bit<font></font>
[Registry_changes]<font></font>
OpenKey [HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Run]<font></font>
;Set "WinDirStat" = "C:\Program Files (x86)\WinDirStat\windirstat.exe"<font></font>
DeleteVar "WinDirStat"</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami menambahkan aturan ke firewall dengan menjalankan skrip PowerShell, untuk ini, masukkan baris di setup.opsiscript:</font></font><br>
<br>
<pre><code class="plaintext hljs">DosInAnIcon_PowerShell_ExecutionPolicy<font></font>
ExecWith_PowerShell_NichtPDCAktionen powershell.exe winst /sysnative<font></font>
[DosInAnIcon_PowerShell_ExecutionPolicy]<font></font>
echo "powershell set-executionpolicy RemoteSigned ..."<font></font>
powershell.exe set-executionpolicy RemoteSigned<font></font>
exit %ERRORLEVEL%<font></font>
<font></font>
[ExecWith_PowerShell_NichtPDCAktionen]<font></font>
; hier Dein PS-Code<font></font>
<font></font>
New-NetFirewallRule -DisplayName 'OPSI-Inbound' -Profile @('Domain', 'Private', 'Public') -Direction Inbound -Action Allow -Protocol TCP -LocalPort @('4441', '4447')</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan di delsub.opsiscript, masukkan baris:</font></font><br>
<br>
<pre><code class="plaintext hljs">DosInAnIcon_PowerShell_ExecutionPolicy<font></font>
ExecWith_PowerShell_NichtPDCAktionen powershell.exe winst /sysnative<font></font>
[DosInAnIcon_PowerShell_ExecutionPolicy]<font></font>
echo "powershell set-executionpolicy RemoteSigned ..."<font></font>
powershell.exe set-executionpolicy RemoteSigned<font></font>
exit %ERRORLEVEL%<font></font>
<font></font>
[ExecWith_PowerShell_NichtPDCAktionen]<font></font>
; hier Dein PS-Code<font></font>
Remove-NetFirewallRule -DisplayName 'OPSI-Inbound'</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kode lengkap dapat dilihat di sini: </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://github.com/valmont2k/WinDirStatOpsiPackageTest</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
saya sudah santai, menonton ketika opsi memutar </font></font><code>%program%</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">versi terbaru ke seluruh jaringan, karena Ilon lagi-lagi mengganggu pikiran saya di tempat tinggi. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - Minggu depan 500 orang lagi akan datang, kantor sudah disewa, komputer sedang diimpor, ada networker, Anda perlu menggunakan jaringan windows di enam cabang di sekitar kota, dapatkah Anda mengatasinya? </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - Yah, tentu saja, ini bukan ilmu roket - Aku bercanda dengan lelah menanggapi. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami mengkloning server opsiserver kami menggunakan hypervisor dan menyebarkannya di cabang. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami berasumsi bahwa kantor pusat terhubung ke cabang melalui VPN dengan kecepatan minimal 10 Mbps.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang kita akan membuat server depot, yaitu server untuk menyimpan paket di cabang. </font><font style="vertical-align: inherit;">Klien di cabang akan mengetuk https ke server utama, dan jika Anda perlu menginstal perangkat lunak, mereka akan memasang server depot di cabang Anda dan diinstal darinya, ini dilakukan khususnya untuk menyimpan saluran Internet antara kantor dan cabang. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami mengkonfigurasi pada server cabang opsiserver-2 alamat statis dari jaringan lokal mengubah file </font></font><code>/etc/network/interfaces</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sesuai dengan jaringan baru. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ubah nama host dan host:</font></font><br>
<br>
<pre><code class="bash hljs">sed -i <span class="hljs-string">'s/opsiserver/opsiserver-2/'</span> /etc/hostname<font></font>
sed -i <span class="hljs-string">'s/opsiserver/opsiserver-2/g'</span> /etc/hosts</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
di / etc / hosts kami memperbarui data dengan mengemudi di alamat ip baru </font></font><br>
<br>
<pre><code class="bash hljs">reboot</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ganti nama server opsi menggunakan opsi:</font></font><br>
<br>
<pre><code class="bash hljs">opsi-admin --no-depot -d method host_renameOpsiDepotserver opsiserver.domain.local opsiserver-2.domain.local</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dari server opsiserver-2.domain.local kami menghubungkannya ke opsiserver.domain.local sebagai depot:</font></font><br>
<br>
<pre><code class="bash hljs">opsi-setup --register-depot</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tentukan nama server utama, tempat kami menghubungkan depot, administrator, dan kata sandi yang baru: Anda </font></font><br>
<br>
<img src="https://habrastorage.org/webt/yx/02/y_/yx02y_bcvpikxgkubku2-fl8try.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
tidak perlu mengubah apa pun di sini </font><font style="vertical-align: inherit;">: </font><font style="vertical-align: inherit;">Anda </font></font><br>
<br>
<img src="https://habrastorage.org/webt/n2/1j/_l/n21j_lmeiwlsn3ghmkcxr4yadgg.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
dapat memverifikasi bahwa semuanya dilakukan dengan benar dalam opsi-configed: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/6u/s9/nu/6us9nurw4d3rsetl0nemcy_x_re.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selanjutnya, Anda perlu mengonfigurasi sistem sehingga klien memilih sendiri server depot. Kami memilih semua pelanggan dan menetapkannya depo dinamis. Secara default, klien melihat alamat ip-nya dan memilih depot dari jaringannya. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vp/4v/mg/vp4vmg0czhi2vmkwobeddecf1dc.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang kita mengkonfigurasi bahwa semua klien masa depan segera memilih depot secara dinamis: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/h7/-j/c4/h7-jc4kpf-5vyavsz_mckjp44-a.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Itu saja, pengaturan server depot baru selesai, Anda dapat menginstal opsi-klien-agen untuk komputer di jaringan lokal dengan skrip yang sama yang kami instal di kantor utama sebelumnya, tidak lupa mengubah alamat ip di dalam skrip.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di setiap cabang kami menetapkan pengontrol domain (Anda dapat Readonly), melakukan pengalamatan jaringan kami sendiri, membagi situs default di dalam domain windows menjadi sub-situs, yang masing-masing kami buatkan subnet kami, kebijakan grup kami dengan skrip instalasi opsi-klien-agennya. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kemudian kami ulangi di cabang baru. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya menghabiskan kopi saya dan pulang, dan LED pada kartu jaringan mengisyaratkan bahwa sistem baru dan baru diluncurkan ke kebisingan pendingin ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pembaruan 1: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ternyata, tidak perlu skrip, opsi-configed memungkinkan mouse untuk mengklik pada kebangkitan klien melalui sheduler.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id497814/index.html">Lima tahap menerima hal yang tak terhindarkan, atau Bagaimana kami mengembangkan program untuk pembuatan profil otomatis</a></li>
<li><a href="../id497816/index.html">Kereta Api Rusia mengirimi saya tiket orang lain</a></li>
<li><a href="../id497818/index.html">Akses jarak jauh ke VM dengan GPU menggunakan Citrix</a></li>
<li><a href="../id497820/index.html">Statistik regularisasi masalah terbalik yang salah untuk mereka. Turchin (bagian 1)</a></li>
<li><a href="../id497822/index.html">Laki-laki dalam botol</a></li>
<li><a href="../id497828/index.html">2 in 1: enkripsi dengan perlindungan keamanan</a></li>
<li><a href="../id497830/index.html">Rekaman OWASP Moscow 2020/1</a></li>
<li><a href="../id497832/index.html">Apa yang tersembunyi di balik VestaCP</a></li>
<li><a href="../id497834/index.html">Sistem otorisasi sumber daya canggih di Laravel. Bagian 2. Gateways, Kebijakan</a></li>
<li><a href="../id497836/index.html">Perbandingan kecepatan bahasa pemrograman menggunakan contoh pemecahan masalah pelatihan jaringan saraf</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>