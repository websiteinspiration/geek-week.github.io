<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ˜¤ ğŸ›ƒ ğŸ‘¨â€ğŸ‘§â€ğŸ‘¦ "The Destination a beaucoup de formes ..." ou nous automatisons le contrÃ´le d'une ampoule Ã  l'aide de CANNY 3 Tiny et d'une photorÃ©sistance ğŸ›€ğŸ» ğŸ³ï¸ ğŸ›€ğŸ»</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans le dernier article sur Habr, je vous ai expliquÃ© comment j'avais reÃ§u le petit contrÃ´leur Canny3 en cadeau. Nous avons Â«clignotÃ©Â» la LED, appuyÃ© ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>"The Destination a beaucoup de formes ..." ou nous automatisons le contrÃ´le d'une ampoule Ã  l'aide de CANNY 3 Tiny et d'une photorÃ©sistance</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/489764/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans le </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dernier article</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sur Habr, je vous ai expliquÃ© comment j'avais reÃ§u le petit contrÃ´leur Canny3 en cadeau. Nous avons Â«clignotÃ©Â» la LED, appuyÃ© sur un bouton. Sur ce, en principe, il a Ã©tÃ© possible de terminer les expÃ©riences. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cependant, depuis quelques semaines, j'Ã©coute des livres audio sur The </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Witcher</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et </font><font style="vertical-align: inherit;">je suis </font><font style="vertical-align: inherit;">donc devenu beaucoup plus sÃ©rieux Ã  propos de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Destination</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Selon les informations indiquÃ©es sur le site Internet du constructeur, la famille de contrÃ´leurs CANNY est principalement destinÃ©e Ã  l'automatisation de divers systÃ¨mes automobiles et Ã©quipements spÃ©ciaux.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le problÃ¨me est que personne ne me laissera fouiner dans une vraie voiture avec mes Â«mains d'orÂ», et en gÃ©nÃ©ral j'ai peur des voitures. </font><font style="vertical-align: inherit;">Par consÃ©quent, j'ai dÃ» acheter une petite lampe de voiture et une photorÃ©sistance spÃ©cialement pour cet article. </font><font style="vertical-align: inherit;">Ce que vous ne ferez pas pour ne pas irriter le Destin. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aujourd'hui, nous allons connecter le contrÃ´leur et la lampe de voiture Ã  une alimentation 12V, envoyer un message au port COM, automatiser l'inclusion de la lampe en fonction de la lumiÃ¨re et essayer le contrÃ´leur PWM haute frÃ©quence. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Croyez-vous Ã©galement au pouvoir de Destination? </font><font style="vertical-align: inherit;">Alors vous Ãªtes les bienvenus sous chat.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/yt/kd/tj/ytkdtjul2i1qbdrqllt278lszck.png"><br>
<a name="habracut"></a><br>
<br>
<a name="I"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Partie I: Introduction</font></font></h2><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Partie I: Introduction </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Partie II: Composants et prÃ©cautions </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Partie III: Comment Ã©crire des donnÃ©es sur le port COM </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Partie IV: Connecter et programmer la lampe automatique et la photorÃ©sistance </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Partie V: Essayer de rÃ©duire la luminositÃ© de la lampe Ã  l'aide de PWM </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Partie VI: Conclusion</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Au tout dÃ©but de l'article, je vous rappelle Je n'ai pas beaucoup d'expÃ©rience en Ã©lectronique DIY. </font><font style="vertical-align: inherit;">Il y a plusieurs annÃ©es, j'ai essayÃ© CraftDuino - le clone Arduino domestique. </font><font style="vertical-align: inherit;">Et Ã  part ces "mÃ©tiers" qu'il a fait pour moi</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drzugrik</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c'est en fait mon expÃ©rience dans l'Ã©lectronique DIY est limitÃ©e. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apparemment, connaissant mon amour pour les dÃ©veloppements domestiques, j'ai dÃ©cidÃ© de donner Canny 3.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
MÃªme dans le processus de prÃ©paration du dernier article, j'ai Ã©tÃ© surpris que le contrÃ´leur puisse Ãªtre alimentÃ© non seulement Ã  partir de 5V, mais aussi Ã  partir de 12V, tandis que la tension aux sorties sera la mÃªme que sur et le courant maximum par canal peut atteindre 100 mA. Cela m'a semblÃ© intÃ©ressant, car mon ancien CraftDuino ne pouvait pas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par de simples calculs utilisant la formule</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>P</mi><mo>=</mo><mi>U</mi><mo>&amp;#x2217;</mo><mi>I</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="9.993ex" height="2.009ex" viewBox="0 -755.5 4302.5 865.1" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhh0jdgBCIvj6W7QiPXCEUj3WonVog#MJMATHI-50" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhh0jdgBCIvj6W7QiPXCEUj3WonVog#MJMAIN-3D" x="1029" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhh0jdgBCIvj6W7QiPXCEUj3WonVog#MJMATHI-55" x="2085" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhh0jdgBCIvj6W7QiPXCEUj3WonVog#MJMAIN-2217" x="3075" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhh0jdgBCIvj6W7QiPXCEUj3WonVog#MJMATHI-49" x="3798" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>P</mi><mo>=</mo><mi>U</mi><mo>âˆ—</mo><mi>I</mi></math></span></span><script type="math/tex" id="MathJax-Element-1">P=U*I</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> j'ai rÃ©alisÃ© que la puissance maximale par sortie de contrÃ´leur serait d'environ 1,2 watts. Il a Ã©tÃ© dÃ©cidÃ© de prendre une lampe avec une rÃ©serve de marche, au cas oÃ¹. Le choix s'est portÃ© sur une ampoule LED 0,9 W.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cependant, je ne voulais toujours pas brÃ»ler mon cadeau du Nouvel An sans gloire, et avant de le connecter, j'ai dÃ©cidÃ© de demander aux dÃ©veloppeurs si j'avais tout compris correctement.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ã€ ma grande surprise, ils m'ont non seulement rÃ©pondu, mais ont Ã©galement suggÃ©rÃ© que si vous combinez plusieurs sorties, la puissance augmenterait proportionnellement. </font><font style="vertical-align: inherit;">AprÃ¨s cela, il a Ã©tÃ© dÃ©cidÃ© d'acheter quelque chose de plus puissant que la lampe et le choix s'est portÃ© sur le ventilateur de voiture, qui est insÃ©rÃ© dans l'allume-cigare. </font><font style="vertical-align: inherit;">Cependant, afin de ne pas faire de Â«vinaigretteÂ» Ã  partir de l'article, j'ai dÃ©cidÃ© de reporter les manipulations avec le ventilateur automobile jusqu'Ã  la prochaine fois.</font></font><br>
<br>
<a name="II"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Partie II: Ã‰quipement et prÃ©cautions </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Donc, au dÃ©but des expÃ©riences, j'avais ce qui suit:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dispositif de charge et de lancement "Orion Vympel-55". </font><font style="vertical-align: inherit;">Je l'avais dÃ©jÃ  et, heureusement, il peut non seulement charger les batteries, mais aussi Ãªtre une source d'alimentation dans une large gamme (dont 12 V);</font></font><br>
<br>
<img src="https://habrastorage.org/webt/uj/fi/_i/ujfi_iwx1hku88fcb2trgbdhvqu.jpeg"><br>
<br>
</li>
<li>  Â«Skyway H3. SH3-9SMD-5050 WÂ».         ,     ,            ;<br>
<br>
<img src="https://habrastorage.org/webt/zw/vm/yi/zwvmyih0_5t0grxn5elq4j1zvfe.jpeg"><br>
<br>
     ,      ,     100 .        <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>I</mi><mo>=</mo><mi>P</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>/</mo></mrow><mi>U</mi><mo>=</mo><mn>0.9</mn><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>/</mo></mrow><mn>12</mn><mo>=</mo><mn>0</mn><mo>,</mo><mn>075</mn><mi>A</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="29.044ex" height="2.634ex" viewBox="0 -809.3 12504.8 1134.2" role="img" focusable="false" style="vertical-align: -0.755ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhh0jdgBCIvj6W7QiPXCEUj3WonVog#MJMATHI-49" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhh0jdgBCIvj6W7QiPXCEUj3WonVog#MJMAIN-3D" x="782" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhh0jdgBCIvj6W7QiPXCEUj3WonVog#MJMATHI-50" x="1838" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhh0jdgBCIvj6W7QiPXCEUj3WonVog#MJMAIN-2F" x="2590" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhh0jdgBCIvj6W7QiPXCEUj3WonVog#MJMATHI-55" x="3090" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhh0jdgBCIvj6W7QiPXCEUj3WonVog#MJMAIN-3D" x="4135" y="0"></use><g transform="translate(5192,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhh0jdgBCIvj6W7QiPXCEUj3WonVog#MJMAIN-30"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhh0jdgBCIvj6W7QiPXCEUj3WonVog#MJMAIN-2E" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhh0jdgBCIvj6W7QiPXCEUj3WonVog#MJMAIN-39" x="779" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhh0jdgBCIvj6W7QiPXCEUj3WonVog#MJMAIN-2F" x="6471" y="0"></use><g transform="translate(6972,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhh0jdgBCIvj6W7QiPXCEUj3WonVog#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhh0jdgBCIvj6W7QiPXCEUj3WonVog#MJMAIN-32" x="500" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhh0jdgBCIvj6W7QiPXCEUj3WonVog#MJMAIN-3D" x="8250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhh0jdgBCIvj6W7QiPXCEUj3WonVog#MJMAIN-30" x="9307" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhh0jdgBCIvj6W7QiPXCEUj3WonVog#MJMAIN-2C" x="9807" y="0"></use><g transform="translate(10252,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhh0jdgBCIvj6W7QiPXCEUj3WonVog#MJMAIN-30"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhh0jdgBCIvj6W7QiPXCEUj3WonVog#MJMAIN-37" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhh0jdgBCIvj6W7QiPXCEUj3WonVog#MJMAIN-35" x="1001" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/489764/&amp;usg=ALkJrhh0jdgBCIvj6W7QiPXCEUj3WonVog#MJMATHI-41" x="11754" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>I</mi><mo>=</mo><mi>P</mi><mrow class="MJX-TeXAtom-ORD"><mo>/</mo></mrow><mi>U</mi><mo>=</mo><mn>0.9</mn><mrow class="MJX-TeXAtom-ORD"><mo>/</mo></mrow><mn>12</mn><mo>=</mo><mn>0</mn><mo>,</mo><mn>075</mn><mi>A</mi></math></span></span><script type="math/tex" id="MathJax-Element-2">I=P/U=0.9/12=0,075A</script>.<br>
      .     -   .<br>
<br>
<img src="https://habrastorage.org/webt/gl/fw/qv/glfwqvsyuybaay2nr5bdftlk2n8.png"><br>
<br>
</li>
<li> -765.     ,       . <br>
<br>
<img src="https://habrastorage.org/webt/h9/zq/gq/h9zqgqgqp4vfwhhoreh_qxmo5aa.png"></li>
</ul><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eh bien, bien sÃ»r, j'avais: un contrÃ´leur, une planche Ã  pain, des fils, des crocodiles, etc. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans un article prÃ©cÃ©dent sur Canny 3, j'ai vraiment fait l'Ã©loge du contrÃ´leur, mais il s'est avÃ©rÃ© qu'il y a une mouche dans la pommade. La derniÃ¨re fois, je n'ai pas utilisÃ© le faisceau de cÃ¢bles fourni avec le kit, mais cette fois, je ne pouvais pas m'en passer. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme j'utilise trÃ¨s mal un fer Ã  souder, je voulais rÃ©duire son utilisation au minimum vital. Par consÃ©quent, Ã  la fin, j'ai rassemblÃ© tous les circuits sur des connexions dÃ©tachables. J'ai utilisÃ© des fils spÃ©ciaux (papa-papa, maman-maman, maman-papa), des planches Ã  pain et des pinces Ã  crocodile.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et si les dÃ©veloppeurs du contrÃ´leur ne sont pas Ã  blÃ¢mer pour le fait que dans le processus de dÃ©nudage du cÃ¢ble, j'ai eu quelques coupures, alors les moments oÃ¹ toute ma structure est tombÃ©e au sol en raison du fait que j'ai accrochÃ© le harnais "en bois", en partie sur leur conscience. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
D'une part, un garrot est une bonne chose. Pour installer le contrÃ´leur Ã  l'intÃ©rieur de la voiture, le faisceau de cÃ¢bles, je pense, est juste. Les fils qui s'y trouvent sont toronnÃ©s et s'ils sont bien torsadÃ©s, alors ils s'insÃ¨rent complÃ¨tement dans les connecteurs Â«mÃ¨reÂ», mes fils Â«planche Ã  painÂ». D'un autre cÃ´tÃ©, comme il n'est pas pratique de faire des expÃ©riences avec le cÃ¢ble avec la planche Ã  pain, mÃªme une belle photo avec le contrÃ´leur tournÃ© en plein visage Ã©tait difficile Ã  faire Ã  cause des Â«fils de chÃªneÂ». </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai dit un peu plus haut que je ne voulais pas utiliser de fer Ã  souder, mais au moins une fois ils devraient s'armer.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Afin de mesurer le signal de la photorÃ©sistance, nous devons Â«l'insÃ©rerÂ» dans le convertisseur analogique-numÃ©rique (ADC) du contrÃ´leur. </font><font style="vertical-align: inherit;">Mais le fait est que, contrairement, par exemple, Ã  mon ancien Craftduino. </font><font style="vertical-align: inherit;">Dans le cas de Canny, il s'est avÃ©rÃ© nÃ©cessaire de mettre un pull. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Au dÃ©but, je n'ai pas lu attentivement la documentation et pensais que les sorties 5 et 6 du contrÃ´leur sont les sorties A5 et A6. </font><font style="vertical-align: inherit;">J'ai mÃªme Ã©crit un programme et essayÃ© pendant longtemps de faire des lectures. </font><font style="vertical-align: inherit;">Naturellement, je n'ai pas rÃ©ussi car par dÃ©faut, sans prÃ©paration prÃ©alable, les canaux n Â° 5 et 6 fonctionnent comme une entrÃ©e discrÃ¨te normale. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AprÃ¨s avoir lu la documentation du contrÃ´leur sur un "esprit neuf", j'ai rÃ©alisÃ© que je dois encore souder. </font><font style="vertical-align: inherit;">Vous n'avez aucune idÃ©e de la faÃ§on dont j'avais peur de Â«tout foutreÂ».</font></font><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> La derniÃ¨re fois que j'ai essayÃ© de souder quelque chose dans le circuit que j'ai fait pour moi </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drzugrik</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, J'ai rÃ©ussi Ã  remplir tous les condensateurs avec de la soudure prÃ¨s du lieu de soudure. </font></font></i><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cette fois, le processus de soudage Ã©tait simple. </font><font style="vertical-align: inherit;">Il suffisait de mettre trÃ¨s soigneusement une goutte de soudure sur la piste. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ã€ quoi ressemble mon cavalier de soudure peut Ãªtre vu sur la photo ci-dessous:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/pv/r9/vd/pvr9vdryjakzmbjalenhh6wrn9a.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je n'ai connectÃ© que la 6Ã¨me sortie au canal A6, je n'ai pas osÃ© souder le cinquiÃ¨me canal, afin de ne pas accidentellement remplir les deux cavaliers avec de la soudure. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En thÃ©orie, il Ã©tait possible de se passer d'un fer Ã  souder en connectant le trou et la borne n Â° 6 avec un fil. </font><font style="vertical-align: inherit;">Mais ce serait terriblement gÃªnant. </font></font></i> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La photo ci-dessous montre la connexion de la broche n Â° 5 et de la broche ADC n Â° A5 avec un fil de papa Ã  papa: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/qu/l6/hb/qul6hbndz9lv1jwj8rq-m34sipe.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
la derniÃ¨re chose Ã  laquelle vous devez faire attention avant de vous mettre au travail. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Attention!</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ne rÃ©pÃ©tez pas un Ã  un, ce que je dÃ©crirai plus loin sur le texte. </font><font style="vertical-align: inherit;">Ne soyez pas paresseux pour remplacer les connexions enfichables par de la soudure, prenez des fils plus Ã©pais, lisez la documentation. </font><font style="vertical-align: inherit;">Je ne suis pas un expert en la matiÃ¨re, j'ai donc tout rassemblÃ© "du mieux que je pouvais". </font><font style="vertical-align: inherit;">Je vous conseille Ã©galement de surveiller attentivement les risques d'incendie et de ne pas laisser l'Ã©quipement sans surveillance. </font><font style="vertical-align: inherit;">J'ai rÃ©ussi Ã  sentir quelques fils qui couvaient plusieurs fois. </font><font style="vertical-align: inherit;">Eh bien, mÃªme dans l'alimentation, il y avait une protection contre les courts-circuits (je l'ai Ã©galement arrangÃ©). </font><font style="vertical-align: inherit;">Par consÃ©quent, soyez prudent. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
N'oubliez pas non plus qu'en dÃ©pit du fait que les tensions et les courants sont faibles, toucher les parties sous tension sous tension peut Ãªtre douloureux </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(surtout si vous les piquez avec une partie du corps blessÃ©e)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<a name="III"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Partie III: Comment Ã©crire des donnÃ©es sur le port COM</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Afin d'Ã©talonner en quelque sorte notre capteur de lumiÃ¨re ambiante, nous devons comprendre quelles valeurs il envoie au contrÃ´leur en fonction du niveau de lumiÃ¨re. Pour ce faire, nous devons sortir les donnÃ©es de l'ADC vers le moniteur. Lorsque je travaillais avec Arduino et ses clones pour rÃ©soudre de tels problÃ¨mes, j'ai utilisÃ© un moniteur de port COM. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans le cas de Canny 3 Tiny, le processus de lecture des donnÃ©es Ã  partir d'un port COM virtuel n'est pas beaucoup plus compliquÃ© que pour Arduino. Mais il y a une diffÃ©rence clÃ©. L'environnement de dÃ©veloppement CannyLab ne possÃ¨de pas son propre moniteur de port COM. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai utilisÃ© </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hterm</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> car il est multiplateforme, lÃ©ger et ne nÃ©cessite pas d'installation. Mais vous pouvez en utiliser d'autres. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je dirai encore plus, rien ne nous empÃªchera d'utiliser le moniteur de port COM Arduino IDE.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout a fonctionnÃ© sur la base de mon systÃ¨me Windows 10 et je n'ai pas eu Ã  installer sÃ©parÃ©ment les pilotes pour le port COM virtuel. Mais juste au cas oÃ¹, je dirais que le pilote semble Ãªtre intÃ©grÃ© Ã  l'environnement de dÃ©veloppement CannyLab (il se trouve dans le dossier drv \ canny3tiny_vcp). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Afin de ne pas expliquer davantage le fonctionnement des blocs de graphiques associÃ©s Ã  l'envoi de donnÃ©es au port COM virtuel USB, je vais donner un exemple simple. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aujourd'hui, en sÃ©ance d'entraÃ®nement, nous enverrons le message Â«HABRÂ» Ã  l'aide du contrÃ´leur. Vous devez d'abord tÃ©lÃ©charger l'IDE CannyLab. Il peut Ãªtre facilement trouvÃ© sur le site officiel du dÃ©veloppeur. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Soit dit en passant, j'ai utilisÃ© CannyLab v 1.42, mais je pense que dans les versions prÃ©cÃ©dentes, il n'y aura aucun problÃ¨me avec les performances des diagrammes.</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le processus d'Ã©criture d'un logiciel sur le nouveau contrÃ´leur et les principes de base de l'utilisation de Cannylab I sont dÃ©crits dans le </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chapitre 3 du dernier article</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
CrÃ©ez un nouveau graphique, sÃ©lectionnez Canny 3 tiny dans la boÃ®te de dialogue. Et nous transfÃ©rons des blocs, des constantes et des registres dans le diagramme, comme dans la capture d'Ã©cran ci-dessous. Bien sÃ»r, il n'est pas nÃ©cessaire de transfÃ©rer les Ã©tiquettes de texte, rien ne dÃ©pend d'eux lors de l'exÃ©cution du diagramme. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/rz/st/g9/rzstg9zmltxsf2ekndo4orydcnu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous n'avez pas envie de dÃ©placer des blocs vous-mÃªme, vous pouvez tÃ©lÃ©charger les diagrammes de cet article Ã  l'aide de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub.</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Il convient de noter que l'envoi d'un message au port COM fonctionne un peu Ã©trange et que vous devez Ã©crire des lettres dans une paire de caractÃ¨res dans un miroir, mais vous pouvez vous y habituer. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je vais vous expliquer en partie. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans le bloc </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Parameter Setting"</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nous dÃ©finissons les paramÃ¨tres du pilote USB VCP. Tout d'abord, activez le mode de transfert sur le port COM virtuel, puis dÃ©finissez la longueur du message transmis. Dans notre cas - 6 caractÃ¨res, y compris le saut de ligne. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans le bloc </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Message Text",</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nous Ã©crivons le texte du message en constantes (n'oubliez pas de passer en mode "chr") et transfÃ©rons ces constantes dans les registres de pilotes correspondants. Encore une fois, j'attire votre attention sur le fait que nous Ã©crivons le message dans l'ordre inverse, Ã  la fois dans les paires de symboles elles-mÃªmes et dans les registres des pilotes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dernier bloc </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Transfert de messages"</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Envoie avec une frÃ©quence spÃ©cifiÃ©e notre message au port COM. Pour cela, nous utilisons un bloc PWM. Ne le confondez pas avec le RF PWM, que nous utiliserons lors de la connexion de la lampe. Dans ce cas, le bloc gÃ©nÃ¨re la moitiÃ© du temps Â«0Â» et la seconde moitiÃ© Â«1Â». Vous pouvez "jouer" avec la taille de la pÃ©riode et remplir pour augmenter ou diminuer la frÃ©quence d'envoi des messages. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La connexion d'une LED verte Ã  ce bloc PWM est nÃ©cessaire afin de vÃ©rifier le fonctionnement du contrÃ´leur. Si tout est en ordre, la LED clignote avec la frÃ©quence d'envoi d'un message. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comment Ã©crire un programme sur le contrÃ´leur, je l'ai dÃ©jÃ  dit </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dans un prÃ©cÃ©dent article</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Cependant, au cours du temps passÃ©, j'ai appris un autre truc cool.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lorsque nous connectons le contrÃ´leur Ã  l'ordinateur, il entre en mode d'enregistrement de programme. Auparavant, afin de passer en mode d'exÃ©cution, j'ai retirÃ© le contrÃ´leur de l'ordinateur et y ai bloquÃ© le chargement USB. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il s'est avÃ©rÃ© qu'il existe un moyen plus simple. AprÃ¨s avoir connectÃ© le contrÃ´leur au port USB de l'ordinateur et cliquÃ© sur le bouton </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Connecter"</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dans CannyLab </font><font style="vertical-align: inherit;">, allez dans le </font><font style="vertical-align: inherit;">menu </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"PÃ©riphÃ©rique"</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et sÃ©lectionnez </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"ExÃ©cuter"</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<img src="https://habrastorage.org/webt/b-/dt/bv/b-dtbvog9sirji-opbj-ehor-hm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le contrÃ´leur commence Ã  exÃ©cuter le programme enregistrÃ©, en Ã©tant alimentÃ© par le port USB. AprÃ¨s cela, le contrÃ´leur sera Ã©galement disponible sur le moniteur du port COM. Certes, pour revenir au mode d'enregistrement de programme, le contrÃ´leur devra Ãªtre retirÃ© et rÃ©insÃ©rÃ© dans le port USB de l'ordinateur.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et voici notre Â«HABRÂ» dans le moniteur de port COM Hterm. </font><font style="vertical-align: inherit;">Faites attention Ã  la vitesse de transfert des donnÃ©es et aux autres paramÃ¨tres. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ls/lh/yu/lslhyucpy7cxrmexfqnn3l5swgi.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et voici le moniteur du port COM Arduino IDE: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ab/zd/vl/abzdvlqwpn6jaw0q0uuzx06ltzo.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La photo montre comment le contrÃ´leur fonctionne aprÃ¨s avoir enregistrÃ© le diagramme: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/qv/4n/zu/qv4nzuowx6saogj5xskvkn7dt3w.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
la LED rouge signale que l'alimentation est reÃ§ue via le port USB de l'ordinateur et le vert "clignote" au rythme des messages transmis via le port COM USB virtuel.</font></font><br>
<br>
<a name="IV"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Partie IV: Nous connectons et programmons une lampe de voiture et une photorÃ©sistance.</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour commencer, nous considÃ©rerons l'option la plus simple. Connectez simplement la lampe Ã  la borne n Â° 1 du contrÃ´leur et la photorÃ©sistance Ã  la borne n Â° 6 (ADC). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout est assez simple, mais juste au cas oÃ¹, j'ai dessinÃ© un diagramme: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/sv/un/pm/svunpmu3hc-n4agrotbzy2rquea.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais ici, Ã§a a l'air en direct: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ap/az/z8/apazz8ybxdpnfnaxf9y3c-daabc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
"-" et "+" de la source d'alimentation que nous connectons aux bornes correspondantes de Canny 3 minuscule, la broche n Â° 1 est connectÃ©e au boÃ®tier de la lampe, et la "queue" de la lampe avec un plus sur la planche Ã  pain de la planche Ã  pain. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Avec une photorÃ©sistance aussi, tout est simple. De plus, nous apportons la planche Ã  pain du bus Ã  la planche Ã  pain, et le moins va Ã  la broche n Â° 6 du contrÃ´leur, que nous avons prÃ©cÃ©demment connectÃ©e avec le cavalier Ã  l'ADC. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">J'ai dÃ©jÃ  Ã©crit ci-dessus que toute ma structure est tombÃ©e Ã  quelques reprises de la table. Par consÃ©quent, plus loin sur les photos, il peut y avoir de lÃ©gÃ¨res diffÃ©rences en termes de couleurs des conducteurs et des points de leur entrÃ©e dans la planche Ã  pain.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous allons maintenant Ã©crire un programme. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/n1/7s/l8/n17sl8exoem1_jl54mqgb-bapeg.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ConsidÃ©rez le nouveau jour que nous bloquons. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CommenÃ§ons par le bloc </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Â«Obtenir la valeur de l'ADC et la convertir en suitesÂ»</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans ce bloc, nous traduisons les valeurs que l'ADC (0 Ã  1023) peut nous donner en Ã©clairage (lux). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous devons faire une mesure de l'Ã©clairage lorsqu'il fait clair et une mesure dans des conditions plus sombres. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En consÃ©quence, dans la </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Â«valeur deÂ»,</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> j'ai enregistrÃ© la lecture ADC minimale Â«0Â», et dans le </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Â«rÃ©sultat deÂ» la</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> valeur zÃ©ro du niveau d'Ã©clairage. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans la </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Â«valeur Ã Â»,</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> j'ai enregistrÃ© les lectures ADC = 20, et l'Ã©clairage correspondant Ã©gal Ã  300 lux, je suis entrÃ© dans le </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Â«rÃ©sultat Ã Â»</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je n'ai pas de description dÃ©taillÃ©e des paramÃ¨tres de la photorÃ©sistance, mais je soupÃ§onne qu'elle n'a pas une caractÃ©ristique complÃ¨tement linÃ©aire, mais cela nous suffit maintenant. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
VÃ©rifiez Ã  l'avance comment le diagramme est exÃ©cutÃ© dans le simulateur. Plus en dÃ©tail sur le travail dans le simulateur CannyLab que j'ai Ã©crit </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voici ce que je me suis retrouvÃ© avec: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/mp/yw/no/mpywnolxlvzxyaqqkeyy3oh2m-u.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Imaginez que la photorÃ©sistance a passÃ© une valeur de 10 Ã  l'ADC Le bloc </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Affichage (MAP)"</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">il s'agit d'une mise Ã  l'Ã©chelle essentiellement linÃ©aire. Dix est exactement la moitiÃ© de l'Ã©chelle de notre Ã©chelle, ce qui signifie que la sortie sera la moitiÃ© de la plage 0 - 300, Ã  savoir 150. C'est en dessous du niveau spÃ©cifiÃ© de 300 lux. Par consÃ©quent, un est envoyÃ© au registre de canal n Â° 1 (sortie n Â° 1) et la lampe s'allumera . Mais il ne s'allumera pas immÃ©diatement, mais uniquement s'il fait sombre pendant au moins une seconde (1000 millisecondes). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour comprendre quel message nous recevrons dans le port COM, j'ai changÃ© l'affichage des valeurs dans le simulateur au format hexadÃ©cimal. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/mq/nr/rk/mqnrrkxyzudcput-yez77oke13a.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ConsidÃ©rez le </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"registre de configuration de message VCP D1: D0</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , la valeur 3130 y entre. Comme nous nous en souvenons, il s'agit d'une paire de caractÃ¨res, dont chaque partie reprÃ©sente un code de caractÃ¨re hexadÃ©cimal. Il s'avÃ¨re que 31h est le code de caractÃ¨re "1" en ASCII, 30 est le code zÃ©ro en ASCII.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans le </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">registre d'installation des messages "VCP D3: D2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , nous aurons en consÃ©quence les caractÃ¨res" 0 "et" 5 ". Nous collectons les valeurs des paires de caractÃ¨res dans l'ordre de D0 Ã  D3 nous obtenons: "0", "1", "5", "0". Nous avons donc obtenu notre 0150 lux. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais comme on dit "pas un seul simulateur ...". Voyons ce qui se passe dans la pratique. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mesure sous la lumiÃ¨re du lustre et la lumiÃ¨re naturelle (Ã©clairage combinÃ©): Les </font></font><br>
<br>
<img src="https://habrastorage.org/webt/of/ze/ps/ofzepsndi0bepg1hwoxzursk7my.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
lectures du posemÃ¨tre d'usine et de notre fait maison coÃ¯ncident presque parfaitement. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mesure Ã  la lumiÃ¨re du jour: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/w_/kz/aq/w_kzaqulbnhvr-pq2tsdcy7pqu8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
extrÃªmement pire.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cela est probablement dÃ» Ã  la non-linÃ©aritÃ© des caractÃ©ristiques de la photorÃ©sistance, et aussi parce que nous avons fixÃ© la limite d'Ã©chelle infÃ©rieure Ã  zÃ©ro, mais nous ne compliquerons pas le diagramme afin d'augmenter la prÃ©cision de mesure; pour notre exemple, l'essentiel Ã©tait de comprendre le principe gÃ©nÃ©ral d'obtention des valeurs d'Ã©clairage. </font><font style="vertical-align: inherit;">Et l'augmentation de la prÃ©cision peut Ãªtre retardÃ©e jusqu'Ã  la mise en Å“uvre de ces projets dans la voiture ou Ã  la maison. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous vÃ©rifions le fonctionnement du circuit, fermons le capteur avec un doigt, puis retirons le doigt. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/4f/nh/qd/4fnhqd-jpxmvsbj5wtvwnokgybg.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et maintenant, il y a une option quand il fait juste noir dans la piÃ¨ce: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/5r/d7/lc/5rd7lcy5_cdx339o6z6c39r3y5i.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
la lampe est allumÃ©e. </font><font style="vertical-align: inherit;">Tout fonctionne comme il se doit.</font></font><br>
<br>
<a name="V"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Partie V: essayer de rÃ©duire la luminositÃ© de la lampe en utilisant PWM</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Compliquons un peu le schÃ©ma en modifiant la luminositÃ© de la lampe. Pour ce faire, nous avons besoin d'un PWM haute frÃ©quence (RF PWM), dans Canny 3 tiny il est implÃ©mentÃ© aux sorties n Â° 3 et n Â° 4. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai dÃ©cidÃ© d'utiliser la sortie n Â° 4. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le schÃ©ma de connexion restera pratiquement inchangÃ©. Simplement, au lieu de la sortie n Â° 1, nous connectons la sortie n Â° 4 Ã  la lampe </font></font><br>
<br>
<img src="https://habrastorage.org/webt/qp/bg/b-/qpbgb-a7whds1vugbizqoyr3its.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
. Toute la diffÃ©rence est qu'au lieu d'un fil blanc, le cadre est maintenant bleu. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/2t/z3/nl/2tz3nldjplnly2tzmo7ttrb0he0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le diagramme n'a pas non plus beaucoup changÃ©. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/or/fx/wl/orfxwlbv1adspw_c0fv2ouenqhy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je ne peindrai pas le diagramme en dÃ©tail. Les principaux changements dans la configuration de la sortie 4, que nous utilisons pour PWM. Dans cette section, nous devons dÃ©finir le </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Registre des paramÃ¨tres de remplissage"</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">il prend des valeurs de 2 Ã  255 microsecondes, j'ai dÃ©cidÃ© de ne pas le risquer et j'ai choisi 254. A noter qu'il est installÃ© pour deux canaux Ã  la fois (n Â° 3 et n Â° 4). Ensuite, nous Ã©crivons "1" dans le </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"registre d'activation de canal PWM n Â° 4"</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , incluant ainsi le PWM de notre ampoule. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans le bloc </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Allumer la lampe en mode PWM (avec faible luminositÃ©)", la</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nouveautÃ© pour nous est seulement </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"S'inscrire pour rÃ©gler le canal de remplissage n Â° 4, Î¼s"</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Nous y inscrirons la valeur "10", Ã  condition que le niveau d'Ã©clairage au-dessus du capteur photo soit infÃ©rieur Ã  250 lux, en dans la seconde. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La photo ci-dessous montre que la lampe s'allume, mais elle brille faiblement.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/om/pp/_t/ompp_teo-f76yagfthj5qylheus.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous voulez que la lampe brille plus, il vous suffit de changer la valeur de la constante Â«10Â» en un nombre plus grand. Par exemple, vous pouvez prendre le nombre 127, dans notre cas, c'est la moitiÃ© du temps qu'il faut pour remplir la pÃ©riode RF PWM, ce qui signifie environ la moitiÃ© de la luminositÃ© de la lampe. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/lx/ni/3t/lxni3tbt3zw1y6lyqthoqqufc1w.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il convient de noter que le RF PWM avec cette lampe fonctionne de maniÃ¨re assez notable. Voici trois photos: sur la premiÃ¨re, nous fixons la </font><font style="vertical-align: inherit;">valeur </font><font style="vertical-align: inherit;">dans le </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Registre pour remplir le canal numÃ©ro 4"</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ã  10 Î¼s, sur la seconde - 110 Î¼s, Ã  droite - 210 Î¼s. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ud/os/_w/udos_wpczlgn2m1naf4nc5053da.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En principe, la lampe automatique de notre exemple, si je comprends bien, est utilisÃ©e dans les signaux de position et parfois dans les feux de brouillard des voitures.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je pense que si nous affinons le schÃ©ma et le schÃ©ma, il serait possible de mettre en Å“uvre l'inclusion du rÃ©tro-Ã©clairage en basse lumiÃ¨re sur les machines plus anciennes. </font><font style="vertical-align: inherit;">Certes, vous devez tenir compte de l'effet de l'Ã©clairage artificiel la nuit. </font><font style="vertical-align: inherit;">Alors que sur les routes, dans les tunnels et depuis les phares des voitures venant en sens inverse, la lampe ne s'est pas Ã©teinte. </font><font style="vertical-align: inherit;">Ou il serait possible de contrÃ´ler la lampe dans l'habitacle afin que, par exemple, les lampes des portes du Zhiguli ou du Niva ne s'allument pas toujours Ã  l'ouverture.</font></font><br>
<br>
<a name="VI"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Partie VI: Conclusion </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En Ã©crivant cet article, j'ai ressenti un fort sentiment de nostalgie. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pendant mes Ã©tudes Ã  l'institut, mon ami et camarade de classe Seryoga avait une berline de marque VAZ 2107 bleu chic. Ce qu'il n'a juste pas fait avec lui: il attachera une sorte de tuyau (pour augmenter le boost), installera un ventilateur dans l'habitacle pour qu'il s'allume par un bouton sÃ©parÃ©, puis il fera dÃ©marrer la voiture en appuyant sur un bouton (uniquement avec la clÃ© tournÃ©e) allumage). En gÃ©nÃ©ral, il n'a tout simplement pas Â«rÃ©glÃ©Â» son Â«hirondelleÂ». De nombreuses annÃ©es se sont Ã©coulÃ©es depuis lors, mon ami est passÃ© Ã  une voiture plus solide, mais j'ai peur d'imaginer ce qu'il ferait de son Zhiguli s'il obtenait ce contrÃ´leur il y a 10 ans.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
GrÃ¢ce Ã  cet article, je me suis Ã©galement souvenu de ma destination. AprÃ¨s tout, j'ai Ã©tudiÃ© pendant de nombreuses annÃ©es en tant qu'ingÃ©nieur en automatisation, mais je n'ai pas travaillÃ© un jour uniquement dans ma spÃ©cialitÃ©. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il s'avÃ¨re que c'est tellement cool de plonger dans le monde du bricolage. Dans le processus d'assemblage des circuits plus d'une fois Â«coincÃ©Â» en allumant / Ã©teignant l'ampoule et la LED avec un bouton. C'est une sensation agrÃ©able lorsque quelque chose fonctionne comme prÃ©vu. Je me suis Ã©galement fait une idÃ©e que la programmation d'un contrÃ´leur Ã  l'aide de diagrammes est une tÃ¢che plus mÃ©ditative que l'Ã©criture de code dans l'IDE Arduino. Une perception complÃ¨tement diffÃ©rente du programme. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En Ã©crivant cet article, je me suis commandÃ© une version de Canny 3 tiny sans faisceau de cÃ¢bles. Maintenant, je vais prendre un peu de repos et Ã©crire un article sur l'installation de ce contrÃ´leur dans une planche Ã  pain, et Ã  lui seul, nous analyserons quelques autres exemples d'automatisation d'Ã©clairage avec son aide.</font></font><br>
<br>
<i>   ,  ,    . </i><br>
<br>
<i>UPD:<br>
,       ,            :</i><br>
<br>
<ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Â«, ,  â€“  !Â»       CANNY 3 tiny</a>.<br>
</li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Â«  ...Â»         (CANNY  Arduino)  Raspberry PI</a>.<br>
</li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Â« ?Â»     bluetooth      Xamarin (Android)</a>.<br>
</li>
</ol></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr489754/index.html">20 systÃ¨mes de gestion de projet, aperÃ§u de 100 puces</a></li>
<li><a href="../fr489756/index.html">CrÃ©er un effet crayon en SVG</a></li>
<li><a href="../fr489758/index.html">Angulaire: un exemple d'utilisation de NGRX</a></li>
<li><a href="../fr489760/index.html">Conscience et existence. MÃ©canique quantique sans paradoxes</a></li>
<li><a href="../fr489762/index.html">Un exemple simple d'analyse et d'analyse de donnÃ©es pour World of Tanks</a></li>
<li><a href="../fr489768/index.html">Comment Ï€ combine des blocs en collision et un algorithme de recherche quantique</a></li>
<li><a href="../fr489770/index.html">VidÃ©o de MinskJS mitap: mon rapport sur les extensions de navigateur</a></li>
<li><a href="../fr489772/index.html">Hackathon Ã  Simferopol, Yandex. Dialogues et lois de la technologie chat-bot</a></li>
<li><a href="../fr489774/index.html">L'histoire de la faÃ§on dont j'ai automatisÃ© l'appartement en utilisant Node-RED. Partie II</a></li>
<li><a href="../fr489776/index.html">The Ember Times - NumÃ©ro 136</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>