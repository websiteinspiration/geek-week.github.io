<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🐠 👩🏼‍✈️ 👼 カオスエンジニアリング：意図的な破壊の芸術。パート3 🕦 👉🏼 👨🏻‍✈️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="注意ペレフ。：これは、AWS（Adrian Hornsby）のテクノロジーエバンジェリストによる、かなり新しいIT分野であるカオスエンジニアリングに関する一連の記事の続きです。カオスエンジニアリングでは、エンジニアが実験を行ってシステム障害の影響を軽減します。このシリーズの最初の資料では、全体として...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>カオスエンジニアリング：意図的な破壊の芸術。パート3</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/flant/blog/477994/"><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意ペレフ。</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：これは、AWS（Adrian Hornsby）のテクノロジーエバンジェリストによる、かなり新しいIT分野であるカオスエンジニアリングに関する一連の記事の続きです。カオスエンジニアリングでは、エンジニアが実験を行ってシステム障害の影響を軽減します。</font><font style="vertical-align: inherit;">このシリーズ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の最初の</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">資料では、全体としてのカオスエンジニアリングの概念について話し、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2番目の</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">資料では、</font><font style="vertical-align: inherit;">この活動が組織内のポジティブな文化的変化にどのように貢献するかについて話しました。</font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/2d/ds/ml/2ddsml-qb-o6pubqn5gva2sq38g.jpeg"><br>
<br>
<i>    -:        .   ,         ,     ,      -   .               —    —   .</i><a name="habracut"></a><br>
<br>
<i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意 </font><font style="vertical-align: inherit;">著者</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：友人の</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リカルドスエイラス</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">がこの出版物の準備に貢献してくれたこと、そして私が地面から離れるのを助けてくれたことに</font><font style="vertical-align: inherit;">心から感謝し</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">リカルド、かっこいい！</font></font></i><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「私たちは目に見えるものになります。</font><font style="vertical-align: inherit;">最初にツールを形作り、次にそれらが私たちを形作ります。」</font><font style="vertical-align: inherit;">- </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">マーシャル・マクルーハン</font></font></a></b> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（通信の分野での彼の研究で有名なカナダの哲学者;。。この引用の最初の文は、しかし、イギリスの詩人ウィリアム・ブレイクから借りた-約訳）</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
カオス工学の意味があることを覚えておくことが重要である</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、NOT</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サルを自由にさせ、無作為に無目的にクラッシュさせます。</font><font style="vertical-align: inherit;">それどころか、それは明確に定義され、形式化された科学的な実験方法です。</font></font><br>
<br>
<blockquote>«     ,      , ,       .         ,    ;     ,   ;    (  )      ». — <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">Wikipedia</a></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
カオスエンジニアリングは、システムの定常状態を理解することから始まります。これに続いて、システムのフォールトトレランスを向上させるために、仮説の定式化が行われ、最後に実験結果の検証と分析が行われます。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/18b/b04/93c/18bb0493c4d7f1cdde5611e674af42db.png" alt="画像"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">カオスエンジニアリングの段階</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">この一連の記事</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
の</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最初の部分で</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、カオスエンジニアリングの概念を概説し、上記のプロセスの各ステップを調べました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
では</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第二部</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、彼は実験の開発を開始し、どのように正確な仮説を選択するようにするための方向性について話しました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この第3部では</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、実験自体に</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">焦点を当て</font><font style="vertical-align: inherit;">ます。幅広い</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">トラブルシューティング</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オプションをカバーするツールとテクニックのコレクションが提示され</font><font style="vertical-align: inherit;">ます。</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（故障注入または故障注入）</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">カオス工学実験に必要です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このリストはすべてを網羅しているとは言えませんが、最初に、さらに考察するための基礎を築くには十分です。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">トラブルシューティング：それは何で、なぜですか？</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
システムに障害を導入することで、ストレスの多い条件に対するシステムの応答が仕様を満たしているかどうかを理解および確認できます。この手法が初めて使用さ</font><font style="vertical-align: inherit;">れたのは、デバイスの電気信号を変更することにより</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、ハードウェアレベル</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、特に接点のレベルで</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">誤動作</font></a><font style="vertical-align: inherit;">を</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">引き起こす</font></a><font style="vertical-align: inherit;">ことでした。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ソフトウェア開発では、障害管理はシステムの回復力を高め、潜在的な弱点を取り除くのに役立ちます。このプロセスは「</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">障害の除去」</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と呼ばれ</font><font style="vertical-align: inherit;">ます。また、このような状況が本番環境で発生する前であっても、障害の潜在的な結果（つまり、破壊の半径）を推定するのに役立ちます。これは</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">障害予測</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と呼ばれ</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
トラブルシューティングにはいくつかの重要な利点があります。</font><font style="vertical-align: inherit;">助けになる：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> インシデントおよび予期しない状況への対応を理解し、実践する。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 実際の障害の影響の大きさを評価する</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> フォールトトレランスメカニズムの機能の有効性と制限を評価する。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 設計の欠陥を取り除き、弱点を見つける。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> システムの可観測性の評価と向上</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 障害による損傷の範囲を見つけて、それを減らすのに役立ちます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> システムコンポーネント間の障害の影響の広がりを把握します。</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">障害カテゴリ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
障害の導入は、次の5つのカテゴリに分類されます。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リソース</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">レベルの障害</font><font style="vertical-align: inherit;">。</font></font></li>
<li><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ネットワークと依存</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">レベルで</font><font style="vertical-align: inherit;">;</font></font></li>
<li><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アプリケーション、プロセス、サービス</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">のレベルで</font><font style="vertical-align: inherit;">;</font></font></li>
<li><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">インフラストラクチャ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">レベル</font><font style="vertical-align: inherit;">;</font></font></li>
<li><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スタッフ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">レベル</font><font style="vertical-align: inherit;">*。</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、各カテゴリを調べて、それぞれの障害の例を示します。</font><font style="vertical-align: inherit;">さらに、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">フォールトを作成して管理するための包括的なツール</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">についても説明</font><b><font style="vertical-align: inherit;">します</font></b><font style="vertical-align: inherit;">。</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">*注：この記事では人員配置の問題は扱いません。</font><font style="vertical-align: inherit;">このトピックについては、別の出版物で触れます。</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.リソースレベルの障害または「リソースの枯渇」</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
クラウドサービスはリソースにほとんど制限がないことを教えてくれましたが、私はあなたを失望させなければなりません。これはそうではありません。</font><font style="vertical-align: inherit;">インスタンス、コンテナ、関数など </font><font style="vertical-align: inherit;">-抽象化のレベルに関係なく、リソースは遅かれ早かれ不足します。</font><font style="vertical-align: inherit;">システムの安定性をチェックし、深刻なリソース不足の状態に設定し、「リソース枯渇」</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リソース枯渇</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と呼ばれるアプローチに取り組んでい</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">
リソースの枯渇は、通常、</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">DoS攻撃の</font></a><font style="vertical-align: inherit;">ように見え</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ます</font></a><font style="vertical-align: inherit;">（ただし、あまり馴染みはありません）。ターゲットホストの動作を妨害しようとします。</font><font style="vertical-align: inherit;">これは、トラブルシューティングを行うためのかなり一般的な方法です。おそらく実装が簡単だからです。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/webt/0b/dm/3g/0bdm3gwcn_rovms1sym42yrj45s.png"></a><br>
<br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CPU、メモリ、I / Oの不足</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私のお気に入りのツールの1つは、</font><font style="vertical-align: inherit;">Amos Waterlandが開発し</font><font style="vertical-align: inherit;">た</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">元のユーティリティの</font></a><font style="vertical-align: inherit;">生まれ変わりである</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">stress-ng</font></font></b></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。</font><font style="vertical-align: inherit;">
ストレスngを使用すると、</font><i><font style="vertical-align: inherit;">ストレッサー</font></i><font style="vertical-align: inherit;">を使用して、コンピューターのさまざまな物理サブシステムやOSカーネルのインターフェイスに障害を挿入できます</font><font style="vertical-align: inherit;">。これらは、CPU、CPUキャッシュ、デバイス、I / O、割り込み、ファイルシステム、メモリ、ネットワーク、オペレーティングシステム、パイプライン、スケジューラ、仮想マシンで使用できます。</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">マニュアルページに</font></a><font style="vertical-align: inherit;">は、利用可能なすべてのストレステストの完全な説明が含まれています。</font><font style="vertical-align: inherit;">
以下は、</font><b><font style="vertical-align: inherit;">stress-ng</font></b><font style="vertical-align: inherit;">の使用例です</font><font style="vertical-align: inherit;">。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br>
<ul>
<li> <b>- CPU</b> — <code>matrixprod</code> —      ,     . ,    «» CPU.<br>
<br>
<pre><code class="bash hljs">❯ stress-ng —-cpu 0 --cpu-method matrixprod -t 60s</code></pre></li>
<li> - <code>iomix-bytes</code>  N    -worker' iomix.  N    1      <b>- /</b>.      80 %     :<br>
<br>
<pre><code class="bash hljs">❯ stress-ng --iomix 1 --iomix-bytes 80% -t 60s</code></pre></li>
<li> <code>vm-bytes</code>     <b>- </b>.    stress-ng  9   .   «» 90 %      (   10 %  ):<br>
<br>
<pre><code class="bash hljs">❯ stress-ng --vm 9 --vm-bytes 90% -t 60s</code></pre></li>
</ul><br>
<h3>    </h3><br>
<code>dd</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ファイルを変換およびコピーするように設計されたコマンドラインユーティリティです。</font><font style="vertical-align: inherit;">この場合、dd </font><font style="vertical-align: inherit;">は、ハードドライブのブートセクターのバックアップ</font><font style="vertical-align: inherit;">などの</font><font style="vertical-align: inherit;">タスクのために</font><font style="vertical-align: inherit;">、</font></font><code>/dev/zero</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">および</font><font style="vertical-align: inherit;">などの特別なデバイスファイルから読み取り（または書き込み）し</font></font><code>/dev/random</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">たり、一定量のランダムな情報を受信したりできます。</font><font style="vertical-align: inherit;">したがって、ホストに誤動作をもたらし、ディスク全体をシミュレートするためにも使用できます。</font><font style="vertical-align: inherit;">ログがサーバー上のすべての空き領域を消費し、アプリケーションがクラッシュした原因を覚えていますか？</font><font style="vertical-align: inherit;">このユーティリティは役立ちますが、害も及ぼします。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ddは非常に注意深く使用してください。</font><font style="vertical-align: inherit;">コマンドのエラーは、ハードディスク上のデータを消去、破壊、または上書きする可能性があります！</font></font></b><br>
<br>
<pre><code class="bash hljs">❯ dd <span class="hljs-keyword">if</span>=/dev/urandom of=/burn bs=1M count=65536 iflag=fullblock &amp;</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アプリケーションAPIリソースの枯渇</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
APIのパフォーマンス、復元力、およびスケーラビリティは重要です。実際、APIを使用すると、企業はアプリケーションを改善し、ビジネスを成長させることができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
負荷テスト</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">負荷テスト</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -アプリが本番環境に入る前にアプリを試す絶好の機会。また、ストレステストの優れた方法でもあり、実際の負荷の下でのみ発生する可能性がある問題や制限を特定できます。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><code>wrk</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-システムに大きな負荷をかける可能性のあるHTTPベンチマークツール。私は本当にヘルスチェック用のAPIをロードするのが好きです-特にこれらが</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ディープチェックである</font></a><font style="vertical-align: inherit;">場合</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、プロジェクトのアーキテクチャに関する決定について多くを学ぶことができるので、キャッシュはどのように構成されますか？</font><font style="vertical-align: inherit;">周波数制限はどのように機能しますか？</font><font style="vertical-align: inherit;">システムはロードバランサーからのヘルスチェックを優先しますか？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここがすばらしい出発点です。</font></font><br>
<br>
<pre><code class="bash hljs">❯ wrk -t12 -c400 -d20s http://127.0.0.1/api/health</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このコマンドは12のスレッドを開始し、400のHTTP接続を20秒間開いたままにします。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.ネットワークレベルの障害と依存関係の紹介</font></font></h2><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Peter Deutschによる</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">「分散コンピューティングの8つの誤り」は</font></a><font style="vertical-align: inherit;">、分散システムの設計において開発者を導く一連の仮定です。</font><font style="vertical-align: inherit;">しかし、彼らはしばしば彼らに反対し、システムの中断を引き起こし、そのアーキテクチャを強制的に変更します。</font><font style="vertical-align: inherit;">これらは仮定です：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ネットワークは信頼できます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 遅延はゼロです。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 帯域幅は無制限です。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ネットワークは安全です。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> トポロジは変更されません。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 管理者は1人だけです。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 輸送は常に問題なく行われます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ネットワークは均一です。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実際、このリストは、障害を導入し、ネットワーク障害に耐える分散システムの能力をテストするための指示の既製のリストです。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ネットワークの待ち時間、損失、および損傷の紹介</font></font></h3><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><code>tc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（トラフィック制御）</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、Linuxカーネルパッケージスケジューラを構成するためのコマンドラインツールです。</font><font style="vertical-align: inherit;">パケットがどのようにキューに入れられ、ネットワークインターフェイスを介して送受信されるかを決定します。</font><font style="vertical-align: inherit;">機能には、キューイング、ポリシーの適用、分類、計画、シェーピング、およびドロップが含まれます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
tcを使用して、UDPまたはTCPアプリケーションの遅延とパケット損失をシミュレートしたり、インターネット上のトラフィックの実際の移動をシミュレートするために特定のサービスのネットワーク帯域幅を制限したりできます。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-100ミリ秒の遅延を実装します。</font></font></b><br>
<br>
<pre><code class="bash hljs"><span class="hljs-comment"># </span><font></font>
❯ tc qdisc add dev eth0 root netem delay 100ms<font></font>
<font></font>
<span class="hljs-comment"># </span>
❯ tc qdisc del dev eth0 root netem delay 100ms</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-100ミリ秒の遅延と50ミリ秒のデルタを実装します。</font></font></b><br>
<br>
<pre><code class="bash hljs"><span class="hljs-comment"># </span><font></font>
❯ tc qdisc add dev eth0 root netem delay 100ms 50ms<font></font>
<font></font>
<span class="hljs-comment"># </span>
❯ tc qdisc del dev eth0 root netem delay 100ms 50ms</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-ネットワークパケットの5％への損傷をシミュレートします。</font></font></b><br>
<br>
<pre><code class="bash hljs"><span class="hljs-comment"># </span><font></font>
❯ tc qdisc add dev eth0 root netem corrupt 5%<font></font>
<font></font>
<span class="hljs-comment"># </span>
❯ tc qdisc del dev eth0 root netem corrupt 5%</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-25％の相関でパケットの7％の損失をシミュレートします。</font></font></b><br>
<br>
<pre><code class="bash hljs"><span class="hljs-comment"># </span><font></font>
❯ tc qdisc add dev eth0 root netem loss 7% 25%<font></font>
<font></font>
<span class="hljs-comment"># </span>
❯ tc qdisc del dev eth0 root netem loss 7% 25%</code></pre><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注：7％を使用すると、TCPが引き続き機能します。</font></font></i><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ etc / hostsでの操作</font></font></h3><br>
<code>/etc/hosts</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IPアドレスとドメイン名を照合する単純なテキストファイルです（アドレスごとに1行）。</font><font style="vertical-align: inherit;">各ホストには、次の情報を含む独自の行が必要</font></font><br>
<br>
<code>IP_ __ [...]</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
です。hostsファイルは、コンピューターがコンピューターネットワークのネットワークノードをマップし、人間が読めるドメインを</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IPアドレスに</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">変換するいくつかの方法の1つです</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">ご想像のとおり、コンピュータを混乱させるのに最適です。</font><font style="vertical-align: inherit;">次に例をいくつか示します。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-EC2インスタンスからDynamoDB APIへのアクセスをブロックします。</font></font></b><br>
<br>
<pre><code class="bash hljs"><span class="hljs-comment"># </span>
<span class="hljs-comment">#  /etc/hosts  /etc/host.back</span><font></font>
❯ cp /etc/hosts /etc/hosts.back<font></font>
❯ <span class="hljs-built_in">echo</span> <span class="hljs-string">"127.0.0.1 dynamodb.us-east-1.amazonaws.com"</span> &gt;&gt; /etc/hosts<font></font>
❯ <span class="hljs-built_in">echo</span> <span class="hljs-string">"127.0.0.1 dynamodb.us-east-2.amazonaws.com"</span> &gt;&gt; /etc/hosts<font></font>
❯ <span class="hljs-built_in">echo</span> <span class="hljs-string">"127.0.0.1 dynamodb.us-west-1.amazonaws.com"</span> &gt;&gt; /etc/hosts<font></font>
❯ <span class="hljs-built_in">echo</span> <span class="hljs-string">"127.0.0.1 dynamodb.us-west-2.amazonaws.com"</span> &gt;&gt; /etc/hosts<font></font>
❯ <span class="hljs-built_in">echo</span> <span class="hljs-string">"127.0.0.1 dynamodb.eu-west-1.amazonaws.com"</span> &gt;&gt; /etc/hosts<font></font>
❯ <span class="hljs-built_in">echo</span> <span class="hljs-string">"127.0.0.1 dynamodb.eu-north-1.amazonaws.com"</span> &gt;&gt; /etc/hosts
<span class="hljs-comment"># </span>
<span class="hljs-comment">#    /etc/hosts</span>
❯ cp /etc/hosts.back /etc/hosts</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-EC2 APIへのEC2インスタンスのアクセスをブロックします。</font></font></b><br>
<br>
<pre><code class="bash hljs"><span class="hljs-comment"># </span>
<span class="hljs-comment">#  /etc/hosts  /etc/host.back</span><font></font>
❯ cp /etc/hosts /etc/hosts.back<font></font>
❯ <span class="hljs-built_in">echo</span> <span class="hljs-string">"127.0.0.1 ec2.us-east-1.amazonaws.com"</span> &gt;&gt; /etc/hosts<font></font>
❯ <span class="hljs-built_in">echo</span> <span class="hljs-string">"127.0.0.1 ec2.us-east-2.amazonaws.com"</span> &gt;&gt; /etc/hosts<font></font>
❯ <span class="hljs-built_in">echo</span> <span class="hljs-string">"127.0.0.1 ec2.us-west-1.amazonaws.com"</span> &gt;&gt; /etc/hosts<font></font>
❯ <span class="hljs-built_in">echo</span> <span class="hljs-string">"127.0.0.1 ec2.us-west-2.amazonaws.com"</span> &gt;&gt; /etc/hosts<font></font>
❯ <span class="hljs-built_in">echo</span> <span class="hljs-string">"127.0.0.1 ec2.eu-west-1.amazonaws.com"</span> &gt;&gt; /etc/hosts<font></font>
❯ <span class="hljs-built_in">echo</span> <span class="hljs-string">"127.0.0.1 ec2.eu-north-1.amazonaws.com"</span> &gt;&gt; /etc/hosts<font></font>
<font></font>
<span class="hljs-comment"># </span>
<span class="hljs-comment">#  /etc/hosts</span>
❯ cp /etc/hosts.back /etc/hosts</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このファイルを使用した例を次に示します。</font><font style="vertical-align: inherit;">最初は、EC2 APIが利用できない、とコマンドの</font></font><code>ec2 describe-instances</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">完了に成功：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/f9/oy/bc/f9oybcnf8l9s8ov4m7bzulyx6as.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、すぐに私は行を追加するよう</font></font><code>127.0.0.1 ec2.eu-west-1.amazonaws.com</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に</font></font><code>/etc/hosts</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、呼び出しはもはやEC2のAPIに達する：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/lj/6v/_y/lj6v_y8w7yfhnk9h8izd2gtj2aw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
もちろん、この方法では、すべてのAWSエンドポイントのために動作します。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DNSについての冗談を言うことができた...</font></font></h3><br>
<img src="https://habrastorage.org/webt/n_/yx/m9/n_yxm9ny4zizqrgnxk3gqpazb58.gif"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DNSキャッシュを更新しています...</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
...理解するには24時間かかります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2016年10月21日、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dynに対するDDoS攻撃により</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、ヨーロッパと北米では、かなりの数のインターネットプラットフォームとサービスが利用できなくなりました。</font><font style="vertical-align: inherit;">2018年の</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ThousandEyesグローバルDNSパフォーマンス</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">レポートに</font><font style="vertical-align: inherit;">よる</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">と</font></a><font style="vertical-align: inherit;">、企業とSaaSプロバイダーの60％は依然として同じDNSソースに依存しているため、DNSの障害に対して脆弱です。 DNSなしではインターネットは存在しないため、このサービスの停止をシミュレートして、起こりうるDNS障害に対するシステムの回復力をチェックするのが妥当です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
伝統的に、</font><font style="vertical-align: inherit;">いわゆる</font><b><font style="vertical-align: inherit;">ブラックホールは</font></b></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DDoS攻撃</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と戦うために</font><font style="vertical-align: inherit;">使用さ</font><font style="vertical-align: inherit;">れ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-「不正な」ネットワークトラフィックが「ブラックホール」に直接送信され、ボイドにスローされる方法（ネットワークバージョンの一種</font></font><code>/dev/null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">これを使用して、ネットワークトラフィックの損失やプロトコル障害（</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DNS</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">など）をシミュレートでき</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ます</font></a><font style="vertical-align: inherit;">。</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">Iptables</font></a></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
はこの仕事でうまくいきます</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">このユーティリティは、LinuxカーネルでIPパケットフィルタリングルールを使用してテーブルを設定、維持、分析するために使用されます。</font><font style="vertical-align: inherit;">
DNSトラフィックをブラックホールに送信するには、次のことを試してください。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-comment"># </span><font></font>
❯ iptables -A INPUT -p tcp -m tcp --dport 53 -j DROP<font></font>
❯ iptables -A INPUT -p udp -m udp --dport 53 -j DROP<font></font>
<font></font>
<span class="hljs-comment"># </span><font></font>
❯ iptables -D INPUT -p tcp -m tcp --dport 53 -j DROP<font></font>
❯ iptables -D INPUT -p udp -m udp --dport 53 -j DROP</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Toxiproxyを使用したトラブルシューティング</font></font></h3><br><font style="vertical-align: inherit;"></font><code>tc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and </font><font style="vertical-align: inherit;">
などのLinuxツールの主な欠点の1つは、</font></font><code>iptables</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">root権限を必要とすることです。これは、組織や状況によっては問題となる場合があります。この場合、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Toxiproxy</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が</font><b><font style="vertical-align: inherit;">助けに</font></b><font style="vertical-align: inherit;">なります</font><font style="vertical-align: inherit;">！</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Toxiproxy</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Shopifyエンジニアリングチームが</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">開発</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">し</font></a><font style="vertical-align: inherit;">たオープンソースのTCPプロキシ</font><font style="vertical-align: inherit;">です。実際の生活からカオスネットワークとシステムの状態をシミュレートするのに役立ちます。これを行うには、下の図に示すように、インフラストラクチャコンポーネントの間にToxiproxyを配置するだけです。Shopify </font><i><font style="vertical-align: inherit;">の生産開発チームの責任者であるSimon Eskildsenの</font></i><i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">スピーチ</font></a></i><i><font style="vertical-align: inherit;">からスライドし</font></i><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/cf/kk/vn/cfkkvnhndyivvjpk54pzmsc4qr0.png"><br>
<i><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このツールは、テスト、CI、および開発のある環境向けに特別に設計されており、決定論的またはランダム化されたカオス、およびカスタマイズをサポートしています。</font><font style="vertical-align: inherit;">Toxiproxyは、いわゆる「</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有毒</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">」</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">toxics</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">によってクライアントと上流の接続を操作</font><font style="vertical-align: inherit;">し</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://github.com/shopify/toxiproxy&amp;usg=ALkJrhgbQjwpWp4lTsS4lJPSg6MjJZOWaA#"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、HTTP APIを</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">介し</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://github.com/shopify/toxiproxy&amp;usg=ALkJrhgbQjwpWp4lTsS4lJPSg6MjJZOWaA#"><font style="vertical-align: inherit;">た</font></a><font style="vertical-align: inherit;">構成をサポートします</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">さらに、このツールには、有毒物質があらかじめインストールされています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以下の例は、ダウンストリーム毒性を使用して、ToxiproxyがRedisクライアント、redis-cli、およびRedis自体の間の遅延を1000ミリ秒増加させる方法を示し</font></font><br>
<br>
<img src="https://habrastorage.org/webt/8y/sx/py/8ysxpy9bfrh-qxdjofcfisvzei0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ています。</font><font style="vertical-align: inherit;">Toxiproxyの詳細は、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">このブログ投稿</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.アプリケーション、プロセス、およびサービスレベルでの障害の紹介</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プログラムが落ちています。</font><font style="vertical-align: inherit;">これはよく知られた事実です。</font><font style="vertical-align: inherit;">障害が発生した場合はどうすればよいですか？</font><font style="vertical-align: inherit;">SSH経由でサーバーにアクセスして、クラッシュしたプロセスを再起動する必要がありますか？</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プロセス制御システムを</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用すると、プロセスのステータスを監視したり、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">start</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">stop</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">restart</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">などのディレクティブを使用してプロセスを変更したりできます</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">これらのシステムは通常、プロセスを継続的に監視するために実装されます。</font><font style="vertical-align: inherit;">そのようなツールの1つがです</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><code>systemd</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">Linuxでプロセスを管理するためのメソッドの基本セットを提供します。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><code>Supervisord</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UNIXのようなオペレーティングシステムに同様の機能を提供します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらのツールは、アプリケーションをデプロイするときに使用する必要があります。</font><font style="vertical-align: inherit;">もちろん、まず第一に、重要なプロセスの崩壊の結果を研究する必要があります。</font><font style="vertical-align: inherit;">適切な通知を受け取り、プロセスが自動的に再起動することを確認します。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-Javaプロセスを「強制終了」します。</font></font></b><br>
<br>
<pre><code class="bash hljs">❯ pkill -KILL -f java
<span class="hljs-comment">#  </span>
❯ pkill -f <span class="hljs-string">'java -jar'</span></code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-Pythonプロセスの「強制終了」：</font></font></b><br>
<br>
<pre><code class="bash hljs">❯ pkill -KILL -f python</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
もちろん、助け</font></font><code>pkill</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">借りれ</font><font style="vertical-align: inherit;">ば、システム内のほとんどすべてのプロセスを強制終了できます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">データベースのクラッシュ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
サポートが苦情を許容できない障害がある場合、これらはデータベースに関連するものです。</font><font style="vertical-align: inherit;">データは重要な価値があり、データベースがクラッシュすると、顧客データを失うリスクが高まります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/3c/lz/ye/3clzye5agj95ocxbo0vyorq2opc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
場合によっては、可能な限り迅速にデータを回復し、システムを正常な状態に戻す機能が会社の運命を決定する可能性があります。</font><font style="vertical-align: inherit;">残念ながら、さまざまなデータベースクラッシュ全体に備えることは容易ではなく、その多くは本番環境でのみ発生します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ただし、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Amazon Aurora</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用している場合</font><font style="vertical-align: inherit;">は、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">エラーインジェクション付き</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">特別なクエリを</font></a><font style="vertical-align: inherit;">使用して、Amazon Auroraデータベースクラスターのフォールトトレランスを確認できます</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Amazon Auroraでのクラッシュの実装</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SQLコマンドの形式で失敗したクエリはAmazon Auroraインスタンスに送信され、次のいずれかのイベントの発生を計画できます。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">データベース</font><font style="vertical-align: inherit;">の読み取り</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（読み取り）</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">または書き込み</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">書き込み</font><i><font style="vertical-align: inherit;">）</font></i><font style="vertical-align: inherit;">インスタンスの</font><font style="vertical-align: inherit;">クラッシュ</font><font style="vertical-align: inherit;">。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Auroraレプリカの障害</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ディスク障害;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ランダムセグメントが混雑</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（混雑）</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">としてラベル付けされたドライブ障害</font><font style="vertical-align: inherit;">。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
失敗したリクエストを送信する場合、障害シミュレーションの必要な期間も指定します。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-Amazon Auroraインスタンスのクラッシュ：</font></font></b><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">SYSTEM</span> CRASH [ <span class="hljs-keyword">INSTANCE</span> | DISPATCHER | NODE ];</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-シミュレートされたAuroraレプリカの障害：</font></font></b><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">SYSTEM</span> SIMULATE percentage <span class="hljs-keyword">PERCENT</span> <span class="hljs-keyword">READ</span> REPLICA <span class="hljs-keyword">FAILURE</span>
[ <span class="hljs-keyword">TO</span> <span class="hljs-keyword">ALL</span> | <span class="hljs-keyword">TO</span> <span class="hljs-string">"replica name"</span> ]
<span class="hljs-keyword">FOR</span> <span class="hljs-built_in">INTERVAL</span> quantity { <span class="hljs-keyword">YEAR</span> | <span class="hljs-keyword">QUARTER</span> | <span class="hljs-keyword">MONTH</span> | <span class="hljs-keyword">WEEK</span> | <span class="hljs-keyword">DAY</span> | <span class="hljs-keyword">HOUR</span> | <span class="hljs-keyword">MINUTE</span> | <span class="hljs-keyword">SECOND</span> };</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-Auroraデータベースを使用したクラスターでのディスク障害のシミュレーション：</font></font></b><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">SYSTEM</span> SIMULATE percentage <span class="hljs-keyword">PERCENT</span> DISK <span class="hljs-keyword">FAILURE</span>
[ <span class="hljs-keyword">IN</span> DISK <span class="hljs-keyword">index</span> | NODE <span class="hljs-keyword">index</span> ]
<span class="hljs-keyword">FOR</span> <span class="hljs-built_in">INTERVAL</span> quantity { <span class="hljs-keyword">YEAR</span> | <span class="hljs-keyword">QUARTER</span> | <span class="hljs-keyword">MONTH</span> | <span class="hljs-keyword">WEEK</span> | <span class="hljs-keyword">DAY</span> | <span class="hljs-keyword">HOUR</span> | <span class="hljs-keyword">MINUTE</span> | <span class="hljs-keyword">SECOND</span> };</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-Auroraデータベースを使用したクラスターで増加したディスク負荷のシミュレーション：</font></font></b><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">SYSTEM</span> SIMULATE percentage <span class="hljs-keyword">PERCENT</span> DISK CONGESTION
<span class="hljs-keyword">BETWEEN</span> <span class="hljs-keyword">minimum</span> <span class="hljs-keyword">AND</span> maximum MILLISECONDS<font></font>
[ <span class="hljs-keyword">IN</span> DISK <span class="hljs-keyword">index</span> | NODE <span class="hljs-keyword">index</span> ]
<span class="hljs-keyword">FOR</span> <span class="hljs-built_in">INTERVAL</span> quantity { <span class="hljs-keyword">YEAR</span> | <span class="hljs-keyword">QUARTER</span> | <span class="hljs-keyword">MONTH</span> | <span class="hljs-keyword">WEEK</span> | <span class="hljs-keyword">DAY</span> | <span class="hljs-keyword">HOUR</span> | <span class="hljs-keyword">MINUTE</span> | <span class="hljs-keyword">SECOND</span> };</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サーバーレスの世界での失敗</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AWS Lambdaなどのマネージドサーバーレスサービスは最初は障害をサポートしていないため、サーバーレスコンポーネントを使用する場合、クラッシュの導入は注意が必要です。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lambdaの失敗の紹介</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この問題を解決するために</font><font style="vertical-align: inherit;">、</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">AWS Lambda</font></a><font style="vertical-align: inherit;">でクラッシュインジェクション用の</font><font style="vertical-align: inherit;">小さな</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pythonライブラリ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ラムダレイヤーを作成し</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ました</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">どちらも現在、遅延、エラー、例外、およびHTTPエラーコードの実装をサポートしています。</font><font style="vertical-align: inherit;">
障害自体は、</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">AWS SSMパラメータストア</font></a><font style="vertical-align: inherit;">で次のパラメータを設定することによって実装されます</font><font style="vertical-align: inherit;">。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="json hljs">{
   <span class="hljs-attr">"isEnabled"</span>: <span class="hljs-literal">true</span>,
   <span class="hljs-attr">"delay"</span>: <span class="hljs-number">400</span>,
   <span class="hljs-attr">"error_code"</span>: <span class="hljs-number">404</span>,
   <span class="hljs-attr">"exception_msg"</span>: <span class="hljs-string">"I really failed seriously"</span>,
   <span class="hljs-attr">"rate"</span>: <span class="hljs-number">1</span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ハンドラー関数にPythonデコレーターを追加して、障害を挿入できます。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-私たちは例外を発生させます：</font></font></b><br>
<br>
<pre><code class="python hljs"><span class="hljs-meta">@inject_exception</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">handler_with_exception</span>(<span class="hljs-params">event, context</span>):</span>
    <span class="hljs-keyword">return</span> {
        <span class="hljs-string">'statusCode'</span>: <span class="hljs-number">200</span>,
        <span class="hljs-string">'body'</span>: <span class="hljs-string">'Hello from Lambda!'</span><font></font>
    }<font></font>
<span class="hljs-meta">&gt;&gt;&gt; </span>handler_with_exception(<span class="hljs-string">'foo'</span>, <span class="hljs-string">'bar'</span>)<font></font>
Injecting exception_type &lt;<span class="hljs-class"><span class="hljs-keyword">class</span> "<span class="hljs-title">Exception</span>"&gt; <span class="hljs-title">with</span> <span class="hljs-title">message</span> <span class="hljs-title">I</span> <span class="hljs-title">really</span> <span class="hljs-title">failed</span> <span class="hljs-title">seriously</span> <span class="hljs-title">a</span> <span class="hljs-title">rate</span> <span class="hljs-title">of</span> 1
<span class="hljs-title">corrupting</span> <span class="hljs-title">now</span>
<span class="hljs-title">Traceback</span> (<span class="hljs-params">most recent call last</span>):</span>
   File <span class="hljs-string">"&lt;stdin&gt;"</span>, line <span class="hljs-number">1</span>, <span class="hljs-keyword">in</span> &lt;module&gt;<font></font>
   File <span class="hljs-string">"/.../chaos_lambda.py"</span>, line <span class="hljs-number">316</span>, <span class="hljs-keyword">in</span> wrapper
       <span class="hljs-keyword">raise</span> _exception_type(_exception_msg)<font></font>
Exception: I really failed seriously</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-間違ったHTTPエラーコードの実装：</font></font></b><br>
<br>
<pre><code class="python hljs"><span class="hljs-meta">@inject_statuscode</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">handler_with_statuscode</span>(<span class="hljs-params">event, context</span>):</span>
    <span class="hljs-keyword">return</span> {
        <span class="hljs-string">'statusCode'</span>: <span class="hljs-number">200</span>,
        <span class="hljs-string">'body'</span>: <span class="hljs-string">'Hello from Lambda!'</span><font></font>
    }<font></font>
<span class="hljs-meta">&gt;&gt;&gt; </span>handler_with_statuscode(<span class="hljs-string">'foo'</span>, <span class="hljs-string">'bar'</span>)<font></font>
Injecting Error <span class="hljs-number">404</span> at a rate of <span class="hljs-number">1</span><font></font>
corrupting now<font></font>
{<span class="hljs-string">'statusCode'</span>: <span class="hljs-number">404</span>, <span class="hljs-string">'body'</span>: <span class="hljs-string">'Hello from Lambda!'</span>}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-遅延を導入：</font></font></b><br>
<br>
<pre><code class="python hljs"><span class="hljs-meta">@inject_delay</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">handler_with_delay</span>(<span class="hljs-params">event, context</span>):</span>
    <span class="hljs-keyword">return</span> {
        <span class="hljs-string">'statusCode'</span>: <span class="hljs-number">200</span>,
        <span class="hljs-string">'body'</span>: <span class="hljs-string">'Hello from Lambda!'</span>
    }&gt;&gt;&gt; handler_with_delay(<span class="hljs-string">'foo'</span>, <span class="hljs-string">'bar'</span>)<font></font>
Injecting <span class="hljs-number">400</span> of delay <span class="hljs-keyword">with</span> a rate of <span class="hljs-number">1</span>
Added <span class="hljs-number">402.20</span>ms to handler_with_delay<font></font>
{<span class="hljs-string">'statusCode'</span>: <span class="hljs-number">200</span>, <span class="hljs-string">'body'</span>: <span class="hljs-string">'Hello from Lambda!'</span>}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このPythonライブラリの詳細については、ここをクリックして</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ください</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lambdaの作業に介入して、同時実行制限を設定します</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lambdaはデフォルトでセキュリティメカニズムを使用して、</font><font style="vertical-align: inherit;">各アカウントの特定のリージョンですべての機能</font><font style="vertical-align: inherit;">を</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">同時に</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">動作させます。</font><font style="vertical-align: inherit;">並列操作とは、関数コードが任意の時点で実行される回数を意味します。</font><font style="vertical-align: inherit;">これは、着信要求に応じて関数呼び出しをスケーリングするために使用されます。</font><font style="vertical-align: inherit;">ただし、ラムダの動作を遅くするという反対の目的にも使用できます。</font></font><br>
<br>
<pre><code class="bash hljs">❯ aws lambda put-function-concurrency --<span class="hljs-keyword">function</span>-name &lt;value&gt; --reserved-concurrent-executions 0</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このコマンドは</font></font><code>concurrency</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ゼロに</font><font style="vertical-align: inherit;">設定さ</font><font style="vertical-align: inherit;">れ、要求を強制的に失敗させます</font></font><code>429</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（「要求が多すぎます」）。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Thundra-サーバーレストランザクションの追跡</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
サーバーレスアーキテクチャを監視するこのツールには、サーバーレスアプリケーションに障害を挿入する機能が組み込まれています。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Thundra</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、いわゆる</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スパンリスナー</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">使用して</font><font style="vertical-align: inherit;">、DynamoDBのエラーハンドラーの欠如、バックアップデータソースの欠如、発信HTTPリクエストのタイムアウトの欠如などの障害を実装します。私自身は、このツールを使用していない、しかし、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">この刊行物</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">から</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ヤン崔</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">この素晴らしいビデオ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">から</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">マーシャビラルバは</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">完全に作業プロセスを説明します。これらから、ツンドラは有望に見えます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
サーバーレスのセクションを要約すると、私</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">は</font></a><font style="vertical-align: inherit;">すべての人に</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">素晴らしい記事を</font></a><font style="vertical-align: inherit;">お勧めしたいと思います</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> すでに述べたYan Cuiが作成したサーバーレスアプリケーションのカオスエンジニアリングの複雑さについて。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.インフラストラクチャのトラブルシューティング</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
カオスエンジニアリングは、インフラストラクチャレベルでの障害の注入から始まりました。Amazonの</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">場合もNetflixの場合も同様です</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">おそらく、インフラストラクチャの障害：データセンター全体のシャットダウンからインスタンスの誤った停止まで、実装が最も簡単です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そしてもちろん、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">カオスモンキーの</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例が最初に思い浮かび</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可用性領域でのEC2インスタンスの誤った停止</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Netflixは、その存在の黎明期に、建築ソリューションへの適切なアプローチの開発と実装に夢中になりました。</font><font style="vertical-align: inherit;">Chaos monkeyは、自動スケーラブルなステートレスマイクロサービスの状態を監視するためにAWSにデプロイされた最初のアプリケーションの1つでした。</font><font style="vertical-align: inherit;">つまり、インスタンスを停止して、状態を失うことなく自動的に置き換えることができます。</font><font style="vertical-align: inherit;">カオスモンキーは誰もこのルールに違反していないことを確認しました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次のスクリプトは、カオスモンキーと同様に、リージョン内の特定のアベイラビリティーゾーンでインスタンスをランダムに選択して停止します。</font></font><br>
<br>
<pre><code class="bash hljs">❯ stop_random_instance(az=<span class="hljs-string">"eu-west-1a"</span>, tag_name=<span class="hljs-string">"chaos"</span>, tag_value=<span class="hljs-string">"chaos-ready"</span>, region=<span class="hljs-string">"eu-west-1"</span>)</code></pre><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">stop-random-instance.py</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-keyword">import</span> boto3
<span class="hljs-keyword">import</span> random<font></font>
<font></font>
REGION = <span class="hljs-string">'eu-west-1'</span><font></font>
<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">stop_random_instance</span>(<span class="hljs-params">az, tag_name, tag_value, region=REGION</span>):</span>
    <span class="hljs-string">'''
    &gt;&gt;&gt; stop_random_instance(az="eu-west-1a", tag_name='chaos', tag_value="chaos-ready", region='eu-west-1')
    ['i-0ddce3c81bc836560']
    '''</span>
    ec2 = boto3.client(<span class="hljs-string">"ec2"</span>, region_name=region)<font></font>
    paginator = ec2.get_paginator(<span class="hljs-string">'describe_instances'</span>)<font></font>
    pages = paginator.paginate(<font></font>
        Filters=[<font></font>
            {<font></font>
                <span class="hljs-string">"Name"</span>: <span class="hljs-string">"availability-zone"</span>,
                <span class="hljs-string">"Values"</span>: [<font></font>
                    az<font></font>
                ]<font></font>
            },<font></font>
            {<font></font>
                <span class="hljs-string">"Name"</span>: <span class="hljs-string">"tag:"</span> + tag_name,
                <span class="hljs-string">"Values"</span>: [<font></font>
                    tag_value<font></font>
                ]<font></font>
            }<font></font>
        ]<font></font>
    )<font></font>
    instance_list = []<font></font>
    <span class="hljs-keyword">for</span> page <span class="hljs-keyword">in</span> pages:
        <span class="hljs-keyword">for</span> reservation <span class="hljs-keyword">in</span> page[<span class="hljs-string">'Reservations'</span>]:
            <span class="hljs-keyword">for</span> instance <span class="hljs-keyword">in</span> reservation[<span class="hljs-string">'Instances'</span>]:<font></font>
                instance_list.append(instance[<span class="hljs-string">'InstanceId'</span>])<font></font>
    print(<span class="hljs-string">"Going to stop any of these instances"</span>, instance_list)<font></font>
    selected_instance = random.choice(instance_list)<font></font>
    print(<span class="hljs-string">"Randomly selected"</span>, selected_instance)<font></font>
    response = ec2.stop_instances(InstanceIds=[selected_instance])<font></font>
    <span class="hljs-keyword">return</span> response</code></pre><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">stop-random-instance.pyの要点</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font></i></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
とに注意し</font></font><code>tag_name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">てください</font></font><code>tag_value</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">これらの小さなトリックは、「間違った」インスタンスの切断を防ぐのに役立ちます。</font><font style="vertical-align: inherit;">#lessonlearned- </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fj/a3/uq/fja3uq8zoomlzrr4zomp1ycnh3k.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「はい、データベースを再起動すればクールです...」-そのインスタンスではありません...</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.オーケストレーションと障害管理のための包括的な機器</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これまでに説明されているさまざまなツールに驚かされる可能性が高いです。</font><font style="vertical-align: inherit;">幸いなことに、上記のツールの機能を組み合わせて障害をオーケストレーションおよび実装するための既成のパッケージがいくつかあり、シンプルで便利な形式になっています。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">カオスツールキット</font></font></h3><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chaos Toolkit</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、この種の私のお気に入りのツールの1つです。</font><font style="vertical-align: inherit;">これは</font><font style="vertical-align: inherit;">、とりわけ</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">Russ Miles</font></a><font style="vertical-align: inherit;">、</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">Sylvain Hellegouarch</font></a><font style="vertical-align: inherit;">、</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">Marc Perrien</font></a><font style="vertical-align: inherit;">などの</font><font style="vertical-align: inherit;">優れた</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ChaosIQ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">チームによってサポートされている（商用ベースで）カオスエンジニアリング用のオープンソースプラットフォーム全体</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">です</font></a><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">
Chaos Toolkitは、カオス実験のための宣言的で拡張可能なオープンAPIを提供します。</font><font style="vertical-align: inherit;">AWS、Google Cloud Engine、Microsoft Azure、Cloud Foundry、Humio、Prometheus、Gremlinのドライバーが含まれています。</font><font style="vertical-align: inherit;">
拡張機能は、さまざまな実験を整理するための一連のテストと一連のアクションです。たとえば、特定のアベイラビリティーゾーンでインスタンスを誤って停止した場合、値が</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><code>tag-key</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に等しい</font></font><code>chaos-ready</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">stop-random-instance-exp.json</font></font></b><div class="spoiler_text"><pre><code class="json hljs">{
    <span class="hljs-attr">"version"</span>: <span class="hljs-string">"1.0.0"</span>,
    <span class="hljs-attr">"title"</span>: <span class="hljs-string">"What is the impact of randomly terminating an instance in an AZ"</span>,
    <span class="hljs-attr">"description"</span>: <span class="hljs-string">"terminating EC2 instance at random should not impact my app from running"</span>,
    <span class="hljs-attr">"tags"</span>: [<span class="hljs-string">"ec2"</span>],
    <span class="hljs-attr">"configuration"</span>: {
        <span class="hljs-attr">"aws_region"</span>: <span class="hljs-string">"eu-west-1"</span><font></font>
    },<font></font>
    <span class="hljs-attr">"steady-state-hypothesis"</span>: {
        <span class="hljs-attr">"title"</span>: <span class="hljs-string">"more than 0 instance in region"</span>,
        <span class="hljs-attr">"probes"</span>: [<font></font>
            {<font></font>
              <span class="hljs-attr">"provider"</span>: {
                <span class="hljs-attr">"module"</span>: <span class="hljs-string">"chaosaws.ec2.probes"</span>,
                <span class="hljs-attr">"type"</span>: <span class="hljs-string">"python"</span>,
                <span class="hljs-attr">"func"</span>: <span class="hljs-string">"count_instances"</span>,
                <span class="hljs-attr">"arguments"</span>: {
                  <span class="hljs-attr">"filters"</span>: [<font></font>
                    {<font></font>
                        <span class="hljs-attr">"Name"</span>: <span class="hljs-string">"availability-zone"</span>,
                        <span class="hljs-attr">"Values"</span>: [<span class="hljs-string">"eu-west-1c"</span>]<font></font>
                    }<font></font>
                  ]<font></font>
                }<font></font>
              },<font></font>
              <span class="hljs-attr">"type"</span>: <span class="hljs-string">"probe"</span>,
              <span class="hljs-attr">"name"</span>: <span class="hljs-string">"count-instances"</span>,
              <span class="hljs-attr">"tolerance"</span>: [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>]<font></font>
            }<font></font>
        ]<font></font>
    },<font></font>
    <span class="hljs-attr">"method"</span>: [<font></font>
        {<font></font>
            <span class="hljs-attr">"type"</span>: <span class="hljs-string">"action"</span>,
            <span class="hljs-attr">"name"</span>: <span class="hljs-string">"stop-random-instance"</span>,
            <span class="hljs-attr">"provider"</span>: {
                <span class="hljs-attr">"type"</span>: <span class="hljs-string">"python"</span>,
                <span class="hljs-attr">"module"</span>: <span class="hljs-string">"chaosaws.ec2.actions"</span>,
                <span class="hljs-attr">"func"</span>: <span class="hljs-string">"stop_instance"</span>,
                <span class="hljs-attr">"arguments"</span>: {
                    <span class="hljs-attr">"az"</span>: <span class="hljs-string">"eu-west-1c"</span><font></font>
                },<font></font>
               <span class="hljs-attr">"filters"</span>: [<font></font>
                    {<font></font>
                        <span class="hljs-attr">"Name"</span>: <span class="hljs-string">"tag-key"</span>,
                        <span class="hljs-attr">"Values"</span>: [<span class="hljs-string">"chaos-ready"</span>]<font></font>
                    }<font></font>
                ]<font></font>
            },<font></font>
            <span class="hljs-attr">"pauses"</span>: {
               <span class="hljs-attr">"after"</span>: <span class="hljs-number">60</span><font></font>
             }<font></font>
        }<font></font>
    ],<font></font>
    <span class="hljs-attr">"rollbacks"</span>: [<font></font>
        {<font></font>
            <span class="hljs-attr">"type"</span>: <span class="hljs-string">"action"</span>,
            <span class="hljs-attr">"name"</span>: <span class="hljs-string">"start-all-instances"</span>,
            <span class="hljs-attr">"provider"</span>: {
                <span class="hljs-attr">"type"</span>: <span class="hljs-string">"python"</span>,
                <span class="hljs-attr">"module"</span>: <span class="hljs-string">"chaosaws.ec2.actions"</span>,
                <span class="hljs-attr">"func"</span>: <span class="hljs-string">"start_instances"</span>,
                <span class="hljs-attr">"arguments"</span>: {
                <span class="hljs-attr">"az"</span>: <span class="hljs-string">"eu-west-1c"</span><font></font>
                 },<font></font>
               <span class="hljs-attr">"filters"</span>: [<font></font>
                    {<font></font>
                        <span class="hljs-attr">"Name"</span>: <span class="hljs-string">"tag-key"</span>,
                        <span class="hljs-attr">"Values"</span>: [<span class="hljs-string">"chaos-ready"</span>]<font></font>
                    }<font></font>
                ]<font></font>
            }<font></font>
        }<font></font>
    ]<font></font>
}</code></pre><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">stop-random-instance-exp.jsonの要旨</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font></i></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この実験の実行は簡単です：</font></font><br>
<br>
<pre><code class="bash hljs">❯ chaos run experiment_aws_random_instance.json</code></pre><br>
<img src="https://habrastorage.org/webt/of/_p/x5/of_px5uogbp1xqofqupfvxzxx_i.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Chaos Toolkitの利点は、まずオープンソースにあります（したがって、特定のニーズに簡単に適応できます）。</font><font style="vertical-align: inherit;">第二に、CI / CDパイプラインと完全に統合し、継続的なカオステストをサポートします。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Chaos Toolkitの欠点はその複雑さです。始めるには、その機能と原則を理解する必要があります。</font><font style="vertical-align: inherit;">さらに、ツールキットには既製の実験はありません。自分で書く必要があります。</font><font style="vertical-align: inherit;">ただし、ChaosIQチームはこの欠点に対処するために積極的に取り組んでいます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">グレムリン</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私の他のお気に入りのツールであるGremlinには、直感的なユーザーインターフェイスを備えたシンプルで使いやすい形式のトラブルシューティングモードの完全なセットが含まれています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gremlinは、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リソース</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">状態</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ネットワーク</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クエリ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">のエラーの実装を提供し</font><font style="vertical-align: inherit;">、システムのさまざまな部分を試すことができます。ベアメタル、さまざまなクラウドサービスプロバイダー、コンテナー環境（Kubernetes *を含む）、アプリケーション、および（ある程度）サーバーレスコンピューティングをサポートします。</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">* </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意ペレフ。</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：たとえば、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">この記事</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">では、Kubernetesのコンテキストで（だけでなく）グレムリンを使用する方法について詳しく</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">説明してい</font></a><font style="vertical-align: inherit;">ます。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ボーナスは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、プロジェクトブログの</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">優れたコンテンツ</font><font style="vertical-align: inherit;">です。さらに、グレムリンの人たちは本当にクールで、いつでも救助に来る準備ができています！まず、これらは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">マシュー</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コルトン</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タミー</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リッチ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アナ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HML</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gremlinの操作は簡単です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アプリケーションを入力し、[ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Create Attack</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ]を</font></font><br>
<br>
<img src="https://habrastorage.org/webt/xw/cv/m9/xwcvm9psqdr8uottkvc2nt4kexi.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
選択します。ターゲットインスタンスを選択します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/3c/wq/p1/3cwqp1otkzalanruul81k3vxtlk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実装する誤動作のタイプを選択し</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">小さなグレムリンを自由に</font><font style="vertical-align: inherit;">解放</font><i><font style="vertical-align: inherit;">（</font></i><font style="vertical-align: inherit;">解放</font><i><font style="vertical-align: inherit;">）し</font></i><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ao/g6/vp/aog6vphvqheifa9uwpf2ew3kovy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
カオスの実験を単純かつ簡単にするため、私は常にグレムリンを愛してきたことを認めなければなりません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私の意見では、欠点は</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">価格設定</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。</font><font style="vertical-align: inherit;">ライセンスがあるため、</font><font style="vertical-align: inherit;">初心者や不定期</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（オンデマンド）の</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用</font><font style="vertical-align: inherit;">にはあまり適していません</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">しかし、最近無料版が登場しました。</font><font style="vertical-align: inherit;">Gremlinのもう1つの欠点は、攻撃の対象となるインスタンスにクライアントとデーモンをインストールする必要があることです。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AWS System Managerでコマンドを実行する</font></font></h3><br><font style="vertical-align: inherit;"><b><font style="vertical-align: inherit;">2015年</font></b><font style="vertical-align: inherit;">に</font><b><font style="vertical-align: inherit;">発表され</font></b></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">た</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Service </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">EC2 the Run the Commandは</font></a><font style="vertical-align: inherit;">、</font><font style="vertical-align: inherit;">EC2インスタンスを安全かつ簡単に管理するために作成されました。今日では、EC2タイプのインスタンスだけでなく、</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ハイブリッド環境</font></a><font style="vertical-align: inherit;">からもインスタンスの構成をリモートで安全に管理でき</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ます</font></a><font style="vertical-align: inherit;">。これには、オンプレミスサーバー、仮想マシン、さらにSystems Managerで使用される他のクラウド環境のVMも含まれます。</font><font style="vertical-align: inherit;">
Run Commandを使用すると、フリートのサイズに関係なく、DevOpsタスクを自動化したり、構成の更新を実行したりできます。</font><font style="vertical-align: inherit;">
Run Commandは主に、アプリケーションのインストールとブートストラップ、ログのキャプチャ、Windowsドメインへのインスタンスのアタッチなどのタスクに使用されますが、カオス実験の実施にも適しています。</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私が持っている</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ブログの記事</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> AWSシステムマネージャを使用して混乱を導入する程度だけでなく、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">既製のソース</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">実験のために。</font><font style="vertical-align: inherit;">ぜひお試しください。きっと気に入るはずです。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">くるくるする！</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この記事を終える前に、障害の実装に関するいくつかの重要な点を強調したいと思います。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">カオスエンジニアリングの要点は、本番環境で何かを壊すことではありません。</font><font style="vertical-align: inherit;">これは全体の旅です。</font><font style="vertical-align: inherit;">制御された環境での実験の実施によって得られた知識への旅-開発、ベータ、ステージング、または本番環境のローカル環境など、あらゆる環境。</font><font style="vertical-align: inherit;">この旅はどこからでも始まります！</font><font style="vertical-align: inherit;">これは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オルガホール</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">によって完全に言われました</font><font style="vertical-align: inherit;">：</font></font><br>
<br>
<blockquote>«    .       ». — Olga Hall,    Resilience Engineering  Amazon Prime Video.</blockquote></li>
<li>    , ,        .               —       -.</li>
<li>        ,          ,       .</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最後に、テストして、試して、テストして、もう一度繰り返します。</font><font style="vertical-align: inherit;">カオスエンジニアリングの目標は、アプリケーション（およびツール）が乱流の動作条件に耐える能力に自信をつけることです。</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それで全部です。</font><font style="vertical-align: inherit;">最後までお読みいただきありがとうございます！</font><font style="vertical-align: inherit;">第3部をお楽しみいただけましたでしょうか。</font><font style="vertical-align: inherit;">あなたの意見、コメント、そしてもちろん拍手を待っています</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">中</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -約翻訳）</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">！</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">翻訳者からのPS</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちのブログも読んでください：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">カオスエンジニアリング：意図的な破壊の芸術。</font><font style="vertical-align: inherit;">パート1</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> " </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（カオスエンジニアリングの概念と、それが生産の失敗につながる前に問題を発見/修正するのにどのように役立つかについて）</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></li>
<li> «<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">Chaos Engineering:   .  2</a>» <i>( chaos engineering      )</i>;</li>
<li> «<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">  Kubernetes (   )</a>».</li>
</ul></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja477980/index.html">1年半の20ハッカソン：サハロフチームの経験</a></li>
<li><a href="../ja477984/index.html">関連する唯一のメトリックの基本的なトラップ</a></li>
<li><a href="../ja477986/index.html">有毒なパリティ</a></li>
<li><a href="../ja477990/index.html">Quiet.js：超音波でデータを送受信するためのライブラリ</a></li>
<li><a href="../ja477992/index.html">Elixirのような構文を持つRubyメソッドシグネチャ仕様</a></li>
<li><a href="../ja477996/index.html">「Kubernetesが遅延を10倍に増やした」：誰のせいですか？</a></li>
<li><a href="../ja478000/index.html">請負業者との契約に含まれている必要があります</a></li>
<li><a href="../ja478004/index.html">「1か月で、私はフルスタックの開発者になりました。」学生がABBYYでインターンシップについて語る</a></li>
<li><a href="../ja478006/index.html">ITの詐欺-ロシアに、または「煙突」（デューデリジェンス）の利点についての傾向が来ています。</a></li>
<li><a href="../ja478010/index.html">Airbnbで全国的な詐欺を誤って発見した方法</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>