<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🐠 👩🏿‍🔧 🤟🏻 1つのスイッチのストーリー 😒 💪🏿 🍠</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="LANアグリゲーションでは、6ペアのArista DCS-7050CX3-32Sスイッチと1ペアのBrocade VDX 6940-36Qスイッチがありました。このネットワーク上のBrocadeスイッチは非常に煩わしいものであり、動作して機能を実行しますが、一部のアクションの完全な自動化を準備してい...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>1つのスイッチのストーリー</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/selectel/blog/498368/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/y6/hn/ng/y6hnnglhd7cga9rdsoloimhiism.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
LANアグリゲーションでは、6ペアのArista DCS-7050CX3-32Sスイッチと1ペアのBrocade VDX 6940-36Qスイッチがありました。</font><font style="vertical-align: inherit;">このネットワーク上のBrocadeスイッチは非常に煩わしいものであり、動作して機能を実行しますが、一部のアクションの完全な自動化を準備していたため、これらのスイッチにこれらの機能がありませんでした。</font><font style="vertical-align: inherit;">また、40 GEインターフェイスから100 GEを使用して次の2〜3年間の予約を可能にしたいと考えていました。</font><font style="vertical-align: inherit;">そこで、BrocadeをAristaに交換することにしました。</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらのスイッチは、各データセンターのLANアグリゲーションスイッチです。</font><font style="vertical-align: inherit;">ディストリビューションスイッチ（第2レベルのアグリゲーション）はそれらに直接接続され、サーバーラック内のトップオブラックLANスイッチに既に組み込まれています。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/wr/_k/mn/wr_kmn_mxcbk5pzlszif5fwpmmy.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
各サーバーは、1つまたは2つのアクセススイッチに含まれています。アクセススイッチは、1組のディストリビューションスイッチに接続されます（2つのディストリビューションスイッチと、アクセススイッチから別のディストリビューションスイッチへの2つの物理リンクが冗長性のために使用されます）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
各サーバーはクライアントで使用できるため、個別のVLANがクライアントに割り当てられます。次に、同じVLANが任意のラック内のこのクライアントの別のサーバーに割り当てられます。データセンターはいくつかの列（POD）で構成され、ラックの各列には独自の分散スイッチがあります。次に、これらのディストリビューションスイッチが集約スイッチに接続されます。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/oc/2p/r5/oc2pr5parnr_c3-m4s1fswgxlcm.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
クライアントは任意の列でサーバーを注文できます。サーバーが特定のラックの特定の列に割り当てられるか、またはインストールされることを事前に予測することは不可能であるため、集約スイッチの各データセンターには約2500のVLANがあります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DCI（Data-Center Interconnect）の機器は、集約スイッチに接続します。 L2接続（別のデータセンターへのVXLANトンネルを形成するスイッチのペア）とL3接続（2つのMPLSルーター）に使用できます。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/eh/2a/pg/eh2apgb0jx6excyolzu7hlqwwiy.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すでに書いたように、1つのデータセンターの機器のサービスの構成を自動化するプロセスを統合するために、中央集約スイッチを置き換える必要がありました。</font><font style="vertical-align: inherit;">既存のスイッチの隣に新しいスイッチを設置し、それらをMLAGペアに組み合わせて、作業の準備を始めました。</font><font style="vertical-align: inherit;">それらはすぐに既存の集約スイッチに接続されたため、すべてのクライアントVLANに共通のL2ドメインがありました。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">回路詳細</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
具体的には、古いアグリゲーションスイッチを</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">および</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と呼び</font><font style="vertical-align: inherit;">、新しい</font><font style="vertical-align: inherit;">アグリゲーションスイッチを</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">および</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と呼び</font><font style="vertical-align: inherit;">ます。中にいることを想像して</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">POD 1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">POD 4</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 1つのクライアントのサーバがある</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C1は</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、クライアントのVLANが青色で表示されます。このクライアントは別のデータセンターとのL2接続サービスを使用するため、そのVLANはVXLANスイッチのペアで提供されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
クライアント</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はサーバーを</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">POD 2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">および</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">POD 3</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に配置します。クライアントのVLANを濃い緑色で示します。このクライアントは、別のデータセンターとの接続サービスを使用しますが、L3なので、そのVLANはL3VPNルーターのペアで処理されます。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/pl/tx/8t/pltx8tm018xdgys6sbk08dng6_w.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
クライアントVLANは、置換作業のどの段階で何が起こり、どこで通信が途絶え、どのくらいの期間続くかを理解する必要があります。</font><font style="vertical-align: inherit;">この場合、STPプロトコルのツリーの幅が大きく、プロトコルの収束は、デバイスとそれらの間のリンクの数から指数関数的に増加するため、このスキームでは使用されません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ダブルリンクで接続されたすべてのデバイスは、スタック、MLAGペア、またはVCS-Ethernetファクトリを形成します。</font><font style="vertical-align: inherit;">L2VPN冗長性の必要がないため、このようなテクノロジーはL3VPNルーターのペアでは使用されません。集約スイッチを介して相互にL2接続できることで十分です。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">実装オプション</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらなるイベントのオプションを分析したところ、これらの作業を実行するにはいくつかの方法があることに気づきました。</font><font style="vertical-align: inherit;">ローカルネットワーク全体でのグローバルな中断から、ネットワークの一部で文字通り1〜2秒の小さな中断まで。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ネットワーク、スタンド！</font><font style="vertical-align: inherit;">スイッチ、交換してください！</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最も簡単な方法は、もちろん、すべてのPODとすべてのサービスのDCIでグローバルなブレークタイを発表し、</font><b><font style="vertical-align: inherit;">N</font></b><font style="vertical-align: inherit;">のスイッチ</font><b><font style="vertical-align: inherit;">で</font></b><font style="vertical-align: inherit;">スイッチ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">からのすべてのリンクを</font><font style="vertical-align: inherit;">切り替えること</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/oe/ru/gj/oerugjzsi4pdh1lqcnu5bxyzlra.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
予測できる保証のない中断に加えて（はい、リンクの数はわかっていますが、パッチコードの破損やコネクタの破損からポートまたはトランシーバーの故障など、問題が発生する回数はわかりません）、それでもまだできません。古いスイッチAに接続されているパッチコード、DAC、AOCの長さがそれらに到達するのに十分であるかどうかを事前に予測します。 / DAC / AristaスイッチのBrocadeスイッチからのAOC。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、これはすべて、顧客と技術サポートからの厳しいプレッシャーの状況下で行われます（「ナターシャ、立ち上がって！ナターシャ、すべてがうまくいきません！ナターシャ、私たちはすでに正直に、正直にテクニカルサポートを書きました！ナターシャ、彼らはすでにすべてを落としました！ナタシャ、そしていつ機能するか！？」）。</font><font style="vertical-align: inherit;">事前に発表された休憩と顧客への通知にもかかわらず、そのようなときに電話の流入が保証されます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">待って、1-2-3-4！</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
グローバルブレークを宣言するのではなく、PODおよびDCIサービスでの通信の一連の小さなブレークを発表する場合。</font><font style="vertical-align: inherit;">最初の休憩では、</font><b><font style="vertical-align: inherit;">POD 1</font></b><font style="vertical-align: inherit;">のみ</font><b><font style="vertical-align: inherit;">を</font></b></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スイッチに切り替えます</font><font style="vertical-align: inherit;">。2番目の</font><font style="vertical-align: inherit;">場合は、数日</font><font style="vertical-align: inherit;">後-POD </font><b><font style="vertical-align: inherit;">2</font></b><font style="vertical-align: inherit;">、次に数日後、</font><b><font style="vertical-align: inherit;">POD 3</font></b><font style="vertical-align: inherit;">、次に</font><b><font style="vertical-align: inherit;">POD 4 ... [N]</font></b><font style="vertical-align: inherit;">、次にVXLANスイッチ、そしてL3VPNルーターの順に切り替えます。</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/dg/1n/8o/dg1n8oei0wx04clgnk2a0emzu-o.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このような切り替え作業の編成により、1回限りの作業の複雑さを軽減し、何かが突然うまくいかなくなった場合の問題解決の時間を増やします。他のPODおよびDCIと切り替えた後のPOD 1接続は失われません。しかし、作業自体は長い間遅れており、データセンターでのこの作業の期間中、エンジニアは物理的に切り替えを行う必要があり、作業中（このような作業は通常、夜間、午前2時から5時まで行われる）、オンラインネットワークエンジニアの存在が非常に高い資格。しかし、コミュニケーションには短い休憩があります。原則として、30分間隔で最大2分の休憩（実際には、機器の予想される動作で20〜30秒）で作業を実行できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
上記の例では、クライアント</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">またはクライアント</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> DCIサービス用に機器を切り替えるとき、少なくとも3回、通信が途絶えた場合の作業について警告する必要があります。1回はサーバーの1つが配置されている1つのPODで作業を実行し、2回目は3回目です。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">集約された通信チャネルの切り替え</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
装置の予想される動作、および集約されたチャネルが通信の中断を最小限に抑えて切り替えられる方法について話しているのはなぜですか。</font><font style="vertical-align: inherit;">次の図を想像してください。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/s0/g5/4b/s0g54bkj-ujiumk0egmyp7ookv0.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一方のリンクはディストリビューションスイッチPOD- </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D2であり</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、それらはMLAGペア（スタック、VCSファクトリ、vPCペア）を形成し、もう一方の2つのリンク- </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リンク1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リンク2-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は古いMLAGペアに含まれています集約スイッチ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">サイドスイッチ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">では、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ポートチャネルA</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と呼ばれる集約インターフェイスが形成され</font><font style="vertical-align: inherit;">、アグリゲーションスイッチ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">側では、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ポートDチャネル</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と呼ばれる集約インターフェイスが形成されました</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
集約されたインターフェイスはLACPを使用して動作します。つまり、両側のスイッチが両方のリンクでLACPDUパケットを定期的に交換して、リンクが次のことを確認します。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">労働者;</font></font></li>
<li>       .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
パケット内のパケットを交換する場合</font><font style="vertical-align: inherit;">、これらのリンクが含まれているデバイスを示す</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">system-id</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">値が送信さ</font><font style="vertical-align: inherit;">れます。 MLAGペア（スタック、ファクトリーなど）の場合、集約インターフェースを形成するデバイスのsystem-idの値は同じです。スイッチ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リンク1の</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">値</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">システムid-Dを</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">送信し</font><font style="vertical-align: inherit;">、スイッチ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リンク2の</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">値</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">システムid-Dを</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">送信します</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
スイッチ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">および</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、同じPo Dインターフェイスで受信したLACPDUパケットを分析し、それらのシステムIDが一致することを確認します。リンクによって受信されたシステムID </font><b><font style="vertical-align: inherit;">が現在の動作値</font></b><font style="vertical-align: inherit;">と突然異なる</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">場合</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、このリンクは、状況が修正されるまで、集約インターフェースから削除されます。</font><font style="vertical-align: inherit;">次に</font><font style="vertical-align: inherit;">、システムID LACP-partner- </font><b><font style="vertical-align: inherit;">A</font></b><font style="vertical-align: inherit;">の現在の値を</font><font style="vertical-align: inherit;">サイド</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dに</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">切り替え、サイド</font><b><font style="vertical-align: inherit;">A</font></b><font style="vertical-align: inherit;"> -LACP-partner- </font><b><font style="vertical-align: inherit;">D</font></b><font style="vertical-align: inherit;">の現在のシステムID値を</font><font style="vertical-align: inherit;">切り替え</font><font style="vertical-align: inherit;">ます</font><font style="vertical-align: inherit;">。</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br>
<blockquote><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">集約インターフェースを切り替える必要がある場合は、次の2つの方法があります。</font></font></b></blockquote><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法1-シンプル</font></font></b>
                        <div class="spoiler_text"><b>     A</b>.      .<br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/4x/y3/1f/4xy31fons85dmc1xqmyoatx3cok.jpeg"></div></a><br>
       <b>N</b>,       LACP,   <b>Po D</b>   <b>N</b>      <b>system-id N</b>.<br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/9o/-x/d2/9o-xd2p6oyk3x_yxroz_tlh6hbc.jpeg"></div></a><br>
</div>
                    </div><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法2-中断を最小限に抑える</font></font></b>
                        <div class="spoiler_text"><b>   2  Link 2</b>.     <b></b>  <b>D</b>       ,      .<br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/hw/u-/zy/hwu-zy2rypxofaqv9llskenulbm.jpeg"></div></a><br>
<b> Link 2   N2</b>.   <b>N</b>     <b>Po DN</b>,   <b>N2</b>    LACPDU <b>system-id N</b>.       ,   <b>N2</b>    ,   <b>Link 2</b>,       <b>Up</b>,     LACPDU      .<br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/cw/cy/st/cwcysth25wi_quoldhjghlysgx8.jpeg"></div></a><br>
  ,   <b>D2</b>    <b>Po A</b>   <b>Link 2   system-id N,      system-id A</b>,    <b>D</b>  <b>Link 2</b>     <b>Po A</b>.  <b>N</b>    <b>Link 2</b>  ,          LACP-  <b>D2</b>.     <b>Link 2</b>  .<br>
<br>
<b>    Link 1   A1</b>,     <b></b>  <b>D</b>   .  ,    <b>D</b>     system-id   <b>Po A</b>.<br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/me/uw/8u/meuw8uq0g5lglbxkt6qwbdiodtg.jpeg"></div></a><br>
   <b>D</b>  <b>N</b>    system-id <b>A-N</b>   <b>Po A</b>  <b>Po DN</b>,        <b>Link 2</b>.     ,  ,  2 .<br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/rj/zs/ai/rjzsai50lw8dbbxbk0ntlicofoa.jpeg"></div></a><br>
<b>     Link 1   N1</b>,       <b>Po A</b>  <b>Po DN</b>.           system-id    ,    .<br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/vd/8_/3c/vd8_3cszxwsxtwdcrewohql3arg.jpeg"></div></a><br>
</div>
                    </div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">追加リンク</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ただし、切り替え時にエンジニアがいなくても切り替えが可能です。</font><font style="vertical-align: inherit;">これを行うには、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ディストリビューションスイッチ</font><font style="vertical-align: inherit;">と新しい</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アグリゲーションスイッチの</font><font style="vertical-align: inherit;">間に追加のリンクを事前に配置する必要があり</font><font style="vertical-align: inherit;">ます</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/du/sb/3h/dusb3hcwgnj_rt8kgkusiitltdk.jpeg"></div></a><br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N個の</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
集約</font><font style="vertical-align: inherit;">スイッチとすべてのPOD配信スイッチの</font><font style="vertical-align: inherit;">間に新しいリンクを敷設してい</font><font style="vertical-align: inherit;">ます。これには、追加のパッチコードの注文と配置が必要であり、追加のトランシーバー</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">をN</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dの</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">両方</font><b><font style="vertical-align: inherit;">に</font></b><font style="vertical-align: inherit;">インストールし</font><font style="vertical-align: inherit;">ます。これを行うことができるのは、</font><font style="vertical-align: inherit;">各PODの</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スイッチに</font><font style="vertical-align: inherit;">空きポート</font><font style="vertical-align: inherit;">があるためです</font><font style="vertical-align: inherit;">（または最初に解放します）。</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">その結果、各PODは2つのリンクによって古いスイッチAと新しいスイッチNに物理的に接続されます。</font></font></b><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/32/wj/m-/32wjm-s5ehe6o1vlkvtrhcpn_mq.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リンク</font><b><font style="vertical-align: inherit;">Link 1</font></b><font style="vertical-align: inherit;">と</font><b><font style="vertical-align: inherit;">Link 2を</font></b><font style="vertical-align: inherit;">持つ</font><font style="vertical-align: inherit;">
スイッチ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Po A</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font><font style="vertical-align: inherit;">、リンク</font><b><font style="vertical-align: inherit;">Link N1</font></b><font style="vertical-align: inherit;">と</font><b><font style="vertical-align: inherit;">Link N2を</font></b><font style="vertical-align: inherit;">持つ</font><b><font style="vertical-align: inherit;">Po N上に</font></b><font style="vertical-align: inherit;">、</font><font style="vertical-align: inherit;">2つの集約インターフェースが形成さ</font><font style="vertical-align: inherit;">れ</font><font style="vertical-align: inherit;">ます</font><font style="vertical-align: inherit;">。この段階で、インターフェイスとリンクの正しい接続、リンクの両端の光信号のレベル（スイッチからのDDM情報を介して）を確認します。負荷がかかった状態でのリンクの動作容量を確認したり、光信号のステータスとトランシーバーの温度を数日間監視したりすることもできます。</font><font style="vertical-align: inherit;">
トラフィックは引き続き</font><b><font style="vertical-align: inherit;">Po A</font></b><font style="vertical-align: inherit;">インターフェイス</font><font style="vertical-align: inherit;">を介して送信され</font><font style="vertical-align: inherit;">ますが、</font><b><font style="vertical-align: inherit;">Po N</font></b><font style="vertical-align: inherit;">インターフェイスには</font><font style="vertical-align: inherit;">トラフィックがありません</font><font style="vertical-align: inherit;">。インターフェイスの設定は、おおよそ次のとおりです。</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="plaintext hljs">Interface Port-channel A<font></font>
Switchport mode trunk<font></font>
Switchport allowed vlan C1, C2<font></font>
<font></font>
Interface Port-channel N<font></font>
Switchport mode trunk<font></font>
Switchport allowed vlan none</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
スイッチDは、原則として、セッション構成の変更をサポートしており、この機能を持つスイッチモデルが使用されます。したがって、Po AおよびPo Nインターフェースの設定を一度に変更できます。</font></font><br>
<br>
<pre><code class="plaintext hljs">Configure session<font></font>
Interface Port-channel A<font></font>
Switchport allowed vlan none<font></font>
Interface Port-channel N<font></font>
Switchport allowed vlan C1, C2<font></font>
Commit</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その後、構成の変更は十分迅速に行われ、中断は実際には5秒以内です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この方法により、すべての準備作業を事前に実行し、必要なすべてのチェックを実行し、作業をプロセスの参加者と調整し、「すべてがうまくいかなかった」場合にクリエイティブフライトなしで作業の生産のためのアクションを詳細に予測し、以前の構成に戻す計画を立てることができます。</font><font style="vertical-align: inherit;">この計画の作業は、物理的に切り替えを行うエンジニアのサイトにデータセンターが存在しないネットワークエンジニアによって実行されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この切り替え方法でさらに重要なことは、すべての新しいリンクが監視用にあらかじめ設定されていることです。</font><font style="vertical-align: inherit;">エラー、ユニットへのリンクの組み込み、リンクの読み込み-必要なすべての情報はすでに監視システムにあり、すでに地図に描かれています。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D-day</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ポッド</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちは、顧客にとって最も痛みが少なく、リンクが追加された「問題が発生した」スイッチパスが最も発生しにくいものを選択しました。</font><font style="vertical-align: inherit;">そのため、数日の間に、すべてのPODを新しい集約スイッチに切り替えました。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/lm/c0/oa/lmc0oafevg5twt9amzd2thudqgm.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ただし、DCIサービスを提供する機器を切り替える必要があります。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L2</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L2接続を提供する機器の場合、追加のリンクで同様の作業を実行できませんでした。</font><font style="vertical-align: inherit;">これには少なくとも2つの理由があります。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VXLANスイッチに必要な速度の空きポートがない。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VXLANスイッチでのセッション構成変更の機能の欠如。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
手順が正しいことを100％信頼できなかったため、実験室でのテストで以下のことが示されたため、システムIDの新しいペアが承認されている間だけ、リンクを「一度に1つ」切断して中断しませんでした。 「何かがうまくいかない」場合でも、通信が途絶えます。最悪の事態は、他のデータセンターとL2接続しているお客様だけでなく、一般に、このデータセンターのすべてのお客様です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L2チャネルからの切り替えに関する宣伝作業を事前に実施したため、VXLANスイッチの操作によって影響を受ける顧客の数は、すでに1年前の数分の1でした。</font><font style="vertical-align: inherit;">その結果、1つのデータセンターでローカルネットワークサービスの通常の運用を維持することを条件に、L2接続サービスでの通信を中断することを決定しました。</font><font style="vertical-align: inherit;">さらに、このサービスのSLAは、スケジュールされた作業の中断を可能にします。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L3</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DCIサービスを整理するときに、誰もがL3VPNの使用に切り替えることを推奨したのはなぜですか？理由の1つは、このサービスを提供するルーターの1つで作業できることです。通信を中断することなく、冗長性のレベルをN + 0に下げるだけです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
サービス提供のスキームをより詳しく検討します。このサービスでは、L2セグメントはクライアントサーバーからL3VPN Selectelルーターにのみ送信されます。ルーターでは、クライアントネットワークは終了します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
各クライアント・サーバは、例えば、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">および</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S3</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上の図では、独自のプライベートIPアドレスを持っている- </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S2サーバの10.0.0.2/24</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.0.0.3/24 S3サーバのために</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。アドレス</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.0.0.252/24</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">および</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.0.0.253/24</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Selectelによってルーター</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L3VPN-1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">および</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L3VPN-2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">にそれぞれ</font><font style="vertical-align: inherit;">割り当てられます</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">IPアドレス</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.0.0.254/24は、</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Selectelルーターの</font><b><font style="vertical-align: inherit;">VRRP VIPアドレス</font></b><font style="vertical-align: inherit;">です。</font></font><br>
<br>
<blockquote><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">あなたはできる</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">読ま</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> L3VPNサービスの詳細</font><font style="vertical-align: inherit;">私たちのブログ上を。</font></font></b></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべてを切り替える瞬間まで、すべては図のように見えました。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/lu/z9/_l/luz9_l1950pk5r3vr5hrn-tdnss.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2つのルーター</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L3VPN-1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L3VPN-2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が古いスイッチアグリゲーション</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aに</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接続されました</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">VRRP VIPアドレス10.0.0.254のマスターは</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L3VPN-1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ルーター</font><font style="vertical-align: inherit;">です。</font><font style="vertical-align: inherit;">彼はこのアドレスを</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L3VPN-2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ルーターよりも高い優先度に設定しています</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="plaintext hljs">unit 1006 {<font></font>
    description C2;<font></font>
    vlan-id 1006;<font></font>
    family inet {       <font></font>
        address 10.0.0.252/24 {<font></font>
            vrrp-group 1 {<font></font>
                priority 200;<font></font>
                virtual-address 10.100.0.254;<font></font>
                preempt {<font></font>
                    hold-time 120;<font></font>
                }<font></font>
                accept-data;<font></font>
            }<font></font>
        }<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
サーバーS2は10.0.0.254ゲートウェイを使用して、他の場所にあるサーバーと通信します。</font><font style="vertical-align: inherit;">したがって、L3VPN-2ルーターをネットワークから切断しても（当然、最初にMPLSドメインから切断すると）、クライアントサーバーの接続には影響しません。</font><font style="vertical-align: inherit;">この時点で、回路の冗長レベルは単純に減少します。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/gj/oi/sk/gjoiskqum4kmknfm8u36cf5v44w.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その後、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L3VPN-2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ルーター</font><font style="vertical-align: inherit;">を</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スイッチのペアに</font><font style="vertical-align: inherit;">安全に再接続でき</font><font style="vertical-align: inherit;">ます</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">リンクのレイアウト、トランシーバーの変更。</font><font style="vertical-align: inherit;">すべてが正常に機能していることが確認されるまで、クライアントサービスの作業が依存するルーターの論理インターフェイスがオフになります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
リンク、トランシーバー、信号レベル、インターフェイスのエラーレベルを確認した後、ルータは動作しますが、新しいスイッチのペアにすでに接続されています。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/jb/dh/cs/jbdhcsuakuma1fofufzc-pp0poy.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、L3VPN-1ルーターのVRRP優先度を下げ、VIPアドレス10.0.0.254がL3VPN-2ルーターに移動します。</font><font style="vertical-align: inherit;">これらの作業も、通信を中断することなく実行されます。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/ix/uq/lq/ixuqlq5wx5veluojqgpwfy8yewu.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
VIPアドレスをルーター10.0.0.254 </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L3VPN-2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に転送</font><font style="vertical-align: inherit;">すると、クライアントへの接続を中断することなく</font><font style="vertical-align: inherit;">ルーター</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L3VPN-1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を無効にし</font><font style="vertical-align: inherit;">て、クライアント</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">のNの</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新しい集約スイッチ</font><b><font style="vertical-align: inherit;">の</font></b><font style="vertical-align: inherit;">ペアを接続できます</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/lx/vo/jv/lxvojv_hiozuurqfsyonclwjez4.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
VRRP VIPをL3VPN-1ルーターに戻すかどうかは別の問題であり、戻す場合は中断することなく行われます。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">合計</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらのすべての手順を実行した後、お客様の中断を最小限に抑えながら、いずれかのデータセンターの集約スイッチを実際に交換しました。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/fw/d1/jx/fwd1jxarjvfl1agcko-4fhezx7s.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
残っているのは解体だけです。</font><font style="vertical-align: inherit;">古いスイッチの解体、スイッチAとD間の古いリンクの解体、これらのリンクからのトランシーバーの解体、監視の修正、ドキュメントと監視のネットワーク図の修正。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
スイッチ、トランシーバー、パッチコード、AOC、DACは、他のプロジェクトや他の同様の切り替えで切り替え後に使用できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
「ナターシャ、すべてを切り替えました！」</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja498354/index.html">「ウィッシュリスト」を「ハードウェア」、または半理想的なセミモバイルセミデスクトップに変換する方法</a></li>
<li><a href="../ja498358/index.html">フランス語を学ぶか、PSA診断スキャナーからユニバーサルアダプターを入手する方法</a></li>
<li><a href="../ja498360/index.html">統合サーバー負荷メトリックの評価</a></li>
<li><a href="../ja498362/index.html">キングストンはSSDの出荷においてリーダーシップを維持しています。</a></li>
<li><a href="../ja498366/index.html">Yandex開発者が毎日実装しているアルゴリズム</a></li>
<li><a href="../ja498370/index.html">SAP UI5と確認ウィンドウ：再びコンテキストについて</a></li>
<li><a href="../ja498372/index.html">ネットワークシミュレータチュートリアルns-3。第5章</a></li>
<li><a href="../ja498374/index.html">GPUコンピューティング-なぜ、いつ、どのように。さらにいくつかのテスト</a></li>
<li><a href="../ja498378/index.html">アジャイルによるスラムのイブニングスクールのお知らせ</a></li>
<li><a href="../ja498380/index.html">動作中のオーバートンのウィンドウ：パンデミックを使用して私たちの自由を制限する方法</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>