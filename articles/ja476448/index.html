<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👁️ 🧗🏻 ↕️ ジャーニーゲームのサンドシェーダーの探索 🖕🏾 🚙 🚱</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="過去10年間にリリースされた多くのインディーゲームの中で、私のお気に入りの1つは間違いなくJourneyです。その見事な美学と美しいサウンドトラックのおかげで、ジャーニーは開発のほぼすべての面で卓越性の例となっています。
 
 私はゲーム開発者であり、テクニカルアーティストなので、砂のレンダリング方...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>ジャーニーゲームのサンドシェーダーの探索</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/476448/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">過去10年間にリリースされた多くのインディーゲームの中で、私のお気に入りの1つは間違いなく</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Journey</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。その見事な美学と美しいサウンドトラックのおかげで、</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ジャーニー</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は開発のほぼすべての面で卓越性の例となっています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私はゲーム開発者であり、テクニカルアーティストなので、砂のレンダリング方法に最も興味をそそられました。それは美しいだけでなく、基本的なゲームプレイとゲームプレイ全体に直接関連しています。</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">旅</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は文字通り砂でできており、そのような驚くべき効果がなければ、ゲーム自体は単に存在することができませんでした。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/63f/be0/2a8/63fbe02a87ccac8101001a43d953776f.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この2記事の記事では、</font><font style="vertical-align: inherit;">シェーダーを使用してまったく同じ砂のレンダリングを再現する方法を説明することで</font><font style="vertical-align: inherit;">、</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Journey</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の遺産に敬意を表し</font><font style="vertical-align: inherit;">ます。ゲームで砂丘が必要かどうかに関係なく、この一連のチュートリアルでは、独自のゲームで特定の美学を再現する方法を学習できます。</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Journey</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">で</font><font style="vertical-align: inherit;">使用されている美しい砂のシェーダーを再現する場合は</font><font style="vertical-align: inherit;">、最初にそれがどのように構築されたかを理解する必要があります。非常に複雑に見えますが、実際には比較的単純な効果がいくつか含まれています。シェーダーを書くこのアプローチは、テクニカルアーティストとして成功するために必要です。私と一緒にこの</font><em><font style="vertical-align: inherit;">旅を</font></em><font style="vertical-align: inherit;">してほしい</font></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">では、シェーダーの作成だけでなく、美学とゲームプレイを組み合わせる方法についても学びます。</font></font><br>
<a name="habracut"></a><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ジャーニーの砂分析</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この記事は、</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ジャーニー</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サンドレンダリングを再現する他の多くの試みと同様</font><font style="vertical-align: inherit;">に、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="noopener noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ゲーム会社の</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リードエンジニアである</font><font style="vertical-align: inherit;">ジョンエドワーズ</font><font style="vertical-align: inherit;">からの</font><font style="vertical-align: inherit;">「</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="noopener noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サンドレンダリングinジャーニー</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">」</font><font style="vertical-align: inherit;">という</font><font style="vertical-align: inherit;">GDCのレポートに基づいてい</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">このレポートでは、John Edwardsが</font><font style="vertical-align: inherit;">、目的の外観を実現するため</font><font style="vertical-align: inherit;">に</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Journey</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の砂丘</font><font style="vertical-align: inherit;">に</font><font style="vertical-align: inherit;">追加されたすべてのレイヤーのエフェクトについて説明してい</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/wt2yYnBRD3U" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
レポートは非​​常に便利ですが、このチュートリアルのコンテキストでは、John Edwardsが行った制限と決定の多くは重要ではありません。</font><font style="vertical-align: inherit;">主に視覚的な参照により</font><font style="vertical-align: inherit;">、</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ジャーニー</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">シェーダーを連想させる砂シェーダーの再現を試み</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
完全に滑らかな砂丘のシンプルな3Dメッシュから始めましょう。砂のレンダリングの信頼性は、照明と木目という2つの側面に依存します。砂からの光を反射する興味深い方法は、変更された</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">照明モデル</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">によって提供され</font><font style="vertical-align: inherit;">ます。シェーダーコーディングのコンテキストでは、照明モデルはモデルのプロパティとシーンの照明条件に基づいてシャドウとハイライトを決定します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、これだけでは、リアリズムの幻想を生み出すには不十分です。</font><font style="vertical-align: inherit;">問題は、砂は平面でモデル化できないことです。</font><font style="vertical-align: inherit;">砂粒を考慮する必要があります。</font><font style="vertical-align: inherit;">その</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ため、表面</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の</font><strong><font style="vertical-align: inherit;">法線を</font></strong><font style="vertical-align: inherit;">直接操作する2つの個別の効果が</font><font style="vertical-align: inherit;">あり、砂丘の表面にある砂の小さな粒子をシミュレートするために使用できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
下の図は、このチュートリアルで学習するすべての効果を示しています。</font><font style="vertical-align: inherit;">技術的な観点から、照明が処理される前に通常の計算が実行されます。</font><font style="vertical-align: inherit;">研究を簡単にするために、効果は異なる順序で説明されます。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/373/0b9/8a1/3730b98a1670ef00cf68efb0af0cc08b.png"></div><br>
<h6><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">拡散色</font></font></h6><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最も単純な砂のシェーダー効果は、その</font><font style="vertical-align: inherit;">全体的な外観の</font><em><font style="vertical-align: inherit;">鈍い</font></em><font style="vertical-align: inherit;">コンポーネントを近似的に説明する</font><font style="vertical-align: inherit;">その</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">拡散カラー</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。</font><font style="vertical-align: inherit;">拡散色は</font><font style="vertical-align: inherit;">、オブジェクトの</font><em><font style="vertical-align: inherit;">実際の</font></em><font style="vertical-align: inherit;">色と照明条件に</font><font style="vertical-align: inherit;">基づいて計算され</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">白で描かれた球体は、どこでも完全に白くなるわけではありません。拡散色は、そこに入射する光に依存するためです。</font><font style="vertical-align: inherit;">拡散色は、表面からの光の反射を近似する数学モデルを使用して計算されます。</font><font style="vertical-align: inherit;">John EdwardsによるGDCの報告のおかげで、</font><strong><font style="vertical-align: inherit;">拡散コントラスト反射率</font></strong><font style="vertical-align: inherit;">と呼ばれる、使用された方程式が正確にわかり</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">これは、よく知られている</font><strong><font style="vertical-align: inherit;">ランバート反射</font></strong><font style="vertical-align: inherit;">モデルに基づいています</font><font style="vertical-align: inherit;">。</font></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"></font><strong><font style="vertical-align: inherit;"></font></strong><font style="vertical-align: inherit;"></font><strong><font style="vertical-align: inherit;"></font></strong><font style="vertical-align: inherit;"></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/509/4c1/65b/5094c165b5f2e1ba10696fec1641482c.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/90f/9b4/73f/90f9b473f7d1eefcb6ca32871300fed8.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方程式を適用する前後</font></font></i><br>
<br>
<h6><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サンドノーマル</font></font></h6><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
元の形状は完全に滑らかです。</font><font style="vertical-align: inherit;">これを補正するために、</font><strong><font style="vertical-align: inherit;">バンプマッピング</font></strong><font style="vertical-align: inherit;">と呼ばれる手法を使用して</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">モデルの</font><strong><font style="vertical-align: inherit;">表面法線を</font></strong><font style="vertical-align: inherit;">変更し</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">テクスチャを使用して、より複雑なジオメトリをシミュレートできます。</font></font><strong><font style="vertical-align: inherit;"></font></strong><font style="vertical-align: inherit;"></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/90f/9b4/73f/90f9b473f7d1eefcb6ca32871300fed8.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/07a/739/06d/07a73906d58ed9d4c251340b4e92d7f5.png"></div><br>
<h6><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">エッジ照明</font></font></h6><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
各</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ジャーニー</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">レベル</font><font style="vertical-align: inherit;">は、限られたカラーパレットを使用します。</font><font style="vertical-align: inherit;">このため、砂丘がどこで終わりどこで始まるかを理解するのは非常に困難です。</font><font style="vertical-align: inherit;">読みやすさを向上させるために、砂丘の端に沿ってのみ表示されるものを小さな強調表示のテクニックが使用されます。</font><font style="vertical-align: inherit;">これは</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リムライティング</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と呼ばれ</font><font style="vertical-align: inherit;">、実装には多くの方法があります。</font><font style="vertical-align: inherit;">このチュートリアルでは、</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">フレネル</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">反射に</font><font style="vertical-align: inherit;">基づいて</font><strong><font style="vertical-align: inherit;">、</font></strong><font style="vertical-align: inherit;">いわゆる</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">入射角</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">での研磨された表面の反射をモデル化</font><font style="vertical-align: inherit;">する方法を選択しました</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/07a/739/06d/07a73906d58ed9d4c251340b4e92d7f5.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/864/285/818/8642858189235ff1d796378992523ceb.png"></div><br>
<h6><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">海の鏡面反射</font></font></h6><br><font style="vertical-align: inherit;"></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ジャーニーの</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ゲームプレイの最も楽しい側面の1つは、</font><font style="vertical-align: inherit;">砂丘を「サーフィン」する機能です。</font><font style="vertical-align: inherit;">これがおそらく、そのゲーム会社が砂に固体ではなく液体のように感じさせたいと思った理由です。</font><font style="vertical-align: inherit;">このため、ウォーターシェーダーでよく見られる強い反射が使用されました。</font><font style="vertical-align: inherit;">ジョンエドワーズはこのエフェクトを</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オーシャンスペキュラー</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と呼び</font><font style="vertical-align: inherit;">、チュートリアルでは</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ブリンフォン反射</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用してそれを実装</font><strong><font style="vertical-align: inherit;">し</font></strong><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/864/285/818/8642858189235ff1d796378992523ceb.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/716/d17/d2f/716d17d2f4d0d0796e51bee059ce39c2.png"></div><br>
<h6><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">グレア反射</font></font></h6><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
サンドシェーダーに海洋スペキュラーコンポーネントを追加すると、より滑らかな外観になります。</font><font style="vertical-align: inherit;">しかし、それでも砂の最も重要な視覚的側面の1つであるランダムに発生する反射を伝えることはできません。</font><font style="vertical-align: inherit;">実際の砂丘では、砂の各粒子がその方向に光を反射し、これらの反射光線の1つが目に入ることが多いため、この効果が発生します。</font><font style="vertical-align: inherit;">このような</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">きらめき反射</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（反射の反射）は、直射日光が当たらない場所でも発生します。</font><font style="vertical-align: inherit;">海の鏡面反射を補完し、信頼感を高めます。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/716/d17/d2f/716d17d2f4d0d0796e51bee059ce39c2.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/539/f3c/33c/539f3c33c6c12f5206540ff62ecf4102.png"></div><br>
<h6><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">砂の波</font></font></h6><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
法線を変更することで、砂丘の表面を覆う小さな砂粒の効果をシミュレートすることができました。</font><font style="vertical-align: inherit;">現実世界の砂丘には、風による波がよく出てきます。</font><font style="vertical-align: inherit;">それらの形状は、風の方向に対する各砂丘の傾斜と位置によって異なります。</font><font style="vertical-align: inherit;">可能性として、このようなパターンはバンプテクスチャを介して作成できますが、この場合、砂丘の形状をリアルタイムで変更することはできません。</font><font style="vertical-align: inherit;">ジョンエドワーズによって提案されたソリューションは、</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">トリプラナーシェーディング</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と呼ばれる手法に似て</font><font style="vertical-align: inherit;">います。4つの異なるテクスチャを使用し、各砂丘の位置と傾斜に応じて混合します。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/539/f3c/33c/539f3c33c6c12f5206540ff62ecf4102.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/828/9b4/997/8289b49971bbe0046845f71284790124.png"></div><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">砂シェーダーの解剖学の旅</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unityには、始めるための多くのシェーダーテンプレートがあります。</font><font style="vertical-align: inherit;">ライティングを受けて影を落とすことができるマテリアルに関心があるので、</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サーフェイスシェーダー</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（サーフェイスシェーダー）</font><font style="vertical-align: inherit;">から始める必要があり</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべての</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サーフェスシェーダー</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は2段階で実行されます。</font><font style="vertical-align: inherit;">最初に、</font><font style="vertical-align: inherit;">レンダリングする必要のある表面のプロパティ、たとえばその</font><em><font style="vertical-align: inherit;">アルベド</font></em><font style="vertical-align: inherit;">、</font><em><font style="vertical-align: inherit;">粗さ</font></em><font style="vertical-align: inherit;">、</font><em><font style="vertical-align: inherit;">金属特性</font></em><font style="vertical-align: inherit;">、</font><em><font style="vertical-align: inherit;">透明度</font></em><font style="vertical-align: inherit;">、</font><em><font style="vertical-align: inherit;">法線方向</font></em><font style="vertical-align: inherit;">を収集</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">する表面関数</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が呼び出さ</font><font style="vertical-align: inherit;">れます</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">次に、これらすべてのプロパティが</font><strong><font style="vertical-align: inherit;">照明関数に</font></strong><font style="vertical-align: inherit;">渡され</font><strong><font style="vertical-align: inherit;">ます。</font></strong></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"></font><strong><font style="vertical-align: inherit;"></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、外部光源の影響を考慮し、シェーディングとライトを計算します。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表面機能</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以下のコードで呼び出される、表面関数のコアになるものから始めましょう</font></font><code>surf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。我々が設定する必要がある唯一のプロパティは、</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">砂の色</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">や</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表面の法線</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。 3Dモデルの法線は、表面の位置を示すベクトルです。法線ベクトルは、照明機能によって使用され、光がどのように反射されるかを計算します。これらは通常、メッシュのインポート中に計算されます。ただし、これらを変更して、より複雑なジオメトリをシミュレートできます。ここで、</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">砂の法線</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font><font style="vertical-align: inherit;">その粗さをシミュレートするために砂の法線を歪める</font><strong><font style="vertical-align: inherit;">砂の</font></strong></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">波の</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">効果</font><font style="vertical-align: inherit;">が役立ちます。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">surf</span> <span class="hljs-params">(Input IN, inout SurfaceOutput o)</span>
</span>{<font></font>
    o.Albedo = _SandColor;<font></font>
    o.Alpha = <span class="hljs-number">1</span>;<font></font>
<font></font>
    float3 N = float3(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>);<font></font>
    N = RipplesNormal(N);<font></font>
    N = SandNormal   (N);<font></font>
<font></font>
    o.Normal = N;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
法線を書き込むとき</font></font><code>o.Normal</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接線空間</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">で表現する必要があります</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">これは、3Dモデルの表面に対して相対的にベクトルが選択されることを意味します。</font><font style="vertical-align: inherit;">つまり</font></font><code>float3(0, 0, 1)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、通常の3Dモデルは実際には何も変更を行わないということです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
両方の関数、</font></font><code>RipplesNormal</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">および</font></font><code>SandNormal</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">法線ベクトル</font><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">取得して変更します。</font><font style="vertical-align: inherit;">後で、これをどのように行うことができるかを見ていきます。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">照明機能</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
他のすべてのエフェクトが実装されるのはライティング機能です。</font><font style="vertical-align: inherit;">以下のコードは、個々のコンポーネントが別々の関数（拡散色、縁の照明、海洋の鏡面反射、およびきらめきの反射）で計算される方法を示しています。</font><font style="vertical-align: inherit;">その後、それらはすべて結合されます。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">pragma</span> surface surf Journey fullforwardshadows</span><font></font>
<font></font>
<span class="hljs-function">float4 <span class="hljs-title">LightingJourney</span> <span class="hljs-params">(SurfaceOutput s, fixed3 viewDir, UnityGI gi)</span>
</span>{<font></font>
    float3 diffuseColor = DiffuseColor    ();<font></font>
    float3 rimColor     = RimLighting     ();<font></font>
    float3 oceanColor   = OceanSpecular   ();<font></font>
    float3 glitterColor = GlitterSpecular ();<font></font>
<font></font>
    float3 specularColor = saturate(max(rimColor, oceanColor));<font></font>
    float3 color = diffuseColor + specularColor + glitterColor;<font></font>
	<font></font>
    <span class="hljs-keyword">return</span> float4(color * s.Albedo, <span class="hljs-number">1</span>);<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コンポーネントを組み合わせる方法は非常に恣意的であり、芸術的な可能性を研究するためにそれを変更することができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
通常、鏡面反射は拡散色の上に重なります。</font><font style="vertical-align: inherit;">ここには1つではなく3つの鏡面反射（</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リムライト</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">海の鏡面反射</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">キラキラの鏡面反射</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）があるため、砂</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ちらつき</font><em><font style="vertical-align: inherit;">すぎ</font></em><font style="vertical-align: inherit;">ないように注意する必要があります</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">リムライトとオーシャンスペキュラーは同じ効果の一部であるため、最大値のみを選択できます。</font><font style="vertical-align: inherit;">このコンポーネントは砂のちらつきを作成するため、キラキラ鏡面反射光は個別に追加されます。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パート2.拡散色</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
投稿の第2部では、ゲームで使用される照明モデルとそれに焦点を当てます。 Unityでそれを再作成する方法。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
前のパートでは、Journey砂シェーダーのバージョンに徐々に変化するものの基礎を築きました。前述のように</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、ライティング機能は</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サーフェスシェーダー</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">でライティングの効果を計算するために</font><font style="vertical-align: inherit;">使用され</font><font style="vertical-align: inherit;">、シャドウとハイライトがサーフェスに表示されます。ジャーニーには、このカテゴリに分類されるいくつかの効果があることがわかりました。このシェーダーのコアにある最も基本的な（そして最も単純な）効果である、その</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">拡散照明</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（拡散/拡散照明）</font><font style="vertical-align: inherit;">から始め</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/78f/166/71c/78f16671c754f05e619ce034fad81926.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
今のところ、</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">砂の照明</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に焦点を当てて、他のすべてのエフェクトとコンポーネントを省略しています</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
投稿の前の部分で呼び出された照明関数</font></font><code>LightingJourney</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、と呼ばれる関数の砂の拡散色の計算を委任するだけ</font></font><code>DiffuseColor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function">float4 <span class="hljs-title">LightingJourney</span> <span class="hljs-params">(SurfaceOutput s, fixed3 viewDir, UnityGI gi)</span>
</span>{
    <span class="hljs-comment">// Lighting properties</span><font></font>
    float3 L = gi.light.dir;<font></font>
    float3 N = s.Normal;<font></font>
<font></font>
    <span class="hljs-comment">// Lighting calculation</span><font></font>
    float3 diffuseColor	= DiffuseColor(N, L);<font></font>
<font></font>
    <span class="hljs-comment">// Final color</span>
    <span class="hljs-keyword">return</span> float4(diffuseColor, <span class="hljs-number">1</span>);<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
各エフェクトは自己完結型で、独自の関数に格納されるため、コードはよりモジュール化され、クリーンになります。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ランバート反射</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
「旅のように」拡散照明を作成する前に、「基本的な」拡散照明機能がどのように見えるかを確認すると便利です。マットマテリアルの最も単純なシェーディングテクニックは、</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ランベルト反射</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と呼ばれ</font><font style="vertical-align: inherit;">ます。このモデルは、ほとんどの非光沢で非金属の表面の外観を近似します。</font><font style="vertical-align: inherit;">1760年にその概念を提案し</font><font style="vertical-align: inherit;">たスイスの百科事典科学者</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ヨハンハインリッヒランバート</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に</font><font style="vertical-align: inherit;">ちなんで名付けられました</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ランバートの反射の概念は単純なアイデアに基づい</font><em><font style="vertical-align: inherit;">ています。表面</font></em><font style="vertical-align: inherit;">の</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">明るさは、それに入射する光の量に依存します。</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">幾何学的に、これは下の図に示すことができ、球体はリモート光源によって照らされます。</font><font style="vertical-align: inherit;">球の赤と緑の領域は同じ量の照明を受けますが、それらの表面積は大幅に異なります。</font><font style="vertical-align: inherit;">赤い領域の光がより広い範囲に分布している場合、これは、赤い正方形の各ユニットが緑よりも少ない光を受け取ることを意味します。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2cf/d48/495/2cfd484953877a47fe5ba564b399ea35.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
理論的には、ランバート反射は</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表面</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">入射光の</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">間の相対角度に依存し</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">数学的な観点から、これは</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">法線から表面への</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">関数、</font><font style="vertical-align: inherit;">および</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">照明</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の</font><strong><font style="vertical-align: inherit;">方向である</font></strong><font style="vertical-align: inherit;">と</font><font style="vertical-align: inherit;">言い</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">これらの量は、2つの単位長ベクトル（</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">単位ベクトル</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と呼ばれます</font><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">を使用して表されます。</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>N</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.064ex" height="2.009ex" viewBox="0 -755.5 888.5 865.1" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMATHI-4E" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N</font></font></mi></math></span></span><script type="math/tex" id="MathJax-Element-1">N</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> そして </font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>L</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.583ex" height="2.009ex" viewBox="0 -755.5 681.5 865.1" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMATHI-4C" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L</font></font></mi></math></span></span><script type="math/tex" id="MathJax-Element-2">L</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">単一ベクトルは、</font><font style="vertical-align: inherit;">シェーダーコーディングのコンテキストで</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方向</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を指定する標準的な方法</font><font style="vertical-align: inherit;">です。</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NとLの値</font></font></b><div class="spoiler_text">,  <strong></strong>   <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>N</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.064ex" height="2.152ex" viewBox="0 -801.6 888.5 926.6" role="img" focusable="false" style="vertical-align: -0.29ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMATHI-4E" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N</font></font></mi></math></span></span><script type="math/tex" id="MathJax-Element-3">N</script> —   ,  <em></em>  .<br>
<br>
   ,  <strong> </strong> <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>L</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.583ex" height="2.152ex" viewBox="0 -801.6 681.5 926.6" role="img" focusable="false" style="vertical-align: -0.29ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMATHI-4C" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L</font></font></mi></math></span></span><script type="math/tex" id="MathJax-Element-4">L</script>  <em></em>      ,    .    :   —   ,  <em> </em> ,    .<br>
<br>
    ,       .       .</div></div><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unityでのランバート反射</font></font></b><div class="spoiler_text">   Unity 5 <strong>Standard Shader</strong>          .<br>
<br>
  -      :  <em>Legacy shader</em>   <em>Diffuse</em>.<br>
<br>
      ,           <code>Lambert</code>:<br>
<br>
<pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">pragma</span> surface surf Lambert fullforwardshadows</span></code></pre><br>
      <code>LightingLambert</code>,    <code>CGIncludes\Lighting.cginc</code>.</div></div><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ランバート反射と気候</font></font></b><div class="spoiler_text">   —   ,       ,   .         . ,     ,     ,   .</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
よく見てみると、法線が照明の方向に平行であるときに、表面が最大量の照明を受け取ることがわかります。</font><font style="vertical-align: inherit;">逆もまた同様です。2つの単位ベクトルが互いに垂直である場合、光はありません。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0e1/d06/6c6/0e1d066c6ff998abda8ca5c7607e4c4e.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
明らかに、 </font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>N</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.064ex" height="2.009ex" viewBox="0 -755.5 888.5 865.1" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMATHI-4E" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N</font></font></mi></math></span></span><script type="math/tex" id="MathJax-Element-5">N</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> そして </font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-6-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>L</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.583ex" height="2.009ex" viewBox="0 -755.5 681.5 865.1" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMATHI-4C" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L</font></font></mi></math></span></span><script type="math/tex" id="MathJax-Element-6">L</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ランバートによると、反射には重要です。</font><font style="vertical-align: inherit;">さらに、明るさは最大で、</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-7-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>100</mn><mi mathvariant=&quot;normal&quot;>&amp;#x0025;</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.423ex" height="2.259ex" viewBox="0 -809.3 2335 972.7" role="img" focusable="false" style="vertical-align: -0.38ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-30" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-30" x="1001" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-25" x="1501" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">100</font></font></mn><mi mathvariant="normal"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">％</font></font></mi></math></span></span><script type="math/tex" id="MathJax-Element-7">100\%</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">角度が </font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-8-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>0</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.162ex" height="2.009ex" viewBox="0 -755.5 500.5 865.1" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-30" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></mn></math></span></span><script type="math/tex" id="MathJax-Element-8">0</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> と最小限（</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-9-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>0</mn><mi mathvariant=&quot;normal&quot;>&amp;#x0025;</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.098ex" height="2.259ex" viewBox="0 -809.3 1334 972.7" role="img" focusable="false" style="vertical-align: -0.38ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-30" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-25" x="500" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></mn><mi mathvariant="normal"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">％</font></font></mi></math></span></span><script type="math/tex" id="MathJax-Element-9">0\%</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）角度が </font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-10-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msup><mn>90</mn><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x2218;</mo></mrow></msup></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.379ex" height="2.134ex" viewBox="0 -809.3 1454.9 918.9" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-39"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-30" x="500" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-2218" x="1415" y="557"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">90</font></font></mn><mrow class="MJX-TeXAtom-ORD"><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">∘</font></font></mo></mrow></msup></math></span></span><script type="math/tex" id="MathJax-Element-10">90^{\circ}</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ベクトル代数</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に</font><font style="vertical-align: inherit;">精通している場合は</font><font style="vertical-align: inherit;">、ランバートの反射を表す量が</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-11-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>I</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.172ex" height="2.009ex" viewBox="0 -755.5 504.5 865.1" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMATHI-49" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">私</font></font></mi></math></span></span><script type="math/tex" id="MathJax-Element-11">I</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">等しい </font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-12-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>N</mi><mo>&amp;#x22C5;</mo><mi>L</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.326ex" height="2.009ex" viewBox="0 -755.5 2292.9 865.1" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMATHI-4E" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-22C5" x="1110" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMATHI-4C" x="1611" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N</font></font></mi><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">⋅</font></font></mo><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L</font></font></mi></math></span></span><script type="math/tex" id="MathJax-Element-12">N \cdot L</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">演算子はどこですか </font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-13-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo>&amp;#x22C5;</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="0.647ex" height="1.009ex" viewBox="0 -378.7 278.5 434.6" role="img" focusable="false" style="vertical-align: 0.439ex; margin-bottom: -0.569ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-22C5" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">⋅</font></font></mo></math></span></span><script type="math/tex" id="MathJax-Element-13">\cdot</script><font style="vertical-align: inherit;"></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スカラープロダクト</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と呼ばれ</font><strong><font style="vertical-align: inherit;">ます</font></strong><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
（1）</font></font><p><math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-14-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>I</mi><mo>=</mo><mi>N</mi><mo>&amp;#x22C5;</mo><mi>L</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="9.596ex" height="2.009ex" viewBox="0 -755.5 4131.5 865.1" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMATHI-49" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-3D" x="782" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMATHI-4E" x="1838" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-22C5" x="2949" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMATHI-4C" x="3450" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">私</font></font></mi><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">=</font></font></mo><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N</font></font></mi><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">⋅</font></font></mo><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L</font></font></mi></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-14">\begin{equation*}  I = N \cdot L \end{equation*}</script></math></p><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
スカラー積は、2つのベクトルの互いに対する「一致」の尺度であり、次の間隔で変化します。 </font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-15-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo>+</mo><mn>1</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.971ex" height="2.134ex" viewBox="0 -755.5 1279 918.9" role="img" focusable="false" style="vertical-align: -0.38ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-2B" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-31" x="778" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></mo><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></mn></math></span></span><script type="math/tex" id="MathJax-Element-15">+1</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （2つの同一ベクトルの場合） </font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-16-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo>&amp;#x2212;</mo><mn>1</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.971ex" height="2.134ex" viewBox="0 -755.5 1279 918.9" role="img" focusable="false" style="vertical-align: -0.38ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-2212" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-31" x="778" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-</font></font></mo><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></mn></math></span></span><script type="math/tex" id="MathJax-Element-16">-1</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（2つの反対のベクトルの場合）。</font><font style="vertical-align: inherit;">スカラー製品はシェーディングの基礎です。これは、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">物理ベースのレンダリングと照明モデルの</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">チュートリアルで詳しく調べました</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">実装</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして </font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-17-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>N</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.064ex" height="2.009ex" viewBox="0 -755.5 888.5 865.1" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMATHI-4E" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N</font></font></mi></math></span></span><script type="math/tex" id="MathJax-Element-17">N</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">そして </font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-18-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>L</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.583ex" height="2.009ex" viewBox="0 -755.5 681.5 865.1" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMATHI-4C" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L</font></font></mi></math></span></span><script type="math/tex" id="MathJax-Element-18">L</script><font style="vertical-align: inherit;"></font><code>s.Normal</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">およびを</font><font style="vertical-align: inherit;">介して、表面シェーダー照明機能に簡単にアクセスできます</font></font><code>gi.light.dirin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">簡単にするために、我々はにシェーダコードでそれらの名前を変更します</font></font><code>N</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><code>L</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function">float3 <span class="hljs-title">DiffuseColor</span><span class="hljs-params">(float3 N, float3 L)</span>
</span>{
    <span class="hljs-keyword">float</span> NdotL = saturate( dot(N, L) );
    <span class="hljs-keyword">return</span> NdotL;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
関数</font></font><code>saturate</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、値を以下の間隔に制限します</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-19-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>0</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.162ex" height="2.009ex" viewBox="0 -755.5 500.5 865.1" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-30" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></mn></math></span></span><script type="math/tex" id="MathJax-Element-19">0</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 前 </font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-20-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>1</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.162ex" height="2.009ex" viewBox="0 -755.5 500.5 865.1" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-31" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></mn></math></span></span><script type="math/tex" id="MathJax-Element-20">1</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">ただし、スカラー積は、</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-21-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo>&amp;#x2212;</mo><mn>1</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.971ex" height="2.134ex" viewBox="0 -755.5 1279 918.9" role="img" focusable="false" style="vertical-align: -0.38ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-2212" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-31" x="778" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-</font></font></mo><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></mn></math></span></span><script type="math/tex" id="MathJax-Element-21">-1</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 前 </font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-22-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo>+</mo><mn>1</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.971ex" height="2.134ex" viewBox="0 -755.5 1279 918.9" role="img" focusable="false" style="vertical-align: -0.38ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-2B" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-31" x="778" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></mo><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></mn></math></span></span><script type="math/tex" id="MathJax-Element-22">+1</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、その負の値でのみ作業する必要があります。</font><font style="vertical-align: inherit;">そのため、ランバートリフレクションは次のように実装されることがよくあります。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">float</span> NdotL = max(<span class="hljs-number">0</span>, dot(N, L) );</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">周辺光のコントラスト反射</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ランバートの反射はほとんどの素材でよく見えませんが、物理的に正確でも写実的でもありません。</font><font style="vertical-align: inherit;">以前のゲームでは、ランバートシェーダーが広く使用されていました。</font><font style="vertical-align: inherit;">この手法を使用する</font><font style="vertical-align: inherit;">ゲームは、古いゲームの美学をうっかり再現してしまう可能性があるため、古く</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">見える</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ことがあります。</font><font style="vertical-align: inherit;">これに努力しない場合は、ランバート反射を避け、より近代的な技術を使用する必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そのようなモデルの1つに</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="noopener noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、反射のOren-Nayyarモデルがあります</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。これは</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="noopener noreferrer"><font style="vertical-align: inherit;">、ランバートの反射モデルの一般化の</font></a><font style="vertical-align: inherit;">記事で最初に説明されていました。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="noopener noreferrer"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">マイケル・オーレンとスリ・C・ナイヤルによって1994年に出版されました。</font><font style="vertical-align: inherit;">Oren-Nayyarモデルは、Lambertによる反射の一般化であり、特に粗い表面用に設計されています。</font><font style="vertical-align: inherit;">当初、Journey開発者は、サンドシェーダーのベースとしてOren-Nayyarリフレクションを使用したいと考えていました。</font><font style="vertical-align: inherit;">ただし、このアイデアは計算コストが高いために放棄されました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
テクニカルアーティストのジョンエドワーズ氏は2013年のレポートで、ジャーニーサンド用に作成された反射モデルは一連の試行錯誤に基づいたものであると説明しています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
彼によると、結果のシェーディングモデルは次の方程式に対応します：</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
（2）</font></font><p><math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-23-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>I</mi><mo>=</mo><mn>4</mn><mo>&amp;#x2217;</mo><mrow><mo>(</mo><mrow><mrow><mo>(</mo><mrow><mi>N</mi><mo>&amp;#x2299;</mo><mrow><mo>[</mo><mrow><mn>1</mn><mo>,</mo><mn>0.3</mn><mo>,</mo><mn>1</mn></mrow><mo>]</mo></mrow></mrow><mo>)</mo></mrow><mo>&amp;#x22C5;</mo><mi>L</mi></mrow><mo>)</mo></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="28.07ex" height="2.634ex" viewBox="0 -809.3 12085.7 1134.2" role="img" focusable="false" style="vertical-align: -0.755ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMATHI-49" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-3D" x="782" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-34" x="1838" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-2217" x="2561" y="0"></use><g transform="translate(3284,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-28" x="0" y="0"></use><g transform="translate(389,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-28" x="0" y="0"></use><g transform="translate(389,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMATHI-4E" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-2299" x="1110" y="0"></use><g transform="translate(2111,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-5B" x="0" y="0"></use><g transform="translate(278,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-31" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-2C" x="500" y="0"></use><g transform="translate(945,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-30"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-2E" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-33" x="779" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-2C" x="2225" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-31" x="2670" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-5D" x="3449" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-29" x="6228" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-22C5" x="6840" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMATHI-4C" x="7341" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-29" x="8412" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">私</font></font></mi><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">=</font></font></mo><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4</font></font></mn><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">∗</font></font></mo><mrow><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（</font></font></mo><mrow><mrow><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（</font></font></mo><mrow><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N</font></font></mi><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">⊙</font></font></mo><mrow><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[</font></font></mo><mrow><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></mn><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font></mo><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0.3</font></font></mn><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font></mo><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></mn></mrow><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">]</font></font></mo></mrow></mrow><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font></mo></mrow><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">⋅</font></font></mo><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L</font></font></mi></mrow><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font></mo></mrow></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-23">\begin{equation*}  I = 4 * \left( \left(N\odot \left[1, 0.3, 1\right]\right) \cdot L\right) \end{equation*}</script></math></p><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
どこ </font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-24-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo>&amp;#x2299;</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.808ex" height="1.884ex" viewBox="0 -647.8 778.5 811.3" role="img" focusable="false" style="vertical-align: -0.38ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-2299" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">⊙</font></font></mo></math></span></span><script type="math/tex" id="MathJax-Element-24">\odot</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要素-2</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">つのベクトルの</font><strong><font style="vertical-align: inherit;">賢明な積</font></strong><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function">float3 <span class="hljs-title">DiffuseColor</span><span class="hljs-params">(float3 N, float3 L)</span>
</span>{<font></font>
    N.y *= <span class="hljs-number">0.3</span>;
    <span class="hljs-keyword">float</span> NdotL = saturate(<span class="hljs-number">4</span> * dot(N, L));
    <span class="hljs-keyword">return</span> NdotL;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
リフレクションモデル（2）ジョンエドワーズは</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">拡散コントラストを</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">呼び出す</font><font style="vertical-align: inherit;">ため、チュートリアル全体でこの名前を使用します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以下のアニメーションは、ランバートシェーディング（左）とジャーニー（右）からの拡散コントラストの違いを示しています。</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/q-hQiDA71Yg" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4と0.3の意味は何ですか？</font></font></b><div class="spoiler_text">  diffuse contrast      ,      ,   .<br>
<br>
    -    .      ,      <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-25-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>4</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.162ex" height="2.152ex" viewBox="0 -801.6 500.5 926.6" role="img" focusable="false" style="vertical-align: -0.29ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-34" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4</font></font></mn></math></span></span><script type="math/tex" id="MathJax-Element-25">4</script>.  ,   ,      <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-26-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>25</mn><mi mathvariant=&quot;normal&quot;>&amp;#x0025;</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.261ex" height="2.295ex" viewBox="0 -863.1 1834.5 988.1" role="img" focusable="false" style="vertical-align: -0.29ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-32"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-35" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-25" x="1001" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25</font></font></mn><mi mathvariant="normal"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">％</font></font></mi></math></span></span><script type="math/tex" id="MathJax-Element-26">25\%</script> ,   ,    <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-27-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>100</mn><mi mathvariant=&quot;normal&quot;>&amp;#x0025;</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.423ex" height="2.295ex" viewBox="0 -863.1 2335 988.1" role="img" focusable="false" style="vertical-align: -0.29ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-30" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-30" x="1001" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-25" x="1501" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">100</font></font></mn><mi mathvariant="normal"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">％</font></font></mi></math></span></span><script type="math/tex" id="MathJax-Element-27">100\%</script> .     <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-28-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>4</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.162ex" height="2.152ex" viewBox="0 -801.6 500.5 926.6" role="img" focusable="false" style="vertical-align: -0.29ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-34" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4</font></font></mn></math></span></span><script type="math/tex" id="MathJax-Element-28">4</script>       ,        — .     .<br>
<br>
   <code>y</code>    <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-29-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>0.3</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.972ex" height="2.009ex" viewBox="0 -740.1 1279.5 865.1" role="img" focusable="false" style="vertical-align: -0.29ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-30"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-2E" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-33" x="779" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0.3</font></font></mn></math></span></span><script type="math/tex" id="MathJax-Element-29">0.3</script>   .       ,    .    <code>y</code>   <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-30-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>30</mn><mi mathvariant=&quot;normal&quot;>&amp;#x0025;</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.261ex" height="2.295ex" viewBox="0 -863.1 1834.5 988.1" role="img" focusable="false" style="vertical-align: -0.29ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-33"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-30" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-25" x="1001" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">30</font></font></mn><mi mathvariant="normal"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">％</font></font></mi></math></span></span><script type="math/tex" id="MathJax-Element-30">30\%</script>   ,  diffuse contrast     .<br>
<br>
:            ,      <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-31-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>1</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.162ex" height="2.009ex" viewBox="0 -740.1 500.5 865.1" role="img" focusable="false" style="vertical-align: -0.29ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-31" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></mn></math></span></span><script type="math/tex" id="MathJax-Element-31">1</script>.      <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-32-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>N</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.064ex" height="2.152ex" viewBox="0 -801.6 888.5 926.6" role="img" focusable="false" style="vertical-align: -0.29ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMATHI-4E" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N</font></font></mi></math></span></span><script type="math/tex" id="MathJax-Element-32">N</script>,      .</div></div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">灰色の色合いから色へ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
上記のすべてのアニメーションは灰色の陰影を持っています。なぜなら、それらは反射モデルの値を示し、間隔が変化しているからです </font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-33-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>0</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.162ex" height="2.009ex" viewBox="0 -755.5 500.5 865.1" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-30" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></mn></math></span></span><script type="math/tex" id="MathJax-Element-33">0</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 前 </font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-34-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>1</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.162ex" height="2.009ex" viewBox="0 -755.5 500.5 865.1" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-31" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></mn></math></span></span><script type="math/tex" id="MathJax-Element-34">1</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「</font></font><code>NdotL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2つの色の間の補間係数</font><font style="vertical-align: inherit;">を使用して</font><font style="vertical-align: inherit;">、</font><font style="vertical-align: inherit;">色を簡単に追加できます</font><font style="vertical-align: inherit;">。1つは完全に日陰で、もう1つは完全に明るい砂です。</font></font><br>
<br>
<pre><code class="cpp hljs">float3 _TerrainColor;<font></font>
float3 _ShadowColor;<font></font>
<font></font>
<span class="hljs-function">float3 <span class="hljs-title">DiffuseColor</span><span class="hljs-params">(float3 N, float3 L)</span>
</span>{<font></font>
    N.y *= <span class="hljs-number">0.3</span>;
    <span class="hljs-keyword">float</span> NdotL = saturate(<span class="hljs-number">4</span> * dot(N, L));<font></font>
	<font></font>
    float3 color = lerp(_ShadowColor, _TerrainColor, NdotL);<font></font>
    <span class="hljs-keyword">return</span> color;<font></font>
}</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パート3.通常の砂</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3番目のパートでは、滑らかな3Dモデルを砂丘に変える法線マップの作成に焦点を当てます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
チュートリアルの前の部分では、拡散砂照明ジャーニーを実装しました。</font><font style="vertical-align: inherit;">この効果のみを使用すると、砂漠の砂丘はかなり平坦で退屈に見えます。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8cb/dd6/9a8/8cbdd69a8a92614469132400c0979c79.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ジャーニーの最も興味深い効果の1つは、砂の粒子の粗さです。</font><font style="vertical-align: inherit;">スクリーンショットを見ると、砂丘は滑らかで均一ではなく、何百万もの微視的な砂粒から作成されているように見えます。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e93/307/efc/e93307efce359d4830f5894dde30c9e6.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この効果は、</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">バンプマッピング</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（エンボステクスチャリング）</font><font style="vertical-align: inherit;">と呼ばれる手法を使用して実現できます</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">この効果がレンダリングの外観をどのように変更するかを確認します。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/90f/9b4/73f/90f9b473f7d1eefcb6ca32871300fed8.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/07a/739/06d/07a73906d58ed9d4c251340b4e92d7f5.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
少しずつ違いが見られます：</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ea7/3d5/b3f/ea73d5b3fb56c941c9b61f022dcb8699.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2f8/efa/5c4/2f8efa5c4926a0de947b8ff91e114498.png"></div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">法線マップを扱います</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
砂は無数の砂粒で構成されており、それぞれが独自の形状と組成を持っています（以下を参照）。個々のパーティクルは、潜在的にランダムな方向に照明を反射します。この効果を実現する1つの方法は、これらのすべての微視的な砂粒を含む3Dモデルを作成することです。しかし、必要なポリゴンの数が非常に多いため、このアプローチは現実的ではありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、実際の3Dモデルと比較してより複雑なジオメトリをシミュレートするためによく使用される別のソリューションがあります。 3Dモデルの各頂点または面は、その</font><strong><font style="vertical-align: inherit;">法線方向</font></strong><font style="vertical-align: inherit;">と呼ばれるパラメーターに関連付けられています</font></font><strong><font style="vertical-align: inherit;"></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">これは、3Dモデルの表面での光の反射を計算するために使用される単位長ベクトルです。</font><font style="vertical-align: inherit;">つまり、砂をシミュレートするには、砂の粒子のこの​​一見ランダムな分布をシミュレートする必要があり、したがって、それらが表面の法線にどのように影響するかをシミュレートする必要があります。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/413/bc4/cc3/413bc4cc3466b827a1a1d86559d54054.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは無数の方法で行うことができます。</font><font style="vertical-align: inherit;">最も簡単なのは、砂丘モデルの元の法線の方向を変えるテクスチャを作成することです。</font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表面に垂直</font></font></strong> <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-35-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>N</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.064ex" height="2.009ex" viewBox="0 -755.5 888.5 865.1" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMATHI-4E" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N</font></font></mi></math></span></span><script type="math/tex" id="MathJax-Element-35">N</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一般的なケースでは、3Dモデルのジオメトリによって計算されます。ただし、</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">法線マップ</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用して変更でき</font><strong><font style="vertical-align: inherit;">ます</font></strong><font style="vertical-align: inherit;">。法線マップは、サーフェスの法線のローカル方向を変更することにより、より複雑なジオメトリをシミュレートできるテクスチャです。この手法は、</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">バンプマッピング</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と呼ばれることがよくあり</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
法線の変更は、</font></font><code>surf</code> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サーフェスシェーダー</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">として実行できるかなり単純なタスクです</font><font style="vertical-align: inherit;">。この関数は2つのパラメーターを受け取り、そのうちの1つをと</font></font><code>struct</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">呼び</font></font><code>SurfaceOutput</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。これには、色（</font></font><code>o.Albedo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）から透明度（</font></font><code>o.Alpha</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">まで、3Dモデルの一部をレンダリングするために必要なすべてのプロパティが含まれています</font><font style="vertical-align: inherit;">。含まれている別のパラメータは、法線の方向です（</font></font><code>o.Normal</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）、モデルでの光の反射方法を変更するために書き換えることができます。</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="noopener noreferrer"><font style="vertical-align: inherit;">サーフェスシェーダー</font></a></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
に関するUnityのドキュメント（</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="noopener noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ライティングサーフェスシェーダー</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）に</font><font style="vertical-align: inherit;">よると、</font></font><code>o.Normal</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">構造に</font><font style="vertical-align: inherit;">書き込まれるすべての法線</font></font><code>SurfaceOutput</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接線空間</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">で表現する必要があり</font><strong><font style="vertical-align: inherit;">ます</font></strong><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">SurfaceOutput</span>
{</span>
    fixed3 Albedo;  <span class="hljs-comment">// diffuse color</span>
    fixed3 Normal;  <span class="hljs-comment">// tangent space normal, if written</span><font></font>
    fixed3 Emission;<font></font>
    half Specular;  <span class="hljs-comment">// specular power in 0..1 range</span>
    fixed Gloss;    <span class="hljs-comment">// specular intensity</span>
    fixed Alpha;    <span class="hljs-comment">// alpha for transparencies</span>
};</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、単位ベクトルはメッシュ法線を基準とした座標系で表す必要があることを報告できます。</font><font style="vertical-align: inherit;">たとえば、</font></font><code>o.Normal</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">値</font><font style="vertical-align: inherit;">に書き込む</font><font style="vertical-align: inherit;">場合、</font></font><code>float3(0, 0, 1)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">法線は変更されません。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">surf</span> <span class="hljs-params">(Input IN, inout SurfaceOutput o)</span>
</span>{<font></font>
    o.Albedo = _SandColor;<font></font>
    o.Alpha = <span class="hljs-number">1</span>;<font></font>
    o.Normal = float3(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>);<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、ベクトル</font></font><code>float3(0, 0, 1)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が実際には3Dモデルのジオメトリに対して相対的に表現された法線ベクトルであるためです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サーフェスシェーダー</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">で</font><font style="vertical-align: inherit;">サーフェスの法線を変更するに</font></font><code>o.Normal</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、表面関数に</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新しいベクトル</font><font style="vertical-align: inherit;">を書き込むだけで十分</font><strong><font style="vertical-align: inherit;">です</font></strong><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">surf</span> <span class="hljs-params">(Input IN, inout SurfaceOutput o)</span>
</span>{<font></font>
    o.Albedo = _SandColor;<font></font>
    o.Alpha = <span class="hljs-number">1</span>;<font></font>
    o.Normal = ... <span class="hljs-comment">// change the normal here</span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
残りの投稿では、チュートリアルの6番目の部分で複雑にする初期近似を作成します。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サンドノーマル</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最も問題のある部分は</font><font style="vertical-align: inherit;">、砂</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">粒子が表面に垂直に</font><em><font style="vertical-align: inherit;">どのように</font></em><font style="vertical-align: inherit;">変化</font><font style="vertical-align: inherit;">する</font><em><font style="vertical-align: inherit;">かを</font></em><font style="vertical-align: inherit;">理解</font><em><font style="vertical-align: inherit;">する</font></em><font style="vertical-align: inherit;">ことです。砂の各粒子は個別に光を任意の方向に散乱させることができますが、全体として、何か他のことが起こります。物理的に正確な方法では、砂の表面の法線ベクトルの分布を調べ、数学的にモデル化する必要があります。そのようなモデルは実際に存在しますが、チュートリアルで提示されているソリューションははるかに単純であり、同時に非常に効果的です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
モデルの各ポイントで、</font><strong><font style="vertical-align: inherit;">ランダムな単位ベクトルが</font></strong><font style="vertical-align: inherit;">テクスチャからサンプリングされます。</font></font><strong><font style="vertical-align: inherit;"></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">次に、サーフェスの法線が一定量、このベクトルに向かって傾斜します。</font><font style="vertical-align: inherit;">ランダムテクスチャを適切に作成し、適切な混合量を選択することで、砂丘の全体的な曲率を失うことなく、粒子にざらつき感を作成するような方法で、法線をサーフェスにシフトできます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ランダムな値は、ランダムな色で満たされたテクスチャを使用してサンプリングできます。</font><font style="vertical-align: inherit;">各ピクセルの成分R、G、Bは、法線ベクトルの成分X、Y、Zとして使用されます。</font><font style="vertical-align: inherit;">色成分は範囲内です</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-36-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow><mo>[</mo><mrow><mn>0</mn><mo>,</mo><mn>1</mn></mrow><mo>]</mo></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.653ex" height="2.634ex" viewBox="0 -809.3 2003.2 1134.2" role="img" focusable="false" style="vertical-align: -0.755ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-5B" x="0" y="0"></use><g transform="translate(278,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-30" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-2C" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-31" x="945" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-5D" x="1724" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[</font></font></mo><mrow><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></mn><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font></mo><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></mn></mrow><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">]</font></font></mo></mrow></math></span></span><script type="math/tex" id="MathJax-Element-36">\left[0, 1\right]</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">なので、間隔に変換する必要があります </font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-37-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow><mo>[</mo><mrow><mo>&amp;#x2212;</mo><mn>1</mn><mo>,</mo><mo>+</mo><mn>1</mn></mrow><mo>]</mo></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="8.269ex" height="2.634ex" viewBox="0 -809.3 3560.2 1134.2" role="img" focusable="false" style="vertical-align: -0.755ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-5B" x="0" y="0"></use><g transform="translate(278,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-2212" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-31" x="778" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-2C" x="1279" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-2B" x="1724" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-31" x="2502" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-5D" x="3281" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[</font></font></mo><mrow><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-</font></font></mo><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></mn><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font></mo><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></mo><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></mn></mrow><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">]</font></font></mo></mrow></math></span></span><script type="math/tex" id="MathJax-Element-37">\left[-1,+1\right]</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">次に、結果のベクトルは、その長さが</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-38-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>1</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.162ex" height="2.009ex" viewBox="0 -755.5 500.5 865.1" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-31" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></mn></math></span></span><script type="math/tex" id="MathJax-Element-38">1</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0d2/c95/03d/0d2c9503d98fd2463e7e3682743736bd.png"></div><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ランダムテクスチャを作成する</font></font></b><div class="spoiler_text">     .          ,     .<br>
<br>
       .     (),    ,          .      ,     .<br>
<br>
    GDC    ,   ,     Journey,     .  ,         .</div></div><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ランダムなベクトルは正規化する必要がありますか？</font></font></b><div class="spoiler_text">             .       :  R, G  B        .     ,          ,  <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-39-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>1</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.162ex" height="2.009ex" viewBox="0 -740.1 500.5 865.1" role="img" focusable="false" aria-hidden="true" style="vertical-align: -0.29ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-31" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></mn></math></span></span><script type="math/tex" id="MathJax-Element-39">1</script>.<br>
<br>
,    ,        <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-40-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow><mo>[</mo><mrow><mn>0</mn><mo>,</mo><mn>1</mn></mrow><mo>]</mo></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.653ex" height="2.866ex" viewBox="0 -863.1 2003.2 1234.2" role="img" focusable="false" aria-hidden="true" style="vertical-align: -0.862ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-5B" x="0" y="0"></use><g transform="translate(278,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-30" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-2C" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-31" x="945" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-5D" x="1724" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[</font></font></mo><mrow><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></mn><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font></mo><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></mn></mrow><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">]</font></font></mo></mrow></math></span></span><script type="math/tex" id="MathJax-Element-40">\left[0, 1\right]</script>  <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-41-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow><mo>[</mo><mrow><mo>&amp;#x2212;</mo><mn>1</mn><mo>,</mo><mo>+</mo><mn>1</mn></mrow><mo>]</mo></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="8.269ex" height="2.866ex" viewBox="0 -863.1 3560.2 1234.2" role="img" focusable="false" aria-hidden="true" style="vertical-align: -0.862ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-5B" x="0" y="0"></use><g transform="translate(278,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-2212" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-31" x="778" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-2C" x="1279" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-2B" x="1724" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-31" x="2502" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-5D" x="3281" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[</font></font></mo><mrow><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-</font></font></mo><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></mn><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font></mo><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></mo><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></mn></mrow><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">]</font></font></mo></mrow></math></span></span><script type="math/tex" id="MathJax-Element-41">\left[-1,+1\right]</script>         <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-42-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>1</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.162ex" height="2.009ex" viewBox="0 -740.1 500.5 865.1" role="img" focusable="false" aria-hidden="true" style="vertical-align: -0.29ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-31" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></mn></math></span></span><script type="math/tex" id="MathJax-Element-42">1</script>.     .<br>
<br>
,             . -,    <em> </em>   mip-,             .<br>
<br>
  ,    .</div></div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">実装</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
チュートリアルの前の部分で、</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サーフェス関数の</font></font></strong> <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最初のアウトラインに現れる「法線マップ」の概念を紹介しました</font></font><code>surf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。記事の最初に示した図を思い出すと、ジャーニーサンドのレンダリングを再現するには2つの効果が必要であることがわかります。</font><font style="vertical-align: inherit;">記事のこの部分では</font><font style="vertical-align: inherit;">最初の（</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">砂の法線</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）を</font><font style="vertical-align: inherit;">検討し、6番目の部分では</font><font style="vertical-align: inherit;">2番目の（</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">砂の波</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）を検討します。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">surf</span> <span class="hljs-params">(Input IN, inout SurfaceOutput o)</span>
</span>{<font></font>
    o.Albedo = _SandColor;<font></font>
    o.Alpha = <span class="hljs-number">1</span>;<font></font>
    <font></font>
    float3 N = float3(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>);<font></font>
    N = RipplesNormal(N); <span class="hljs-comment">// Covered in Journey Sand Shader #6</span>
    N = SandNormal   (N); <span class="hljs-comment">// Covered in this article</span><font></font>
    <font></font>
    o.Normal = N;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
前のセクションでは、バンプマッピングの概念を紹介しました。これにより、エフェクトの一部でテクスチャのサンプリングが必要になることがわかりました（コードで呼び出されます</font></font><code>uv_SandTex</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
上記のコードの問題は、計算のために、描画しているポイントの実際の位置を知る必要があることです。実際、テクスチャをサンプリングする</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UV座標</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が必要</font><font style="vertical-align: inherit;">です。これにより、どのピクセルから読み取るかが決まります。使用する3Dモデルが比較的フラットで、UV変換がある場合、そのUVを使用してランダムテクスチャをサンプリングできます。</font></font><br>
<br>
<pre><code class="cpp hljs">N = WavesNormal(IN.uv_SandTex.xy, N);<font></font>
N = SandNormal (IN.uv_SandTex.xy, N);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
または</font></font><code>IN.worldPos</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、レンダリングされたポイントの</font><font style="vertical-align: inherit;">ワールド内の位置（</font><font style="vertical-align: inherit;">）を</font><font style="vertical-align: inherit;">使用することもできます</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これで、ようやく</font></font><code>SandNormal</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">その実装</font><font style="vertical-align: inherit;">に集中でき</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">このパートで前述したように、アイデアはランダムテクスチャからピクセルをサンプリングし、それを（単位ベクトルに変換した後）新しい法線として使用することです。</font></font><br>
<br>
<pre><code class="cpp hljs">sampler2D_float _SandTex;<font></font>
<font></font>
<span class="hljs-function">float3 <span class="hljs-title">SandNormal</span> <span class="hljs-params">(float2 uv, float3 N)</span>
</span>{
    <span class="hljs-comment">// Random vector</span><font></font>
    float3 random = tex2D(_SandTex, uv).rgb;<font></font>
    <span class="hljs-comment">// Random direction</span>
    <span class="hljs-comment">// [0,1]-&gt;[-1,+1]</span>
    float3 S = normalize(random * <span class="hljs-number">2</span> - <span class="hljs-number">1</span>);
    <span class="hljs-keyword">return</span> S;<font></font>
}</code></pre><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ランダムテクスチャをズームする方法は？</font></font></b><div class="spoiler_text">   UV- 3D-      ,   .      ,       .<br>
<br>
  ,  Unity   .   ,        <code>_SandText_ST</code>. Unity       (  ) <code>_SandTex</code>.<br>
<br>
 <code>_SandText_ST</code>    :     .        ,          <em>Tiling</em>  <em>Offset</em>:<br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f29/a84/059/f29a84059ab970f412217f09c87fcf6f.png"></div><br>
      ,     <code>TRANSFORM_TEX</code>:<br>
<br>
<pre><code class="cpp hljs">sampler2D_float _SandTex;<font></font>
float4          _SandTex_ST;<font></font>
<font></font>
<span class="hljs-function">float3 <span class="hljs-title">SandNormal</span> <span class="hljs-params">(float2 uv, float3 N)</span>
</span>{
    <span class="hljs-comment">// Random vector</span><font></font>
    float3 random = tex2D(_SandTex, TRANSFORM_TEX(uv, _SandTex)).rgb;<font></font>
    <span class="hljs-comment">// Random direction</span>
    <span class="hljs-comment">// [0,1]-&gt;[-1,+1]</span>
    float3 S = normalize(random * <span class="hljs-number">2</span> - <span class="hljs-number">1</span>);
    <span class="hljs-keyword">return</span> S;<font></font>
}</code></pre></div></div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">法線を傾ける</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
上記のコードスニペットは機能しますが、非常に良い結果は得られません。この理由は単純です。完全にランダムな法線を返すだけで、実際には曲がり感を失う場合です。実際、法線の方向は、表面からの光の反射を計算するために使用され、その主な目的は、曲率に従ってモデルをシェーディングすることです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
下の画像で違いを確認できます。上記では、砂丘の法線は完全にランダムであり、どこが終わりどこが始まるかを理解することは不可能です。以下では、モデルの法線のみが使用されています。これは、表面が滑らかすぎるためです。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/620/9cb/acb/6209cbacb616db15bee5f95e314779c8.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/476/f0a/f25/476f0af2535dc2d552ce4b01a1d7751a.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
どちらのソリューションも適していません。</font><font style="vertical-align: inherit;">その間に何かが必要です。</font><font style="vertical-align: inherit;">以下に示すように</font><font style="vertical-align: inherit;">、テクスチャからサンプリングされたランダムな方向を使用して</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">法線を特定の量だけ</font><em><font style="vertical-align: inherit;">傾ける</font></em><font style="vertical-align: inherit;">必要があり</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/929/dfb/7e6/929dfb7e6d4712b7c69a403d0733c25b.png" width="239" height="240"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
図で説明されている操作は</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">slerp</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と呼ばれ</font><font style="vertical-align: inherit;">、</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">球面線形補間</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（球面線形補間）</font><font style="vertical-align: inherit;">を表し</font><font style="vertical-align: inherit;">ます。</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Slerpはlerpと</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">まったく同じように機能しますが、1つの例外があります。これを使用すると、単位ベクトル間を安全に補間でき、演算の結果は他の単位ベクトルになります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
残念ながら、slerpの正しい実装は非常にコストがかかります。</font><font style="vertical-align: inherit;">そして、効果のために、少なくとも偶然に基づいて、それを使用することは非論理的です。</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">slerp方程式を見せて</font></font></b><div class="spoiler_text">   , <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-43-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>p</mi><mn>0</mn></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.313ex" height="2.009ex" viewBox="-38.5 -555.6 995.9 865.1" role="img" focusable="false" aria-hidden="true" style="vertical-align: -0.719ex; margin-left: -0.089ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMATHI-70" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-30" x="712" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p</font></font></mi><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-43">p_0</script>  <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-44-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>p</mi><mn>1</mn></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.313ex" height="2.009ex" viewBox="-38.5 -555.6 995.9 865.1" role="img" focusable="false" aria-hidden="true" style="vertical-align: -0.719ex; margin-left: -0.089ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMATHI-70" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-31" x="712" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p</font></font></mi><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-44">p_1</script>   ,       .  <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-45-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>s</mi><mi>l</mi><mi>e</mi><mi>r</mi><mi>p</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.085ex" height="2.581ex" viewBox="0 -801.6 2189.5 1111.1" role="img" focusable="false" aria-hidden="true" style="vertical-align: -0.719ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMATHI-73" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMATHI-6C" x="469" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMATHI-65" x="768" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMATHI-72" x="1234" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMATHI-70" x="1686" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">l</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">r</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p</font></font></mi></math></span></span><script type="math/tex" id="MathJax-Element-45">slerp</script>    :<br>
<br>
(1)<p><math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-46-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>s</mi><mi>l</mi><mi>e</mi><mi>r</mi><mi>p</mi><mrow><mo>(</mo><mrow><msub><mi>p</mi><mn>0</mn></msub><mo>,</mo><msub><mi>p</mi><mn>1</mn></msub><mo>,</mo><mi>t</mi></mrow><mo>)</mo></mrow><mo>=</mo><mfrac><mrow><mi>sin</mi><mo>&amp;#x2061;</mo><mrow><mo>[</mo><mrow><mrow><mo>(</mo><mrow><mn>1</mn><mo>&amp;#x2212;</mo><mi>t</mi></mrow><mo>)</mo></mrow><mi mathvariant=&quot;normal&quot;>&amp;#x03A9;</mi></mrow><mo>]</mo></mrow></mrow><mrow><mi>sin</mi><mo>&amp;#x2061;</mo><mrow><mo>(</mo><mi mathvariant=&quot;normal&quot;>&amp;#x03A9;</mi><mo>)</mo></mrow></mrow></mfrac><msub><mi>p</mi><mn>0</mn></msub><mo>+</mo><mfrac><mrow><mi>sin</mi><mo>&amp;#x2061;</mo><mrow><mo>(</mo><mrow><mi>t</mi><mi mathvariant=&quot;normal&quot;>&amp;#x03A9;</mi></mrow><mo>)</mo></mrow></mrow><mrow><mi>sin</mi><mo>&amp;#x2061;</mo><mrow><mo>(</mo><mi mathvariant=&quot;normal&quot;>&amp;#x03A9;</mi><mo>)</mo></mrow></mrow></mfrac><msub><mi>p</mi><mn>1</mn></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="46.744ex" height="6.295ex" viewBox="0 -1601.2 20125.7 2710.3" role="img" focusable="false" aria-hidden="true" style="vertical-align: -2.576ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMATHI-73" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMATHI-6C" x="469" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMATHI-65" x="768" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMATHI-72" x="1234" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMATHI-70" x="1686" y="0"></use><g transform="translate(2356,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-28" x="0" y="0"></use><g transform="translate(389,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMATHI-70" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-30" x="712" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-2C" x="957" y="0"></use><g transform="translate(1402,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMATHI-70" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-31" x="712" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-2C" x="2359" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMATHI-74" x="2805" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-29" x="3556" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-3D" x="6579" y="0"></use><g transform="translate(7358,0)"><g transform="translate(397,0)"><rect stroke="none" width="5659" height="60" x="0" y="220"></rect><g transform="translate(60,744)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-73"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-69" x="394" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-6E" x="673" y="0"></use><g transform="translate(1229,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-5B" x="0" y="0"></use><g transform="translate(278,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-28" x="0" y="0"></use><g transform="translate(389,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-31" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-2212" x="722" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMATHI-74" x="1723" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-29" x="2474" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-3A9" x="3030" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-5D" x="4031" y="0"></use></g></g><g transform="translate(1464,-745)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-73"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-69" x="394" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-6E" x="673" y="0"></use><g transform="translate(1229,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-28" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-3A9" x="389" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-29" x="1112" y="0"></use></g></g></g></g><g transform="translate(13535,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMATHI-70" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-30" x="712" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-2B" x="14715" y="0"></use><g transform="translate(15493,0)"><g transform="translate(342,0)"><rect stroke="none" width="3212" height="60" x="0" y="220"></rect><g transform="translate(60,744)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-73"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-69" x="394" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-6E" x="673" y="0"></use><g transform="translate(1229,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-28" x="0" y="0"></use><g transform="translate(389,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMATHI-74" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-3A9" x="361" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-29" x="1473" y="0"></use></g></g><g transform="translate(240,-745)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-73"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-69" x="394" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-6E" x="673" y="0"></use><g transform="translate(1229,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-28" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-3A9" x="389" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-29" x="1112" y="0"></use></g></g></g></g><g transform="translate(19168,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMATHI-70" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-31" x="712" y="-213"></use></g></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">l</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">r</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p</font></font></mi><mrow><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（</font></font></mo><mrow><msub><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p</font></font></mi><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></mn></msub><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font></mo><msub><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p</font></font></mi><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></mn></msub><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font></mo><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">t</font></font></mi></mrow><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font></mo></mrow><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">=</font></font></mo><mfrac><mrow><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">罪</font></font></mi><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">⁡</font></font></mo><mrow><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[</font></font></mo><mrow><mrow><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（</font></font></mo><mrow><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></mn><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-</font></font></mo><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">t</font></font></mi></mrow><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font></mo></mrow><mi mathvariant="normal"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ω</font></font></mi></mrow><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">]</font></font></mo></mrow></mrow><mrow><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">罪</font></font></mi><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">⁡</font></font></mo><mrow><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（</font></font></mo><mi mathvariant="normal"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ω</font></font></mi><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font></mo></mrow></mrow></mfrac><msub><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p</font></font></mi><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></mn></msub><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></mo><mfrac><mrow><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">罪</font></font></mi><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">⁡</font></font></mo><mrow><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（</font></font></mo><mrow><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">t</font></font></mi><mi mathvariant="normal"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ω</font></font></mi></mrow><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font></mo></mrow></mrow><mrow><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">罪</font></font></mi><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">⁡</font></font></mo><mrow><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（</font></font></mo><mi mathvariant="normal"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ω</font></font></mi><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font></mo></mrow></mrow></mfrac><msub><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p</font></font></mi><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></mn></msub></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-46">\begin{equation*} slerp\left(p_0, p_1, t\right) = \frac{\sin\left[\left(1-t\right)\Omega\right]}{\sin\left(\Omega\right)}p_0 + \frac{\sin\left(t\Omega\right)}{\sin\left(\Omega\right)} p_1 \end{equation*}</script></math></p><br>
 <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-47-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi mathvariant=&quot;normal&quot;>&amp;#x03A9;</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.678ex" height="2.152ex" viewBox="0 -801.6 722.5 926.6" role="img" focusable="false" aria-hidden="true" style="vertical-align: -0.29ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-3A9" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi mathvariant="normal"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ω</font></font></mi></math></span></span><script type="math/tex" id="MathJax-Element-47">\Omega</script> —     <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-48-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>p</mi><mn>0</mn></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.313ex" height="2.009ex" viewBox="-38.5 -555.6 995.9 865.1" role="img" focusable="false" aria-hidden="true" style="vertical-align: -0.719ex; margin-left: -0.089ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMATHI-70" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-30" x="712" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p</font></font></mi><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-48">p_0</script>  <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-49-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>p</mi><mn>1</mn></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.313ex" height="2.009ex" viewBox="-38.5 -555.6 995.9 865.1" role="img" focusable="false" aria-hidden="true" style="vertical-align: -0.719ex; margin-left: -0.089ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMATHI-70" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-31" x="712" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p</font></font></mi><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-49">p_1</script>,       :<br>
<br>
(2)<p><math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-50-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi mathvariant=&quot;normal&quot;>&amp;#x03A9;</mi><mo>=</mo><mi>c</mi><mi>o</mi><msup><mi>s</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x2212;</mo><mn>1</mn></mrow></msup><mrow><mo>(</mo><mrow><msub><mi>p</mi><mn>0</mn></msub><mo>&amp;#x22C5;</mo><msub><mi>p</mi><mn>1</mn></msub></mrow><mo>)</mo></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="18.657ex" height="3.152ex" viewBox="0 -986.1 8032.9 1357.2" role="img" focusable="false" aria-hidden="true" style="vertical-align: -0.862ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-3A9" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-3D" x="1000" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMATHI-63" x="2056" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMATHI-6F" x="2490" y="0"></use><g transform="translate(2975,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMATHI-73" x="0" y="0"></use><g transform="translate(469,412)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-2212" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-31" x="778" y="0"></use></g></g><g transform="translate(4616,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-28" x="0" y="0"></use><g transform="translate(389,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMATHI-70" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-30" x="712" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-22C5" x="1179" y="0"></use><g transform="translate(1680,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMATHI-70" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-31" x="712" y="-213"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-29" x="3027" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi mathvariant="normal"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ω</font></font></mi><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">=</font></font></mo><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o</font></font></mi><msup><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s</font></font></mi><mrow class="MJX-TeXAtom-ORD"><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-</font></font></mo><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></mn></mrow></msup><mrow><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（</font></font></mo><mrow><msub><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p</font></font></mi><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></mn></msub><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">⋅</font></font></mo><msub><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p</font></font></mi><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></mn></msub></mrow><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font></mo></mrow></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-50">\begin{equation*} \Omega=cos^{-1} \left(p_0 \cdot p_1 \right) \end{equation*}</script></math></p><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
従来の</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">線形補間</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用した場合</font><font style="vertical-align: inherit;">、結果のベクトルは非常に異なって見える</font><font style="vertical-align: inherit;">ことに注意することが重要</font><font style="vertical-align: inherit;">です。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/eef/5e1/42f/eef5e142f1c8c05cac9b3d4f18d8e097.png" width="239" height="240"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2つの別個の単位ベクトル間のLerp操作は、必ずしも他の単位ベクトルを作成するわけではありません。</font><font style="vertical-align: inherit;">実際、係数が</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-51-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>1</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.162ex" height="2.009ex" viewBox="0 -755.5 500.5 865.1" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-31" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></mn></math></span></span><script type="math/tex" id="MathJax-Element-51">1</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> または </font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-52-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>0</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.162ex" height="2.009ex" viewBox="0 -755.5 500.5 865.1" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhjXyNJ0mpp_MjbZklQ89sSKniajTQ#MJMAIN-30" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></mn></math></span></span><script type="math/tex" id="MathJax-Element-52">0</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これにもかかわらず、lerpの結果を正規化すると、実際には単位ベクトルが得られます。これは、slerpによって生成された結果に驚くほど近い値です。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function">float3 <span class="hljs-title">nlerp</span><span class="hljs-params">(float3 n1, float3 n2, <span class="hljs-keyword">float</span> t)</span>
</span>{
    <span class="hljs-keyword">return</span> normalize(lerp(n1, n2, t));<font></font>
}</code></pre><br><font style="vertical-align: inherit;"></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nlerp</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
と呼ばれるこの手法は、</font><strong><font style="vertical-align: inherit;">slerpの</font></strong><font style="vertical-align: inherit;">近似を提供します。</font><font style="vertical-align: inherit;">その使用は</font><font style="vertical-align: inherit;">、</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="noopener noreferrer"><font style="vertical-align: inherit;">The Witnessの</font></a><font style="vertical-align: inherit;">開発者の1人である</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="noopener noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Casey Muratori</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">によって普及しました</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">このトピックについて詳しく知りたい場合は、</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="noopener noreferrer"><font style="vertical-align: inherit;">Slerpの記事を理解する</font></a><font style="vertical-align: inherit;">ことをお勧め</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="noopener noreferrer"><font style="vertical-align: inherit;">します。</font></a><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="noopener noreferrer"><font style="vertical-align: inherit;">次に、</font></a><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="noopener noreferrer"><font style="vertical-align: inherit;">Jonathan Blow</font></a><font style="vertical-align: inherit;">と</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="noopener noreferrer"><font style="vertical-align: inherit;">Math Magician-Lerp、Slerp、およびNlerp </font></a><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="noopener noreferrer"><font style="vertical-align: inherit;">による使用しません</font></a><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">
nlerpのおかげで、法線ベクトルをランダムに傾けることができます</font><font style="vertical-align: inherit;">。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="noopener noreferrer"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="noopener noreferrer"><font style="vertical-align: inherit;"></font></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="noopener noreferrer"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="noopener noreferrer"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><code>_SandTex</code><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="cpp hljs">sampler2D_float _SandTex;
<span class="hljs-keyword">float</span> _SandStrength;<font></font>
<font></font>
<span class="hljs-function">float3 <span class="hljs-title">SandNormal</span> <span class="hljs-params">(float2 uv, float3 N)</span>
</span>{
    <span class="hljs-comment">// Random vector</span><font></font>
    float3 random = tex2D(_SandTex, uv).rgb;<font></font>
    <span class="hljs-comment">// Random direction</span>
    <span class="hljs-comment">// [0,1]-&gt;[-1,+1]</span>
    float3 S = normalize(random * <span class="hljs-number">2</span> - <span class="hljs-number">1</span>);<font></font>
    <font></font>
    <span class="hljs-comment">// Rotates N towards Ns based on _SandStrength</span><font></font>
    float3 Ns = nlerp(N, S, _SandStrength);<font></font>
    <span class="hljs-keyword">return</span> Ns;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
結果を以下に示します。</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/rddUAStRjZ8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">次は何ですか</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次のパートでは、砂丘が海のようになる反射のちらつきについて検討します。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">謝辞</font></font></h3><br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="noopener noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Journey</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ビデオゲームは</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Thatgamecompany</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">によって開発さ</font><font style="vertical-align: inherit;">れ、</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sony Computer Entertainment</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">によって公開され</font><strong><font style="vertical-align: inherit;">ました</font></strong><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">PC（</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="noopener noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">エピックストア</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）とPS4（</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="noopener noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PSストア</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）で</font><font style="vertical-align: inherit;">ご利用いただけます</font><font style="vertical-align: inherit;">。</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="noopener noreferrer"><font style="vertical-align: inherit;">Jiadi Dengが</font></a></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
作成した砂丘の背景と照明オプションの3Dモデル</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">
ジャーニーのキャラクターの3Dモデルが（現在は閉鎖されている）FacePunchフォーラムで見つかりました。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="noopener noreferrer"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unityパッケージ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この効果を再現したい場合は、完全なUnityパッケージを</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="noopener noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Patreon</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">からダウンロードできます</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">シェーダーから3Dモデルまで、必要なものがすべて含まれています。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja476434/index.html">放棄されたデバイス用のUSBドライバーの作成</a></li>
<li><a href="../ja476436/index.html">ロボットオペレーティングシステムに関するロボット開発者のロシアでの最初の会議からのレポート</a></li>
<li><a href="../ja476442/index.html">いくつかのスペースまたは周波数計のようなマイクロコントローラを与える</a></li>
<li><a href="../ja476444/index.html">量子コンピューティングの原理の解明</a></li>
<li><a href="../ja476446/index.html">Jiraプラグイン：成功した自転車発明のいくつかの例</a></li>
<li><a href="../ja476450/index.html">cPanelの概要-サイトの管理とホスティングのためのWebベースのコンソール</a></li>
<li><a href="../ja476452/index.html">Key-Valueストレージ、またはアプリケーションがより便利になった方法</a></li>
<li><a href="../ja476454/index.html">5Gの到来：2020年に新技術の導入を確実にする企業</a></li>
<li><a href="../ja476456/index.html">中国の社会的信用システムは、まず第一に、市民評価システムではなく、大規模なAPIです。</a></li>
<li><a href="../ja476460/index.html">インターネットで最初にヒットしたファイル形式はMP3ではなくMIDIでした</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>