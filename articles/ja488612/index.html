<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🙄 ✍🏻 ☪️ Javaシリアライゼーション：厳密なデータ構造なしの最大速度 🛰️ 🔐 💃🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Sberbankのチームは、分散アプリケーション間の単一のJavaセッションコンテキストの交換を整理するセッションデータサービスを開発しています。これはミッションクリティカルなタスクの一部であるため、Javaオブジェクトの非常に高速なシリアル化が緊急に必要です。当初、彼らは私たちの頭に浮かびました：...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Javaシリアライゼーション：厳密なデータ構造なしの最大速度</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/sberbank/blog/488612/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sberbankのチームは、分散アプリケーション間の単一のJavaセッションコンテキストの交換を整理するセッションデータサービスを開発しています。これはミッションクリティカルなタスクの一部であるため、Javaオブジェクトの非常に高速なシリアル化が緊急に必要です。当初、彼らは私たちの頭に浮かびました：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Google Protocol Buffers</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apache Thrift</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apache Avro</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CBOR</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これらのライブラリの最初の3つでは、データのスキーマを記述するためにオブジェクトのシリアル化が必要です。</font><font style="vertical-align: inherit;">CBORは非常に低レベルなので、スカラー値とそのセットのみをシリアル化できます。</font><font style="vertical-align: inherit;">必要なのは、「あまり多くの質問をしない」Javaシリアル化ライブラリであり、シリアル化可能なオブジェクトを手動で「アトムに」ソートする必要がありませんでした。</font><font style="vertical-align: inherit;">実質的に何も知らずに任意のJavaオブジェクトをシリアル化したいと思っていました。できるだけ早くこれを実行したかったのです。</font><font style="vertical-align: inherit;">したがって、Javaシリアライゼーション問題に対して利用可能なオープンソースソリューションの競争を組織しました。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/52/0t/82/520t82yicq9kayb7s3bovbktf04.png" alt="KDPV"><br>
<a name="habracut"></a><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">競合他社</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コンテストでは、主にバイナリ形式を使用する最も人気のあるJavaシリアル化ライブラリと、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">他の</font></font></a> <font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Javaシリアル化</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">レビュー</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">でうまく機能したライブラリを選択し</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ました</font></a><font style="vertical-align: inherit;">。</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></td>
<td><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Java標準</font></font></i></td>
<td> Java- « »,&nbsp; Java-    .<br>
</td>
</tr>
<tr>
<td>2</td>
<td><i>Jackson JSON</i></td>
<td> &nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">FasterXML/jackson-databind</a>,  Java-   JSON-.<br>
</td>
</tr>
<tr>
<td>3</td>
<td><i>Jackson JSON (with types)</i></td>
<td>  ,   ,    ,      full qualified  Java-.        JSON- (,  )  .<br>
<div class="spoiler"><b class="spoiler_title">,    JSON...</b><div class="spoiler_text"><pre><code class="javascript hljs">[
  <span class="hljs-string">"ru.sbrf.ufs.dto.PersonDto"</span>,<font></font>
  {<font></font>
    <span class="hljs-string">"firstName"</span>:<span class="hljs-string">"Ivan"</span>,
    <span class="hljs-string">"lastName"</span>:<span class="hljs-string">"Ivanov"</span><font></font>
  }<font></font>
]<font></font>
</code></pre></div></div><div class="spoiler"><b class="spoiler_title">  ...</b><div class="spoiler_text">:<pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> ObjectMapper <span class="hljs-title">createMapper</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> ObjectMapper();<font></font>
}<font></font>
</code></pre>:<pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> ObjectMapper <span class="hljs-title">createMapper</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> ObjectMapper()<font></font>
            .enable(<font></font>
                    ACCEPT_SINGLE_VALUE_AS_ARRAY,<font></font>
                    ACCEPT_EMPTY_STRING_AS_NULL_OBJECT,<font></font>
                    ACCEPT_EMPTY_ARRAY_AS_NULL_OBJECT,<font></font>
                    READ_UNKNOWN_ENUM_VALUES_AS_NULL,<font></font>
                    UNWRAP_SINGLE_VALUE_ARRAYS<font></font>
            )<font></font>
            .disable(<font></font>
                    FAIL_ON_INVALID_SUBTYPE,<font></font>
                    FAIL_ON_NULL_FOR_PRIMITIVES,<font></font>
                    FAIL_ON_IGNORED_PROPERTIES,<font></font>
                    FAIL_ON_UNKNOWN_PROPERTIES,<font></font>
                    FAIL_ON_NUMBERS_FOR_ENUMS,<font></font>
                    FAIL_ON_UNRESOLVED_OBJECT_IDS,<font></font>
                    WRAP_EXCEPTIONS<font></font>
            )<font></font>
            .enable(ALLOW_SINGLE_QUOTES)<font></font>
            .disable(FAIL_ON_EMPTY_BEANS)<font></font>
            .enable(MapperFeature.PROPAGATE_TRANSIENT_MARKER)<font></font>
            .setVisibility(FIELD, ANY)<font></font>
            .setVisibility(ALL, NONE)<font></font>
            .enableDefaultTyping(NON_FINAL);  <span class="hljs-comment">// !</span><font></font>
}<font></font>
</code></pre></div></div></td>
</tr>
<tr>
<td>4</td>
<td><i>Jackson Smile</i></td>
<td>&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">FasterXML/jackson-dataformats-binary/smile</a>,   Jackson-,  Java-    JSON- – Smile.<br>
</td>
</tr>
<tr>
<td>5</td>
<td><i>Jackson Smile (with types)</i></td>
<td>  ,   ,    «Jackson JSON (with types)» (full qualified  Java-    ).<br>
</td>
</tr>
<tr>
<td>6</td>
<td><i>Bson4Jackson</i></td>
<td>&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">michel-kraemer/bson4jackson</a>,   Jackson-,  Java-    JSON- – BSON.<br>
</td>
</tr>
<tr>
<td>7</td>
<td><i>Bson4Jackson (with types)</i></td>
<td>  ,   ,    «Jackson JSON (with types)» (full qualified  Java-    ).<br>
</td>
</tr>
<tr>
<td>8</td>
<td><i>BSON MongoDb</i></td>
<td>&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">mongodb/mongo-java-driver/bson</a>,&nbsp;&nbsp; Java-  BSON-.<br>
</td>
</tr>
<tr>
<td>9</td>
<td><i>Kryo</i></td>
<td>&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">EsotericSoftware/kryo</a>,&nbsp; Java-    .<br>
</td>
</tr>
<tr>
<td>10</td>
<td><i>Kryo (unsafe)</i></td>
<td>  ,   ,      sun.misc.Unsafe   /.<br>
<div class="spoiler"><b class="spoiler_title">  ...</b><div class="spoiler_text"> :<pre><code class="plaintext hljs">com.esotericsoftware.kryo.io.Input<font></font>
com.esotericsoftware.kryo.io.Output<font></font>
</code></pre>:<pre><code class="plaintext hljs">com.esotericsoftware.kryo.io.UnsafeInput<font></font>
com.esotericsoftware.kryo.io.UnsafeOutput</code></pre></div></div></td>
</tr>
<tr>
<td>11</td>
<td><i>FST</i></td>
<td><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RuedigerMoeller /高速シリアル化</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ライブラリ&nbsp; </font><font style="vertical-align: inherit;">。Javaオブジェクトを独自のバイナリ形式に変換します。</font></font><br>
</td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12</font></font></td>
<td><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FST（危険）</font></font></i></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上記と同じライブラリですが、sun.misc.Unsafeクラスを使用してシリアル化/逆シリアル化を高速化するように構成されています。</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ライブラリ設定の特徴...</font></font></b><div class="spoiler_text">:<pre><code class="java hljs">FSTConfiguration fst = FSTConfiguration.createDefaultConfiguration();
</code></pre>:<pre><code class="plaintext hljs">FSTConfiguration fst = FSTConfiguration.createUnsafeBinaryConfiguration();</code></pre></div></div></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">十三</font></font></td>
<td><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ニオ</font></font></i></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Javaオブジェクトを独自のバイナリ形式に変換する</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">odnoklassniki / one-nio</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ライブラリ&nbsp; </font><font style="vertical-align: inherit;">。</font></font><br>
</td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">14</font></font></td>
<td><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nio（永続化用）</font></font></i></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上記と同じライブラリーですが、シリアライズ可能なJavaオブジェクトのクラスに関する詳細なメタ情報をシリアライズ結果に含めるように構成されています。</font><font style="vertical-align: inherit;">これは</font></font><code>byte[]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、逆シリアル化の前の</font><font style="vertical-align: inherit;">長期保存</font><font style="vertical-align: inherit;">（データベースなど）</font><font style="vertical-align: inherit;">中に必要になる場合が</font><font style="vertical-align: inherit;">あります。</font><font style="vertical-align: inherit;">つまり、追求される目標は、Jackson JSON（型付き）の目標と同じです。</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ライブラリ設定の特徴...</font></font></b><div class="spoiler_text">:<pre><code class="java hljs"><span class="hljs-keyword">byte</span>[] bufWithoutSerializers = <span class="hljs-keyword">new</span> <span class="hljs-keyword">byte</span>[bufferSize];<font></font>
SerializeStream out = <span class="hljs-keyword">new</span> SerializeStream( bufWithoutSerializers );<font></font>
out.writeObject(object);<font></font>
<span class="hljs-comment">// bufWithoutSerializers is the result</span>
</code></pre>:<pre><code class="java hljs"><span class="hljs-keyword">byte</span>[] bufWithSerializers = <span class="hljs-keyword">new</span> <span class="hljs-keyword">byte</span>[bufferSize];<font></font>
PersistStream out = <span class="hljs-keyword">new</span> PersistStream( bufWithSerializers );<font></font>
out.writeObject(object);<font></font>
bufWithSerializers = out.toByteArray();<font></font>
<span class="hljs-comment">// bufWithSerializers is the result</span>
</code></pre><br>
   <code>object</code>-  <code>result</code>&nbsp;  -:<br>
1) full qualified    <code>object</code>,<br>
2)     ,<br>
3) full qualified     ,<br>
4)        .<br>
  -  ,  One Nio   ,        .</div></div></td>
</tr>
</tbody></table></div><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">さあ行こう！</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">人種</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
スピードは、私たちの緊急の競争に参加しているJavaシリアル化ライブラリを評価するための主要な基準です。</font><font style="vertical-align: inherit;">どのシリアル化ライブラリがより高速かを客観的に評価するために</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、システムのログから実際のデータを取得し、それらからさまざまな長さ（</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 0〜1 MB）の</font><i><font style="vertical-align: inherit;">合成セッションデータを作成しました</font></i><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">データの形式は文字列とバイト配列でした。</font></font><br>
<blockquote><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注：</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">今後は、シリアル化可能なオブジェクトのサイズ（0〜10 KB）に勝者と敗者がすでに現れていることに</font><strong><font style="vertical-align: inherit;">注意してください</font></strong><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">オブジェクトのサイズをさらに1 MBに増やしても、競争の結果は変わりませんでした。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この点に関して、わかりやすくするために、Javaシリアライザーのパフォーマンスの次のグラフは、10 KBのオブジェクトのサイズによって制限されています。</font></font></blockquote><i> ,    :</i><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td></td>
<td>Intel<sup>R</sup>&nbsp;Core<sup>TM</sup> i7-6700 CPU, 3.4GHz, 8 cores</td>
</tr>
<tr>
<td></td>
<td>16 GB</td>
</tr>
<tr>
<td> </td>
<td>Microsoft Windows&nbsp;10&nbsp;(64-bit)</td>
</tr>
<tr>
<td>JRE</td>
<td>IBM J9 VM 1.7.0</td>
</tr>
</tbody></table></div><blockquote><strong>:</strong>   ,  IBM JRE    One Nio (   13  14).     <code>sun.reflect.MagicAccessorImpl</code>    <code>private</code>  <code>final</code> ( )  ,    . , IBM JRE      &nbsp;<code>sun.reflect.MagicAccessorImpl</code>,   ,     runtime .<br>
<br>
           (,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">Serialization-FAQ</a>,  One Nio   ),    fork  ,    &nbsp;<code>sun.reflect.MagicAccessorImpl</code>&nbsp;  .   &nbsp;<code>sun.reflect.MagicAccessorImpl</code>&nbsp;  fork-   <code>sun.misc.Unsafe</code>     .<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに、私たちのフォークでは、文字列のシリアル化が最適化されました。IBMJREで作業する場合、文字列のシリアル化が30〜40％速くなりました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この点で、この出版物では、One Nioライブラリのすべての結果は、元のライブラリではなく、独自のフォークで取得されました。</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">直列化/非直列化の速度の直接測定は、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Java Microbenchmark Harness</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（JMH）（OpenJDKのベンチマークを構築および実行するためのツール）</font><font style="vertical-align: inherit;">を使用</font><font style="vertical-align: inherit;">して実行されました。</font><font style="vertical-align: inherit;">各測定（グラフ上の1点）には、JVMを「ウォームアップ」するために5秒が使用され、時間測定自体にさらに5秒が使用され、その後平均化されました。</font></font><br>
<i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UPD：</font></font></b></i><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一部の詳細なしのJMHベンチマークコード</font></font></b><div class="spoiler_text"><pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SerializationPerformanceBenchmark</span> </span>{<font></font>
<font></font>
    <span class="hljs-meta">@State( Scope.Benchmark )</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Parameters</span> </span>{<font></font>
<font></font>
        <span class="hljs-meta">@Param( {
            "Java standard",
            "Jackson default",
            "Jackson system",
            "JacksonSmile default",
            "JacksonSmile system",
            "Bson4Jackson default",
            "Bson4Jackson system",
            "Bson MongoDb",
            "Kryo default",
            "Kryo unsafe",
            "FST default",
            "FST unsafe",
            "One-Nio default",
            "One-Nio for persist"
        } )</span>
        <span class="hljs-keyword">public</span> String serializer;
        <span class="hljs-keyword">public</span> Serializer serializerInstance;<font></font>
<font></font>
        <span class="hljs-meta">@Param( { "0", "100", "200", "300", /*... */ "1000000" } )</span>  <span class="hljs-comment">// Toward 1 MB</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> sizeOfDto;
        <span class="hljs-keyword">public</span> Object dtoInstance;
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">byte</span>[] serializedDto;<font></font>
<font></font>
        <span class="hljs-meta">@Setup( Level.Trial )</span>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setup</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException </span>{<font></font>
            serializerInstance = Serializers.getMap().get( serializer );<font></font>
            dtoInstance = DtoFactory.createWorkflowDto( sizeOfDto );<font></font>
            serializedDto = serializerInstance.serialize( dtoInstance );<font></font>
        }<font></font>
<font></font>
        <span class="hljs-meta">@TearDown( Level.Trial )</span>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">tearDown</span><span class="hljs-params">()</span> </span>{<font></font>
            serializerInstance = <span class="hljs-keyword">null</span>;<font></font>
            dtoInstance = <span class="hljs-keyword">null</span>;<font></font>
            serializedDto = <span class="hljs-keyword">null</span>;<font></font>
        }<font></font>
    }<font></font>
<font></font>
    <span class="hljs-meta">@Benchmark</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">byte</span>[] serialization( Parameters parameters ) <span class="hljs-keyword">throws</span> IOException {
        <span class="hljs-keyword">return</span> parameters.serializerInstance.serialize(<font></font>
                parameters.dtoInstance );<font></font>
    }<font></font>
<font></font>
    <span class="hljs-meta">@Benchmark</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> Object <span class="hljs-title">unserialization</span><span class="hljs-params">( Parameters parameters )</span> <span class="hljs-keyword">throws</span> IOException, ClassNotFoundException </span>{
        <span class="hljs-keyword">return</span> parameters.serializerInstance.deserialize(<font></font>
                parameters.serializedDto,<font></font>
                parameters.dtoInstance.getClass() );<font></font>
    }<font></font>
}<font></font>
</code></pre></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここで何が起こったのです：</font><font style="vertical-align: inherit;">
まず、シリアル化の結果に追加のメタデータを追加し、ライブラリのオプションが遅く、同じライブラリのデフォルト設定よりもあることに注意してくださいは、（設定の「持続のために」「タイプで」を参照して）。</font><font style="vertical-align: inherit;">
一般に、シリアル化の結果によると、構成に関係なく</font><i><font style="vertical-align: inherit;">、レースから外れたJackson JSONとBson4Jacksonは</font></i><font style="vertical-align: inherit;">部外者となり</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">
さらに、</font><i><font style="vertical-align: inherit;">Java標準は</font></i><font style="vertical-align: inherit;">、逆シリアル化の結果</font><font style="vertical-align: inherit;">に</font><font style="vertical-align: inherit;">基づいて</font><i><font style="vertical-align: inherit;">、次のように競合から脱落し</font></i><font style="vertical-align: inherit;">ます</font><font style="vertical-align: inherit;">。シリアル化可能なデータのサイズに関係なく、逆シリアル化は競合他社よりもはるかに低速です。</font><font style="vertical-align: inherit;">
残りの参加者を詳しく見てみましょう：</font><font style="vertical-align: inherit;">
シリアライゼーションの結果によると、</font><i><font style="vertical-align: inherit;">FST</font></i><font style="vertical-align: inherit;">ライブラリは自信を持ってリーダーにいます</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/webt/un/cl/x7/unclx7kgnmniixupznbhmuigcwi.png" alt="レース-すべての参加者"></a><br>
<br><font style="vertical-align: inherit;"></font><br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/webt/ct/fm/cg/ctfmcgtlh9wo66vctatdvwujhzy.png" alt="レーシング-部外者を除く"></a><br>
<br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、そしてオブジェクトのサイズが大きくなると、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nioは</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「かかとを踏む」ようになります</font><font style="vertical-align: inherit;">。</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nioの場合</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、「永続化」オプションは、シリアル化速度のデフォルト構成よりもはるかに遅い</font><font style="vertical-align: inherit;">ことに注意してください</font><font style="vertical-align: inherit;">。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
逆シリアル化を見ると、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nio</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はデータサイズの増加に伴って</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FST</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を追い抜くことができたことが</font><font style="vertical-align: inherit;">わかり</font><font style="vertical-align: inherit;">ます</font><font style="vertical-align: inherit;">。後者では、逆に、非標準の「安全でない」構成は、逆シリアル化をはるかに高速に実行します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ANDにすべてのポイントを当てはめるために、シリアル化と逆シリアル化の全体的な結果を見てみましょう</font><u><i><font style="vertical-align: inherit;">。FST（unsafe）</font></i></u><u><font style="vertical-align: inherit;">と</font></u><u><i><font style="vertical-align: inherit;">One Nioの</font></i></u><u><font style="vertical-align: inherit;"> 2つの明確なリーダー</font></u><font style="vertical-align: inherit;"> 
があることが明らかになりました</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">
小さなオブジェクトの場合</font><i><font style="vertical-align: inherit;">FST（危険）</font></i></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/webt/zp/qq/mw/zpqqmwuxdlsb_gvl3orjyd1pyda.png" alt="レーシング-部外者を除く（全体的な分類）"></a><br>
<br><font style="vertical-align: inherit;"></font><u><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i></u><font style="vertical-align: inherit;"></font><br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;自信を持ってリードし、シリアル化可能なオブジェクトのサイズが大きくなると、彼は認め始め、最終的には</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nio</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">よりも劣り</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
直列化可能オブジェクトのサイズが増加した3番目の位置</font><font style="vertical-align: inherit;">は、リーダーのほぼ2倍ですが、</font></font><u><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BSON MongoDb</font></font></i></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が自信を持って採用してい</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">計量</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
シリアライゼーション結果のサイズは、Javaシリアライゼーションライブラリを評価するための2番目に重要な基準です。ある意味で、シリアライズ/デシリアライズの速度は結果のサイズに依存します。コンパクトな結果を作成して処理する方が、ボリュームの結果よりも高速です。シリアル化の結果を「重み付け」するために、システムログ（文字列とバイト配列）から取得された実際のデータから形成された同じJavaオブジェクトがすべて使用されました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに、シリアライゼーションの結果の重要な特性は、それがどれだけうまく圧縮されるかです（たとえば、データベースまたは他のストレージに保存するため）。私たちの競争</font><font style="vertical-align: inherit;">では、ZIPとgzipの基礎である</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Deflate</font></font></i></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">圧縮</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><i><font style="vertical-align: inherit;">アルゴリズム</font></i></a><font style="vertical-align: inherit;">を使用しました</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
「計量」の結果は次のとおりです。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/webt/pb/ek/h-/pbekh-hfdtstyzpd2ttgtkfhb88.png" alt="計量"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最もコンパクトな結果は、レースのリーダーの1人である</font></font><u><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nio</font></font></i></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">からのシリアル化であると予想され</font><font style="vertical-align: inherit;">ます。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コンパクトさで2位は</font></font><u><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BSON MongoDbになりました</font></font></i></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &nbsp;（レースで3位になりました）。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コンパクト性の点で3位にランクされた</font></font><u><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kryo</font></font></i></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ライブラリは「エスケープ」し</font><font style="vertical-align: inherit;">ました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
「計量」のこれら3つのリーダーのシリアル化結果も完全に圧縮されています（ほぼ2つ）。</font><font style="vertical-align: inherit;">それは最も非圧縮性であることがわかりました：JSONのバイナリー相当物はSmileとJSONそのものです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
奇妙な事実-シリアライゼーション中の「計量」の勝者はすべて、同じ量のサービスデータを小さなシリアライズ可能なオブジェクトと大きなシリアライズ可能なオブジェクトの両方に追加します。</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">柔軟性</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
勝者の選択について責任ある決定をする前に、各シリアライザの柔軟性と使いやすさを徹底的にチェックすることにしました。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このために、競争に参加しているシリアライザを評価するための20の基準をまとめ、「1匹のマウスが目をすり抜けないように」しました。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/webt/zd/t4/it/zdt4itoudhnnpfo7e2l9jdscwdo.png" alt="柔軟性"></a><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">説明付きの脚注</font></font></b><div class="spoiler_text"><sup>1</sup>&nbsp; &nbsp; <i> <code>LinkedHashMap</code>.</i><br>
<sup>2</sup>&nbsp; &nbsp;<i>    — ,    — .</i><br>
<sup>3</sup>&nbsp; &nbsp;<i>    — ,    — .</i><br>
<sup>4</sup>&nbsp; &nbsp;<i>  <code>sun.reflect.MagicAccessorImpl</code> — : boxing/unboxing,   <code>BigInteger/BigDecimal/String</code>.   <code>MagicAccessorImpl</code>&nbsp;(  ' fork One Nio) — .</i><br>
<sup>5</sup>&nbsp; &nbsp;<i> <code>ArrayList</code>.</i><br>
<sup>6</sup>&nbsp; &nbsp;<i> <code>ArrayList</code>  <code>HashSet</code>      .</i><br>
<sup>7</sup>&nbsp; &nbsp;<i> <code>HashMap</code>.</i><br>
<sup>8</sup>&nbsp; &nbsp;<i>        — ,     ,   /Map-,   (   <code>HashMap</code>).</i><br>
<sup>9</sup>&nbsp; &nbsp;<i>   -.</i><br>
<sup>10</sup>&nbsp;<i>   One Nio — ,    ' fork- — .</i><br>
<sup>11</sup> <i>     .</i><br>
</div></div><i><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UPD：</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 13番目の基準によると、One Nio（持続）は別のポイント（19番目）を獲得しました。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
この細心の注意を払った「申請者の審査」は、おそらく「キャスティング」の中で最も時間のかかる段階でした。しかし、これらの比較結果は、シリアライゼーションライブラリを使用する便利さをもたらします。結果として、これらの結果を参照として使用できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実現するのは残念でしたが、レースと計量の結果によると、私たちのリーダー</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -FST（unsafe）</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> One Nio</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-柔軟性の面で部外者であることが判明...しかし、私たちは奇妙な事実に興味を持っていました。「for persist」構成の1つのNio（最速でもコンパクトでもない）は、柔軟性の点で最も多くのポイントを獲得しました-19/20。デフォルトの（高速でコンパクトな）One Nio構成を柔軟に機能させる機会も非常に魅力的に見えました-方法がありました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初に、参加者を競争に紹介したときに</font><font style="vertical-align: inherit;">、直列化の結果に</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nio（永続化用）が</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">含まれ、直列化可能な</font><i><font style="vertical-align: inherit;">Javaオブジェクトのクラスに関する</font></i><font style="vertical-align: inherit;">詳細な</font><i><font style="vertical-align: inherit;">メタ情報</font></i><font style="vertical-align: inherit;">が含まれている</font><font style="vertical-align: inherit;">と言わ</font><font style="vertical-align: inherit;">れました</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（*）。</font><font style="vertical-align: inherit;">このメタ情報を逆シリアル化に使用すると、One Nioライブラリは、シリアル化時にシリアル化可能なオブジェクトのクラスがどのように見えるかを正確に把握します。</font><font style="vertical-align: inherit;">この知識に基づいて、One Nioの逆シリアル化アルゴリズムは柔軟性が高いため、シリアル化の結果として最大の互換性が得られ</font></font><code>byte[]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
指定されたクラスのメタ情報（*）を個別に取得し、</font></font><code>byte[]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;このクラスのJavaオブジェクトが逆シリアル化される側にシリアル</font><font style="vertical-align: inherit;">化し&nbsp; </font><font style="vertical-align: inherit;">て送信できることがわかりました。</font></font><div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ステップのコードで...</font></font></b><div class="spoiler_text"><pre><code class="java hljs"><span class="hljs-comment">//  №1:  -   SomeDto</span><font></font>
one.nio.serial.Serializer&lt;SomeDto&gt; dtoSerializerWithMeta = Repository.get( SomeDto.class );<font></font>
<span class="hljs-keyword">byte</span>[] dtoMeta = serializeByDefaultOneNioAlgorithm( dtoSerializerWithMeta );<font></font>
//  №<span class="hljs-number">1</span>:  dtoMeta  №<span class="hljs-number">2</span><font></font>
<font></font>
<span class="hljs-comment">//  №2:  -    SomeDto      One Nio</span><font></font>
one.nio.serial.Serializer&lt;SomeDto&gt; dtoSerializerWithMeta = deserializeByOneNio( dtoMeta );<font></font>
Repository.provideSerializer( dtoSerializerWithMeta );<font></font>
<font></font>
<span class="hljs-comment">//  №1:    SomeDto</span>
<span class="hljs-keyword">byte</span>[] bytes1 = serializeByDefaultOneNioAlgorithm( object1 );
<span class="hljs-keyword">byte</span>[] bytes2 = serializeByDefaultOneNioAlgorithm( object2 );<font></font>
...<font></font>
<span class="hljs-comment">//  №1:    №2</span><font></font>
<font></font>
<span class="hljs-comment">//  №2:      SomeDto</span><font></font>
SomeDto object1 = deserializeByOneNio( bytes1 );<font></font>
SomeDto object2 = deserializeByOneNio( bytes2 );<font></font>
...<font></font>
</code></pre></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
分散サービス間でクラスに関するメタ情報を交換するこの明示的な手順を実行すると、そのようなサービスは、デフォルトの（高速でコンパクトな）One Nio構成を使用して、シリアル化されたJavaオブジェクトを相互に送信できます。結局のところ、サービスが実行されている間、それらの側のクラスのバージョンは変更されません。つまり、各対話中に各シリアル化結果内の一定のメタ情報を「前後にドラッグ」する理由はありません。したがって、最初にもう少しアクションを実行すると、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nioの</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スピードとコンパクトさを</font><i><font style="vertical-align: inherit;">One Nio</font></i><font style="vertical-align: inherit;">の柔軟性</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（永続化のため）</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と同時に</font><font style="vertical-align: inherit;">使用できます</font><font style="vertical-align: inherit;">。まさに必要なもの！</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その結果、シリアル化された形式で分散サービス間でJavaオブジェクトを転送するために（これは、この競争を組織するためのものです）&nbsp;</font></font><u><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1つのNioが柔軟性の勝者でした</font></font></i></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &nbsp;（19/20）。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
レーシングと計量の初期に際立ったJavaシリアライザーの中で、柔軟性は悪くありませんでした。</font></font><br>
<br>
<ul>
<li><u><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BSON MongoDb</font></font></i></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &nbsp;（14.5 / 20）、</font></font></li>
<li><u><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クライオ</font></font></i></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（13/20）。</font></font></li>
</ul><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ペデスタル</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
過去のJavaシリアル化コンテストの結果を思い出してください。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">レースでは、レーティングの最初の2行が</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FST（unsafe）</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nio</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">で</font><font style="vertical-align: inherit;">除算され</font><font style="vertical-align: inherit;">、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BSON MongoDb</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が3位</font><i><font style="vertical-align: inherit;">でした</font></i><font style="vertical-align: inherit;">。</font></font></li>
<li><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1人のNio</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が計量を破り</font><font style="vertical-align: inherit;">、続いて</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BSON MongoDb</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kryoを破りました</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">柔軟性に関しては、分散アプリケーション間でセッションコンテキストを交換するという私たちのタスクのために、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nioが</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">再び最初&nbsp; </font><font style="vertical-align: inherit;">になり、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BSON MongoDb</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kryoが優れていました</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、達成された結果の全体の観点から、得られたペデスタルは次のとおりです。</font></font><br>
<br>
<ol>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nio</font></font></strong><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
はメインレース-レース-で最初の場所を</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FST（unsafe）</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と共有しました</font><font style="vertical-align: inherit;">が、計量とテストの柔軟性において競合他社を大幅に圧倒しました。</font></font></li>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FST（安全でない）</font></font></strong><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
また、非常に高速なJavaシリアライゼーションライブラリですが、シリアライゼーションによって生じるバイト配列の直接および下位互換性がありません。</font></font></li>
<li><strong>BSON MongoDB&nbsp;+&nbsp;Kryo</strong><br>
 2   3-      Java-,     .       2-   ,          .        <code>Collection</code>  <code>Map</code>,   <i>BSON MongoDB</i>     custom-  / (<code>Externalizable</code>  ..).</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sberbankのセッションデータサービスでは</font><font style="vertical-align: inherit;">、競争で1位を獲得し</font><font style="vertical-align: inherit;">た</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nio</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ライブラリーを使用しました</font><font style="vertical-align: inherit;">。このライブラリを使用して、Javaセッションコンテキストデータがシリアル化され、アプリケーション間で転送されました。この改訂のおかげで、セッション転送の速度は数回加速しました。負荷テストでは、Sberbank Onlineでの実際のユーザーの行動に近いシナリオでは、この改善だけで最大40％の加速が得られたことが示されました。このような結果は、ユーザーのアクションに対するシステムの応答時間を短縮することを意味し、お客様の満足度を高めます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次の記事では、</font><i><font style="vertical-align: inherit;">One Nioの</font></i><font style="vertical-align: inherit;">追加の加速を実際に実演してみます</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クラスの使用から派生</font></font><code>sun.reflect.MagicAccessorImpl</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">残念ながら、IBM JREはこのクラスの最も重要なプロパティをサポートしていません。つまり、</font><font style="vertical-align: inherit;">このバージョンのJRE </font><font style="vertical-align: inherit;">での</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nioの</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">潜在能力は</font><font style="vertical-align: inherit;">まだ</font><font style="vertical-align: inherit;">完全に</font><font style="vertical-align: inherit;">は明らかにされていません。</font><font style="vertical-align: inherit;">つづく。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja488602/index.html">FUNCORPのiOS MEETUP＃2および開発者を最新の状態に保つ方法</a></li>
<li><a href="../ja488604/index.html">先週のフロントエンドの世界からの新鮮な食材のダイジェストNo. 402（2020年2月10日〜16日）</a></li>
<li><a href="../ja488606/index.html">トカゲの本質</a></li>
<li><a href="../ja488608/index.html">「グローリーZHPSS！」またはGPSSワールドを覚えて</a></li>
<li><a href="../ja488610/index.html">電磁波に敏感な人の話、または崖の端を感じる方法... UPD：+ FAQ</a></li>
<li><a href="../ja488614/index.html">Bobbin 3.0.0-改善のレビュー</a></li>
<li><a href="../ja488616/index.html">データサイエンスと機械学習におけるヌル問題</a></li>
<li><a href="../ja488618/index.html">モバイルデベロッパー向けの興味深い資料のダイジェスト＃333（2月10〜16日）</a></li>
<li><a href="../ja488622/index.html">チェックリストは規制を置き換えるのですか？</a></li>
<li><a href="../ja488624/index.html">相互経済</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>