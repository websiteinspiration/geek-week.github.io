<!doctype html>
<html class="no-js" lang="ar">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐๐ฝ ๐งฃ ๐ง DBA: ุชูุธูู ุงููุฒุงููุฉ ูุงูุงุณุชูุฑุงุฏ ุจููุงุกุฉ ๐จ๐ผโ๐ค ๐ ๐จ๐พโ๐</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูุน ุงููุนุงูุฌุฉ ุงููุนูุฏุฉ ููุฌููุนุงุช ุงูุจูุงูุงุช ุงููุจูุฑุฉ ( ุนูููุงุช ETL ุงููุฎุชููุฉ : ุนูููุงุช ุงูุงุณุชูุฑุงุฏ ูุงูุชุญูููุงุช ูุงููุฒุงููุฉ ูุน ูุตุฏุฑ ุฎุงุฑุฌู) ุ ุบุงูุจูุง ูุง ูููู ูู ุงูุถุฑูุฑู...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>DBA: ุชูุธูู ุงููุฒุงููุฉ ูุงูุงุณุชูุฑุงุฏ ุจููุงุกุฉ</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/tensor/blog/492464/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุน ุงููุนุงูุฌุฉ ุงููุนูุฏุฉ ููุฌููุนุงุช ุงูุจูุงูุงุช ุงููุจูุฑุฉ ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูููุงุช ETL</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงููุฎุชููุฉ </font><font style="vertical-align: inherit;">: </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;">ุนูููุงุช</font></a><font style="vertical-align: inherit;"> ุงูุงุณุชูุฑุงุฏ ูุงูุชุญูููุงุช ูุงููุฒุงููุฉ ูุน ูุตุฏุฑ ุฎุงุฑุฌู) ุ ุบุงูุจูุง ูุง ูููู ูู ุงูุถุฑูุฑู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"ุงูุชุฐูุฑ" ูุคูุชูุง ููุนุงูุฌุฉ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุดูุก ุถุฎู ุนูู </font><b><font style="vertical-align: inherit;">ุงูููุฑ</font></b><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุนุงุฏุฉ ูุง ุชุจุฏู ุงููููุฉ ุงููููุฐุฌูุฉ ูู ูุฐุง ุงูููุน ุดูุฆูุง ูุซู ูุฐุง: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"ููุง ูุงู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณู ุงููุญุงุณุจุฉ ุจุชุญููู</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุขุฎุฑ ูุฏููุนุงุช ูุณุชููุฉ </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;">ูู ุงูุจูู ุงูุนููู</font></a><font style="vertical-align: inherit;"> ุ ูุญุชุงุฌ ุฅูู ุชุญููููุง ุจุณุฑุนุฉ ุฅูู ูููุน ุงูููุจ ูุฑุจุทูุง ุจุงูุญุณุงุจุงุช"</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ูููู ุนูุฏูุง ูุจุฏุฃ ููุงุณ ุญุฌู ูุฐุง "ุดูุก" ุจูุฆุงุช ุงูููุฌุงุจุงูุช ุ ูุงูุฎุฏูุฉ ูุฌุจ ุฃู ูุณุชูุฑ ูุฐุง ูู ุงูุนูู ูุน ุงููุงุนุฏุฉ ูู ูุถุน 24 ร 7 ุ ูููุงู ุงูุนุฏูุฏ ูู ุงูุขุซุงุฑ ุงูุฌุงูุจูุฉ ุงูุชู ุณุชุฏูุฑ ุญูุงุชู.</font></font><br>
<img src="https://habrastorage.org/webt/tl/g3/ff/tlg3ffjptyayqlu-5k06oonr_vi.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุชุนุงูู ูุนูุง ูู PostgreSQL (ูููุณ ููุท ูููุง) ุ ููููู ุงุณุชุฎุฏุงู ุจุนุถ ุฎูุงุฑุงุช ุงูุชุญุณูู ุงูุชู ุณุชุณูุญ ูู ุจูุนุงูุฌุฉ ุฃุณุฑุน ูุจููุงุฑุฏ ุฃูู.</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. ุฃูู ุชุดุญูุ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃููุงู ุ ุฏุนูุง ููุฑุฑ ุฃูู ูููููุง ุชุญููู ุงูุจูุงูุงุช ุงูุชู ูุฑูุฏ "ูุนุงูุฌุชูุง".</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.1. </font><font style="vertical-align: inherit;">ุงูุฌุฏุงูู ุงููุคูุชุฉ (ุงูุฌุฏูู ุงููุคูุช)</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุญูุซ ุงููุจุฏุฃ ุ ุจุงููุณุจุฉ ูู PostgreSQL ุ ูุฅู ุงููุคูุชุงุช ูู ููุณ ุงูุฌุฏุงูู ูุซู ุฃู ุฌุฏุงูู ุฃุฎุฑู. </font><font style="vertical-align: inherit;">ูุฐูู ุ ุงูุฎุฑุงูุงุช ูุซู </font></font><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"ูู ุดูุก ูุฎุฒูู ููุงู ููุท ูู ุงูุฐุงูุฑุฉ ุ ูููู ูููู ุฃู ุชูุชูู"</font></font></b></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุบูุฑ ุตุญูุญุฉ </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูููู ููุงู ุงูุนุฏูุฏ ูู ุงูุงุฎุชูุงูุงุช ุงููููุฉ.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณุงุญุฉ ุงูุงุณู ุงูุฎุงุตุฉ ููู ุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅุฐุง ุญุงูู ุงุชุตุงูุงู ุงูููุงู ุจููุง ูู ููุณ ุงูููุช </font></font><code>CREATE TABLE x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ููู ุงููุคูุฏ ุฃู ุดุฎุตูุง ูุง ุณูุญุตู ุนูู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฎุทุฃ ูู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุงุฆูุงุช DB </font><b><font style="vertical-align: inherit;">ุบูุฑ ุงููุฑูุฏุฉ</font></b><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููู ุฅุฐุง ุญุงูู ููุงููุง ุงูุชูููุฐ </font><font style="vertical-align: inherit;">ุ ูุณูููู ููุงููุง </font><font style="vertical-align: inherit;">ุจุชูููุฐ </font><font style="vertical-align: inherit;">ุฐูู ุนุงุฏุฉู ุ ูุณูุชููู ูู ููููุง </font><b><font style="vertical-align: inherit;">ูุณุฎุชู ุงูุฎุงุตุฉ ูู</font></b><font style="vertical-align: inherit;"> ุงูุฌุฏูู. </font><font style="vertical-align: inherit;">ููู ูููู ููุงู ุดูุก ูุดุชุฑู ุจููููุง.</font></font><code>CREATE <b>TEMPORARY</b> TABLE x</code><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"ุงูุชุฏููุฑ ุงูุฐุงุชู" ูุน ูุทุน ุงูุงุชุตุงู</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุนูุฏ ุฅุบูุงู ุงูุงุชุตุงู ุ ูุชู ุญุฐู ุฌููุน ุงูุฌุฏุงูู ุงููุคูุชุฉ ุชููุงุฆููุง ุ ูุฐูู </font></font><code>DROP TABLE x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง ูุนูู ูู </font><font style="vertical-align: inherit;">ุงูุชูููุฐ "ูุฏูููุง" </font><font style="vertical-align: inherit;">ุ ุจุงุณุชุซูุงุก ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅุฐุง ููุช ุชุนูู ูู ุฎูุงู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pgbouncer ูู ูุถุน ุงููุนุงููุฉ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ุชุณุชูุฑ ูุงุนุฏุฉ ุงูุจูุงูุงุช ูู ุงูุชุฑุงุถ ุฃู ูุฐุง ุงูุงุชุตุงู ูุง ูุฒุงู ูุดุทูุง ุ ููุฐุง ุงููุคูุช ุงูุฌุฏูู ูุง ูุฒุงู ููุฌูุฏุง. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐูู ุ ุณุชุคุฏู ูุญุงููุฉ ุฅุนุงุฏุฉ ุฅูุดุงุฆู ุ ูู ุงุชุตุงู ุขุฎุฑ ุฅูู pgbouncer ุ ุฅูู ุญุฏูุซ ุฎุทุฃ. </font><font style="vertical-align: inherit;">ูููู ูููู ุงูุชุญุงูู ุนูู ูุฐุง ูู ุฎูุงู ุงูุงุณุชูุงุฏุฉ </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">
ุตุญูุญ ุฃูู ูู ุงูุฃูุถู ุนุฏู ุงูููุงู ุจุฐูู ุชูุงููุง ุ ูุฃูู ุนูุฏูุง ููููู "ูุฌุฃุฉ" ูุนุฑูุฉ ุงูุจูุงูุงุช ุงููุชุจููุฉ ูู "ุงููุงูู ุงูุณุงุจู" ููุงู. </font><font style="vertical-align: inherit;">ุจุฏูุงู ูู ุฐูู ุ ูู ุงูุฃูุถู ุจูุซูุฑ ูุฑุงุกุฉ ุงูุฏููู ุ ููุนุฑูุฉ ุฃูู ุนูุฏ ุฅูุดุงุก ุงูุฌุฏูู ุ ููุงู ูุฑุตุฉ ููุฅุถุงูุฉ</font></font><code>CREATE TEMPORARY TABLE <b>IF NOT EXISTS</b> x</code><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><code>ON COMMIT <b>DROP</b></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - ุนูุฏ ุงูุชูุงู ุงููุนุงููุฉ ุ ุณูุชู ุญุฐู ุงูุฌุฏูู ุชููุงุฆููุง.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนุฏู ุงูุชูุฑุงุฑ</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฃูู ููุชูู ุตูุฉ ูุนููุฉ ููุท ุ ูุง ูุชู ูุณุฎ ุงูุฌุฏุงูู ุงููุคูุชุฉ. </font><font style="vertical-align: inherit;">ูููู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฐุง ููุบู ุงูุญุงุฌุฉ ุฅูู ูุถุงุนูุฉ ูุชุงุจุฉ ุงูุจูุงูุงุช</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ูููุฉ + WAL ุ ูุฐุง ูุฅู INSERT / UPDATE / DELETE ุฃุณุฑุน ุจูุซูุฑ ููู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููู ูุธุฑูุง ูุฃู ุงูุฌุฏูู ุงููุคูุช ูุง ูุฒุงู ุฌุฏูููุง "ุดุจู ุนุงุฏู" ุ ููุง ูููู ุฅูุดุงุคู ุนูู ุงููุณุฎุฉ ุงููุชูุงุซูุฉ ุฃูุถูุง. </font><font style="vertical-align: inherit;">ุนูู ุงูุฃูู ูู ุงูููุช ุงูุญุงูู ุ ุนูู ุงูุฑุบู ูู ุฃู ุงูุชุตุญูุญ ุงููุทุงุจู ูุงู ููุฌูุฏูุง ููุชุฑุฉ ุทูููุฉ.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.2. </font><font style="vertical-align: inherit;">ุฌุฏุงูู ุบูุฑ ูุณุฌูุฉ (ุฌุฏูู ุบูุฑ ูุณุฌู)</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููู ูุงุฐุง ุชูุนู ุ ุนูู ุณุจูู ุงููุซุงู ุ ุฅุฐุง ูุงู ูุฏูู ููุน ูู ุนูููุฉ ETL ุงููุฑููุฉ ุงูุชู ูุง ูููู ุชูููุฐูุง ูู ูุนุงููุฉ ูุงุญุฏุฉ ุ ููุง ูุฒุงู ูุฏูู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pgbouncer ูู ูุถุน ุงููุนุงููุฉ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ .. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃู ุฃู ุชุฏูู ุงูุจูุงูุงุช ูุจูุฑ ุฌุฏูุง ุจุญูุซ ูุง ููุฌุฏ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุทุงู ุชุฑุฏุฏู ูุงู ููู ุงุชุตุงู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช (ูุฑุงุกุฉ ุ ุนูููุฉ ูุงุญุฏุฉ ุนูู ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ)ุ .. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃู ุฌุฒุก ูู ุงูุนูููุงุช ูุฐูุจ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุดูู ุบูุฑ ูุชุฒุงูู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ุงุชุตุงูุงุช ูุฎุชููุฉุ .. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุงู ุฎูุงุฑ ูุงุญุฏ ููุท - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅูุดุงุก ุฌุฏูู ุบูุฑ ูุคูุช ุจุดูู ูุคูุช</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ุงูุชูุฑูุฉ ุ ูุนู. </font><font style="vertical-align: inherit;">ุจูุนูู ุขุฎุฑ:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅูุดุงุก ุฌุฏุงูู "ูู" ุจุฃุณูุงุก ุนุดูุงุฆูุฉ ุฅูู ุฃูุตู ุญุฏ ุญุชู ูุง ุชุชูุงุทุน ูุน ุฃู ุดุฎุต</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุณุชุฎุฑุงุฌ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุณูุจ ุงูุจูุงูุงุช ูู ูุตุฏุฑ ุฎุงุฑุฌู ูููุง</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุญููู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ูุญููุฉ ููุนุจุฃุฉ ูู ุญููู ุฑุจุท ุฑุฆูุณูุฉ</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุญููู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุณูุจ ุงูุจูุงูุงุช ุงูููุงุฆูุฉ ูู ุงูุฌุฏุงูู ุงููุฏู</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุฐู ุฌุฏุงูู "ุจูุฏู"</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุงูุขู - ุฐุจุงุจุฉ ูู ุงููุฑูู. </font><font style="vertical-align: inherit;">ูู ุงููุงูุน ุ ุชุชู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฌููุน ุนูููุงุช ุงููุชุงุจุฉ ูู PostgreSQL ูุฑุชูู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃููุงู ูู WAL</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ุซู ูู ูุต ุงูุฌุฏูู / ุงูููุฑุณ. </font><font style="vertical-align: inherit;">ููุชู ูู ูุฐุง ูุฏุนู ACID ูุงูุฑุคูุฉ ุงูุตุญูุญุฉ ููุจูุงูุงุช ุจูู </font></font><code>COMMIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุชุฏุงุฎูุฉ ู </font></font><code>ROLLBACK</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุนุงููุงุช ุงููุชุฏุงุฎูุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููููุง ูุง ูุญุชุงุฌ ูุฐุง! </font><font style="vertical-align: inherit;">ูุฏููุง ุงูุนูููุฉ ุจุฑูุชูุง </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃู ูุฌุญุช ุ ุฃู ูุง</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ูุง ููู ุนุฏุฏ ุงููุนุงููุงุช ุงููุณูุทุฉ ุงูุชู ูุญุชูู ุนูููุง - ูุญู ูุณูุง ููุชููู "ุจููุงุตูุฉ ุงูุนูููุฉ ูู ุงููุณุท" ุ ุฎุงุตุฉ ุนูุฏูุง ูุง ูููู ูุงุถุญูุง ุฃูู ูุงูุช. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุฐุง ุ ูุฏู ูุทูุฑู PostgreSQL ุงูุฅุตุฏุงุฑ 9.1 ูุซู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฌุฏุงูู ุบูุฑ ุงููุณุฌูุฉ (UNLOGGED)</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<blockquote>      . ,    ,      (.  29),      <b>   </b>. ,     ;         <b> </b>.  ,    <b> </b>   .  ,    ,   .</blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุงุฎุชุตุงุฑ ุ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณูููู ุฃุณุฑุน ุจูุซูุฑ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ูููู ุฅุฐุง "ุชุนุทู" ุฎุงุฏู ูุงุนุฏุฉ ุงูุจูุงูุงุช - ุณูููู ุบูุฑ ุณุงุฑ. </font><font style="vertical-align: inherit;">ูููู ูู ูุฑุฉ ูุญุฏุซ ูุฐุง ุ ููู ุชุนุฑู ุนูููุฉ ETL ุงูุฎุงุตุฉ ุจู ููููุฉ ุชุนุฏูููุง ุจุดูู ุตุญูุญ "ูู ุงููุณุท" ุจุนุฏ "ุชูุดูุท" ูุงุนุฏุฉ ุงูุจูุงูุงุชุ .. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅุฐุง ูู ููู ุงูุฃูุฑ ูุฐูู ุ ูุงูุญุงูุฉ ุฃุนูุงู ูุดุงุจูุฉ ูุญุงูุชู - ุงุณุชุฎุฏู </font></font><code>UNLOGGED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูููู ูุง ุชูู ุฃุจุฏูุง </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุชุถููู ูุฐู ุงูุณูุฉ ุนูู ุงูุฌุฏุงูู ุงูุญููููุฉ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุจูุงูุงุช ุงูุชู ุฃูุช ุนุฒูุฒู.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.3. </font><font style="vertical-align: inherit;">ูู ุงูุงูุชุฒุงู {ุญุฐู ุงูุตููู | </font><font style="vertical-align: inherit;">ูุทุฑุฉ}</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุณูุญ ูุฐุง ุงูุชุตููู ุนูุฏ ุฅูุดุงุก ุฌุฏูู ูุชุนููู ุงูุณููู ุงูุชููุงุฆู ุนูุฏ ุงูุชูุงุก ุงููุนุงููุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุญูู </font><font style="vertical-align: inherit;">ูุชุจุช ุจุงููุนู ุฃุนูุงู ุ ูุฅูู ูููุฏ </font><font style="vertical-align: inherit;">ุ ูููู </font><font style="vertical-align: inherit;">ุงููุถุน ุฃูุซุฑ ุฅุซุงุฑุฉ ููุงูุชูุงู - ููุง ูุชู ุฅูุดุงุคู </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">
ูุธุฑูุง ูุฃู ุงูุจููุฉ ุงูุชุญุชูุฉ ุงููุงููุฉ ูุชุฎุฒูู ุงููุตู ุงูุชุนุฑููู ููุฌุฏูู ุงููุคูุช ูู ููุณูุง ุชูุงููุง ูุซู ุงููุนุชุงุฏุฉ ุ ูุฅู </font><b><font style="vertical-align: inherit;">ุงูุฅูุดุงุก ุงููุณุชูุฑ ูุญุฐู ุงูุฌุฏุงูู ุงููุคูุชุฉ ูุคุฏู ุฅูู "ุชูุฑู" ููู ูุฌุฏุงูู ุงููุธุงู</font></b><font style="vertical-align: inherit;"> pg_class ุ pg_attribute ุ pg_attrdef ุ pg_depend ุ ... </font><font style="vertical-align: inherit;">
ุงูุขู ุชุฎูู ุฃู ูุฏูู ุนุงูู ุนูู ุงูุฎุท ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช ุ ุงูุชู ุชูุชุญ ูู ุซุงููุฉ ูุนุงููุฉ ุฌุฏูุฏุฉ ุ ูุฅูุดุงุก ูุชุนุจุฆุฉ ููุนุงูุฌุฉ ูุญุฐู ุงูุฌุฏูู ุงููุคูุช ... ุณูู ุชุชุฑุงูู ุงูููุงูุฉ ูู ุฌุฏุงูู ุงููุธุงู ุจุดูู ุฒุงุฆุฏ ุ ููุฐุง ูู ูุฑุงูู ุฅุถุงููุฉ ุฃุซูุงุก ูู ุนูููุฉ.</font></font><code>ON COMMIT <b>DROP</b></code><font style="vertical-align: inherit;"></font><code>DROP TABLE</code><font style="vertical-align: inherit;"></font><code>ON COMMIT <b>DELETE ROWS</b></code><font style="vertical-align: inherit;"></font><code>TRUNCATE TABLE</code><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุดูู ุนุงู ุ ูุง ุชูุนู! </font><font style="vertical-align: inherit;">ูู ูุฐู ุงูุญุงูุฉ ุ ูููู </font></font><code>CREATE TEMPORARY TABLE x ... ON COMMIT DELETE ROWS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฎุฑุงุฌูุง ูู ุฏูุฑุฉ ุงููุนุงููุฉ </font><font style="vertical-align: inherit;">ุฃูุซุฑ ูุงุนููุฉ ุจูุซูุฑ </font><font style="vertical-align: inherit;">- ุซู ุจุญููู ุจุฏุงูุฉ ูู ูุนุงููุฉ ุฌุฏูุฏุฉ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณูููู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฌุฏูู </font><b><font style="vertical-align: inherit;">ููุฌูุฏูุง</font></b><font style="vertical-align: inherit;"> ุจุงููุนู </font><font style="vertical-align: inherit;">(ุญูุธ ุงูููุงููุฉ </font></font><code>CREATE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) ุ ููููู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณูููู ูุงุฑุบูุง</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ูุฐูู ุจูุถู </font></font><code>TRUNCATE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(ุญูุธูุง ุงูููุงููุฉ ุฃูุถูุง) ูู ููุงูุฉ ุงููุนุงููุฉ ุงูุณุงุจูุฉ.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.4. </font><font style="vertical-align: inherit;">ูุซู ... ุจูุง ูู ุฐูู ...</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฐูุฑุช ูู ุงูุจุฏุงูุฉ ุฃู ุฅุญุฏู ุญุงูุงุช ุงูุงุณุชุฎุฏุงู ุงููููุฐุฌู ููุฌุฏุงูู ุงููุคูุชุฉ ูู ุฃููุงุน ูุฎุชููุฉ ูู ุนูููุงุช ุงูุงุณุชูุฑุงุฏ - ููููู ุงููุทูุฑ ุจุชุนุจุฆ ูุตู ููุตู ูุงุฆูุฉ ุญููู ุงูุฌุฏูู ุงููุฏู ูู ุงูุฅุนูุงู ุงููุคูุช ูู ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููู ุงููุณู ูู ูุญุฑู ุงูุชูุฏู! </font><font style="vertical-align: inherit;">ูุฐูู ุ </font><font style="vertical-align: inherit;">ูููู ุฃู ูููู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅูุดุงุก ุฌุฏูู ุฌุฏูุฏ "ุนูู ุงููููุฐุฌ"</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฃุณูู ุจูุซูุฑ:</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TEMPORARY</span> <span class="hljs-keyword">TABLE</span> import_table(
  <span class="hljs-keyword">LIKE</span> target_table<font></font>
);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุธุฑูุง ูุฃูู ููููู ุจุนุฏ ุฐูู ุฅุถุงูุฉ ุงููุซูุฑ ูู ุงูุจูุงูุงุช ุฅูู ูุฐุง ุงูุฌุฏูู ุ ููู ุชููู ุนูููุงุช ุงูุจุญุซ ุนููู ุณุฑูุนุฉ ุฃุจุฏูุง. ูููู ููุงู ุญู ุชูููุฏู ุถุฏ ูุฐุง - ููุงุฑุณ! ููุนู ุ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู ุฃู ูุญุชูู ุงูุฌุฏูู ุงููุคูุช ุฃูุถูุง ุนูู ููุงุฑุณ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุธุฑูุง ูุฃูู ุบุงูุจูุง ูุง ุชุชุฒุงูู ุงููุคุดุฑุงุช ุงููุทููุจุฉ ูุน ูุคุดุฑุงุช ุงูุฌุฏูู ุงููุฏู ุ ููููู ุจุจุณุงุทุฉ ุงููุชุงุจุฉ </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">
ุฅุฐุง ููุช ุจุญุงุฌุฉ ุฃูุถูุง ุฅูู </font><font style="vertical-align: inherit;">-ุงูููู (ุนูู ุณุจูู ุงููุซุงู ุ ูููุก ููู ุงูููุชุงุญ ุงูุฃุณุงุณู) ุ ููููู ุงุณุชุฎุฏุงููุง </font><font style="vertical-align: inherit;">. ุญุณููุง ุ ุฃู ุจุจุณุงุทุฉ - </font><font style="vertical-align: inherit;">- ุณุชูุณุฎ ุงูุฅุนุฏุงุฏุงุช ุงูุงูุชุฑุงุถูุฉ ูุงูููุงุฑุณ ูุงููููุฏ ... </font><font style="vertical-align: inherit;">
ูููู ููุง ุชุญุชุงุฌ ุฅูู ููู ุฃูู ุฅุฐุง ููุช ุจุฅูุดุงุก </font><b><font style="vertical-align: inherit;">ุฌุฏูู ุงุณุชูุฑุงุฏ ุนูู ุงูููุฑ ุจุงุณุชุฎุฏุงู ุงูููุงุฑุณ ุ ูุณูุชู ููุก ุงูุจูุงูุงุช ููุชุฑุฉ ุฃุทูู</font></b></font><code>LIKE target_table <b>INCLUDING INDEXES</b></code><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><code>DEFAULT</code><font style="vertical-align: inherit;"></font><code>LIKE target_table <b>INCLUDING DEFAULTS</b></code><font style="vertical-align: inherit;"></font><code>LIKE target_table <b>INCLUDING ALL</b></code><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุง ูู ููุช ุจููุก ูู ุดูุก ุฃููุงู ุ ุซู ูู ุจุชุฏููุฑ ุงููุคุดุฑุงุช - ุงูุธุฑ ููุซุงู ุนูู ููููุฉ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงู pg_dump</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจุฐูู </font><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงููู ูู ุงููู ุ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RTFM</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> !</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. ููู ุชูุชุจุ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุณุฃููู ุจุจุณุงุทุฉ - ุงุณุชุฎุฏู </font></font><code><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">COPY</a></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชูุงุฑ ุจุฏูุงู ูู "ุญุฒู" </font></font><code>INSERT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุณุงุฑุน ูู ุจุนุถ ุงูุฃุญูุงู</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ููููู ุญุชู ูุจุงุดุฑุฉ ูู ููู ุชู ุฅูุดุงุคู ูุณุจููุง.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. ููููุฉ ุงูุชุนุงูู ูุนูุงุ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐุง ุ ุฏุน ุงูููุฏูุฉ ุชุจุฏู ูุซู ูุฐุง:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฏูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุฎุงุตุฉ ุจู ููุญุฉ ูุน ุจูุงูุงุช ุงูุนููู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณุฌูุงุช 1M</font></font></b></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ููู ูุฑุณู ูู ุงูุนููู </font><b><font style="vertical-align: inherit;">"ุตูุฑุฉ" ูุงููุฉ</font></b><font style="vertical-align: inherit;"> ุฌุฏูุฏุฉ</font></font><b><font style="vertical-align: inherit;"></font></b></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุงูุชุฌุฑุจุฉ ุ ุชุนูู ุฃูู </font><b><font style="vertical-align: inherit;">ูุง ูุชุบูุฑ ุฃูุซุฑ ูู 10 ุขูุงู ุณุฌู</font></b><font style="vertical-align: inherit;"> ูู ููุช ูุขุฎุฑ</font></font><b><font style="vertical-align: inherit;"></font></b></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุซุงู ููุงุณููู ุนูู ูุซู ูุฐุง ุงููููู ูู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงุนุฏุฉ ุจูุงูุงุช KLADR</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - ููุงู ุงููุซูุฑ ูู ุงูุนูุงููู ุ ูููู ูู ูู ุชุญููู ุฃุณุจูุนู ููุชุบููุฑุงุช (ุฅุนุงุฏุฉ ุชุณููุฉ ุงููุณุชูุทูุงุช ุ ุงุชุญุงุฏุงุช ุงูุดูุงุฑุน ุ ุธููุฑ ููุงุฒู ุฌุฏูุฏุฉ) ููุงู ุนุฏุฏ ูููู ุฌุฏูุง ุญุชู ุนูู ุงูุตุนูุฏ ุงููุทูู.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.1. </font><font style="vertical-align: inherit;">ุฎูุงุฑุฒููุฉ ุงูุชุฒุงูู ุงููุงูู</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุฃุฌู ุงูุจุณุงุทุฉ ุ ุฏุนูุง ูููู ุฃูู ูุง ุชุญุชุงุฌ ุญุชู ุฅูู ุฅุนุงุฏุฉ ููููุฉ ุงูุจูุงูุงุช - ูุง ุนููู ุณูู ุฅุญุถุงุฑ ุงูุฌุฏูู ูู ุงูุดูู ุงูุตุญูุญ ุ ููู:</font></font><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุฐู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ูุง ูู ูุนุฏ</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุญุฏูุซ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ูุง ูุงู ุจุงููุนู ุ ูุชุญุชุงุฌ ุฅูู ุงูุชุญุฏูุซ</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฏุฑุงุฌ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ูุง ูู ููู</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุงุฐุง ูุณุชุญู ูุฐุง ุงูุฃูุฑ ุงูููุงู ุจุนูููุงุชุ </font><font style="vertical-align: inherit;">ูุฃู ูุฐู ูู ุงูุทุฑููุฉ ุงูุชู ูููู ุจูุง ุญุฌู ุงูุฌุฏูู ุฅูู ุงูุญุฏ ุงูุฃุฏูู ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุฐูุฑ MVCC!</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ).</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุฐู ูู ุงูุชูููุช ุงูุตููู</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุง ุ ุจุงูุทุจุน ุ ููููู ุงูููุงู ุจุนูููุชูู ููุท:</font></font><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุฐู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><code>DELETE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) ุนูู ุงูุฅุทูุงู</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุตู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ุดูุก ูู ุตูุฑุฉ ุฌุฏูุฏุฉ</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููู ูู ููุณ ุงูููุช ุ ูุจูุถู MVCC ุ ุณูุฒุฏุงุฏ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุฌู ุงูุทุงููุฉ ูุฑุชูู ุจุงูุถุจุท</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ! </font><font style="vertical-align: inherit;">ุงุญุตู ุนูู + 1 ููููู ุตูุฑุฉ ูู ุงูุฌุฏูู ุจุณุจุจ ุชุญุฏูุซ 10K - ูุงุฆุถ ููุบุงูุฉ ...</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุทุงุน ุงูุชูููุช ุงูุตููู</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุนุฑู ูุทูุฑ ุฃูุซุฑ ุฎุจุฑุฉ ุฃูู ูููู ุชูุธูู ุงูููุญุฉ ุจุฃููููุง ุจุซูู ุจุฎุณ:</font></font><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุณุญ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><code>TRUNCATE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) ุงูุฌุฏูู ุจุฃูููู</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุตู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ุดูุก ูู ุตูุฑุฉ ุฌุฏูุฏุฉ</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุทุฑููุฉ ูุนุงูุฉ ุ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฃุญูุงููุง ุชููู ูุงุจูุฉ ููุชุทุจูู ุชูุงููุง</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ูููู ููุงู ูุดููุฉ ... ุณูููุฃ ููููู ุณุฌู ุ ูุฐูู ูุง ูููููุง ุฃู ูุชุฑู ุงูุฌุฏูู ูุงุฑุบูุง ุทูุงู ูุฐุง ุงูููุช (ููุง ุณูุญุฏุซ ุฏูู ุงูุงูุชูุงู ูู ูุนุงููุฉ ูุงุญุฏุฉ). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุง ูุนูู:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุจุฏุฃ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุตููุฉ ุทูููุฉ</font></font></b></li>
<li><code>TRUNCATE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฑุถ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AccessExclusive</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -Lock</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู ุจุงูุฅุฏุฑุงุฌ ููุชุฑุฉ ุทูููุฉ ุ ููุง ูููู ูุฃู ุดุฎุต ุขุฎุฑ ูู ูุฐุง ุงูููุช </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุชู</font></font><code>SELECT</code></b></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุดูุก ุณูุก ...</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฌุฏูู ุชุบููุฑ ... ุฅุนุงุฏุฉ ุชุณููุฉ ... / ุฌุฏูู ุฅุณูุงุท ...</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฎูุงุฑ ุ ุงููุฃ ูู ุดูุก ูู ุฌุฏูู ุฌุฏูุฏ ูููุตู ุ ุซู ุฃุนุฏ ุชุณููุชู ุฅูู ุงูุฌุฏูู ุงููุฏูู. </font><font style="vertical-align: inherit;">ุฒูุฌุงู ูู ุงูุฃุดูุงุก ุงูุตุบูุฑุฉ ุงูุณูุฆุฉ:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุตุฑููุง</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฃูุถูุง </font><font style="vertical-align: inherit;">ุ ูุฅู ูุงู ุฃูู ุจูุซูุฑ ูู ุงูููุช</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชู ุฅุนุงุฏุฉ ุชุนููู ุฌููุน ุฎุทุท / ุฅุญุตุงุฆูุงุช ุงูุงุณุชุนูุงู ูู ูุฐุง ุงูุฌุฏูู ุ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููู ุงูุถุฑูุฑู ููุงุฏุฉ ANALYZE</font></font></a></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณุฑ ุฌููุน ุงูููุงุชูุญ ุงูุฎุงุฑุฌูุฉ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (FK) ุนูู ุงูุทุงููุฉ</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุงู ููุงู ุชุตุญูุญ WIP ูู Simon Riggs ุ ุงูุฐู ุงูุชุฑุญ ุฅุฌุฑุงุก </font></font><code>ALTER</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูููุฉ ูุงุณุชุจุฏุงู ูุต ุงูุฌุฏูู ุนูู ูุณุชูู ุงูููู ุ ุฏูู ููุณ ุงูุฅุญุตุงุฆูุงุช ู FK ุ ูููู ูู ูุฌูุน ุงููุตุงุจ ุงููุงูููู.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุฐู ุ ุชุญุฏูุซ ุ ุฅุฏุฑุงุฌ</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐุง ุ ูุชููู ุนูุฏ ุฅุตุฏุงุฑ ุบูุฑ ูุญุฌูุจ ูุซูุงุซ ุนูููุงุช. </font><font style="vertical-align: inherit;">ูุง ููุฑุจ ูู ุซูุงุซุฉ ... ููู ููุนู ุฐูู ุจุดูู ุฃูุซุฑ ูุนุงููุฉุ</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-comment">--     ,     "" </span>
<span class="hljs-keyword">BEGIN</span>;<font></font>
<font></font>
<span class="hljs-comment">--      </span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TEMPORARY</span> <span class="hljs-keyword">TABLE</span> tmp(
  <span class="hljs-keyword">LIKE</span> dst <span class="hljs-keyword">INCLUDING</span> <span class="hljs-keyword">INDEXES</span> <span class="hljs-comment">--    ,   </span>
) <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COMMIT</span> <span class="hljs-keyword">DROP</span>; <span class="hljs-comment">--       </span><font></font>
<font></font>
<span class="hljs-comment">-- -     COPY</span><font></font>
COPY tmp FROM STDIN;<font></font>
<span class="hljs-comment">-- ...</span>
<span class="hljs-comment">-- \.</span><font></font>
<font></font>
<span class="hljs-comment">--  </span>
<span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span><font></font>
  dst D<font></font>
<span class="hljs-keyword">USING</span><font></font>
  dst X<font></font>
<span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">JOIN</span><font></font>
  tmp Y<font></font>
    <span class="hljs-keyword">USING</span>(pk1, pk2) <span class="hljs-comment">--   </span>
<span class="hljs-keyword">WHERE</span>
  (D.pk1, D.pk2) = (X.pk1, X.pk2) <span class="hljs-keyword">AND</span>
  Y <span class="hljs-keyword">IS</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">DISTINCT</span> <span class="hljs-keyword">FROM</span> <span class="hljs-literal">NULL</span>; <span class="hljs-comment">-- ""</span><font></font>
<font></font>
<span class="hljs-comment">--  </span>
<span class="hljs-keyword">UPDATE</span><font></font>
  dst D<font></font>
<span class="hljs-keyword">SET</span><font></font>
  (f1, f2, f3) = (T.f1, T.f2, T.f3)<font></font>
<span class="hljs-keyword">FROM</span><font></font>
  tmp T<font></font>
<span class="hljs-keyword">WHERE</span>
  (D.pk1, D.pk2) = (T.pk1, T.pk2) <span class="hljs-keyword">AND</span>
  (D.f1, D.f2, D.f3) <span class="hljs-keyword">IS</span> <span class="hljs-keyword">DISTINCT</span> <span class="hljs-keyword">FROM</span> (T.f1, T.f2, T.f3); <span class="hljs-comment">--   </span><font></font>
<font></font>
<span class="hljs-comment">--  </span>
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span><font></font>
  dst<font></font>
<span class="hljs-keyword">SELECT</span><font></font>
  T.*<font></font>
<span class="hljs-keyword">FROM</span><font></font>
  tmp T<font></font>
<span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">JOIN</span><font></font>
  dst D<font></font>
    <span class="hljs-keyword">USING</span>(pk1, pk2)
<span class="hljs-keyword">WHERE</span>
  D <span class="hljs-keyword">IS</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">DISTINCT</span> <span class="hljs-keyword">FROM</span> <span class="hljs-literal">NULL</span>;<font></font>
<font></font>
<span class="hljs-keyword">COMMIT</span>;
</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.2. </font><font style="vertical-align: inherit;">ุงุณุชูุฑุงุฏ ูุง ุจุนุฏ ุงููุนุงูุฌุฉ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ููุณ KLADRE ุ ูุฌุจ ุชุดุบูู ุฌููุน ุงูุณุฌูุงุช ุงูุชู ุชู ุชุบููุฑูุง ุจุดูู ุฅุถุงูู ูู ุฎูุงู ุงููุนุงูุฌุฉ ุงููุงุญูุฉ - ุชุทุจูุน ุงููููุงุช ุงูุฑุฆูุณูุฉ ูุชุณููุท ุงูุถูุก ุนูููุง ูุฅุญุถุงุฑูุง ุฅูู ุงูููุงูู ุงูุถุฑูุฑูุฉ. </font><font style="vertical-align: inherit;">ูููู ููู ุชุนุฑู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง ุงูุฐู ุชุบูุฑ ุจุงูุถุจุท</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ุฏูู ุชุนููุฏ ุฑูุฒ ุงููุฒุงููุฉ ุ ุจุดูู ูุซุงูู ุฏูู ููุณู ุนูู ุงูุฅุทูุงูุ </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅุฐุง ูุงูุช ุงูุนูููุฉ ุงูุฎุงุตุฉ ุจู ููุท ูุฏููุง ุญู ุงููุตูู ูููุชุงุจุฉ ูู ููุช ุงููุฒุงููุฉ ุ ูููููู ุงุณุชุฎุฏุงู ูุดุบู ูููู ุจุฌูุน ุฌููุน ุงูุชุบููุฑุงุช ููุง:</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-comment">--  </span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> kladr(...);
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> kladr_house(...);<font></font>
<font></font>
<span class="hljs-comment">--    </span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> kladr$<span class="hljs-keyword">log</span>(<font></font>
  ro kladr, <span class="hljs-comment">--      /</span><font></font>
  rn kladr<font></font>
);<font></font>
<font></font>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> kladr_house$<span class="hljs-keyword">log</span>(<font></font>
  ro kladr_house,<font></font>
  rn kladr_house<font></font>
);<font></font>
<font></font>
<span class="hljs-comment">--    </span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">OR</span> <span class="hljs-keyword">REPLACE</span> <span class="hljs-keyword">FUNCTION</span> diff$<span class="hljs-keyword">log</span>() <span class="hljs-keyword">RETURNS</span> <span class="hljs-keyword">trigger</span> <span class="hljs-keyword">AS</span> $$
<span class="hljs-keyword">DECLARE</span>
  dst <span class="hljs-built_in">varchar</span> = TG_TABLE_NAME || <span class="hljs-string">'$log'</span>;<font></font>
  stmt text = '';<font></font>
<span class="hljs-keyword">BEGIN</span>
  <span class="hljs-comment">--      </span>
  <span class="hljs-keyword">IF</span> TG_OP = <span class="hljs-string">'UPDATE'</span> <span class="hljs-keyword">THEN</span>
    <span class="hljs-keyword">IF</span> <span class="hljs-keyword">NEW</span> <span class="hljs-keyword">IS</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">DISTINCT</span> <span class="hljs-keyword">FROM</span> <span class="hljs-keyword">OLD</span> <span class="hljs-keyword">THEN</span>
      <span class="hljs-keyword">RETURN</span> <span class="hljs-keyword">NEW</span>;
    <span class="hljs-keyword">END</span> <span class="hljs-keyword">IF</span>;
  <span class="hljs-keyword">END</span> <span class="hljs-keyword">IF</span>;
  <span class="hljs-comment">--   </span>
  stmt = '<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> <span class="hljs-string">' || dst::text || '</span>(ro,rn)<span class="hljs-keyword">VALUES</span>(<span class="hljs-string">';
  CASE TG_OP
    WHEN '</span><span class="hljs-keyword">INSERT</span><span class="hljs-string">' THEN
      EXECUTE stmt || '</span><span class="hljs-literal">NULL</span>,$<span class="hljs-number">1</span>)<span class="hljs-string">' USING NEW;
    WHEN '</span><span class="hljs-keyword">UPDATE</span><span class="hljs-string">' THEN
      EXECUTE stmt || '</span>$<span class="hljs-number">1</span>,$<span class="hljs-number">2</span>)<span class="hljs-string">' USING OLD, NEW;
    WHEN '</span><span class="hljs-keyword">DELETE</span><span class="hljs-string">' THEN
      EXECUTE stmt || '</span>$<span class="hljs-number">1</span>,<span class="hljs-literal">NULL</span>)<span class="hljs-string">' USING OLD;
  END CASE;
  RETURN NEW;
END;
$$ LANGUAGE plpgsql;
</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุขู ูููููุง ูุฑุถ ูุดุบูุงุช (ุฃู ุชูููู ูู ุฎูุงู </font></font><code>ALTER TABLE ... ENABLE TRIGGER ...</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font><font style="vertical-align: inherit;">ูุจู ุจุฏุก ุงููุฒุงููุฉ </font><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TRIGGER</span> <span class="hljs-keyword">log</span>
  <span class="hljs-keyword">AFTER</span> <span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">OR</span> <span class="hljs-keyword">UPDATE</span> <span class="hljs-keyword">OR</span> <span class="hljs-keyword">DELETE</span>
  <span class="hljs-keyword">ON</span> kladr
    <span class="hljs-keyword">FOR</span> <span class="hljs-keyword">EACH</span> <span class="hljs-keyword">ROW</span>
      <span class="hljs-keyword">EXECUTE</span> <span class="hljs-keyword">PROCEDURE</span> diff$<span class="hljs-keyword">log</span>();<font></font>
<font></font>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TRIGGER</span> <span class="hljs-keyword">log</span>
  <span class="hljs-keyword">AFTER</span> <span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">OR</span> <span class="hljs-keyword">UPDATE</span> <span class="hljs-keyword">OR</span> <span class="hljs-keyword">DELETE</span>
  <span class="hljs-keyword">ON</span> kladr_house
    <span class="hljs-keyword">FOR</span> <span class="hljs-keyword">EACH</span> <span class="hljs-keyword">ROW</span>
      <span class="hljs-keyword">EXECUTE</span> <span class="hljs-keyword">PROCEDURE</span> diff$<span class="hljs-keyword">log</span>();
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุจุนุฏ ุฐูู ุจูุฏูุก ูู ุฌุฏุงูู ุงูุณุฌูุงุช ุ ูููู ุจุงุณุชุฎุฑุงุฌ ุฌููุน ุงูุชุบููุฑุงุช ุงูุชู ูุญุชุงุฌูุง ูุชุดุบูููุง ูู ุฎูุงู ูุนุงูุฌุงุช ุฅุถุงููุฉ.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.3. </font><font style="vertical-align: inherit;">ุงุณุชูุฑุงุฏ ุงููุฌููุนุงุช ุฐุงุช ุงูุตูุฉ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃุนูุงู ุ ูุธุฑูุง ูู ุงูุญุงูุงุช ุงูุชู ุชุชุฒุงูู ูููุง ููุงูู ุจูุงูุงุช ุงููุตุฏุฑ ูุงููุณุชูุจู. </font><font style="vertical-align: inherit;">ูููู ูุงุฐุง ูู ูุงู ููุชูุฒูู ูู ูุธุงู ุฎุงุฑุฌู ุชูุณูู ูุฎุชูู ุนู ูููู ุงูุชุฎุฒูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุฎุงุตุฉ ุจูุงุ </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฎุฐ ูุณุงุญุฉ ุงูุชุฎุฒูู ููุนููุงุก ูุญุณุงุจุงุชูู ููุซุงู ุ ุงูุฎูุงุฑ ุงูููุงุณููู ูุชุนุฏุฏ ุงูุฃุทุฑุงู:</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-keyword">client</span>(<font></font>
  client_id<font></font>
    <span class="hljs-built_in">serial</span>
      PRIMARY <span class="hljs-keyword">KEY</span><font></font>
, inn<font></font>
    <span class="hljs-built_in">varchar</span>
      <span class="hljs-keyword">UNIQUE</span>
, <span class="hljs-keyword">name</span>
    <span class="hljs-built_in">varchar</span><font></font>
);<font></font>
<font></font>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> invoice(<font></font>
  invoice_id<font></font>
    <span class="hljs-built_in">serial</span>
      PRIMARY <span class="hljs-keyword">KEY</span><font></font>
, client_id<font></font>
    <span class="hljs-built_in">integer</span>
      <span class="hljs-keyword">REFERENCES</span> <span class="hljs-keyword">client</span>(client_id)<font></font>
, <span class="hljs-built_in">number</span>
    <span class="hljs-built_in">varchar</span><font></font>
, dt<font></font>
    <span class="hljs-built_in">date</span>
, <span class="hljs-keyword">sum</span>
    <span class="hljs-built_in">numeric</span>(<span class="hljs-number">32</span>,<span class="hljs-number">2</span>)<font></font>
);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููู ุงูุชูุฑูุบ ูู ูุตุฏุฑ ุฎุงุฑุฌู ูุฃุชู ุฅูููุง ูู ุดูู "ุงููู ูู ูุงุญุฏ":</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TEMPORARY</span> <span class="hljs-keyword">TABLE</span> invoice_import(<font></font>
  client_inn<font></font>
    <span class="hljs-built_in">varchar</span><font></font>
, client_name<font></font>
    <span class="hljs-built_in">varchar</span><font></font>
, invoice_number<font></font>
    <span class="hljs-built_in">varchar</span><font></font>
, invoice_dt<font></font>
    <span class="hljs-built_in">date</span><font></font>
, invoice_sum<font></font>
    <span class="hljs-built_in">numeric</span>(<span class="hljs-number">32</span>,<span class="hljs-number">2</span>)<font></font>
);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุงููุงุถุญ ุฃูู ูููู ุชูุฑุงุฑ ุจูุงูุงุช ุงูุนููุงุก ุจูุฐู ุงูุทุฑููุฉ ุ ูุงูุณุฌู ุงูุฑุฆูุณู ูู "ุงูุญุณุงุจ":</font></font><br>
<br>
<pre><code class="plaintext hljs">0123456789;;A-01;2020-03-16;1000.00<font></font>
9876543210;;A-02;2020-03-16;666.00<font></font>
0123456789;;B-03;2020-03-16;9999.00<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุงููุณุจุฉ ูููููุฐุฌ ุ ูุง ุนููู ุณูู ุฅุฏุฎุงู ุจูุงูุงุช ุงูุงุฎุชุจุงุฑ ุงูุฎุงุตุฉ ุจูุง ุ ูููู ุชุฐูุฑ - </font></font><code>COPY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจููุงุกุฉ ุฃูุจุฑ!</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> invoice_import
<span class="hljs-keyword">VALUES</span>
  (<span class="hljs-string">'0123456789'</span>, <span class="hljs-string">''</span>, <span class="hljs-string">'A-01'</span>, <span class="hljs-string">'2020-03-16'</span>, <span class="hljs-number">1000.00</span>)<font></font>
, (<span class="hljs-string">'9876543210'</span>, <span class="hljs-string">''</span>, <span class="hljs-string">'A-02'</span>, <span class="hljs-string">'2020-03-16'</span>, <span class="hljs-number">666.00</span>)<font></font>
, (<span class="hljs-string">'0123456789'</span>, <span class="hljs-string">''</span>, <span class="hljs-string">'B-03'</span>, <span class="hljs-string">'2020-03-16'</span>, <span class="hljs-number">9999.00</span>);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃููุงู ุ ูุฎุชุงุฑ ุชูู "ุงูุชุฎููุถุงุช" ุงูุชู ุชุดูุฑ ุฅูููุง "ููุงุฆุนูุง". </font><font style="vertical-align: inherit;">ูู ุญุงูุชูุง ุ ุชุดูุฑ ุงูุญุณุงุจุงุช ุฅูู ุงูุนููุงุก:</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TEMPORARY</span> <span class="hljs-keyword">TABLE</span> client_import <span class="hljs-keyword">AS</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">DISTINCT</span> <span class="hljs-keyword">ON</span>(client_inn)
<span class="hljs-comment">--   SELECT DISTINCT,    </span><font></font>
  client_inn inn<font></font>
, client_name <span class="hljs-string">"name"</span>
<span class="hljs-keyword">FROM</span>
  invoice_import;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฑุจุท ุงูุญุณุงุจุงุช ุจุงูุฃุฑูุงู ุงูุชุนุฑูููุฉ ููุนููุงุก ุจุดูู ุตุญูุญ ุ ูุญุชุงุฌ ุฃููุงู ุฅูู ุงูุชุดุงู ุฃู ุฅูุดุงุก ูุฐู ุงููุนุฑููุงุช. </font><font style="vertical-align: inherit;">ุฃุถู ุงูุญููู ููู:</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> invoice_import <span class="hljs-keyword">ADD</span> <span class="hljs-keyword">COLUMN</span> client_id <span class="hljs-built_in">integer</span>;
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> client_import <span class="hljs-keyword">ADD</span> <span class="hljs-keyword">COLUMN</span> client_id <span class="hljs-built_in">integer</span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุณูุณุชุฎุฏู ุทุฑููุฉ ูุฒุงููุฉ ุงูุฌุฏุงูู ูุน ุงูุชุตุญูุญ ุงูุตุบูุฑ ุงูููุถุญ ุฃุนูุงู - ูู ูููู ุจุชุญุฏูุซ ุฃู ุญุฐู ุฃู ุดูุก ูู ุงูุฌุฏูู ุงููุฏู ุ ูุฃู ุงุณุชูุฑุงุฏ ุงูุนููุงุก ูู "ุฅูุญุงู ููุท":</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-comment">--     ID   </span>
<span class="hljs-keyword">UPDATE</span><font></font>
  client_import T<font></font>
<span class="hljs-keyword">SET</span><font></font>
  client_id = D.client_id<font></font>
<span class="hljs-keyword">FROM</span>
  <span class="hljs-keyword">client</span> D
<span class="hljs-keyword">WHERE</span>
  T.inn = D.inn; <span class="hljs-comment">-- unique key</span><font></font>
<font></font>
<span class="hljs-comment">--       ID</span>
<span class="hljs-keyword">WITH</span> ins <span class="hljs-keyword">AS</span> (
  <span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> <span class="hljs-keyword">client</span>(<font></font>
    inn<font></font>
  , <span class="hljs-keyword">name</span><font></font>
  )<font></font>
  <span class="hljs-keyword">SELECT</span><font></font>
    inn<font></font>
  , <span class="hljs-keyword">name</span>
  <span class="hljs-keyword">FROM</span><font></font>
    client_import<font></font>
  <span class="hljs-keyword">WHERE</span>
    client_id <span class="hljs-keyword">IS</span> <span class="hljs-literal">NULL</span> <span class="hljs-comment">--  ID  </span>
  <span class="hljs-keyword">RETURNING</span> *<font></font>
)<font></font>
<span class="hljs-keyword">UPDATE</span><font></font>
  client_import T<font></font>
<span class="hljs-keyword">SET</span><font></font>
  client_id = D.client_id<font></font>
<span class="hljs-keyword">FROM</span><font></font>
  ins D<font></font>
<span class="hljs-keyword">WHERE</span>
  T.inn = D.inn; <span class="hljs-comment">-- unique key</span><font></font>
<font></font>
<span class="hljs-comment">--  ID    </span>
<span class="hljs-keyword">UPDATE</span><font></font>
  invoice_import T<font></font>
<span class="hljs-keyword">SET</span><font></font>
  client_id = D.client_id<font></font>
<span class="hljs-keyword">FROM</span><font></font>
  client_import D<font></font>
<span class="hljs-keyword">WHERE</span>
  T.client_inn = D.inn; <span class="hljs-comment">--  </span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุงููุงูุน ุ ูู ุดูุก - </font></font><code>invoice_import</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ููุฃูุง ูู ูุฌุงู ุงูุงุชุตุงู </font></font><code>client_id</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฐู ุณูููู ุจุฅุฏุฎุงู ุงูุญุณุงุจ ุจู.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar492454/index.html">ูุจูุน ุฅุนุงุฏุฉ ููููุฉ ุงูุนูุงุฑุฉ ููุนููู ุฃู ูุง ูู ูุดููุฉ ุงููุทูุฑูู</a></li>
<li><a href="../ar492456/index.html">ููููุฉ ุชุตูุฑ ูุชุญุฑูู ุงูููุงุฐุฌ (ุงูุฌููููุฒูุงุฆูุฉ). ุฅุธูุงุฑ ุงูุจูุงูุงุช ุงูุฃูููุฉ</a></li>
<li><a href="../ar492458/index.html">ูุงุฌูุฉ ุงููุณุชุฎุฏู ุงูุฑุณูููุฉ ุงูุจุณูุทุฉ ูู M5Stack (Arduino)</a></li>
<li><a href="../ar492460/index.html">ุงูุจุฑูุฌุฉ ุงููุธูููุฉ ูู ูุง ููู ูู (ุนูู ุงูุฃุฑุฌุญ). ุฅุฐุง ุงุณุชูุนุช</a></li>
<li><a href="../ar492462/index.html">ูุตุฏุฑ ุงูุญูููุฉ: ููู ูุนูู ุงููุญูู ูุฏูุฑูุง ููุทูุฑูุง ููุนูู ูุนูุง</a></li>
<li><a href="../ar492466/index.html">ููููุฉ ุงูุงูุชูุงู ูู ุฃู ูุฒูุฏ ูุถูู ูุน cPanel ุฅูู Plesk ูู Rusonix ูู ุฎูุณ ุฎุทูุงุช ููุท</a></li>
<li><a href="../ar492468/index.html">Lenovo Thinkserver SE350: ุจุทู ูู ุงููุญูุท</a></li>
<li><a href="../ar492474/index.html">ูุญู ูุจูู ุงููุนูููุงุช ุนูู ูุฑุจุนุงุช Android ููุญูู ูุง ูุฌุจ ุฃู ุชุชููู ุงูุจุงุฏุฆุฉ ุงูุนุงุฏูุฉ ูู ุงูููุงู ุจู.</a></li>
<li><a href="../ar492478/index.html">ุจุฏูู ุฅุฏุงุฑุฉ ุงููุนุฑูุฉ ุ ูุคููู: 5 ุนูุงูุจ ุฑุฆูุณูุฉ ูุนุฏู ูุฌูุฏ ูุธุงู</a></li>
<li><a href="../ar492480/index.html">ููู ุนุงูููุง ูู ุงูุฃูุจุฆุฉ ูู ูุจู ููุง ููุนูู ุถุฏ ููุฑูุณุงุช ุงูุชุงุฌูุฉ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>