<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>⚒️ 👩🏻‍🤝‍👨🏼 ⏮️ 0.3秒でデータベース内の10億回の操作。OLTPとOLAPを比較せず、PostgreSQLとQuestDBを比較する 👨‍🎓 🕺🏿 🚶🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ソフトウェア開発者およびチームリーダーとしての15年間の経験の中で、私は頻繁に同じことに遭遇しました。プログラミングは宗教に変わります-合理的に、制限、移植性、ベンダーへの愛着の度合い、実際の価格、技術の見通し、ライセンスの自由を考慮して、合理的な選択に基づいて技術を導入しようとする人はめったにあり...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>0.3秒でデータベース内の10億回の操作。OLTPとOLAPを比較せず、PostgreSQLとQuestDBを比較する</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/496206/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ソフトウェア開発者およびチームリーダーとしての15年間の経験の中で、私は頻繁に同じことに遭遇しました。プログラミングは宗教に変わります-合理的に、制限、移植性、ベンダーへの愛着の度合い、実際の価格、技術の見通し、ライセンスの自由を考慮して、合理的な選択に基づいて技術を導入しようとする人はめったにありません。開発者は会議に参加したり、投稿を読んだり-誇大宣伝を開始します。ITディレクターやマネージャーは、イベント、さまざまな先見の明、販売、コンサルタントでの明るいアジャイルな未来の話だけでなく、刺激を受けます。そして、テクノロジーはプロジェクトに含まれており、開発と実装の便利さ、プロジェクトの非機能要件を考慮していないことがわかりましたが、それは誇大宣伝であり、Googleはそれ自体を使用しているため、アマゾンは推奨する（彼らの欠員は彼ら自身はそれを頻繁に使用しないと言います）または「これ」を実装するために会社の経営者によって最高の決定がなされました。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/gw/5o/oc/gw5ooc3vrg7l1posp3i32i1r5ng.gif"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、特別な楽しみはデータベースを選択することです。格納される情報量が多いほど、プロジェクトのデータ構造とその変更/進化が複雑になり、応答時間またはパフォーマンスの要件が高くなり、プロジェクトの後の段階での選択エラーのコストが高くなります。</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私はこれがそうであるという考えを持っています-簡単に言えば、プロトタイピングとさまざまなテクノロジーの比較は「高価」（時間、ライセンス、トレーニング、またはリバースエンジニアリング）であり、古代の本能を有効にし、時間のかかる証拠の部分から移行する誘惑があります。楽しくてシンプル、非合理性の奈落の底に触れます。私もこれを行いました。また、技術専門家の決定だけでなく、私と私の友人の仕事で最もとんでもないことがどのように起こるかを見ました。したがって、プログラミング言語、フレームワーク、メッセージキュー、またはクラウドプロバイダーの選択は、ネットワークへの投稿、会議でのレポート、Gartnerの管理者向けマニュアルまたは占いに基づいて同様に行うことができます。自分の仕事から多くの物語を語ることができないのは残念です。なぜなら、その後の人生を恐れているからです...</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">データベースの選択に影響するもの</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私の見解では、データベースを選択するとき、少なくとも次のトレードオフを解決する必要があります。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リアルタイムのトランザクション処理またはオンライン分析処理</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">垂直方向または水平方向に拡張可能</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">分散ベースの場合-データの整合性/可用性/分離耐性（CAP定理）</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">データスキームを必要としない特定のデータスキームとデータベースまたはストレージの制限</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">データモデル-キー値、階層、グラフ、ドキュメント、またはリレーショナル</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可能な限りデータに近い処理ロジック、またはアプリケーション内のすべての処理</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">主にRAMまたはディスクサブシステムで作業する</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ユニバーサルソリューションまたは専門</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">私たちは、プロジェクトの要件に特に適していないデータベースの既存の専門知識を使用するか、適切であるがなじみのないトレーニング「血液と汗」で新しいものを開発します（開発だけでなく運用にも同じことが当てはまります）</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">組み込みまたは別のプロセス/ネットワーク</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ヒップスターまたはレトログラード</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
多くの場合、実装されたソリューションに「ギフト」が与えられます。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「エイリアン」クエリ言語</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">他のデータベースへの移行を複雑にする、データベースを操作するための唯一のネイティブAPI（時間、チームの努力、プロジェクトの予算が費やされた）</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">他のプラットフォーム/言語/オペレーティングシステムのドライバーが利用できない</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ソースコードの欠如、ディスク上のデータ形式の説明（またはリバースエンジニアリングライセンスの禁止、特にバグの多いCoherenceを持つOracle）</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ライセンスコストの年々の増加</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">自身のエコシステムと専門家を見つけるのが難しい</font></font></li>
<li>    ,  , </li>
<li></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
システムの水平スケーリングは非常に複雑で、チームの専門知識が必要です。経験豊富な開発者は市場で非常に高価であり、分散アプリケーションの開発、デバッグ、テストはより困難です。したがって、サーバーをより強力なサーバーに変更することが可能で、システムが許可するデータの量を変更できる場合は、そうすることがよくあります。現在、サーバーにはテラバイトのRAMと数百のプロセッサコアを搭載できます。したがって、これまでになく、すべてのサーバーリソースをできるだけ効率的に使用することが重要になります。データベースライセンスのコストも重要であり、それらがプロセッサコアによって販売されている場合、運用予算は、垂直スケーリングを使用しても、超大規模宇宙プログラムと同じくらいのコストがかかる可能性があります。したがって、ライセンスが原因でデータベースのパフォーマンスをスケーリングできなくなることがないように、このことを覚えておくことは重要です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
マーケティングの助けを借りて、特定の会社のソリューションのみがすべての問題を解決することを彼らがあなたに納得させようと試みることは明らかです（しかし、彼らは新しい問題がいくつ現れるかについては沈黙しています）。すべての人に適し、すべてに適している理想的なデータベースはありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、近い将来、異なるシステムで異なるタイプのクエリの同じデータを処理するために、いくつかの異なるデータベースをサポートする予定です。データキャッシュなしのデータファブリックのソリューションはありません。DataLakeは、パフォーマンスとクエリの最適性の点で、大規模並列アーキテクチャーのデータベースとまだ比較できません。トランザクションデータは引き続きPostgreSQL、Oracle、MS Sql Server、Citus、Greenplum、Snowflake、Redshift、Vertica、Impala、Teradataの分析クエリに保存され、HDFS / S3 / ADLS（Azure）の生データの沼はDremioによって管理されます、Redshift Spectrum、Apache Spark、Presto。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ただし、上記のソリューションは、応答時間が短い時系列データの分析にはあまり適していません。</font><font style="vertical-align: inherit;">時系列データの操作での人気により、現在InfluxDBのお気に入りになっています。</font><font style="vertical-align: inherit;">インメモリデータベースニッチでは、kdb +とmemSQLがそれぞれの場所を保持します。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">QuestDB</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apacheライセンス</font><font style="vertical-align: inherit;">
でこれらの</font><font style="vertical-align: inherit;">オープンソース</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">QuestDB</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ソリューションのすべてに対抗できるものは何</font><font style="vertical-align: inherit;">ですか？</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">分析クエリを実行するためのハードウェアを最大限に活用するための試み-集計関数のベクトル化、メモリマップファイルによるデータの操作</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">データベース構造を管理するためのDMLクエリおよびDDL操作の言語としてのSQL</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">時系列DBに固有の結合テーブルのサポート</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SQLのウィンドウおよび集計関数のサポート</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JVM上のアプリケーションにデータベースを埋め込む機能</font></font></li>
<li>        JVM,        ServiceLoader</li>
<li> Influx DB line protocol (ILP)  UDP  Telegraf.      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">«What makes QuestDB faster than InfluxDB»</a></li>
<li> PostgreSql 11           PostgreSQL: JDBC, ODBC   psql <br>
</li>
<li>   web    -  REST endpoint  ,     SQL      json <br>
</li>
<li>       ,    <br>
</li>
<li>          zero-GC API,       .<br>
</li>
<li>                  (        )<br>
</li>
<li> 64  Windows, Linux, OSX, ARM Linux    FreeBSD<br>
</li>
<li>,    open source,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"> </a></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このデータベースが役立つ場合-低レイテンシのJVMで金融システムを開発していて、RAMのデータ分析のためのソリューションが必要な場合。</font><font style="vertical-align: inherit;">ライセンスのコストによるkdb +の代替として。</font><font style="vertical-align: inherit;">Influx / Telegrafプロトコルに従ってメトリックを収集したが、InfluxDBを使用したパフォーマンスとユーザビリティは満足のいくものではない場合。</font><font style="vertical-align: inherit;">プロジェクトがJVMで実行されており、追加されるだけで更新されないメトリックまたはアプリケーションデータを格納するための組み込みデータベースが必要な場合。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SIMD命令をサポートする新しいリリース4.2.0は</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、Redditに関する</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コメントの波を</font><font style="vertical-align: inherit;">引き起こしまし</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">た</font></a><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">最新のハードウェアとその効果的なプログラミングに関する知識の競争にファンが参加するには、コメントでデータベース（bluestreak01）の作成者とチャットすることをお勧めします。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SIMD操作</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プロジェクトチーム</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">合成データの</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">テスト</font></a><font style="vertical-align: inherit;">を</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">実施し、</font></a><font style="vertical-align: inherit;"> QuestDB 4.2.0とkdb 4.0を比較して10億の値を集計し、プロセッサーのSIMD命令を利用しました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Intel 8850Hプラットフォームの場合：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/bh/-z/vy/bh-zvyhql33d-ezkf9h0mudxia0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AMD Ryzen 3900Xプラットフォームの場合：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ba/f7/_d/baf7_d-6mpkifdhg8wiwtay2xle.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらはすべて「真空」でのテストであることは明らかですが、プロジェクトでkdbを使用しており、コミュニティと結果を共有している場合は、データを比較できます。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dockerデータベースイメージの実行</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
データベースは</font><font style="vertical-align: inherit;">すべてのリリース</font><font style="vertical-align: inherit;">で</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dockerhubに</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">公開されます</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">詳細については、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プロジェクトのドキュメントで</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">説明されてい</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">ます</font></a><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
QuestDBイメージを取得します。</font></font><br>
<br>
<pre><code class="bash hljs">docker pull questdb/questdb</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ローンチ：</font></font><br>
<br>
<pre><code class="bash hljs">docker run --rm -it -p 9000:9000 -p 8812:8812 questdb/questdb</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その後、PostgreSQLプロトコルを使用してポート8812に接続できます。Webコンソールはポート9000で使用できます。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JDBCアクセス</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プロジェクトに応じて、PostrgreSQL jdbcドライバー</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">org.postgresql：postgresql：42.2.12</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を追加します。</font><font style="vertical-align: inherit;">このテストでは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、testcontainersにQuestDBモジュール</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用し</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">ます</font></a><font style="vertical-align: inherit;">。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">テストは</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ビルドスクリプトと共にgithub </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">で利用でき</font></a><font style="vertical-align: inherit;">ます：</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;<font></font>
<font></font>
<span class="hljs-keyword">import</span> java.sql.Connection;
<span class="hljs-keyword">import</span> java.sql.DriverManager;
<span class="hljs-keyword">import</span> java.sql.ResultSet;
<span class="hljs-keyword">import</span> java.sql.Statement;<font></font>
<font></font>
<span class="hljs-keyword">import</span> <span class="hljs-keyword">static</span> org.assertj.core.api.Assertions.*;<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">QuestDbDriverTest</span> </span>{<font></font>
<font></font>
    <span class="hljs-meta">@Test</span>
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">containerIsUpTestByJdbcInvocation</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception </span>{
        <span class="hljs-keyword">try</span> (Connection connection = DriverManager.getConnection(<span class="hljs-string">"jdbc:tc:questdb:///?user=admin&amp;password=quest"</span>)){
            <span class="hljs-keyword">try</span> (Statement statement = connection.createStatement()){
                <span class="hljs-keyword">try</span> (ResultSet resultSet = statement.executeQuery(<span class="hljs-string">"select 42 from long_sequence(1)"</span>)){<font></font>
                    resultSet.next();<font></font>
                    assertThat(resultSet.getInt(<span class="hljs-number">1</span>)).isEqualTo(<span class="hljs-number">42</span>);<font></font>
                }<font></font>
            }<font></font>
        }<font></font>
    }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dockerを実行するとオーバーヘッドが増えるため、プロジェクトへの依存関係として</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">org.questdb：core：jar：4.2.0</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">
実装し、</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">io.questdb.ServerMainを</font></a><font style="vertical-align: inherit;">実行するだけでこれを回避できます</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">import</span> io.questdb.ServerMain;
<span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;
<span class="hljs-keyword">import</span> org.junit.jupiter.api.io.TempDir;<font></font>
<font></font>
<span class="hljs-keyword">import</span> java.nio.file.Path;
<span class="hljs-keyword">import</span> java.sql.Connection;
<span class="hljs-keyword">import</span> java.sql.DriverManager;
<span class="hljs-keyword">import</span> java.sql.PreparedStatement;
<span class="hljs-keyword">import</span> java.sql.Statement;<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">QuestDbJdbcTest</span> </span>{
    <span class="hljs-meta">@Test</span>
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">embeddedServerStartTest</span><span class="hljs-params">(<span class="hljs-meta">@TempDir</span> Path tempDir)</span> <span class="hljs-keyword">throws</span> Exception</span>{<font></font>
        ServerMain.main(<span class="hljs-keyword">new</span> String[]{<span class="hljs-string">"-d"</span>, tempDir.toString()});
        <span class="hljs-keyword">try</span> (DriverManager.getConnection(<span class="hljs-string">"jdbc:postgresql://localhost:8812/"</span>, <span class="hljs-string">"admin"</span>, <span class="hljs-string">"quest"</span>)){
            <span class="hljs-keyword">try</span> (Statement statement = connection.createStatement()){
                <span class="hljs-keyword">try</span> (ResultSet resultSet = statement.executeQuery(<span class="hljs-string">"select 42 from long_sequence(1)"</span>)){<font></font>
                    resultSet.next();<font></font>
                    assertThat(resultSet.getInt(<span class="hljs-number">1</span>)).isEqualTo(<span class="hljs-number">42</span>);<font></font>
                }<font></font>
            }<font></font>
        }<font></font>
    }<font></font>
}<font></font>
</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Javaアプリケーションへの埋め込み</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、これはインプロセスJava APIを使用してデータベースを操作する最も速い方法です。</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">import</span> io.questdb.cairo.CairoEngine;
<span class="hljs-keyword">import</span> io.questdb.cairo.DefaultCairoConfiguration;
<span class="hljs-keyword">import</span> io.questdb.griffin.CompiledQuery;
<span class="hljs-keyword">import</span> io.questdb.griffin.SqlCompiler;
<span class="hljs-keyword">import</span> io.questdb.griffin.SqlExecutionContextImpl;
<span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;
<span class="hljs-keyword">import</span> org.junit.jupiter.api.io.TempDir;<font></font>
<font></font>
<span class="hljs-keyword">import</span> java.nio.file.Path;<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TruncateExecuteTest</span> </span>{
    <span class="hljs-meta">@Test</span>
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">truncate</span><span class="hljs-params">(<span class="hljs-meta">@TempDir</span> Path tempDir)</span> <span class="hljs-keyword">throws</span> Exception</span>{<font></font>
        SqlExecutionContextImpl executionContext = <span class="hljs-keyword">new</span> SqlExecutionContextImpl();<font></font>
        DefaultCairoConfiguration configuration = <span class="hljs-keyword">new</span> DefaultCairoConfiguration(tempDir.toAbsolutePath().toString());
        <span class="hljs-keyword">try</span> (CairoEngine engine = <span class="hljs-keyword">new</span> CairoEngine(configuration)) {
            <span class="hljs-keyword">try</span> (SqlCompiler compiler = <span class="hljs-keyword">new</span> SqlCompiler(engine)) {<font></font>
                CompiledQuery createTable = compiler.compile(<span class="hljs-string">"create table tr_table(id long,name string)"</span>, executionContext);<font></font>
                compiler.compile(<span class="hljs-string">"truncate table tr_table"</span>, executionContext);<font></font>
            }<font></font>
        }<font></font>
    }<font></font>
}<font></font>
</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Webコンソール</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プロジェクトには、</font><font style="vertical-align: inherit;">QuestDBにクエリを送信</font><font style="vertical-align: inherit;">
し、ブラウザーを介してcsv形式でデータベースにデータをダウンロードする</font><font style="vertical-align: inherit;">ための</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Webコンソールが</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">含ま</font></font><br>
<br>
<img src="https://habrastorage.org/webt/5v/_w/bb/5v_wbbpw-roh7cbrv7jpivazvgc.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">れています。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/fw/ya/lu/fwyalug09h88tp3iyaeyotztxoo.gif"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">別のデータベースが必要ですか？</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このプロジェクトは若く、まだいくつかの企業機能が欠けていますが、急速に発展しており、数人の貢献者が積極的にプロジェクトに取り組んでいます。私は</font><font style="vertical-align: inherit;">昨年8月から</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">QuestDBをフォローし</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">て</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">おり</font></a><font style="vertical-align: inherit;">、このプロジェクト（</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jdbc function</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">osquery</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">の拡張機能をいくつか開発し、</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">このプロジェクトをtestcontainersと</font></a><font style="vertical-align: inherit;">統合</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">しました</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。現在、QuestionDBを使用して、本番環境のデータソースへの増分データアップロード、データパーティション化、および長いトランザクションを使用して、データエクスポート機能を補足することで、Dremioの現在の問題を解決しようとしています。私の経験を以下の出版物で共有する予定です。特に、使い慣れたプラットフォームで関数とデータベースをデバッグし、光の速さで実行される単体テストを作成できることは、とてもうれしいです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
あなたは経験豊富な開発者として決定します。繰り返しになりますが、QuestDBはOLTPデータベースの代替品ではありません-PostgreSQL、Oracle、MS SQL Server、DB2、または</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">テストのH2</font></a><font style="vertical-align: inherit;">代替品</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JVMで。</font><font style="vertical-align: inherit;">これは、PostgreSQL、Influx / Telegrafネットワークプロトコルをサポートする強力な専用オープンソースデータベースです。</font><font style="vertical-align: inherit;">使用シナリオが、それに実装されている機能と、列データベースを使用する主なシナリオに適合する場合、選択は正当化されます。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja496192/index.html">GoからRust関数を呼び出す</a></li>
<li><a href="../ja496194/index.html">微細構造断層画像の二値化について</a></li>
<li><a href="../ja496196/index.html">DEFCON会議26.尻尾を振る：隠れた受動的監視。パート1</a></li>
<li><a href="../ja496198/index.html">ロボットのトレーニングのトピックに関する第2回ROSミートアップのプレゼンテーション</a></li>
<li><a href="../ja496204/index.html">CI / CDプロセスの更新：準備と計画</a></li>
<li><a href="../ja496208/index.html">JITがC＃コードをインライン展開する方法（ヒューリスティック）</a></li>
<li><a href="../ja496210/index.html">生物多様性はじゃんけんの原理から進化したのかもしれません</a></li>
<li><a href="../ja496212/index.html">＃04-そして、バイト全体では十分ではありません... | 角でBKを取る</a></li>
<li><a href="../ja496214/index.html">AdColony：モバイルアプリとゲームのパブリッシャーの89％がプロモーションビデオを使用しています</a></li>
<li><a href="../ja496216/index.html">ダークストア：もうこれについて考えていますか？</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>