<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤹🏿 🎨 🏗️ Vue.jsのSVGプログレスバー 😛 👲 👈🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="こんにちは！私はフロントエンドで勉強し、並行してトレーニングプロジェクトで、検索ボットからデータを収集するバックエンド用のVue.jsでSPAを開発しています。ボットは0から500のエントリを生成し、私は次のことを行う必要があります。アップロード、指定された基準で並べ替え、表に表示します。
 

バ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Vue.jsのSVGプログレスバー</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/460399/"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">こんにちは！</font><font style="vertical-align: inherit;">私はフロントエンドで勉強し、並行してトレーニングプロジェクトで、検索ボットからデータを収集するバックエンド用のVue.jsでSPAを開発しています。</font><font style="vertical-align: inherit;">ボットは0から500のエントリを生成し、私は次のことを行う必要があります。アップロード、指定された基準で並べ替え、表に表示します。</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">バックエンドもボットもデータをソートできないため、すべてのデータをダウンロードしてブラウザー側で処理する必要があります。</font><font style="vertical-align: inherit;">ソートは非常に高速ですが、ダウンロード速度は接続に依存し、示された500レコードは10〜40秒でロードできます。</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最初に、ロード時にスピナーを表示しましたが、その欠点は、ユーザーがダウンロードがいつ終了するかわからないことです。</font><font style="vertical-align: inherit;">私の場合、ボットが見つけたレコードの数は事前にわかっているので、レコードの何％がロードされているかを示すことができます。</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ユーザーの待機を明るくするために、私は彼にロードプロセスを示すことにしました。</font></font></p><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数字-レコードの何％がすでにロードされているか</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スケジュール-各レコードの読み込み時間</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">充填-％負荷。</font><font style="vertical-align: inherit;">グラフはロードされると長方形のブロックを塗りつぶすので、ブロックのどの部分が塗りつぶされずに残っているのかは明らかです</font></font></li>
</ol><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これが私が目指していて得た結果のアニメーションです：</font></font></p><br>
<img src="https://habrastorage.org/webt/-o/wr/mc/-owrmchonzxft0kpoabdeumz2tm.gif"><br>
<p>… -,  .</p><br>
<p>          .         ,      ,      SVG  Vue.</p><br>
<a name="habracut"></a><br>
<h3>   Canvas  SVG</h3><br>
<p><em>Canvas</em>     -  JS,  SVG,   ,        <em>object</em>  ,   , SVG-    (    )   <em>Canvas</em>   .    ,       SVG,   - .</p><br>
<h3> </h3><br>
<p>    Vue,        SVG,     :</p><br>
<ol>
<li>       SVG   Vue</li>
<li>     SVG   Vue</li>
<li>   </li>
<li>     Vue-</li>
<li>   SPA</li>
</ol><br>
<h3>  </h3><br>
<ol>
<li> <div class="spoiler"><b class="spoiler_title">  </b><div class="spoiler_text"> <p>   <em>vue cli</em>.    ,     <em>vue create loadprogresser</em>,    <em>default</em>   vue-   loadprogresser,     :</p><br>
 <div class="scrollable-table"><table>
<tbody><tr>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"> <img src="https://habrastorage.org/webt/ff/dx/gz/ffdxgzse2s6oqmujajql_cz-qjc.png" width="25%"><br>
 <p>   default</p><br>
 </td>
<td align="center"> <img src="https://habrastorage.org/webt/ju/7o/xw/ju7oxwnd0bt6ygl47di54eyiccq.png" width="50%"><br>
 <p>  «»</p><br>
 </td>
</tr>
<tr>
<td align="center"> <img src="https://habrastorage.org/webt/db/vd/cz/dbvdczqbvxc4oi1mswth75ofpo0.png" width="50%"><br>
 <p>  Vue</p><br>
 </td>
<td align="left"> <pre><code class="plaintext hljs">&lt;template&gt;<font></font>
  &lt;div&gt;<font></font>
    &lt;h1&gt;Progresser&lt;/h1&gt;<font></font>
  &lt;/div&gt;<font></font>
&lt;/template&gt;<font></font>
<font></font>
&lt;script&gt;<font></font>
  export default {name: 'app'}<font></font>
&lt;/script&gt;;                            <font></font>
                    </code></pre><br>
 <p>  «Progresser»  App.vue</p><br>
 </td>
</tr>
</tbody></table></div><br>
 </div></div><br>
 </li>
<li> <h4>       SVG   Vue</h4><br>
 <p>      HTML, CSS  SVG <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">css.yoksel.ru</a>    SVG     Vue <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">SVG- Example</a>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> </a>.          SVG     :</p><br>
<pre><code class="plaintext hljs">&lt;template&gt;<font></font>
  &lt;div class="wrapper"&gt;<font></font>
    &lt;svg version="1.1" xmlns="http://www.w3.org/2000/svg"<font></font>
        width="100%" height="100%"&gt; //svg   <font></font>
        //   svg-<font></font>
    &lt;/svg&gt;<font></font>
  &lt;/div&gt;<font></font>
&lt;/template&gt;<font></font>
</code></pre><br>
 </li>
<li> <h4>     SVG   Vue</h4><br>
 <h5>SVG  rect</h5><br>
 <p> rect — ,   .  svg   100100px,    rect    25:25   5050 px,      ( )</p><br>
 <iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
 <h5>SVG    hover:</h5><br>
 <p>   rect  svg.    svg   «sample»,   style vue-   .sample rect (  rect  )  .sample rect:hover    rect      :</p><br>
 <div class="spoiler"><b class="spoiler_title"></b><div class="spoiler_text"> <pre><code class="javascript hljs">&lt;template&gt;
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"app"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">svg</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"sample"</span> <span class="hljs-attr">version</span>=<span class="hljs-string">"1.1"</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://www.w3.org/2000/svg"</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"100px"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"100px"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">rect</span> <span class="hljs-attr">x</span>=<span class="hljs-string">25</span> <span class="hljs-attr">y</span>=<span class="hljs-string">25</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"50px"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"50px"</span>/&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">svg</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><font></font>
&lt;/template&gt;<font></font>
                      <font></font>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">                  
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
    <span class="hljs-attr">name</span>: <span class="hljs-string">'app'</span>
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><font></font>
                      <font></font>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.sample</span> <span class="hljs-selector-tag">rect</span> {
    <span class="hljs-attribute">fill</span>: yellow;
    <span class="hljs-attribute">stroke</span>: green;
    <span class="hljs-attribute">stroke-width</span>: <span class="hljs-number">4</span>;
    <span class="hljs-attribute">transition</span>: all <span class="hljs-number">350ms</span>;
}
                      
<span class="hljs-selector-class">.sample</span> <span class="hljs-selector-tag">rect</span><span class="hljs-selector-pseudo">:hover</span> {
    <span class="hljs-attribute">fill</span>: gray;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span>            
</code></pre><br>
 </div></div><br>
 <div class="spoiler"><b class="spoiler_title">  JSfiddle</b><div class="spoiler_text"> <iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
 </div></div><br>
 <p>: svg    template vue-    .  !</p><br>
 <h5>SVG path   </h5><br>
 <p>     rect  path, <code>&lt;path :d="D" class="path"/&gt;</code>   d  path   vue  D   .    <code>v-bind:d="D"</code>,     <code>:d="D"</code> </p><br>
 <p> D=«M 0 0 0 50 50 50 50 0 Z»      0:0-&gt;0:50-&gt;50:50-&gt;0:50      Z,   5050px    0:0.    «path»          1px.</p><br>
<div class="spoiler"><b class="spoiler_title">  PATH</b><div class="spoiler_text"><pre><code class="javascript hljs">    &lt;template&gt;
            <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"app"</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">svg</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"sample"</span> <span class="hljs-attr">version</span>=<span class="hljs-string">"1.1"</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://www.w3.org/2000/svg"</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"100px"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"100px"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">path</span> <span class="hljs-attr">:d</span>=<span class="hljs-string">"D"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"path"</span>/&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">svg</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><font></font>
          &lt;/template&gt;<font></font>
          <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
          <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
            <span class="hljs-attr">name</span>: <span class="hljs-string">'app'</span>,
            data(){
              <span class="hljs-keyword">return</span> {
                <span class="hljs-attr">D</span>:<span class="hljs-string">"M 0 0 0 50 50 50 50 0 Z"</span>
              }
            }
          }
          </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
          <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
            <span class="hljs-selector-class">.path</span> {
              <span class="hljs-attribute">fill</span>:yellow;
              <span class="hljs-attribute">stroke</span>:gray;
            }
          </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span>
</code></pre><br>
</div></div><br>
 </li>
<li> <h4>   </h4><br>
 <p>  ,    .    svg-  100px,  400px,    path,  d     - d   vue,        timePoints ,  10,    400 (  )     0  100.   ,     created,   update     ()      addTime,   getSVGTimePoints      PATH,  setTimeout   update</p><br>
 <iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
 <h4>     PATH</h4><br>
 <p>  PATH    getSVGTimePoints,   timePoints      reduce.     reduce  «M 0 0» (   0:0).   reduce,       <u></u>  dX  dY.  ,    ,    «l» ( «L»    ),  «l»  dX   dY,  .   , dY = 1 (  1px),  ,   X     dX            .     PATH<br>
 <code>path +=`L ${this.timePoints.length} 0`</code><br>
  ,   ,     .    ,      «Z»,   ,    ,      (fill)     ,    ,    stroke — .</p><br>
 <pre><code class="javascript hljs">getSVGTimePoints:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-keyword">let</span> predY = <span class="hljs-number">0</span>
    <span class="hljs-keyword">let</span> path = <span class="hljs-keyword">this</span>.timePoints.reduce(<span class="hljs-function">(<span class="hljs-params">str, item</span>)=&gt;</span>{
        <span class="hljs-keyword">let</span> dY = item - predY<font></font>
        predY = item<font></font>
        <span class="hljs-keyword">return</span> str + <span class="hljs-string">`l 1 <span class="hljs-subst">${dY}</span> `</span>
    },<span class="hljs-string">'M 0 0 '</span>)<font></font>
    path +=<span class="hljs-string">`L <span class="hljs-subst">${<span class="hljs-keyword">this</span>.timePoints.length}</span> 0`</span><span class="hljs-comment">// Z`    </span>
    <span class="hljs-keyword">return</span> path<font></font>
    },<font></font>
        </code></pre><br>
 <p>  .                  .      DOM    </p><br>
 <ol>
<li> <h5>ref —     DOM</h5><br>
 <p>DIV-  (   svg)    wrapper       .   svg    ,      100%. RECT,   ,          PATH </p><br>
 <pre><code class="html hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"app"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"wrapper"</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"loadprogresser"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">svg</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"sample"</span> <span class="hljs-attr">version</span>=<span class="hljs-string">"1.1"</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://www.w3.org/2000/svg"</span>
        <span class="hljs-attr">width</span>=<span class="hljs-string">"100%"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"100%"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">rect</span> <span class="hljs-attr">x</span>=<span class="hljs-string">0</span> <span class="hljs-attr">y</span>=<span class="hljs-string">0</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"100%"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"100%"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">path</span> <span class="hljs-attr">:d</span>=<span class="hljs-string">"d"</span> <span class="hljs-attr">fill</span>=<span class="hljs-string">"transparent"</span> <span class="hljs-attr">stroke</span>=<span class="hljs-string">"black"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">svg</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                </code></pre><br>
 <p>     DIV-   DOM Vue,   ref          <code>ref="loadprogresser"</code>.     <code>mounted</code>    getScales(),  ,  <code>const {width, height} = this.$refs.loadprogresser.getBoundingClientRect()</code>     DIV-     DOM.</p><br>
 <p>            -      .    Y         .</p><br>
 <iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
 </li>
<li><h5>transform —   </h5><br>
 <p>    ,       ,   0:0     ,   Y   ,   . , ,     ,   SVG   transform,   .</p><br>
 <p>      Y   -1 (  Y  ),      <u></u>  .        (  ),         <code>mounted</code>  : <code>this.transform = `scale( 1, -1) translate(0,${-this.wrapHeight})`</code> </p><br>
 <p>       PATH  ,     PATH   ( g)      :</p><br>
<pre><code class="html hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">g</span> <span class="hljs-attr">:transform</span>=<span class="hljs-string">"transform"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">path</span> <span class="hljs-attr">:d</span>=<span class="hljs-string">"d"</span> <span class="hljs-attr">fill</span>=<span class="hljs-string">"transparent"</span> <span class="hljs-attr">stroke</span>=<span class="hljs-string">"black"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">g</span>&gt;</span></code></pre><br>
 <p>    ,       </p><br>
 <iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
 </li>
<li><h5>SVG text   </h5><br>
 <p>    % .          SVG    (   HTML/CSS),     (  ) dominant-baseline=«central»  text-anchor=«middle»</p><br>
 <p>  SVG   :</p><br>
 <code>&lt;text x="50%" y="50%" dominant-baseline="central" text-anchor="middle"&gt;{{TextPrc}}&lt;/text&gt;</code><br>
 <p> TextPrc    ,           <code>this.TextPrc = `${((this.Samples * 100)/this.maxSamples) | 0} %`</code>.</p><br>
 <p>  x=«50%» y=«50%»   ,          ,   dominant-baseline  text-anchor.</p><br>
 <iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
 <p>    ,        .</p><br>
 </li>
</ol><br>
 <br>
 </li>
<li> <h4>     Vue-</h4><br>
 <p>         ,  : maxSamples — -   100%- ,  Point —   ()       (  ,  ,  ).     ,    props</p><br>
 <pre><code class="javascript hljs">props:{
    <span class="hljs-attr">maxSamples</span>: {<span class="hljs-comment">//-   100%- </span>
        <span class="hljs-attr">type</span>: <span class="hljs-built_in">Number</span>,
        <span class="hljs-attr">default</span>: <span class="hljs-number">400</span><font></font>
    },<font></font>
    <span class="hljs-attr">Point</span>:{<span class="hljs-comment">// </span>
        <span class="hljs-attr">value</span>:<span class="hljs-number">0</span><font></font>
    }<font></font>
}       <font></font>
        </code></pre><br>
 <h5>  </h5><br>
 <p> ,        ,  computed  getPath    Point (  ,      Point)</p><br>
 <pre><code class="javascript hljs">            <span class="hljs-comment">//</span><font></font>
            ...<font></font>
            &lt;path :d=<span class="hljs-string">"getPath"</span>/&gt;<font></font>
            ...<font></font>
            <span class="hljs-comment">// </span>
            <span class="hljs-attr">props</span>:{<font></font>
                ...<font></font>
                Point:{<font></font>
                  <span class="hljs-attr">value</span>:<span class="hljs-number">0</span><font></font>
                }            <font></font>
            <span class="hljs-comment">// </span>
            <span class="hljs-attr">computed</span>:{<font></font>
                getPath(){<font></font>
                  <span class="hljs-keyword">this</span>.addValue({<span class="hljs-attr">value</span>:<span class="hljs-keyword">this</span>.Point.value})
                  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.getSVGPoints()<span class="hljs-comment">//this.d</span><font></font>
                }<font></font>
              },             <font></font>
        </code></pre><br>
 <p>   Point  Number,  ,        ,     . ,       Point   10,       ,           .</p><br>
 <p>  Point  Number   {value:0}     — computed  getPath()     ,  Point.value   </p><br>
 <div class="spoiler"><b class="spoiler_title">  Progresser.vue</b><div class="spoiler_text"> <pre><code class="javascript hljs">&lt;template&gt;
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"wrapper"</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"loadprogresser"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">svg</span>    <span class="hljs-attr">class</span>=<span class="hljs-string">"wrapper__content"</span>
                <span class="hljs-attr">version</span>=<span class="hljs-string">"1.1"</span>
                <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://www.w3.org/2000/svg"</span>
                <span class="hljs-attr">width</span>=<span class="hljs-string">"100%"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"100%"</span>
        &gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">g</span> <span class="hljs-attr">:transform</span>=<span class="hljs-string">"transform"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">path</span> <span class="hljs-attr">:d</span>=<span class="hljs-string">"getPath"</span>/&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">g</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">text</span> <span class="hljs-attr">x</span>=<span class="hljs-string">"50%"</span> <span class="hljs-attr">y</span>=<span class="hljs-string">"50%"</span>
                <span class="hljs-attr">dominant-baseline</span>=<span class="hljs-string">"central"</span>
                <span class="hljs-attr">text-anchor</span>=<span class="hljs-string">"middle"</span>&gt;</span>
                {{TextPrc}}
            <span class="hljs-tag">&lt;/<span class="hljs-name">text</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">svg</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><font></font>
&lt;/template&gt;<font></font>
<font></font>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
<span class="hljs-attr">props</span>:{
    <span class="hljs-attr">maxSamples</span>: {<span class="hljs-comment">//-   100%- </span>
    <span class="hljs-attr">type</span>: <span class="hljs-built_in">Number</span>,
    <span class="hljs-attr">default</span>: <span class="hljs-number">400</span>
    },
    <span class="hljs-attr">Point</span>:{
    <span class="hljs-attr">value</span>:<span class="hljs-number">0</span>
    }
},
data(){
    <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">Samples</span>:<span class="hljs-number">0</span>,<span class="hljs-comment">//  </span>
    <span class="hljs-attr">wrapHeight</span>:<span class="hljs-number">100</span>,<span class="hljs-comment">//     </span>
    <span class="hljs-attr">maxY</span>:<span class="hljs-number">0</span>,<span class="hljs-comment">//  Y  (  )</span>
    <span class="hljs-attr">scales</span>:{
        <span class="hljs-attr">w</span>:<span class="hljs-number">1</span>,<span class="hljs-comment">//   (   )</span>
        <span class="hljs-attr">h</span>:<span class="hljs-number">1</span> <span class="hljs-comment">//  </span>
            <span class="hljs-comment">//(   Y   )</span>
    },
    <span class="hljs-attr">Points</span>:[],<span class="hljs-comment">//     (  Point.value)</span>
    <span class="hljs-attr">transform</span>:<span class="hljs-string">'scale( 1, -1) translate(0,0)'</span>,
    <span class="hljs-attr">TextPrc</span>: <span class="hljs-string">'0%'</span>
    }

},
<span class="hljs-attr">mounted</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-keyword">this</span>.getScales()
},
<span class="hljs-attr">methods</span>:{
    getScales(){
        <span class="hljs-keyword">const</span> {width, height} = <span class="hljs-keyword">this</span>.$refs.loadprogresser.getBoundingClientRect()
        <span class="hljs-comment">//.   </span>
        <span class="hljs-keyword">this</span>.scales.w = width / <span class="hljs-keyword">this</span>.maxSamples
        <span class="hljs-comment">//  Y   </span>
        <span class="hljs-keyword">this</span>.wrapHeight = height
        <span class="hljs-keyword">this</span>.transform = <span class="hljs-string">`scale( 1, -1) translate(0,<span class="hljs-subst">${-<span class="hljs-keyword">this</span>.wrapHeight}</span>) rotate(0)`</span>
    },
    getVScale(){<span class="hljs-comment">//   </span>
        <span class="hljs-keyword">this</span>.scales.h = (<span class="hljs-keyword">this</span>.maxY == <span class="hljs-number">0</span>)? <span class="hljs-number">0</span> : <span class="hljs-keyword">this</span>.wrapHeight / <span class="hljs-keyword">this</span>.maxY
    },
    <span class="hljs-comment">//         </span>
    getYMax({value = <span class="hljs-number">0</span>}){
        <span class="hljs-keyword">this</span>.maxY = (value &gt; <span class="hljs-keyword">this</span>.maxY)
            ? value
            : <span class="hljs-keyword">this</span>.maxY 
    },
    addValue({value = <span class="hljs-number">0</span>}){
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.Samples &lt; <span class="hljs-keyword">this</span>.maxSamples) {
            <span class="hljs-keyword">this</span>.getYMax({value})
            <span class="hljs-keyword">this</span>.getVScale()
            <span class="hljs-keyword">this</span>.Points.push(value) <span class="hljs-comment">// Int</span>
            <span class="hljs-keyword">this</span>.Samples ++;
            <span class="hljs-keyword">this</span>.TextPrc = <span class="hljs-string">`<span class="hljs-subst">${((<span class="hljs-keyword">this</span>.Samples * <span class="hljs-number">100</span>)/<span class="hljs-keyword">this</span>.maxSamples) | <span class="hljs-number">0</span>}</span> %`</span>
        }
    },
    getSVGPoints(){
        <span class="hljs-comment">//    Path</span>
        <span class="hljs-keyword">let</span> predY = <span class="hljs-number">0</span>
        <span class="hljs-keyword">let</span> path = <span class="hljs-keyword">this</span>.Points.reduce(<span class="hljs-function">(<span class="hljs-params">str, item</span>)=&gt;</span>{
            <span class="hljs-keyword">let</span> dY = (item - predY) * <span class="hljs-keyword">this</span>.scales.h
            predY = item
            <span class="hljs-keyword">return</span> str + <span class="hljs-string">`l <span class="hljs-subst">${<span class="hljs-keyword">this</span>.scales.w}</span> <span class="hljs-subst">${dY}</span> `</span>
        },<span class="hljs-string">'M 0 0 '</span>)
        path +=<span class="hljs-string">`L <span class="hljs-subst">${<span class="hljs-keyword">this</span>.Points.length * <span class="hljs-keyword">this</span>.scales.w}</span> 0 `</span><span class="hljs-comment">// Z`    </span>
        <span class="hljs-keyword">return</span> path
    },
},
<span class="hljs-attr">computed</span>:{
    getPath(){
        <span class="hljs-keyword">this</span>.addValue({<span class="hljs-attr">value</span>:<span class="hljs-keyword">this</span>.Point.value})<span class="hljs-comment">//  </span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.getSVGPoints()<span class="hljs-comment">//this.d -  SVG PATH</span>
    }
}
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><font></font>
<font></font>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">

<span class="hljs-selector-class">.wrapper</span> {
<span class="hljs-attribute">width</span>: <span class="hljs-number">400px</span>;<span class="hljs-comment">/*     */</span>
<span class="hljs-attribute">height</span>: <span class="hljs-number">100px</span>;<span class="hljs-comment">/*  ( )   */</span>
<span class="hljs-attribute">font-size</span>: <span class="hljs-number">4rem</span>;
<span class="hljs-attribute">font-weight</span>: <span class="hljs-number">600</span>;
<span class="hljs-attribute">border-left</span>: <span class="hljs-number">1px</span> gray solid;
<span class="hljs-attribute">border-right</span>: <span class="hljs-number">1px</span> gray solid;
<span class="hljs-attribute">overflow</span>: hidden;
}

<span class="hljs-selector-class">.wrapper__content</span> <span class="hljs-selector-tag">path</span> {
<span class="hljs-attribute">opacity</span>: <span class="hljs-number">0.5</span>;
    <span class="hljs-attribute">fill</span>: lightgreen;
    <span class="hljs-attribute">stroke</span>: green;
    <span class="hljs-attribute">stroke-width</span>: <span class="hljs-number">1</span>;
}

<span class="hljs-selector-class">.wrapper__content</span> <span class="hljs-selector-tag">text</span> {
<span class="hljs-attribute">opacity</span>: <span class="hljs-number">0.5</span>;
} 
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span><font></font>
                      <font></font>
            </code></pre><br>
 </div></div><br>
 <h5>      </h5><br>
 <p>         <br>
 <code>import Progresser from "./components/Progresser"</code><br>
    <br>
 <code>components: {Progresser }</code></p><br>
 <p>   , - progresser   :</p><br>
 <pre><code class="html hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">progresser</span>
    <span class="hljs-attr">class</span>=<span class="hljs-string">"progresser"</span>
    <span class="hljs-attr">:maxSamples</span> = <span class="hljs-string">"SamplesInProgresser"</span>
    <span class="hljs-attr">:Point</span> = <span class="hljs-string">"Point"</span>
&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">progresser</span>&gt;</span>             
        </code></pre><br>
 <p>  «progreser»        .  props   maxSamples ( -   )    SamplesInProgresser,   props Point    (  )  - Point . Point     update,      .   :</p><br>
 <img src="https://habrastorage.org/webt/um/rb/y4/umrby4sqxabfzgz_ng1lnk6xgcy.gif"><br>
 <div class="spoiler"><b class="spoiler_title">  App.vue</b><div class="spoiler_text"> <pre><code class="javascript hljs">&lt;template&gt;
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">progresser</span>
            <span class="hljs-attr">class</span>=<span class="hljs-string">"progresser"</span>
            <span class="hljs-attr">:maxSamples</span> = <span class="hljs-string">"SamplesInProgresser"</span>
            <span class="hljs-attr">:Point</span> = <span class="hljs-string">"Point"</span>
        &gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">progresser</span>&gt;</span>  
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><font></font>
&lt;/template&gt;<font></font>
                      <font></font>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> Progresser <span class="hljs-keyword">from</span> <span class="hljs-string">"./components/Progresser"</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
<span class="hljs-attr">name</span>: <span class="hljs-string">'app'</span>,
data(){
    <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">SamplesInProgresser</span>:<span class="hljs-number">400</span>,<span class="hljs-comment">// -  </span>
        <span class="hljs-attr">Point</span>:{<span class="hljs-attr">value</span>:<span class="hljs-number">0</span>},<span class="hljs-comment">//""</span>
        <span class="hljs-attr">index</span>:<span class="hljs-number">0</span>, <span class="hljs-comment">// -  </span>
        <span class="hljs-attr">TimeM</span>:<span class="hljs-number">100</span> <span class="hljs-comment">//    </span>
    }
},
<span class="hljs-attr">created</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">this</span>.update()
},
<span class="hljs-attr">methods</span>:{
    update(){
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.index &lt; <span class="hljs-keyword">this</span>.SamplesInProgresser) {
            <span class="hljs-keyword">this</span>.index++;
            <span class="hljs-keyword">this</span>.Point = {<span class="hljs-attr">value</span>:(<span class="hljs-keyword">this</span>.TimeM*<span class="hljs-built_in">Math</span>.random() | <span class="hljs-number">0</span>)}
            <span class="hljs-keyword">this</span>.TimeM *= <span class="hljs-number">1.01</span>
            setTimeout(<span class="hljs-keyword">this</span>.update, <span class="hljs-number">0</span>)
        }
    }    
},
<span class="hljs-attr">components</span>: {
    Progresser
    }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><font></font>
<font></font>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
<span class="hljs-selector-id">#app</span> {
    <span class="hljs-attribute">font-family</span>: <span class="hljs-string">'Avenir'</span>, Helvetica, Arial, sans-serif;
    <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">60px</span>;
}

<span class="hljs-comment">/*     */</span>
<span class="hljs-selector-class">.progresser</span> {
    <span class="hljs-attribute">width</span>: <span class="hljs-number">300px</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">80px</span>; 
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span><font></font>
                      <font></font>
            </code></pre><br>
 </div></div><br>
 </li>
<li> <h4>   SPA</h4><br>
 <p>  ,    .  ,             .      .       ,   new Date().getTime()    ,        . ,     ,      ,        .</p><br>
 <pre><code class="javascript hljs"><span class="hljs-keyword">async</span> getCandidatesData(){<font></font>
...<font></font>
    this.LoadRecords = <span class="hljs-literal">true</span> <span class="hljs-comment">//   ,       </span><font></font>
    ...<font></font>
    this.SamplesInProgresser = uris.length <span class="hljs-comment">//     </span><font></font>
    ...<font></font>
    for (<span class="hljs-keyword">let</span> item <span class="hljs-keyword">of</span> uris) {<span class="hljs-comment">// uris  URL   </span>
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">const</span> start = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().getTime()<span class="hljs-comment">//  </span>
            candidate = <span class="hljs-keyword">await</span> <span class="hljs-keyword">this</span>.$store.dispatch(<span class="hljs-string">'GET_CANDIDATE'</span>, item)
            <span class="hljs-keyword">const</span> stop = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().getTime()<span class="hljs-comment">//   </span>
            <span class="hljs-keyword">this</span>.Point = {<span class="hljs-attr">value</span>:(stop-start)}<span class="hljs-comment">//   Point</span><font></font>
            ...<font></font>
        </code></pre><br>
 <p> data -     :</p><br>
 <pre><code class="javascript hljs">data (){
    <span class="hljs-keyword">return</span> {<font></font>
        ...<font></font>
        <span class="hljs-comment">// </span>
        <span class="hljs-attr">LoadRecords</span>:<span class="hljs-literal">false</span>,
        <span class="hljs-attr">SamplesInProgresser</span>:<span class="hljs-number">400</span>,
        <span class="hljs-attr">Point</span>:{<span class="hljs-attr">value</span>:<span class="hljs-number">0</span>}           <font></font>
    }<font></font>
        </code></pre><br>
 <p>  :</p><br>
 <pre><code class="html hljs xml"><span class="hljs-comment">&lt;!--   --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"wait_loading"</span> <span class="hljs-attr">v-show</span>=<span class="hljs-string">"LoadRecords"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">progresser</span>
            <span class="hljs-attr">class</span>=<span class="hljs-string">"progresser"</span>
            <span class="hljs-attr">:maxSamples</span> = <span class="hljs-string">"SamplesInProgresser"</span>
            <span class="hljs-attr">:Point</span> = <span class="hljs-string">"Point"</span>
        &gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">progresser</span>&gt;</span>  
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        </code></pre> <br>
 </li>
</ol><br>
<h4></h4><br>
<p>  ,  .  -     SVG   HTML-,   . SVG —               </p><br>
<h4></h4><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">インジケーターのソースコードをダウンロードする</font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">svg-pathの記事</font></font></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja460383/index.html">Legend of Zeldaの画面遷移は文書化されていないNESの機能を使用します</a></li>
<li><a href="../ja460387/index.html">SELinux初心者向けガイド</a></li>
<li><a href="../ja460393/index.html">背景：Fedora Silverblueに期待すること</a></li>
<li><a href="../ja460395/index.html">機能としての分析：Pleskでデータを操作するプロセス</a></li>
<li><a href="../ja460397/index.html">WebComponentsのクイックスタート</a></li>
<li><a href="../ja460403/index.html">HugePagesの長所と短所</a></li>
<li><a href="../ja460405/index.html">隠されたゲームの仕組みが必要なのはなぜですか？</a></li>
<li><a href="../ja460409/index.html">Arduinoとキーボード（完全ガイド）</a></li>
<li><a href="../ja460411/index.html">Telegramのアニメーションステッカー用のクレイジーGIFコンバーター</a></li>
<li><a href="../ja460413/index.html">英語学習に役立つ7つの便利なサイトとアプリケーション</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>