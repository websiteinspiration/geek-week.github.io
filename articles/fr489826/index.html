<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üç¥ ü•ë üë©‚Äçüë©‚Äçüëß‚Äçüë¶ √Ä propos des m√©thodes mutables d'un objet Math en JavaScript üè∫ üë®üèæ‚Äç‚öïÔ∏è üôé</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Aujourd'hui, nous publions la traduction d'un article sur les calculs math√©matiques en JavaScript, qui est une version √©crite de la pr√©sentation de so...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>√Ä propos des m√©thodes mutables d'un objet Math en JavaScript</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/489826/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aujourd'hui, nous publions la traduction d'un article sur les calculs math√©matiques en JavaScript, qui est une version √©crite de la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pr√©sentation</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de son auteur sur </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;">WaffleJS</font></a><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Et cette d√©claration elle-m√™me √©tait un peu la continuation de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cette</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> conversation sur Twitter.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c50/bea/705/c50bea705dc18becfec75951a06de4df.jpg"></div></a><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Enseignement des math√©matiques</font></font></font></i><br>
<a name="habracut"></a><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Int√©r√™t pour les math√©matiques</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout a commenc√© avec mon √©ducation math√©matique, dont la r√©ception a √©t√© quelque peu retard√©e. Quand j'ai √©tudi√© l'informatique, je pouvais communiquer avec des professeurs de math√©matiques de classe mondiale, mais j'ai rat√© cette occasion. Je n'aimais pas les math√©matiques: les sujets √©tudi√©s √©taient tr√®s loin de la pratique. De plus, j'√©tais d√©j√† d√©s√©quilibr√© par un programme de formation informatique profond√©ment th√©orique. J'ai alors cru qu'elle √©tait divorc√©e de la vie et, pour la plupart, je continue de le penser. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais maintenant, quelques ann√©es apr√®s avoir termin√© mes √©tudes, une soif d'apprendre les math√©matiques s'est r√©veill√©e en moi. J'ai √©t√© inspir√© par l'effet que m√™me une petite application des connaissances math√©matiques peut avoir sur mon travail et sur mon hobby. Mais je n'avais pas de plan d'√©tude clair.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Puis, en 2012, j'ai trouv√© un moyen d'√©tudier les math√©matiques en commen√ßant √† travailler sur le projet </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Simple Statistics</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Depuis lors, j'ai d√©velopp√© et soutenu ce projet. Maintenant, il inclut des impl√©mentations de nombreux algorithmes, il s'est av√©r√© √™tre l'une des </font><font style="vertical-align: inherit;">biblioth√®ques math√©matiques math√©matiques </font><font style="vertical-align: inherit;">les plus ¬´ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√©toil√©es</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ¬ª. Et, apparemment, les gens utilisent vraiment cette biblioth√®que. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais j'ai commenc√© √† travailler en 2012. Si nous parlons de l'√©volution de la technologie au cours de cette p√©riode, c'√©tait il y a tr√®s, tr√®s longtemps. Depuis lors, 8 versions LTS de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Node.js</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ont √©t√© publi√©es </font><font style="vertical-align: inherit;">. Depuis lors, JavaSript lui-m√™me et les environnements dans lesquels les programmes √©crits dans ce langage fonctionnent ont beaucoup chang√©. En 2012, la biblioth√®que React n'existait pas encore, alors le premier commit sur le projet Babel n'√©tait pas encore fait.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5d8/832/415/5d8832415ee3bf56c1f3a18e294f39fb.jpg"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le passage du temps</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Au fil des ans, j'ai remarqu√© que mes tests se sont √©cras√©s lors de la mise √† jour de Node.js. </font><font style="vertical-align: inherit;">Par exemple, je pourrais avoir quelque chose comme ce test:</font></font><br>
<br>
<pre><code class="javascript hljs">t.equal(ss.gamma(<span class="hljs-number">11.54</span>), <span class="hljs-number">13098426.039156161</span>);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ce test fonctionne correctement dans Node.js v10, mais se casse dans Node.js v12. </font><font style="vertical-align: inherit;">Et ici, ce n'est pas une m√©thode super compliqu√©e qui est test√©e: la fonction est </font></font><code>gamma</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">impl√©ment√©e √† l'aide de fonctions JavaScript standard - </font></font><code>Math.pow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>Math.sqrt</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et </font></font><code>Math.sin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arithm√©tique</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je sais √† quoi vous pouvez penser ici: l'arithm√©tique. </font><font style="vertical-align: inherit;">Sur Twitter, des discussions anim√©es √©clatent p√©riodiquement en raison des r√©sultats du calcul de l'expression suivante:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-number">0.1</span> + <span class="hljs-number">0.2</span> = <span class="hljs-number">0.30000000000000004</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais, comme je l'ai d√©j√† </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√©crit</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , tous les langages de programmation populaires se comportent de cette fa√ßon, m√™me les plus d√©mod√©s et p√©dants comme Haskell. </font><font style="vertical-align: inherit;">L'arithm√©tique en virgule flottante peut sembler √©trange, mais ils se comportent de la m√™me mani√®re, leur comportement est bien document√©. </font><font style="vertical-align: inherit;">A savoir, nous parlons de la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">norme IEEE 754</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , dont les exigences sont strictement impl√©ment√©es dans les langages de programmation. </font><font style="vertical-align: inherit;">Le probl√®me n'est donc pas arithm√©tique: la mise en ≈ìuvre de l'addition, de la soustraction, de la division et de la multiplication dans les langages, la programmation peut √™tre dite ¬´grav√©e dans la pierre¬ª.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Objet math√©matique</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mon probl√®me √©tait dans l'objet JavaScript standard </font></font><code>Math</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">En particulier, dans toutes les </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">m√©thodes de</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> cet objet. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Des techniques telles que </font></font><code>Math.sin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>Math.cos</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>Math.exp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>Math.pow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>Math.tan</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- sont les ingr√©dients de </font><font style="vertical-align: inherit;">base pour </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">g√©om√©triques</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> calculs et autres. </font><font style="vertical-align: inherit;">Quand j'ai compris cela, j'ai commenc√© √† √©tudier s√©par√©ment les changements dans le comportement des m√©thodes de base de l'objet </font></font><code>Math</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dans diff√©rentes versions de Node.js. </font><font style="vertical-align: inherit;">Voici quelques exemples. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Calcul </font></font><code>Math.tanh(0.1)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">// Node 4</span>
<span class="hljs-number">0.09966799462495590234</span>
<span class="hljs-comment">// Node 6</span>
<span class="hljs-number">0.09966799462495581907</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Calcul </font></font><code>Math.pow(1/3, 3)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">// Node 10</span>
<span class="hljs-number">0.03703703703703703498</span>
<span class="hljs-comment">// Node 12</span>
<span class="hljs-number">0.03703703703703702804</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pire encore, ce probl√®me n'est pas seulement apparent dans Node.js. </font><font style="vertical-align: inherit;">La m√™me chose se produit dans les navigateurs et dans d'autres environnements qui prennent en charge JavaScript. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cela nous am√®ne √† la question suivante: qu'est-ce que le calcul math√©matique?</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a45/45e/f7c/a4545ef7cf6e282546aee3ea506d762f.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Repr√©sentation graphique des calculs</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Les m√©thodes trigonom√©triques sont faciles √† visualiser. Si vous avez un seul cercle et plusieurs mois de lyc√©e √† votre disposition, alors vous savez que le cosinus et le sinus sont les coordonn√©es d'un certain point sur le bord du cercle, et que les graphiques des fonctions sin et cos ressemblent √† des vagues. En fait, au lyc√©e, ils √©tudient la d√©rivation de ces valeurs, mais la m√©thode utilis√©e pour cela - la</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> s√©rie Taylor</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - repose sur une s√©rie infinie, et il n'est pas facile pour un ordinateur de r√©soudre de tels probl√®mes.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voici ce que vous pouvez apprendre de</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Wikipedia</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">concernant l'algorithme de calcul du sinus: ¬´Il n'y a pas d'algorithme standard pour calculer le sinus. IEEE 754-2008, la norme la plus utilis√©e pour les calculs en virgule flottante, n'affecte pas le calcul des fonctions trigonom√©triques comme un sinus. " </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les ordinateurs utilisent de nombreuses approximations et algorithmes diff√©rents pour effectuer des calculs, quelque chose comme </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CORDIC</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , toutes sortes de trucs d√©licats et de tables de recherche. Toute cette h√©t√©rog√©n√©it√© explique la pr√©sence de nombreuses </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">biblioth√®ques fastmath</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sur GitHub </font><font style="vertical-align: inherit;">. Le fait est qu'il existe de nombreuses fa√ßons de mettre en ≈ìuvre la m√©thode </font></font><code>Math.sin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Et d'autres fonctions aussi. Par exemple, comme vous le </font><font style="vertical-align: inherit;">savez, Quake III Arena utilis√© un </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">plus rapide</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">remplacement de la m√©thode standard de calcul de la racine carr√©e inverse pour acc√©l√©rer le rendu. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En cons√©quence, les calculs math√©matiques sont le r√©sultat de la mise en ≈ìuvre de certains algorithmes. En pratique, de nombreux algorithmes courants et leurs variantes sont utilis√©s. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La sp√©cification JavaScript, au lieu de sp√©cifier l'algorithme particulier √† utiliser dans les impl√©mentations de langage, donne aux impl√©mentations une grande marge de man≈ìuvre en termes de fonctions utilis√©es dans les calculs math√©matiques. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voici ce que dit la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">norme</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √† ce sujet </font><font style="vertical-align: inherit;">(ECMA-262, 10 √©dition, section 20.2.2):</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
"Le comportement des fonctions acos, acosh, asin, asinh, atan, atanh, atan2, cbrt, cos, cosh, exp, expm1, hypot, log, log1p, log2, log10, pow, random, sin, sinh, sqrt, tan et tanh il n'est pas enti√®rement d√©crit ici, √† l'exception des exigences concernant le retour de certains r√©sultats pour des valeurs sp√©cifiques des arguments, qui sont des cas limites notables. " </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je ne sais pas comment fonctionnent les activit√©s internes des membres du comit√© responsable de la norme ECMA-262, mais je pense qu'ils ont √©labor√© la norme afin qu'il n'y ait pas de crise de compatibilit√© dans JavaScript si Intel ou AMD √©mettaient de nouvelles instructions math√©matiques ultrarapides dans leurs nouveaux processeurs.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En raison du fait qu'il existe de nombreux interpr√©teurs JavaScript largement utilis√©s, du fait que JavaScript est souvent utilis√© dans les navigateurs, et entre les navigateurs, il y a toujours quelque chose comme la concurrence, et du fait que m√™me les impl√©mentations JavaScript populaires sont sous pression constante et forc√© d'√©voluer rapidement, offrant les meilleures performances ... √† cause de tout cela, nous avons ce que nous avons. </font><font style="vertical-align: inherit;">Quiconque utilise JavaScript rencontrera r√©guli√®rement le fait que dans diff√©rentes impl√©mentations les r√©sultats des calculs math√©matiques effectu√©s au moyen de l'objet </font></font><code>Math</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sont diff√©rents. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ce n'est pas aussi significatif dans d'autres langages interpr√©t√©s, car ils ont g√©n√©ralement des impl√©mentations ¬´canoniques¬ª. </font><font style="vertical-align: inherit;">Par exemple, cela est vrai pour l'interpr√©teur Python.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O√π sont effectu√©s les calculs?</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Examinons maintenant de plus pr√®s o√π les calculs sont effectu√©s. </font><font style="vertical-align: inherit;">Dans le cas de JavaScript, il existe trois domaines dans lesquels les calculs math√©matiques de base sont effectu√©s:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CPU.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Interpr√©teur de langage (code C ++ et C d'une impl√©mentation JavaScript sp√©cifique).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Code JavaScript, par exemple, code pour les biblioth√®ques sp√©cialis√©es.</font></font></li>
</ol><br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ñç1. </font><font style="vertical-align: inherit;">CPU</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La premi√®re id√©e qui m'est venue √† l'esprit lorsque j'ai pens√© aux endroits o√π les calculs sont effectu√©s √©tait que les calculs sont effectu√©s dans le processeur. J'ai sugg√©r√© que puisque les processeurs impl√©mentent des calculs arithm√©tiques, ils peuvent √©galement impl√©menter des calculs plus complexes. Il s'est av√©r√© que les processeurs ont des instructions pour effectuer des calculs trigonom√©triques et autres, mais ces instructions sont rarement utilis√©es. Par exemple, l'impl√©mentation du calcul du sinus dans les processeurs avec une architecture x86 n'√©tait pas tr√®s populaire, car cette impl√©mentation ne s'av√®re pas n√©cessairement plus rapide que les impl√©mentations logicielles (celles qui utilisent des op√©rations arithm√©tiques de processeur). De plus, il n'est pas n√©cessairement plus pr√©cis que les impl√©mentations logicielles. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Intel a √©galement subi une honte en raison de la tr√®s forte</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">surestimation de la</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pr√©cision des op√©rations trigonom√©triques dans la documentation. </font><font style="vertical-align: inherit;">De telles erreurs sont particuli√®rement tragiques du fait qu'une puce, contrairement √† un programme, ne peut pas √™tre corrig√©e.</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ñç2. </font><font style="vertical-align: inherit;">Interpr√®te de langue</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C'est ainsi que les sous-syst√®mes informatiques fonctionnent dans la plupart des impl√©mentations JavaScript. </font><font style="vertical-align: inherit;">Ils impl√©mentent ces sous-syst√®mes de diff√©rentes mani√®res.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les moteurs V8 et SpiderMonkey utilisent des ports de biblioth√®que </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fdlibm</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pour les calculs </font><font style="vertical-align: inherit;">, qui sont l√©g√®rement diff√©rents. </font><font style="vertical-align: inherit;">Cette biblioth√®que, √©crite √† l'origine chez Sun Microsystems, a √©t√© transmise de g√©n√©ration en g√©n√©ration.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JavaScriptCore (Safari) utilise la biblioth√®que cmath pour effectuer la plupart des op√©rations.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Internet Explorer utilise √† la fois cmath et certains blocs de code √©crits en </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">assembleur</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Ici, m√™me des m√©thodes trigonom√©triques de processeurs ont √©t√© utilis√©es - dans le cas o√π le navigateur √©tait compil√© pour des processeurs ayant des instructions similaires.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour des raisons historiques, les outils utilis√©s pour effectuer des calculs dans diff√©rents moteurs JS ont chang√©. </font><font style="vertical-align: inherit;">Ainsi, V8 a utilis√© sa propre solution pour les calculs, puis a utilis√© le </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">port JavaScript</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> fdlibm, puis seulement la version C de fdlibm.</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ñç Pourquoi est-ce un probl√®me?</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le point ici est que tout cela r√©duit la capacit√© de JavaScript √† produire des r√©sultats uniformes pour r√©soudre tous les probl√®mes impliquant des calculs math√©matiques. </font><font style="vertical-align: inherit;">Cela est particuli√®rement difficile pour la science des donn√©es. </font><font style="vertical-align: inherit;">J'aimerais que JavaScript soit mieux adapt√© pour effectuer des calculs de science des donn√©es dans un navigateur. </font><font style="vertical-align: inherit;">De plus, l'incapacit√© √† produire des r√©sultats uniformes entra√Æne l'aggravation de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">la crise de reproductibilit√©</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , caract√©ristique de toutes les sciences. </font><font style="vertical-align: inherit;">Cela ne veut pas mentionner certains autres probl√®mes JavaScript, tels que les fonctionnalit√©s de saisie de nombres et le manque d'une biblioth√®que largement utilis√©e pour travailler avec des trames de donn√©es.</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ñç3. </font><font style="vertical-align: inherit;">Utilisation de biblioth√®ques sp√©cialis√©es</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il existe un moyen fiable pour nous de faire les calculs en JavaScript. Elle consiste √† utiliser des biblioth√®ques sp√©cialis√©es. Ainsi, la biblioth√®que </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">stdlib</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> impl√©mente des calculs de haut niveau en utilisant uniquement des op√©rations arithm√©tiques. Les calculs arithm√©tiques sont enti√®rement d√©crits dans les sp√©cifications, ils sont standard, donc les r√©sultats retourn√©s par stdlib nous donnent, quelle que soit la plateforme sur laquelle le code est ex√©cut√©, des r√©sultats compl√®tement uniformes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ceci est r√©alis√© au prix de la complexit√© et de la rapidit√© des d√©cisions. Les m√©thodes stdlib ne sont pas aussi rapides que les m√©thodes int√©gr√©es. De plus, afin de "simplement compter le sinus", vous devez connecter une biblioth√®que enti√®re au projet.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais, si vous pensez plus largement, c'est tout √† fait normal. La plate-forme WebAssembly, par exemple, ne donne au programmeur aucun moyen d'effectuer des calculs math√©matiques de haut niveau. Dans la documentation correspondante, il est recommand√© d'inclure ind√©pendamment les impl√©mentations des m√©canismes correspondants dans vos propres modules: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬´WebAssembly n'inclut pas ses propres impl√©mentations de fonctions math√©matiques - comme sin, cos, exp, pow, etc. La strat√©gie de WebAssembly pour ces fonctions est de permettre aux d√©veloppeurs de les impl√©menter en tant qu'outils de biblioth√®que dans la plate-forme WebAssembly elle-m√™me (notez que les instructions sin et cos de la plate-forme x86 sont lentes et inexactes, et de nos jours, en tout cas, essayez de ne pas utiliser). "</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C'est ainsi que les langages compil√©s fonctionnaient toujours: lorsqu'un programme √©crit en C est compil√©, les m√©thodes import√©es de </font></font><code>math.h</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sont incluses dans le programme compil√©.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Utilisation de la valeur epsilon</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si quelqu'un ne souhaite pas inclure la biblioth√®que stdlib dans son projet JavaScript pour effectuer des calculs, mais doit tester le code qui effectue des calculs complexes, il devrait probablement recourir √† la m√©thode d√©j√† utilis√©e dans la biblioth√®que de statistiques simples. Il s'agit d'utiliser une valeur </font></font><code>epsilon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">qui d√©finit les limites dans lesquelles les diff√©rences de nombres ne sont pas prises en compte. Si nous consid√©rons les </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">options d'</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> utilisation du symbole epsilon en math√©matiques, nous pouvons dire que j'en parle comme d'une ¬´petite valeur positive arbitraire¬ª. Simple-statistics </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">utilise</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> la valeur epsilon d'√©gale </font></font><code>0.0001</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous avez besoin de savoir si deux nombres sont √©gaux, une condition du formulaire est v√©rifi√©e</font></font><code>Math.abs(result ‚Äî expected) &lt; epsilon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Si cette condition s'av√®re √™tre vraie, alors nous pouvons dire que la diff√©rence entre les nombres se situe dans la plage donn√©e et les consid√©rer comme √©gaux.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ajouts</font></font></font></h2><br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ñç Pr√©cision</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les commentateurs sur Twitter ont indiqu√© que les variations des r√©sultats obtenus dans l'exemple sont en dehors de la plage de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chiffres significatifs</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> du nombre √† virgule flottante. </font><font style="vertical-align: inherit;">D'un point de vue technique, c'est correct, et cela signifie que vous pouvez trouver un moyen plus pr√©cis de comparer les nombres que celui qui utilise la valeur </font></font><code>epsilon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Mais en pratique, la m√™me histoire ici - les chiffres √† la fin du nombre affectent le r√©sultat et introduisent des inexactitudes dans le r√©sultat final. </font><font style="vertical-align: inherit;">De plus, les exemples donn√©s ici ne sont pas exhaustifs. </font><font style="vertical-align: inherit;">Le fait est que les fonctionnalit√©s d'impl√©mentation des interpr√©teurs JavaScript peuvent, sans s'√©carter de la sp√©cification, conduire √† l'apparition de diff√©rences dans la plupart des r√©sultats num√©riques.</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ñçJavaScript</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je ne veux pas critiquer JavaScript. </font><font style="vertical-align: inherit;">Je crois que JavaScript a fait un compromis justifiable, compte tenu de l'incertitude de l'avenir et du nombre de plates-formes sur lesquelles les impl√©mentations de langage sont cr√©√©es. </font><font style="vertical-align: inherit;">Je dois dire qu'il est tr√®s difficile de comparer directement JavaScript et d'autres langages. </font><font style="vertical-align: inherit;">Le point est l'√©cosyst√®me JavaScript. </font><font style="vertical-align: inherit;">Le fait qu'il existe en m√™me temps de nombreux interpr√®tes de la m√™me langue est totalement atypique pour les autres langues. </font><font style="vertical-align: inherit;">Et cela, en plus, est l'une des principales forces de JavaScript. </font><font style="vertical-align: inherit;">De plus, on ne peut manquer de dire que ce sont des ph√©nom√®nes d'un plan compl√®tement diff√©rent de ceux qui se produisent dans la langue elle-m√™me. </font><font style="vertical-align: inherit;">Et JavaScript change au fil du temps et </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">beaucoup de bonnes choses y</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> apparaissent </font><font style="vertical-align: inherit;">.</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TdStdlib ou epsilon?</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je pense qu'en pratique, dans la plupart des cas, il vaut la peine d'utiliser l'approche qui implique l'utilisation de la valeur epsilon. </font><font style="vertical-align: inherit;">La biblioth√®que stdlib est un merveilleux outil puissant, mais le prix d'inclure une biblioth√®que suppl√©mentaire pour les calculs math√©matiques dans le projet peut √™tre assez √©lev√©. </font><font style="vertical-align: inherit;">Et dans la plupart des cas, les petites diff√©rences dans les r√©sultats des calculs n'ont pas d'importance pour les applications.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sommaire</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je voudrais ici tirer des conclusions de ce qui pr√©c√®de et partager quelques r√©flexions.</font></font><br>
<br>
<ol>
<li>,     ,   ,    .         .     ‚Äî    ¬´ ¬ª. ,   ,   ,   <code>Math.sin</code>   ,   ,      ,      .      ,   ,      ,   ,   ,   .    ,       ,   ,       .</li>
<li>      . ,   ,       Node.js,         ,    ,     simply-statistics.    ,    , ,     ,      .  ‚Äî    .</li>
<li>  ,    .    V8,      ,   .    ,    .    , ,         ,     .</li>
</ol><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chers lecteurs! </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Avez-vous rencontr√© des probl√®mes concernant les modifications des r√©sultats de calcul lors de la mise √† niveau vers de nouvelles versions de Node.js?</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr489812/index.html">Configurer LDAP dans Oracle BI</a></li>
<li><a href="../fr489818/index.html">JavaScript et plus: 4 approches cr√©atives pour mesurer le temps dans les navigateurs</a></li>
<li><a href="../fr489820/index.html">Styliser le bon vieux bouton</a></li>
<li><a href="../fr489822/index.html">G√©n√©ration de nombres pseudo-al√©atoires √† l'aide d'un automate cellulaire: r√®gle 30</a></li>
<li><a href="../fr489824/index.html">7 outils de surveillance de la s√©curit√© du cloud open source √† conna√Ætre</a></li>
<li><a href="../fr489828/index.html">Travailler avec GeoJSON dans Node.js: une introduction pratique</a></li>
<li><a href="../fr489832/index.html">Perles atomiques artificielles: manipulations avec des macrocycles</a></li>
<li><a href="../fr489834/index.html">Int√©grez votre appareil Smart Home dans l'√©cosyst√®me SmartThings</a></li>
<li><a href="../fr489836/index.html">Lidars du futur: 11 000 lasers au lieu de 128</a></li>
<li><a href="../fr489838/index.html">Fuite de m√©moire c√¥t√© serveur Nuxt √† l'aide de SSR (rendu c√¥t√© serveur)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>