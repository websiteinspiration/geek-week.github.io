<!doctype html>
<html class="no-js" lang="hi">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯОК ЁЯСл ЁЯСиЁЯП╛тАНЁЯЪТ рдПрд╕рдХреНрдпреВрдПрд▓ рдкреНрд░рд╢реНрдиреЛрдВ рдХреЗ рд▓рд┐рдП рд╡реНрдпрдВрдЬрдиреЛрдВ ЁЯСитАНЁЯСз ЁЯСиЁЯП╛тАНтЪХя╕П ЁЯТг</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рдХреБрдЫ рдорд╣реАрдиреЗ рдкрд╣рд▓реЗ, рд╣рдордиреЗ PostgreSQL рдХреНрд╡реЗрд░реА рдпреЛрдЬрдирд╛рдУрдВ рдХреЛ рдкрд╛рд░реНрд╕ рдХрд░рдиреЗ рдФрд░ рд╡рд┐рдЬрд╝реБрдЕрд▓рд╛рдЗрдЬрд╝ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рд╕реЗрд╡рд╛ , рд╕рдордЭрд╛рдиреЗ рдХреА рдШреЛрд╖рдгрд╛ рдХреА ред 
 
 рдкрд┐рдЫрд▓реЗ рд╕рдордп рдореЗрдВ, рдЖрдк...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>рдПрд╕рдХреНрдпреВрдПрд▓ рдкреНрд░рд╢реНрдиреЛрдВ рдХреЗ рд▓рд┐рдП рд╡реНрдпрдВрдЬрдиреЛрдВ</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/tensor/blog/492694/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреБрдЫ рдорд╣реАрдиреЗ рдкрд╣рд▓реЗ, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╣рдордиреЗ</font></font><i><b><font style="vertical-align: inherit;"></font></b></i></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> PostgreSQL </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреНрд╡реЗрд░реА рдпреЛрдЬрдирд╛рдУрдВ рдХреЛ рдкрд╛рд░реНрд╕ рдХрд░рдиреЗ рдФрд░ рд╡рд┐рдЬрд╝реБрдЕрд▓рд╛рдЗрдЬрд╝ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдПрдХ рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;">рд╕реЗрд╡рд╛</font></a><font style="vertical-align: inherit;"> , </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><i><b><font style="vertical-align: inherit;">рд╕рдордЭрд╛рдиреЗ</font></b></i></a><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"> рдХреА рдШреЛрд╖рдгрд╛ </font></a><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;">рдХреА</font></a><font style="vertical-align: inherit;"> ред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдкрд┐рдЫрд▓реЗ рд╕рдордп рдореЗрдВ, рдЖрдк рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдЗрд╕реЗ 6,000 рд╕реЗ рдЕрдзрд┐рдХ рдмрд╛рд░ рдЙрдкрдпреЛрдЧ рдХрд░ рдЪреБрдХреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдПрдХ рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рдХрд╛рд░реНрдп рдХрд┐рд╕реА рдХрд╛ рдзреНрдпрд╛рди рдирд╣реАрдВ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ - рдпреЗ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕рдВрд░рдЪрдирд╛рддреНрдордХ рд╕рдВрдХреЗрдд рд╣реИрдВ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЬреЛ рдХреБрдЫ рдЗрд╕ рддрд░рд╣ рджрд┐рдЦрддреЗ рд╣реИрдВ: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/jp/66/1s/jp661svgeudxc0wvgnzqoyjffbc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЙрдиреНрд╣реЗрдВ рд╕реБрдиреЗрдВ рдФрд░ рдЖрдкрдХреЗ рдЕрдиреБрд░реЛрдз "рдЪрд┐рдХрдиреА рдФрд░ рд░реЗрд╢рдореА рд╣реЛ рдЬрд╛рдПрдВрдЧреЗред" :) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд▓реЗрдХрд┐рди рдЧрдВрднреАрд░рддрд╛ рд╕реЗ, рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЗ рд╕рдВрджрд░реНрдн рдореЗрдВ рдЕрдиреБрд░реЛрдз рдХреЛ рдзреАрдорд╛ рдФрд░ "рд▓рд╕рджрд╛рд░" рдмрдирд╛рдиреЗ рд╡рд╛рд▓реА рдХрдИ рд╕реНрдерд┐рддрд┐рдпрд╛рдВ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╡рд┐рд╢рд┐рд╖реНрдЯ рд╣реИрдВ рдФрд░ рдЗрдиреНрд╣реЗрдВ рдпреЛрдЬрдирд╛ рдХреА рд╕рдВрд░рдЪрдирд╛ рдФрд░ рдЖрдВрдХрдбрд╝реЛрдВ рд╕реЗ рдкрд╣рдЪрд╛рдирд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ред</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ, рдкреНрд░рддреНрдпреЗрдХ рд╡реНрдпрдХреНрддрд┐рдЧрдд рдбреЗрд╡рд▓рдкрд░ рдХреЛ рдЕрдкрдиреЗ рдЖрдк рдкрд░ рдПрдХ рдЕрдиреБрдХреВрд▓рди рд╡рд┐рдХрд▓реНрдк рдХреА рддрд▓рд╛рд╢ рдирд╣реАрдВ рдХрд░рдиреА рд╣реЛрдЧреА, рдХреЗрд╡рд▓ рдЕрдкрдиреЗ рдЕрдиреБрднрд╡ рдкрд░ рдирд┐рд░реНрднрд░ рдХрд░рддреЗ рд╣реБрдП - рд╣рдо рдЙрд╕реЗ рдмрддрд╛ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ рдпрд╣рд╛рдВ рдХреНрдпрд╛ рд╣реЛ рд░рд╣рд╛ рд╣реИ, рдЗрд╕рдХрд╛ рдХрд╛рд░рдг рдХреНрдпрд╛ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ, рдФрд░ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕рдорд╛рдзрд╛рди рдХреИрд╕реЗ рдкреНрд░рд╛рдкреНрдд</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ </font><font style="vertical-align: inherit;">ред </font><font style="vertical-align: inherit;">рдЬреЛ рд╣рдордиреЗ рдХрд┐рдпрд╛ред </font></font><br>
<br>
<img src="https://habrastorage.org/webt/up/br/mr/upbrmra7tcpkdnygwg0abfhbqse.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЖрдЗрдП рдЗрди рдорд╛рдорд▓реЛрдВ рдкрд░ рдПрдХ рдирдЬрд╝рд░ рдбрд╛рд▓реЗрдВ - рд╡реЗ рдХреИрд╕реЗ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВ рдФрд░ рд╡реЗ рдХрд┐рди рд╕рд┐рдлрд╛рд░рд┐рд╢реЛрдВ рдХреЛ рдЖрдЧреЗ рдмрдврд╝рд╛рддреЗ рд╣реИрдВред</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╡рд┐рд╖рдп рдореЗрдВ рдмреЗрд╣рддрд░ рдЬрд╛рдирдХрд╛рд░реА рдХреЗ рд▓рд┐рдП, рдЖрдк рдкрд╣рд▓реЗ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PGConf.Russia 2020 рдкрд░ рдореЗрд░реА рд░рд┐рдкреЛрд░реНрдЯ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╕реЗ рд╕рдВрдмрдВрдзрд┐рдд рдмреНрд▓реЙрдХ рдХреЛ рд╕реБрди рд╕рдХрддреЗ рд╣реИрдВ </font><font style="vertical-align: inherit;">, рдФрд░ рдЙрд╕рдХреЗ рдмрд╛рдж рд╣реА рдкреНрд░рддреНрдпреЗрдХ рдЙрджрд╛рд╣рд░рдг рдХреЗ рд╡рд┐рд╕реНрддреГрдд рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдкрд░ рдЬрд╛ рд╕рдХрддреЗ рд╣реИрдВ:</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/jHqaLp040rY" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<h2><font color="#c00000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"># 1: рд╕реВрдЪрдХрд╛рдВрдХ "рдЕрдВрдбрд░рд╕реНрдХреЛрд░рд┐рдВрдЧ"</font></font></font></h2><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЬрдм рдЙрдарддрд╛ рд╣реИ</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдХреНрд▓рд╛рдЗрдВрдЯ "рдПрд▓рдПрд▓рд╕реА рдмреЗрд▓" рдХреЗ рд▓рд┐рдП рдЕрдВрддрд┐рдо рдЪрд╛рд▓рд╛рди рджрд┐рдЦрд╛рдПрдВред</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреИрд╕реЗ рдкрд╣рдЪрд╛рдиреЗрдВ?</font></font></h4><br>
<pre><code class="plaintext hljs">-&gt; Limit<font></font>
   -&gt; Sort<font></font>
      -&gt; Index [Only] Scan [Backward] | Bitmap Heap Scan<font></font>
</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрдиреБрд╢рдВрд╕рд╛рдПрдБ</font></font></h4><br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЦреЗрддреЛрдВ рдХреЛ рдЫрд╛рдБрдЯрдиреЗ рдХреЗ рд▓рд┐рдП</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
рдкреНрд░рдпреБрдХреНрдд рд╕реВрдЪрдХрд╛рдВрдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ </font><font style="vertical-align: inherit;">ред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЙрджрд╛рд╣рд░рдг:</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> tbl <span class="hljs-keyword">AS</span>
<span class="hljs-keyword">SELECT</span>
  generate_series(<span class="hljs-number">1</span>, <span class="hljs-number">100000</span>) pk  <span class="hljs-comment">-- 100K ""</span>
, (random() * <span class="hljs-number">1000</span>)::<span class="hljs-built_in">integer</span> fk_cli; <span class="hljs-comment">-- 1K   </span><font></font>
<font></font>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">INDEX</span> <span class="hljs-keyword">ON</span> tbl(fk_cli); <span class="hljs-comment">--   foreign key</span><font></font>
<font></font>
<span class="hljs-keyword">SELECT</span><font></font>
  *<font></font>
<span class="hljs-keyword">FROM</span><font></font>
  tbl<font></font>
<span class="hljs-keyword">WHERE</span>
  fk_cli = <span class="hljs-number">1</span> <span class="hljs-comment">--    </span>
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span>
  pk <span class="hljs-keyword">DESC</span> <span class="hljs-comment">--    "" </span>
<span class="hljs-keyword">LIMIT</span> <span class="hljs-number">1</span>;</code></pre><br>
<img src="https://habrastorage.org/webt/nn/u1/wp/nnu1wpmpqryyy3rrpmhpofv1izk.png"><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[рд╕реНрдкрд╖реНрдЯреАрдХрд░рдг рдкрд░ рджреЗрдЦреЗрдВ ред.tensor.ru] рдЖрдк</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
рддреБрд░рдВрдд рдзреНрдпрд╛рди рджреЗ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ рд╕реВрдЪрдХрд╛рдВрдХ 100 рд╕реЗ рдЕрдзрд┐рдХ рдкреНрд░рд╡рд┐рд╖реНрдЯрд┐рдпреЛрдВ рдХреЛ рдШрдЯрд╛рддрд╛ рд╣реИ, рдЬреЛ рддрдм рдЫрд╛рдВрдЯреЗ рдЧрдП рдереЗ, рдФрд░ рдлрд┐рд░ рдХреЗрд╡рд▓ рдПрдХ рд╣реА рдмрдЪрд╛ рдерд╛ред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╣рдо рддрдп рдХрд░рддреЗ рд╣реИрдВ:</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">INDEX</span> tbl_fk_cli_idx;
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">INDEX</span> <span class="hljs-keyword">ON</span> tbl(fk_cli, pk <span class="hljs-keyword">DESC</span>); <span class="hljs-comment">--   </span>
</code></pre><br>
<img src="https://habrastorage.org/webt/gv/ny/ni/gvnyniyvlmcsfk-f2qk4voomvzo.png"><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[рд╕реНрдкрд╖реНрдЯреАрдХрд░рдг рдкрд░ рджреЗрдЦреЗрдВ редensor.ru]</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐ рдЗрд╕ рддрд░рд╣ рдХреЗ рдПрдХ рдЖрджрд┐рдо рдирдореВрдиреЗ рдХреЗ рд╕рд╛рде - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8.5 рдЧреБрдирд╛ рддреЗрдЬ рдФрд░ 33 рдЧреБрдирд╛ рдХрдо рд░реАрдбрд┐рдВрдЧ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ред </font><font style="vertical-align: inherit;">рдкреНрд░рднрд╛рд╡ рдЖрдкрдХреЗ рджреНрд╡рд╛рд░рд╛ рдкреНрд░рддреНрдпреЗрдХ рдореВрд▓реНрдп рдХреЗ рд▓рд┐рдП рдЕрдзрд┐рдХ "рддрдереНрдп" рджрд┐рдЦрд╛рдИ рджреЗрдЧрд╛ </font></font><code>fk</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдореИрдВ рдзреНрдпрд╛рди рджреЗрддрд╛ рд╣реВрдВ рдХрд┐ рдЗрд╕ рддрд░рд╣ рдХреЗ рд╕реВрдЪрдХрд╛рдВрдХ "рдЙрдкрд╕рд░реНрдЧ" рдХреЗ рд░реВрдк рдореЗрдВ рдХрд╛рдо рдХрд░реЗрдВрдЧреЗ, рдЬреЛ рдЕрдиреНрдп рдкреНрд░рд╢реНрдиреЛрдВ рдХреЗ рд▓рд┐рдП рдкрд┐рдЫрд▓реЗ рдПрдХ рд╕реЗ рднреА рдмрджрддрд░ рдирд╣реАрдВ рд╣реИ </font></font><code>fk</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, рдЬрд╣рд╛рдВ </font></font><code>pk</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреЛрдИ </font><font style="vertical-align: inherit;">рдЫрдБрдЯрд╛рдИ </font><font style="vertical-align: inherit;">рдирд╣реАрдВ рдереА рдФрд░ рдХреЛрдИ </font><font style="vertical-align: inherit;">рдЫрдБрдЯрд╛рдИ </font><font style="vertical-align: inherit;">рдирд╣реАрдВ рдереА (рдЗрд╕рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЕрдзрд┐рдХ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдореЗрд░реЗ рд▓реЗрдЦ рдореЗрдВ рдЕрдХреБрд╢рд▓ рд╕реВрдЪрдХрд╛рдВрдХ рдЦреЛрдЬрдиреЗ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдкрд╛рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ </font><font style="vertical-align: inherit;">)ред </font><font style="vertical-align: inherit;">рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ, рдпрд╣ </font><font style="vertical-align: inherit;">рдЗрд╕ рдХреНрд╖реЗрддреНрд░ рдореЗрдВ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдПрдХ рд╕реНрдкрд╖реНрдЯ рд╡рд┐рджреЗрд╢реА рдХреБрдВрдЬреА рдХреЗ рд▓рд┐рдП</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╕рд╛рдорд╛рдиреНрдп </font><b><font style="vertical-align: inherit;">рд╕рдорд░реНрдерди</font></b><font style="vertical-align: inherit;"> рдкреНрд░рджрд╛рди рдХрд░реЗрдЧрд╛ </font><font style="vertical-align: inherit;">ред</font></font><br>
<br>
<h2><font color="#c00000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"># 2: рдЗрдВрдбреЗрдХреНрд╕ рдЪреМрд░рд╛рд╣рд╛ (рдмрд┐рдЯрдореИрдк рдПрдВрдб)</font></font></font></h2><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЬрдм рдЙрдарддрд╛ рд╣реИ</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
NAO рдмрдЯрд░рдХрдк рдХреА рдУрд░ рд╕реЗ рд╕рдВрдкрдиреНрди рдЧреНрд░рд╛рд╣рдХ LLC Kolokolchik рдХреЗ рд▓рд┐рдП рд╕рднреА рдЕрдиреБрдмрдВрдз рджрд┐рдЦрд╛рдПрдВред</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреИрд╕реЗ рдкрд╣рдЪрд╛рдиреЗрдВ?</font></font></h4><br>
<pre><code class="plaintext hljs">-&gt; BitmapAnd<font></font>
   -&gt; Bitmap Index Scan<font></font>
   -&gt; Bitmap Index Scan</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрдиреБрд╢рдВрд╕рд╛рдПрдБ</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рджреЛрдиреЛрдВ рд╕реНрд░реЛрдд рд╕реЗ рдлрд╝реАрд▓реНрдб рдХреЗ рд▓рд┐рдП </font><font style="vertical-align: inherit;">
рдПрдХ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕рдордЧреНрд░ рд╕реВрдЪрдХрд╛рдВрдХ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдмрдирд╛рдПрдВ </font><font style="vertical-align: inherit;">рдпрд╛ рджреВрд╕рд░реЗ рд╕реЗ рдореМрдЬреВрджрд╛ рдлрд╝реАрд▓реНрдб рдореЗрдВ рд╕реЗ рдПрдХ рдХрд╛ рд╡рд┐рд╕реНрддрд╛рд░ рдХрд░реЗрдВред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЙрджрд╛рд╣рд░рдг:</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> tbl <span class="hljs-keyword">AS</span>
<span class="hljs-keyword">SELECT</span>
  generate_series(<span class="hljs-number">1</span>, <span class="hljs-number">100000</span>) pk      <span class="hljs-comment">-- 100K ""</span>
, (random() *  <span class="hljs-number">100</span>)::<span class="hljs-built_in">integer</span> fk_org  <span class="hljs-comment">-- 100   </span>
, (random() * <span class="hljs-number">1000</span>)::<span class="hljs-built_in">integer</span> fk_cli; <span class="hljs-comment">-- 1K   </span><font></font>
<font></font>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">INDEX</span> <span class="hljs-keyword">ON</span> tbl(fk_org); <span class="hljs-comment">--   foreign key</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">INDEX</span> <span class="hljs-keyword">ON</span> tbl(fk_cli); <span class="hljs-comment">--   foreign key</span><font></font>
<font></font>
<span class="hljs-keyword">SELECT</span><font></font>
  *<font></font>
<span class="hljs-keyword">FROM</span><font></font>
  tbl<font></font>
<span class="hljs-keyword">WHERE</span>
  (fk_org, fk_cli) = (<span class="hljs-number">1</span>, <span class="hljs-number">999</span>); <span class="hljs-comment">--    </span></code></pre><br>
<img src="https://habrastorage.org/webt/dh/y4/mz/dhy4mzknpsqyk3ejuetev5mlmiy.png"><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[рд╕реНрдкрд╖реНрдЯреАрдХрд░рдг рджреЗрдЦреЗрдВ редensor.ru]</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
рд╕рд╣реА:</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">INDEX</span> tbl_fk_org_idx;
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">INDEX</span> <span class="hljs-keyword">ON</span> tbl(fk_org, fk_cli);
</code></pre><br>
<img src="https://habrastorage.org/webt/vt/nm/2c/vtnm2csqildllccdfsffjgxu4ya.png"><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[рд╕реНрдкрд╖реНрдЯреАрдХрд░рдг рдкрд░ рджреЗрдЦреЗрдВ редensor.ru]</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
рдпрд╣рд╛рдБ рд▓рд╛рдн рдХрдо рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдмрд┐рдЯрдореИрдк рд╣реАрдк рд╕реНрдХреИрди рдЕрдкрдиреЗ рдЖрдк рдореЗрдВ рдХрд╛рдлреА рдкреНрд░рднрд╛рд╡реА рд╣реИред </font><font style="vertical-align: inherit;">рд▓реЗрдХрд┐рди рдЕрднреА рднреА </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7 рдЧреБрдирд╛ рддреЗрдЬ рдФрд░ 2.5 рдЧреБрдирд╛ рдХрдо рд░реАрдбрд┐рдВрдЧ рд╣реИ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ред</font></font><br>
<br>
<h2><font color="#c00000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"># 3: рдЗрдВрдбреЗрдХреНрд╕ рдкреВрд▓рд┐рдВрдЧ (рдмрд┐рдЯрдореИрдкрдСрд░)</font></font></font></h2><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЬрдм рдЙрдарддрд╛ рд╣реИ</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдкрд╣рд▓реЗ 20 рд╕рдмрд╕реЗ рдкреБрд░рд╛рдиреЗ "рд╕реНрд╡рдпрдВ" рдпрд╛ рдкреНрд░рд╕рдВрд╕реНрдХрд░рдг рдХреЗ рд▓рд┐рдП рдЕрдкреНрд░рдХрд╛рд╢рд┐рдд рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдФрд░ рдЙрдирдХреА рдкреНрд░рд╛рдердорд┐рдХрддрд╛ рджрд┐рдЦрд╛рдПрдВред</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреИрд╕реЗ рдкрд╣рдЪрд╛рдиреЗрдВ?</font></font></h4><br>
<pre><code class="plaintext hljs">-&gt; BitmapOr<font></font>
   -&gt; Bitmap Index Scan<font></font>
   -&gt; Bitmap Index Scan</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрдиреБрд╢рдВрд╕рд╛рдПрдБ</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╢рд░реНрддреЛрдВ рдХреЗ OR рдмреНрд▓реЙрдХреЛрдВ рдореЗрдВ рд╕реЗ рдкреНрд░рддреНрдпреЗрдХ рдХреЗ рд▓рд┐рдП рдЙрдкрд╢реНрд░реЗрдгрд┐рдпреЛрдВ рдХреЛ рд╕рдВрдпреЛрдЬрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UNION [ALL]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдХрд╛ </font><font style="vertical-align: inherit;">
рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ </font><font style="vertical-align: inherit;">ред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЙрджрд╛рд╣рд░рдг:</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> tbl <span class="hljs-keyword">AS</span>
<span class="hljs-keyword">SELECT</span>
  generate_series(<span class="hljs-number">1</span>, <span class="hljs-number">100000</span>) pk  <span class="hljs-comment">-- 100K ""</span>
, <span class="hljs-keyword">CASE</span>
    <span class="hljs-keyword">WHEN</span> random() &lt; <span class="hljs-number">1</span>::<span class="hljs-built_in">real</span>/<span class="hljs-number">16</span> <span class="hljs-keyword">THEN</span> <span class="hljs-literal">NULL</span> <span class="hljs-comment">--   1:16  ""</span>
    <span class="hljs-keyword">ELSE</span> (random() * <span class="hljs-number">100</span>)::<span class="hljs-built_in">integer</span> <span class="hljs-comment">-- 100   </span>
  <span class="hljs-keyword">END</span> fk_own;<font></font>
<font></font>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">INDEX</span> <span class="hljs-keyword">ON</span> tbl(fk_own, pk); <span class="hljs-comment">--   "  " </span><font></font>
<font></font>
<span class="hljs-keyword">SELECT</span><font></font>
  *<font></font>
<span class="hljs-keyword">FROM</span><font></font>
  tbl<font></font>
<span class="hljs-keyword">WHERE</span>
  fk_own = <span class="hljs-number">1</span> <span class="hljs-keyword">OR</span> <span class="hljs-comment">-- </span>
  fk_own <span class="hljs-keyword">IS</span> <span class="hljs-literal">NULL</span> <span class="hljs-comment">-- ...  ""</span>
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span><font></font>
  pk<font></font>
, (fk_own = <span class="hljs-number">1</span>) <span class="hljs-keyword">DESC</span> <span class="hljs-comment">--  ""</span>
<span class="hljs-keyword">LIMIT</span> <span class="hljs-number">20</span>;
</code></pre><br>
<img src="https://habrastorage.org/webt/7k/n2/d1/7kn2d1ko1hrbobs44a69hasatcs.png"><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[рд╕реНрдкрд╖реНрдЯреАрдХрд░рдг рджреЗрдЦреЗрдВ редensor.ru]</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
рд╕рд╣реА:</font></font><br>
<br>
<pre><code class="sql hljs">(
  <span class="hljs-keyword">SELECT</span><font></font>
    *<font></font>
  <span class="hljs-keyword">FROM</span><font></font>
    tbl<font></font>
  <span class="hljs-keyword">WHERE</span>
    fk_own = <span class="hljs-number">1</span> <span class="hljs-comment">--  "" 20</span>
  <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span><font></font>
    pk<font></font>
  <span class="hljs-keyword">LIMIT</span> <span class="hljs-number">20</span><font></font>
)<font></font>
<span class="hljs-keyword">UNION</span> <span class="hljs-keyword">ALL</span><font></font>
(<font></font>
  <span class="hljs-keyword">SELECT</span><font></font>
    *<font></font>
  <span class="hljs-keyword">FROM</span><font></font>
    tbl<font></font>
  <span class="hljs-keyword">WHERE</span>
    fk_own <span class="hljs-keyword">IS</span> <span class="hljs-literal">NULL</span> <span class="hljs-comment">--  "" 20</span>
  <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span><font></font>
    pk<font></font>
  <span class="hljs-keyword">LIMIT</span> <span class="hljs-number">20</span><font></font>
)<font></font>
<span class="hljs-keyword">LIMIT</span> <span class="hljs-number">20</span>; <span class="hljs-comment">--   - 20,    </span></code></pre><br>
<img src="https://habrastorage.org/webt/pa/ej/2f/paej2f1lpkzhinvlz64tvf9n8ti.png"><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[рд╕реНрдкрд╖реНрдЯреАрдХрд░рдг рдкрд░ рджреЗрдЦреЗрдВ редensor.ru]</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
рд╣рдордиреЗ рдЗрд╕ рддрдереНрдп рдХрд╛ рд▓рд╛рдн рдЙрдард╛рдпрд╛ рдХрд┐ рдкрд╣рд▓реЗ рдмреНрд▓реЙрдХ рдореЗрдВ рд╕рднреА 20 рдЖрд╡рд╢реНрдпрдХ рд░рд┐рдХреЙрд░реНрдб рддреБрд░рдВрдд рдкреНрд░рд╛рдкреНрдд рдХрд┐рдП рдЧрдП рдереЗ, рдЗрд╕рд▓рд┐рдП рджреВрд╕рд░рд╛ "рдЕрдзрд┐рдХ рдорд╣рдВрдЧрд╛" рдмрд┐рдЯрдореИрдк рд╣реАрдк рд╕реНрдХреИрди рдХреЗ рд╕рд╛рде рднреА рдкреНрд░рджрд░реНрд╢рди рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ - рдкрд░рд┐рдгрд╛рдорд╕реНрд╡рд░реВрдк </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, 22% рддреЗрдЬреА рд╕реЗред 44 рдЧреБрдирд╛ рдХрдо рдкрдарди</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> !</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╡рд┐рд╢рд┐рд╖реНрдЯ рдЙрджрд╛рд╣рд░рдгреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реБрдП</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЗрд╕ рдЕрдиреБрдХреВрд▓рди рд╡рд┐рдзрд┐ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдПрдХ рдЕрдзрд┐рдХ рд╡рд┐рд╕реНрддреГрдд рдХрд╣рд╛рдиреА </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкреЛрд╕реНрдЯрдЧреНрд░реЗрд╕реАрдХреНрдпреВрдПрд▓ рдПрдВрдЯрд┐рдкрд░реНрдЯреЗрдВрд╕</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдХреЗ рд▓реЗрдЦреЛрдВ рдореЗрдВ рдкрд╛рдИ рдЬрд╛ рд╕рдХрддреА рд╣реИ </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;">: рд╣рд╛рдирд┐рдХрд╛рд░рдХ рдЬреЛрдЗрди рдФрд░ рдУрдЖрд░</font></a><font style="vertical-align: inherit;"> рдФрд░ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкреЛрд╕реНрдЯрдЧреНрд░реЗрдХреНрдпреВрдПрд▓ рдПрдВрдЯрд┐рдкреЗрдЯрд░реНрди: рдпрд╣ рдирд╛рдо рд╕реЗ рдЦреЛрдЬ рдХреЗ рдкреБрдирд░рд╛рд╡реГрддреНрддрд┐ рд╢реЛрдзрди рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдПрдХ рдХрд╣рд╛рдиреА рд╣реИ, рдпрд╛ "рд╡рд╣рд╛рдВ рдФрд░ рд╡рд╛рдкрд╕ рдЕрдиреБрдХреВрд▓рди"</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ред </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;">рдПрд╕рдХреНрдпреВрдПрд▓ рд╣реЙрд╡реНрдЯреЛ</font></a><font style="vertical-align: inherit;"> рд▓реЗрдЦ рдореЗрдВ </font><b><font style="vertical-align: inherit;">рдХрдИ рдХреБрдВрдЬрд┐рдпреЛрдВ рджреНрд╡рд╛рд░рд╛ рдЖрджреЗрд╢рд┐рдд рдЪрдпрди</font></b></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
рдХрд╛ рдПрдХ рд╕рд╛рдорд╛рдиреНрдпреАрдХреГрдд рд╕рдВрд╕реНрдХрд░рдг </font><font style="vertical-align: inherit;">(рдФрд░ рди рдХреЗрд╡рд▓ рдХреЙрдиреНрд╕реНрдЯ / NULL рдЬреЛрдбрд╝реА рджреНрд╡рд╛рд░рд╛) рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;">: рд╣рдо рдХреНрд╡реЗрд░реА рдореЗрдВ рд╕реАрдзреЗ рд▓реВрдк рд▓рд┐рдЦрддреЗ рд╣реИрдВ, рдпрд╛ "рдПрд▓рд┐рдореЗрдВрдЯреНрд░реА рдереНрд░реА-рд╡реЗ"</font></a><font style="vertical-align: inherit;"> ред</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font></blockquote><br>
<h2><font color="#c00000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"># 4: рдмрд╣реБрдд рдЕрдирд╛рд╡рд╢реНрдпрдХ рдкрдврд╝рд╛</font></font></font></h2><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЬрдм рдЙрдарддрд╛ рд╣реИ</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдПрдХ рдирд┐рдпрдо рдХреЗ рд░реВрдк рдореЗрдВ, рдпрд╣ рддрдм рд╣реЛрддрд╛ рд╣реИ рдЬрдм рдЖрдк рдореМрдЬреВрджрд╛ рдЕрдиреБрд░реЛрдз рдХреЗ рд▓рд┐рдП "рдПрдХ рдФрд░ рдлрд╝рд┐рд▓реНрдЯрд░" рдЬрдХрдбрд╝рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВред</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"рдФрд░ рдЖрдкрдХреЗ рдкрд╛рд╕ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдореЛрддреА рдмрдЯрди рдХреЗ рд╕рд╛рде</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╕рдорд╛рди рдирд╣реАрдВ рд╣реИ, рд▓реЗрдХрд┐рди </font><font style="vertical-align: inherit;">рдХреНрдпрд╛ рд╣реИ?" </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдлрд┐рд▓реНрдо "рдбрд╛рдпрдордВрдб рд╣реИрдВрдб"</font></font></i><br>
</blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдКрдкрд░ рджрд┐рдП рдЧрдП рдХрд╛рд░реНрдп рдХреЛ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░рддреЗ рд╣реБрдП, рдкреНрд░рд╕рдВрд╕реНрдХрд░рдг рдХреЗ рд▓рд┐рдП рдкрд╣рд▓реЗ 20 рд╕рдмрд╕реЗ рдкреБрд░рд╛рдиреЗ "рдорд╣рддреНрд╡рдкреВрд░реНрдг" рдЕрдиреБрдкреНрд░рдпреЛрдЧреЛрдВ рдХреЛ рджрд┐рдЦрд╛рдПрдВ, рдЪрд╛рд╣реЗ рдЙрдирдХрд╛ рдЙрджреНрджреЗрд╢реНрдп рдХреБрдЫ рднреА рд╣реЛред</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреИрд╕реЗ рдкрд╣рдЪрд╛рдиреЗрдВ?</font></font></h4><br>
<pre><code class="plaintext hljs">-&gt; Seq Scan | Bitmap Heap Scan | Index [Only] Scan [Backward]<font></font>
   &amp;&amp; 5 ├Ч rows &lt; RRbF --  &gt;80% <font></font>
   &amp;&amp; loops ├Ч RRbF &gt; 100 --     100  <font></font>
</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрдиреБрд╢рдВрд╕рд╛рдПрдБ</font></font></h4><br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WHERE рдХреНрд▓реЙрдЬрд╝ рдХреЗ рд╕рд╛рде</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
рдПрдХ [рдЕрдзрд┐рдХ] рдХрд╕реНрдЯрдо </font><b><font style="vertical-align: inherit;">рдЗрдВрдбреЗрдХреНрд╕</font></b><font style="vertical-align: inherit;"> рдмрдирд╛рдПрдВ </font><font style="vertical-align: inherit;">рдпрд╛ рдЗрдВрдбреЗрдХреНрд╕ рдореЗрдВ рдЕрддрд┐рд░рд┐рдХреНрдд рдлрд╝реАрд▓реНрдб рд╢рд╛рдорд┐рд▓ рдХрд░реЗрдВред</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрджрд┐ рдлрд╝рд┐рд▓реНрдЯрд░рд┐рдВрдЧ рд╕реНрдерд┐рддрд┐ рдЖрдкрдХреЗ рдХрд╛рд░реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП "рд╕реНрдерд┐рд░" рд╣реИ - рдЕрд░реНрдерд╛рдд, рдЗрд╕рдореЗрдВ </font><font style="vertical-align: inherit;">рднрд╡рд┐рд╖реНрдп рдореЗрдВ рдореВрд▓реНрдпреЛрдВ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреА</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╕реВрдЪреА рдХрд╛ </font><b><font style="vertical-align: inherit;">рд╡рд┐рд╕реНрддрд╛рд░ рд╢рд╛рдорд┐рд▓ рдирд╣реАрдВ рд╣реИ</font></b><font style="vertical-align: inherit;"> - рддреЛ WHERE рд╕реВрдЪрдХрд╛рдВрдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рдмреЗрд╣рддрд░ рд╣реИред </font><font style="vertical-align: inherit;">рдЗрд╕ рд╢реНрд░реЗрдгреА рдореЗрдВ рд╡рд┐рднрд┐рдиреНрди рдмреВрд▓рд┐рдпрди / рдПрдирдо рд╕реНрдерд┐рддрд┐рдпрд╛рдВ рдЕрдЪреНрдЫреА рддрд░рд╣ рд╕реЗ рдлрд┐рдЯ рд╣реЛрддреА рд╣реИрдВред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдпрджрд┐ рдлрд╝рд┐рд▓реНрдЯрд░ рд╕реНрдерд┐рддрд┐ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрд▓рдЧ-рдЕрд▓рдЧ рдорд╛рди рд▓реЗ рд╕рдХрддреА рд╣реИ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , рддреЛ рдЗрди рдХреНрд╖реЗрддреНрд░реЛрдВ рдХреЗ рд╕рд╛рде рд╕реВрдЪрдХрд╛рдВрдХ рдХрд╛ рд╡рд┐рд╕реНрддрд╛рд░ рдХрд░рдирд╛ рдмреЗрд╣рддрд░ рд╣реИ - рдЬреИрд╕рд╛ рдХрд┐ рдКрдкрд░ рдмрд┐рдЯрдореИрдкрдПрдВрдб рдХреЗ рд╕рд╛рде рд╕реНрдерд┐рддрд┐ рдореЗрдВ рд╣реИред</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЙрджрд╛рд╣рд░рдг:</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> tbl <span class="hljs-keyword">AS</span>
<span class="hljs-keyword">SELECT</span>
  generate_series(<span class="hljs-number">1</span>, <span class="hljs-number">100000</span>) pk <span class="hljs-comment">-- 100K ""</span>
, <span class="hljs-keyword">CASE</span>
    <span class="hljs-keyword">WHEN</span> random() &lt; <span class="hljs-number">1</span>::<span class="hljs-built_in">real</span>/<span class="hljs-number">16</span> <span class="hljs-keyword">THEN</span> <span class="hljs-literal">NULL</span>
    <span class="hljs-keyword">ELSE</span> (random() * <span class="hljs-number">100</span>)::<span class="hljs-built_in">integer</span> <span class="hljs-comment">-- 100   </span>
  <span class="hljs-keyword">END</span> fk_own<font></font>
, (random() &lt; <span class="hljs-number">1</span>::<span class="hljs-built_in">real</span>/<span class="hljs-number">50</span>) <span class="hljs-keyword">critical</span>; <span class="hljs-comment">-- 1:50,   ""</span><font></font>
<font></font>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">INDEX</span> <span class="hljs-keyword">ON</span> tbl(pk);
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">INDEX</span> <span class="hljs-keyword">ON</span> tbl(fk_own, pk);<font></font>
<font></font>
<span class="hljs-keyword">SELECT</span><font></font>
  *<font></font>
<span class="hljs-keyword">FROM</span><font></font>
  tbl<font></font>
<span class="hljs-keyword">WHERE</span>
  <span class="hljs-keyword">critical</span>
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span><font></font>
  pk<font></font>
<span class="hljs-keyword">LIMIT</span> <span class="hljs-number">20</span>;</code></pre><br>
<img src="https://habrastorage.org/webt/ca/lg/hn/calghnldd9_313mns2a535sjwma.png"><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[рд╕реНрдкрд╖реНрдЯреАрдХрд░рдг рджреЗрдЦреЗрдВ редensor.ru]</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
рд╕рд╣реА:</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">INDEX</span> <span class="hljs-keyword">ON</span> tbl(pk)
  <span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">critical</span>; <span class="hljs-comment">--  ""  </span>
</code></pre><br>
<img src="https://habrastorage.org/webt/op/t2/u4/opt2u4yh2mzocmdot9qovn6pzgu.png"><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[рд╕реНрдкрд╖реНрдЯреАрдХрд░рдг рдкрд░ рджреЗрдЦреЗрдВ редensor.ru]</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
рдЬреИрд╕рд╛ рдХрд┐ рдЖрдк рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ, рдлрд╝рд┐рд▓реНрдЯрд░рд┐рдВрдЧ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдпреЛрдЬрдирд╛ рд╕реЗ рдЧрд╛рдпрдм рд╣реЛ рдЧрдИ рд╣реИ, рдФрд░ рдЕрдиреБрд░реЛрдз </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5 рдЧреБрдирд╛ рддреЗрдЬ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╣реЛ рдЧрдпрд╛ рд╣реИ </font><font style="vertical-align: inherit;">ред</font></font><br>
<br>
<h2><font color="#c00000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"># 5: рд╡рд┐рд░рд▓ рддрд╛рд▓рд┐рдХрд╛</font></font></font></h2><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЬрдм рдЙрдарддрд╛ рд╣реИ</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдмрдбрд╝реА рд╕рдВрдЦреНрдпрд╛ рдореЗрдВ "рдореГрдд" рдЕрднрд┐рд▓реЗрдЦреЛрдВ рдХреА рдПрдХ рдмрдбрд╝реА рд╕рдВрдЦреНрдпрд╛ рдХреА рд╕реНрдерд┐рддрд┐ рдХреА рдУрд░ рд▓реЗ рдЬрд╛рдиреЗ рдкрд░ рдмрдбрд╝реА рд╕рдВрдЦреНрдпрд╛ рдореЗрдВ рдЕрджреНрдпрддрдиреЛрдВ / рд░рд┐рдХреЙрд░реНрдбреНрд╕ рдХреЛ рд╣рдЯрд╛рдиреЗ рдкрд░ рд╡рд┐рднрд┐рдиреНрди рдХрд╛рд░реНрдпреЛрдВ рдХреА рдЕрдкрдиреА рдХрддрд╛рд░ рдмрдирд╛рдиреЗ рдХреЗ рд╡рд┐рднрд┐рдиреНрди рдкреНрд░рдпрд╛рд╕ рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВред</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреИрд╕реЗ рдкрд╣рдЪрд╛рдиреЗрдВ?</font></font></h4><br>
<pre><code class="plaintext hljs">-&gt; Seq Scan | Bitmap Heap Scan | Index [Only] Scan [Backward]<font></font>
   &amp;&amp; loops ├Ч (rows + RRbF) &lt; (shared hit + shared read) ├Ч 8<font></font>
      --   1KB   <font></font>
   &amp;&amp; shared hit + shared read &gt; 64<font></font>
</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрдиреБрд╢рдВрд╕рд╛рдПрдБ</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдореИрдиреНрдпреБрдЕрд▓ рд░реВрдк рд╕реЗ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VACUUM [FULL] рдХреЛ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдореИрдиреНрдпреБрдЕрд▓ рд░реВрдк рд╕реЗ рд▓реЗ рдЬрд╛рдПрдВ </font><font style="vertical-align: inherit;">рдпрд╛ </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;">рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рддрд╛рд▓рд┐рдХрд╛ рдХреЗ рд▓рд┐рдП</font></a><font style="vertical-align: inherit;"> рдЕрдкрдиреЗ рдорд╛рдкрджрдВрдбреЛрдВ рдХреЛ рдареАрдХ рд╕реЗ рдЯреНрдпреВрдирд┐рдВрдЧ рдХрд░рдХреЗ </font><font style="vertical-align: inherit;">рдкрд░реНрдпрд╛рдкреНрдд рд▓рдЧрд╛рддрд╛рд░ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдСрдЯреЛрд╡реЗрдХреНрдпреВрдо</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдкрд░реАрдХреНрд╖рдг рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ </font><font style="vertical-align: inherit;">ред</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЬреНрдпрд╛рджрд╛рддрд░ рдорд╛рдорд▓реЛрдВ рдореЗрдВ, рдпреЗ рд╕рдорд╕реНрдпрд╛рдПрдВ рд╡реНрдпрд╛рд╡рд╕рд╛рдпрд┐рдХ рддрд░реНрдХ рд╕реЗ рдХреЙрд▓ рдХрд░рддреЗ рд╕рдордп рдЦрд░рд╛рдм рд╕рдВрд░рдЪрд┐рдд рдкреНрд░рд╢реНрдиреЛрдВ рдХреЗ рдХрд╛рд░рдг рд╣реЛрддреА рд╣реИрдВ, рдЬреИрд╕реЗ рдХрд┐ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PostgreSQL Antipatterns</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдореЗрдВ рдЪрд░реНрдЪрд╛ рдХреА рдЧрдИ </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;">: "рдореГрдд" рдХреА рднреАрдбрд╝ рд╕реЗ рд▓рдбрд╝рдирд╛</font></a><font style="vertical-align: inherit;"> ред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд▓реЗрдХрд┐рди рдЖрдкрдХреЛ рдпрд╣ рд╕рдордЭрдиреЗ рдХреА рдЬрд░реВрд░рдд рд╣реИ рдХрд┐ VACUUM FULL рднреА рд╣рдореЗрд╢рд╛ рдорджрдж рдирд╣реАрдВ рдХрд░ рд╕рдХрддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдРрд╕реЗ рдорд╛рдорд▓реЛрдВ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдбреАрдмреАрдП</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд▓реЗрдЦ рд╕реЗ рдПрд▓реНрдЧреЛрд░рд┐рджрдо рдХреЗ рд╕рд╛рде рдЦреБрдж рдХреЛ рдкрд░рд┐рдЪрд┐рдд рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;">: рдЬрдм VACUUM рдЧреБрдЬрд░рддрд╛ рд╣реИ, рддреЛ рд╣рдо рддрд╛рд▓рд┐рдХрд╛ рдХреЛ рдореИрдиреНрдпреБрдЕрд▓ рд░реВрдк рд╕реЗ рд╕рд╛рдл рдХрд░рддреЗ рд╣реИрдВ</font></a><font style="vertical-align: inherit;"> ред</font></font></blockquote><br>
<h2><font color="#c00000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"># 6: рдЗрдВрдбреЗрдХреНрд╕ рдХреЗ рдмреАрдЪ рд╕реЗ рдкрдврд╝рдирд╛</font></font></font></h2><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЬрдм рдЙрдарддрд╛ рд╣реИ</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдРрд╕рд╛ рд▓рдЧрддрд╛ рд╣реИ рдХрд┐ рдЙрдиреНрд╣реЛрдВрдиреЗ рдЬреНрдпрд╛рджрд╛ рдкрдврд╝рд╛ рдирд╣реАрдВ рдерд╛, рдФрд░ рд╕рдм рдХреБрдЫ рдЕрдиреБрдХреНрд░рдорд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛, рдФрд░ рдЙрдиреНрд╣реЛрдВрдиреЗ рдХрд┐рд╕реА рдФрд░ рдХреЛ рдлрд╝рд┐рд▓реНрдЯрд░ рдирд╣реАрдВ рдХрд┐рдпрд╛ - рд▓реЗрдХрд┐рди рдлрд┐рд░ рднреА, рдЬрд┐рддрдирд╛ рд╣рдо рдЪрд╛рд╣реЗрдВрдЧреЗ, рдЙрд╕рд╕реЗ рдЕрдзрд┐рдХ рдкреГрд╖реНрда рдкрдврд╝реЗ рдЧрдП рдереЗред</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреИрд╕реЗ рдкрд╣рдЪрд╛рдиреЗрдВ?</font></font></h4><br>
<pre><code class="plaintext hljs">-&gt; Index [Only] Scan [Backward]<font></font>
   &amp;&amp; loops ├Ч (rows + RRbF) &lt; (shared hit + shared read) ├Ч 8<font></font>
      --   1KB   <font></font>
   &amp;&amp; shared hit + shared read &gt; 64<font></font>
</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрдиреБрд╢рдВрд╕рд╛рдПрдБ</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЧрдП рд╕реВрдЪрдХрд╛рдВрдХ рдФрд░ рдЕрдиреБрд░реЛрдз рдореЗрдВ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдкреНрд░рдореБрдЦ рдХреНрд╖реЗрддреНрд░реЛрдВ рдХреА рдмрд╛рд░реАрдХреА рд╕реЗ рджреЗрдЦреЗрдВ - рд╕рдмрд╕реЗ рдЕрдзрд┐рдХ рд╕рдВрднрд╛рд╡рдирд╛ рд╣реИ, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕реВрдЪрдХрд╛рдВрдХ рдХрд╛ рд╣рд┐рд╕реНрд╕рд╛ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдирд╣реАрдВ рд╣реИ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ред </font><font style="vertical-align: inherit;">рд╕рдмрд╕реЗ рдЕрдзрд┐рдХ рд╕рдВрднрд╛рд╡рдирд╛ рд╣реИ, рдЖрдкрдХреЛ рдПрдХ рд╕рдорд╛рди рд╕реВрдЪрдХрд╛рдВрдХ рдмрдирд╛рдирд╛ рд╣реЛрдЧрд╛, рд▓реЗрдХрд┐рди рдЙрдкрд╕рд░реНрдЧ рдХреНрд╖реЗрддреНрд░реЛрдВ рдХреЗ рдмрд┐рдирд╛ рдпрд╛ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЙрдирдХреЗ рдореВрд▓реНрдпреЛрдВ рдкрд░ рдкреБрдирд░рд╛рд╡реГрддрд┐ рдХрд░рдирд╛ рд╕реАрдЦреЗрдВ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЙрджрд╛рд╣рд░рдг:</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> tbl <span class="hljs-keyword">AS</span>
<span class="hljs-keyword">SELECT</span>
  generate_series(<span class="hljs-number">1</span>, <span class="hljs-number">100000</span>) pk      <span class="hljs-comment">-- 100K ""</span>
, (random() *  <span class="hljs-number">100</span>)::<span class="hljs-built_in">integer</span> fk_org  <span class="hljs-comment">-- 100   </span>
, (random() * <span class="hljs-number">1000</span>)::<span class="hljs-built_in">integer</span> fk_cli; <span class="hljs-comment">-- 1K   </span><font></font>
<font></font>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">INDEX</span> <span class="hljs-keyword">ON</span> tbl(fk_org, fk_cli); <span class="hljs-comment">--     #2</span>
<span class="hljs-comment">--      fk_cli      </span><font></font>
<font></font>
<span class="hljs-keyword">SELECT</span><font></font>
  *<font></font>
<span class="hljs-keyword">FROM</span><font></font>
  tbl<font></font>
<span class="hljs-keyword">WHERE</span>
  fk_cli = <span class="hljs-number">999</span> <span class="hljs-comment">--  fk_org  ,     </span>
<span class="hljs-keyword">LIMIT</span> <span class="hljs-number">20</span>;</code></pre><br>
<img src="https://habrastorage.org/webt/tl/py/lb/tlpylbllwrea5ilsf-epratclha.png"><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[рд╕реНрдкрд╖реНрдЯреАрдХрд░рдг рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рджреЗрдЦреЗрдВред Tensor.ru] рд╕рдм рдХреБрдЫ</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
рдареАрдХ рд╣реИ, рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐ рд╕реВрдЪрдХрд╛рдВрдХ рд╕реЗ рднреА рд▓рдЧрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдХрд┐рд╕реА рддрд░рд╣ рд╕рдВрджреЗрд╣ рд╕реЗ - 20 рдореЗрдВ рд╕реЗ рдкреНрд░рддреНрдпреЗрдХ рд░рд┐рдХреЙрд░реНрдб рдХреЛ рдкрдврд╝рдиреЗ рдХреЗ рд▓рд┐рдП, рдбреЗрдЯрд╛ рдХреЗ 4 рдкреГрд╖реНрдареЛрдВ рдХреЛ рдкрдврд╝рдирд╛ рдкрдбрд╝рд╛, рдкреНрд░рддрд┐ рд░рд┐рдХреЙрд░реНрдб 32KB - рдХреНрдпрд╛ рдпрд╣ рдмреЛрд▓реНрдб рдирд╣реАрдВ рд╣реИ? </font><font style="vertical-align: inherit;">рд╣рд╛рдВ, рдФрд░ рд╕реВрдЪрдХрд╛рдВрдХ рдХрд╛ рдирд╛рдо </font><font style="vertical-align: inherit;">рд╡рд┐рдЪрд╛рд░реЛрддреНрддреЗрдЬрдХ рд╣реИред </font><font style="vertical-align: inherit;">
рд╣рдо рддрдп рдХрд░рддреЗ рд╣реИрдВ:</font></font><code>tbl_<b>fk_org</b>_fk_cli_idx</code><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">INDEX</span> <span class="hljs-keyword">ON</span> tbl(fk_cli);</code></pre><br>
<img src="https://habrastorage.org/webt/n9/5x/uz/n95xuzh7tcrmlv3eqg-bq2axhk4.png"><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[рд╕реНрдкрд╖реНрдЯреАрдХрд░рдг рдкрд░ рджреЗрдЦреЗрдВ редensor.ru]</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
рдЕрдЪрд╛рдирдХ - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10 рдмрд╛рд░ рддреЗрдЬ рдФрд░ 4 рдмрд╛рд░ рдХрдо рдкрдврд╝реЗрдВ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> !</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЗрдВрдбреЗрдХреНрд╕ рдХреЗ рдЕрдХреБрд╢рд▓ рдЙрдкрдпреЛрдЧ рдХреА рд╕реНрдерд┐рддрд┐рдпреЛрдВ рдХреЗ рдЕрдиреНрдп рдЙрджрд╛рд╣рд░рдг </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдбреАрдмреАрдП</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд▓реЗрдЦ рдореЗрдВ рджреЗрдЦреЗ рдЬрд╛ рд╕рдХрддреЗ рд╣реИрдВ </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;">: рдпреВрдЬрд╝рд▓реЗрд╕ рдЗрдВрдбреЗрдХреНрд╕ рдЦреЛрдЬреЗрдВ</font></a><font style="vertical-align: inherit;"> ред</font></font></blockquote><br>
<h2><font color="#c00000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"># 7: CTE ├Ч CTE</font></font></font></h2><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЬрдм рдЙрдарддрд╛ рд╣реИ</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдХреНрд╡реЗрд░реА рдореЗрдВ рд╣рдордиреЗ </font><font style="vertical-align: inherit;">рдЕрд▓рдЧ-рдЕрд▓рдЧ рддрд╛рд▓рд┐рдХрд╛рдУрдВ рд╕реЗ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"рд╡рд╕рд╛" рд╕реАрдЯреАрдИ рдЯрд╛рдЗрдк рдХрд┐рдпрд╛</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , рдФрд░ рдлрд┐рд░ рдЙрдирдХреЗ рдмреАрдЪ рдХрд░рдиреЗ рдХрд╛ рдлреИрд╕рд▓рд╛ рдХрд┐рдпрд╛ </font></font><code>JOIN</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдорд╛рдорд▓рд╛ v12 рд╕реЗ рдиреАрдЪреЗ рдХреЗ рд╕рдВрд╕реНрдХрд░рдгреЛрдВ рдХреЗ рд▓рд┐рдП рдкреНрд░рд╛рд╕рдВрдЧрд┐рдХ рд╣реИ рдпрд╛ рдЕрдиреБрд░реЛрдзреЛрдВ рд╕реЗ </font></font><code>WITH MATERIALIZED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред</font></font></i><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреИрд╕реЗ рдкрд╣рдЪрд╛рдиреЗрдВ?</font></font></h4><br>
<pre><code class="plaintext hljs">-&gt; CTE Scan<font></font>
   &amp;&amp; loops &gt; 10<font></font>
   &amp;&amp; loops ├Ч (rows + RRbF) &gt; 10000<font></font>
      --     CTE<font></font>
</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрдиреБрд╢рдВрд╕рд╛рдПрдБ</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЕрдиреБрд░реЛрдз рдХрд╛ рд╕рд╛рд╡рдзрд╛рдиреАрдкреВрд░реНрд╡рдХ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХрд░реЗрдВ - </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреНрдпрд╛ рд╕реАрдЯреАрдИ рдХреА рдпрд╣рд╛рдВ рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ? </font><font style="vertical-align: inherit;">рдпрджрд┐ рд╕рднреА рд╕рдорд╛рди рд╣реИрдВ, рддреЛ </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;">PostgreSQL Antipatterns</font></a><font style="vertical-align: inherit;"> рдореЗрдВ рд╡рд░реНрдгрд┐рдд рдореЙрдбрд▓ рдХреЗ рдЕрдиреБрд╕рд╛рд░ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hstore / json рдореЗрдВ "рдлрд╛рдбрд╝" рд▓рд╛рдЧреВ рдХрд░реЗрдВ </font></font></b><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: рдПрдХ рднрд╛рд░реА JOIN рдХреЗ рд╕рд╛рде рд╢рдмреНрджрдХреЛрд╢ рдХреЛ рд╣рд┐рдЯ рдХрд░реЗрдВ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ред</font></font><br>
<br>
<h2><font color="#c00000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"># 8: рд╕реНрд╡реИрдк рдЯреВ рдбрд┐рд╕реНрдХ (рдЯреЗрдореНрдк рд▓рд┐рдЦрд┐рдд)</font></font></font></h2><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЬрдм рдЙрдарддрд╛ рд╣реИ</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдмрдбрд╝реА рд╕рдВрдЦреНрдпрд╛ рдореЗрдВ рд░рд┐рдХреЙрд░реНрдб рдХрд╛ рдПрдХ-рдмрд╛рд░ рдкреНрд░рд╕рдВрд╕реНрдХрд░рдг (рдЫрдВрдЯрдиреА рдпрд╛ рдЕрджреНрд╡рд┐рддреАрдпрдХрд░рдг) рдЗрд╕рдХреЗ рд▓рд┐рдП рдЖрд╡рдВрдЯрд┐рдд рд╕реНрдореГрддрд┐ рдореЗрдВ рдлрд┐рдЯ рдирд╣реАрдВ рд╣реЛрддрд╛ рд╣реИред</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреИрд╕реЗ рдкрд╣рдЪрд╛рдиреЗрдВ?</font></font></h4><br>
<pre><code class="plaintext hljs">-&gt; *<font></font>
   &amp;&amp; temp written &gt; 0</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрдиреБрд╢рдВрд╕рд╛рдПрдБ</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдпрджрд┐ рдСрдкрд░реЗрд╢рди рджреНрд╡рд╛рд░рд╛ рдЙрдкрдпреЛрдЧ рдХреА рдЬрд╛рдиреЗ рд╡рд╛рд▓реА рдореЗрдореЛрд░реА рдХреА рдорд╛рддреНрд░рд╛ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХрд╛рд░реНрдп_рдо</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдкреИрд░рд╛рдореАрдЯрд░ рдХреЗ рд╕реЗрдЯ рдорд╛рди рд╕реЗ рдЕрдзрд┐рдХ рдирд╣реАрдВ рд╣реИ </font><font style="vertical-align: inherit;">, рддреЛ рдЗрд╕реЗ рд╕рдорд╛рдпреЛрдЬрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд╛рдпрдХ рд╣реИред </font><font style="vertical-align: inherit;">рдЖрдк рддреБрд░рдВрдд рд╕рднреА рдХреЗ рд▓рд┐рдП рдХреЙрдиреНрдлрд┐рдЧрд░ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдЖрдк </font></font><code>SET [LOCAL]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдЕрдиреБрд░реЛрдз / рд▓реЗрди-рджреЗрди рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЙрджрд╛рд╣рд░рдг:</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">SHOW</span> work_mem;
<span class="hljs-comment">-- "16MB"</span><font></font>
<font></font>
<span class="hljs-keyword">SELECT</span><font></font>
  random()<font></font>
<span class="hljs-keyword">FROM</span>
  generate_series(<span class="hljs-number">1</span>, <span class="hljs-number">1000000</span>)
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span>
  <span class="hljs-number">1</span>;</code></pre><br>
<img src="https://habrastorage.org/webt/x-/mu/my/x-mumysko4noy3qy8qhdk0fecpq.png"><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[рд╕реНрдкрд╖реНрдЯреАрдХрд░рдг рджреЗрдЦреЗрдВ редensor.ru]</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
рд╕рд╣реА:</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">SET</span> work_mem = <span class="hljs-string">'128MB'</span>; <span class="hljs-comment">--   </span></code></pre><br>
<img src="https://habrastorage.org/webt/h0/4z/kx/h04zkxsgcscgj8yxdasba8jdi2s.png"><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[рд╕реНрдкрд╖реНрдЯреАрдХрд░рдг рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рджреЗрдЦреЗрдВ редensor.ru]</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
рд╕реНрдкрд╖реНрдЯ рдХрд╛рд░рдгреЛрдВ рдХреЗ рд▓рд┐рдП, рдпрджрд┐ рдХреЗрд╡рд▓ рдореЗрдореЛрд░реА рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдбрд┐рд╕реНрдХ рдХрд╛ рдирд╣реАрдВ, рддреЛ рдЕрдиреБрд░реЛрдз рдмрд╣реБрдд рддреЗрдЬреА рд╕реЗ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред </font><font style="vertical-align: inherit;">рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ, рдПрдЪрдбреАрдбреА рд╕реЗ рд▓реЛрдб рдХрд╛ рд╣рд┐рд╕реНрд╕рд╛ рднреА рд╣рдЯрд╛ рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд▓реЗрдХрд┐рди рдЖрдкрдХреЛ рдпрд╣ рд╕рдордЭрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рдХрд┐ рд╣рдореЗрд╢рд╛ рдмрд╣реБрдд рд╕рд╛рд░реА рдореЗрдореЛрд░реА рдЖрд╡рдВрдЯрд┐рдд рдХрд░рдирд╛ рдпрд╛ рддреЛ рдХрд╛рдо рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ - рдпрд╣ рд╕рднреА рдХреЗ рд▓рд┐рдП рдкрд░реНрдпрд╛рдкреНрдд рдирд╣реАрдВ рд╣реЛрдЧрд╛ред</font></font><br>
<br>
<h2><font color="#c00000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"># 9: рдЕрдкреНрд░рд╛рд╕рдВрдЧрд┐рдХ рдЖрдБрдХрдбрд╝реЗ</font></font></font></h2><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЬрдм рдЙрдарддрд╛ рд╣реИ</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЙрдиреНрд╣реЛрдВрдиреЗ рдбреЗрдЯрд╛рдмреЗрд╕ рдореЗрдВ рдПрдХ рдмрд╛рд░ рдмрд╣реБрдд рдХреБрдЫ рдбрд╛рд▓рд╛, рд▓реЗрдХрд┐рди рдЙрдиреНрд╣реЗрдВ рдбреНрд░рд╛рдЗрд╡ рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рдмрдВрдзрди рдирд╣реАрдВ рдХрд┐рдпрд╛ </font></font><code>ANALYZE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреИрд╕реЗ рдкрд╣рдЪрд╛рдиреЗрдВ?</font></font></h4><br>
<pre><code class="plaintext hljs">-&gt; Seq Scan | Bitmap Heap Scan | Index [Only] Scan [Backward]<font></font>
   &amp;&amp; ratio &gt;&gt; 10</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрдиреБрд╢рдВрд╕рд╛рдПрдБ</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдРрд╕рд╛ рд╣реА рдХрд░реЗрдВ </font></font><code>ANALYZE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЗрд╕ рд╕реНрдерд┐рддрд┐ рдХрд╛ рд╡рд░реНрдгрди </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкреЛрд╕реНрдЯрдЧреНрд░реИрд╕рдХреНрдпреВрдПрд▓ рдПрдВрдЯрд┐рдкреНрдЯрд░реНрди</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдореЗрдВ рдЕрдзрд┐рдХ рд╡рд┐рд╕реНрддрд╛рд░ рд╕реЗ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;">: рдЖрдВрдХрдбрд╝реЗ рдкреВрд░реЗ рд╕рд┐рд░ рдкрд░ рд╣реИрдВ</font></a><font style="vertical-align: inherit;"> ред</font></font></blockquote><br>
<h2><font color="#c00000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"># 10: "рдХреБрдЫ рдЧрд▓рдд рд╣реЛ рдЧрдпрд╛"</font></font></font></h2><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЬрдм рдЙрдарддрд╛ рд╣реИ</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдПрдХ рдкреНрд░рддрд┐рд╕реНрдкрд░реНрдзрд╛ рдЕрдиреБрд░реЛрдз рджреНрд╡рд╛рд░рд╛ рд▓рдЧрд╛рдП рдЧрдП рд▓реЙрдХ рдХреА рдЙрдореНрдореАрдж рдереА, рдпрд╛ рдкрд░реНрдпрд╛рдкреНрдд рд╕реАрдкреАрдпреВ / рд╣рд╛рдЗрдкрд░рд╡рд┐рдЬрд░ рд╣рд╛рд░реНрдбрд╡реЗрдпрд░ рд╕рдВрд╕рд╛рдзрди рдирд╣реАрдВ рдереЗред</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреИрд╕реЗ рдкрд╣рдЪрд╛рдиреЗрдВ?</font></font></h4><br>
<pre><code class="plaintext hljs">-&gt; *<font></font>
   &amp;&amp; (shared hit / 8K) + (shared read / 1K) &lt; time / 1000<font></font>
      -- RAM hit = 64MB/s, HDD read = 8MB/s<font></font>
   &amp;&amp; time &gt; 100ms --  ,   <font></font>
</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрдиреБрд╢рдВрд╕рд╛рдПрдБ</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рддрд╛рд▓реЗ рдпрд╛ рдЕрд╕рд╛рдорд╛рдиреНрдп рд╕рдВрд╕рд╛рдзрди рдЦрдкрдд рдХреЗ рд▓рд┐рдП рд╕рд░реНрд╡рд░ рдХреА </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдирд┐рдЧрд░рд╛рдиреА рдХреЗ рд▓рд┐рдП</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
рдПрдХ рдмрд╛рд╣рд░реА </font><b><font style="vertical-align: inherit;">рдкреНрд░рдгрд╛рд▓реА рдХрд╛</font></b><font style="vertical-align: inherit;"> рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ </font><font style="vertical-align: inherit;">ред </font><font style="vertical-align: inherit;">рд╕реИрдХрдбрд╝реЛрдВ рд╕рд░реНрд╡рд░реЛрдВ рдХреЗ рд▓рд┐рдП рдЗрд╕ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЗ рд╕рдВрдЧрдарди рдХреЗ рд╣рдорд╛рд░реЗ рд╕рдВрд╕реНрдХрд░рдг рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ, рд╣рдордиреЗ рдкрд╣рд▓реЗ рд╣реА </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрд╣рд╛рдВ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдФрд░ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрд╣рд╛рдВ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдмрд╛рдд рдХреА рдереА </font><font style="vertical-align: inherit;">ред</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/ts/bi/9s/tsbi9svuilrqhgpgftjytkknpk4.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/h7/zm/6d/h7zm6d-va_yx8g0mtxbdkyevcwq.png"></div></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi492676/index.html">рд╕реИрдЯрд░реНрди 5 рд░реЙрдХреЗрдЯ рдореЗрдВ рдЪреБрдВрдмрдХреАрдп рдХреЛрд░ рдкрд░ рд╕реНрдореГрддрд┐</a></li>
<li><a href="../hi492678/index.html">рд╡рд┐рддреНрдд рдФрд░ рд╕рдВрдЪрд╛рд▓рди рдХреЗ рд▓рд┐рдП Microsoft Dynamics 365 рдХреЗ рдордВрдЪ рдкрд░ рдкрд╣рд▓реА рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХрд╛ рд╡рд┐рдХрд╛рд╕</a></li>
<li><a href="../hi492682/index.html">рдЯреЗрд╕реНрдЯреЛрд╕реНрдЯреЗрд░реЛрди, рдпрд╣ рдкреБрд░реБрд╖реЛрдВ рдХреЗ рд▓рд┐рдП рдХреНрдпреЛрдВ рд╣реИ рдФрд░ рдмреБрдврд╝рд╛рдкреЗ рдореЗрдВ рддрд╛рдХрдд рдХреИрд╕реЗ рдмрдирд╛рдП рд░рдЦреЗрдВ</a></li>
<li><a href="../hi492684/index.html">рдбреЛрдореЗрди рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдХреЗ рд╕рд╛рде рдЙрджреНрдпрдо рдХреЗ рд▓рд┐рдП рдореБрдлреНрдд рдкреНрд░реЙрдХреНрд╕реА рд╕рд░реНрд╡рд░</a></li>
<li><a href="../hi492686/index.html">рдЬрдм рд▓рд┐рдирдХреНрд╕ рдХрдиреНрд╡рд░реНрдЯрд░ рдЕрдм рдЖрдкрдХрд╛ рджреЛрд╕реНрдд рдирд╣реАрдВ рд╣реИ</a></li>
<li><a href="../hi492696/index.html">рдкрд╣рдЪрд╛рди рджрд╕реНрддрд╛рд╡реЗрдЬреЛрдВ рдХреА рдорд╛рдиреНрдпрддрд╛ рдФрд░ рдкреНрд░рд╕рдВрд╕реНрдХрд░рдг рдХреЗ рд▓рд┐рдП рдПрд▓реНрдЧреЛрд░рд┐рджрдо рдХрд╛ рдкрд░реАрдХреНрд╖рдг рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреНрдпрд╛?</a></li>
<li><a href="../hi492700/index.html">рднреБрдЧрддрд╛рди рдЕрдиреБрд░реЛрдз рдПрдкреАрдЖрдИ рдФрд░ рдХреЛрдгреАрдп рдХреЗ рд╕рд╛рде рдЗрдВрдЯрд░рдиреЗрдЯ рдШреЛрд╖рдгрд╛рддреНрдордХ рдЦрд░реАрджрд╛рд░реА</a></li>
<li><a href="../hi492702/index.html">рдорд╢реАрдиреА рдЕрдиреБрд╡рд╛рджред рд╢реАрдд рдпреБрджреНрдз рд╕реЗ рд▓реЗрдХрд░ рд╡рд░реНрддрдорд╛рди рддрдХ</a></li>
<li><a href="../hi492704/index.html">рдкреНрд░рддреНрдпрд╛рд░реЛрдкрдг рдЙрддреНрддрд░рдЬреАрд╡рд┐рддрд╛ рдХреА рдкреНрд░рднрд╛рд╡рд╢реАрд▓рддрд╛ рдХреЛ 5-7 рдЧреБрдирд╛ рдмрдврд╝рд╛рдиреЗ рдХреЗ рд▓рд┐рдП - рдпрд╣ рдХреИрд╕реЗ рд╕рдВрднрд╡ рд╣реИ?</a></li>
<li><a href="../hi492706/index.html">рдореЗрдореЛрд░реА рдЕрднрд┐рд▓реЗрдЦрд╛рдЧрд╛рд░: рдорд╕реНрддрд┐рд╖реНрдХ рдХреИрд╕реЗ рдпрд╛рджреЛрдВ рдХреЛ рдПрдирдХреЛрдб рдФрд░ рдкреБрди: рдкреЗрд╢ рдХрд░рддрд╛ рд╣реИ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>