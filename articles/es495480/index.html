<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü¶í üë©üèø‚Äçü§ù‚Äçüë®üèº üìë Crear enlaces de Python para bibliotecas C / C ++ usando SIP. Parte 1 üêõ üí° üñêüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A veces, mientras se trabaja en un proyecto en Python, existe el deseo de usar una biblioteca que no est√© escrita en Python, sino, por ejemplo, en C o...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Crear enlaces de Python para bibliotecas C / C ++ usando SIP. Parte 1</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/495480/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A veces, mientras se trabaja en un proyecto en Python, existe el deseo de usar una biblioteca que no est√© escrita en Python, sino, por ejemplo, en C o C ++. Las razones para esto pueden ser diferentes. Primero, Python es un lenguaje maravilloso, pero en algunas situaciones no es lo suficientemente r√°pido. Y si ve que el rendimiento est√° limitado por las caracter√≠sticas del lenguaje Python, entonces tiene sentido escribir parte del programa en otro lenguaje (en este art√≠culo hablaremos de C y C ++), organice esta parte del programa como una biblioteca, haga enlaces de Python (enlaces de Python) encima y use el m√≥dulo as√≠ obtenido como una biblioteca Python normal. En segundo lugar, a menudo ocurre una situaci√≥n cuando se sabe que hay una biblioteca que resuelve el problema requerido, pero, desafortunadamente, esta biblioteca no est√° escrita en Python, sino en el mismo C o C ++.En este caso, tambi√©n podemos hacer un enlace de Python sobre la biblioteca y usarlo sin pensar en el hecho de que la biblioteca no se escribi√≥ originalmente en Python.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Existen varias herramientas para crear enlaces de Python, que van desde los de nivel inferior como </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Python / C API</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> hasta los de nivel superior como </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SWIG</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SIP</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No ten√≠a el objetivo de comparar diferentes formas de crear enlaces de Python, pero me gustar√≠a hablar sobre los conceptos b√°sicos del uso de una herramienta, a saber, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SIP</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Inicialmente, SIP fue dise√±ado para crear un enlace alrededor de la biblioteca Qt - </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PyQt</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , y tambi√©n se usa para desarrollar otras bibliotecas Python grandes, por ejemplo, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wxPython</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En este art√≠culo, gcc se usar√° como compilador para C y g ++ se usar√° como compilador de C ++. </font><font style="vertical-align: inherit;">Todos los ejemplos fueron probados en Arch Linux y Python 3.8. </font><font style="vertical-align: inherit;">Para no complicar los ejemplos, el tema de la compilaci√≥n para diferentes sistemas operativos y el uso de diferentes compiladores (por ejemplo, Visual Studio) no est√° incluido en el alcance de este art√≠culo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Puede descargar todos los ejemplos de este art√≠culo desde el </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">repositorio en github</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El repositorio con fuentes SIP se encuentra en </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://www.riverbankcomputing.com/hg/sip/</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Mercurial se utiliza como sistema de control de versiones para SIP.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Hacer un enlace sobre una biblioteca en C</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Escribir una biblioteca en C</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este ejemplo se encuentra en la carpeta </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pyfoo_c_01</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en la fuente, pero en este art√≠culo asumiremos que estamos haciendo todo desde cero. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comencemos con un ejemplo simple. </font><font style="vertical-align: inherit;">Primero, crearemos una biblioteca C simple, que luego ejecutaremos desde un script Python. </font><font style="vertical-align: inherit;">Deje que nuestra biblioteca sea la √∫nica funci√≥n</font></font><br>
<br>
<pre><code class="plaintext hljs">int foo(char*);
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
que tomar√° una cadena y devolver√° su longitud multiplicada por 2. El </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
archivo de encabezado </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">foo.h</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> puede verse, por ejemplo, as√≠:</font></font><br>
<br>
<pre><code class="plaintext hljs">#ifndef FOO_LIB<font></font>
#define FOO_LIB<font></font>
<font></font>
int foo(char* str);<font></font>
<font></font>
#endif<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y el archivo con la implementaci√≥n de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">foo.cpp</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="plaintext hljs">#include &lt;string.h&gt;<font></font>
<font></font>
#include "foo.h"<font></font>
<font></font>
int foo(char* str) {<font></font>
	return strlen(str) * 2;<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para probar la funcionalidad de la biblioteca, escribiremos un programa </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">main.c</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> simple </font><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="plaintext hljs">#include &lt;stdio.h&gt;<font></font>
<font></font>
#include "foo.h"<font></font>
<font></font>
int main(int argc, char* argv[]) {<font></font>
	char* str = "0123456789";<font></font>
	printf("%d\n", foo(str));<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para mayor precisi√≥n, cree un </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Makefile</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="plaintext hljs">CC=gcc<font></font>
CFLAGS=-c<font></font>
DIR_OUT=bin<font></font>
<font></font>
all: main<font></font>
<font></font>
main: main.o libfoo.a<font></font>
	$(CC) $(DIR_OUT)/main.o -L$(DIR_OUT) -lfoo -o $(DIR_OUT)/main<font></font>
<font></font>
main.o: makedir main.c<font></font>
	$(CC) $(CFLAGS) main.c -o $(DIR_OUT)/main.o<font></font>
<font></font>
libfoo.a: makedir foo.c<font></font>
	$(CC) $(CFLAGS) foo.c -o $(DIR_OUT)/foo.o<font></font>
	ar rcs $(DIR_OUT)/libfoo.a $(DIR_OUT)/foo.o<font></font>
<font></font>
makedir:<font></font>
	mkdir -p $(DIR_OUT)<font></font>
<font></font>
clean:<font></font>
	rm -rf $(DIR_OUT)/*<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Deje que todas las fuentes de la biblioteca </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">foo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> se encuentren en una subcarpeta de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">foo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en la carpeta fuente:</font></font><br>
<br>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">foo_c_01 /</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚îî‚îÄ‚îÄ foo</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    ‚îú‚îÄ‚îÄ foo.c</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    ‚îú‚îÄ‚îÄ foo.h</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    ‚îú‚îÄ‚îÄ main.c</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    ‚îî‚îÄ‚îÄ Makefile</font></font><font></font>
</pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entramos en la carpeta </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">foo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y compilamos las fuentes usando el comando</font></font><br>
<br>
<pre><code class="bash hljs">make
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Durante la compilaci√≥n, se mostrar√° el texto.</font></font><br>
<br>
<pre><code class="bash hljs">mkdir -p bin<font></font>
gcc -c main.c -o bin/main.o<font></font>
gcc -c foo.c -o bin/foo.o<font></font>
ar rcs bin/libfoo.a bin/foo.o<font></font>
gcc bin/main.o -Lbin -lfoo -o bin/main<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El resultado de la compilaci√≥n se colocar√° en la carpeta </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bin</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dentro de la carpeta </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">foo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">foo_c_01 /</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚îî‚îÄ‚îÄ foo</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    ‚îú‚îÄ‚îÄ bin</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    ‚îÇ ‚îú‚îÄ‚îÄ foo.o</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    ‚îÇ ‚îú‚îÄ‚îÄ libfoo.a</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    ‚îÇ ‚îú‚îÄ‚îÄ principal</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    ‚îÇ ‚îî‚îÄ‚îÄ main.o</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    ‚îú‚îÄ‚îÄ foo.c</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    ‚îú‚îÄ‚îÄ foo.h</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    ‚îú‚îÄ‚îÄ main.c</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    ‚îî‚îÄ‚îÄ Makefile</font></font><font></font>
</pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Compilamos una biblioteca para enlaces est√°ticos y un programa que la usa bajo el nombre </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">main</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Despu√©s de la compilaci√≥n, puede verificar que se </font><font style="vertical-align: inherit;">inicie el </font><font style="vertical-align: inherit;">programa </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">principal</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hagamos un enlace de Python sobre la biblioteca foo.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Conceptos b√°sicos de SIP</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Primero necesitas instalar SIP. </font><font style="vertical-align: inherit;">Esto se hace de manera est√°ndar, como con todas las otras bibliotecas que usan pip:</font></font><br>
<br>
<pre><code class="bash hljs">pip install --user sip
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por supuesto, si est√° trabajando en un entorno virtual, no se debe especificar el par√°metro --user, que indica que la biblioteca SIP debe instalarse en la carpeta del usuario, y no globalmente en el sistema. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øQu√© debemos hacer para que se pueda llamar a la biblioteca foo desde el c√≥digo Python? Como m√≠nimo, debe crear dos archivos: uno de ellos en formato TOML y </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">llamarlo pyproject.toml</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , y el segundo es un archivo con la extensi√≥n .sip. Tratemos con cada uno de ellos secuencialmente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Necesitamos acordar la estructura de la fuente. Dentro de la </font><font style="vertical-align: inherit;">carpeta </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pyfoo_c se</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> encuentra la carpeta </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">foo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que contiene la fuente de la biblioteca. Despu√©s de la compilaci√≥n </font><font style="vertical-align: inherit;">, la carpeta </font><i><font style="vertical-align: inherit;">bin</font></i><font style="vertical-align: inherit;"> se crea </font><font style="vertical-align: inherit;">dentro de la </font><font style="vertical-align: inherit;">carpeta </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">foo</font></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, que contendr√° todos los archivos compilados. </font><font style="vertical-align: inherit;">M√°s adelante agregaremos la capacidad para que el usuario especifique las rutas al encabezado y los archivos de objetos de la biblioteca a trav√©s de la l√≠nea de comando. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los archivos necesarios para SIP se ubicar√°n en la misma carpeta que la carpeta </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">foo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pyproject.toml</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El archivo </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pyproject.toml</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> no es una invenci√≥n de los desarrolladores de SIP, sino el formato de descripci√≥n del proyecto Python descrito en </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PEP 517 "Un formato independiente del sistema de compilaci√≥n para √°rboles de origen"</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y en </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PEP 518 "Especificaci√≥n de los requisitos m√≠nimos del sistema de compilaci√≥n para proyectos de Python"</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Este es un </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">archivo TOML</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que puede considerarse como una versi√≥n m√°s avanzada del formato ini, en el que los par√°metros se almacenan en forma de "clave = valor", y los par√°metros pueden ubicarse no solo en secciones como [foo], que se denominan tablas en t√©rminos TOML, sino y en subsecciones de la forma [foo.bar.spam]. Los par√°metros pueden contener no solo cadenas, sino tambi√©n listas, n√∫meros y valores booleanos.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se supone que este archivo describe todo lo que se necesita para construir un paquete de Python, y no necesariamente usando SIP. </font><font style="vertical-align: inherit;">Sin embargo, como veremos un poco m√°s adelante, en algunos casos este archivo no ser√° suficiente y, adem√°s, deber√° crear un peque√±o script de Python. </font><font style="vertical-align: inherit;">Pero hablemos de todo en orden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Puede encontrar una descripci√≥n completa de todos los par√°metros posibles del archivo </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pyproject.toml</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> relacionados con SIP en </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">la p√°gina de documentaci√≥n de SIP</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para nuestro ejemplo, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cree el</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> archivo </font><i><font style="vertical-align: inherit;">pyproject.toml</font></i><font style="vertical-align: inherit;"> al mismo nivel que la carpeta </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">foo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">foo_c_01 /</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚îú‚îÄ‚îÄ foo</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚îÇ ‚îú‚îÄ‚îÄ bin</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ foo.o</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ libfoo.a</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ principal</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ main.o</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚îÇ ‚îú‚îÄ‚îÄ foo.c</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚îÇ ‚îú‚îÄ‚îÄ foo.h</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚îÇ ‚îú‚îÄ‚îÄ main.c</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚îÇ ‚îî‚îÄ‚îÄ Makefile</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚îî‚îÄ‚îÄ pyproject.toml</font></font><font></font>
</pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El contenido de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pyproject.toml</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ser√° el siguiente:</font></font><br>
<br>
<pre><code class="plaintext hljs">[build-system]<font></font>
requires = ["sip &gt;=5, &lt;6"]<font></font>
build-backend = "sipbuild.api"<font></font>
<font></font>
[tool.sip.metadata]<font></font>
name = "pyfoo"<font></font>
version = "0.1"<font></font>
license = "MIT"<font></font>
<font></font>
[tool.sip.bindings.pyfoo]<font></font>
headers = ["foo.h"]<font></font>
libraries = ["foo"]<font></font>
include-dirs = ["foo"]<font></font>
library-dirs = ["foo/bin"]<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La secci√≥n </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[build-system]</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ("tabla" en t√©rminos TOML) es est√°ndar y se describe en </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PEP 518</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Contiene dos par√°metros:</font></font><br>
<br>
<ul>
<li><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">requiere</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - una lista de paquetes necesarios para construir nuestro paquete. </font><font style="vertical-align: inherit;">El formato de descripci√≥n de dependencia del paquete se describe en la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">especificaci√≥n de dependencia PEP 508 para paquetes de software Python</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">En este caso, solo necesitamos la versi√≥n 5.x del paquete sip.</font></font></li>
<li><i>build-backend</i> ,        .  ,          Python-,    .        ,   ,    SIP,     ¬´sipbuild.api¬ª.</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Otros par√°metros se describen en las </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">secciones [tool.sip. *]</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La secci√≥n </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[tool.sip.metadata]</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> contiene informaci√≥n general sobre el paquete: el nombre del paquete que se construir√° (nuestro paquete se llamar√° </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pyfoo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , pero no confunda este nombre con el nombre del m√≥dulo, que luego importaremos a Python), el n√∫mero de versi√≥n del paquete (en nuestro caso n√∫mero de versi√≥n "0.1") y licencia (por ejemplo, " </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MIT</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> "). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lo m√°s importante desde el punto de vista del ensamblaje se describe en [tool.sip.bindings. </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pyfoo</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ]. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anote el nombre del paquete en el encabezado de la secci√≥n. </font><font style="vertical-align: inherit;">Hemos agregado dos par√°metros a esta secci√≥n:</font></font><br>
<br>
<ul>
<li><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">encabezados</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : una lista de archivos de encabezado necesarios para usar la biblioteca foo.</font></font></li>
<li><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bibliotecas</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : una lista de archivos de objetos compilados para la vinculaci√≥n est√°tica.</font></font></li>
<li><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">incluir-dirs</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> es la ruta en la que debe buscar los archivos de cabecera adicionales adem√°s de los que est√°n unidos al compilador C. En este caso, d√≥nde buscar la </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">foo.h</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> archivo </font><font style="vertical-align: inherit;">.</font></font></li>
<li><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">library-dirs</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> es la ruta donde buscar archivos de objetos adicionales adem√°s de los que est√°n adjuntos al compilador de C. En este caso, esta es la carpeta en la que </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">se crea el</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> archivo de biblioteca compilado </font><i><font style="vertical-align: inherit;">foo</font></i><font style="vertical-align: inherit;"> .</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces, creamos el primer archivo necesario para SIP. </font><font style="vertical-align: inherit;">Ahora pasamos a crear el siguiente archivo que describir√° el contenido del futuro m√≥dulo de Python.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pyfoo.sip</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cree el archivo </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pyfoo.sip</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en la misma carpeta que el archivo </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pyproject.toml</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">foo_c_01 /</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚îú‚îÄ‚îÄ foo</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚îÇ ‚îú‚îÄ‚îÄ bin</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ foo.o</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ libfoo.a</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ principal</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ main.o</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚îÇ ‚îú‚îÄ‚îÄ foo.c</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚îÇ ‚îú‚îÄ‚îÄ foo.h</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚îÇ ‚îú‚îÄ‚îÄ main.c</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚îÇ ‚îî‚îÄ‚îÄ Makefile</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚îú‚îÄ‚îÄ pyfoo.sip</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚îî‚îÄ‚îÄ pyproject.toml</font></font><font></font>
</pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un archivo con la extensi√≥n .sip describe la interfaz de la biblioteca fuente, que se convertir√° en un m√≥dulo en Python. </font><font style="vertical-align: inherit;">Este archivo tiene su propio formato, que ahora consideraremos, y se asemeja al archivo de encabezado C / C ++ con marcado adicional, que deber√≠a ayudar a SIP a crear un m√≥dulo de Python. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En nuestro ejemplo, este archivo deber√≠a llamarse </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pyfoo.sip</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , porque antes de eso, en el archivo </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pyproject.toml,</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> creamos [tool.sip.bindings. </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pyfoo</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">] En el caso general, puede haber varias particiones de este tipo y, en consecuencia, debe haber varios archivos * .sip. Pero si tenemos varios archivos sip, este es un caso especial desde el punto de vista de SIP, y no lo consideraremos en este art√≠culo. Tenga en cuenta que, en el caso general, el nombre del archivo .sip (y, en consecuencia, el nombre de la secci√≥n) puede no coincidir con el nombre del paquete que se especifica en el par√°metro de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nombre</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en la secci√≥n </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[tool.sip.metadata]</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Considere el archivo </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pyfoo.sip</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de nuestro ejemplo:</font></font><br>
<br>
<pre><code class="cpp hljs">%Module(name=foo, language=<span class="hljs-string">"C"</span>)<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">foo</span><span class="hljs-params">(<span class="hljs-keyword">char</span>*)</span></span>;
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Las l√≠neas que comienzan con el car√°cter "%" se denominan directivas. Deben decirle a SIP c√≥mo ensamblar y dise√±ar correctamente el m√≥dulo Python. En </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">esta p√°gina de documentaci√≥n</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> se describe una lista completa de directivas </font><font style="vertical-align: inherit;">. Algunas directivas tienen par√°metros adicionales. Los par√°metros pueden no ser necesarios. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En este ejemplo, usamos dos directivas; conoceremos algunas otras directivas en los siguientes ejemplos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El archivo </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pyfoo.sip</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> comienza con la directiva </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">% Module (name = foo, language = "C")</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Tenga en cuenta que </font><font style="vertical-align: inherit;">especificamos el </font><font style="vertical-align: inherit;">valor del primer par√°metro ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nombre</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) sin comillas, y el valor del segundo par√°metro ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">idioma</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) con comillas, como cadenas en C / C ++. </font><font style="vertical-align: inherit;">Este es un requisito de esta directiva como se describe en la documentaci√≥n de la directiva </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">% Module</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En la directiva </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">% Module</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font><font style="vertical-align: inherit;">solo se requiere el par√°metro de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nombre</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que establece el nombre del m√≥dulo Python desde el que importaremos la funci√≥n de biblioteca. </font><font style="vertical-align: inherit;">En este caso, el m√≥dulo se llama </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">foo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , contendr√° la funci√≥n </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">foo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , por lo que despu√©s del ensamblaje y la instalaci√≥n lo importaremos utilizando el c√≥digo:</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-keyword">from</span> foo <span class="hljs-keyword">import</span> foo
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Podr√≠amos hacer que este m√≥dulo est√© anidado en otro m√≥dulo reemplazando esta l√≠nea, por ejemplo, con esto:</font></font><br>
<br>
<pre><code class="cpp hljs">%Module(name=foo.bar, language=<span class="hljs-string">"C"</span>)<font></font>
...<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Luego, importa la funci√≥n </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">foo deber√≠a</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ser la siguiente:</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-keyword">from</span> foo.bar <span class="hljs-keyword">import</span> foo
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El par√°metro </font><font style="vertical-align: inherit;">de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">idioma</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de la directiva </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">% Module</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> indica el idioma en el que se escribe la biblioteca de origen. </font><font style="vertical-align: inherit;">El valor de este par√°metro puede ser "C" o "C ++". </font><font style="vertical-align: inherit;">Si no se especifica este par√°metro, SIP asumir√° que la biblioteca est√° escrita en C ++. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora mire la √∫ltima l√≠nea del archivo </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pyfoo.sip</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">foo</span><span class="hljs-params">(<span class="hljs-keyword">char</span>*)</span></span>;
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esta es una descripci√≥n de la interfaz de la funci√≥n de la biblioteca que queremos incluir en el m√≥dulo Python. </font><font style="vertical-align: inherit;">Seg√∫n esta declaraci√≥n, sip crear√° una funci√≥n de Python. </font><font style="vertical-align: inherit;">Creo que todo deber√≠a estar claro aqu√≠.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Recopilamos y verificamos</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora todo est√° listo para compilar un paquete de Python con un enlace para una biblioteca C. En primer lugar, debe compilar la propia biblioteca. </font><font style="vertical-align: inherit;">Vaya a la </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">carpeta pyfoo_c_01 / foo /</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e inicie la compilaci√≥n utilizando el </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">comando make</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="bash hljs">$ make<font></font>
<font></font>
mkdir -p bin<font></font>
gcc -c main.c -o bin/main.o<font></font>
gcc -c foo.c -o bin/foo.o<font></font>
ar rcs bin/libfoo.a bin/foo.o<font></font>
gcc bin/main.o -Lbin -lfoo -o bin/main<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si todo sali√≥ bien, la </font><font style="vertical-align: inherit;">carpeta </font><i><font style="vertical-align: inherit;">bin</font></i><font style="vertical-align: inherit;"> se crear√° </font><font style="vertical-align: inherit;">dentro de la </font><font style="vertical-align: inherit;">carpeta </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">foo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , en la que, entre otros archivos, se </font><i><font style="vertical-align: inherit;">compilar√° la</font></i><font style="vertical-align: inherit;"> biblioteca </font><i><font style="vertical-align: inherit;">libfoo.a</font></i><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Perm√≠teme recordarte que aqu√≠, para no distraerte del tema principal, solo estamos hablando de construir bajo Linux usando gcc. </font><font style="vertical-align: inherit;">
Regrese a la carpeta </font><i><font style="vertical-align: inherit;">pyfoo_c_01</font></i><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Ahora es el momento de conocer los equipos SIP. </font><font style="vertical-align: inherit;">Despu√©s de instalar SIP, los siguientes comandos de l√≠nea de comandos estar√°n disponibles ( </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">p√°gina de documentaci√≥n</font></a><font style="vertical-align: inherit;"> ):</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
<br>
<ul>
<li><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sip-build</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Crea un archivo de objeto de extensi√≥n de Python.</font></font></li>
<li><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">instalaci√≥n por sorbo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Crea un archivo de objeto de extensi√≥n de Python y lo instala.</font></font></li>
<li><i>sip-sdist</i>.      .tar.gz,      pip.</li>
<li><i>sip-wheel</i>.     wheel (   .whl).</li>
<li><i>sip-module</i>.  ,      ,   SIP.  ,    ,    .         ,       standalone project,      ,     ,     ,    .</li>
<li><i>sip-distinfo</i>.     <i>.dist-info</i>,       wheel.</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Estos comandos deben ejecutarse desde la carpeta donde se encuentra el archivo </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pyproject.toml</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para comenzar, para comprender mejor el funcionamiento de SIP, ejecute el </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">comando sip-build</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , con la opci√≥n </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">--verbose</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para obtener resultados m√°s detallados en la consola, y vea qu√© sucede durante el proceso de compilaci√≥n. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
$ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sip-build --verbose</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Estos enlaces se construir√°n: pyfoo. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Generando los enlaces pyfoo ... </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Compilando el m√≥dulo 'foo' ... </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
construyendo la extensi√≥n 'foo' </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
creando build </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
creando build / temp.linux-x86_64-3.8</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
gcc -pthread -Wno-unused-result -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -march = x86-64 -mtune = generic -O3 -pipe -fno-plt -fno-semantic-interposition -march = x86-64 -mtune = gen√©rico -O3 -pipe -fno-plt -march = x86-64 -mtune = gen√©rico -O3 -pipe -fno-plt -fPIC -DSIP_PROTECTED_IS_PUBLIC -Dprotected = public -I. -I ../../ foo -I / usr / include / python3.8 -c sipfoocmodule.c -o build / temp.linux-x86_64-3.8 / sipfoocmodule.o </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
sipfoocmodule.c: en la funci√≥n </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
func_foo </font><font style="vertical-align: inherit;">: </font><font style="vertical-align: inherit;">sipfoocmodule .c: 29: 22: advertencia: declaraci√≥n de funci√≥n impl√≠cita "foo" [-Wimplicit-function-declaraci√≥n] </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 29 | sipRes = foo (a0); </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 El | ^ ~~</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
gcc -pthread -Wno-unused-result -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -march = x86-64 -mtune = generic -O3 -pipe -fno-plt -fno-semantic-interposition -march = x86-64 -mtune = gen√©rico -O3 -pipe -fno-plt -march = x86-64 -mtune = gen√©rico -O3 -pipe -fno-plt -fPIC -DSIP_PROTECTED_IS_PUBLIC -Dprotected = public -I. -I ../../ foo -I / usr / include / python3.8 -c array.c -o build / temp.linux-x86_64-3.8 / array.o </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
gcc -pthread -Wno-unused-result -Wsign -comparar -DNDEBUG -g -fwrapv -O3 -Wall -march = x86-64 -mtune = gen√©rico -O3 -pipe -fno-plt -fno-semantic-interposition -march = x86-64 -mtune = generic -O3 -pipe -fno-plt -march = x86-64 -mtune = gen√©rico -O3 -pipe -fno-plt -fPIC -DSIP_PROTECTED_IS_PUBLIC -Dprotected = public -I. -I ../../ foo -I / usr / include / python3.8 -c bool.cpp -o build / temp.linux-x86_64-3.8 / bool.o</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
gcc -pthread -Wno-unused-result -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -march = x86-64 -mtune = generic -O3 -pipe -fno-plt -fno-semantic-interposition -march = x86-64 -mtune = gen√©rico -O3 -pipe -fno-plt -march = x86-64 -mtune = gen√©rico -O3 -pipe -fno-plt -fPIC -DSIP_PROTECTED_IS_PUBLIC -Dprotected = public -I. -I ../../ foo -I / usr / include / python3.8 -c objmap.c -o build / temp.linux-x86_64-3.8 / objmap.o </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
gcc -pthread -Wno-unused-result -Wsign -comparar -DNDEBUG -g -fwrapv -O3 -Wall -march = x86-64 -mtune = gen√©rico -O3 -pipe -fno-plt -fno-semantic-interposition -march = x86-64 -mtune = generic -O3 -pipe -fno-plt -march = x86-64 -mtune = gen√©rico -O3 -pipe -fno-plt -fPIC -DSIP_PROTECTED_IS_PUBLIC -Dprotected = public -I. -I ../../ foo -I / usr / include / python3.8 -c qtlib.c -o build / temp.linux-x86_64-3.8 / qtlib.o</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
gcc -pthread -Wno-unused-result -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -march = x86-64 -mtune = generic -O3 -pipe -fno-plt -fno-semantic-interposition -march = x86-64 -mtune = gen√©rico -O3 -pipe -fno-plt -march = x86-64 -mtune = gen√©rico -O3 -pipe -fno-plt -fPIC -DSIP_PROTECTED_IS_PUBLIC -Dprotected = public -I. -I ../../ foo -I / usr / include / python3.8 -c int_convertors.c -o build / temp.linux-x86_64-3.8 / int_convertors.o </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
gcc -pthread -Wno-unused-result -Wsign -comparar -DNDEBUG -g -fwrapv -O3 -Wall -march = x86-64 -mtune = gen√©rico -O3 -pipe -fno-plt -fno-semantic-interposition -march = x86-64 -mtune = generic -O3 -pipe -fno-plt -march = x86-64 -mtune = gen√©rico -O3 -pipe -fno-plt -fPIC -DSIP_PROTECTED_IS_PUBLIC -Dprotected = public -I. -I ../../ foo -I / usr / include / python3.8 -c voidptr.c -o build / temp.linux-x86_64-3.8 / voidptr.o</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
gcc -pthread -Wno-unused-result -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -march = x86-64 -mtune = generic -O3 -pipe -fno-plt -fno-semantic-interposition -march = x86-64 -mtune = gen√©rico -O3 -pipe -fno-plt -march = x86-64 -mtune = gen√©rico -O3 -pipe -fno-plt -fPIC -DSIP_PROTECTED_IS_PUBLIC -Dprotected = public -I. -I ../../ foo -I / usr / include / python3.8 -c apiversions.c -o build / temp.linux-x86_64-3.8 / apiversions.o </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
gcc -pthread -Wno-unused-result -Wsign -comparar -DNDEBUG -g -fwrapv -O3 -Wall -march = x86-64 -mtune = gen√©rico -O3 -pipe -fno-plt -fno-semantic-interposition -march = x86-64 -mtune = generic -O3 -pipe -fno-plt -march = x86-64 -mtune = gen√©rico -O3 -pipe -fno-plt -fPIC -DSIP_PROTECTED_IS_PUBLIC -Dprotected = public -I. -I ../../ foo -I / usr / include / python3.8 -c descriptors.c -o build / temp.linux-x86_64-3.8 / descriptors.o</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
gcc -pthread -Wno-unused-result -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -march = x86-64 -mtune = generic -O3 -pipe -fno-plt -fno-semantic-interposition -march = x86-64 -mtune = gen√©rico -O3 -pipe -fno-plt -march = x86-64 -mtune = gen√©rico -O3 -pipe -fno-plt -fPIC -DSIP_PROTECTED_IS_PUBLIC -Dprotected = public -I. -I ../../ foo -I / usr / include / python3.8 -c threads.c -o build / temp.linux-x86_64-3.8 / threads.o </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
gcc -pthread -Wno-unused-result -Wsign -comparar -DNDEBUG -g -fwrapv -O3 -Wall -march = x86-64 -mtune = gen√©rico -O3 -pipe -fno-plt -fno-semantic-interposition -march = x86-64 -mtune = generic -O3 -pipe -fno-plt -march = x86-64 -mtune = gen√©rico -O3 -pipe -fno-plt -fPIC -DSIP_PROTECTED_IS_PUBLIC -Dprotected = public -I. -I ../../ foo -I / usr / include / python3.8 -c siplib.c -o build / temp.linux-x86_64-3.8 / siplib.o</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
siplib.c: en la funci√≥n "slot_richcompare": </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
siplib.c </font><font style="vertical-align: inherit;">: </font><font style="vertical-align: inherit;">9536: 16: advertencia: "st" puede usarse sin inicializaci√≥n en esta funci√≥n [-Wmaybe-noinitialized] </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 9536 | ranura = findSlotInClass (ctd, st); </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 El | ^ ~~~~~~~~~~~~~~~~~~~~~~~~ </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
siplib.c: 10671: 19: nota: "st" fue declarado aqu√≠ </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
10671 | sipPySlotType st; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 El | ^ ~ </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
siplib.c: en la funci√≥n "parsePass2": </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
siplib.c: 5625: 32: advertencia: "propietario" se puede utilizar sin inicializaci√≥n en esta funci√≥n [-Wmaybe-uninitialized] </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 5625 | * propietario = arg; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 El | ~~~~~~~ ^ ~</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
g ++ -pthread -shared -Wl, -O1, - sort-common, - seg√∫n sea necesario, -z, relro, -z, ahora -fno-sem√°ntica-interposici√≥n -Wl, -O1, - sort-common, --as-needed, -z, relro, -z, ahora build / temp.linux-x86_64-3.8 / sipfoocmodule.o build / temp.linux-x86_64-3.8 / array.o build / temp.linux-x86_64-3.8 /bool.o build / temp.linux-x86_64-3.8 / objmap.o build / temp.linux-x86_64-3.8 / qtlib.o build / temp.linux-x86_64-3.8 / int_convertors.o build / temp.linux-x86_64 -3.8 / voidptr.o build / temp.linux-x86_64-3.8 / apiversions.o build / temp.linux-x86_64-3.8 / descriptors.o build / temp.linux-x86_64-3.8 / threads.o build / temp.linux -x86_64-3.8 / siplib.o -L ../../ foo / bin -L / usr / lib -lfoo -o / home / jenyay / projects / soft / sip-examples / pyfoo_c_01 / build / foo / foo. cpython-38-x86_64-linux-gnu.so </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El proyecto ha sido construido.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No profundizaremos en el trabajo de SIP, pero se puede ver en el resultado que algunas fuentes est√°n compilando. </font><font style="vertical-align: inherit;">Estas fuentes se pueden ver en la carpeta </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">build / foo /</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> creada por este comando </font><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pyfoo_c_01</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚îú‚îÄ‚îÄ construir</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚îÇ ‚îî‚îÄ‚îÄ foo</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚îÇ ‚îú‚îÄ‚îÄ apiversions.c</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚îÇ ‚îú‚îÄ‚îÄ array.c</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚îÇ ‚îú‚îÄ‚îÄ array.h</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚îÇ ‚îú‚îÄ‚îÄ bool.cpp</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚îÇ ‚îú‚îÄ‚îÄ construir</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ temp.linux-x86_64-3.8</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ apiversions.o</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ array.o</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ bool.o</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ descriptores. O</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ int_convertors.o</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ objmap.o</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ qtlib.o</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ sipfoocmodule.o</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ipl ‚îÇ ‚îú‚îÄ‚îÄ siplib.o</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ hilos.o</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ voidptr.o</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚îÇ ‚îú‚îÄ‚îÄ descriptors.c</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚îÇ ‚îú‚îÄ‚îÄ foo.cpython-38-x86_64-linux-gnu.so</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚îÇ ‚îú‚îÄ‚îÄ int_convertors.c</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚îÇ ‚îú‚îÄ‚îÄ objmap.c</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚îÇ ‚îú‚îÄ‚îÄ qtlib.c</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚îÇ ‚îú‚îÄ‚îÄ sipAPIfoo.h</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚îÇ ‚îú‚îÄ‚îÄ sipfoocmodule.c</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚îÇ ‚îú‚îÄ‚îÄ sip.h</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚îÇ ‚îú‚îÄ‚îÄ sipint.h</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚îÇ ‚îú‚îÄ‚îÄ siplib.c</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚îÇ ‚îú‚îÄ‚îÄ threads.c</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚îÇ ‚îî‚îÄ‚îÄ voidptr.c</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚îú‚îÄ‚îÄ foo</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚îÇ ‚îú‚îÄ‚îÄ bin</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ foo.o</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ libfoo.a</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ principal</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ main.o</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚îÇ ‚îú‚îÄ‚îÄ foo.c</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚îÇ ‚îú‚îÄ‚îÄ foo.h</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚îÇ ‚îú‚îÄ‚îÄ main.c</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚îÇ ‚îî‚îÄ‚îÄ Makefile</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚îú‚îÄ‚îÄ pyfoo.sip</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚îî‚îÄ‚îÄ pyproject.toml</font></font><font></font>
</pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Las fuentes auxiliares aparecieron </font><font style="vertical-align: inherit;">
en la carpeta </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">build / foo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Por curiosidad, veamos el archivo </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sipfoocmodule.c</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , ya que se relaciona directamente con el m√≥dulo </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">foo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> que se crear√°:</font></font><br>
<br>
<pre><code class="plaintext hljs">/*<font></font>
 * Module code.<font></font>
 *<font></font>
 * Generated by SIP 5.1.1<font></font>
 */<font></font>
<font></font>
#include "sipAPIfoo.h"<font></font>
<font></font>
/* Define the strings used by this module. */<font></font>
const char sipStrings_foo[] = {<font></font>
    'f', 'o', 'o', 0,<font></font>
};<font></font>
<font></font>
PyDoc_STRVAR(doc_foo, "foo(str) -&gt; int");<font></font>
<font></font>
static PyObject *func_foo(PyObject *sipSelf,PyObject *sipArgs)<font></font>
{<font></font>
    PyObject *sipParseErr = SIP_NULLPTR;<font></font>
<font></font>
    {<font></font>
        char* a0;<font></font>
<font></font>
        if (sipParseArgs(&amp;sipParseErr, sipArgs, "s", &amp;a0))<font></font>
        {<font></font>
            int sipRes;<font></font>
<font></font>
            sipRes = foo(a0);<font></font>
<font></font>
            return PyLong_FromLong(sipRes);<font></font>
        }<font></font>
    }<font></font>
<font></font>
    /* Raise an exception if the arguments couldn't be parsed. */<font></font>
    sipNoFunction(sipParseErr, sipName_foo, doc_foo);<font></font>
<font></font>
    return SIP_NULLPTR;<font></font>
}<font></font>
<font></font>
/* This defines this module. */<font></font>
sipExportedModuleDef sipModuleAPI_foo = {<font></font>
    0,<font></font>
    SIP_ABI_MINOR_VERSION,<font></font>
    sipNameNr_foo,<font></font>
    0,<font></font>
    sipStrings_foo,<font></font>
    SIP_NULLPTR,<font></font>
    SIP_NULLPTR,<font></font>
    0,<font></font>
    SIP_NULLPTR,<font></font>
    SIP_NULLPTR,<font></font>
    0,<font></font>
    SIP_NULLPTR,<font></font>
    0,<font></font>
    SIP_NULLPTR,<font></font>
    SIP_NULLPTR,<font></font>
    SIP_NULLPTR,<font></font>
    {SIP_NULLPTR, SIP_NULLPTR, SIP_NULLPTR, SIP_NULLPTR, SIP_NULLPTR,<font></font>
            SIP_NULLPTR, SIP_NULLPTR, SIP_NULLPTR, SIP_NULLPTR, SIP_NULLPTR},<font></font>
    SIP_NULLPTR,<font></font>
    SIP_NULLPTR,<font></font>
    SIP_NULLPTR,<font></font>
    SIP_NULLPTR,<font></font>
    SIP_NULLPTR,<font></font>
    SIP_NULLPTR,<font></font>
    SIP_NULLPTR,<font></font>
    SIP_NULLPTR<font></font>
};<font></font>
<font></font>
/* The SIP API and the APIs of any imported modules. */<font></font>
const sipAPIDef *sipAPI_foo;<font></font>
<font></font>
/* The Python module initialisation function. */<font></font>
#if defined(SIP_STATIC_MODULE)<font></font>
PyObject *PyInit_foo(void)<font></font>
#else<font></font>
PyMODINIT_FUNC PyInit_foo(void)<font></font>
#endif<font></font>
{<font></font>
    static PyMethodDef sip_methods[] = {<font></font>
        {sipName_foo, func_foo, METH_VARARGS, doc_foo},<font></font>
        {SIP_NULLPTR, SIP_NULLPTR, 0, SIP_NULLPTR}<font></font>
    };<font></font>
<font></font>
    static PyModuleDef sip_module_def = {<font></font>
        PyModuleDef_HEAD_INIT,<font></font>
        "foo",<font></font>
        SIP_NULLPTR,<font></font>
        -1,<font></font>
        sip_methods,<font></font>
        SIP_NULLPTR,<font></font>
        SIP_NULLPTR,<font></font>
        SIP_NULLPTR,<font></font>
        SIP_NULLPTR<font></font>
    };<font></font>
<font></font>
    PyObject *sipModule, *sipModuleDict;<font></font>
    /* Initialise the module and get it's dictionary. */<font></font>
    if ((sipModule = PyModule_Create(&amp;sip_module_def)) == SIP_NULLPTR)<font></font>
        return SIP_NULLPTR;<font></font>
<font></font>
    sipModuleDict = PyModule_GetDict(sipModule);<font></font>
<font></font>
    if ((sipAPI_foo = sip_init_library(sipModuleDict)) == SIP_NULLPTR)<font></font>
        return SIP_NULLPTR;<font></font>
<font></font>
    /* Export the module and publish it's API. */<font></font>
    if (sipExportModule(&amp;sipModuleAPI_foo, SIP_ABI_MAJOR_VERSION, SIP_ABI_MINOR_VERSION, 0) &lt; 0)<font></font>
    {<font></font>
        Py_DECREF(sipModule);<font></font>
        return SIP_NULLPTR;<font></font>
    }<font></font>
    /* Initialise the module now all its dependencies have been set up. */<font></font>
    if (sipInitModule(&amp;sipModuleAPI_foo,sipModuleDict) &lt; 0)<font></font>
    {<font></font>
        Py_DECREF(sipModule);<font></font>
        return SIP_NULLPTR;<font></font>
    }<font></font>
<font></font>
    return sipModule;<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si trabaj√≥ con la API Python / C, ver√° funciones familiares. Preste especial atenci√≥n a la funci√≥n </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">func_foo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> que </font><font style="vertical-align: inherit;">comienza en la l√≠nea 18. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como resultado de la compilaci√≥n de estas fuentes, se crear√° el archivo </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">build / foo / foo.cpython-38-x86_64-linux-gnu.so</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , y contiene la extensi√≥n Python, que a√∫n debe instalarse correctamente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para compilar la extensi√≥n e instalarla de inmediato, puede usar el comando </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sip-install</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , pero no lo usaremos, porque de manera predeterminada intenta instalar la extensi√≥n Python creada globalmente en el sistema. Este comando tiene un par√°metro </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">--target-dir</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, con el que puede especificar la ruta donde desea instalar la extensi√≥n, pero es mejor que usemos otras herramientas que crean paquetes, que luego pueden instalarse utilizando pip. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Primero, use el </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">comando sip-sdist</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Usarlo es muy simple:</font></font><br>
<br>
<pre><code class="bash hljs">$ sip-sdist<font></font>
<font></font>
The sdist has been built.<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Despu√©s de eso, se </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">crear√° el</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> archivo </font><i><font style="vertical-align: inherit;">pyfoo-0.1.tar.gz</font></i><font style="vertical-align: inherit;"> , que se puede instalar con el comando:</font></font><br>
<br>
<pre><code class="bash hljs">pip install --user pyfoo-0.1.tar.gz
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como resultado, se mostrar√° la siguiente informaci√≥n y se instalar√° el paquete:</font></font><br>
<br>
<pre><code class="plaintext hljs">Processing ./pyfoo-0.1.tar.gz<font></font>
  Installing build dependencies ... done<font></font>
  Getting requirements to build wheel ... done<font></font>
    Preparing wheel metadata ... done<font></font>
Building wheels for collected packages: pyfoo<font></font>
  Building wheel for pyfoo (PEP 517) ... done<font></font>
  Created wheel for pyfoo: filename=pyfoo-0.1-cp38-cp38-manylinux1_x86_64.whl size=337289 sha256=762fc578...<font></font>
  Stored in directory: /home/jenyay/.cache/pip/wheels/54/dc/d8/cc534fff...<font></font>
Successfully built pyfoo<font></font>
Installing collected packages: pyfoo<font></font>
  Attempting uninstall: pyfoo<font></font>
    Found existing installation: pyfoo 0.1<font></font>
    Uninstalling pyfoo-0.1:<font></font>
      Successfully uninstalled pyfoo-0.1<font></font>
Successfully installed pyfoo-0.1<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Asegur√©monos de que hayamos logrado hacer un enlace de Python. </font><font style="vertical-align: inherit;">Iniciamos Python e intentamos llamar a la funci√≥n. </font><font style="vertical-align: inherit;">Perm√≠tame recordarle que de acuerdo con nuestra configuraci√≥n, el paquete </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pyfoo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> contiene el m√≥dulo </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">foo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que tiene la funci√≥n </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">foo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">from</span> foo <span class="hljs-keyword">import</span> foo
<span class="hljs-meta">&gt;&gt;&gt; </span>foo(<span class="hljs-string">b'123456'</span>)
<span class="hljs-number">12</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tenga en cuenta que, como par√°metro de la funci√≥n, pasamos no solo una cadena, sino una cadena de bytes b'123456 ', un an√°logo directo de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">char *</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> a C. Un poco m√°s tarde, agregaremos la conversi√≥n de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">char *</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> a </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">str</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y viceversa. El resultado era esperado. Perm√≠tame recordarle que la funci√≥n </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">foo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> devuelve el doble tama√±o de una matriz de tipo </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">char *</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que se le pasa como par√°metro. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Intentemos pasar una </font><font style="vertical-align: inherit;">cadena Python normal </font><font style="vertical-align: inherit;">a la funci√≥n </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">foo en</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> lugar de una lista de bytes.</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">from</span> foo <span class="hljs-keyword">import</span> foo
<span class="hljs-meta">&gt;&gt;&gt; </span>foo(<span class="hljs-string">'123456'</span>)<font></font>
<font></font>
Traceback (most recent call last):<font></font>
  File <span class="hljs-string">"&lt;stdin&gt;"</span>, line <span class="hljs-number">1</span>, <span class="hljs-keyword">in</span> &lt;module&gt;<font></font>
TypeError: foo(str): argument <span class="hljs-number">1</span> has unexpected type <span class="hljs-string">'str'</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El enlace creado no pudo convertir la cadena a </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">char *</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ; discutiremos c√≥mo ense√±arle c√≥mo hacerlo en la siguiente secci√≥n. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Felicitaciones, hicimos el primer enlace en una biblioteca escrita en C. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Salga del int√©rprete de Python y ensamble el ensamblaje en formato de rueda. Como probablemente sepa, la rueda es un formato de paquete relativamente nuevo que se ha utilizado universalmente recientemente. El formato se describe en </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PEP 427, "The Wheel Binary Package Format 1.0",</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pero una descripci√≥n de las caracter√≠sticas del formato de rueda es un tema digno de un art√≠culo grande por separado. Es importante para nosotros que el usuario pueda instalar f√°cilmente el paquete en formato de rueda utilizando pip. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un paquete en formato de rueda no es m√°s complicado que un paquete en formato sdist. Para hacer esto, en la carpeta con el archivo</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pyproject.toml</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> necesita ejecutar el comando</font></font><br>
<br>
<pre><code class="bash hljs">sip-wheel
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Despu√©s de ejecutar este comando, se mostrar√° el proceso de compilaci√≥n y puede haber advertencias del compilador: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
$ sip-wheel </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Estos enlaces se construir√°n: pyfoo. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Generando los enlaces pyfoo ... </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Compilando el m√≥dulo 'foo' ... </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
sipfoocmodule.c: En la funci√≥n func_foo: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
sipfoocmodule.c: 29: 22: advertencia: declaraci√≥n impl√≠cita de la funci√≥n foo [-Wimplicit-function-declaraci√≥n] </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 29 | sipRes = foo (a0); </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 El | ^ ~~ </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
siplib.c: en la funci√≥n "slot_richcompare": </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
siplib.c </font><font style="vertical-align: inherit;">: </font><font style="vertical-align: inherit;">9536: 16: advertencia: "st" se puede utilizar sin inicializaci√≥n en esta funci√≥n [-Wmaybe-uninitialized] </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 9536 | ranura = findSlotInClass (ctd, st); </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 El | ^ ~~~~~~~~~~~~~~~~~~~~~~~~ </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
siplib.c: 10671: 19: comentario: "st" fue declarado aqu√≠</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
10671 | sipPySlotType st; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 El | ^ ~ </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
siplib.c: en la funci√≥n "parsePass2": </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
siplib.c: 5625: 32: advertencia: "propietario" puede utilizarse sin inicializaci√≥n en esta funci√≥n [-Wmaybe-noinitialized] </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 5625 | * propietario = arg; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 El | ~~~~~~~ ^ ~ ~ </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La rueda ha sido construida. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cuando se complete el ensamblaje (nuestro peque√±o proyecto se compila r√°pidamente), </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aparecer√°</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> un archivo con el nombre </font><i><font style="vertical-align: inherit;">pyfoo-0.1-cp38-cp38-manylinux1_x86_64.whl</font></i><font style="vertical-align: inherit;"> o similar </font><font style="vertical-align: inherit;">en la carpeta del proyecto </font><font style="vertical-align: inherit;">. El nombre del archivo generado puede variar seg√∫n su sistema operativo y la versi√≥n de Python. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora podemos instalar este paquete usando pip:</font></font><br>
<br>
<pre><code class="bash hljs">pip install --user --upgrade pyfoo-0.1-cp38-cp38-manylinux1_x86_64.whl
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La opci√≥n </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">--upgrade</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> se usa </font><i><font style="vertical-align: inherit;">aqu√≠</font></i><font style="vertical-align: inherit;"> para que pip reemplace el m√≥dulo pyfoo instalado anteriormente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adem√°s, </font><font style="vertical-align: inherit;">se pueden usar </font><font style="vertical-align: inherit;">el m√≥dulo </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">foo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y el paquete </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pyfoo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , como se muestra arriba.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Agregar reglas de conversi√≥n a char *</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En la secci√≥n anterior, encontramos un problema de que la funci√≥n </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">foo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> solo puede aceptar un conjunto de bytes, pero no cadenas. Ahora arreglaremos esta deficiencia. Para hacer esto, utilizaremos otra herramienta SIP: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">anotaciones</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Las anotaciones se usan dentro de los archivos .sip y se aplican a algunos elementos del c√≥digo: funciones, clases, argumentos de funci√≥n, excepciones, variables, etc. Las anotaciones se escriben entre barras diagonales: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ annotation /</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Una anotaci√≥n puede funcionar como un indicador, que puede estar en el estado establecido o no establecido, por ejemplo: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ ReleaseGIL /</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , o algunas anotaciones deben tener asignados algunos valores, por ejemplo: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ Encoding = "UTF-8" /</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Si es necesario aplicar varias anotaciones a alg√∫n objeto, entonces est√°n separadas por comas dentro de barras: / annotation_1, annotation_2 /. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En el siguiente ejemplo, que se encuentra en la carpeta </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pyfoo_c_02</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , agregue un archivo de </font><font style="vertical-align: inherit;">funci√≥n de par√°metro de anotaci√≥n </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pyfoo.sip </font></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">foo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="plaintext hljs">%Module(name=foo, language="C")<font></font>
<font></font>
int foo(char* /Encoding="UTF-8"/);<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La anotaci√≥n de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">codificaci√≥n</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> indica en qu√© codificaci√≥n se debe codificar la cadena que se pasar√° a la funci√≥n. Los valores para esta anotaci√≥n pueden ser: ASCII, Latin-1, UTF-8 o None. Si la anotaci√≥n de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">codificaci√≥n</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> no se especifica o es igual a </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ninguna</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , entonces el par√°metro para dicha funci√≥n no est√° sujeto a ninguna codificaci√≥n y se pasa a la funci√≥n tal como est√°, pero en este caso el par√°metro en el c√≥digo Python debe ser de tipo </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bytes</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , es decir. una matriz de bytes, como vimos en el ejemplo anterior. Si se especifica la codificaci√≥n, este par√°metro puede ser una cadena (escriba </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">str</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en Python). </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> anotaci√≥n de </font><i><font style="vertical-align: inherit;">codificaci√≥n</font></i><font style="vertical-align: inherit;"> solo se puede aplicar a par√°metros de tipo </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">char</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">const char</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ,</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">char *</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> o </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">const char *</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vamos a ver c√≥mo el </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">foo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> funci√≥n </font><font style="vertical-align: inherit;">del </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">foo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> m√≥dulo </font><font style="vertical-align: inherit;">funciona ahora </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Para hacer esto, como antes, primero debe compilar la biblioteca </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">foo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> llamando </font><font style="vertical-align: inherit;">al comando </font><i><font style="vertical-align: inherit;">make</font></i><font style="vertical-align: inherit;"> dentro de la carpeta </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">foo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , y luego </font><font style="vertical-align: inherit;">llame al comando, por ejemplo, </font><i><font style="vertical-align: inherit;">sip-wheel,</font></i><font style="vertical-align: inherit;"> desde la carpeta de ejemplo </font><i><font style="vertical-align: inherit;">pyfoo_c_02</font></i><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Se </font><i><font style="vertical-align: inherit;">crear√° el</font></i><font style="vertical-align: inherit;"> archivo </font><i><font style="vertical-align: inherit;">pyfoo-0.2-cp38-cp38-manylinux1_x86_64.whl</font></i><font style="vertical-align: inherit;"> o con un nombre similar, que se puede configurar con el comando:</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="bash hljs">pip install --user --upgrade pyfoo-0.2-cp38-cp38-manylinux1_x86_64.whl
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si todo sali√≥ bien, inicie el int√©rprete de Python e intente llamar a la funci√≥n </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">foo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> con un argumento de cadena:</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">from</span> foo <span class="hljs-keyword">import</span> foo<font></font>
<font></font>
<span class="hljs-meta">&gt;&gt;&gt; </span>foo(<span class="hljs-string">b'qwerty'</span>)
<span class="hljs-number">12</span><font></font>
<font></font>
<span class="hljs-meta">&gt;&gt;&gt; </span>foo(<span class="hljs-string">'qwerty'</span>)
<span class="hljs-number">12</span><font></font>
<font></font>
<span class="hljs-meta">&gt;&gt;&gt; </span>foo(<span class="hljs-string">''</span>)
<span class="hljs-number">24</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Primero, nos aseguramos de que </font><font style="vertical-align: inherit;">todav√≠a sea posible </font><font style="vertical-align: inherit;">usar </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bytes</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Despu√©s de eso, nos aseguramos de que ahora tambi√©n podamos pasar </font><font style="vertical-align: inherit;">argumentos de cadena </font><font style="vertical-align: inherit;">a la funci√≥n </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">foo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Tenga en cuenta que la funci√≥n </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">foo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para un argumento de cadena con letras rusas devuelve un valor dos veces mayor que para una cadena que contiene solo letras latinas. Esto sucedi√≥ porque la funci√≥n </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">foo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> no cuenta la longitud de la cadena en caracteres (y la duplica), sino la longitud de la matriz </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">char *</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , y dado que en la codificaci√≥n UTF-8 las letras rusas ocupan 2 bytes, entonces el tama√±o de la matriz </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">char *</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> despu√©s de la conversi√≥n de Las cadenas de Python resultaron ser el doble de largas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬°Multa! Resolvimos el problema con el argumento de la funci√≥n.</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">foo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , pero ¬øqu√© </font><i><font style="vertical-align: inherit;">pasa</font></i><font style="vertical-align: inherit;"> si tenemos docenas o cientos de tales funciones en nuestra biblioteca, tendr√° que especificar la codificaci√≥n de par√°metros para cada una de ellas? A menudo, la codificaci√≥n utilizada en un programa es la misma, y ‚Äã‚Äãno hay ning√∫n prop√≥sito para que diferentes funciones indiquen diferentes codificaciones. En este caso, SIP tiene la capacidad de especificar la codificaci√≥n predeterminada, y si para alguna funci√≥n la codificaci√≥n necesita otra, entonces se puede redefinir usando la anotaci√≥n de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">codificaci√≥n</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para establecer la codificaci√≥n de los par√°metros de la funci√≥n de forma predeterminada, se </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">utiliza la</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> directiva </font><i><font style="vertical-align: inherit;">% DefaultEncoding</font></i><font style="vertical-align: inherit;"> . Su uso se muestra en el ejemplo ubicado en la carpeta </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pyfoo_c_03</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para aprovechar la directiva </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">% DefaultEncoding</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , cambie el archivo </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pyfoo.sip</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, ahora su contenido es el siguiente:</font></font><br>
<br>
<pre><code class="plaintext hljs">%Module(name=foo, language="C")<font></font>
%DefaultEncoding "UTF-8"<font></font>
<font></font>
int foo(char*);<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora, si el argumento es una funci√≥n de tipo </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">char</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">char *</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , etc. </font><font style="vertical-align: inherit;">Si </font><font style="vertical-align: inherit;">no hay una anotaci√≥n de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">codificaci√≥n</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , la codificaci√≥n se toma de la directiva </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">% DefaultEncoding</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , y si no es as√≠, la conversi√≥n no se realiza, y para todos los par√°metros </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">char *</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , etc. </font><font style="vertical-align: inherit;">es necesario transferir no l√≠neas sino </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bytes</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un ejemplo de la carpeta </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pyfoo_c_03 se</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> recopila y verifica de la misma manera que un ejemplo de la carpeta </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pyfoo_c_02</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Brevemente sobre project.py. </font><font style="vertical-align: inherit;">Automatizar el montaje</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hasta ahora, hemos utilizado dos archivos de utilidades para crear un enlace de Python: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pyproject.toml</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pyfoo.sip</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Ahora nos familiarizaremos con otro archivo de este tipo, que deber√≠a llamarse </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">project.py</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Con este script, podemos influir en el proceso de compilaci√≥n de nuestro paquete. Hagamos la automatizaci√≥n de compilaci√≥n. Para recopilar los ejemplos </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pyfoo_c_01</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pyfoo_c_03</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de las secciones anteriores, primero ten√≠a que ir a la carpeta </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">foo /</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , compilar all√≠ usando el </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">comando make</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , volver a la carpeta donde se encuentra el archivo </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pyproject.toml</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y solo luego comenzar a construir el paquete usando uno de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sip- *</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> comandos </font><font style="vertical-align: inherit;">.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora nuestro objetivo es asegurarnos de que al ejecutar los </font><i><font style="vertical-align: inherit;">comandos </font></i></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sip-build</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sip-sdist</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sip-wheel</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , el ensamblaje de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">foo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> C-library se inicie primero </font><font style="vertical-align: inherit;">, y luego el comando en s√≠ ya se haya iniciado. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un ejemplo creado en esta secci√≥n se encuentra en la carpeta de </font><font style="vertical-align: inherit;">origen </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pyfoo_c_04</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para cambiar el proceso de compilaci√≥n, podemos </font><font style="vertical-align: inherit;">declarar una clase </font><font style="vertical-align: inherit;">en el archivo </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">project.py</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (el nombre del archivo debe ser solo eso) que se deriva de la clase </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sipbuild.Project</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Esta clase tiene m√©todos que podemos anular por nuestra cuenta. </font><font style="vertical-align: inherit;">Actualmente estamos interesados ‚Äã‚Äãen los siguientes m√©todos:</font></font><br>
<br>
<ul>
<li><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">construir</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Llamado durante la llamada al </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">comando sip-build</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
<li><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">build_sdist</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Se llama cuando se llama al </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">comando sip-sdist</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
<li><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">build_wheel</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Se llama cuando se llama al comando </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sip-wheel</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
<li><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">instalar</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Se invoca cuando se invoca el comando </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sip-install</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es decir, podemos redefinir el comportamiento de estos comandos. </font><font style="vertical-align: inherit;">Estrictamente hablando, los m√©todos enumerados se declaran en la clase abstracta </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sipbuild.AbstractProject</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , a partir de la cual se crea la clase derivada </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sipbuild.Project</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cree un archivo </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">project.py</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> con los siguientes contenidos:</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-keyword">import</span> os
<span class="hljs-keyword">import</span> subprocess<font></font>
<font></font>
<span class="hljs-keyword">from</span> sipbuild <span class="hljs-keyword">import</span> Project<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FooProject</span>(<span class="hljs-params">Project</span>):</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">_build_foo</span>(<span class="hljs-params">self</span>):</span>
        cwd = os.path.abspath(<span class="hljs-string">'foo'</span>)<font></font>
        subprocess.run([<span class="hljs-string">'make'</span>], cwd=cwd, capture_output=<span class="hljs-literal">True</span>, check=<span class="hljs-literal">True</span>)<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">build</span>(<span class="hljs-params">self</span>):</span><font></font>
        self._build_foo()<font></font>
        super().build()<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">build_sdist</span>(<span class="hljs-params">self, sdist_directory</span>):</span><font></font>
        self._build_foo()<font></font>
        <span class="hljs-keyword">return</span> super().build_sdist(sdist_directory)<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">build_wheel</span>(<span class="hljs-params">self, wheel_directory</span>):</span><font></font>
        self._build_foo()<font></font>
        <span class="hljs-keyword">return</span> super().build_wheel(wheel_directory)<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">install</span>(<span class="hljs-params">self</span>):</span><font></font>
        self._build_foo()<font></font>
        super().install()<font></font>
</code></pre><br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Declaramos la</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
clase </font><i><font style="vertical-align: inherit;">FooProject</font></i><font style="vertical-align: inherit;"> , derivada de la clase </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sipbuild.Project,</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font><i><font style="vertical-align: inherit;">definimos los </font></i><i><font style="vertical-align: inherit;">m√©todos </font></i></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">build</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">build_sdist</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">build_wheel</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">instalaci√≥n</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en ella </font><font style="vertical-align: inherit;">. En todos estos m√©todos, llamamos a los m√©todos con el mismo nombre de la clase base, antes de llamar al m√©todo </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">_build_foo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que inicia la ejecuci√≥n del </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">comando make</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en la carpeta </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">foo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tenga en cuenta que los </font><i><font style="vertical-align: inherit;">m√©todos </font></i></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">build_sdist</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">build_wheel</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> deber√≠an devolver el nombre del archivo que crearon. Esto no est√° escrito en la documentaci√≥n, pero est√° indicado en las fuentes SIP. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora no necesitamos ejecutar el </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">comando make</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">manualmente para construir la biblioteca </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">foo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , esto se har√° autom√°ticamente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si ahora </font><font style="vertical-align: inherit;">ejecuta el comando </font><i><font style="vertical-align: inherit;">sip-wheel</font></i><font style="vertical-align: inherit;"> en la carpeta </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pyfoo_c_04</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , se crea un archivo con el nombre pyfoo-0.4-cp38-cp38-manylinux1_x86_64.whl o similar, dependiendo de su sistema operativo y versi√≥n de Python. </font><font style="vertical-align: inherit;">
Este paquete se puede instalar usando el comando:</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="bash hljs">pip install --user --upgrade pyfoo-0.4-cp38-cp38-manylinux1_x86_64.whl
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Despu√©s de eso, puede asegurarse de que el </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">foo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> funci√≥n </font><font style="vertical-align: inherit;">del </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">foo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> m√≥dulo </font><font style="vertical-align: inherit;">sigue funcionando.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Agregar opciones de l√≠nea de comando para construir</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El siguiente ejemplo se encuentra en la carpeta </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pyfoo_c_05</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , y el paquete tiene un n√∫mero de versi√≥n de 0.5 (consulte la configuraci√≥n en el archivo </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pyproject.toml</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). Este ejemplo se basa en un </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ejemplo de la documentaci√≥n</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> con algunas correcciones. En este ejemplo, volveremos a hacer nuestro archivo </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">project.py</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y agregaremos nuevas opciones de l√≠nea de comandos para la compilaci√≥n. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En nuestros ejemplos, estamos construyendo una biblioteca muy simple </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">foo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, y en proyectos reales, la biblioteca puede ser bastante grande y no tendr√° sentido incluirla en el c√≥digo fuente del proyecto de enlace de Python. Perm√≠tame recordarle que SIP se cre√≥ originalmente para crear un enlace para una biblioteca tan grande como Qt. Por supuesto, puede argumentar que los subm√≥dulos de git pueden ayudar a organizar la fuente, pero ese no es el punto. Suponga que la biblioteca puede no estar en la carpeta con la fuente de enlace. En este caso, surge la pregunta: ¬ød√≥nde debe buscar el recopilador SIP el encabezado de la biblioteca y los archivos de objeto? En este caso, diferentes usuarios pueden tener sus propias formas de colocar la biblioteca. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para resolver este problema, agregaremos dos nuevas opciones de l√≠nea de comandos al sistema de compilaci√≥n, con el que puede especificar la ruta al archivo </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">foo.h</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (par√°metro </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">--foo-include-dir</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) y al archivo de objeto de biblioteca (par√°metro </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">--foo-library-dir</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). Adem√°s, asumiremos que si no se especifican estos par√°metros, la biblioteca </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">foo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> todav√≠a se encuentra junto con las fuentes de enlace. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Necesitamos crear el archivo </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">project.py</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nuevamente </font><font style="vertical-align: inherit;">, y en √©l declarar una clase derivada de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sipbuild.Project</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Veamos primero la nueva versi√≥n del archivo </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">project.py</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y luego </font><font style="vertical-align: inherit;">veamos </font><font style="vertical-align: inherit;">c√≥mo funciona.</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-keyword">import</span> os<font></font>
<font></font>
<span class="hljs-keyword">from</span> sipbuild <span class="hljs-keyword">import</span> Option, Project<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FooProject</span>(<span class="hljs-params">Project</span>):</span>
    <span class="hljs-string">"""        
       foo.
    """</span><font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_options</span>(<span class="hljs-params">self</span>):</span>
        <span class="hljs-string">"""     . """</span><font></font>
<font></font>
        tools = [<span class="hljs-string">'build'</span>, <span class="hljs-string">'install'</span>, <span class="hljs-string">'sdist'</span>, <span class="hljs-string">'wheel'</span>]<font></font>
<font></font>
        <span class="hljs-comment">#   .</span><font></font>
        options = super().get_options()<font></font>
<font></font>
        <span class="hljs-comment">#   </span>
        inc_dir_option = Option(<span class="hljs-string">'foo_include_dir'</span>,<font></font>
                                help=<span class="hljs-string">"the directory containing foo.h"</span>,<font></font>
                                metavar=<span class="hljs-string">"DIR"</span>,<font></font>
                                default=os.path.abspath(<span class="hljs-string">'foo'</span>),<font></font>
                                tools=tools)<font></font>
        options.append(inc_dir_option)<font></font>
<font></font>
        lib_dir_option = Option(<span class="hljs-string">'foo_library_dir'</span>,<font></font>
                                help=<span class="hljs-string">"the directory containing the foo library"</span>,<font></font>
                                metavar=<span class="hljs-string">"DIR"</span>,<font></font>
                                default=os.path.abspath(<span class="hljs-string">'foo/bin'</span>),<font></font>
                                tools=tools)<font></font>
<font></font>
        options.append(lib_dir_option)<font></font>
<font></font>
        <span class="hljs-keyword">return</span> options<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">apply_user_defaults</span>(<span class="hljs-params">self, tool</span>):</span>
        <span class="hljs-string">"""    . """</span><font></font>
<font></font>
        <span class="hljs-comment">#     </span><font></font>
        super().apply_user_defaults(tool)<font></font>
<font></font>
        <span class="hljs-comment">#  ,         </span><font></font>
        self.foo_include_dir = os.path.abspath(self.foo_include_dir)<font></font>
        self.foo_library_dir = os.path.abspath(self.foo_library_dir)<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">update</span>(<span class="hljs-params">self, tool</span>):</span>
        <span class="hljs-string">"""   . """</span><font></font>
<font></font>
        <span class="hljs-comment">#   pyfoo</span>
        <span class="hljs-comment"># (  pyproject.toml  [tool.sip.bindings.pyfoo])</span>
        foo_bindings = self.bindings[<span class="hljs-string">'pyfoo'</span>]<font></font>
<font></font>
        <span class="hljs-comment">#   include_dirs  </span>
        <span class="hljs-keyword">if</span> self.foo_include_dir <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:<font></font>
            foo_bindings.include_dirs = [self.foo_include_dir]<font></font>
<font></font>
        <span class="hljs-comment">#   library_dirs  </span>
        <span class="hljs-keyword">if</span> self.foo_library_dir <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:<font></font>
            foo_bindings.library_dirs = [self.foo_library_dir]<font></font>
<font></font>
        super().update(tool)<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nuevamente creamos la clase </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FooProject</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , derivada de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sipbuild.Project</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . En este ejemplo, el ensamblaje autom√°tico de la biblioteca </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">foo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est√° deshabilitado </font><font style="vertical-align: inherit;">, porque ahora se supone que puede estar en otro lugar, y para cuando se cree el enlace, los archivos de encabezado y objeto deber√≠an estar listos. </font><font style="vertical-align: inherit;">Tres m√©todos se redefinen </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
en el </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FooProject</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> clase </font><font style="vertical-align: inherit;">: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">get_options</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">apply_user_defaults,</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">actualizaci√≥n</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Consid√©relos con m√°s cuidado. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comencemos con el m√©todo </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">get_options</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Este m√©todo deber√≠a devolver una lista de instancias de la clase </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sipbuild.Option</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Cada elemento de la lista es una opci√≥n de l√≠nea de comando. Dentro del m√©todo anulado, obtenemos la lista de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">opciones</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> predeterminadas (la variable de </font><i><font style="vertical-align: inherit;">opciones</font></i><font style="vertical-align: inherit;"> ) llamando al m√©todo de clase base del mismo nombre, luego creamos dos nuevas opciones ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">--foo_include_dir</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">--foo_library_dir</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) y las agregamos a la lista, y luego devolvemos esta lista de la funci√≥n. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El constructor de la clase </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Opci√≥n</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> acepta un par√°metro requerido (nombre de la opci√≥n) y un n√∫mero suficientemente grande de opcionales que describen el tipo de valor para este par√°metro, el valor predeterminado, la descripci√≥n del par√°metro y algunos otros. Este ejemplo utiliza las siguientes opciones para el constructor de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">opciones</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<ul>
<li><i>help</i>   ,   ,     <i>sip-wheel -h</i></li>
<li><i>metavar</i> ‚Äî  ,    ,       .     <i>metavar</i>  ¬´DIR¬ª,   ,     ‚Äî .</li>
<li><i>default</i> ‚Äî     .    ,          ,   <i>foo</i>   ,      (    ).</li>
<li><i>tools</i> ‚Äî  ,        .        <i>sip-build</i>, <i>sip-install</i>, <i>sip-sdist</i>  <i>sip-wheel</i>,  tools = ['build', 'install', 'sdist', 'wheel'].</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El siguiente m√©todo sobrecargado </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">apply_user_defaults est√°</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dise√±ado para establecer valores de par√°metros que el usuario puede pasar a trav√©s de la l√≠nea de comando. El m√©todo </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">apply_user_defaults</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de la clase base crea una </font><font style="vertical-align: inherit;">variable (miembro de clase) </font><font style="vertical-align: inherit;">para cada par√°metro de l√≠nea de comando creado en el m√©todo </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">get_options</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , por lo que es importante llamar al m√©todo de clase base del mismo nombre antes de usar las variables creadas para que todas las variables creadas usando los par√°metros de l√≠nea de comando se creen e inicialicen con valores predeterminados . Despu√©s de eso, en nuestro ejemplo, se </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">crear√°n</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> las variables </font><i><font style="vertical-align: inherit;">self.foo_include_dir</font></i><font style="vertical-align: inherit;"> y </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">self.foo_library_dir</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Si el usuario no ha especificado los par√°metros de l√≠nea de comando correspondientes, tomar√° los valores predeterminados de acuerdo con los par√°metros del constructor de la clase </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Opci√≥n</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (par√°metro </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">predeterminado</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). Si </font><font style="vertical-align: inherit;">no se establece el </font><font style="vertical-align: inherit;">par√°metro </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">predeterminado</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , dependiendo del tipo del valor del par√°metro esperado, se inicializar√° Ninguno, o una lista vac√≠a, o 0. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dentro del m√©todo </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">apply_user_defaults</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font><i><font style="vertical-align: inherit;">nos</font></i><font style="vertical-align: inherit;"> aseguramos de que las rutas en las variables </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">self.foo_include_dir</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">self.foo_library_dir sean</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> siempre absolutas. Esto es necesario para que no dependa de cu√°l ser√° la carpeta de trabajo en el momento en que se inicie el ensamblaje. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El √∫ltimo m√©todo sobrecargado en esta clase es la </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">actualizaci√≥n.</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Se llama a este m√©todo cuando es necesario aplicar al proyecto los cambios realizados antes. Por ejemplo, cambie o agregue los par√°metros especificados en el archivo </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pyproject.toml</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . En los ejemplos anteriores, establecemos las rutas a los archivos de encabezado y objeto utilizando los par√°metros </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">include-dirs</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">library-dirs</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font><font style="vertical-align: inherit;">respectivamente, dentro de la secci√≥n </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[tool.sip.bindings.pyfoo]</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Ahora estableceremos estos par√°metros desde el script </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">project.py</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , por lo que en el archivo </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pyproject.toml</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> eliminaremos estos par√°metros:</font></font><br>
<br>
<pre><code class="plaintext hljs">[build-system]<font></font>
requires = ["sip &gt;=5, &lt;6"]<font></font>
build-backend = "sipbuild.api"<font></font>
<font></font>
[tool.sip.metadata]<font></font>
name = "pyfoo"<font></font>
version = "0.3"<font></font>
license = "MIT"<font></font>
<font></font>
[tool.sip.bindings.pyfoo]<font></font>
headers = ["foo.h"]<font></font>
libraries = ["foo"]<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dentro del m√©todo, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">actual√≠cenos</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> desde el diccionario </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">self.bindings</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> keyed </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pyfoo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> gat instance </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sipbuild.Bindings</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . El nombre de la clave corresponde a [tool.sip.bindings. </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pyfoo</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ] del archivo </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pyproject.toml</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , y la instancia de clase as√≠ obtenida describe la configuraci√≥n descrita en esta secci√≥n. Luego, los miembros de esta clase </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">include_dirs</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">library_dirs</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (los nombres de los miembros corresponden a los par√°metros </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">include-dirs</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">library-dirs</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> con un gui√≥n reemplazado por guiones bajos) se les asignan listas que contienen las rutas almacenadas en los miembros </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">self.foo_include_dir</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">self.foo_library_dir</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. En este ejemplo, para mayor precisi√≥n, verificamos que los valores </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">self.foo_include_dir</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">self.foo_library_dir</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> no </font><i><font style="vertical-align: inherit;">son</font></i><font style="vertical-align: inherit;"> iguales a </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">None</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , pero en este ejemplo esta condici√≥n siempre se cumple porque los par√°metros de la l√≠nea de comandos que creamos tienen valores predeterminados. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por lo tanto, preparamos los archivos de configuraci√≥n para que durante el ensamblaje fuera posible indicar las rutas a los archivos de encabezado y objeto. Veamos qu√© pas√≥. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Primero, aseg√∫rese de que los valores predeterminados funcionen. Para hacer esto, vaya a la carpeta </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pyfoo_c_05 / foo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y compile la biblioteca usando el </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">comando make</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , porque en este ejemplo deshabilitamos la compilaci√≥n autom√°tica de la biblioteca. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Despu√©s de eso, ve a la carpeta</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pyfoo_c_05</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y ejecuta el comando </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sip-wheel</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Como resultado de este comando, se </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">crear√°</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> el </font><i><font style="vertical-align: inherit;">archivo pyfoo-0.5-cp38-cp38-manylinux1_x86_64.whl</font></i><font style="vertical-align: inherit;"> o con un nombre similar. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora mueva la carpeta </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">foo en</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> alg√∫n lugar fuera de la carpeta </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pyfoo_c_05</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y ejecute el comando </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sip-wheel</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nuevamente </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Como resultado, obtenemos el error esperado informando que no tenemos un archivo de biblioteca de objetos:</font></font><br>
<br>
<pre><code class="plaintext hljs">usr/bin/ld:   -lfoo<font></font>
collect2: :  ld     1<font></font>
sip-wheel: Unable to compile the 'foo' module: command 'g++' failed with exit status 1<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Despu√©s de eso, ejecute </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sip-wheel</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> con la nueva opci√≥n de l√≠nea de comandos:</font></font><br>
<br>
<pre><code class="bash hljs">sip-wheel --foo-include-dir <span class="hljs-string">".../foo"</span> --foo-library-dir <span class="hljs-string">".../foo/bin"</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En lugar de los puntos suspensivos, debe especificar la ruta a la carpeta donde movi√≥ la carpeta </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">foo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> con la biblioteca ensamblada. </font><font style="vertical-align: inherit;">Como resultado, el ensamblado deber√≠a tener √©xito en la creaci√≥n del archivo .whl. </font><font style="vertical-align: inherit;">El m√≥dulo creado se puede instalar y probar de la misma manera que en las secciones anteriores.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Verifique el orden de los m√©todos de llamada desde project.py</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El siguiente ejemplo, que consideraremos, ser√° muy simple; demostrar√° el orden de invocaci√≥n de los m√©todos de la clase </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Project</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que hemos sobrecargado en las secciones anteriores. Esto puede ser √∫til para comprender cu√°ndo se pueden inicializar las variables. Este ejemplo se encuentra en la carpeta </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pyfoo_c_06</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en el repositorio de origen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La esencia de este ejemplo es </font><font style="vertical-align: inherit;">sobrecargar todos los m√©todos que usamos antes </font><font style="vertical-align: inherit;">en la clase </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FooProject</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que se encuentra en el archivo </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">project.py</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , y agregarles llamadas a la funci√≥n de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">impresi√≥n</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que mostrar√≠an el nombre del m√©todo en el que se encuentra:</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-keyword">from</span> sipbuild <span class="hljs-keyword">import</span> Project<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FooProject</span>(<span class="hljs-params">Project</span>):</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_options</span>(<span class="hljs-params">self</span>):</span>
        print(<span class="hljs-string">'get_options()'</span>)<font></font>
        options = super().get_options()<font></font>
        <span class="hljs-keyword">return</span> options<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">apply_user_defaults</span>(<span class="hljs-params">self, tool</span>):</span>
        print(<span class="hljs-string">'apply_user_defaults()'</span>)<font></font>
        super().apply_user_defaults(tool)<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">apply_nonuser_defaults</span>(<span class="hljs-params">self, tool</span>):</span>
        print(<span class="hljs-string">'apply_nonuser_defaults()'</span>)<font></font>
        super().apply_nonuser_defaults(tool)<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">update</span>(<span class="hljs-params">self, tool</span>):</span>
        print(<span class="hljs-string">'update()'</span>)<font></font>
        super().update(tool)<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">build</span>(<span class="hljs-params">self</span>):</span>
        print(<span class="hljs-string">'build()'</span>)<font></font>
        super().build()<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">build_sdist</span>(<span class="hljs-params">self, sdist_directory</span>):</span>
        print(<span class="hljs-string">'build_sdist()'</span>)
        <span class="hljs-keyword">return</span> super().build_sdist(sdist_directory)<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">build_wheel</span>(<span class="hljs-params">self, wheel_directory</span>):</span>
        print(<span class="hljs-string">'build_wheel()'</span>)
        <span class="hljs-keyword">return</span> super().build_wheel(wheel_directory)<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">install</span>(<span class="hljs-params">self</span>):</span>
        print(<span class="hljs-string">'install()'</span>)<font></font>
        super().install()<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los lectores atentos deben tener en cuenta que, adem√°s de los m√©todos utilizados anteriormente, el m√©todo </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">apply_nonuser_defaults ()</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , del que no hemos hablado antes </font><font style="vertical-align: inherit;">, est√° sobrecargado en este ejemplo </font><font style="vertical-align: inherit;">. Este m√©todo recomienda establecer valores predeterminados para todas las variables que no se pueden cambiar a trav√©s de par√°metros de l√≠nea de comandos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En el archivo </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pyproject.toml,</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> devuelva la ruta expl√≠cita a la biblioteca:</font></font><br>
<br>
<pre><code class="plaintext hljs">[build-system]<font></font>
requires = ["sip &gt;=5, &lt;6"]<font></font>
build-backend = "sipbuild.api"<font></font>
<font></font>
[tool.sip.metadata]<font></font>
name = "pyfoo"<font></font>
version = "0.4"<font></font>
license = "MIT"<font></font>
<font></font>
[tool.sip.bindings.pyfoo]<font></font>
headers = ["foo.h"]<font></font>
libraries = ["foo"]<font></font>
include-dirs = ["foo"]<font></font>
library-dirs = ["foo/bin"]<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para que el proyecto se </font><font style="vertical-align: inherit;">compile </font><font style="vertical-align: inherit;">correctamente, debe ir a la carpeta </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">foo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y construir la biblioteca all√≠ con el </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">comando make</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Despu√©s de eso, regrese a la carpeta </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pyfoo_c_06</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y ejecute, por ejemplo, el comando </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sip-wheel</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Como resultado, si descarta las advertencias del compilador, se mostrar√° el siguiente texto: </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">get_options () </font></font></b><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">apply_nonuser_defaults () </font></font></b><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">get_options () </font></font></b><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">get_options () </font></font></b><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">apply_user_defaults () </font></font></b><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">get_options () </font></font></b><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">update ()</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Estos enlaces se construir√°n: pyfoo. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">build_wheel ()</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Generando los enlaces pyfoo ... </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Compilando el m√≥dulo 'foo' ... </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La rueda ha sido construida.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se muestran l√≠neas en negrita que salen de nuestro archivo </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">project.py</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Por lo tanto, vemos que el m√©todo </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">get_options se</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> llama varias veces, y esto debe tenerse en cuenta si va a inicializar cualquier variable miembro en la clase que se deriva de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Project</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . El m√©todo </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">get_options</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> no es el mejor lugar para esto. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tambi√©n es √∫til recordar que el m√©todo </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">apply_nonuser_defaults se</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> llama antes que el m√©todo </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">apply_user_defaults</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , es decir en el m√©todo </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">apply_user_defaults</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ya </font><i><font style="vertical-align: inherit;">es</font></i><font style="vertical-align: inherit;"> posible usar variables cuyos valores se establecen en el m√©todo </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">apply_nonuser_defaults</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Despu√©s de eso, el m√©todo de </font><i><font style="vertical-align: inherit;">actualizaci√≥n</font></i><font style="vertical-align: inherit;"> se llama</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, y al final, el m√©todo directamente responsable del ensamblaje, en nuestro caso, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">build_wheel</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Conclusi√≥n de la primera parte.</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En este art√≠culo, comenzamos a estudiar la herramienta SIP dise√±ada para crear enlaces de Python para bibliotecas escritas en C o C ++. En esta primera parte del art√≠culo, examinamos los conceptos b√°sicos del uso de SIP utilizando el ejemplo de crear un enlace de Python para una biblioteca muy simple escrita en C. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Descubrimos los archivos que necesita crear para trabajar con SIP. El archivo </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pyproject.toml</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> contiene informaci√≥n sobre el paquete (nombre, n√∫mero de versi√≥n, licencia y rutas a los archivos de encabezado y objeto). Usando el archivo </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">project.py</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font><font style="vertical-align: inherit;">puede influir en el proceso de compilaci√≥n del paquete Python, por ejemplo, comenzar a construir la biblioteca C o dejar que el usuario especifique la ubicaci√≥n de los archivos de encabezado y objeto de la biblioteca. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En el archivo </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">* .sip</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">describe la interfaz del m√≥dulo de Python que enumera las funciones y clases que se incluir√°n en el m√≥dulo. </font><font style="vertical-align: inherit;">Las directivas y anotaciones se usan </font><font style="vertical-align: inherit;">para describir la interfaz en el archivo </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">* .sip</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En la segunda parte del art√≠culo, crearemos un enlace sobre una biblioteca orientada a objetos escrita en C ++, y con su ejemplo estudiaremos t√©cnicas que ser√°n √∫tiles para describir la interfaz de las clases de C ++, y al mismo tiempo trataremos con nuevas directivas y anotaciones para nosotros. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Continuar√°.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Referencias</font></font></h2><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ejemplos para este art√≠culo</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P√°gina de inicio de SIP</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Documentaci√≥n para SIP</font></font></a></li>
</ul></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es495468/index.html">Algoritmo de reconocimiento de etiqueta de precio que funciona incluso en terminales de recopilaci√≥n de datos</a></li>
<li><a href="../es495472/index.html">Cambiar al vegetarianismo no evitar√° que las personas se infecten por enfermedades como COVID-19</a></li>
<li><a href="../es495474/index.html">DataGrip 2020.1: iniciar configuraciones, exportar a Excel, resultados en el editor y m√°s</a></li>
<li><a href="../es495476/index.html">¬øPor qu√© el √©xito de Atari DeepMind AI es decepcionante?</a></li>
<li><a href="../es495478/index.html">Probador de datos grandes y peque√±os: tendencias, teor√≠a, mi historia</a></li>
<li><a href="../es495484/index.html">C√≥mo se implementan las tuber√≠as de Unix</a></li>
<li><a href="../es495486/index.html">Nuevas amenazas a los datos confidenciales: resultados de la encuesta global de Acronis</a></li>
<li><a href="../es495490/index.html">Secci√≥n de pruebas y control de calidad en la conferencia DUMP 2020. ¬øQu√© esperar este a√±o? Spoiler: un par de analg√©sicos y cerezas</a></li>
<li><a href="../es495492/index.html">Caracter√≠sticas del lanzamiento del juego Unreal Engine 4 para iOS</a></li>
<li><a href="../es495494/index.html">Crear un programador de kube adicional con un conjunto personalizado de reglas de planificaci√≥n</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>