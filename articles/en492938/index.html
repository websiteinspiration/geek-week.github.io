<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚õÖÔ∏è ü§üüèø üò∫ Portal of test environments, or Save our devops üê† üë≤üèº üöõ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A couple of years ago, we felt in some kind of surreal dream. Everyone around went to the cloud for testing (it‚Äôs convenient to expand and collapse te...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Portal of test environments, or Save our devops</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/technoserv/blog/492938/"><img src="https://habrastorage.org/webt/wi/tu/rr/witurrrxurlbqvnj3bklqblic1o.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A couple of years ago, we felt in some kind of surreal dream. Everyone around went to the cloud for testing (it‚Äôs convenient to expand and collapse test environments), and we tried to find out what tools out of the box should be delivered. To do this, we, together with customers, figured out how the devops processes work. And it turned out that only a few companies in Russia competently use automation. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I‚Äôll immediately explain that for the most part we talked either with those who are engaged in the development of up to 150-200 people in the company, or with industries where IT is traditionally difficult. Larger companies usually have both a process and their own cloud, and they come to us for backup deployment. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Production is usually well-established. There is a cycle, release plan, there is a goal, the code goes to the goal together with the developers.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Testing and QA are also well debugged most often. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And between them there is an abyss. </font><font style="vertical-align: inherit;">And DevOps is trying to fill it. </font><font style="vertical-align: inherit;">This superman should take the release (and ideally assemble it in Jenkins or something similar), create a car, deploy everything there, check the work, maybe spend a couple of pretests and give it to QA.</font></font><a name="habracut"></a><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What is the problem?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
When a product is a small type of web application, then there is no problem. </font><font style="vertical-align: inherit;">Directly, the developer or tester takes the database from the backup, connects to the latest release and runs on. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But when the product grows a little, production collapse sets in. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Devops got the release, but he took it and did not intend to. </font><font style="vertical-align: inherit;">Then he begins to look for the extreme and sort out the developers. </font><font style="vertical-align: inherit;">A release can be collected for several hours at night, and developers usually sit in the office during the day.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Almost everything is done by hand. That is, the ops is sitting and looking at the progress bar of the assembly. Because anywhere can go wrong. Those who are more energetic bind all this with their own scripts, and sometimes it turns out very beautifully and efficiently. But much more often we see that the delivery delivery plan is carried out in steps, a separate person is responsible for each step, and it is easier for him to repeat the procedure twenty times with his hands, because otherwise it turns out that it does not work. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
At the same time, someone should be responsible for the process as a whole, and this is the main stopping factor. An attempt to find such a person often ends in failure. Namely, he is responsible for automation, and it is he who is interested in it. Responsible for individual sections and then transfer the arrows to someone in development, of course, is always easier.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Virtualization adds more aspects of chaos. </font><font style="vertical-align: inherit;">Virtual environments are always a mess. </font><font style="vertical-align: inherit;">The person who is responsible for the grouping (server, rack), he is poorly oriented, to whom that belongs, whether it is necessary or not. </font><font style="vertical-align: inherit;">It is logical that the system administrator does not have to worry much about what's going on with the developers. </font><font style="vertical-align: inherit;">But devops should, but his role usually does not imply such knowledge. </font><font style="vertical-align: inherit;">And he is afraid to turn off the excess, because he does not understand whether it will be needed yet or not. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Then it is necessary to issue internal accounts for the mutual settlements of departments. </font><font style="vertical-align: inherit;">Someone considers uptime, someone considers the use of the processor, then they share equally or in some proportions the costs like electricity and the work of administrators.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unexpectedly, but no finished product</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It would seem that this entire conveyor should be covered with some kind of product. There are many good point solutions. The same Ansible perfectly deploys, but does not know how to steer virtual machines. And hypervisors can. There are all the tools for devops-scripting, you can connect the modules ... You just need to take and assemble from this software chain, right? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Not this way. Banks and state-owned companies came with the desire to test in the cloud. Every good security guard is prone to paranoia, often with good reason. For IB Bank, each new installation is a very annoying factor. I know one case when ops dragged Jenkins and Terraform into the infrastructure, deployed bash behind it, and then the DBMS that holds all this. It turned out to be a good semi-automatic conveyor, which could be finished up to a fully autonomous deployment. Only for information security it was a disaster.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
They wanted all in one. </font><font style="vertical-align: inherit;">And to manage the virtual machine (and various vendors, including Openstack). </font><font style="vertical-align: inherit;">The Customer on one application can have Vmvar, and Hyper-in, and something else old and terrible for supporting FreeBSD or OS / 2.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We need our bike</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In general, we wrote our platform. Under the hood - Ansible, out of the box - integration with Jenkins. You can write your own scripts for Ansible. You can do everything from subnet collection to release management. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/iy/we/3-/iywe3-qfoljbzt-_-qkkj-uce9e.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The portal lives in the paradigm of the test environment. This is its main essence. One test environment = one subnet. Plus, if it's really bad - there is integration with the RPA in case there is no API, and you need a robot to emulate user actions and click on buttons in the interface. There is billing, uptime and utilization are considered either from the application to the application: until the destruction request is written, the money will be dripping. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This is how it looks. Creating an environment using a template: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/az/jk/sb/azjksbd5u8asdk2whnxia_w25ke.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adding a virtual machine: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ek/vp/wp/ekvpwp6bfgfffh8xhpdzzsgl5s0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Scripting:</font></font><br>
 <br>
<img src="https://habrastorage.org/webt/op/k9/ba/opk9ba8fchbjcpr-8h1damaftb4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As it turned out a little later, the complaints ‚ÄúI do not want to run on 50 systems‚Äù are heard from all sides. </font><font style="vertical-align: inherit;">We were in an important pain. </font><font style="vertical-align: inherit;">Any large customer with testing wanted something similar, but for some reason did not solve it or solved it organizationally with script people. </font><font style="vertical-align: inherit;">The problems are very different, starting from nameless virtual computers (they deleted it, and then someone remembered that it was needed) and ending with the fact that no one wants to be responsible for the rolling scripts. </font><font style="vertical-align: inherit;">Roll-up scripts are hard to write, regulations also suffer. </font><font style="vertical-align: inherit;">Somewhere in the cycle there should be anonymization of the data, and it looks like ‚ÄúSometime at the beginning of the year we made an anonymous database‚Äù, and the software changed six times, the data was updated. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In general, if something similar suddenly hurts you, then just come to watch. </font><font style="vertical-align: inherit;">Demo access is available in the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Technoserv Cloud</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en492918/index.html">Pope: Ethics for AI and Unmanned Vehicles</a></li>
<li><a href="../en492920/index.html">Quarantine in the Czech Republic: an inside look</a></li>
<li><a href="../en492924/index.html">How to visualize and animate (geophysical) models. Informativeness of visualization</a></li>
<li><a href="../en492932/index.html">13 shell-based word processing tools</a></li>
<li><a href="../en492934/index.html">Difficulties in raising a voice assistant. The look of a linguist and developer</a></li>
<li><a href="../en492940/index.html">Dive into Charles Proxy</a></li>
<li><a href="../en492942/index.html">Ontol (= most useful) about remote work [compilation of 100+ articles]</a></li>
<li><a href="../en492946/index.html">Coronavirus: how we deceive ourselves</a></li>
<li><a href="../en492948/index.html">Meet defer</a></li>
<li><a href="../en492952/index.html">Back to the Future with the Java Developer Course</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>