<!doctype html>
<html class="no-js" lang="ar">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧘🏼 🏴󠁧󠁢󠁥󠁮󠁧󠁿 🤞 أتمتة الشقق 🐣 🎁 🎅🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="خلفية
 بدأ الحلم القديم لأتمتة الشقق تحوله إلى حقيقة مع شراء شقة في مبنى جديد. في مرحلة التخطيط للإصلاح ، ظهرت المتطلبات الأساسية لشبكات المرافق:
 
 
...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>أتمتة الشقق</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/506558/"><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">خلفية</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
بدأ الحلم القديم لأتمتة الشقق تحوله إلى حقيقة مع شراء شقة في مبنى جديد. </font><font style="vertical-align: inherit;">في مرحلة التخطيط للإصلاح ، ظهرت المتطلبات الأساسية لشبكات المرافق:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">التحكم المرن في الإضاءة وإمدادات المياه والتهوية والتدفئة وأحمال الطاقة ؛</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">إمكانية تنفيذ السيناريوهات ؛</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">التحكم عن بعد والإخطار ؛</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">إغلاق مركزي لجميع الإضاءة ؛</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">إغلاق مركزي للأحمال غير ذات الأولوية وإمدادات المياه ؛</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">في المستقبل - إمكانية التحكم الصوتي.</font></font></li>
</ol><a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">عامل الكهرباء</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
نظرًا لأن خيار التحكم الأكثر موثوقية بالنسبة لي هو دائرة سلكية ، فقد تقرر البدء في تنفيذ الفكرة مع إعادة صياغة للكهرباء. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
وفقًا لمشروع المطور ، تم تقسيم جميع الأحمال إلى 4 مجموعات:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">سخان مياه؛</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">إضاءة؛</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">منافذ المطبخ والممرات ؛</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">كل ما تبقى.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
تم وضع جميع الأتمتة المعيارية في لوحة الأرضية ، ودخلت 4 كابلات إلى الشقة - 2 3x2.5 mm2 و 2 3x1.5 mm2 ، والتي لم تلبي احتياجاتي. </font><font style="vertical-align: inherit;">تقرر سحب الكابل من لوح الأرضية ونقل لوحة المفاتيح مباشرة إلى الشقة. </font><font style="vertical-align: inherit;">ونتيجة لذلك ، بقي عداد وقواطع دائرة تمهيدية لـ 40 أمبير في لوحة الأرضية ، ثم كبل 3x6 مم 2 إلى لوحة الشقة. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
عند تصميم لوحة سكنية ، تم أخذ المتطلبات التالية في الاعتبار:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">حماية الطفرة ؛</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">تحميل ذات أولوية (غير قابلة للفصل) ؛</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">حمل غير ذي أولوية (غير متصل) ؛</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">الحماية التفاضلية على المجموعات "الخطرة" (كل ما يتم تشغيله في غرف رطبة وكل شيء متصل بالمياه وكل شيء يمكن للأطفال الوصول إليه).</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ونتيجة لذلك ، ظهر المخطط التالي:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/aj/ho/ue/ajhoueqw41w1cblhjxspipmvilm.png" alt="صورة"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
تم تقسيم جميع الأحمال إلى مجموعات غير قابلة للفصل وغير قابلة للفصل. </font><font style="vertical-align: inherit;">تشمل المجموعات غير القابلة للفصل ما يلي: مصدر طاقة للثلاجة ، والغلاية ، وخزانة منخفضة التيار ووحدة تحكم. </font><font style="vertical-align: inherit;">المجموعة التي تم قطع اتصالها ، والتي تنتمي إليها جميع الأحمال الأخرى ، يتم تغذيتها من خلال قاطع دائرة وموصل مشترك ، والذي سيتم التحكم فيه عن طريق إشارات من وحدة التحكم ، وسنأخذ أيضًا إشارة الحالة من الموصل إلى وحدة التحكم. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
لاستيعاب جميع الأتمتة المعيارية اللازمة ، تم اختيار درع مدمج لـ 72 وحدة (كما اتضح فيما بعد - لا توجد مساحة كبيرة في الدرع). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
بدأت عملية إعادة تصنيع الكهرباء بالكامل داخل الشقة. </font><font style="vertical-align: inherit;">من الميزات - تم إدخال مسارات الكابلات من جميع مصادر الضوء والمفاتيح مباشرة إلى لوحة الشقة.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">التشغيل الآلي</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
نظرًا لحقيقة أنني اضطررت في عملي إلى التعامل مع الأتمتة الصناعية ، تم اعتبار الخيارات المختلفة لـ PLC و PLR من Siemens و ABB و Schneider-Electric و Aries وما إلى ذلك كأجهزة تحكم. </font><font style="vertical-align: inherit;">ونتيجة لذلك ، وقع الاختيار على التتابع المنطقي القابل للبرمجة ONI PLR (PLR-S-CPU-1004R-AC-BE ، بالإضافة إلى ذلك ، باختصار ، وحدة التحكم). </font><font style="vertical-align: inherit;">لماذا بالضبط:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ناقل RS-485 مدمج مع دعم بروتوكول Modbus ؛</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">نواتج منفصلة نفذت في شكل 3 و 10 مرحلات أمبير ؛</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">امدادات الطاقة من 220 فولت ؛ </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">أحجام مدمجة</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">عامل الشكل للتركيب على سكة DIN ؛</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">وجود شاشة وعناصر تحكم مباشرة على العلبة ؛</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">السعر.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
نظرًا لأن 10 مدخلات رقمية و 4 مخارج مرحلية لم تكن كافية ، بالإضافة إلى الوحدة الرئيسية ، تم اختيار وحدتي توسعة مع 8 مدخلات رقمية ، و 4 مخرجات مرحل 3A ، و 4 مخرجات مرحل 10A. </font><font style="vertical-align: inherit;">يتم تطوير هذا التتابع باستخدام لغة الرسم البياني الوظيفي (FBD).</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">إمدادات المياه</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
باع المنشئ إمدادات المياه للشقة بحيث يكون هناك 3 رافعات للمياه الباردة في الشقة. </font><font style="vertical-align: inherit;">لان </font><font style="vertical-align: inherit;">نظرًا لأنه يتم تحضير الماء الساخن في غلاية الغاز ، لإيقاف المياه تمامًا ، على سبيل المثال في الحمام ، فمن الضروري منع كل من الناهض في الحمام والناقل في المطبخ ، الذي يتم تشغيل المرجل منه. </font><font style="vertical-align: inherit;">على هذا الأساس ، للتحكم في إمدادات المياه وكمنظمة للوقاية من التسرب ، تم شراء 3 مجموعات من أقفال Hydro-locks (محركات وأجهزة استشعار تعمل بالطاقة الذاتية) ، والتي لديها القدرة على الجمع بين تحكم خارجي مركزي في نظام واحد ، وكذلك لتلقي إشارة حول تشغيل أجهزة استشعار التسرب. </font><font style="vertical-align: inherit;">تم توصيل كبل STP بموقع التثبيت لكل محرك أقراص من لوحة الشقة. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
صمام كروي مركب مع مشغل:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/a1/ul/oc/a1ulocy0gp7iy1wpjhdzi_d4fag.png" alt="صورة"></div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">اختيار برامج الإدارة</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
لان </font><font style="vertical-align: inherit;">أنا مستخدم للعديد من أدوات Samsung ، بصفتي نظامًا أساسيًا لإدارة البرامج ، قررت البقاء في برنامج SmartThings ، الذي يدعم التكامل عبر موصل سحابي. </font><font style="vertical-align: inherit;">لتوصيل ONI PLR بـ SmartThings Cloud ، ستحتاج إلى تطوير خادم OPC و CloudConnector. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
في المستقبل ، يتم التخطيط للتكامل مع مودم GSM كقناة تحكم احتياطية ، وكذلك لإبلاغ الطوارئ في حالات الطوارئ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ونتيجة لذلك ، ظهر الرسم البياني التالي لتفاعل مكونات النظام:</font></font><br>
 <br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/me/am/eg/meameg3yhqclqqe6m3glbkjuvkg.png" alt="صورة"></div><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">التنفيذ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
كانت المشكلة الأكبر في هذه المرحلة هي توريد المكونات ، مثل </font><font style="vertical-align: inherit;">تزامنت بداية العمل مع بداية فترة العزلة الذاتية. </font><font style="vertical-align: inherit;">وبما أن الوقت اللازم لإصلاح الشقة كان محدودًا جدًا ، كان يجب جمع كل حشوة الدرع من قبل 5 موردين. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
تم توزيع جميع الكابلات اللازمة حول الشقة ووضعها في الدرع ووضع علامة عليها وفقًا لذلك. </font><font style="vertical-align: inherit;">يمكن رؤية النتيجة المتوسطة في الصورة أدناه:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/zi/23/en/zi23en4sgef8kzorqyyavsyfz38.png" alt="صورة"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ولإدراك إمكانية التحكم في الإضاءة المعتادة مباشرة من الغرف ، تم استخدام مفاتيح قياسية بمفتاح واحد ومفتاحين مع وضع غير آمن. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
تم توصيل المفاتيح والأحمال بوحدة التحكم وفقًا للمخطط التالي:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/bi/mr/on/bimrontj12po6p3cvftv2qtt1la.png" alt="صورة"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
مفاتيح</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/gg/zj/yj/ggzjyjcktctegzkyknlgorzhilc.png" alt="صورة"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
أثناء تشغيل وحدة التحكم وتصحيح الأخطاء ، لوحظت تأخيرات غريبة لمدة 0.5 - 1 ثانية عند تشغيل / إيقاف مخرجات التتابع الموجودة في وحدات التوسع. </font><font style="vertical-align: inherit;">تبين أن المشكلة شائعة جدًا - دراسة غير دقيقة للأدلة. </font><font style="vertical-align: inherit;">قبل الاتصال ، كان من الضروري تعيين عناوين وحدات التوسع مع مفاتيح DIP ، بمجرد أن يتم ذلك ، عملت وحدة التحكم مثل الساعة. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
حاليا ، الدرع المجمع في الداخل هو كما يلي:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/z0/ms/e3/z0mse3wc4hbhqlylva1-7zhxnii.png" alt="صورة"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
تنفذ حاليا الوظائف التالية:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">التحكم في الإضاءة من المفاتيح ، لعدد من الغرف - من عدة أماكن ؛</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">سيناريوهات بسيطة مع التنشيط التلقائي للتهوية في الغرف ذات الرطوبة العالية (حتى الآن بدون أجهزة استشعار مناسبة ، فقط على أساس السيناريوهات السلوكية النموذجية ، بناءً على الوقت الذي كان فيه الأشخاص في الغرف) ؛</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">الإغلاق العام للإضاءة (مفتاح منفصل) ؛</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">الإغلاق القسري لإمدادات المياه ؛</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">إغلاق إمدادات المياه عند أجهزة الاستشعار الرطبة.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
في المستقبل القريب ، تنفيذ التفاعل مع نظام SmartThings البيئي ، وتنفيذ سيناريوهات عمل أكثر تعقيدًا. </font><font style="vertical-align: inherit;">في الوقت الحالي ، يتم الانتهاء من العمل ، ومن المقرر تنفيذ الجزء البرنامجي من المشروع بعد الانتقال.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar506530/index.html">كيفية اختيار UPS</a></li>
<li><a href="../ar506532/index.html">من خلال الأشواك إلى النجوم: اصنع جهازًا لتوجيه مؤشر الليزر إلى أي جسم سماوي</a></li>
<li><a href="../ar506538/index.html">كيف يمكن لويكيبيديا أن تكشف عن بياناتك الشخصية وكيف تستخدمها بالفعل</a></li>
<li><a href="../ar506542/index.html">تسجيل فيديو DIY إلى السحابة</a></li>
<li><a href="../ar506548/index.html">الاستخدام العملي لـ Kotlin في الشركات الناشئة والشركات</a></li>
<li><a href="../ar506560/index.html">ما الذي ستستمع إليه في عطلة نهاية الأسبوع: 5 إصدارات مختارة من البودكاست باللغة الروسية حول تقنية الصوت</a></li>
<li><a href="../ar506562/index.html">لماذا من الأفضل تجميع TS في JS مقدمًا</a></li>
<li><a href="../ar506568/index.html">مستويات ولحظات تقييم المشروع</a></li>
<li><a href="../ar506570/index.html">وظيفية FizzBuzz على سكالا</a></li>
<li><a href="../ar506572/index.html">إنشاء متجر نموذجي SPA عبر الإنترنت على htmlix.js</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>