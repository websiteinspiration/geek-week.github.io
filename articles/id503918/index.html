<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>âœ… ğŸ¤ª ğŸ‘¨ğŸ¾â€ğŸ­ Mengelola Paket dengan Modul Go: A Pragmatic Guide âœŒï¸ ğŸ‘¶ğŸ¼ ğŸ•</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Halo semuanya. Untuk mengantisipasi dimulainya kursus Pengembang Golang, kami telah menyiapkan terjemahan lain yang menarik untuk Anda.
 
 
 Modul ada...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Mengelola Paket dengan Modul Go: A Pragmatic Guide</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/503918/"><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Halo semuanya. </font><font style="vertical-align: inherit;">Untuk mengantisipasi dimulainya kursus </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pengembang Golang, kami telah</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> menyiapkan terjemahan lain yang menarik untuk Anda.</font></font></b></i><br>
<br>
<hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Modul adalah cara untuk menangani dependensi di Go. Awalnya disajikan sebagai percobaan, modul seharusnya diperkenalkan ke lapangan sebagai standar baru untuk mengelola paket dari versi 1.13. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya menemukan topik ini cukup tidak biasa bagi pemula yang berasal dari bahasa lain, jadi saya memutuskan untuk mengumpulkan beberapa pemikiran dan tips di sini untuk membantu orang lain seperti saya mendapatkan ide manajemen paket di Go. Kami akan mulai dengan pengenalan umum, dan kemudian beralih ke aspek yang kurang jelas, termasuk menggunakan folder vendor, menggunakan modul dengan Docker dalam pengembangan, dependensi alat, dll. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika Anda sudah terbiasa dengan modul Go dan mengetahui </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wiki</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, seperti punggung tangan Anda, artikel ini mungkin tidak akan sangat membantu Anda. </font><font style="vertical-align: inherit;">Tetapi untuk sisanya, bagaimanapun, ini dapat menghemat beberapa jam coba-coba. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jadi, jika Anda sedang dalam perjalanan, melompatlah dan nikmati perjalanannya.</font></font><a name="habracut"></a><br>
<br>
<img src="https://habrastorage.org/webt/tr/d9/eq/trd9eqcuki5uwi4w5b2gexcp8q4.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mulai cepat</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika kontrol versi sudah terintegrasi dalam proyek Anda, Anda bisa menjalankannya</font></font><br>
<br>
<pre><code class="go hljs"><span class="hljs-keyword">go</span> mod init</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Atau tentukan jalur ke modul secara manual. </font><font style="vertical-align: inherit;">Ini adalah sesuatu seperti nama, URL, dan jalur impor untuk paket Anda:</font></font><br>
<br>
<pre><code class="go hljs"><span class="hljs-keyword">go</span> mod init github.com/you/hello</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ini akan membuat file </font></font><code>go.mod</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, yang juga mendefinisikan persyaratan dan lochit proyek tergantung pada versi yang benar (sebagai analogi untuk Anda, seperti </font></font><code>package.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, dan </font></font><code>package-lock.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">digabungkan menjadi satu file):</font></font><br>
<br>
<pre><code class="go hljs">module github.com/you/hello
<span class="hljs-keyword">go</span> <span class="hljs-number">1.12</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jalankan </font></font><code>go get</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">untuk menambahkan dependensi baru ke proyek Anda: </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Perhatikan bahwa meskipun Anda tidak dapat menentukan rentang versi dengan get get, apa yang Anda tetapkan di sini bukanlah versi spesifik, tetapi versi minimum. </font><font style="vertical-align: inherit;">Seperti yang akan kita lihat nanti, ada cara untuk memperbarui dependensi dengan anggun menurut semver.</font></font></i><br>
<br>
<pre><code class="go hljs"># use Git tags
<span class="hljs-keyword">go</span> get github.com/<span class="hljs-keyword">go</span>-chi/chi@v4<span class="hljs-number">.0</span><span class="hljs-number">.1</span><font></font>
# or Git branch name<font></font>
<span class="hljs-keyword">go</span> get github.com/<span class="hljs-keyword">go</span>-chi/chi@master<font></font>
# or Git commit hash<font></font>
<span class="hljs-keyword">go</span> get github.com/<span class="hljs-keyword">go</span>-chi/chi@<span class="hljs-number">08</span>c92af</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang file kami adalah </font></font><code>go.mod</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sebagai berikut:</font></font><br>
<br>
<pre><code class="go hljs">module github.com/you/hello
<span class="hljs-keyword">go</span> <span class="hljs-number">1.12</span>
require github.com/<span class="hljs-keyword">go</span>-chi/chi v4<span class="hljs-number">.0</span><span class="hljs-number">.2</span>+incompatible <span class="hljs-comment">// indirect</span></code></pre><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sufiks </font></font><code>+incompatible</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ditambahkan ke semua paket yang belum dikonfigurasi untuk modul Go atau melanggar aturan kontrol versinya. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Karena kami belum mengimpor paket ini di mana pun di proyek kami, itu ditandai sebagai </font></font><code>// indirect</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Kita dapat merapikan ini dengan perintah berikut:</font></font><br>
<br>
<pre><code class="go hljs"><span class="hljs-keyword">go</span> mod tidy</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bergantung pada kondisi repositori Anda saat ini, ia akan menghapus modul yang tidak digunakan atau menghapus komentar </font></font><code>// indirect</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jika ada dependensi dengan sendirinya tidak memiliki </font></font><code>go.mod</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(misalnya, itu belum dikonfigurasi untuk modul), maka semua dependensinya akan ditulis ke file induk </font></font><code>go.mod</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(sebagai opsi, file Anda </font></font><code>go.mod)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bersama dengan komentar </font></font><code>// indirect</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">untuk menunjukkan bahwa mereka bukan dari impor langsung Dalam</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
rencana global </font><i><font style="vertical-align: inherit;">Anda</font></i><font style="vertical-align: inherit;"> , tujuannya </font></font><code>go mod tidy</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">adalah untuk menambahkan dependensi yang diperlukan untuk kombinasi OS, arsitektur, dan tag build lainnya. </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pastikan untuk menjalankannya sebelum setiap rilis.</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Pastikan juga file dibuat setelah menambahkan dependensi</font></font><code>go.sum</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Anda mungkin berpikir bahwa ini adalah file kunci. </font><font style="vertical-align: inherit;">Tetapi sebenarnya itu </font></font><code>go.mod</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sudah memberikan informasi yang cukup untuk membangun 100% direproduksi. </font><font style="vertical-align: inherit;">File </font></font><code>go.sum</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ini dibuat untuk keperluan verifikasi: itu berisi checksum kriptografi yang diharapkan dari isi masing-masing versi modul. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sebagian karena ini </font></font><code>go.sum</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bukan file kunci, ini menyimpan checksum tertulis untuk versi modul bahkan setelah Anda berhenti menggunakan modul ini. </font><font style="vertical-align: inherit;">Ini memungkinkan Anda untuk memeriksa checksum jika Anda melanjutkan menggunakannya nanti, yang menyediakan keamanan tambahan.</font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/_5/j8/vi/_5j8vigrklvhkwaucssmy7zaf88.png"><br>
<blockquote><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mkcert baru saja bermigrasi ke modul (dengan vendor / untuk kompatibilitas mundur) dan semuanya berjalan lancar </font></font></i> <br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://github.com/FiloSottile/mkcert/commit/26ac5f35395fb9cba3805faf1a5a04d260271291</font></font></a><br>
<br>
<pre><code class="go hljs">$ GO111MODULE=on go1<span class="hljs-number">.11</span>rc1 mod init<font></font>
$ GO111MODULE=on go1<span class="hljs-number">.11</span>rc1 mod vendor<font></font>
$ git add <span class="hljs-keyword">go</span>.mod <span class="hljs-keyword">go</span>.sum vendor<font></font>
$ git rm Gopkg.lock Gopkg.toml Makefile</code></pre><br>
<img src="https://habrastorage.org/webt/kt/ch/ro/ktchrocah4xszqqrfkqtug3qzty.png"><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FAQ: Haruskah saya komit </font></font><code>go.sum</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">di git? </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A: Jelas ya. </font><font style="vertical-align: inherit;">Dengan itu, pemilik sumber Anda tidak perlu mempercayai repositori GitHub lain dan pemilik jalur impor khusus. </font><font style="vertical-align: inherit;">Sudah dalam perjalanan ke kami, sesuatu yang lebih baik, tetapi untuk sekarang ini adalah model yang sama dengan hash dalam file kunci.</font></font></i></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Perintah </font></font><code>go build</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan </font></font><code>go test</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">akan secara otomatis memuat semua dependensi yang hilang, meskipun Anda dapat melakukan ini secara eksplisit dengan bantuan </font></font><code>go mod download</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cache lokal pra-populasi yang mungkin berguna untuk CI. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Secara default, semua paket kami dari semua proyek dimuat ke direktori </font></font><code>$GOPATH/pkg/mod</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Kami akan membahas ini secara lebih rinci nanti.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Memutakhirkan Versi Paket</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anda dapat menggunakan </font></font><code>go get -u</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">masing </font></font><code>go get -u=patch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font><font style="vertical-align: inherit;">masing </font><font style="vertical-align: inherit;">untuk memperbarui dependensi ke versi minor terbaru atau tambalan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tetapi Anda tidak dapat memutakhirkan ke versi utama seperti itu. </font><font style="vertical-align: inherit;">Kode yang termasuk dalam modul Go harus secara teknis mematuhi aturan berikut:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cocokkan semver (contoh tag VCS v1.2.3).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jika modul adalah versi v2 atau lebih tinggi, versi utama modul harus dimasukkan </font></font><code>/vN</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">di akhir lintasan modul yang digunakan dalam file </font></font><code>go.mod</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan di lintasan impor paket:</font></font></li>
</ul><br>
<pre><code class="go hljs"><span class="hljs-keyword">import</span> <span class="hljs-string">"github.com/you/hello/v2"</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Rupanya, ini dilakukan agar berbagai versi paket dapat diimpor dalam satu rakitan (lihat </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">masalah ketergantungan berlian</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Singkatnya, Go mengharapkan Anda untuk sangat berhati-hati saat memperkenalkan versi utama.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mengganti modul yang diimpor</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anda dapat menentukan modul yang diperlukan untuk garpu Anda sendiri atau bahkan jalur lokal ke file menggunakan arahan </font></font><code>replace</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="go hljs"><span class="hljs-keyword">go</span> mod edit -replace github.com/<span class="hljs-keyword">go</span>-chi/chi=./packages/chi</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hasil:</font></font><br>
<br>
<pre><code class="go hljs">module github.com/you/hello
<span class="hljs-keyword">go</span> <span class="hljs-number">1.12</span>
require github.com/<span class="hljs-keyword">go</span>-chi/chi v4<span class="hljs-number">.0</span><span class="hljs-number">.2</span>+incompatible<font></font>
replace github.com/<span class="hljs-keyword">go</span>-chi/chi =&gt; ./packages/chi</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anda dapat menghapus garis secara manual atau menjalankan:</font></font><br>
<br>
<pre><code class="go hljs"><span class="hljs-keyword">go</span> mod edit -dropreplace github.com/<span class="hljs-keyword">go</span>-chi/chi</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Manajemen Ketergantungan Proyek </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Secara historis, semua kode Go disimpan dalam satu mono-repositori raksasa, karena itulah cara Google mengatur basis kodenya, dan ini memengaruhi desain bahasa. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Modul Go adalah titik berangkat dari pendekatan ini. Anda tidak perlu lagi menyimpan semua proyek Anda </font></font><code>$GOPATH</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Namun, secara teknis semua dependensi yang Anda unduh masih ditempatkan </font></font><code>$GOPATH/pkg/mod</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Jika Anda menggunakan wadah Docker untuk pengembangan lokal, ini bisa menjadi masalah, karena dependensi disimpan di luar proyek. Secara default, mereka tidak terlihat di IDE Anda. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ye/2c/_o/ye2c_o9jcsodsrhdekb4djz7lve.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ini biasanya bukan masalah untuk bahasa lain, tapi inilah yang pertama kali saya temui ketika bekerja dengan basis kode Go. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untungnya, ada beberapa cara (tidak berdokumen) untuk menyelesaikan masalah ini.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Opsi 1. Instal GOPATH di dalam direktori proyek Anda.</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pada pandangan pertama, ini mungkin tampak berlawanan dengan intuisi, tetapi </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jika Anda menjalankan Go from a container</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , Anda dapat mengesampingkan GOPATH sehingga menunjuk ke direktori proyek sehingga paket-paket dapat diakses dari host:</font></font><br>
<br>
<pre><code class="go hljs">version: <span class="hljs-string">'3.7'</span><font></font>
<font></font>
services:<font></font>
  app:<font></font>
    command: tail -f /dev/null<font></font>
    image: golang:<span class="hljs-number">1.12</span><span class="hljs-number">.6</span>-stretch<font></font>
    environment:<font></font>
      #        - /code/.<span class="hljs-keyword">go</span>/pkg/mod<font></font>
      - GOPATH=/code/.<span class="hljs-keyword">go</span><font></font>
    ports:<font></font>
      - <span class="hljs-number">8000</span>:<span class="hljs-number">8000</span><font></font>
    volumes:<font></font>
      - ./:/code:cached<font></font>
    working_dir: /code</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
IDE populer harus dapat menginstal GOPATH di tingkat proyek (ruang kerja): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/_t/jz/d_/_tjzd_trva2fekp6vmt5ewc_xke.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Satu-satunya kelemahan dari pendekatan ini adalah kurangnya interaksi dengan runtime Go pada komputer host. </font><font style="vertical-align: inherit;">Anda harus menjalankan semua perintah Go di dalam wadah.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Opsi 2: Penjual Otomatis Ketergantungan Anda</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cara lain adalah dengan menyalin dependensi proyek Anda ke folder </font></font><code>vendor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="go hljs"><span class="hljs-keyword">go</span> mod vendor</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ini harus segera dicatat: kami </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TIDAK mengizinkan</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Pergi untuk langsung mengunggah materi ke folder vendor: ini tidak mungkin dengan modul. </font><font style="vertical-align: inherit;">Kami cukup menyalin paket yang sudah diunduh. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selain itu, jika Anda melepaskan dependensi Anda, seperti dalam contoh di atas, lalu hapus </font></font><code>$GOPATH/pkg/mod</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lalu coba tambahkan beberapa dependensi baru ke proyek Anda, Anda akan melihat yang berikut:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Go akan membangun kembali cache unduhan untuk semua paket perangkat lunak </font></font><code>$GOPATH/pkg/mod/cache</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Semua modul yang dimuat akan disalin ke </font></font><code>$GOPATH/pkg/mod</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dan akhirnya, Go akan menyalin modul-modul ini ke </font></font><code>vendor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">folder, menghapus contoh, tes, dan beberapa file lain yang tidak Anda andalkan secara langsung.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selain itu, ada banyak hal yang hilang di folder vendor yang baru dibuat ini: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/rj/w-/lt/rjw-ltm1y1s8jwia34bfars6ngw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
File penulisan Docker khas terlihat seperti ini (perhatikan binding volume):</font></font><br>
<br>
<pre><code class="go hljs">version: <span class="hljs-string">'3.7'</span><font></font>
<font></font>
services:<font></font>
  app:<font></font>
    command: tail -f /dev/null<font></font>
    image: golang:<span class="hljs-number">1.12</span><span class="hljs-number">.6</span>-stretch<font></font>
    ports:<font></font>
      - <span class="hljs-number">8000</span>:<span class="hljs-number">8000</span><font></font>
    volumes:<font></font>
     #    <span class="hljs-keyword">go</span>,           <font></font>
      - modules:/<span class="hljs-keyword">go</span>/pkg/mod/cache<font></font>
      - ./:/code:cached<font></font>
    working_dir: /code <font></font>
<font></font>
volumes:<font></font>
  modules:<font></font>
    driver: local</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Harap dicatat bahwa saya TIDAK komik folder vendor ini dalam sistem kontrol versi atau saya tidak akan menggunakannya dalam produksi. </font><font style="vertical-align: inherit;">Ini adalah skrip pengembangan yang sepenuhnya lokal, yang biasanya dapat ditemukan dalam beberapa bahasa lain. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Namun, ketika saya membaca </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">komentar dari beberapa pengelola Go</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan beberapa penawaran terkait dengan vending parsial (?), Saya mendapat kesan bahwa fitur ini pada awalnya dimaksudkan bukan untuk kasus pengguna ini. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Salah satu </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">komentator</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> di reddit membantu saya menjelaskan hal ini:</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Biasanya orang-orang menjual dependensi mereka untuk alasan-alasan seperti keinginan untuk memiliki perangkat ketat tanpa akses ke jaringan, serta salinan dependensi siap pakai jika terjadi kegagalan github atau menghilangnya repositori, dan kemungkinan audit yang lebih mudah terhadap perubahan dependensi menggunakan alat VCS standar, dll. .</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Ya, itu tidak terlihat seperti sesuatu dari kenyataan bahwa aku mungkin akan tertarik. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Menurut perintah Go, Anda dapat dengan mudah mengaktifkan vending dengan mengatur variabel lingkungan </font></font><code>GOFLAGS=-mod=vendor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Saya tidak merekomendasikan melakukan ini. Menggunakan flag hanya akan pecah </font></font><code>go get</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tanpa memberikan manfaat lain untuk alur kerja harian Anda: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/df/ul/uw/dfuluwbr13eacullfzphguhrbeo.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Faktanya, satu-satunya tempat yang Anda butuhkan untuk mengaktifkan vending adalah IDE Anda:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jv/x2/pz/jvx2pzgtrx5wcfmlum4s5hheorw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setelah beberapa percobaan dan kesalahan, saya datang dengan prosedur berikut untuk menambahkan dependensi vendor dalam pendekatan ini.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Langkah 1. Persyaratan</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anda dapat memerlukan ketergantungan dengan </font></font><code>go get</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="go hljs"><span class="hljs-keyword">go</span> get github.com/rs/zerolog@v1<span class="hljs-number">.14</span><span class="hljs-number">.3</span></code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Langkah 2. Impor</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kemudian impor di suatu tempat di kode Anda:</font></font><br>
<br>
<pre><code class="go hljs"><span class="hljs-keyword">import</span> (<font></font>
   _ <span class="hljs-string">"github.com/rs/zerolog"</span>
)</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Langkah 3. Penjual</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Terakhir, buka kembali dependensi Anda:</font></font><br>
<br>
<pre><code class="go hljs"><span class="hljs-keyword">go</span> mod vendor</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ada </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">proposal yang tertunda</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> untuk memungkinkan vendor mod untuk menerima templat modul tertentu yang mungkin (atau mungkin tidak) menyelesaikan beberapa masalah yang terkait dengan alur kerja ini. </font></font><br>
<br>
<code>go mod vendor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sudah secara otomatis membutuhkan impor yang terlewat, jadi </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">langkah 1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> adalah opsional dalam alur kerja ini (jika Anda tidak ingin menentukan batasan versi). Namun, tanpa langkah 2, itu tidak akan mengambil paket yang diunduh. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pendekatan ini berfungsi lebih baik dengan sistem host, tetapi agak membingungkan ketika harus mengedit dependensi Anda.</font></font><br>
<br>
<hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Secara pribadi, saya pikir mendefinisikan ulang GOPATH adalah pendekatan yang lebih bersih karena tidak mengorbankan fungsionalitas </font></font><code>go get</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Namun demikian, saya ingin menunjukkan kedua strategi tersebut, karena folder vendor mungkin lebih akrab bagi orang-orang yang berasal dari bahasa lain, seperti PHP, Ruby, Javascript, dll. Seperti yang dapat Anda lihat dari penipuan yang dijelaskan dalam artikel ini, ini bukan pilihan yang sangat baik untuk Go.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ketergantungan alat</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kita mungkin perlu menginstal beberapa alat berbasis-Go yang tidak diimpor, tetapi digunakan sebagai bagian dari lingkungan pengembangan proyek. </font><font style="vertical-align: inherit;">Contoh sederhana dari alat tersebut adalah </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CompileDaemon</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , yang dapat memonitor kode Anda untuk perubahan dan memulai kembali aplikasi Anda. </font><font style="vertical-align: inherit;">Pendekatan yang </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">direkomendasikan secara resmi</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> adalah menambahkan </font></font><code>tools.go</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">file (nama tidak masalah) dengan konten berikut:</font></font><br>
<br>
<pre><code class="go hljs"><span class="hljs-comment">// +build tools</span>
<span class="hljs-keyword">package</span> tools
<span class="hljs-keyword">import</span> (<font></font>
_ <span class="hljs-string">"github.com/githubnemo/CompileDaemon"</span>
)</code></pre><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Batasan </font></font><code>// +build tools</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mencegah majelis reguler Anda dari benar-benar mengimpor alat Anda.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ekspresi impor memungkinkan perintah go untuk secara akurat menulis informasi versi alat </font></font><code>go.mod</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anda </font><font style="vertical-align: inherit;">ke file </font><font style="vertical-align: inherit;">modul Anda.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jadi itu saja. </font><font style="vertical-align: inherit;">Saya harap Anda tidak akan bingung seperti ketika saya mulai menggunakan modul Go. </font><font style="vertical-align: inherit;">Anda dapat mengunjungi </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wiki Go Modul</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> untuk lebih jelasnya.</font></font><br>
<br>
<hr><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ikuti saja.</font></font></a><br>
<br>
<hr></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id503904/index.html">Dunia dan dunia, atau matematika untuk humaniora</a></li>
<li><a href="../id503906/index.html">LabVIEW NXG - Jenis Data Sederhana dan Jenis Pemaksaan</a></li>
<li><a href="../id503908/index.html">Panggil perpustakaan bersama dari Similink</a></li>
<li><a href="../id503910/index.html">Eksperimen pada orang yang telah pergi ke "udalenka"</a></li>
<li><a href="../id503916/index.html">Belajar berdagang di bursa. Bagian satu: mengatur lingkungan pengujian</a></li>
<li><a href="../id503920/index.html">Bagaimana kami menguji sistem mikrofon pada STM32: pengalaman pengembang perangkat Yandex</a></li>
<li><a href="../id503922/index.html">Mengapa UE memberantas dinding cookie</a></li>
<li><a href="../id503924/index.html">Tinjauan Umum tentang Pemindai 3D Intraoral Medit i500</a></li>
<li><a href="../id503926/index.html">Siapa yang ada dalam ekosistem pembayaran 2020. Bagian 2</a></li>
<li><a href="../id503928/index.html">Aerosol VS irigasi: mana yang lebih baik, dan apakah ada perbedaan?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>