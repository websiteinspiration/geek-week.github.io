<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏿‍🤝‍👨🏼 👪 👰🏿 産業用コントローラー。データ収集システム。ACS 👩🏿‍🚀 🏏 🙌🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="こんにちは、ハブル！
 
 
 
 データを収集および分析し、グループ化された負荷を管理するためのディスプレイを備えた産業用コントローラーの開発。猫の下で何が起こったのか気にかけてください。
 
 産業用コントローラーのトピックは、自動制御システム（ACS）で使用するために長い間開発されてきました。...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>産業用コントローラー。データ収集システム。ACS</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/469037/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">こんにちは、ハブル！</font></font><br>
<br>
<img src="https://habrastorage.org/webt/cg/lu/7v/cglu7vt1adu_oryxwe9ew_e3eww.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
データを収集および分析し、グループ化された負荷を管理するためのディスプレイを備えた産業用コントローラーの開発。</font><font style="vertical-align: inherit;">猫の下で何が起こったのか気にかけてください。</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
産業用コントローラーのトピックは、自動制御システム（ACS）で使用するために長い間開発されてきました。シーメンス、ViewPAC、または他のメーカーの次のコントローラーを見ると、専用のソフトウェアが内蔵された大きなタブレット（このフォームファクター、つまりラックマウントオプションについては書いていない）しか見えませんが、これは一見しただけです。実際、ほとんどの場合、ディスプレイの側面からの外観のみが似ていますが、背面パネルには、インターフェイスコネクタ、拡張モジュールを接続するためのコンパートメント、センサー、外部ストレージメディアなどがあります。汎用の産業用コントローラーがあり、高度に特殊化されています。つまり、ほとんどの場合同じタイプの一連のタスクを実行するように設計されています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それは私たちが開発した（高度に専門化された）コントローラです。</font><font style="vertical-align: inherit;">まず、実装について一言。</font><font style="vertical-align: inherit;">全体として、デバイスは2つの部分に分かれています。</font><font style="vertical-align: inherit;">1つはiMX6D上のモジュールで、そのようなタスクの実装のために開発したもので、2つ目はSTM32F103RBT7マイクロコントローラーです。</font><font style="vertical-align: inherit;">以前（以前の記事で）書いたように、複雑なプロジェクトをすばやく実装できるのはブロック（モジュラー）システムです。</font><font style="vertical-align: inherit;">そのようなシステムでは、ハードウェアとソフトウェアの複合体のほとんどがすでにデバッグされており、それを他のモジュールと調整し、エンドカスタマー向けに変更するだけです。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">iMX6D</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ユーザーインタラクションのための多くのタスクを処理する本格的なプロセッサモジュール（1 GHzで2コア）：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ディスプレイ上のデータ出力/タッチスクリーン処理;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> イーサネット10/100/1000;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 時間同期;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> イベントログの保存;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Webインターフェイス+更新;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> プロファイルデータの保存;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> マイクロコントローラーの複雑な計算。</font></font></li>
</ul><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、これはモジュールが行うことの完全なリストではありません。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/nl/wg/fl/nlwgflzpih5h1zl13mc605zks0e.jpeg"><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図1。</font><font style="vertical-align: inherit;">プロセッサモジュールの</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Webインターフェイスは、ディスプレイの画像をほぼ完全に繰り返します。これにより、ユーザーは簡単にナビゲートして設定を変更できます。</font><font style="vertical-align: inherit;">以前のプロジェクトと同様に、実装は「11パーツ」エンジンに基づいています。</font><font style="vertical-align: inherit;">マイクロコントローラーがタスクの大部分を実行するため、Web経由でファームウェア（およびメインファームウェア）を更新することが必要になりました。</font><font style="vertical-align: inherit;">顧客が機能を拡張するためにデバイスを更新することを計画したため、このタスクは特に深刻でした。</font><font style="vertical-align: inherit;">プロセッサモジュールは、UARTを介してマイクロコントローラーに接続されています（後者もフラッシュされます）。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">STM32</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このプロジェクトのマイクロコントローラーは非常に重要です。</font><font style="vertical-align: inherit;">まず、その使用により、プログラマーのタスクを並列化し、2つの主要な領域を区別することが可能になりました。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ユーザーとの対話。 </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">データの収集、処理、および管理。 </font></font></li>
</ul><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
第二に、モジュール式システムは、機能のデバッグ、テスト、拡張に便利です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この産業用コントローラー（以下、PCと呼びます）は、作動要素の多数のセンサーを備えた4つの独立した部屋（グループ）の保守を可能にします。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
具体的には、このプロジェクトごとに各グループが利用可能です。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6つの温度センサーを1つのエンティティに組み合わせて平均を決定します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2つの独立した温度センサー;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2つの湿度センサー;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1つのCO2センサー;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">外部アクチュエータ用の12個の制御チャネル。</font></font></li>
</ul> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、いくつかのストリートセンサー：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2つの独立した温度センサー;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2つの湿度センサー。</font></font></li>
</ul><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
全体として、マイクロコントローラーが48個のセンサーからデータを収集し、48個のアクチュエーターを制御していることがわかります。すべての温度センサーはアナログです。湿度センサーとCO2センサーには、4〜20mAの電流インターフェイスがあります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここで少し回路です。センサーの切り替えには、HCF4051アナログマルチプレクサーを使用することが決定されました（切り替え遅延がありますが、これは私たちのタスクにとって重要ではありませんでした）。すでに製造が中止されているのはこのシリーズです。たとえば、CD4051との違いは、スイッチング速度のみです（製造元ではそうです）。コントローラにはそのようなマルチプレクサが6つあります。すべてのマルチプレクサーの切り替えは同時に（マイクロコントローラーの同じレッグによって）行われ、リソースと読み取り時間を大幅に削減します。マイクロコントローラーには、それぞれ6つのADCチャネルが含まれています。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/zk/jz/_u/zkjz_uvytmg36w0sxl5r4spq5s4.png"><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図2。マルチプレ</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
クサー</font><i><font style="vertical-align: inherit;">接続方式</font></i><font style="vertical-align: inherit;">個別の基準電圧源TL431が各温度センサー（SOT-23パッケージ内）に使用されるため、センサーの1つに短絡があっても、他のセンサーは以前と同様に動作し続けます。すべてのopornikuに電源を供給するためにLM1117 3.3Vを使用しました。ボードは外部DC24V電源から給電されます。したがって、最初のプロジェクトでは使用しないため、2次電源には2つの同一のDC / DC TPS54560DDARが使用されます（12Vおよび5Vの形式）。 3.3Vは、ST1S10を使用して5Vから取得されます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/lu/w0/r5/luw0r5bgthkfurtu31wusgaeoes.jpeg"><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図3。ボード上のフィーダーの位置</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
外部負荷を制御するために、24V交流電流の供給によってトリガーされるリレーが通常使用されます。したがって、AC24Vが各グループに供給され、フォトカプラ絶縁を介してBT138-600トライアックによってスイッチングされます。スキームを以下に示します。すべてが安定して動作します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/s2/la/eh/s2laeh-lwfyjj5cacktibi-tglo.png"><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図4。トライアックの制御回路</font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/n-/v7/ea/n-v7eahyh3tnjcoq2_t1mw5huz4.jpeg"><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図5。ボード上のセンサーコネクタと制御信号のグループ</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
制御プログラムは、マイクロコントローラーに接続された別のEEPROMに保存されます。ホットスタート時の初期パラメータとシステム全体の最後の状態がそこに保存されます（プログラムの実行を継続できるようにするため）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
マイクロコントローラには、そのような数のフォトカプラを制御するのに十分なGPIOがないこと（そしてボード全体にワイヤをドラッグするのは人道的ではないこと）は明らかです。したがって、TCA6424ARGJRポートエクスパンダが使用されます。 LEDインジケータなど）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
図5ではっきりと見えるリレー。 （各グループに1つ）、入力電圧AC24Vの存在と各グループのヒューズの状態を判断するために使用されます。トリガーされると、マイクロコントローラーに信号を送信し、マイクロコントローラーは誤動作を通知します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
時間はNTPプロトコルを使用して同期されますが、RTC PCF8523チップ（繰り返し使用される）もあり、電源電圧がない場合の時間を計算します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/cc/g_/ap/ccg_apc5zjj4rmul1giyb3d0vw8.png"><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図6。 RTC Scheme </font></font></i><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Display</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
PCの制御は、タッチスクリーンを使用してすばやく実行され、Webを介してリモートで実行されます。先ほど述べたように、ブラウザインターフェース（この機能はまだ完成中です）は画面を繰り返し表示します。現時点では、アプリケーションはQtで記述されており、mqttを介してPCと直接通信し、できるだけ現実に近くなります。現在、ウェブには、一般的なデバイス設定、アクセスの整理、ソフトウェアの更新があります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/mn/vx/px/mnvxpxtds62oqi6cux79_xd3ruq.png"><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図7。 Qt上のアプリケーションでのデータマッピング</font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/a4/fv/qy/a4fvqyjmiaue-byb01mtlqinczk.jpeg"><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図8。データを表示する</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらのタイプのコントローラーを使用すると、工業団地用の完全なACSを構築できます。</font><font style="vertical-align: inherit;">機能とセンサーのセットは、原則として異なり、必要なタスクに対応していますが、目的は同じです-監視および/または制御。</font><font style="vertical-align: inherit;">大規模なシステムの場合、1つのタスクで統合されるコントローラーの数を増やすことができます。</font><font style="vertical-align: inherit;">コントローラーにはディスプレイが含まれていない場合がありますが、ネットワーク（イーサネット）を介して制御できます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/bn/nn/le/bnnnle2vppnwfp6eyjzqqnubaxk.jpeg"><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図9。</font><font style="vertical-align: inherit;">小さなパーティー</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ご清聴ありがとうございました。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja469023/index.html">ヨーロッパへの移転を伴う仕事を見つける方法：ITプロフェッショナルのための実践的なガイド</a></li>
<li><a href="../ja469025/index.html">ワインを素早く冷やす！ロシアの発明</a></li>
<li><a href="../ja469027/index.html">イヴァノヴォ！ミタップ：デジタルでキャリアを築くには？</a></li>
<li><a href="../ja469031/index.html">12の新しいAzure Media Services人工知能</a></li>
<li><a href="../ja469033/index.html">ElbrusでのPuzzleLibニューラルネットワークプラットフォームの立ち上げ</a></li>
<li><a href="../ja469043/index.html">PythonからのC / C ++（C API）</a></li>
<li><a href="../ja469049/index.html">Luaでビジネスロジックを作成する理由</a></li>
<li><a href="../ja469055/index.html">オープンスペースでの禅の練習</a></li>
<li><a href="../ja469061/index.html">Rust 1.38.0リリース：パイプラインコンパイル、＃マクロおよびstdの[非推奨] ::::::::タイプ名</a></li>
<li><a href="../ja469071/index.html">人工知能マイクロソフトが麻雀を習得</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>