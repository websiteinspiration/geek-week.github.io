<!doctype html>
<html class="no-js" lang="zh-CN">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>♨️ 🧗🏿 🙌 13种基于外壳的文字处理工具 🤘🏼 🙅🏼 👩🏽‍💼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="这是Balthazar Ruberol和Etienne Broad编着的未来书籍《面向新手软件开发人员的基本工具和实践》的一部分。这本书应该有助于教育年轻的开发人员。它将涵盖以下主题：掌握控制台，在命令外壳中进行设置和有效地工作，使用gitSQL基础知识管理代码版本，诸如和正则表达式之类的工具Mak...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>13种基于外壳的文字处理工具</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/itsumma/blog/492932/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这是Balthazar Ruberol和</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Etienne Broad编</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">着的未来书籍《面向新手软件开发人员的基本工具和实践》的一部分</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这本书应该有助于教育年轻的开发人员。</font><font style="vertical-align: inherit;">它将涵盖以下主题：掌握控制台，在命令外壳中进行设置和有效地工作，使用</font></font><code>git</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SQL基础知识</font><font style="vertical-align: inherit;">管理代码版本</font><font style="vertical-align: inherit;">，诸如</font><font style="vertical-align: inherit;">和正则表达式之</font><font style="vertical-align: inherit;">类的工具</font></font><code>Make</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>jq</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">网络基础知识以及软件开发和协作的最佳实践。</font><font style="vertical-align: inherit;">作者目前正在这个项目上努力工作，并邀请每个人参加</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">邮件列表</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内容</font></font></h1><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">猫</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">头</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">尾巴</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">厕所</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">grep</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">切</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">糊</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">分类</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">优衣库</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">awk</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TR</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">折</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sed</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">真实的例子</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">加深：for和xargs循环</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">摘要</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下一步是什么</font></font></a></li>
</ul><a name="habracut"></a><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">外壳文字处理</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
使命令外壳成为无价工具的原因之一是大量的文字处理命令，并且能够轻松地将它们组合到管道中，从而创建复杂的处理模板。</font><font style="vertical-align: inherit;">这些命令使许多任务变得微不足道，这些任务对于分析文本和数据，在不同格式之间转换数据，过滤字符串等非常重要。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在处理文本数据时，主要原理是将任何复杂的问题分解为许多较小的问题-并分别解决他们使用专用工具。</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使每个程序做好一件事情</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-Unix哲学基础</font></font></a></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
乍一看，本章中的示例似乎有些牵强，但这是有目的的。</font><font style="vertical-align: inherit;">每个工具都旨在解决一个小问题。</font><font style="vertical-align: inherit;">但是，当结合使用时，它们将变得异常强大。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们将在命令外壳中介绍一些最常用和有用的文本处理命令，并演示将它们连接在一起的实际工作流程。</font><font style="vertical-align: inherit;">我建议您查看这些团队的法力，以了解可支配的全部可能性。</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以在线获取</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例CSV文件</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">您可以下载它来检查材料。</font></font></blockquote><br>
<a name="1"></a><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">猫</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
该命令</font></font><code>cat</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于编译一个或多个文件的列表，并将其内容显示在屏幕上。</font></font><br>
<br>
<pre><code class="plaintext hljs">$ cat Documents/readme<font></font>
Thanks again for reading this book!<font></font>
I hope you're following so far!<font></font>
<font></font>
$ cat Documents/computers<font></font>
Computers are not intelligent<font></font>
They're just fast at making dumb things.<font></font>
<font></font>
$ cat Documents/readme Documents/computers<font></font>
Thanks again for reading this book!<font></font>
I hope you are following so far!<font></font>
<font></font>
Computers are not intelligent<font></font>
They're just fast at making dumb things.</code></pre><br>
<a name="2"></a><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">头</font></font></h1><br>
<code>head</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">打印文件中的前n行。</font><font style="vertical-align: inherit;">这对于查找结构和格式未知的文件而不用一堆文本填充整个控制台非常有用。</font></font><br>
<br>
<pre><code class="bash hljs">$ head -n 2 metadata.csv<font></font>
metric_name,metric_type,interval,unit_name,per_unit_name,description,orientation,integration,short_name<font></font>
mysql.galera.wsrep_cluster_size,gauge,,node,,The current number of nodes <span class="hljs-keyword">in</span> the Galera cluster.,0,mysql,galera cluster size</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如果</font></font><code>-n</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">未指定，则</font></font><code>head</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">打印指定文件或输入流的前十行。</font></font><br>
<br>
<a name="3"></a><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">尾巴</font></font></h1><br>
<code>tail</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-类似物</font></font><code>head</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，仅显示文件的最后n行。</font></font><br>
<br>
<pre><code class="bash hljs">$ tail -n 1 metadata.csv<font></font>
mysql.performance.queries,gauge,,query,second,The rate of queries.,0,mysql,queries</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如果要打印位于第n行（包括它）之后的所有行，则可以使用参数</font></font><code>-n +n</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="bash hljs">$ tail -n +42 metadata.csv<font></font>
mysql.replication.slaves_connected,gauge,,,,Number of slaves connected to a replication master.,0,mysql,slaves connected<font></font>
mysql.performance.queries,gauge,,query,second,The rate of queries.,0,mysql,queries</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们的文件中有43行，因此它</font></font><code>tail -n +42</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仅从中输出第42行和第43行。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如果</font></font><code>-n</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">未指定</font><font style="vertical-align: inherit;">该参数</font><font style="vertical-align: inherit;">，它将</font></font><code>tail</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在指定的文件或输入流中输出最后十行。</font></font><br>
<br>
<code>tail -f</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code>tail --follow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">显示文件中的最后几行以及写入到文件中的每一行。</font><font style="vertical-align: inherit;">这对于实时查看活动非常有用，例如，Web服务器日志中记录的内容等。</font></font><br>
<br>
<a name="4"></a><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">厕所</font></font></h1><br>
<code>wc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（字数统计）显示</font><font style="vertical-align: inherit;">指定文件或流中</font><font style="vertical-align: inherit;">的字符数（</font></font><code>-c</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），单词数（</font></font><code>-w</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）或行数（</font></font><code>-l</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font></font><br>
<br>
<pre><code class="bash hljs">$ wc -l metadata.csv<font></font>
43  metadata.csv<font></font>
$ wc -w metadata.csv<font></font>
405 metadata.csv<font></font>
$ wc -c metadata.csv<font></font>
5094 metadata.csv</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
默认情况下，将显示所有上述内容。</font></font><br>
<br>
<pre><code class="bash hljs">$ wc metadata.csv<font></font>
43     405    5094 metadata.csv</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如果文本数据通过管道传输或重定向到</font></font><code>stdin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，则仅显示计数器。</font></font><br>
<br>
<pre><code class="bash hljs">$ cat metadata.csv | wc<font></font>
43     405    5094<font></font>
$ cat metadata.csv | wc -l<font></font>
43<font></font>
$ wc -w &lt; metadata.csv<font></font>
405</code></pre><br>
<a name="5"></a><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">grep</font></font></h1><br>
<code>grep</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-这是一把瑞士刀，可以根据给定的模式过滤弦。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
例如，我们可以找到文件中所有出现的</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">互斥</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">量</font><font style="vertical-align: inherit;">单词</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="bash hljs">$ grep mutex metadata.csv<font></font>
mysql.innodb.mutex_os_waits,gauge,,event,second,The rate of mutex OS waits.,0,mysql,mutex os waits<font></font>
mysql.innodb.mutex_spin_rounds,gauge,,event,second,The rate of mutex spin rounds.,0,mysql,mutex spin rounds<font></font>
mysql.innodb.mutex_spin_waits,gauge,,event,second,The rate of mutex spin waits.,0,mysql,mutex spin waits</code></pre><br>
<code>grep</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以处理指定为参数的文件或传递给它的文本流</font></font><code>stdin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">因此，我们可以连接几个命令</font></font><code>grep</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以进一步过滤文本。</font><font style="vertical-align: inherit;">在下面的示例中，我们过滤文件</font></font><code>metadata.csv</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">中的行以查找包含</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">互斥体</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OS的行</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="bash hljs">$ grep mutex metadata.csv | grep OS<font></font>
mysql.innodb.mutex_os_waits,gauge,,event,second,The rate of mutex OS waits.,0,mysql,mutex os waits</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
让我们考虑一些选项</font></font><code>grep</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">及其行为。</font></font><br>
<br>
<code>grep -v</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">执行逆向匹配：过滤</font><font style="vertical-align: inherit;">与参数模式</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">匹配的</font><font style="vertical-align: inherit;">字符串</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="bash hljs">$ grep -v gauge metadata.csv<font></font>
metric_name,metric_type,interval,unit_name,per_unit_name,description,orientation,integration,short_name</code></pre><br>
<code> grep -i</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">执行不区分大小写的匹配。</font><font style="vertical-align: inherit;">以下示例</font></font><code>grep -i os</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">查找</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OS</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">os</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="bash hljs">$ grep -i os metadata.csv<font></font>
mysql.innodb.mutex_os_waits,gauge,,event,second,The rate of mutex OS waits.,0,mysql,mutex os waits<font></font>
mysql.innodb.os_log_fsyncs,gauge,,write,second,The rate of fsync writes to the <span class="hljs-built_in">log</span> file.,0,mysql,<span class="hljs-built_in">log</span> fsyncs</code></pre><br>
<code>grep -l</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 列出包含匹配项的文件。</font></font><br>
<br>
<pre><code class="bash hljs">$ grep -l mysql metadata.csv<font></font>
metadata.csv</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
该团队</font></font><code>grep -c</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">计算发现样本的次数。</font></font><br>
<br>
<pre><code class="bash hljs">$ grep -c select metadata.csv<font></font>
3</code></pre><br>
<code>grep -r</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 在当前工作目录及其所有子目录中递归搜索文件。</font></font><br>
<br>
<pre><code class="bash hljs">$ grep -r are ~/Documents<font></font>
/home/br/Documents/computers:Computers are not intelligent<font></font>
/home/br/Documents/readme:I hope you are following so far!</code></pre><br>
<code>grep -w</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 仅显示匹配的整个单词。</font></font><br>
<br>
<pre><code class="bash hljs">$ grep follow ~/Documents/readme<font></font>
I hope you are following so far!<font></font>
$ grep -w follow ~/Documents/readme<font></font>
$</code></pre><br>
<a name="6"></a><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">切</font></font></h1><br>
<code>cut</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">提取文件的一部分（或照常输入流）。</font><font style="vertical-align: inherit;">该命令使用option定义字段分隔符（用于分隔列）</font></font><code>-d</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，并</font><font style="vertical-align: inherit;">使用option </font><font style="vertical-align: inherit;">定义要检索的列号</font></font><code>-f</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
例如，以下命令从CSV文件的最后五行中检索第一列。</font></font><br>
<br>
<pre><code class="bash hljs">$ tail -n 5 metadata.csv | cut -d , -f 1<font></font>
mysql.performance.user_time<font></font>
mysql.replication.seconds_behind_master<font></font>
mysql.replication.slave_running<font></font>
mysql.replication.slaves_connected<font></font>
mysql.performance.queries</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
由于我们正在处理CSV，因此各列之间用逗号分隔，并且该选项负责检索第一列</font></font><code>-f 1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
您可以使用选项选择第一列和第二列</font></font><code>-f 1,2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="bash hljs">$ tail -n 5 metadata.csv | cut -d , -f 1,2<font></font>
mysql.performance.user_time,gauge<font></font>
mysql.replication.seconds_behind_master,gauge<font></font>
mysql.replication.slave_running,gauge<font></font>
mysql.replication.slaves_connected,gauge<font></font>
mysql.performance.queries,gauge</code></pre><br>
<a name="7"></a><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">糊</font></font></h1><br>
<code>paste</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 将两个不同的文件合并到一个多列文件中。</font></font><br>
<br>
<pre><code class="bash hljs">$ cat ingredients<font></font>
eggs<font></font>
milk<font></font>
butter<font></font>
tomatoes<font></font>
$ cat prices<font></font>
1$<font></font>
1.99$<font></font>
1.50$<font></font>
2$/kg<font></font>
$ paste ingredients prices<font></font>
eggs    1$<font></font>
milk    1.99$<font></font>
butter  1.50$<font></font>
tomatoes    2$/kg</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
默认情况下，它</font></font><code>paste</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用制表符分隔符，但可以使用参数进行更改</font></font><code>-d</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="bash hljs">$ paste ingredients prices -d:<font></font>
eggs:1$<font></font>
milk:1.99$<font></font>
butter:1.50$<font></font>
tomatoes:2$/kg</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
另一个常见用例</font></font><code>paste</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;是使用指定的定界符，并结合使用</font></font><code>-s</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font><font style="vertical-align: inherit;">来组合流或文件中的所有行</font></font><code>-d</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="bash hljs">$ paste -s -d, ingredients<font></font>
eggs,milk,butter,tomatoes</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如果将参数指定为输入文件</font></font><code>-</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，则将改为读取它</font></font><code>stdin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="bash hljs">$ cat ingredients | paste -s -d, -<font></font>
eggs,milk,butter,tomatoes</code></pre><br>
<a name="8"></a><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">分类</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
该命令</font></font><code>sort</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">实际上对数据进行排序（在指定的文件或输入流中）。</font></font><br>
<br>
<pre><code class="bash hljs">$ cat ingredients<font></font>
eggs<font></font>
milk<font></font>
butter<font></font>
tomatoes<font></font>
salt<font></font>
$ sort ingredients<font></font>
butter<font></font>
eggs<font></font>
milk<font></font>
salt<font></font>
tomatoes</code></pre><br>
<code>sort -r</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 执行反向排序。</font></font><br>
<br>
<pre><code class="bash hljs">$ sort -r ingredients<font></font>
tomatoes<font></font>
salt<font></font>
milk<font></font>
eggs<font></font>
butter</code></pre><br>
<code>sort -n</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 按字段的算术值排序。</font></font><br>
<br>
<pre><code class="bash hljs">$ cat numbers<font></font>
0<font></font>
2<font></font>
1<font></font>
10<font></font>
3<font></font>
$ sort numbers<font></font>
0<font></font>
1<font></font>
10<font></font>
2<font></font>
3<font></font>
$ sort -n numbers<font></font>
0<font></font>
1<font></font>
2<font></font>
3<font></font>
10</code></pre><br>
<a name="9"></a><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">优衣库</font></font></h1><br>
<code>uniq</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 检测并过滤指定文件或输入流中相邻的相同行。</font></font><br>
<br>
<pre><code class="bash hljs">$ cat duplicates<font></font>
and one<font></font>
and one<font></font>
and two<font></font>
and one<font></font>
and two<font></font>
and one, two, three<font></font>
$ uniq duplicates<font></font>
and one<font></font>
and two<font></font>
and one<font></font>
and two<font></font>
and one, two, three</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
由于它</font></font><code>uniq</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仅过滤掉</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">相邻的</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">行，因此重复数据可能仍保留在我们的数据中。</font><font style="vertical-align: inherit;">要从文件中过滤所有相同的行，必须首先对文件的内容进行排序。</font></font><br>
<br>
<pre><code class="bash hljs">$ sort duplicates | uniq<font></font>
and one<font></font>
and one, two, three<font></font>
and two</code></pre><br>
<code>uniq -c</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 在每一行的开头插入其出现的次数。</font></font><br>
<br>
<pre><code class="bash hljs">$ sort duplicates | uniq -c<font></font>
   3 and one<font></font>
   1 and one, two, three<font></font>
   2 and two</code></pre><br>
<code>uniq -u</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 仅显示唯一字符串。</font></font><br>
<br>
<pre><code class="bash hljs">$ sort duplicates | uniq -u<font></font>
and one, two, three</code></pre><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意。</font></font><code>uniq</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">它与排序结合使用时特别有用，因为管道</font></font><code>| sort | uniq</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">允许您删除文件或流中的所有重复行。</font></font></blockquote><br>
<a name="10"></a><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">awk</font></font></h1><br>
<code>awk</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-这不仅仅是文字处理工具：事实上，它具有</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">完整的编程语言</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">什么是</font></font><code>awk</code> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">真正的</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">好是分割文件转换成列，它有特殊的光彩做它时，空格和制表符的文件混合。</font></font><br>
<br>
<pre><code class="bash hljs">$ cat -t multi-columns<font></font>
John Smith    Doctor^ITardis<font></font>
Sarah-James Smith^I    Companion^ILondon<font></font>
Rose Tyler   Companion^ILondon</code></pre><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意。</font></font><code>cat -t</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将标签显示为</font></font><code>^I</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如您所见，这些列由空格或制表符分隔，而不总是由相同数量的空格分隔。</font></font><code>cut</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">它在这里是无用的，因为它仅适用于一个分隔符。</font><font style="vertical-align: inherit;">但是</font></font><code>awk</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">处理这样的文件很容易。</font></font><br>
<br>
<code>awk '{ print $n }'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在文本中显示第n列。</font></font><br>
<br>
<pre><code class="bash hljs">$ cat multi-columns | awk <span class="hljs-string">'{ print $1 }'</span><font></font>
John<font></font>
Sarah-James<font></font>
Rose<font></font>
$ cat multi-columns | awk <span class="hljs-string">'{ print $3 }'</span><font></font>
Doctor<font></font>
Companion<font></font>
Companion<font></font>
$ cat multi-columns | awk <span class="hljs-string">'{ print $1,$2 }'</span><font></font>
John Smith<font></font>
Sarah-James Smith<font></font>
Rose Tyler</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
尽管</font></font><code>awk</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">功能强大得多，但在我的个人案例中，扬声器的输出可能约为用例的99％。</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意。</font></font><code>{ print $NF }</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">显示一行中的最后一列。</font></font></blockquote><br>
<a name="11"></a><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TR</font></font></h1><br>
<code>tr</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代表</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">翻译</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">此命令将一个字符替换为另一个字符。</font><font style="vertical-align: inherit;">它适用于字符或</font><font style="vertical-align: inherit;">字符</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类，</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例如小写，键入，空格，字母数字等。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在标准输入上，它将</font></font><code>tr &lt;char1&gt; &lt;char2&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所有出现的&lt;char1&gt;替换为&lt;char2&gt;。</font></font><br>
<br>
<pre><code class="bash hljs">$ <span class="hljs-built_in">echo</span> <span class="hljs-string">"Computers are fast"</span> | tr a A<font></font>
computers Are fAst</code></pre><br>
<code>tr</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以使用符号转换字符类</font></font><code>[:class:]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">手册页上描述了可用类的完整列表</font></font><code>tr</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，但此处进行了一些演示。</font></font><br>
<br>
<code>[:space:]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代表所有类型的空格，从简单空格到制表符或换行符。</font></font><br>
<br>
<pre><code class="bash hljs">$ <span class="hljs-built_in">echo</span> <span class="hljs-string">"computers are fast"</span> | tr <span class="hljs-string">'[:space:]'</span> <span class="hljs-string">','</span>
computers,are,fast,%</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
所有字符（如空格）均以逗号分隔。</font><font style="vertical-align: inherit;">请注意，</font></font><code>%</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">输出末尾</font><font style="vertical-align: inherit;">的字符</font><font style="vertical-align: inherit;">表示不存在换行符。</font><font style="vertical-align: inherit;">确实，此字符也转换为逗号。</font></font><br>
<br>
<code>[:lower:]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代表所有小写字符和</font></font><code>[:upper:]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;所有大写</font><font style="vertical-align: inherit;">字符</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">因此，它们之间的转换变得微不足道。</font></font><br>
<br>
<pre><code class="bash hljs">$ <span class="hljs-built_in">echo</span> <span class="hljs-string">"computers are fast"</span> | tr <span class="hljs-string">'[:lower:]'</span> <span class="hljs-string">'[:upper:]'</span><font></font>
COMPUTERS ARE FAST<font></font>
$ <span class="hljs-built_in">echo</span> <span class="hljs-string">"COMPUTERS ARE FAST"</span> | tr <span class="hljs-string">'[:upper:]'</span> <span class="hljs-string">'[:lower:]'</span>
computers are fast</code></pre><br>
<code>tr -c SET1 SET2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将</font><font style="vertical-align: inherit;">SET1中</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">未</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包含的</font><font style="vertical-align: inherit;">任何字符转换</font><font style="vertical-align: inherit;">为SET2中的字符。</font><font style="vertical-align: inherit;">在以下示例中，除指示的元音外，所有其他字符均替换为空格。</font></font><br>
<br>
<pre><code class="bash hljs">$ <span class="hljs-built_in">echo</span> <span class="hljs-string">"computers are fast"</span> | tr -c <span class="hljs-string">'[aeiouy]'</span> <span class="hljs-string">' '</span>
 o  u e   a e  a</code></pre><br>
<code>tr -d</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">删除指定的字符，但不替换它们。</font><font style="vertical-align: inherit;">这是等效的</font></font><code>tr &lt;char&gt; ''</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="bash hljs">$ <span class="hljs-built_in">echo</span> <span class="hljs-string">"Computers Are Fast"</span> | tr -d <span class="hljs-string">'[:lower:]'</span>
C A F</code></pre><br>
<code>tr</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">也可以</font><font style="vertical-align: inherit;">使用符号</font><font style="vertical-align: inherit;">替换字符范围，例如</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">之间</font><i><font style="vertical-align: inherit;">的</font></i><font style="vertical-align: inherit;">所有字母</font><font style="vertical-align: inherit;">或1和8之间的所有数字</font></font><code>s-e</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，其中</font></font><code>s</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;表示起始字符，</font></font><code>e</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;表示结尾。</font></font><br>
<br>
<pre><code class="bash hljs">$ <span class="hljs-built_in">echo</span> <span class="hljs-string">"computers are fast"</span> | tr <span class="hljs-string">'a-e'</span> <span class="hljs-string">'x'</span><font></font>
xomputxrs xrx fxst<font></font>
$ <span class="hljs-built_in">echo</span> <span class="hljs-string">"5uch l337 5p34k"</span> | tr <span class="hljs-string">'1-4'</span> <span class="hljs-string">'x'</span>
5uch lxx7 5pxxk</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
该命令</font></font><code>tr -s string1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将所有多次出现的字符压缩为</font></font><code>string1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个。</font><font style="vertical-align: inherit;">最有用的用途之一</font></font><code>tr -s</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是用一个替换多个连续的空格。</font></font><br>
<br>
<pre><code class="bash hljs">$ <span class="hljs-built_in">echo</span> <span class="hljs-string">"Computers         are       fast"</span> | tr -s <span class="hljs-string">' '</span>
Computers are fast</code></pre><br>
<a name="12"></a><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">折</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
该命令将</font></font><code>fold</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所有输入行折叠到指定的宽度。</font><font style="vertical-align: inherit;">例如，确保文本适合在小显示器上显示可能很有用。</font><font style="vertical-align: inherit;">因此，</font></font><code>fold -w n</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">堆叠宽度为n个字符的字符串。</font></font><br>
<br>
<pre><code class="bash hljs">$ cat ~/Documents/readme | fold -w 16<font></font>
Thanks again <span class="hljs-keyword">for</span><font></font>
 reading this bo<font></font>
ok!<font></font>
I hope you<span class="hljs-string">'re fo
llowing so far!</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
该命令</font></font><code>fold -s</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将仅在空格字符上换行。</font><font style="vertical-align: inherit;">可以将其与前一个字符组合以将字符串限制为指定的字符数。</font></font><br>
<br>
<pre><code class="bash hljs">Thanks again
<span class="hljs-keyword">for</span> reading<font></font>
this book!<font></font>
I hope you<span class="hljs-string">'re
following so
far!</span></code></pre><br>
<a name="13"></a><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sed</font></font></h1><br>
<code>sed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一种非交互式流编辑器，用于逐行转换输入流中的文本。</font><font style="vertical-align: inherit;">作为输入，可以是文件或，或者</font></font><code>stdin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以是输出处的文件或</font></font><code>stdout</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
编辑器命令可以包括一个或多个</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">地址</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">因此，命令如下：</font></font><br>
<br>
<pre><code class="bash hljs">[address[,address]]<span class="hljs-keyword">function</span>[arguments]</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
尽管它</font></font><code>sed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">执行许多功能，但我们仅考虑将文本替换为最常见的用例之一。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文字替换</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
替换命令</font></font><code>sed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如下：</font></font><br>
<br>
<pre><code class="bash hljs">s/PATTERN/REPLACEMENT/[options]</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：替换文件中每一行中单词的第一个实例：</font></font><br>
<br>
<pre><code class="bash hljs">$ cat hello<font></font>
hello hello<font></font>
hello world!<font></font>
hi<font></font>
$ cat hello | sed <span class="hljs-string">'s/hello/Hey I just met you/'</span><font></font>
Hey I just met you hello<font></font>
Hey I just met you world<font></font>
hi</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们看到在第一行中只有第一个实例被替换</font></font><code>hello</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">要替换</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所有</font></font></i><font style="vertical-align: inherit;"></font><code>hello</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">行中的</font><i><font style="vertical-align: inherit;">所有</font></i><font style="vertical-align: inherit;">匹配项</font><font style="vertical-align: inherit;">，可以使用选项</font></font><code>g</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（意味着</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">global</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font></font><br>
<br>
<pre><code class="bash hljs">$ cat hello | sed <span class="hljs-string">'s/hello/Hey I just met you/g'</span><font></font>
Hey I just met you Hey I just met you<font></font>
Hey I just met you world<font></font>
hi</code></pre><br>
<code>sed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">允许您使用除以外的任何定界符</font></font><code>/</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，如果命令参数本身有斜杠，则可以特别提高可读性。</font></font><br>
<br>
<pre><code class="bash hljs">$ cat hello | sed <span class="hljs-string">'s@hello@Hey I just met you@g'</span><font></font>
Hey I just met you Hey I just met you<font></font>
Hey I just met you world<font></font>
hi</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
地址告诉编辑者在哪一行或哪几行上执行替换。</font></font><br>
<br>
<pre><code class="bash hljs">$ cat hello | sed <span class="hljs-string">'1s/hello/Hey I just met you/g'</span><font></font>
Hey I just met you hello<font></font>
hello world<font></font>
hi<font></font>
$ cat hello | sed <span class="hljs-string">'2s/hello/Hey I just met you/g'</span><font></font>
hello hello<font></font>
Hey I just met you  world<font></font>
hi</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
该地址</font><font style="vertical-align: inherit;">在第一行中</font></font><code>1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表示替换为</font></font><code>hello</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">on </font></font><code>Hey I just met you</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">我们所用的符号指定地址的范围</font></font><code>&lt;start&gt;,&lt;end&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，它</font></font><code>&lt;end&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以是行号或</font></font><code>$</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，也就是说，在该文件中的最后一行。</font></font><br>
<br>
<pre><code class="bash hljs">$ cat hello | sed <span class="hljs-string">'1,2s/hello/Hey I just met you/g'</span><font></font>
Hey I just met you Hey I just met you<font></font>
Hey I just met you world<font></font>
hi<font></font>
$ cat hello | sed <span class="hljs-string">'2,3s/hello/Hey I just met you/g'</span><font></font>
hello hello<font></font>
Hey I just met you world<font></font>
hi<font></font>
$ cat hello | sed <span class="hljs-string">'2,$s/hello/Hey I just met you/g'</span><font></font>
hello hello<font></font>
Hey I just met you world<font></font>
hi</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
默认情况下，它</font></font><code>sed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">会自己产生结果</font></font><code>stdout</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，但也可以使用option编辑原始文件</font></font><code>-i</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="bash hljs">$ sed -i <span class="hljs-string">''</span> <span class="hljs-string">'s/hello/Bonjour/'</span> sed-data<font></font>
$ cat sed-data<font></font>
Bonjour hello<font></font>
Bonjour world<font></font>
hi</code></pre><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意。</font><font style="vertical-align: inherit;">在Linux上，就足够了</font></font><code>-i</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">但是在macOS上，命令的行为略有不同，因此</font></font><code>-i</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您需要在之后添加</font></font><code>''</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></blockquote><br>
<a name="14"></a><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">真实的例子</font></font></h1><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用grep和awk进行CSV过滤</font></font></h3><br>
<pre><code class="bash hljs">$ grep -w gauge metadata.csv | awk -F, <span class="hljs-string">'{ if ($4 == "query") { print $1, "per", $5 } }'</span><font></font>
mysql.performance.com_delete per second<font></font>
mysql.performance.com_delete_multi per second<font></font>
mysql.performance.com_insert per second<font></font>
mysql.performance.com_insert_select per second<font></font>
mysql.performance.com_replace_select per second<font></font>
mysql.performance.com_select per second<font></font>
mysql.performance.com_update per second<font></font>
mysql.performance.com_update_multi per second<font></font>
mysql.performance.questions per second<font></font>
mysql.performance.slow_queries per second<font></font>
mysql.performance.queries per second</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在此示例中</font></font><code>grep</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，文件</font></font><code>metadata.csv</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">首先过滤包含单词的行</font></font><code>gauge</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，然后</font><font style="vertical-align: inherit;">过滤</font><font style="vertical-align: inherit;">具有</font></font><code>query</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第四列的行，并显示具有相应值</font></font><code>per_unit_name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（第五列）</font><font style="vertical-align: inherit;">的度量标准名称（第一</font><font style="vertical-align: inherit;">列）。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">显示与网络接口关联的IPv4地址</font></font></h3><br>
<pre><code class="bash hljs">$ ifconfig en0 | grep inet | grep -v inet6 | awk <span class="hljs-string">'{ print $2 }'</span>
192.168.0.38</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
该命令</font></font><code>ifconfig &lt;interface name&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在指定的网络接口上显示信息。</font><font style="vertical-align: inherit;">例如：</font></font><br>
<br>
<pre><code class="bash hljs">en0: flags=8863&lt;UP,BROADCAST,SMART,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500<font></font>
    ether 19:64:92:de:20:ba<font></font>
    inet6 fe80::8a3:a1cb:56ae:7c7c%en0 prefixlen 64 secured scopeid 0x7<font></font>
    inet 192.168.0.38 netmask 0xffffff00 broadcast 192.168.0.255<font></font>
    nd6 options=201&lt;PERFORMNUD,DAD&gt;<font></font>
    media: autoselect<font></font>
    status: active</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
然后运行</font></font><code>grep</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的</font></font><code>inet</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，将产生对应的两行。</font></font><br>
<br>
<pre><code class="bash hljs">$ ifconfig en0 | grep inet<font></font>
    inet6 fe80::8a3:a1cb:56ae:7c7c%en0 prefixlen 64 secured scopeid 0x7<font></font>
    inet 192.168.0.38 netmask 0xffffff00 broadcast 192.168.0.255</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
然后，使用</font></font><code>grep -v</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">排除带有的行</font></font><code>ipv6</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="bash hljs">$ ifconfig en0 | grep inet | grep -v inet6<font></font>
inet 192.168.0.38 netmask 0xffffff00 broadcast 192.168.0.255</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最后，在帮助下，我们</font></font><code>awk</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请求该行的第二列：这是与我们的网络接口关联的IPv4地址</font></font><code>en0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="bash hljs">$ ifconfig en0 | grep inet | grep -v inet6 | awk <span class="hljs-string">'{ print $2 }'</span>
192.168.0.38</code></pre><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">提供</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">给</font><font style="vertical-align: inherit;">我的是</font></font><code>grep inet | grep -v inet6</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一支如此可靠的团队</font></font><code>awk</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<br>
<pre><code class="bash hljs">$ ifconfig en0 | awk <span class="hljs-string">' $1 == "inet" { print $2 }'</span>
192.168.0.38</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
它较短，专门针对带有条件的IPv4 </font></font><code>$1 == "inet"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></blockquote><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从配置文件中检索值</font></font></h3><br>
<pre><code class="bash hljs">$ grep <span class="hljs-string">'editor ='</span> ~/.gitconfig  | cut -d = -f2 | sed <span class="hljs-string">'s/ //g'</span>
/usr/bin/vim</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在当前用户的git配置文件中，查找值</font></font><code>editor =</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，裁剪字符</font></font><code>=</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，提取第二列并删除周围的所有空格。</font></font><br>
<br>
<pre><code class="bash hljs">$ grep <span class="hljs-string">'editor ='</span> ~/.gitconfig<font></font>
     editor = /usr/bin/vim<font></font>
$ grep <span class="hljs-string">'editor ='</span> ~/.gitconfig  | cut -d<span class="hljs-string">'='</span> -f2<font></font>
 /usr/bin/vim<font></font>
$ grep <span class="hljs-string">'editor ='</span> ~/.gitconfig  | cut -d<span class="hljs-string">'='</span> -f2 | sed <span class="hljs-string">'s/ //'</span>
/usr/bin/vim</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从日志文件中提取IP</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以下真实代码在数据库日志中查找消息</font></font><code>Too many connections from</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（后跟IP地址），并显示十个主要入侵者。</font></font><br>
<br>
<pre><code class="bash hljs">$ grep <span class="hljs-string">'Too many connections from'</span> db.log | \<font></font>
  awk <span class="hljs-string">'{ print $12 }'</span> | \<font></font>
  sed <span class="hljs-string">'s@/@@'</span> | \<font></font>
  sort | \<font></font>
  uniq -c | \<font></font>
  sort -rn | \<font></font>
  head -n 10 | \<font></font>
  awk <span class="hljs-string">'{ print $2 }'</span><font></font>
   10.11.112.108<font></font>
   10.11.111.70<font></font>
   10.11.97.57<font></font>
   10.11.109.72<font></font>
   10.11.116.156<font></font>
   10.11.100.221<font></font>
   10.11.96.242<font></font>
   10.11.81.68<font></font>
   10.11.99.112<font></font>
   10.11.107.120</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
让我们看看这个管道的作用。</font><font style="vertical-align: inherit;">首先，日志中的行是什么样的。</font></font><br>
<br>
<pre><code class="bash hljs">$ grep <span class="hljs-string">"Too many connections from"</span> db.log | head -n 1<font></font>
2020-01-01 08:02:37,617 [myid:1] - WARN  [NIOServerCxn.Factory:1.2.3.4/1.2.3.4:2181:NIOServerCnxnFactory@193] - Too many connections from /10.11.112.108 - max is 60</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
然后</font></font><code>awk '{ print $12 }'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从字符串中提取IP地址。</font></font><br>
<br>
<pre><code class="bash hljs">$ grep <span class="hljs-string">"Too many connections from"</span> db.log | awk <span class="hljs-string">'{ print $12 }'</span><font></font>
/10.11.112.108<font></font>
...</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
该命令</font></font><code>sed 's@/@@'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">删除初始斜杠。</font></font><br>
<br>
<pre><code class="bash hljs">$ grep <span class="hljs-string">"Too many connections from"</span> db.log | awk <span class="hljs-string">'{ print $12 }'</span> | sed <span class="hljs-string">'s@/@@'</span><font></font>
10.11.112.108<font></font>
...</code></pre><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意。</font><font style="vertical-align: inherit;">如前所述，</font></font><code>sed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您可以在其中使用任何分隔符。</font><font style="vertical-align: inherit;">尽管通常将其用作分隔符</font></font><code>/</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，但在此我们将替换此特定字符，这将稍微削弱替换表达式的可读性。</font></font><br>
<br>
<pre><code class="bash hljs">sed <span class="hljs-string">'s/\///'</span></code></pre></blockquote><br>
<code>sort | uniq -c</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 按字典顺序对IP地址进行排序，然后删除重复项，并在每个IP地址之前添加条目数。</font></font><br>
<br>
<pre><code class="bash hljs">$ grep <span class="hljs-string">'Too many connections from'</span> db.log | \<font></font>
  awk <span class="hljs-string">'{ print $12 }'</span> | \<font></font>
  sed <span class="hljs-string">'s@/@@'</span> | \<font></font>
  sort | \<font></font>
  uniq -c<font></font>
   1379 10.11.100.221<font></font>
   1213 10.11.103.168<font></font>
   1138 10.11.105.177<font></font>
    946 10.11.106.213<font></font>
   1211 10.11.106.4<font></font>
   1326 10.11.107.120<font></font>
   ...</code></pre><br>
<code>sort -rn | head -n 10</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">按出现次数对这些行进行排序，并按数字顺序和相反的顺序进行排列，以便首先显示主要违规者，其中显示10条行。</font><font style="vertical-align: inherit;">最后一条命令</font></font><code>awk { print $2 }</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">本身检索IP地址。</font></font><br>
<br>
<pre><code class="bash hljs">$ grep <span class="hljs-string">'Too many connections from'</span> db.log | \<font></font>
  awk <span class="hljs-string">'{ print $12 }'</span> | \<font></font>
  sed <span class="hljs-string">'s@/@@'</span> | \<font></font>
  sort | \<font></font>
  uniq -c | \<font></font>
  sort -rn | \<font></font>
  head -n 10 | \<font></font>
  awk <span class="hljs-string">'{ print $2 }'</span><font></font>
  10.11.112.108<font></font>
  10.11.111.70<font></font>
  10.11.97.57<font></font>
  10.11.109.72<font></font>
  10.11.116.156<font></font>
  10.11.100.221<font></font>
  10.11.96.242<font></font>
  10.11.81.68<font></font>
  10.11.99.112<font></font>
  10.11.107.120</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在源文件中重命名功能</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
假设我们正在一个项目上，并且想在源文件中重命名该函数（或类，变量等）。</font><font style="vertical-align: inherit;">您可以</font></font><code>sed -i</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用直接替换原始文件中</font><font style="vertical-align: inherit;">的命令来执行此</font><font style="vertical-align: inherit;">操作。</font></font><br>
<br>
<pre><code class="bash hljs">$ cat izk/utils.py<font></font>
def bool_from_str(s):<font></font>
    <span class="hljs-keyword">if</span> s.isdigit():
        <span class="hljs-built_in">return</span> int(s) == 1
    <span class="hljs-built_in">return</span> s.lower() <span class="hljs-keyword">in</span> [<span class="hljs-string">'yes'</span>, <span class="hljs-string">'true'</span>, <span class="hljs-string">'y'</span>]</code></pre><br>
<pre><code class="bash hljs">$ sed -i <span class="hljs-string">'s/def bool_from_str/def is_affirmative/'</span> izk/utils.py<font></font>
$ cat izk/utils.py<font></font>
def is_affirmative(s):<font></font>
    <span class="hljs-keyword">if</span> s.isdigit():
        <span class="hljs-built_in">return</span> int(s) == 1
    <span class="hljs-built_in">return</span> s.lower() <span class="hljs-keyword">in</span> [<span class="hljs-string">'yes'</span>, <span class="hljs-string">'true'</span>, <span class="hljs-string">'y'</span>]</code></pre><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意。</font><font style="vertical-align: inherit;">在MacOS，</font></font><code>sed -i</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用</font><font style="vertical-align: inherit;">代替</font></font><code>sed -i ''</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
但是，我们仅在原始文件中重命名了该函数。</font><font style="vertical-align: inherit;">由于</font></font><code>bool_from_str</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不再定义此功能，因此</font><font style="vertical-align: inherit;">这将中断</font><font style="vertical-align: inherit;">其他文件</font><font style="vertical-align: inherit;">的导入</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">我们需要找到一种</font></font><code>bool_from_str</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在整个项目中</font><font style="vertical-align: inherit;">重命名的方法</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这可以使用命令</font></font><code>grep</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>sed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">循环</font></font><code>for</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或使用来实现</font></font><code>xargs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<a name="15"></a><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">加深：周期</font></font><code>for</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>xargs</code></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
要替换项目中的所有事件</font></font><code>bool_from_str</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，您必须首先使用递归查找它们</font></font><code>grep -r</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="bash hljs">$ grep -r bool_from_str .<font></font>
./tests/test_utils.py:from izk.utils import bool_from_str<font></font>
./tests/test_utils.py:def test_bool_from_str(s, expected):<font></font>
./tests/test_utils.py:    assert bool_from_str(s) == expected<font></font>
./izk/utils.py:def bool_from_str(s):<font></font>
./izk/prompt.py:from .utils import bool_from_str<font></font>
./izk/prompt.py:                    default = bool_from_str(os.environ[envvar])</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
由于我们只对具有匹配项的文件感兴趣，因此您还必须使用选项</font></font><code>-l/--files-with-matches</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<br>
<pre><code class="bash hljs">-l, --files-with-matches<font></font>
        Only the names of files containing selected lines are written to standard out-<font></font>
        put.  grep will only search a file until a match has been found, making<font></font>
        searches potentially less expensive.  Pathnames are listed once per file<font></font>
        searched.  If the standard input is searched, the string ``(standard input)<span class="hljs-string">''</span>
        is written.</code></pre><br>
<pre><code class="bash hljs">$ grep -r --files-with-matches bool_from_str .<font></font>
./tests/test_utils.py<font></font>
./izk/utils.py<font></font>
./izk/prompt.py</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
然后，我们可以使用命令</font></font><code>xargs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从输出的每一行（即，包含line的所有文件</font></font><code>bool_from_str</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）执行操作。</font></font><br>
<br>
<pre><code class="bash hljs">$ grep -r --files-with-matches bool_from_str . | \<font></font>
  xargs -n 1 sed -i <span class="hljs-string">'s/bool_from_str/is_affirmative/'</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
该选项</font></font><code>-n 1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指示输出中的每一行应执行一个单独的命令</font></font><code>sed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
然后执行以下命令：</font></font><br>
<br>
<pre><code class="bash hljs">$ sed -i <span class="hljs-string">'s/bool_from_str/is_affirmative/'</span> ./tests/test_utils.py<font></font>
$ sed -i <span class="hljs-string">'s/bool_from_str/is_affirmative/'</span> ./izk/utils.py<font></font>
$ sed -i <span class="hljs-string">'s/bool_from_str/is_affirmative/'</span> ./izk/prompt.py</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如果您调用的命令</font></font><code>xargs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（在本例中为</font></font><code>sed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）支持多个参数，则应丢弃该参数</font></font><code>-n 1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以提高性能。</font></font><br>
<br>
<pre><code class="bash hljs">grep -r --files-with-matches bool_from_str . | xargs sed -i <span class="hljs-string">'s/bool_from_str/is_affirmative/'</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
然后将执行此命令</font></font><br>
<br>
<pre><code class="bash hljs">$ sed -i <span class="hljs-string">'s/bool_from_str/is_affirmative/'</span> ./tests/test_utils.py ./izk/utils.py ./izk/prompt.py</code></pre><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意。</font><font style="vertical-align: inherit;">从</font></font><code>sed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">手册页上</font><font style="vertical-align: inherit;">的提要</font><font style="vertical-align: inherit;">中可以看出，该团队可以提出几个论点。</font></font><br>
<br>
<pre><code class="bash hljs">SYNOPSIS<font></font>
     sed [-Ealn] <span class="hljs-built_in">command</span> [file ...]<font></font>
     sed [-Ealn] [-e <span class="hljs-built_in">command</span>] [-f command_file] [-i extension] [file ...]</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
确实，正如我们在上一章中所看到的，这</font></font><code>file ...</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">意味着可以接受几个参数，即文件名。</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们看到，所有情况都被替换</font></font><code>bool_from_str</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="bash hljs">$ grep -r is_affirmative .<font></font>
./tests/test_utils.py:from izk.utils import is_affirmative<font></font>
./tests/test_utils.py:def test_is_affirmative(s, expected):<font></font>
./tests/test_utils.py:    assert is_affirmative(s) == expected<font></font>
./izk/utils.py:def is_affirmative(s):<font></font>
./izk/prompt.py:from .utils import is_affirmative<font></font>
./izk/prompt.py:                    default = is_affirmative(os.environ[envvar])</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
通常，有几种方法可以达到相同的结果。</font><font style="vertical-align: inherit;">相反，</font></font><code>xargs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们可以使用循环</font></font><code>for</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">来遍历列表中的行，并对每个项目执行操作。</font><font style="vertical-align: inherit;">这些循环具有以下语法：</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> list; <span class="hljs-keyword">do</span>
    <span class="hljs-built_in">command</span> <span class="hljs-variable">$item</span>
<span class="hljs-keyword">done</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如果我们总结我们的命令</font></font><code>grep</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">中</font></font><code>$()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，那么shell将在执行其</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子shell</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，其结果将在随后的循环重复</font></font><code>for</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="bash hljs">$ <span class="hljs-keyword">for</span> file <span class="hljs-keyword">in</span> $(grep -r --files-with-matches bool_from_str .); <span class="hljs-keyword">do</span>
  sed -i <span class="hljs-string">'s/bool_from_str/is_affirmative/'</span> <span class="hljs-variable">$file</span>
<span class="hljs-keyword">done</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
该命令将执行</font></font><br>
<br>
<pre><code class="bash hljs">$ sed -i <span class="hljs-string">'s/bool_from_str/is_affirmative/'</span> ./tests/test_utils.py<font></font>
$ sed -i <span class="hljs-string">'s/bool_from_str/is_affirmative/'</span> ./izk/utils.py<font></font>
$ sed -i <span class="hljs-string">'s/bool_from_str/is_affirmative/'</span> ./izk/prompt.py</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在</font></font><code>for</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我看来</font><font style="vertical-align: inherit;">，循环语法</font><font style="vertical-align: inherit;">比这更清晰</font></font><code>xargs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，但后者可以使用parameters并行执行命令</font></font><code>-P n</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，其中，</font></font><code>n</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是同时执行的最大并行命令数，这可以提高性能。</font></font><br>
<br>
<a name="16"></a><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">摘要</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
所有这些工具都为您带来了无限的可能性，因为它们使您能够提取和转换数据，从可能从未打算一起工作的团队中创建整个管道。它们每个都执行相对较小的功能（排序</font></font><code>sort</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，合并</font></font><code>cat</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，过滤器</font></font><code>grep</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，编辑</font></font><code>sed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，剪切</font></font><code>cut</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">等）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
任何包含文本的任务都可以简化为一系列较小的任务，每个任务都执行一个简单的动作并将其输出传输到下一个任务。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
例如，如果我们想知道日志文件中有多少个唯一IP地址，并且这些IP地址始终显示在同一列中，那么我们可以运行以下命令序列：</font></font><br>
<br>
<ul>
<li><code>grep</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 与IP地址的字符串模式匹配的字符串</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">找到具有IP地址的列，将其提取出来 </font></font><code>awk</code><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用以下命令对IP地址列表进行排序 </font></font><code>sort</code><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">消除相邻重复项 </font></font><code>uniq</code><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">计算行数（即唯一的IP地址），使用 </font></font><code>wc -l</code></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
由于有许多本机和第三方文字处理工具，因此也有许多方法可以解决任何问题。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
本文中的示例牵强一些，但我建议您阅读精彩的文章`` </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令行工具可以比Hadoop集群快235倍''，</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以了解这些命令的真正有用性和强大性以及真正的问题他们可以决定。</font></font><br>
<br>
<a name="17"></a><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下一步是什么</font></font></h1><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">计算位于您的主目录中的文件和目录的数量。</font></font><br>
</li>
<li>     .<br>
</li>
<li>,       .<br>
</li>
<li>    .         .</li>
</ol><br>
<hr><br>
<i>  «        » (Essential Tools and Practices for the Aspiring Software Developer)    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="> </a>            ,     .    ,    ,   ,       ,      <code>git</code>,  SQL,   <code>Make</code>, <code>jq</code>   ,   ,          .<br>
<br>
    ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="> </a>!</i></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN492910/index.html">通过Canny控制器进行步进电机控制</a></li>
<li><a href="../zh-CN492914/index.html">如何保护远程员工或家庭办公室安全</a></li>
<li><a href="../zh-CN492918/index.html">教宗：人工智能和无人驾驶汽车的伦理</a></li>
<li><a href="../zh-CN492920/index.html">捷克共和国的隔离区：内部外观</a></li>
<li><a href="../zh-CN492924/index.html">如何可视化和动画化（地球物理）模型。可视化的信息性</a></li>
<li><a href="../zh-CN492934/index.html">提升语音助手的难度。语言学家和开发人员的外观</a></li>
<li><a href="../zh-CN492938/index.html">测试环境门户，或保存我们的开发</a></li>
<li><a href="../zh-CN492940/index.html">深入了解Charles Proxy</a></li>
<li><a href="../zh-CN492942/index.html">关于远程工作的Ontol（=最有用）[100多篇文章的汇编]</a></li>
<li><a href="../zh-CN492946/index.html">冠状病毒：我们如何欺骗自己</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>