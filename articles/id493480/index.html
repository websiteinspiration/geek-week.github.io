<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏿‍⚕️ 🐈 🗄️ Arsitektur untuk pemula atau mengapa Anda tidak perlu memasukkan bendera ke pedang pria 🤟🏼 🍦 ❎</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Anotasi:
 
 

1. Contoh implementasi fungsi baru di kelas dengan menambahkan "bendera".
2. Efek.
3. Pendekatan alternatif dan perbandingan hasil.
4. B...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Arsitektur untuk pemula atau mengapa Anda tidak perlu memasukkan bendera ke pedang pria</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/493480/"><img src="https://habrastorage.org/webt/9s/96/tv/9s96tvz6feehvgoiz_gmwdoktl8.png"><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anotasi:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contoh implementasi fungsi baru di kelas dengan menambahkan "bendera".</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Efek.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pendekatan alternatif dan perbandingan hasil.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bagaimana menghindari situasi: "Arsitektur berlebihan"?</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Momen ketika saatnya tiba untuk mengubah segalanya.</font></font></li>
</ol></blockquote><br>
<a name="habracut"></a><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sebelum Anda mulai, beberapa catatan:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ini adalah kisah tentang arsitektur perangkat lunak - dalam arti yang digunakan Paman Bob. </font><font style="vertical-align: inherit;">Ya itu.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Semua karakter, nama dan kode mereka dalam artikel itu fiktif, semua kebetulan dengan kenyataan adalah acak.</font></font></li>
</ul></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Misalkan saya adalah seorang programmer-programmer biasa pada suatu proyek. </font><font style="vertical-align: inherit;">Proyek ini adalah permainan di mana seorang Pahlawan tunggal (alias Pahlawan) berjalan di sepanjang garis horizontal sempurna dari kiri ke kanan. </font><font style="vertical-align: inherit;">Monster mengganggu perjalanan yang luar biasa ini. </font><font style="vertical-align: inherit;">Atas perintah pengguna, Pahlawan terkenal memotong mereka </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dengan pedang</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ke dalam kubis dan tidak meledak ke kumis. </font><font style="vertical-align: inherit;">Proyek ini sudah memiliki 100K baris, dan “Anda membutuhkan lebih banyak </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">baris</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> fitur!” </font><font style="vertical-align: inherit;">Mari kita lihat Pahlawan kita:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Hero</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">strike</span><span class="hljs-params">()</span></span> {
        <span class="hljs-comment">//   1</span><font></font>
    }<font></font>
    <span class="hljs-comment">//   </span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Misalkan juga bahwa tim pribadi saya memimpin, Vasily, juga bisa pergi berlibur. </font><font style="vertical-align: inherit;">Mendadak. </font><font style="vertical-align: inherit;">Siapa sangka? </font><font style="vertical-align: inherit;">Lebih jauh, situasi berkembang sebagai standar: seekor Burung Hantu terbang masuk dan sangat dibutuhkan, tepat kemarin, untuk memungkinkan untuk memilih sebelum permulaan permainan: bermain untuk Pahlawan dengan klub atau dengan pedang. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Itu pasti sangat cepat. </font><font style="vertical-align: inherit;">Dan ya, tentu saja, dia sendiri adalah seorang programmer selama lebih dari bertahun-tahun daripada yang bisa saya jalani, jadi dia tahu bahwa tugasnya adalah selama lima menit. </font><font style="vertical-align: inherit;">Tapi biarlah, estimasi selama 2 jam. </font><font style="vertical-align: inherit;">Anda hanya perlu menambahkan kotak centang dan if-chik. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Catatan: if-chik dalam nilai @! ^% $ # @ ^% &amp; @! 11 $ # $% @ ^% &amp;! @ !!! </font><font style="vertical-align: inherit;">di &amp;! ^% # $ ^%! 1 jika-apik! </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pikiranku: “Ha! </font><font style="vertical-align: inherit;">Dua jam! </font><font style="vertical-align: inherit;">Selesai! ":</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Hero</span> </span>{
    <span class="hljs-class"><span class="hljs-keyword">enum</span> <span class="hljs-title">WeaponTypes</span> </span>{
        <span class="hljs-keyword">case</span> sword:
        <span class="hljs-keyword">case</span> club:<font></font>
    }<font></font>
	<font></font>
    <span class="hljs-keyword">var</span> weaponType: <span class="hljs-type">WeaponTypes?</span><font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">strike</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> weaponType = weaponType <span class="hljs-keyword">else</span> {
            <span class="hljs-built_in">assertionFailure</span>()
            <span class="hljs-keyword">return</span>	<font></font>
        }<font></font>
        <span class="hljs-comment">//  : switch  Swift  if- -    !</span>
        <span class="hljs-keyword">switch</span> (weaponType) {
            <span class="hljs-keyword">case</span> .sword: <span class="hljs-comment">//     </span>
            <span class="hljs-keyword">case</span> .club:  <span class="hljs-comment">//     </span><font></font>
        }<font></font>
    }<font></font>
    <span class="hljs-comment">//  </span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika Anda mengetahui dalam keputusan saya, maka, sayang: Saya punya dua berita untuk Anda:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Seolah baik: kami berdua memberikan. </font><font style="vertical-align: inherit;">Kami memberikan - dari kata memberikan nilai atau dari kata lucu (melalui air mata) kode.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dan yang buruk: tanpa Vasily, proyek kapet.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jadi apa yang terjadi? </font><font style="vertical-align: inherit;">Tampaknya sejauh ini tidak ada. </font><font style="vertical-align: inherit;">Tapi mari kita lihat apa yang terjadi selanjutnya (sementara kita melakukan semua yang kita bisa untuk tetap berlibur dengan mudah). </font><font style="vertical-align: inherit;">Dan kemudian akan ada ini: departemen QA akan memperhatikan bobot Pahlawan kita. </font><font style="vertical-align: inherit;">Dan tidak, ini bukan karena Pahlawan harus melakukan diet, tapi inilah alasannya:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">var</span> weight: <span class="hljs-type">Stone</span> {
    <span class="hljs-keyword">return</span> meatbagWeight + pantsWeight + helmetWeight + swordWeight<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya lupa memperbaiki perhitungan berat badan. </font><font style="vertical-align: inherit;">Nah, Anda berpikir, salah, dengan siapa tidak terjadi ?! </font><font style="vertical-align: inherit;">Tamparan, fuck-tibidoch, siap:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">var</span> weight: <span class="hljs-type">Stone</span> {
    <span class="hljs-comment">//   guard let weaponType</span>
    <span class="hljs-keyword">let</span> weightWithoutWeapon = meatbagWeight + pantsWeight + helmetWeight
    <span class="hljs-keyword">switch</span> (weaponType) {
        <span class="hljs-keyword">case</span> .sword: <span class="hljs-keyword">return</span> weightWithoutWeapon + swordWeight
        <span class="hljs-keyword">case</span> .club:  <span class="hljs-keyword">return</span> weightWithoutWeapon + clubWeight<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tapi cepat perbaiki! </font><font style="vertical-align: inherit;">Pahlawan sekarang melompat, dengan mempertimbangkan berat, tetapi. </font><font style="vertical-align: inherit;">Berorientasi pada hasil! </font><font style="vertical-align: inherit;">Ini bukan untuk Anda melihat pusar, astronot arsitektur. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nah, sungguh, lalu dia mengoreksi sedikit lagi. </font><font style="vertical-align: inherit;">Dalam daftar mantra, saya harus melakukan ini:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">var</span> spells: [<span class="hljs-type">Spells</span>] {
    <span class="hljs-comment">//   guard let weaponType </span>
    <span class="hljs-comment">// ,   let spellsWithoutWeapon: [Spells]</span>
    <span class="hljs-keyword">switch</span> (weaponType) {
        <span class="hljs-keyword">case</span> .sword:
            <span class="hljs-comment">//  let swordSpells: [Spells]</span>
            <span class="hljs-keyword">return</span> spellsWithoutWeapon + swordSpells
	<span class="hljs-keyword">case</span> .club:
            <span class="hljs-comment">//  let clubSpells: [Spells]</span>
            <span class="hljs-keyword">return</span> spellsWithoutWeapon + clubSpells<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan kemudian Petya datang dan menghancurkan segalanya. </font><font style="vertical-align: inherit;">Ya, sebenarnya, kita punya proyek Juni. </font><font style="vertical-align: inherit;">Leha. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dia hanya perlu menambahkan konsep "Level Senjata" ke formula untuk menghitung kekuatan pukulan dan bobot Pahlawan. </font><font style="vertical-align: inherit;">Dan Petya melewatkan satu dari empat kasus. </font><font style="vertical-align: inherit;">Tapi tidak ada apa-apa! </font><font style="vertical-align: inherit;">Saya mengoreksi semuanya:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">strike</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">//guard let weaponType</span>
    <span class="hljs-keyword">switch</span> (weaponType) {
        <span class="hljs-keyword">case</span> .sword: <span class="hljs-comment">//        weaponGrade</span>
        <span class="hljs-keyword">case</span> .club:  <span class="hljs-comment">//        weaponGrade</span><font></font>
    }<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">var</span> weight: <span class="hljs-type">Stone</span> {
    <span class="hljs-comment">// guard let weaponType</span>
    <span class="hljs-keyword">let</span> weightWithoutWeapon = meatbagWeight + pantsWeight + helmetWeight
    <span class="hljs-keyword">switch</span> (weaponType) {
        <span class="hljs-keyword">case</span> .sword: <span class="hljs-keyword">return</span> weightWithoutWeapon + swordWeight / grade
	<span class="hljs-keyword">case</span> .club:  <span class="hljs-keyword">return</span> weightWithoutWeapon + pow(clubWeight, <span class="hljs-number">1</span> / grade)<font></font>
    }<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">var</span> spells: [<span class="hljs-type">Spells</span>] {
    <span class="hljs-comment">//     , ! </span>
    <span class="hljs-comment">// ,     .    ,    ,   .   !</span>
}</code></pre><br>
<img src="https://habrastorage.org/webt/aw/ev/fo/awevfo6jjlysv_8l9wq-dl9npkw.png" height="80" width="80" align="right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tak perlu dikatakan, ketika (tiba-tiba!) Itu perlu untuk menambahkan busur / perbarui formula, lagi ada kasus lupa, bug dan itu saja. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apa yang salah? </font><font style="vertical-align: inherit;">Di mana saya salah, dan apa (kecuali teman) yang dengan mudah dikatakan ketika dia kembali dari liburan? </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Di sini Anda tidak dapat membaca cerita lebih lanjut, tetapi, misalnya, pikirkan tentang yang abadi, tentang arsitektur. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan dengan mereka yang masih memutuskan untuk membaca, kami melanjutkan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jadi, mari kita lihat klasik:</font></font><blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Optimalisasi prematur adalah akar dari semua kejahatan!</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dan ... eh ... bukan itu. </font><font style="vertical-align: inherit;">Begini masalahnya: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam bahasa OOP (seperti Swift, misalnya), ada tiga cara utama untuk memperluas kemampuan kelas:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cara pertama adalah "naif". </font><font style="vertical-align: inherit;">Kami baru saja melihatnya. </font><font style="vertical-align: inherit;">Menambahkan kotak centang. </font><font style="vertical-align: inherit;">Menambah Tanggung Jawab. </font><font style="vertical-align: inherit;">Kelas pembengkakan.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cara kedua adalah pewarisan. </font><font style="vertical-align: inherit;">Semua orang tahu mekanisme yang kuat untuk menggunakan kembali kode. </font><font style="vertical-align: inherit;">Seseorang dapat, misalnya:</font></font><br>
 <ul>
<li><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Untuk mewarisi Pahlawan baru dengan Busur dan Pahlawan dari Dubina dari Pahlawan (yang memegang pedang, tapi ini tidak tercermin dalam nama kelas Pahlawan sekarang). </font><font style="vertical-align: inherit;">Dan kemudian di ahli waris, timpa metode yang diubah. </font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jalan ini sangat buruk (percayalah padaku).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jadikan kelas dasar (atau protokol) sebagai Pahlawan, dan hapus semua fitur yang terkait dengan jenis senjata tertentu sebagai ahli waris </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
: Pahlawan dengan </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
pedang: Pahlawan, </font><font style="vertical-align: inherit;">Pahlawan dengan </font><font style="vertical-align: inherit;">busur: Pahlawan, Pahlawan dengan </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dubina: Pahlawan. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ini lebih baik, tetapi nama-nama kelas ini sendiri memandang kami entah bagaimana tidak senang, sengit dan pada saat yang sama sedih dan bingung. </font><font style="vertical-align: inherit;">Jika mereka tidak melihat seseorang seperti itu, maka saya akan mencoba untuk menulis artikel lain, di mana selain Pahlawan maskulin yang membosankan mereka akan ...</font></font><img src="https://habrastorage.org/webt/7i/7w/l7/7i7wl7kxg1ol1mmtplsfv-h7i4w.png" height="80" width="80"></li>
</ul></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cara ketiga adalah pemisahan tanggung jawab melalui suntikan ketergantungan. </font><font style="vertical-align: inherit;">Itu bisa berupa ketergantungan yang ditutup oleh protokol atau penutupan (seolah-olah ditutup oleh tanda tangan), apa pun. </font><font style="vertical-align: inherit;">Yang utama adalah bahwa pelaksanaan tanggung jawab baru harus meninggalkan kelas utama.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bagaimana ini terlihat dalam kasus kami? </font><font style="vertical-align: inherit;">Misalnya, seperti ini (keputusan dari Vasily):</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Hero</span> </span>{
    <span class="hljs-keyword">let</span> weapon: <span class="hljs-type">Weapon</span> <span class="hljs-comment">//   , ..    </span><font></font>
<font></font>
    <span class="hljs-keyword">init</span> (<span class="hljs-number">_</span> weapon: <span class="hljs-type">Weapon</span>) { <span class="hljs-comment">//     </span>
        <span class="hljs-keyword">self</span>.weapon = weapon<font></font>
    }<font></font>
	<font></font>
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">strike</span><span class="hljs-params">()</span></span> {<font></font>
        weapon.strike()<font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">var</span> weight: <span class="hljs-type">Stone</span> {
        <span class="hljs-keyword">return</span> meatbagWeight + pantsWeight + helmetWeight + weapon.weight<font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">var</span> spells: [<span class="hljs-type">Spells</span>] {
        <span class="hljs-comment">//   </span>
        <span class="hljs-keyword">return</span> spellsWithoutWeapon + weapon.spells<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apa yang Anda butuhkan? </font><font style="vertical-align: inherit;">Ninjutsu - protokol:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">protocol</span> <span class="hljs-title">Weapon</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">strike</span><span class="hljs-params">()</span></span>
    <span class="hljs-keyword">var</span> weight: <span class="hljs-type">Stone</span> {<span class="hljs-keyword">get</span>}
    <span class="hljs-keyword">var</span> spells: [<span class="hljs-type">Spells</span>] {<span class="hljs-keyword">get</span>}<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Contoh implementasi protokol:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Sword</span>: <span class="hljs-title">Weapon</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">strike</span><span class="hljs-params">()</span></span> {
        <span class="hljs-comment">// ,     Hero  switch   .sword</span><font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">var</span> weight: <span class="hljs-type">Stone</span> {
        <span class="hljs-comment">// ,     Hero  switch   .sword</span><font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">var</span> spells: [<span class="hljs-type">Spells</span>] {
        <span class="hljs-comment">// ,     Hero  switch   .sword</span><font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Demikian pula, kelas Sword ditulis untuk: Club, Bow, Pike, dll. </font><font style="vertical-align: inherit;">"Sangat mudah untuk melihat" (c) bahwa dalam arsitektur baru semua kode yang berlaku untuk setiap jenis senjata tertentu dikelompokkan dalam kelas yang sesuai, dan tidak menyebar menurut Pahlawan bersama dengan jenis senjata lainnya. </font><font style="vertical-align: inherit;">Ini membuatnya lebih mudah untuk membaca dan memahami Hero dan senjata tertentu. </font><font style="vertical-align: inherit;">Plus, karena persyaratan protokol yang diberlakukan, jauh lebih mudah untuk melacak semua metode yang perlu diimplementasikan ketika menambahkan senjata jenis baru atau ketika menambahkan fitur baru ke senjata (misalnya, senjata mungkin memiliki metode perhitungan harga). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di sini Anda dapat melihat bahwa injeksi ketergantungan telah mempersulit pembuatan objek kelas Pahlawan. </font><font style="vertical-align: inherit;">Apa yang biasanya dilakukan sebagai:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">let</span> lastHero = <span class="hljs-type">Hero</span>()</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang telah berubah menjadi seperangkat instruksi yang akan digandakan di mana pun diperlukan untuk membuat Pahlawan. </font><font style="vertical-align: inherit;">Namun, Vasily menangani ini:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HeroFactory</span> </span>{
    <span class="hljs-keyword">static</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">makeSwordsman</span><span class="hljs-params">()</span></span> -&gt; <span class="hljs-type">Hero</span> { <span class="hljs-comment">// ,  static -  </span>
        <span class="hljs-keyword">let</span> weapon = <span class="hljs-type">Sword</span>(<span class="hljs-comment">/*  */</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-type">Hero</span>(weapon)<font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">static</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">makeClubman</span><span class="hljs-params">()</span></span> -&gt; <span class="hljs-type">Hero</span> {
        <span class="hljs-keyword">let</span> weapon = <span class="hljs-type">Club</span>(<span class="hljs-comment">/*  */</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-type">Hero</span>(weapon)<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jelas bahwa Vasily harus berkeringat untuk menyebarkan tumpukan yang </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ditumpuk</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dirancang oleh Petya (dan saya). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tentu saja, melihat solusi terakhir, pemikiran berikut mungkin muncul:</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ok, ternyata, norma. </font><font style="vertical-align: inherit;">Memang nyaman untuk membaca dan memperluas, tetapi apakah semua pabrik / protokol / dependensi ini merupakan kumpulan biaya tambahan? </font><font style="vertical-align: inherit;">Kode yang tidak memberikan apa pun dalam hal fitur, tetapi hanya ada untuk mengatur kode. </font><font style="vertical-align: inherit;">"Kode untuk mengatur kode", mgm. </font><font style="vertical-align: inherit;">Apakah benar-benar perlu memagari taman ini selalu dan di mana-mana?</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jawaban jujur ​​atas pertanyaan pertama adalah:</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ya, ini merupakan biaya tambahan untuk fitur yang sangat disukai bisnis. </font></font><br>
</blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dan untuk pertanyaan "kapan?" </font><font style="vertical-align: inherit;">bagian jawaban:</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Filosofi manusia pedang atau "kapan Anda harus memerintah?"</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pada awalnya adalah seorang pria pedang. </font><font style="vertical-align: inherit;">Dalam arti sistem kode lama, ini cukup normal. </font><font style="vertical-align: inherit;">Selama ada satu Pahlawan dan satu senjata, tidak perlu membedakan antara mereka - semua sama, tidak ada yang lain untuk pahlawan. </font><font style="vertical-align: inherit;">Dan kode monolitik mengkonfirmasi fakta ini dengan teksnya. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pendekar pedang - itu bahkan tidak terdengar begitu buruk. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan apa yang dilakukan oleh suntingan "naif" pertama? </font><font style="vertical-align: inherit;">Apa yang menyebabkan penambahan if-chik? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Menambahkan if-chic menyebabkan ... mutan! </font><font style="vertical-align: inherit;">Mutant, mis. </font><font style="vertical-align: inherit;">objek bisa berubah yang dapat bermutasi antara "manusia" dan "manusia Dubin". </font><font style="vertical-align: inherit;">Pada saat yang sama, jika Anda membuat sedikit kesalahan dalam implementasi mutan, maka keadaan "manusia-medullin" muncul. </font><font style="vertical-align: inherit;">Jangan lakukan seperti ini! </font><font style="vertical-align: inherit;">Tidak perlu untuk "manusia dubin" sama sekali. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Itu perlu:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Man + kecanduan pada pedang (kebutuhan akan pedang);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Man + kecanduan klub (perlu klub).</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tidak setiap kecanduan itu jahat! </font><font style="vertical-align: inherit;">Kecanduan alkohol ini jahat, dan </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">protokolnya</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> bagus. </font><font style="vertical-align: inherit;">Ya, bahkan ketergantungan pada objek lebih baik daripada "manusia dubin"! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kapan mutasi terjadi? </font><font style="vertical-align: inherit;">Transformasi menjadi mutan terjadi ketika bendera ditambahkan: kode monolitik tetap monolitik, tetapi ketika bendera diubah (bermutasi), perilaku objek yang sama mulai berubah secara signifikan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dengan mudah akan memilih dua tahap mutasi:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Menambahkan bendera dan "jika" pertama (atau "beralih", atau mekanisme percabangan lainnya) ke bendera. </font><font style="vertical-align: inherit;">Situasinya mengancam, tetapi dapat ditahan: pahlawan dituang dengan limbah radioaktif, tetapi ia mengatasinya.</font></font></li>
<li>     «if»   ,     . .    —   . ,    -  - .</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dengan demikian, dalam situasi yang dipertimbangkan, untuk mencegah terjadinya hutang teknis, masuk akal untuk membangun arsitektur sebelum melewati tahap pertama, dalam kasus terburuk, ke yang kedua. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apa sebenarnya yang dilakukan Vasily untuk mengobati mutan? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dari sudut pandang teknis - digunakan protokol tertutup ketergantungan injeksi. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dari filosofis - tanggung jawab bersama. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Semua fitur karya kelas, yang dapat dipertukarkan satu sama lain (yang berarti mereka adalah alternatif satu sama lain), telah dihapus dari Hero tergantung. </font><b><font style="vertical-align: inherit;">Fungsionalitas </font></b><b><i><font style="vertical-align: inherit;">alternatif yang</font></i></b></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> baru </font><font style="vertical-align: inherit;">- implementasi pekerjaan pedang, implementasi pekerjaan klub - pada penampilannya menjadi berbeda satu sama lain dan </font><i><font style="vertical-align: inherit;">berbeda</font></i><font style="vertical-align: inherit;"> dari yang lain seperti sebelumnya</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tidak ada</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> kode Pahlawan </font><i><font style="vertical-align: inherit;">alternatif</font></i><font style="vertical-align: inherit;"> . </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jadi sudah ada dalam kode "naif"</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sesuatu yang</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> baru</font><font style="vertical-align: inherit;">muncul</font><i><font style="vertical-align: inherit;"> yang</font></i><font style="vertical-align: inherit;"> berbeda dalam perilaku alternatifnya dari bagian yang tidak diperdebatkan dari Pahlawan. </font><font style="vertical-align: inherit;">Jadi dalam kode "naif" muncul deskripsi implisit</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> entitas bisnis</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> baru</font><font style="vertical-align: inherit;">: pedang dan klub</font><font style="vertical-align: inherit;">, tersebar menurut Pahlawan</font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Untuk membuatnya nyaman untuk beroperasi dengan</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> entitas bisnis</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> baru</font><font style="vertical-align: inherit;">, menjadi perlu untuk membedakan mereka sebagai</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> entitas kode yang</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> terpisah</font><font style="vertical-align: inherit;">dengan</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nama</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mereka sendiri</font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Jadi ada pembagian tanggung jawab. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PS TL; DR;</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lihat benderanya?</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jadilah pria, sial! </font><font style="vertical-align: inherit;">Hapus itu!</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Injeksi kecanduan</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">...</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Keuntungan! 11</font></font></li>
</ol></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id493458/index.html">Bebaskan Android Anda - Alaverdi</a></li>
<li><a href="../id493462/index.html">Mandi ultrasonik. Bagian 2</a></li>
<li><a href="../id493468/index.html">Jangan takut bernafas dalam-dalam</a></li>
<li><a href="../id493470/index.html">Ilmuwan Menemukan Planet Kecil Baru Di Luar Neptunus</a></li>
<li><a href="../id493478/index.html">Hack The Box - Walkthrough Forest. Serangan Roasting AS-REP, DCSync dan Pass-The-Hash</a></li>
<li><a href="../id493482/index.html">Temui kura-kura cybernetic, pendahulu Roomba</a></li>
<li><a href="../id493484/index.html">C # Anda sudah "berfungsi", biarkan saja.</a></li>
<li><a href="../id493486/index.html">Startup otomotif paling menarik 2019-2020</a></li>
<li><a href="../id493488/index.html">Unity + git = friendship: part 1 set gentleman</a></li>
<li><a href="../id493496/index.html">ReactJS. Peringatan: Tidak dapat melakukan pembaruan status React pada komponen yang dilepas. Ini adalah no-op, tetapi ini menunjukkan memo</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>