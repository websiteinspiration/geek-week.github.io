<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤜 🤷🏻 🤞🏿 Des milliers de TODO oubliés dans le code Kubernetes 🚤 🤹🏽 🎅</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="La photo de Yancy Min à Unsplash 
 
 Kubernetes est un gros projet. Non seulement parce qu'il est très demandé , mais aussi du point de vue du code so...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Des milliers de TODO oubliés dans le code Kubernetes</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/486304/"><img src="https://habrastorage.org/webt/9i/vd/zs/9ivdzsopt74drqrndu7ahfmtk-m.png"><br>
<i><font color="gray"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La photo de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Yancy Min</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> à </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unsplash</font></font></a></font></i> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Kubernetes est un gros projet. Non seulement parce qu'il est</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> très demandé</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , mais aussi du point de vue du code source. Au moment d'écrire ces lignes, il y avait plus de 86 000 commits, plus de 2 000 participants, plus de 2 000 tickets ouverts, plus de 1 000 demandes de pool ouvert et 62 800 étoiles dans le</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> référentiel sur GitHub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'utilitaire</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> scc</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> comptait plus de 4,3 millions de lignes de code sur Go (plus de 5,2 millions de lignes), dont plus de 3 millions de lignes de code réel et plus de 700 000 lignes de commentaires, un total de plus de 16 000 fichiers,</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dont un répertoire</font></font><code>vendor/</code></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons récemment développé un </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">outil</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> qui </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://todos.tickgit.com/browse%3Frepo%3D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">traite les commentaires TODO</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dans une base de code pour aider à soutenir des projets aussi importants. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons décidé de placer notre petit analyseur sur les sources Kubernetes - et de voir ce qui se passe. </font><font style="vertical-align: inherit;">Voici quelques résultats. </font></font><br>
<br>
<code>tickgit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">traité le code source de la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">validation 9bf52c2</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">La sortie au format CSV a ensuite été importée dans SQLite pour le traitement des requêtes. </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Notez que l'outil ne trouve TODO que dans l'arborescence extraite. </font><font style="vertical-align: inherit;">Il ne prend pas en compte les commentaires qui ont été ajoutés puis supprimés. </font><font style="vertical-align: inherit;">Ainsi, les chiffres ne reflètent que les TODO qui «vivent» encore dans le code au moment de cet engagement.</font></font></i><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Total (pour </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9bf52c2</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font></h4><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2380 TODO dans 1230 fichiers de 363 auteurs</font></font><br>
</li>
<li>460 TODO   , , <code>// TODO (patrickdevivo) Fix the ...</code> <br>
</li>
<li>489 TODO   2019 <br>
</li>
<li>  TODO — 860  ( 2,3 )<br>
</li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">  TODO</a> —  6  2014  ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">« »</a>)<br>
</li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> TODO</a>  9  2019  (   )<br>
</li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> </a>   TODO: 33<br>
</li>
<li>deads2k    TODO (git blame): 147<br>
</li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> </a>    TODO,      : 64</li>
</ul><br>
<h1></h1><br>
<h4>    TODO</h4><br>
<pre>33	cluster/gce/util.sh<font></font>
25	pkg/apis/core/types.go<font></font>
23	staging/src/k8s.io/api/core/v1/types.go<font></font>
21	staging/src/k8s.io/legacy-cloud-providers/aws/aws.go<font></font>
20	staging/src/k8s.io/code-generator/cmd/conversion-gen/generators/conversion.go<font></font>
20	pkg/apis/core/validation/validation.go<font></font>
16	test/e2e/network/service.go<font></font>
16	pkg/kubelet/kubelet.go<font></font>
14	test/e2e/framework/util.go<font></font>
14	pkg/kubelet/kubelet_pods.go</pre><br>
<br>
<h4>    TODO</h4><br>
<pre>deads2k				147<font></font>
Clayton Coleman			105<font></font>
Chao Xu				99<font></font>
Dr. Stefan Schimanski		93<font></font>
Jordan Liggitt			81<font></font>
David Eads			60<font></font>
Random-Liu			54<font></font>
Wojciech Tyczynski		50<font></font>
Yu-Ju Hong			43<font></font>
Prashanth Balasubramanian	38</pre><br>
<br>
<h4>,     TODO (  TODO   )</h4><br>
<pre>64	6a4d5cd7cc58e28c20ca133dab7b0e9e56192fe3<font></font>
19	e01ff1641c7321ac81fe5775f6ccb21aa6775c04<font></font>
19	4fb28dafad121e163fa86dc90067ce3d14415811<font></font>
18	adb75e1fd17b11e6a0256a4984ef9b18957d94ce<font></font>
14	963c85e1c807efcdbb82dd44439dc3c55f6a0bfd<font></font>
14	8b17db7e0c4431cd5fd9a5d9a3ab11b04e2f0a7e<font></font>
13	f0f78299348afcf770d4e8d89dcea82f80811b28<font></font>
11	d0b94538b9744d0c06df6ddec2604be168568f9d<font></font>
10	f1248b9c829e225138ab6d6234221c63092f7592<font></font>
10	cd663d7ad00937cffa8a09e4761acb95d34c89a3</pre><br>
<br>
<h4>  TODO  </h4> <br>
<pre>34	2014<font></font>
249	2015<font></font>
523	2016<font></font>
650	2017<font></font>
435	2018<font></font>
489	2019</pre><br>
<br>
<i>  ,    TODO <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> </a>: <code>tickgit todos --csv-output</code>.       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">SQLite</a>.</i><br>
<br>
<h1>  </h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ceci est un aperçu assez rapide des commentaires TODO dans le code source de Kubernetes. Nous voyons les «directeurs de tâches» les plus actifs, qui coïncident plus ou moins avec les principaux </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">contributeurs du</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> projet. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous voyons également que l'attitude envers les commentaires TODO n'est pas différente de la norme, juste en raison de la grande taille de la base de code, il y en a aussi beaucoup. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une observation importante est qu'il y a </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">plus de commentaires TODO que de tickets Github</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (problèmes). C'est intéressant car cela indique un nombre important de tâches "cachées" qui ne sont pas immédiatement visibles sur GitHub, mais qui sont écrites dans le code source.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Probablement, les principaux contributeurs connaissent bien leur domaine de la base de code et présentent clairement le nombre de leurs propres TODO et «travaux cachés». Mais cela n'est pas toujours perceptible par les observateurs externes. Ils sont plus familiers et compréhensibles pour voir des billets sur GitHub (ou dans d'autres trackers publics).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La plupart des développeurs comprennent que les projets logiciels «vivent et respirent». </font><font style="vertical-align: inherit;">Des changements fréquents, un processus d'amélioration, des corrections de bugs et de nombreuses discussions ont lieu. </font><font style="vertical-align: inherit;">Il est très important de bien organiser le flux de travail, car un bon code nécessite une réflexion constante. </font><font style="vertical-align: inherit;">En partie, nous voyons cela en action à travers les commentaires TODO dans les sources Kubernetes. </font><font style="vertical-align: inherit;">Bien que nous n'ayons rien à comparer, l'âge moyen des tâches de 2,3 ans semble plutôt élevé. </font><font style="vertical-align: inherit;">Les développeurs proches du projet peuvent évaluer plus objectivement cet indicateur. </font><font style="vertical-align: inherit;">Il est intéressant de le comparer avec d'autres grands projets open source. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une analyse plus approfondie inclurait </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tous les</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> TODO de l'histoire, et pas seulement ceux qui restent à l'heure actuelle. </font><font style="vertical-align: inherit;">Vous pouvez considérer les problèmes suivants:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">À quelle vitesse les TODO ferment-ils?</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quelle est la durée de vie moyenne d'un commentaire TODO?</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">À quoi ressemblent les bases de code populaires en comparaison?</font></font></li>
</ul><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quelle est son importance?</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les commentaires TODO couvrent généralement un type de travail qui est trop petit pour un ticket, mais suffisamment important pour être noté et décrit dans un commentaire (bien que beaucoup se réfèrent à des tickets / problème). </font><font style="vertical-align: inherit;">Parce que les commentaires font partie du code, ils sont souvent «plus proches» du travail à faire. </font><font style="vertical-align: inherit;">Ils sont faciles à ajouter, mais il semble tout aussi facile à oublier (les sources Kubernetes ont encore plus de 1800 TODO ajoutés avant 2019). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous espérons que notre </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">outil</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> d'analyse des métadonnées dans le code aidera les développeurs à servir des projets de toute taille. </font><font style="vertical-align: inherit;">Faire remonter les commentaires TODO à la surface n'est qu'une partie de ce qui doit être fait.</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr486304/">https://habr.com/ru/post/fr486304/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr486274/index.html">Après que le marché a réagi au conflit entre l'Iran et les États-Unis, le Bitcoin est-il considéré comme un atout sûr?</a></li>
<li><a href="../fr486278/index.html">Matériaux de Kafka mitap: connecteurs СDC, problèmes de croissance, Kubernetes</a></li>
<li><a href="../fr486288/index.html">Surveillance d'Apache Ignite. Bien fait</a></li>
<li><a href="../fr486298/index.html">Régime cétogène: du traitement de l'épilepsie à une mode malsaine</a></li>
<li><a href="../fr486302/index.html">NSIS: problème avec $ 0- $ 9, $ R0- $ R9</a></li>
<li><a href="../fr486306/index.html">Sommaire de la gestion des produits pour décembre et janvier</a></li>
<li><a href="../fr486310/index.html">Comment obtenir un thermoélectrique 7 fois plus rapide</a></li>
<li><a href="../fr486314/index.html">[Atelier] Les attaques DMA en pratique. Exploiter par un accès direct à la mémoire</a></li>
<li><a href="../fr486318/index.html">Comment gagner de l'argent grâce à la reconnaissance des émotions</a></li>
<li><a href="../fr486320/index.html">Meetup Domain Driven Design à Raiffeisenbank: Diffusion + Présentations</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>