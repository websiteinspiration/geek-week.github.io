<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>✊🏼 👩🏼‍🔬 🌎 Wir beschäftigen uns mit dem Wellenfunktionskollapsalgorithmus 🕴🏼 🙆🏽 🥧</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Seit dem Aufkommen von DeBroglie und Tessera wurde ich oft gebeten, zu erklären, wie sie funktionieren. Generieren mag wie Magie aussehen, aber die Re...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Wir beschäftigen uns mit dem Wellenfunktionskollapsalgorithmus</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/497590/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/0p/3h/m9/0p3hm9jziz_gbzi9tajbo2p_s3a.jpeg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seit dem Aufkommen von </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DeBroglie</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tessera wurde</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ich oft gebeten, zu erklären, wie sie funktionieren. </font><font style="vertical-align: inherit;">Generieren mag wie Magie aussehen, aber die Regeln dahinter sind eigentlich einfach.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Was ist der WFC-Algorithmus (Wave Function Collapse)? </font><font style="vertical-align: inherit;">Es wurde von </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Maxim Gumin entwickelt</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , um "gekachelte" Bilder basierend auf einer einfachen Konfiguration oder </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">Bildbeispielen</font></a><font style="vertical-align: inherit;"> zu erstellen. </font><font style="vertical-align: inherit;">Der Algorithmus kann viel: Schauen Sie sich die Beispiele von Maxim und Twitter </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">#wavefunctioncollapse an</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und sehen Sie sich </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dieses Video an</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Die Vielfalt ist unglaublich.</font></font><br>
<br>
<div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ihr Browser unterstützt kein HTML5-Video.</font></font><source src="https://www.boristhebrave.com/wp-content/uploads/2020/04/platformer.webm" type="video/webm"></video></div></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maxim in README hat die Arbeit von WFC kurz erläutert, aber es scheint mir, dass dieses Problem von Grund auf eine detailliertere Offenlegung erfordert. Da sich der Algorithmus auf das </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Programmieren in Einschränkungen</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> bezieht, </font><font style="vertical-align: inherit;">widmet sich </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">der</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> größte Teil des Artikels der </font><strong><font style="vertical-align: inherit;">Erläuterung des Konzepts des Programmierens in Einschränkungen, und am Ende kehren wir zu WFC zurück</font></strong><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eingeschränkte Programmierung ist eine Möglichkeit, Computer anzuweisen. Im Gegensatz zur imperativen Programmierung, wenn Sie eine Liste expliziter Funktionen angeben, oder der funktionalen Programmierung, wenn Sie mathematische Funktionen angeben, geben Sie dem Computer hier eine strenge Beschreibung des Problems und verwenden die integrierten Algorithmen, um eine Lösung zu finden. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hinweis:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dieses Handbuch beschreibt verschiedene Konzepte, nicht Methoden und Code. </font><font style="vertical-align: inherit;">Wenn Sie mehr an der Implementierung interessiert sind, können Sie meine WFC-OpenSource-Bibliothek ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Github</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dokumentation</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) verwenden. </font><font style="vertical-align: inherit;">Obwohl es besser ist, mit der </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Implementierung von Maxim</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> zu lernen </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Wenn Sie Unity verwenden, können Sie </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tessera</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> kaufen </font><font style="vertical-align: inherit;">. Dies ist mein Tool zum Anwenden von WFC in dieser Engine.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mini Sudoku</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zur Veranschaulichung nahm ich ein Mini- </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sudoku</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Dies ist ein Puzzle, das wie ein 4 × 4-Raster mit Zahlen in einigen Zellen aussieht.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2d2/079/ce5/2d2079ce585502dbe9329e0a34cfbed8.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ziel ist es, jede leere Zelle gemäß den Regeln mit einer Zahl von 1 bis 4 zu füllen:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jede Zahl von 1 bis 4 muss in jeder Zeile in einer einzigen Kopie vorhanden sein.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jede Zahl von 1 bis 4 muss in jeder Spalte in einer einzigen Kopie vorhanden sein.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jede Zahl von 1 bis 4 muss in einer einzelnen Kopie in jedem 2 × 2-Eckquadrat vorhanden sein. </font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nach diesen Regeln lautet die Lösung wie folgt:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d9e/ebf/927/d9eebf92740912d10aaaf6e63db189f3.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Möglicherweise haben Sie dieses Rätsel leicht gelöst. </font><font style="vertical-align: inherit;">Wir sind jedoch daran interessiert, wie ein Computer dies tun kann. </font><font style="vertical-align: inherit;">Das Problem kann in zwei Teile unterteilt werden: eine Beschreibung der Bedingungen für den Computer und anschließend eine Lösung mithilfe des Algorithmus.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Beschreibung der Bedingungen</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In der Regel wird hierfür eine Programmiersprache mit Einschränkungen verwendet. Es gibt mehrere solcher Sprachen, und ihre Wirkprinzipien sind ähnlich. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zuerst definieren wir die </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Variablen</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Hier sind sie nicht die gleichen wie bei der herkömmlichen Programmierung. Im Kontext eines Problemlösers ist eine Variable ein unbekannter Wert, der gelöst werden muss, um ein Problem zu lösen. In unserem Sudoku-Beispiel erstellen wir Variablen für alle leeren Zellen. Zur Vereinfachung können Sie auch Variablen für gefüllte Zellen erstellen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dann definieren wir für jede Variable eine </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Domäne</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : eine Reihe möglicher Werte. In unserem Sudoku ist die Domäne für jede leere Zelle {1, 2, 3, 4}. Und für eine Zelle, in die 1 bereits eingegeben wurde, ist die Domäne {1}. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Schließlich legen wir die </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Einschränkungen fest</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: Regeln, die unsere Variablen binden. </font><font style="vertical-align: inherit;">In den meisten Programmiersprachen gibt es bereits eine Funktion mit Einschränkungen </font></font><code>all_distinct(..)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, die eindeutige Werte übergeben muss. </font><font style="vertical-align: inherit;">So können Sudoku-Regeln in 12 Einschränkungen übersetzt werden </font></font><code>all_distinct</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- eine für jede Zeile und Spalte sowie für 2 × 2 Eckquadrate. </font><font style="vertical-align: inherit;">Wir benötigen nur eine Art von Einschränkung, um dieses Problem zu lösen. Problemlöser zur Erfüllung der Einschränkungen werden jedoch normalerweise mit einer großen Bibliothek verschiedener Arten von Einschränkungen geliefert, um Ihr Problem zu beschreiben. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hinweis</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : In der Praxis unterstützen Programmiersprachen Arrays in Einschränkungen, sodass es genauere Möglichkeiten gibt, diese Aufgabe zu formulieren. </font><font style="vertical-align: inherit;">Es gibt viele Artikel im Internet über das Lösen von Sudoku.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Algorithmen zur Lösung von Problemen mit der Einschränkungszufriedenheit</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gibt verschiedene Lösungstechniken. </font><font style="vertical-align: inherit;">Aber ich werde die einfachste von ihnen in Betracht ziehen, um Ihnen das Prinzip ihrer Arbeit zu demonstrieren. </font><font style="vertical-align: inherit;">Domänen für jede Zelle werden hier angezeigt:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/192/dd5/6d7/192dd56d7c6fad65e9d0ff0cd672b8b8.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dies sind alles mögliche Werte in variablen Domänen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nehmen Sie nun die erste Einschränkung. </font><font style="vertical-align: inherit;">Es erfordert, dass alle Werte in der oberen Zeile eindeutig sind. </font><font style="vertical-align: inherit;">In einer Zelle ist der Wert 4 bereits eingeschrieben, daher kann dieser Wert in anderen Zellen der Reihe </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nicht sein</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Wir entfernen es aus den Domänen dieser Zellen.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ea5/f37/ab8/ea5f37ab81c6fe4e923999a01d9c5b81.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wiederholen Sie diesen Vorgang mit allen 12 Einschränkungen. </font><font style="vertical-align: inherit;">Dies wird als </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Weitergabe von Einschränkungen bezeichnet</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , da Informationen durch Einschränkungen von einer Variablen auf eine andere verteilt werden.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c06/08e/1fa/c0608e1fa9d933b28269217ae9678831.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und schauen Sie, wir haben Variablen, in deren Domänen noch ein Wert übrig ist. </font><font style="vertical-align: inherit;">Dies </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sollten</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> die richtigen Lösungen für diese Variablen sein.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/02e/074/d2c/02e074d2cdcde1220efade75f26d7234.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es scheint, dass wir noch mehr von der Verteilung der Beschränkungen profitieren können: Die neuen roten Einheiten zeigen an, dass wir mit einer einzelnen Domäne noch mehr Variablen haben werden, und dies wird auch zur Verteilung beitragen. </font><font style="vertical-align: inherit;">Wiederholen Sie den Vorgang, bis das Rätsel gelöst ist.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f78/94d/b63/f7894db63f3238fab4cf689941bd9d69.png"></div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir erschweren die Aufgabe</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Leider können nicht alle logischen Rätsel so schnell gelöst werden. </font><font style="vertical-align: inherit;">Hier ist ein großes Sudoku, es funktioniert genauso, außer dass wir jetzt 9 verschiedene Werte, 9 Zeilen, 9 Spalten und 9 3 × 3 Quadrate haben.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fd2/97d/434/fd297d4345a2593633a88bbf0bf26764.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn wir versuchen, die oben genannte Technik anzuwenden, bleiben wir stecken:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/481/f68/a82/481f68a826b65b43441ddae08821f1ba.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt sind alle Einschränkungen gleich, aber es gibt immer noch undefinierte Variablen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eine Person wird dies entscheiden, aber ein Computeralgorithmus wird dies nicht können. Die Handbücher für Menschen sagen, dass wir jetzt nach immer komplizierteren logischen Schlussfolgerungen suchen müssen. Dafür benötigen wir jedoch keinen Computeralgorithmus, da dies schwierig ist. Wir benötigen jedoch einen </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">universellen</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Algorithmus, der mit allen Einschränkungen und nicht nur nach Sudoku-Regeln arbeiten kann. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Daher machen Computer das Dümmste: </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sie nehmen an</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Zuerst zeichnen wir den aktuellen Status des Puzzles auf. Dann wählen wir eine beliebige Variable aus und setzen sie auf einen der möglichen Werte. Angenommen, wir weisen der zentralen Zelle den Wert 1 zu.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt können wir die Einschränkungen etwas weiter verbreiten. </font><font style="vertical-align: inherit;">Folgendes habe ich für die mittlere Spalte erhalten:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f8b/176/f83/f8b176f83864aad8a4907714b7d0b790.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die blauen Werte sind die Schlussfolgerungen, die wir nach der Annahme gezogen haben. </font><font style="vertical-align: inherit;">Wie Sie sehen können, ist etwas passiert. </font><font style="vertical-align: inherit;">Wir schreiben noch ein paar Variablen auf, schauen uns aber die mittlere obere Zelle an. </font><font style="vertical-align: inherit;">Es ist leer: </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In seiner Domäne gibt es keine möglichen Werte,</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> die die Einschränkungen erfüllen (es kann keine 5 geben, da dieser Wert bereits im selben 3 × 3-Quadrat vorhanden ist und alle anderen Zahlen bereits in dieser Spalte enthalten sind). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn wir eine Variable mit einer leeren Domäne erhalten, bedeutet dies, dass wir ihr keinen Wert zuweisen können. </font><font style="vertical-align: inherit;">Das heißt, das Rätsel kann nicht gelöst werden. </font><font style="vertical-align: inherit;">Es stellt sich heraus, dass </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">unsere Annahme falsch war</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Angesichts eines solchen Widerspruchs führen wir den </font><strong><font style="vertical-align: inherit;">Rückgabesuchprozess</font></strong><font style="vertical-align: inherit;"> durch</font></font><strong><font style="vertical-align: inherit;"></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(Rückverfolgung). Zuerst stellen wir den Zustand wieder her, der vor unserer Annahme war. Dann entfernen wir den Wert, den wir als Annahme verwendet haben, aus der Domäne - es kann nicht mehr die richtige Antwort sein.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b1f/6b5/684/b1f6b5684064aab0ed2c355774b3d7aa.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es wurde viel Arbeit geleistet, aber sie sind vorwärts gegangen. Selbst nach dem Ausschluss von 1 aus der zentralen Zelle befinden wir uns jedoch immer noch in einem toten Punkt. Es ist Zeit, immer wieder und immer wieder davon auszugehen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier gibt es nicht viele algorithmische Aktionen. Jedes Mal, wenn wir keine Beschränkungen verteilen können, gehen wir davon aus und fahren fort. Und da Sie mehrmals stecken bleiben können, bevor Sie auf einen Widerspruch stoßen, werden Sie mehrere gespeicherte Zustände und Annahmen ansammeln. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bei jeder Iteration mit einer Rückgabe reduzieren Sie die Domäne um mindestens eine Variable, sodass der Algorithmus trotz zahlreicher Rollbacks </font><font style="vertical-align: inherit;">die Arbeit </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">schließlich</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> abschließt.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dieses Thema ist viel umfangreicher als ich beschreibe. </font><font style="vertical-align: inherit;">In der Praxis können Optimierungen wie die Auswahl von Annahmen, das Verständnis, wann verteilt werden muss und wann komplexere logische Schlussfolgerungen gezogen werden müssen, einen großen Einfluss auf die Programmausführung haben. </font><font style="vertical-align: inherit;">Und da Probleme mit Einschränkungen in der Regel exponentiell zunehmen, können Sie morgen oder nach 5000 Jahren eine Antwort erhalten.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir kehren zum Zusammenbruch der Wellenfunktion zurück</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Zusammenbruch der Wellenfunktion ist eine schwierige Aufgabe mit einer Einschränkung: Es gibt Tausende von möglichen Lösungen. Wenn wir zufällig Annahmen treffen </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, erhalten</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> wir </font><font style="vertical-align: inherit;">anstelle eines </font><i><font style="vertical-align: inherit;">Lösers</font></i><font style="vertical-align: inherit;"> einen </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Generator</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Gleichzeitig wird es weiterhin alle gegebenen Einschränkungen erfüllen, das heißt, es wird viel leichter zu handhaben sein als die meisten anderen Verfahrensgeneratoren. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Aufgabe des WFC-Algorithmus besteht darin, Zellen mit Kacheln zu füllen, damit die Bilder auf den Kacheln miteinander kombiniert werden. Innerhalb der oben verwendeten Terminologie ist jede Kachel ein Wert, jede Zelle ist eine Variable und die Regeln für das Platzieren von Kacheln sind Einschränkungen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maxim, der Autor von WFC, stellte fest, dass Sie bei einer angemessenen Auswahl an Kacheln und einer geeigneten Randomisierung selten Backtracking verwenden müssen, sodass dieses Verfahren nicht implementiert werden kann. </font><font style="vertical-align: inherit;">Somit ist das Wesen von WFC wie folgt:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Für jede Zelle wird ein boolesches Array erstellt, das die Domäne dieser Variablen darstellt. </font><font style="vertical-align: inherit;">Domänen enthalten einen Datensatz pro Kachel, und alle werden mit einem Wert initialisiert </font></font><code>true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Eine Kachel betritt eine Domäne, wenn ihr Wert gleich ist </font></font><code>true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gleichzeitig gibt es Zellen, in denen Domänen mehrere Elemente enthalten:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Auswahl einer Zufallszelle nach der heuristischen Methode der "geringsten Entropie".</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wählen Sie eine zufällige Kachel aus der Zelldomäne aus und entfernen Sie alle anderen Kacheln von dort.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das Aktualisieren der Domänen anderer Zellen basierend auf diesen neuen Informationen ist die Ausbreitung der Zellrestriktion. </font><font style="vertical-align: inherit;">Dies muss wiederholt erfolgen, da Änderungen in den Zellen weitere Konsequenzen haben können.</font></font></li>
</ul></li>
</ul><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hinweis</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : Meine Bedingungen unterscheiden sich von den Bedingungen von Maxim. </font><font style="vertical-align: inherit;">Er nennt das Array von Domänen eine Welle, und die Auswahl einer zufälligen Kachel ist eine Beobachtung. </font><font style="vertical-align: inherit;">Das heißt, es wird eine Analogie zur Quantenmechanik gezogen. </font><font style="vertical-align: inherit;">Aber der Vergleich ist oberflächlich, deshalb werden wir ihn ignorieren. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gibt viele Ergänzungen zu den oben genannten Prinzipien, die dem Algorithmus Anmut und Leistung verleihen. </font><font style="vertical-align: inherit;">Aber schauen wir uns zuerst die beschriebenen Schritte an.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Beispiel</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Angenommen, wir müssen ein 3 x 3-Raster mit vier Arten von Kacheln füllen:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/749/647/d6b/749647d6ba27126a9e7769a479cd79a5.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Einschränkungen sind: Die Farben benachbarter Kacheln müssen übereinstimmen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie im Sudoku-Beispiel werde ich den Inhalt von Domänen mit monochromen Bildern veranschaulichen. </font><font style="vertical-align: inherit;">Wenn nur noch ein Element in der Domäne vorhanden ist, vergrößere ich es und zeige es in Farbe. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Erstens können in jeder Zelle Kacheln jeglicher Art lokalisiert werden:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/780/406/ba9/780406ba92fd3d6cd89234b1aa2b8431.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Führen Sie die Haupt-WFC-Schleife aus. </font><font style="vertical-align: inherit;">Wählen Sie zufällig eine Zelle aus, z. B. oben links. </font><font style="vertical-align: inherit;">Wählen Sie nun eine Kachel in der Domäne aus und löschen Sie alle anderen.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c6b/053/8a4/c6b0538a47c9355d22fe75fada7252cc.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Verteilen Sie die Einschränkungen. </font><font style="vertical-align: inherit;">Die einzige Regel gilt für benachbarte Kacheln, daher müssen zwei Zellen aktualisiert werden:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/90e/a7f/440/90ea7f440d0b3805b324a4bbaef6a7e3.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Können wir andere Kacheln angesichts der schrumpfenden Domänen aktualisieren? </font><font style="vertical-align: inherit;">Ja! </font><font style="vertical-align: inherit;">Obwohl wir uns bei der Auswahl der ersten Kachel nicht sicher sind, sehen wir, dass die verbleibenden Optionen nach rechts führen. </font><font style="vertical-align: inherit;">Das heißt, einige Arten von Kacheln können nicht in die obere rechte Ecke gelegt werden. </font><font style="vertical-align: inherit;">Gleiches gilt für die untere linke Ecke.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4dc/4f3/d07/4dc4f3d070fe3268639e9fc3e2877661.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir können die Einschränkungen nicht mehr verteilen, daher wiederholen wir den Hauptzyklus: Zellauswahl, Kachelauswahl und Verteilung. </font><font style="vertical-align: inherit;">Diesmal nehmen wir die obere mittlere Zelle:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b58/44c/01a/b5844c01a98770f203587dd46d02a3df.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein weiterer Zyklus: Nehmen Sie die linke mittlere Zelle. </font><font style="vertical-align: inherit;">Nach der Proliferation von Restriktionen für die zentrale Zelle bleibt ein möglicher Wert übrig.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/066/f76/a13/066f76a13cda6b5e275a371b3561c02a.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Allgemeinen verstehen Sie die Idee. </font><font style="vertical-align: inherit;">Sie können den Rest der Zellen selbst ausfüllen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie mit einem </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">komplexeren interaktiven Beispiel</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> experimentieren möchten </font><font style="vertical-align: inherit;">, empfehle ich </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dieses</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kleinste Entropie</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bei der Auswahl der nächsten auszufüllenden Zelle sind einige Optionen vorzuziehen. </font><font style="vertical-align: inherit;">Wenn Sie zufällig aus einer beliebigen Stelle im Raster auswählen, kann eine Situation auftreten, in der gleichzeitig verschiedene Bereiche des Rasters gefüllt sind. </font><font style="vertical-align: inherit;">Dies kann zu Problemen führen: Abhängig von den verfügbaren Kacheln können die gefüllten Bereiche nicht verbunden werden. </font><font style="vertical-align: inherit;">Es ist daher besser, Zellen auszuwählen, bei denen es in Zukunft weniger wahrscheinlich ist, dass sie zu solchen Problemen führen. </font><font style="vertical-align: inherit;">Mit anderen Worten, Sie müssen Zellen mit der geringsten Anzahl möglicher Werte in der Domäne (jedoch nicht weniger als zwei Werte) verwenden:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Höchstwahrscheinlich befinden sie sich neben den bereits gefüllten Zellen.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn wir sie für die Zukunft belassen, können Schwierigkeiten auftreten, da die verfügbaren Werte bereits gering sind.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der kleinste Domänenansatz funktioniert gut, wenn alle Kacheln gleich wahrscheinlich sind. </font><font style="vertical-align: inherit;">Wenn Sie jedoch aus einer </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gewichteten Zufallsverteilung</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> auswählen </font><font style="vertical-align: inherit;">, müssen Sie etwas anderes berücksichtigen. </font><font style="vertical-align: inherit;">Maxima empfiehlt "minimale Entropie", dh wählen Sie eine Zelle, die minimiert:</font></font><br>
<br>
<p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>e</mi><mi>n</mi><mi>t</mi><mi>r</mi><mi>o</mi><mi>p</mi><mi>y</mi><mo>=</mo><mo>&amp;#x2014;</mo><mo>&amp;#x2211;</mo><msub><mi>p</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>i</mi></mrow></msub><mi>l</mi><mi>o</mi><mi>g</mi><mo stretchy=&quot;false&quot;>(</mo><msub><mi>p</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>i</mi></mrow></msub><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="25.41ex" height="3.634ex" viewBox="0 -1024.6 10940.2 1564.8" role="img" focusable="false" style="vertical-align: -1.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/mailru/blog/497590/&amp;usg=ALkJrhjL334fUx5hVJwoDeCbJy5_b9AIKg#MJMATHI-65" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/mailru/blog/497590/&amp;usg=ALkJrhjL334fUx5hVJwoDeCbJy5_b9AIKg#MJMATHI-6E" x="466" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/mailru/blog/497590/&amp;usg=ALkJrhjL334fUx5hVJwoDeCbJy5_b9AIKg#MJMATHI-74" x="1067" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/mailru/blog/497590/&amp;usg=ALkJrhjL334fUx5hVJwoDeCbJy5_b9AIKg#MJMATHI-72" x="1428" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/mailru/blog/497590/&amp;usg=ALkJrhjL334fUx5hVJwoDeCbJy5_b9AIKg#MJMATHI-6F" x="1880" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/mailru/blog/497590/&amp;usg=ALkJrhjL334fUx5hVJwoDeCbJy5_b9AIKg#MJMATHI-70" x="2365" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/mailru/blog/497590/&amp;usg=ALkJrhjL334fUx5hVJwoDeCbJy5_b9AIKg#MJMATHI-79" x="2869" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/mailru/blog/497590/&amp;usg=ALkJrhjL334fUx5hVJwoDeCbJy5_b9AIKg#MJMAIN-3D" x="3644" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/mailru/blog/497590/&amp;usg=ALkJrhjL334fUx5hVJwoDeCbJy5_b9AIKg#MJMAIN-2014" x="4422" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/mailru/blog/497590/&amp;usg=ALkJrhjL334fUx5hVJwoDeCbJy5_b9AIKg#MJSZ2-2211" x="5589" y="0"></use><g transform="translate(7201,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/mailru/blog/497590/&amp;usg=ALkJrhjL334fUx5hVJwoDeCbJy5_b9AIKg#MJMATHI-70" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/mailru/blog/497590/&amp;usg=ALkJrhjL334fUx5hVJwoDeCbJy5_b9AIKg#MJMATHI-69" x="712" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/mailru/blog/497590/&amp;usg=ALkJrhjL334fUx5hVJwoDeCbJy5_b9AIKg#MJMATHI-6C" x="8048" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/mailru/blog/497590/&amp;usg=ALkJrhjL334fUx5hVJwoDeCbJy5_b9AIKg#MJMATHI-6F" x="8347" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/mailru/blog/497590/&amp;usg=ALkJrhjL334fUx5hVJwoDeCbJy5_b9AIKg#MJMATHI-67" x="8832" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/mailru/blog/497590/&amp;usg=ALkJrhjL334fUx5hVJwoDeCbJy5_b9AIKg#MJMAIN-28" x="9313" y="0"></use><g transform="translate(9702,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/mailru/blog/497590/&amp;usg=ALkJrhjL334fUx5hVJwoDeCbJy5_b9AIKg#MJMATHI-70" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/mailru/blog/497590/&amp;usg=ALkJrhjL334fUx5hVJwoDeCbJy5_b9AIKg#MJMATHI-69" x="712" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/mailru/blog/497590/&amp;usg=ALkJrhjL334fUx5hVJwoDeCbJy5_b9AIKg#MJMAIN-29" x="10550" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>e</mi><mi>n</mi><mi>t</mi><mi>r</mi><mi>o</mi><mi>p</mi><mi>y</mi><mo>=</mo><mo>—</mo><mo>∑</mo><msub><mi>p</mi><mrow class="MJX-TeXAtom-ORD"><mi>i</mi></mrow></msub><mi>l</mi><mi>o</mi><mi>g</mi><mo stretchy="false">(</mo><msub><mi>p</mi><mrow class="MJX-TeXAtom-ORD"><mi>i</mi></mrow></msub><mo stretchy="false">)</mo></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-1">entropy = — \sum p_{i}log(p_{i})</script></p><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dies ist eine Zusammenfassung der Kacheln in der Domäne, in der </font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>p</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>i</mi></mrow></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.059ex" height="1.884ex" viewBox="-38.5 -540.2 886.3 811.3" role="img" focusable="false" style="vertical-align: -0.63ex; margin-left: -0.089ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/mailru/blog/497590/&amp;usg=ALkJrhjL334fUx5hVJwoDeCbJy5_b9AIKg#MJMATHI-70" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/mailru/blog/497590/&amp;usg=ALkJrhjL334fUx5hVJwoDeCbJy5_b9AIKg#MJMATHI-69" x="712" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>p</mi><mrow class="MJX-TeXAtom-ORD"><mi>i</mi></mrow></msub></math></span></span><script type="math/tex" id="MathJax-Element-2">p_{i}</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Wahrscheinlichkeit für diese Kachel.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Effizientes Rechnen</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Obwohl ich nicht auf Details eingehen möchte, gibt es zwei Optimierungen, mit denen ich die Geschwindigkeit so stark erhöhen kann, dass sie nicht ignoriert werden können. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Da sich unsere einzige Regel auf benachbarte Kacheln bezieht, können wir nur die Einschränkungen überprüfen, die zu Ergebnissen führen können, die sich von den vorherigen unterscheiden. Das heißt, wenn eine Zelle aktualisiert wird, fügen wir sie der Warteschlange der Zellen hinzu, die auf eine Entscheidung warten. Dann entfernen wir eine Zelle aus der Warteschlange und überprüfen jedes Mal die benachbarten Zellen. Wenn solche Überprüfungen zur Erneuerung anderer Zellen führen, fallen sie ebenfalls in die Warteschlange. Wenn Sie diesen Vorgang wiederholen, bis die Warteschlange leer ist, stellen Sie sicher, dass alle Einschränkungen überprüft werden. Wir überprüfen sie jedoch erst, wenn sich die Domäne mindestens einer Zelle ändert, die diesen Einschränkungen zugeordnet ist.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um die Adjazenzbeschränkung zu überprüfen, müssen wir außerdem die Frage beantworten: "Welche Kacheln sind angesichts der Kacheln in der Domäne von Zelle A in der Domäne von Zelle B möglich, wenn die Zellen benachbart sind?" </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Manchmal wird diese Frage als "Unterstützung" von Zelle A bezeichnet. Für eine bestimmte Kachel "b" in Domäne B ist es einfach, die Zyklen für Kacheln in Domäne A zu berechnen. Wenn A mindestens eine Kachel hat, die neben "b" platziert werden kann, dann "b" immer noch geeignet, zumindest für das betreffende Fliesenpaar. Wenn es in A keine solche Kachel gibt, können Sie die Kachel "b" nicht aus Domäne B ablegen, und wir können sie verwerfen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Schleifen machen es einfach, dies in Code zu implementieren, arbeiten jedoch extrem langsam. </font><font style="vertical-align: inherit;">Und wenn wir Informationen in einer zusätzlichen Datenstruktur speichern, können wir die Frage bei Bedarf schnell beantworten. </font><font style="vertical-align: inherit;">Die neuen Daten sind ein großes Array mit Einträgen für jede Seite jeder Zelle und jeder Kachel. </font><font style="vertical-align: inherit;">In unserem Beispiel gibt es 9 Zellen mit jeweils 4 Seiten und 4 Arten von Kacheln. </font><font style="vertical-align: inherit;">Wir brauchen also 9 * 4 * 4 Datensätze. </font><font style="vertical-align: inherit;">Wir speichern Unterstützungszähler im Array: Für jede Zelle / Kachel / Seite zählen wir die Anzahl der Kacheln in der benachbarten Zellendomäne, die neben der betreffenden Kachel platziert werden können. </font><font style="vertical-align: inherit;">Wenn der Zähler auf Null fällt, kann dieses Plättchen nicht gelegt werden, da niemand daneben stehen kann.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Algorithmuserweiterungen</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Da WFC auf einem allgemeineren Verständnis von eingeschränkten Problemen basiert, gibt es viele Möglichkeiten, den Algorithmus durch Ändern der verwendeten Einschränkungen zu erweitern. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eine der offensichtlichen Änderungen ist, dass uns niemand zwingt, quadratische Zellen zu verwenden. WFC eignet sich hervorragend für </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hexagonale Zellen in drei Dimensionen</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> oder noch </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ungewöhnlicheren Oberflächen</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/98f/35a/0b9/98f35a0b9ccd9fd4fce689cd7f911d64.png" width="300"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/848/881/d32/848881d3216ac003a312c1fc8cfd56ea.png" width="300"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/497/0d2/706/4970d270636d7203d3e8e1e4bcb4befd.png" width="300"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie können zusätzliche Einschränkungen einführen: Korrigieren Sie bestimmte Kacheln oder erstellen Sie „Module“ aus mehreren Zellen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Einführung zusätzlicher Beschränkungen kann aus praktischer Sicht eine sehr wichtige Rolle spielen. </font><font style="vertical-align: inherit;">Da WFC nur benachbarte Kacheln begrenzt, werden selten große Strukturen erzeugt, die ein hohes Maß an Homogenität bieten und ungewöhnlich aussehen. </font><font style="vertical-align: inherit;">Dieser Algorithmus funktioniert am besten bei der Auswahl von Kacheln. Um jedoch mit einigen großen Strukturen zu arbeiten, ist es besser, eine andere Technik zu verwenden oder andere Einschränkungen einzuführen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">einem anderen Artikel habe</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ich darüber gesprochen, wie Sie mit WFC die besten Ergebnisse erzielen können.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Überlappende WFC</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eine der interessanten Erweiterungen des Algorithmus ist der "überlappende" WFC. In den obigen Beispielen bezog sich die Hauptbeschränkung auf Paare benachbarter Kacheln. Dies reicht aus, um die Verbindung von Linien sicherzustellen und einfache Strukturen wie Höhlen, Räume usw. zu schaffen. Gleichzeitig gehen jedoch viele Informationen verloren. Wenn wir zum Beispiel brauchen, dass rote Kacheln immer neben blauen liegen, aber nie neben ihnen waren, wird es schwierig sein, dies allein in Bezug auf die Nähe auszudrücken. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maxim schlug das Konzept der Überlappung von WFC vor: Wir ersetzen die Adjazenzbedingung durch eine neue Einschränkung, die mehrere Kacheln gleichzeitig betrifft. Zum Beispiel, so dass am Ausgang jede Gruppe von 3 × 3-Zellen einer 3 × 3-Gruppe aus einer Gitterprobe entspricht. Die in der Probe vorhandenen Muster werden am Ausgang immer wieder in verschiedenen Variationen wiederholt:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/42d/72b/b76/42d72bb7631b24f33858756ade67fa55.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Diese Einschränkung ist viel empfindlicher als "einfache" Adjazenzbeschränkungen. </font><font style="vertical-align: inherit;">Und da es von einer bestimmten Stichprobe abhängt, eignet es sich sehr gut zur Lösung künstlerischer Aufgaben. </font><font style="vertical-align: inherit;">Bisher bin ich auf nichts so Interessantes gestoßen. </font><font style="vertical-align: inherit;">Vielleicht liegt der Grund darin, dass ein solcher Algorithmus schwieriger zu implementieren ist oder langsamer arbeitet oder manchmal die ursprüngliche Probe zu gut reproduziert, was dazu führt, dass eine Art von Natürlichkeit und Natürlichkeit verloren geht.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Was weiter?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Lösen von Problemen mit Einschränkungen ist ein großes und sich aktiv entwickelndes Gebiet der Informatik, und ich habe es nur angesprochen. </font><font style="vertical-align: inherit;">WFC ist - genau wie jeder andere Algorithmus zur prozeduralen Generierung zur Lösung eingeschränkter Probleme - noch neu. </font><font style="vertical-align: inherit;">Ich empfehle, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">r / procedureuralgeneration</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">#wavefunctioncollapse</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@exutumno</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@osksta</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> zu </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">lesen</font></a><font style="vertical-align: inherit;"> , um sich ein </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">Bild</font></a><font style="vertical-align: inherit;"> von den jüngsten Anwendungsfällen zu machen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie können auch meinen </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Artikel über WFC</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> lesen </font><font style="vertical-align: inherit;">, mit meiner </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenSource-Bibliothek</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> oder dem </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unity-Tool</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> experimentieren </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Vergessen Sie nicht meine anderen Artikel zur </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verfahrensgenerierung</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de497578/index.html">AMD ist bestrebt, einen bedeutenden Marktanteil für Rechenzentren zu erlangen</a></li>
<li><a href="../de497580/index.html">Harte Quarantäne ist sehr sehr schlecht</a></li>
<li><a href="../de497582/index.html">Habr belegt den ersten Platz in der Rangliste der digitalen Rechte der Nutzer</a></li>
<li><a href="../de497584/index.html">Quantifiziertes Selbst: Wie Madrobots Picooc Smart Scales nach Russland brachten</a></li>
<li><a href="../de497588/index.html">Spring Security - Ein Beispiel für eine OAuth2-Autorisierungs-Webanwendung über BitBucket</a></li>
<li><a href="../de497594/index.html">Externer Datenspeicher: von IBM 1311 bis heute. Teil 1</a></li>
<li><a href="../de497596/index.html">Es lebe PHP</a></li>
<li><a href="../de497602/index.html">Betrachten Sie sich als Unterzeichner? Wen scherzen Sie?</a></li>
<li><a href="../de497606/index.html">Automatisches Gartenbewässerungssystem für Home Assistant, ESP8266 und MiFlora</a></li>
<li><a href="../de497608/index.html">Wie Verkehrsanalysesysteme Hacker-Taktiken erkennen von MITRE ATT & CK, Teil 5</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>