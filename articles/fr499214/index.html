<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üîü üéÖüèª ‚è¨ D√©ployer Hyperledger Fabric 1.4 sur AWS üë©üèª‚Äçüöí üë≠ üëá</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hyperledger Fabric est une plate-forme blockchain open source de la Linux Foundation. Avec lui, vous pouvez cr√©er des applications blockchain et contr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>D√©ployer Hyperledger Fabric 1.4 sur AWS</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/nix/blog/499214/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hyperledger Fabric est une plate-forme blockchain open source de la Linux Foundation. Avec lui, vous pouvez cr√©er des applications blockchain et contr√¥ler l'acc√®s et les autorisations pour les donn√©es dans la blockchain. Hyperledger Fabric doit √™tre utilis√© si vous souhaitez cr√©er un r√©seau de blockchain priv√© ou d√©finir des restrictions sur les transactions que chaque c√¥t√© peut voir. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans la documentation d'Hyperledger Fabric, la cr√©ation d'un r√©seau blockchain sur une machine √† l'aide de Docker est bien planifi√©e, o√π chaque membre du r√©seau est un conteneur s√©par√©. Mais le processus de configuration d'un r√©seau sur plusieurs machines physiques ou virtuelles n'est pas d√©crit. Cela sera discut√© dans cet article.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Notre application blockchain est un service de stockage de certaines donn√©es m√©dicales des enfants d'√¢ge scolaire et pr√©scolaire. </font><font style="vertical-align: inherit;">Les donn√©es doivent √™tre inchang√©es. </font><font style="vertical-align: inherit;">Ils seront pr√©sent√©s sous la forme d‚Äôinformations sur la vaccination et l‚Äôaccord du patient avec un m√©decin particulier. </font><font style="vertical-align: inherit;">Le r√©seau comprendra des membres de Parents (une organisation qui repr√©sente les int√©r√™ts des parents), de l'H√¥pital (un h√¥pital avec les p√©diatres dont les parents peuvent conclure un accord pour prendre soin de leurs enfants) et de la maternelle (une √©cole maternelle qui peut demander des rapports de sant√© et des vaccinations pour ou un autre enfant √† l'h√¥pital).</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cha√Æne de blocs g√©r√©e par Amazon</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AWS dispose d'un service Amazon Managed Blockchain. </font><font style="vertical-align: inherit;">Il vous permet de d√©ployer des r√©seaux de cha√Ænes de blocs √† l'aide des interfaces utilisateur de la console AWS. </font><font style="vertical-align: inherit;">Mais, apr√®s avoir acquis une certaine exp√©rience de travail avec Amazon Managed Blockchain, nous avons d√ª abandonner l'id√©e d'utiliser le service dans des projets commerciaux. </font><font style="vertical-align: inherit;">Il y avait plusieurs raisons √† cela. </font><font style="vertical-align: inherit;">Les principaux sont:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Seule la version d'Hyperledger Fabric 1.2 √©tait disponible dans Amazon Managed Blockchain, et au moment d'√©crire ces lignes, la version 1.4 est utilis√©e pour cr√©er des r√©seaux d'entreprise de blockchain. </font><font style="vertical-align: inherit;">Il ne permet pas non plus l'utilisation de versions modernes des outils SDK Node.js;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Amazon Managed Blockchain ne prend pas en charge la base de donn√©es CouchDB, ce qui rend difficile la cr√©ation d'applications qui indexent les donn√©es stock√©es.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par cons√©quent, nous pensons qu'il est pr√©f√©rable d'utiliser des serveurs virtuels ou physiques pour cr√©er des r√©seaux en utilisant le framework Hyperledger Fabric.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√Ä propos des canaux d'application</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hyperledger Fabric a le concept de ¬´canal¬ª. </font><font style="vertical-align: inherit;">Un canal est un sous-r√©seau pour effectuer des transactions sensibles. </font><font style="vertical-align: inherit;">Il y aura deux canaux dans notre application.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Parentshospital". </font><font style="vertical-align: inherit;">Il est destin√© aux transactions entre les membres des parents et des organisations hospitali√®res: cr√©ation et modification de dossiers m√©dicaux, cr√©ation d'un accord avec un p√©diatre, et signature d'un accord de p√©diatre.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Parentshospitalkindergarten." </font><font style="vertical-align: inherit;">Dans ce canal, les membres de Parents and Hospital interagiront avec les membres de Kindergarten. </font><font style="vertical-align: inherit;">De plus, des rapports seront g√©n√©r√©s sur la base des donn√©es des dossiers m√©dicaux.</font></font></li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Environnement de travail</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous d√©ploierons notre r√©seau de blockchain √† l'aide de Docker Swarm - il s'agit du syst√®me Docker natif pour le d√©ploiement d'un cluster h√¥te. Si vous n'avez jamais travaill√© avec Docker (et en particulier avec Docker Swarm), consultez d'abord ce produit et comment orchestrer des conteneurs √† l'aide de Docker Swarm. La </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">documentation</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> d√©crit les principes de base de l'utilisation de ces outils.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'ensemble de notre r√©seau sera situ√© sur des serveurs AWS EC2. </font><font style="vertical-align: inherit;">Les informations au sein du r√©seau blockchain seront stock√©es dans CouchDB. </font><font style="vertical-align: inherit;">Hyperledger Fabric prend √©galement en charge la base de donn√©es LevelDB, mais CouchDB, contrairement √† cette derni√®re, permet de rechercher par n'importe quel crit√®re dans une collection de documents. </font><font style="vertical-align: inherit;">Nous utiliserons √©galement Fabric Certificate Authority - il s'agit d'un composant modulaire pour la gestion des identifiants r√©seau de toutes les organisations et de leurs utilisateurs. </font><font style="vertical-align: inherit;">Il permet l'enregistrement des participants au r√©seau et la d√©livrance de certificats. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous aurons quatre serveurs EC2:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Orderer, MySQL DB (pour stocker les informations d'application qui ne s'appliquent pas aux dossiers m√©dicaux)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Organisation des parents (Peer0, Peer1), CouchDB, Fabric-CA, CLI</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Organisation hospitali√®re (Peer0, Peer1), CouchDB, Fabric-CA</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Organisation de la maternelle (Peer0, Peer1), CouchDB, Fabric-CA</font></font></li>
</ol><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cr√©ation de serveurs EC2 sur AWS</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons besoin des services t2.medium pour fonctionner. </font><font style="vertical-align: inherit;">Ce type de serveur EC2 dispose d'une puissance de calcul suffisante pour installer tous les logiciels n√©cessaires et fonctionner avec l'outil Hyperledger Fabric. </font><font style="vertical-align: inherit;">Dans Configurer le groupe de s√©curit√©, d√©finissez Tout le trafic et Source - 0.0.0.0/0, :: / 0. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/bb/kx/iu/bbkxiua1teuzbc0jbmajtl-o5i0.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. 1. </font><font style="vertical-align: inherit;">Configurez le groupe de s√©curit√© dans le panneau AWS. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons quatre serveurs EC2:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ec2-18-232-164-119.compute-1.amazonaws.com</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ec2-54-145-203-186.compute-1.amazonaws.com</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ec2-54-80-241-117.compute-1.amazonaws.com</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ec2-52-87-193-235.compute-1.amazonaws.com</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous aurez naturellement vos propres chemins vers les serveurs EC2. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/az/ab/as/azabas37iihj5xmuaqzrty6-mcc.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig.2. </font><font style="vertical-align: inherit;">Pr√©par√© pour le fonctionnement des serveurs EC2.</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Installation du logiciel pr√©requis sur les serveurs EC2</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, sur chaque serveur EC2, nous devons installer Docker et Git. </font><font style="vertical-align: inherit;">Pour plus de commodit√©, ouvrez quatre onglets dans le terminal. </font><font style="vertical-align: inherit;">Passons √† chaque service EC2 via SSH: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Terminal 1:</font></font><br>
<br>
<pre><code class="plaintext hljs">HOST1=ec2-18-232-164-119.compute-1.amazonaws.com<font></font>
ssh ec2-user@$HOST1 -i ./key-poc.pem<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Terminal 2:</font></font><br>
<br>
<pre><code class="plaintext hljs">HOST2=ec2-54-145-203-186.compute-1.amazonaws.com<font></font>
ssh ec2-user@$HOST2 -i ./key-poc.pem<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Terminal 3:</font></font><br>
<br>
<pre><code class="plaintext hljs">HOST3=ec2-54-80-241-117.compute-1.amazonaws.com<font></font>
ssh ec2-user@$HOST3 -i ./key-poc.pem<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Terminal 4:</font></font><br>
<br>
<pre><code class="plaintext hljs">HOST4=ec2-52-87-193-235.compute-1.amazonaws.com<font></font>
ssh ec2-user@$HOST4 -i ./key-poc.pem<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans chaque terminal, ex√©cutez les commandes suivantes:</font></font><br>
<br>
<pre><code class="plaintext hljs">sudo yum update -y<font></font>
sudo yum install -y docker<font></font>
sudo service docker start<font></font>
sudo docker info<font></font>
sudo yum install git<font></font>
sudo usermod -a -G docker ec2-user<font></font>
newgrp docker<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons maintenant install√© Docker et Git.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">R√©seau</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous devons cloner des √©l√©ments de notre r√©seau √† partir du r√©f√©rentiel. </font><font style="vertical-align: inherit;">Pour ce faire, ex√©cutez la commande dans chaque terminal:</font></font><br>
<br>
<pre><code class="plaintext hljs">git clone https://github.com/nixsolutions/blockchain-poc-network.git network
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous devons √©galement cloner les contrats intelligents du r√©f√©rentiel qui r√©guleront les relations entre les participants du r√©seau. </font><font style="vertical-align: inherit;">Les contrats intelligents sont √©crits dans la langue Golang. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous effectuons ces √©tapes sur chacun des quatre serveurs:</font></font><br>
<br>
<pre><code class="plaintext hljs">cd network &amp;&amp; mkdir chaincode &amp;&amp; cd chaincode<font></font>
git clone https://github.com/nixsolutions/blockchain-poc-medical-contract.git medical-contract<font></font>
git clone https://github.com/nixsolutions/blockchain-poc-kindergarten-contract.git kindergarten-contract<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans le premier terminal, nous devons g√©n√©rer des fichiers de configuration de canal et des certificats pour connecter les organisations au r√©seau:</font></font><br>
<br>
<pre><code class="plaintext hljs">cd network/poc-network<font></font>
./1_generate_connection_files.sh<font></font>
./2_generating_channel_configuration.sh<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Copiez maintenant les dossiers channel-artifacts et crypto-config vers les trois autres h√¥tes dans le dossier poc-network du r√©pertoire parent du r√©seau. </font><font style="vertical-align: inherit;">Remarque: lors de la copie d'organisations sur le serveur EC2, vous devez supprimer les certificats tiers du dossier crypto-config / peerOrganizations qui se rapportent au travail d'autres organisations. </font><font style="vertical-align: inherit;">Par exemple, lors de la copie vers l'h√¥te Parents, nous devons laisser le dossier parents.poc-network.com dans ce dossier, mais supprimer hospital.poc-network.com et kindergarten.poc-network.com.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cr√©ation d'une pile Docker Swarm</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour que les conteneurs appartenant √† diff√©rentes organisations et situ√©s sur diff√©rents serveurs EC2 puissent acc√©der les uns aux autres, nous devons les combiner en une pile. </font><font style="vertical-align: inherit;">Regardons notre fichier network / poc-network / docker-compose-general.yaml. </font><font style="vertical-align: inherit;">Il contient la configuration des services, indique sur quels h√¥tes un service particulier (cl√© </font></font><code>node.hostname</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font><font style="vertical-align: inherit;">sera d√©ploy√© </font><font style="vertical-align: inherit;">, les alias (cl√© </font></font><code>aliases</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font><font style="vertical-align: inherit;">sont indiqu√©s </font><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous devons initialiser swarm dans le premier terminal:</font></font><br>
<br>
<pre><code class="plaintext hljs">docker swarm init<font></font>
docker swarm join-token manager<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un jeton appara√Ætra pour attacher un autre serveur EC2 √† la pile. </font><font style="vertical-align: inherit;">Quelque chose comme: </font></font><code>docker swarm join --token SWMTKN-1-42ml0ohnnbidg8kflgp8xp9dkkus6mn1lslqc15hrxj4tk9e3q-5h4vbzbfk8p90n83oe08gbltf 172.31.46.214:2377</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, nous pouvons ex√©cuter dans les terminaux restants:</font></font><br>
<br>
<pre><code class="plaintext hljs">docker swarm join --token SWMTKN-1-2xzco7t7txohnzd09318eczpbgmm8woex80byxptpt1jl5i2ar-bsg37h40xze1gaabg80i96gw2 172.31.38.245:2377
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un message appara√Æt dans la console:</font></font><br>
<br>
<pre><code class="plaintext hljs">This node joined a swarm as a manager.
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une fois les trois h√¥tes connect√©s √† Swarm, nous pouvons les voir dans le terminal du premier h√¥te en ex√©cutant la commande:</font></font><br>
<br>
<pre><code class="plaintext hljs">docker node ls
</code></pre><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/16d/687/898/16d687898e5eb8b4ed00883d4eef2de7.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig.3. </font><font style="vertical-align: inherit;">Liste des serveurs dans Docker Swarm. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans le dossier network / poc-network, il y a un fichier .env.template dans lequel vous devez sp√©cifier un nom d'h√¥te pour chacun des h√¥tes: </font></font><br>
<br>
<code>ORDERER=ip-172-31-38-245</code><br>
<code>PARENTS=ip-172-31-43-64</code><br>
<code>HOSPITAL=ip-172-31-38-130</code><br>
<code>KINDERGARTEN=ip-172-31-40-157</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour g√©n√©rer un fichier .env, vous devez ex√©cuter le fichier ./3_env_gen.sh. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cr√©ez maintenant un r√©seau avec un pilote </font></font><code>overlay</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="plaintext hljs">docker network create --driver overlay --attachable stage_byfn
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ex√©cutez Swarm pour cr√©er une pile bas√©e sur le fichier docker-compose-general.yaml:</font></font><br>
<br>
<pre><code class="plaintext hljs">env $(cat .env | grep ^[A-Z] | xargs) docker stack deploy -c docker-compose-general.yaml stage 2&gt;&amp;1
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Avec cette commande, nous d√©finissons √©galement des variables d'environnement, d√©crites dans le fichier .env et n√©cessaires au bon fonctionnement du r√©seau. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pouvez ex√©cuter la commande </font></font><code>docker service ls</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dans le premier terminal. </font><font style="vertical-align: inherit;">Vous verrez une liste de tous les services qui s'ex√©cutent sur toutes nos instances EC2.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/dc6/d4d/e6c/dc6d4de6c534c2b97430a1cf2e45512c.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig.4. </font><font style="vertical-align: inherit;">Liste de tous les services ex√©cut√©s sur tous les serveurs EC2. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous voyez la m√™me chose dans votre terminal que dans la capture d'√©cran, alors tout va bien. </font><font style="vertical-align: inherit;">Ex√©cutez maintenant notre r√©seau. </font><font style="vertical-align: inherit;">Dans le deuxi√®me terminal, vous devez entrer le conteneur CLI (apr√®s tout, ce conteneur est d√©ploy√© sur le deuxi√®me h√¥te):</font></font><br>
<br>
<pre><code class="plaintext hljs">docker exec -ti stage_cli.1.owni217t53m53efjtikb5oa2f /bin/bash
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le nom du conteneur peut √™tre vu en ex√©cutant la commande dans le terminal </font></font><code>docker ps</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans le conteneur, nous ex√©cutons toutes nos commandes √† partir du fichier 4_create_channels.sh, en les copiant une par une vers le terminal. </font><font style="vertical-align: inherit;">Dans le dossier bin, nous avons les binaires pour cr√©er le r√©seau:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">peer channel create - cr√©e des canaux;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jointure de canal de pair - joindre un pair √† un canal;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mise √† jour du canal homologue - mettre √† jour les configurations;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">installation du code de cha√Æne par les pairs - installez le code de code;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">peer chaincode instantiate - d√©ployez le code de cha√Æne sp√©cifi√© sur le r√©seau.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pouvez maintenant quitter le conteneur en ex√©cutant la commande </font></font><code>exit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Demande de retour des parents</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Installez l'application sur le deuxi√®me h√¥te:</font></font><br>
<br>
<pre><code class="plaintext hljs">cd ~<font></font>
git clone https://github.com/nixsolutions/blockchain-poc-backend.git back<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous devons √©galement installer NodeJS et gcc-c ++ (compilateur):</font></font><br>
<br>
<pre><code class="plaintext hljs">curl -sL https://rpm.nodesource.com/setup_10.x | sudo bash -<font></font>
sudo yum install nodejs<font></font>
cd back<font></font>
sudo yum install gcc-c++ -y<font></font>
npm install<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous pouvons √©galement entrer dans notre base de donn√©es via l'administrateur avec les donn√©es d'autorisation suivantes: </font></font><br>
<br>
<code>&lt;HOST_1&gt;:3306</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(o√π </font></font><code>&lt;HOST_1&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">est l'adresse du premier serveur EC2 sur lequel la base de donn√©es est stock√©e) </font></font><br>
<code>dev</code><br>
<code>devpass</code><br>
<code>poc_database</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il est √©galement n√©cessaire de connecter notre application API √† la base de donn√©es:</font></font><br>
<br>
<pre><code class="plaintext hljs">vim ~/back/config/config.json
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Attribuez la valeur correcte √† la cl√© </font></font><code>host</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Notre back-application a pr√©par√© des migrations et des graines. </font><font style="vertical-align: inherit;">Vous devez les ex√©cuter:</font></font><br>
<br>
<pre><code class="plaintext hljs">npx sequelize-cli db:migrate<font></font>
npx sequelize-cli db:seed:all<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les tableaux doivent appara√Ætre dans la base de donn√©es. </font><font style="vertical-align: inherit;">Et dans le tableau des organisations, nous verrons trois lignes avec nos organisations - parents, h√¥pital, jardin d'enfants. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lors de la g√©n√©ration des certificats au tout d√©but, nous avons re√ßu des fichiers de connexion au r√©seau pour chaque organisation sur le premier h√¥te. </font><font style="vertical-align: inherit;">Copiez le fichier connection-parents.json du premier h√¥te au second. </font><font style="vertical-align: inherit;">Pour ce faire, ouvrez un autre terminal √† partir du dossier o√π </font></font><code>key</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">se trouve le </font><font style="vertical-align: inherit;">n√¥tre </font><font style="vertical-align: inherit;">et ex√©cutez les commandes:</font></font><br>
<br>
<pre><code class="plaintext hljs">HOST1=ec2-18-232-164-119.compute-1.amazonaws.com<font></font>
HOST2=ec2-54-145-203-186.compute-1.amazonaws.com<font></font>
scp -i ./key-poc.pem -r ec2-user@$HOST1:~/network/poc-network/connection-parents.json ~<font></font>
scp -i ./key-poc.pem ~/connection-parents.json ec2-user@$HOST2:~/network/poc-network<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Correction </font></font><code>exports.hostName</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dans constants.js (valeur pour l'h√¥te actuel):</font></font><br>
<br>
<pre><code class="plaintext hljs">vim ~/back/constants.js
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ex√©cutez notre application dans le deuxi√®me terminal:</font></font><br>
<br>
<pre><code class="plaintext hljs">npm start
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans le fichier userGenerator.sh, affectez la </font></font><code>HOST_2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">valeur correcte √† la </font><font style="vertical-align: inherit;">variable </font><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="plaintext hljs">vim ~/back/generators/userGenerator.sh
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, vous devez ex√©cuter un script qui cr√©era des utilisateurs de l'organisation des parents:</font></font><br>
<br>
<pre><code class="plaintext hljs">./back/generators/userGenerator.sh parents
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ex√©cutez le script pour g√©n√©rer des dossiers m√©dicaux:</font></font><br>
<br>
<pre><code class="plaintext hljs">node ~/back/generators/setCards.js
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Deux cartes seront cr√©√©es dans la blockchain, qui seront √©galement √©crites dans la base de donn√©es SQL dans le tableau des cartes.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Demande de retour √† l'h√¥pital</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par analogie avec la back-application pr√©c√©dente, nous devons placer le fichier pour se connecter au r√©seau sur le troisi√®me h√¥te. </font><font style="vertical-align: inherit;">Pour ce faire, dans le cinqui√®me terminal, ex√©cutez:</font></font><br>
<br>
<pre><code class="plaintext hljs">scp -i ./key-poc.pem -r ec2-user@$HOST1:~/network/poc-network/connection-hospital.json ~<font></font>
scp -i ./key-poc.pem ~/connection-hospital.json ec2-user@$HOST3:~/network/poc-network<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous clonerons notre application sur le troisi√®me h√¥te:</font></font><br>
<br>
<pre><code class="plaintext hljs">cd ~<font></font>
git clone https://github.com/nixsolutions/blockchain-poc-backend.git back<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Installez NodeJS et gcc-c ++ (compilateur):</font></font><br>
<br>
<pre><code class="plaintext hljs">curl -sL https://rpm.nodesource.com/setup_10.x | sudo bash -<font></font>
sudo yum install nodejs<font></font>
cd back<font></font>
sudo yum install gcc-c++ -y<font></font>
npm install<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Correction </font></font><code>exports.hostName</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dans constants.js (valeur pour l'h√¥te actuel):</font></font><br>
<br>
<pre><code class="plaintext hljs">vim ~/back/constants.js
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ex√©cutez notre application dans le troisi√®me terminal:</font></font><br>
<br>
<pre><code class="plaintext hljs">npm start
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans le fichier userGenerator.sh, affectez la </font></font><code>HOST_3</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">valeur correcte √† la </font><font style="vertical-align: inherit;">variable </font><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="plaintext hljs">vim ~/back/generators/userGenerator.sh
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, nous devons ex√©cuter un script qui cr√©era des utilisateurs de l'organisation hospitali√®re:</font></font><br>
<br>
<pre><code class="plaintext hljs">./back/generators/userGenerator.sh hospital
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons maintenant un deuxi√®me utilisateur dans la table Users de la base de donn√©es.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Demande de retour √† la maternelle</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par analogie avec la back-application pr√©c√©dente, nous devons placer le fichier pour se connecter au r√©seau sur le troisi√®me h√¥te. </font><font style="vertical-align: inherit;">Pour ce faire, dans le cinqui√®me terminal, ex√©cutez:</font></font><br>
<br>
<pre><code class="plaintext hljs">scp -i ./key-poc.pem -r ec2-user@$HOST1:~/network/poc-network/connection-kindergarten.json ~<font></font>
scp -i ./key-poc.pem ~/connection-kindergarten.json ec2-user@$HOST4:~/network/poc-network<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous clonerons notre application sur le troisi√®me h√¥te:</font></font><br>
<br>
<pre><code class="plaintext hljs">cd ~<font></font>
git clone https://github.com/nixsolutions/blockchain-poc-backend.git back<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Installez NodeJS et Gcc-c ++ (compilateur):</font></font><br>
<br>
<pre><code class="plaintext hljs">curl -sL https://rpm.nodesource.com/setup_10.x | sudo bash -<font></font>
sudo yum install nodejs<font></font>
cd back<font></font>
sudo yum install gcc-c++ -y<font></font>
npm install<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Correction </font></font><code>exports.hostName</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dans constants.js (valeur pour l'h√¥te actuel):</font></font><br>
<br>
<pre><code class="plaintext hljs">vim ~/back/constants.js
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ex√©cutez notre application dans le troisi√®me terminal:</font></font><br>
<br>
<pre><code class="plaintext hljs">npm start
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans le fichier userGenerator.sh, affectez la </font></font><code>HOST_4</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">valeur correcte √† la </font><font style="vertical-align: inherit;">variable </font><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="plaintext hljs">vim ~/back/generators/userGenerator.sh
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, nous devons ex√©cuter un script qui cr√©era des utilisateurs de l'organisation hospitali√®re:</font></font><br>
<br>
<pre><code class="plaintext hljs">./back/generators/userGenerator.sh kindergarten
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons maintenant un troisi√®me utilisateur dans la table Users de la base de donn√©es.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Installez wkhtmltopdf sur les deuxi√®me, troisi√®me et quatri√®me serveurs EC2</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La contre-application utilise la biblioth√®que wkhtmltopdf pour g√©n√©rer un rapport PDF sur l'√©tat de sant√© de l'enfant. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous devons installer libpng - la biblioth√®que officielle pour travailler avec des graphiques raster au format PNG. </font><font style="vertical-align: inherit;">La biblioth√®que est ind√©pendante de la plateforme et se compose de fonctions √©crites en langage C. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La premi√®re √©quipe installera wkhtmltox - la biblioth√®que open source LGPLv3 pour le rendu HTML au format PDF et divers formats d'image √† l'aide du moteur de rendu QtWebKit:</font></font><br>
<br>
<pre><code class="plaintext hljs">wget https://downloads.wkhtmltopdf.org/0.12/0.12.5/wkhtmltox-0.12.5-1.centos7.x86_64.rpm<font></font>
sudo yum install -y wkhtmltox-0.12.5-1.centos7.x86_64.rpm<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le deuxi√®me bloc de commandes t√©l√©chargera et d√©ploiera la biblioth√®que libpng15:</font></font><br>
<br>
<pre><code class="plaintext hljs">wget https://sourceforge.net/projects/libpng/files/libpng15/older-releases/1.5.15/libpng-1.5.15.tar.gz/download -O libpng-1.5.15.tar.gz<font></font>
tar -zxvf libpng-1.5.15.tar.gz<font></font>
cd libpng-1.5.15<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le troisi√®me bloc de commandes est n√©cessaire pour installer le compilateur:</font></font><br>
<br>
<pre><code class="plaintext hljs">sudo yum groupinstall -y "Development Tools"<font></font>
./configure --prefix=/usr<font></font>
sudo make install<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous devez toujours installer LibTIFF:</font></font><br>
<br>
<pre><code class="plaintext hljs">sudo yum install -y libtiff
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous pouvons tester:</font></font><br>
<br>
<pre><code class="plaintext hljs">wkhtmltopdf https://majestic.cloud majestic.pdf
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pouvez maintenant g√©n√©rer et afficher des documents PDF.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un peu sur Node SDK</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les outils NodeJS pour travailler avec le r√©seau Hyperledger Fabric sont pr√©sent√©s sous la forme de packages "fabric-ca-client -v 1.4.0" et "fabric-network" v 1.4.0 ". </font><font style="vertical-align: inherit;">Tous les services de l'application d'arri√®re-plan qui interagissent avec le r√©seau √† l'aide du SDK Node se trouvent dans le dossier Services, √† la racine du projet. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pouvez lire sur ces outils et leurs m√©thodes dans la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">documentation officielle</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Processus m√©tier d'application</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous allons maintenant parler de la fa√ßon dont les membres du r√©seau interagissent entre eux dans cette application. </font><font style="vertical-align: inherit;">Tous les processus sont d√©crits dans un diagramme UML. </font><font style="vertical-align: inherit;">Examinons chacun d'eux plus en d√©tail.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/31f/484/89d/31f48489d84e6f301b105a4cff8b45c7.jpg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig.5. Une description graphique des processus m√©tier dans l'application.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Ainsi, il existe plusieurs organisations sur le r√©seau: Parents, Hospital et Kindergarten. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un membre des parents cr√©e des dossiers de sant√© √©lectroniques pour deux de leurs enfants. Ces donn√©es seront stock√©es (et compl√©t√©es) dans le r√©seau blockchain. Ensuite, le parent envoie une demande d'accord avec le p√©diatre, qui observera ses enfants jusqu'√† l'√¢ge adulte (dans le sch√©ma - </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">demande d'accord avec un m√©decin</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un membre de l'organisation hospitali√®re signe un accord (dans le sch√©ma - le </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">m√©decin signe un accord</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, le parent envoie une demande au jardin d'enfants avec une demande d'inscription de son enfant (dans le diagramme - </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">demande de jardin d'enfants pour recevoir un enfant</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ).</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/cf9/da3/cee/cf9da3ceedba087e53abef137fbe353b.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig.6. </font><font style="vertical-align: inherit;">Une page avec une liste des √©tablissements d'enseignement disponibles dans le compte des parents. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le jardin d'enfants voit la demande dans la liste des nouvelles demandes:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7cd/d01/a8b/7cdd01a8bf99c9cf9d916eef519ff66b.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig.7. </font><font style="vertical-align: inherit;">Une page avec une liste des demandes d'admission au compte personnel de l'√©tablissement d'enseignement. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le jardin d'enfants avant de d√©cider de l'admission de l'enfant doit s'assurer de son √©tat de sant√© satisfaisant. </font><font style="vertical-align: inherit;">Pour ce faire, le jardin d'enfants envoie une demande √† la clinique dans laquelle cet enfant est observ√© (dans le sch√©ma - </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">demande de rapport de sant√© enfant</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font><font style="vertical-align: inherit;">La demande au p√©diatre est ex√©cut√©e automatiquement apr√®s que la demande d'admission au jardin est d√©plac√©e vers l'onglet "Accept√©".</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ff1/5af/d29/ff15afd292455ccf1a0e9cdc69315f4c.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig.8. </font><font style="vertical-align: inherit;">Une page avec une liste des demandes d'admission approuv√©es sur le compte personnel de l'√©tablissement d'enseignement. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le p√©diatre voit la demande et g√©n√®re un rapport contenant des donn√©es sur la sant√© de l'enfant (dans le diagramme - </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cr√©ation d'</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> un rapport sur la sant√© de l' </font><i><font style="vertical-align: inherit;">enfant</font></i><font style="vertical-align: inherit;"> ).</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8be/1e6/1f2/8be1e61f2dbbd9e146259a5b3a11ffa2.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig.9. </font><font style="vertical-align: inherit;">Une page avec une liste d'applications pour cr√©er un rapport sur l'√©tat de sant√© de l'enfant dans le compte personnel de l'h√¥pital. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le parent voit que le p√©diatre a g√©n√©r√© un rapport:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/06d/fe9/c40/06dfe9c403dfe790632d631c7a54e7b0.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig.10. </font><font style="vertical-align: inherit;">Une page dans le compte personnel du parent, qui affiche l'√©tat des rapports sur l'√©tat de sant√© de l'enfant. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
... et d√©cide d'autoriser l'acc√®s √† l'√©tablissement d'enseignement pr√©scolaire pour consulter et t√©l√©charger le rapport (dans le diagramme - </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">autoriser la consultation du rapport</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ).</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/35f/ed9/c86/35fed9c8680c84dda737f7acb6029afc.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig.11. </font><font style="vertical-align: inherit;">Une fen√™tre contextuelle pour choisir un √©tablissement d'enseignement qui peut afficher le rapport m√©dical g√©n√©r√©. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le parent clique sur "Confirmer":</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3cf/00d/cb5/3cf00dcb54572c2b93b3f2af509d8245.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig.12. </font><font style="vertical-align: inherit;">Notification que l'√©tablissement d'enseignement s√©lectionn√© a re√ßu l'autorisation de consulter le rapport m√©dical. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans la liste des rapports dans l'application de l'√©tablissement d'enseignement, il appara√Æt que le rapport a √©t√© g√©n√©r√© et est disponible pour consultation et t√©l√©chargement au format PDF.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2b6/a1a/ac2/2b6a1aac247da598bf28f434d0614616.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig.13. </font><font style="vertical-align: inherit;">Lien pour t√©l√©charger le rapport au format PDF en ligne avec la demande approuv√©e. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voici un rapport que vous verrez dans un nouvel onglet sur votre ordinateur:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fbb/94a/1e1/fbb94a1e19e8e0db4354d2cc60b6927e.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig.14. </font><font style="vertical-align: inherit;">Un rapport de sant√© g√©n√©r√© par un employ√© de l'h√¥pital.</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cr√©ation de dossiers m√©dicaux et accords avec un p√©diatre, signature d'un accord</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√âtant donn√© que l'application est davantage con√ßue pour d√©montrer le d√©ploiement du r√©seau sur des serveurs EC2 distincts, nous ex√©cuterons certaines commandes √† partir des scripts pr√©par√©s. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Premier serveur EC2:</font></font><br>
<br>
<pre><code class="plaintext hljs">node ~/back/generators/setCards.js
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous nous sommes pr√©c√©demment connect√©s √† la base de donn√©es. </font><font style="vertical-align: inherit;">Apr√®s avoir ex√©cut√© la commande, vous verrez deux entr√©es dans le tableau Cartes. </font><font style="vertical-align: inherit;">De plus, des informations sur les donn√©es m√©dicales de ces deux enfants ont √©t√© enregistr√©es sur la blockchain. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√Ä partir de ce serveur EC2, nous devons cr√©er un accord avec un p√©diatre qui observera les enfants:</font></font><br>
<br>
<pre><code class="plaintext hljs">node ~/back/generators/createAgreement.js
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cet accord doit maintenant √™tre sign√© par l'utilisateur que nous avons cr√©√© pour l'organisation Hospital. </font><font style="vertical-align: inherit;">Nous ex√©cutons la commande √† partir du deuxi√®me h√¥te:</font></font><br>
<br>
<pre><code class="plaintext hljs">node ~/back/generators/signAgreement.js
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Notre accord est sign√© par le m√©decin et nous pouvons continuer √† travailler sur notre demande. </font><font style="vertical-align: inherit;">Ensuite, nous devons installer l'application frontale sur les deuxi√®me, troisi√®me et quatri√®me serveurs EC2. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PS: Vous pouvez trouver toutes les commandes pour g√©n√©rer des utilisateurs, des cartes, des accords et signer des accords dans le dossier ~ / back / generators.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Parents Frontend Application</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ex√©cuter sur le deuxi√®me h√¥te (o√π se trouve l'organisation des parents):</font></font><br>
<br>
<pre><code class="plaintext hljs">cd ~<font></font>
git clone https://github.com/nixsolutions/blockchain-poc-frontend.git front<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous cr√©ons le fichier .env et sp√©cifions le nom d'h√¥te sur lequel notre application frontale sera situ√©e:</font></font><br>
<br>
<pre><code class="plaintext hljs">vim ~ /front/.env:
</code></pre><br>
<br>
<pre><code class="plaintext hljs">VUE_APP_API_BASE_URL='http://ec2-107-22-75-46.compute-1.amazonaws.com:3006/'
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il est n√©cessaire d'√©tablir les d√©pendances:</font></font><br>
<br>
<pre><code class="plaintext hljs">cd front<font></font>
npm install<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous devez √©galement cr√©er l'application et l'ex√©cuter sur le port 8080:</font></font><br>
<br>
<pre><code class="plaintext hljs">docker build . -t my-app<font></font>
docker run -d -p 8080:80 my-app<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Notre application sera disponible √†: </font></font><code>http://&lt;HOST_2&gt;:8080</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o√π </font></font><code>&lt;HOST_2&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">est l'adresse du deuxi√®me serveur EC2 sur lequel se trouve notre application. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Login: </font></font><code>parents</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mot de </font><font style="vertical-align: inherit;">passe: </font></font><code>password</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voici √† quoi ressemblera l'interface. </font><font style="vertical-align: inherit;">Ici, vous verrez des informations sur les cartes m√©dicales que nous avons cr√©√©es √† partir du terminal:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/409/71a/2dd/40971a2dde54cabe268936b96d0a3618.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig.15. </font><font style="vertical-align: inherit;">Informations sur les dossiers m√©dicaux des enfants dans le compte personnel du parent.</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Application frontale d'h√¥pital</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ex√©cuter sur le deuxi√®me h√¥te (o√π se trouve l'organisation hospitali√®re):</font></font><br>
<br>
<pre><code class="plaintext hljs">cd ~<font></font>
git clone https://github.com/nixsolutions/blockchain-poc-frontend.git front<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous cr√©ons le fichier .env et sp√©cifions le nom d'h√¥te sur lequel notre application frontale sera situ√©e:</font></font><br>
<br>
<pre><code class="plaintext hljs">vim ~ /front/.env:
</code></pre><br>
<br>
<pre><code class="plaintext hljs">VUE_APP_API_BASE_URL='http://ec2-3-91-238-161.compute-1.amazonaws.com:3006/'
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il est n√©cessaire d'√©tablir les d√©pendances:</font></font><br>
<br>
<pre><code class="plaintext hljs">cd front<font></font>
npm install<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous devez √©galement cr√©er l'application et l'ex√©cuter sur le port 8080:</font></font><br>
<br>
<pre><code class="plaintext hljs">docker build . -t my-app<font></font>
docker run -d -p 8080:80 my-app<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Notre application sera disponible √†: </font></font><code>http://&lt;HOST_3&gt;:8080</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o√π </font></font><code>&lt;HOST_3&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">est l'adresse du troisi√®me serveur EC2. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Login: </font></font><code>hospital</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mot de </font><font style="vertical-align: inherit;">passe: </font></font><code>password</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Application frontend de la maternelle</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ex√©cuter sur le deuxi√®me h√¥te (o√π se trouve l'organisation de la maternelle):</font></font><br>
<br>
<pre><code class="plaintext hljs">cd ~<font></font>
git clone https://github.com/nixsolutions/blockchain-poc-frontend.git front<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous cr√©ons le fichier .env et sp√©cifions le nom d'h√¥te sur lequel notre application frontale sera situ√©e:</font></font><br>
<br>
<pre><code class="plaintext hljs">vim ~ /front/.env:
</code></pre><br>
<br>
<pre><code class="plaintext hljs">VUE_APP_API_BASE_URL='http://ec2-107-22-12-137.compute-1.amazonaws.com:3006/'
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il est n√©cessaire d'√©tablir les d√©pendances:</font></font><br>
<br>
<pre><code class="plaintext hljs">cd front<font></font>
npm install<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous devez √©galement cr√©er l'application et l'ex√©cuter sur le port 8080:</font></font><br>
<br>
<pre><code class="plaintext hljs">docker build . -t my-app<font></font>
docker run -d -p 8080:80 my-app<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Notre application sera disponible √†: </font></font><code>http://&lt;HOST_4&gt;:8080</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o√π </font></font><code>&lt;HOST_4&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">est l'adresse du quatri√®me serveur EC2. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Login: </font></font><code>kindergarten</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mot de </font><font style="vertical-align: inherit;">passe: </font></font><code>password</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusion</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons examin√© comment d√©ployer un r√©seau d'applications blockchain sur plusieurs serveurs virtuels ou physiques. </font><font style="vertical-align: inherit;">L'article est con√ßu pour vous familiariser avec les bases de la technologie blockchain, savoir ce que sont les contrats intelligents et au moins superficiellement familier avec le cadre Hyperledger Fabric et son application standard d'√©chantillons de tissu.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr499202/index.html">Opium.Fill - standardisation de la palette de couleurs √† travers les yeux du programmeur</a></li>
<li><a href="../fr499206/index.html">Assistants virtuels. Cr√©er des chatbots sans programmation</a></li>
<li><a href="../fr499208/index.html">√âv√©nements num√©riques √† Moscou du 27 avril au 3 mai</a></li>
<li><a href="../fr499210/index.html">√âv√©nements num√©riques √† Saint-P√©tersbourg du 27 avril au 3 mai</a></li>
<li><a href="../fr499212/index.html">S√©minaires hebdomadaires IBM - avril 2020</a></li>
<li><a href="../fr499216/index.html">Conception au niveau du syst√®me. Partie 2. Architecture d√©taill√©e</a></li>
<li><a href="../fr499220/index.html">Le transfert de d√©veloppeurs vers un site distant en raison du coronavirus a augment√© la productivit√© dans Google et Microsoft</a></li>
<li><a href="../fr499224/index.html">Il est temps de commencer √† bien apprendre</a></li>
<li><a href="../fr499226/index.html">Pas de pand√©mie: comment faire un film sur la crypto-monnaie pour 1000 $ et entrer dans la meilleure distribution de films am√©ricains</a></li>
<li><a href="../fr499230/index.html">Comment √©lever un ver sain et satisfait: analyser le manuel de 1910</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>