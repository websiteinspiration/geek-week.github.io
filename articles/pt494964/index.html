<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏼‍💻 🦏 🎅🏿 Redes neurais e comércio. Implementação prática 🌳 👧🏻 📡</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A moda de negociação está passando por altos e baixos, juntamente com a taxa de câmbio do Bitcoin. Agora, este tópico está em um ponto baixo após um c...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Redes neurais e comércio. Implementação prática</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/494964/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A moda de negociação está passando por altos e baixos, juntamente com a taxa de câmbio do Bitcoin. Agora, este tópico está em um ponto baixo após um crescimento incrível em 2018. Muitos durante esse tempo conseguiram se familiarizar com as trocas de criptomoedas - eles se aprofundaram no assunto, estudaram, negociaram, perderam dinheiro e até ganharam algumas vezes. Como resultado, a moda passou, mas a experiência permaneceu, embora negativa. As palavras “long”, “short”, “spread”, “diver” podem ser ouvidas daqueles de quem você certamente não espera isso. Mas não apenas o comércio de “mãos” atraiu a atenção, também existem bots de negociação. O que temos nesta área, qual é a experiência dos últimos 2-3 anos falando?</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Infelizmente, também não há nada de bom nessa área. Existem muitas ferramentas para escrever bots de negociação, mas não existem estratégias estavelmente lucrativas. Na melhor das hipóteses, uma solução funcional precisa ser constantemente atendida por um par de configurações de comerciante-programador que mudam para o mercado atual. O resultado padrão após conectar um bot totalmente autônomo ao depósito é drenar o depósito.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A última esperança permanece - redes neurais. Isso certamente deve acontecer, porque a rede neural aprende como pessoa e se adapta ao mercado. Como você está nessa área? Bem ... você adivinhou. Tudo está ruim, fala-se muito, mas não há soluções funcionais. Tudo está muito ruim! Um exemplo vívido disso é a loja de aplicativos da comunidade MQL5. Por trás da marca MQL5 há uma plataforma de negociação profissional - MetaTrader5, além de uma enorme comunidade de comerciantes e programadores. Portanto, nesta loja, há uma seção para soluções baseadas em redes neurais, existem muitos bots, mas nenhum real. Adicionar um bot usando uma rede neural é proibido pelas regras. É difícil de acreditar, mas é. A proibição de conectar uma API externa exclui a possibilidade de usar redes neurais, e as ferramentas incorporadas no MQL5 não funcionam na prática. Eu discuti esse problema com o suporte técnico do MQL5,Não recebi uma resposta clara. Como resultado, não há nada realmente pronto no mercado, as soluções da série "ensine a si mesmo", apresentadas no github, não são levadas em consideração.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ok, estou terminando a introdução, estou começando a trabalhar. Consegui treinar uma rede neural, existem resultados dignos no mercado real. Além disso, sem entrar em detalhes, descreverei como isso foi feito.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O primeiro e principal erro de quem está tentando ensinar a rede neural a negociar é o pensamento comercial sobre o mercado. Normalmente, um profissional tenta implementar uma solução baseada em redes neurais junto com um programador que já escreveu bots. O algoritmo do bot de negociação resolve o problema de encontrar o ponto de entrada correto para a posição e determinar o "take" e "stop". Se você tiver essa tarefa em mente ao projetar uma rede neural, nada funcionará. Você pode escolher infinitamente opções engenhosas para inserir dados, aplicar ou não fornecer indicadores, experimentar diferentes tipos de redes neurais, substituir muletas como treinamento apenas em determinadas áreas ou treinar mostrando apenas padrões conhecidos. Não funciona.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Com uma rede neural, você precisa parecer uma criança, olhar o mundo através dos olhos dela e começar com tarefas simples. A pergunta mais simples que pode ser feita é "onde o preço passará por X velas, para cima ou para baixo?". Não importa quanto o preço muda e não importa que a resposta não possa ser transformada em uma estratégia de negociação. Esquecemos a negociação, agora a principal tarefa é educar a rede pelo menos alguma coisa, basta obter a resposta certa.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eu resolvi essa tarefa inicial após 100.500 seleções de entrada. </font><font style="vertical-align: inherit;">Utilizou o TensoFlow plus Keras, uma rede de Sequental Dense. </font><font style="vertical-align: inherit;">Conjunto de dados de entrada para 200 a 300 mil exemplos, recurso de vetor de entrada 250 a 350. </font><font style="vertical-align: inherit;">A forma da resposta segue a rede colocada da pergunta - a classificação binária “up” ou “down”. </font><font style="vertical-align: inherit;">A entrada foi preparada pelo bot no MQL5. </font><font style="vertical-align: inherit;">Um bot percorrendo uma história forma um arquivo csv comum, cada linha é um vetor. </font><font style="vertical-align: inherit;">No final de cada vetor, a resposta correta é 1: 0 se estiver ativo, 0: 1 se estiver inativo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui estão algumas sugestões para quem tenta:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ele estuda bem dentro da previsão de 15 minutos a 60 minutos. </font><font style="vertical-align: inherit;">Em um período mais curto, o caos do movimento dos preços cresce, em um período maior a influência externa aumenta - notícias e assim por diante, 15 a 60 minutos, a zona mais "técnica".</font></font></li>
<li>     BTCUSD,    EURUSD.   —  .</li>
<li>     «     ?     ?».          ,   .</li>
<li>               ,   50%  .   ,      .</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Você precisa entender com qual material estamos lidando. O mercado é um caos de 95%. Quando enviamos dados de treinamento para a rede e indicamos a resposta correta, estamos realmente alimentando o caos. É como tentar treinar uma rede neural para distinguir um gato de um cachorro, e no treinamento para mostrar borboletas, estrelas e signos do zodíaco, não haverá resultado. Por isso, está aqui, mas, felizmente, o mercado fornece cerca de 5% dos padrões realmente funcionais que a rede pode capturar e isso será refletido em suas respostas. Portanto, preste atenção à análise dos resultados do teste. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Usando essa abordagem, obtive o seguinte resultado:</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
em cerca de 2% das respostas, a rede adivinha o movimento adicional na proporção de 2 respostas corretas para 1 incorreta. Ao testar no mercado real, é exatamente isso que acontece, mas surge outro problema. Afinal, temos apenas 2% das perguntas respondidas, ignore o resto. Essa. Lançamos um neuro no mercado real em um período de 5 minutos e esperamos ... a 2% - apenas 50 velas serão respondidas, uma resposta em 4 horas! E o que fazer com isso? Bem, se a resposta foi "comprar / vender", 6 transações por dia são normais, e aqui o resumo "para cima / para baixo" e, em seguida, impreciso, completa decepção.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como resultado, resolvi esse problema com relativa facilidade - a cada 5 minutos, você precisa entrevistar não um modelo, mas 20 a 30 modelos, como resultado das respostas que serão suficientes. Os modelos são treinados em diferentes dados de entrada e, consequentemente, são treinados em diferentes padrões. Na prática, verifica-se que os modelos buzinam com velas diferentes, ativando-se juntos apenas em locais óbvios e previsíveis e não se sobrepõem. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para resumir, agora há algo que pode ser lançado no mercado real e ter sinais de subida / descida com a mineração média. Já é mais divertido, mas o sentido prático ainda é zero.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Algumas palavras sobre a implementação. Funcionou para mim em um monte de MQL5 e Keras. Um bot lançado no MetaTrader5 em cada castiçal preparava dados para uma rede neural e passava por um soquete para um script python, que por sua vez pesquisava todos os modelos e, quando ultrapassava um limite aceitável, enviava um sinal para o canal Telegram.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Portanto, o circuito funciona, mas não pode ser aplicado. Não foi possível adicionar sinais a alguma estratégia. A principal desvantagem é a discrição das respostas. A resposta é um evento ao qual você precisa de alguma forma reagir - observe a situação do mercado, pense se a rede está certa ou não, etc. Em uma vela, um modelo poderia sinalizar para cima, e outro para baixo, e em qual acreditar? Como resultado, nasceu a idéia de abandonar o limiar para passar a resposta e começar a respeitar cada resposta da rede, embora com um baixo grau de confiança. Se você começar a calcular todas as respostas em uma única opinião comum e considerar isso como a resposta da rede, a resposta se tornará uma qualidade completamente diferente. Nesse caso, o conhecimento de todos os modelos começa a tomar forma, e isso é uma enorme quantidade de treinamento conjunto.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por quanto tempo, brevemente, mas depois de todas as alterações, comecei a receber respostas únicas da rede neural para cada vela, expressas como uma porcentagem do tempo de trabalho esperado de -100% a + 100%. O sinal reflete a direção esperada para cima / baixo. Tornou-se claro que agora há um sentido em todas as respostas. Funciona! Eu próprio tenho experiência em negociação e vi como o comportamento da rede diante dos meus olhos se tornou significativo. Às vezes, sua lógica era compreensível, às vezes não, mas suas respostas sempre sentiam sua própria visão, muitas vezes paradoxal, do mercado. Além disso, verificou-se que quanto maior a confiança da rede, mais próximo o desenvolvimento esperado da hora certa e vice-versa. A baixa confiança parecia dizer "o que acontecerá em 15 minutos, eu não sei, mas a tendência geral está em alta".</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Desse lugar, percebi que tentar formalizar tudo isso em sinais de compra / venda é como martelar pregos com um microscópio. O que era necessário era algum tipo de ferramenta para visualizar sinais de redes neurais - uma exibição gráfica do nível de "confiança" em cada vela. Uma ampla gama de ferramentas MQL5 tornou possível colocar tudo isso no Expert para MetaTrader5. O "especialista" por meio da API recebe as respostas da rede neural e está envolvido apenas na renderização. Aqui está um exemplo de seu trabalho no BTCUSD M1: A </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/8c5/976/ce2/8c5976ce22fbaa03814683028e479a8f.jpg" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
área colorida no topo é a previsão "para baixo", a área abaixo é a previsão "para cima", a espessura é o grau de confiança. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nesta fase, a qualidade da previsão não importa, é importante que a rede neural demonstre uma opinião bastante adequada sobre a situação do mercado. Você sempre pode atualizar a rede ainda mais, o principal é que funciona!</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como resultado, hoje existe o Expert para MetaTrader5 com dois tipos de previsões - curto e longo prazo. </font><font style="vertical-align: inherit;">As estatísticas estão se acumulando gradualmente, há feedback dos operadores. </font><font style="vertical-align: inherit;">O resultado obtido inspira mais trabalho, agora precisamos chegar às queridas equipes de "compra / venda". </font><font style="vertical-align: inherit;">Isso pode ser feito aumentando significativamente a qualidade da previsão. </font><font style="vertical-align: inherit;">Então eu vejo este caminho de desenvolvimento:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">É necessário preparar uma dúzia de previsões no intervalo entre 15 e 60 minutos. </font><font style="vertical-align: inherit;">Essa. </font><font style="vertical-align: inherit;">comece a prever “up / down” por 20, 25, 30, 35 minutos e assim por diante até 60. Cada previsão, lembro-me, é construída a partir das respostas de cerca de 20 modelos.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tendo esse volume de informações em cada minuto, é possível e necessário analisá-lo com outra rede neural. </font><font style="vertical-align: inherit;">A conexão entre previsões em diferentes intervalos de tempo pode ser completamente não trivial; portanto, uma rede neural aqui será apropriada.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O conjunto de dados para esta rede neural não será tão barulhento quanto o de seus camaradas mais jovens, portanto, deve ser treinado não em um "up / down" banal, mas em prever a força do movimento de um ativo, e essa é uma saída direta para "comprar / vender".</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
É tudo o que eu queria lhe contar hoje. </font><font style="vertical-align: inherit;">O trabalho continua, acho que haverá mais artigos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A propósito, este Expert para MetaTrader5 é distribuído gratuitamente. Se você quiser ver o trabalho de uma rede neural no mercado real, entre em contato.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt494938/index.html">Feliz dia de backup! Não esqueça dele</a></li>
<li><a href="../pt494940/index.html">DevOps - o que é, por que e quanto é demanda?</a></li>
<li><a href="../pt494942/index.html">CGI em casa com o Unreal Engine e o iPhone</a></li>
<li><a href="../pt494950/index.html">Algumas tendências de armazenamento a serem observadas</a></li>
<li><a href="../pt494956/index.html">Data Byte Life</a></li>
<li><a href="../pt494966/index.html">SCRUM: um poema sobre amor e dor</a></li>
<li><a href="../pt494968/index.html">Cabos de Internet subaquática: quem os encaminha</a></li>
<li><a href="../pt494970/index.html">Introversão: aleatoriedade dentro da margem de erro, ou mecanismo evolutivo de conservação de espécies?</a></li>
<li><a href="../pt494972/index.html">SEMrush vs SimilarWeb - quem é mais preciso?</a></li>
<li><a href="../pt494978/index.html">O que é o Windows PowerShell e o que ele come? Parte 4: Trabalhando com Objetos, Classes Customizadas</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>