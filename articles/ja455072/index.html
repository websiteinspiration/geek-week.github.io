<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏾‍💼 💅🏼 🍓 RTOSに関する真実。記事＃28。ソフトウェアタイマー 👩‍💼 🚭 🍠</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ソフトウェアタイマーのアイデアは、以前の記事で紹介されました。これらは、時間通りにイベントをトリガーする簡単な方法、またはほとんどの場合、定期的にアクションを実行する方法をタスクに提供するカーネルオブジェクトです。Nucleus SEの時間に関連する機能（精度、割り込み処理など）のすべての詳細につい...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>RTOSに関する真実。記事＃28。ソフトウェアタイマー</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/455072/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ソフトウェアタイマーのアイデアは、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以前の記事で</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">紹介されました</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">これらは、時間通りにイベントをトリガーする簡単な方法、またはほとんどの場合、定期的にアクションを実行する方法をタスクに提供するカーネルオブジェクトです。</font><font style="vertical-align: inherit;">Nucleus SEの時間に関連する機能（精度、割り込み処理など）のすべての詳細については、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以前の記事で</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">説明しました</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/xu/5v/_s/xu5v_sdm50mq9i1ywof_lgsvqkw.jpeg"><br>
<a name="habracut"></a><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">シリーズの以前の記事：</font></font></b><div class="spoiler_text"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> #27.  </a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> #26. :     </a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> #25.   :    </a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> #24. :     </a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> #23. :    </a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> #22.  :     </a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> #21.  :    </a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> #20. :     </a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> #19. :    </a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> #18.   :     </a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> #17.   :    </a> <br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> #16. </a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> #15.  :    </a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> #14.  :    </a> <br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> #13.       API</a> <br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> #12.     </a> <br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> #11. :     API</a> <br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> #10. :     </a> <br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> #9. : </a> <br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> #8. Nucleus SE:    </a> <br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> #7. Nucleus SE: </a> <br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> #6.   </a> <br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> #5.     </a> <br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> #4. ,    </a> <br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> #3.   </a> <br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> #2. :     <br>
 #1. : . </a> <br>
</div></div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タイマーを使用する</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ソフトウェアタイマーは、1回だけ動作するように構成できます。つまり、タイマーを開始し、指定された期間の後にサイクルを終了するだけです。</font><font style="vertical-align: inherit;">または、タイマーを再始動するように構成することもできます。カウントが完了すると、タイマーは自動的に再始動します。</font><font style="vertical-align: inherit;">再起動後の稼働時間は、初期稼働時間と異なる場合があります。</font><font style="vertical-align: inherit;">さらに、タイマーはオプションで特別な終了機能を実行するように構成できます。これは、タイマーが作業サイクルを完了するとき（または毎回）に実行されます。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タイマー設定</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タイマーの数</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
核SEのほとんどの側面と同様に、タイマー設定はによって制御され</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。#define</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ディレクティブ</font><font style="vertical-align: inherit;">で</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nuse_config.h</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。主なパラメータは</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_TIMER_NUMBER</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">で、アプリケーションで構成されたタイマーを定義します。デフォルトでは、この値はゼロであり（つまり、アプリケーションではタイマーは使用されません）、最大16の値をとることができます。不正な値はコンパイルエラーにつながり、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nuse_config_check.h</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ファイル</font><font style="vertical-align: inherit;">（このファイルは</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nuse_config.cに</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">含まれ</font><font style="vertical-align: inherit;">、コンパイルされます）それとともに）、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">#error</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ディレクティブをトリガーし</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ゼロ以外の値を選択すると、メインのタイマーアクティベーターになります。</font><font style="vertical-align: inherit;">このパラメーターはデータ構造を定義するときに使用され、そのサイズはその値によって異なります。</font><font style="vertical-align: inherit;">さらに、ゼロ以外の値はAPI設定をアクティブにします。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">補完機能の起動</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nucleus SEで、メモリを節約する機能をオプションにする機会を見つけようとしました。</font><font style="vertical-align: inherit;">良い例は、タイマー完了関数のサポートです。</font><font style="vertical-align: inherit;">この機能は、各タイマのオプションであるという事実に加えて、メカニズムが活性化された（又はしない）を使用してアプリケーション全体のためにすることができる</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_TIMER_EXPIRATION_ROUTINE_SUPPORTの</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パラメータ</font><font style="vertical-align: inherit;">に</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nuse_config.h</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">このパラメーターを</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FALSEに</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">設定</font><font style="vertical-align: inherit;">すると、ROM内の2つのデータ構造の定義がブロックされます。これについては、この記事で詳しく説明します。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">APIアクティベーション</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nucleus SEの各API関数（ユーティリティ呼び出し）には、nuse_config.hにアクティブ化する#defineディレクティブがあります。タイマーのために、これらのシンボルが含まれます：</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_TIMER_CONTROL </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
NUSE_TIMER_GET_REMAINING </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
NUSE_TIMER_RESET </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
NUSE_TIMER_INFORMATION </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
NUSE_TIMER_COUNT</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ことでデフォルトは、全ての活性剤は次のように設定されている</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FALSE</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">彼らのインクルージョンコードをブロックし、すべてのサービスコールが無効になっているように、。アプリケーションでタイマーを設定するには、必要なAPIサービス呼び出しを選択して、それらを</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TRUEに</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">設定する必要があります</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以下は、</font><font style="vertical-align: inherit;">デフォルトの</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nuse_config.h</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ファイルからのコードのスニペットです</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="plaintext hljs">#define NUSE_TIMER_NUMBER 0/*      0-16 */<font></font>
                                 /*    */<font></font>
   #define NUSE_TIMER_CONTROL          FALSE<font></font>
   #define NUSE_TIMER_GET_REMAINING    FALSE<font></font>
   #define NUSE_TIMER_RESET            FALSE<font></font>
   #define NUSE_TIMER_INFORMATION      FALSE<font></font>
   #define NUSE_TIMER_COUNT            FALSE<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
タイマー関連のAPI関数がアクティブになっていて、アプリケーションにタイマーが構成されていない</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">場合（</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">常に有効になっ</font><font style="vertical-align: inherit;">ている</font><b><font style="vertical-align: inherit;">NUSE_Timer_Count（）</font></b><font style="vertical-align: inherit;">関数を除く</font><font style="vertical-align: inherit;">）、コンパイルエラーが発生します。</font><font style="vertical-align: inherit;">コードがアクティブ化されていないAPI呼び出しを使用する場合、実装コードがアプリケーションに含まれていないため、レイアウトエラーが発生します。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タイマー呼び出し</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nucleus RTOSは、次の機能を提供する8つのタイマー関連ユーティリティコールをサポートしています。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">管理（開始/停止）タイマー。</font><font style="vertical-align: inherit;">Nucleus SEは</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_Timer_Control（）</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">関数に実装されています</font><font style="vertical-align: inherit;">。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">残りのタイマー時間を取得します。</font><font style="vertical-align: inherit;">Nucleus SEでは、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_Timer_Get_Remaining（）に</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">実装されてい</font><font style="vertical-align: inherit;">ます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タイマーを元の状態に戻します（リセット）。</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_Timer_Reset（）に</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">実装されたNucleus SE </font><font style="vertical-align: inherit;">。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">特定のタイマーに関する情報を提供します。</font><font style="vertical-align: inherit;">Nucleus SEは</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_Timer_Information（）に</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">実装されてい</font><font style="vertical-align: inherit;">ます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アプリケーションで構成されている（現在）タイマーの数を返します。</font><font style="vertical-align: inherit;">Nucleus SEでは、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_Timer_Count（）に</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">実装されてい</font><font style="vertical-align: inherit;">ます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新しいタイマーをアプリケーション（作成）に追加します。</font><font style="vertical-align: inherit;">Nucleus SEは実装されていません。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アプリケーションからタイマーを削除します。</font><font style="vertical-align: inherit;">Nucleus SEは実装されていません。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アプリケーション内のすべてのタイマーへのポインターを返します。</font><font style="vertical-align: inherit;">Nucleus SEは実装されていません。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
各サービスコールの実装については、以下で詳しく説明します。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タイマーサービス</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
タイマーで実行できる基本的な操作は、制御（開始と停止）と現在値の読み取りです。</font><font style="vertical-align: inherit;">Nucleus RTOSとNucleus SEは、これらの操作のための2つの基本的なAPIユーティリティ呼び出しを提供します。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タイマー制御</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
タイマーを制御するためのNucleus RTOS APIへのユーティリティ呼び出しにより、タイマーをアクティブおよび非アクティブにすることができます（開始および停止）。 Nucleus SEは同様の機能を提供します。</font></font><br>
<br>
<b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nucleus RTOS</font></font></i></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
サービスの呼び出しプロトタイプで</font><b><i><font style="vertical-align: inherit;">タイマーを制御するための</font></i></b><font style="vertical-align: inherit;">呼び出し：</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">STATUS NU_Control_Timer（NU_TIMER * timer、OPTION enable）;</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
パラメータ：</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">timer-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ユーザーが提供するタイマー制御ユニットへのポインター。</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">enable</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は必須の関数であり、値</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NU_ENABLE_TIMER</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">または</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NU_DISABLE_TIMERを</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">取ることができます</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
戻り値：</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NU_SUCCESS-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">呼び出しは正常に完了しました。</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NU_INAVLID_TIMER-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">無効なタイマーポインター。</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NU_INAVLID_ENABLE-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">無効な関数。</font></font><br>
<br>
<b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nucleus SEタイマー制御呼び出し</font></font></i></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
このAPI呼び出しは、Nucleus RTOS APIのすべての機能をサポートしています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
サービス呼び出しプロトタイプ：</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">STATUS NUSE_Timer_Control（NUSE_TIMERタイマー、OPTION有効）;</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
パラメータ：</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">timer-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用されたタイマーのインデックス（ID）。</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">enable</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は必須の関数であり、値</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_ENABLE_TIMER</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">または</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_DISABLE_TIMERを</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">取ることができます</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
戻り値：</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_SUCCESS-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">呼び出しは正常に完了しました。</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_INCALID_TIMER-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">無効なタイマーインデックス。</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_INVALID_ENABLE</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は無効な関数です。</font></font><br>
<br>
<b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nucleus SE</font></font></i></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
API関数コード</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> NUSE_Timer_Control（）</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（パラメーターをチェックした後</font><b><font style="vertical-align: inherit;">）</font></b><b><i><font style="vertical-align: inherit;">でのタイマー制御の実装</font></i></b><font style="vertical-align: inherit;">は非常に簡単です。</font></font><br>
<br>
<pre><code class="plaintext hljs">NUSE_CS_Enter();<font></font>
if (enable == NUSE_ENABLE_TIMER)<font></font>
{<font></font>
   NUSE_Timer_Status[timer] = TRUE;<font></font>
   if (NUSE_Timer_Expirations_Counter[timer] == 0)<font></font>
   {<font></font>
      NUSE_Timer_Value[timer] = NUSE_Timer_Initial_Time[timer];<font></font>
   }<font></font>
   else<font></font>
   {<font></font>
      NUSE_Timer_Value[timer] = NUSE_Timer_Reschedule_Time[timer];<font></font>
   }<font></font>
}<font></font>
else  /* enable == NUSE_DISABLE_TIMER */<font></font>
{<font></font>
   NUSE_Timer_Status[timer] = FALSE;<font></font>
}<font></font>
NUSE_CS_Exit();<font></font>
</code></pre><br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_DISABLE_TIMER</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
関数が指定された</font><font style="vertical-align: inherit;">場合、タイマーステータス（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_Timer_Status []</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パラメーター</font><font style="vertical-align: inherit;">）は</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FALSE</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に</font><font style="vertical-align: inherit;">設定さ</font><font style="vertical-align: inherit;">れ、割り込みハンドラーによってタイマーが無視</font><font style="vertical-align: inherit;">され</font><b><font style="vertical-align: inherit;">ます</font></b><font style="vertical-align: inherit;">。</font><b><font style="vertical-align: inherit;">NUSE_ENABLE_TIMER</font></b></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
関数を選択する</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、タイマーカウンター（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_Timer_Value []</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）が</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_Timer_initial_Time []に</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">設定されます。</font><b><font style="vertical-align: inherit;">ただし</font></b><font style="vertical-align: inherit;">、最後のリセット以降、タイマーが停止していない場合に限ります。</font><font style="vertical-align: inherit;">それ以外の場合は、値</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_Timer_Reschedule_Time []</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が割り当てられます</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">次に、タイマーのステータス（パラメーター</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_Timer_Status []</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）が</font><b><font style="vertical-align: inherit;">TRUEに</font></b><font style="vertical-align: inherit;">設定されます。</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これは、タイマーが割り込みハンドラーによって処理されるという事実につながります。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タイマー読み取り</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
残りのタイマー時間を取得するために、Nucleus RTOS APIサービス呼び出しは、期限が切れるまでメジャーの数を返します。 Nucleus SEは同様の機能を提供します。</font></font><br>
<br>
<b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nucleus RTOS</font></font></i></b> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
サービス呼び出しプロトタイプ</font><b><i><font style="vertical-align: inherit;">で残り時間を取得するための</font></i></b><font style="vertical-align: inherit;">呼び出し：</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">STATUS NU_Get_Remaining_Time（NU_TIMER * timer、UNSIGNED * remaining_time）;</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
パラメータ：</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">timer-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ユーザーが提供するタイマー制御ブロックへのポインター。</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">remaining_time-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タイプ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UNSIGNEDの</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">変数である、残り時間の値のストレージへのポインタ</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
戻り値</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NU_SUCCESS-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">呼び出しは正常に完了しました。</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NU_INVALID_TIMER</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-タイマーポインターが無効です。</font></font><br>
<br>
<b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nucleus SEの残り時間を取得するための</font></font></i></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
呼び出しこのAPI呼び出しは、Nucleus RTOS APIのすべての機能をサポートしています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
サービス呼び出しプロトタイプ：</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">STATUS NUSE_Timer_Get_Remaining（NUSE_TIMERタイマー、U16 *残りの時間）;</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
パラメータ：</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">timer-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用されたタイマーのインデックス（ID）。</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">remaining_time-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タイプ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">U16の</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">変数である、残り時間の値のストレージへのポインター</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
戻り値：</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_SUCCESS-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">呼び出しは正常に完了しました。</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_INVALID_TIMER-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">無効なタイマーインデックス。</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_INVALID_POINTER-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">残り時間へのNULLポインター（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NULL</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font><br>
<br>
<b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nucleus SEで</font></font></i></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
の</font><b><i><font style="vertical-align: inherit;">タイマー読み取りの実装</font></i></b></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> NUSE_Timer_Get_Remaining（）</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> API関数コード</font><b><font style="vertical-align: inherit;">バリアント（）</font></b><font style="vertical-align: inherit;">（パラメーターをチェックした後）は非常に簡単です。</font><font style="vertical-align: inherit;">値</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_Timer_Value []が</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">取得され、クリティカルセクションに返されます。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">補助タイマーサービス</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nucleus RTOSには、タイマーに関連する補助機能を提供する4つのAPI呼び出しがあります。タイマーのリセット、タイマー情報の取得、アプリケーション内のタイマー数の取得、アプリケーション内のすべてのタイマーへのポインターの取得です。</font><font style="vertical-align: inherit;">最初の3つの機能はNucleus SEに実装されています。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タイマーリセット</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このAPI呼び出しは、タイマーを元の未使用の状態にリセットします。タイマーは、このコールの終了後にアクティブ化または非アクティブ化できます。タイマーが無効化された後にのみ使用できます（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_Timer_Control（）</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用</font><font style="vertical-align: inherit;">）。次回タイマーがアクティブになると、タイマーは</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_Timer_Initial_Time []</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パラメータで初期化されます</font><font style="vertical-align: inherit;">。 Nucleus RTOSを使用すると、新しい初期状態と再スケジュール時間を提供できるだけでなく、タイマーがリセットされたときに完了関数を指定できます。 Nucleus SEでは、これらの値はセットアップ中に設定され、ROMに格納されているため変更できません。</font></font><br>
<br>
<b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nucleus RTOS</font></font></i></b> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
サービス呼び出しプロトタイプの</font><b><i><font style="vertical-align: inherit;">タイマーをリセットするための</font></i></b><font style="vertical-align: inherit;">呼び出し：</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">STATUS NU_Reset_Timer（NU_TIMER *タイマー、VOID（* expiration_routine）（UNSIGNED）、UNSIGNED initial_time、UNSIGNED reschedule_time、OPTION enable）;</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
パラメータ：</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タイマー</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -リセットタイマーへのポインタ。</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">expiration_routine-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ループが終了したときに実行される関数を示します。</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">initial_time-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ループが終了するまでのタイマー刻みの初期数。</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">reschedule_time</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -2番目以降のサイクルが完了するまでのタイマー</font><b><font style="vertical-align: inherit;">刻み</font></b><font style="vertical-align: inherit;">の数。</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有効</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -リセット後のタイマーの必要な状態を、値を取ることができ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NU_ENABLE_TIMER</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">または</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NU_DISABLE_TIMER</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
戻り値：</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NU_SUCCESS-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">呼び出しは正常に完了しました。</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NU_INVALID_TIMER-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タイマー制御ユニットへの無効なポインター。</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NU_INVALID_FUNCTION-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">補完関数へのNULLポインター（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NULL</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）; </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NU_INVALID_ENABLE-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指定された状態が正しくありません。</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NU_NOT_DISABLED-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タイマーはすでに実行中です（この関数を呼び出す前に停止する必要があります）。</font></font><br>
<br>
<b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nucleus SEタイマーリセット</font></font></i></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
呼び出しこのAPIサービス呼び出しは、Nucleus RTOS APIのコア機能の簡易バージョンをサポートしています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
サービス呼び出しプロトタイプ：</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">STATUS NUSE_Timer_Reset（NUSE_TIMERタイマー、OPTION有効）;</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
パラメータ：</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">timer-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リセットタイマーのインデックス（ID）。</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可能にする</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-リセット後の望ましい状態は、値</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_ENABLE_TIMER</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">または</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_DISABLE_TIMERを</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">取ることができます</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
戻り値：</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_SUCCESS-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">呼び出しは正常に完了しました。</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_INVALID_TIMER-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">無効なタイマーインデックス。</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_INVALID_ENABLE-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指定された状態が正しくありません。</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_NOT_DISABLED-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タイマーはすでに実行中です（この関数を呼び出す前に停止する必要があります）。</font></font><br>
<br>
<b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nucleus SEで</font></font></i></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
の</font><b><i><font style="vertical-align: inherit;">タイマーリセットの実装</font></i></b></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> NUSE_Timer_Reset（）</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> API関数コードの変種</font><font style="vertical-align: inherit;">（パラメーターと現在のステータスをチェックした後）は非常に簡単です。</font></font><br>
<br>
<pre><code class="plaintext hljs">NUSE_CS_Enter();<font></font>
NUSE_Init_Timer(timer);<font></font>
if (enable == NUSE_ENABLE_TIMER)<font></font>
{<font></font>
   NUSE_Timer_Status[timer] = TRUE;<font></font>
}<font></font>
/*  enable == NUSE_DISABLE_TIMER    FALSE */<font></font>
NUSE_CS_Exit();<font></font>
</code></pre><br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_Init_Timer（）を</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
呼び出すと</font><font style="vertical-align: inherit;">、時間値が初期化され、完了カウンターがクリアされます。</font><font style="vertical-align: inherit;">その後、必要に応じて、必要な状態の値とタイマーがオンになっているかどうかがチェックされます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タイマー情報</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このサービスコールでは、一連のタイマー情報を取得できます。 Nucleus SEの実装は、オブジェクトの命名がサポートされていないため、返される情報が少ないという点でNucleus RTOSとは異なります。</font></font><br>
<br>
<b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nucleus RTOS</font></font></i></b> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
サービスコールプロトタイプ</font><b><i><font style="vertical-align: inherit;">でタイマー情報を</font></i></b><font style="vertical-align: inherit;">要求し</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
パラメータ：</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">timer-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">情報が要求されるタイマーへのポインタ。</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名前</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -タイマー名の8文字領域へのポインタ。</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有効</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -タイマー活性化因子の現在の状態をとる変数へのポインタ：</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NU_ENABLE_TIMER</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">かを</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NU_DISABLE_TIMER</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ; </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有効期限</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -最後のリセット以降のタイマーサイクルの完了数のカウンターを取得する変数へのポインター。</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">id-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タイマーサイクル終了関数に渡されるパラメーターの値を受け取る変数へのポインター。</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">initial_time-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リセット後にタイマーが初期化される値を取る変数へのポインター。</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">reschedule_time-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">完了後にタイマーが初期化される値を取る変数へのポインター。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
戻り値：</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NU_SUCCESS-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">呼び出しは正常に完了しました。</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NU_INVALID_TIMER-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">無効なタイマーポインター。</font></font><br>
<br>
<b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nucleus SEでのタイマー情報の</font></font></i></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
呼び出しこのAPI呼び出しは、Nucleus RTOS APIのコア機能をサポートしています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
サービス呼び出しプロトタイプ：</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> STATUS NUSE_Timer_Information（NUSE_TIMERタイマー、OPTION *有効、U8 *有効期限、U8 * id、U16 * initial_time、U16 * reschedule_time）;</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
パラメータ：</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> timer-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">情報が要求されるタイマーのインデックス。</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">イネーブル</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -値とる変数へのポインタ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> TRUE</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">または</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> FALSEを</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タイマーが起動されているか否かに応じて、。</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有効期限</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -</font><font style="vertical-align: inherit;">最後のリセット以降のタイマー完了数の値を取る</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> U8</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">型の変数へのポインター</font><font style="vertical-align: inherit;">。</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> id</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font><font style="vertical-align: inherit;">タイマー完了関数に渡されたパラメーターの値を取る</font><font style="vertical-align: inherit;">タイプ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">U8の</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">変数へのポインター</font><font style="vertical-align: inherit;">（完了関数が無効になっている場合は空の値を返します）。</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">initial_time-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タイマーがリセット後に初期化される値を取る</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">U16</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">型の変数へのポインター</font><font style="vertical-align: inherit;">。</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">reschedule_time-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タイマーが完了後に初期化される値を取る</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">U16</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">型の変数へのポインター</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
戻り値：</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_SUCCESS-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">呼び出しは正常に完了しました。</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_INVALID_TIMER-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">無効なタイマーインデックス。</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_INVALID_POINTER</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -1つ以上のポインターパラメーターが正しくありません。</font></font><br>
<br>
<b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nucleus SEでのタイマー情報の</font></font></i></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
実装このAPI呼び出しの実装は非常に簡単です。</font></font><br>
<br>
<pre><code class="plaintext hljs">NUSE_CS_Enter();<font></font>
if (NUSE_Timer_Status[timer])<font></font>
{<font></font>
   *enable = NUSE_ENABLE_TIMER;<font></font>
}<font></font>
else<font></font>
{<font></font>
   *enable = NUSE_DISABLE_TIMER;<font></font>
}<font></font>
*expirations = NUSE_Timer_Expirations_Counter[timer];<font></font>
#if NUSE_TIMER_EXPIRATION_ROUTINE_SUPPORT<font></font>
   *id = NUSE_Timer_Expiration_Routine_Parameter[timer];<font></font>
#endif<font></font>
*initial_time = NUSE_Timer_Initial_Time[timer];<font></font>
*reschedule_time = NUSE_Timer_Reschedule_Time[timer];<font></font>
NUSE_CS_Exit();<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この関数は、タイマーのステータスを返します。</font><font style="vertical-align: inherit;">終了関数のパラメーター値は、それらのサポートがアプリケーションでアクティブ化されている場合にのみ返されます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タイマーの数を取得する</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このユーティリティ呼び出しは、アプリケーションで構成されたタイマーの数を返します。 Nucleus RTOSでは、この値は時間とともに変化する可能性があり、戻り値には現在のタイマー数が表示されます。 Nucleus SEでは、戻り値はアセンブリ段階で設定され、変更できません。</font></font><br>
<br>
<b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nucleus RTOS</font></font></i></b> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
サービス呼び出しプロトタイプ</font><b><i><font style="vertical-align: inherit;">でタイマーカウンターを</font></i></b><font style="vertical-align: inherit;">呼び出します</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。UNSIGNED NU_Established_Timers（VOID）;</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
パラメータ：なし</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
戻り値：システムで作成されたタイマーの数。</font></font><br>
<br>
<b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nucleus SEタイマーカウンターコール</font></font></i></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
このAPIコールは、Nucleus RTOS APIのコア機能をサポートしています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
サービス呼び出しプロトタイプ：</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">U8 NUSE_Timer_Count（void）;</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
パラメータ：なし</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
戻り値：</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アプリケーションで構成されたタイマーの数</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タイマーカウンターの実装</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このAPI呼び出しの実装は非常に簡単です</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">#define </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_TIMER_NUMBER</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">シンボルの値が</font><b><font style="vertical-align: inherit;">返され</font></b><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">データ構造</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
タイマーは5つまたは7つのデータ構造（RAMまたはROMに配置）を使用します（他のNucleus SEオブジェクトと同様に）。これはテーブルのセットであり、そのサイズと数は設定されたタイマーと選択されたパラメーターの数に対応します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アプリケーションコードでは、これらのデータ構造への直接アクセスを使用せず、提供されているAPI関数を介してそれらを参照することを強くお勧めします。</font><font style="vertical-align: inherit;">これにより、Nucleus SEの将来のバージョンとの非互換性や不要な副作用が回避され、Nucleus RTOSへのアプリケーションの移植が簡素化されます。</font><font style="vertical-align: inherit;">以下は、サービスコールとデバッグコードの理解を簡素化するための構造の詳細な概要です。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RAMデータ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このデータの構造は次のとおりです</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。NUSE_Timer_Status []</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font><font style="vertical-align: inherit;">構成されたタイマーごとに1つのレコードを持ち、タイマーのステータス（実行中または停止中：</font><b><font style="vertical-align: inherit;">TRUE</font></b><font style="vertical-align: inherit;">または</font><b><font style="vertical-align: inherit;">FALSE</font></b><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">を格納する</font><font style="vertical-align: inherit;">タイプ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">U8の</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">配列</font><font style="vertical-align: inherit;">。</font><b><font style="vertical-align: inherit;">NUSE_Timer_Value []</font></b><font style="vertical-align: inherit;">は、</font><font style="vertical-align: inherit;">構成されたタイマーごとに1つのエントリを持ち、タイマーカウンターの現在の値を格納する</font><font style="vertical-align: inherit;">タイプ</font><b><font style="vertical-align: inherit;">U16の</font></b><font style="vertical-align: inherit;">配列です</font><font style="vertical-align: inherit;">。</font><b><font style="vertical-align: inherit;">NUSE_Timer_Expirations_Counter []</font></b><font style="vertical-align: inherit;"> - </font><font style="vertical-align: inherit;">タイマーが最後にリセットされてからサイクルの最後に達した場合の数のカウンターを含む、</font><font style="vertical-align: inherit;">タイプ</font><b><font style="vertical-align: inherit;">U8の</font></b><font style="vertical-align: inherit;">配列</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">
これらのデータ構造はすべて、</font><b><font style="vertical-align: inherit;">NUSE_Init_Timer（）</font></b><font style="vertical-align: inherit;">関数によって初期化されます</font><b><font style="vertical-align: inherit;">。</font></b></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nucleus SEを起動したとき。</font><font style="vertical-align: inherit;">次の記事の1つで、Nucleus SEの起動手順の詳細を説明します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以下では、これらのデータ構造の定義です</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nuse_init.c</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ファイル</font><font style="vertical-align: inherit;">：</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[NUSE_TIMER_NUMBER] RAM U8 Timer_Status。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
RAM U16 NUSE_Timer_Value [NUSE_TIMER_NUMBER]; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
RAM U8 NUSE_Timer_Expirations_Counter [NUSE_TIMER_NUMBER];</font></font></b><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ROMデータ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このデータの構造：</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_Timer_Initial_Time []</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font><font style="vertical-align: inherit;">構成されたタイマーごとに1つのエントリを持ち、各タイマーの値を格納する</font><font style="vertical-align: inherit;">タイプ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">U16の</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">配列</font><font style="vertical-align: inherit;">。</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_Timer_Reschedule_Time []</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、</font><font style="vertical-align: inherit;">構成されたタイマーごとに1つのエントリを持ち、完了後にタイマーが設定される値を格納する</font><font style="vertical-align: inherit;">タイプ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">U16の</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">配列です</font><font style="vertical-align: inherit;">。ゼロの値は、タイマーが「1回限り」であり、自動的に再起動しないことを示します。</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_Timer_Expiration_Routine_Address []</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font><font style="vertical-align: inherit;">タイマーの有効期限プロシージャのアドレスを含む</font><font style="vertical-align: inherit;">タイプ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ADDRの</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">配列</font><font style="vertical-align: inherit;">。この配列が存在するのは、タイマーの有効期限手順のサポートがアクティブになっている場合のみです。</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_Timer_Expiration_Routine_Parameter []</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font><font style="vertical-align: inherit;">タイマー完了関数に渡されるパラメーターの値を含む</font><font style="vertical-align: inherit;">タイプ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">U8の</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">配列</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">この配列は、補完機能のサポートが有効になっている場合にのみ存在します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらのデータ構造は、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nuse_config.c</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ファイル</font><font style="vertical-align: inherit;">で</font><font style="vertical-align: inherit;">宣言されて（静的に）初期化されます</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="plaintext hljs">ROM U16 NUSE_Timer_Initial_Time[NUSE_TIMER_NUMBER] =<font></font>
{<font></font>
   /*   ------ */<font></font>
};<font></font>
ROM U16 NUSE_Timer_Reschedule_Time[NUSE_TIMER_NUMBER] =<font></font>
{<font></font>
   /*      ------ */<font></font>
};<font></font>
#if NUSE_TIMER_EXPIRATION_ROUTINE_SUPPORT || NUSE_INCLUDE_EVERYTHING<font></font>
   /*    */<font></font>
   ROM ADDR<font></font>
      NUSE_Timer_Expiration_Routine_Address[NUSE_TIMER_NUMBER] =<font></font>
   {<font></font>
      /*     ------ */<font></font>
      /*   NULL */<font></font>
   };<font></font>
   ROM U8<font></font>
      NUSE_Timer_Expiration_Routine_Parameter[NUSE_TIMER_NUMBER] =<font></font>
   {<font></font>
      /*     ------ */<font></font>
   };<font></font>
#endif<font></font>
</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タイマーのメモリ量</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
他のすべてのNucleus SEオブジェクトと同様に、タイマーに必要なデータの量は予測可能です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アプリケーションのすべてのタイマーのRAMのデータ量（バイト単位）は、次のように計算できます</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。NUSE_TIMER_NUMBER * 4</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
アプリケーションのすべてのタイマーのROMのデータ量（バイト単位）は、終了機能のサポートが無効になっている場合、次のように計算できます</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。NUSE_TIMER_NUMBER * 4</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
それ以外の場合：</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_TIMER_NUMBER *（sizeof（ADDR）+ 5）</font></font></b><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">未実現のAPI呼び出し</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nucleus SEは、RTOSにある3つのAPI呼び出しを実装していません。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タイマー作成</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このAPI呼び出しはタイマーを作成します。タイマーは静的に作成されるため、Nucleus SEでは必要ありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
サービス呼び出しのプロトタイプ：</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">STATUS NU_Create_Timer（NU_TIMER * timer、CHAR * name、VOID（* expiration_routine）（UNSIGNED）、UNSIGNED id、UNSIGNED initial_time、UNSIGNED reschedule_time、OPTION enable）;</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
パラメータ：</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">timer-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ユーザーが提供するタイマー制御ユニットへのポインター。他のAPI呼び出しでタイマーを制御するために使用されます。</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名前</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -終端ゼロとタイマーの7文字の名前へのポインタ。</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">expiration_routine-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タイマーの終了後に実行する必要がある関数を示します。</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ID</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -タイプのデータ要素</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UNSIGNED</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">終了機能に送信：このパラメーターを使用して、同じ終了機能を持つタイマーを識別できます。</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">initial_time-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タイマーが終了するまでのタイマーティックの初期数を示します。</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">reschedule_time</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -2番目以降のサイクルが完了するまでのタイマー</font><b><font style="vertical-align: inherit;">ティック</font></b><font style="vertical-align: inherit;">の数を示します。このパラメーターがゼロの場合、タイマーは1回だけ停止します。</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有効</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -このパラメータが値を取ることができ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NU_ENABLE_TIMER</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NU_DISABLE_TIMERを</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NU_ENABLE_TIMER</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、作成後にタイマーをアクティブにします。</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NU_DISABLE_TIMER</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はタイマーを無効のままにします。</font><b><font style="vertical-align: inherit;">NU_DISABLE_TIMER</font></b><font style="vertical-align: inherit;">パラメータで作成されたタイマー</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NU_Control_Timer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を呼び出してアクティブにする必要があります</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
戻り値：</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NU_SUCCESS-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">呼び出しは正常に完了しました。</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NU_INVALID_TIMER-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タイマーコントロールユニットへのnullポインター（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NULL</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）、またはコントロールユニットがすでに使用されています。</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NU_INVALID_FUNCTION-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">完了プログラムへのNULLポインター（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NULL</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）; </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NU_INVALID_ENABLE-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">無効な</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有効</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">化パラメータ</font><font style="vertical-align: inherit;">。</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NU_INVALID_OPERATION</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">initial_time</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パラメータ</font><font style="vertical-align: inherit;">がゼロでした。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タイマーを削除</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このAPI呼び出しは、以前に作成されたタイマーを削除します。</font><font style="vertical-align: inherit;">タイマーは静的に作成され、削除できないため、Nucleus SEでは必要ありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
サービス呼び出しプロトタイプ：</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">STATUS NU_Delete_Timer（NU_TIMER * timer）; </font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
パラメータ：</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">timer-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タイマーコントロールユニットへのポインター。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
戻り値：</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NU_SUCCESS-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">呼び出しは正常に完了しました。</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NU_INVALID_TIMER-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">無効なタイマーポインター。</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NU_NOT_DISABLED-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指定されたタイマーは無効になっていません。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タイマーポインター</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このAPI呼び出しは、システム内のすべてのタイマーへのポインターの順次リストを形成します。</font><font style="vertical-align: inherit;">タイマーはポインターではなく単純なインデックスによって決定されるため、Nucleus SEはそれを必要としません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
サービス呼び出しプロトタイプ：</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UNSIGNED NU_Timer_Pointers（NU_TIMER ** pointer_list、UNSIGNED maximum_pointers）; </font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
パラメータ：</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pointer_list-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ポインタの配列へのポインタ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NU_TIMER</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ; </font><font style="vertical-align: inherit;">システムに構成されているタイマーへのポインターが入力されます。</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">maximum_pointers-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">配列内のポインターの最大数。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
戻り値：</font><font style="vertical-align: inherit;">配列に配置された</font><b><font style="vertical-align: inherit;">NU_TIMER</font></b></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ポインター</font><font style="vertical-align: inherit;">の</font><font style="vertical-align: inherit;">数</font><font style="vertical-align: inherit;">。</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nucleus RTOS互換</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
他のすべてのNucleus SEオブジェクトと同様に、私の目標はNucleus RTOSとのアプリケーションコードの互換性を最大化することでした。</font><font style="vertical-align: inherit;">タイマーも例外ではなく、ユーザーの観点から見ると、Nucleus RTOSと同じ方法で実装されています。</font><font style="vertical-align: inherit;">結果として、必要なメモリ量の観点からコードが理解しやすくなり効率的になることを考えると、ある程度の非互換性もありますが、これは許容できると考えました。</font><font style="vertical-align: inherit;">それ以外の場合は、Nucleus RTOS API呼び出しをほとんど直接Nucleus SEに移植できます。</font></font><br>
 <br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オブジェクト識別子</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nucleus RTOSでは、すべてのオブジェクトはデータ構造（特定のデータタイプを持つ制御ユニット）によって記述されます。この制御ユニットへのポインタは、タイマー識別子として機能します。 Nucleus SEでは、メモリを効率的に使用するために別のアプローチが必要であると判断しました。すべてのカーネルオブジェクトは、RAMやROM内の一連のテーブルによって記述されます。これらのテーブルのサイズは、各タイプの構成済みオブジェクトの数によって決まります。特定のオブジェクトの識別子は、このテーブルのインデックスです。したがって</font><font style="vertical-align: inherit;">、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUSE_TIMER</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><b><font style="vertical-align: inherit;">U8</font></b><font style="vertical-align: inherit;">と同等のものとして</font><font style="vertical-align: inherit;">定義し</font><b><font style="vertical-align: inherit;">ました</font></b></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、このタイプの変数（ポインタではない）は、タイマーの識別子として機能します。</font><font style="vertical-align: inherit;">このわずかな非互換性は、コードがNucleus SEからNucleus RTOSに、またはその逆に移植されている場合、簡単に処理できます。</font><font style="vertical-align: inherit;">通常、オブジェクト識別子に対しては、移動と保存以外の操作は実行されません。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nucleus RTOSは、命名タイマーもサポートしています。</font><font style="vertical-align: inherit;">これらの名前はデバッグにのみ使用されます。</font><font style="vertical-align: inherit;">メモリを節約するために、それらをNucleus SEから除外しました。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タイマーサイズ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nucleus RTOSでは、タイマーは32ビットカウンターを使用して実装されます。</font><font style="vertical-align: inherit;">Nucleus SEでは、この値を16ビットに減らすことにしました。</font><font style="vertical-align: inherit;">これにより、メモリ効率とランタイムが大幅に改善されました。</font><font style="vertical-align: inherit;">アプリケーションがより長い実行時間を必要とする場合は、Nucleus SEを変更できます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">補完機能</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nucleus SEは、Nucleus RTOSと同様の方法で終了関数を実装し、完全にオフにできる（メモリを節約できる）だけであり、静的に決定されます。</font><font style="vertical-align: inherit;">タイマーをリセットした場合、完了関数は変更できません。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">未実現のAPI呼び出し</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nucleus RTOSは8つのタイマーサービスコールをサポートします。</font><font style="vertical-align: inherit;">これらのうち、3つはNucleus SEに実装されていません。</font><font style="vertical-align: inherit;">これらの呼び出しの詳細な説明とこの決定の理由は、この記事の前半の「未実現のAPI呼び出し」セクションにあります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次の記事では、中断について説明します。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja455062/index.html">Yandex.Navigatorの成功した（そうではない）実験の事例</a></li>
<li><a href="../ja455064/index.html">才能対運：成功と失敗におけるチャンスの役割</a></li>
<li><a href="../ja455066/index.html">システム分析MeetUp UPD2のブロードキャストとプレゼンテーション</a></li>
<li><a href="../ja455068/index.html">ゼロバグポリシー。バグなし-問題ありませんか？</a></li>
<li><a href="../ja455070/index.html">インタビューでリンクリストについてよく尋ねられる理由</a></li>
<li><a href="../ja455076/index.html">GameDev TDDまたはRabbit Hell</a></li>
<li><a href="../ja455078/index.html">夏のどこでApache Igniteと分散システムについて話すか</a></li>
<li><a href="../ja455080/index.html">Старикам здесь не место? Программируем после тридцати пяти</a></li>
<li><a href="../ja455082/index.html">MITER ATT＆CKを勉強しています。モバイルマトリックス：デバイスアクセス。パート4</a></li>
<li><a href="../ja455088/index.html">インタビューとテスト項目は何をテストしますか？</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>