<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üíä ü§πüèø üë®üèø‚Äçüè´ Je suis d√©veloppeur Android et je n'aimais pas faire de travail manuel. üë¥üèæ üë®üèΩ‚Äçüåæ üë©‚Äçüë©‚Äçüë¶‚Äçüë¶</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Quand je me suis install√© √† Skyeng, le soleil brillait un peu plus, l'herbe n'√©tait pas plus verte (c'√©tait le m√™me d√©but de printemps) et le chef d'√©...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Je suis d√©veloppeur Android et je n'aimais pas faire de travail manuel.</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/skyeng/blog/490784/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quand je me suis install√© √† Skyeng, le soleil brillait un peu plus, l'herbe n'√©tait pas plus verte (c'√©tait le m√™me d√©but de printemps) et le chef d'√©quipe m'a demand√© d'√©crire √† Jira combien de temps a √©t√© consacr√© au codage, et combien de discussions et de r√©visions. Au moins une fois toutes les deux semaines. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/p0/gd/rw/p0gdrwyypbzz6wn81ybvknbmohq.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Sur la base de ces donn√©es, nous essayons de comprendre s'il est n√©cessaire d'ajuster les estimations et s'il y a des probl√®mes de communication dans l'√©quipe", ont-ils d√©clar√©. Mais √† qui une telle ¬´babayka¬ª n'a-t-elle jamais √©t√© r√©v√©l√©e?</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Puisque nous sommes tous des travailleurs √† distance, l'id√©e semblait raisonnable. Et il est devenu int√©ressant pour moi o√π ces huit heures √©taient pass√©es: les voil√†, mais pour quoi exactement? Cependant, l'exploitation foresti√®re √©tait inhabituelle. Et dans la paresse g√©n√©rale. J'ai alors d√©cid√© de chercher quelque chose qui continuerait √† fonctionner pour moi. Et en cours de recherche, je me suis un peu emport√© et j'ai √©crit mon plugin pour IntelliJ IDEA. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous trouverez ci-dessous</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">examen subjectif des outils finis et de mon v√©lo</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (avec source).</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">J'√©tudie les solutions que l'√©quipe utilise</font></font></h2> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La premi√®re chose que j'ai faite a √©t√© d'aller me renseigner aupr√®s de mes coll√®gues qui utilisent quoi. </font><font style="vertical-align: inherit;">Les options sont approximativement les suivantes:</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Clockify</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - un bouton pour tout </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;">contr√¥ler</font></a></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Avez-vous besoin de temps pour coder ou √©crire des quais? </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le plugin</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ajoutera un bouton (un pacman gris assez discret) presque n'importe o√π.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/yy/9-/ic/yy9-icorb-pi37wptn9yh7wxtxk.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Il regarde donc dans Google Docs</font></font></i><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/1k/tf/m0/1ktfm0ax7-xl9rmwtlq9jvwtgec.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Et sur GitHub,</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
vous pouvez admirer Natrekannyi sur un tableau de bord, ou vous pouvez importer dans une table et le d√©poser dans Jira. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/js/bf/6h/jsbf6htyizodd76lwvq5hbzuqhy.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'int√©gration dans Jira est fournie s√©par√©ment, √©galement par </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">extension de navigateur</font></font></a></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
, mais il est possible de t√©l√©charger un tableau avec les journaux de travail obtenus de Clockify dans votre calendrier de travail. </font><font style="vertical-align: inherit;">Et pour le suivi du temps hors ligne, il existe des applications de bureau pour Windows, Linux et Mac. </font><font style="vertical-align: inherit;">Des applications mobiles aussi. </font><font style="vertical-align: inherit;">La fonctionnalit√© principale est gratuite, mais il existe plusieurs plans tarifaires avec des goodies comme la confidentialit√©, des rappels et des mod√®les de projets.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Toggl</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , juste Toggl</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout est √† peu pr√®s la m√™me chose, mais un peu plus de goodies - par exemple, dans une application de bureau, vous pouvez vous d√©finir des rappels sur la journalisation du temps, activer le mode pomodoro, il y a m√™me la possibilit√© de lier une application sp√©cifique √† un projet sp√©cifique et de configurer le suivi automatique.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/hl/yp/sv/hlypsvcpl66hldse0c4ayfhkmzi.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mais il y a une nuance: le premier jour d'utilisation j'ai √©t√© √©tonn√© par cette fen√™tre et les notifications avec rappels. </font><font style="vertical-align: inherit;">Bien que la th√©orie semblait cool)</font></font></i><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. Script Toggl + </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Python</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : quand un simple bouton ne suffit plus</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'invention de mon coll√®gue. </font><font style="vertical-align: inherit;">D'une mani√®re ou d'une autre, il a d√©cid√© de r√©duire les gestes pour exporter des tables vers Jira et a d√©plac√© le d√©chargement de la taxation dans Toggl vers un script. </font><font style="vertical-align: inherit;">Vous pouvez mettre un cron et profiter de la vie.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wakatime</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - o√π nous allons, aucun bouton n√©cessaire</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Enregistre tout lui-m√™me. Par cons√©quent, la premi√®re chose √† retenir lors de la connexion de son extension de navigateur est la liste noire. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En plus des extensions, il fournit plusieurs int√©grations et un nombre d√©cent de plugins pour les IDE et les √©diteurs les plus courants. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/xz/4u/uk/xz4uuk51xsdjdkemxh-ichx8ceg.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les plugins pour l'IDE suivent le temps pass√© √† la fois dans une branche git sp√©cifique et dans un fichier sp√©cifique. A l'√©cran, la liste des disponibles est tr√®s impressionnante. Serenyk - ¬´dans les plans¬ª, pour leur mise en ≈ìuvre rapide, vous pouvez voter. Certains plugins dans un abonnement payant pour 9 $ par mois.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De plus, sur le tableau de bord, vous pouvez voir combien de temps est consacr√© en pourcentage √† l'√©criture de code dans diff√©rentes langues: si vous vous souvenez qu'un projet Android r√©gulier implique l'utilisation de Kotlin, Java, Groovy et xml - cela a du sens pour lui-m√™me). </font><font style="vertical-align: inherit;">Et si vous travaillez avec le plugin install√© pendant un certain temps, vous remarquerez qu'il est plut√¥t impitoyable: le tableau de bord obtient le temps de lire et d'√©crire du code. </font><font style="vertical-align: inherit;">Et coller ne p√©n√®tre pas dans le moniteur avec un aspect de verre. </font><font style="vertical-align: inherit;">Inutile de dire, un amateur.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hmm, le code source de WakaTime est ouvert: vous pouvez essayer de comprendre comment cela fonctionne ...</font></font></b><div class="spoiler_text">  , ?           <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">   IDE  JetBrains</a>. <br>
<br>
 .     WakaTime.java.    ,         ,    Heartbeat (),   WakaTime CLI    .      , , ,       . <br>
</div></div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√âcrire votre v√©lo par analogie</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un pistolet √† pommes de terre serait peut-√™tre plus utile, mais vous ne ferez rien √† des fins de recherche. Apr√®s avoir m√©dit√© sur les sources WakaTime, j'ai d√©cid√© de cr√©er mon propre plug-in qui peut suivre l'activit√© dans l'IDE, enregistrer le temps d'√©criture et l'envoyer √† Jira. (dans notre flux, les branches sont nomm√©es d'apr√®s les t√¢ches dans Jira, donc cela semble assez r√©aliste). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et afin de ne pas remplir le serveur de requ√™tes pendant que vous travaillez sur le code, nous enverrons les journaux lorsque Android Studio sera ferm√©, et jusqu'√† ce moment, stockez-le localement.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. Quelles entit√©s pouvons-nous trouver dans le code source du plugin (et les utiliser dans les n√¥tres)?</font></font></h4><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous n'utilisons pas de composants (c'est </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Legacy</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , qui √©taient auparavant les principales unit√©s structurelles du plugin. Peut √™tre au niveau de l'application, au niveau du projet ou au niveau du module. Il existe un ApplicationComponent dans la source WakaTime, mais ils le peuvent, le code source a d√©j√† cinq ans et il devrait conserver une compatibilit√© descendante. Les composants sont li√©s au cycle de vie du niveau auquel ils sont associ√©s. Ainsi, par exemple, ApplicationComponent est charg√© au d√©marrage de l'EDI. Lorsqu'ils sont utilis√©s, ils emp√™cheront le plugin de red√©marrer sans red√©marrer l'IDE et se comporteront g√©n√©ralement de mani√®re d√©sagr√©able. Par cons√©quent, il est pr√©f√©rable d'utiliser des services √† la place. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous utilisons les services</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- principales unit√©s structurelles actuelles. </font><font style="vertical-align: inherit;">Ils sont divis√©s en les m√™mes niveaux de l'application, du projet et du module, ils nous aideront √† encapsuler la logique aux niveaux appropri√©s et √† stocker l'√©tat du plugin. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Contrairement aux composants, les services doivent √™tre charg√©s seuls √† l'aide de la m√©thode ServiceManager.getService (). </font><font style="vertical-align: inherit;">La plateforme garantit que chaque service est un singleton. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ajouter des actions</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - elles peuvent √™tre un raccourci, un √©l√©ment de menu suppl√©mentaire - en un mot, elles sont responsables de tout ce qui affecte en quelque sorte les actions des utilisateurs dans l'EDI. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous utilisons des extensions</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - toute extension de fonctionnalit√© qui sera plus compliqu√©e que les actions: par exemple, connectez-vous au cycle de vie IDE et faites quelque chose tout en affichant un √©cran de d√©marrage ou avant de quitter.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout cela doit √™tre d√©clar√© dans le fichier /META_INF/plugin.xml.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. Plugin.xml et build.gradle</font></font></h4><br>
<img src="https://habrastorage.org/webt/ap/ia/vz/apiavzht769ipgzd8ltqaobce4o.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fen√™tre de cr√©ation de projet. </font><font style="vertical-align: inherit;">Nous allons √©crire notre plugin dans Kotlin, et utiliser Gradle pour l'assemblage.C'est</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
la premi√®re chose que nous voyons apr√®s avoir cr√©√© le plugin vierge dans IDEA (Fichier -&gt; Nouveau -&gt; Projet ... -&gt; Gradle -&gt; IntelliJ Platform Plugin). </font><font style="vertical-align: inherit;">Il contient des informations sur les d√©pendances du plugin et sa br√®ve description. </font><font style="vertical-align: inherit;">Il doit d√©clarer les composants du plug-in - les composants, services, actions et extensions mentionn√©s pr√©c√©demment. </font><font style="vertical-align: inherit;">Il n'y aura pas de point d'entr√©e sp√©cifique - il s'agira d'une action personnalis√©e ou d'un √©v√©nement de cycle de vie IDE, selon nos besoins. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous aurons besoin de ces d√©pendances - apr√®s tout, nous voulons √©crire un plugin pour le studio et pour qu'il puisse fonctionner avec Git.</font></font><br>
<br>
<pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">depends</span>&gt;</span>Git4Idea<span class="hljs-tag">&lt;/<span class="hljs-name">depends</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">depends</span>&gt;</span>com.intellij.modules.androidstudio<span class="hljs-tag">&lt;/<span class="hljs-name">depends</span>&gt;</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Git4Idea est un plug-in pour le syst√®me de fichiers virtuel (VCS) et fournit des rubriques, gr√¢ce auxquelles nous pourrons plus tard √©couter les √©v√©nements git - comme les extractions, par exemple. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Puisque nous voulons √©galement que le plugin puisse fonctionner avec Jira, nous allons connecter via le gradle une biblioth√®que aimablement fournie avec un client de repos. </font><font style="vertical-align: inherit;">Pour ce faire, ajoutez-y le r√©f√©rentiel Atlassian maven:</font></font><br>
<br>
<pre><code class="kotlin hljs">repositories {<font></font>
   mavenCentral()<font></font>
   maven {<font></font>
       url <span class="hljs-string">"https://packages.atlassian.com/maven/repository/public"</span><font></font>
   }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et en fait les biblioth√®ques:</font></font><br>
<br>
<pre><code class="kotlin hljs">implementation <span class="hljs-string">"joda-time:joda-time:2.10.4"</span>
implementation(<span class="hljs-string">"com.atlassian.jira:jira-rest-java-client-core:4.0.0"</span>) {<font></font>
   exclude group: <span class="hljs-string">'org.slf4j'</span><font></font>
   dependencies {<font></font>
       implementation <span class="hljs-string">"com.atlassian.fugue:fugue:2.6.1"</span><font></font>
   }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ici, nous d√©terminons la version de l'IDE qui nous int√©resse et le chemin vers celui-ci (oh, si le vrai Android Studio a d√©marr√© et travaill√© aussi vite que sa version l√©g√®re pour le d√©bogage des plugins):</font></font><br>
<br>
<pre><code class="kotlin hljs">intellij {<font></font>
   version <span class="hljs-string">'2019.1'</span>
   plugins <span class="hljs-string">'git4idea'</span>
   alternativeIdePath <span class="hljs-string">'E:\\Android Studio'</span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et ici, peut-√™tre, un jour, nous √©crirons sur une nouvelle fonctionnalit√© am√©lior√©e. </font><font style="vertical-align: inherit;">Mais pas maintenant.</font></font><br>
<br>
<pre><code class="kotlin hljs">patchPluginXml {<font></font>
   changeNotes <span class="hljs-string">"""
     Add change notes here.&lt;br&gt;
     &lt;em&gt;most HTML tags may be used&lt;/em&gt;"""</span>
}</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. Cr√©ation d'une interface utilisateur</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour ins√©rer quelque chose dans Jira, vous devez d'abord vous connecter. </font><font style="vertical-align: inherit;">Il est logique de le faire juste apr√®s l'ouverture du projet. </font><font style="vertical-align: inherit;">Il semble que nous ayons besoin d'une extension, et nous n'h√©siterons pas √† la d√©clarer dans plugin.xml:</font></font><br>
<br>
<pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">postStartupActivity</span> <span class="hljs-attr">implementation</span>=<span class="hljs-string">"Heartbeat"</span>/&gt;</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
et montrer le dialogue en elle. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les composants de l'interface utilisateur sont principalement des composants de Swing avec quelques extensions de la plate-forme sdk. </font><font style="vertical-align: inherit;">Tout cela a r√©cemment √©t√© envelopp√© dans du kotlin ui dsl. </font><font style="vertical-align: inherit;">Au moment de la r√©daction, la documentation a not√© que dsl peut changer beaucoup entre les versions principales, nous l'utilisons donc avec une l√©g√®re crainte:</font></font><br>
<br>
<pre><code class="kotlin hljs">
<span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">createCenterPanel</span><span class="hljs-params">()</span></span>: JComponent? {<font></font>
<font></font>
   title = <span class="hljs-string">"Jira credentials"</span>
   setOKButtonText(<span class="hljs-string">"Save"</span>)<font></font>
<font></font>
   <span class="hljs-keyword">return</span> panel {<font></font>
       row {<font></font>
           JLabel(<span class="hljs-string">"Jira hostname"</span>)()<font></font>
           hostname = JTextField(<span class="hljs-string">"https://"</span>)<font></font>
           hostname()<font></font>
       }<font></font>
       row {<font></font>
           JLabel(<span class="hljs-string">"Username:"</span>)()<font></font>
           username = JTextField()<font></font>
           username()<font></font>
       }<font></font>
       row {<font></font>
           JLabel(<span class="hljs-string">"Password:"</span>)()<font></font>
           password = JPasswordField()<font></font>
           password()<font></font>
       }<font></font>
   }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons cr√©√© un dialogue, l'avons montr√©, re√ßu des lettres de cr√©ance de Jira. </font><font style="vertical-align: inherit;">Maintenant, nous devons les sauvegarder, et de pr√©f√©rence en toute s√©curit√©, autant que possible. </font><font style="vertical-align: inherit;">PersistingStateComponent viendra √† la rescousse.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4. Dispositif PersistingStateComponent (pas tr√®s compliqu√©)</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PersistingStateComponent peut faire deux choses - saveState et loadState: s√©rialiser et enregistrer l'objet qui lui est transmis et le r√©cup√©rer du stockage. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O√π exactement il doit enregistrer les donn√©es, il apprend de l'annotation State. </font><font style="vertical-align: inherit;">Deux options les plus simples sont mentionn√©es dans la documentation - sp√©cifiez votre fichier ou stockez tout dans les param√®tres de l'espace de travail:</font></font><br>
<br>
<pre><code class="kotlin hljs"><span class="hljs-meta">@Storage(<span class="hljs-meta-string">"yourName.xml"</span>)</span>
<span class="hljs-meta">@Storage(StoragePathMacros.WORKSPACE_FILE)</span> 
<span class="hljs-meta">@State(
   name = <span class="hljs-meta-string">"JiraSettings"</span>,
   storages = [
       Storage(<span class="hljs-meta-string">"trackerSettings.xml"</span>)</span>
   ])</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme nous avons un cas particulier, nous nous tournons vers la documentation pour le stockage des donn√©es sensibles.</font></font><br>
<br>
<pre><code class="kotlin hljs"><span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getState</span><span class="hljs-params">()</span></span>: Credentials? {
   <span class="hljs-keyword">if</span> (credentials == <span class="hljs-literal">null</span>)  {
       <span class="hljs-keyword">val</span> credentialAttributes = createCredentialAttributes()<font></font>
       credentials = PasswordSafe.instance.<span class="hljs-keyword">get</span>(credentialAttributes)<font></font>
   }<font></font>
   <span class="hljs-keyword">return</span> credentials<font></font>
}<font></font>
<span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">loadState</span><span class="hljs-params">(state: <span class="hljs-type">Credentials</span>)</span></span> {<font></font>
   credentials = state<font></font>
   <span class="hljs-keyword">val</span> credentialAttributes = createCredentialAttributes()<font></font>
   PasswordSafe.instance.<span class="hljs-keyword">set</span>(credentialAttributes, credentials)<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un autre PersistingStateComponent traitera du stockage de l'heure enregistr√©e pour diff√©rentes branches. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jira a trouv√© la connexion. </font><font style="vertical-align: inherit;">Avec le stockage des donn√©es utilisateur √©galement. </font><font style="vertical-align: inherit;">Vous devez maintenant suivre en quelque sorte l'√©v√©nement de paiement sur la succursale pour d√©marrer le compte √† rebours.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5. Abonnez-vous aux √©v√©nements</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La plate-forme IntelliJ offre la possibilit√© de suspendre Observer sur des √©v√©nements qui nous int√©ressent en souscrivant √† leurs sujets dans le messageBus du niveau souhait√©. </font><font style="vertical-align: inherit;">Voici le </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">quai</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , c'est assez int√©ressant. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un sujet est un certain point final, une repr√©sentation d'un √©v√©nement. </font><font style="vertical-align: inherit;">Tout ce que vous avez √† faire est de vous abonner et d'impl√©menter un √©couteur qui devrait g√©rer ce qui se passe. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par exemple, je dois √©couter les extractions dans Git ...</font></font><br>
<br>
<pre><code class="kotlin hljs">subscribeToProjectTopic(project, GitRepository.GIT_REPO_CHANGE) {<font></font>
    GitRepositoryChangeListener {<font></font>
        currentBranch = it.currentBranch<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
... fermeture de l'application (pour se mettre en gage joyeusement) ...</font></font><br>
<br>
<pre><code class="kotlin hljs">subscribeToAppTopic(AppLifecycleListener.TOPIC) {
    <span class="hljs-keyword">object</span>: AppLifecycleListener {
        <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">appWillBeClosed</span><span class="hljs-params">(isRestart: <span class="hljs-type">Boolean</span>)</span></span> {
            <span class="hljs-keyword">if</span> (!isRestart) {<font></font>
                JiraClient.logTime(entry.key, DateTime.now(), entry.value)<font></font>
            }<font></font>
        }<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
... et la sauvegarde des documents (juste pour que ce soit le cas).</font></font><br>
<br>
<pre><code class="kotlin hljs">subscribeToAppTopic(AppTopics.FILE_DOCUMENT_SYNC) {<font></font>
    CustomSaveListener()<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En principe, cela suffit d√©j√† (sinon, vous pouvez toujours √©crire le v√¥tre). </font><font style="vertical-align: inherit;">Mais que se passe-t-il si nous voulons entendre le moindre mouvement de d√©filement et de souris?</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6. EditorEventMulticaster</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il collecte tout ce qui se passe dans les fen√™tres de l'√©diteur ouvert - √©dition, modification de la zone visible, mouvements de la souris - et vous permet de vous y abonner en un seul endroit et imm√©diatement. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, nous avons tout ce dont nous avons besoin. </font><font style="vertical-align: inherit;">Nous pouvons extraire le nom de la t√¢che dans Jira de la branche actuelle (si elle existe), calculer le temps pass√© √† travailler dessus et quitter imm√©diatement le studio pour l'ajouter √† la t√¢che.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7. Code et d√©tails </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour fonctionner, vous avez besoin de la derni√®re version d'Android Studio (3.6.1). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour tester les performances - git et une branche avec un nom qui est au moins similaire √† distance √† la t√¢che dans Jira. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour que le plug-in ne se contente pas de g√©n√©rer du temps sur la console, il le suive - d√©commentez la ligne correspondante dans Heartbeat.kt.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8. Liens utiles</font></font></h4><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Une s√©rie d'articles sur le d√©veloppement de plugins</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un autre article int√©ressant sur le d√©veloppement d'un plugin √† partir d'un d√©veloppeur Android</font></font></a></li>
</ul><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PS Et qu'avez-vous finalement choisi?</font></font></h4><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Merde, c'est un peu trop mal. </font><font style="vertical-align: inherit;">Et si je n'√©cris pas de code? </font><font style="vertical-align: inherit;">Et si je prends mon nez et essaie de comprendre ce qui s'y passe? </font><font style="vertical-align: inherit;">Dans le code, au sens de. </font><font style="vertical-align: inherit;">Apr√®s tout, cela prend la plupart du temps. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - Ensuite, faites-le au moins d√©filer. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Ce n'est donc pas loin de simuler une activit√© violente. </font><font style="vertical-align: inherit;">Et puis, je ne peux pas fermer le studio pendant des semaines et ne pas red√©marrer. </font><font style="vertical-align: inherit;">Peut-√™tre que nous n'avons pas besoin d'un tel bonheur? </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 "Certainement pas n√©cessaire." </font><font style="vertical-align: inherit;">Ensuite, une autre raison est n√©cessaire, sinon j'ai aim√© √©crire des plugins. </font><font style="vertical-align: inherit;">Et je ne comprenais toujours pas vraiment VCS. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"L'utilisez-vous vous-m√™me?" </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - Nan. </font><font style="vertical-align: inherit;">J'ai en quelque sorte appris √† me connecter avec mes mains, imperceptiblement pour moi.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr490772/index.html">Comment r√©diger et publier un contrat intelligent dans le Telegram Open Network (TON)</a></li>
<li><a href="../fr490774/index.html">Sensible</a></li>
<li><a href="../fr490778/index.html">Les gens qui comprennent le travail d'un programmeur peuvent √™tre trouv√©s n'importe o√π</a></li>
<li><a href="../fr490780/index.html">Intel Xeon Scalable Gen2: grande vente de c≈ìurs</a></li>
<li><a href="../fr490782/index.html">Conf√©rence AnalogBytes: Roskomnadzor, media, highload et all-all-all</a></li>
<li><a href="../fr490786/index.html">Analyse de fuite de second ordre: quand elle fuit de ceux qui volent des donn√©es d'une banque</a></li>
<li><a href="../fr490788/index.html">REPL inutile. Rapport Yandex</a></li>
<li><a href="../fr490790/index.html">Fichiers Zip: historique, explication et impl√©mentation</a></li>
<li><a href="../fr490792/index.html">VXLAN dans NSX-V - Sous-couche en difficult√©</a></li>
<li><a href="../fr490796/index.html">Comment automatiser la s√©curit√© des conteneurs dans le style de la strat√©gie en tant que code √† l'aide de CRD</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>