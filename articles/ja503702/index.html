<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🐻 👉 👩🏽‍🏭 実際にGoogle Analyticsで生データを使用する ☝️ 🙇🏿 🧑🏽‍🤝‍🧑🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="標準のGoogle Analyticsツールが有用な情報を取得するための最良の方法であると長い間考えてきました。時々、私はいくつかの制限とかなり奇妙な結果に対処する必要があり、何人かのアナリストがGoogleアナリティクス360とGoogle BigQueryに生データをエクスポートするためのメカニ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>実際にGoogle Analyticsで生データを使用する</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/boodet_online/blog/503702/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">標準のGoogle Analyticsツールが有用な情報を取得するための最良の方法であると長い間考えてきました。時々、私はいくつかの制限とかなり奇妙な結果に対処する必要があり、何人かのアナリストがGoogleアナリティクス360とGoogle BigQueryに生データをエクスポートするためのメカニズムを発見するまで、それは終わりがないように見えました。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
より高度なツールとSQLクエリを数時間使用しただけで、Googleアナリティクスの集計レポートのみを使用して、これまでは得られなかった情報を抽出することができました。その瞬間から、私たちは生（「生」）データの機能と、Webエキスパートがそこから引き出すことのできる実用的な利点の研究に焦点を当てました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この記事では、次の質問に回答します。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">生データと要約データの違いは何ですか？</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">生データを使用する利点は何ですか？</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">生データにアクセスするには？</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">この新しいデータの使用方法（実際の例）？</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Googleアナリティクスの生データと要約データの違いは何ですか</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Googleアナリティクスの無料版を使用すると、概要データのみを取得できます。</font><font style="vertical-align: inherit;">つまり、特定の訪問およびイベントの完全な表示情報は利用できません。</font><font style="vertical-align: inherit;">もちろん、ユーザーエクスプローラーレポートには、Web分析で使用できる多くの有用な情報が含まれています。</font><font style="vertical-align: inherit;">ただし、このファイルには一定の制限が課されます。このファイルはスケーリングされず、ダウンロードできません。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ほとんどの場合、一般的な質問に対する回答を得るためには、要約データのみで十分です。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンバージョン数が最も多いキャンペーンはどれですか。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Feature Xの機械学習テクノロジーはどのくらい一般的ですか（ユーザーベースは拡大していますか）？</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">訪問者はどこから来たのですか（主要なトラフィックソース）？</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ユーザーはどのデバイスからアクセスしますか？</font></font></li>
</ul><br>
 <img src="https://habrastorage.org/webt/5p/kj/x9/5pkjx9gtd-yzsm6v4vre_yozv0u.png"><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
上記の質問に対する回答を得るために生データを分析する必要はありません。</font><font style="vertical-align: inherit;">Google Analyticsのカスタマイズされた、またはデフォルトのレポートツールは、これを簡単に実行できます。</font><font style="vertical-align: inherit;">集計データの主な問題は、集計されることです。</font><font style="vertical-align: inherit;">非常に有用な情報を非表示にするために使用できる多くのタイプのユーザーアクションをマップします。</font><font style="vertical-align: inherit;">1つのセッションで複数のページを表示する例を示します。</font><font style="vertical-align: inherit;">6つのセッションを持つ2つのソースがあり、次の数のページが1つのセッションで表示されます。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ソースA：1、1、2、2、2、10;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ソースB：2、2、3、3、4、4。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
統計的外れ値法を使用すると、ソースAが関与の度合いが低いユーザーを特徴付けていると判断できます。</font><font style="vertical-align: inherit;">しかし、平均化されたデータのみを考慮に入れれば、ページ数は同じであるため（中央値は任意）、両方のソースでほぼ同じ関与を結論付けることができます。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
標準の分析レポートにこのデータが含まれていないのはなぜですか？</font><font style="vertical-align: inherit;">主な理由は計算コストです。</font><font style="vertical-align: inherit;">選択的な要約データのみを提供するため、レポートに含まれる数百万の行を処理する必要はありません。</font><font style="vertical-align: inherit;">したがって、無料バージョンのGoogle Analyticsには、高度な計算を無料で実行するためのツールが含まれていません。</font></font><br>
 <br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">生データから抽出できる情報</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
サマリーデータの制限を理解したら、生データをどのように使用できるかを調べてみましょう。</font><font style="vertical-align: inherit;">アプリケーションのいくつかのオプションを検討してください。</font></font><br>
 <br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">イベント期間</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
標準のGoogleアナリティクスツールを使用するウェブアナリストが遭遇する制限の1つは、このアクションが単一のセッションで発生するかどうかに関係なく、バスケットにアイテムを置いてからチェックアウトするまでの時間間隔を決定できないことです。</font><font style="vertical-align: inherit;">もちろん、このためにCookieを使用して独自の計算を行うことができます。</font><font style="vertical-align: inherit;">しかし、これは無意味です。特に、Google Analyticsがすでにこの作業を行っているためです。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
生データを分析した後、特定のユーザーに対してイベントが発生した正確な時間を簡単に特定し、同じユーザーの別のイベントと比較分析を行うことができます。</font><font style="vertical-align: inherit;">また、平均、中央値、またはパーセンタイル分布を得て、任意のデータを集計したり、別の高度な統計モデルを使用したりすることもできます。</font><font style="vertical-align: inherit;">ユーザーの20％が2分間でターゲットアクションを実行し、10％が1週間全体で実行するという事実は問題ではありませんか？</font><font style="vertical-align: inherit;">この知識があれば、さまざまなアプローチを使用して、これら2つのユーザーカテゴリと対話します。</font></font><br>
 <br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オーディエンスサイズ分析</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
GoogleアナリティクスとGoogleアナリティクス360の両方のレポートには、過去90日間の訪問者セグメンテーションデータが含まれています。</font><font style="vertical-align: inherit;">多くの場合、信頼できるデータを取得するには、より長い距離での分析が必要です（特に大企業の場合）。</font><font style="vertical-align: inherit;">生データの分析に基づいて、次の質問に対する回答を得ることができます。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ホリデーシーズンに関わるユーザーは、同じ月に他のカテゴリのユーザーが購入する可能性よりも、9月に製品を購入する可能性が高いですか？</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">年間を通じて動画を視聴するとどのような影響がありますか。また、これはコンバージョン数にどのように影響しますか？</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
生データを使用すると、無制限の時間にわたってイベントログを保存し、このデータがすでに絶望的に古くなっている場合にのみ削除できます。</font></font><br>
 <br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">データ間の関係</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2つの変数値間の統計的関係を決定するために、相関係数が導入されます。</font><font style="vertical-align: inherit;">大量のデータを分析する場合、2種類のユーザーの行動の関係を判断できます。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ページビューはターゲットアクションのパフォーマンスにどのように影響しますか？</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">消費されるコンテンツの種類と、ユーザーが最終的に取得する製品との間には関係がありますか？</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">関連商品はありますか？</font><font style="vertical-align: inherit;">たとえば、誰かが製品Aを購入した場合、それに関連付けられている製品カテゴリはどれですか。</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第三者データ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最後に重要なことですが、生データを使用すると、他のデータソースを接続した場合に、より多くの情報を取得できます。</font><font style="vertical-align: inherit;">次に、いくつかの例を示します</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。eコマースデータ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。このツールは、顧客IDをカートに追加したり注文したりするアクションを実行したGoogleアナリティクスに保存する場合に最も役立ちます。これにより、Googleアナリティクスツールが機能しなかった場合でも、コンバージョン率の正確な値を計算できます（クライアントが使用する広告ブロッカー、支払いページからのリダイレクトがない、ページが読み込まれるまでの待ち時間が長いなどの理由によります）。さらに、独自のデータに基づいて、キャンセルされたターゲットアクションとリターンを除外して、実際の利益を再計算できます。また、収益の代わりにマージンなど、より複雑で閉じた指標を計算することもできます。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CRMデータ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。膨大な数のリードに多数の無関係なリードが含まれているという事実よりも悪いことは何ですか？これは、B2Bオンラインサービスの一般的な問題です。一意のリード識別子（SHA-256電子メールを使用して暗号化されたクライアント識別子、生成された識別子など）を含むCRMデータをエクスポートすることにより、それらをGoogleアナリティクスのクライアント識別子と簡単に関連付けることができます。これにより、生成されたリードの割合だけでなく、コンバージョン率も計算できます。マルチチャネル分析では、より複雑なクエリが必要になりますが、計算プロセスを完全に制御できます。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オフラインイベント</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。オンラインビジネスは、休日、気象条件、ストライキ、世界の人口の半分を自己隔離させた致命的なウイルスなど、多くの外部要因の影響を受けています。 Googleアナリティクスは、一定期間調査するための新しいパラメーターを導入する機能を提供していません。注釈に関しては、それらは計算に関与せず、ユーザーインターフェイス要素としてのみ使用されます。ただし、休日が販売数にどのように影響するかを知っておくと役立ちます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/5a/pr/2x/5apr2xzrir9metfmac7wfwe_kja.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そのような分析を行うには、情報を収集し、それを読み取り可能な形式で提供する必要があります。これを行うことにより、関連性のある関連データが得られます。</font></font><br>
 <br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">広告、検索ロボット、ログ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -このデータはすべて1つのリポジトリに保存する必要があります。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それらを分析データと比較することを学ぶことにより、あなたの最もワイルドな夢を実現することができます：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">より長いコンテンツはユーザーを引き付けますか？</font><font style="vertical-align: inherit;">適切な検索ロボット（Screaming Frogなど）を選択することで、テキストコンテンツの長さとページビューの数の関係を確立できます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">検索エンジンの動作はSEO最適化に影響しますか？</font><font style="vertical-align: inherit;">BigQueryログデータを使用して、検索ロボットへの訪問の頻度が検索結果にどのように影響するかを判断できます。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
あなたのビジネスの本当の収益性は何ですか？</font><font style="vertical-align: inherit;">アトリビューション計算アルゴリズムで設定を行ったら、使用するすべてのプラットフォームの広告キャンペーンへの投資収益率を測定できます。</font></font><br>
 <br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">生データ抽出ツール</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
上記の情報は生データを支持しています。</font><font style="vertical-align: inherit;">しかし、それらを取得する方法は？</font><font style="vertical-align: inherit;">最も一般的な方法のいくつかを検討してください。</font></font><br>
 <br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Googleアナリティクス360</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このサービスにアクセスできる幸運な場合、またはこのサービスの使用料金を支払うだけの十分な予算がある場合は、Google BigQueryから生データを抽出するための最適なツールがあります。</font><font style="vertical-align: inherit;">高度なeコマースデータを含む、あらゆる情報をエクスポートできます。</font><font style="vertical-align: inherit;">各行は特定のセッションに対応しており、膨大な数のパラメーターとメトリックを使用できます。</font></font><br>
 <br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Googleアナリティクスアプリ+ウェブとFirebase</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最近、ウェブ解析は、Googleアナリティクス360を購入することなく、Google BigQueryにデータをエクスポートできるようになりました。Googleアナリティクスアプリ+ウェブのコアであるFirebaseは、Google BigQueryへのエクスポート機能をサポートしています。従量課金制のBlazeが請求されます。大規模なインターネットポータルを使用している場合は、予算を追跡する必要があります。小規模なサイトの場合、費用は月額数ドルから数ドル程度です。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
各行は、画面またはページビューを含むイベントに対応しています。 Googleアナリティクスで使用されるものとは異なり、データを表示するこの非常に特殊な方法に慣れる必要があります。ただし、このサービスは、生データを使用したい場合には最適なソリューションである可能性があります。</font></font><br>
 <br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">その他の無料ツール：Yandex.MetricaとMatomo</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ツールの多くは有料なので、すべてのツールを試すことはできませんでした。</font><font style="vertical-align: inherit;">それぞれに生データをエクスポートするための機能が含まれています。</font><font style="vertical-align: inherit;">ただし、同じ機能を提供し、使用料がかからない2つの完全に無料のオンラインサービスがあります。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Yandex.Metricaは、ログのAPIを介して生データへのアクセスを提供する完全に無料のツールです。</font><font style="vertical-align: inherit;">Matomoは、サイトファイルが配置されているサーバーに直接インストールする必要があるオープンソースの分析ツールです。</font><font style="vertical-align: inherit;">生データを直接データベースにエクスポートします。</font></font><br>
 <br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">データパイプライン</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Googleアナリティクスデータをデータウェアハウスに直接アップロードするもう1つの方法は、データパイプラインを使用する方法です。 OWOX BIは、GoogleアナリティクスとBigQuery間の強力なデータフローを編成します。この機能を実装するには、Googleアナリティクスでカスタムタスクを作成する必要があります。 Google Analyticsペイロードのコピーを作成し、最終的なデータウェアハウスに転送します。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
十分な経験があるため、クラウドサービスの機能を使用して、ログの分析に基づいて、データをアップロードするための独自のエンドポイントを個別に作成できます。以下は、これを理解するのに役立つ2つの役立つリソースです。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Simo Ahab-「GTMモニターの作成方法」</font><font style="vertical-align: inherit;">この記事を読んだ後、クラウド関数を使用してBigQueryにデータを送信する方法を学びます。</font><font style="vertical-align: inherit;">送信されるデータの量は、1秒あたり100,000行に制限されており、BigQueryサービスに統合できます。</font><font style="vertical-align: inherit;">行数が上記の最大値を超える場合は、複数のログのデータをグループ化する必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Google Cloudヘルプセンター-サーバーレスピクセルトラッキングアーキテクチャ </font><font style="vertical-align: inherit;">このソースでは、独自のトラッキングピクセルを作成し、BigQueryに統合するメカニズムについて説明します。</font></font><br>
 <br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BigQueryの使用例と特別なケース</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これで、生データを使用する利点とそれにアクセスする方法がわかりました。次に、このデータを操作する原理を明確に示すいくつかの例を見てみましょう。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Googleアナリティクス360でのトピックとターゲットアクション間の関係の確立</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
分析は、オンライン購読者のいるニュースサイトに対して行われました。分析の主な目的は、ユーザーが読んだニュースのトピックと実行された対象のアクションとの間に関係（相関）を確立することでした。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
結果と結論：</font></font><br>
 <br>
<code>corr_culture 0.397<br>
corr_opinion 0.305<br>
corr_lifestyle 0.0468<br>
corr_sport 0.009</code><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このサイトを購読している人の最もありそうなカテゴリーは、「文化」と「意見」セクションに興味があるユーザーです。</font><font style="vertical-align: inherit;">一方、ユーザーが見出し「ライフスタイル」または「スポーツ」に興味がある場合、それらにサブスクライブする可能性は最小限です。</font></font><br>
 <br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BigQueryのクエリ</font></font></b>
                        <div class="spoiler_text"><pre><code class="sql hljs"><span class="hljs-keyword">SELECT</span>
<span class="hljs-keyword">CORR</span>(culture,transac) <span class="hljs-keyword">AS</span> corr_culture,
<span class="hljs-keyword">CORR</span>(opinion,transac) <span class="hljs-keyword">AS</span> corr_opinion,
<span class="hljs-keyword">CORR</span>(lifestyle,transac) <span class="hljs-keyword">AS</span> corr_lifestyle,
<span class="hljs-keyword">CORR</span>(sport,transac) <span class="hljs-keyword">AS</span> corr_sport
<span class="hljs-keyword">FROM</span>(
<span class="hljs-keyword">SELECT</span>
  <span class="hljs-keyword">SUM</span>(<span class="hljs-keyword">IF</span>(hit.page.pagePath <span class="hljs-keyword">LIKE</span><span class="hljs-string">'/culture%'</span>,
      <span class="hljs-number">1</span>,
      <span class="hljs-number">0</span>)) <span class="hljs-keyword">AS</span> culture,
  <span class="hljs-keyword">SUM</span>(<span class="hljs-keyword">IF</span>(hit.page.pagePath <span class="hljs-keyword">LIKE</span><span class="hljs-string">'/opinion%'</span>,
      <span class="hljs-number">1</span>,
      <span class="hljs-number">0</span>)) <span class="hljs-keyword">AS</span> opinion,
  <span class="hljs-keyword">SUM</span>(<span class="hljs-keyword">IF</span>(hit.page.pagePath <span class="hljs-keyword">LIKE</span><span class="hljs-string">'/lifestyle%'</span>,
      <span class="hljs-number">1</span>,
      <span class="hljs-number">0</span>)) <span class="hljs-keyword">AS</span> lifestyle,-
  <span class="hljs-keyword">SUM</span>(<span class="hljs-keyword">IF</span>(hit.page.pagePath <span class="hljs-keyword">LIKE</span><span class="hljs-string">'/sport%'</span>,
      <span class="hljs-number">1</span>,
      <span class="hljs-number">0</span>)) <span class="hljs-keyword">AS</span> sport,      
  <span class="hljs-keyword">COUNT</span>(hit.transaction.transactionId) <span class="hljs-keyword">AS</span> transac
<span class="hljs-keyword">FROM</span>
  <span class="hljs-string">`mydatabase.view_id.ga_sessions_*`</span>,
  <span class="hljs-keyword">UNNEST</span>(hits) <span class="hljs-keyword">AS</span> hit
<span class="hljs-keyword">WHERE</span>
  _TABLE_SUFFIX <span class="hljs-keyword">BETWEEN</span> <span class="hljs-string">'20191201'</span> <span class="hljs-keyword">AND</span> <span class="hljs-string">'20200301'</span>
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span><font></font>
  fullVisitorId<font></font>
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span>
  transac <span class="hljs-keyword">DESC</span>
)</code></pre><br>
</div>
                    </div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Firebaseを使用したコホート分析</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
定期的にコンテンツを更新し、季節性の高いアプリケーションを分析に使用しました。</font><font style="vertical-align: inherit;">分析は、次の質問に対する答えを見つけるために実行されます</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
。このアプリケーションを最初にインストールしたユーザーはどのように動作しますか？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アプリを定期的に使用する顧客を引き付けるのに最適な時期はいつですか？</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
結果と結論：</font></font><br>
 <br>
<img src="https://habrastorage.org/webt/og/qp/j9/ogqpj95hvueiuit6zbysm13rqxc.png"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
受信したデータから判断すると、このアプリケーションは、9月と12月に初めてダウンロードした顧客が最もよく使用します。</font></font><br>
 <br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BigQueryのクエリ</font></font></b>
                        <div class="spoiler_text"><pre><code class="sql hljs"><span class="hljs-comment"># change my-app.analytics_123456789 to your ID</span>
<span class="hljs-keyword">WITH</span> cohorte_september
<span class="hljs-keyword">AS</span><font></font>
(<font></font>
<span class="hljs-keyword">WITH</span>
user_september <span class="hljs-keyword">AS</span><font></font>
(<font></font>
<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">DISTINCT</span> user_pseudo_id <span class="hljs-keyword">AS</span> <span class="hljs-keyword">user</span>
<span class="hljs-keyword">FROM</span> <span class="hljs-string">`my-app.analytics_123456789.events_*`</span>
<span class="hljs-keyword">WHERE</span>
_table_suffix <span class="hljs-keyword">between</span> <span class="hljs-string">'20190901'</span> <span class="hljs-keyword">AND</span> <span class="hljs-string">'20190930'</span>
<span class="hljs-keyword">AND</span>
event_name=<span class="hljs-string">"first_open"</span><font></font>
)<font></font>
<span class="hljs-keyword">SELECT</span> sessions, <span class="hljs-keyword">month</span>
<span class="hljs-keyword">FROM</span><font></font>
(<font></font>
(<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">COUNT</span>(<span class="hljs-keyword">DISTINCT</span> user_pseudo_id) <span class="hljs-keyword">AS</span> sessions,<span class="hljs-string">"201909"</span> <span class="hljs-keyword">AS</span> <span class="hljs-keyword">month</span>
<span class="hljs-keyword">FROM</span> <span class="hljs-string">`my-app.analytics_123456789.events_*`</span>
<span class="hljs-keyword">WHERE</span>
_table_suffix <span class="hljs-keyword">between</span> <span class="hljs-string">'20190901'</span> <span class="hljs-keyword">AND</span> <span class="hljs-string">'20190930'</span>
<span class="hljs-keyword">AND</span> event_name=<span class="hljs-string">"session_start"</span>
<span class="hljs-keyword">AND</span> user_pseudo_id <span class="hljs-keyword">IN</span> (<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">FROM</span> user_september)<font></font>
)<font></font>
<span class="hljs-keyword">UNION</span> <span class="hljs-keyword">ALL</span>
(<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">COUNT</span>(<span class="hljs-keyword">DISTINCT</span> user_pseudo_id),<span class="hljs-string">"201910"</span>
<span class="hljs-keyword">FROM</span> <span class="hljs-string">`my-app.analytics_123456789.events_*`</span>
<span class="hljs-keyword">WHERE</span>
_table_suffix <span class="hljs-keyword">between</span> <span class="hljs-string">'20191001'</span> <span class="hljs-keyword">AND</span> <span class="hljs-string">'20191031'</span>
<span class="hljs-keyword">AND</span> event_name=<span class="hljs-string">"session_start"</span>
<span class="hljs-keyword">AND</span> user_pseudo_id <span class="hljs-keyword">IN</span> (<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">FROM</span> user_september)<font></font>
)<font></font>
<span class="hljs-keyword">UNION</span> <span class="hljs-keyword">ALL</span><font></font>
(<font></font>
<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">COUNT</span>(<span class="hljs-keyword">DISTINCT</span> user_pseudo_id),<span class="hljs-string">"201911"</span>
<span class="hljs-keyword">FROM</span> <span class="hljs-string">`my-app.analytics_123456789.events_*`</span>
<span class="hljs-keyword">WHERE</span>
_table_suffix <span class="hljs-keyword">between</span> <span class="hljs-string">'20191101'</span> <span class="hljs-keyword">AND</span> <span class="hljs-string">'20191130'</span>
<span class="hljs-keyword">AND</span> event_name=<span class="hljs-string">"session_start"</span>
<span class="hljs-keyword">AND</span> user_pseudo_id <span class="hljs-keyword">IN</span> (<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">FROM</span> user_september)<font></font>
)<font></font>
<span class="hljs-keyword">UNION</span> <span class="hljs-keyword">ALL</span><font></font>
(<font></font>
<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">COUNT</span>(<span class="hljs-keyword">DISTINCT</span> user_pseudo_id),<span class="hljs-string">"201912"</span>
<span class="hljs-keyword">FROM</span> <span class="hljs-string">`my-app.analytics_123456789.events_*`</span>
<span class="hljs-keyword">WHERE</span>
_table_suffix <span class="hljs-keyword">between</span> <span class="hljs-string">'20191201'</span> <span class="hljs-keyword">AND</span> <span class="hljs-string">'20191231'</span>
<span class="hljs-keyword">AND</span> event_name=<span class="hljs-string">"session_start"</span>
<span class="hljs-keyword">AND</span> user_pseudo_id <span class="hljs-keyword">IN</span> (<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">FROM</span> user_september)<font></font>
)<font></font>
<span class="hljs-keyword">UNION</span> <span class="hljs-keyword">ALL</span><font></font>
(<font></font>
<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">COUNT</span>(<span class="hljs-keyword">DISTINCT</span> user_pseudo_id),<span class="hljs-string">"202001"</span>
<span class="hljs-keyword">FROM</span> <span class="hljs-string">`my-app.analytics_123456789.events_*`</span>
<span class="hljs-keyword">WHERE</span>
_table_suffix <span class="hljs-keyword">between</span> <span class="hljs-string">'20200101'</span> <span class="hljs-keyword">AND</span> <span class="hljs-string">'20200131'</span>
<span class="hljs-keyword">AND</span> event_name=<span class="hljs-string">"session_start"</span>
<span class="hljs-keyword">AND</span> user_pseudo_id <span class="hljs-keyword">IN</span> (<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">FROM</span> user_september)<font></font>
)<font></font>
<span class="hljs-keyword">UNION</span> <span class="hljs-keyword">ALL</span><font></font>
(<font></font>
<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">COUNT</span>(<span class="hljs-keyword">DISTINCT</span> user_pseudo_id),<span class="hljs-string">"202002"</span>
<span class="hljs-keyword">FROM</span> <span class="hljs-string">`my-app.analytics_123456789.events_*`</span>
<span class="hljs-keyword">WHERE</span>
_table_suffix <span class="hljs-keyword">between</span> <span class="hljs-string">'20200201'</span> <span class="hljs-keyword">AND</span> <span class="hljs-string">'20200229'</span>
<span class="hljs-keyword">AND</span> event_name=<span class="hljs-string">"session_start"</span>
<span class="hljs-keyword">AND</span> user_pseudo_id <span class="hljs-keyword">IN</span> (<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">FROM</span> user_september)<font></font>
)<font></font>
<span class="hljs-keyword">UNION</span> <span class="hljs-keyword">ALL</span><font></font>
(<font></font>
<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">COUNT</span>(<span class="hljs-keyword">DISTINCT</span> user_pseudo_id),<span class="hljs-string">"202003"</span>
<span class="hljs-keyword">FROM</span> <span class="hljs-string">`my-app.analytics_123456789.events_*`</span>
<span class="hljs-keyword">WHERE</span>
_table_suffix <span class="hljs-keyword">between</span> <span class="hljs-string">'20200301'</span> <span class="hljs-keyword">AND</span> <span class="hljs-string">'20200331'</span>
<span class="hljs-keyword">AND</span> event_name=<span class="hljs-string">"session_start"</span>
<span class="hljs-keyword">AND</span> user_pseudo_id <span class="hljs-keyword">IN</span> (<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">FROM</span> user_september)<font></font>
)<font></font>
)<font></font>
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> <span class="hljs-keyword">month</span> <span class="hljs-keyword">ASC</span><font></font>
),<font></font>
<font></font>
<span class="hljs-comment">#october</span><font></font>
<font></font>
cohorte_october <span class="hljs-keyword">AS</span><font></font>
(<font></font>
<span class="hljs-keyword">WITH</span>
user_october <span class="hljs-keyword">AS</span><font></font>
(<font></font>
<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">DISTINCT</span> user_pseudo_id <span class="hljs-keyword">AS</span> <span class="hljs-keyword">user</span>
<span class="hljs-keyword">FROM</span> <span class="hljs-string">`my-app.analytics_123456789.events_*`</span>
<span class="hljs-keyword">WHERE</span>
_table_suffix <span class="hljs-keyword">between</span> <span class="hljs-string">'20191001'</span> <span class="hljs-keyword">AND</span> <span class="hljs-string">'20191031'</span>
<span class="hljs-keyword">AND</span>
event_name=<span class="hljs-string">"first_open"</span><font></font>
)<font></font>
<span class="hljs-keyword">SELECT</span> sessions, <span class="hljs-keyword">month</span>
<span class="hljs-keyword">FROM</span><font></font>
(<font></font>
(<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">COUNT</span>(<span class="hljs-keyword">DISTINCT</span> user_pseudo_id) <span class="hljs-keyword">AS</span> sessions,<span class="hljs-string">"201909"</span> <span class="hljs-keyword">AS</span> <span class="hljs-keyword">month</span>
<span class="hljs-keyword">FROM</span> <span class="hljs-string">`my-app.analytics_123456789.events_*`</span>
<span class="hljs-keyword">WHERE</span>
_table_suffix <span class="hljs-keyword">between</span> <span class="hljs-string">'20190901'</span> <span class="hljs-keyword">AND</span> <span class="hljs-string">'20190930'</span>
<span class="hljs-keyword">AND</span> event_name=<span class="hljs-string">"session_start"</span>
<span class="hljs-keyword">AND</span> user_pseudo_id <span class="hljs-keyword">IN</span> (<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">FROM</span> user_october )<font></font>
)<font></font>
<span class="hljs-keyword">UNION</span> <span class="hljs-keyword">ALL</span>
(<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">COUNT</span>(<span class="hljs-keyword">DISTINCT</span> user_pseudo_id),<span class="hljs-string">"201910"</span>
<span class="hljs-keyword">FROM</span> <span class="hljs-string">`my-app.analytics_123456789.events_*`</span>
<span class="hljs-keyword">WHERE</span>
_table_suffix <span class="hljs-keyword">between</span> <span class="hljs-string">'20191001'</span> <span class="hljs-keyword">AND</span> <span class="hljs-string">'20191031'</span>
<span class="hljs-keyword">AND</span> event_name=<span class="hljs-string">"session_start"</span>
<span class="hljs-keyword">AND</span> user_pseudo_id <span class="hljs-keyword">IN</span> (<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">FROM</span> user_october )<font></font>
)<font></font>
<span class="hljs-keyword">UNION</span> <span class="hljs-keyword">ALL</span><font></font>
(<font></font>
<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">COUNT</span>(<span class="hljs-keyword">DISTINCT</span> user_pseudo_id),<span class="hljs-string">"201911"</span>
<span class="hljs-keyword">FROM</span> <span class="hljs-string">`my-app.analytics_123456789.events_*`</span>
<span class="hljs-keyword">WHERE</span>
_table_suffix <span class="hljs-keyword">between</span> <span class="hljs-string">'20191101'</span> <span class="hljs-keyword">AND</span> <span class="hljs-string">'20191130'</span>
<span class="hljs-keyword">AND</span> event_name=<span class="hljs-string">"session_start"</span>
<span class="hljs-keyword">AND</span> user_pseudo_id <span class="hljs-keyword">IN</span> (<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">FROM</span> user_october )<font></font>
)<font></font>
<span class="hljs-keyword">UNION</span> <span class="hljs-keyword">ALL</span><font></font>
(<font></font>
<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">COUNT</span>(<span class="hljs-keyword">DISTINCT</span> user_pseudo_id),<span class="hljs-string">"201912"</span>
<span class="hljs-keyword">FROM</span> <span class="hljs-string">`my-app.analytics_123456789.events_*`</span>
<span class="hljs-keyword">WHERE</span>
_table_suffix <span class="hljs-keyword">between</span> <span class="hljs-string">'20191201'</span> <span class="hljs-keyword">AND</span> <span class="hljs-string">'20191231'</span>
<span class="hljs-keyword">AND</span> event_name=<span class="hljs-string">"session_start"</span>
<span class="hljs-keyword">AND</span> user_pseudo_id <span class="hljs-keyword">IN</span> (<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">FROM</span> user_october )<font></font>
)<font></font>
<span class="hljs-keyword">UNION</span> <span class="hljs-keyword">ALL</span><font></font>
(<font></font>
<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">COUNT</span>(<span class="hljs-keyword">DISTINCT</span> user_pseudo_id),<span class="hljs-string">"202001"</span>
<span class="hljs-keyword">FROM</span> <span class="hljs-string">`my-app.analytics_123456789.events_*`</span>
<span class="hljs-keyword">WHERE</span>
_table_suffix <span class="hljs-keyword">between</span> <span class="hljs-string">'20200101'</span> <span class="hljs-keyword">AND</span> <span class="hljs-string">'20200131'</span>
<span class="hljs-keyword">AND</span> event_name=<span class="hljs-string">"session_start"</span>
<span class="hljs-keyword">AND</span> user_pseudo_id <span class="hljs-keyword">IN</span> (<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">FROM</span> user_october )<font></font>
)<font></font>
<span class="hljs-keyword">UNION</span> <span class="hljs-keyword">ALL</span><font></font>
(<font></font>
<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">COUNT</span>(<span class="hljs-keyword">DISTINCT</span> user_pseudo_id),<span class="hljs-string">"202002"</span>
<span class="hljs-keyword">FROM</span> <span class="hljs-string">`my-app.analytics_123456789.events_*`</span>
<span class="hljs-keyword">WHERE</span>
_table_suffix <span class="hljs-keyword">between</span> <span class="hljs-string">'20200201'</span> <span class="hljs-keyword">AND</span> <span class="hljs-string">'20200229'</span>
<span class="hljs-keyword">AND</span> event_name=<span class="hljs-string">"session_start"</span>
<span class="hljs-keyword">AND</span> user_pseudo_id <span class="hljs-keyword">IN</span> (<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">FROM</span> user_october )<font></font>
)<font></font>
<span class="hljs-keyword">UNION</span> <span class="hljs-keyword">ALL</span><font></font>
(<font></font>
<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">COUNT</span>(<span class="hljs-keyword">DISTINCT</span> user_pseudo_id),<span class="hljs-string">"202003"</span>
<span class="hljs-keyword">FROM</span> <span class="hljs-string">`my-app.analytics_123456789.events_*`</span>
<span class="hljs-keyword">WHERE</span>
_table_suffix <span class="hljs-keyword">between</span> <span class="hljs-string">'20200301'</span> <span class="hljs-keyword">AND</span> <span class="hljs-string">'20200331'</span>
<span class="hljs-keyword">AND</span> event_name=<span class="hljs-string">"session_start"</span>
<span class="hljs-keyword">AND</span> user_pseudo_id <span class="hljs-keyword">IN</span> (<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">FROM</span> user_october)<font></font>
)<font></font>
)<font></font>
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> <span class="hljs-keyword">month</span> <span class="hljs-keyword">ASC</span><font></font>
),<font></font>
<font></font>
<span class="hljs-comment">#november</span><font></font>
<font></font>
cohorte_november <span class="hljs-keyword">AS</span><font></font>
(<font></font>
<span class="hljs-keyword">WITH</span>
user_november <span class="hljs-keyword">AS</span><font></font>
(<font></font>
<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">DISTINCT</span> user_pseudo_id <span class="hljs-keyword">AS</span> <span class="hljs-keyword">user</span>
<span class="hljs-keyword">FROM</span> <span class="hljs-string">`my-app.analytics_123456789.events_*`</span>
<span class="hljs-keyword">WHERE</span>
_table_suffix <span class="hljs-keyword">between</span> <span class="hljs-string">'20191101'</span> <span class="hljs-keyword">AND</span> <span class="hljs-string">'20191130'</span>
<span class="hljs-keyword">AND</span>
event_name=<span class="hljs-string">"first_open"</span><font></font>
)<font></font>
<span class="hljs-keyword">SELECT</span> sessions, <span class="hljs-keyword">month</span>
<span class="hljs-keyword">FROM</span><font></font>
(<font></font>
(<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">COUNT</span>(<span class="hljs-keyword">DISTINCT</span> user_pseudo_id) <span class="hljs-keyword">AS</span> sessions,<span class="hljs-string">"201909"</span> <span class="hljs-keyword">AS</span> <span class="hljs-keyword">month</span>
<span class="hljs-keyword">FROM</span> <span class="hljs-string">`my-app.analytics_123456789.events_*`</span>
<span class="hljs-keyword">WHERE</span>
_table_suffix <span class="hljs-keyword">between</span> <span class="hljs-string">'20190901'</span> <span class="hljs-keyword">AND</span> <span class="hljs-string">'20190930'</span>
<span class="hljs-keyword">AND</span> event_name=<span class="hljs-string">"session_start"</span>
<span class="hljs-keyword">AND</span> user_pseudo_id <span class="hljs-keyword">IN</span> (<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">FROM</span> user_november )<font></font>
)<font></font>
<span class="hljs-keyword">UNION</span> <span class="hljs-keyword">ALL</span>
(<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">COUNT</span>(<span class="hljs-keyword">DISTINCT</span> user_pseudo_id),<span class="hljs-string">"201910"</span>
<span class="hljs-keyword">FROM</span> <span class="hljs-string">`my-app.analytics_123456789.events_*`</span>
<span class="hljs-keyword">WHERE</span>
_table_suffix <span class="hljs-keyword">between</span> <span class="hljs-string">'20191001'</span> <span class="hljs-keyword">AND</span> <span class="hljs-string">'20191031'</span>
<span class="hljs-keyword">AND</span> event_name=<span class="hljs-string">"session_start"</span>
<span class="hljs-keyword">AND</span> user_pseudo_id <span class="hljs-keyword">IN</span> (<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">FROM</span> user_november )<font></font>
)<font></font>
<span class="hljs-keyword">UNION</span> <span class="hljs-keyword">ALL</span><font></font>
(<font></font>
<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">COUNT</span>(<span class="hljs-keyword">DISTINCT</span> user_pseudo_id),<span class="hljs-string">"201911"</span>
<span class="hljs-keyword">FROM</span> <span class="hljs-string">`my-app.analytics_123456789.events_*`</span>
<span class="hljs-keyword">WHERE</span>
_table_suffix <span class="hljs-keyword">between</span> <span class="hljs-string">'20191101'</span> <span class="hljs-keyword">AND</span> <span class="hljs-string">'20191130'</span>
<span class="hljs-keyword">AND</span> event_name=<span class="hljs-string">"session_start"</span>
<span class="hljs-keyword">AND</span> user_pseudo_id <span class="hljs-keyword">IN</span> (<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">FROM</span> user_november )<font></font>
)<font></font>
<span class="hljs-keyword">UNION</span> <span class="hljs-keyword">ALL</span><font></font>
(<font></font>
<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">COUNT</span>(<span class="hljs-keyword">DISTINCT</span> user_pseudo_id),<span class="hljs-string">"201912"</span>
<span class="hljs-keyword">FROM</span> <span class="hljs-string">`my-app.analytics_123456789.events_*`</span>
<span class="hljs-keyword">WHERE</span>
_table_suffix <span class="hljs-keyword">between</span> <span class="hljs-string">'20191201'</span> <span class="hljs-keyword">AND</span> <span class="hljs-string">'20191231'</span>
<span class="hljs-keyword">AND</span> event_name=<span class="hljs-string">"session_start"</span>
<span class="hljs-keyword">AND</span> user_pseudo_id <span class="hljs-keyword">IN</span> (<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">FROM</span> user_november )<font></font>
)<font></font>
<span class="hljs-keyword">UNION</span> <span class="hljs-keyword">ALL</span><font></font>
(<font></font>
<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">COUNT</span>(<span class="hljs-keyword">DISTINCT</span> user_pseudo_id),<span class="hljs-string">"202001"</span>
<span class="hljs-keyword">FROM</span> <span class="hljs-string">`my-app.analytics_123456789.events_*`</span>
<span class="hljs-keyword">WHERE</span>
_table_suffix <span class="hljs-keyword">between</span> <span class="hljs-string">'20200101'</span> <span class="hljs-keyword">AND</span> <span class="hljs-string">'20200131'</span>
<span class="hljs-keyword">AND</span> event_name=<span class="hljs-string">"session_start"</span>
<span class="hljs-keyword">AND</span> user_pseudo_id <span class="hljs-keyword">IN</span> (<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">FROM</span> user_november )<font></font>
)<font></font>
<span class="hljs-keyword">UNION</span> <span class="hljs-keyword">ALL</span><font></font>
(<font></font>
<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">COUNT</span>(<span class="hljs-keyword">DISTINCT</span> user_pseudo_id),<span class="hljs-string">"202002"</span>
<span class="hljs-keyword">FROM</span> <span class="hljs-string">`my-app.analytics_123456789.events_*`</span>
<span class="hljs-keyword">WHERE</span>
_table_suffix <span class="hljs-keyword">between</span> <span class="hljs-string">'20200201'</span> <span class="hljs-keyword">AND</span> <span class="hljs-string">'20200229'</span>
<span class="hljs-keyword">AND</span> event_name=<span class="hljs-string">"session_start"</span>
<span class="hljs-keyword">AND</span> user_pseudo_id <span class="hljs-keyword">IN</span> (<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">FROM</span> user_november )<font></font>
)<font></font>
<span class="hljs-keyword">UNION</span> <span class="hljs-keyword">ALL</span><font></font>
(<font></font>
<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">COUNT</span>(<span class="hljs-keyword">DISTINCT</span> user_pseudo_id),<span class="hljs-string">"202003"</span>
<span class="hljs-keyword">FROM</span> <span class="hljs-string">`my-app.analytics_123456789.events_*`</span>
<span class="hljs-keyword">WHERE</span>
_table_suffix <span class="hljs-keyword">between</span> <span class="hljs-string">'20200301'</span> <span class="hljs-keyword">AND</span> <span class="hljs-string">'20200331'</span>
<span class="hljs-keyword">AND</span> event_name=<span class="hljs-string">"session_start"</span>
<span class="hljs-keyword">AND</span> user_pseudo_id <span class="hljs-keyword">IN</span> (<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">FROM</span> user_november )<font></font>
)<font></font>
)<font></font>
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> <span class="hljs-keyword">month</span> <span class="hljs-keyword">ASC</span><font></font>
),<font></font>
<font></font>
<span class="hljs-comment">#decembre</span><font></font>
<font></font>
<font></font>
cohorte_decembre <span class="hljs-keyword">AS</span><font></font>
(<font></font>
<span class="hljs-keyword">WITH</span>
user_decembre <span class="hljs-keyword">AS</span><font></font>
(<font></font>
<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">DISTINCT</span> user_pseudo_id <span class="hljs-keyword">AS</span> <span class="hljs-keyword">user</span>
<span class="hljs-keyword">FROM</span> <span class="hljs-string">`my-app.analytics_123456789.events_*`</span>
<span class="hljs-keyword">WHERE</span>
_table_suffix <span class="hljs-keyword">between</span> <span class="hljs-string">'20191201'</span> <span class="hljs-keyword">AND</span> <span class="hljs-string">'20191231'</span>
<span class="hljs-keyword">AND</span>
event_name=<span class="hljs-string">"first_open"</span><font></font>
)<font></font>
<span class="hljs-keyword">SELECT</span> sessions, <span class="hljs-keyword">month</span>
<span class="hljs-keyword">FROM</span><font></font>
(<font></font>
(<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">COUNT</span>(<span class="hljs-keyword">DISTINCT</span> user_pseudo_id) <span class="hljs-keyword">AS</span> sessions,<span class="hljs-string">"201909"</span> <span class="hljs-keyword">AS</span> <span class="hljs-keyword">month</span>
<span class="hljs-keyword">FROM</span> <span class="hljs-string">`my-app.analytics_123456789.events_*`</span>
<span class="hljs-keyword">WHERE</span>
_table_suffix <span class="hljs-keyword">between</span> <span class="hljs-string">'20190901'</span> <span class="hljs-keyword">AND</span> <span class="hljs-string">'20190930'</span>
<span class="hljs-keyword">AND</span> event_name=<span class="hljs-string">"session_start"</span>
<span class="hljs-keyword">AND</span> user_pseudo_id <span class="hljs-keyword">IN</span> (<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">FROM</span> user_decembre )<font></font>
)<font></font>
<span class="hljs-keyword">UNION</span> <span class="hljs-keyword">ALL</span>
(<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">COUNT</span>(<span class="hljs-keyword">DISTINCT</span> user_pseudo_id),<span class="hljs-string">"201910"</span>
<span class="hljs-keyword">FROM</span> <span class="hljs-string">`my-app.analytics_123456789.events_*`</span>
<span class="hljs-keyword">WHERE</span>
_table_suffix <span class="hljs-keyword">between</span> <span class="hljs-string">'20191001'</span> <span class="hljs-keyword">AND</span> <span class="hljs-string">'20191031'</span>
<span class="hljs-keyword">AND</span> event_name=<span class="hljs-string">"session_start"</span>
<span class="hljs-keyword">AND</span> user_pseudo_id <span class="hljs-keyword">IN</span> (<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">FROM</span> user_decembre  )<font></font>
)<font></font>
<span class="hljs-keyword">UNION</span> <span class="hljs-keyword">ALL</span><font></font>
(<font></font>
<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">COUNT</span>(<span class="hljs-keyword">DISTINCT</span> user_pseudo_id),<span class="hljs-string">"201911"</span>
<span class="hljs-keyword">FROM</span> <span class="hljs-string">`my-app.analytics_123456789.events_*`</span>
<span class="hljs-keyword">WHERE</span>
_table_suffix <span class="hljs-keyword">between</span> <span class="hljs-string">'20191101'</span> <span class="hljs-keyword">AND</span> <span class="hljs-string">'20191130'</span>
<span class="hljs-keyword">AND</span> event_name=<span class="hljs-string">"session_start"</span>
<span class="hljs-keyword">AND</span> user_pseudo_id <span class="hljs-keyword">IN</span> (<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">FROM</span> user_decembre  )<font></font>
)<font></font>
<span class="hljs-keyword">UNION</span> <span class="hljs-keyword">ALL</span><font></font>
(<font></font>
<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">COUNT</span>(<span class="hljs-keyword">DISTINCT</span> user_pseudo_id),<span class="hljs-string">"201912"</span>
<span class="hljs-keyword">FROM</span> <span class="hljs-string">`my-app.analytics_123456789.events_*`</span>
<span class="hljs-keyword">WHERE</span>
_table_suffix <span class="hljs-keyword">between</span> <span class="hljs-string">'20191201'</span> <span class="hljs-keyword">AND</span> <span class="hljs-string">'20191231'</span>
<span class="hljs-keyword">AND</span> event_name=<span class="hljs-string">"session_start"</span>
<span class="hljs-keyword">AND</span> user_pseudo_id <span class="hljs-keyword">IN</span> (<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">FROM</span> user_decembre  )<font></font>
)<font></font>
<span class="hljs-keyword">UNION</span> <span class="hljs-keyword">ALL</span><font></font>
(<font></font>
<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">COUNT</span>(<span class="hljs-keyword">DISTINCT</span> user_pseudo_id),<span class="hljs-string">"202001"</span>
<span class="hljs-keyword">FROM</span> <span class="hljs-string">`my-app.analytics_123456789.events_*`</span>
<span class="hljs-keyword">WHERE</span>
_table_suffix <span class="hljs-keyword">between</span> <span class="hljs-string">'20200101'</span> <span class="hljs-keyword">AND</span> <span class="hljs-string">'20200131'</span>
<span class="hljs-keyword">AND</span> event_name=<span class="hljs-string">"session_start"</span>
<span class="hljs-keyword">AND</span> user_pseudo_id <span class="hljs-keyword">IN</span> (<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">FROM</span> user_decembre  )<font></font>
)<font></font>
<span class="hljs-keyword">UNION</span> <span class="hljs-keyword">ALL</span><font></font>
(<font></font>
<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">COUNT</span>(<span class="hljs-keyword">DISTINCT</span> user_pseudo_id),<span class="hljs-string">"202002"</span>
<span class="hljs-keyword">FROM</span> <span class="hljs-string">`my-app.analytics_123456789.events_*`</span>
<span class="hljs-keyword">WHERE</span>
_table_suffix <span class="hljs-keyword">between</span> <span class="hljs-string">'20200201'</span> <span class="hljs-keyword">AND</span> <span class="hljs-string">'20200229'</span>
<span class="hljs-keyword">AND</span> event_name=<span class="hljs-string">"session_start"</span>
<span class="hljs-keyword">AND</span> user_pseudo_id <span class="hljs-keyword">IN</span> (<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">FROM</span> user_decembre  )<font></font>
)<font></font>
<span class="hljs-keyword">UNION</span> <span class="hljs-keyword">ALL</span><font></font>
(<font></font>
<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">COUNT</span>(<span class="hljs-keyword">DISTINCT</span> user_pseudo_id),<span class="hljs-string">"202003"</span>
<span class="hljs-keyword">FROM</span> <span class="hljs-string">`my-app.analytics_123456789.events_*`</span>
<span class="hljs-keyword">WHERE</span>
_table_suffix <span class="hljs-keyword">between</span> <span class="hljs-string">'20200301'</span> <span class="hljs-keyword">AND</span> <span class="hljs-string">'20200331'</span>
<span class="hljs-keyword">AND</span> event_name=<span class="hljs-string">"session_start"</span>
<span class="hljs-keyword">AND</span> user_pseudo_id <span class="hljs-keyword">IN</span> (<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">FROM</span> user_decembre  )<font></font>
)<font></font>
)<font></font>
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> <span class="hljs-keyword">month</span> <span class="hljs-keyword">ASC</span><font></font>
)<font></font>
<font></font>
<span class="hljs-keyword">SELECT</span> cohorte_september.sessions <span class="hljs-keyword">AS</span> september_cohort,  <font></font>
 cohorte_october.sessions <span class="hljs-keyword">AS</span> october_cohort,  <font></font>
 cohorte_november.sessions <span class="hljs-keyword">AS</span> november_cohort,  <font></font>
 cohorte_decembre.sessions <span class="hljs-keyword">AS</span> december_cohort,  
 <span class="hljs-keyword">month</span><font></font>
<font></font>
<span class="hljs-keyword">FROM</span> cohorte_september
<span class="hljs-keyword">JOIN</span>  cohorte_october <span class="hljs-keyword">USING</span> (<span class="hljs-keyword">month</span>)
<span class="hljs-keyword">JOIN</span>  cohorte_november <span class="hljs-keyword">USING</span> (<span class="hljs-keyword">month</span>)
<span class="hljs-keyword">JOIN</span>  cohorte_decembre <span class="hljs-keyword">USING</span> (<span class="hljs-keyword">month</span>)
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> <span class="hljs-keyword">month</span> <span class="hljs-keyword">ASC</span></code></pre><br>
</div>
                    </div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">調査結果</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ほとんどの場合、深刻な変更が近い将来行われ、Google App + Webは業界標準のようなものになります。このアプローチにより、マーケティングプラットフォームやGoogle Cloud PlatformなどのGoogleサービス、特にBigQuery間の緊密な統合が実現します。 SQLクエリ（DBMSを操作するための言語）を作成する機能を失った場合は、メモリ内の情報を更新して練習することを強くお勧めします。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
高度なデジタルデータ分析は、生データへの容易なアクセス、高速で効率的なコンピューティングプロセス、および情報の優れた視覚化により、ますます強力なツールになりつつあります。近い将来、他の種類のビジネスデータとのより緊密な統合が実装される予定です。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
長年にわたり、専門家はデジタル分析とビジネス分析を連携させる必要があると主張してきました。</font><font style="vertical-align: inherit;">ゆっくりではありますが、自信を持って、私たちはこのアイデアを現実に翻訳する方向に向かっています。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja503688/index.html">Joel Spolsky：ソフトウェア開発者になることの意味（Coder to Developerの序文）</a></li>
<li><a href="../ja503690/index.html">Kubernetesのベストプラクティス。Kubernetes Zero Downtime Cluster Upgrade</a></li>
<li><a href="../ja503696/index.html">Gears of war：機械的なアナログコンピュータが海を支配したとき</a></li>
<li><a href="../ja503698/index.html">リモートアカウンティング-ビジネス上のメリット</a></li>
<li><a href="../ja503700/index.html">2020年のReactフォームの作成</a></li>
<li><a href="../ja503704/index.html">100のアプリケーションの起動の代わりに-1つの自動テスト、またはQAエンジニアを20年の寿命で救う方法</a></li>
<li><a href="../ja503706/index.html">ロケットの打ち上げと着陸にこれらの迷惑な気象規則が必要なのはなぜですか？</a></li>
<li><a href="../ja503710/index.html">PyDoma [PyData Moscow Meetup＃12]：2020年5月26日</a></li>
<li><a href="../ja503712/index.html">Kubernetes永続ストレージソリューションのステータスとパフォーマンス</a></li>
<li><a href="../ja503716/index.html">宇宙に雲が必要ですか</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>