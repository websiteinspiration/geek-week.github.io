<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤳 🏎️ 🧑🏽‍🤝‍🧑🏽 Rédaction efficace des autotests - tests sous-cutanés 💇 🚜 👫</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Imaginons une situation hypothétique (dans laquelle on plonge régulièrement). Vous avez été affecté à un projet pour l'automatisation «gash». On vous ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Rédaction efficace des autotests - tests sous-cutanés</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/502154/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Imaginons une situation </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hypothétique</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (dans laquelle on plonge régulièrement). </font><font style="vertical-align: inherit;">Vous avez été affecté à un projet pour l'automatisation «gash». </font><font style="vertical-align: inherit;">On vous donne un énorme plan de test avec un grand nombre (des milliers d'entre eux!) De tests «manuels», et ils disent que vous devez faire quelque chose, et là. </font><font style="vertical-align: inherit;">Et aussi, rapidement et de manière stable. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il est </font><font style="vertical-align: inherit;">trop tard pour </font><font style="vertical-align: inherit;">écrire des tests unitaires, ou même penser à </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TDD</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , le code produit est écrit depuis longtemps. </font><font style="vertical-align: inherit;">Votre parole, camarade autotesteur! </font></font><br>
<br>
<img src="https://habrastorage.org/webt/c6/l-/p9/c6l-p9jm_r8j9ix3dpkptsalx3i.jpeg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Heureusement, il existe une petite astuce qui vous permettra d'augmenter la couverture et de rendre les tests stables et rapides - les tests sous-cutanés («tests sous-cutanés»), mais tout d'abord.</font></font><br>
<a name="habracut"></a><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'essence du problème</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le premier réflexe conditionnel de l'automate est de prendre du sélénium (enfin, soit là, du séléniure, soit un autre prodige pour les tests d'interface utilisateur). </font><font style="vertical-align: inherit;">Il s'agit d'une telle norme de l'industrie, mais il existe de nombreuses raisons pour lesquelles elle ne décolle pas:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les tests d'interface utilisateur sont lents. </font><font style="vertical-align: inherit;">Il n'y a aucune échappatoire à cela. </font><font style="vertical-align: inherit;">Ils peuvent être exécutés en parallèle, classés et exécutés un peu plus rapidement, mais ils resteront lents.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les tests d'interface utilisateur sont instables. </font><font style="vertical-align: inherit;">En partie parce qu'ils sont lents. </font><font style="vertical-align: inherit;">Et aussi parce que le navigateur Web et l'interface utilisateur n'ont pas été créés pour être contrôlés par un ordinateur (cette tendance est en train de changer, mais ce n'est pas le cas).</font></font></li>
<li>UI- —        .    <i> </i>. (   , , ,   «» -      ,        ).</li>
<li> , , , UI-   . <b>  . </b>         <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">ID  XPath </a>.       ,   «»  -       -  .   ,      ,      —  - ,    .</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quelqu'un dira que certaines fonctionnalités ne peuvent tout simplement pas être testées autrement. </font><font style="vertical-align: inherit;">Je dirai que s'il existe des fonctionnalités qui ne peuvent être testées que par des tests d'interface utilisateur (à l'exception de la logique d'interface utilisateur elle-même), cela peut être un bon signe de problèmes architecturaux dans le produit.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le seul véritable avantage des tests d'interface utilisateur est qu'ils vous permettent de «lancer» des vérifications plus ou moins utiles sans avoir à plonger et à étudier le code du produit lui-même. </font><font style="vertical-align: inherit;">Ce qui n'est guère un avantage à long terme. </font><font style="vertical-align: inherit;">Une explication plus détaillée des raisons pour lesquelles cela peut être entendu dans </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cette présentation</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Solution alternative</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans un cas très simple, considérons une application consistant en un formulaire où vous pouvez entrer un nom d'utilisateur valide. </font><font style="vertical-align: inherit;">Si vous entrez un nom d'utilisateur qui correspond aux règles - L'utilisateur sera créé dans le système et enregistré dans la base de données. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ef/sx/qs/efsxqs-1l5hrlvozwlt78knzps8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le code source de l'application peut être trouvé ici: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github.com/senpay/login-form</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Vous avez été averti - dans l'application, il y a beaucoup de bugs et il n'y a pas d'outils ni de frameworks à la mode. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous essayez de "jeter" une feuille de contrôle pour cette application, vous pouvez obtenir quelque chose comme:</font></font><br>
<div class="scrollable-table"><table border="1">
<tbody>
<tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nombre</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pas</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Résultats attendus</font></font></th>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. Entrez un nom d'utilisateur valide </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2. Cliquez sur le bouton "Connexion"</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2. Un nouvel utilisateur est créé.</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. Entrez un nom d'utilisateur vide </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2. Cliquez sur le bouton "Connexion"</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2. Le message d'erreur s'affiche.</font></font></td>
</tr>
</tbody>
</table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cela a-t-il l'air simple? Simplement! Puis-je écrire des tests d'interface utilisateur? Pouvez. Un exemple des tests écrits (avec un </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">framework</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> complet à </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">trois niveaux</font></a><font style="vertical-align: inherit;"> ) peut être trouvé dans </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LoginFormTest.java</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> si vous allez au </font><font style="vertical-align: inherit;">label </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">uitests</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dans </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">git</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">git checkout uitests</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ):</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LoginFormTest</span> </span>{<font></font>
<font></font>
    SelenideMainPage sut = SelenideMainPage.INSTANCE;<font></font>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String APPLICATION_URL = <span class="hljs-string">"http://localhost:4567/index"</span>;<font></font>
<font></font>
    <span class="hljs-meta">@BeforeClass</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setUpClass</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">final</span> String[] args = {};<font></font>
        Main.main(args);<font></font>
        Configuration.browser = <span class="hljs-string">"firefox"</span>;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-meta">@Before</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setUp</span><span class="hljs-params">()</span> </span>{<font></font>
        open(APPLICATION_URL);<font></font>
    }<font></font>
<font></font>
    <span class="hljs-meta">@After</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">tearDown</span><span class="hljs-params">()</span> </span>{<font></font>
        close();<font></font>
    }<font></font>
<font></font>
    <span class="hljs-meta">@Test</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">shouldBeAbleToAddNewUser</span><span class="hljs-params">()</span> </span>{<font></font>
        sut.setUserName(<span class="hljs-string">"MyCoolNewUser"</span>);<font></font>
        sut.clickSubmit();<font></font>
        Assert.assertEquals(<span class="hljs-string">"Status: user MyCoolNewUser was created"</span>, sut.getStatus());<font></font>
        Assert.assertTrue(sut.getUsers().contains(<span class="hljs-string">"Name: MyCoolNewUser"</span>));<font></font>
    }<font></font>
<font></font>
    <span class="hljs-meta">@Test</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">shouldNotBeAbleToAddEmptyUseName</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> numberOfUsersBeforeTheTest = sut.getUsers().size();<font></font>
        sut.clickSubmit();<font></font>
        Assert.assertEquals(<span class="hljs-string">"Status: Login cannot be empty"</span>, sut.getStatus());<font></font>
        Assert.assertEquals(numberOfUsersBeforeTheTest, sut.getUsers().size());<font></font>
    }<font></font>
}<font></font>
</code></pre><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quelques mesures pour ce code:</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Temps d'exécution: ~ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12 secondes</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (12 secondes 956 millisecondes la dernière fois que j'ai exécuté ces tests) </font><font style="vertical-align: inherit;">
Classe de </font></font><br>
<u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">couverture de code</font></font></u><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">100%</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Méthode: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">93,8% (30/32)</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Ligne: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">97,4% (75/77 )</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
maintenant , </font><font style="vertical-align: inherit;">nous allons supposer que autotests fonctionnels peuvent être écrites au niveau « juste en </font><font style="vertical-align: inherit;">dessous de </font><font style="vertical-align: inherit;">» l'interface utilisateur. Cette technique est appelée </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tests</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sous-cutanés («tests sous-cutanés» - tests qui testent immédiatement en dessous du niveau de la logique d'affichage) et a été proposée par Martin Fowler il y a assez longtemps [ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ].</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lorsque les gens pensent à des autotests «non UI», ils pensent souvent immédiatement à REST / SOAP ou à son API. </font><font style="vertical-align: inherit;">Mais l'API (Application Programming Interface) est un concept beaucoup plus large, n'affectant pas nécessairement HTTP et d'autres protocoles lourds. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si nous choisissons un code </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">produit</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , nous pouvons trouver quelque chose d'intéressant:</font></font><br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserApplication</span> </span>{<font></font>
<font></font>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> IUserRepository repository = <span class="hljs-keyword">new</span> InMemoryUserRepository();
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> UserService service = <span class="hljs-keyword">new</span> UserService(); {<font></font>
        service.setUserRepository(repository);<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> Map&lt;String, Object&gt; <span class="hljs-title">getUsersList</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> getUsersList(<span class="hljs-string">"N/A"</span>);<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> Map&lt;String, Object&gt; <span class="hljs-title">addUser</span><span class="hljs-params">(<span class="hljs-keyword">final</span> String username)</span> </span>{
        <span class="hljs-keyword">final</span> String status = service.addUser(username);
        <span class="hljs-keyword">final</span> Map&lt;String, Object&gt; model = getUsersList(status);
        <span class="hljs-keyword">return</span> model;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">private</span> Map&lt;String, Object&gt; <span class="hljs-title">getUsersList</span><span class="hljs-params">(String status)</span> </span>{
        <span class="hljs-keyword">final</span> Map&lt;String, Object&gt; model = <span class="hljs-keyword">new</span> HashMap&lt;&gt;();<font></font>
        model.put(<span class="hljs-string">"status"</span>, status);<font></font>
        model.put(<span class="hljs-string">"users"</span>, service.getUserInfoList());
        <span class="hljs-keyword">return</span> model;<font></font>
    }<font></font>
}<font></font>
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lorsque nous cliquons sur une interface utilisateur, l'une de ces méthodes est appelée, ou un nouvel objet utilisateur est ajouté, ou une liste d'objets utilisateur déjà créés est renvoyée. </font><font style="vertical-align: inherit;">Et si nous utilisons </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">directement</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ces méthodes </font><font style="vertical-align: inherit;">? </font><font style="vertical-align: inherit;">Après tout, c'est une véritable API! </font><font style="vertical-align: inherit;">Et surtout, REST et d'autres API fonctionnent également sur le même principe - ils appellent une certaine méthode de "niveau contrôleur". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En utilisant ces méthodes directement, nous pouvons écrire un test plus simple et meilleur:</font></font><br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserApplicationTest</span> </span>{<font></font>
<font></font>
    <span class="hljs-keyword">private</span> UserApplication sut;<font></font>
<font></font>
    <span class="hljs-meta">@Before</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setUp</span><span class="hljs-params">()</span> </span>{<font></font>
       sut = <span class="hljs-keyword">new</span> UserApplication();<font></font>
    }<font></font>
<font></font>
    <span class="hljs-meta">@Test</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">shouldBeAbleToAddNewUser</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">final</span> Map&lt;String, Object&gt; myCoolNewUser = sut.addUser(<span class="hljs-string">"MyCoolNewUser"</span>);<font></font>
        Assert.assertEquals(<span class="hljs-string">"user MyCoolNewUser was created"</span>, myCoolNewUser.get(<span class="hljs-string">"status"</span>));<font></font>
        Assert.assertTrue(((List) myCoolNewUser.get(<span class="hljs-string">"users"</span>)).contains(<span class="hljs-string">"Name: MyCoolNewUser"</span>));<font></font>
    }<font></font>
<font></font>
    <span class="hljs-meta">@Test</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">shouldNotBeAbleToAddEmptyUseName</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">final</span> Map&lt;String, Object&gt; usersBeforeTest = sut.getUsersList();
        <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> numberOfUsersBeforeTheTest = ((List) usersBeforeTest.get(<span class="hljs-string">"users"</span>)).size();
        <span class="hljs-keyword">final</span> Map&lt;String, Object&gt; myCoolNewUser = sut.addUser(<span class="hljs-string">""</span>);<font></font>
        Assert.assertEquals(<span class="hljs-string">"Login cannot be empty"</span>, myCoolNewUser.get(<span class="hljs-string">"status"</span>));<font></font>
        Assert.assertEquals(numberOfUsersBeforeTheTest, ((List) myCoolNewUser.get(<span class="hljs-string">"users"</span>)).size());<font></font>
    }<font></font>
}</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ce code est disponible sous les sous- </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tests d'</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> étiquette </font><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="bash hljs">git checkout subctests</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Essayons de collecter des métriques? </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Temps d'exécution: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">~ 21 millisecondes </font></font></b><br>
<u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Couverture du code</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Classe: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">77,8%</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Méthode: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">78,1 (30/32)</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Ligne: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">78,7 (75/77)</font></font></b><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous avons perdu un peu de couverture, mais la vitesse des tests a augmenté 600 fois !!!</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans quelle mesure la perte de couverture est-elle importante / significative dans ce cas? </font><font style="vertical-align: inherit;">Dépend de la situation. </font><font style="vertical-align: inherit;">Nous avons perdu un petit code de colle, ce qui peut être (ou ne pas être) important (je recommande de déterminer quel code est perdu comme exercice). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cette perte de couverture justifie-t-elle l'introduction de tests lourds au niveau de l'interface utilisateur? </font><font style="vertical-align: inherit;">Cela dépend aussi de la situation. </font><font style="vertical-align: inherit;">On peut par exemple:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ajoutez un test d'interface utilisateur pour vérifier le code de colle, ou</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si nous ne nous attendons pas à des changements fréquents du code de colle - laissez-le sans autotests, ou</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si nous avons une sorte de test «manuel», il y a de fortes chances que le testeur remarque des problèmes avec le code de colle, ou</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Trouvez autre chose (même déploiement des Canaries)</font></font></li>
</ul><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Finalement</font></font></h3><br>
 <ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Il n'est pas nécessaire d'écrire les autotests fonctionnels au niveau de l'interface utilisateur ou de l'API REST / SOAP. </font><font style="vertical-align: inherit;">L'utilisation de «tests sous-cutanés» dans de nombreuses situations permettra de tester la même fonctionnalité avec une plus grande vitesse et stabilité.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'un des inconvénients de l'approche est une certaine perte de couverture.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Une façon d'éviter de perdre la couverture est le « </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">modèle de tests de fonctionnalités</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> »</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mais même avec la perte de couverture, l'augmentation de la vitesse et de la stabilité est significative.</font></font></li>
</ul><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une version anglaise de l'article est disponible </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr502134/index.html">Assez pour avoir peur de belles décisions subjectives dans le code - vous n'êtes pas des robots</a></li>
<li><a href="../fr502136/index.html">Compression des données dans Apache Ignite. Expérience Sberbank</a></li>
<li><a href="../fr502146/index.html">Table ronde en ligne "Je veux jouer"</a></li>
<li><a href="../fr502148/index.html">Utilisation de composants tiers dans le stockage en utilisant Qsan comme exemple</a></li>
<li><a href="../fr502150/index.html">Faire évoluer un réseau à haute charge avec Nutanix: fonctionnalités et défis avec un boîtier personnel</a></li>
<li><a href="../fr502156/index.html">Affaire Rambler c. NGINX: Table ronde sur les risques criminels liés à la numérisation 16 mai</a></li>
<li><a href="../fr502158/index.html">Comment organiser les tests afin d'accélérer et de stabiliser les versions des produits. Partie 2</a></li>
<li><a href="../fr502160/index.html">Le développement d'applications mobiles personnalisées est peu coûteux: réalité ou illusion</a></li>
<li><a href="../fr502166/index.html">Fantômes Windows 3.1</a></li>
<li><a href="../fr502176/index.html">Aller: Désérialisation JSON avec une saisie incorrecte, ou comment contourner les erreurs de développeur d'API</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>