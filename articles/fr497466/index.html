<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ’¿ ğŸ“€ ğŸ˜ Sysbench et la distribution des variables alÃ©atoires ğŸŒ¯ ğŸ›€ğŸ» ğŸ¦”</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="La traduction de l'article a Ã©tÃ© prÃ©parÃ©e spÃ©cialement pour les Ã©tudiants du cours Â«Bases de donnÃ©esÂ» .
 
 
  
 Ce que vous ignoriez peut-Ãªtre sur la ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Sysbench et la distribution des variables alÃ©atoires</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/497466/"><b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La traduction de l'article a Ã©tÃ© prÃ©parÃ©e spÃ©cialement pour les Ã©tudiants du cours </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Â«Bases de donnÃ©esÂ»</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></i></b><br>
<br>
<img src="https://habrastorage.org/webt/wq/ml/k1/wqmlk1exb13grilnxouud_qxo_o.png"><br>
<hr> <br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ce que vous ignoriez peut-Ãªtre sur la gÃ©nÃ©ration de nombres alÃ©atoires sysbench</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Sysbench est un outil de test de performances populaire. </font><font style="vertical-align: inherit;">Il a Ã©tÃ© Ã©crit Ã  l'origine par Peter Zaitsev au dÃ©but des annÃ©es 2000 et est devenu la norme de facto pour les tests et l'analyse comparative. </font><font style="vertical-align: inherit;">Il est actuellement pris en charge par Alexei Kopytov et est publiÃ© sur Github </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ã  l'</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> adresse </font><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cependant, j'ai remarquÃ© que, malgrÃ© sa large distribution, il y a des moments inconnus pour beaucoup dans sysbench. </font><font style="vertical-align: inherit;">Par exemple, la possibilitÃ© de modifier facilement les tests MySQL en utilisant Lua ou de configurer les paramÃ¨tres du gÃ©nÃ©rateur de nombres alÃ©atoires intÃ©grÃ©.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">De quoi parle l'article?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai Ã©crit cet article pour montrer Ã  quel point il est facile de personnaliser sysbench selon vos besoins. </font><font style="vertical-align: inherit;">Il existe de nombreuses faÃ§ons d'Ã©tendre les fonctionnalitÃ©s de sysbench, et l'une d'elles consiste Ã  configurer la gÃ©nÃ©ration d'identificateurs alÃ©atoires (ID). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par dÃ©faut, sysbench propose cinq options diffÃ©rentes pour gÃ©nÃ©rer des nombres alÃ©atoires. </font><font style="vertical-align: inherit;">Mais trÃ¨s souvent (en fait, presque jamais), aucun d'entre eux n'est explicitement indiquÃ©, et encore moins souvent vous pouvez voir les paramÃ¨tres de gÃ©nÃ©ration (pour les options oÃ¹ ils sont disponibles). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous avez une question: Â«Et pourquoi devrais-je Ãªtre intÃ©ressÃ© par cela? </font><font style="vertical-align: inherit;">AprÃ¨s tout, les valeurs par dÃ©faut sont tout Ã  fait appropriÃ©es Â», alors cet article est conÃ§u pour vous aider Ã  comprendre pourquoi ce n'est pas toujours le cas.</font></font><br>
<a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">commenÃ§ons</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quels sont les moyens de gÃ©nÃ©rer des nombres alÃ©atoires dans sysbench? </font><font style="vertical-align: inherit;">Les Ã©lÃ©ments suivants sont actuellement implÃ©mentÃ©s (vous pouvez facilement les voir grÃ¢ce Ã  l'option --help):</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SpÃ©cial (distribution spÃ©ciale)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gaussien (distribution gaussienne)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pareto (distribution Pareto)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zipfian (distribution Zipf)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Uniforme (distribution uniforme)</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par dÃ©faut, Special est utilisÃ© avec les paramÃ¨tres suivants:</font></font><br>
<br>
<ul>
<li><code>rand-spec-iter = 12</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - nombre d'itÃ©rations pour une distribution spÃ©ciale</font></font></li>
<li><code>rand-spec-pct = 1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - pourcentage de toute la plage dans laquelle les valeurs Â«spÃ©cialesÂ» tombent avec une distribution spÃ©ciale</font></font></li>
<li><code>rand-spec-res = 75</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - pourcentage de valeurs Â«spÃ©cialesÂ» Ã  utiliser dans une distribution spÃ©ciale</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme j'aime les tests et les scripts simples et faciles Ã  reproduire, toutes les donnÃ©es suivantes seront collectÃ©es Ã  l'aide des commandes sysbench suivantes:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sysbench ./src/lua/oltp_read.lua -mysql_storage_engine = innodb â€“db-driver = mysql â€“tables = 10 â€“table_size = 100 prepare</font></font></li>
<li>sysbench ./src/lua/oltp_read_write.lua â€“db-driver=mysql â€“tables=10 â€“table_size=100 â€“skip_trx=off â€“report-interval=1 â€“mysql-ignore-errors=all â€“mysql_storage_engine=innodb â€“auto_inc=on â€“histogram â€“stats_format=csv â€“db-ps-mode=disable â€“threads=10 â€“time=60 â€“rand-type=XXX run</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
N'hÃ©sitez pas Ã  vous expÃ©rimenter. La description et les donnÃ©es du script peuvent Ãªtre </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">trouvÃ©es ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pourquoi sysbench utilise-t-il un gÃ©nÃ©rateur de nombres alÃ©atoires? L'un des objectifs est de gÃ©nÃ©rer des ID qui seront utilisÃ©s dans les requÃªtes. Ainsi, dans notre exemple, des nombres entre 1 et 100 seront gÃ©nÃ©rÃ©s, en tenant compte de la crÃ©ation de 10 tables avec 100 lignes dans chacune. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Que faire si vous exÃ©cutez sysbench comme dÃ©crit ci-dessus et ne changez que -rand-type?</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
J'ai exÃ©cutÃ© ce script et utilisÃ© le journal gÃ©nÃ©ral pour collecter et analyser la frÃ©quence des valeurs d'ID gÃ©nÃ©rÃ©es. Voici le rÃ©sultat: </font><i><font style="vertical-align: inherit;">Uniforme </font></i></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">spÃ©cial </font></font></i><font style="vertical-align: inherit;"><i><font style="vertical-align: inherit;">Zipfian </font></i><i><font style="vertical-align: inherit;">Pareto </font></i><i><font style="vertical-align: inherit;">Gaussian</font></i><font style="vertical-align: inherit;"> 
On peut voir que ce paramÃ¨tre est important, non? AprÃ¨s tout, sysbench fait exactement ce que nous attendions de lui.</font></font><br>
<img src="https://habrastorage.org/webt/79/mg/ms/79mgmsokscoestls9idw2scam-m.png"><br>
<br>
<i><font style="vertical-align: inherit;"></font></i><br>
<img src="https://habrastorage.org/webt/xa/ke/d5/xaked5nxjxi5f0k4wersvgohs9c.png"><br>
<br>
<i><font style="vertical-align: inherit;"></font></i><br>
<img src="https://habrastorage.org/webt/kc/9w/qq/kc9wqq91bfc_6wm1jitdhvxdify.png"><br>
<br>
<i><font style="vertical-align: inherit;"></font></i><br>
<img src="https://habrastorage.org/webt/qq/tw/to/qqtwtovmhzldtd-wvzdvjwlmb40.png"><br>
<br>
<i><font style="vertical-align: inherit;"></font></i><br>
<img src="https://habrastorage.org/webt/pk/oe/gd/pkoegdfqzkc-hzix_zug89wy28c.png"><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Examinons de plus prÃ¨s chacune des distributions.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SpÃ©cial</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Special est utilisÃ© par dÃ©faut, donc si vous ne spÃ©cifiez PAS de type rand, sysbench utilisera special. </font><font style="vertical-align: inherit;">Special utilise un nombre trÃ¨s limitÃ© de valeurs ID. </font><font style="vertical-align: inherit;">Dans notre exemple, nous pouvons voir que les valeurs 50-51 sont principalement utilisÃ©es, les valeurs restantes entre 44-56 sont extrÃªmement rares, tandis que d'autres ne sont pratiquement pas utilisÃ©es. </font><font style="vertical-align: inherit;">Veuillez noter que les valeurs sÃ©lectionnÃ©es se situent au milieu de la plage disponible de 1-100. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans ce cas, le pic est d'environ deux ID reprÃ©sentant 2% de l'Ã©chantillon. </font><font style="vertical-align: inherit;">Si j'augmente le nombre d'enregistrements Ã  un million, le pic restera, mais ce sera Ã  7493, soit 0,74% de l'Ã©chantillon. </font><font style="vertical-align: inherit;">Comme cela sera plus restrictif, le nombre de pages sera probablement supÃ©rieur Ã  un.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Uniforme (distribution uniforme)</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme son nom l'indique, si nous utilisons Uniform, toutes les valeurs seront utilisÃ©es pour l'ID, et la distribution sera ... uniforme.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zipfian (distribution Zipf)</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La distribution Zipf, parfois appelÃ©e distribution zÃªta, est une distribution discrÃ¨te couramment utilisÃ©e en linguistique, en assurance et en modÃ©lisation d'Ã©vÃ©nements rares. </font><font style="vertical-align: inherit;">Dans ce cas, sysbench utilisera des nombres commenÃ§ant par le plus petit (1) et rÃ©duira trÃ¨s rapidement la frÃ©quence d'utilisation, en passant Ã  de plus grands nombres.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pareto (Pareto)</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pareto applique la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rÃ¨gle Â«80-20Â»</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Dans ce cas, les identifiants gÃ©nÃ©rÃ©s seront encore moins Ã©talÃ©s et seront plus concentrÃ©s dans un petit segment. </font><font style="vertical-align: inherit;">Dans notre exemple, 52% de tous les identifiants avaient une valeur de 1 et 73% des valeurs Ã©taient dans les 10 premiers nombres.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gaussien (distribution gaussienne)</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La distribution gaussienne (distribution normale) est bien </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">connue et familiÃ¨re</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Il est principalement utilisÃ© dans les statistiques et les prÃ©visions autour d'un facteur central. </font><font style="vertical-align: inherit;">Dans ce cas, les ID utilisÃ©s sont distribuÃ©s le long de la courbe en forme de cloche, en commenÃ§ant par la valeur moyenne, puis en diminuant lentement vers les bords.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ã€ quoi Ã§a sert?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Chacune des options ci-dessus a son propre usage et peut Ãªtre regroupÃ©e par objectif. Pareto et Focus spÃ©cial sur les points chauds. Dans ce cas, l'application utilise encore et encore la mÃªme page / donnÃ©e. C'est peut-Ãªtre ce dont nous avons besoin, mais nous devons comprendre ce que nous faisons et ne pas faire d'erreurs ici. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par exemple, si nous testons les performances de la compression de page InnoDB pendant la lecture, nous devons Ã©viter d'utiliser la valeur par dÃ©faut de Special ou Pareto. Si nous avons un ensemble de donnÃ©es de 1 To et un pool de mÃ©moire tampon de 30 Go et que nous demandons la mÃªme page plusieurs fois, cette page sera dÃ©jÃ  lue sur le disque et sera disponible non compressÃ©e en mÃ©moire. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bref, un tel test est une perte de temps et d'efforts.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La mÃªme chose si nous devons vÃ©rifier les performances de l'enregistrement. Ã‰crire la mÃªme page encore et encore n'est pas la meilleure option. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Qu'en est-il des tests de performances?</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Encore une fois, nous voulons tester les performances, mais dans quel cas? Il est important de comprendre que la mÃ©thode de gÃ©nÃ©ration de nombres alÃ©atoires affecte considÃ©rablement les rÃ©sultats du test. Et vos Â«dÃ©fauts assez bonsÂ» peuvent conduire Ã  des conclusions erronÃ©es. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les graphiques suivants montrent diffÃ©rentes latences en fonction du type de rand (type de test, temps, paramÃ¨tres supplÃ©mentaires et le nombre de threads sont les mÃªmes partout). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De type Ã  type, les dÃ©lais sont sensiblement diffÃ©rents: </font></font><br>
 <br>
<img src="https://habrastorage.org/webt/jy/fk/xi/jyfkxi1bbb16ljirvbablnmubtu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ici, je lisais et j'Ã©crivais, et les donnÃ©es Ã©taient extraites du schÃ©ma de performances (</font></font><code>sys.schema_table_statistics</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) Comme prÃ©vu, Pareto et Special prennent beaucoup plus de temps que d'autres, ce qui fait que le systÃ¨me (MySQL-InnoDB) souffre artificiellement de la concurrence dans un Â«point chaudÂ». </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La modification du type rand affecte non seulement le dÃ©lai, mais Ã©galement le nombre de lignes traitÃ©es, comme indiquÃ© par le schÃ©ma de performances. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zi/3s/6i/zi3s6iyv6xas2qusohmexwfb51q.png"><br>
<br>
<img src="https://habrastorage.org/webt/0s/rm/3v/0srm3vgqcdpcp3mxig49dsed5sq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Compte tenu de tout ce qui prÃ©cÃ¨de, il est important de comprendre ce que nous essayons d'Ã©valuer et de tester. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si mon objectif est de tester les performances du systÃ¨me Ã  tous les niveaux, je prÃ©fÃ©rerais peut-Ãªtre utiliser Uniform, qui chargera Ã©galement l'ensemble de donnÃ©es / le serveur de base de donnÃ©es / le systÃ¨me et sera plus susceptible de rÃ©partir uniformÃ©ment la lecture / la charge / l'Ã©criture. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si mon travail consiste Ã  travailler avec des points chauds, alors Pareto et Special sont probablement le bon choix.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais n'utilisez pas aveuglÃ©ment les valeurs par dÃ©faut. Ils peuvent vous convenir, mais ils sont souvent destinÃ©s aux cas extrÃªmes. D'aprÃ¨s mon expÃ©rience, vous pouvez souvent ajuster les paramÃ¨tres pour obtenir le rÃ©sultat dont vous avez besoin. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par exemple, vous souhaitez utiliser les valeurs du milieu en Ã©largissant l'intervalle de sorte qu'il n'y ait pas de pic pointu (spÃ©cial par dÃ©faut) ou de cloche (gaussien). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pouvez configurer Special pour obtenir quelque chose comme ceci: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/yh/t9/rm/yht9rmlcneu9z1crykuz_iu-9su.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
dans ce cas, les ID sont toujours Ã  proximitÃ© et il y a de la concurrence. Mais l'influence d'un Â«point chaudÂ» est moindre, donc les conflits possibles seront dÃ©sormais avec plusieurs identifiants, qui, selon le nombre d'enregistrements sur une page, peuvent Ãªtre sur plusieurs pages.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un autre exemple est le partitionnement. Par exemple, comment vÃ©rifier le fonctionnement de votre systÃ¨me avec les partitions, en vous concentrant sur les derniÃ¨res donnÃ©es, en archivant les anciennes? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Facile! Rappelez-vous le tableau de distribution de Pareto? Vous pouvez le changer selon vos besoins. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/h8/de/nw/h8denwi9z-xnnayni--stg3shrm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En spÃ©cifiant la valeur -rand-pareto, vous pouvez obtenir exactement ce que vous vouliez en forÃ§ant sysbench Ã  se concentrer sur les grandes valeurs d'ID. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zipfian peut Ã©galement Ãªtre configurÃ© et, bien que vous ne puissiez pas obtenir une inversion, comme c'est le cas avec Pareto, vous pouvez facilement passer d'un pic sur une valeur Ã  une distribution plus uniforme. Un bon exemple est le suivant:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/vt/sx/pq/vtsxpq5g4nx82lyo2j5os7qhnhc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La derniÃ¨re chose Ã  garder Ã  lâ€™esprit, et il me semble que ce sont des choses Ã©videntes, mais il vaut mieux dire que ne pas dire que lors de la modification des paramÃ¨tres de gÃ©nÃ©ration de nombres alÃ©atoires, les performances changeront. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comparer la latence: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/jm/9t/o5/jm9to5ipvyf15th5new6r78j9gy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ici, le vert montre les valeurs modifiÃ©es par rapport au bleu d'origine.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/rt/ls/tc/rtlstcuoiyy7xrqugbesgkrldhu.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rÃ©sultats</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ã€ ce stade, vous devez dÃ©jÃ  comprendre Ã  quel point il est facile de configurer la gÃ©nÃ©ration de nombres alÃ©atoires dans sysbench et Ã  quel point cela peut vous Ãªtre utile. </font><font style="vertical-align: inherit;">Gardez Ã  l'esprit que ce qui prÃ©cÃ¨de s'applique Ã  tous les appels, par exemple lorsque vous utilisez </font></font><code>sysbench.rand.default</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="sql hljs">local function get_id()<font></font>
   return sysbench.rand.default(1, sysbench.opt.table_size)<font></font>
<span class="hljs-keyword">End</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Compte tenu de cela, ne copiez pas inconsciemment le code des articles d'autres personnes, mais rÃ©flÃ©chissez et explorez ce dont vous avez besoin et comment y parvenir. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Avant d'exÃ©cuter les tests, vÃ©rifiez les options de gÃ©nÃ©ration de nombres alÃ©atoires pour vous assurer qu'elles sont appropriÃ©es et adaptÃ©es Ã  vos besoins. </font><font style="vertical-align: inherit;">Pour simplifier ma vie, j'utilise </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ce test simple</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Ce test affiche des informations de distribution d'ID assez claires. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mon conseil est que vous devez comprendre vos besoins et effectuer correctement des tests / benchmarking.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RÃ©fÃ©rences</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout d'abord, c'est </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sysbench</font></font></a> <font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> lui-mÃªme </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;">.</font></a></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Articles sur Zipfian:</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nouvelle distribution de gÃ©nÃ©rateur alÃ©atoire pour sysbench - Zipf</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en.wikipedia.org/wiki/Zipf%27s_law</font></font></a></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pareto:</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en.wikipedia.org/wiki/Pareto_distribution</font></font></a></li>
</ul><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'article de Percona sur la faÃ§on d'Ã©crire vos scripts dans sysbench</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Tous les matÃ©riaux utilisÃ©s pour cet article sont </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sur GitHub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
â†’ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En savoir plus sur le cours</font></font></a><br>
<br>
<hr></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr497446/index.html">Alexander Iofa: Â«Diriger une grande Ã©quipe, c'est marcher le long d'un couteauÂ»</a></li>
<li><a href="../fr497450/index.html">Bases de validation personnalisÃ©es dans Symfony 4/5 avec des exemples</a></li>
<li><a href="../fr497452/index.html">Nouvelles CLion: version 2020.1, IDE quinquennal et questions et rÃ©ponses en ligne</a></li>
<li><a href="../fr497456/index.html">Animations printaniÃ¨res dans Vue</a></li>
<li><a href="../fr497460/index.html">Streetsview en 2000</a></li>
<li><a href="../fr497468/index.html">[Master class] Attaques pratiques sur l'interface USB</a></li>
<li><a href="../fr497470/index.html">Comment Ã©jecter des virus sur le SDK Corona</a></li>
<li><a href="../fr497476/index.html">Top 8 des structures de donnÃ©es JavaScript</a></li>
<li><a href="../fr497478/index.html">Tutoriel de simulateur de rÃ©seau ns-3. Chapitre 4</a></li>
<li><a href="../fr497480/index.html">ConfÃ©rences vidÃ©o: Unix Way</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>