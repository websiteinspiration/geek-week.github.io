<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🔅 🍸 👨🏽‍🌾 Un exemple d'architecture hexagonale en Java 🤴🏾 🏏 🤶🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Une traduction de l'article a été préparée spécialement pour les étudiants du cours Java Developer .
 
  
 
 
 En tant que développeurs, nous devons s...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Un exemple d'architecture hexagonale en Java</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/492076/"><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Une traduction de l'article a été préparée spécialement pour les étudiants du </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cours Java Developer</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></b></i><br>
<br>
<img src="https://habrastorage.org/webt/gd/2f/ap/gd2fapnfvwthsglrmjmhnn1wyvk.png"> <br>
<br>
<hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En tant que développeurs, nous devons souvent faire face au code hérité, qui est difficile à maintenir. Vous savez à quel point il est difficile de comprendre une logique simple dans un grand code spaghetti alambiqué. Améliorer le code ou développer de nouvelles fonctionnalités devient un cauchemar pour le développeur.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'un des principaux objectifs de la conception de logiciels est la facilité de maintenance. Un code mal entretenu devient difficile à gérer. Il est non seulement difficile à mettre à l'échelle, mais il devient difficile d'attirer de nouveaux développeurs. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans le monde informatique, les choses évoluent rapidement. Si vous êtes invité à implémenter de toute urgence de nouvelles fonctionnalités ou si vous souhaitez passer d'une base de données relationnelle à NoSQL, quelle sera votre première réaction? </font></font><br>
<br>
<img src="https://habrastorage.org/webt/wk/lj/8b/wklj8bigqatvwl-qo7cjlapjl_8.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une bonne couverture des tests augmente la confiance des développeurs quant à l'absence de problèmes avec la nouvelle version. Cependant, si votre logique métier est liée à la logique de l'infrastructure, il peut y avoir des problèmes avec ses tests. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/mo/vc/hh/movchhizk5zg4m56jhtnkdsrvdy.gif"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pourquoi moi?</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais il y a assez de discours vides, regardons l'architecture hexagonale. </font><font style="vertical-align: inherit;">L'utilisation de ce modèle vous aidera à améliorer la maintenabilité, la testabilité et d'autres avantages.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Introduction à l'architecture hexagonale</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le terme </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">architecture hexagonale (architecture hexagonale, hexagonale) a été</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> inventé en 2006 par Alistair Cockburn. Ce style architectural est également appelé </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">architecture de ports et d'adaptateurs</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . En termes simples, les composants de votre application interagissent via de nombreux points de terminaison (ports). Pour traiter les demandes, vous devez disposer d'adaptateurs correspondant aux ports. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ici, vous pouvez faire une analogie avec les ports USB de l'ordinateur. Vous pouvez les utiliser si vous disposez d'un adaptateur compatible (chargeur ou lecteur flash).</font></font><br>
<br>
<img src="https://habrastorage.org/webt/tn/om/vd/tnomvd4i3cngipfc8olfqpyec9g.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cette architecture peut être représentée schématiquement comme un hexagone avec une logique métier au centre (au cœur), entourée des objets avec lesquels elle interagit et des composants qui la contrôlent, fournissant des données d'entrée. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans la vie réelle, les utilisateurs, les appels d'API, les scripts automatisés et les tests unitaires interagissent et fournissent des informations à votre application. Si votre logique métier est mélangée à une logique d'interface utilisateur, vous rencontrerez de nombreux problèmes. Par exemple, il sera difficile de basculer la saisie de données de l'interface utilisateur vers des tests unitaires.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'application interagit également avec des objets externes tels que des bases de données, des files d'attente de messages, des serveurs Web (via des appels API HTTP), etc. Si nécessaire, migrez la base de données ou téléchargez des données dans un fichier, vous devriez pouvoir le faire sans affecter l'entreprise. logique. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme son nom l'indique, « </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ports et adaptateurs</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> », il existe des «ports» par lesquels l'interaction se produit et les «adaptateurs» sont des composants qui traitent les entrées des utilisateurs et les convertissent en «langue» du domaine. Les adaptateurs encapsulent la logique d'interaction avec des systèmes externes, tels que les bases de données, les files d'attente de messages, etc., et facilitent la communication entre la logique métier et les objets externes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le diagramme ci-dessous montre les couches dans lesquelles l'application est divisée.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/yu/zd/k-/yuzdk-bppoignfpz98ck7ld-a4q.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'architecture hexagonale distingue trois couches dans une application: domaine, application et infrastructure:</font></font><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Domaine</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">La couche contient la logique métier principale. </font><font style="vertical-align: inherit;">Il n'a pas besoin de connaître les détails de la mise en œuvre des couches extérieures.</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Application</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Une couche agit comme un pont entre les couches d'un domaine et de l'infrastructure.</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Infrastructure</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">La mise en œuvre de l'interaction du domaine avec le monde extérieur. </font><font style="vertical-align: inherit;">Les couches intérieures lui ressemblent comme une boîte noire.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selon cette architecture, deux types de participants interagissent avec l'application: primaire (pilote) et secondaire (piloté). </font><font style="vertical-align: inherit;">Les acteurs clés envoient des demandes et gèrent l'application (par exemple, les utilisateurs ou les tests automatisés). </font><font style="vertical-align: inherit;">Les secondaires fournissent l'infrastructure de communication avec le monde extérieur (ce sont des adaptateurs de base de données, des clients TCP ou HTTP). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cela peut être représenté comme suit: Le </font></font><br>
<br>
<img src="https://habrastorage.org/webt/9j/yd/l-/9jydl-rnrtzuy8dk23gexjitq_g.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
côté gauche de l'hexagone se compose de composants qui fournissent une entrée pour le domaine (ils «contrôlent» l'application), et le côté droit se compose de composants qui sont contrôlés par notre application.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exemple</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Concevons une application qui stockera les critiques de films. L'utilisateur doit pouvoir envoyer une demande avec le nom du film et obtenir cinq critiques aléatoires. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour plus de simplicité, nous allons réaliser une application console avec stockage de données en RAM. La réponse à l'utilisateur sera affichée sur la console. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons un utilisateur (utilisateur) qui envoie une demande à l'application. Ainsi, l'utilisateur devient un «manager» (chauffeur). L'application doit pouvoir recevoir des données de tout type de stockage et afficher les résultats sur la console ou dans un fichier. Les objets gérés (pilotés) seront «l'entrepôt de données» ( </font></font><code>IFetchMovieReviews</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) et «l'imprimante de réponse» ( </font></font><code>IPrintMovieReviews</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La figure suivante montre les principaux composants de notre application.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/yo/kz/cj/yokzcjkqbwbvklf1bcxgqnhfx74.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
À gauche, les composants qui fournissent la saisie de données dans l'application. </font><font style="vertical-align: inherit;">À droite, les composants qui vous permettent d'interagir avec la base de données et la console. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Regardons le code d'application. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Port de contrôle</font></font></b><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">IUserInput</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">handleUserInput</span><span class="hljs-params">(Object userCommand)</span></span>;<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ports gérés</font></font></b><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">IFetchMovieReviews</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;MovieReview&gt; <span class="hljs-title">fetchMovieReviews</span><span class="hljs-params">(MovieSearchRequest movieSearchRequest)</span></span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">IPrintMovieReviews</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">writeMovieReviews</span><span class="hljs-params">(List&lt;MovieReview&gt; movieReviewList)</span></span>;<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Adaptateurs de port gérés Les</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
films seront obtenus à partir du référentiel de films (MovieReviewsRepo). </font><font style="vertical-align: inherit;">Afficher les critiques de films sur la console sera une classe </font></font><code>ConsolePrinter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Implémentons les deux interfaces ci-dessus.</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ConsolePrinter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">IPrintMovieReviews</span> </span>{
    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">writeMovieReviews</span><span class="hljs-params">(List&lt;MovieReview&gt; movieReviewList)</span> </span>{<font></font>
        movieReviewList.forEach(movieReview -&gt; {<font></font>
            System.out.println(movieReview.toString());<font></font>
        });<font></font>
    }<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MovieReviewsRepo</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">IFetchMovieReviews</span> </span>{
    <span class="hljs-keyword">private</span> Map&lt;String, List&lt;MovieReview&gt;&gt; movieReviewMap;<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">MovieReviewsRepo</span><span class="hljs-params">()</span> </span>{<font></font>
        initialize();<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;MovieReview&gt; <span class="hljs-title">fetchMovieReviews</span><span class="hljs-params">(MovieSearchRequest movieSearchRequest)</span> </span>{<font></font>
<font></font>
        <span class="hljs-keyword">return</span> Optional.ofNullable(movieReviewMap.get(movieSearchRequest.getMovieName()))<font></font>
            .orElse(<span class="hljs-keyword">new</span> ArrayList&lt;&gt;());<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">initialize</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">this</span>.movieReviewMap = <span class="hljs-keyword">new</span> HashMap&lt;&gt;();<font></font>
        movieReviewMap.put(<span class="hljs-string">"StarWars"</span>, Collections.singletonList(<span class="hljs-keyword">new</span> MovieReview(<span class="hljs-string">"1"</span>, <span class="hljs-number">7.5</span>, <span class="hljs-string">"Good"</span>)));<font></font>
        movieReviewMap.put(<span class="hljs-string">"StarTreck"</span>, Arrays.asList(<span class="hljs-keyword">new</span> MovieReview(<span class="hljs-string">"1"</span>, <span class="hljs-number">9.5</span>, <span class="hljs-string">"Excellent"</span>), <span class="hljs-keyword">new</span> MovieReview(<span class="hljs-string">"1"</span>, <span class="hljs-number">8.5</span>, <span class="hljs-string">"Good"</span>)));<font></font>
    }<font></font>
}</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Domaine</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La tâche principale de notre application est de traiter les demandes des utilisateurs. </font><font style="vertical-align: inherit;">Vous devez obtenir les films, les traiter et transférer les résultats sur «l'imprimante». </font><font style="vertical-align: inherit;">Pour le moment, nous n'avons qu'une seule fonctionnalité: la recherche de films. </font><font style="vertical-align: inherit;">Pour traiter les demandes des utilisateurs, nous utiliserons l'interface standard </font></font><code>Consumer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Regardons la classe principale </font></font><code>MovieApp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MovieApp</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Consumer</span>&lt;<span class="hljs-title">MovieSearchRequest</span>&gt; </span>{
    <span class="hljs-keyword">private</span> IFetchMovieReviews fetchMovieReviews;
    <span class="hljs-keyword">private</span> IPrintMovieReviews printMovieReviews;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Random rand = <span class="hljs-keyword">new</span> Random();<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">MovieApp</span><span class="hljs-params">(IFetchMovieReviews fetchMovieReviews, IPrintMovieReviews printMovieReviews)</span> </span>{
        <span class="hljs-keyword">this</span>.fetchMovieReviews = fetchMovieReviews;
        <span class="hljs-keyword">this</span>.printMovieReviews = printMovieReviews;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">private</span> List&lt;MovieReview&gt; <span class="hljs-title">filterRandomReviews</span><span class="hljs-params">(List&lt;MovieReview&gt; movieReviewList)</span> </span>{<font></font>
        List&lt;MovieReview&gt; result = <span class="hljs-keyword">new</span> ArrayList&lt;MovieReview&gt;();
        <span class="hljs-comment">// logic to return random reviews</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> index = <span class="hljs-number">0</span>; index &lt; <span class="hljs-number">5</span>; ++index) {
            <span class="hljs-keyword">if</span> (movieReviewList.size() &lt; <span class="hljs-number">1</span>)
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">int</span> randomIndex = getRandomElement(movieReviewList.size());<font></font>
            MovieReview movieReview = movieReviewList.get(randomIndex);<font></font>
            movieReviewList.remove(movieReview);<font></font>
            result.add(movieReview);<font></font>
        }<font></font>
        <span class="hljs-keyword">return</span> result;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getRandomElement</span><span class="hljs-params">(<span class="hljs-keyword">int</span> size)</span> </span>{
        <span class="hljs-keyword">return</span> rand.nextInt(size);<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">accept</span><span class="hljs-params">(MovieSearchRequest movieSearchRequest)</span> </span>{<font></font>
        List&lt;MovieReview&gt; movieReviewList = fetchMovieReviews.fetchMovieReviews(movieSearchRequest);<font></font>
        List&lt;MovieReview&gt; randomReviews = filterRandomReviews(<span class="hljs-keyword">new</span> ArrayList&lt;&gt;(movieReviewList));<font></font>
        printMovieReviews.writeMovieReviews(randomReviews);<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous définissons maintenant une classe </font></font><code>CommandMapperModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">qui mappera les commandes aux gestionnaires.</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CommandMapperModel</span> </span>{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> Class&lt;MovieSearchRequest&gt; searchMovies = MovieSearchRequest.class;<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Model <span class="hljs-title">build</span><span class="hljs-params">(Consumer&lt;MovieSearchRequest&gt; displayMovies)</span> </span>{<font></font>
        Model model = Model.builder()<font></font>
            .user(searchMovies)<font></font>
            .system(displayMovies)<font></font>
            .build();<font></font>
<font></font>
        <span class="hljs-keyword">return</span> model;<font></font>
    }<font></font>
}</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Adaptateurs de port de contrôle</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'utilisateur interagira avec notre système via l'interface </font></font><code>IUserInput</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">L'implémentation utilisera </font></font><code>ModelRunner</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et déléguera l'exécution.</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserCommandBoundary</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">IUserInput</span> </span>{
    <span class="hljs-keyword">private</span> Model model;<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">UserCommandBoundary</span><span class="hljs-params">(IFetchMovieReviews fetchMovieReviews, IPrintMovieReviews printMovieReviews)</span> </span>{<font></font>
        MovieApp movieApp = <span class="hljs-keyword">new</span> MovieApp(fetchMovieReviews, printMovieReviews);<font></font>
        model = CommandMapperModel.build(movieApp);<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">handleUserInput</span><span class="hljs-params">(Object userCommand)</span> </span>{
        <span class="hljs-keyword">new</span> ModelRunner().run(model)<font></font>
            .reactTo(userCommand);<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voyons maintenant l'utilisateur qui utilise l'interface ci-dessus.</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MovieUser</span> </span>{
    <span class="hljs-keyword">private</span> IUserInput userInputDriverPort;<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">MovieUser</span><span class="hljs-params">(IUserInput userInputDriverPort)</span> </span>{
        <span class="hljs-keyword">this</span>.userInputDriverPort = userInputDriverPort;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">processInput</span><span class="hljs-params">(MovieSearchRequest movieSearchRequest)</span> </span>{<font></font>
        userInputDriverPort.handleUserInput(movieSearchRequest);<font></font>
    }<font></font>
}</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">application</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, créez une application console. </font><font style="vertical-align: inherit;">Les adaptateurs gérés sont ajoutés en tant que dépendances. </font><font style="vertical-align: inherit;">L'utilisateur créera et enverra une demande à l'application. </font><font style="vertical-align: inherit;">L'application recevra des données, traitera et affichera une réponse à la console.</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Main</span> </span>{<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{<font></font>
        IFetchMovieReviews fetchMovieReviews = <span class="hljs-keyword">new</span> MovieReviewsRepo();<font></font>
        IPrintMovieReviews printMovieReviews = <span class="hljs-keyword">new</span> ConsolePrinter();<font></font>
        IUserInput userCommandBoundary = <span class="hljs-keyword">new</span> UserCommandBoundary(fetchMovieReviews, printMovieReviews);<font></font>
        MovieUser movieUser = <span class="hljs-keyword">new</span> MovieUser(userCommandBoundary);<font></font>
        MovieSearchRequest starWarsRequest = <span class="hljs-keyword">new</span> MovieSearchRequest(<span class="hljs-string">"StarWars"</span>);<font></font>
        MovieSearchRequest starTreckRequest = <span class="hljs-keyword">new</span> MovieSearchRequest(<span class="hljs-string">"StarTreck"</span>);<font></font>
<font></font>
        System.out.println(<span class="hljs-string">"Displaying reviews for movie "</span> + starTreckRequest.getMovieName());<font></font>
        movieUser.processInput(starTreckRequest);<font></font>
        System.out.println(<span class="hljs-string">"Displaying reviews for movie "</span> + starWarsRequest.getMovieName());<font></font>
        movieUser.processInput(starWarsRequest);<font></font>
    }<font></font>
<font></font>
}</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ce qui peut être amélioré, changé</font></font></h3><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans notre implémentation, vous pouvez facilement passer d'un magasin de données à un autre. </font><font style="vertical-align: inherit;">L'implémentation du stockage peut être injectée dans le code sans changer la logique métier. </font><font style="vertical-align: inherit;">Par exemple, vous pouvez transférer des données de la mémoire vers une base de données en écrivant un adaptateur de base de données.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Au lieu de sortir sur la console, vous pouvez implémenter une «imprimante», qui écrira des données dans un fichier. </font><font style="vertical-align: inherit;">Dans une telle application multicouche, il devient plus facile d'ajouter des fonctionnalités et de corriger des bogues.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour tester la logique métier, vous pouvez écrire des tests complexes. </font><font style="vertical-align: inherit;">Les adaptateurs peuvent être testés isolément. </font><font style="vertical-align: inherit;">Ainsi, il est possible d'augmenter la couverture globale des tests.</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusion</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
On peut noter les avantages suivants de l'architecture hexagonale:</font></font><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Accompagnement</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Couches à couplage lâche et indépendantes. </font><font style="vertical-align: inherit;">Il devient facile d'ajouter de nouvelles fonctionnalités à une couche sans affecter les autres couches.</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Testabilité</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - les tests unitaires sont écrits de manière simple et rapide. </font><font style="vertical-align: inherit;">Vous pouvez écrire des tests pour chaque couche à l'aide d'objets de stub qui simulent des dépendances. </font><font style="vertical-align: inherit;">Par exemple, nous pouvons supprimer la dépendance à la base de données en créant un entrepôt de données en mémoire.</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Adaptabilité</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - la logique métier principale devient indépendante des changements dans les objets externes. </font><font style="vertical-align: inherit;">Par exemple, si vous devez migrer vers une autre base de données, nous n'avons pas besoin de modifier le domaine. </font><font style="vertical-align: inherit;">Nous pouvons créer un adaptateur approprié pour la base de données.</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Références</font></font></h3><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Architecture hexagonale (Alistair Cockburn)</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Architecture hexagonale-Wiki</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Architecture des ports et adaptateurs</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Giphy</font></font></a></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C'est tout. </font><font style="vertical-align: inherit;">Rendez-vous </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sur le parcours</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> !</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr492060/index.html">Comment résoudre? "ECONNREFUSED - connexion refusée par le serveur"</a></li>
<li><a href="../fr492062/index.html">Modèle de serveur d'arrière-plan Golang - partie 1 (serveur HTTP)</a></li>
<li><a href="../fr492066/index.html">Pourquoi Event Sourcing est l'anti-modèle pour l'interaction des microservices</a></li>
<li><a href="../fr492068/index.html">S7 Group ouvre un département «Technologies de l'information dans l'aviation» au MIPT</a></li>
<li><a href="../fr492074/index.html">Faut que vous y allez rapidement. Synchronisation rapide des e-mails IMAP</a></li>
<li><a href="../fr492078/index.html">Les matériaux les plus importants et utiles sur le coronavirus COVID-19</a></li>
<li><a href="../fr492082/index.html">Comment simplifier la gestion des appareils domestiques et les sécuriser (partager des idées sur Kauri Safe Smart Home)</a></li>
<li><a href="../fr492086/index.html">Coronavirus vs informatique russe: les entreprises sont-elles prêtes à transférer leurs employés vers un site distant?</a></li>
<li><a href="../fr492088/index.html">Test du moteur de jeu Amazon Lumberyard. Approches et outils</a></li>
<li><a href="../fr492102/index.html">Création d'un chatbot VK basé sur VkBotCore C #</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>