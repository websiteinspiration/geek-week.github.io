<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üîÖ üç∏ üë®üèΩ‚Äçüåæ Un exemple d'architecture hexagonale en Java ü§¥üèæ üèè ü§∂üèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Une traduction de l'article a √©t√© pr√©par√©e sp√©cialement pour les √©tudiants du cours Java Developer .
 
  
 
 
 En tant que d√©veloppeurs, nous devons s...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Un exemple d'architecture hexagonale en Java</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/492076/"><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Une traduction de l'article a √©t√© pr√©par√©e sp√©cialement pour les √©tudiants du </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cours Java Developer</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></b></i><br>
<br>
<img src="https://habrastorage.org/webt/gd/2f/ap/gd2fapnfvwthsglrmjmhnn1wyvk.png"> <br>
<br>
<hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En tant que d√©veloppeurs, nous devons souvent faire face au code h√©rit√©, qui est difficile √† maintenir. Vous savez √† quel point il est difficile de comprendre une logique simple dans un grand code spaghetti alambiqu√©. Am√©liorer le code ou d√©velopper de nouvelles fonctionnalit√©s devient un cauchemar pour le d√©veloppeur.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'un des principaux objectifs de la conception de logiciels est la facilit√© de maintenance. Un code mal entretenu devient difficile √† g√©rer. Il est non seulement difficile √† mettre √† l'√©chelle, mais il devient difficile d'attirer de nouveaux d√©veloppeurs. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans le monde informatique, les choses √©voluent rapidement. Si vous √™tes invit√© √† impl√©menter de toute urgence de nouvelles fonctionnalit√©s ou si vous souhaitez passer d'une base de donn√©es relationnelle √† NoSQL, quelle sera votre premi√®re r√©action? </font></font><br>
<br>
<img src="https://habrastorage.org/webt/wk/lj/8b/wklj8bigqatvwl-qo7cjlapjl_8.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une bonne couverture des tests augmente la confiance des d√©veloppeurs quant √† l'absence de probl√®mes avec la nouvelle version. Cependant, si votre logique m√©tier est li√©e √† la logique de l'infrastructure, il peut y avoir des probl√®mes avec ses tests. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/mo/vc/hh/movchhizk5zg4m56jhtnkdsrvdy.gif"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pourquoi moi?</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais il y a assez de discours vides, regardons l'architecture hexagonale. </font><font style="vertical-align: inherit;">L'utilisation de ce mod√®le vous aidera √† am√©liorer la maintenabilit√©, la testabilit√© et d'autres avantages.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Introduction √† l'architecture hexagonale</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le terme </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">architecture hexagonale (architecture hexagonale, hexagonale) a √©t√©</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> invent√© en 2006 par Alistair Cockburn. Ce style architectural est √©galement appel√© </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">architecture de ports et d'adaptateurs</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . En termes simples, les composants de votre application interagissent via de nombreux points de terminaison (ports). Pour traiter les demandes, vous devez disposer d'adaptateurs correspondant aux ports. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ici, vous pouvez faire une analogie avec les ports USB de l'ordinateur. Vous pouvez les utiliser si vous disposez d'un adaptateur compatible (chargeur ou lecteur flash).</font></font><br>
<br>
<img src="https://habrastorage.org/webt/tn/om/vd/tnomvd4i3cngipfc8olfqpyec9g.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cette architecture peut √™tre repr√©sent√©e sch√©matiquement comme un hexagone avec une logique m√©tier au centre (au c≈ìur), entour√©e des objets avec lesquels elle interagit et des composants qui la contr√¥lent, fournissant des donn√©es d'entr√©e. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans la vie r√©elle, les utilisateurs, les appels d'API, les scripts automatis√©s et les tests unitaires interagissent et fournissent des informations √† votre application. Si votre logique m√©tier est m√©lang√©e √† une logique d'interface utilisateur, vous rencontrerez de nombreux probl√®mes. Par exemple, il sera difficile de basculer la saisie de donn√©es de l'interface utilisateur vers des tests unitaires.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'application interagit √©galement avec des objets externes tels que des bases de donn√©es, des files d'attente de messages, des serveurs Web (via des appels API HTTP), etc. Si n√©cessaire, migrez la base de donn√©es ou t√©l√©chargez des donn√©es dans un fichier, vous devriez pouvoir le faire sans affecter l'entreprise. logique. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme son nom l'indique, ¬´ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ports et adaptateurs</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ¬ª, il existe des ¬´ports¬ª par lesquels l'interaction se produit et les ¬´adaptateurs¬ª sont des composants qui traitent les entr√©es des utilisateurs et les convertissent en ¬´langue¬ª du domaine. Les adaptateurs encapsulent la logique d'interaction avec des syst√®mes externes, tels que les bases de donn√©es, les files d'attente de messages, etc., et facilitent la communication entre la logique m√©tier et les objets externes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le diagramme ci-dessous montre les couches dans lesquelles l'application est divis√©e.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/yu/zd/k-/yuzdk-bppoignfpz98ck7ld-a4q.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'architecture hexagonale distingue trois couches dans une application: domaine, application et infrastructure:</font></font><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Domaine</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">La couche contient la logique m√©tier principale. </font><font style="vertical-align: inherit;">Il n'a pas besoin de conna√Ætre les d√©tails de la mise en ≈ìuvre des couches ext√©rieures.</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Application</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Une couche agit comme un pont entre les couches d'un domaine et de l'infrastructure.</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Infrastructure</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">La mise en ≈ìuvre de l'interaction du domaine avec le monde ext√©rieur. </font><font style="vertical-align: inherit;">Les couches int√©rieures lui ressemblent comme une bo√Æte noire.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selon cette architecture, deux types de participants interagissent avec l'application: primaire (pilote) et secondaire (pilot√©). </font><font style="vertical-align: inherit;">Les acteurs cl√©s envoient des demandes et g√®rent l'application (par exemple, les utilisateurs ou les tests automatis√©s). </font><font style="vertical-align: inherit;">Les secondaires fournissent l'infrastructure de communication avec le monde ext√©rieur (ce sont des adaptateurs de base de donn√©es, des clients TCP ou HTTP). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cela peut √™tre repr√©sent√© comme suit: Le </font></font><br>
<br>
<img src="https://habrastorage.org/webt/9j/yd/l-/9jydl-rnrtzuy8dk23gexjitq_g.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
c√¥t√© gauche de l'hexagone se compose de composants qui fournissent une entr√©e pour le domaine (ils ¬´contr√¥lent¬ª l'application), et le c√¥t√© droit se compose de composants qui sont contr√¥l√©s par notre application.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exemple</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Concevons une application qui stockera les critiques de films. L'utilisateur doit pouvoir envoyer une demande avec le nom du film et obtenir cinq critiques al√©atoires. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour plus de simplicit√©, nous allons r√©aliser une application console avec stockage de donn√©es en RAM. La r√©ponse √† l'utilisateur sera affich√©e sur la console. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons un utilisateur (utilisateur) qui envoie une demande √† l'application. Ainsi, l'utilisateur devient un ¬´manager¬ª (chauffeur). L'application doit pouvoir recevoir des donn√©es de tout type de stockage et afficher les r√©sultats sur la console ou dans un fichier. Les objets g√©r√©s (pilot√©s) seront ¬´l'entrep√¥t de donn√©es¬ª ( </font></font><code>IFetchMovieReviews</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) et ¬´l'imprimante de r√©ponse¬ª ( </font></font><code>IPrintMovieReviews</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La figure suivante montre les principaux composants de notre application.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/yo/kz/cj/yokzcjkqbwbvklf1bcxgqnhfx74.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√Ä gauche, les composants qui fournissent la saisie de donn√©es dans l'application. </font><font style="vertical-align: inherit;">√Ä droite, les composants qui vous permettent d'interagir avec la base de donn√©es et la console. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Regardons le code d'application. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Port de contr√¥le</font></font></b><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">IUserInput</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">handleUserInput</span><span class="hljs-params">(Object userCommand)</span></span>;<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ports g√©r√©s</font></font></b><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">IFetchMovieReviews</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;MovieReview&gt; <span class="hljs-title">fetchMovieReviews</span><span class="hljs-params">(MovieSearchRequest movieSearchRequest)</span></span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">IPrintMovieReviews</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">writeMovieReviews</span><span class="hljs-params">(List&lt;MovieReview&gt; movieReviewList)</span></span>;<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Adaptateurs de port g√©r√©s Les</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
films seront obtenus √† partir du r√©f√©rentiel de films (MovieReviewsRepo). </font><font style="vertical-align: inherit;">Afficher les critiques de films sur la console sera une classe </font></font><code>ConsolePrinter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Impl√©mentons les deux interfaces ci-dessus.</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ConsolePrinter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">IPrintMovieReviews</span> </span>{
    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">writeMovieReviews</span><span class="hljs-params">(List&lt;MovieReview&gt; movieReviewList)</span> </span>{<font></font>
        movieReviewList.forEach(movieReview -&gt; {<font></font>
            System.out.println(movieReview.toString());<font></font>
        });<font></font>
    }<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MovieReviewsRepo</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">IFetchMovieReviews</span> </span>{
    <span class="hljs-keyword">private</span> Map&lt;String, List&lt;MovieReview&gt;&gt; movieReviewMap;<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">MovieReviewsRepo</span><span class="hljs-params">()</span> </span>{<font></font>
        initialize();<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;MovieReview&gt; <span class="hljs-title">fetchMovieReviews</span><span class="hljs-params">(MovieSearchRequest movieSearchRequest)</span> </span>{<font></font>
<font></font>
        <span class="hljs-keyword">return</span> Optional.ofNullable(movieReviewMap.get(movieSearchRequest.getMovieName()))<font></font>
            .orElse(<span class="hljs-keyword">new</span> ArrayList&lt;&gt;());<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">initialize</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">this</span>.movieReviewMap = <span class="hljs-keyword">new</span> HashMap&lt;&gt;();<font></font>
        movieReviewMap.put(<span class="hljs-string">"StarWars"</span>, Collections.singletonList(<span class="hljs-keyword">new</span> MovieReview(<span class="hljs-string">"1"</span>, <span class="hljs-number">7.5</span>, <span class="hljs-string">"Good"</span>)));<font></font>
        movieReviewMap.put(<span class="hljs-string">"StarTreck"</span>, Arrays.asList(<span class="hljs-keyword">new</span> MovieReview(<span class="hljs-string">"1"</span>, <span class="hljs-number">9.5</span>, <span class="hljs-string">"Excellent"</span>), <span class="hljs-keyword">new</span> MovieReview(<span class="hljs-string">"1"</span>, <span class="hljs-number">8.5</span>, <span class="hljs-string">"Good"</span>)));<font></font>
    }<font></font>
}</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Domaine</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La t√¢che principale de notre application est de traiter les demandes des utilisateurs. </font><font style="vertical-align: inherit;">Vous devez obtenir les films, les traiter et transf√©rer les r√©sultats sur ¬´l'imprimante¬ª. </font><font style="vertical-align: inherit;">Pour le moment, nous n'avons qu'une seule fonctionnalit√©: la recherche de films. </font><font style="vertical-align: inherit;">Pour traiter les demandes des utilisateurs, nous utiliserons l'interface standard </font></font><code>Consumer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Regardons la classe principale </font></font><code>MovieApp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MovieApp</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Consumer</span>&lt;<span class="hljs-title">MovieSearchRequest</span>&gt; </span>{
    <span class="hljs-keyword">private</span> IFetchMovieReviews fetchMovieReviews;
    <span class="hljs-keyword">private</span> IPrintMovieReviews printMovieReviews;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Random rand = <span class="hljs-keyword">new</span> Random();<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">MovieApp</span><span class="hljs-params">(IFetchMovieReviews fetchMovieReviews, IPrintMovieReviews printMovieReviews)</span> </span>{
        <span class="hljs-keyword">this</span>.fetchMovieReviews = fetchMovieReviews;
        <span class="hljs-keyword">this</span>.printMovieReviews = printMovieReviews;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">private</span> List&lt;MovieReview&gt; <span class="hljs-title">filterRandomReviews</span><span class="hljs-params">(List&lt;MovieReview&gt; movieReviewList)</span> </span>{<font></font>
        List&lt;MovieReview&gt; result = <span class="hljs-keyword">new</span> ArrayList&lt;MovieReview&gt;();
        <span class="hljs-comment">// logic to return random reviews</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> index = <span class="hljs-number">0</span>; index &lt; <span class="hljs-number">5</span>; ++index) {
            <span class="hljs-keyword">if</span> (movieReviewList.size() &lt; <span class="hljs-number">1</span>)
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">int</span> randomIndex = getRandomElement(movieReviewList.size());<font></font>
            MovieReview movieReview = movieReviewList.get(randomIndex);<font></font>
            movieReviewList.remove(movieReview);<font></font>
            result.add(movieReview);<font></font>
        }<font></font>
        <span class="hljs-keyword">return</span> result;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getRandomElement</span><span class="hljs-params">(<span class="hljs-keyword">int</span> size)</span> </span>{
        <span class="hljs-keyword">return</span> rand.nextInt(size);<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">accept</span><span class="hljs-params">(MovieSearchRequest movieSearchRequest)</span> </span>{<font></font>
        List&lt;MovieReview&gt; movieReviewList = fetchMovieReviews.fetchMovieReviews(movieSearchRequest);<font></font>
        List&lt;MovieReview&gt; randomReviews = filterRandomReviews(<span class="hljs-keyword">new</span> ArrayList&lt;&gt;(movieReviewList));<font></font>
        printMovieReviews.writeMovieReviews(randomReviews);<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous d√©finissons maintenant une classe </font></font><code>CommandMapperModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">qui mappera les commandes aux gestionnaires.</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CommandMapperModel</span> </span>{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> Class&lt;MovieSearchRequest&gt; searchMovies = MovieSearchRequest.class;<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Model <span class="hljs-title">build</span><span class="hljs-params">(Consumer&lt;MovieSearchRequest&gt; displayMovies)</span> </span>{<font></font>
        Model model = Model.builder()<font></font>
            .user(searchMovies)<font></font>
            .system(displayMovies)<font></font>
            .build();<font></font>
<font></font>
        <span class="hljs-keyword">return</span> model;<font></font>
    }<font></font>
}</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Adaptateurs de port de contr√¥le</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'utilisateur interagira avec notre syst√®me via l'interface </font></font><code>IUserInput</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">L'impl√©mentation utilisera </font></font><code>ModelRunner</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et d√©l√©guera l'ex√©cution.</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserCommandBoundary</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">IUserInput</span> </span>{
    <span class="hljs-keyword">private</span> Model model;<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">UserCommandBoundary</span><span class="hljs-params">(IFetchMovieReviews fetchMovieReviews, IPrintMovieReviews printMovieReviews)</span> </span>{<font></font>
        MovieApp movieApp = <span class="hljs-keyword">new</span> MovieApp(fetchMovieReviews, printMovieReviews);<font></font>
        model = CommandMapperModel.build(movieApp);<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">handleUserInput</span><span class="hljs-params">(Object userCommand)</span> </span>{
        <span class="hljs-keyword">new</span> ModelRunner().run(model)<font></font>
            .reactTo(userCommand);<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voyons maintenant l'utilisateur qui utilise l'interface ci-dessus.</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MovieUser</span> </span>{
    <span class="hljs-keyword">private</span> IUserInput userInputDriverPort;<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">MovieUser</span><span class="hljs-params">(IUserInput userInputDriverPort)</span> </span>{
        <span class="hljs-keyword">this</span>.userInputDriverPort = userInputDriverPort;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">processInput</span><span class="hljs-params">(MovieSearchRequest movieSearchRequest)</span> </span>{<font></font>
        userInputDriverPort.handleUserInput(movieSearchRequest);<font></font>
    }<font></font>
}</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">application</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, cr√©ez une application console. </font><font style="vertical-align: inherit;">Les adaptateurs g√©r√©s sont ajout√©s en tant que d√©pendances. </font><font style="vertical-align: inherit;">L'utilisateur cr√©era et enverra une demande √† l'application. </font><font style="vertical-align: inherit;">L'application recevra des donn√©es, traitera et affichera une r√©ponse √† la console.</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Main</span> </span>{<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{<font></font>
        IFetchMovieReviews fetchMovieReviews = <span class="hljs-keyword">new</span> MovieReviewsRepo();<font></font>
        IPrintMovieReviews printMovieReviews = <span class="hljs-keyword">new</span> ConsolePrinter();<font></font>
        IUserInput userCommandBoundary = <span class="hljs-keyword">new</span> UserCommandBoundary(fetchMovieReviews, printMovieReviews);<font></font>
        MovieUser movieUser = <span class="hljs-keyword">new</span> MovieUser(userCommandBoundary);<font></font>
        MovieSearchRequest starWarsRequest = <span class="hljs-keyword">new</span> MovieSearchRequest(<span class="hljs-string">"StarWars"</span>);<font></font>
        MovieSearchRequest starTreckRequest = <span class="hljs-keyword">new</span> MovieSearchRequest(<span class="hljs-string">"StarTreck"</span>);<font></font>
<font></font>
        System.out.println(<span class="hljs-string">"Displaying reviews for movie "</span> + starTreckRequest.getMovieName());<font></font>
        movieUser.processInput(starTreckRequest);<font></font>
        System.out.println(<span class="hljs-string">"Displaying reviews for movie "</span> + starWarsRequest.getMovieName());<font></font>
        movieUser.processInput(starWarsRequest);<font></font>
    }<font></font>
<font></font>
}</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ce qui peut √™tre am√©lior√©, chang√©</font></font></h3><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans notre impl√©mentation, vous pouvez facilement passer d'un magasin de donn√©es √† un autre. </font><font style="vertical-align: inherit;">L'impl√©mentation du stockage peut √™tre inject√©e dans le code sans changer la logique m√©tier. </font><font style="vertical-align: inherit;">Par exemple, vous pouvez transf√©rer des donn√©es de la m√©moire vers une base de donn√©es en √©crivant un adaptateur de base de donn√©es.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Au lieu de sortir sur la console, vous pouvez impl√©menter une ¬´imprimante¬ª, qui √©crira des donn√©es dans un fichier. </font><font style="vertical-align: inherit;">Dans une telle application multicouche, il devient plus facile d'ajouter des fonctionnalit√©s et de corriger des bogues.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour tester la logique m√©tier, vous pouvez √©crire des tests complexes. </font><font style="vertical-align: inherit;">Les adaptateurs peuvent √™tre test√©s isol√©ment. </font><font style="vertical-align: inherit;">Ainsi, il est possible d'augmenter la couverture globale des tests.</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusion</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
On peut noter les avantages suivants de l'architecture hexagonale:</font></font><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Accompagnement</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Couches √† couplage l√¢che et ind√©pendantes. </font><font style="vertical-align: inherit;">Il devient facile d'ajouter de nouvelles fonctionnalit√©s √† une couche sans affecter les autres couches.</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Testabilit√©</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - les tests unitaires sont √©crits de mani√®re simple et rapide. </font><font style="vertical-align: inherit;">Vous pouvez √©crire des tests pour chaque couche √† l'aide d'objets de stub qui simulent des d√©pendances. </font><font style="vertical-align: inherit;">Par exemple, nous pouvons supprimer la d√©pendance √† la base de donn√©es en cr√©ant un entrep√¥t de donn√©es en m√©moire.</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Adaptabilit√©</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - la logique m√©tier principale devient ind√©pendante des changements dans les objets externes. </font><font style="vertical-align: inherit;">Par exemple, si vous devez migrer vers une autre base de donn√©es, nous n'avons pas besoin de modifier le domaine. </font><font style="vertical-align: inherit;">Nous pouvons cr√©er un adaptateur appropri√© pour la base de donn√©es.</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">R√©f√©rences</font></font></h3><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Architecture hexagonale (Alistair Cockburn)</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Architecture hexagonale-Wiki</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Architecture des ports et adaptateurs</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Giphy</font></font></a></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C'est tout. </font><font style="vertical-align: inherit;">Rendez-vous </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sur le parcours</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> !</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr492060/index.html">Comment r√©soudre? "ECONNREFUSED - connexion refus√©e par le serveur"</a></li>
<li><a href="../fr492062/index.html">Mod√®le de serveur d'arri√®re-plan Golang - partie 1 (serveur HTTP)</a></li>
<li><a href="../fr492066/index.html">Pourquoi Event Sourcing est l'anti-mod√®le pour l'interaction des microservices</a></li>
<li><a href="../fr492068/index.html">S7 Group ouvre un d√©partement ¬´Technologies de l'information dans l'aviation¬ª au MIPT</a></li>
<li><a href="../fr492074/index.html">Faut que vous y allez rapidement. Synchronisation rapide des e-mails IMAP</a></li>
<li><a href="../fr492078/index.html">Les mat√©riaux les plus importants et utiles sur le coronavirus COVID-19</a></li>
<li><a href="../fr492082/index.html">Comment simplifier la gestion des appareils domestiques et les s√©curiser (partager des id√©es sur Kauri Safe Smart Home)</a></li>
<li><a href="../fr492086/index.html">Coronavirus vs informatique russe: les entreprises sont-elles pr√™tes √† transf√©rer leurs employ√©s vers un site distant?</a></li>
<li><a href="../fr492088/index.html">Test du moteur de jeu Amazon Lumberyard. Approches et outils</a></li>
<li><a href="../fr492102/index.html">Cr√©ation d'un chatbot VK bas√© sur VkBotCore C #</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>