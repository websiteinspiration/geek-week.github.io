<!doctype html>
<html class="no-js" lang="zh-CN">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🍿 📌 🧗 DirectX 12-从达芬奇到当代艺术 ⤴️ 👨🏿‍💼 🐓</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="计算机图形学是一门广泛而迅速发展的学科。每年，应用程序编程接口变得更加灵活，这使它们可以实现更复杂的图像形成和处理算法。但是，交互式图形的可能性尚未达到3D建模和可视化程序包的水平。所有这些都鼓励该领域的积极研究。
 


 

DirectX 12是高性能图形编程界面的组件。新界面的主要目标是减少...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>DirectX 12-从达芬奇到当代艺术</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/489282/"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">计算机图形学是一门广泛而迅速发展的学科。</font><font style="vertical-align: inherit;">每年，应用程序编程接口变得更加灵活，这使它们可以实现更复杂的图像形成和处理算法。</font><font style="vertical-align: inherit;">但是，交互式图形的可能性尚未达到3D建模和可视化程序包的水平。</font><font style="vertical-align: inherit;">所有这些都鼓励该领域的积极研究。</font></font></p><br>
<p><img src="https://habrastorage.org/webt/g5/dr/qv/g5drqvvxul_zgurprdoz4jwkz_g.jpeg" alt="图片"></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DirectX 12是高性能图形编程界面的组件。</font><font style="vertical-align: inherit;">新界面的主要目标是减少驱动程序的CPU开销，降低硬件抽象级别，在API级别组合图形卡的能力（在此之前，仅供应商专用的CrossFireX，NVIDIA SLI解决方案）。</font><font style="vertical-align: inherit;">由Microsoft在2015年7月正式发布。</font></font></p><a name="habracut"></a><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">本文适用于已经使用图形库（OpenGL，DirectX 11）的用户。</font><font style="vertical-align: inherit;">但是，对于计划从版本12开始学习图形的人来说，它可能也很有用。</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在其中，我们将考虑以下主题：</font></font></p><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">环境</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图形管道的简要说明</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DirectX 12的新功能</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">状态</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">队伍</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">同步化</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">资源附件</font></font></li>
</ol></li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">环境</font></font></h2><br>
<p>DirectX 12   Windows SDK  Windows 10.   IDE  Visual Studio,   C++.    DirectX,    d3d12.h dxgi1_6.h   d3d12.lib, dxguid.lib, dxgi.lib, d3dcompiler.lib.       Windows SDK.    "D3D12 Helper Library"      d3dx12.h,     boilerplate .       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">d3dx12.h</a>    .</p><br>
<h2>   </h2><br>
<p>      ,     — -    .    ,  — .        ,       .       .       , ,       . ,   —  ,        .</p><br>
<p>,             . </p><br>
<h3> </h3><br>
<p>      ,  , ,  ,         , ,  .   —     .         ,     .      ,     ,      ,     ,      .            .     —          (clip space).</p><br>
<h3>   </h3><br>
<p>    —  ,      .       .     ,   .       ,   .          .        (    ).          API. ,  ,  .</p><br>
<h3>  </h3><br>
<p>  ,    ,      ,        ,      .               .</p><br>
<h3> </h3><br>
<p>      ,     (scissor test),   (stencil test)    (depth test).     ,        .  -    ,    .     ,         ,       .      ,           .</p><br>
<p>       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"> DirectX 11</a> (  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">DiretcX 12</a>      )</p><br>
<h2>  DirectX 12</h2><br>
<p>          DirectX 12. </p><br>
<h3></h3><br>
<p> 11         : RSSetState(), OMSetDepthStencilState(), OMSetBlendState(). ,       .         ,               .            ,      — PSO (Pipeline State Object).        :      " ",     .  ,    ,             Root Signature (  ).</p><br>
<h3></h3><br>
<p>         immideate context.            .  ,   DirectX 11    deferred context.  DirectX 12 immideate context    deferred   .     deferred command list,        .</p><br>
<p> ,         :    command list,    , CPU      . </p><br>
<p>     ,      .   ,   GPU,    . ,     Release()      —   ,          .</p><br>
<h3></h3><br>
<p>    GPU, DirectX 12   <em>fence</em>,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">ID3D12Fence</a> . <em>Fence</em> —   ,     GPU   .     «» ,  ID3D12CommandQueue::Signal()   .    ID3D12Fence::SetEventOnCompletion(UINT64 Value, HANDLE hEvent)      winapi event.     WaitForSingleObject()   event-        ,   .      GPU ,   fence ,  WaitForSingleObject()     .</p><br>
<h3> </h3><br>
<p>    —       DirectX.</p><br>
<h4></h4><br>
<p> DirectX 11    :        API. ,     (    )  5  6      : </p><br>
<pre><code class="plaintext hljs">ID3D11ShaderResourceView* srvs[] = { <font></font>
    texture1-&gt;GetShaderResourceView();<font></font>
    texture2-&gt;GetShaderResourceView();<font></font>
};<font></font>
context-&gt;PSSetShaderResources(5, 2, srvs);</code></pre><br>
<p> GetShaderResourceView()      ID3D11ShaderResourceView.<br>
     :</p><br>
<pre><code class="plaintext hljs">Texture2D texture1 : register(t5);<font></font>
Texture2D texture2 : register(t6);</code></pre><br>
<p>      ,       . ,        .       ?      GCN ISA,   :</p><br>
<blockquote>All vector memory operations use an image resource constant (T#) that is a 128- or 256-bit value in SGPRs. This constant is sent to the texture cache when the instruction is executed. This constant defines the address, data format, and characteristics of the surface in memory.</blockquote><p> ,      ,      (128  256-),       .      ,  ,           . ,       ,  «» .    :  (T#),  (S#)   (V#).  Direct3D 12  , ,      —   GPU.</p><br>
<h4></h4><br>
<p>          ,     <em></em>. <strong></strong> —   ,      (GPU  , , ,  , ).  <em></em>   <strong> </strong> —    <em></em>  . <em> </em>       :</p><br>
<ul>
<li>Constant buffer views (CBVs)</li>
<li>Unordered access views (UAVs)</li>
<li>Shader resource views (SRVs)</li>
<li>Samplers</li>
</ul><br>
<p>CBVs, UAVs, SRVs     <em> </em>,    —  .     ,      .</p><br>
<p>     <em>shader visible </em>. ,  <em>non shader visible </em>:</p><br>
<ul>
<li>Render Target Views (RTVs)</li>
<li>Depth Stencil Views (DSVs)</li>
<li>Stream Output Views (SOVs)</li>
</ul><br>
<p> views         (     ),        <em>non shader visible  </em> (   D3D12_DESCRIPTOR_HEAP_FLAGS::D3D12_DESCRIPTOR_HEAP_FLAG_SHADER_VISIBLE   ).</p><br>
<p>    view's,    (, , <em> </em>)  :</p><br>
<ul>
<li>Index Buffer View (IBV)</li>
<li>Vertex Buffer View (VBV)</li>
</ul><br>
<p>  D3D12_INDEX_BUFFER_VIEW  D3D12_VERTEX_BUFFER_VIEW .                  <em>Pipeline State Object</em>.    <em>PSO</em>   . </p><br>
<p> ,       ID3D11...View,   <em></em>  <em> </em>. </p><br>
<h4>Root signature</h4><br>
<p><strong>Root signature</strong> —  DirectX 12 API          . ,   ,         . <em>Root signature</em>      ,     () ,       . </p><br>
<p><em>Root signature</em>    ,   <strong>root parameter</strong>.   <em>root parameter</em>      <strong>root arguments</strong>.  <em>root argument</em>,     . <em>Root parameter</em>   :</p><br>
<ul>
<li>Root constants (1 DWORD == 32bit value)</li>
<li>Inline descriptors (  64-bit GPU virtual addresses,  2 DWORDs )</li>
<li>  (1 DWORD)</li>
</ul><br>
<p>  <em>root signature</em> — 64 DWORDs.          ,    . </p><br>
<p><strong>Root constant</strong>    <em>root signature</em> 32- ,      constant buffer.       (, MVP ),        (  4 ).           ,         .   :   "  ".</p><br>
<p>      <em>root signature</em>      <em> </em> —    <strong>inline descriptors</strong>.    —  per object.  ,        <em> </em>.    .    (   ),               GPU.    , ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">ID3D12GraphicsCommandList::SetGraphicsRootConstantBufferView</a>,     <em>root parameter</em>  <em>inline descriptor</em>    .</p><br>
<p>   ,      . <strong> </strong>   <em>descriptor range</em>. <em>Descriptor range</em> —      .     <em> </em>   :</p><br>
<pre><code class="plaintext hljs">typedef enum D3D12_DESCRIPTOR_RANGE_TYPE<font></font>
    {<font></font>
        D3D12_DESCRIPTOR_RANGE_TYPE_SRV = 0,<font></font>
        D3D12_DESCRIPTOR_RANGE_TYPE_UAV = ( D3D12_DESCRIPTOR_RANGE_TYPE_SRV + 1 ) ,<font></font>
        D3D12_DESCRIPTOR_RANGE_TYPE_CBV = ( D3D12_DESCRIPTOR_RANGE_TYPE_UAV + 1 ) ,<font></font>
        D3D12_DESCRIPTOR_RANGE_TYPE_SAMPLER = ( D3D12_DESCRIPTOR_RANGE_TYPE_CBV + 1 ) <font></font>
    }   D3D12_DESCRIPTOR_RANGE_TYPE;<font></font>
<font></font>
typedef struct D3D12_DESCRIPTOR_RANGE<font></font>
    {<font></font>
    D3D12_DESCRIPTOR_RANGE_TYPE RangeType;<font></font>
    UINT NumDescriptors;<font></font>
    UINT BaseShaderRegister;<font></font>
//...<font></font>
    }   D3D12_DESCRIPTOR_RANGE;</code></pre><br>
<p>,  RangeType —   <em></em>, NumDescriptors — , BaseShaderRegister —    .            .   <em></em>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">ID3D12GraphicsCommandList::SetGraphicsRootDescriptorTable</a>,     <em>root parameter</em>  <em> </em>   <em></em>.  <em></em>,    <em> </em>,  .   ,          <em>descriptor heap</em>.</p><br>
<h2></h2><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们检查了DirectX 12的某些功能。如果您对本主题或计算机图形学的任何其他领域感兴趣，请在评论中退订。</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">链接：</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">https: </font></a></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">//docs.microsoft.com/zh-cn/windows/win32/direct3d12/directx-12-programming-guide </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://developer.nvidia.com/dx12-dos-and-donts </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https：// // gpuopen.com/performance-root-signature-descriptor-sets/</font></font></a></p></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN489270/index.html">现实生活中的WebAuthn</a></li>
<li><a href="../zh-CN489272/index.html">眼睛，大脑，视频质量：120fps，8K，HDR，魔杖，视锥细胞的反射和“肥皂剧效果”</a></li>
<li><a href="../zh-CN489274/index.html">在测试中声明消息</a></li>
<li><a href="../zh-CN489276/index.html">验血铁-如何控制血脂水平，诊断其重要性的原因</a></li>
<li><a href="../zh-CN489280/index.html">ping通道上的所有IPv6主机</a></li>
<li><a href="../zh-CN489284/index.html">我最喜欢的Chrome开发者工具</a></li>
<li><a href="../zh-CN489286/index.html">内裤，袜子和剃须刷：2月23日对礼物的反评级</a></li>
<li><a href="../zh-CN489290/index.html">“ IT领域的工作-2020”，或者我们爱谁和谁</a></li>
<li><a href="../zh-CN489294/index.html">通过实际示例学习CSS变量</a></li>
<li><a href="../zh-CN489296/index.html">类固醇的功能选择</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>