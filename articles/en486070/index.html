<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üè∫ üê¨ ‚ôâÔ∏è ACL switches in detail üèñÔ∏è üë©üèª‚Äçü§ù‚Äçüë®üèæ ‚úãüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ACLs (Access Control List) on network devices can be implemented both hardware and software, or more commonly hardware and software-based ACLs. And if...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>ACL switches in detail</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/extremenetworks/blog/486070/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ACLs (Access Control List) on network devices can be implemented both hardware and software, or more commonly hardware and software-based ACLs. And if everything should be clear with software-based ACLs, these are the rules that are stored and processed in RAM (i.e., on Control Plane), with all the restrictions that follow from this, then we will understand how hardware-based ACLs are implemented and work. our article. As an example, we will use Extreme Networks ExtremeSwitching series switches.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/we/_a/sv/we_asvn3qoxldgijs3tph4h_qg8.jpeg"></div><br>
 <a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Since we are interested in hardware-based ACLs, the internal implementation of Data Plane, or actually used chipsets (ASIC), is of paramount importance to us. The switches of all Extreme Networks product lines are built on Broadcom's ASICs, and therefore most of the information below will also apply to other switches on the market and implemented on the same ASICs.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As you can see from the figure above, the ‚ÄúContentAware Engine‚Äù, separately for ‚Äúingress‚Äù and ‚Äúegress‚Äù, is responsible for the ACL operation in the chipset. Architecturally, they are the same, only ‚Äúegress‚Äù is less scalable, and less functional. Physically, both ‚ÄúContentAware Engine‚Äù are TCAM memory plus associated logic, and each user or system ACL rule is a simple bit-mask written to this memory. That is why chipset traffic processing is carried out on a per-unit basis and without performance degradation.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Physically, the same Ingress / Egress TCAM, in turn, is logically divided into several segments (depending on the amount of memory and platform), the so-called ‚ÄúACL slices‚Äù. </font><font style="vertical-align: inherit;">For example, the same thing happens with physically the same HDD on your laptop when you create several logical drives on it - C: \&gt;, D: \&gt;. </font><font style="vertical-align: inherit;">Each ACL-slice, in turn, consists of memory cells, in the form of ‚Äústrings‚Äù where ‚Äúrules‚Äù (rules / bit-masks) are written.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/wr/d2/7e/wrd27expv_-uzurf786j3slyu-o.jpeg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The breakdown of TCAM into ACL-slices has a certain logic. </font><font style="vertical-align: inherit;">In each of the individual ACL-slice only compatible ‚Äúrules‚Äù can be written. </font><font style="vertical-align: inherit;">If any of the ‚Äúrules‚Äù is not compatible with the previous one, then it will be written to the next in order ACL-slice, regardless of how many free lines under the ‚Äúrules‚Äù remain in the previous one.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Where does this compatibility or incompatibility of ACL rules come from? The fact is that one ‚Äúline‚Äù of TCAM, where ‚Äúrules‚Äù is written, has a length of 232 bit and is divided into several fields - Fixed, Field1, Field2, Field3. 232 bit or 29 byte TCAM memory is enough to write a bit-mask of a specific MAC or IP address, but much less than the full Ethernet packet header. In each individual ACL-slice ASIC produces an independent lookup according to the bit-mask set in F1-F3. In general, this lookup can be performed on the first 128 bytes Ethernet header. Actually, precisely because the search can be performed by 128 bytes, and only 29 bytes can be recorded, for a correct lookup, an offset should be set relative to the beginning of the packet. Offset for each ACL-slice is set when the first rule is written to it,and if, when recording the next rule, the need for another offset is found, then such a rule is considered incompatible with the first and is written to the next ACL-slice.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The table below shows the compatibility order of the conditions specified in the ACL. Each separate line contains bit-mask that are compatible with each other, and not compatible with other lines.</font></font><br>
 <br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/vt/6g/ny/vt6gnyozvvooxjqq9isgpyed5l0.jpeg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Each individual packet processed by ASIC runs a parallel lookup in each ACL-slice. Validation is performed before the first match in the ACL-slice, but multiple matches are allowed for the same packet in different ACL-slice. Each individual ‚Äúrule‚Äù has a corresponding action that must be performed if the condition (bit-mask) matches. If a match occurred in several ACL-slices at once, then in the ‚ÄúAction Conflict Resolution‚Äù block, based on the priority of the ACL-slice, a decision is made which one to perform. If both ‚Äúaction‚Äù (permit / deny) and ‚Äúaction-modifier‚Äù (count / QoS / log / ...) are written in the ACL, then in case of multiple matches only the more priority ‚Äúaction‚Äù will be executed, while ‚Äúaction-modifier‚Äù will be all done. The example below showsThat both counters will be increased and more priority "deny" is executed.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/to/-m/go/to-mgoms8e-o0wuiujiyjqpgryc.jpeg"></div><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ÄúACL Solutions Guide‚Äù</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> with more detailed information on how ACLs are publicly available on </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">extremenetworks.com</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Any questions that arise or remain can always be asked to our office staff - </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cis@extremenetworks.com</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></div>
      
    </div><p class="reference-to-source js-reference-to-source">Source: https://habr.com/ru/post/undefined/</p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en486058/index.html">Robot beasts, lesson plans, and new details: an overview of the LEGO Education SPIKE Prime</a></li>
<li><a href="../en486060/index.html">Find Order in the Chaos of IT: Organizing Your Own Development</a></li>
<li><a href="../en486062/index.html">Simple zero-copy rendering of hardware accelerated video in QML</a></li>
<li><a href="../en486064/index.html">Create an animated slideshow in pure CSS.</a></li>
<li><a href="../en486066/index.html">In the access area. Find the distance from a point to an area and reduce reverse geocoding requests</a></li>
<li><a href="../en486072/index.html">SQL HowTo: write a while-loop directly in the query, or "Elementary three-way"</a></li>
<li><a href="../en486076/index.html">From Ground to FPV Quadcopter: Introduction</a></li>
<li><a href="../en486080/index.html">Let me introduce: Veeam Availability Suite v10</a></li>
<li><a href="../en486082/index.html">Dagaz: The Sum of Technology</a></li>
<li><a href="../en486084/index.html">Replacing smaller disks with larger disks in Linux</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>