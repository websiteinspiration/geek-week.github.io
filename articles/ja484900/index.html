<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>⛹🏼 🌵 👳🏿 ウェブサイトレンダリング101 🏇🏽 👇🏽 👠</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ブラウザのアドレスバーにサイトの名前を入力し、Enterキーを押すと、通常とは異なるページが表示されます。それは簡単です：私はサイトの名前を入力しました-サイトが表示されました。ただし、より興味深いことに、ブラウザーがサイトの一部（つまり、サイトは断片、つまりチャンク）を受信し始め、完全に描画された...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>ウェブサイトレンダリング101</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/484900/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ブラウザのアドレスバーにサイトの名前を</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">入力し</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font><i><font style="vertical-align: inherit;">Enter</font></i><font style="vertical-align: inherit;">キーを</font><font style="vertical-align: inherit;">押す</font><font style="vertical-align: inherit;">と、通常とは異なるページが表示されます。</font><font style="vertical-align: inherit;">それは簡単です：私はサイトの名前を入力しました-サイトが表示されました。</font><font style="vertical-align: inherit;">ただし、より興味深いことに、ブラウザーがサイトの一部（つまり、サイトは断片、つまりチャンク）を受信し始め、完全に描画されたページを表示している間に何が起こるかを説明したいと思います。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ss/tk/lb/sstklb7ifbwb0rdaucjpytjm1vk.png"><br>
<a name="habracut"></a><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ブラウザはどのように機能しますか？</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ブラウザがページをどのように描画するかを説明する前に、ページがどのように編成され、どのプロセスでどのレベルで実行されるかを理解することが重要です。レンダリングプロセスに慣れると、ブラウザのコンポーネントを2回以上呼び出すことになります。したがって、内部的には、ブラウザは次のようになります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/dl/fr/hh/dlfrhh43eqb66arhgeic_h6e_8c.png"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ユーザーインターフェイス</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、ユーザーに表示されるすべてです。アドレスバー、進む/戻るボタン、メニュー、ブックマーク-サイトが表示される領域を除きます。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ブラウザエンジン</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、ユーザーインターフェイスとレンダリングエンジンの間の対話を担当します。たとえば、戻るボタンをクリックすると、以前の状態を描画する必要があることをREコンポーネントに伝える必要があります。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">レンダリングエンジン</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、Webページの表示を担当します。ファイルのタイプに応じて、このコンポーネントは、HTML / XMLとCSS、およびPDFの両方を解析およびレンダリングできます。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ネットワーク</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はリソースに対してxhrリクエストを実行し、一般に、ブラウザはプロキシ、キャッシングなどを含むこのコンポーネントを介して残りのインターネットと通信します。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JS Engineは、</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> jsコードが解析および実行される場所です。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UIバックエンドは</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、チェックボックス、入力、ボタンなどの標準コンポーネントを描画するために使用されます。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">データ永続性</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、Cookie、SessionStorage、indexDBなどのローカルデータの保存を担当します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、検討中のブラウザーコンポーネントが互いにどのように相互作用するかを学び、レンダリングエンジン内で何が起こっているかをより詳細に分析します。</font><font style="vertical-align: inherit;">言い換えると …</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ブラウザはどのようにHTMLを画面上のピクセルに変換しますか？</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それで、ネットワークコンポーネントの助けを借りて、ブラウザーはチャンク（通常は8 kb）のhtmlファイルを受信し始めました。次は何ですか？</font><font style="vertical-align: inherit;">次に</font><font style="vertical-align: inherit;">、コンポーネントのこのファイル</font><font style="vertical-align: inherit;">の解析（</font><font style="vertical-align: inherit;">プロセス</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仕様</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）とレンダリングの</font><font style="vertical-align: inherit;">プロセスが始まり</font><font style="vertical-align: inherit;">ます。ご想像のとおり、レンダリングエンジンです。</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重要！</font><font style="vertical-align: inherit;">使いやすさを高めるために、ブラウザはすべてのhtmlが読み込まれて解析されるまで待機しません。</font><font style="vertical-align: inherit;">代わりに、ブラウザはすぐにユーザーにページを表示しようとします（以下、その方法を検討します）。</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
解析プロセス自体は次のようになり</font><b><font style="vertical-align: inherit;">ます</font></b><font style="vertical-align: inherit;">。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/64/6h/n1/646hn1rs70cjwv3g64bolqeemq4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
解析の結果は</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DOMツリー</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。</font><font style="vertical-align: inherit;">たとえば、次のhtmlを見てください。</font></font><br>
<br>
<pre><code class="xml hljs"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Web Rendering<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"styles.css"</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"wrapper"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"header"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Hey<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"content"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
          Lorem <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>ipsum<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>.
        <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">footer</span>&gt;</span><font></font>
        Contact me<font></font>
      <span class="hljs-tag">&lt;/<span class="hljs-name">footer</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"./code.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このようなhtmlファイルのDOMツリーは次のようになります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/us/hs/wc/ushswctwocrvf7xbpmwvylr0qbs.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ブラウザがhtmlファイルを解析するときに、サードパーティのリソース（</font></font><oembed><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;リンク&gt;、&lt;スクリプト&gt;、&lt;画像&gt;</font></font></oembed><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">など）-それらが発見されると、これらのリソースに対する要求が発生します。&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、タグのhref属性で指定されたアドレスにリクエストを送信することにより</font></font><i><oembed><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;link rel = "stylessheet"&gt;</font></font></oembed></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cssスタイルファイルを受け取ったブラウザは、このファイルを解析して、いわゆる</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CSSオブジェクトモデル-CSSOMを構築し</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そのようなスタイルシートがあると想像してください：</font></font><br>
<br>
<pre><code class="css hljs"><span class="hljs-selector-tag">body</span> {
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-selector-class">.wrapper</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">960px</span>;
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> auto;<font></font>
}<font></font>
<font></font>
<span class="hljs-selector-class">.wrapper</span> <span class="hljs-selector-class">.header</span> <span class="hljs-selector-tag">h1</span> {
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">26px</span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-selector-class">.wrapper</span> <span class="hljs-selector-tag">p</span> {
  <span class="hljs-attribute">color</span>: red;<font></font>
}<font></font>
<font></font>
<span class="hljs-selector-tag">footer</span> {
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span> <span class="hljs-number">0</span>;<font></font>
}<font></font>
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CSSOMの</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">取得</font><i><font style="vertical-align: inherit;">元</font></i><font style="vertical-align: inherit;">：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/xw/aw/dk/xwawdku6z5xbkgpozpfdrksvvjw.png"><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意：ここでは、cssファイルのスタイルからツリーが作成されます。</font><font style="vertical-align: inherit;">さらに、htmlタグで規定されているユーザーエージェントのスタイル（デフォルトのブラウザースタイルとインラインスタイル）もあります。</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CSSスタイル解析アルゴリズムの詳細については、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仕様を</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ご覧ください</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これで</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DOM</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CSSOMができまし</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">  た。最初の質問は「何ですか？」という質問に答え、2番目の質問は「どうやって？」次のステップがDOMとCSSOMを組み合わせることであると考えるなら、あなたは完全に正しいです！</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DOM + CSSOM = Render Tree。</font></font></i><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Render Tree</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、ページに表示される順序で作成された表示（！）要素のツリーです。 cssルールの表示を持つ要素は表示されないことに注意してください。表示に悪影響を与える要素はありません</font><font style="vertical-align: inherit;">。その他</font><font style="vertical-align: inherit;">は、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Render Tree</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">には表示されません</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ブラウザは、Render Treeを作成して、何をどの順序でレンダリングする必要があるかを正確に決定します。レンダーツリーの構造は次のようなものです。ルート要素（html）から始まり、パーサーはすべての可視要素（スキップリンク、スクリプト、メタ、CSS要素を通じて非表示）を通過し、可視要素ごとにCSSOMから対応するCSSルールを見つけます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Firefoxエンジンでは、Render Tree要素はフレームと呼ばれます。 Webkitでは、レンダラーまたはレンダーオブジェクトという用語を使用します。 Renderオブジェクトは、ページ上に配置する方法を認識しており、その子に関する情報も含んでいます。あなたはWebKitのソースコードを見れば、ほとんどの好奇心のために、あなたはというクラスを見つけることができます</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RenderObjectを</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
例を続けると、そのような</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Render Tree</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を取得します</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ga/a3/oc/gaa3ocbwb0yzdmzvcagidmu8co0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
現時点では、ある状態のRender Treeがあります。何をどのように描画するかに関する情報を含むツリーです。これでブラウザは、要素が表示される場所とサイズを理解する必要があります。位置とサイズを計算するプロセスは、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">レイアウト</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と呼ばれ</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">レイアウト</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、Render Treeから要素の位置とサイズを決定するための再帰的なプロセスです。ルートレンダーオブジェクトから始まり、子レンダーオブジェクトの幾何学的次元を計算することにより、ツリー階層の一部またはすべてを再帰的に下っていきます。ルート要素には位置（0,0）があり、そのサイズはウィンドウの表示部分のサイズ、つまりビューポートのサイズと同じです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
HTMLでは、フローベースのレイアウトが使用されます。つまり、要素の幾何学的寸法を1回のパスで計算できる場合があります（ストリームで後で発生する要素が既に渡された要素の位置とサイズに影響しない場合）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ツリー全体のレンダーオブジェクトの位置を計算する必要がある場合はレイアウトをグローバルに、ツリーの一部のみを計算する必要がある場合はレイアウトをインクリメンタルにできます。グローバルレイアウトは、たとえば、フォントサイズを変更するときや、サイズ変更イベント中に発生します。インクリメンタルレイアウトは、ダーティとしてマークされたレンダリングオブジェクトに対してのみ発生します。</font></font><br>
<br>
<blockquote>   <i>«   (dirty bit system)»</i>.       ,     layout.       render object —         «dirty».  render object  ,        ,   render object   «children are dirty».</blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
レイアウトプロセスの終わりに向かって、各レンダーオブジェクトには独自の位置とサイズがあります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
要約すると、ブラウザは何を、どのように、どこに描画するかを知っています。したがって、描画するだけです。奇妙なことに、このプロセスは</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Paint</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と呼ばれ</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ペイント</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、レンダーオブジェクトのプロパティで指定された色でモニターピクセルが塗りつぶされ、白い画面が作成者（開発者）が考案した絵に変わる段階です。レンダリングパス全体を通して、これは最もコストのかかるプロセスです（前のプロセスが安価なわけではありません）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
レイアウトプロセスと同様に、ペイントはグローバルにすることができます—ツリーは完全に再描画され、インクリメンタル—ツリーは部分的に再描画されます。</font><font style="vertical-align: inherit;">部分的な再描画の場合、レンダーオブジェクトはその四角形を無効としてマークします。</font><font style="vertical-align: inherit;">オペレーティングシステムはこの領域を再描画が必要と見なし、ペイントイベントを発生させます。</font><font style="vertical-align: inherit;">同時に、ブラウザは領域を組み合わせて、必要なすべての場所で一度に再描画を実行できます。</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ツリー要素のサイズ変更と配置（レイアウト）と再描画（ペイント）は、コストのかかるプロセスです。</font><font style="vertical-align: inherit;">CPUレベルで実行されます。</font><font style="vertical-align: inherit;">これらのプロセスが頻繁に起動される動的なWebアプリケーションを開発することにより、スムーズなアニメーションを実現することはできません。</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、CPUをロードせずに16.6ミリ秒（60 fps）未満で各フレームを描画することなく、リッチなアニメーションでサイトを作成するのに役立つ何かがあるはずです。実際、ブラウザはサイトのダイナミクスを最適化するのに役立つ別のステップを実行します- </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンポジット</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（構成）。&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
合成前は、すべての描画要素は1つのレイヤー（メモリレイヤー）にあります。つまり、一部の要素のパラメーター（たとえば、幾何学的寸法や位置）を変更すると、隣接する要素のパラメーターが再計算されます。ただし、複合レイヤーに要素を分散する場合-要素のパラメーターを変更すると、他のレイヤーの要素に影響を与えることなく、特定のレイヤーでのみ再計算が行われます。したがって、このプロセスはパフォーマンスの点で最も安価なので、コンポジットのみを発生させる変更を行う必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
上記を要約すると、Webページをレンダリングする次のプロセスが得られ</font></font><br>
<br>
<img src="https://habrastorage.org/webt/vy/30/eh/vy30eha1riss2agnsvnzbk2bwlq.png"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ブラウザはhtmlファイルを受け取り、それを解析してDOMを構築します。</font><font style="vertical-align: inherit;">cssスタイルを満たし、ブラウザーがそれらをロードし、解析し、CSSOMを構築し、それらをDOMと組み合わせて、Render Treeを取得します。</font><font style="vertical-align: inherit;">Render Treeから要素を配置する場所を見つける必要があります。これはレイアウトのタスクです。</font><font style="vertical-align: inherit;">要素を配置したら、要素の描画を開始できます。これは、画面のピクセルが塗りつぶされる段階であるペイントタスクです。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ダイナミクス</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CSSプロパティが変更されるとどうなりますか？または、たとえば、新しいdomノードが追加されますか？ cssプロパティを変更する場合、すべては変更されるプロパティに依存します。トリガー2つだけのプロパティがあり</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、複合</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タスク</font><font style="vertical-align: inherit;">- </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不透明度を</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">して</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">変換が</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。これらの2つのプロパティのみがアニメーションに最も安価です。たとえば、背景を変更するとペイントタスクが発生し（次に合成）、表示を変更するとレイアウトが最初に発生し、次にペイント、次に合成が発生します。スタイルの変更によって引き起こされるタスクのリストは、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">csstriggers.comにあり</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
新しいノードをdomツリーに追加するとき-明らかにブラウザはツリーに新しいオブジェクトを追加し、ページ上のその位置を計算し、ページ上の他の要素の位置を計算し（新しい要素の影響を受けた場合）、結局すべてを描画するためにコストがかかります。</font><font style="vertical-align: inherit;">したがって、すべてのインターネットユーザーが最新のデバイスモデルでWebアプリケーションを起動するわけではないため、そのような操作を行うときは、パフォーマンスに留意する必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
要約すると、ブラウザを構成するコンポーネント、コンポーネントの相互作用、レンダリングエンジンがユーザーにページを描画する方法を調べました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
上記はChrome開発ツールで見ることができますが、記事のタイトルを超えないようにするために、現時点ではこれですべてです。</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">出典</font></font></b><div class="spoiler_text"><ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">https://blog.algolia.com/performant-web-animations/</a> </li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">https://www.zeolearn.com/magazine/components-of-web-browsers</a> </li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">https://www.html5rocks.com/ru/tutorials/internals/howbrowserswork</a> </li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">https://blog.sessionstack.com/how-javascript-works-the-rendering-engine-and-tips-to-optimize-its-<br>
performance-7b95553baeda</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">https://developers.google.com/web/fundamentals/performance/rendering</a> </li>
</ol></div></div></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja484886/index.html">RTLスタイリング101-CSS RTLスタイリングの詳細ガイド</a></li>
<li><a href="../ja484890/index.html">SSAS表形式モデルのディメンション属性へのアクセスの制限</a></li>
<li><a href="../ja484892/index.html">ターンキーケア：SAPホスティングの仕組み</a></li>
<li><a href="../ja484896/index.html">SELinuxシステム管理者のチートシート：重要な質問に対する42の回答</a></li>
<li><a href="../ja484898/index.html">依存関係をテストする正当な理由：AGPLエディション</a></li>
<li><a href="../ja484902/index.html">高次の方程式について</a></li>
<li><a href="../ja484904/index.html">Splunkのない1年-ロシアの機械データ分析の市場をアメリカの企業がどのように変えたのか</a></li>
<li><a href="../ja484906/index.html">リモートの分散型チームおよびチームリーダー</a></li>
<li><a href="../ja484908/index.html">HighLoad ++、Eugene Kuzovlev（EcommPay IT）：1分間のダウンタイムに100,000ドルかかる場合の対処法</a></li>
<li><a href="../ja484910/index.html">ポール・グラハム：嫌い</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>