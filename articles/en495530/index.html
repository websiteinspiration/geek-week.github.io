<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®‚Äçüî¨ üé∂ üßôüèæ Hardware Converter HDMI-RGB (18/24-bit) üöì ü•ë üëÜüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day, Habr! 
 
 
 
 And again, my article will be devoted to video converter. This time it will be HDMI-RGB. I want to devote the article not spec...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Hardware Converter HDMI-RGB (18/24-bit)</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/495530/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Good day, Habr! </font></font><br>
<br>
<img src="https://habrastorage.org/webt/iy/fw/jv/iyfwjv5jzvhjv7y3ds2x6l5eujs.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And again, my article will be devoted to video converter. </font><font style="vertical-align: inherit;">This time it will be HDMI-RGB. </font><font style="vertical-align: inherit;">I want to devote the article not specifically to development, but to one problem with colors that arose when I connected an 18-bit matrix to a 24-bit driver.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In one of my previous articles, I wrote about the HDMI-LVDS converter, with intermediate conversion to RGB ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HDMI-LVDS. From layout to release</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). For the basis of the new development, I decided to take the same TFP401 (HDMI-RGB) chip from Texas Instruments. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I developed the board in the same dimensions, left the microcontroller with the same functionality (sleep mode control, button processing, matrix backlight control). Since the controller was developed for a specific matrix (and, accordingly, a ready-made cable), we also had to install a specific RGB connector, with a pitch of 1.25mm. There are two such connectors on the board, as well as for connecting backlight drivers, since it is necessary to duplicate the image on two matrices at the same time.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A little distracted. Earlier, I already did duplication of LVDS and HDMI interfaces in my projects. At first I tried to use specialized microcircuits, but then I refused them, and began to connect two connectors in parallel (for HDMI, I2C must be torn off so that there are no conflicts on the bus). This option works great on all panels, including more than 42 inches. There are no complaints about the image. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
On this board, too, I simply duplicated the RGB connectors and made control of the lengths of the conductors. All tests were performed on one matrix. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/po/n8/ff/pon8fftlexopvxf5k8gl6hqkou4.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. 1. Image from matrix</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The first inclusion puzzled me a little. Distortions are especially noticeable in the bottom photo of Fig. 1. It immediately became clear that the problem was in ‚Äúbitness‚Äù - there are no significant bits in all colors. But how to find a problem, because according to the scheme, all the bits come to the matrix "one to one"? I have already seen a similar problem when connecting 6-bit color matrices to my converter, but I did not study it, since we supply products only for 8-bit matrices. He began to dig the Internet in search of a solution to the problem. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/gk/si/6i/gksi6iun9qyhhsqx9oho28pgj38.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. 2. RGB output circuit with TFP401</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For a long time I could not find any information on the use of TFP401 in 18-bit mode. In the datasheet, 24-bit is indicated in black and white. If you think about it, this should not affect the picture itself - just a loss of quality and that‚Äôs it. The phrase on the TI forum (the support service answered users' questions) that the TFP401 is not able to automatically switch to 18-bit mode of operation (which is already clear from the documentation) and that it is necessary to ‚Äúreconnect‚Äù the panel helped. This suggested that there is still a way. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ex/_q/bn/ex_qbnekgcvc0ajo2aibysaq9_a.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. 3. Connecting an NL6448BC33-70F matrix from a datasheet</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Again I began to study the datasheet on the panel - nothing has changed, 6-bit per channel. In 2014, when developing the HDMI-LVDS converter, I came across some documents saying that you need to shift bits to use the 18-bit mode, but could not remember how many bits. He began to search for information again, but already deliberately by the shift, and, purely by chance, stumbled upon a document in which the table below appeared! </font></font><br>
<br>
<img src="https://habrastorage.org/webt/67/18/bf/6718bfockfyk8300nizesrprj1w.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. 4. 24-bit and 18-bit</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Thus, to connect an 18-bit matrix and a 24-bit chip, I need to make the connection according to the table in Fig. 4. That is, I have to connect the R0 of the display to the TFP401 R2 and so on. Since I have a connector on the cable, I just ‚Äúre-twisted‚Äù the cable. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/py/tr/tx/pytrtx7sryvgdnh_tamy9jh9wr0.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig.5. Correct Pinout Image</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Here are the same pictures, but after the repinning. </font><font style="vertical-align: inherit;">Everything fell into place. </font><font style="vertical-align: inherit;">The quality returned to normal, sharp gradients disappeared. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/dl/l7/h0/dll7h04e0wnwl6_r8qyg6heqvtw.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. 6. </font><font style="vertical-align: inherit;">Appearance of the converter with the connected driver (LD1263) and matrix </font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/n7/v8/o2/n7v8o2z-slvuq6xh0sqnaagnhti.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. 7. </font><font style="vertical-align: inherit;">640 * 480 ....... </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In Altium, of course, working is not very convenient, but the picture is excellent. </font><font style="vertical-align: inherit;">Suitable for low-cost dashboards, visualization of any interfaces, etc., if you add a touch, you can use it, for example, for PLCs. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So far, it has not been possible to connect two matrices at the same time (the second is not available), but I think that there will be no problems. </font><font style="vertical-align: inherit;">Later I will unsubscribe and add a photo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Thank you for the attention!</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en495516/index.html">The Visitor template is deprecated for Kotlin, but it's worth knowing</a></li>
<li><a href="../en495518/index.html">React form development. KISS, YAGNI, DRY principles in practice</a></li>
<li><a href="../en495520/index.html">Checklist for an architect</a></li>
<li><a href="../en495524/index.html">What programming language to learn so that HR large companies hunt for you</a></li>
<li><a href="../en495526/index.html">Organization of remote access by means of Fortinet</a></li>
<li><a href="../en495532/index.html">How large IT companies transferred their staff to remote work</a></li>
<li><a href="../en495534/index.html">Zabbix Conference Russia 2020: conference rescheduled</a></li>
<li><a href="../en495538/index.html">The project "Glass". Part 2. Sugar, insulated walls and blow or not blow</a></li>
<li><a href="../en495540/index.html">How to escape from the news agenda and relax: podcasts, movies and music will help</a></li>
<li><a href="../en495542/index.html">Simple homemade VGA graphics card</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>