<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🖥️ 👨🏻‍🔧 🚶🏻 Kami menambahkan cek hash pemburu rootkit ke dalam skrip harian ✊🏽 👨🏼‍🔬 👍🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Karena semua udalenka ini, ternyata laptop pelatihan, setengah kosong sebelumnya, kini telah menjadi mesin kerja utama dan layak untuk melindunginya e...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Kami menambahkan cek hash pemburu rootkit ke dalam skrip harian</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/496346/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Karena semua udalenka ini, ternyata laptop pelatihan, setengah kosong sebelumnya, kini telah menjadi mesin kerja utama dan layak untuk melindunginya entah bagaimana dengan lebih bijaksana. Apa, secara umum, jelas diisyaratkan oleh pihak berwenang. Di laptop sekarang adalah Ubuntu 20,04 beta. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Semuanya dimulai dengan pengaturan BIOS yang jelas dan enkripsi disk lengkap, yang mungkin tidak seharusnya saya tulis. Tetapi kemudian saya memutuskan untuk memahami apa yang dapat dilakukan oleh utilitas </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rkhunter</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ("rootkit, backdoor, sniffer, dan exploit scanner") </font><font style="vertical-align: inherit;">pada tingkat file </font><font style="vertical-align: inherit;">.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya tidak memiliki harapan besar dari perangkat lunak yang belum diperbarui selama beberapa tahun. </font><font style="vertical-align: inherit;">Saya harus segera mengatakan bahwa saya sangat meragukan penggunaan tanda tangan Februari 2018 untuk mencari rootkit, tetapi salah satu mode operasi lainnya - memeriksa hash file, membuat saya tertarik. </font><font style="vertical-align: inherit;">Siapa yang tertarik dengan pengalaman seperti itu dan apa yang telah terjadi sejauh ini - selamat datang di kucing.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Idenya sederhana - tetapi mari kita tambahkan cek di skrip hal berguna di pagi hari untuk melihat apakah MD5 hash file yang tidak boleh diubah tidak berubah. </font><font style="vertical-align: inherit;">Setidaknya sampai pembaruan paket harus. </font><font style="vertical-align: inherit;">Sangat ringan, tapi tidak sia-sia, menurut saya, masuk daftar putih. </font><font style="vertical-align: inherit;">Versi saat ini yang mampu menghitung dan memeriksa hash utilitas diatur hanya oleh manajer paket:</font></font><br>
<br>
<pre><code class="bash hljs">apt search rkhunter<font></font>
rkhunter/focal,focal,now 1.4.6-8 all [installed]<font></font>
  rootkit, backdoor, sniffer and exploit scanner</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Konfigurasi pemburu utama ada di /etc/rkhunter.conf dan pertama, untuk menyelesaikan masalah saya, ini adalah parameter yang saya atur di sana:</font></font><br>
<br>
<pre><code class="bash hljs">ENABLE_TESTS=hashes</code></pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Karena, selain hash, belum ada yang menarik minat saya. </font><font style="vertical-align: inherit;">Daftar tes lain yang mungkin dapat diperoleh dengan perintah.</font></font><br>
<br>
<pre><code class="bash hljs">sudo rkhunter --list <span class="hljs-built_in">test</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya masih menganggap tabrakan MD5-ok terkait dengan matematika, tetapi tidak untuk berlatih. </font><font style="vertical-align: inherit;">Saya tidak bersikeras pada pendapat ini, tetapi hampir setiap hari saya melihat malware yang baik dan sejauh ini belum menemukan konflik seperti itu di alam liar. </font><font style="vertical-align: inherit;">Jadi untuk sekarang di konfigurasi sudah cukup bagi saya.</font></font><br>
 <br>
<pre><code class="bash hljs">HASH_CMD=MD5</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kemudian ia menunjuk manajer paketnya dan, yang paling penting, direktori, mengajukan hash yang menarik minat saya. </font><font style="vertical-align: inherit;">Path akan, misalnya, / bin dan / usr / bin. </font><font style="vertical-align: inherit;">Tentang file yang muncul di direktori, tetapi yang tidak ada pada saat perhitungan, pemburu juga akan memberikan peringatan.</font></font><br>
 <br>
<pre><code class="bash hljs">PKGMGR=DPKG<font></font>
USER_FILEPROP_FILES_DIRS=/bin/*<font></font>
USER_FILEPROP_FILES_DIRS=/usr/bin/*</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Inilah poin penting: dengan pengaturan saya, pemindaian tidak didasarkan pada paket, tetapi pada direktori. Mungkin, ini lebih benar, karena paket-paket berisi banyak file yang tidak dapat dieksekusi dan mereka harus disaring terlebih dahulu, misalnya melalui file. Sejauh ini, saya telah memilih jalur untuk meningkatkan daftar direktori dan pengecualian. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami telah menyelesaikan konfigurasi pemindai sekarang, sekarang saatnya untuk memperbarui dasar hash yang benar di /var/lib/rkhunter/db/rkhunter.dat dengan pengaturan baru. Untuk melakukan ini, Anda memerlukan perintah (itu juga membutuhkan nama paket untuk ditambahkan ke database, jika Anda pergi ke arah lain).</font></font><br>
<br>
<pre><code class="bash hljs">sudo rkhunter --propupd</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setelah itu, semua file yang menarik bagi Anda dan hash mereka akan muncul di rkhunter.dat. Dalam kasus saya, ini adalah 2.847 file, dan pengindeks mengambil 9m 2.117. Agak banyak, seperti, untuk tiga ribu MD5, mengingat md5sum untuk / bin / ls untuk 0,003, tetapi memang ada. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Itu saja, kami siap menjalankan cek. Belum bertempur, kecil kemungkinan beberapa malware telah berhasil mengubah hash.</font></font><br>
<br>
<pre><code class="bash hljs">sudo rkhunter -c</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ada satu kunci yang sangat berguna di sini - rwo (hanya laporan peringatan), yang akan melewati semua perbandingan yang berhasil dan hanya memberikan peringatan. </font><font style="vertical-align: inherit;">Anda perlu mencari hasil kerja di /var/log/rkhunter.log. </font><font style="vertical-align: inherit;">Sedangkan untuk kecepatan cek, untuk hampir tiga ribu binari saya 10m 27.489, sebanding dengan waktu pengindeksan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami menyortir verifikasi, tetapi pertanyaannya tetap tentang pengindeksan ulang saat memperbarui paket. </font><font style="vertical-align: inherit;">Itu </font><font style="vertical-align: inherit;">kami melakukan pembaruan dan sekarang tidak menganggap semua file yang diperbarui sebagai malware. </font><font style="vertical-align: inherit;">Pemindai memiliki konfigurasi lain / etc / default / rkhunter untuk mengotomatisasi tugas. </font><font style="vertical-align: inherit;">Di dalamnya kita akan mengatur parameter.</font></font><br>
<br>
<pre><code class="bash hljs">APT_AUTOGEN=<span class="hljs-string">"yes"</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan di /etc/apt/apt.conf.d/90rkhunter terdapat skrip yang bertanggung jawab untuk post-reindexing:</font></font><br>
<br>
<pre><code class="bash hljs"><font></font>
 // Makes sure that rkhunter file properties database is updated after each remove or install only APT_AUTOGEN is enabled<font></font>
 DPkg::Post-Invoke { <span class="hljs-string">"if [ -x /usr/bin/rkhunter ] &amp;&amp; grep -qiE '^APT_AUTOGEN=.?(true|yes)' /etc/default/rkhunter; then /usr/share/rkhunter/scripts/rkhupd.sh; fi"</span>; };</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sebenarnya, semua orang, tambahan apa pun senang menerima. </font><font style="vertical-align: inherit;">Semoga bermanfaat.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id496336/index.html">Untuk apa smart meter?</a></li>
<li><a href="../id496338/index.html">Krisis dan hanya itu</a></li>
<li><a href="../id496340/index.html">Kami melatih jaringan kompetitif-generatif untuk menggambar di Azure ML</a></li>
<li><a href="../id496342/index.html">Pembaruan Proses CI / CD: teamcity</a></li>
<li><a href="../id496344/index.html">Apakah karantina online hackathon saat yang tepat?</a></li>
<li><a href="../id496348/index.html">Studi Kasus API Penyimpanan Web</a></li>
<li><a href="../id496350/index.html">Kamu tidak boleh lewat! - Printer 3D menjawab coronavirus</a></li>
<li><a href="../id496354/index.html">Pemrograman komputer ternary: bermain dengan emulator</a></li>
<li><a href="../id496356/index.html">Membuat navigator menggunakan teknologi augmented reality dan metode pembelajaran mesin</a></li>
<li><a href="../id496358/index.html">Bersiap untuk merayakan Hari Kosmonotika online (daftar sedang diperbarui)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>