<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩‍❤️‍💋‍👩 👨🏿‍💼 🐼 Portamos el proyecto Angular en ESLint, con Prettier, Husky y lint-staged 🀄️ 🔙 🥑</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hola Habr! Mi nombre es Bogdan, trabajo en el equipo de PIC Digital Front-End. Estamos desarrollando la mayoría de los proyectos en Angular, y recient...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Portamos el proyecto Angular en ESLint, con Prettier, Husky y lint-staged</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/501830/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hola Habr! </font><font style="vertical-align: inherit;">Mi nombre es Bogdan, trabajo en el equipo de PIC Digital Front-End. </font><font style="vertical-align: inherit;">Estamos desarrollando la mayoría de los proyectos en Angular, y recientemente decidí revisar nuestras guías de estilo, así como agregar nuevas herramientas para un trabajo más conveniente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como intérprete, decidí usar ESLint, ya que planean transferir Angular pronto. </font><font style="vertical-align: inherit;">Y en este artículo quiero compartir instrucciones sobre cómo cambiar de TSLint a ESLint y, al mismo tiempo, decir cómo ejecutar Prettier desde ESLint, cómo agregar reglas de guía de estilo AirBnB y cómo hacer que el linting sea conveniente e invisible configurando VS Code y Git Hooks.</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Más bonita y ESLint</font></font></h2><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ESLint</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> es una herramienta para el análisis de código estático, las reglas se dividen en dos grupos:</font></font><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Formateo</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : para llevar el código a una vista: longitudes de línea, comas, punto y coma, etc.</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Calidad del código</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : búsqueda de plantillas de código problemáticas: código innecesario, errores.</font></font></li>
</ul><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Prettier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> es una herramienta automática de formateo de código. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La pregunta que me interesó fue: ¿por qué usar Prettier si ESLint también puede formatear código? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La respuesta es simple: Prettier formatea el código mucho mejor: elimina todo el formato y reescribe completamente el código en un solo estilo. </font><font style="vertical-align: inherit;">Esto permite a los desarrolladores olvidarse del formato del código y no perder el tiempo discutiendo el estilo del código para su revisión. </font><font style="vertical-align: inherit;">Por ejemplo, tenemos una larga línea de código: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ey/i-/u-/eyi-u-iudnfy6rscgqpgxuxpvgi.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
si intentamos cambiar el formato a través de ESLint, simplemente nos dará un error:</font></font><br>
<br>
<pre><code class="bash hljs">eslint example.ts --fix<font></font>
<font></font>
output:<font></font>
error    This line has a length of 97. Maximum allowed is 80<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tal ejemplo muestra que linter no siempre puede ayudar con el formateo del código, y los desarrolladores pueden formatear este código de diferentes maneras, según sus consideraciones personales. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si guardamos o formateamos el archivo con Prettier, la línea tomará la forma: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zg/mb/c9/zgmbc984enmbcpijrg5bzmq4emk.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Prettier proporciona un estilo uniforme en toda la base del código. </font><font style="vertical-align: inherit;">Por lo tanto, puede y debe usarse junto con ESLint, pero debe configurarlos para que no interfieran entre sí.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configuración de ESLint</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La esencia del linting usando ESLint está en los analizadores que transforman el código en </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AST</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (Árbol de sintaxis abstracta) para el procesamiento posterior del software, y complementos que contienen reglas, por ejemplo, reglas recomendadas para el linchado TypeScript o las reglas de guía de códigos AirBnB.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Instalación</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para migrar una aplicación angular a ESLint, necesitamos las siguientes dependencias:</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">eslint</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - el linter mismo,</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@ angular-eslint / builder</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &nbsp;- Angular CLI Builder para ejecutar ESLint para aplicaciones angulares utilizando el comando estándar ng lint,</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@ angular-eslint / eslint-plugin</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &nbsp;: un complemento que contiene reglas para linting angular,</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@ angular-eslint / template-parser</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &nbsp;es un analizador que con</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">angular</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ compiler hace posible escribir reglas para alinear plantillas angulares,</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@ angular-eslint / eslint-plugin-template</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &nbsp;: un complemento que, cuando se usa junto con @ angular-eslint / template-parser, lanza reglas para linguotar plantillas angulares,</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@ typescript-eslint / parser</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : complemento para analizar el código TypeScript,</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@ typescript-eslint / eslint-plugin</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : un complemento que ejecuta las reglas de TypeScript para el linting.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para instalarlos, simplemente ejecute el comando:</font></font><br>
<br>
<pre><code class="bash hljs">ng add @angular-eslint/schematics</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En el momento de la escritura, typecript-eslint y angular-eslint no tienen todos los equivalentes para las reglas en la configuración estándar de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Codelyzer</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para TSLint, pero la mayoría de ellas ya existen. </font><font style="vertical-align: inherit;">Puede supervisar el estado actual de la transferencia de reglas de TSLint a ESLint en los </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">mono-repositorios </font></a></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Angular ESLint</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TypeScript ESLint</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configuración</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Instalamos todo lo que necesitamos para conectar aplicaciones angulares. </font><font style="vertical-align: inherit;">Ahora pasemos a configurar ESLint. </font><font style="vertical-align: inherit;">Creemos un archivo .eslintrc.js y agreguemos la </font><font style="vertical-align: inherit;">configuración </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">recomendada</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para Angular ESLint:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-built_in">module</span>.exports = {
  <span class="hljs-attr">extends</span>: [<span class="hljs-string">'plugin:@angular-eslint/recommended'</span>],
  <span class="hljs-attr">rules</span>: {
    <span class="hljs-string">'@angular-eslint/directive-selector'</span>: [
      <span class="hljs-string">'error'</span>,<font></font>
      { <span class="hljs-attr">type</span>: <span class="hljs-string">'attribute'</span>, <span class="hljs-attr">prefix</span>: <span class="hljs-string">'app'</span>, <span class="hljs-attr">style</span>: <span class="hljs-string">'camelCase'</span> },<font></font>
    ],<font></font>
    <span class="hljs-string">'@angular-eslint/component-selector'</span>: [
      <span class="hljs-string">'error'</span>,<font></font>
      { <span class="hljs-attr">type</span>: <span class="hljs-string">'element'</span>, <span class="hljs-attr">prefix</span>: <span class="hljs-string">'app'</span>, <span class="hljs-attr">style</span>: <span class="hljs-string">'kebab-case'</span> },<font></font>
    ],<font></font>
  },<font></font>
  <span class="hljs-attr">overrides</span>: [
    <span class="hljs-comment">//   ,       *.component.ts</span><font></font>
    {<font></font>
      <span class="hljs-attr">files</span>: [<span class="hljs-string">'*.component.ts'</span>],
      <span class="hljs-attr">parser</span>: <span class="hljs-string">'@typescript-eslint/parser'</span>,
      <span class="hljs-attr">parserOptions</span>: {
        <span class="hljs-attr">ecmaVersion</span>: <span class="hljs-number">2020</span>,
        <span class="hljs-attr">sourceType</span>: <span class="hljs-string">'module'</span>,<font></font>
      },<font></font>
      <span class="hljs-attr">plugins</span>: [<span class="hljs-string">'@angular-eslint/template'</span>],
      <span class="hljs-attr">processor</span>: <span class="hljs-string">'@angular-eslint/template/extract-inline-html'</span>,<font></font>
    },<font></font>
  ],<font></font>
};<font></font>
</code></pre><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Las configuraciones se pueden describir en diferentes formatos: JavaScript, JSON o archivo YAML. </font><font style="vertical-align: inherit;">Puedes dejar comentarios en JavaScript.</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
"Complemento: @ angular-eslint / recomendado" contiene configuraciones para 3 complementos a la vez: "@ typescript-eslint / eslint-plugin", "@ angular-eslint / eslint-plugin" y "@ angular-eslint / eslint-plugin-template " </font><font style="vertical-align: inherit;">Puedes leer qué reglas establece </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aquí</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Actualización del comando ng lint</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
También en la configuración angular.json, debe actualizar el comando </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ng lint</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para ejecutar </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@ angular-eslint / builder</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="json hljs"><span class="hljs-string">"lint"</span>: {
  <span class="hljs-attr">"builder"</span>: <span class="hljs-string">"@angular-eslint/builder:lint"</span>,
  <span class="hljs-attr">"options"</span>: {
    <span class="hljs-attr">"eslintConfig"</span>: <span class="hljs-string">".eslintrc.js"</span>,
    <span class="hljs-attr">"tsConfig"</span>: [
      <span class="hljs-string">"tsconfig.app.json"</span>,
      <span class="hljs-string">"tsconfig.spec.json"</span>,
      <span class="hljs-string">"e2e/tsconfig.json"</span><font></font>
    ],<font></font>
    <span class="hljs-attr">"exclude"</span>: [
      <span class="hljs-string">"**/node_modules/**"</span><font></font>
    ]<font></font>
  }<font></font>
},<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La configuración básica de ESLint está lista, ahora puede iniciar ESLint con el comando estándar </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ng lint</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Instalar complementos adicionales</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para instalar el complemento para ESLint, por ejemplo, para pruebas de unidad de linting en Angular, debe descargar y agregar el </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">complemento Jasmine</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> a la configuración </font><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="bash hljs">npm install eslint-plugin-jasmine --save-dev
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y agregue un nuevo bloque de configuración para archivos con la extensión * .spec.ts a la propiedad "overrides":</font></font><br>
<br>
<pre><code class="javascript hljs">overrides: [<font></font>
  ...,<font></font>
  {<font></font>
    <span class="hljs-attr">files</span>: [<span class="hljs-string">'src/**/*.spec.ts'</span>, <span class="hljs-string">'src/**/*.d.ts'</span>],
    <span class="hljs-attr">parserOptions</span>: {
      <span class="hljs-attr">project</span>: <span class="hljs-string">'./src/tsconfig.spec.json'</span>,<font></font>
    },<font></font>
    <span class="hljs-comment">//   </span>
    <span class="hljs-attr">extends</span>: [<span class="hljs-string">'plugin:jasmine/recommended'</span>],
    <span class="hljs-comment">//    </span>
    <span class="hljs-attr">plugins</span>: [<span class="hljs-string">'jasmine'</span>],
    <span class="hljs-attr">env</span>: { <span class="hljs-attr">jasmine</span>: <span class="hljs-literal">true</span> },
    <span class="hljs-comment">//   'no-unused-vars'</span>
    <span class="hljs-attr">rules</span>: {
      <span class="hljs-string">'@typescript-eslint/no-unused-vars'</span>: <span class="hljs-string">'off'</span>,<font></font>
    },<font></font>
  }<font></font>
],<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por analogía, puede agregar otros complementos para diferentes extensiones de archivo.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Agregar guías de guía de estilo</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para lograr una mayor coherencia de la base del código, puede seleccionar y agregar las reglas de una de las guías de estilo populares a la configuración de ESLint:</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AirBnB</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : el más popular y estricto de los tres, comas y puntos y comas finales obligatorios.</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Google</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : similar a AirBnB en términos de formato, pero menos estrictos, comentarios obligatorios de JSDoc.</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">StandartJS</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : prohíbe el uso de comas y punto y coma al final.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Elija una guía de estilo que sea más adecuada para su equipo. </font><font style="vertical-align: inherit;">Puede turnarse para probar todas las guías de estilo en algún proyecto grande, ver qué errores produce el linter y, en función de esto, tomar una decisión.</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Elija una implementación de la guía de estilo TypeScript porque las reglas de JavaScript pueden no funcionar correctamente en TypeScript.</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como ejemplo, agreguemos la guía de estilo AirBnB a nuestra configuración de ESLint. </font><font style="vertical-align: inherit;">Para hacer esto, instale la configuración con las reglas de AirBnB para TypeScript y el complemento con reglas para trabajar con la sintaxis de importación / exportación:</font></font><br>
<br>
<pre><code class="bash hljs">npm install eslint-plugin-import eslint-config-airbnb-typescript --save-dev</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para no cambiar la configuración de nivel superior, crearemos un nuevo bloque de reglas en la propiedad "anulaciones" con las reglas de la guía de estilo AirBnB y el analizador de TypeScript necesarios para su trabajo:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-built_in">module</span>.exports = {<font></font>
  ...,<font></font>
  <span class="hljs-attr">overrides</span>: [<font></font>
    ...,<font></font>
    {<font></font>
      <span class="hljs-attr">files</span>: [<span class="hljs-string">'*.ts'</span>],
      <span class="hljs-attr">extends</span>: [
        <span class="hljs-string">'airbnb-typescript/base'</span>,<font></font>
      ],<font></font>
      <span class="hljs-attr">parser</span>: <span class="hljs-string">'@typescript-eslint/parser'</span>,
      <span class="hljs-attr">parserOptions</span>: {
        <span class="hljs-attr">ecmaVersion</span>: <span class="hljs-number">2020</span>,
        <span class="hljs-attr">sourceType</span>: <span class="hljs-string">'module'</span>,<font></font>
      },<font></font>
    },<font></font>
  ]<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para agregar otra guía de estilo, debe instalar un conjunto de reglas para TypeScript, crear un nuevo bloque de reglas en "anulaciones" con las reglas de la guía de estilo y especificar el analizador necesario para su trabajo.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Reglas de personalización</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si desea deshabilitar o redefinir algunas reglas en el estilo de la guía, puede hacerlo en la propiedad "reglas":</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-built_in">module</span>.exports = {<font></font>
  ...,<font></font>
  <span class="hljs-attr">overrides</span>: [<font></font>
    ...,<font></font>
    {<font></font>
      <span class="hljs-attr">files</span>: [<span class="hljs-string">'*.ts'</span>],
      <span class="hljs-attr">extends</span>: [
        <span class="hljs-string">'airbnb-typescript/base'</span>,<font></font>
      ],<font></font>
      <span class="hljs-attr">parser</span>: <span class="hljs-string">'@typescript-eslint/parser'</span>,
      <span class="hljs-attr">parserOptions</span>: {
        <span class="hljs-attr">ecmaVersion</span>: <span class="hljs-number">2020</span>,
        <span class="hljs-attr">sourceType</span>: <span class="hljs-string">'module'</span>,<font></font>
      },<font></font>
      <span class="hljs-comment">//  </span>
      <span class="hljs-attr">rules</span>: {
        <span class="hljs-string">'import/no-unresolved'</span>: <span class="hljs-string">'off'</span>,
        <span class="hljs-string">'import/prefer-default-export'</span>: <span class="hljs-string">'off'</span>,
        <span class="hljs-string">'class-methods-use-this'</span>: <span class="hljs-string">'off'</span>,
        <span class="hljs-string">'lines-between-class-members'</span>: <span class="hljs-string">'off'</span>,
        <span class="hljs-string">'@typescript-eslint/unbound-method'</span>: [
          <span class="hljs-string">'error'</span>,<font></font>
          {<font></font>
            <span class="hljs-attr">ignoreStatic</span>: <span class="hljs-literal">true</span>,<font></font>
          },<font></font>
        ],<font></font>
      },<font></font>
    },<font></font>
  ]<font></font>
}<font></font>
</code></pre><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configurar más bonito</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para agregar Prettier a nuestra configuración, necesitamos instalar Prettier, un complemento con reglas de Prettier, así como una configuración que deshabilitará todas las reglas que puedan entrar en conflicto con Prettier:</font></font><br>
<br>
<pre><code class="bash hljs">npm i prettier eslint-config-prettier eslint-plugin-prettier --save-dev
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En las "anulaciones" en el bloque con las reglas de los archivos con la extensión * .ts en la propiedad "extiende" en la parte inferior, agregue las reglas y la configuración más bonita:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-built_in">module</span>.exports = {<font></font>
  ...,<font></font>
  <span class="hljs-attr">overrides</span>: [<font></font>
    ...,<font></font>
    {<font></font>
      <span class="hljs-attr">files</span>: [<span class="hljs-string">'*.ts'</span>],
      <span class="hljs-attr">extends</span>: [
        <span class="hljs-comment">//   AirBnB</span>
	<span class="hljs-string">'airbnb-typescript/base'</span>,
	<span class="hljs-comment">//   Prettier</span>
	<span class="hljs-string">'prettier/@typescript-eslint'</span>,
	<span class="hljs-string">'plugin:prettier/recommended'</span>,<font></font>
      ],<font></font>
      ...,<font></font>
    },<font></font>
  ]<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La configuración de Prettier siempre debe estar al final de la lista para sobrescribir cualquier regla que pueda entrar en conflicto con Prettier. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
`prettier / @ typescript-eslint` deshabilita las reglas` @ typescript-eslint`, que pueden entrar en conflicto con Prettier, y `plugin: prettier / recomendado` hace tres cosas:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">incluye eslint-plugin-prettier,</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">imprime errores de regla más bonitos / más bonitos en la consola como "error",</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Agrega las reglas de formato Prettier eslint-config-prettier.</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configuración para Prettier:</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Prettier puede formatear el código sin ninguna configuración, pero para que coincida con la guía de estilo de AirBnB, debe agregar algunas configuraciones. </font><font style="vertical-align: inherit;">Cree el archivo .prettierrc.js en la raíz de la aplicación:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-built_in">module</span>.exports = {
  <span class="hljs-attr">trailingComma</span>: <span class="hljs-string">"all"</span>,
  <span class="hljs-attr">tabWidth</span>: <span class="hljs-number">2</span>,
  <span class="hljs-attr">semi</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">singleQuote</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">bracketSpacing</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">printWidth</span>: <span class="hljs-number">100</span><font></font>
};<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ESLint y Prettier usarán esta configuración si la usa para formatear archivos en VS Code o con el comando:</font></font><br>
<br>
<pre><code class="bash hljs">prettier <span class="hljs-string">"--write ."</span></code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configurar código VS</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
VS Code puede resaltar y corregir los errores encontrados de ESLint al guardar errores. </font><font style="vertical-align: inherit;">Para hacer esto, descargue el </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">complemento ESLint</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para VS Code y cree un archivo dentro del proyecto con la configuración para el espacio de trabajo .vscode / settings.json:</font></font><br>
<br>
<pre><code class="json hljs">  <span class="hljs-string">"eslint.validate"</span>: [ <span class="hljs-string">"javascript"</span>, <span class="hljs-string">"typescript"</span>, <span class="hljs-string">"html"</span>],<font></font>
<font></font>
  <span class="hljs-string">"eslint.options"</span>: {
    <span class="hljs-attr">"extensions"</span>: [<span class="hljs-string">".js"</span>, <span class="hljs-string">".ts"</span>, <span class="hljs-string">"html"</span>]<font></font>
  },<font></font>
<font></font>
  <span class="hljs-string">"editor.codeActionsOnSave"</span>: {
    <span class="hljs-attr">"source.fixAll.eslint"</span>: <span class="hljs-literal">true</span>,<font></font>
  },<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aquí configuramos ESLint para enfatizar y corregir errores al guardar archivos con las extensiones .js, .ts y .html. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y para formatear un documento utilizando las combinaciones de teclas "shift + opción + F" o "shift + alt + F", descargue el </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">complemento Prettier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para VS Code y configúrelo como el formateador predeterminado.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configurar ganchos git</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los ganchos de Git son scripts que Git invoca en ciertos eventos: confirmar, enviar, recibir. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Con la ayuda de ellos, podemos comenzar a alinear el código al crear una confirmación para que se introduzcan menos errores en el grupo de solicitudes. </font><font style="vertical-align: inherit;">Para el trabajo más cómodo con ganchos de Git, instalar </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Husky</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , y para comprobar solamente el código que se añade a la confirmación (esto es útil en grandes proyectos en los que linting lleva mucho tiempo) </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pelusa-etapas</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="bash hljs">npm i husky lint-staged --save-dev
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agregue la configuración de estos complementos a package.json:</font></font><br>
<br>
<pre><code class="json hljs"><span class="hljs-string">"scripts"</span>: {<font></font>
  ...<font></font>
},<font></font>
<span class="hljs-string">"husky"</span>: {
  <span class="hljs-attr">"hooks"</span>: {
    <span class="hljs-attr">"pre-commit"</span>: <span class="hljs-string">"lint-staged --relative"</span><font></font>
  }<font></font>
},<font></font>
<span class="hljs-string">"lint-staged"</span>: {
  <span class="hljs-attr">"*.{js,ts}"</span>: [
     <span class="hljs-string">"eslint --fix"</span><font></font>
  ]<font></font>
},<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
lint-staged pasa una matriz de archivos modificados al comando llamado. </font><font style="vertical-align: inherit;">El comando </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ng lint</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> no sabe cómo aceptar una matriz de archivos, y para usarlo, debe escribir un controlador de script adicional. </font><font style="vertical-align: inherit;">O simplemente puede llamar a ESLint, como en este ejemplo. </font><font style="vertical-align: inherit;">Dicha solución se puede utilizar para los compromisos previos, y puede </font><font style="vertical-align: inherit;">ejecutar </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ng lint</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">alinear</font></a><font style="vertical-align: inherit;"> todo el proyecto, por ejemplo, en la canalización de CI.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">recomendaciones</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En futuras versiones de Angular, ESLint con reglas básicas estará listo para usar. Ahora el proceso de configuración de ESLint requiere algunos pasos adicionales, ESLint no tiene equivalentes para algunas reglas de TSLint y Angular ESLint todavía está en versión alfa. Por lo tanto, cambiar a ESLint ahora o no depende de usted. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sin embargo, el código de guía, las reglas adicionales, Prettier, Husky y pelusa tendrán que configurarlo usted mismo. Espero que este artículo te haya ayudado a descubrir cómo funcionan todas estas cosas juntas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La configuración de linters puede parecer una tarea trivial, pero incluye varios problemas organizativos importantes: elegir guías de estilo, sincronizar diferentes soluciones entre sí.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero el tiempo dedicado a configurar el linter en el futuro le ahorrará significativamente tiempo para discutir el estilo y el formato del código en el proceso de revisión del código, reducirá la cantidad de errores que se incluyen en el grupo de solicitudes y garantizará la coherencia de la base del código. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un ejemplo de implementación se puede encontrar en </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Github</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si encuentra un error en la configuración o tiene complementos, ¡escriba!</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Referencias</font></font></h2><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Repositorio monular ESLint angular</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TypeScript ESLint Monorepository</font></font></a></li>
</ul></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es501820/index.html">Integración de Netflow y soluciones de monitoreo SIEM</a></li>
<li><a href="../es501822/index.html">Ingeniero de tercera generación</a></li>
<li><a href="../es501824/index.html">Preparándose para un hackathon en casa</a></li>
<li><a href="../es501826/index.html">Sobre fundadores ambiciosos o cómo intenté recaudar inversiones para una startup</a></li>
<li><a href="../es501828/index.html">Unreal Engine 5 establece el listón para el realismo de los juegos</a></li>
<li><a href="../es501834/index.html">Descripción general de los escáneres 3D Creaform Metrascan</a></li>
<li><a href="../es501840/index.html">HTTP sobre UDP: use el protocolo QUIC con beneficio</a></li>
<li><a href="../es501846/index.html">Cómo elegir un sistema de video vigilancia</a></li>
<li><a href="../es501848/index.html">Les explico la reserva en el centro de datos sobre cerveza</a></li>
<li><a href="../es501850/index.html">Desmontamos el algoritmo EM en pequeños ladrillos</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>