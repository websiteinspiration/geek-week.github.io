<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸƒ ğŸ—„ï¸ ğŸš– Cloudflare memilih prosesor AMD untuk server tepi generasi kesepuluh ğŸ‘‰ğŸ½ ğŸ”¨ ğŸ‘ƒ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Lebih dari satu miliar alamat IP unik melewati Jaringan Cloudflare setiap hari; Ini melayani lebih dari 11 juta permintaan HTTP per detik; terletak pa...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Cloudflare memilih prosesor AMD untuk server tepi generasi kesepuluh</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/493108/"><img src="https://habrastorage.org/getpro/habr/post_images/536/952/a76/536952a764f14e82b44b8765e9c63737.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lebih dari satu miliar alamat IP unik melewati Jaringan Cloudflare setiap hari; Ini melayani lebih dari 11 juta permintaan HTTP per detik; terletak pada jarak tidak lebih dari 100 ms dari 95% populasi Internet. Jaringan kami menjangkau 200 kota di lebih dari 90 negara, dan tim teknik kami telah membangun infrastruktur yang sangat cepat dan andal. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami sangat bangga dengan pekerjaan kami dan berkomitmen untuk membantu menjadikan internet lebih baik dan lebih aman. Insinyur Cloudflare, yang pekerjaannya terkait dengan perangkat keras, berpengalaman dalam server dan komponennya untuk memahami dan memilih peralatan terbaik untuk memaksimalkan efisiensinya.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tumpukan perangkat lunak kami menangani komputasi beban tinggi dan sangat bergantung pada kecepatan CPU, itulah sebabnya teknisi kami harus terus-menerus mengoptimalkan efisiensi dan keandalan Cloudflare di semua tingkat tumpukan. </font><font style="vertical-align: inherit;">Di sisi server, cara termudah adalah meningkatkan daya komputasi dengan menambahkan core CPU. </font><font style="vertical-align: inherit;">Semakin banyak inti yang Anda muat di server, semakin banyak yang dapat memproses data. </font><font style="vertical-align: inherit;">Ini penting bagi kami, karena keragaman produk dan pelanggan kami tumbuh dari waktu ke waktu, dan pertumbuhan permintaan membutuhkan server untuk meningkatkan produktivitas. </font><font style="vertical-align: inherit;">Untuk meningkatkan produktivitasnya, kami perlu meningkatkan kepadatan nuklei - dan inilah tepatnya yang telah kami capai. </font><font style="vertical-align: inherit;">Di bawah ini kami memberikan detail data prosesor untuk server yang telah kami sebarkan sejak 2015, termasuk jumlah core:</font></font><br>
<a name="habracut"></a><br>
<div class="scrollable-table"><table>
<tbody><tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">---</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kej 6</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gen 7</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gen 8</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kej 9</font></font></th>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Awal pekerjaan</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2015</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2016</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2017</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2018</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CPU</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Intel Xeon E5-2630 v3</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Intel Xeon E5-2630 v4</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Intel Xeon Silver 4116</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Intel Xeon Platinum 6162</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Core fisik</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 x 8</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 x 10</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 x 12</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 x 24</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TDP</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 x 85W</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 x 85W</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 x 85W</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 x 150W</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TDP per inti</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.65W</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8.50W</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.08W</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.25W</font></font></td>
</tr>
</tbody></table></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pada tahun 2018, kami membuat lompatan besar dalam jumlah total core per server dengan generasi ke-9. </font><font style="vertical-align: inherit;">Dampak lingkungan berkurang sebesar 33% dibandingkan dengan generasi ke-8, yang memberi kami kesempatan untuk meningkatkan volume dan daya komputasi per rak. </font><font style="vertical-align: inherit;">Persyaratan desain </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Thermal Design Power</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (TDP) disebutkan untuk menekankan bahwa efisiensi energi kami juga telah berkembang seiring waktu. </font><font style="vertical-align: inherit;">Indikator ini penting bagi kami: pertama, kami ingin memancarkan lebih sedikit karbon ke atmosfer; </font><font style="vertical-align: inherit;">kedua, kami ingin memanfaatkan energi pusat data dengan sebaik-baiknya. </font><font style="vertical-align: inherit;">Tetapi kita tahu apa yang harus kita perjuangkan.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Metrik penentu utama kami adalah jumlah permintaan per watt. Kita dapat meningkatkan jumlah permintaan per detik dengan menambahkan inti, tetapi kita harus tetap dalam anggaran energi kita. Kami dibatasi oleh infrastruktur daya pusat data, yang, bersama dengan modul distribusi energi pilihan kami, memberi kami batas atas tertentu untuk setiap rak server. Menambahkan server ke rak meningkatkan konsumsi daya. Biaya pengoperasian akan meningkat secara dramatis jika kita melampaui batas energi rak dan kita harus menambahkan rak baru. Kita perlu meningkatkan daya komputasi, tetap dalam kisaran energi yang sama, yang akan meningkatkan jumlah permintaan per watt - metrik utama kami.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seperti yang sudah Anda duga, kami mempelajari konsumsi energi dengan hati-hati pada tahap desain. </font><font style="vertical-align: inherit;">Tabel di atas menunjukkan bahwa kita tidak perlu membuang waktu untuk menggunakan lebih banyak CPU yang haus energi, jika TDP per inti lebih tinggi dari generasi saat ini - ini akan berdampak negatif pada metrik kami, jumlah permintaan per watt. </font><font style="vertical-align: inherit;">Kami dengan cermat memeriksa sistem yang siap dioperasikan untuk Generasi X kami di pasar dan membuat keputusan. </font><font style="vertical-align: inherit;">Kami bergerak dari sirkuit kami dengan 48 Intel Xeon Platinum 6162 core dan dua soket ke 48-core AMD EPYC 7642 dengan satu soket.</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/d3c/162/8f5/d3c1628f5dfb45681f0fb25abce76b3e.jpg"><br>
<br>
<div class="scrollable-table"><table>
<tbody><tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">---</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Intel</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AMD</font></font></th>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CPU</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Xeon Platinum 6162</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">EPYC 7642</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arsitektur Mikro</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Skylake" </font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> "Zen 2"</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nama kode</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">â€œSkylake SPâ€</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Roma" </font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Proses teknologi</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">14nm</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7nm</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Core</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 x 24</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">48</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Frekuensi</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1,9 GHz</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2,4 GHz</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L3 cache / socket</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24 x 1,375MiB</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">16 x 16MiB</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Memori / soket</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6 saluran, hingga DDR4-2400</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8 saluran, hingga DDR4-3200</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TDP</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 x 150W</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">225W</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PCIe / soket</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">48 jalur</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">128 jalur</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ADALAH</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x86-64</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x86-64</font></font></td>
</tr>
</tbody></table></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dari spesifikasinya jelas bahwa chip dari AMD akan memungkinkan kami untuk meninggalkan jumlah core yang sama, menurunkan TDP. </font><font style="vertical-align: inherit;">Pada generasi ke-9, TDP per inti adalah 6,25 watt, dan pada generasi X akan menjadi 4,69 watt. </font><font style="vertical-align: inherit;">Penurunan 25%. </font><font style="vertical-align: inherit;">Karena peningkatan frekuensi, dan, mungkin, rangkaian yang lebih sederhana dengan satu soket, kita dapat mengasumsikan bahwa chip AMD akan terbukti lebih baik dalam bisnis. </font><font style="vertical-align: inherit;">Sementara kami sedang melakukan berbagai tes dan simulasi untuk memahami seberapa baik AMD akan melakukan.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sementara itu, kami mencatat bahwa TDP adalah metrik yang disederhanakan dari spesifikasi pabrikan, yang kami gunakan pada tahap awal desain server dan pemilihan CPU. </font><font style="vertical-align: inherit;">Pencarian Google cepat menunjukkan bahwa AMD dan Intel memiliki pendekatan yang berbeda untuk definisi TDP, itulah sebabnya spesifikasi ini tidak dapat diandalkan. </font><font style="vertical-align: inherit;">Konsumsi daya CPU yang sebenarnya, dan, yang lebih penting, konsumsi daya server, adalah apa yang benar-benar kita gunakan ketika membuat keputusan akhir.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kesiapan ekosistem</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pada awal perjalanan kami untuk memilih prosesor berikutnya, kami mempelajari berbagai macam CPU dari berbagai produsen yang cocok untuk tumpukan dan layanan perangkat lunak kami (ditulis dalam C, LuaJIT dan Go). Kami telah menjelaskan secara rinci seperangkat alat untuk mengukur kecepatan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dalam sebuah artikel di blog kami</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Dalam hal ini, kami menggunakan set yang sama - ini memungkinkan kami untuk mengevaluasi efektivitas CPU dalam waktu yang wajar, setelah itu teknisi kami dapat mulai menyesuaikan program kami ke prosesor tertentu. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami menguji berbagai prosesor dengan beragam inti, soket, dan frekuensi. Karena artikel ini menjelaskan mengapa kami memilih AMD EPYC 7642, semua grafik di blog ini fokus pada kinerja prosesor AMD dibandingkan dengan Intel Xeon Platinum 6162 dari</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">generasi ke-9 kami</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hasilnya sesuai dengan pengukuran operasi satu server dengan masing-masing varian prosesor - yaitu, dengan dua prosesor 24-core dari Intel, atau dengan satu prosesor 48-inti dari AMD (server untuk Intel dengan dua soket dan server untuk AMD EPYC dengan satu). </font><font style="vertical-align: inherit;">Di BIOS, kami mengatur parameter yang sesuai dengan server yang berfungsi. </font><font style="vertical-align: inherit;">Ini adalah 3,03 GHz untuk AMD dan 2,5 GHz untuk Intel. </font><font style="vertical-align: inherit;">Menyederhanakan sangat banyak, kami berharap bahwa dengan jumlah core yang sama AMD akan menunjukkan hasil 21% lebih baik dari Intel.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kriptografi</font></font></h2><br>
<img src="https://habrastorage.org/getpro/habr/post_images/eb4/843/287/eb484328713741f6688d81c15a9c5920.png"><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/598/82b/416/59882b416feabd9eea86ea9d99d1e1df.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ini terlihat menjanjikan untuk AMD. </font><font style="vertical-align: inherit;">Ini bekerja 18% lebih baik pada kriptografi kunci publik. </font><font style="vertical-align: inherit;">Dengan kunci simetris, ia kehilangan untuk opsi enkripsi AES-128-GCM, tetapi secara umum itu menunjukkan dirinya sebanding.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kompresi</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di server tepi, kami memampatkan banyak data untuk menghemat bandwidth dan meningkatkan kecepatan pengiriman konten. </font><font style="vertical-align: inherit;">Kami melewati data melalui pustaka zlib dan brotli C. </font><font style="vertical-align: inherit;">Semua tes berlangsung di file HTML blog.cloudflare.com dalam memori. </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/fdc/bf7/ae1/fdcbf7ae1109d02a45b2ca40fe353376.png"><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/ccc/427/983/ccc427983ceb85dbf63bab614850692f.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AMD memenangkan rata-rata 29% saat menggunakan gzip. </font><font style="vertical-align: inherit;">Dalam kasus brotli, hasilnya bahkan lebih baik pada tes dengan kualitas 7, yang kami gunakan untuk kompresi dinamis. </font><font style="vertical-align: inherit;">Penurunan tajam terjadi pada tes brotli-9 - kami mengaitkan ini dengan fakta bahwa Brotli mengkonsumsi banyak memori dan melimpah cache. </font><font style="vertical-align: inherit;">Namun, AMD menang dengan selisih yang lebar. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Banyak layanan kami ditulis dalam Go. </font><font style="vertical-align: inherit;">Dalam grafik berikut, kami memeriksa kembali tingkat kriptografi dan kompresi on Go dengan RegExp pada baris 32 KB menggunakan pustaka string.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pergi kriptografi</font></font></h3><br>
<img src="https://habrastorage.org/getpro/habr/post_images/78a/ab0/495/78aab0495309cefee6f30bac835ee961.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kompresi pergi</font></font></h3><br>
<img src="https://habrastorage.org/getpro/habr/post_images/f99/2cb/95d/f992cb95d4913a2d19808d4bd15b5b54.png"><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/850/e7c/f55/850e7cf5586f693dd14d62f70510f681.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pergi regexp</font></font></h3><br>
<img src="https://habrastorage.org/getpro/habr/post_images/b58/798/6cb/b587986cbab94ca7087364a949f09aa4.png"><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/444/e76/f72/444e76f72c1ec2e93c4cae0c5bd386f2.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pergi string</font></font></h3><br>
<img src="https://habrastorage.org/getpro/habr/post_images/3e9/984/19a/3e998419adb450f598e0f3d82de01aa1.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AMD menunjukkan hasil terbaik dalam semua tes dengan Go kecuali ECDSA P256 Sign, di mana ia berada 38% di belakang - yang aneh, dengan mempertimbangkan bahwa itu menunjukkan hasil 24% lebih baik di C. </font><font style="vertical-align: inherit;">Layak untuk mencari tahu apa yang terjadi di sana. </font><font style="vertical-align: inherit;">Namun secara umum, AMD tidak menang banyak, tetapi masih menunjukkan hasil terbaik.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Luajit</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami sering menggunakan LuaJIT di tumpukan. </font><font style="vertical-align: inherit;">Ini adalah lem yang menahan semua bagian Cloudflare. </font><font style="vertical-align: inherit;">Dan kami senang AMD menang di sini. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Secara umum, tes menunjukkan bahwa EPYC 7642 berkinerja lebih baik daripada dua Xeon Platinum 6162. AMD kalah pada sepasang tes - misalnya, AES-128-GCM dan Go OpenSSL ECDSA-P256 Sign - namun, ia menang pada semua yang lain, rata-rata dengan 25% .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Simulasi beban kerja</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setelah pengujian cepat kami, kami menjalankan server melalui serangkaian simulasi lain di mana beban sintetis diterapkan ke tumpukan tepi perangkat lunak. Di sini kami mensimulasikan beban kerja skrip dengan berbagai jenis kueri yang dapat ditemukan dalam karya nyata. Permintaan bervariasi dalam hal volume data, protokol HTTP atau HTTPS, WAF, Sumber pekerja, dan lainnya dari berbagai variabel. Di bawah ini adalah perbandingan throughput dari dua CPU untuk jenis permintaan yang paling sering kita temukan.</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/594/dbb/4cf/594dbb4cf570a1c22ff666d592884ef7.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hasil pada diagram diukur dengan indikator dasar mesin generasi ke-9 dengan prosesor Intel, dinormalisasi ke nilai 1,0 sepanjang sumbu x. </font><font style="vertical-align: inherit;">Misalnya, dengan mengambil permintaan sederhana sebesar 10 KiB melalui HTTPS, kita dapat melihat bahwa AMD 1,5 kali lebih baik dari Intel dalam hal jumlah permintaan per detik. </font><font style="vertical-align: inherit;">Rata-rata, AMD melakukan 34% lebih baik untuk tes yang diberikan daripada Intel. </font><font style="vertical-align: inherit;">Menimbang bahwa TDP untuk AMD EPYC 7642 hanya 225 W, dan untuk dua prosesor Intel - 300 W, ternyata dalam hal "permintaan per watt" AMD menunjukkan hasil 2 kali lebih baik daripada Intel!</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pada titik ini, kami jelas condong ke arah opsi soket tunggal untuk AMD EPYC 7642 sebagai CPU masa depan kami untuk Generasi X. Kami sangat tertarik untuk mengetahui bagaimana server AMD EPYC berperilaku dalam pekerjaan nyata, dan kami segera mengirim beberapa server ke beberapa dari pusat data.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kerja nyata</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hal pertama, tentu saja, adalah mempersiapkan server untuk bekerja dalam kondisi nyata. </font><font style="vertical-align: inherit;">Semua alat berat di armada kami bekerja dengan proses dan layanan yang sama, yang menjadikannya peluang bagus untuk membandingkan kinerja dengan benar. </font><font style="vertical-align: inherit;">Seperti di sebagian besar pusat data, kami memiliki beberapa generasi server yang digunakan, dan kami mengumpulkan server kami dalam kelompok sehingga setiap kelas berisi server dengan generasi yang kira-kira sama. </font><font style="vertical-align: inherit;">Dalam beberapa kasus, ini dapat mengakibatkan kurva pemanfaatan bervariasi antara cluster. </font><font style="vertical-align: inherit;">Tapi tidak dengan kita. </font><font style="vertical-align: inherit;">Teknisi kami telah mengoptimalkan pemanfaatan CPU untuk semua generasi sehingga terlepas dari apakah CPU memiliki 8 core pada mesin tertentu atau 24, penggunaan CPU biasanya tidak berbeda dari yang lain.</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/9b9/ea2/a9b/9b9ea2a9b8b70ad4e6e8f3b4e72200a3.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Grafik mengilustrasikan komentar kami tentang kesamaan pemanfaatan - tidak ada perbedaan yang signifikan antara penggunaan CPU AMD di server Gen X dan penggunaan prosesor Intel di server Gen 9. Ini berarti bahwa server pengujian dan server inti dimuat secara sama. Baik. Inilah yang kami capai dalam pekerjaan server kami, dan kami membutuhkan ini untuk perbandingan yang jujur. Dua grafik di bawah ini menunjukkan jumlah permintaan yang diproses oleh satu inti CPU dan semua inti di tingkat server. </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/075/8a6/91c/0758a691c0287281bd4c70bc1625d631.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Permintaan ke </font></font></i><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/0a2/c5d/206/0a2c5d206c83c98cc06b910118a03a17.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">server Permintaan ke server</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dapat dilihat bahwa rata-rata AMD memproses 23% lebih banyak permintaan. Tidak buruk sama sekali! Kami sering menulis di blog kami tentang cara untuk meningkatkan kinerja Gen 9. Dan di sini kami memiliki jumlah core yang sama, tetapi AMD melakukan lebih banyak pekerjaan dengan lebih sedikit energi. Segera dari spesifikasi untuk jumlah core dan TDP dapat dilihat bahwa AMD memberikan kecepatan lebih dengan efisiensi energi yang lebih besar. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tetapi, seperti yang telah kami sebutkan, TDP bukan spesifikasi standar, dan itu tidak sama untuk semua produsen, jadi mari kita lihat penggunaan energi yang sebenarnya. Dengan mengukur konsumsi energi server secara paralel dengan jumlah permintaan per detik, kami mendapatkan grafik berikut:</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/eac/f1a/a0f/eacf1aa0fcbee9f35c376bf52a7f37d1.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dengan jumlah permintaan per detik yang dihabiskan per watt, server Gen X pada prosesor AMD 28% lebih efisien. Orang bisa berharap lebih, mengingat bahwa TDP AMD 25% lebih rendah, namun, harus diingat bahwa TDP adalah karakteristik yang ambigu. Kami melihat bahwa konsumsi energi aktual AMD hampir bersamaan dengan TDP yang ditunjukkan pada frekuensi jauh di atas basis; Intel tidak memilikinya. Ini adalah alasan lain mengapa TDP bukan perkiraan konsumsi energi yang dapat diandalkan. CPU Intel di server Gen 9 kami terintegrasi ke dalam sistem multicode, sementara CPU AMD bekerja di server faktor bentuk 1U standar. Ini tidak mendukung AMD, karena server multinode harus memberikan kepadatan yang lebih tinggi dengan konsumsi daya yang lebih sedikit per node, namun AMD masih mengungguli Intel dalam hal konsumsi energi per node.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam sebagian besar perbandingan spesifikasi, simulasi pengujian dan pekerjaan nyata, konfigurasi 1P AMD EPYC 7642 terbukti jauh lebih baik daripada 2P Intel Xeon 6162. Dalam beberapa kondisi, AMD dapat bekerja 36% lebih baik, dan kami percaya bahwa dengan mengoptimalkan perangkat keras dan program, kami kita dapat mencapai peningkatan seperti itu secara berkelanjutan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ternyata AMD menang. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Grafik tambahan menunjukkan penundaan rata-rata dan keterlambatan p99 dalam operasi NGINX selama 24 jam. </font><font style="vertical-align: inherit;">Rata-rata, proses AMD berjalan 25% lebih cepat. </font><font style="vertical-align: inherit;">Pada p99, ini berjalan 20-50% lebih cepat tergantung pada waktu hari.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kesimpulan</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Teknisi perangkat keras dan kinerja Cloudflare melakukan sejumlah besar pengujian dan penelitian untuk memilih konfigurasi server terbaik untuk pelanggan kami. Kami senang bekerja di sini karena kami dapat menyelesaikan tugas-tugas muluk seperti itu, dan juga membantu Anda memecahkan masalah Anda dengan layanan seperti serverless edge-computing dan berbagai solusi untuk masalah keamanan, khususnya, Magic Transit, Argo Tunnel, dan perlindungan DDoS . Semua server di jaringan Cloudflare dikonfigurasikan untuk operasi yang andal, dan kami selalu berusaha untuk membuat setiap server generasi berikutnya lebih baik dari yang sebelumnya. Kami percaya bahwa AMD EPYC 7642 adalah jawaban untuk pertanyaan tentang memilih prosesor untuk Gen X.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Menggunakan layanan Cloudflare Workers, pengembang menyebarkan aplikasi mereka di jaringan kami, berkembang di seluruh dunia. Kami bangga menawarkan pelanggan kami kesempatan untuk berkonsentrasi pada penulisan kode sementara kami bekerja pada keamanan dan keandalan di cloud. Dan hari ini kami bahkan lebih senang mengumumkan bahwa pekerjaan mereka akan digunakan pada server generasi Gen X kami yang menjalankan prosesor AMD EPYC generasi kedua. </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/7de/304/54d/7de30454d5b87e7a32fceda1e3f7ca49.jpg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Prosesor EPYC 7642, dengan nama sandi "Roma" [Roma]</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Menggunakan AMD EPYC 7642, kami dapat meningkatkan kecepatan kami dan memfasilitasi perluasan jaringan ke kota-kota baru. Roma tidak dibangun dalam satu hari, tetapi segera akan lebih dekat dengan banyak dari Anda.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam beberapa tahun terakhir, kami telah bereksperimen dengan banyak chip x86 dari Intel dan AMD, serta prosesor dari ARM. </font><font style="vertical-align: inherit;">Kami berharap bahwa di masa depan, produsen CPU ini akan bekerja bersama kami sehingga kami dapat bersama-sama membangun Internet yang lebih baik.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id493096/index.html">Tambahkan tema gelap di iOS</a></li>
<li><a href="../id493098/index.html">Menyebarkan ASA VPN Load-Balancing Cluster</a></li>
<li><a href="../id493100/index.html">Cara menemukan cara mudah membantu startup mencapai pertumbuhan yang agresif</a></li>
<li><a href="../id493102/index.html">Tren Otomatisasi Global: Pengembangan RPA</a></li>
<li><a href="../id493106/index.html">Berapa banyak yang baru di dalam Devil's Dozen?</a></li>
<li><a href="../id493110/index.html">Bagaimana mendelegasikan pekerjaan jarak jauh - panduan untuk memimpin tim dan banyak lagi</a></li>
<li><a href="../id493112/index.html">Bagaimana memulai bisnis baru dalam 6 bulan, bukannya 3 tahun</a></li>
<li><a href="../id493114/index.html">Bagaimana Insinyur Data Menonton Data</a></li>
<li><a href="../id493116/index.html">"Lebih banyak interaktivitas!" atau Bagaimana TeamLead Conf 2020</a></li>
<li><a href="../id493118/index.html">Ikhtisar Ekstensi Penandaan Memori (Armv8.5-A)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>