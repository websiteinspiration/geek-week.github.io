<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🗳️ 👩‍👧 🤒 Navigieren zwischen Ansichten mit @EnvironmentObject in SwiftUI 💊 🔯 🧓🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Die Übersetzung des Artikels wurde am Vorabend des Starts des Fortgeschrittenenkurses "iOS Developer" vorbereitet .
 
 
 
 Hallo und willkommen zu uns...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Navigieren zwischen Ansichten mit @EnvironmentObject in SwiftUI</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/501378/"><b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Übersetzung des Artikels wurde am Vorabend des Starts des Fortgeschrittenenkurses </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"iOS Developer"</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> vorbereitet </font><font style="vertical-align: inherit;">.</font></font></i></b><br>
<br>
<img src="https://habrastorage.org/webt/dy/nh/af/dynhaf1v_qvyw2xcskvtvn3aesa.png"><br>
<hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hallo und willkommen zu unserem Tutorial! </font><font style="vertical-align: inherit;">In dieser Serie wird erläutert, wie Sie in SwiftUI zwischen Ansichten navigieren (ohne eine Navigationsansicht zu verwenden!). </font><font style="vertical-align: inherit;">Diese Idee mag zwar trivial erscheinen, aber wenn wir sie etwas tiefer verstehen, können wir viel über die in SwiftUI verwendeten Datenflusskonzepte lernen. </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Im vorherigen Teil haben</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> wir gelernt, wie man dies mit implementiert </font></font><code>@ObservableObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">In diesem Teil werden wir uns ansehen, wie Sie dasselbe tun, aber mit @EnvironmentObject effizienter. </font><font style="vertical-align: inherit;">Wir werden auch eine kleine Übergangsanimation hinzufügen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Folgendes werden wir erreichen:</font></font><br>
<br>
<div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ihr Browser unterstützt kein HTML5-Video.</font></font><source src="https://blckbirds.com/wp-content/uploads/2020/02/NavigatinP2Preview.mp4" type="video/mp4"></video></div></div></div><a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Was wir haben</font></font></h3><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir haben gerade herausgefunden,</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> wie Sie mit ObservableObject zwischen verschiedenen Ansichten navigieren können. </font><font style="vertical-align: inherit;">Kurz gesagt, wir haben einen ViewRouter erstellt und ihn mit der Mutteransicht und unserer Inhaltsansicht verknüpft. </font><font style="vertical-align: inherit;">Als Nächstes bearbeiten wir einfach die CurrentPage ViewRouter-Eigenschaft, indem wir auf die Schaltflächen der Inhaltsansicht klicken. </font><font style="vertical-align: inherit;">Danach wird MotherView aktualisiert, um die entsprechende Inhaltsansicht anzuzeigen! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gibt jedoch einen zweiten, effizienteren Weg, um diese Funktionalität zu erreichen: Verwenden </font></font><code>@EnvironmentObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">! </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tipp: Hier können Sie die neuesten Entwicklungen herunterladen (dies ist der Ordner „NavigateInSwiftUIComplete“)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Warum </font></font><code>ObservableObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ist die </font><font style="vertical-align: inherit;">Verwendung </font><font style="vertical-align: inherit;">nicht die beste Lösung</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie fragen sich wahrscheinlich: Warum sollten wir dies anders implementieren, wenn wir bereits eine funktionierende Lösung haben? Wenn Sie sich die Logik der Hierarchie unserer Anwendung ansehen, wird Ihnen dies klar. Unsere MotherView ist die Stammansicht, die die ViewRouter-Instanz initialisiert. In MotherView initialisieren wir auch ContentViewA und ContentViewB und übergeben ihnen die ViewRouter-Instanz als BindableObject.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie Sie sehen können, müssen wir einer strengen Hierarchie folgen, die ein initialisiertes ObservableObject stromabwärts an alle Unteransichten übergibt. Das ist nicht so wichtig, aber stellen Sie sich eine komplexere Anwendung mit vielen Ansichten vor. Wir müssen immer die Übertragung der initialisierten Observable-Stammansicht auf alle Unteransichten und alle Unteransichten von Unteransichten usw. verfolgen, was letztendlich eine ziemlich mühsame Aufgabe sein kann. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ij/ps/on/ijpson_0gvwhatcpzyosh2eacaq.jpeg"><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zusammenfassend </font></font><code>ObservableObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lässt sich sagen, dass </font><font style="vertical-align: inherit;">die Verwendung von clean </font><font style="vertical-align: inherit;">bei komplexeren Anwendungshierarchien problematisch sein kann.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Stattdessen können wir den ViewRouter beim Start der Anwendung initialisieren, sodass alle Ansichten direkt mit dieser Instanz verbunden werden können, oder sie unabhängig von der Hierarchie der Anwendung überwachen. </font><font style="vertical-align: inherit;">In diesem Fall sieht die ViewRouter-Instanz wie eine Cloud aus, die über den Code unserer Anwendung fliegt, auf die alle Ansichten automatisch zugreifen, ohne sich um die korrekte Initialisierungskette in der Ansichtshierarchie kümmern zu müssen. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das ist nur der Job </font></font><code>EnvironmentObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">!</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Was ist </font></font><code>EnvironmentObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">?</font></font></h3><br>
<code>EnvironmentObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ist ein Datenmodell, das nach der Initialisierung Daten mit allen Darstellungen Ihrer Anwendung austauschen kann. Was besonders gut ist, ist </font></font><code>EnvironmentObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">das </font></font><code>ObservableObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font><font style="vertical-align: inherit;">was </font><font style="vertical-align: inherit;">durch die Bereitstellung geschaffen wird </font><font style="vertical-align: inherit;">, damit wir unsere </font></font><code>ViewRouter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zum Erstellen verwenden können </font></font><code>EnvironmentObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sobald wir unsere </font></font><code>ViewRouter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">als </font><font style="vertical-align: inherit;">deklariert haben </font></font><code>EnvironmentObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, können alle Darstellungen auf die gleiche Weise wie gewöhnliche Darstellungen daran angehängt werden </font></font><code>ObservableObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, ohne dass eine Reihe von Initialisierungen in der Anwendungshierarchie erforderlich ist! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie bereits erwähnt, </font></font><code>EnvironmentObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sollte es bereits beim ersten Zugriff initialisiert werden. Da unsere </font></font><code>MotherView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">als Stammansicht die Eigenschaft betrachtet </font></font><code>CurrentPage</code> <code>ViewRouter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, müssen wir sie </font></font><code>EnvironmentObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">beim Start der Anwendung </font><font style="vertical-align: inherit;">initialisieren </font><font style="vertical-align: inherit;">. Dann können wir currentPage automatisch ändern</font></font><code>EnvironmentObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">von </font></font><code>ContentView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, was dann ein </font></font><code>MotherView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">erneutes Rendern erfordert.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ew/fr/9l/ewfr9lhz0xqhodfe5obumjykzoe.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Implementierung </font></font><code>ViewRouter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">als</font></font><code>EnvironmentObject</code></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aktualisieren wir also den Code unserer Anwendung! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ändern Sie zunächst den Wrapper der Eigenschaft </font></font><code>viewRouter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">innerhalb </font></font><code>MotherView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">von </font></font><code>@ObservableObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">von </font></font><code>@EnvironmentObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">import</span> SwiftUI<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">MotherView</span> : <span class="hljs-title">View</span> </span>{<font></font>
@<span class="hljs-type">EnvironmentObject</span> <span class="hljs-keyword">var</span> viewRouter: <span class="hljs-type">ViewRouter</span>
<span class="hljs-keyword">var</span> body: some <span class="hljs-type">View</span> {
<span class="hljs-comment">//...</span><font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Immobilie </font></font><code>viewRouter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sucht jetzt </font></font><code>ViewRouter-EnvironmentObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Daher müssen wir unserer Struktur </font></font><code>MotherView_Previews</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">die entsprechende Instanz </font><font style="vertical-align: inherit;">bereitstellen </font><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="swift hljs">#<span class="hljs-keyword">if</span> <span class="hljs-type">DEBUG</span>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">MotherView_Previews</span> : <span class="hljs-title">PreviewProvider</span> </span>{
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">var</span> previews: some <span class="hljs-type">View</span> {
        <span class="hljs-type">MotherView</span>().environmentObject(<span class="hljs-type">ViewRouter</span>())<font></font>
    }<font></font>
}<font></font>
#endif</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie oben erwähnt - sollte unsere Anwendung beim Starten sofort mit einer Instanz </font></font><code>ViewRouter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in Qualität versehen werden </font></font><code>EnvironmentObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, da sie </font></font><code>MotherView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jetzt als Stammdarstellung bezeichnet wird </font></font><code>EnvironmentObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Aktualisieren Sie daher die Szenenfunktion in der Datei </font></font><code>SceneDelegage.swift</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wie folgt:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">scene</span><span class="hljs-params">(<span class="hljs-number">_</span> scene: UIScene, willConnectTo session: UISceneSession, options connectionOptions: UIScene.ConnectionOptions)</span></span> {
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> windowScene = scene <span class="hljs-keyword">as</span>? <span class="hljs-type">UIWindowScene</span> {
            <span class="hljs-keyword">let</span> window = <span class="hljs-type">UIWindow</span>(windowScene: windowScene)<font></font>
            window.rootViewController = <span class="hljs-type">UIHostingController</span>(rootView: <span class="hljs-type">MotherView</span>().environmentObject(<span class="hljs-type">ViewRouter</span>()))
            <span class="hljs-keyword">self</span>.window = window<font></font>
            window.makeKeyAndVisible()<font></font>
        }<font></font>
    }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gut, jetzt, wenn Sie die Anwendung starten, erstellt SwiftUI eine Instanz </font></font><code>ViewRouter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in Qualität </font></font><code>EnvironmentObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, an die jetzt alle Ansichten unserer Anwendung angehängt werden können. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als nächstes aktualisieren wir unsere </font></font><code>ContentViewA</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Ändern Sie die </font></font><code>viewRouter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eigenschaft in </font></font><code>EnvironmentObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und aktualisieren Sie auch die Struktur </font></font><code>ContentViewA_Previews</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">import</span> SwiftUI<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">ContentViewA</span> : <span class="hljs-title">View</span> </span>{<font></font>
    <font></font>
    @<span class="hljs-type">EnvironmentObject</span> <span class="hljs-keyword">var</span> viewRouter: <span class="hljs-type">ViewRouter</span><font></font>
    <font></font>
    <span class="hljs-keyword">var</span> body: some <span class="hljs-type">View</span> {
       <span class="hljs-comment">//...</span><font></font>
    }<font></font>
}<font></font>
#<span class="hljs-keyword">if</span> <span class="hljs-type">DEBUG</span>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">ContentViewA_Previews</span> : <span class="hljs-title">PreviewProvider</span> </span>{
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">var</span> previews: some <span class="hljs-type">View</span> {
        <span class="hljs-type">ContentViewA</span>().environmentObject(<span class="hljs-type">ViewRouter</span>())<font></font>
    }<font></font>
}<font></font>
#endif<font></font>
</code></pre><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hinweis: Auch hier hat die Struktur </font></font><code>ContentViewsA_Previews</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">eine eigene Instanz </font></font><code>ViewRouter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, ist jedoch </font></font><code>ContentViewA</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">der Instanz zugeordnet, die beim Start der Anwendung erstellt wurde! </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wiederholen wir dies für </font></font><code>ContentViewB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">import</span> SwiftUI<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">ContentViewB</span> : <span class="hljs-title">View</span> </span>{<font></font>
    <font></font>
    @<span class="hljs-type">EnvironmentObject</span> <span class="hljs-keyword">var</span> viewRouter: <span class="hljs-type">ViewRouter</span><font></font>
    <font></font>
    <span class="hljs-keyword">var</span> body: some <span class="hljs-type">View</span> {
        <span class="hljs-comment">//...</span><font></font>
    }<font></font>
}<font></font>
#<span class="hljs-keyword">if</span> <span class="hljs-type">DEBUG</span>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">ContentViewB_Previews</span> : <span class="hljs-title">PreviewProvider</span> </span>{
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">var</span> previews: some <span class="hljs-type">View</span> {
        <span class="hljs-type">ContentViewB</span>().environmentObject(<span class="hljs-type">ViewRouter</span>())<font></font>
    }<font></font>
}<font></font>
#endif</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Da </font></font><code>viewRouter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">unsere </font><font style="vertical-align: inherit;">Eigenschaften </font></font><code>ContentView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jetzt direkt mit der ursprünglichen Instanz </font></font><code>ViewRouter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">als </font><font style="vertical-align: inherit;">verbunden sind / diese beobachten </font></font><code>EnvironmentObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, müssen wir sie in unserer nicht mehr initialisieren </font></font><code>MotherView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Also, aktualisieren wir unsere </font></font><code>MotherView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">MotherView</span> : <span class="hljs-title">View</span> </span>{<font></font>
    <font></font>
    @<span class="hljs-type">EnvironmentObject</span> <span class="hljs-keyword">var</span> viewRouter: <span class="hljs-type">ViewRouter</span><font></font>
    <font></font>
    <span class="hljs-keyword">var</span> body: some <span class="hljs-type">View</span> { 
        <span class="hljs-type">VStack</span> {
            <span class="hljs-keyword">if</span> viewRouter.currentPage == <span class="hljs-string">"page1"</span> {
                <span class="hljs-type">ContentViewA</span>()<font></font>
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> viewRouter.currentPage == <span class="hljs-string">"page2"</span> {
                <span class="hljs-type">ContentViewB</span>()<font></font>
            }<font></font>
        }<font></font>
    }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das ist einfach großartig: Wir müssen nicht mehr </font></font><code>ViewRouter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in unserer </font><font style="vertical-align: inherit;">initialisieren </font></font><code>MotherView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und ihre Instanz an die ContentView weitergeben, was insbesondere bei komplexeren Hierarchien sehr effizient sein kann. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Großartig, lassen Sie uns unsere Anwendung ausführen und sehen, wie sie funktioniert.</font></font><br>
<br>
<div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ihr Browser unterstützt kein HTML5-Video.</font></font><source src="https://blckbirds.com/wp-content/uploads/2020/02/NavigatingP2BeforeAnimation.mp4" type="video/mp4"></video></div></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Großartig, wir können uns immer noch zwischen unseren Ansichten bewegen!</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Übergangsanimationen hinzufügen</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Schauen wir uns als Bonus an, wie Sie beim Übergang von „Seite1“ zu „Seite2“ eine Übergangsanimation hinzufügen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In SwiftUI ist dies recht einfach. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Schauen Sie sich die </font></font><code>willChange</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Methode an, mit der wir die Datei </font></font><code>ViewRouter.swift</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bei der </font></font><code>CurrentPage</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aktualisierung </font><font style="vertical-align: inherit;">aufrufen </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Wie Sie bereits wissen, führt dies dazu, dass eine Bindung </font></font><code>MotherView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ihren Körper erneut anzeigt und letztendlich einen anderen zeigt </font></font><code>ContentView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, was bedeutet, dass Sie zu einem anderen wechseln </font></font><code>ContentView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Wir können Animationen hinzufügen, indem wir die Methode einfach </font></font><code>willChange</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in eine Funktion einschließen </font></font><code>withAnimation</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">var</span> currentPage: <span class="hljs-type">String</span> = <span class="hljs-string">"page1"</span> {
        <span class="hljs-keyword">didSet</span> {<font></font>
            withAnimation() {<font></font>
                willChange.send(<span class="hljs-keyword">self</span>)<font></font>
            }<font></font>
        }<font></font>
    }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt können wir eine Übergangsanimation hinzufügen, wenn wir eine andere anzeigen </font></font><code>Content View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<blockquote><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"WithAnimation (_: _ :) - gibt das Ergebnis der Neuberechnung des Ansichtskörpers mit der bereitgestellten Animation zurück"</font></font></i><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Apple</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir möchten unserer Anwendung beim Navigieren von </font></font><code>ContentViewA</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nach </font><font style="vertical-align: inherit;">einen Popup-Übergang bieten </font></font><code>ContentViewB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Gehen Sie dazu zur Datei </font></font><code>MotherView.swift</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und fügen Sie beim Aufruf den Übergangsmodifikator hinzu </font></font><code>ContentViewB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Sie können einen von mehreren vordefinierten Übergangstypen auswählen oder sogar einen eigenen erstellen (dies ist jedoch ein Thema für einen anderen Artikel). </font><font style="vertical-align: inherit;">Um einen Popup-Übergang hinzuzufügen, wählen wir einen Typ aus </font></font><code>.scale</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">var</span> body: some <span class="hljs-type">View</span> {
        <span class="hljs-type">VStack</span> {
            <span class="hljs-keyword">if</span> viewRouter.currentPage == <span class="hljs-string">"page1"</span> {
                <span class="hljs-type">ContentViewA</span>()<font></font>
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> viewRouter.currentPage == <span class="hljs-string">"page2"</span> {
                <span class="hljs-type">ContentViewB</span>()<font></font>
                    .transition(.scale)<font></font>
            }<font></font>
        }<font></font>
    }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Führen Sie Ihre Anwendung in einem regulären Simulator aus, um zu sehen, wie es funktioniert:</font></font><br>
<br>
<div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ihr Browser unterstützt kein HTML5-Video.</font></font><source src="https://blckbirds.com/wp-content/uploads/2020/02/NavigatinP2Preview.mp4" type="video/mp4"></video></div></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cool, wir haben unserer Anwendung in nur wenigen Codezeilen eine schöne Übergangsanimation hinzugefügt! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie können den gesamten Quellcode </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> herunterladen </font><font style="vertical-align: inherit;">!</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fazit </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das ist alles! </font><font style="vertical-align: inherit;">Wir haben gelernt, warum es besser ist, </font></font><code>EnvironmentObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zwischen Ansichten in SwiftUI zu navigieren und wie man sie implementiert. </font><font style="vertical-align: inherit;">Wir haben auch gelernt, wie man der Navigation Übergangsanimationen hinzufügt. </font><font style="vertical-align: inherit;">Wenn Sie mehr wissen möchten, folgen Sie uns auf </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Instagram</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und abonnieren Sie unseren </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Newsletter</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , um Updates, Tutorials und Tipps zu SwiftUI und vielem mehr nicht zu verpassen!</font></font><br>
<br>
<hr><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kostenlose Lektion: „Beschleunigen von iOS-Apps mit Instrumenten“</font></font></a><br>
<br>
<hr></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de501366/index.html">System Design Primer (Teil 1 mit Microservice-Ergänzungen)</a></li>
<li><a href="../de501368/index.html">Digitale Veranstaltungen in Moskau vom 11. bis 17. Mai</a></li>
<li><a href="../de501370/index.html">Trello - ein effektives Wissensmanagementsystem für ein kleines IT-Team</a></li>
<li><a href="../de501374/index.html">Emulationskommodore 65</a></li>
<li><a href="../de501376/index.html">Agile lehrt uns die wahre Bedeutung von Architektur</a></li>
<li><a href="../de501380/index.html">Data Build Tool oder was zwischen einem Data Warehouse und einem Smoothie gemeinsam ist</a></li>
<li><a href="../de501386/index.html">MNT-Reform - Vollständig offenes Notizbuch für Paranoide</a></li>
<li><a href="../de501388/index.html">Ist Agile für das gesamte Unternehmen möglich?</a></li>
<li><a href="../de501392/index.html">Responsive Schriftart. Anpassen von Text zwischen Layout und Mindestwerten</a></li>
<li><a href="../de501394/index.html">Über die Übersetzung von "Theorie" / "theoretisch" ohne Theorie / Theorie</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>