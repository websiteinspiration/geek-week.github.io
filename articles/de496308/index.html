<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👦🏾 🙋🏾 🖇️ Erstellen Sie nahtlose Geräuschkarten 👃 ⛵️ 🕺🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Das Erstellen eines nahtlosen Bildes in Photoshop ist ganz einfach: Schneiden Sie das Bild zu, greifen Sie nach den zugeschnittenen rechten und untere...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Erstellen Sie nahtlose Geräuschkarten</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/496308/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b72/cbf/259/b72cbf2592b2e142259d2cc3f7b13d6f.jpg" alt="Bild"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Erstellen eines nahtlosen Bildes in Photoshop ist ganz einfach: Schneiden Sie das Bild zu, greifen Sie nach den zugeschnittenen rechten und unteren Teilen und kleben Sie sie dann mit dem Überblendungswerkzeug nach links und oben. Für die ordnungsgemäße Implementierung nahtloser Rauschkarten müssen Sie jedoch sorgfältig überlegen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie ein </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" title="Hugo Elias über Perlin Lärm" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">grundlegendes Verständnis des Perlin-Rauschens haben</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , wissen Sie, dass es aus interpolierten Zufallszahlen besteht. Es wird hauptsächlich in zwei Dimensionen verwendet. Es ist aber auch nützlich in einer Dimension (zum Beispiel beim Bewegen), in drei Dimensionen (zylindrische und sphärische Transformation von 3D-Objekten) und sogar in vier oder fünf Dimensionen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mit vierdimensionalem Rauschen kann ein nahtloses 2D-Bild erstellt werden. Es ist nicht sehr üblich, dass wir in vier Dimensionen denken, daher werden wir jeweils eine Dimension annehmen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">meinen Beispielen habe</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ich </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" title="Simplex-Rauschen auf Wikipedia" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Simplex-Rauschen</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mit </font><font style="vertical-align: inherit;">zwei Oktaven verwendet. </font><font style="vertical-align: inherit;">Simplex-Rauschen ist in großen Dimensionen schneller und sieht aufgrund seiner Dreiecksform besser aus.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich habe eine kleine Funktion geschrieben </font></font><code>drawNoise</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, um eine Leinwand zu erstellen und ein Pixelarray in einer Schleife zu verarbeiten.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eindimensionales nahtloses Rauschen</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In einer Dimension ist Rauschen eine unendliche glatte Linie (meine Implementierung von Rauschen beginnt mit zwei, daher verwende ich eine Konstante als zweiten Parameter). </font><font style="vertical-align: inherit;">Hier sehen wir, dass dies nur interpolierte Zufallszahlen sind.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">// one dimensional line</span>
fNoiseScale = <span class="hljs-number">.02</span>;<font></font>
drawNoise(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">i,x,y</span>)</span>{
    <span class="hljs-keyword">var</span> v = Simplex.noise(
         <span class="hljs-number">123</span>+x*fNoiseScale<font></font>
        ,<span class="hljs-number">137</span> <span class="hljs-comment">// we just need one dimension so this parameter is a constant</span><font></font>
    );<font></font>
    <span class="hljs-keyword">return</span> v*iSize&gt;y?<span class="hljs-number">255</span>:<span class="hljs-number">0</span>;<font></font>
}).img();</code></pre><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fee/37f/7e1/fee37f7e153a8615cbd8fd6930d61fec.jpg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eindimensionales Rauschen</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Sie können dies in der Animation verwenden und den Rauschwert jede Millisekunde neu berechnen. Sie können jedoch auch eine Schleife erstellen und alle Werte im Voraus berechnen. </font><font style="vertical-align: inherit;">Die Werte im obigen Bild werden nicht um die Kanten geschlungen. </font><font style="vertical-align: inherit;">Die Implementierung der Wiederholbarkeit ist jedoch recht einfach, nur eine weitere Dimension und Schleife ... oder ein Kreis dafür.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eindimensionale Schleife</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Für die meisten von Ihnen sieht Perlins Rauschen ungefähr so ​​aus wie auf dem Bild unten.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/02b/129/aad/02b129aadc25be9d0e74688ff1c702ff.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn wir hier einen Kreis zeichnen und die Rauschwerte auf diesem Kreis zählen würden, würden wir eine eindimensionale Schleife erhalten.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/88a/6d9/247/88a6d9247a7dd2a9cbab6cf9ee08463b.jpg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rauschen mit einem Kreis, um eine eindimensionale Schleife zu erstellen. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Code sieht es so aus:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">// one dimensional loop</span>
drawNoise(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">i,x,y</span>)</span>{
    <span class="hljs-keyword">var</span> fNX = x/iSize <span class="hljs-comment">// we let the x-offset define the circle</span>
        ,fRdx = fNX*<span class="hljs-number">2</span>*<span class="hljs-built_in">Math</span>.PI <span class="hljs-comment">// a full circle is two pi radians</span>
        ,a = fRdsSin*<span class="hljs-built_in">Math</span>.sin(fRdx)<font></font>
        ,b = fRdsSin*<span class="hljs-built_in">Math</span>.cos(fRdx)<font></font>
        ,v = Simplex.noise(<font></font>
             <span class="hljs-number">123</span>+a*fNoiseScale<font></font>
            ,<span class="hljs-number">132</span>+b*fNoiseScale<font></font>
        )<font></font>
    ;<font></font>
    <span class="hljs-keyword">return</span> v*iSize&gt;y?<span class="hljs-number">255</span>:<span class="hljs-number">0</span>;<font></font>
}).img().div(<span class="hljs-number">2</span>);</code></pre><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3da/43d/f64/3da43df64f677b0f55cfbcdc38a01c3e.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie haben wahrscheinlich schon verstanden, was wir machen werden. </font><font style="vertical-align: inherit;">Um ein zweidimensionales Bild zu schleifen, benötigen wir eine dreidimensionale (mindestens) Rauschkarte.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zylindrische Karte</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Noise Perlin wurde ursprünglich für die kontinuierliche 3D-Texturierung entwickelt (der Film "Tron"). </font><font style="vertical-align: inherit;">Die Imagemap ist kein Blatt Papier, das um ein Objekt gewickelt ist, sondern wird anhand seiner Position in einem dreidimensionalen Rauschfeld berechnet. </font><font style="vertical-align: inherit;">Daher können wir beim Schneiden des Objekts weiterhin die Karte für die neu erstellte Oberfläche berechnen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bevor wir unser endgültiges Ziel eines nahtlosen Bildes erreichen, erstellen wir zunächst ein Bild, das sich nahtlos nach links und rechts verbindet. </font><font style="vertical-align: inherit;">Dies ähnelt einem zweidimensionalen Kreis für eine eindimensionale Schleife, jedoch mit einer zusätzlichen Dimension: einem Zylinder.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">// three dimensional cylindrical map</span>
drawNoise(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">i,x,y</span>)</span>{
    <span class="hljs-keyword">var</span> fNX = x/iSize<font></font>
        ,fRdx = fNX*<span class="hljs-number">2</span>*<span class="hljs-built_in">Math</span>.PI<font></font>
        ,a = fRdsSin*<span class="hljs-built_in">Math</span>.sin(fRdx)<font></font>
        ,b = fRdsSin*<span class="hljs-built_in">Math</span>.cos(fRdx)<font></font>
        ,v = Simplex.noise(<font></font>
             <span class="hljs-number">123</span>+a*fNoiseScale<font></font>
            ,<span class="hljs-number">132</span>+b*fNoiseScale<font></font>
            ,<span class="hljs-number">312</span>+y*fNoiseScale <span class="hljs-comment">// similar to the one dimensional loop but we add a third dimension defined by the image y-offset</span><font></font>
        )<font></font>
    ;<font></font>
    <span class="hljs-keyword">return</span> v*<span class="hljs-number">255</span>&lt;&lt;<span class="hljs-number">0</span>;<font></font>
}).img().div(<span class="hljs-number">2</span>);</code></pre><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ddc/f0b/55b/ddcf0b55bddba6cbc880300442a8b99e.jpg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zylinderrauschkarte</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sphärisches Kartenbild</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie könnten denken, dass es bequem wäre, eine Kugel zu verwenden, um ein nahtloses Bild zu erstellen, aber Sie irren sich. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich werde einen kleinen Exkurs machen und zeigen, wie die sphärische Bildkarte berechnet wird und wie sie aussieht.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">// three dimensional spherical map</span>
<span class="hljs-built_in">document</span>.body.addChild(<span class="hljs-string">'h2'</span>).innerText = <span class="hljs-string">'three dimensional spherical map'</span>;<font></font>
fNoiseScale = <span class="hljs-number">.1</span>;
<span class="hljs-keyword">var</span> oSpherical = drawNoise(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">i,x,y</span>)</span>{
    <span class="hljs-keyword">var</span>  fNX = (x+<span class="hljs-number">.5</span>)/iSize <span class="hljs-comment">// added half a pixel to get the center of the pixel instead of the top-left</span>
        ,fNY = (y+<span class="hljs-number">.5</span>)/iSize<font></font>
        ,fRdx = fNX*<span class="hljs-number">2</span>*<span class="hljs-built_in">Math</span>.PI<font></font>
        ,fRdy = fNY*<span class="hljs-built_in">Math</span>.PI <span class="hljs-comment">// the vertical offset of a 3D sphere spans only half a circle, so that is one Pi radians</span>
        ,fYSin = <span class="hljs-built_in">Math</span>.sin(fRdy+<span class="hljs-built_in">Math</span>.PI) <span class="hljs-comment">// a 3D sphere can be seen as a bunch of cicles stacked onto each other, the radius of each of these is defined by the vertical position (again one Pi radians)</span>
        ,a = fRdsSin*<span class="hljs-built_in">Math</span>.sin(fRdx)*fYSin<font></font>
        ,b = fRdsSin*<span class="hljs-built_in">Math</span>.cos(fRdx)*fYSin<font></font>
        ,c = fRdsSin*<span class="hljs-built_in">Math</span>.cos(fRdy)<font></font>
        ,v = Simplex.noise(<font></font>
             <span class="hljs-number">123</span>+a*fNoiseScale<font></font>
            ,<span class="hljs-number">132</span>+b*fNoiseScale<font></font>
            ,<span class="hljs-number">312</span>+c*fNoiseScale<font></font>
        )<font></font>
    ;<font></font>
    <span class="hljs-keyword">return</span> v*<span class="hljs-number">255</span>&lt;&lt;<span class="hljs-number">0</span>;<font></font>
}).img();</code></pre><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a8f/351/5ec/a8f3515eccdd052b51d6e76b530d96ba.jpg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sphärische Rauschkarte</font></font></i><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/493/7c2/9e7/4937c29e770cc3bcf0790d9ab03d18a7.jpg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kugel mit Lärm</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kubische Panoramakarte</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die von uns erstellte Kugel kann auch als Panorama verwendet werden, wenn Sie eine Kamera in der Mitte der Kugel platzieren. </font><font style="vertical-align: inherit;">Der beste Weg wäre jedoch, ein kubisches Panorama zu verwenden, da es viel weniger Gesichter hat. </font><font style="vertical-align: inherit;">Die Kugel wird wie in dieser Skizze gezeigt auf die sechs Seiten des Würfels projiziert.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b23/c53/119/b23c53119cd34d46d5643b7765a3db8d.jpg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anwenden einer Kugel auf einen Würfel</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Für jedes Pixel auf der Oberfläche des Würfels müssen wir den Schnittpunkt zwischen dem Ansichtspunkt C in der Mitte und der Kugel berechnen. Es mag kompliziert erscheinen, aber es ist eigentlich ziemlich einfach. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir können die CA-Linie als Vektor betrachten. Und Vektoren können normalisiert werden, so dass sich ihre Richtung nicht ändert, aber die Länge auf 1 abnimmt. Aus diesem Grund sehen alle Vektoren zusammen wie eine Kugel aus. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Normalisierung ist auch recht einfach. Wir müssen nur die Werte des Vektors durch xyz durch die Gesamtlänge des Vektors teilen. Die Länge des Vektors kann mit dem Satz von Pythagoras berechnet werden.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im folgenden Code wird die Normalisierungsberechnung zuerst auf einer Seite durchgeführt. </font><font style="vertical-align: inherit;">Dann wird das Rauschen gleichzeitig für alle sechs Kanten berechnet, da Sie nur die Werte entlang xyz spiegeln müssen, um die Position der nächsten Fläche zu erhalten.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">// 3D panoramical cube map</span>
<span class="hljs-built_in">document</span>.body.addChild(<span class="hljs-string">'h2'</span>).innerText = <span class="hljs-string">'3D panoramical cube map'</span>;
<span class="hljs-comment">// we're not using the drawNoise function because our canvas is rectangular</span>
<span class="hljs-keyword">var</span> mCubemap = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'canvas'</span>)<font></font>
    ,iW = <span class="hljs-number">6</span>*iSize;<font></font>
mCubemap.width = iW;<font></font>
mCubemap.height = iSize;<font></font>
<span class="hljs-keyword">var</span>  iHSize = iSize/<span class="hljs-number">2</span> <span class="hljs-comment">// half the size of the cube</span>
    ,oCtx = mCubemap.getContext(<span class="hljs-string">'2d'</span>)<font></font>
    ,oImgData = oCtx.getImageData(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,iW,iSize)<font></font>
    ,aPixels = oImgData.data<font></font>
    ,aa = <span class="hljs-number">123</span>
    ,bb = <span class="hljs-number">231</span>
    ,cc = <span class="hljs-number">321</span><font></font>
;<font></font>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>,l=iSize*iSize;i&lt;l;i++) {
    <span class="hljs-keyword">var</span>  x = i%iSize        <span class="hljs-comment">// x position in image</span>
        ,y = (i/iSize)&lt;&lt;<span class="hljs-number">0</span>    <span class="hljs-comment">// y position in image</span>
        ,a = -iHSize + x+<span class="hljs-number">.5</span>    <span class="hljs-comment">// x position on the cube plane, the added .5 is to get the center of the pixel</span>
        ,b = -iHSize + y+<span class="hljs-number">.5</span> <span class="hljs-comment">// y position on the cube plane</span>
        ,c = -iHSize        <span class="hljs-comment">// z position of the cube plane</span>
        ,fDistanceAB = <span class="hljs-built_in">Math</span>.sqrt(a*a+b*b) <span class="hljs-comment">// to calculate the vectors length we use Pythagoras twice</span>
        ,fDistanceABC = <span class="hljs-built_in">Math</span>.sqrt(fDistanceAB*fDistanceAB+c*c)<font></font>
        ,fDrds = <span class="hljs-number">.5</span>*fDistanceABC <span class="hljs-comment">// adjust the distance a bit to get a better radius in the noise field</span>
        ,v = <span class="hljs-number">1</span><font></font>
    ;<font></font>
    a /= fDrds; <span class="hljs-comment">// normalize the vector</span>
    b /= fDrds; <span class="hljs-comment">// normalize the vector</span>
    c /= fDrds; <span class="hljs-comment">// normalize the vector</span>
    <span class="hljs-comment">//</span>
    <span class="hljs-comment">// since we now know the spherical position for one plane we can derive the positions for the other five planes simply by switching the x, y and z values (the a, b and c variables)</span>
    <span class="hljs-keyword">var</span> aNoisePositions = [<font></font>
         [a,b,c]    <span class="hljs-comment">// back</span>
        ,[-c,b,a]    <span class="hljs-comment">// right</span>
        ,[-a,b,-c]    <span class="hljs-comment">// front</span>
        ,[c,b,-a]    <span class="hljs-comment">// left</span>
        ,[a,c,-b]    <span class="hljs-comment">// top</span>
        ,[a,-c,b]    <span class="hljs-comment">// bottom</span><font></font>
    ];<font></font>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> j=<span class="hljs-number">0</span>;j&lt;<span class="hljs-number">6</span>;j++) {<font></font>
        v = Simplex.noise(<font></font>
             aa + aNoisePositions[j][<span class="hljs-number">0</span>]<font></font>
            ,bb + aNoisePositions[j][<span class="hljs-number">1</span>]<font></font>
            ,cc + aNoisePositions[j][<span class="hljs-number">2</span>]<font></font>
        );<font></font>
        <span class="hljs-keyword">var</span> pos = <span class="hljs-number">4</span>*(y*iW+j*iSize+x); <span class="hljs-comment">// the final position of the rgba pixel</span>
        aPixels[pos] = aPixels[pos+<span class="hljs-number">1</span>] = aPixels[pos+<span class="hljs-number">2</span>] = v*<span class="hljs-number">255</span>&lt;&lt;<span class="hljs-number">0</span>;<font></font>
        aPixels[pos+<span class="hljs-number">3</span>] = <span class="hljs-number">255</span>;<font></font>
    }<font></font>
}<font></font>
oCtx.putImageData(oImgData,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>);
<span class="hljs-built_in">document</span>.body.addChild(<span class="hljs-string">'img'</span>,{<span class="hljs-attr">src</span>:mCubemap.toDataURL(<span class="hljs-string">"image/jpeg"</span>)});</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier sind sechs Seiten in einem Bild sowie ein Screenshot davon, wie es aus der Sicht eines Würfels aussieht. </font><font style="vertical-align: inherit;">Der Quellcode enthält ein 3D-Beispiel, das in </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" title="Mr. Doobs Drei auf Github" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">drei Sekunden</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> geschrieben </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" title="Mr. Doobs Drei auf Github" rel="nofollow"><font style="vertical-align: inherit;">ist</font></a><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/34e/e00/0ad/34ee000ada4ac534b92d51e92adaad8c.jpg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kubische Panoramakarte</font></font></i><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/eb3/1a6/c6f/eb31a6c6ffbe85f0d62377d8997225f8.jpg"></div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nahtloses 2D-Bild</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es mag scheinen, dass ein nahtloses 2D-Bild einfach zu implementieren ist, aber es scheint mir, dass dies das schwierigste der im Artikel beschriebenen ist, denn um es zu verstehen, müssen Sie in vier Dimensionen denken. Am nächsten dran war eine zylindrische Karte (mit horizontaler Wiederholung), also werden wir sie als Grundlage nehmen. In der zylindrischen Karte haben wir die horizontale Position des Bildes für den Kreis verwendet; Das heißt, die horizontale Position des Bildes gibt uns zwei Koordinaten x und y im Rauschfeld xyz. Die vertikale Position des Bildes entspricht z im Rauschfeld.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir möchten, dass das Bild nahtlos und vertikal ist. Wenn wir also eine weitere Dimension hinzufügen, können wir damit einen zweiten Kreis erstellen und den linearen Wert des z-Felds ersetzen. </font><font style="vertical-align: inherit;">Dies ähnelt der Erzeugung von zwei Zylindern in einem vierdimensionalen Feld. </font><font style="vertical-align: inherit;">Ich habe versucht, dies auf einer Skizze zu visualisieren, es ist ungenau, aber ich habe versucht, das allgemeine Prinzip zu vermitteln und keinen vierdimensionalen Zylinder zu zeichnen.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b72/cbf/259/b72cbf2592b2e142259d2cc3f7b13d6f.jpg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eine Skizze von zwei Zylindern in vier Dimensionen</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Der Code ist recht einfach: Dies sind nur zwei Kreise in einem vierdimensionalen Rauschraum.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">// four dimensional tile</span>
fNoiseScale = <span class="hljs-number">.003</span>;<font></font>
drawNoise(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">i,x,y</span>)</span>{
    <span class="hljs-keyword">var</span>  fNX = x/iSize<font></font>
        ,fNY = y/iSize<font></font>
        ,fRdx = fNX*<span class="hljs-number">2</span>*<span class="hljs-built_in">Math</span>.PI<font></font>
        ,fRdy = fNY*<span class="hljs-number">2</span>*<span class="hljs-built_in">Math</span>.PI<font></font>
        ,a = fRds*<span class="hljs-built_in">Math</span>.sin(fRdx)<font></font>
        ,b = fRds*<span class="hljs-built_in">Math</span>.cos(fRdx)<font></font>
        ,c = fRds*<span class="hljs-built_in">Math</span>.sin(fRdy)<font></font>
        ,d = fRds*<span class="hljs-built_in">Math</span>.cos(fRdy)<font></font>
        ,v = Simplex.noise(<font></font>
             <span class="hljs-number">123</span>+a*fNoiseScale<font></font>
            ,<span class="hljs-number">231</span>+b*fNoiseScale<font></font>
            ,<span class="hljs-number">312</span>+c*fNoiseScale<font></font>
            ,<span class="hljs-number">273</span>+d*fNoiseScale<font></font>
        )<font></font>
    ;<font></font>
    <span class="hljs-keyword">return</span> (<span class="hljs-built_in">Math</span>.min(<span class="hljs-built_in">Math</span>.max(<span class="hljs-number">2</span>*(v <span class="hljs-number">-.5</span>)+<span class="hljs-number">.5</span>,<span class="hljs-number">0</span>),<span class="hljs-number">1</span>)*<span class="hljs-number">255</span>)&lt;&lt;<span class="hljs-number">0</span>;<font></font>
}).img().div(<span class="hljs-number">2</span>,<span class="hljs-number">2</span>);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und hier ist das Ergebnis:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/421/ea5/5c4/421ea55c40887a7d4fcb846d3ed35db1.jpg" alt="Bild"></div></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de496268/index.html">Huawei Enterprise Netzwerkprodukte und -lösungen für Unternehmenskunden im Jahr 2020</a></li>
<li><a href="../de496272/index.html">Differenzielle Privatsphäre: Vergleichen von Bibliotheken</a></li>
<li><a href="../de496300/index.html">Asynchroner Code in Startup ASP.NET Core: 4 Möglichkeiten, um GetAwaiter () zu umgehen. GetResult ()</a></li>
<li><a href="../de496302/index.html">Wie Sie Ihre Firma nicht einem Hacker geben, während dieser weg ist. Tipps für SOC-Spezialisten</a></li>
<li><a href="../de496304/index.html">Wie ich UE4 lerne, während ich mein Spiel mache</a></li>
<li><a href="../de499818/index.html">Usbekisches Telegramm-Marketing</a></li>
<li><a href="../de499820/index.html">Warum wir Kotlin als eine unserer Zielsprachen gewählt haben. Teil 2: Kotlin Multiplattform</a></li>
<li><a href="../de499822/index.html">Drahtloser Zugangspunkt vs. Router: Was sind die Unterschiede?</a></li>
<li><a href="../de499824/index.html">Die Zusammenfassung der Ereignisse für Personal- und IT-Personalvermittler im Mai 2020</a></li>
<li><a href="../de499826/index.html">Verteilter Blutdruck</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>