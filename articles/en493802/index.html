<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üåö üçΩÔ∏è ‚öΩÔ∏è Understanding the launchMode Android Activity: standard, singleTop, singleTask and singleInstance üï¥üèª üöì ‚Ü™Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The translation of the article was prepared especially for advanced students in Android development .
 
 
 
 Activity is one of the most striking conc...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Understanding the launchMode Android Activity: standard, singleTop, singleTask and singleInstance</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/493802/"><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The translation of the article was prepared especially for </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">advanced students in Android development</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></b></i><br>
<br>
<img src="https://habrastorage.org/webt/rz/oc/v4/rzocv4m1jq5tpiy0oisluhhgrfs.png"><br>
<hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Activity is one of the most striking concepts in Android (the most popular mobile operating system with a well-designed memory management architecture that perfectly implements multitasking). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
One way or another, with the launch of Activity on the screen, not everything is so simple. The way it was run is also important. There are a lot of nuances in this topic. One of the really important is </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">launchMode</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , which we will talk about in this article. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Each Activity is created to work with different goals. Some of them are designed to work separately with each Intent, for example, activity sent for composing e-mail in the mail client. While others are designed to work as a singleton, such as an activity mailbox.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This is why it is important to indicate whether you need to create a new Activity or use an existing one, otherwise it can lead to bad UX or crashes. </font><font style="vertical-align: inherit;">Thanks to the Android kernel developers, this is easy to do with </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">launchMode</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , which was specifically designed for this.</font></font><a name="habracut"></a><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LaunchMode definition </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Essentially, we can define </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">launchMode</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> directly as a tag attribute </font></font><code><code>&lt;</code>activity&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in </font></font><code>AndroidManifest.xml</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">activity</span>
    <span class="hljs-attr">android:name</span>=<span class="hljs-string">".SingleTaskActivity"</span>
    <span class="hljs-attr">android:label</span>=<span class="hljs-string">"singleTask launchMode"</span>
    <span class="hljs-attr">android:launchMode</span>=<span class="hljs-string">"singleTask"</span>&gt;</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
There are 4 types of launchMode available. Let's look at them one at a time. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">standard</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
This is the default mode. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The behavior of an Activity set to this mode will always create a new Activity to work separately with each sent Intent. In fact, if 10 Intents were sent to compose an email, 10 Activities must be launched in order to serve each Intent separately. As a result, an unlimited number of such Activities can be launched on the device. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Behavior on pre-Lollipop Android</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
This kind of Activity will be created and placed on the top of the stack in the same task that sent the Intent.</font></font><br>
 <br>
 <img src="https://habrastorage.org/webt/ne/n2/2u/nen22uybqupb_f6jnw5hvjz90rc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The image below shows what happens when we share the image with the standard Activity. It will be stacked in the same task as described above, although they are from different applications. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/wp/t5/fz/wpt5fzwohvycuouxans3y_t11vu.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And this is what you will see in the task manager. (It may seem a little strange) </font></font><br>
<br>
<img src="https://habrastorage.org/webt/s8/u_/ii/s8u_iioeu_3jyfu9e2va7xypr54.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If we switch the application to another task and then switch back to the Gallery, we will still see that the standard launchMode is placed on top of the Gallery task. As a result, if we need to do something in the Gallery, we must first finish our work in this additional Activity. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Behavior on Android Lollipop</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
If these Activities relate to the same application, the behavior will be the same as in the pre-Lollipop implementation - placing on the stack on top of the task.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/lj/pm/90/ljpm90f0v8oh12ygrs0hrqxnmxa.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But in case the Intent is sent from another application, a new task will be created and the newly created Activity will be placed as the root, as shown below. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/re/bn/ci/rebncivt1yw-otyjkghmjmevxss.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This is what you will see in the task manager. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/st/vh/us/stvhusvjhnp8tmqogzkrenle3am.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This is because the task management system has been modified in Lollipop - it has become better and more understandable. In Lollipop, you can simply switch back to the Gallery, as it is in a different task. You can send another Intent, a new task will be created that will serve the Intent in the same way as the previous one. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ia/iz/p_/iaizp_8fdhzzyft95zupxt89q54.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
An example of this kind of Activity is </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Compose Email Activity</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> or </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Social Network's Status Posting Activity</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(status update on social networks). </font><font style="vertical-align: inherit;">If you have an Activity on your mind that processes each Intent separately, then you are thinking of </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">standard Activity</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">singleTop</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The next mode is </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">singleTop</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">It behaves in much the same way as </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">standard</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , which means that you can create as many instances of singleTop Activity as we want. </font><font style="vertical-align: inherit;">The only difference is that if there is already an Activity instance with the same type at the top of the stack in the calling task, no new Activity will be created, instead, the Intent will be sent to the existing Activity instance through the method </font></font><code>onNewIntent()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/kh/uq/dj/khuqdjmchshqsq4cvxsybngidg8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In singleTop mode, you must consider handling the incoming Intent in </font></font><code>onCreate()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and </font></font><code>onNewIntent()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">so that it works in all cases.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
An example of using this mode is the search function. Let's think about creating a search box that directs you to SearchActivity to see the search results. For a better UX, we usually always put the search box on the search results page to allow the user to perform the next search without going back. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now imagine that if we always launch a new SearchActivity to serve a new search result, then we will get 10 new Activities for 10 iterations of the search. It would be very strange to go back, since you would have to click back 10 times to go through all the search results in order to return to the root Activity.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Instead, if SearchActivity is already at the top of the stack, it is best to send an Intent to an existing Activity instance and let it update the search result. Now there will be only one SearchActivity located at the top of the stack, and you can simply click the back button once to return to the previous Activity. That makes more sense. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In any case, singleTop works in the same task as the caller. If you expect the Intent to be sent to an existing Activity, placed on top of any other task, I should disappoint you by saying that there it no longer works. In case the Intent is sent from another application to singleTop Activity, the new Activity will be launched in the same aspect as for standart launchMode (</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pre-Lollipop: placed on top of the calling task, Lollipop: a new task will be created)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">singleTask</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This mode is very different from standart and singleTop. </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Activity with singleTask launchMode is allowed to have only one instance in the system (ala singleton)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . If an Activity instance already exists in the system, the entire task holding the instance will be moved up, and the Intent will be provided through the method </font></font><code>onNewIntent()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Otherwise, a new Activity will be created and placed in the corresponding task. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Working in one application</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
If there was no singleTask Activity instance in the system, a new one will be created and it will simply be placed up the stack in the same task. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/tl/gd/v5/tlgdv5pp1aup44lacg-a39l4qtg.jpeg"><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">But if it exists, all Activities located above this singleTask Activity will be automatically brutally destroyed properly (life cycle is completed) in order to display the desired Activity on the top of the stack.</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">At the same time, Intent will be sent to singleTask Activity through a wonderful method </font></font><code>onNewIntent()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/pr/7l/e9/pr7le9ygampc5au3-slsqydvakq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This does not make sense from the point of view of user experience, but it is designed in this way ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
You can notice one nuance that is mentioned in the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">documentation</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The system creates a new task and instantiates an activity instance at the root of the new task. </font></font></i><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">But in practice, it seems that this does not work as described</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . SingleTask Activity is still placed at the top of the Activity stack of the task, as seen from the result of the command </font></font><code>dumpsys activity</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ta</font></font><br>
<br>
<pre><code class="java hljs">sk id #<span class="hljs-number">239</span>
  TaskRecord{<span class="hljs-number">428</span>efe30 #<span class="hljs-number">239</span> A=com.thecheesefactory.lab.launchmode U=<span class="hljs-number">0</span> sz=<span class="hljs-number">2</span>}<font></font>
  Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=<span class="hljs-number">0x10000000</span> cmp=com.thecheesefactory.lab.launchmode/.StandardActivity }<font></font>
    Hist #<span class="hljs-number">1</span>: ActivityRecord{<span class="hljs-number">429</span>a88d0 u0 com.thecheesefactory.lab.launchmode/.SingleTaskActivity t239}<font></font>
      Intent { cmp=com.thecheesefactory.lab.launchmode/.SingleTaskActivity }<font></font>
      ProcessRecord{<span class="hljs-number">42243130</span> <span class="hljs-number">18965</span>:com.thecheesefactory.lab.launchmode/u0a123}<font></font>
    Hist #<span class="hljs-number">0</span>: ActivityRecord{<span class="hljs-number">425f</span>ec98 u0 com.thecheesefactory.lab.launchmode/.StandardActivity t239}<font></font>
      Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=<span class="hljs-number">0x10000000</span> cmp=com.thecheesefactory.lab.launchmode/.StandardActivity }<font></font>
      ProcessRecord{<span class="hljs-number">42243130</span> <span class="hljs-number">18965</span>:com.thecheesefactory.lab.launchmode/u0a123}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If you want singleTask Activity to behave as described in the document: create a new task and put Activity as the root Activity. You need to define an attribute </font></font><code>taskAffinity</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">for singleTask Activity as follows.</font></font><br>
<br>
<pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">activity</span>
    <span class="hljs-attr">android:name</span>=<span class="hljs-string">".SingleTaskActivity"</span>
    <span class="hljs-attr">android:label</span>=<span class="hljs-string">"singleTask launchMode"</span>
    <span class="hljs-attr">android:launchMode</span>=<span class="hljs-string">"singleTask"</span>
    <span class="hljs-attr">android:taskAffinity</span>=<span class="hljs-string">""</span>&gt;</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
That will be the result when we try to run </font></font><code>SingleTaskActivity</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/qn/au/9f/qnau9ftfyqxjtq8yty5cjlfaxiq.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/ln/pk/d4/lnpkd4alkah9kvmiphylvk8mx6a.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Your task is to decide whether to use </font></font><code>taskAffinity</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">or not depending on the desired behavior of the Activity. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Interacting with another application</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
As soon as the Intent is sent from another application and no instance of the Activity has been created in the system, </font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a new task will be created</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> with a new Activity placed as the root Activity. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/be/wv/9p/bewv9pxsnqrp9rj2is8sfs1ka1m.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/7b/wc/_b/7bwc_bbpbwsbw0man-59yupltyw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If there is no task that would be the owner of the calling singleTask Activity, a new Activity will be displayed instead. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/0e/eo/j5/0eeoj5h6thjdff3izlqcttpphde.jpeg"><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If an instance of an Activity exists in a task, the whole task will be moved up, and for each individual Activity located above a singleTask Activity, the life cycle will be completed</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">If the back button is pressed, the user must go through the Activity on the stack before returning to the calling task. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/dy/if/9d/dyif9dvekt6pictwq7znk7bqb-i.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
An example of using this mode is any Entry Point Activity, for example, the Inbox page of an email client or a social network timeline. </font><font style="vertical-align: inherit;">These Activities do not assume more than one instance, so singleTask will do its job perfectly. </font><font style="vertical-align: inherit;">In any case, you should use this mode wisely, since in this mode Activities can be destroyed without user confirmation, as described above.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">singleInstance</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This mode is very similar to singleTask, where only one instance of an Activity could exist on a system. </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The difference is that a task that has this Activity can have only one Activity ‚Äî one that has a singleInstance attribute</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . If another Activity is called from this kind of Activity, a new task is automatically created to accommodate this new Activity. Similarly, if singleInstance Activity is called, a new task will be created to host this Activity. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In any case, the result is rather strange. From the information provided</font></font><code>dumpsys</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, it is clear that there are two tasks in the system, but only one appears in the task manager, depending on which one is on top. As a result, although there is a task that is still running in the background, we cannot switch it back to the foreground. It makes no sense at all. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This is what happens when a singleInstance Activity is called while an Activity already exists on the stack. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ea/2v/qy/ea2vqyvflpzuia5elbfl7cd_fzm.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And here is what we see in the task manager. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/5a/lr/7s/5alr7sfn0d253r5-wi90zpmaoc4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Since this task can have only one Activity, we can no longer switch back to task No. 1. The only way to do this is to restart the application from the launcher, but, as a result, the singleInstance task will be hidden in the background.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anyway, there are some workarounds for this problem. </font><font style="vertical-align: inherit;">As with singleTask Activity, simply assign an attribute </font></font><code>taskAffinity</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">to singleInstance Activity, allowing multiple tasks to exist in the task manager.</font></font><br>
<br>
<pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">activity</span>
    <span class="hljs-attr">android:name</span>=<span class="hljs-string">".SingleInstanceActivity"</span>
    <span class="hljs-attr">android:label</span>=<span class="hljs-string">"singleInstance launchMode"</span>
    <span class="hljs-attr">android:launchMode</span>=<span class="hljs-string">"singleInstance"</span>
    <span class="hljs-attr">android:taskAffinity</span>=<span class="hljs-string">""</span>&gt;</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now the picture makes more sense. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/4g/g7/sr/4gg7srssanlpsftak21yt7ge4o4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This mode is rarely used. </font><font style="vertical-align: inherit;">Some of the practical use cases are an Activity launcher or an application for which you are 100% sure that there should be only one Activity. </font><font style="vertical-align: inherit;">In any case, I suggest you not to use this mode, unless there is an emergency.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Intent flags</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In addition </font></font><code>AndroidManifest.xml</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">to setting the </font><font style="vertical-align: inherit;">launch mode directly to </font><font style="vertical-align: inherit;">, we can also adjust the behavior using a tool called </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Intent flags</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , for example:</font></font><br>
<br>
<pre><code class="java hljs">Intent intent = <span class="hljs-keyword">new</span> Intent(StandardActivity.<span class="hljs-keyword">this</span>, StandardActivity.class);<font></font>
intent.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);<font></font>
startActivity(intent);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
will launch </font></font><code>StandardActivity</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">with the condition singleTop launchMode. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
There are quite a few flags you can work with. </font><font style="vertical-align: inherit;">You can find more information about this </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">here</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I hope you found this article useful =) </font></font><br>
<br>
<b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Learn more about the course</font></font></a></b></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en493792/index.html">Reports of the second ROS Meetup on robot navigation</a></li>
<li><a href="../en493794/index.html">How the Moscow office of FunCorp switched to udalenka in 1 day</a></li>
<li><a href="../en493796/index.html">4 best design patterns for automated testing (and 86 more)</a></li>
<li><a href="../en493798/index.html">There is no design in 1C UX / UI</a></li>
<li><a href="../en493800/index.html">Empirical probability</a></li>
<li><a href="../en493804/index.html">Talking player on raspberry</a></li>
<li><a href="../en493808/index.html">Linearizing asynchronous code with corutin</a></li>
<li><a href="../en493810/index.html">Five years of intensive development of the market for document recognition</a></li>
<li><a href="../en493814/index.html">How we conduct interviews in Barcelona</a></li>
<li><a href="../en493816/index.html">Git Guide Part number 1: everything you need to know about the .git directory</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>