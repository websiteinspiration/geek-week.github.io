<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ”º ğŸ“» ğŸš† HackTheBox. Walkthrough Nest. NTFS stream, membalikkan C # dan SMB walker ğŸ¾ ğŸ‘¨ğŸ»â€âœˆï¸ ğŸ‘©ğŸ¾â€ğŸ¤â€ğŸ‘¨ğŸ½</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Saya terus menerbitkan solusi yang dikirim untuk diproses lebih lanjut dari situs HackTheBox . 
 
 Dalam artikel ini, kami berkeliaran di sumber daya ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>HackTheBox. Walkthrough Nest. NTFS stream, membalikkan C # dan SMB walker</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/505620/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/1q/ca/yw/1qcaywxbp6rhhpdnvzrz962rtuq.png" alt="gambar"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya terus menerbitkan solusi yang dikirim untuk </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">diproses lebih lanjut</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dari situs </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">HackTheBox</font></a><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam artikel ini, kami berkeliaran di sumber daya SMB untuk waktu yang lama, menemukan aliran NTFS alternatif dan membalikkan aplikasi dalam C #. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Koneksi ke laboratorium adalah melalui VPN. </font><font style="vertical-align: inherit;">Dianjurkan untuk tidak terhubung dari komputer kerja atau dari host di mana data penting bagi Anda tersedia, karena Anda berakhir di jaringan pribadi dengan orang-orang yang mengetahui sesuatu di bidang keamanan informasi :)</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Informasi Organisasi</font></font></b>
                        <div class="spoiler_text">      ,     ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow">  Telegram</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow">    </a>   .    , ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow">    </a>.<br>
<a name="habracut"></a><br>
      .          ,  -      ,      .<br>
</div>
                    </div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Recon</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mesin ini memiliki alamat IP 10.10.10.178, yang saya tambahkan ke / etc / hosts.</font></font><br>
<br>
<pre><code class="plaintext hljs">10.10.10.178    nest.htb</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pertama, kami memindai port terbuka. </font><font style="vertical-align: inherit;">Karena butuh waktu lama untuk memindai semua port dengan nmap, saya akan melakukan ini dengan masscan. </font><font style="vertical-align: inherit;">Kami memindai semua port TCP dan UDP dari antarmuka tun0 dengan kecepatan 500 paket per detik.</font></font><br>
<br>
<pre><code class="bash hljs">masscan -e tun0 -p1-65535,U:1-65535 10.10.10.178  --rate=500</code></pre><br>
<img src="https://habrastorage.org/webt/xj/kx/xl/xjkxxlv08bbqnoe4gbgwtguoxps.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang, untuk informasi lebih rinci tentang layanan yang beroperasi pada port, kami akan menjalankan pemindaian dengan opsi -A.</font></font><br>
<br>
<pre><code class="bash hljs">nmap -A nest.htb -p445,4386</code></pre><br>
<img src="https://habrastorage.org/webt/m0/of/ri/m0ofrismd3eiavaq3pwsdwrnf5u.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pertama-tama, mari kita perhatikan sumber daya SMB. Ayo coba masuk sebagai tamu. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/er/ja/sr/erjasr0e1z10xlk-viawzul3ztw.png" alt="gambar"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
sauna </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
dan temukan sumber daya yang tersedia. Mari kita secara rekursif melihat semua konten yang tersedia untuk kita. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/eo/g7/m_/eog7m_ppephro2mox1k3qiiav4w.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dari file-file di atas, catatan yang paling menarik adalah "Selamat Email.txt". Kami akan terhubung ke sumber daya dan menyimpan file ini ke mesin lokal kami. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/pz/bj/np/pzbjnpsuibvqekhaw8srf-94ns8.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan dalam pesan itu sendiri, sumber daya dan kredensial untuk terhubung dengannya dilaporkan. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/sa/j2/gh/saj2ghkvbfk8lny49jizvvawyfm.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mari kita lihat semua konten sumber daya, tetapi sudah menggunakan kredensial yang ditemukan. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/kx/ld/_8/kxld_8g1kwwcgrzgsjidyj8xi1o.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam hal ini, kita harus selalu tertarik pada file konfigurasi, karena Anda dapat menemukan nama sumber daya, layanan, atau bahkan kredensial di dalamnya. Oleh karena itu, kami kembali terhubung ke sumber daya dan mengambil semua konfigurasi.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/n1/rr/zm/n1rrzmayhnjffj3qcrykh_fmsq0.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan dalam satu file kami menemukan nama sumber daya pribadi "Secure $", dan yang lain - kredensial pengguna. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/b1/f0/wc/b1f0wciwt8jctq6xpggbn6h3-oi.png" alt="gambar"><br>
<br>
<img src="https://habrastorage.org/webt/v7/gp/cz/v7gpcze1fwtf_5ktriy3x7tn3c4.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tapi kata sandi tidak cocok, ternyata itu dienkripsi. Tetapi ternyata beralih ke sumber daya yang ditemukan dengan kredensial yang ada. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/9l/x0/bg/9lx0bgkmvtsdmun0mmxdbg4apo4.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tetapi kami tidak dapat melihat isi direktori IT, karena kami memiliki satu direktori di dalamnya (ini mengikuti dari konfigurasi). Kami melihat seluruh isi \ Secure $ \ IT \ Carl \. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vq/pz/af/vqpzaftcpmf2e8fipswnp2m-p7q.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Proyek VisualBasic terletak di sana. Saya terhubung melalui explorer dan menyalin folder proyek ke mesin lokal. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vh/x5/fj/vhx5fj_fhxvhyflzzj51sdjztvm.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami membuka proyek dan menemukan tempat di mana kata sandi dibaca dari konfigurasi dan didekripsi. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/yl/rl/2t/ylrl2tkmtdg2m6cemcg7v12cy3q.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setelah melihat sekilas pada prinsip enkripsi itu sendiri, saya tidak benar-benar ingin memanjat, jadi kami memuat proyek di Visual Studio dan mengubah kode untuk mengetahui kata sandi saat debugging.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/d8/bm/5x/d8bm5xgp4myrmxhfarjrkptq-as.png" alt="gambar"><br>
<br>
<img src="https://habrastorage.org/webt/-q/oq/nd/-qoqndiavdp-95wpjrqvscvbzbs.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jadi kami mencari tahu kata sandi asli pengguna. </font><font style="vertical-align: inherit;">Kami terhubung dan menerima token.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/pg/xc/xq/pgxcxqkosw6yyvbxw9ylt7hehc0.png" alt="gambar"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AKAR</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami melihat lebih jauh dalam direktori kerja pengguna. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/xq/82/ua/xq82uaot_ewfco-r8zoccjit8sg.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dari file konfigurasi, kami memahami apa yang berfungsi pada port kedua. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/sc/e4/bu/sce4buc1y2ojoojs5afzfjgi72o.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tetapi dengan menghubungkan dan melihat bantuan, kami memahami bahwa kami memerlukan kata sandi. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/5i/6t/x5/5i6tx5hboicu1cy54axpuwgby9m.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami masuk ke direktori dan mengunduh aplikasi, mungkin dengan menganalisisnya, kami dapat menemukan kata sandinya. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/kw/hz/r4/kwhzr41tyd7ycefdozvehrcxdpc.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sangat beruntung bahwa aplikasi ini ditulis dalam C #, ini akan memungkinkan kita untuk dengan mudah mendekompilasi seluruh proyek menggunakan dnSpy. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vb/yv/je/vbyvjettxqh2e1kmkuy5uld6k9g.png" alt="gambar"><br>
<br>
<img src="https://habrastorage.org/webt/b-/03/dd/b-03ddpj7wa36l3yquitc4qe4eu.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dengan demikian, program, program menerima file konfigurasi sebagai input, dari mana ia memperoleh parameter tertentu. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ru/bh/4c/rubh4cc_xlxeuoeid_zbzrixlvy.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tapi kami tidak menemukan apa pun di proyek. </font><font style="vertical-align: inherit;">Lebih jauh, banyak waktu dihabiskan sampai realisasi datang untuk mengintip ke dalam file kosong "Debug Mode Password.txt". </font><font style="vertical-align: inherit;">Hubungkan sumber daya jaringan.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/lj/za/ww/ljzaww9bc1okdei5zb6ijm2mili.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang mari kita lihat semua aliran file ini. Dan kami menentukan bahwa aliran Kata Sandi menyimpan 15 karakter. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/jc/ex/ui/jcexuiyaeurfbkqtyifktjyl7l8.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami membacanya, menemukan kata sandi untuk mode debug (membosankan ... itu terjadi). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/h6/j-/zd/h6j-zdp23tjyzvghmvtavtueuvs.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami terhubung lagi, masukkan kata sandi ini dan lihat bantuannya. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/kb/ow/qx/kbowqxqut1w80cxgj-emecsytv8.png" alt="gambar"><br>
<br>
<img src="https://habrastorage.org/webt/2_/le/oz/2_leozjuut9uequuljlrsbipvre.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maka ada baiknya sedikit berkeliaran di dalam aplikasi, karena Anda perlu menemukan semacam konfigurasi untuk proyek yang didekompilasi. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/pc/ny/qy/pcnyqykndlb9rjh8sxkzxssa-q0.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Menilai dari nama aplikasi, mari kita buka LDAP. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/4k/sw/wl/4kswwl3l-kjdx_mxow_q4jb31pg.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan lagi kita menemukan aplikasi yang sudah kita miliki dan file konfigurasi. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ix/kq/wf/ixkqwfnbqek_xvaqotvzb4ttp9i.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ini adalah parameter yang dikonversi dalam aplikasi. Temukan fungsi dekripsi, dan tarik nilainya ke konsol sebelum mengembalikannya. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vj/ao/fr/vjaofrlr3cxfxlo45gwp1zntgk4.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nah, kami akan mengubah salah satu syarat agar aplikasi tidak berhenti ketika memeriksa file.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/7x/x-/f_/7xx-f_w2b8glnjotuipvuezzjbw.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami mengkompilasi ulang proyek dan menjalankan aplikasi, menentukan konfigurasi sebagai argumen. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fo/ug/s5/fougs58hhnawb91i6tpbsybm63s.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan kami mendapatkan kata sandi administrator. </font><font style="vertical-align: inherit;">Selanjutnya, kami berhasil terhubung menggunakan psexec. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/_u/ty/ku/_utykuvl0nxpltgzolgmckr19eq.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami memiliki kontrol penuh atas mesin. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anda dapat bergabung dengan kami di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Telegram</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Di sana Anda dapat menemukan materi yang menarik, kursus yang digabungkan, serta perangkat lunak. </font><font style="vertical-align: inherit;">Mari kita mengumpulkan komunitas di mana akan ada orang-orang yang berpengalaman dalam banyak bidang TI, maka kita selalu dapat saling membantu dalam masalah TI dan keamanan informasi.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id505608/index.html">Vuex - pecahkan perselisihan lama dengan metode baru</a></li>
<li><a href="../id505612/index.html">MK-61: sejarah, emulasi, perangkat</a></li>
<li><a href="../id505614/index.html">Suku bunga deposito bank terbesar jatuh ke minimum historis: bagaimana ini mempengaruhi ekonomi, dan di mana pertukaran</a></li>
<li><a href="../id505616/index.html">Pengakuan alfabet Rusia: dari mengumpulkan dataset hingga membuat GUI</a></li>
<li><a href="../id505618/index.html">Templat GRASP: Pembuat</a></li>
<li><a href="../id505624/index.html">Bagaimana cara memproses bingkai data dengan miliaran catatan dalam hitungan detik?</a></li>
<li><a href="../id505632/index.html">Pengalokasi memori</a></li>
<li><a href="../id505634/index.html">Pengaturan Proxy untuk WSL (Ubuntu)</a></li>
<li><a href="../id505640/index.html">Objektivitas Peringkat Publikasi</a></li>
<li><a href="../id505642/index.html">Coroutine transparan</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>