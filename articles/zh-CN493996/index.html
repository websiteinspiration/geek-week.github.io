<!doctype html>
<html class="no-js" lang="zh-CN">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤴🏼 😕 🌜 使用Paessler AG的PRTG Network Monitor的Lifehacks监视基础架构 🦁 🤟🏼 ❔</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="碳粉量控制
 许多管理员会发现使用PRTG Network Monitor控制所有打印机墨盒中的墨粉量非常实用。但是，并非所有设备都使用SNMP传感器支持对象标识符（OID）。但是，可以选择使用PRTG监视碳粉量。
 
 
 
 某些打印机不支持PRTG打印机传感器中内置的对象标识符（OID），因此...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>使用Paessler AG的PRTG Network Monitor的Lifehacks监视基础架构</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/softline/blog/493996/"><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">碳粉量控制</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
许多管理员会发现使用PRTG Network Monitor控制所有打印机墨盒中的墨粉量非常实用。</font><font style="vertical-align: inherit;">但是，并非所有设备都使用SNMP传感器支持对象标识符（OID）。</font><font style="vertical-align: inherit;">但是，可以选择使用PRTG监视碳粉量。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/0m/qr/fc/0mqrfc21y4khm7-a1ayiiu0cob0.jpeg"><a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
某些打印机不支持PRTG打印机传感器中内置的对象标识符（OID），因此，当尝试请求数据时，会出现SNMP错误消息No.222。在这种情况下，内置的PRTG SNMP传感器（自定义表）将有助于解决问题。在英语安装中，它被指定为SNMP自定义表传感器。为此，您需要SNMP表的OID。要显示填充量，请使用OID“ 1.3.6.1.2.1.43.11.1”。在设置的第一步中输入它。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ia/xe/el/iaxeelpc0xtyqkc3c655pxta2iy.jpeg"><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PRTG使用SNMP表在列表中显示当前碳粉量。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
然后将用于标识的列更改为OID“ 1.3.6.1.2.1.43.11.1.1.6”。它反映了墨盒的颜色。现在设置频道名称。它显示在传感器结果旁边，例如“液位”。然后，您需要匹配感觉通道的列。为此，引入了OID“ 1.3.6.1.2.1.43.11.1.1.9”，它反映了当前的百分比填充水平。要配置此通道的单位，请在下拉列表中选择“百分比”项目。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
接下来，PRTG读取打印机上的所有传感器，并向您显示带有可用值的表格。</font><font style="vertical-align: inherit;">检查所有要添加的频道，然后单击“保存”以完成设置。</font><font style="vertical-align: inherit;">现在，PRTG为每个突出显示的记录调整传感器，并根据读取的信息设置传感器的名称。</font><font style="vertical-align: inherit;">从此刻开始，显示墨盒的墨粉量，并连续记录变化。</font><font style="vertical-align: inherit;">有关带插图的详细分步说明，请参阅</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PRTG知识库</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PRTG库存概述</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
多年来，借助PRTG Network Monitor，设备树的结构变得更加复杂。因此，不时检查主机之间的所有时间间隔依赖性和活动继承是有意义的。此外，您需要列出已引入限制的所有传感器和通道。知道如何执行此操作后，您可以快速创建相关评论。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ed/yq/fo/edyqfozgjmmw51fixcd-sqi0kca.png"><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">监控系统不时增长，需要清单。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PRTG可以毫无问题地读取所需的信息。</font><font style="vertical-align: inherit;">为此，我们建议使用PrtgAPI工具-C＃/ PowerShell接口，分别适应PRTG网络监视器。</font><font style="vertical-align: inherit;">应用程序接口（API）允许您从PRTG读取几乎所有有关传感器的信息，然后在电子表格中对其进行处理。</font><font style="vertical-align: inherit;">要获取通道的所有特征，包括传感器标识符，请在API中执行以下命令：</font></font><br>
<br>
<pre><code class="plaintext hljs">Get-Sensor *cpu* | Get-Channel | <font></font>
 Export-Csv C:\channelLimits.csv -NoType</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如果要在表中包括传感器名称，则可以使用“选择”对象添加它。</font><font style="vertical-align: inherit;">命令行可能如下所示：</font></font><br>
<br>
<pre><code class="plaintext hljs">$sensors = get-sensor *cpu*<font></font>
$sensors|foreach {<font></font>
$s = $_ $s|Get-Channel|select @{l="SensorName";e={$s.Name}},<font></font>
 SensorId,Name,Id, *limit*<font></font>
}|Export-Csv C:\channelLimits.csv -NoType</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如果要创建传感器相关性报告，则Get-ObjectProperty对象将为您提供帮助。</font><font style="vertical-align: inherit;">它允许您分析SensorSettings对象的DependencyType和DependentObjectId属性。</font><font style="vertical-align: inherit;">有关详细说明，包括有关PrtgAPI的其他信息，请参阅</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Paessler知识库</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">检查与MQTT传感器的连接</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
许多中型制造企业正在逐步将其机器纳入网络。它们连接在特别定义的区域中，并将信息发送到中央MQTT代理，在该代理中进行后续数据处理。对于公司而言，监视MQTT代理是否可完全访问非常重要。此分数有单独的建议。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ht/kb/n9/htkbn9g6dczefrlxeeze9jaj2zg.png"><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MQTT中继传感器检查您是否可以连接到代理。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
PRTG Network Monitor为此提供了一种特殊的</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">MQTT转发器</font></a><font style="vertical-align: inherit;">。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。它检查是否可以连接到代理，以及代理是否通过发布接受消息。此外，传感器监视代理程序是否将消息发送给相关参与者，一方面测量单个连接的时间，另一方面测量从消息发出之时到再次被接收之间信号往返所需的总时间。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
设置MQTT非常简单，只需几个步骤。</font><font style="vertical-align: inherit;">MQTT往返BETA传感器已添加到PRTG。</font><font style="vertical-align: inherit;">在传感器设置中，为传感器分配一个名称，并保存MQTT（MQTT主题）部分。</font><font style="vertical-align: inherit;">默认值为PRTG /往返/％sensorid，其中PRTG替换为％sensorid和相应的传感器标识符。</font><font style="vertical-align: inherit;">要允许传感器访问MQTT部分，请将MQTT凭据保存在父设备的设置中。</font><font style="vertical-align: inherit;">启动传感器后，它将在传感器的不同通道中显示来回传递消息的时间，通过状态，发布者的连接时间以及订户的连接时间。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">远程访问主PRTG服务器</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
许多公司使用PRTG Network Monitor监视IT基础结构。通常会出现一个问题，即如何访问公司网络外部的主PRTG服务器。在以下建议中介绍了管理员在这种情况下必须考虑的事项，以及对于防止第三方未经授权访问很重要的预防措施。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
您已使用您的个人IP地址（例如192.168.0.100）在内部网络上配置了PRTG。一切正常，但是现在您还希望从另一台计算机通过Internet访问主PRTG服务器。您可以为此使用PRTG移动应用程序。但是，在这成为可能之前，您需要确保可以从外部（包括通过防火墙）访问主PRTG服务器。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
由于安全性是alpha和omega，因此您首先需要注意其他人进入您的PRTG帐户的可能性。为此，您必须更改管理员帐户的默认密码（如果尚未更改）。要检查您是否使用默认密码，只需在PRTG Web界面中转到“设置/帐户设置/我的帐户，用户帐户”部分。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
此外，您不应从外部通过不安全的HTTP访问PRTG实例。因此，请确保将PRTG程序配置为对PRTG Web界面的所有连接都使用HTTPS。为此，请在“设置/系统管理/ Web界面，Web服务器”部分中选择“保护HTTPS服务器作为传入Web服务器请求的传输控制协议（TCP）端口”。要从外部访问主服务器的安装，必须在防火墙中打开必要的端口或重定向它们。为此，请为这些端口创建NAT规则。在防火墙中设置NAT规则可能会因制造商而异。因此，请阅读设备或型号的文档。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在我们的示例中，如果PRTG程序在IP地址为192.168.0.100的服务器上运行，则NAT规则可能如下图所示。 HTTP规则是可选的，但可以大大简化该过程。如果在浏览器中输入“ prtgserver。&lt;Mydomain.tld&gt;”，将首先尝试通过HTTP访问该网站。如果不想为HTTP创建NAT规则，则需要每次输入</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">prtgserver</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。&lt;Mydomain.tld&gt;。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/dt/mh/dt/dtmhdtqwkmrprpecxmdbghhevgw.jpeg"><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这看起来像防火墙上的NAT规则，以提供对PRTG的远程访问。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
您还应该确保在PRTG服务器上禁用了Windows防火墙，或者您已经创建了适当的规则。</font><font style="vertical-align: inherit;">现在，您可以通过PRTG移动应用程序远程监视PRTG的安装，或者通过Internet从其他客户端访问PRTG Web界面。</font><font style="vertical-align: inherit;">有关通过防火墙设置对PRTG Network Monitor的访问的更多信息，包括有用的高级设置，请参阅</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
您可以在</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">paessler.softline.ru</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上了解Paessler PRTG的功能，下载试用版，向Softline专家（Paessler在俄罗斯和CIS的主要合作伙伴）提出</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">问题</font></a><font style="vertical-align: inherit;">。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN493972/index.html">NASA超级电容器已成为...湿度计</a></li>
<li><a href="../zh-CN493974/index.html">DIY和开放源代码与Covid-19作战：通风机</a></li>
<li><a href="../zh-CN493978/index.html">SSD金士顿A2000 1TB和A2000R 500GB：外部相似，但内部不同</a></li>
<li><a href="../zh-CN493982/index.html">乐高助推器</a></li>
<li><a href="../zh-CN493986/index.html">如何使用望远镜从恒星星图中查找天体</a></li>
<li><a href="../zh-CN493998/index.html">谁是DevOps，什么时候不需要</a></li>
<li><a href="../zh-CN494000/index.html">堆栈硬件安全性简介（Windows 10）</a></li>
<li><a href="../zh-CN494006/index.html">降低语音识别的障碍</a></li>
<li><a href="../zh-CN494020/index.html">30多个解析器可从任何站点收集数据</a></li>
<li><a href="../zh-CN494024/index.html">Firefox仅引入HTTPS</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>