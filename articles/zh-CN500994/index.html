<!doctype html>
<html class="no-js" lang="zh-CN">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏿‍🍳 😙 🤛 运行蚂蚁。跑 ⏹️ 🧖🏿 🛀🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="本文讨论了在模拟环境“ AnyLogic” 中创建蚁群行为的模拟模型（可以在Wikipedia上阅读）的过程。本文是实用的。它将考虑使用ant算法解决旅行商问题（您可以在此处阅读）。
 
 
 
 简要介绍精华
 旅行推销员问题的实质是，旅行推销员（卖方）必须沿着最短的路线仅对N个城市进行一次访问，...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>运行蚂蚁。跑</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/500994/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">本文讨论了</font><font style="vertical-align: inherit;">在模拟环境“ AnyLogic” </font><font style="vertical-align: inherit;">中创建蚁群行为的模拟模型（可以在</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wikipedia</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上阅读</font><font style="vertical-align: inherit;">）的过程。</font><font style="vertical-align: inherit;">本文是实用的。</font><font style="vertical-align: inherit;">它将考虑使用ant算法解决旅行商问题（您可以</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在此处阅读</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ca/-m/xy/ca-mxya2npzn6aynp21dpuepx2g.gif"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">简要介绍精华</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
旅行推销员问题的实质是，旅行推销员（卖方）必须沿着最短的路线仅对N个城市进行一次访问，然后再访问N个城市。由于此任务是NP复杂的，并且将N个城市之间所有可能路线的选项数量计算为“ N！”，因此最短路线搜索时间将随着N的增加呈指数增加。因此，使用该算法的最短路线（解决方案）搜索时间N&gt; 16的城市数量的“穷举搜索”（提供精确的解决方案）急剧增加（呈指数增长）。因此，我们将不会搜索长度最短的路线，而是使用“蚂蚁算法”在有限时间内接近（合理）路线。</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
关于AnyLogic的几句话是一个功能强大的工具，可让您创建复杂程度各异的仿真模型。</font><font style="vertical-align: inherit;">它实现了各种模拟方法。</font><font style="vertical-align: inherit;">我们将仅分析一种方法，即“代理”建模。</font><font style="vertical-align: inherit;">它是用Java编程语言实现的，它是对现有工具的补充。</font><font style="vertical-align: inherit;">“ AnyLogic”的主要缺点是免费版本限制了已创建代理的数量；代理数量不能超过50,000；“ Agent”是AnyLogic仿真系统的基本单位。</font><font style="vertical-align: inherit;">可以在网站</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">www.anylogic.ru</font></a><font style="vertical-align: inherit;">上找到更多信息。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">工具类</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1. Anylogic-从此处下载免费版本</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.anylogic.ru/downloads</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
AnyLogic初始介绍：</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AnyLogic界面如图1所示。它包括：</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">绿色区域是我们将在其中创建代理的空间；</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">红色区域-焦点对准的对象的属性；</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">调色板-创建模型时可以使用的工具；</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">项目-所开发模型的结构。</font></font></li>
</ul><br>
<br>
<img src="https://habrastorage.org/webt/ni/-d/kx/ni-dkxyorpukg5a6xkitxe7nwpm.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图。</font><font style="vertical-align: inherit;">1- AnyLogic弹出窗口</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">项目创建</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
这里的一切都很简单。</font><font style="vertical-align: inherit;">单击“创建”旁边的“文件”菜单项，然后单击“模型”，输入模型名称，然后单击“完成”按钮（图2）。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ej/5e/96/ej5e96ohohjgxmygsj2teeedt1q.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图。</font><font style="vertical-align: inherit;">2-建立模型</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创建城市</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
好吧，让我们开始吧。我们要做的第一件事是创建蚂蚁将要参观的所谓的城市（图的顶部）。我们为什么要打开调色板中的“ Agent”选项卡，然后将带有小矮人的红色圆圈从那里拖到“ Main”代理中，如图3 </font></font><br>
<br>
<img src="https://habrastorage.org/webt/v9/2x/nb/v92xnbu57t8ulh_cttg_i6p1e_0.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所示。 3-创建城市</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
释放鼠标按钮后，将出现一个对话框（“步骤1”），提示您创建座席。在需要选择“特工人口”项并单击“下一步”按钮的地方。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/h5/bb/jm/h5bbjm3eyfyzggqc_ixb7bikqoi.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图。 4-创建城市</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
以下对话框出现（第2步），您需要在其中输入新座席类型的名称和座席人口的名称。输入类型“ MyTown”和人口名称“ myTowns”，然后单击“下一步”按钮。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/0k/fi/ak/0kfiaknzozrmlyjkzpgnkdrtp2m.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图。 4a-输入新代理的名称</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
然后将出现以下窗口（步骤4）。在这里，我们选择“ 2D Agent Animation”和带有“ Plant”字样的图标，然后单击“ Finish”按钮（图5）。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/si/73/l7/si73l7efxqaj4-lsibjaq23bo5o.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图。 5-为代理添加动画</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
现在创建一个变量，该变量将确定模型中城市的初始数量。为什么将带有铭文“ Variable”的图标从“调色板”中拖到代理“ Main”中，并输入其名称“ numberTown”。接下来，单击变量的图标，然后在“属性”选项卡中，输入其初始值，例如等于10，然后选择其类型“ int”（图6）。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/xg/ox/6o/xgox6ohlkcyugq_8bndgxeqe7pe.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图。 6-创建变量</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
现在，我们将城市人口的初始值设置为“ myTowns”，为此，请单击其图标，然后在“属性”选项卡中的“代理的初始数量”字段中输入我们先前创建的变量的名称（图7）。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/n2/wn/wr/n2wnwrzolah44a3oiblzp0uitvw.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图。</font><font style="vertical-align: inherit;">7-更改“ myTowns”人口的属性接下来，</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
我们将随机地在“主要”代理中得出我们城市</font><i><font style="vertical-align: inherit;">的</font></i><font style="vertical-align: inherit;">结论。</font><font style="vertical-align: inherit;">该空间限制为400x400像素的正方形。</font><font style="vertical-align: inherit;">为什么在“项目”选项卡中用鼠标选择“主”代理，并在“属性”选项卡的“启动时”字段中添加以下Java代码（图7a）：</font></font><br>
<pre><code class="java hljs"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;myTowns.size(); i++) {<font></font>
	myTowns.get(i).setXY(uniform(<span class="hljs-number">0</span>,<span class="hljs-number">400</span>), uniform(<span class="hljs-number">0</span>,<span class="hljs-number">400</span>));<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
哪里：</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">myTowns.size（）-创建的城市数；</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">myTowns.get（i）.setXY（均匀（0.400），均匀（0.400））-设置第i个城市的X和Y坐标；</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">统一（0,400）-根据随机变量的等概率分布定律返回从0到400范围内的随机数的函数。</font><font style="vertical-align: inherit;">AnyLogic环境具有用于处理各种随机变量分布的广泛工具包。</font><font style="vertical-align: inherit;">工具栏提供了一个内置的概率分布构造函数。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
哪里：</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">myTowns.size（）-创建的城市数；</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">myTowns.get（i）.setXY（均匀（0.400），均匀（0.400））-设置第i个城市的X和Y坐标；</font></font></li>
<li>uniform(0,400) – ,        0  400      .   AnyLogic          .              . </li>
</ul><br>
<br>
<img src="https://habrastorage.org/webt/cx/9s/uh/cx9suhbif3brjkqje09vjpp0wos.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图。</font><font style="vertical-align: inherit;">7a-我们安排了城市，</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
然后我们已经可以看到我们所做的事情并开始我们的模型。</font><font style="vertical-align: inherit;">为此，使用“ F5”键，单击它，然后启动用于启动实验的窗口，如图8 </font></font><br>
<br>
<img src="https://habrastorage.org/webt/e7/w9/0j/e7w90jfs3sz6flkkxvkmhksfysk.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所示。</font><font style="vertical-align: inherit;">8-开始实验</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
接下来，单击窗口左下角的“运行”按钮，实验开始。</font><font style="vertical-align: inherit;">您应该在屏幕上得到一个包含其内容的窗口，如图9 </font></font><br>
<br>
<img src="https://habrastorage.org/webt/h5/hj/rw/h5hjrw2oona5nb5oxamr7wk1kro.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所示。</font><font style="vertical-align: inherit;">9-实验的结果</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
因此，在此步骤中，我们创建了10个城市，并将它们放置在屏幕上的随机（随机）位置。</font><font style="vertical-align: inherit;">现在让我们继续创建“蚂蚁”</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创建一只蚂蚁</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
因此，我们模型的主要作战单位将是一只蚂蚁。我们必须首先创建它，然后对其行为建模。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
创建蚂蚁类似于创建城市。在“面板”中，选择“代理”并将其拖动到“主”。选择“填充代理”，然后选择“我要创建新的代理类型”，然后输入“新类型的名称”和“填充名称”，“ MyAnt”，“ myAnts”，然后单击“下一步”。之后，我们选择“ 2D”动画，例如，带有铭文“ Fighter”的图标按“ Finish”，结果应如图10 </font></font><br>
<br>
<img src="https://habrastorage.org/webt/q-/pb/wj/q-pbwj-wzsom4meb0xjebt8f6e0.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所示。 10-创建蚂蚁</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同意，飞机看起来不像蚂蚁，因此我们将对其进行修复。我们进入搜索引擎，寻找描述蚂蚁的图片，然后将飞机更改为蚂蚁。为什么我们双击“ myAnts”附近的红色圆圈。之后，“ myAnt”选项卡将打开，您需要在其中移除飞机并将蚂蚁放置在其位置（图11）。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/v-/5a/tp/v-5atplfehtp9oii49ogb4zarx4.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图。 11-MyAnt选项卡</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
用鼠标选择平面，然后按“ Del”。接下来，转到“演示文稿”选项卡，然后从此处拖动“图像”元素。之后，将自动打开一个对话框以选择文件。用我们的蚂蚁选择文件（图12），然后单击OK。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/3u/cv/jo/3ucvjoiromyqmon5c0gg8rnitps.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图。 12-MyAnt选项卡上有蚂蚁，已经没有飞机了</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
继续。</font><font style="vertical-align: inherit;">缩放蚂蚁并将其移动到飞机曾经所在的地方。</font><font style="vertical-align: inherit;">结果应该如图12a所示。</font><font style="vertical-align: inherit;">所有这些操作都是使用鼠标执行的。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/bh/rr/n_/bhrrn_45uobnz9cpfxyxfmgpajm.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图。</font><font style="vertical-align: inherit;">12a-带蚂蚁的MyAnt标签</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们使蚂蚁复活</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
现在我们需要教我们新鲜出炉的蚂蚁在城市之间爬行。</font><font style="vertical-align: inherit;">没错，到目前为止，没有考虑数学模型，但仍然让它运行。</font><font style="vertical-align: inherit;">因此，在“面板”中打开“状态图”图，然后继续。</font><font style="vertical-align: inherit;">我们传输以下块并将它们连接在一起：</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">状态图的开始是我们蚂蚁生命周期的起点；</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">状态-此区块将描述蚂蚁生命周期的状态。</font><font style="vertical-align: inherit;">此类块是必需的。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">过渡-箭头，它将使我们的“州”彼此连接，并在某些条件下执行从一个“州”到另一个“州”的过渡。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
结果，结果应该如图13 </font></font><br>
<br>
<img src="https://habrastorage.org/webt/rl/xk/ry/rlxkrykh7gpd6ujcc5aetxfldxm.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所示。</font><font style="vertical-align: inherit;">13-蚂蚁行为的逻辑</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
现在让我们编写蚂蚁图的初始逻辑。</font><font style="vertical-align: inherit;">我们用鼠标选择在“选择城市”名称下退出该街区的箭头，并在“属性”选项卡的“操作”字段中添加以下代码（图14）：</font></font><br>
<pre><code class="java hljs"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;main.myTowns.size(); i++) {
	<span class="hljs-keyword">if</span> (randomTrue(<span class="hljs-number">0.5</span>)) {
		<span class="hljs-keyword">this</span>.moveTo(main.myTowns.get(i));
		<span class="hljs-keyword">break</span>;<font></font>
	} <font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
这里的一切都很简单，我们在所有城市中进行循环并抛硬币（我们生成概率为0.5的随机变量），如果其值为true（鹰），则将蚂蚁发送到该城市，离开循环。表达式“ this.moveTo（main.myTowns.get（i））”是将一个代理发送到另一个代理的函数。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/sc/ql/7y/scql7yplmodnhdrldsc6tvb3l2m.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图。 14-设置蚂蚁运动的初始逻辑</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
，然后单击离开“运动”块的箭头，然后在“属性”选项卡的“出现”字段中，设置值“一旦收到消息”，然后在“出现”字段中选择“一旦收到指定消息”。 »如图15 </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ks/hh/g9/kshhg9m8nyxvzqz9d1dj2xnrgtc.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所示。 15-设置“运动”和“超越一切”之间的过渡逻辑</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
现在，配置“运动”块中出现的最后一个箭头。</font><font style="vertical-align: inherit;">我们用鼠标选择它，然后在“属性”选项卡的过渡字段中，设置“代理到达时”。</font><font style="vertical-align: inherit;">“状态图”的最终视图应如图16 </font></font><br>
<br>
<img src="https://habrastorage.org/webt/os/kv/af/oskvafwwsgpitd36rnozrirob9m.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所示。</font><font style="vertical-align: inherit;">16-在块之间配置了过渡的状态图</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
让我们看一下蚂蚁行为的“状态图”如何工作：</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">蚂蚁掉落的第一个状态是“ Vybor_city”，到目前为止，还没有阐明任何动作。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">然后他在过渡时进入下一个状态。</font><font style="vertical-align: inherit;">在此过渡中，我们添加了一个代码，该代码开始在所有山脉之间循环，并使蚂蚁在城市周围奔跑。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“运动”块是蚂蚁所在的位置，直到它到达先前选择的城市为止。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此外，他有两种方法。</font><font style="vertical-align: inherit;">首先，他返回到块“ City_Choice”，然后再次重复所有操作。</font><font style="vertical-align: inherit;">在第二条道路上，他已经参观了所有城市之后将不得不走。</font><font style="vertical-align: inherit;">到目前为止，第二种方法尚未与我们建立。</font><font style="vertical-align: inherit;">我们待会儿再处理。</font></font></li>
</ol><br>
<br>
<img src="https://habrastorage.org/webt/3z/aj/md/3zajmdqorvjpondmi8k03fmmz94.gif"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图。</font><font style="vertical-align: inherit;">17-状态图的操作</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
现在我们可以按“ F5”键查看发生的情况（图18）。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/fr/cg/us/frcgusj3llqem0vaf8rxjngwwii.gif"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图。</font><font style="vertical-align: inherit;">18-蚂蚁的复兴</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">定义标准</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
那么，这些标准是什么（规则）：</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一只蚂蚁只能参观每个城市一次。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">蚂蚁参观了所有城市，结束了他在最后一个城市的运动。</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
这些标准是由旅行商问题决定的。每只蚂蚁都会和我们一起在城市旅行的推销员。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
让我们教蚂蚁遵守这些规则。为什么从“调色板”的“代理”选项卡将“集合”和“变量”转移到“ MyAnt”选项卡，然后将它们首先命名为“ isVisited”，然后将其命名为“ distance”。第一个考虑到我们已经访问过的城市，第二个考虑到蚂蚁走过的距离。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/-k/s-/a_/-ks-a_2igqbcyxzgzxiwlrbn9fe.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图。 19-添加变量</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
设置isVisited集合。为什么我们用鼠标选择它，然后在“属性”选项卡中设置“ int”元素的“类型”，如图20所示。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
对于其属性中的“距离”变量，在“初始值”字段中，设置“ 0”，变量类型为“双精度” ”。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/cm/2v/te/cm2vte4vjkzqycf0r58qz8itz7u.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图。 20-类型“ int”的集合</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
现在，选择离开“ City_block”块的箭头，并将“动作”字段中的代码更改为以下代码：</font></font><br>
<pre><code class="java hljs"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;main.myTowns.size(); i++) {
	<span class="hljs-keyword">if</span> (randomTrue(<span class="hljs-number">0.9</span>) &amp;&amp; isVisited.indexOf(i)==-<span class="hljs-number">1</span>) {
		<span class="hljs-keyword">this</span>.moveTo(main.myTowns.get(i));<font></font>
		distance=distance+<span class="hljs-keyword">this</span>.distanceTo(main.myTowns.get(i));<font></font>
		isVisited.add(i);<font></font>
		<span class="hljs-keyword">break</span>;<font></font>
	} <font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在上面的代码中，我们添加了对我们已经设法访问过的城市的检查，并考虑了我们访问过的城市，并考虑了行驶的距离。</font><font style="vertical-align: inherit;">代码很简单，我认为您不会很难理解。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
您可以尝试启动“ F5”我们的模型，看看发生了什么。</font><font style="vertical-align: inherit;">现在，蚂蚁将只穿过所有城市一次，并在街区中完成移动。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">更改蚂蚁的初始位置</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在这一步，我们将为每只蚂蚁确定我们将随机选择一个城市作为他开始旅程的城市。</font><font style="vertical-align: inherit;">为什么在“项目”选项卡上用鼠标选择“主”代理，然后在“属性”选项卡中将以下代码添加到“启动时”字段中（图20a）：</font></font><br>
<pre><code class="java hljs"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;myAnts.size(); i++) {
	<span class="hljs-comment">//        </span>
	<span class="hljs-keyword">int</span> startTown = uniform_discr(<span class="hljs-number">0</span>,myTowns-<span class="hljs-number">1</span>);
	<span class="hljs-comment">//     </span><font></font>
	myAnts.get(i).setPosition(myTowns.get(startTown));<font></font>
	<span class="hljs-comment">//      </span><font></font>
	myAnts.get(i).isVisited.add(startTown);<font></font>
}<font></font>
</code></pre><br>
<br>
<img src="https://habrastorage.org/webt/2i/et/cg/2ietcgzx9lkptrnj5rainnljcig.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图。</font><font style="vertical-align: inherit;">20a-按城市排列蚂蚁</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
我对初始城市进行了随机选择。</font><font style="vertical-align: inherit;">您最初只能识别一个城市中的所有蚂蚁。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使蚂蚁变幻莫测</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
让我们在模型中引入以下公式：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/kd/ld/xz/kdldxzse05ththx-oipffhru9oq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
其中Pi是沿第i条路径的路径过渡的概率，li是第i条过渡的长度，fi是第i条过渡的信息素量，q是确定算法“贪婪”的值，p -确定算法“群数”的值，其中q + p = 1。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我从</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现场</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">借了这个公式</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
简而言之，该公式使您可以计算出蚂蚁必须过渡到特定城市的概率。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
现在我们需要添加几个变量，如果没有这些变量我们将无法做到。为什么回到图21的“ Main”选项卡</font></font><br>
<br>
<img src="https://habrastorage.org/webt/zk/ba/cv/zkbacvaft1obpjrs1kw9hblkjos.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。 21-标签“主要”</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
因此，我们添加了变量“ numberAnt”，其中将存储蚁群的大小。我们将其类型设置为“ int”，初始值为100 </font></font><br>
<br>
<img src="https://habrastorage.org/webt/80/o2/w4/80o2w43ra-j_fwfabeunywmjkbm.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。 21-变量“ numberAnt”</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
接下来，选择总体“ myAnts”，并将“代理的初始数量”字段设置为“ numberAnt”。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
变量“ p”，它将确定算法的遗传。其类型为double，初始值为0.5。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
变量“ q”，它将确定算法的贪婪程度。其类型为double，初始值为0.5。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ge/m7/n0/gem7n0dj3rlhd_uu6aac3rrqyby.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图。 22-变量“ q和p”</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
因此，现在我们将为城市之间的每个边缘（道路）设置一个随机信息素值。为什么要创建变量（二维数组）“ matrixF”。在“类型”（Type）字段的“属性”（Properties）选项卡中进行设置，选择值“其他”（Other），然后在字段中写入“ double [] []”作为初始值“ new double [numberTown] [numberTown]”（图23）。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/wq/4d/oi/wq4doiphuc28xcg1a3vcveng4ms.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图。 23-创建一个二维数组“ matrixF”。信息素矩阵</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
接下来，我们需要初始化此矩阵。换句话说，用随机值填充它。我们在0.1到</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1 </font><font style="vertical-align: inherit;">的范围内随机获取信息素值</font><font style="vertical-align: inherit;">。为此，在“项目”选项卡上，用鼠标选择“主”代理，然后在“属性”选项卡中将以下代码添加到“启动时”字段（图23a）：</font></font><br>
<pre><code class="java hljs"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;myTowns.size(); i++) {
	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j=<span class="hljs-number">0</span>; j&lt;myTowns.size(); j++) {<font></font>
		matrixF[i][j]=uniform(<span class="hljs-number">0.1</span>,<span class="hljs-number">1</span>);<font></font>
	}<font></font>
} <font></font>
</code></pre><br>
<br>
<img src="https://habrastorage.org/webt/ob/an/ta/obanta0s5kb7vqnsc3wsn-qmbgg.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
23a- </font><i><font style="vertical-align: inherit;">信息素矩阵的初始化代码</font></i><font style="vertical-align: inherit;">现在，我们返回“ MyAnt”选项卡，并根据上述公式继续计算转移概率。</font><font style="vertical-align: inherit;">选择“ City_Choice”和“ Motion”之间的过渡，并将“动作”字段中的代码更改为以下内容（图24）：</font></font><br>
<pre><code class="java hljs"><span class="hljs-comment">//       </span>
<span class="hljs-keyword">double</span> denominator=<span class="hljs-number">0</span>; 
<span class="hljs-comment">//          </span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;main.myTowns.size(); i++) {
	<span class="hljs-keyword">if</span> (isVisited.indexOf(i)==-<span class="hljs-number">1</span>) {	<span class="hljs-comment">//     </span>
	    <span class="hljs-comment">//  i   </span>
		denominator=denominator+(Math.pow(<span class="hljs-keyword">this</span>.distanceTo(main.myTowns.get(i)), main.q)*Math.pow(main.myTowns.get(i).f, main.p));<font></font>
	} <font></font>
}<font></font>
<span class="hljs-comment">//      i </span>
<span class="hljs-keyword">double</span> Pi=<span class="hljs-number">0</span>;
<span class="hljs-comment">//    </span>
<span class="hljs-keyword">double</span> probility=uniform(<span class="hljs-number">0</span>,<span class="hljs-number">1</span>);
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;main.myTowns.size(); i++) {
	<span class="hljs-comment">//        Pi</span>
	<span class="hljs-keyword">if</span> (isVisited.indexOf(i)==-<span class="hljs-number">1</span>) {
		<span class="hljs-comment">//     i-      </span>
		Pi=Pi+(Math.pow(<span class="hljs-keyword">this</span>.distanceTo(main.myTowns.get(i)), main.q)*Math.pow(main.myTowns.get(i).f, main.p))/denominator;<font></font>
	}<font></font>
	<span class="hljs-comment">//      Pi      probility</span>
	<span class="hljs-keyword">if</span> (probility&lt;Pi &amp;&amp; isVisited.indexOf(i)==-<span class="hljs-number">1</span>) {
		<span class="hljs-comment">//       i  </span>
		<span class="hljs-keyword">this</span>.moveTo(main.myTowns.get(i));
		<span class="hljs-comment">//     </span>
		distance=distance+<span class="hljs-keyword">this</span>.distanceTo(main.myTowns.get(i));
		<span class="hljs-comment">//           </span><font></font>
		isVisited.add(i);<font></font>
		<span class="hljs-keyword">break</span>;<font></font>
	} <font></font>
}<font></font>
</code></pre><br>
<br>
<img src="https://habrastorage.org/webt/7u/gr/re/7ugrreytqo1mjwh43xeaagissqm.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图。</font><font style="vertical-align: inherit;">24-我们根据上述分析表达式来设置蚂蚁的行为，</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
因此，我现在将解释一些含义：</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">li-this.distanceTo（main.myTowns.get（i）），蚂蚁当前位置和“ i”城市之间的长度值；</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fi-main.matrixF [currentPos] [i]，当前城市和城市“ i”之间的信息素水平值；</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">分母-分母+（Math.pow（this.distanceTo（main.myTowns.get（i）），main.q）* Math.pow（main.matrixF [currentPos] [i]，main.p））;,分母皮</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pi-Pi +（Math.pow（this.distanceTo（main.myTowns.get（i），main.q）* Math.pow（main.myTowns.get（i）.f，main.p））/分母，蚂蚁从当前城市移至城市“ i”的概率。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
接下来，我们用鼠标选择“ Motion”和“ All-bypassed”块之间的过渡，并在“ Occurs”字段中选择“ When满足条件”，然后在条件字段中编写蚂蚁停止“ isVisited.size（）== main.myTowns.size（）”的条件。 （图25）。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/1w/qz/ag/1wqzagqllmjga_yqm5a8-9c_crg.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图。</font><font style="vertical-align: inherit;">25-确定停止蚂蚁的条件，</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
然后您可以运行“ F5”模型并查看发生了什么。</font><font style="vertical-align: inherit;">蚂蚁将以上述解析表达式计算出的概率在城市之间旅行。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">更新信息素的价值</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
现在让我们做两件事。第一步是增加蚂蚁经过的城市之间边缘的信息素值。第二个是城市之间边缘的信息素的蒸发，这包括相对于模拟时间减少信息素的值。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
因此，从第一个动作开始，我们将更新蚂蚁所在的城市和他要去的城市之间的肋骨信息素的值。我们将非常非常简单地计算出用于增加城市之间信息素边的当前值的值。我们将信息素值的最大初始值设为1 cu然后将其除以蚂蚁所在的城市与他要去的城市之间的距离。因此，城市之间的距离越小，将增加肋骨的信息素水平的值越大。为什么要在“项目”选项卡中选择MyAnt代理，使用鼠标选择“ City_title”和“ Movement”块之间的过渡，然后将以下代码添加到操作字段：“ main.matrixF [currentPos] [i] = main.matrixF [currentPos] [i ] +1 / this.distanceTo（main.myTowns.get（i）;”。结果应如图26所示</font></font><br>
<br>
<img src="https://habrastorage.org/webt/wr/zi/jb/wrzijbuaavovmagcktbz4yrhkw0.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图。 26-更新蚂蚁经过的肋骨信息素水平的值</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
现在，我们继续执行</font><i><font style="vertical-align: inherit;">步骤</font></i><font style="vertical-align: inherit;"> 2，并创建一个事件，该事件将模拟城市之间肋骨上信息素的蒸发。为什么在项目选项卡中选择“主”代理并在那里创建更多变量。第一个是“强度”-它将确定信息素蒸发的速率（强度）（初始值为“ 0.5”，键入“ double”）。第二个“部分”-将表征边缘上信息素的值减少的分数（初始值“ 0.9”，键入“ double”）。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/rh/_8/ly/rh_8lydcrbmm7pkkitihtmsszi4.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图。 27-创建变量“强度”和“零件”</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
接下来，我们从“ Agent”选项卡的“ Palette”中获取“ Event”元素，并将其转移到“ Main”代理中，并将其称为“ evaporation”-该元素将模拟边缘信息素的蒸发。</font><font style="vertical-align: inherit;">用鼠标单击它，然后在“事件类型”（Event Type）字段的“属性”（Properties）中，在“强度”（Intensity）字段中选择值“具有给定强度”（With有了给定强度），并写出存储“强度”强度值的变量的名称。</font><font style="vertical-align: inherit;">响应时间为秒。</font><font style="vertical-align: inherit;">接下来，将以下代码添加到操作中：</font></font><br>
<pre><code class="java hljs"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;myTowns.size(); i++) {
	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j=<span class="hljs-number">0</span>; j&lt;myTowns.size(); j++) {<font></font>
		matrixF[i][j]=matrixF[i][j]*Part;<font></font>
		<span class="hljs-keyword">if</span> (matrixF[i][j]&lt;<span class="hljs-number">0.1</span>) matrixF[i][j]=<span class="hljs-number">0.1</span>;<font></font>
	}<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
当触发“蒸发”事件时，MatrixF矩阵中的信息素水平将被更新。</font><font style="vertical-align: inherit;">结果，您应该能够如图28 </font></font><br>
<br>
<img src="https://habrastorage.org/webt/qq/p9/dl/qqp9dljysgcl9xg7jvydl74oees.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所示。</font><font style="vertical-align: inherit;">28-创建“蒸发”事件</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">确定获胜者</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在这一步，我们将添加一个代码，该代码将确定我们的蚂蚁马拉松的赢家。获胜者将是路线最短的蚂蚁之一。除所有内容外，马拉松结束后，我们还在屏幕上绘制此路线。为此，我们将在“主”代理中创建三个变量“ bestAnt”，“ bestDistance”和“ numberFinish”。在变量“ bestAnt”中，我们将存储“最快”蚂蚁的索引，变量的类型将为“ int”，初始值将设置为“ -1”。在变量“ bestDistance”中，我们将存储城市之间最佳路线长度的当前值，变量的类型将为“ double”，初始值将设置为infinity“ infinity”。在变量“ numberFinish”中，我们将存储在马拉松比赛中完成的蚂蚁数量，变量的类型将为“ int”，初始值为“ 0”（图29）。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/zd/2a/yw/zd2ayw0tmj6_wuft2sl2qz8tevu.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图。</font><font style="vertical-align: inherit;">29-创建变量事件</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
接下来，我们创建一个函数，在完成所有蚂蚁之后，将绘制城市之间最佳路线的线。</font><font style="vertical-align: inherit;">为什么将具有名称功能的元素从“调色板”中拖到代理“主”中。</font><font style="vertical-align: inherit;">将函数名称设置为drawPath，然后在“属性”选项卡的函数正文字段中，添加以下代码：</font></font><br>
<pre><code class="java hljs"><span class="hljs-comment">//        </span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;myAnts.get(bestAnt).isVisited.size()-<span class="hljs-number">1</span>; i++) {
	<span class="hljs-comment">//    </span>
	ShapeLine myLine = <span class="hljs-keyword">new</span> ShapeLine();
	<span class="hljs-comment">//            i</span><font></font>
	myLine.setX(myTowns.get(myAnts.get(bestAnt).isVisited.get(i)).getX());<font></font>
	myLine.setY(myTowns.get(myAnts.get(bestAnt).isVisited.get(i)).getY());<font></font>
	<span class="hljs-comment">//            i+1</span>
	myLine.setEndX(myTowns.get(myAnts.get(bestAnt).isVisited.get(i+<span class="hljs-number">1</span>)).getX());<font></font>
	myLine.setEndY(myTowns.get(myAnts.get(bestAnt).isVisited.get(i+<span class="hljs-number">1</span>)).getY());
	<span class="hljs-comment">//    ""</span><font></font>
	myLine.setColor(blue);<font></font>
	<span class="hljs-comment">//   </span><font></font>
	myLine.setLineStyle(LINE_STYLE_SOLID );<font></font>
	<span class="hljs-comment">//   </span>
	myLine.setLineWidth(<span class="hljs-number">1</span>);
	<span class="hljs-comment">//    </span><font></font>
	presentation.add(myLine);	<font></font>
}<font></font>
	<span class="hljs-comment">//           </span>
	ShapeLine myLine = <span class="hljs-keyword">new</span> ShapeLine();<font></font>
	myLine.setX(myTowns.get(myAnts.get(bestAnt).isVisited.get(myAnts.get(bestAnt).isVisited.size()-<span class="hljs-number">1</span>)).getX());<font></font>
	myLine.setY(myTowns.get(myAnts.get(bestAnt).isVisited.get(myAnts.get(bestAnt).isVisited.size()-<span class="hljs-number">1</span>)).getY());<font></font>
	myLine.setEndX(myTowns.get(myAnts.get(bestAnt).isVisited.get(<span class="hljs-number">0</span>)).getX());<font></font>
	myLine.setEndY(myTowns.get(myAnts.get(bestAnt).isVisited.get(<span class="hljs-number">0</span>)).getY());<font></font>
	myLine.setColor(blue);<font></font>
	myLine.setLineStyle(LINE_STYLE_SOLID );<font></font>
	myLine.setLineWidth(<span class="hljs-number">1</span>);<font></font>
	presentation.add(myLine);<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
结果，您应该能够如图29a所示。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/am/eq/1b/ameq1bhejnkldupsbngygcqqndw.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图。</font><font style="vertical-align: inherit;">29a-创建“ drawPath”函数</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
现在我们回到蚂蚁并添加一个代码，该代码将确定获胜者的蚂蚁，最佳路线的长度并在城市之间绘制此路线。</font><font style="vertical-align: inherit;">为什么在“项目”选项卡中选择“ MyAnt”代理，然后选择“所有绕过”块并将以下代码添加到“登录操作”字段中：</font></font><br>
<pre><code class="java hljs"><span class="hljs-comment">//    </span><font></font>
main.numberFinish++;<font></font>
<span class="hljs-comment">//      </span>
<span class="hljs-keyword">if</span> (main.bestDistance&gt;distance) {
	<span class="hljs-comment">//           </span>
	<span class="hljs-comment">//      </span><font></font>
	main.bestDistance=distance;<font></font>
	<span class="hljs-comment">//    </span>
	main.bestAnt = <span class="hljs-keyword">this</span>.getIndex();<font></font>
}<font></font>
<span class="hljs-comment">//         Main   </span>
<span class="hljs-keyword">if</span> (main.numberFinish==main.myAnts.size()) main.drawPath();
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
结果应该如图30 </font></font><br>
<br>
<img src="https://habrastorage.org/webt/68/ss/7c/68ss7cvbvbfbwkz26u6abdvwit8.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所示。</font><font style="vertical-align: inherit;">30-在“所有绕过”块中添加逻辑，</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
然后可以按“ F5”并运行模型。</font><font style="vertical-align: inherit;">蚂蚁会四处寻找路线，当城市结束时，蓝线将连接起来，这是最佳路线。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">向模型添加直方图</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
为了使模型更加科学，必须添加图形。因此，我们将不仅添加图形和直方图，还可以向我们显示蚂蚁克服的路径长度的分布。为什么在选项卡“项目”中选择代理“主”并转到其空间。此外，在“面板”中，我们转到“统计信息”选项卡，然后从那里到“主”代理，我们传输“直方图数据”元素，并直接传输“直方图”本身。然后，我们使用鼠标选择直方图，然后在“属性”标签中的“数据”字段中，指定“直方图数据”的名称，即“数据”。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
结果应该如图31所示</font></font><br>
<br>
<img src="https://habrastorage.org/webt/7v/bz/6i/7vbz6ikwgs7t0iintfnp2jz6wyw.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。 31-建立时间表</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
之后，我们将再次返回到蚂蚁并使其充满路线长度值的``直方图''。</font><font style="vertical-align: inherit;">为什么在项目选项卡中选择代理“ MyAnt”并转到其空间。</font><font style="vertical-align: inherit;">接下来，选择“ All Bypass”块，并在其中添加一行“ main.data.add（distance）;”。</font><font style="vertical-align: inherit;">结果应该如图32 </font></font><br>
<br>
<img src="https://habrastorage.org/webt/bf/wa/zl/bfwazly38mrpwolpx4awmowj10o.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所示。</font><font style="vertical-align: inherit;">32-构建图形</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
接下来，按“ F5”，然后继续研究ant算法的行为。</font><font style="vertical-align: inherit;">结果应该如图33 </font></font><br>
<br>
<img src="https://habrastorage.org/webt/3w/8w/is/3w8wissyoccebi-8ona5px-cop0.gif"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所示。</font><font style="vertical-align: inherit;">33-建模</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">结论</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最后，我建议为模型添加更多的不可预测性。</font><font style="vertical-align: inherit;">为此，在“ Projects”选项卡中，用鼠标选择“ Simulation：Main”元素，然后在“ Properties”选项卡中将“ Randomness”参数设置为“ Random initial number（unique run）”-这将使每个模型启动都是唯一的（图34）。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ie/ow/i6/ieowi6e32wykpsao8owpxbwzwzu.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图。</font><font style="vertical-align: inherit;">34-随机运行</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
谢谢您的关注！</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以从GitHub下载源代码</font></font></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN500978/index.html">RabbitMQ的延迟收货</a></li>
<li><a href="../zh-CN500980/index.html">脑RX</a></li>
<li><a href="../zh-CN500984/index.html">怪胎的苹果或快乐的无线电日，极客</a></li>
<li><a href="../zh-CN500986/index.html">数据中心的监控：我们如何将旧的BMS更改为新的BMS。第三部分</a></li>
<li><a href="../zh-CN500992/index.html">最佳IT公司的绩效管理如何</a></li>
<li><a href="../zh-CN500996/index.html">如何在六个月甚至更快的时间内成为一名DevOps工程师。第1部分。简介</a></li>
<li><a href="../zh-CN500998/index.html">卷积神经网络及其在iOS中的集成（第1部分）</a></li>
<li><a href="../zh-CN501000/index.html">通过为数据库创建客户端的示例在Go中生成代码</a></li>
<li><a href="../zh-CN501002/index.html">umka：新的静态类型脚本语言</a></li>
<li><a href="../zh-CN501004/index.html">做吧 工作</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>