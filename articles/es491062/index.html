<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèø‚Äçüíª üñïüèΩ üëø Angular: crear un elemento de formulario personalizado y pasarle el estado del formulario üé® üîü üìî</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Las diversas formas en nuestras aplicaciones web a menudo se crean a partir de los mismos elementos de ladrillo. Los marcos de componentes nos ayudan ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Angular: crear un elemento de formulario personalizado y pasarle el estado del formulario</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/491062/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Las diversas formas en nuestras aplicaciones web a menudo se crean a partir de los mismos elementos de ladrillo. </font><font style="vertical-align: inherit;">Los marcos de componentes nos ayudan a deshacernos del c√≥digo repetible, y ahora quiero considerar uno de estos enfoques. </font><font style="vertical-align: inherit;">Entonces, como es habitual en Angular.</font></font><br>
<a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tarea t√©cnica:</font></font></h3><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> necesita crear el componente "elemento de formulario para ingresar SNILS";</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> El componente debe formatear los valores ingresados ‚Äã‚Äãpor m√°scara;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> El componente debe validar la entrada.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> el componente deber√≠a funcionar como parte de la forma reactiva;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> una forma incompleta debe mantener su estado entre reinicios;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> al cargar la p√°gina, una vez que el formulario editado muestre inmediatamente los errores;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> utilizado por material angular.</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Crear un proyecto e instalar dependencias</font></font></h3><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Crea un proyecto de prueba</font></font></h4><br>
<pre><code class="plaintext hljs">ng new input-snils</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Instalar bibliotecas de terceros</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En primer lugar, el material angular en s√≠ mismo</font></font><br>
<br>
<pre><code class="plaintext hljs">ng add @angular/material</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Luego necesitamos enmascarar y verificar los SNILS de acuerdo con las </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">reglas para calcular la suma de control</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Instala las bibliotecas:</font></font><br>
<br>
<pre><code class="plaintext hljs">npm install ngx-mask ru-validation-codes</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Guardar datos del formulario</font></font></h3><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Preparaci√≥n de un servicio para trabajar con localStorage</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los datos del formulario se almacenar√°n en localStorage. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Puede tomar inmediatamente los m√©todos del navegador para trabajar con LS, pero en Angular es costumbre intentar escribir c√≥digo universal y mantener todas las dependencias externas bajo control. Tambi√©n simplifica las pruebas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por lo tanto, ser√° correcto cuando la clase obtenga todas sus dependencias del contenedor DI. Recordando al gato Matroskin: para comprar algo innecesario del inyector, primero debe vender algo innecesario al inyector. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Crear un proveedor </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">window.provider.ts</font></font></b><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span> { InjectionToken } <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/core'</span>;<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getWindow</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">window</span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> WINDOW = <span class="hljs-keyword">new</span> InjectionToken(<span class="hljs-string">'Window'</span>, {
  <span class="hljs-attr">providedIn</span>: <span class="hljs-string">'root'</span>,
  <span class="hljs-attr">factory</span>: getWindow,<font></font>
});</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øQue est√° pasando aqui? </font><font style="vertical-align: inherit;">El inyector DI de Angular recuerda los tokens y regala entidades asociadas con ellos. </font><font style="vertical-align: inherit;">Token: puede ser un objeto InjectionToken, una cadena o una clase. </font><font style="vertical-align: inherit;">Esto crea un nuevo InjectionToken de nivel ra√≠z y se comunica con la f√°brica, que devuelve el navegador </font></font><code>window</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora que tenemos una ventana, vamos a crear un servicio sencillo para trabajar con localStorage </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">storage.service.ts</font></font></b><br>
<br>
<pre><code class="javascript hljs">@Injectable({
  <span class="hljs-attr">providedIn</span>: <span class="hljs-string">'root'</span><font></font>
})<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">StorageService</span> </span>{<font></font>
  readonly prefix = <span class="hljs-string">'snils-input__'</span>;<font></font>
<font></font>
  <span class="hljs-keyword">constructor</span>(<font></font>
    @Inject(WINDOW) private window: Window,<font></font>
  ) {}<font></font>
<font></font>
  public set&lt;T&gt;(key: string, <span class="hljs-attr">data</span>: T): <span class="hljs-keyword">void</span> {
    <span class="hljs-keyword">this</span>.window.localStorage.setItem(<span class="hljs-keyword">this</span>.prefix + key, <span class="hljs-built_in">JSON</span>.stringify(data));<font></font>
  }<font></font>
<font></font>
  public get&lt;T&gt;(key: string): T {<font></font>
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">return</span> <span class="hljs-built_in">JSON</span>.parse(<span class="hljs-keyword">this</span>.window.localStorage.getItem(<span class="hljs-keyword">this</span>.prefix + key));<font></font>
    } <span class="hljs-keyword">catch</span> (e) { }<font></font>
  }<font></font>
<font></font>
  public remove(key: string): <span class="hljs-keyword">void</span> {
    <span class="hljs-keyword">this</span>.window.localStorage.removeItem(<span class="hljs-keyword">this</span>.prefix + key);<font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
StorageService toma una ventana de un inyector y proporciona sus propios envoltorios para guardar y leer datos. </font><font style="vertical-align: inherit;">No configur√© el prefijo para no sobrecargar el art√≠culo con una descripci√≥n de c√≥mo crear m√≥dulos con una configuraci√≥n.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FormPersistModule</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Creamos un servicio simple para guardar los datos del formulario. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">form-persist.service.ts</font></font></b><br>
<br>
<pre><code class="javascript hljs">@Injectable({
  <span class="hljs-attr">providedIn</span>: <span class="hljs-string">'root'</span><font></font>
})<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FormPersistService</span> </span>{<font></font>
  private subscriptions: Record&lt;string, Subscription&gt; = {};<font></font>
<font></font>
  <span class="hljs-keyword">constructor</span>(<font></font>
    private storageService: StorageService,<font></font>
  ) { }<font></font>
<font></font>
  <span class="hljs-comment">/**
   * <span class="hljs-doctag">@returns </span>restored data if exists
   */</span>
  public registerForm&lt;T&gt;(formName: string, <span class="hljs-attr">form</span>: AbstractControl): T {
    <span class="hljs-keyword">this</span>.subscriptions[formName]?.unsubscribe();
    <span class="hljs-keyword">this</span>.subscriptions[formName] = <span class="hljs-keyword">this</span>.createFormSubscription(formName, form);<font></font>
<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.restoreData(formName, form);<font></font>
  }<font></font>
<font></font>
  public unregisterForm(formName: string): <span class="hljs-keyword">void</span> {
    <span class="hljs-keyword">this</span>.storageService.remove(formName);<font></font>
<font></font>
    <span class="hljs-keyword">this</span>.subscriptions[formName]?.unsubscribe();
    <span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>.subscriptions[formName];<font></font>
  }<font></font>
<font></font>
  public restoreData&lt;T&gt;(formName: string, <span class="hljs-attr">form</span>: AbstractControl): T {
    <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">this</span>.storageService.get(formName) <span class="hljs-keyword">as</span> T;
    <span class="hljs-keyword">if</span> (data) {<font></font>
      form.patchValue(data, { <span class="hljs-attr">emitEvent</span>: <span class="hljs-literal">false</span> });<font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">return</span> data;<font></font>
  }<font></font>
<font></font>
  private createFormSubscription(formName: string, <span class="hljs-attr">form</span>: AbstractControl): Subscription {
    <span class="hljs-keyword">return</span> form.valueChanges.pipe(<font></font>
      debounceTime(<span class="hljs-number">500</span>),<font></font>
    )<font></font>
      .subscribe(<span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> {
        <span class="hljs-keyword">this</span>.storageService.set(formName, value);<font></font>
      });<font></font>
  }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
FormPersistService puede registrar formularios con la clave de cadena pasada. El registro significa que los datos del formulario se guardar√°n en LS con cada cambio. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al registrarse, el valor extra√≠do de LS tambi√©n se devuelve para que sea posible comprender que el formulario ya se ha guardado anteriormente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unregister ( </font></font><code>unregisterForm</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) finaliza el proceso de guardado y elimina la entrada en LS. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Me gustar√≠a describir la funcionalidad de almacenamiento de manera declarativa, y no hacerlo todo el tiempo en el c√≥digo del componente. Angular te permite hacer milagros con la ayuda de directivas, y ahora es el caso. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cree la directiva </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">form-persist.directive.ts</font></font></b><br>
<br>
<pre><code class="javascript hljs">@Directive({
  <span class="hljs-attr">selector</span>: <span class="hljs-string">'form[formPersist]'</span>, <span class="hljs-comment">// tslint:disable-line: directive-selector</span><font></font>
})<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FormPersistDirective</span> <span class="hljs-title">implements</span> <span class="hljs-title">OnInit</span> </span>{<font></font>
  @Input() formPersist: string;<font></font>
<font></font>
  <span class="hljs-keyword">constructor</span>(<font></font>
    private formPersistService: FormPersistService,<font></font>
    @Self() private formGroup: FormGroupDirective,<font></font>
  ) { }<font></font>
<font></font>
  @HostListener(<span class="hljs-string">'submit'</span>)<font></font>
  onSubmit() {<font></font>
    <span class="hljs-keyword">this</span>.formPersistService.unregisterForm(<span class="hljs-keyword">this</span>.formPersist);<font></font>
  }<font></font>
<font></font>
  ngOnInit() {<font></font>
    <span class="hljs-keyword">const</span> savedValue = <span class="hljs-keyword">this</span>.formPersistService.registerForm(<span class="hljs-keyword">this</span>.formPersist, <span class="hljs-keyword">this</span>.formGroup.control);
    <span class="hljs-keyword">if</span> (savedValue) {
      <span class="hljs-keyword">this</span>.formGroup.control.markAllAsTouched();<font></font>
    }<font></font>
  }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cuando se superpone en el formulario, FormPersistDirective extrae otra directiva del inyector local: FormGroupDirective y toma el objeto de formulario reactivo desde all√≠ para registrarse con FormPersistService. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La clave de registro debe tomarse de la plantilla, el formulario en s√≠ no tiene ning√∫n identificador √∫nico inherente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al enviar un formulario, el registro debe cancelarse. </font><font style="vertical-align: inherit;">Para hacer esto, escuche el evento de env√≠o usando HostListener. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La directiva tambi√©n debe entregarse a los componentes donde se puede usar. </font><font style="vertical-align: inherit;">Es una buena pr√°ctica crear peque√±os m√≥dulos separados para cada entidad reutilizada. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">form-persist.module.ts</font></font></b><br>
<br>
<pre><code class="javascript hljs">@NgModule({
  <span class="hljs-attr">declarations</span>: [FormPersistDirective],
  <span class="hljs-attr">exports</span>: [FormPersistDirective]<font></font>
})<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FormPersistModule</span> </span>{ }</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Elemento del formulario SNILS</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øQu√© tareas se le asignan? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En primer lugar, debe validar los datos.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">snilsValidator</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Angular le permite adjuntar sus validadores para formar controles, y es hora de hacer los suyos. </font><font style="vertical-align: inherit;">Para verificar los SNILS, utilizo la biblioteca externa de c√≥digos de validaci√≥n de ru y el validador ser√° bastante simple. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">snils.validator.ts</font></font></b><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span> { checkSnils } <span class="hljs-keyword">from</span> <span class="hljs-string">'ru-validation-codes'</span>;<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">snilsValidator</span>(<span class="hljs-params">control: AbstractControl</span>): <span class="hljs-title">ValidationErrors</span> | <span class="hljs-title">null</span> </span>{
  <span class="hljs-keyword">if</span> (control.value === <span class="hljs-string">''</span>  || control.value === <span class="hljs-literal">null</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<font></font>
  }<font></font>
<font></font>
  <span class="hljs-keyword">return</span> checkSnils(control.value)<font></font>
    ? <span class="hljs-literal">null</span>
    : { <span class="hljs-attr">snils</span>: <span class="hljs-string">'error'</span> };<font></font>
}</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Componente InputSnilsComponent</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La plantilla del componente consta de un campo de entrada envuelto, una versi√≥n cl√°sica de la biblioteca de material angular. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Con una peque√±a adici√≥n, una m√°scara de entrada se superpondr√° en la entrada usando la biblioteca externa ngx-mask, desde aqu√≠ la m√°scara de par√°metros de entrada - establece la m√°scara y dropSpecialCharacters - desactiva la eliminaci√≥n de caracteres de m√°scara especiales del valor. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Consulte la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">documentaci√≥n de ngx-mask para</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> obtener m√°s detalles. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqu√≠ est√° la plantilla de componente </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">input-snils.component.html</font></font></b><br>
<br>
<pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">mat-form-field</span> <span class="hljs-attr">appearance</span>=<span class="hljs-string">"outline"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
    <span class="hljs-attr">matInput</span>
    <span class="hljs-attr">autocomplete</span>=<span class="hljs-string">"snils"</span>
    [<span class="hljs-attr">formControl</span>]=<span class="hljs-string">"formControl"</span>
    [<span class="hljs-attr">mask</span>]=<span class="hljs-string">"mask"</span>
    [<span class="hljs-attr">dropSpecialCharacters</span>]=<span class="hljs-string">"false"</span>
    [<span class="hljs-attr">placeholder</span>]=<span class="hljs-string">"placeholder"</span>
    [<span class="hljs-attr">readonly</span>]=<span class="hljs-string">"readonly"</span>
    [<span class="hljs-attr">required</span>]=<span class="hljs-string">"required"</span>
    [<span class="hljs-attr">tabIndex</span>]=<span class="hljs-string">"tabIndex"</span>
  &gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">mat-error</span> [<span class="hljs-attr">hidden</span>]=<span class="hljs-string">"formControl | snilsErrors: 'required'"</span>&gt;</span>  <span class="hljs-tag">&lt;/<span class="hljs-name">mat-error</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">mat-error</span> [<span class="hljs-attr">hidden</span>]=<span class="hljs-string">"formControl | snilsErrors: 'format'"</span>&gt;</span>   <span class="hljs-tag">&lt;/<span class="hljs-name">mat-error</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">mat-error</span> [<span class="hljs-attr">hidden</span>]=<span class="hljs-string">"formControl | snilsErrors: 'snils'"</span>&gt;</span> <span class="hljs-tag">&lt;/<span class="hljs-name">mat-error</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">mat-form-field</span>&gt;</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La pregunta es, ¬øcu√°l es este formulario? Control | </font><font style="vertical-align: inherit;">snilsErrors? </font><font style="vertical-align: inherit;">Esta es una tuber√≠a personalizada para mostrar errores, ahora la crearemos. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">snils-errors.pipe.ts</font></font></b><br>
<br>
<pre><code class="javascript hljs">type ErrorType = <span class="hljs-string">'required'</span> | <span class="hljs-string">'format'</span> | <span class="hljs-string">'snils'</span>;<font></font>
<font></font>
@Pipe({<font></font>
  <span class="hljs-attr">name</span>: <span class="hljs-string">'snilsErrors'</span>,
  <span class="hljs-attr">pure</span>: <span class="hljs-literal">false</span>,<font></font>
})<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SnilsErrorsPipe</span> <span class="hljs-title">implements</span> <span class="hljs-title">PipeTransform</span> </span>{<font></font>
<font></font>
  transform(control: AbstractControl, <span class="hljs-attr">errorrType</span>: ErrorType): boolean {
    <span class="hljs-keyword">switch</span> (errorrType) {
      <span class="hljs-keyword">case</span> <span class="hljs-string">'required'</span>: <span class="hljs-keyword">return</span> !control.hasError(<span class="hljs-string">'required'</span>);
      <span class="hljs-keyword">case</span> <span class="hljs-string">'format'</span>: <span class="hljs-keyword">return</span> !control.hasError(<span class="hljs-string">'Mask error'</span>);
      <span class="hljs-keyword">case</span> <span class="hljs-string">'snils'</span>: <span class="hljs-keyword">return</span> control.hasError(<span class="hljs-string">'Mask error'</span>) || !control.hasError(<span class="hljs-string">'snils'</span>);
      <span class="hljs-keyword">default</span>: <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<font></font>
    }<font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La tuber√≠a no est√° limpia, lo que significa que se ejecutar√° cada vez que se detecten cambios. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pipe acepta un par√°metro de tipo de error y detecta errores de tres tipos:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ‚ÄúObligatorio‚Äù: este error proviene de la directiva angular RequiredValidator incorporada</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> "Snils" - este error es de nuestro validador snilsValidator</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Error de m√°scara": este error de la directiva MaskDirective de la biblioteca ngx-mask</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y devuelve un valor booleano: ¬øexiste tal error o no? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora, veamos el c√≥digo del componente </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">input-snils.component.ts</font></font></b><br>
<br>
<pre><code class="javascript hljs">@Component({
  <span class="hljs-attr">selector</span>: <span class="hljs-string">'app-input-snils'</span>,
  <span class="hljs-attr">templateUrl</span>: <span class="hljs-string">'./input-snils.component.html'</span>,
  <span class="hljs-attr">styleUrls</span>: [<span class="hljs-string">'./input-snils.component.css'</span>],
  <span class="hljs-attr">encapsulation</span>: ViewEncapsulation.None,
  <span class="hljs-attr">providers</span>: [<font></font>
    {<font></font>
      <span class="hljs-attr">provide</span>: NG_VALUE_ACCESSOR,
      <span class="hljs-attr">useExisting</span>: forwardRef(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> InputSnilsComponent),
      <span class="hljs-attr">multi</span>: <span class="hljs-literal">true</span><font></font>
    },<font></font>
    {<font></font>
      <span class="hljs-attr">provide</span>: NG_VALIDATORS,
      <span class="hljs-attr">useExisting</span>: forwardRef(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> InputSnilsComponent),
      <span class="hljs-attr">multi</span>: <span class="hljs-literal">true</span>,<font></font>
    },<font></font>
    {<font></font>
      <span class="hljs-attr">provide</span>: STATE_VALUE_ACCESSOR,
      <span class="hljs-attr">useExisting</span>: forwardRef(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> InputSnilsComponent),<font></font>
    },<font></font>
  ]<font></font>
})<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">InputSnilsComponent</span> <span class="hljs-title">implements</span> <span class="hljs-title">OnInit</span>, <span class="hljs-title">ControlValueAccessor</span>, <span class="hljs-title">StateValueAccessor</span>, <span class="hljs-title">OnDestroy</span> </span>{<font></font>
  public mask = <span class="hljs-string">'000-000-000 00'</span>;<font></font>
  public formControl = <span class="hljs-keyword">new</span> FormControl(<span class="hljs-string">''</span>, [snilsValidator]);<font></font>
  private sub = <span class="hljs-keyword">new</span> Subscription();<font></font>
<font></font>
  @Input() readonly: boolean;<font></font>
  @Input() placeholder = <span class="hljs-string">''</span>;<font></font>
  @Input() tabIndex = <span class="hljs-number">0</span>;<font></font>
  @Input() required: boolean;<font></font>
<font></font>
  private onChange = <span class="hljs-function">(<span class="hljs-params">value: any</span>) =&gt;</span> { };<font></font>
  private onTouched = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> { };<font></font>
  registerOnChange = <span class="hljs-function">(<span class="hljs-params">fn: (value: any</span>) =&gt;</span> {}) =&gt; <span class="hljs-keyword">this</span>.onChange = fn;<font></font>
  registerOnTouched = <span class="hljs-function">(<span class="hljs-params">fn: (</span>) =&gt;</span> {}) =&gt; <span class="hljs-keyword">this</span>.onTouched = fn;<font></font>
<font></font>
<font></font>
  ngOnInit() {<font></font>
    <span class="hljs-keyword">this</span>.sub = <span class="hljs-keyword">this</span>.linkForm();<font></font>
  }<font></font>
<font></font>
  ngOnDestroy() {<font></font>
    <span class="hljs-keyword">this</span>.sub.unsubscribe();<font></font>
  }<font></font>
<font></font>
  private linkForm(): Subscription {<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.formControl.valueChanges.subscribe(<span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> {
      <span class="hljs-keyword">this</span>.onTouched();
      <span class="hljs-keyword">this</span>.onChange(value);<font></font>
    });<font></font>
  }<font></font>
<font></font>
  writeValue(outsideValue: string): <span class="hljs-keyword">void</span> {
    <span class="hljs-keyword">if</span> (outsideValue) {
      <span class="hljs-keyword">this</span>.onTouched();<font></font>
    }<font></font>
    <span class="hljs-keyword">this</span>.formControl.setValue(outsideValue, { <span class="hljs-attr">emitEvent</span>: <span class="hljs-literal">false</span> });<font></font>
  }<font></font>
<font></font>
  setDisabledState(disabled: boolean) {<font></font>
    disabled<font></font>
      ? <span class="hljs-keyword">this</span>.formControl.disable()<font></font>
      : <span class="hljs-keyword">this</span>.formControl.enable();<font></font>
  }<font></font>
<font></font>
  validate(): ValidationErrors | <span class="hljs-literal">null</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.formControl.errors;<font></font>
  }<font></font>
<font></font>
  setPristineState(pristine: boolean) {<font></font>
    pristine<font></font>
      ? <span class="hljs-keyword">this</span>.formControl.markAsPristine()<font></font>
      : <span class="hljs-keyword">this</span>.formControl.markAsDirty();<font></font>
<font></font>
    <span class="hljs-keyword">this</span>.formControl.updateValueAndValidity({ <span class="hljs-attr">emitEvent</span>: <span class="hljs-literal">false</span> });<font></font>
  }<font></font>
<font></font>
  setTouchedState(touched: boolean) {<font></font>
    touched<font></font>
      ? <span class="hljs-keyword">this</span>.formControl.markAsTouched()<font></font>
      : <span class="hljs-keyword">this</span>.formControl.markAsUntouched();<font></font>
<font></font>
    <span class="hljs-keyword">this</span>.formControl.updateValueAndValidity({ <span class="hljs-attr">emitEvent</span>: <span class="hljs-literal">false</span> });<font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hay muchas cosas y no describir√© c√≥mo trabajar con ControlValueAccessor, puede leer sobre esto en la documentaci√≥n angular, o por ejemplo aqu√≠ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tyapk.ru/blog/post/angular-custom-form-field-control</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
¬øQu√© necesita una explicaci√≥n aqu√≠? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Primero, usamos el control interno del formulario formControl, lo adjuntamos a sus cambios para enviar el cambio de valor a la parte superior, a trav√©s de los m√©todos onChange y onTouched. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y viceversa, los cambios en el formulario externo nos llegan a trav√©s de los m√©todos writeValue y setDisabledState y se reflejan en formControl. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En segundo lugar, hay un token STATE_VALUE_ACCESSOR desconocido, una interfaz StateValueAccessor desconocida y un par de m√©todos setPristineState y setTouchedState adicionales. Se explicar√°n m√°s adelante. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mientras tanto, cree un m√≥dulo personal para el componente</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">input-snils.module.ts</font></font></b><br>
<br>
<pre><code class="javascript hljs">@NgModule({
  <span class="hljs-attr">declarations</span>: [InputSnilsComponent, SnilsErrorsPipe],
  <span class="hljs-attr">imports</span>: [<font></font>
    CommonModule,<font></font>
    MatFormFieldModule,<font></font>
    MatInputModule,<font></font>
    NgxMaskModule.forChild(),<font></font>
    ReactiveFormsModule,<font></font>
  ],<font></font>
  <span class="hljs-attr">exports</span>: [InputSnilsComponent],<font></font>
})<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">InputSnilsModule</span> </span>{ }</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pasando estados a un art√≠culo</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cuando se utiliza ControlValueAccessor, existe el siguiente matiz: La </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
forma reactiva ha tocado y estados pr√≠stinos (en adelante, simplemente "estados").</font></font><br>
 <br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pr√≠stino es inicialmente verdadero y cambia a falso cuando el valor de control se cambia desde la plantilla</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tocado inicialmente falso y cambia a verdadero cuando el control pierde el foco</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tambi√©n se pueden configurar a la fuerza, pero esto no afectar√° el control dentro del ControlValueAccessor, para nuestro componente es formControl. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y los errores de mat-error se representan solo cuando se toca el control actual. Tenemos el requisito de que el formulario restaurado muestre inmediatamente los errores de validaci√≥n, por lo que FormPersistDirective ejecuta markAllAsTouched si el valor del formulario se ha le√≠do desde localStorage. Pero los errores mat no se mostrar√°n, ya que est√°n dentro de nuestro componente ControlValueAccessor, dependen del control formControl, y de este control independiente el estado tocado sigue siendo falso. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Necesitamos un mecanismo para lanzar estos estados. Para hacer esto, puede hacer su propio an√°logo de ControlValueAccessor, llam√©moslo StateValueAccessor. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Primero necesitas crear un token y una interfaz.</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">state-value-accessor.token.ts</font></font></b><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> STATE_VALUE_ACCESSOR = <span class="hljs-keyword">new</span> InjectionToken&lt;StateValueAccessor&gt;(<span class="hljs-string">'STATE_VALUE_ACCESSOR'</span>);</code></pre><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">state-value-accessor.interface.ts</font></font></b><br>
<pre><code class="javascript hljs"><span class="hljs-keyword">export</span> interface StateValueAccessor {<font></font>
  setTouchedState?(touched: boolean): <span class="hljs-keyword">void</span>;<font></font>
  setPristineState?(pristine: boolean): <span class="hljs-keyword">void</span>;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La interfaz describe los requisitos para que la clase que lo implementa tenga (opcionalmente) dos m√©todos espec√≠ficos. </font><font style="vertical-align: inherit;">Estos m√©todos se implementan en InputSnilsComponent y fuerzan estos estados en el control interno formControl. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces necesita una directiva para vincular NgControl y nuestro componente que implementa StateValueAccessor. </font><font style="vertical-align: inherit;">Es imposible determinar el momento en que cambia el estado de un formulario, pero sabemos que cada vez que un formulario cambia, Angular marca el componente como esperando un ciclo de detecci√≥n de cambio. </font><font style="vertical-align: inherit;">El componente probado y sus descendientes ejecutan el gancho de ciclo de vida ngDoCheck, que utilizar√° nuestra directiva.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FormStatusesDirective</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cree la directiva </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">form-statuses.directive.ts</font></font></b><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> noop: <span class="hljs-function">(<span class="hljs-params">v?: boolean</span>) =&gt;</span> <span class="hljs-keyword">void</span> = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> { };<font></font>
<font></font>
@Directive({<font></font>
  <span class="hljs-attr">selector</span>: <span class="hljs-string">'[formControlName],[ngModel],[formControl]'</span> <span class="hljs-comment">// tslint:disable-line: directive-selector</span><font></font>
})<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FormStatusesDirective</span> <span class="hljs-title">implements</span> <span class="hljs-title">DoCheck</span>, <span class="hljs-title">OnInit</span> </span>{<font></font>
  private setSVATouched = noop;<font></font>
  private setSVAPristine = noop;<font></font>
<font></font>
  <span class="hljs-keyword">constructor</span>(<font></font>
    @Self() private control: NgControl,<font></font>
    @Self() @Optional()  @Inject(STATE_VALUE_ACCESSOR) private stateValueAccessor: StateValueAccessor,<font></font>
  ) { }<font></font>
<font></font>
  ngOnInit() {<font></font>
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.stateValueAccessor?.setTouchedState) {
      <span class="hljs-keyword">this</span>.setSVATouched = wrapIfChanges(<span class="hljs-function"><span class="hljs-params">touched</span> =&gt;</span> <span class="hljs-keyword">this</span>.stateValueAccessor.setTouchedState(touched));<font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.stateValueAccessor?.setPristineState) {
      <span class="hljs-keyword">this</span>.setSVAPristine = wrapIfChanges(<span class="hljs-function"><span class="hljs-params">pristine</span> =&gt;</span> <span class="hljs-keyword">this</span>.stateValueAccessor.setPristineState(pristine));<font></font>
    }<font></font>
  }<font></font>
<font></font>
  ngDoCheck() {<font></font>
    <span class="hljs-keyword">this</span>.setSVAPristine(<span class="hljs-keyword">this</span>.control.pristine);
    <span class="hljs-keyword">this</span>.setSVATouched(<span class="hljs-keyword">this</span>.control.touched);<font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
FormStatusesDirective se superpone a todos los controles posibles y verifica la presencia de StateValueAccessor. </font><font style="vertical-align: inherit;">Para hacer esto, se solicita una dependencia opcional del token STATE_VALUE_ACCESSOR del inyector, que el componente que implementa StateValueAccessor deber√≠a haber verificado. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si el token no encuentra nada, entonces no sucede nada, los m√©todos setSVATouched y setSVAPristine ser√°n solo funciones vac√≠as. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si se encuentra StateValueAccessor, se llamar√° a sus m√©todos setTouchedState y setPristineState para cada cambio de estado detectado. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Queda por proporcionar a la directiva un m√≥dulo para exportar </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">form-statuses.module.ts</font></font></b><br>
<br>
<pre><code class="javascript hljs">@NgModule({
  <span class="hljs-attr">declarations</span>: [FormStatusesDirective],
  <span class="hljs-attr">exports</span>: [FormStatusesDirective]<font></font>
})<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FormStatusesModule</span> </span>{ }</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pagina principal</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora necesita crear el formulario en s√≠. </font><font style="vertical-align: inherit;">Para no hacer un esc√°ndalo, col√≥quelo en la p√°gina principal de AppComponent. </font><font style="vertical-align: inherit;">Por supuesto, en una aplicaci√≥n real, es mejor crear un componente separado para el formulario. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Plantilla </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">App.component.html</font></font></b><br>
<br>
<pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">section</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-wrapper"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">form</span>
    <span class="hljs-attr">class</span>=<span class="hljs-string">"form"</span>
    [<span class="hljs-attr">formGroup</span>]=<span class="hljs-string">"form"</span>
    <span class="hljs-attr">formPersist</span>=<span class="hljs-string">"inputSnils"</span>
  &gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">app-input-snils</span>
      <span class="hljs-attr">class</span>=<span class="hljs-string">"input-snils"</span>
      <span class="hljs-attr">formControlName</span>=<span class="hljs-string">"snils"</span>
      [<span class="hljs-attr">required</span>]=<span class="hljs-string">"true"</span>
    &gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">app-input-snils</span>&gt;</span><font></font>
<font></font>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span>
      <span class="hljs-attr">class</span>=<span class="hljs-string">"ready-button"</span>
      <span class="hljs-attr">mat-raised-button</span>
      [<span class="hljs-attr">disabled</span>]=<span class="hljs-string">"form.invalid"</span>
      <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span>
    &gt;</span><font></font>
      Submit<font></font>
    <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La directiva FormPersistDirective se cuelga en el formulario, Angular lo aprende a trav√©s del selector de formulario [formPersist]. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La plantilla debe estar provista de variables, </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hag√°mosla app.component.ts</font></font></b><br>
<br>
<pre><code class="javascript hljs">@Component({
  <span class="hljs-attr">selector</span>: <span class="hljs-string">'app-root'</span>,
  <span class="hljs-attr">templateUrl</span>: <span class="hljs-string">'./app.component.html'</span>,
  <span class="hljs-attr">styleUrls</span>: [<span class="hljs-string">'./app.component.css'</span>]<font></font>
})<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AppComponent</span> </span>{<font></font>
  public form = <span class="hljs-keyword">new</span> FormGroup({
    <span class="hljs-attr">snils</span>: <span class="hljs-keyword">new</span> FormControl(<span class="hljs-string">''</span>, [Validators.required])<font></font>
  });<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El c√≥digo de componente con el formulario sali√≥ extremadamente simple y no contiene nada superfluo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se ve as√≠: </font></font><br>
<img src="https://habrastorage.org/webt/qb/qa/ko/qbqakozek8aqxafpbojkbn3b65y.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El c√≥digo fuente se puede tomar en </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub.</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
La demostraci√≥n en </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">stackblitz</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
El c√≥digo en stackblitz es ligeramente diferente, debido a que la versi√≥n mecanografiada a√∫n no es compatible con el operador de elvis. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adem√°s, todav√≠a hay matices que no se reflejan en el art√≠culo, si alguien lo necesita, lo complementar√©.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es491050/index.html">Inscripci√≥n para NeoQUEST-2020: Abierto mundial post-apocal√≠ptico</a></li>
<li><a href="../es491052/index.html">C√≥mo y por qu√© los curadores de la HSE de San Petersburgo ayudan a los programadores de primer a√±o</a></li>
<li><a href="../es491054/index.html">C√≥mo firmar correspondencia por correo electr√≥nico con una clave GPG usando tokens PKCS # 11</a></li>
<li><a href="../es491056/index.html">Ampere Altra: el primer procesador ARM de 80 n√∫cleos del mundo</a></li>
<li><a href="../es491058/index.html">Mortalidad, mortalidad, coronavirus y matan</a></li>
<li><a href="../es491076/index.html">Trabajo inteligente con RabbitMQ en NestJS</a></li>
<li><a href="../es491084/index.html">saneex.c: try / catch / finalmente basado en setjmp / longjmp (C99) m√°s r√°pido que las excepciones est√°ndar de C ++ ¬π</a></li>
<li><a href="../es491086/index.html">Biblioteca JavaScript de Webix a trav√©s de los ojos de un principiante. Parte 6. Interacci√≥n del servidor</a></li>
<li><a href="../es491088/index.html">GitHub: nueva biblioteca de c√≥digo abierto para OSINT</a></li>
<li><a href="../es491090/index.html">Convierta documentos de texto a xml en C #</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>