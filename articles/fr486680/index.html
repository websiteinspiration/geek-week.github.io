<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§∑üèΩ üôè üöØ ML, VR & Robots (et un peu de cloud) üõåüèø üòü üßû</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour √† tous! 
 
 Je veux parler d'un projet tr√®s ennuyeux o√π la robotique, le Machine Learning (et ensemble c'est le Robot Learning), la r√©alit√© vi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>ML, VR & Robots (et un peu de cloud)</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/recognitor/blog/486680/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bonjour √† tous! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je veux parler d'un projet tr√®s ennuyeux o√π la robotique, le Machine Learning (et ensemble c'est le Robot Learning), la r√©alit√© virtuelle et un peu de technologie cloud se sont crois√©s. </font><font style="vertical-align: inherit;">Et tout cela a du sens. </font><font style="vertical-align: inherit;">Apr√®s tout, il est tr√®s pratique de passer √† un robot, de montrer quoi faire, puis de former des poids sur le serveur ML en utilisant les donn√©es stock√©es. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sous la coupe, nous dirons comment cela fonctionne maintenant, et quelques d√©tails sur chacun des aspects qui devaient √™tre d√©velopp√©s.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/t0/kx/wi/t0kxwiicqakswvomnrwz-iycc2o.jpeg"><br>
<a name="habracut"></a><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pourquoi</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour commencer, cela vaut la peine d'√™tre r√©v√©l√©. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il semble que des robots arm√©s de Deep Learning soient sur le point d'√©vincer les gens de leur travail partout. </font><font style="vertical-align: inherit;">En fait, tout n'est pas si fluide. </font><font style="vertical-align: inherit;">L√† o√π les actions sont strictement r√©p√©t√©es, les processus sont d√©j√† tr√®s bien automatis√©s. </font><font style="vertical-align: inherit;">Si nous parlons de ¬´robots intelligents¬ª, c'est-√†-dire d'applications o√π la vision par ordinateur et les algorithmes suffisent d√©j√†. </font><font style="vertical-align: inherit;">Mais il y a aussi beaucoup d'histoires extr√™mement compliqu√©es. </font><font style="vertical-align: inherit;">Les robots peuvent difficilement faire face √† la vari√©t√© des objets √† traiter et √† la diversit√© de l'environnement.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Points cl√©s</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il y a 3 √©l√©ments cl√©s en termes de mise en ≈ìuvre qui ne se trouvent pas encore partout: </font></font><br>
<br>
<ul>
<li>       (data-driven learning). ..   ,    ,     ,    . ,     .</li>
<li>   ()    </li>
<li>  -  (Human-machine collaboration) </li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La seconde est √©galement importante car en ce moment, nous observerons un changement dans les approches de l'apprentissage, des algorithmes, derri√®re eux et des outils informatiques. </font><font style="vertical-align: inherit;">Les algorithmes de perception et de contr√¥le deviendront plus flexibles. </font><font style="vertical-align: inherit;">Une mise √† niveau du robot co√ªte de l'argent. </font><font style="vertical-align: inherit;">Et la calculatrice peut √™tre utilis√©e plus efficacement si elle sert plusieurs robots √† la fois. </font><font style="vertical-align: inherit;">Ce concept est appel√© ¬´robotique cloud¬ª. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Avec ce dernier, tout est simple - l'IA n'est pas suffisamment d√©velopp√©e √† l'heure actuelle pour fournir une fiabilit√© et une pr√©cision √† 100% dans toutes les situations requises par les entreprises. </font><font style="vertical-align: inherit;">Par cons√©quent, l'op√©rateur superviseur, qui peut parfois aider les robots des salles, ne sera pas bless√©.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sch√®me</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour commencer, sur une plate-forme logicielle / r√©seau qui fournit toutes les fonctionnalit√©s d√©crites: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fd/6y/fi/fd6yfi2svby-3l7hkn9lxxt3neo.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Composants:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le robot envoie un flux vid√©o 3D au serveur et re√ßoit le contr√¥le en r√©ponse. </font></font></li>
<li>    :  - ,      (, , , )</li>
<li>  ML  ( ),        ,   ,  .      ‚Äî  3D   ,     . </li>
<li> -  ,  3D       ,   UI   .   ‚Äî . </li>
</ol><br>
<h4> </h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il existe 2 modes de fonctionnement du robot: automatique et manuel. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En mode manuel, le robot fonctionne si le service ML n'est pas encore form√©. </font><font style="vertical-align: inherit;">Ensuite, le robot passe de l'automatique au manuel soit √† la demande de l'op√©rateur (j'ai vu des comportements √©tranges en regardant le robot), soit lorsque les services ML eux-m√™mes d√©tectent une anomalie. </font><font style="vertical-align: inherit;">√Ä propos de la d√©tection des anomalies sera plus tard - c'est une partie tr√®s importante, sans laquelle il est impossible d'appliquer l'approche propos√©e. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'√©volution du contr√¥le est la suivante:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La t√¢che du robot est formul√©e en termes lisibles par l'homme et des indicateurs de performance sont d√©crits.</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'op√©rateur se connecte au robot en VR et ex√©cute la t√¢che dans le flux de travail existant pendant un certain temps</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La partie ML est form√©e sur les donn√©es re√ßues</font></font><br>
</li>
<li>      ,     ML             <br>
</li>
<li>              <br>
</li>
</ol><br>
<h4>       3D</h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tr√®s souvent, les robots utilisent l'environnement ROS (robot operating system), qui est en fait un cadre de gestion des ¬´n≈ìuds¬ª (n≈ìuds), chacun fournissant une partie des fonctionnalit√©s du robot. En g√©n√©ral, il s'agit d'une fa√ßon relativement pratique de programmer des robots, qui ressemble √† certains √©gards √† l'architecture de microservices des applications Web. Le principal avantage de ROS est la norme de l'industrie et il existe d√©j√† un grand nombre de modules n√©cessaires pour cr√©er un robot. M√™me les bras robotiques industriels peuvent avoir un module d'interface ROS. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La chose la plus simple est de cr√©er un mod√®le de pont entre notre partie serveur et ROS. Par exemple, par </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">exemple</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Maintenant, notre projet utilise une version plus d√©velopp√©e du ¬´n≈ìud¬ª ROS, qui se connecte et interroge le microservice du registre auquel le serveur de relais un robot particulier peut se connecter. Le code source n'est donn√© qu'√† titre d'exemple d'instructions pour l'installation du module ROS. Au d√©but, lorsque vous ma√Ætrisez ce framework (ROS), tout semble assez hostile, mais la documentation est assez bonne, et apr√®s quelques semaines, les d√©veloppeurs commencent √† utiliser ses fonctionnalit√©s en toute confiance. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
D'int√©ressant - le probl√®me de la compression du flux de donn√©es 3D, qui doit √™tre produit directement sur le robot.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ce n'est pas si facile de compresser la carte de profondeur. </font><font style="vertical-align: inherit;">M√™me avec un petit degr√© de compression du flux RVB, une distorsion locale tr√®s grave de la luminosit√© par rapport au vrai en pixels aux fronti√®res ou lors du d√©placement d'objets est autoris√©e. </font><font style="vertical-align: inherit;">L'≈ìil ne le remarque presque pas, mais d√®s que les m√™mes distorsions sont permises dans la carte de profondeur, lors du rendu 3D tout devient tr√®s mauvais: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/kv/1l/6-/kv1l6-qgxaqxhsf1a-zl67hymtk.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
(√† partir de l' </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">article</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ces d√©fauts sur les bords g√¢chent grandement la sc√®ne 3D, car </font><font style="vertical-align: inherit;">il y a juste beaucoup de d√©chets dans l'air.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons commenc√© √† utiliser la compression image par image - JPEG pour RVB et PNG pour une carte de profondeur avec de petits hacks. </font><font style="vertical-align: inherit;">Cette m√©thode comprime le flux 30FPS pour une r√©solution de scanner 3D de 640x480 √† 25 Mbps. </font><font style="vertical-align: inherit;">Une meilleure compression peut √©galement √™tre fournie si le trafic est critique pour l'application. </font><font style="vertical-align: inherit;">Il existe des codecs de flux 3D commerciaux qui peuvent √©galement √™tre utilis√©s pour compresser ce flux.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contr√¥le de r√©alit√© virtuelle</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apr√®s avoir calibr√© le cadre de r√©f√©rence de la cam√©ra et du robot (et nous avons d√©j√† √©crit </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">un article sur le calibrage</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), le bras du robot peut √™tre contr√¥l√© en r√©alit√© virtuelle. </font><font style="vertical-align: inherit;">Le contr√¥leur d√©finit √† la fois la position en 3D XYZ et l'orientation. </font><font style="vertical-align: inherit;">Pour certains roboruk, seules 3 coordonn√©es suffiront, mais avec un grand nombre de degr√©s de libert√©, l'orientation de l'outil sp√©cifi√©e par le contr√¥leur doit √©galement √™tre transmise. </font><font style="vertical-align: inherit;">De plus, il y a suffisamment de commandes sur les contr√¥leurs pour ex√©cuter les commandes du robot telles que la mise sous / hors tension de la pompe, le contr√¥le de la pince, etc. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Initialement, il a √©t√© d√©cid√© d'utiliser le framework JavaScript pour la r√©alit√© virtuelle A-frame, bas√© sur le moteur WebVR. </font><font style="vertical-align: inherit;">Et les premiers r√©sultats (d√©monstration vid√©o √† la fin de l'article pour le bras √† 4 coordonn√©es) ont √©t√© obtenus sur le cadre A.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En fait, il s'est av√©r√© que WebVR (ou A-frame) √©tait une solution infructueuse pour plusieurs raisons:</font></font><br>
<br>
<ul>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">compatibilit√© principalement avec FireFox</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , et c'est dans FireFox que le cadre A-frame n'a pas lib√©r√© de ressources de texture (le reste des navigateurs a copi√©) jusqu'√† ce que la consommation de m√©moire atteigne 16 Go.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">interaction limit√©e avec les contr√¥leurs VR et le casque. </font><font style="vertical-align: inherit;">Ainsi, par exemple, il n'a pas √©t√© possible d'ajouter des marques suppl√©mentaires avec lesquelles vous pouvez d√©finir la position, par exemple, des coudes de l'op√©rateur.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'application n√©cessitait du multithreading ou plusieurs processus. </font><font style="vertical-align: inherit;">Dans un thread / processus, il √©tait n√©cessaire de d√©baller les images vid√©o, dans un autre - dessiner. </font><font style="vertical-align: inherit;">En cons√©quence, tout a √©t√© organis√© par des travailleurs, mais le temps de d√©ballage a atteint 30 ms, et le rendu en VR devrait √™tre effectu√© √† une fr√©quence de 90FPS.</font></font><br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Toutes ces lacunes ont entra√Æn√© le fait que le rendu du cadre n'a pas eu le temps dans les 10 ms allou√©s et qu'il y a eu des secousses tr√®s d√©sagr√©ables en VR. Probablement, tout pouvait √™tre surmont√©, mais l'identit√© de chaque navigateur √©tait un peu aga√ßante. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons maintenant d√©cid√© de partir pour le port C #, OpenTK et C # de la biblioth√®que OpenVR. Il existe encore une alternative: l'unit√©. Ils √©crivent que Unity est pour les d√©butants ... mais difficile. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La chose la plus importante qui devait √™tre trouv√©e et connue pour gagner en libert√©:</font></font><br>
<br>
<pre><code class="cs hljs">VRTextureBounds_t bounds = <span class="hljs-keyword">new</span> VRTextureBounds_t() { uMin = <span class="hljs-number">0</span>, vMin = <span class="hljs-number">0</span>, uMax = <span class="hljs-number">1f</span>, vMax = <span class="hljs-number">1f</span> }; <font></font>
OpenVR.Compositor.Submit(EVREye.Eye_Left, <span class="hljs-keyword">ref</span> leftTexture, <span class="hljs-keyword">ref</span> bounds, EVRSubmitFlags.Submit_Default);<font></font>
OpenVR.Compositor.Submit(EVREye.Eye_Right, <span class="hljs-keyword">ref</span> rightTexture, <span class="hljs-keyword">ref</span> bounds, EVRSubmitFlags.Submit_Default);
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
(c'est le code pour envoyer deux textures aux yeux gauche et droit du casque) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
i.e. </font><font style="vertical-align: inherit;">dessinez dans OpenGL dans la texture ce que diff√©rents yeux voient et envoyez-le dans des verres. </font><font style="vertical-align: inherit;">La joie ne connaissait pas de limites lorsqu'elle s'est av√©r√©e remplir l'≈ìil gauche de rouge et la droite de bleu. </font><font style="vertical-align: inherit;">Juste quelques jours et maintenant la profondeur et la carte RVB provenant de webSocket ont √©t√© transf√©r√©es au mod√®le polygonal en 10 ms au lieu de 30 sur JS. </font><font style="vertical-align: inherit;">Et puis il suffit d'interroger les coordonn√©es et les boutons des contr√¥leurs, d'entrer dans le syst√®me d'√©v√©nements pour les boutons, de traiter les clics des utilisateurs, d'entrer dans la State Machine pour l'interface utilisateur, et maintenant vous pouvez attraper un verre de l'espresso:</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/EuBNaGZctf8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, la qualit√© du Realsense D435 est quelque peu d√©primante, mais elle passera d√®s que nous installerons au moins </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">un scanner 3D aussi int√©ressant de Microsoft</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , dont le nuage de points est beaucoup plus pr√©cis.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Du c√¥t√© serveur</font></font></h4><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Serveur de relais</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
L'√©l√©ment fonctionnel principal est le relais de serveur (serveur au milieu), qui re√ßoit un flux vid√©o du robot avec des images 3D et des lectures de capteur et l'√©tat du robot et le distribue aux consommateurs. Entrer des trames et des lectures de capteur emball√©es par TCP / IP. La distribution aux consommateurs est effectu√©e par des sockets Web (un m√©canisme tr√®s pratique pour le streaming vers plusieurs consommateurs, y compris un navigateur). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De plus, le serveur interm√©diaire stocke le flux de donn√©es dans le stockage cloud S3 afin qu'il puisse ensuite √™tre utilis√© pour la formation. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Chaque serveur relais prend en charge l'API http, qui vous permet de conna√Ætre son √©tat actuel, ce qui est pratique pour surveiller les connexions actuelles.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La t√¢che de relais est assez difficile, √† la fois du point de vue de l'informatique et du point de vue du trafic. Par cons√©quent, nous avons suivi ici la logique selon laquelle les serveurs relais sont d√©ploy√©s sur une vari√©t√© de serveurs cloud. Et cela signifie que vous devez garder une trace de qui se connecte o√π (en particulier si les robots et les op√©rateurs sont dans des r√©gions diff√©rentes). </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S'inscrire</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Le plus fiable maintenant sera difficile de d√©finir pour chaque robot les serveurs auxquels il peut se connecter (la redondance ne nuira pas). Le service de gestion ML est associ√© au robot, il interroge le serveur relais pour d√©terminer celui auquel le robot est connect√© et est connect√© √† celui correspondant, √† condition, bien s√ªr, qu'il dispose de droits suffisants pour cela. L'application de l'op√©rateur fonctionne de mani√®re similaire.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le plus agr√©able! Du fait que la formation des robots est un service, le service n'est visible que pour nous √† l'int√©rieur. Ainsi, son frontal peut √™tre aussi pratique que possible pour nous! Ceux. c'est une console dans le navigateur (il y a une biblioth√®que </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">terminalJS</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> avec une grande simplicit√© </font><font style="vertical-align: inherit;">, qui est tr√®s facile √† modifier si vous voulez des fonctions suppl√©mentaires, telles que l'auto-compl√©tion TAB ou la lecture de l'historique des appels) et cela ressemble √† ceci: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/wl/vl/yo/wlvlyojuytiepjvhzexlxr-ixcq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ceci, bien s√ªr, est un sujet distinct pour la discussion, pourquoi la ligne de commande Tellement confortable. Soit dit en passant, il est particuli√®rement pratique de faire des tests unitaires d'un tel frontend.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En plus de l'API http, ce service impl√©mente un m√©canisme d'enregistrement des utilisateurs avec des jetons temporaires, des op√©rateurs de connexion / d√©connexion, des administrateurs et des robots, un support de session, des cl√©s de cryptage de session pour le cryptage du trafic entre le serveur relais et le robot. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout cela se fait en Python avec Flask - une pile tr√®s proche pour les d√©veloppeurs ML (c'est-√†-dire nous). </font><font style="vertical-align: inherit;">Oui, en outre, l'infrastructure CI / CD existante pour les microservices est en bons termes avec Flask.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Probl√®me de retard</font></font></h4> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si nous voulons contr√¥ler les manipulateurs en temps r√©el, le d√©lai minimum est extr√™mement utile. </font><font style="vertical-align: inherit;">Si le retard devient trop important (plus de 300 ms), il est alors tr√®s difficile de contr√¥ler les manipulateurs en fonction de l'image dans le casque virtuel. </font><font style="vertical-align: inherit;">Dans notre solution, en raison de la compression image par image (c'est-√†-dire qu'il n'y a pas de mise en m√©moire tampon) et de l'absence d'outils standard comme GStreamer, le retard, m√™me en tenant compte du serveur interm√©diaire, est d'environ 150-200 ms. </font><font style="vertical-align: inherit;">Le temps de transmission sur le r√©seau d'entre eux est d'environ 80 ms. </font><font style="vertical-align: inherit;">Le reste du retard est caus√© par la cam√©ra Realsense D435 et la fr√©quence de capture limit√©e.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bien s√ªr, il s'agit d'un probl√®me de pleine hauteur qui se pose en mode ¬´tracking¬ª, lorsque le manipulateur dans sa r√©alit√© suit constamment le contr√¥leur de l'op√©rateur en r√©alit√© virtuelle. </font><font style="vertical-align: inherit;">Dans le mode de d√©placement vers un point XYZ donn√©, le retard ne pose aucun probl√®me √† l'op√©rateur.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Partie ML</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il existe 2 types de services: la gestion et la formation. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le service de formation collecte les donn√©es stock√©es dans le stockage S3 et commence la r√©-formation des poids du mod√®le. </font><font style="vertical-align: inherit;">A la fin de la formation, des poids sont envoy√©s au service de gestion. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le service de gestion n'est pas diff√©rent en termes de donn√©es d'entr√©e et de sortie de l'application de l'op√©rateur. </font><font style="vertical-align: inherit;">De m√™me, le flux d'entr√©e RGBD (RGB + Depth), les lectures des capteurs et l'√©tat du robot, les commandes de contr√¥le de sortie. </font><font style="vertical-align: inherit;">En raison de cette identit√©, il semble possible de se former dans le cadre du concept de ¬´formation par les donn√©es¬ª.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'√©tat du robot (et les lectures des capteurs) est une histoire cl√© pour ML. Il d√©finit le contexte. Par exemple, un robot aura une machine d'√©tat qui est caract√©ristique de son fonctionnement, ce qui d√©termine en grande partie le type de contr√¥le n√©cessaire. Ces 2 valeurs sont transmises avec chaque trame: le mode de fonctionnement et le vecteur d'√©tat du robot. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Et un peu sur la formation:</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
dans la d√©monstration √† la fin de l'article √©tait la t√¢che de trouver un objet (un cube pour enfants) sur une sc√®ne 3D. Il s'agit d'une t√¢che de base pour les applications pick &amp; place. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La formation √©tait bas√©e sur une paire de cadres ¬´avant et apr√®s¬ª et une d√©signation de cible obtenue avec un contr√¥le manuel: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/n6/v2/s3/n6v2s3v59u7eumxhdh3gxucngxq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En raison de la pr√©sence de deux cartes de profondeur, il √©tait facile de calculer le masque de l'objet d√©plac√© dans le cadre: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/6a/vm/k-/6avmk-ue2jfndgwzy08zdb0qtqe.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De plus, xyz sont projet√©s sur le plan de la cam√©ra et vous pouvez s√©lectionner le voisinage de l'objet captur√©:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ha/_s/o-/ha_so-yh4xmxwsp4dkoo42tct9i.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En fait avec ce quartier et fonctionnera. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous obtenons d'abord XY en entra√Ænant Unet sur un r√©seau convolutionnel pour la segmentation des cubes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, nous devons d√©terminer la profondeur et comprendre si l'image est anormale devant nous. </font><font style="vertical-align: inherit;">Cela se fait en utilisant un encodeur automatique en RVB et un encodeur automatique conditionnel en profondeur. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Architecture de mod√®le pour la formation d'encodeur automatique: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/xf/q4/ex/xfq4exzon5b63cucrz6aqi8kflm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En cons√©quence, la logique de travail:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rechercher un maximum sur la ¬´heat map¬ª (d√©terminer les coordonn√©es angulaires u = x / zv = y / z de l'objet) qui d√©passe le seuil</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">puis l'auto-encodeur reconstruit le voisinage du point trouv√© pour toutes les hypoth√®ses en profondeur (avec un pas donn√© de min_depth √† max_depth) et s√©lectionne la profondeur √† laquelle l'√©cart entre la reconstruction et l'entr√©e est minime</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ayant les coordonn√©es angulaires u, v et la profondeur, vous pouvez obtenir les coordonn√©es x, y, z</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un exemple de reconstruction d'auto-encodeur d'une carte de profondeurs de cube avec une profondeur correctement d√©finie: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/av/1t/bu/av1tbu5dyvflda-_-lpbdw0t0qs.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En partie, l'id√©e d'une m√©thode de recherche de profondeur est bas√©e sur un </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">article sur les ensembles d'auto-encodeurs</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cette approche fonctionne bien pour des objets de formes diverses. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais, en g√©n√©ral, il existe de nombreuses approches diff√©rentes pour trouver un objet XYZ √† partir d'une image RGBD. Bien entendu, il est n√©cessaire en pratique et sur une grande quantit√© de donn√©es de choisir la m√©thode la plus pr√©cise. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il y avait aussi la t√¢che de d√©tecter les anomalies, pour cela nous avons besoin d'un r√©seau convolutionnel de segmentation pour apprendre des masques disponibles. Ensuite, selon ce masque, vous pouvez √©valuer la pr√©cision de la reconstruction de l'encodeur automatique dans la carte de profondeur et RVB. En raison de cet √©cart, on peut d√©cider de la pr√©sence d'une anomalie.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gr√¢ce √† cette m√©thode, il est possible de d√©tecter l'apparition d'objets pr√©c√©demment invisibles dans la trame, qui sont n√©anmoins d√©tect√©s par l'algorithme de recherche principal.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Manifestation</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La v√©rification et le d√©bogage de l'ensemble de la plateforme logicielle cr√©√©e ont √©t√© effectu√©s sur le stand:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cam√©ra 3D Realsense D435</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4 coordonn√©es Dobot Magicien</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Casque VR HTC Vive</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Serveurs sur Yandex Cloud (r√©duit la latence par rapport au cloud AWS)</font></font></li>
</ul><br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/G5rBhaxHL_E" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans la vid√©o, nous enseignons comment trouver un cube dans une sc√®ne 3D en effectuant une t√¢che dans VR pick &amp; place. </font><font style="vertical-align: inherit;">Une cinquantaine d'exemples suffisaient pour s'entra√Æner sur un cube. </font><font style="vertical-align: inherit;">Ensuite, l'objet change et environ 30 autres exemples sont affich√©s. </font><font style="vertical-align: inherit;">Apr√®s le recyclage, le robot peut trouver un nouvel objet. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'ensemble du processus a pris environ 15 minutes, dont environ la moiti√© du poids du mod√®le d'entra√Ænement. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et dans cette vid√©o, YuMi contr√¥le en VR. </font><font style="vertical-align: inherit;">Pour apprendre √† manipuler des objets, vous devez √©valuer l'orientation et l'emplacement de l'outil. </font><font style="vertical-align: inherit;">Les math√©matiques reposent sur un principe similaire, mais en sont maintenant au stade des tests et du d√©veloppement.</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/Q0yTey1srBM" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusion</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le Big Data et le Deep Learning ne sont pas tout. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous modifions l'approche de l'apprentissage, √©voluant vers la fa√ßon dont les gens apprennent de nouvelles choses - en r√©p√©tant ce qu'ils voient. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'appareil math√©matique ¬´sous le capot¬ª, que nous d√©velopperons sur des applications r√©elles, vise le probl√®me de l'interpr√©tation et du contr√¥le contextuels. </font><font style="vertical-align: inherit;">Le contexte ici est des informations naturelles disponibles √† partir de capteurs de robot ou des informations externes sur le processus actuel. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et, plus nous ma√Ætrisons les processus technologiques, plus la structure du ¬´cerveau dans les nuages¬ª sera d√©velopp√©e et ses parties individuelles seront form√©es. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Points forts de cette approche:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">la possibilit√© d'apprendre √† manipuler des objets variables </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">apprendre dans un environnement en √©volution (par exemple, robots mobiles)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">t√¢ches mal structur√©es</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d√©lai de mise sur le march√© court; </font><font style="vertical-align: inherit;">Vous pouvez effectuer la cible m√™me en mode manuel en utilisant les op√©rateurs</font></font><br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Limitation:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">besoin d'Internet fiable et bon</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">des m√©thodes suppl√©mentaires sont n√©cessaires pour atteindre une grande pr√©cision, par exemple, des cam√©ras dans le manipulateur lui-m√™me</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous travaillons actuellement sur l'application de notre approche √† la t√¢che de s√©lection et de placement standard de divers objets. </font><font style="vertical-align: inherit;">Mais il nous semble (naturellement!) Qu'il est capable de plus. </font><font style="vertical-align: inherit;">Avez-vous d'autres id√©es pour vous essayer? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Merci de votre attention!</font></font></div>
      
    </div><p class="reference-to-source js-reference-to-source">Source: https://habr.com/ru/post/undefined/</p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr486670/index.html">Passeport √©lectronique de la F√©d√©ration de Russie, 2020e partie du ballet Marleson</a></li>
<li><a href="../fr486672/index.html">OpenVINO Hackathon: reconna√Ætre la voix et l'√©motion sur le Raspberry Pi</a></li>
<li><a href="../fr486674/index.html">Le condens√© de mati√®res fra√Æches du monde du front-end de la derni√®re semaine n ¬∞ 400 (27 janvier - 2 f√©vrier 2020)</a></li>
<li><a href="../fr486676/index.html">In√©vitabilit√© de la p√©n√©tration du FPGA dans les centres de donn√©es</a></li>
<li><a href="../fr486678/index.html">Quartz dans ASP.NET Core</a></li>
<li><a href="../fr486682/index.html">Docker Compose: simplifiez l'utilisation de Makefile</a></li>
<li><a href="../fr486684/index.html">Ma r√©ponse √† ceux qui croient que la valeur du TDD est exag√©r√©e</a></li>
<li><a href="../fr486686/index.html">√Ä propos de l'impl√©mentation d'une biblioth√®que d'apprentissage en profondeur dans Python</a></li>
<li><a href="../fr486688/index.html">Node.js, Tor, Puppeteer et Cheerio: grattage web anonyme</a></li>
<li><a href="../fr486690/index.html">5 conseils pour √©crire des fonctions fl√©ch√©es de qualit√©</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>