<!doctype html>
<html class="no-js" lang="ar">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>📑 🏧 🏴󠁧󠁢󠁥󠁮󠁧󠁿 نحيا السداسي. الجزء الأول 🐆 🏵️ 👩‍👩‍👦‍👦</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="في مقال سابق ، شاركنا تجربتنا في إنشاء سداسي الأرجل باستخدام تقنية الطباعة ثلاثية الأبعاد. الآن سنتحدث عن مكون البرنامج ، الذي سمح له بالإحياء. 
 
 كا...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>نحيا السداسي. الجزء الأول</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/488810/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">في </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">مقال سابق ،</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> شاركنا تجربتنا في إنشاء سداسي الأرجل باستخدام تقنية الطباعة ثلاثية الأبعاد. </font><font style="vertical-align: inherit;">الآن سنتحدث عن مكون البرنامج ، الذي سمح له بالإحياء. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
كان من المخطط في الأصل تقديم جميع المعلومات في مقال واحد ، ولكن في عملية الكتابة أصبح من الواضح أن مثل هذا العرض سيكون سطحيًا وغير ملهم. </font><font style="vertical-align: inherit;">لذلك ، تقرر كتابة العديد من المقالات مع عرض أكثر تفصيلاً للموضوع.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">جهاز Hexapod</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
حاليا ، يتم استخدام لوحة </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UNO R3 مع Wi-Fi ESP8266</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> كوحدة تحكم رئيسية </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">في الواقع ، هذه اللوحة مع اثنين من وحدات التحكم على متنها ، تتفاعل مع بعضها البعض عبر واجهة UART. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/pm/re/hf/pmrehf4t07edzjictwpv_8bpoqs.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
على الرغم من حقيقة أن </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Uno</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> لديه كمية محدودة من موارد الحوسبة ، إلا أنه يكفي لتعليم الروبوت كيفية تنفيذ الأوامر الأساسية:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">حركة خط مستقيم بسرعة ومدة معينة</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">حركة دائرية إلى اليسار أو اليمين (بدوره)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">خذ مواقع أطراف محددة مسبقًا</font></font></li>
</ul><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">إن ESP8266</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> مسؤول عن تنظيم قناة الاتصال اللاسلكي ويعمل كبوابة يتلقى Uno من خلالها أوامر التحكم.</font></font><a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
يمكن التحكم في الروبوت عن طريق الشبكة المحلية في </font><font style="vertical-align: inherit;">جلسة </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">telnet التي تم</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> إنشاؤها معه </font><font style="vertical-align: inherit;">أو عبر اتصال سلكي بوحدة التحكم (للبرامج الثابتة أو التصحيح). للراحة ، كتبنا أيضًا تطبيق Android بسيطًا يطبق الحد الأدنى من الوظائف التفاعلية للتحكم في الروبوت. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/8b/cd/g3/8bcdg3tm1kougoxojse5my7siyc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
يوضح الشكل أدناه بشكل تخطيطي هيكل سداسي الأرجل. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/et/gf/2d/etgf2dsnktnwcb7y7pv-eixy34u.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
جميع الماكينات متصلة </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ببطاقة</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> توسيع </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">Multiservo Shield</font></a><font style="vertical-align: inherit;"> ، والتي تتيح لك التحكم في 18 مؤازرة. اتصالها مع Arduino عبر حافلة I²C. لذلك ، حتى مع وجود 18 من أجهزة التوجيه في نفس الوقت ، ستظل جميع دبابيس Arduino تقريبًا مجانية.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
وتجدر الإشارة إلى أن لوحة التوسيع لديها موصل لتشغيل الماكينات المتصلة. </font><font style="vertical-align: inherit;">لكن الحد الأقصى المسموح به للتيار الذي تم تصميم اللوحة من أجله هو حوالي 10 أمبير ، وهو لا يكفي لتشغيل محركات سيرفو MG996R ، والتي يمكن أن يتجاوز إجمالي استهلاك التيار الأقصى لها القيمة المحددة. </font><font style="vertical-align: inherit;">لذلك ، في نسختنا ، تم توصيل كل سيرفو بخط طاقة منفصل ، متجاوزًا لوحة التوسيع.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">إدارة Hexapod</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
يتم تنفيذ منطق التحكم في الأطراف </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">السداسية</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> في البرنامج باستخدام فئة </font><i><font style="vertical-align: inherit;">GeksaFoot</font></i><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">فئة GeksaFoot</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">GeksaFoot</span> {</span>
<span class="hljs-keyword">private</span>:
<span class="hljs-comment">//         </span><font></font>
  Vector3D m_p0;<font></font>
<span class="hljs-comment">//          </span><font></font>
  Vector3D m_r0;<font></font>
<span class="hljs-comment">//  Multiservo,    </span>
  Multiservo m_coxaServo;   <span class="hljs-comment">//  </span>
  Multiservo m_femoraServo; <span class="hljs-comment">//  </span>
  Multiservo m_tibiaServo;  <span class="hljs-comment">//  </span>
<span class="hljs-keyword">public</span>:<font></font>
  GeksaFoot(Vector3D p0,Vector3D r0);<font></font>
<span class="hljs-comment">//   </span>
  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">begin</span><span class="hljs-params">(<span class="hljs-keyword">int</span> coxaPin, <span class="hljs-keyword">int</span> femoraPin, <span class="hljs-keyword">int</span> tibiaPin)</span></span>;
<span class="hljs-comment">//   </span>
  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">end</span><span class="hljs-params">()</span></span>;   <font></font>
<font></font>
<span class="hljs-comment">//   </span><font></font>
<font></font>
  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">coxaAngle</span><span class="hljs-params">(<span class="hljs-keyword">int</span>)</span></span>;      <span class="hljs-comment">//      (-90 .. 90 )</span>
  <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">coxaAngle</span><span class="hljs-params">()</span></span>;          <span class="hljs-comment">//     </span><font></font>
<font></font>
  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">femoraAngle</span><span class="hljs-params">(<span class="hljs-keyword">int</span>)</span></span>;    <span class="hljs-comment">//       (-90 .. 90 )</span>
  <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">femoraAngle</span><span class="hljs-params">()</span></span>;        <span class="hljs-comment">//     </span><font></font>
<font></font>
  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">tibiaAngle</span><span class="hljs-params">(<span class="hljs-keyword">int</span>)</span></span>;     <span class="hljs-comment">//       (-90 .. 90 )</span>
  <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">tibiaAngle</span><span class="hljs-params">()</span></span>;         <span class="hljs-comment">//     </span><font></font>
<font></font>
<span class="hljs-comment">//         </span><font></font>
<font></font>
  <span class="hljs-comment">//         </span>
  <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">getAngles</span><span class="hljs-params">(Vector3D p, <span class="hljs-keyword">int</span>&amp; coxaAngle, <span class="hljs-keyword">int</span>&amp; femoraAngle, <span class="hljs-keyword">int</span>&amp; tibiaAngle)</span></span>;
  <span class="hljs-comment">//       </span>
  <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">getPoint</span><span class="hljs-params">(<span class="hljs-keyword">int</span> coxaAngle, <span class="hljs-keyword">int</span> femoraAngle, <span class="hljs-keyword">int</span> tibiaAngle, Vector3D&amp; p)</span></span>;<font></font>
};<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
و </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">coxaAngle</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ، </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">femoraAngle</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ، </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">طرق tibiaAngle</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> تسمح لك لتحديد أو معرفة زاوية دوران المفصل الساق الفردية. الطرق المساعدة </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">getAngles</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> و </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">getPoint</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> تطبق منطق الحساب </font><i><font style="vertical-align: inherit;">للكينماتيكا المباشرة والعكسية</font></i><font style="vertical-align: inherit;"> ، والتي يمكنك من خلالها حساب قيمة زوايا الساق لنقطة معينة في مساحة طرفه. أو العكس ، نقطة مسافة لقيم الزاوية الحالية. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
يتوافق متوسط ​​موضع كل مفصل مع قيمة صفرية للزاوية ، ويقع نطاق دوران المفصل في النطاق من -90 إلى 90 درجة. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
فئة المستوى الأعلى هي فئة </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Geksapod</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ينفذ منطق الروبوت بالكامل. </font><font style="vertical-align: inherit;">يتم تضمين كل ساق سداسي الأرجل في هذه الفئة كمثيل منفصل لفئة </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GeksaFoot</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">فئة geksapod</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Geksapod</span>:</span> <span class="hljs-keyword">public</span> AJobManager {
  <span class="hljs-keyword">friend</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MotionJob</span>;</span>
  <span class="hljs-keyword">friend</span> CommandProcessorJob;
  <span class="hljs-comment">//  </span><font></font>
  GeksaFoot m_LeftFrontFoot;<font></font>
  GeksaFoot m_LeftMidleFoot;<font></font>
  GeksaFoot m_LeftBackFoot;<font></font>
  GeksaFoot m_RigthFrontFoot;<font></font>
  GeksaFoot m_RigthMidleFoot;<font></font>
  GeksaFoot m_RigthBackFoot;<font></font>
  <span class="hljs-comment">// ,    </span><font></font>
  MotionJob m_MotionJob;<font></font>
<span class="hljs-keyword">private</span>:
  <span class="hljs-comment">//       </span>
  <span class="hljs-comment">//       </span>
  <span class="hljs-comment">//     </span>
  <span class="hljs-keyword">int</span> _setPose(<span class="hljs-keyword">int</span> idx, <span class="hljs-keyword">int</span> ca, <span class="hljs-keyword">int</span> fa, <span class="hljs-keyword">int</span> ta);
  <span class="hljs-keyword">int</span> _setPose(<span class="hljs-keyword">int</span>[FOOTS_COUNT][<span class="hljs-number">3</span>]);  
  <span class="hljs-keyword">int</span> _setPose(Vector3D points[FOOTS_COUNT]); 
<span class="hljs-keyword">protected</span>:
  <span class="hljs-comment">//          </span>
  <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">setPose</span><span class="hljs-params">(<span class="hljs-keyword">int</span> idx, <span class="hljs-keyword">int</span> ca, <span class="hljs-keyword">int</span> fa, <span class="hljs-keyword">int</span> ta, <span class="hljs-keyword">int</span> actionTime)</span></span>; 
  <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">setPose</span><span class="hljs-params">(<span class="hljs-keyword">int</span> pose[FOOTS_COUNT][<span class="hljs-number">3</span>], <span class="hljs-keyword">int</span> actionTime)</span></span>;
  <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">setPose</span><span class="hljs-params">(<span class="hljs-keyword">int</span> idx, Vector3D p, <span class="hljs-keyword">int</span> actionTime)</span></span>;
  <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">setPose</span><span class="hljs-params">(Vector3D points[FOOTS_COUNT], <span class="hljs-keyword">int</span> actionTime = <span class="hljs-number">0</span>)</span></span>;
  <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">setPose</span><span class="hljs-params">(<span class="hljs-keyword">int</span> ca, <span class="hljs-keyword">int</span> fa, <span class="hljs-keyword">int</span> ta, <span class="hljs-keyword">int</span> actionTime)</span></span>;
  <span class="hljs-comment">//      </span>
  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">getPose</span><span class="hljs-params">(<span class="hljs-keyword">int</span> idx, <span class="hljs-keyword">int</span>&amp; ca, <span class="hljs-keyword">int</span>&amp; fa, <span class="hljs-keyword">int</span>&amp; ta)</span></span>;
  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">getPose</span><span class="hljs-params">(<span class="hljs-keyword">int</span> pose[FOOTS_COUNT][<span class="hljs-number">3</span>])</span></span>;
  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">getPose</span><span class="hljs-params">(<span class="hljs-keyword">int</span> idx, Vector3D&amp; p)</span></span>;
  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">getPose</span><span class="hljs-params">(Vector3D points[FOOTS_COUNT])</span></span>;
  <span class="hljs-comment">//    </span>
  <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">execute</span><span class="hljs-params">(Motion* pMotion)</span></span>;
<span class="hljs-keyword">public</span>:<font></font>
  Geksapod();<font></font>
  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setup</span><span class="hljs-params">()</span></span>;
  <span class="hljs-comment">//   </span>
  <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">move</span><span class="hljs-params">(<span class="hljs-keyword">int</span> speed, <span class="hljs-keyword">int</span> time)</span></span>;    <span class="hljs-comment">//   </span>
  <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">rotate</span><span class="hljs-params">(<span class="hljs-keyword">int</span> speed, <span class="hljs-keyword">int</span> time)</span></span>;  <span class="hljs-comment">//   </span>
  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">stop</span><span class="hljs-params">()</span></span>;                      <span class="hljs-comment">//  </span>
  <span class="hljs-comment">//         </span>
  <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">getAngles</span><span class="hljs-params">(<span class="hljs-keyword">int</span> idx, Vector3D p, <span class="hljs-keyword">int</span>&amp; ca, <span class="hljs-keyword">int</span>&amp; fa, <span class="hljs-keyword">int</span>&amp; ta)</span></span>;
  <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">getPoint</span><span class="hljs-params">(<span class="hljs-keyword">int</span> idx, <span class="hljs-keyword">int</span> coxaAngle, <span class="hljs-keyword">int</span> femoraAngle, <span class="hljs-keyword">int</span> tibiaAngle, Vector3D&amp; p)</span></span>;
  <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">getAngles</span><span class="hljs-params">(Vector3D points[FOOTS_COUNT], <span class="hljs-keyword">int</span> pose[FOOTS_COUNT][<span class="hljs-number">3</span>])</span></span>;
  <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">getPoints</span><span class="hljs-params">(<span class="hljs-keyword">int</span> pose[FOOTS_COUNT][<span class="hljs-number">3</span>], Vector3D points[FOOTS_COUNT])</span></span>;<font></font>
};<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
تم </font><i><font style="vertical-align: inherit;">تصميم طريقتين getPose</font></i><font style="vertical-align: inherit;"> و </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">setPose</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> المحملة </font><i><font style="vertical-align: inherit;">بشكل</font></i><font style="vertical-align: inherit;"> زائد </font><font style="vertical-align: inherit;">للاستخدام الداخلي وتسمح لك بالحصول على الوضع الحالي لأطراف الروبوت أو تعيين طرف جديد. </font><font style="vertical-align: inherit;">في هذه الحالة ، يتم تعيين موضع الساقين على شكل مجموعة من قيم زوايا الدوران لكل مفصل أو كمجموعة من إحداثيات نقاط النهاية لأطراف الروبوت بالنسبة لمركزه. </font><font style="vertical-align: inherit;">
لحركة الطرف السلس عند استدعاء طرق </font><i><font style="vertical-align: inherit;">setPose</font></i><font style="vertical-align: inherit;"> ، </font><i><font style="vertical-align: inherit;">يمكنك</font></i><font style="vertical-align: inherit;"> تحديد الوقت (معلمة </font><i><font style="vertical-align: inherit;">actionTime</font></i><font style="vertical-align: inherit;"> ) التي يجب بعدها أن تصل الكفوف إلى الموضع المحدد. </font><font style="vertical-align: inherit;">
يتم التحكم في الروبوت عن طريق الطرق العامة </font><i><font style="vertical-align: inherit;">التحرك</font></i><font style="vertical-align: inherit;"> ، </font><i><font style="vertical-align: inherit;">تدوير</font></i><font style="vertical-align: inherit;"> و </font><i><font style="vertical-align: inherit;">توقف</font></i><font style="vertical-align: inherit;"> .</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">مضاهاة المهام المتعددة</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ترث </font><font style="vertical-align: inherit;">
فئة </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Geksapod</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> تطبيق فئة </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AJobManager</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> وتحتوي على نسخة من فئة </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MotionJob</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ، والتي ترث بدورها من فئة </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AJob</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">تسمح لك هذه الفئات بتنفيذ ما يسمى بالمهام المتعددة غير الاستباقية ، مما يسمح لك بالتجريد من خطية البرامج وأداء العديد من المهام في نفس الوقت.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">وظيفة الطبقة</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AJob</span> {</span>
  <span class="hljs-keyword">friend</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AJobManager</span>;</span>
<span class="hljs-keyword">private</span>:<font></font>
  AJobManager* m_pAJobManager;   <font></font>
  AJob* mJobNext;                      <font></font>
  <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">long</span> m_counter;         <span class="hljs-comment">//    onRun</span>
  <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">long</span> m_previousMillis; <span class="hljs-comment">//     onRun</span>
  <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">long</span> m_currentMillis;  <span class="hljs-comment">//   </span>
  <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">long</span> m_delayMillis;    <span class="hljs-comment">//    onRun</span>
  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">run</span><span class="hljs-params">()</span></span>;
<span class="hljs-keyword">public</span>:<font></font>
  AJob(AJobManager*, <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">long</span> delay = <span class="hljs-number">0L</span>);<font></font>
  ~AJob();<font></font>
                  <font></font>
  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">finish</span><span class="hljs-params">()</span></span>;  <span class="hljs-comment">//     </span>
  <span class="hljs-function"><span class="hljs-keyword">long</span> <span class="hljs-title">counter</span><span class="hljs-params">()</span></span>; <span class="hljs-comment">//    onRun    </span>
  <span class="hljs-function"><span class="hljs-keyword">long</span> <span class="hljs-title">setDelay</span><span class="hljs-params">(<span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">long</span>)</span></span>; <span class="hljs-comment">//    onRun</span>
  <span class="hljs-function"><span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">long</span> <span class="hljs-title">previousMillis</span><span class="hljs-params">()</span></span>;<span class="hljs-comment">//      onRun</span>
  <span class="hljs-function"><span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">long</span> <span class="hljs-title">currentMillis</span><span class="hljs-params">()</span></span>; <span class="hljs-comment">//    </span><font></font>
                              <font></font>
  <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onInit</span><span class="hljs-params">()</span></span>;  <span class="hljs-comment">//      </span>
  <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onRun</span><span class="hljs-params">()</span></span>;   <span class="hljs-comment">//     </span>
  <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onDone</span><span class="hljs-params">()</span></span>;  <span class="hljs-comment">//        finish</span>
};</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
فئة </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AJob</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> هي </font><font style="vertical-align: inherit;">الفئة </font><font style="vertical-align: inherit;">الأساسية لجميع المهام التي تتطلب التنفيذ المتزامن. </font><font style="vertical-align: inherit;">يجب على ورثته تجاوز طريقة </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">onRun</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ، التي تنفذ منطق المهمة التي يتم تنفيذها. </font><font style="vertical-align: inherit;">بالنظر إلى تفاصيل المهام المتعددة الوقائية ، فإن استدعاء هذه الطريقة لا يجب أن تستغرق وقتًا طويلاً. </font><font style="vertical-align: inherit;">يوصى بتقسيم منطق المهمة إلى عدة مهام فرعية أخف ، سيتم تنفيذ كل منها لإجراء مكالمة </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">onRun</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> منفصلة </font><font style="vertical-align: inherit;">.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">فئة AJobManager</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AJobManager</span> {</span>
  <span class="hljs-keyword">friend</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AJob</span>;</span>
  AJob* mJobFirst;  <span class="hljs-comment">//      </span>
  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">attach</span><span class="hljs-params">(AJob*)</span></span>;   <span class="hljs-comment">//    </span>
  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">dettach</span><span class="hljs-params">(AJob*)</span></span>; <span class="hljs-comment">//    </span>
  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">dettachAll</span><span class="hljs-params">()</span></span>;   <span class="hljs-comment">//   </span>
<span class="hljs-keyword">public</span>:  <font></font>
  AJobManager();<font></font>
  ~AJobManager();<font></font>
  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setup</span><span class="hljs-params">()</span></span>;
  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">loop</span><span class="hljs-params">()</span></span>;<font></font>
};</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
و </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AJobManager</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> الطبقة </font><font style="vertical-align: inherit;">لديها إعلان أكثر تواضعا ويحتوي على اثنين فقط الطرق العامة: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">الإعداد</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> و </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">حلقة</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">يجب استدعاء </font><font style="vertical-align: inherit;">طريقة </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">الإعداد</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> مرة واحدة قبل بدء حلقة البرنامج الرئيسية. في ذلك ، تتم تهيئة جميع المهام واحدًا تلو الآخر ، عن طريق استدعاء طريقة </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">onInit</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> المقابلة </font><font style="vertical-align: inherit;">لكل مهمة من القائمة. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
تتم إضافة مهمة إلى القائمة تلقائيًا عندما يتم استدعاء مُنشئها ويمكن حذفها عن طريق استدعاء طريقة </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">الإنهاء</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> العامة </font><font style="vertical-align: inherit;">للمهمة نفسها. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
طريقة </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">حلقة</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">يتم استدعاؤها بشكل متكرر في دورة البرنامج الرئيسية وهي مسؤولة عن تنفيذ منطق كل مهمة بالتسلسل من القائمة على فترات زمنية محددة (إذا تم تثبيتها). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
وهكذا ، عند إنشاء مثيل لفئة </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Geksapod</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> الموروثة من فئة </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AJobManager</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ، نحصل على تصرفنا أداة ملائمة لتعدد المهام.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">تنفيذ الحركة</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
يمكن وصف أي حركة للجسم من خلال بعض الوظائف التي تحدد موقعها في نقطة زمنية معينة. </font><font style="vertical-align: inherit;">يمكن أن تكون هذه الوظيفة مركبة ، أي أنها يمكن أن تكون مجموعة من الوظائف ، كل منها قابل للتطبيق فقط لفترة زمنية معينة. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
يتم تعريف الأنواع المختلفة لحركة أطراف سداسي الأرجل ويمكن توسيعها باستخدام الفئات الموروثة من فئة </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">الحركة</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">الحركة الطبقية</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Motion</span> {</span>
  <span class="hljs-keyword">friend</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MotionJob</span>;</span>
<span class="hljs-keyword">protected</span>:
  <span class="hljs-keyword">long</span> m_MaxTime;     <span class="hljs-comment">//      </span>
  <span class="hljs-keyword">long</span> m_TotalTime;   <span class="hljs-comment">//      </span>
  <span class="hljs-keyword">bool</span> m_IsLooped;    <span class="hljs-comment">//   </span>
  Motion* m_pNext;    <span class="hljs-comment">//     </span>
<span class="hljs-keyword">public</span>:  <font></font>
  Motion(<span class="hljs-keyword">long</span> maxTime, <span class="hljs-keyword">bool</span> isLooped, <span class="hljs-keyword">long</span> totalTime = <span class="hljs-number">-1</span>, Motion* pNext = <span class="hljs-literal">NULL</span>);<font></font>
  ~Motion();<font></font>
  <font></font>
  <span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-keyword">long</span> <span class="hljs-title">maxTime</span><span class="hljs-params">()</span> </span>{ <span class="hljs-keyword">return</span> m_MaxTime; }
  <span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-keyword">long</span> <span class="hljs-title">totalTime</span><span class="hljs-params">()</span> </span>{ <span class="hljs-keyword">return</span> m_TotalTime; }
  <span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-keyword">bool</span> <span class="hljs-title">isLooped</span><span class="hljs-params">()</span> </span>{ <span class="hljs-keyword">return</span> m_IsLooped; }<font></font>
<font></font>
  <span class="hljs-comment">//          </span><font></font>
<font></font>
  <span class="hljs-comment">//       0 &lt;= time &lt;= m_MaxTime </span>
  <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getPose</span><span class="hljs-params">(<span class="hljs-keyword">long</span> time, Vector3D points[FOOTS_COUNT])</span> </span>{ <span class="hljs-keyword">return</span> E_NOT_IMPL; };  
  <span class="hljs-comment">//        0 &lt;= time &lt;= m_MaxTime</span>
  <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getPose</span><span class="hljs-params">(<span class="hljs-keyword">long</span> time, <span class="hljs-keyword">int</span> pose[FOOTS_COUNT][<span class="hljs-number">3</span>])</span> </span>{ <span class="hljs-keyword">return</span> E_NOT_IMPL; };       <font></font>
};</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
لتنفيذ الحركة، ومتجاوزة </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">getPose</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> طريقة </font><font style="vertical-align: inherit;">يجب أن يعود موقف الأطراف للروبوت لفترة معينة من الزمن </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">الوقت</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> في نطاق من 0 إلى </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mMaxTime</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (بالملي ثانية). </font><font style="vertical-align: inherit;">في حالة </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">تكرار</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> الحركة ( </font><i><font style="vertical-align: inherit;">m_IsLooped == true)</font></i><font style="vertical-align: inherit;"> ، يمكن تقييد وقت الحركة عن طريق تحديد المدة في </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">m_TotalTime</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">وأخيرًا ، يمكنك تنظيم سلسلة من الحركات من خلال دمجها في قائمة. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
وبالتالي ، لدينا الفرصة لوصف حركات الروبوت. </font><font style="vertical-align: inherit;">لكن الوصف نفسه (في حالتنا ، بعض الحالات من الطبقة الموروثة من الحركة) لن يجعل الروبوت يتحرك. </font><font style="vertical-align: inherit;">نحن بحاجة إلى آلية من شأنها إعادة ترتيب أرجل سداسي الأرجل ، مسترشدة بالوصف المعطى لها.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
وهذه الآلية هي مثال لفئة </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MotionJob</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> المعلنة في فئة </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Geksapod</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">فئة MotionJob</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MotionJob</span>:</span> <span class="hljs-keyword">public</span> AJob {
  <span class="hljs-keyword">enum</span> STATUS { <font></font>
    NONE, RUNING, STOPING <font></font>
   } m_Status;<font></font>
  <font></font>
  Geksapod* m_pGeksapod;<font></font>
  Motion* m_pMotion;<font></font>
  <span class="hljs-keyword">long</span> m_MotionTime;
  <span class="hljs-keyword">long</span> m_TotalTime;
<span class="hljs-keyword">public</span>:  <font></font>
  MotionJob(Geksapod* pGeksapod);<font></font>
  <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">execute</span><span class="hljs-params">(Motion* pMotion)</span></span>;
  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">onRun</span><span class="hljs-params">()</span></span>;<font></font>
};</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">مثيل لفئة </font><i><font style="vertical-align: inherit;">MotionJob</font></i><font style="vertical-align: inherit;"> ، </font><font style="vertical-align: inherit;">
الموروثة من </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AJob ،</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> هو مهمة يتم فيها </font><i><font style="vertical-align: inherit;">استدعاء</font></i><font style="vertical-align: inherit;"> طريقة </font><i><font style="vertical-align: inherit;">onRun</font></i><font style="vertical-align: inherit;"> على </font><i><font style="vertical-align: inherit;">فترات منتظمة</font></i><font style="vertical-align: inherit;"> . كما أنها تنفذ آلية تجبر الروبوت على أداء الحركات. نحتاج فقط إلى إخباره بكيفية التحرك ، مع الإشارة إلى وصف الحركة عند استدعاء طريقة التنفيذ. </font><font style="vertical-align: inherit;">
هذا كل شئ حتى الان. لا تزال هناك العديد من القضايا غير المضاءة التي سأحاول الكتابة عنها في المقالة التالية. آمل ألا أتعب القراء بالكثير من التعليمات البرمجية. جاهز للإجابة على جميع أسئلتك. </font><i><font style="vertical-align: inherit;">يتبع</font></i><font style="vertical-align: inherit;"> 
... </font><font style="vertical-align: inherit;">
PS </font><font style="vertical-align: inherit;">
في عملية إعداد المقالة التالية ، قمت بتغيير هيكل رؤية الأساليب في فئة </font><i><font style="vertical-align: inherit;">AJob بشكل طفيف</font></i><font style="vertical-align: inherit;"> . طرق </font><i><font style="vertical-align: inherit;">OnInit</font></i></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">و </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">onRun</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> و </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">onDone</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> لا يحتاجون إلى وصول عام ، لأن </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">مكالمتهم</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> تأتي من فئة </font><i><font style="vertical-align: inherit;">AJobManager الودودة</font></i><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">بالنظر إلى أن هذه الأساليب يجب أن تتداخل في الورثة ، يكفي وضعها في القسم </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">المحمي</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">وظيفة الطبقة</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AJob</span> {</span>
  <span class="hljs-keyword">friend</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AJobManager</span>;</span>
<span class="hljs-keyword">private</span>:<font></font>
  AJobManager* m_pAJobManager;   <font></font>
  AJob* mJobNext;                      <font></font>
  <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">long</span> m_counter;         <span class="hljs-comment">//    onRun</span>
  <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">long</span> m_previousMillis; <span class="hljs-comment">//     onRun</span>
  <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">long</span> m_currentMillis;  <span class="hljs-comment">//   </span>
  <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">long</span> m_delayMillis;    <span class="hljs-comment">//    onRun</span>
  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">run</span><span class="hljs-params">()</span></span>;
<span class="hljs-keyword">protected</span>:
  <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onInit</span><span class="hljs-params">()</span></span>;  <span class="hljs-comment">//      </span>
  <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onRun</span><span class="hljs-params">()</span></span>;   <span class="hljs-comment">//     </span>
  <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onDone</span><span class="hljs-params">()</span></span>;  <span class="hljs-comment">//        finish</span>
<span class="hljs-keyword">public</span>:<font></font>
  AJob(AJobManager*, <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">long</span> delay = <span class="hljs-number">0L</span>);<font></font>
  ~AJob();<font></font>
<font></font>
  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">finish</span><span class="hljs-params">()</span></span>;  <span class="hljs-comment">//     </span>
  <span class="hljs-function"><span class="hljs-keyword">long</span> <span class="hljs-title">counter</span><span class="hljs-params">()</span></span>; <span class="hljs-comment">//    onRun    </span>
  <span class="hljs-function"><span class="hljs-keyword">long</span> <span class="hljs-title">setDelay</span><span class="hljs-params">(<span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">long</span>)</span></span>; <span class="hljs-comment">//    onRun</span>
  <span class="hljs-function"><span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">long</span> <span class="hljs-title">previousMillis</span><span class="hljs-params">()</span></span>;<span class="hljs-comment">//      onRun</span>
  <span class="hljs-function"><span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">long</span> <span class="hljs-title">currentMillis</span><span class="hljs-params">()</span></span>; <span class="hljs-comment">//    </span>
};</code></pre><br>
</div></div></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar488794/index.html">Golang + Phaser3 = MMORPG - العميل والخادم</a></li>
<li><a href="../ar488796/index.html">تعلم نشر الخدمات الصغيرة. الجزء 2. Kubernetes</a></li>
<li><a href="../ar488800/index.html">رشيق: 9 نصائح سيئة</a></li>
<li><a href="../ar488806/index.html">أليست هذه بناءة أم أنك تقدم العريضة للملك؟</a></li>
<li><a href="../ar488808/index.html">مبرمجون ، دعنا ندرس مصادر البرامج الكلاسيكية</a></li>
<li><a href="../ar488812/index.html">المزيد من شركة نفط الجنوب ، جيدة ومختلفة. تفتح Intel AIB للمطورين والمصنعين</a></li>
<li><a href="../ar488814/index.html">تشكيل الامبراطوريات من AS3 إلى Haxe. بعد الوفاة</a></li>
<li><a href="../ar488816/index.html">كيف فقدنا مير: حريق في محطة فضائية ، اصطدام بشاحنة بروجرس ، انخفاض الضغط</a></li>
<li><a href="../ar488818/index.html">اختراقات #DeepPavlov في 2019: مراجعة ونتائج العام</a></li>
<li><a href="../ar488820/index.html">كيف لا تحترق في العمل وماذا تفعل إذا كنت لا تزال تحترق</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>