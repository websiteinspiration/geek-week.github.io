<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèΩ‚Äçüé® üîÇ üëÜüèø √âloignez-vous de jQuery √† Svelte, pas de douleur üö† üëÇüèΩ ü•Ç</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour √† tous. 
 
 Je suis d√©veloppeur principal et je r√©sous les t√¢ches frontales comme je peux, c'est-√†-dire que sur jQuery, cela a fonctionn√© en 2...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>√âloignez-vous de jQuery √† Svelte, pas de douleur</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/486646/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bonjour √† tous. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je suis d√©veloppeur principal et je r√©sous les t√¢ches frontales comme je peux, c'est-√†-dire que sur jQuery, cela a fonctionn√© en 2015, cela fonctionne maintenant. Mais avec Vue et React, ce n'est plus un camphile. Par amour d'une mani√®re sp√©ciale, j'ai d√©cid√© de ma√Ætriser Angular / React / Vue, qui n'a pas √©t√© test√© par des millions de d√©veloppeurs, j'ai d√©cid√© d'essayer </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Svelte</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apr√®s avoir fait quelques exercices du manuel, j'ai d√©cid√© de passer √† la pratique. Pour cela, j'ai effectu√© l'une de mes t√¢ches de test avec succ√®s. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lors de l'affectation, il √©tait n√©cessaire de revoir la liste des t√¢ches et une t√¢che de cette liste, CRUD n'est pas n√©cessaire. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La partie client est impl√©ment√©e en tant que SPA, et tout le travail avec le DOM se fait via jQuery, c'est un excellent candidat pour remplacer jQuery par Svelte. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ci-dessous, je parlerai des tout premiers obstacles en cours de route et bien s√ªr de la mani√®re de les surmonter.</font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le tutoriel Svelte est</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tr√®s accessible et intuitif, mais comment int√©grer Svelte dans un projet arbitraire n'est pas tr√®s clair, car Svelte n'est pas une biblioth√®que comme jQuery, c'est un compilateur, c'est-√†-dire que le code √©crit √† l'aide des directives Svelte doit en quelque sorte √™tre compil√© en JS natif. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une autre pierre d'achoppement √©tait l'utilisation de</font></font><br>
<br>
<pre><code class="javascript hljs">$</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 dans Svelte, il s'agit d'un caract√®re r√©serv√©, donc son utilisation dans le code qui sera compil√© par Svelte conduit √† une erreur: </font></font><br>
<br>
<pre><code class="javascript hljs"><font></font>
[!] (plugin svelte) ValidationError: $ is an illegal variable name<font></font>
</code></pre><a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Utiliser `$`</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bien s√ªr, la question peut se poser: √† quoi ressemble ¬´$¬ª si nous changeons compl√®tement jQuery en Svelte? </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Oui, la question est raisonnable, mais si vous y r√©fl√©chissez, le probl√®me deviendra clair - vous n‚Äôavez pas besoin de manger l‚Äô√©l√©phant entier, les gens exp√©riment√©s mangent l‚Äô√©l√©phant en plusieurs parties. En termes de transition de l'utilisation de jQuery √† l'utilisation de Svelte, ce sera une s√©rie de refactoring atomique, les progr√®s seront toujours visibles et le ¬´syst√®me¬ª dans son ensemble sera toujours en √©tat de marche. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le plan est le suivant: r√©√©crire un morceau, tester, r√©parer, r√©√©crire le morceau suivant, et ainsi de suite jusqu'√† ce que nous mangions l'√©l√©phant entier sans laisser de trace.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le probl√®me avec `$` se produit uniquement dans le code que Svelte compile, j'ai toute la logique SPA d√©plac√©e vers le fichier "business-process.js", il n'y a pas besoin de r√©soudre ce probl√®me, mais tout le code de "business-process.js" devrait aller √† App.svelte et autres composants d'application associ√©s. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apr√®s le premier refactoring, App.svelte est apparu avec le code suivant:</font></font><br>
<br>
<pre><code class="javascript hljs"><font></font>
&lt;script&gt;<font></font>
    jQuery(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">$</span>) </span>{<font></font>
<font></font>
        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">loadStartScreen</span>(<span class="hljs-params"></span>) </span>{<font></font>
        loadPaging(<span class="hljs-number">0</span>, settings.capacity);<font></font>
        loadPage(<span class="hljs-number">0</span>, settings.capacity);<font></font>
        }<font></font>
<font></font>
        loadStartScreen();<font></font>
<font></font>
        <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">search</span>(<span class="hljs-params">sample</span>) </span>{<font></font>
            $(<span class="hljs-string">'#paging'</span>).empty();<font></font>
            $.ajax({<font></font>
                <span class="hljs-attr">type</span>: <span class="hljs-string">"GET"</span>,
                <span class="hljs-attr">url</span>: <span class="hljs-string">`/api/v1/task/search/<span class="hljs-subst">${sample}</span>/`</span>,
                <span class="hljs-attr">dataType</span>: <span class="hljs-string">"json"</span>,
                <span class="hljs-attr">success</span>: renderTasks,
                <span class="hljs-attr">error</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">jqXHR, textStatus, errorThrown</span>) </span>{<font></font>
                },<font></font>
                <span class="hljs-attr">timeout</span>: <span class="hljs-number">500</span>,<font></font>
            });<font></font>
        }<font></font>
<font></font>
        $(<span class="hljs-string">"#search"</span>).submit(<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">event</span>) </span>{<font></font>
            event.preventDefault();<font></font>
            <span class="hljs-keyword">const</span> sample = $(<span class="hljs-string">"#sample"</span>).val();<font></font>
<font></font>
            <span class="hljs-keyword">if</span> (sample) {<font></font>
                search(sample);<font></font>
            }<font></font>
            <span class="hljs-keyword">if</span> (!sample) {<font></font>
                loadStartScreen();<font></font>
            }<font></font>
        });<font></font>
    });<font></font>
&lt;/script&gt;<font></font>
<font></font>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"container"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>  <span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-horizontal"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"search"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-group"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"control-label col-sm-2"</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"sample"</span>&gt;</span>
            
            <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-sm-10"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"sample"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-control "</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"search"</span>
                 <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"  "</span> 
                 <span class="hljs-attr">autofocus</span> <span class="hljs-attr">autocomplete</span>=<span class="hljs-string">"on"</span> /&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"taskList"</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"paging"</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le code fonctionne, en fait Svelte n'est pas encore utilis√© du tout, √† ce stade Svelte ne g√©n√®re que du code HTML qui est ins√©r√© dans </font></font><br>
<br>
<pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La variable `$` est isol√©e dans l'appel </font></font><br>
<br>
<pre><code class="javascript hljs">jQuery(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">$</span>) </span>{});</code></pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
aucun conflit de d√©nomination. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous lions l'exemple de variable √† la valeur de l'√©l√©ment d'entr√©e avec id = "sample":</font></font><br>
<br>
<pre><code class="javascript hljs">
                &lt;input id=<span class="hljs-string">"sample"</span> <span class="hljs-class"><span class="hljs-keyword">class</span></span>=<span class="hljs-string">"form-control "</span> type=<span class="hljs-string">"search"</span>
                 placeholder=<span class="hljs-string">"  "</span>
                 autofocus autocomplete=<span class="hljs-string">"on"</span>
                 <span class="hljs-attr">bind</span>:value={sample}<font></font>
                 /&gt;<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lors de l'√©v√©nement submit de l'√©l√©ment de formulaire avec id = "search", le code est ex√©cut√©:</font></font><br>
<br>
<pre><code class="javascript hljs">
        $(<span class="hljs-string">"#search"</span>).submit(<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">event</span>) </span>{<font></font>
            event.preventDefault();<font></font>
<font></font>
            <span class="hljs-keyword">if</span> (sample) {<font></font>
                search(sample);<font></font>
            }<font></font>
            <span class="hljs-keyword">if</span> (!sample) {<font></font>
                loadStartScreen();<font></font>
            }<font></font>
        });<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ce code doit √™tre ex√©cut√© selon la directive Svelte, nous le r√©√©crivons:</font></font><br>
<br>
<pre><code class="javascript hljs"><font></font>
&lt;script&gt;<font></font>
    <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">svelteSearch</span>(<span class="hljs-params">event</span>) </span>{<font></font>
        event.preventDefault();<font></font>
        <span class="hljs-keyword">if</span> (sample) {<font></font>
            search(sample);<font></font>
        }<font></font>
        <span class="hljs-keyword">if</span> (!sample) {<font></font>
            loadStartScreen();<font></font>
        }<font></font>
    }<font></font>
&lt;/script&gt;<font></font>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-horizontal"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"search"</span>
<span class="hljs-attr">on:submit</span>=<span class="hljs-string">"{svelteSearch}"</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le code se compile, mais ne fonctionne pas, car la fonction search () est d√©finie dans la port√©e jQuery (function ($) {}); </font><font style="vertical-align: inherit;">et dans la port√©e globale, cette fonction n'est pas visible. </font><font style="vertical-align: inherit;">Tirez la recherche () dans une port√©e avec svelteSearch (√©v√©nement):</font></font><br>
<br>
<pre><code class="javascript hljs"><font></font>
&lt;script&gt;<font></font>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">loadStartScreen</span>(<span class="hljs-params"></span>) </span>{<font></font>
        loadPaging(<span class="hljs-number">0</span>, settings.capacity);<font></font>
        loadPage(<span class="hljs-number">0</span>, settings.capacity);<font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">let</span> sample = <span class="hljs-string">''</span>;<font></font>
<font></font>
    jQuery(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">$</span>) </span>{<font></font>
        loadStartScreen();<font></font>
    });<font></font>
    <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">search</span>(<span class="hljs-params">sample</span>) </span>{<font></font>
        $(<span class="hljs-string">'#paging'</span>).empty();<font></font>
        $.ajax({<font></font>
            <span class="hljs-attr">type</span>: <span class="hljs-string">"GET"</span>,
            <span class="hljs-attr">url</span>: <span class="hljs-string">`/api/v1/task/search/<span class="hljs-subst">${sample}</span>/`</span>,
            <span class="hljs-attr">dataType</span>: <span class="hljs-string">"json"</span>,
            <span class="hljs-attr">success</span>: renderTasks,
            <span class="hljs-attr">error</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">jqXHR, textStatus, errorThrown</span>) </span>{<font></font>
            },<font></font>
            <span class="hljs-attr">timeout</span>: <span class="hljs-number">500</span>,<font></font>
        });<font></font>
    }<font></font>
    <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">svelteSearch</span>(<span class="hljs-params">event</span>) </span>{<font></font>
        event.preventDefault();<font></font>
        <span class="hljs-keyword">if</span> (sample) {<font></font>
            search(sample);<font></font>
        }<font></font>
        <span class="hljs-keyword">if</span> (!sample) {<font></font>
            loadStartScreen();<font></font>
        }<font></font>
    }<font></font>
&lt;/script&gt;<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un tel code ne compile pas:</font></font><br>
<br>
<pre><code class="javascript hljs"><font></font>
[!] (plugin svelte) ValidationError: $ is an illegal variable name<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Que faire? </font><font style="vertical-align: inherit;">Recherche le sur Google! </font><font style="vertical-align: inherit;">"Svelte comment importer jquery": </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comment utiliser jQuery dans Svelte?</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Je n'aimais pas la r√©ponse marqu√©e comme "correcte" pour importer une biblioth√®que tierce (arbitraire * .js), il ne suffit pas d'√©crire import *, vous devez l'enregistrer dans rollup.config.js externe:</font></font><br>
<br>
<pre><code class="javascript hljs">
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> { external []};
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La deuxi√®me option avec fen√™tre. $ N√©cessite beaucoup moins de mouvements corporels et puisque nous pr√©voyons d'abandonner compl√®tement l'utilisation de jQuery, cette directive pour l'importation sera temporaire et la familiarit√© avec l'importation peut √™tre report√©e √† plus tard. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Utilisez le copier-coller avec d√©bordement de pile:</font></font><br>
<br>
<pre><code class="javascript hljs"><font></font>
&lt;script&gt;<font></font>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">loadStartScreen</span>(<span class="hljs-params"></span>) </span>{<font></font>
        loadPaging(<span class="hljs-number">0</span>, settings.capacity);<font></font>
        loadPage(<span class="hljs-number">0</span>, settings.capacity);<font></font>
    }<font></font>
    jQuery(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">$</span>) </span>{<font></font>
        loadStartScreen();<font></font>
    });<font></font>
<font></font>
    <span class="hljs-keyword">let</span> sample = <span class="hljs-string">''</span>;<font></font>
<font></font>
    <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">search</span>(<span class="hljs-params">sample</span>) </span>{
        <span class="hljs-built_in">window</span>.$(<span class="hljs-string">'#paging'</span>).empty();
        <span class="hljs-built_in">window</span>.$.ajax({
            <span class="hljs-attr">type</span>: <span class="hljs-string">"GET"</span>,
            <span class="hljs-attr">url</span>: <span class="hljs-string">`/api/v1/task/search/<span class="hljs-subst">${sample}</span>/`</span>,
            <span class="hljs-attr">dataType</span>: <span class="hljs-string">"json"</span>,
            <span class="hljs-attr">success</span>: renderTasks,
            <span class="hljs-attr">error</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">jqXHR, textStatus, errorThrown</span>) </span>{<font></font>
            },<font></font>
            <span class="hljs-attr">timeout</span>: <span class="hljs-number">500</span>,<font></font>
        });<font></font>
    }<font></font>
    <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">svelteSearch</span>(<span class="hljs-params">event</span>) </span>{<font></font>
        event.preventDefault();<font></font>
        <span class="hljs-keyword">if</span> (sample) {<font></font>
            search(sample);<font></font>
        }<font></font>
        <span class="hljs-keyword">if</span> (!sample) {<font></font>
            loadStartScreen();<font></font>
        }<font></font>
    }<font></font>
&lt;/script&gt;<font></font>
<font></font>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"container"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>  <span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-horizontal"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"search"</span>
    <span class="hljs-attr">on:submit</span>=<span class="hljs-string">"{svelteSearch}"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-group"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"control-label col-sm-2"</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"sample"</span>&gt;</span>
            
            <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-sm-10"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"sample"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-control "</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"search"</span>
                 <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"  "</span>
                 <span class="hljs-attr">autofocus</span> <span class="hljs-attr">autocomplete</span>=<span class="hljs-string">"on"</span>
                 <span class="hljs-attr">bind:value</span>=<span class="hljs-string">{sample}</span>
                 /&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
// ..skip..
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Reste √† se d√©barrasser de:</font></font><br>
<br>
<pre><code class="javascript hljs">
    jQuery(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">$</span>) </span>{<font></font>
        loadStartScreen();<font></font>
    });<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous supprimons ce code et l'ajoutons au balisage:</font></font><br>
<br>
<pre><code class="xml hljs">
<span class="hljs-tag">&lt;<span class="hljs-name">svelte:window</span> <span class="hljs-attr">on:load</span> = <span class="hljs-string">{loadStartScreen}</span> /&gt;</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Termin√©. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">documentation Svelte</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , vous pouvez trouver:</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;svelte: document&gt; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La balise &lt;svelte: document&gt;, tout comme &lt;svelte: window&gt;, vous offre un moyen pratique d'ajouter des √©couteurs d'√©v√©nements de mani√®re d√©clarative √† l'objet document. </font><font style="vertical-align: inherit;">Ceci est utile pour √©couter les √©v√©nements qui ne se d√©clenchent pas sur la fen√™tre, tels que mouseenter et mouseleave.</font></font><br>
</blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En pratique, nous avons:</font></font><br>
<br>
<pre><code class="javascript hljs">
[!] (plugin svelte) ParseError: Valid &lt;svelte:...&gt; tag names are svelte:head, <span class="hljs-attr">svelte</span>:options, <span class="hljs-attr">svelte</span>:<span class="hljs-built_in">window</span>, <span class="hljs-attr">svelte</span>:body, <span class="hljs-attr">svelte</span>:self or svelte:component
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Autrement dit, la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">balise a √©t√© coup√©e du code</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , mais ils ont oubli√© de la supprimer de la documentation, √† ma grande surprise, Svelte est d√©velopp√© non pas par les dieux, mais par des personnes qui ont √©galement tendance √† laisser quelque chose pour plus tard et √† oublier. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comment int√©grer jQuery dans le code Svelte avec peu de sang, j'ai dit.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comment compiler les directives Svelte en code JS</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous pompons un projet vide dans un dossier s√©par√© comme </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d√©crit dans le blog Svelte</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (installez Node.js en cours de route). </font><font style="vertical-align: inherit;">Maintenant, nous transf√©rons les fichiers t√©l√©charg√©s dans le r√©pertoire de notre projet. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous transf√©rons les fichiers de "public" √† l'endroit o√π nous avons les fichiers √† t√©l√©charger par le client (le navigateur de l'utilisateur), je l'ai "public / assets / Site", je n'ai pas besoin de styles de "global.css", je n'ai pas transf√©r√© ce fichier. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le fichier "public / index.html", je l'ai transf√©r√© √† l'endroit o√π le serveur prendra le mod√®le en vue: "view / Site / index.html". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les fichiers de "src" sont ajout√©s √† la source du frontend - "src / frontend". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fichiers d√©crivant les sources du frontend:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rollup.config.js</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">package-lock.json</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">package.json</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je suis pass√© √† la racine, l√† l'IDE les a r√©cup√©r√©s et s'est occup√© de tout (d√©pendances install√©es). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous devez maintenant modifier la configuration de compilation des directives Svelte dans JS. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ouvrez rollup.config.js et modifiez les chemins d'acc√®s aux fichiers:</font></font><br>
<br>
<pre><code class="javascript hljs">
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
	<span class="hljs-attr">input</span>: <span class="hljs-string">'src/frontend/main.js'</span>,
	<span class="hljs-attr">output</span>: {
		<span class="hljs-attr">sourcemap</span>: <span class="hljs-literal">true</span>,
		<span class="hljs-attr">format</span>: <span class="hljs-string">'iife'</span>,
		<span class="hljs-attr">name</span>: <span class="hljs-string">'app'</span>,
		<span class="hljs-attr">file</span>: <span class="hljs-string">'public/assets/Site/bundle.js'</span><font></font>
	},<font></font>
	<span class="hljs-attr">plugins</span>: [<font></font>
		svelte({<font></font>
			<span class="hljs-attr">dev</span>: !production,
			<span class="hljs-attr">css</span>: <span class="hljs-function"><span class="hljs-params">css</span> =&gt;</span> {<font></font>
				css.write(<span class="hljs-string">'public/assets/Site/bundle.css'</span>);<font></font>
			}<font></font>
		}),<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C'est la difficult√© de l'int√©gration initiale de Svelte dans un projet existant. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous installons les d√©pendances et commen√ßons √† suivre les modifications dans le code source du frontend pour une compilation √† la vol√©e:</font></font><br>
<br>
<pre><code class="dos hljs">npm install<font></font>
npm run dev<font></font>
</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ne pas oublier</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Modifiez le mod√®le de pr√©sentation (dans mon cas, c'est "view / Site / index.html"):</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Tout √† l'int√©rieur de la balise body est portable pour App.svelte</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ajouter des liens vers les fichiers de ressources n√©cessaires</font></font><br>
<br>
<pre><code class="xml hljs">
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">'stylesheet'</span> <span class="hljs-attr">href</span>=<span class="hljs-string">'/assets/Site/bundle.css'</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
</code></pre></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apr√®s la balise body, ajoutez un ¬´lien¬ª au fichier d'assemblage g√©n√©r√©:</font></font><br>
<br>
<pre><code class="xml hljs">
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">'/assets/Site/bundle.js'</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre><br>
</li>
</ul><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le code complet peut √™tre consult√© dans le r√©f√©rentiel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'abandon final de jQuery dans ce projet est encore loin, mais l'article ne portait pas sur cela, cet article concerne les premi√®res √©tapes pour impl√©menter Svelte dans votre code, sur les choses les plus simples. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Merci pour l'attention. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Menace </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comment s'est d√©roul√©e la transition, vous pouvez lire dans le prochain article " </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comment √ßa</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> s'est pass√© </font><font style="vertical-align: inherit;">"</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr486646/">https://habr.com/ru/post/fr486646/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr486632/index.html">Mod√®les de programmation r√©active mentale pour les superviseurs</a></li>
<li><a href="../fr486634/index.html">Mises √† jour du backend MSVC dans Visual Studio 2019 version 16.3 et 16.4</a></li>
<li><a href="../fr486638/index.html">Blazor WebAssembly 3.2.0 Preview 1 est maintenant disponible</a></li>
<li><a href="../fr486640/index.html">Le condens√© de mat√©riaux int√©ressants pour le d√©veloppeur mobile # 331 (27 janvier - 2 f√©vrier)</a></li>
<li><a href="../fr486644/index.html">Antenne DIY en 5 minutes</a></li>
<li><a href="../fr486648/index.html">AWS Lambda en action dans Java 11. Passer √† la production sans serveur</a></li>
<li><a href="../fr486650/index.html">M√©moire dynamique dans les syst√®mes durs en temps r√©el</a></li>
<li><a href="../fr486652/index.html">¬´Critique de la raison pure¬ª pour les programmeurs</a></li>
<li><a href="../fr486654/index.html">Connexion du capteur de mouvement et de l'alarme et de l'enregistrement vid√©o dans Home Assistant sur Raspberry Pi</a></li>
<li><a href="../fr486656/index.html">Comment ajouter de nouveaux personnages √† Unicode: l'exp√©rience du profane</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>