<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👲 🔕 👴🏿 ROSとニューラルグリッド乞食ロボット 🤟🏿 🏭 🤷🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="通常、このような工芸品には2つの質問があります。「どうやって？」そして何のために？」出版物自体は最初の質問に捧げられており、私はすぐに2番目の質問に答えます。
 
 私は、Raspberry Piとカメラから始めて、ロボット工学を習得するためにこのプロジェクトを開始しました。ご存知のように、何かを学...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>ROSとニューラルグリッド乞食ロボット</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/500150/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通常、このような工芸品には2つの質問があります。「どうやって？」そして何のために？」出版物自体は最初の質問に捧げられており、私はすぐに2番目の質問に答えます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私は、Raspberry Piとカメラから始めて、ロボット工学を習得するためにこのプロジェクトを開始しました。ご存知のように、何かを学ぶための最良の方法の1つは、必要なスキルを習得しながら、技術的なタスクを考え出してそれを実行することです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
当時、まだロボット工学の分野で優れたアイデアはありませんでしたので、物乞いロボットという独占的に楽しいプロジェクトを作ることにしました。結果は、Raspberry PiとROSのスタンドアロンロボットで、Movidius Neural Cumpute Stickを使用して顔を検出します。彼は部屋の中を歩き回って人々を探し、その前で缶を振ります。このロボットは次のようになります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/pt/wp/nt/ptwpntdd13lkskxbxjuhoyx1oom.jpeg"><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ロボットは部屋の中をランダムに動き、人に気づいたら、そこに転がり、小さなもののために瓶を振ります。</font><font style="vertical-align: inherit;">楽しみのために、私は彼に少し顔の表情を追加しました-彼は眉毛を動かす方法を知っています：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/2x/lm/aw/2xlmaw5tm_hogsuqfuvqwjmeblk.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初の試みの後、ロボットは再び顔を見つけようとし、人に向きを変え、銀行を再び振ります。</font><font style="vertical-align: inherit;">しかし、この時点で立ち去るとどうなりますか。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ko/8x/xz/ko8xxzvzo_owit62gkv8z3wn1ik.gif"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ロボット</font></font></h3><br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">雑誌Popular Mechanics</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
から物乞いロボットのアイデアを取り入れました</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">Gimmeと呼ばれるChris Eckertのプロトタイプの作者は、審美的に非常に喜ばしく見えます。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/374/8d6/dbc/3748d6dbcb97d04751dacd866eb94e07.jpg" alt="画像" width="300" height="300"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
機能性に集中したかったので、即興素材で組み立てました。</font><font style="vertical-align: inherit;">特に、PVCコーナーは、ほとんどすべての2つのパーツを接続できる最も用途の広い素材であることが判明しました。</font><font style="vertical-align: inherit;">現時点では、ロボットの5％がPVCコーナーとM3ネジで構成されているようです。</font><font style="vertical-align: inherit;">ケース自体は、ヘッドとすべての電子機器が取り付けられている3つのラミネートプラットフォームで構成されています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ロボットの基礎は</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Raspberry Pi 2B</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">であり、コードはC ++で記述され、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHubに</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">あり</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">ます</font></a><font style="vertical-align: inherit;">。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ビジョン</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
現実を知覚するために、ロボットは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Paspberry Pi Camera Module v2</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">カメラ</font><font style="vertical-align: inherit;">を使用します</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">これは、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RaspiCam</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ライブラリを使用して制御できます</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
顔検出のために、私はいくつかの異なるアプローチを試みました。 OpenCVのクラシックな検出器の品質は私を満足させませんでした、それで私は結局、かなり非標準的な解決策に行き着きました。</font><font style="vertical-align: inherit;">制御フレームワーク</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">OpenVINOの</font></a><font style="vertical-align: inherit;">下で</font><font style="vertical-align: inherit;">デバイス</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Movidius Neural Compute Stick（NCS）</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">で</font><font style="vertical-align: inherit;">実行されている、ニューラルネットワークに従事している人の検出</font><font style="vertical-align: inherit;">。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
NCSは、ニューラルネットワークを効果的に起動するためのハードウェアのようなものであり、その内部には、このために特別に調整されたいくつかのベクトルプロセッサがあります。デバイスはUSB経由で接続され、消費電力は1ワットのみです。したがって、NCSはRaspberry Piのコプロセッサーとして機能し、ニューラルネットワークをプルしません。 NCSが次のフレームを処理している間、Paspberryプロセッサは他の操作に使用できます。デバイスの最適な動作にはUSB 3.0インターフェイスが必要ですが、これは古いバージョンのRaspberryでは利用できません。 USB 2.0でも動作しますが、速度は遅くなります。また、Raspberry USBコネクタをブロックしないように、NCSを短いUSBケーブルでそれに接続します。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以前の記事</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">で、Neural Compute Stickの操作について詳しく説明しました</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初は訓練してみました</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オープンデータセットに</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">MobileNet + SSDアーキテクチャ</font></a><font style="vertical-align: inherit;">を</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">備えた独自の顔検出器</font></a><font style="vertical-align: inherit;">。検出器は実際に機能しましたが、安定性はそれほど高くありませんでした。撮影条件（露出とぼやけたショット）の避けられない劣化により、検出器の品質は大幅に低下しました。しかし、しばらくすると、既製の顔検出器がOpenVINOに登場し、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SqueezeNet light + SSD</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アーキテクチャの検出器に切り替えました</font><font style="vertical-align: inherit;">。これは、さまざまな撮影条件でより適切に機能するだけでなく、より高速でもありました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
画像をNCSにアップロードして検出器の予測を取得する前に、画像を前処理する必要があります。私が選んだ検出器はカラー画像で動作します</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>300</mn><mo>&amp;#x00D7;</mo><mn>300</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="9.815ex" height="2.009ex" viewBox="0 -755.5 4225.9 865.1" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjwTfTzTfX9mEWPynHN2K3OTetsBg#MJMAIN-33"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjwTfTzTfX9mEWPynHN2K3OTetsBg#MJMAIN-30" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjwTfTzTfX9mEWPynHN2K3OTetsBg#MJMAIN-30" x="1001" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjwTfTzTfX9mEWPynHN2K3OTetsBg#MJMAIN-D7" x="1723" y="0"></use><g transform="translate(2724,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjwTfTzTfX9mEWPynHN2K3OTetsBg#MJMAIN-33"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjwTfTzTfX9mEWPynHN2K3OTetsBg#MJMAIN-30" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjwTfTzTfX9mEWPynHN2K3OTetsBg#MJMAIN-30" x="1001" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>300</mn><mo>×</mo><mn>300</mn></math></span></span><script type="math/tex" id="MathJax-Element-1">300 \times 300</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">なので、最初に画像を圧縮する必要があります。これを行うには、最軽量のスケーリングアルゴリズムである最近傍法（OpenCVライブラリのINTER_NEAREST）を使用します。補間法より少し速く動作し、結果にはほとんど影響しません。画像チャネルの順序にも注意を払う価値があります。検出器はBGRの順序を想定しているため、カメラにも同じ順序を設定する必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、ビデオ処理を2つのストリームに分割してみました。1つはカメラから次のフレームを受け取って処理し、もう1つは前のフレームをNCSにアップロードして検出器の結果を待ちました。この方式では、技術的には処理速度は向上しますが、フレームを受信して​​から検出を受信するまでの遅延も増加します。この現実に遅れているため、顔の監視はさらに難しくなるだけなので、結局、私はこのスキームを拒否しました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実際に顔を検出するだけでなく、検出エラーを回避するために追跡する必要もあります。これを行うには、軽量トラッカー</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Simple Online Realtime Tracker（SORT）を使用し</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。このシンプルなトラッカーは2つの部分で構成されています。</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">ハンガリーのアルゴリズム</font></a><font style="vertical-align: inherit;">を使用して、隣接するフレームのオブジェクトを照合します</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、オブジェクトが突然消えた場合の軌跡を予測する- </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">カルマンフィルター</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">フェイストラッキングで遊んでいるときに、カルマンフィルターによって予測された軌跡が突然の動きで非常に信じられないことがあり、これもプロセスを複雑にするだけであることがわかりました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、カルマンフィルターをオフにして、顔照合アルゴリズムと、顔が検出されたフレームの連続した数のカウンターのみを残しました。これにより、検出器の誤検知がなくなります。</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上部プラットフォーム、左から右へ：カメラ、頭と眉を制御するサーボ、スイッチ、電源端子、大きな赤いボタン。</font></font></i><br>
<img src="https://habrastorage.org/webt/hb/ky/kk/hbkykkpwtkhtfl39aonaop5indg.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">トラフィック</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
移動のために、ロボットには5つのサーボがあります。2つのFS5103R連続回転サーボが車輪を回転させます。さらに2つの通常のFS5109Mがあり、1つはヘッドを回転させ、もう1つは缶を振ります。最後に、小さなSG90が眉を動かします。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
正直に言うと、SG90ミニサーボは私にはゴミのように見えました-私のサーボの1つは間違った制御パルス幅を持っていて、他の4つのうち1つだけが生き残りました。公平に言えば、私は誤って使用人の1人を肘に連れて行きましたが、他の2人は単に負荷に耐えることができませんでした（私は以前はヘッドと缶に使用していました）。眉を動かすという最も単純な仕事を得た最後のサーボでさえ、くさびがつかないように時々棒を突き刺さなければなりません。他のサーボでも問題はありませんでした。実際の連続回転サーボは、非アクティブ状態で回転しないように調整する必要がある場合があります。これには、時計のドライバーで回すことができる小さなレギュレーターが付いています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Raspberryでサーボを管理するのは簡単ではありません。まず、それらは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パルス幅変調（PWM / PWM）</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、およびRaspberryでは、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWMがハードウェアでサポートされている</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ピンは2つだけ</font><font style="vertical-align: inherit;">です。第二に、もちろん、ラズベリーはサーボに電力を供給することができず、これに耐えられません。幸い、これらの問題は外部PWMコントローラーを使用して解決されます。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Adafruit PCA9685</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I2Cインターフェイスを</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">介して制御できる16チャネルPWMコントローラです</font><font style="vertical-align: inherit;">。サーボ用の電源を供給する端子が付いているのも便利です。さらに、[理論的には]最大992の制御ピンを受け取りながら、最大62のコントローラーをチェーン接続することが可能です。これには、特別なジャンパーを使用して各コントローラーに一意のアドレスを割り当てる必要があります。だから、もし突然あなたがサーボの軍隊を必要とするなら、あなたは何をすべきか知っています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PCA9685を制御</font><font style="vertical-align: inherit;">するために、</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">WiringPi</font></a><font style="vertical-align: inherit;">拡張機能として機能</font><font style="vertical-align: inherit;">する高レベル</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ライブラリ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">があり</font><font style="vertical-align: inherit;">ます。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">この処理は非常に便利です。初期化中に、PWM信号を書き込むことができる16個の仮想ピンが作成されますが、最初にティック数を計算する必要があります。</font><font style="vertical-align: inherit;">サーボレバーを[0、180]の範囲内の特定の角度に回転させるには、まずこの角度をミリ秒単位の制御パルス長の範囲[SERVO_MS_MIN、SERVO_MS_MAX]に変換する必要があります。</font><font style="vertical-align: inherit;">私のすべてのサーボでは、これらの値はそれぞれ約0.6ミリ秒と2.4ミリ秒です。</font><font style="vertical-align: inherit;">一般に、これらの値はサーボのデータシートで確認できますが、実際には異なる可能性があることが示されているため、選択する必要がある場合があります。</font><font style="vertical-align: inherit;">次に、結果の値を20 ms（制御サイクルの長さの標準値）で割り、ティックの最大数PCA9685（4096）を掛けます。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">driveDegs</span><span class="hljs-params">(<span class="hljs-keyword">float</span> angle, <span class="hljs-keyword">int</span> pin)</span> </span>{
    <span class="hljs-keyword">int</span> ticks = (<span class="hljs-keyword">int</span>) (PCA_MAX_PWM * (angle/<span class="hljs-number">180.0f</span>*(SERVO_MS_MAX-SERVO_MS_MIN) + SERVO_MS_MIN) / <span class="hljs-number">20.0f</span>); <font></font>
    pwmWrite(pin, ticks);<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同様に、これは連続回転サーボで行われます-角度の代わりに、速度を[-1,1]の範囲で設定します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ロボットシャーシとボディを即興の方法で組み立てました。家具の車輪を連続回転のサーボドライブに取り付け、家具のボールサポートが3番目の車輪として機能します。以前はその代わりに、回転支柱に車輪が付いていましたが、このようなシャーシでは正確な旋回が難しいため交換しなければなりませんでした。缶の下にも小さなホイールがあり、重量の一部をサーボからハウジングに移します。最初は簡単ではありませんでしたが、サーボレバーは、特に車輪の場合、途中で脱落しないようにネジで固定する必要があるということがわかりました。そのような愚かさのために、私は一度シャーシをやり直さなければなりませんでした。また、PVCコーナーで作られた幅広のバンパーをロボットにして、頻繁にスタックしないようにしました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それについてあなたが何ができるかについて。まず、瓶を振って眉毛を動かすことができます-これには、サーボレバーを事前に選択した角度に回すだけです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
第二に、あなたはあなたの頭を回転させることができます。カメラが搭載されているため、ヘッドをサーボの最高速度で回転させたくありませんでした。したがって、プログラムで速度を下げることにしました。レバーを小さい角度にして、数ミリ秒待ってから、目的の角度に達するまで待ちます。この場合、頭の現在の絶対位置を覚えておく必要があり、毎回それが許容範囲を超えているかどうかを確認する必要があります（私のロボットでは[10、90]度の範囲です）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
第三に、車輪の回転速度を変えることで移動方向を変えることができます。</font><font style="vertical-align: inherit;">同様に、プラットフォームを回転させて、たとえば顔を追跡できます。</font><font style="vertical-align: inherit;">回転の角速度はサーボ自体とシャーシ上の位置の両方に依存するため、一度測定してからコーナリング時にそれを考慮するのが簡単です。</font><font style="vertical-align: inherit;">回転用のモーターをオンにしてからオフにするまでの必要な遅延を見つけるには、角度モジュールを角速度で除算する必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最後に、時間を無駄にしないように、ヘッドとシャーシを同時に非同期で回転させることができます。</font><font style="vertical-align: inherit;">私はそれをこのようにします：</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">auto</span> waitRotation = <span class="hljs-built_in">std</span>::async(<span class="hljs-built_in">std</span>::launch::async, rotatePlatform, platformAngle);<font></font>
success = driveHead(headAngle);<font></font>
waitRotation.wait();<font></font>
</code></pre><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">中央プラットフォーム、左から右へ：PCA9685、電源バス、Raspberry Pi、MCP3008 ADC</font></font></i><br>
<img src="https://habrastorage.org/webt/bq/q1/8_/bqq18_ilwmgadlcsz0ydepdk44u.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ナビゲーション</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、私は何も複雑にしなかったので、ロボットはナビゲーションに2つのSharp GP2Y0A02YK赤外線距離計を使用しました。センサーはアナログなので、これもそれほど単純ではありませんが、Arduinoとは異なり、Raspberryには</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">アナログ入力</font></a><font style="vertical-align: inherit;">があり</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ません。</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。この問題は、A / Dコンバータ（ADC / ADC）によって解決されます。私は、10ビット、8チャネルのMCP3008を使用しています。個別のマイクロ回路として販売されているため、プリント回路基板にはんだ付けする必要があり、接続しやすくするためにピンもはんだ付けされていました。また、回路をいじくり回している私のバティのアドバイスに基づいて、電源全体とアースの間に2つのコンデンサ（セラミックと電解）をはんだ付けして、回路全体のデジタル部分からのノイズを吸収しました。センサーは出力で3ボルト以下を出力するので、MCP3008（VDD）電源と同じように、Raspberryの3.3vを基準ADC電圧（VREF）として接続できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MCP3008は</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SPI</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">インターフェースを介して制御できる</font><font style="vertical-align: inherit;">ため</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、GitHubで既成のコードを</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">簡単に見つけること</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">ができます</font></a><font style="vertical-align: inherit;">。</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これにもかかわらず、ADCでの便利な作業のためには、タンバリンでいくつかのダンスが必要になります。</font></font></b>
                        <div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">int</span> <span class="hljs-title">analogRead</span><span class="hljs-params">(mcp3008Spi &amp;adc, <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">char</span> channel)</span>
</span>{
    <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">char</span> spi_data[<span class="hljs-number">3</span>];
    <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">int</span> val = <span class="hljs-number">0</span>;<font></font>
<font></font>
    spi_data[<span class="hljs-number">0</span>] = <span class="hljs-number">1</span>;  <span class="hljs-comment">// start bit</span>
    spi_data[<span class="hljs-number">1</span>] = <span class="hljs-number">0b10000000</span> | ( channel &lt;&lt; <span class="hljs-number">4</span>); <span class="hljs-comment">// mode and channel</span>
    spi_data[<span class="hljs-number">2</span>] = <span class="hljs-number">0</span>; <span class="hljs-comment">// anything</span>
    adc.spiWriteRead(spi_data, <span class="hljs-keyword">sizeof</span>(spi_data));<font></font>
  <font></font>
    <span class="hljs-comment">// read value, combine last two bits of second byte with whole third byte</span>
    val = (spi_data[<span class="hljs-number">1</span>]&lt;&lt; <span class="hljs-number">8</span>) &amp; <span class="hljs-number">0b1100000000</span>; <font></font>
    val |= (spi_data[<span class="hljs-number">2</span>] &amp; <span class="hljs-number">0xff</span>);
    <span class="hljs-keyword">return</span> val;<font></font>
}<font></font>
</code></pre><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3バイトをMCP3008に送信する必要があります。MCP3008では、最初のバイトにスタートビットが書き込まれ、2番目のバイトにモードとチャネル番号（0〜7）が書き込まれます。</font><font style="vertical-align: inherit;">また、3バイトを返します。その後、2番目のバイトの最下位2ビットを3番目のすべてのビットに接着する必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
センサーから値を取得できるようになったので、2つのセンサーが互いにわずかに異なる可能性があるため、それらを調整する必要があります。</font><font style="vertical-align: inherit;">一般に、これらのセンサーの信号強度が原因で離れた場所からの表示は非線形であり、それほど単純ではありません（</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">詳細については、データシート、pdfを参照してください</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">したがって、センサーに意味のある等距離で1.0の値を乗算すると、2つの係数を取得するだけで十分です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
センサーの読み取り値は、特に難しい障害物では非常にノイズが多いため、指数加重移動平均（EWMA）を使用して各センサーからの信号を平滑化します。</font><font style="vertical-align: inherit;">信号がノイズを発生させず、現実に大きく遅れないように、スムージングパラメータを目で選択しました。</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">正面図：銀行、距離計、バンパー。</font></font></i><br>
<img src="https://habrastorage.org/webt/kb/vw/l-/kbvwl-usmln86iqj8aq236ifhpo.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">栄養</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初に、ロボットが消費する電流を評価してみましょう（</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Raspberryと周辺機器の現在の消費について</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Raspberry Pi 2B：350 mA以上、ただし負荷が高い（最大750-820 mA（？））。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">カメラ：約250 mA;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ニューラルコンピューティングスティック：宣言された消費電力1ワット、USBの電圧5ボルトで200 mA。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IRセンサー：各33 mA（</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">データシート、PDF</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）;</font></font></li>
<li>MCP3008:  ,  0.5  (<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">, pdf</a>);</li>
<li>PCA9685:  , 6  (<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">, pdf</a>);</li>
<li>:  ~150-200   1500-2000     (stall current),          (<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"> FS5109M, pdf</a>)</li>
<li>HDMI (   ): 50 ;</li>
<li> +  ( ): ~200 .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
合計では、すべてのサーボが高負荷で同時に移動しないことを条件として、1.5〜2.5アンペアで十分であると見積もることができます。同時に、ラズベリーには条件付きの5ボルトの電圧が必要で、サーボには4.8〜6ボルトが必要です。これらの要件を満たす電源を見つけることは依然として必要です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その結果、18650バッテリーからロボットに電力を供給することにしました。2つの</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ROBITON 3.4 / Li18650バッテリー</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（3.6ボルト、3400 mAh、最大放電電流4875 mA）を使用してそれらを直列に接続すると、7.2ボルトの電圧で最大4.8アンペアを生成できます。 1.5〜2.5アンペアの消費電流では、1〜2時間で十分です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ちなみに、バッテリーには問題があります。指定されたフォームファクター18650にもかかわらず、そのサイズは</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>18</mn><mo>&amp;#x00D7;</mo><mn>650</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="8.653ex" height="2.009ex" viewBox="0 -755.5 3725.4 865.1" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjwTfTzTfX9mEWPynHN2K3OTetsBg#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjwTfTzTfX9mEWPynHN2K3OTetsBg#MJMAIN-38" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjwTfTzTfX9mEWPynHN2K3OTetsBg#MJMAIN-D7" x="1223" y="0"></use><g transform="translate(2223,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjwTfTzTfX9mEWPynHN2K3OTetsBg#MJMAIN-36"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjwTfTzTfX9mEWPynHN2K3OTetsBg#MJMAIN-35" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjwTfTzTfX9mEWPynHN2K3OTetsBg#MJMAIN-30" x="1001" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>18</mn><mo>×</mo><mn>650</mn></math></span></span><script type="math/tex" id="MathJax-Element-2">18 \times 650</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mm-内蔵の充電制御回路により、数ミリメートル長くなります。そのため、電池室をナイフで突き刺さなければなりませんでした。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
電圧を5ボルトに下げるだけです。このため、2つの別個の降圧DC-DCコンバーター</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DFRobotパワーモジュールを使用します。</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。この鉄片を使用すると、3.6〜25ボルトの入力電圧と少なくとも0.6ボルトの電圧差で電圧を下げることができます。便宜上、スイッチには出力で正確に5ボルトを選択できるスイッチがあり、特別なレギュレーターを使用して任意の出力電圧を構成できます。両方のコンバーターを5ボルトに設定しました。 1つはMicro-USBコネクタを介してRaspberryに給電し、2つ目はPCA9685端子を介してサーボに給電します。これは、ロボットの論理パーツと電源パーツの電源を最大化して、お互いに干渉しないようにするために必要です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
デバッグ段階では、バッテリーの代わりに中国製の9ボルト、2アンペアの電源を使用しました。ロボットが機能するにはそれで十分でした。バッテリーのように、2つのDC-DCコンバーターに接続しました。そこで、便宜上、ロボットの端末を作り、そこに電源や電池室を接続して選べるようにしました。これは、ROSのすべてのコードを完全に書き直したときに非常に役立ち、サーボを含め、ロボットを長期間デバッグする必要がありました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
便宜上、「電源バス」も作成する必要がありました-実際には、それぞれ3.3vと5vのアース用に接続された3列のピンを備えたボードの一部です。バスは対応するRaspberryピンに接続します。 IR距離計のみが5vバスから給電され、MCP3008とPCA9685は3.3vバスから給電されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そしてもちろん、古き良き伝統に従って、私は大きな赤いボタンをロボットに付けました-それが押されると、それは単に電源回路全体を遮断します。</font><font style="vertical-align: inherit;">非常停止には必要ありませんでしたが、ボタン操作でロボットの電源を入れた方が便利です。</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下部プラットフォーム、左から右へ：バッテリーコンパートメント、NCS、DC-DCコンバーター、ホイール付きサーボドライブ、距離計。</font></font></i><br>
<img src="https://habrastorage.org/webt/od/tf/6b/odtf6b5gksijt0nhbflim7wrh1m.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ロボット制御</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Raspberry Pi 2BにはWi-Fiがないため、イーサネットケーブルを介してssh経由で接続する必要があります（ちなみに、これは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ルーターを使用せずにラップトップから直接</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">実行でき</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">ます</font></a><font style="vertical-align: inherit;">）。このスキームが判明しました。ケーブルを介してsshで接続し、ロボットを起動してケーブルを抜きます。その後、その場所に戻して、ラズベリーに再度アクセスできます。より洗練された解決策がありますが、私は複雑にしないことにしました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ロボットをオフにせずに簡単に停止できるように、巨大なソビエトスイッチ（潜水艦から？）を追加しました。それにスイッチをオフにすると、プログラムが終了してロボットが停止します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
スイッチはグランドとRaspberry GPIOピンの1つに接続し</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、WiringPiライブラリ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用し</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">てスイッチ</font></a><font style="vertical-align: inherit;">から読み取ることができます</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="cpp hljs">wiringPiSetup();<font></font>
pinMode(PIN_SWITCH, INPUT);<font></font>
pullUpDnControl(PIN_SWITCH, PUD_UP);<font></font>
<span class="hljs-keyword">bool</span> value = digitalRead(BB_PIN_SWITCH);
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この接続では、ピンの電圧を3.3vにプルアップする必要があることに注意してください。同時に、オープン状態ではハイ信号を生成し、クローズ状態ではロー信号を生成します。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">すべてを一緒に入れて</font></font></h3><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スレッド</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ここで、上記のすべてを組み合わせて、ロボットを制御する1つのプログラムにする必要があります。</font><font style="vertical-align: inherit;">ロボットの最初のバージョンでは、これをスレッド（</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pthread</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">を使用して行いました</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">このバージョンは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">master</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ブランチ</font><font style="vertical-align: inherit;">にありますが、コードはかなり怖いです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プログラムは4つのスレッドで動作します。1つのスレッドがカメラからフレームを取得し、NCSで検出器を起動します。</font><font style="vertical-align: inherit;">2番目のストリームはレンジファインダーからデータを読み取ります。</font><font style="vertical-align: inherit;">3番目のスレッドはスイッチを監視し、グローバル変数</font></font><code>is_running</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を次のように</font><font style="vertical-align: inherit;">設定します</font></font><code>false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オフの場合。メインスレッドは、ロボットの動作とサーボ制御を担当します。スレッドには、メインスレッドと共通のポインターがあり、それによって作業の結果を書き込みます。検出器によって検出された顔に関する情報を格納するベクトルをミューテックスに限定し、他のより単純な共通変数をアトミックとして宣言しました。顔検出器のフローをメインスレッドと調整するために、検出器</font></font><code>face_processed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">から新しい結果が出たときにリセットされ、メインスレッドがこの結果を使用して動作を選択すると上昇</font><font style="vertical-align: inherit;">するフラグがあります。これは、</font><font style="vertical-align: inherit;">関連性のない古いデータを処理しないために必要です。移動後。</font><font style="vertical-align: inherit;">
ストリーム付き</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">のROS</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">バージョンは問題なく動作しましたが、何かを学ぶためにこれをすべて始めたので、同時にマスターしないでください</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ロス</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">？</font><font style="vertical-align: inherit;">私はこのフレームワークを長い間聞いていて、ハッカソンで少し作業する必要さえあったので、結局、ROSのすべてのコードを書き直すことにしました。</font><font style="vertical-align: inherit;">このバージョンのコードは、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ros</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">のデフォルトのブランチにあり、</font><font style="vertical-align: inherit;">はるかにまともです。</font><font style="vertical-align: inherit;">ROSでの実装は、メッセージの送信とその他すべてのオーバーヘッドにより、フローでの実装よりもほぼ確実に遅くなることは明らかです-唯一の問題はどのくらいですか？</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ROSの概念</font></font></b>
                        <div class="spoiler_text">ROS (Robot Operating System) —     ,             ,   ,        .<br>
<br>
    ,  ,  ,     (node), ,    ,       .<br>
<br>
      (topic)      (message)  ,         -    . <br>
<br>
    —   (service).         ,       ,     .      « »,    .<br>
<br>
         <code>.msg</code>  <code>.srv</code> .          .<br>
<br>
 ROS    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"> </a>.<br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私のロボットでは、ROSのアルゴリズムを使用した既成のパッケージを使用せず、メッセージとROSサービスを使用して互いに通信する5つのノードで構成される別のパッケージでロボットコードを設計しました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最も単純なノード</font></font><code>switch_node</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、スイッチの状態を監視し</font><font style="vertical-align: inherit;">ます</font><font style="vertical-align: inherit;">。スイッチがオフになるとすぐに、ノードは</font></font><code>bool</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">トピック内の</font><font style="vertical-align: inherit;">種類の情報のないメッセージをスパムし始めます</font></font><code>terminator</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。これは、作業を完了する時が来たことを示すメインノードへの信号です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2番目のノードは、</font></font><code>sensor_node</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">両方のIR距離計の読み取り値を定期的に読み取り、それらを</font></font><code>sensor_state</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1つのメッセージで</font><font style="vertical-align: inherit;">トピックに送信し</font><font style="vertical-align: inherit;">ます。また、このノードは信号処理を担当します：校正係数によるスケーリングと移動平均。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
三番目の結び目</font></font><code>camera_node</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">彼は顔に関連するすべてのことを担当します。カメラから画像を取得して処理し、検出器の結果を受け取り、トラッカーを通過して、フレームの中心に最も近い顔を見つけます。ロボットは残りの顔を使用しませんが、メッセージは小さくします。ノードがトピックに送信するメッセージに</font></font><code>camera_state</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、フレーム番号、顔があること（顔がないことも知っている必要があるため）、左上隅の相対座標、顔の幅と高さが含まれます。これは、ファイル内のメッセージのタイプの説明がどのように見えるかです</font></font><code>DetectionBox.msg</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="plaintext hljs">int64 count<font></font>
bool present<font></font>
float32 x<font></font>
float32 y<font></font>
float32 width<font></font>
float32 height<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
4番目のノード</font></font><code>servo_node</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、サーボを担当します。まず、それは</font></font><code>servo_action</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">その数によってサーボによって実行されるアクションの1つを可能に</font><font style="vertical-align: inherit;">するサービス</font><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">サポート</font><font style="vertical-align: inherit;">します：ノード全体を初期状態（眉毛、バンク、ヘッド、シャーシを停止）にすること。ヘッドを初期状態に戻します。瓶を振る; 3つの表現（善、中立、悪）の1つを眉で描きます。次に、サービスを使用</font></font><code>servo_speed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">して、リクエストで送信することにより、両方のホイールに新しい速度を設定できます。どちらのサービスも何も返しません。最後に、</font></font><code>servo_head_platform</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ヘッドやシャーシを現在の位置に対して特定の角度で回転できる</font><font style="vertical-align: inherit;">サービス</font><font style="vertical-align: inherit;">があります。このサービスは</font></font><code>true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、少なくとも部分的に頭を回すことができた場合に</font><font style="vertical-align: inherit;">戻ります。</font></font><code>false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">そうでなければ、頭がすでに許容角度の境界にあり、さらにそれを回転させようとしている場合。</font><font style="vertical-align: inherit;">リクエストの両方の角度がゼロ以外の場合、サービスは上記のように非同期で回転します。</font><font style="vertical-align: inherit;">メインループでは、サーボノードは何もしません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここでは、例えば、サービスの説明です</font></font><code>servo_head_platform</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<br>
<pre><code class="plaintext hljs">float32 head_delta<font></font>
float32 platform_delta<font></font>
---<font></font>
bool head_success<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
リストされた各ノードは</font></font><code>terminate_{switch, camera, sensor, servo}</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、空の応答要求を持つ</font><font style="vertical-align: inherit;">サービス</font><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">サポートし、ノード</font><font style="vertical-align: inherit;">の動作を停止します。</font><font style="vertical-align: inherit;">これは次のように実装されます。</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">いくつかのコード</font></font></b>
                        <div class="spoiler_text"><pre><code class="cpp hljs">...
<span class="hljs-built_in">std</span>::<span class="hljs-keyword">atomic_bool</span> is_running; <span class="hljs-comment">// global</span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">terminate_node</span><span class="hljs-params">(std_srvs::Empty::Request &amp;req, std_srvs::Empty::Response &amp;ignored)</span> </span>{<font></font>
    is_running = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> **argv)</span> </span>{<font></font>
    is_running = <span class="hljs-literal">true</span>;<font></font>
    ...<font></font>
    <span class="hljs-keyword">while</span> (is_running &amp;&amp; ros::ok()) {
        <span class="hljs-comment">// do stuff</span><font></font>
    }<font></font>
    ...<font></font>
}<font></font>
</code></pre><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ノードにはグローバル変数があり</font></font><code>is_running</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、その値はノードのメインサイクルを決定します。サービスは単にこの変数をリセットし、メインループが中断されます。</font><font style="vertical-align: inherit;">ロボットの基本ロジックが実装されて</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
いるメインノードもあります</font></font><code>beggar_bot</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。メインループの開始前に、トピックにサブスクライブ</font></font><code>sensor_state</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">し、</font></font><code>camera_state</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コールバック関数でグローバル変数内のメッセージの内容を保存します。彼はまた</font><font style="vertical-align: inherit;">、メインループを中断する</font></font><code>terminator</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">フラグをリセットするコールバック</font><font style="vertical-align: inherit;">トピックをサブスクライブして</font><font style="vertical-align: inherit;">います</font></font><code>is_running</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。また、サイクルが開始する前に、ノードはサーボノードのサービスのインターフェイスをアナウンスし、他のノードが起動するまで数秒待ちます。メインループが終了した後、このノードはサービスを呼び出します</font></font><code>terminate_{switch, camera, sensor, servo}</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、したがって、他のすべてのノードをオフにしてから、それ自体をオフにします。つまり、スイッチをオフにすると、5つのノードすべてが操作を完了します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ROSに切り替えると、プログラムの構造を大幅に変更せざるを得なくなりました。たとえば、以前は高周波数でホイール速度を変更することが可能でしたが、これはうまくいきましたが、ROSサービスは1桁遅く動作するため、速度が実際に変更されたときにのみサービスが呼び出されるようにコードを書き直す必要がありました（「遅延モード」で）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ROSでは、ロボットのすべてのノードを非常に便利に実行することもできます。これを行うに</font><font style="vertical-align: inherit;">は、ロボットのすべてのノードと他の属性をxml形式でリストし</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">た.launch起動ファイル</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を記述して、次のコマンドを実行する必要があり</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">ます</font></a><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="plaintext hljs">roslaunch beggar_bot robot.launch</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ROS対pthread</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
最後に、ROSバージョンとpthreadバージョンの速度を比較できます。</font><font style="vertical-align: inherit;">私はこのようにしています。カメラの操作を担当するスレッド/ノードは、FPSを（最も遅い要素として）考慮します。</font><font style="vertical-align: inherit;">pthreadバージョンでは、一貫してFPS 9.99程度を取得しましたが、ROSバージョンでは約8.3でした。</font><font style="vertical-align: inherit;">実際、このようなおもちゃにはこれで十分ですが、オーバーヘッドはかなり顕著です。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ロボットの行動</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アイデアは非常に単純です。ロボットが人を見た場合、彼は彼まで運転して缶を振る必要があります。瓶を振ることは非常にシンプルで楽しいですが、最初にその人に近づく必要があります。</font><font style="vertical-align: inherit;">フレームに顔がある場合、シャーシとロボットの頭をその方向に回転させる</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
機能があります</font></font><code>follow_face</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（中心に最も近い顔のみを考慮します）。これは、ロボットがフレーム内にいる場合、ロボットが常に人の上に進路を保ち、瓶を振るときに顔を直接見るためにも必要です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この関数をトピックと同期するために</font></font><code>camera_state</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">同じ変数が使用さ</font><font style="vertical-align: inherit;">れます</font><font style="vertical-align: inherit;">。</font></font><code>face_processed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、ストリーム付きバージョンと同様。考え方は同じです。ロボットは常に動いているので、データを一度だけ処理したいのです。関数はまず、検出されたトピックのコールバックが、最後のフレームが処理されたことを示すフラグを下げるまで待機します。彼女が待機している間、彼女は常に</font></font><code>ros::spinOnce()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新しいメッセージを受信するために</font><font style="vertical-align: inherit;">呼び出し</font><font style="vertical-align: inherit;">ます（通常、これはプログラムが新しいデータを期待するところならどこでも行う必要があります）。フレームに顔がある場合、角度が計算され、プラットフォームと頭を回転する必要があります。これは、顔の中心の相対座標とカメラの視野を水平および垂直に知ることで実行できます。その後、サービス</font></font><code>servo_head_platform</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">呼び出し</font><font style="vertical-align: inherit;">てロボットを動かす</font><font style="vertical-align: inherit;">ことができます</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
微妙な点が1つあります。顔の位置に関する情報は、実際の顔の動きよりも遅れており、ロボット自体の動きよりも遅れている場合があります。したがって、ロボットは回転角度を過大評価する可能性があります。そのため、頭部は振幅の増加とともに前後に動き始めます。これを防ぐために、移動後の遅延（300 ms）を行い、移動後の1フレームもスキップします。同じ目的で、シャーシとヘッドの回転角度は0.8倍されます（</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PIDコントローラーの</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Pコンポーネントは意味があります</font><font style="vertical-align: inherit;">）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
関数</font></font><code>follow_face</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">人のステータスを返します。</font><font style="vertical-align: inherit;">人は次のことができます。不在、中心に十分に近い、ロボットから遠すぎる。</font><font style="vertical-align: inherit;">別のオプション-ロボットを回して、顔に何が起こったのかわからない場合（検索プロセスで）。</font><font style="vertical-align: inherit;">頭がボーダーにある場合はまだまれなケースがあるため、顔を向けることは不可能です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
メインループではかなり単純なことが起こります：</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"></font><code>follow_face</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">その人が特定のステータス（「検索プロセス中」を除く、すべて）になるまで</font><font style="vertical-align: inherit;">電話し</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">このステップの最後に、ロボットは顔を直接見ます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">顔が見つかり、近い場合： </font></font><br>
 <ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">缶を振る。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">顔をもう一度見つけます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">顔が定位置にある場合は、眉毛で表情を整え、瓶をもう一度振ってください。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">顔が見えなくなったら眉毛で怒った表情をします。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">振り返って、サイクルの初めに行きます。</font></font></li>
</ol><br>
 </li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">人がいない場合（または遠くにいる場合）-部屋の周りのナビゲーション：</font></font><br>
 <ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">両側の障害物から遠い場合は、前方に運転します（顔が見つかったが、遠すぎることが判明した場合、ロボットはその人のところに行きます）。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">障害物が両側に近い場合、範囲内でランダムに曲がります </font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo stretchy=&quot;false&quot;>[</mo><mn>90</mn><mo>,</mo><mn>180</mn><mo stretchy=&quot;false&quot;>]</mo><mo>&amp;#x222A;</mo><mo stretchy=&quot;false&quot;>[</mo><mo>&amp;#x2212;</mo><mn>180</mn><mo>,</mo><mo>&amp;#x2212;</mo><mn>90</mn><mo stretchy=&quot;false&quot;>]</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="22.479ex" height="2.634ex" viewBox="0 -809.3 9678.3 1134.2" role="img" focusable="false" style="vertical-align: -0.755ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjwTfTzTfX9mEWPynHN2K3OTetsBg#MJMAIN-5B" x="0" y="0"></use><g transform="translate(278,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjwTfTzTfX9mEWPynHN2K3OTetsBg#MJMAIN-39"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjwTfTzTfX9mEWPynHN2K3OTetsBg#MJMAIN-30" x="500" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjwTfTzTfX9mEWPynHN2K3OTetsBg#MJMAIN-2C" x="1279" y="0"></use><g transform="translate(1724,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjwTfTzTfX9mEWPynHN2K3OTetsBg#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjwTfTzTfX9mEWPynHN2K3OTetsBg#MJMAIN-38" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjwTfTzTfX9mEWPynHN2K3OTetsBg#MJMAIN-30" x="1001" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjwTfTzTfX9mEWPynHN2K3OTetsBg#MJMAIN-5D" x="3226" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjwTfTzTfX9mEWPynHN2K3OTetsBg#MJMAIN-222A" x="3726" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjwTfTzTfX9mEWPynHN2K3OTetsBg#MJMAIN-5B" x="4616" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjwTfTzTfX9mEWPynHN2K3OTetsBg#MJMAIN-2212" x="4895" y="0"></use><g transform="translate(5673,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjwTfTzTfX9mEWPynHN2K3OTetsBg#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjwTfTzTfX9mEWPynHN2K3OTetsBg#MJMAIN-38" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjwTfTzTfX9mEWPynHN2K3OTetsBg#MJMAIN-30" x="1001" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjwTfTzTfX9mEWPynHN2K3OTetsBg#MJMAIN-2C" x="7175" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjwTfTzTfX9mEWPynHN2K3OTetsBg#MJMAIN-2212" x="7620" y="0"></use><g transform="translate(8398,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjwTfTzTfX9mEWPynHN2K3OTetsBg#MJMAIN-39"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjwTfTzTfX9mEWPynHN2K3OTetsBg#MJMAIN-30" x="500" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjwTfTzTfX9mEWPynHN2K3OTetsBg#MJMAIN-5D" x="9399" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">[</mo><mn>90</mn><mo>,</mo><mn>180</mn><mo stretchy="false">]</mo><mo>∪</mo><mo stretchy="false">[</mo><mo>−</mo><mn>180</mn><mo>,</mo><mo>−</mo><mn>90</mn><mo stretchy="false">]</mo></math></span></span><script type="math/tex" id="MathJax-Element-3">[90, 180] \cup [-180, -90]</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">障害物が片側だけの場合は、ランダムな角度で反対方向に曲がります </font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo stretchy=&quot;false&quot;>[</mo><mn>0</mn><mo>,</mo><mn>90</mn><mo stretchy=&quot;false&quot;>]</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.815ex" height="2.634ex" viewBox="0 -809.3 2503.7 1134.2" role="img" focusable="false" style="vertical-align: -0.755ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjwTfTzTfX9mEWPynHN2K3OTetsBg#MJMAIN-5B" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjwTfTzTfX9mEWPynHN2K3OTetsBg#MJMAIN-30" x="278" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjwTfTzTfX9mEWPynHN2K3OTetsBg#MJMAIN-2C" x="779" y="0"></use><g transform="translate(1224,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjwTfTzTfX9mEWPynHN2K3OTetsBg#MJMAIN-39"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjwTfTzTfX9mEWPynHN2K3OTetsBg#MJMAIN-30" x="500" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjwTfTzTfX9mEWPynHN2K3OTetsBg#MJMAIN-5D" x="2225" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">[</mo><mn>0</mn><mo>,</mo><mn>90</mn><mo stretchy="false">]</mo></math></span></span><script type="math/tex" id="MathJax-Element-4">[0, 90]</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">前進動作が長すぎる（スタックしている可能性がある）場合は、少し引き戻し、範囲内でランダムに回転します。 </font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo stretchy=&quot;false&quot;>[</mo><mn>90</mn><mo>,</mo><mn>180</mn><mo stretchy=&quot;false&quot;>]</mo><mo>&amp;#x222A;</mo><mo stretchy=&quot;false&quot;>[</mo><mo>&amp;#x2212;</mo><mn>180</mn><mo>,</mo><mo>&amp;#x2212;</mo><mn>90</mn><mo stretchy=&quot;false&quot;>]</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="22.479ex" height="2.634ex" viewBox="0 -809.3 9678.3 1134.2" role="img" focusable="false" style="vertical-align: -0.755ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjwTfTzTfX9mEWPynHN2K3OTetsBg#MJMAIN-5B" x="0" y="0"></use><g transform="translate(278,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjwTfTzTfX9mEWPynHN2K3OTetsBg#MJMAIN-39"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjwTfTzTfX9mEWPynHN2K3OTetsBg#MJMAIN-30" x="500" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjwTfTzTfX9mEWPynHN2K3OTetsBg#MJMAIN-2C" x="1279" y="0"></use><g transform="translate(1724,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjwTfTzTfX9mEWPynHN2K3OTetsBg#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjwTfTzTfX9mEWPynHN2K3OTetsBg#MJMAIN-38" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjwTfTzTfX9mEWPynHN2K3OTetsBg#MJMAIN-30" x="1001" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjwTfTzTfX9mEWPynHN2K3OTetsBg#MJMAIN-5D" x="3226" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjwTfTzTfX9mEWPynHN2K3OTetsBg#MJMAIN-222A" x="3726" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjwTfTzTfX9mEWPynHN2K3OTetsBg#MJMAIN-5B" x="4616" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjwTfTzTfX9mEWPynHN2K3OTetsBg#MJMAIN-2212" x="4895" y="0"></use><g transform="translate(5673,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjwTfTzTfX9mEWPynHN2K3OTetsBg#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjwTfTzTfX9mEWPynHN2K3OTetsBg#MJMAIN-38" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjwTfTzTfX9mEWPynHN2K3OTetsBg#MJMAIN-30" x="1001" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjwTfTzTfX9mEWPynHN2K3OTetsBg#MJMAIN-2C" x="7175" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjwTfTzTfX9mEWPynHN2K3OTetsBg#MJMAIN-2212" x="7620" y="0"></use><g transform="translate(8398,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjwTfTzTfX9mEWPynHN2K3OTetsBg#MJMAIN-39"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjwTfTzTfX9mEWPynHN2K3OTetsBg#MJMAIN-30" x="500" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjwTfTzTfX9mEWPynHN2K3OTetsBg#MJMAIN-5D" x="9399" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">[</mo><mn>90</mn><mo>,</mo><mn>180</mn><mo stretchy="false">]</mo><mo>∪</mo><mo stretchy="false">[</mo><mo>−</mo><mn>180</mn><mo>,</mo><mo>−</mo><mn>90</mn><mo stretchy="false">]</mo></math></span></span><script type="math/tex" id="MathJax-Element-5">[90, 180] \cup [-180, -90]</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">; </font></font></li>
</ol><br>
 </li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このアルゴリズムは強力な人工知能であるとは主張していませんが、ランダム化された動作と広いバンパーにより、ロボットは遅かれ早かれほとんどすべての位置から出ることができます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">結論</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
見かけは単純ですが、このプロジェクトは、アナログセンサーの操作、PWM、コンピュータービジョンの操作、非同期タスクの調整など、多くの重要なトピックをカバーしています。</font><font style="vertical-align: inherit;">さらに、それはめちゃくちゃ楽しいです。</font><font style="vertical-align: inherit;">おそらく、さらに私はもっと意味のあることをしますが、ディープラーニングに偏りがあります。</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">おまけとして-ギャラリー：</font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/el/cw/jd/elcwjdoa21liogjvhakstzg-yru.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/il/12/fp/il12fpucbbreblnwyb2ojwsfmwu.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/3w/kr/7m/3wkr7mfjqjo2b_f9kvekia82ztq.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/z4/3q/wr/z43qwrmlfgwndbi3dw-jnvxzqew.jpeg"></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja500140/index.html">「最大1万」：ヘッドフォンの25以上のレビュー</a></li>
<li><a href="../ja500142/index.html">施設レベルでの権限の管理</a></li>
<li><a href="../ja500144/index.html">David O'Brien（Xirus）：メトリクス！指標！指標！パート1</a></li>
<li><a href="../ja500146/index.html">製品マネージャーなどとしてドイツでの就職活動。パート3/5。CVの送信を開始する前に行う必要があること</a></li>
<li><a href="../ja500148/index.html">Mikrotikファイアウォールフィルター：フィルターポリシーの基礎を生成するスクリプト</a></li>
<li><a href="../ja500152/index.html">1CでPOSターミナルとFR IKKM-Touchを統合する方法：エンタープライズ</a></li>
<li><a href="../ja500154/index.html">機密の機械学習。PySyftライブラリ</a></li>
<li><a href="../ja500158/index.html">SwiftUIとReduxの相互作用</a></li>
<li><a href="../ja500160/index.html">視覚的要素</a></li>
<li><a href="../ja500162/index.html">素晴らしいPythonスポーツデータ処理チュートリアル</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>