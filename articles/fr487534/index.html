<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤶🏿 🧓🏻 💰 etcd 3.4.3: recherche sur la fiabilité et la sécurité du stockage 🚤 🚮 🤨</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Remarque perev. : Le contenu de cet article n'est pas entièrement typique de notre blog. Cependant, comme beaucoup le savent, etcd est situé au cœur d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>etcd 3.4.3: recherche sur la fiabilité et la sécurité du stockage</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/flant/blog/487534/"><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Remarque perev.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : Le contenu de cet article n'est pas entièrement typique de notre blog. Cependant, comme beaucoup le savent, etcd est situé au cœur de Kubernetes, c'est pourquoi cette étude, menée par un consultant indépendant dans le domaine de la fiabilité, s'est avérée intéressante auprès des ingénieurs exploitant ce système. De plus, il est intéressant dans le contexte de l'amélioration des projets Open Source qui ont déjà fait leurs preuves en production, même à un niveau très "bas".</font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/xd/av/d3/xdavd35rjqklgnrnd-0wulkpayo.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Le</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> coffre de</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> valeurs-clés (KV),</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"> etc.</font></a><font style="vertical-align: inherit;"> est une base de données distribuée basée sur l'algorithme de consensus Raft. Dans une analyse</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> menée en 2014</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , nous avons constaté que etcd 0.4.1 était affecté par les soi-disant lectures périmées par défaut</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(lire les opérations qui renvoient une ancienne valeur non pertinente en raison d'un retard de synchronisation - environ transl.)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Nous avons décidé de revenir à etcd (cette fois - à la version 3.4.3) afin d'évaluer à nouveau en détail son potentiel dans le domaine de la fiabilité et de la sécurité.</font></font><a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons constaté que le fonctionnement avec des paires de "valeurs-clés" strictement sérialisables et que les processus de l'observateur </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(montres)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> livraient à chaque changement de clé de commande. </font><font style="vertical-align: inherit;">Cependant, les </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">verrous</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dans etcd sont fondamentalement dangereux, et les risques qui leur sont associés sont exacerbés par un bogue, à la suite de quoi la pertinence du </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bail</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> n'est pas vérifiée </font><font style="vertical-align: inherit;">après avoir attendu le verrou. </font><font style="vertical-align: inherit;">Vous pouvez lire le commentaire des développeurs etcd sur notre rapport </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sur le blog du projet</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'étude a été parrainée par la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cloud Native Computing Foundation</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (CNCF), qui fait partie de la Linux Foundation. </font><font style="vertical-align: inherit;">Elle a été réalisée dans le plein respect </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">des politiques éthiques de Jepsen</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. Origines</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le référentiel Etc KV est un système distribué conçu pour être utilisé comme base de coordination. Comme </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zookeeper</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Consul</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , etcd stocke de petites quantités d'états rarement mis à jour ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">par défaut jusqu'à 8 Go</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) sous la forme d'une carte de valeurs-clés et fournit </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">des</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> lectures, écritures et microtransactions </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;">strictement sérialisables</font></a><font style="vertical-align: inherit;"> dans tout l'entrepôt de données, ainsi que des primitives de coordination comme les </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">verrous</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , le suivi </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(montres)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et sélection des leaders. De nombreux systèmes distribués, tels que </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kubernetes</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenStack</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , utilisent etcd pour stocker des métadonnées de cluster, coordonner des vues coordonnées de données, choisir un leader, etc.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En 2014, nous avons déjà réalisé une évaluation de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">etcd 0.4.1</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Ensuite, nous avons constaté que par défaut, il est sujet aux lectures périmées en raison de l'optimisation. Alors que le </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">travail sur les principes de Raft</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> discute de la nécessité de diviser les opérations de lecture en threads et de les passer par un système de consensus pour assurer la viabilité, etcd lit localement tout leader sans vérifier un état plus actuel sur le nouveau leader. L'équipe de développement etcd a implémenté l' </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">indicateur de quorum facultatif</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , et dans l'API etcd version 3.0 </font><font style="vertical-align: inherit;">, la </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;">linéarisation</font></a><font style="vertical-align: inherit;"> pour toutes les opérations, à l'exception des opérations de suivi, </font><font style="vertical-align: inherit;">est apparue </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">par défaut</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">
L'API etcd 3.0 se concentre sur une carte plate KV où les clés et les valeurs sont opaques</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">des tableaux d'octets </font><i><font style="vertical-align: inherit;">( </font></i><i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;">opaques</font></a></i><i><font style="vertical-align: inherit;"> )</font></i><font style="vertical-align: inherit;"> . À l'aide de requêtes de plage, vous pouvez simuler des clés hiérarchiques. Les utilisateurs peuvent lire, écrire et supprimer des clés, ainsi que surveiller le flux des mises à jour pour une seule clé ou une plage de clés. La boîte à outils etcd est complétée par des baux (objets variables avec une durée de vie limitée, qui sont maintenus à l'état actif par les demandes de pulsation du client), des verrous (objets nommés dédiés liés aux baux) et le choix des leaders. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans la version 3.0, etcd propose une </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;">API transactionnelle</font></a><font style="vertical-align: inherit;"> limitée</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pour les opérations atomiques avec de nombreuses clés. </font><font style="vertical-align: inherit;">Dans ce modèle, une transaction est une expression conditionnelle avec un prédicat, une vraie branche et une fausse branche. </font><font style="vertical-align: inherit;">Un prédicat peut être une conjonction de plusieurs comparaisons de clés: égalité ou diverses inégalités, selon les versions d'une clé, révision globale, etc., ou la valeur de clé actuelle. </font><font style="vertical-align: inherit;">Les vraies et fausses branches peuvent inclure plusieurs opérations de lecture et d'écriture; </font><font style="vertical-align: inherit;">tous sont appliqués atomiquement en fonction du résultat de l'estimation du prédicat.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.1 Garanties de cohérence dans la documentation</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Depuis octobre 2019, la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">documentation</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> etcd </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;">de l'API</font></a><font style="vertical-align: inherit;"> indique que «tous les appels d'API démontrent une cohérence cohérente - la forme la plus solide de garantie de cohérence disponible sur les systèmes distribués». Ce n'est pas le cas: la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cohérence cohérente est</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> strictement plus faible que la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">linéarisation</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et la linéarisation est certainement réalisable dans les systèmes distribués. En outre, la documentation indique que «pendant l'opération de lecture, etcd ne garantit pas le transfert de la valeur [la plus récente (mesurée par l'horloge externe après la fin de la requête)] disponible sur n'importe quel membre du cluster». C'est aussi une déclaration trop conservatrice: si etcd fournit la linéarisation, les opérations de lecture sont toujours associées à l'état validé le plus récent dans l'ordre de linéarisation. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La documentation affirme également que etcd garantit une </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">isolation sérialisable</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: toutes les opérations (même celles qui affectent plusieurs touches) sont effectuées dans un ordre général. Les auteurs décrivent l'isolement sérialisable comme «le plus haut niveau d'isolement disponible dans les systèmes distribués». Cela (selon ce que vous entendez par «niveau d'isolement») n'est pas vrai non plus; la sérialisabilité stricte est plus forte que la sérialisation simple, tandis que la première est également réalisable dans les systèmes distribués. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La documentation indique que toutes les opérations (sauf le suivi) dans etcd sont linéarisables par défaut. Dans ce cas, la linéarisation est définie comme la cohérence avec des horloges globales faiblement synchronisées. Il convient de noter qu'une telle définition n'est pas seulement incompatible avec la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">définition de la linéarisation</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Herlihy &amp; Wing, mais implique également une violation de la causalité: les nœuds avec des heures de pointe vont essayer de lire les résultats d'opérations qui n'ont même pas commencé. Nous supposons que etcd n'est toujours pas une machine à remonter le temps, et comme il est basé sur l'algorithme Raft, la définition généralement acceptée de la linéarisation devrait être appliquée. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Puisque les opérations KV dans etcd sont sérialisables et linéarisables, nous pensons qu'en fait, etcd fournit </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">une sérialisation stricte</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> par défaut </font><font style="vertical-align: inherit;">. Cela a du sens, car toutes les clés etcd sont dans une seule machine d'état, et Raft fournit un ordre complet de toutes les opérations sur cette machine d'état. En fait, l'ensemble de données etcd est un seul objet linéarisable. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le drapeau optionnel </font></font><code>serializable</code> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s'abaisse</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Niveau des opérations de lecture, de la cohérence sérialisable stricte à régulière, permettant la lecture d'un état validé périmé. </font><font style="vertical-align: inherit;">Notez que le drapeau </font></font><code>serializable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n'affecte pas la sérialisation de l'histoire; </font><font style="vertical-align: inherit;">Les opérations KV, etc. sont sérialisables dans tous les cas.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. Développement de tests</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour créer </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">une suite de tests,</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nous avons utilisé la </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;">bibliothèque Jepsen</font></a><font style="vertical-align: inherit;"> appropriée</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. La version etcd 3.4.3 (la dernière en date d'octobre 19) a été analysée, travaillant sur des clusters Debian Stretch composés de 5 nœuds. Nous avons implémenté un certain nombre de défauts dans ces clusters, notamment les partitions réseau, l'isolement des nœuds individuels, le partitionnement du cluster en majorité et en minorité, ainsi que les partitions non transitives à majorité chevauchante. Ils ont «abandonné» et suspendu des sous-ensembles aléatoires de nœuds, ainsi que des dirigeants délibérément handicapés. Des distorsions temporelles pouvant atteindre plusieurs centaines de secondes ont été introduites, à des intervalles de plusieurs secondes et à des millisecondes ("scintillement" rapide). Étant donné que etcd prend en charge la modification dynamique du nombre de composants, nous avons ajouté et supprimé des nœuds au hasard pendant les tests.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les charges de test comprenaient des registres, des ensembles et des tests transactionnels pour vérifier les opérations sur KV, ainsi que des charges spécialisées pour les serrures et les montres.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.1 Registres</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour évaluer la fiabilité de etcd pendant les opérations KV, un </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">test de registre a</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> été développé au </font><font style="vertical-align: inherit;">cours duquel des opérations aléatoires de lecture, d'écriture, de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">comparaison et de définition</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ont été effectuées </font><font style="vertical-align: inherit;">sur des clés d'unité. </font><font style="vertical-align: inherit;">Les résultats ont été </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">évalués</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> à l'aide de l' </font><font style="vertical-align: inherit;">outil de linéarisation </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;">Knossos</font></a><font style="vertical-align: inherit;"> à l'aide du modèle de registre de comparaison / d'installation et des informations de version.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.2 Ensembles</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour quantifier les lectures périmées, un </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">test a</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> été développé </font><font style="vertical-align: inherit;">qui a utilisé une transaction </font><font style="vertical-align: inherit;">de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">comparaison et de définition</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pour lire un ensemble d'entiers à partir d'une seule clé, puis ajouter une valeur à cet ensemble. </font><font style="vertical-align: inherit;">Pendant le test, nous avons également effectué une lecture parallèle de l'ensemble complet. </font><font style="vertical-align: inherit;">Après l'achèvement du test, les résultats ont été analysés pour la survenue de cas où l'élément, qui était connu pour </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">être</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> présent dans l'ensemble, était absent dans les résultats de lecture. </font><font style="vertical-align: inherit;">Ces cas ont été utilisés pour quantifier les lectures périmées et les mises à jour perdues.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.3 Ajouter un test</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour vérifier la sérialisabilité stricte, un </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">test d'ajout a</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> été développé au </font><font style="vertical-align: inherit;">cours duquel les transactions ont été lues en parallèle et ont ajouté des valeurs à des listes constituées d'ensembles uniques d'entiers. Chaque liste a été stockée dans une clé etcd, et des ajouts ont été effectués au sein de chaque transaction, en lisant </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chaque clé qui devait être modifiée</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en une seule transaction, puis </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ces clés ont été écrites et des lectures ont été effectuées</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dans la deuxième transaction, qui </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">était protégée</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pour s'assurer qu'aucune clé enregistrée n'a changé depuis la première lecture. </font><font style="vertical-align: inherit;">À la fin du test, nous avons tracé la relation entre les transactions en fonction de la priorité en temps réel et la relation des opérations de lecture et d'ajout. </font><font style="vertical-align: inherit;">La vérification de ce graphique pour les boucles a permis de déterminer si les opérations étaient strictement sérialisables. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alors que etcd empêche les transactions d'écrire plusieurs fois la même clé, vous pouvez créer des transactions avec jusqu'à un enregistrement par clé. </font><font style="vertical-align: inherit;">Nous nous sommes également assurés que les opérations de lecture dans la même transaction reflétaient les opérations d'écriture précédentes de la même transaction.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.4 Serrures</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En tant que service de coordination, etcd promet un </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">support intégré pour le verrouillage distribué</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Nous avons étudié ces verrous de deux manières. Au début, des </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">demandes de verrouillage et de déverrouillage aléatoires ont été</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> générées </font><font style="vertical-align: inherit;">, recevant un </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bail pour chaque verrou et le laissant ouvert</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> à l'aide du client </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;">etc.</font></a><font style="vertical-align: inherit;"> intégré dans le client Java </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><code> keepalive</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jusqu'à sa </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">libération</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Nous avons testé les résultats avec Knossos pour voir s'ils forment une implémentation linéarisée du service de verrouillage. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour un test plus pratique (et pour quantifier la fréquence des échecs de verrouillage), nous avons utilisé des verrous et etcd pour organiser </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">l'exclusion mutuelle lors des mises à jour de l'ensemble en mémoire</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et recherché les mises à jour perdues dans cet ensemble. </font><font style="vertical-align: inherit;">Ce test nous a permis de confirmer directement si les systèmes utilisant etcd comme mutex peuvent mettre à jour en toute sécurité l'état interne. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La troisième version du test de verrouillage impliquait des </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gardes sur la clé de bail</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pour modifier l'ensemble stocké dans etcd.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.5 Suivi</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Afin de vérifier que les surveillances fournissent des informations sur chaque mise à jour de clé, une clé a été créée dans le cadre du test et </font><font style="vertical-align: inherit;">des valeurs entières uniques </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aveugles ont été attribuées</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Pendant ce temps, les clients ont partagé </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cette clé</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pendant plusieurs secondes à la fois. </font><font style="vertical-align: inherit;">Chaque fois après le début de la montre, le client a commencé la révision sur laquelle il s'était arrêté la dernière fois. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
À la fin de ce processus, nous nous sommes </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">assurés</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> que chaque client a observé la même séquence de changements clés.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. Résultats</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.1 Suivi à partir de la 0e révision</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lors du suivi d'une clé, les clients peuvent spécifier une </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">révision initiale</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , qui est «une révision facultative avec laquelle le suivi démarre (inclusivement)». Si l'utilisateur veut voir chaque opération avec une certaine clé, il peut spécifier la première révision de etcd. Qu'est-ce que cet audit? </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le modèle de données</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et le </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">glossaire</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ne fournissent pas de réponse à cette question; les révisions sont décrites comme augmentant de façon monotone les compteurs 64 bits, mais il n'est pas clair si etcd démarre à partir de 0 ou 1. Il est raisonnable de supposer que le compte à rebours est à partir de zéro (juste au cas où). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hélas, c'est faux. La demande de la 0e révision oblige etcd à démarrer la diffusion des mises à jour, en commençant par la </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">révision actuelle sur le serveur plus un</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, mais pas avec le tout premier. </font><font style="vertical-align: inherit;">La demande de 1ère révision donne toutes les modifications. </font><font style="vertical-align: inherit;">Ce comportement n'est </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">documenté nulle part</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous pensons qu'en pratique, cette subtilité est peu susceptible d'entraîner des problèmes de production, car la plupart des clusters ne s'attardent pas sur la première révision. </font><font style="vertical-align: inherit;">De plus, etcd compresse l'histoire de toute façon au fil du temps, donc dans les applications du monde réel, très probablement, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en tout cas, il</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ne nécessite pas de lire toutes les versions, à partir de la 1ère révision. </font><font style="vertical-align: inherit;">Un tel comportement est justifié, mais il ne nuirait pas à la description correspondante dans la documentation.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.2 Serrures mythiques</font></font></h3><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La documentation de l'API pour les verrous</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> indique qu'une clé verrouillée "peut être utilisée conjointement avec des transactions pour garantir que les mises à jour dans etcd se produisent uniquement lorsque le verrou est détenu". Étrange, mais il ne fournit aucune garantie pour les serrures elles-mêmes et leur fonction n'est pas expliquée. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cependant, dans d'autres documents, les responsables de la maintenance, etc. partagent toujours des informations sur l'utilisation des verrous. Par exemple, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">l'annonce de la sortie de etcd 3.2</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> décrit une application </font></font><code>etcdctl</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pour bloquer les changements de partage de fichiers sur un disque. De plus, dans un problème sur GitHub avec une question sur le </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">but spécifique des verrous, l'</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> un des développeurs etcd a répondu ce qui suit:</font></font><br>
<br>
<blockquote>     etcd  ,   (  )        ,     (        etcd), - :<br>
<br>
<ol>
<li>    etcd;</li>
<li>  - ( ,     etcd);</li>
<li>    .</li>
</ol></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un tel exemple est donné dans </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><code>  etcdctl</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: un verrou a été utilisé pour protéger l'équipe </font></font><code>put</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, mais n'a pas lié la clé de verrouillage à la mise à jour. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hélas, ce n'est pas sûr car cela permet à plusieurs clients de détenir simultanément le même verrou. Le problème est aggravé par la suspension des processus, les pannes de réseau ou les partitions, mais il peut également se produire dans des clusters complètement sains sans aucune défaillance externe. Par exemple, dans cette </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">exécution de test, le</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> processus numéro 3 définit correctement le verrou et le processus 1 obtient le même verrou en parallèle avant même que le processus 3 n'ait la possibilité de le supprimer:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ko/hy/lz/kohylznbfb8bh5a2m1l88kysrg4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La violation du mutex était plus visible sur les baux avec des TTL courts: les TTL de 1, 2 et 3 secondes n'étaient pas en mesure de fournir l'exclusion mutuelle après seulement quelques minutes de test (même dans des grappes saines). Les suspensions de processus et les partitions réseau ont entraîné des problèmes encore plus rapidement. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans l'une de nos variantes de test de verrouillage, des mutex etcd ont été utilisés pour protéger les mises à jour conjointes d'un ensemble d'entiers (comme le suggère la documentation etcd). Chaque mise à jour lit la valeur d'exemple en mémoire actuelle et, après environ une seconde, réécrit cette collection avec l'ajout d'un élément unique. Avec des baux avec un TTL de deux secondes, cinq processus parallèles et une pause de processus toutes les cinq secondes, nous avons pu provoquer une perte régulière d'environ 18% des mises à jour confirmées.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ce problème a été exacerbé par le mécanisme de verrouillage interne dans etcd. Si un client attendait qu'un autre client le déverrouille, a perdu son bail et après que le verrou a été libéré, le serveur </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n'a pas revérifié le bail</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pour s'assurer qu'il est toujours valide avant d'informer le client que le verrou est maintenant derrière lui. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'inclusion d'un chèque de bail supplémentaire, ainsi que la sélection de TTL plus longs et la définition minutieuse des </font><font style="vertical-align: inherit;">délais d' </font><font style="vertical-align: inherit;">expiration des </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">élections</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , réduiront la fréquence de ce problème. Cependant, les violations de mutex ne peuvent pas être complètement éliminées, car les verrous distribués sont fondamentalement dangereux dans les systèmes asynchrones. Le Dr Martin Kleppmann le décrit de manière convaincante dans </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">son article</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">À propos des verrous distribués. Selon lui, les services de blocage doivent sacrifier l'exactitude afin de maintenir la viabilité dans les systèmes asynchrones: si le processus se bloque lors du contrôle du blocage, le service de blocage a besoin d'un moyen pour forcer le déverrouillage du blocage. Cependant, si le processus n'est pas tombé, mais s'exécute simplement lentement ou est temporairement indisponible, le déverrouiller peut entraîner son maintien à plusieurs endroits en même temps.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais même si le service de blocage distribué utilise, disons, une sorte de détecteur de défaillance magique et peut effectivement garantir l'exclusion mutuelle, dans le cas d'une ressource non locale, son utilisation sera toujours dangereuse. Supposons que le processus A envoie un message à la base de données D tout en maintenant un verrou. Après cela, le processus A se bloque et le processus B reçoit un verrou et envoie également un message à la base D. Le problème est qu'un message du processus A (en raison de l'asynchronie) peut venir après un message du processus B, violant l'exception mutuelle que le verrou était censé fournir. . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour éviter ce problème, il est nécessaire de s'appuyer sur le fait que </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">le système de stockage lui</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;">même</font></a><font style="vertical-align: inherit;"> prendra en charge l'exactitude des transactions ou, si le service de verrouillage fournit un tel mécanisme, utilisez</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jeton </font><font style="vertical-align: inherit;">« </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Clôture»</font></font></i><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> qui sera inclus dans toutes les opérations effectuées par le détenteur de la serrure. Cela garantira qu'aucune opération du détenteur de verrou précédent ne se produira soudainement entre les opérations du propriétaire de verrou actuel. Par exemple, dans </font><font style="vertical-align: inherit;">le </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">service de blocage Chubby</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de Google </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;">,</font></a><font style="vertical-align: inherit;"> ces jetons sont appelés </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">séquenceurs</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Dans etcd, vous pouvez utiliser la révision de la clé de verrouillage comme un jeton de blocage ordonné globalement. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De plus, les clés de verrouillage dans etcd peuvent être utilisées pour protéger les mises à jour transactionnelles dans etcd lui-même. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vérification de la version de la clé de verrouillage dans le cadre de la transaction</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, les utilisateurs peuvent empêcher une transaction si le verrou n'est plus maintenu (c'est-à-dire que la version de la clé de verrouillage est supérieure à zéro). </font><font style="vertical-align: inherit;">Dans nos tests, cette approche nous a permis d'isoler avec succès les opérations de lecture-modification-écriture dans lesquelles l'écriture était la seule transaction protégée par verrouillage. </font><font style="vertical-align: inherit;">Cette approche fournit un isolement similaire aux jetons de barrage, mais (comme les jetons de barrage) ne garantit pas l'atomicité: un processus peut se bloquer ou perdre un mutex lors d'une mise à jour comprenant de nombreuses opérations, laissant etcd dans un état logiquement incohérent. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les résultats du travail sur les enjeux du projet:</font></font><br>
<ul>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les montres commençant à la révision 0 commencent plus tard</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - non décidé;</font></font></li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les verrous reviennent après le blocage sans vérifier la propriété</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - en maître;</font></font></li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les verrous ne sont pas documentés comme dangereux</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - pas résolus.</font></font></li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4. Discussion</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans nos tests, etcd 3.4.3 a répondu aux attentes concernant les opérations KV: nous avons observé une cohérence strictement sérialisable des transactions en lecture, écriture et même multi-clés, malgré la suspension des processus, les plantages, la manipulation de l'horloge et du réseau, ainsi qu'un changement dans le nombre de membres du cluster . </font><font style="vertical-align: inherit;">Un comportement strictement sérialisable a été implémenté par défaut dans les opérations KV; </font><font style="vertical-align: inherit;">la performance des lectures avec l'indicateur </font></font><code>serializable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a entraîné l'apparition de lectures périmées (comme décrit dans la documentation). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Moniteur </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(montres)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pour fonctionner correctement - au moins sur les touches individuelles. </font><font style="vertical-align: inherit;">Jusqu'à ce que la compression de l'historique détruise les anciennes données, la montre a émis avec succès chaque mise à jour de clé.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cependant, il s'est avéré que les verrous dans etcd (comme tous les verrous distribués) ne fournissent pas d'exclusion mutuelle. Différents processus peuvent maintenir le verrou en même temps - même dans des grappes saines avec des horloges parfaitement synchronisées. La documentation avec l'API de verrouillage n'a rien dit à ce sujet et les exemples de verrous présentés n'étaient pas sûrs. Cependant, certains des problèmes avec les verrous ont dû disparaître après la publication de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ce correctif</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Suite à notre collaboration, l'équipe etcd a apporté un certain nombre d'amendements à la documentation (ils sont déjà apparus sur GitHub et seront publiés dans les futures versions du site web du projet). La page API des garanties GitHub indique maintenant que par défaut etcd est </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strictement sérialisable</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et l'affirmation selon laquelle le sériel et le sérialisable sont les niveaux de cohérence les plus solides disponibles dans les systèmes distribués a été supprimée. En ce qui concerne les révisions, il est maintenant indiqué que le début doit être à </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">partir de l'unité (1)</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , bien que la documentation de l'API </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ne dise toujours pas</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> qu'une tentative de démarrage à partir de la 0e révision entraînera «des événements de sortie qui se sont produits après la révision actuelle plus 1». au lieu de "l'envoi de tous les événements". La documentation des problèmes de sécurité des verrous est en </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cours d'élaboration</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Certaines modifications de la documentation, telles que la description du comportement spécial de etcd lors de la lecture, en commençant par une révision zéro, nécessitent toujours une attention particulière.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme d'habitude, nous soulignons que Jepsen préfère une approche expérimentale de la vérification de la sécurité: nous pouvons confirmer la présence de bugs, mais pas leur absence. </font><font style="vertical-align: inherit;">Des efforts considérables sont déployés pour trouver des problèmes, mais nous ne pouvons pas prouver l'exactitude générale de etcd.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.1 Recommandations</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous utilisez des verrous dans etcd, demandez-vous si vous en avez besoin pour la sécurité ou simplement pour augmenter les performances en limitant la simultanéité de manière probabiliste. Les verrous Etcd peuvent être utilisés pour augmenter les performances, mais leur utilisation à des fins de sécurité peut être risquée. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En particulier, si vous utilisez le verrou etcd pour protéger une ressource partagée telle qu'un fichier, une base de données ou un service, cette ressource doit garantir la sécurité </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sans</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> blocage. Une façon d'y parvenir est d'utiliser un </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jeton de barrage monotone</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Il peut s'agir, par exemple, d'une révision etcd associée à la clé de verrouillage en cours. La ressource partagée doit s'assurer qu'une fois que le client a utilisé le jeton</font></font><code>y</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pour effectuer une opération, toute opération avec un jeton </font></font><code>x &lt; y</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sera rejetée. Cette approche ne garantit pas l'atomicité, mais elle garantit que les opérations dans le cadre du verrouillage sont effectuées dans l'ordre et non par intermittence. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous pensons que les utilisateurs ordinaires ne rencontreront probablement pas ce problème. Mais si vous </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">comptez</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> toujours </font><font style="vertical-align: inherit;">sur la lecture de toutes les modifications de etcd, en commençant par la première révision, n'oubliez pas que vous devez passer 1, pas 0 comme paramètre. Nos expériences montrent qu'une révision nulle dans ce cas signifie "révision actuelle", pas "Au plus tôt."</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Enfin, les verrous et etcd (comme tous les verrous distribués) induisent les utilisateurs en erreur: ils voudront peut-être les utiliser comme des verrous ordinaires, mais ils seront très surpris lorsqu'ils se rendront compte que ces verrous ne procurent pas d'exclusion mutuelle. </font><font style="vertical-align: inherit;">La documentation de l'API, les articles de blog, les problèmes sur GitHub ne disent rien sur ce risque. </font><font style="vertical-align: inherit;">Nous vous recommandons d'inclure dans la documentation etcd des informations indiquant que les verrous ne fournissent pas d'exclusion mutuelle et de fournir des exemples d'utilisation de jetons de barrage pour mettre à jour le statut des ressources partagées au lieu d'exemples pouvant entraîner la perte de mises à jour.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.2 Plans futurs</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le projet etcd est considéré comme stable depuis plusieurs années: l'algorithme Raft basé sur lui a bien fonctionné, l'API pour les opérations KV est simple et directe. Bien que certaines fonctionnalités supplémentaires aient récemment reçu une nouvelle API, sa sémantique est relativement simple. Nous pensons que nous avons déjà étudié suffisamment de commandes de base comme </font></font><code>get</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et </font></font><code>put</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, les transactions, le blocage et le suivi. Cependant, d'autres tests doivent être effectués. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour le moment, nous n'avons pas procédé à une évaluation suffisamment détaillée des </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">suppressions.</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: Il peut y avoir des cas limites associés aux versions et révisions, lorsque les objets sont constamment créés et supprimés. Lors de futurs tests, nous comptons soumettre les opérations de retrait à une étude plus approfondie. Nous n'avons pas non plus testé les requêtes de plage ou les opérations de suivi avec plusieurs clés, bien que nous suspections que leur sémantique soit similaire aux opérations avec des clés uniques. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans les tests, nous avons utilisé la suspension des processus, les plantages, les manipulations avec l'horloge, le réseau a été divisé et la composition du cluster a changé; dans les coulisses, il y avait des problèmes comme des dommages au disque et d'autres </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">échecs byzantins</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> au niveau d'un nœud. Ces opportunités pourraient être explorées dans de futures recherches. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le travail a été soutenu par la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cloud Native Computing Foundation.</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, qui fait partie de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">la Fondation Linux</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , et respecte </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">les politiques éthiques de Jepsen</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Nous tenons à remercier l'équipe etcd pour son aide, et les représentants suivants en particulier: Chris Aniszczyk, Gyuho Lee, Xiang Li, Hitoshi Mitake, Jingyi Hu et Brandon Philips.</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PS du traducteur</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lisez aussi dans notre blog:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">« </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TiKV - base de données clé-valeur distribuée pour le cloud natif</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> »;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">" </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zetcd de CoreOS: Remplacement de ZooKeeper par ... stockage etcd</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ";</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">« </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KeyDB comme remplacement [potentiel] de Redis</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> »;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">" </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bases de données et Kubernetes (revue et reportage vidéo)</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ."</font></font></li>
</ul></div>
      
    </div><p class="reference-to-source js-reference-to-source">Source: https://habr.com/ru/post/undefined/</p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr487516/index.html">Techniques et tactiques de chasse des attaquants utilisant des fichiers Prefetch</a></li>
<li><a href="../fr487518/index.html">Produits radioactifs. Spectromètre gamma. Partie 2</a></li>
<li><a href="../fr487522/index.html">Nous faisons voler le terminal (partie 1)</a></li>
<li><a href="../fr487524/index.html">Pourquoi un hackathon de démarrage matériel a-t-il besoin</a></li>
<li><a href="../fr487528/index.html">Изменения в пользовательском соглашении и политике конфиденциальности на сервисах Хабра</a></li>
<li><a href="../fr487538/index.html">.NET Interactive est arrivé! | Ordinateurs portables .NET Preview 2</a></li>
<li><a href="../fr487540/index.html">HighLoad ++, Anastasia Tsymbalyuk, Stanislav Tselovalnikov (Sberbank): comment nous sommes devenus MDA</a></li>
<li><a href="../fr487542/index.html">PRESENT - Cryptage de blocs ultra-léger (traduction du PRESENT original: Un chiffrement de blocs ultra-léger)</a></li>
<li><a href="../fr487544/index.html">Documentation .NET: Nouveautés de janvier</a></li>
<li><a href="../fr487548/index.html">Nouvelle expérience: appel des services .NET gRPC à partir d'un navigateur avec gRPC-Web</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>