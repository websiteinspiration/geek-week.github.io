<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧗🏾 🐪 👩🏽‍⚖️ Rendu de jeu 3D: introduction ⛷️ 🛄 👌🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Vous jouez le nouveau Call of Mario: Deathduty Battleyard sur votre PC de jeu parfait. Regardez le magnifique moniteur 4K ultra-large, admirant le pay...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Rendu de jeu 3D: introduction</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/500692/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/dq/hw/gw/dqhwgwxgezi8q8erzwy94bjwst0.jpeg" width="500"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous jouez le nouveau Call of Mario: Deathduty Battleyard sur votre PC de jeu parfait. Regardez le magnifique moniteur 4K ultra-large, admirant le paysage magnifique et les détails complexes. Vous êtes-vous déjà demandé comment les graphiques apparaissent à l'écran? Vous êtes-vous déjà demandé comment le jeu fait que l'ordinateur vous montre tout cela? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bienvenue dans notre visite du rendu de jeu 3D: un voyage pour les débutants, à partir duquel vous apprendrez à créer un cadre de base à l'écran.</font></font><br>
<a name="habracut"></a><br>
<img src="https://habrastorage.org/getpro/habr/post_images/d50/b40/462/d50b40462a4a18cef3e522b236f52c99.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Chaque année, des centaines de nouveaux jeux pour smartphones, consoles et PC sortent. La variété des formats et des genres est très grande, mais l'un d'eux, peut-être, est mieux maîtrisé - ce sont des jeux 3D. Quel jeu était le premier - une question discutable, et un rapide coup d'œil à la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">base du Livre Guinness des Records a</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> donné plusieurs résultats. Il peut être considéré comme le premier jeu Ultimate Knight Lore, sorti en 1984, mais à proprement parler, les images de ce jeu étaient en deux dimensions - aucune information n'a été utilisée en trois dimensions. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Donc, si nous voulons vraiment comprendre comment les jeux 3D modernes forment une image, nous devons commencer avec un autre exemple: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Winning Run</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Namco, sorti en 1988. C'était peut-être le premier jeu complètement en trois dimensions utilisant des technologies qui ne sont pas trop différentes des modernes. Bien sûr, tous les jeux dont l'âge a dépassé 30 ans ne sont pas du tout les mêmes que, disons, Codemasters F1, sorti en 2018. Mais les schémas de circuits sont similaires.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/512/06c/a91/51206ca91484780f2fd5c73deffd796b.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans cet article, nous examinerons le processus de génération d'une image de base pour un moniteur ou un téléviseur à l'aide d'un jeu 3D. </font><font style="vertical-align: inherit;">Commençons par le résultat final et demandons-nous: "Qu'est-ce que je regarde?" </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, nous analysons chaque étape de la formation de l'image que nous voyons. </font><font style="vertical-align: inherit;">Au cours de l'action, nous considérerons des concepts tels que les sommets et les pixels, les textures et les passes, les tampons et les ombres, les logiciels et les instructions. </font><font style="vertical-align: inherit;">Nous découvrirons comment la carte vidéo est impliquée dans le processus et pourquoi elle est nécessaire. </font><font style="vertical-align: inherit;">Après cela, vous pouvez regarder vos jeux et PC sous un nouveau jour et commencer à apprécier davantage les graphiques vidéo.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Options de cadre: pixels et couleurs</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Commençons le jeu 3D, comme exemple nous prendrons la </font><font style="vertical-align: inherit;">société Crytek </font><font style="vertical-align: inherit;">sortie en 2007 </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Crysis</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Ci-dessous, une photo de l'écran sur lequel le jeu est affiché:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/142/b40/5c4/142b405c4f4583d032427b7513391735.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cette image est généralement appelée un </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cadre</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Mais que regardons-nous exactement? </font><font style="vertical-align: inherit;">Nous utilisons un objectif macro:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/593/f64/712/593f64712c5065a03fcbca1c90649938.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Malheureusement, l'éblouissement et le rétroéclairage externe du moniteur gâchent la photo, mais si nous l'améliorons un peu, nous obtenons</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/915/b4f/3df/915b4f3dff7fdfb77917465635d64610.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous voyons que le cadre du moniteur est constitué d'une grille d'éléments colorés séparés, et si nous les augmentons encore plus, nous remarquerons que chaque élément est un bloc de trois pièces. Un tel bloc est appelé </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pixel</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (pixel, abréviation d'élément d'image). Dans la plupart des moniteurs, les pixels sont peints en utilisant trois couleurs: rouge, vert et bleu (RVB, rouge-vert-bleu). Pour afficher un nouveau cadre, vous devez traiter une liste de milliers, sinon des millions, de valeurs RVB et les enregistrer dans une mémoire à laquelle le moniteur a accès. Ces fragments de mémoire sont appelés </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tampons</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , c'est-à-dire que le moniteur reçoit le contenu du </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tampon de trame</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C'est le point final de tout le processus, alors maintenant nous allons aller dans la direction opposée à son début. </font><font style="vertical-align: inherit;">Le processus est souvent décrit par le terme </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rendu</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (rendu), mais en réalité, il s'agit d'une séquence d'étapes distinctes reliées les unes aux autres, qui diffèrent essentiellement par essence. </font><font style="vertical-align: inherit;">Imaginez que vous êtes un chef dans un restaurant étoilé Michelin: le résultat final est une assiette de plats délicieux, mais combien doit être fait pour y parvenir. </font><font style="vertical-align: inherit;">Comme pour la cuisson, des ingrédients de base sont nécessaires pour le rendu.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Éléments de construction nécessaires: modèles et textures</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les principaux éléments constitutifs de tout jeu 3D sont des ressources visuelles qui remplissent le monde à dessiner. </font><font style="vertical-align: inherit;">Les films, les émissions de télévision et les théâtres ont besoin d'acteurs, de costumes, d'accessoires, de décors, d'éclairage - la liste est assez longue. </font><font style="vertical-align: inherit;">La même chose avec les jeux 3D. </font><font style="vertical-align: inherit;">Tout ce que vous voyez dans le cadre généré a été développé par des artistes et des experts en modélisation. </font><font style="vertical-align: inherit;">Pour le rendre plus clair, tournons-nous vers la vieille école et jetons un œil au modèle Quake II de la société id Software:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/938/10b/28f/93810b28f68f5e90d272480b2effbf97.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le jeu est sorti il ​​y a plus de 20 ans. </font><font style="vertical-align: inherit;">À cette époque, Quake II était un chef-d'œuvre technologique, bien que, comme dans n'importe quel jeu de ces années, les modèles semblent très primitifs. </font><font style="vertical-align: inherit;">Mais il est facile de démontrer en quoi ils consistent.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a04/5f2/834/a045f2834673247daedbaaf24b3f33e9.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans l'image précédente, nous voyons un mec angulaire composé de triangles connectés les uns aux autres. Chaque coin est appelé sommet ou sommet. Chaque sommet agit comme un point dans l'espace et est décrit par au moins trois nombres: les </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">coordonnées x, y, z</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Cependant, cela ne suffit pas pour un jeu 3D, donc chaque sommet a des valeurs supplémentaires: couleur, direction de la face avant (oui, un point ne peut pas avoir de face avant ... lisez la suite!), Luminosité, degré de transparence, etc.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c42/4ff/db3/c424ffdb3f95d9758bc1a8eeb5c4a870.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les sommets ont toujours un ensemble de valeurs associées aux textures. Ce sont des photos des «vêtements» portés par le mannequin. Mais comme l'image est plate, la carte doit contenir une vue de toutes les directions d'où nous pouvons regarder le modèle. L'exemple de Quake II illustre une approche simple: des images de l'avant, de l'arrière et des côtés (bras). Et les jeux 3D modernes fonctionnent déjà pour les modèles avec de nombreuses cartes de texture, chacune contenant de nombreux détails, sans aucun espace vide entre eux. Certaines cartes ne ressemblent pas à des matériaux ou à des propriétés; elles fournissent plutôt des informations sur la manière dont la lumière est réfléchie par la surface. Chaque sommet a un ensemble de coordonnées dans la carte de texture associée au modèle, de sorte qu'il peut être «étiré» sur le sommet. Cela signifie que lorsque vous déplacez le sommet, la texture se déplace avec lui.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans le monde tridimensionnel rendu, tout ce que vous voyez commence par un ensemble de sommets et de textures. Ils sont chargés dans des tampons de mémoire connectés les uns aux autres. </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le tampon de</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sommet ( </font><i><font style="vertical-align: inherit;">tampon de</font></i><font style="vertical-align: inherit;"> sommet) contient des textures et des portions de mémoire allouées pour le rendu ultérieur. </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tampon de commande contient une liste d'instructions sur ce qu'il faut faire avec ces ressources.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout cela forme le cadre nécessaire qui sera utilisé pour créer la grille finale de pixels colorés. </font><font style="vertical-align: inherit;">Dans certains jeux, il s'agit d'une énorme quantité de données, car il faut trop de temps pour recréer les tampons pour chaque nouvelle image. </font><font style="vertical-align: inherit;">Les jeux stockent également dans des tampons les informations nécessaires pour former un monde entier qu'un joueur peut voir, ou une partie suffisamment grande de celui-ci, mettre à jour si nécessaire. </font><font style="vertical-align: inherit;">Par exemple, dans un jeu de course comme F1 2018, tout sera stocké dans une grande collection de tampons. </font><font style="vertical-align: inherit;">Et dans un jeu à monde ouvert comme Skyrim, les données seront chargées dans des tampons et supprimées de celles-ci lorsque la caméra se déplace dans le monde.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configuration de la scène: sommets</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ayant toutes les informations visuelles, le jeu commencera alors le processus d'affichage visuel. La scène commence par défaut dans une certaine position, avec la disposition de base des modèles, des sources lumineuses, etc. Ce sera l'écran «zéro» - le point de départ pour les graphiques. Il n'est souvent pas affiché, il est simplement traité par le système. Pour illustrer ce qui se passe dans la première étape du rendu, nous utiliserons l'outil en ligne </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rendu en temps réel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Créons le «jeu» le plus simple: une boîte posée au sol.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6eb/6c2/84a/6eb6c284ac1f6dbfd1d88b80ccce1e7b.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cet objet contient 8 sommets, chacun étant décrit par une liste de nombres. </font><font style="vertical-align: inherit;">Les sommets forment un modèle composé de 12 triangles. </font><font style="vertical-align: inherit;">Chaque triangle, et même l'objet lui-même, est appelé une </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">primitive</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Au fur et à mesure que les primitives se déplacent, tournent et se mettent à l'échelle, les nombres passent par des chaînes d'opérations mathématiques et sont mis à jour.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/683/dfb/2cf/683dfb2cf7936d1ae5d7150ee5e3691a.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Notez que les numéros de points du modèle ne changent pas. </font><font style="vertical-align: inherit;">Ces chiffres montrent exactement où se trouve le modèle dans le monde virtuel. </font><font style="vertical-align: inherit;">La prise en compte des calculs mathématiques correspondants dépasse le cadre de l'article, nous dirons seulement que tous les objets sont d'abord placés là où ils devraient être. </font><font style="vertical-align: inherit;">Et puis la coloration commence.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/245/ab4/c10/245ab4c109ab76e81bb20fb9dab7bab4.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Prenez un autre modèle qui a 10 fois plus de sommets que la case précédente. </font><font style="vertical-align: inherit;">Dans le processus de peinture le plus simple, la couleur de chaque sommet est prise, puis les changements de couleur d'une surface à l'autre sont calculés. </font><font style="vertical-align: inherit;">C'est ce qu'on appelle l' </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">interpolation</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6bb/54f/3b7/6bb54f3b70c60c558dfbe029e3361207.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'augmentation du nombre de sommets dans le modèle vous permet non seulement de créer des objets plus réalistes, mais améliore également le résultat de l'interpolation des couleurs.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/682/c4e/d4d/682c4ed4d29b1d3e7bd03302783c9057.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
À ce stade du rendu, l'effet des sources de lumière dans la scène peut être calculé en détail. </font><font style="vertical-align: inherit;">Par exemple, comment les matériaux du modèle reflètent la couleur. </font><font style="vertical-align: inherit;">Ces calculs doivent tenir compte de la position et de la direction de la caméra, ainsi que de la position et de la direction des sources lumineuses.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0e9/044/b91/0e9044b9132d022e5a19e490cfe36091.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour ce faire, il existe différentes méthodes mathématiques, certaines simples, d'autres très complexes. Dans l'illustration ci-dessus, nous voyons que l'objet de droite semble beaucoup plus joli et plus réaliste, mais il faut plus de travail pour le dessiner. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il est important de noter que maintenant nous comparons des objets avec un petit nombre de pics avec les jeux les plus modernes. Faites défiler vers le haut et examinez attentivement l'image de Crysis: cette scène affiche plus d'un million de triangles. En utilisant l' </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">exemple de référence Unigine Valley</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font><font style="vertical-align: inherit;">vous pouvez comprendre combien de triangles sont utilisés dans les jeux modernes.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/486/232/4ec/4862324ec5749273f8b64dd9ad463386.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Chaque objet de cette image se compose de sommets connectés les uns aux autres, qui sont formés par les primitives constituées de triangles. </font><font style="vertical-align: inherit;">Le repère peut être exécuté en mode filaire, dans lequel les bords de chaque triangle sont indiqués par des lignes blanches.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/636/687/f15/636687f15006991fcf278df6af74227e.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme vous pouvez le voir, tout objet est constitué de triangles, et pour chaque triangle l'emplacement, la direction et la couleur sont calculés. </font><font style="vertical-align: inherit;">Cela prend en compte l'emplacement des sources de lumière, ainsi que l'emplacement et la direction de la caméra. </font><font style="vertical-align: inherit;">Toutes les modifications associées aux sommets doivent être transférées au jeu afin qu'il dispose de toutes les informations nécessaires pour dessiner la trame suivante - cela se fait en mettant à jour le tampon de sommets. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Étonnamment, ce n'est pas la partie la plus difficile du rendu, avec le bon matériel, tous les calculs sont effectués en quelques millièmes de seconde! </font><font style="vertical-align: inherit;">Passez.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Perdre la dimension: pixellisation</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Après avoir traité tous les sommets et terminé le placement de tous les objets dans notre scène tridimensionnelle, le processus de rendu passe à une étape très importante. </font><font style="vertical-align: inherit;">Jusqu'à présent, le jeu était vraiment tridimensionnel, mais le cadre final ne l'est plus: au cours d'une série de changements, le monde vu se transforme de l'espace 3D, composé de milliers de points connectés, en une image bidimensionnelle, composée de pixels colorés. </font><font style="vertical-align: inherit;">Dans la plupart des jeux, cette procédure comprend au moins deux phases: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">l'espace d'écran de projection</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font><i><font style="vertical-align: inherit;">projection d'espace d'</font></i><font style="vertical-align: inherit;"> écran) et la </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tramage</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/17f/b9b/264/17fb9b264f727fefbc583b0768b0619b.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De retour à notre outil de rendu Web, il nous montrera comment le volume du monde virtuel se transforme en une image plate. La caméra est montrée à gauche, les lignes qui en émanent créent une </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pyramide tronquée de visibilité</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (tronc), et tout ce qui y pénètre peut être affiché dans le cadre final. La section perpendiculaire de la pyramide est appelée </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">la</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> fenêtre - c'est ce qui sera affiché sur le moniteur. De nombreux calculs mathématiques sont utilisés pour projeter tout le contenu de la pyramide dans la zone de visualisation, en tenant compte de la perspective de la caméra.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bien que les graphiques dans la zone de visualisation soient bidimensionnels, les données sont toujours vraiment tridimensionnelles, et plus tard, ces informations seront utilisées pour calculer quelles primitives sont visibles pour nous et lesquelles sont cachées. Cela peut être étonnamment difficile à faire, car les primitives peuvent projeter des ombres visibles pour nous, même si les primitives elles-mêmes nous sont cachées. Retirez-nous cachés les primitives appelées le </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">largage</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (abattage). Cette opération peut affecter de manière significative la vitesse de rendu de l'ensemble du cadre. Une fois le tri en primitives visibles et cachées terminé, ainsi que les triangles supprimés en dehors des limites de la pyramide de visibilité, la dernière étape de la tridimensionnalité est terminée et le cadre est complètement bidimensionnel à l'aide de la rastérisation.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6db/645/fe9/6db645fe9bd2138481a6f502c1ca8eda.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'illustration ci-dessus montre un exemple très simple d'une trame contenant une primitive. </font><font style="vertical-align: inherit;">La grille de pixels est superposée à la forme géométrique et les pixels correspondants sont marqués pour un traitement ultérieur. </font><font style="vertical-align: inherit;">Le résultat final ne ressemble pas trop au triangle d'origine, car nous n'utilisons pas suffisamment de pixels. </font><font style="vertical-align: inherit;">À cet égard, le problème de l' </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aliasing</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (aliasing, stepping lines) </font><font style="vertical-align: inherit;">se pose </font><font style="vertical-align: inherit;">, qui est résolu de différentes manières. </font><font style="vertical-align: inherit;">Par conséquent, un changement dans la </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">résolution du</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> jeu </font><font style="vertical-align: inherit;">(le nombre total de pixels dans le cadre) affecte tellement le résultat final: plus de pixels améliorent non seulement l'affichage des formulaires, mais réduisent également l'effet d'un aliasing indésirable.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Après avoir terminé cette partie du rendu, nous passons à la prochaine grande étape: la coloration finale de tous les pixels du cadre. </font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Portez la lumière: étape pixel</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous sommes arrivés à l'étape la plus difficile du rendu. </font><font style="vertical-align: inherit;">Une fois, il s'agissait de tirer sur des modèles de vêtements (textures) en utilisant des informations sur les pixels (obtenues à l'origine à partir des sommets). </font><font style="vertical-align: inherit;">Cependant, le fait est que, bien que les textures et le cadre lui-même soient bidimensionnels, cependant, le monde virtuel au stade du traitement des vertex a été déformé, décalé et modifié. </font><font style="vertical-align: inherit;">Pour tenir compte de tout cela, des calculs mathématiques supplémentaires sont utilisés, cependant, de nouveaux problèmes peuvent être caractéristiques du résultat.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c0f/3f4/f2b/c0f3f4f2b83db10efd3058fec26c27fe.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans cette illustration, une texture en damier est appliquée au plan. Il y a une ondulation visuelle désagréable, qui est exacerbée par l'aliasing. Pour résoudre ce problème, utilisez des versions plus petites des cartes de texture ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mappages multiples</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , mipmaps), la réutilisation des informations de ces textures ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">filtrage</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , filtrage) et des calculs mathématiques supplémentaires. L'effet est perceptible:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e8d/a5b/bcd/e8da5bbcd3bf8fc8e9e75c7a9614d2eb.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour n'importe quel jeu, c'était vraiment une étape difficile, mais aujourd'hui, ce n'est plus le cas, car en raison de la large utilisation d'autres effets visuels, tels que les reflets et les ombres, le traitement des textures est devenu une étape relativement petite du processus de rendu. Lorsque vous jouez à des résolutions élevées, la charge aux stades de la pixellisation et du traitement des pixels augmente, mais cela affecte relativement peu le traitement des sommets. Bien que la coloration primaire due aux sources de lumière soit effectuée au stade du sommet, des effets d'éclairage plus sophistiqués peuvent être appliqués.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a62/0bc/a60/a620bca60aa98557848fd500e30f3d94.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans l'illustration précédente, nous ne voyons plus de changements de couleur entre les différents triangles, ce qui nous donne la sensation d'un objet lisse et transparent. Bien que dans cet exemple, la sphère se compose du même nombre de triangles que la sphère verte dans l'illustration ci-dessus, à la suite de la procédure de coloration des pixels, il nous semble que beaucoup plus de triangles sont utilisés.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/321/204/fa2/321204fa222c1a25b1f6197b04c30f52.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans de nombreux jeux, la phase de pixel doit être exécutée plusieurs fois. Par exemple, pour qu'un miroir ou une surface de l'eau reflète le monde environnant, ce monde doit d'abord être dessiné. Chaque passage est appelé </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">passe</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (passe), et pour obtenir l'image finale de chaque image, vous pouvez facilement utiliser quatre passes ou plus. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De plus, vous devez parfois exécuter à nouveau la scène du sommet pour redessiner le monde à partir d'un autre point et utiliser cette image dans une scène qui est montrée au joueur. Pour ce faire, utilisez le </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rendu à tampon unique</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (cibles de rendu) - utilisez des tampons qui agissent comme stockage final pour le cadre, mais peuvent également agir comme des textures avec une passe différente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour évaluer la complexité de la phase de pixel, vous pouvez lire</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">analyse de trame dans Doom 2016</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Vous serez choqué par le nombre d'opérations nécessaires pour créer une image.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4fc/618/e79/4fc618e791b417e9359ca81948ae187f.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout le travail effectué pour créer le cadre doit être enregistré dans le tampon, que ce soit le résultat final ou intermédiaire. </font><font style="vertical-align: inherit;">En général, le jeu utilise à la volée au moins deux tampons pour l'affichage final: un pour le "travail en cours" et le second tampon attend soit l'accès à un moniteur, soit est en cours d'affichage. </font><font style="vertical-align: inherit;">Vous avez toujours besoin d'un tampon d'écran dans lequel le résultat du rendu sera enregistré, et lorsque tous les tampons sont pleins, vous devez continuer et créer un nouveau tampon. </font><font style="vertical-align: inherit;">À la fin du travail avec la trame, une commande simple est donnée, les tampons de trame finaux sont échangés, le moniteur reçoit la dernière trame rendue et le processus de rendu de la trame suivante démarre.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/925/e6e/c4d/925e6ec4d1593ec473c0660ffa555969.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans cette image d' </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Assassin's Creed Odyssey,</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nous voyons le contenu du tampon d'image terminé. </font><font style="vertical-align: inherit;">Ce contenu peut être représenté dans un tableau qui ne contient que des chiffres. </font><font style="vertical-align: inherit;">Ils sont envoyés sous forme de signaux électriques vers un moniteur ou un téléviseur, et les pixels de l'écran changent leurs valeurs. </font><font style="vertical-align: inherit;">Nos yeux voient une image plate et solide, mais notre cerveau l'interprète comme tridimensionnelle. </font><font style="vertical-align: inherit;">Il y a tellement de travail caché dans les coulisses d'un seul coup dans le jeu qu'il vaut la peine de voir comment les programmeurs peuvent le gérer.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gestion des processus: API et instructions</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour comprendre comment exécuter le jeu et gérer tous les calculs, sommets, textures, éclairage, tampons, etc. - c'est une tâche énorme. Heureusement, aidez-nous dans ces </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">interfaces de programmation</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (interface de programmation d'application, API). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les API de rendu réduisent la complexité globale en offrant des structures, des règles et des bibliothèques de logiciels qui permettent des instructions simplifiées indépendantes du matériel. Prenez n'importe quel jeu 3D sorti sur PC au cours des trois dernières années: il a été créé à l'aide de l'une des trois API populaires - Direct3D, OpenGL ou Vulkan. Il existe d'autres développements similaires, en particulier dans le segment mobile, mais dans cet article, nous parlerons des trois mentionnés.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/383/aea/228/383aea228f8c09089472da334107b6e2.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Malgré les différences dans les noms des instructions et des opérations (par exemple, un bloc de code pour traiter les pixels dans DirectX est appelé pixel shader, et dans Vulkan il est appelé fragment shader), le résultat final ne diffère pas, plus précisément, il ne devrait pas différer. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La différence se manifestera dans l'équipement utilisé pour le rendu. Les instructions générées par l'API doivent être converties en commandes matérielles qui sont traitées par les pilotes de périphérique. Et les fabricants d'équipement doivent consacrer beaucoup de ressources et de temps à leurs pilotes pour effectuer cette conversion aussi rapidement et correctement que possible.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8df/431/c77/8df431c7781e07219bfaab3829f209df.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par exemple, la première version bêta de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The Talos Principle</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (2014) a pris en charge les trois API mentionnées. </font><font style="vertical-align: inherit;">Pour montrer comment les résultats de différentes combinaisons de pilotes et d'interfaces peuvent différer, nous avons exécuté le test de référence intégré standard en définissant la résolution sur 1080p et les paramètres de qualité maximale. </font><font style="vertical-align: inherit;">Le processeur Intel Core i7-9700K fonctionnait sans overclocking, la carte vidéo Nvidia Titan X (Pascal), RAM - 32 Go de RAM DDR4.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DirectX 9 = une moyenne de 188,4 images / s.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DirectX 11 = une moyenne de 202,3 images / s.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenGL = 87,9 images / s en moyenne.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vulkan = une moyenne de 189,4 images / s.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous n'analyserons pas les résultats, et ils ne disent certainement pas que certaines API sont «meilleures» que les autres (n'oubliez pas, la version bêta du jeu a été testée). Nous dirons seulement que la programmation pour différentes API est associée à diverses difficultés, et à tout moment, les performances seront également différentes. En général, les développeurs de jeux choisissent l'API avec laquelle ils ont le plus d'expérience et optimisent leur code pour cela. Parfois, le terme </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">moteur est</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> utilisé pour décrire le code responsable du rendu, </font><font style="vertical-align: inherit;">mais à proprement parler, le moteur est un ensemble complet d'outils qui traite tous les aspects du jeu, pas seulement les graphiques. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ce n'est pas si facile de créer un programme à partir de zéro qui rend un jeu 3D. Par conséquent, aujourd'hui, dans de nombreux jeux, des systèmes tiers sous licence sont utilisés (par exemple, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unreal Engine</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font><font style="vertical-align: inherit;">Pour évaluer leur complexité, ouvrez le moteur open source de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quake</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et affichez le fichier gl_draw.c: il contient des instructions pour différentes opérations de rendu et ne reflète qu'une petite partie de l'ensemble du moteur. </font><font style="vertical-align: inherit;">Mais Quake est sorti il ​​y a plus de 20 ans, et l' </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ensemble du jeu</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (y compris toutes les ressources visuelles, les sons, la musique, etc.) prend 55 Mo. </font><font style="vertical-align: inherit;">À titre de comparaison, dans </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Far Cry 5, </font></font></a> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">seuls les</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> shaders occupent 62 Mo.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le temps est le plus important: utiliser le bon équipement</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout ce qui précède peut être calculé et traité par le processeur de n'importe quel système informatique. Les processeurs modernes de la famille x86-64 prennent en charge toutes les opérations mathématiques nécessaires et contiennent même des sous-systèmes distincts pour cela. Cependant, la tâche de rendu d'une seule image nécessite de nombreux calculs répétés et une parallélisation importante du travail. Les processeurs centraux ne sont pas adaptés à cela, car ils sont créés pour résoudre le plus large éventail possible de tâches. Les processeurs spécialisés pour le calcul graphique sont appelés </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GPU</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (unités de traitement graphique). Ils sont créés pour DirectX, OpenGL et Vulkan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous utiliserons un benchmark qui vous permet de rendre une image à l'aide d'un processeur central ou d'un équipement spécialisé - </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V-ray NEXT</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sociétés du Groupe Chaos. </font><font style="vertical-align: inherit;">En fait, il fait le lancer de rayons plutôt que le rendu, mais la plupart des opérations numériques ici dépendent également du matériel.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/dc6/4be/7bd/dc64be7bd6494f79cec1f01c501b7502.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Passons la référence en trois modes: uniquement le processeur central, uniquement le processeur graphique et une combinaison des deux processeurs:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CPU seul = 53 millions de rayons</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GPU seul = 251 millions de rayons</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La combinaison des deux processeurs = 299 millions de rayons</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'unité de mesure peut être ignorée, l'essence est cinq fois la différence. </font><font style="vertical-align: inherit;">Mais encore, ce test n'est pas trop lié aux jeux, alors tournons-nous vers le benchmark à l'ancienne </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Futuremark 3DMark03</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Exécutons un test Wings of Fury simple avec un calcul forcé de tous les vertex shaders (c'est-à-dire avec un ensemble complet d'opérations pour déplacer et colorer des triangles) à l'aide du processeur central.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9f3/f30/609/9f3f30609c33987cb25f2e10c4aff602.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le résultat ne devrait pas vous surprendre:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Processeur central = 77 images / s en moyenne.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GPU = 1580 images / s en moyenne.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lorsque tous les calculs avec les sommets sont effectués par le processeur central, il faut en moyenne 13 ms pour restituer et afficher chaque image. Et lorsque vous utilisez un processeur graphique, ce chiffre tombe à 0,6 ms - plus de 20 fois plus rapide. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La différence augmente encore plus si vous exécutez le test de référence le plus difficile - Mère Nature. Le processeur central a produit 3,1 images / s insignifiantes! Et le processeur graphique a grimpé à 1388 images / s: presque 450 fois plus vite. Veuillez noter: 3DMark03 est sorti 16 en arrière, et dans le test sur le processeur central, seuls les sommets sont traités, le processeur graphique prend toujours en charge la pixellisation et l'étape de pixel. Imaginez si la référence était moderne et la plupart des opérations ont été effectuées par programme?</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7ec/85a/87f/7ec85a87fbffad6ef27cf88d08970aea.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Essayons </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">maintenant à</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nouveau le benchmark </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;">Unigine Valley</font></a><font style="vertical-align: inherit;"> , les graphiques qu'il traite sont très similaires à ceux utilisés dans des jeux comme Far Cry 5. Il existe également un moteur de rendu entièrement logiciel en plus du standard DirectX 11. En fonctionnant sur un processeur vidéo, nous avons obtenu un résultat moyen de 196 images / s . Et la version du logiciel? Après quelques plantages, un puissant PC de test a généré une moyenne de 0,1 images / s. - presque </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">deux mille fois</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> plus lentement. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La raison d'une telle différence réside dans les calculs mathématiques et le format de données utilisé dans le rendu 3D. Chaque cœur du CPU est équipé </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">de modules à virgule flottante</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Le i7-9700K contient 8 cœurs, chacun avec deux de ces modules. Bien que l'architecture des modules dans Titan X soit différente, les deux types peuvent effectuer les mêmes calculs avec des données du même format. Cette carte vidéo possède plus de 3 500 modules pour effectuer des calculs comparables, et bien que leur fréquence d'horloge soit bien inférieure à celle du processeur central (1,5 GHz et 4,7 GHz), cependant, le processeur vidéo prend le nombre de modules. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bien que le Titan X ne soit pas une carte graphique de masse, même un modèle économique dépassera tout processeur central. Par conséquent, tous les jeux 3D et toutes les API sont conçus pour un équipement spécialisé. Vous pouvez télécharger </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V-ray</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3DMark</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ou </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n'importe </font></font></a><font style="vertical-align: inherit;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;">quel </font></a></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">benchmark </font></font></a><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unigine</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et testez votre système - voyez par vous-même dans quelle mesure les processeurs vidéo sont adaptés au rendu des graphiques dans les jeux.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les derniers mots</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ce fut une courte digression dans le processus de création d'une seule image dans les jeux 3D, d'un point dans l'espace à une image colorée sur un moniteur. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En fait, tout le processus fonctionne uniquement avec des chiffres. Cependant, beaucoup de choses sont restées en dehors du champ d'application de l'article. Nous n'avons pas pris en compte les calculs mathématiques spécifiques de l'algèbre linéaire euclidienne, de la trigonométrie et des calculs différentiels effectués par les vertex et les pixel shaders. Nous n'avons pas non plus parlé du traitement des textures à l'aide d'un échantillonnage statistique. J'ai omis des effets visuels sympas comme bloquer la lumière ambiante dans l'espace de l'écran, réduire les interférences avec le lancer de rayons, en utilisant la plage dynamique étendue et le lissage temporel.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et la prochaine fois que vous lancerez un jeu 3D moderne, nous espérons que non seulement vous regarderez les graphiques avec des yeux différents, mais que vous voudrez également en savoir plus à ce sujet.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr500670/index.html">Comment nous créons notre produit. Première partie, Recherche</a></li>
<li><a href="../fr500672/index.html">Poursuite du flux pour les testeurs et pas seulement</a></li>
<li><a href="../fr500676/index.html">Annonce d'un atelier en ligne sur l'automatisation des tests</a></li>
<li><a href="../fr500678/index.html">ClickHouse pour les utilisateurs avancés dans les questions et réponses</a></li>
<li><a href="../fr500688/index.html">Travailler avec une base de données dans Flask: de juin à juin</a></li>
<li><a href="../fr500694/index.html">68 conseils non sollicités</a></li>
<li><a href="../fr500696/index.html">Comment les chaussures de course tentent de s'adapter au pied féminin</a></li>
<li><a href="../fr500698/index.html">Evgeny Katyshev: «OpenStreetMap ne convient à aucune information»</a></li>
<li><a href="../fr500700/index.html">Prise en charge de TLS1.3 et extension de votre compte personnel: ce qui a été fait pour le premier trimestre 2020</a></li>
<li><a href="../fr500704/index.html">Les licornes (Airbnb, Uber, Lyft, Careem) licencient des milliers d'employés en raison de problèmes lors de la pandémie de coronavirus</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>