<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßóüèæ üê™ üë©üèΩ‚Äç‚öñÔ∏è Rendu de jeu 3D: introduction ‚õ∑Ô∏è üõÑ üëåüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Vous jouez le nouveau Call of Mario: Deathduty Battleyard sur votre PC de jeu parfait. Regardez le magnifique moniteur 4K ultra-large, admirant le pay...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Rendu de jeu 3D: introduction</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/500692/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/dq/hw/gw/dqhwgwxgezi8q8erzwy94bjwst0.jpeg" width="500"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous jouez le nouveau Call of Mario: Deathduty Battleyard sur votre PC de jeu parfait. Regardez le magnifique moniteur 4K ultra-large, admirant le paysage magnifique et les d√©tails complexes. Vous √™tes-vous d√©j√† demand√© comment les graphiques apparaissent √† l'√©cran? Vous √™tes-vous d√©j√† demand√© comment le jeu fait que l'ordinateur vous montre tout cela? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bienvenue dans notre visite du rendu de jeu 3D: un voyage pour les d√©butants, √† partir duquel vous apprendrez √† cr√©er un cadre de base √† l'√©cran.</font></font><br>
<a name="habracut"></a><br>
<img src="https://habrastorage.org/getpro/habr/post_images/d50/b40/462/d50b40462a4a18cef3e522b236f52c99.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Chaque ann√©e, des centaines de nouveaux jeux pour smartphones, consoles et PC sortent. La vari√©t√© des formats et des genres est tr√®s grande, mais l'un d'eux, peut-√™tre, est mieux ma√Ætris√© - ce sont des jeux 3D. Quel jeu √©tait le premier - une question discutable, et un rapide coup d'≈ìil √† la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">base du Livre Guinness des Records a</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> donn√© plusieurs r√©sultats. Il peut √™tre consid√©r√© comme le premier jeu Ultimate Knight Lore, sorti en 1984, mais √† proprement parler, les images de ce jeu √©taient en deux dimensions - aucune information n'a √©t√© utilis√©e en trois dimensions. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Donc, si nous voulons vraiment comprendre comment les jeux 3D modernes forment une image, nous devons commencer avec un autre exemple: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Winning Run</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Namco, sorti en 1988. C'√©tait peut-√™tre le premier jeu compl√®tement en trois dimensions utilisant des technologies qui ne sont pas trop diff√©rentes des modernes. Bien s√ªr, tous les jeux dont l'√¢ge a d√©pass√© 30 ans ne sont pas du tout les m√™mes que, disons, Codemasters F1, sorti en 2018. Mais les sch√©mas de circuits sont similaires.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/512/06c/a91/51206ca91484780f2fd5c73deffd796b.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans cet article, nous examinerons le processus de g√©n√©ration d'une image de base pour un moniteur ou un t√©l√©viseur √† l'aide d'un jeu 3D. </font><font style="vertical-align: inherit;">Commen√ßons par le r√©sultat final et demandons-nous: "Qu'est-ce que je regarde?" </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, nous analysons chaque √©tape de la formation de l'image que nous voyons. </font><font style="vertical-align: inherit;">Au cours de l'action, nous consid√©rerons des concepts tels que les sommets et les pixels, les textures et les passes, les tampons et les ombres, les logiciels et les instructions. </font><font style="vertical-align: inherit;">Nous d√©couvrirons comment la carte vid√©o est impliqu√©e dans le processus et pourquoi elle est n√©cessaire. </font><font style="vertical-align: inherit;">Apr√®s cela, vous pouvez regarder vos jeux et PC sous un nouveau jour et commencer √† appr√©cier davantage les graphiques vid√©o.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Options de cadre: pixels et couleurs</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Commen√ßons le jeu 3D, comme exemple nous prendrons la </font><font style="vertical-align: inherit;">soci√©t√© Crytek </font><font style="vertical-align: inherit;">sortie en 2007 </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Crysis</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Ci-dessous, une photo de l'√©cran sur lequel le jeu est affich√©:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/142/b40/5c4/142b405c4f4583d032427b7513391735.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cette image est g√©n√©ralement appel√©e un </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cadre</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Mais que regardons-nous exactement? </font><font style="vertical-align: inherit;">Nous utilisons un objectif macro:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/593/f64/712/593f64712c5065a03fcbca1c90649938.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Malheureusement, l'√©blouissement et le r√©tro√©clairage externe du moniteur g√¢chent la photo, mais si nous l'am√©liorons un peu, nous obtenons</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/915/b4f/3df/915b4f3dff7fdfb77917465635d64610.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous voyons que le cadre du moniteur est constitu√© d'une grille d'√©l√©ments color√©s s√©par√©s, et si nous les augmentons encore plus, nous remarquerons que chaque √©l√©ment est un bloc de trois pi√®ces. Un tel bloc est appel√© </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pixel</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (pixel, abr√©viation d'√©l√©ment d'image). Dans la plupart des moniteurs, les pixels sont peints en utilisant trois couleurs: rouge, vert et bleu (RVB, rouge-vert-bleu). Pour afficher un nouveau cadre, vous devez traiter une liste de milliers, sinon des millions, de valeurs RVB et les enregistrer dans une m√©moire √† laquelle le moniteur a acc√®s. Ces fragments de m√©moire sont appel√©s </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tampons</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , c'est-√†-dire que le moniteur re√ßoit le contenu du </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tampon de trame</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C'est le point final de tout le processus, alors maintenant nous allons aller dans la direction oppos√©e √† son d√©but. </font><font style="vertical-align: inherit;">Le processus est souvent d√©crit par le terme </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rendu</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (rendu), mais en r√©alit√©, il s'agit d'une s√©quence d'√©tapes distinctes reli√©es les unes aux autres, qui diff√®rent essentiellement par essence. </font><font style="vertical-align: inherit;">Imaginez que vous √™tes un chef dans un restaurant √©toil√© Michelin: le r√©sultat final est une assiette de plats d√©licieux, mais combien doit √™tre fait pour y parvenir. </font><font style="vertical-align: inherit;">Comme pour la cuisson, des ingr√©dients de base sont n√©cessaires pour le rendu.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√âl√©ments de construction n√©cessaires: mod√®les et textures</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les principaux √©l√©ments constitutifs de tout jeu 3D sont des ressources visuelles qui remplissent le monde √† dessiner. </font><font style="vertical-align: inherit;">Les films, les √©missions de t√©l√©vision et les th√©√¢tres ont besoin d'acteurs, de costumes, d'accessoires, de d√©cors, d'√©clairage - la liste est assez longue. </font><font style="vertical-align: inherit;">La m√™me chose avec les jeux 3D. </font><font style="vertical-align: inherit;">Tout ce que vous voyez dans le cadre g√©n√©r√© a √©t√© d√©velopp√© par des artistes et des experts en mod√©lisation. </font><font style="vertical-align: inherit;">Pour le rendre plus clair, tournons-nous vers la vieille √©cole et jetons un ≈ìil au mod√®le Quake II de la soci√©t√© id Software:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/938/10b/28f/93810b28f68f5e90d272480b2effbf97.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le jeu est sorti il ‚Äã‚Äãy a plus de 20 ans. </font><font style="vertical-align: inherit;">√Ä cette √©poque, Quake II √©tait un chef-d'≈ìuvre technologique, bien que, comme dans n'importe quel jeu de ces ann√©es, les mod√®les semblent tr√®s primitifs. </font><font style="vertical-align: inherit;">Mais il est facile de d√©montrer en quoi ils consistent.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a04/5f2/834/a045f2834673247daedbaaf24b3f33e9.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans l'image pr√©c√©dente, nous voyons un mec angulaire compos√© de triangles connect√©s les uns aux autres. Chaque coin est appel√© sommet ou sommet. Chaque sommet agit comme un point dans l'espace et est d√©crit par au moins trois nombres: les </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">coordonn√©es x, y, z</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Cependant, cela ne suffit pas pour un jeu 3D, donc chaque sommet a des valeurs suppl√©mentaires: couleur, direction de la face avant (oui, un point ne peut pas avoir de face avant ... lisez la suite!), Luminosit√©, degr√© de transparence, etc.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c42/4ff/db3/c424ffdb3f95d9758bc1a8eeb5c4a870.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les sommets ont toujours un ensemble de valeurs associ√©es aux textures. Ce sont des photos des ¬´v√™tements¬ª port√©s par le mannequin. Mais comme l'image est plate, la carte doit contenir une vue de toutes les directions d'o√π nous pouvons regarder le mod√®le. L'exemple de Quake II illustre une approche simple: des images de l'avant, de l'arri√®re et des c√¥t√©s (bras). Et les jeux 3D modernes fonctionnent d√©j√† pour les mod√®les avec de nombreuses cartes de texture, chacune contenant de nombreux d√©tails, sans aucun espace vide entre eux. Certaines cartes ne ressemblent pas √† des mat√©riaux ou √† des propri√©t√©s; elles fournissent plut√¥t des informations sur la mani√®re dont la lumi√®re est r√©fl√©chie par la surface. Chaque sommet a un ensemble de coordonn√©es dans la carte de texture associ√©e au mod√®le, de sorte qu'il peut √™tre ¬´√©tir√©¬ª sur le sommet. Cela signifie que lorsque vous d√©placez le sommet, la texture se d√©place avec lui.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans le monde tridimensionnel rendu, tout ce que vous voyez commence par un ensemble de sommets et de textures. Ils sont charg√©s dans des tampons de m√©moire connect√©s les uns aux autres. </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le tampon de</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sommet ( </font><i><font style="vertical-align: inherit;">tampon de</font></i><font style="vertical-align: inherit;"> sommet) contient des textures et des portions de m√©moire allou√©es pour le rendu ult√©rieur. </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tampon de commande contient une liste d'instructions sur ce qu'il faut faire avec ces ressources.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout cela forme le cadre n√©cessaire qui sera utilis√© pour cr√©er la grille finale de pixels color√©s. </font><font style="vertical-align: inherit;">Dans certains jeux, il s'agit d'une √©norme quantit√© de donn√©es, car il faut trop de temps pour recr√©er les tampons pour chaque nouvelle image. </font><font style="vertical-align: inherit;">Les jeux stockent √©galement dans des tampons les informations n√©cessaires pour former un monde entier qu'un joueur peut voir, ou une partie suffisamment grande de celui-ci, mettre √† jour si n√©cessaire. </font><font style="vertical-align: inherit;">Par exemple, dans un jeu de course comme F1 2018, tout sera stock√© dans une grande collection de tampons. </font><font style="vertical-align: inherit;">Et dans un jeu √† monde ouvert comme Skyrim, les donn√©es seront charg√©es dans des tampons et supprim√©es de celles-ci lorsque la cam√©ra se d√©place dans le monde.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configuration de la sc√®ne: sommets</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ayant toutes les informations visuelles, le jeu commencera alors le processus d'affichage visuel. La sc√®ne commence par d√©faut dans une certaine position, avec la disposition de base des mod√®les, des sources lumineuses, etc. Ce sera l'√©cran ¬´z√©ro¬ª - le point de d√©part pour les graphiques. Il n'est souvent pas affich√©, il est simplement trait√© par le syst√®me. Pour illustrer ce qui se passe dans la premi√®re √©tape du rendu, nous utiliserons l'outil en ligne </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rendu en temps r√©el</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Cr√©ons le ¬´jeu¬ª le plus simple: une bo√Æte pos√©e au sol.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6eb/6c2/84a/6eb6c284ac1f6dbfd1d88b80ccce1e7b.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cet objet contient 8 sommets, chacun √©tant d√©crit par une liste de nombres. </font><font style="vertical-align: inherit;">Les sommets forment un mod√®le compos√© de 12 triangles. </font><font style="vertical-align: inherit;">Chaque triangle, et m√™me l'objet lui-m√™me, est appel√© une </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">primitive</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Au fur et √† mesure que les primitives se d√©placent, tournent et se mettent √† l'√©chelle, les nombres passent par des cha√Ænes d'op√©rations math√©matiques et sont mis √† jour.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/683/dfb/2cf/683dfb2cf7936d1ae5d7150ee5e3691a.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Notez que les num√©ros de points du mod√®le ne changent pas. </font><font style="vertical-align: inherit;">Ces chiffres montrent exactement o√π se trouve le mod√®le dans le monde virtuel. </font><font style="vertical-align: inherit;">La prise en compte des calculs math√©matiques correspondants d√©passe le cadre de l'article, nous dirons seulement que tous les objets sont d'abord plac√©s l√† o√π ils devraient √™tre. </font><font style="vertical-align: inherit;">Et puis la coloration commence.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/245/ab4/c10/245ab4c109ab76e81bb20fb9dab7bab4.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Prenez un autre mod√®le qui a 10 fois plus de sommets que la case pr√©c√©dente. </font><font style="vertical-align: inherit;">Dans le processus de peinture le plus simple, la couleur de chaque sommet est prise, puis les changements de couleur d'une surface √† l'autre sont calcul√©s. </font><font style="vertical-align: inherit;">C'est ce qu'on appelle l' </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">interpolation</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6bb/54f/3b7/6bb54f3b70c60c558dfbe029e3361207.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'augmentation du nombre de sommets dans le mod√®le vous permet non seulement de cr√©er des objets plus r√©alistes, mais am√©liore √©galement le r√©sultat de l'interpolation des couleurs.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/682/c4e/d4d/682c4ed4d29b1d3e7bd03302783c9057.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√Ä ce stade du rendu, l'effet des sources de lumi√®re dans la sc√®ne peut √™tre calcul√© en d√©tail. </font><font style="vertical-align: inherit;">Par exemple, comment les mat√©riaux du mod√®le refl√®tent la couleur. </font><font style="vertical-align: inherit;">Ces calculs doivent tenir compte de la position et de la direction de la cam√©ra, ainsi que de la position et de la direction des sources lumineuses.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0e9/044/b91/0e9044b9132d022e5a19e490cfe36091.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour ce faire, il existe diff√©rentes m√©thodes math√©matiques, certaines simples, d'autres tr√®s complexes. Dans l'illustration ci-dessus, nous voyons que l'objet de droite semble beaucoup plus joli et plus r√©aliste, mais il faut plus de travail pour le dessiner. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il est important de noter que maintenant nous comparons des objets avec un petit nombre de pics avec les jeux les plus modernes. Faites d√©filer vers le haut et examinez attentivement l'image de Crysis: cette sc√®ne affiche plus d'un million de triangles. En utilisant l' </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">exemple de r√©f√©rence Unigine Valley</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font><font style="vertical-align: inherit;">vous pouvez comprendre combien de triangles sont utilis√©s dans les jeux modernes.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/486/232/4ec/4862324ec5749273f8b64dd9ad463386.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Chaque objet de cette image se compose de sommets connect√©s les uns aux autres, qui sont form√©s par les primitives constitu√©es de triangles. </font><font style="vertical-align: inherit;">Le rep√®re peut √™tre ex√©cut√© en mode filaire, dans lequel les bords de chaque triangle sont indiqu√©s par des lignes blanches.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/636/687/f15/636687f15006991fcf278df6af74227e.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme vous pouvez le voir, tout objet est constitu√© de triangles, et pour chaque triangle l'emplacement, la direction et la couleur sont calcul√©s. </font><font style="vertical-align: inherit;">Cela prend en compte l'emplacement des sources de lumi√®re, ainsi que l'emplacement et la direction de la cam√©ra. </font><font style="vertical-align: inherit;">Toutes les modifications associ√©es aux sommets doivent √™tre transf√©r√©es au jeu afin qu'il dispose de toutes les informations n√©cessaires pour dessiner la trame suivante - cela se fait en mettant √† jour le tampon de sommets. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√âtonnamment, ce n'est pas la partie la plus difficile du rendu, avec le bon mat√©riel, tous les calculs sont effectu√©s en quelques milli√®mes de seconde! </font><font style="vertical-align: inherit;">Passez.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Perdre la dimension: pixellisation</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apr√®s avoir trait√© tous les sommets et termin√© le placement de tous les objets dans notre sc√®ne tridimensionnelle, le processus de rendu passe √† une √©tape tr√®s importante. </font><font style="vertical-align: inherit;">Jusqu'√† pr√©sent, le jeu √©tait vraiment tridimensionnel, mais le cadre final ne l'est plus: au cours d'une s√©rie de changements, le monde vu se transforme de l'espace 3D, compos√© de milliers de points connect√©s, en une image bidimensionnelle, compos√©e de pixels color√©s. </font><font style="vertical-align: inherit;">Dans la plupart des jeux, cette proc√©dure comprend au moins deux phases: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">l'espace d'√©cran de projection</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font><i><font style="vertical-align: inherit;">projection d'espace d'</font></i><font style="vertical-align: inherit;"> √©cran) et la </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tramage</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/17f/b9b/264/17fb9b264f727fefbc583b0768b0619b.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De retour √† notre outil de rendu Web, il nous montrera comment le volume du monde virtuel se transforme en une image plate. La cam√©ra est montr√©e √† gauche, les lignes qui en √©manent cr√©ent une </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pyramide tronqu√©e de visibilit√©</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (tronc), et tout ce qui y p√©n√®tre peut √™tre affich√© dans le cadre final. La section perpendiculaire de la pyramide est appel√©e </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">la</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> fen√™tre - c'est ce qui sera affich√© sur le moniteur. De nombreux calculs math√©matiques sont utilis√©s pour projeter tout le contenu de la pyramide dans la zone de visualisation, en tenant compte de la perspective de la cam√©ra.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bien que les graphiques dans la zone de visualisation soient bidimensionnels, les donn√©es sont toujours vraiment tridimensionnelles, et plus tard, ces informations seront utilis√©es pour calculer quelles primitives sont visibles pour nous et lesquelles sont cach√©es. Cela peut √™tre √©tonnamment difficile √† faire, car les primitives peuvent projeter des ombres visibles pour nous, m√™me si les primitives elles-m√™mes nous sont cach√©es. Retirez-nous cach√©s les primitives appel√©es le </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">largage</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (abattage). Cette op√©ration peut affecter de mani√®re significative la vitesse de rendu de l'ensemble du cadre. Une fois le tri en primitives visibles et cach√©es termin√©, ainsi que les triangles supprim√©s en dehors des limites de la pyramide de visibilit√©, la derni√®re √©tape de la tridimensionnalit√© est termin√©e et le cadre est compl√®tement bidimensionnel √† l'aide de la rast√©risation.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6db/645/fe9/6db645fe9bd2138481a6f502c1ca8eda.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'illustration ci-dessus montre un exemple tr√®s simple d'une trame contenant une primitive. </font><font style="vertical-align: inherit;">La grille de pixels est superpos√©e √† la forme g√©om√©trique et les pixels correspondants sont marqu√©s pour un traitement ult√©rieur. </font><font style="vertical-align: inherit;">Le r√©sultat final ne ressemble pas trop au triangle d'origine, car nous n'utilisons pas suffisamment de pixels. </font><font style="vertical-align: inherit;">√Ä cet √©gard, le probl√®me de l' </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aliasing</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (aliasing, stepping lines) </font><font style="vertical-align: inherit;">se pose </font><font style="vertical-align: inherit;">, qui est r√©solu de diff√©rentes mani√®res. </font><font style="vertical-align: inherit;">Par cons√©quent, un changement dans la </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">r√©solution du</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> jeu </font><font style="vertical-align: inherit;">(le nombre total de pixels dans le cadre) affecte tellement le r√©sultat final: plus de pixels am√©liorent non seulement l'affichage des formulaires, mais r√©duisent √©galement l'effet d'un aliasing ind√©sirable.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apr√®s avoir termin√© cette partie du rendu, nous passons √† la prochaine grande √©tape: la coloration finale de tous les pixels du cadre. </font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Portez la lumi√®re: √©tape pixel</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous sommes arriv√©s √† l'√©tape la plus difficile du rendu. </font><font style="vertical-align: inherit;">Une fois, il s'agissait de tirer sur des mod√®les de v√™tements (textures) en utilisant des informations sur les pixels (obtenues √† l'origine √† partir des sommets). </font><font style="vertical-align: inherit;">Cependant, le fait est que, bien que les textures et le cadre lui-m√™me soient bidimensionnels, cependant, le monde virtuel au stade du traitement des vertex a √©t√© d√©form√©, d√©cal√© et modifi√©. </font><font style="vertical-align: inherit;">Pour tenir compte de tout cela, des calculs math√©matiques suppl√©mentaires sont utilis√©s, cependant, de nouveaux probl√®mes peuvent √™tre caract√©ristiques du r√©sultat.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c0f/3f4/f2b/c0f3f4f2b83db10efd3058fec26c27fe.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans cette illustration, une texture en damier est appliqu√©e au plan. Il y a une ondulation visuelle d√©sagr√©able, qui est exacerb√©e par l'aliasing. Pour r√©soudre ce probl√®me, utilisez des versions plus petites des cartes de texture ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mappages multiples</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , mipmaps), la r√©utilisation des informations de ces textures ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">filtrage</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , filtrage) et des calculs math√©matiques suppl√©mentaires. L'effet est perceptible:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e8d/a5b/bcd/e8da5bbcd3bf8fc8e9e75c7a9614d2eb.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour n'importe quel jeu, c'√©tait vraiment une √©tape difficile, mais aujourd'hui, ce n'est plus le cas, car en raison de la large utilisation d'autres effets visuels, tels que les reflets et les ombres, le traitement des textures est devenu une √©tape relativement petite du processus de rendu. Lorsque vous jouez √† des r√©solutions √©lev√©es, la charge aux stades de la pixellisation et du traitement des pixels augmente, mais cela affecte relativement peu le traitement des sommets. Bien que la coloration primaire due aux sources de lumi√®re soit effectu√©e au stade du sommet, des effets d'√©clairage plus sophistiqu√©s peuvent √™tre appliqu√©s.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a62/0bc/a60/a620bca60aa98557848fd500e30f3d94.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans l'illustration pr√©c√©dente, nous ne voyons plus de changements de couleur entre les diff√©rents triangles, ce qui nous donne la sensation d'un objet lisse et transparent. Bien que dans cet exemple, la sph√®re se compose du m√™me nombre de triangles que la sph√®re verte dans l'illustration ci-dessus, √† la suite de la proc√©dure de coloration des pixels, il nous semble que beaucoup plus de triangles sont utilis√©s.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/321/204/fa2/321204fa222c1a25b1f6197b04c30f52.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans de nombreux jeux, la phase de pixel doit √™tre ex√©cut√©e plusieurs fois. Par exemple, pour qu'un miroir ou une surface de l'eau refl√®te le monde environnant, ce monde doit d'abord √™tre dessin√©. Chaque passage est appel√© </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">passe</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (passe), et pour obtenir l'image finale de chaque image, vous pouvez facilement utiliser quatre passes ou plus. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De plus, vous devez parfois ex√©cuter √† nouveau la sc√®ne du sommet pour redessiner le monde √† partir d'un autre point et utiliser cette image dans une sc√®ne qui est montr√©e au joueur. Pour ce faire, utilisez le </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rendu √† tampon unique</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (cibles de rendu) - utilisez des tampons qui agissent comme stockage final pour le cadre, mais peuvent √©galement agir comme des textures avec une passe diff√©rente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour √©valuer la complexit√© de la phase de pixel, vous pouvez lire</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">analyse de trame dans Doom 2016</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Vous serez choqu√© par le nombre d'op√©rations n√©cessaires pour cr√©er une image.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4fc/618/e79/4fc618e791b417e9359ca81948ae187f.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout le travail effectu√© pour cr√©er le cadre doit √™tre enregistr√© dans le tampon, que ce soit le r√©sultat final ou interm√©diaire. </font><font style="vertical-align: inherit;">En g√©n√©ral, le jeu utilise √† la vol√©e au moins deux tampons pour l'affichage final: un pour le "travail en cours" et le second tampon attend soit l'acc√®s √† un moniteur, soit est en cours d'affichage. </font><font style="vertical-align: inherit;">Vous avez toujours besoin d'un tampon d'√©cran dans lequel le r√©sultat du rendu sera enregistr√©, et lorsque tous les tampons sont pleins, vous devez continuer et cr√©er un nouveau tampon. </font><font style="vertical-align: inherit;">√Ä la fin du travail avec la trame, une commande simple est donn√©e, les tampons de trame finaux sont √©chang√©s, le moniteur re√ßoit la derni√®re trame rendue et le processus de rendu de la trame suivante d√©marre.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/925/e6e/c4d/925e6ec4d1593ec473c0660ffa555969.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans cette image d' </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Assassin's Creed Odyssey,</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nous voyons le contenu du tampon d'image termin√©. </font><font style="vertical-align: inherit;">Ce contenu peut √™tre repr√©sent√© dans un tableau qui ne contient que des chiffres. </font><font style="vertical-align: inherit;">Ils sont envoy√©s sous forme de signaux √©lectriques vers un moniteur ou un t√©l√©viseur, et les pixels de l'√©cran changent leurs valeurs. </font><font style="vertical-align: inherit;">Nos yeux voient une image plate et solide, mais notre cerveau l'interpr√®te comme tridimensionnelle. </font><font style="vertical-align: inherit;">Il y a tellement de travail cach√© dans les coulisses d'un seul coup dans le jeu qu'il vaut la peine de voir comment les programmeurs peuvent le g√©rer.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gestion des processus: API et instructions</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour comprendre comment ex√©cuter le jeu et g√©rer tous les calculs, sommets, textures, √©clairage, tampons, etc. - c'est une t√¢che √©norme. Heureusement, aidez-nous dans ces </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">interfaces de programmation</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (interface de programmation d'application, API). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les API de rendu r√©duisent la complexit√© globale en offrant des structures, des r√®gles et des biblioth√®ques de logiciels qui permettent des instructions simplifi√©es ind√©pendantes du mat√©riel. Prenez n'importe quel jeu 3D sorti sur PC au cours des trois derni√®res ann√©es: il a √©t√© cr√©√© √† l'aide de l'une des trois API populaires - Direct3D, OpenGL ou Vulkan. Il existe d'autres d√©veloppements similaires, en particulier dans le segment mobile, mais dans cet article, nous parlerons des trois mentionn√©s.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/383/aea/228/383aea228f8c09089472da334107b6e2.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Malgr√© les diff√©rences dans les noms des instructions et des op√©rations (par exemple, un bloc de code pour traiter les pixels dans DirectX est appel√© pixel shader, et dans Vulkan il est appel√© fragment shader), le r√©sultat final ne diff√®re pas, plus pr√©cis√©ment, il ne devrait pas diff√©rer. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La diff√©rence se manifestera dans l'√©quipement utilis√© pour le rendu. Les instructions g√©n√©r√©es par l'API doivent √™tre converties en commandes mat√©rielles qui sont trait√©es par les pilotes de p√©riph√©rique. Et les fabricants d'√©quipement doivent consacrer beaucoup de ressources et de temps √† leurs pilotes pour effectuer cette conversion aussi rapidement et correctement que possible.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8df/431/c77/8df431c7781e07219bfaab3829f209df.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par exemple, la premi√®re version b√™ta de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The Talos Principle</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (2014) a pris en charge les trois API mentionn√©es. </font><font style="vertical-align: inherit;">Pour montrer comment les r√©sultats de diff√©rentes combinaisons de pilotes et d'interfaces peuvent diff√©rer, nous avons ex√©cut√© le test de r√©f√©rence int√©gr√© standard en d√©finissant la r√©solution sur 1080p et les param√®tres de qualit√© maximale. </font><font style="vertical-align: inherit;">Le processeur Intel Core i7-9700K fonctionnait sans overclocking, la carte vid√©o Nvidia Titan X (Pascal), RAM - 32 Go de RAM DDR4.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DirectX 9 = une moyenne de 188,4 images / s.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DirectX 11 = une moyenne de 202,3 images / s.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenGL = 87,9 images / s en moyenne.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vulkan = une moyenne de 189,4 images / s.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous n'analyserons pas les r√©sultats, et ils ne disent certainement pas que certaines API sont ¬´meilleures¬ª que les autres (n'oubliez pas, la version b√™ta du jeu a √©t√© test√©e). Nous dirons seulement que la programmation pour diff√©rentes API est associ√©e √† diverses difficult√©s, et √† tout moment, les performances seront √©galement diff√©rentes. En g√©n√©ral, les d√©veloppeurs de jeux choisissent l'API avec laquelle ils ont le plus d'exp√©rience et optimisent leur code pour cela. Parfois, le terme </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">moteur est</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> utilis√© pour d√©crire le code responsable du rendu, </font><font style="vertical-align: inherit;">mais √† proprement parler, le moteur est un ensemble complet d'outils qui traite tous les aspects du jeu, pas seulement les graphiques. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ce n'est pas si facile de cr√©er un programme √† partir de z√©ro qui rend un jeu 3D. Par cons√©quent, aujourd'hui, dans de nombreux jeux, des syst√®mes tiers sous licence sont utilis√©s (par exemple, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unreal Engine</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font><font style="vertical-align: inherit;">Pour √©valuer leur complexit√©, ouvrez le moteur open source de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quake</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et affichez le fichier gl_draw.c: il contient des instructions pour diff√©rentes op√©rations de rendu et ne refl√®te qu'une petite partie de l'ensemble du moteur. </font><font style="vertical-align: inherit;">Mais Quake est sorti il ‚Äã‚Äãy a plus de 20 ans, et l' </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ensemble du jeu</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (y compris toutes les ressources visuelles, les sons, la musique, etc.) prend 55 Mo. </font><font style="vertical-align: inherit;">√Ä titre de comparaison, dans </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Far Cry 5, </font></font></a> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">seuls les</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> shaders occupent 62 Mo.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le temps est le plus important: utiliser le bon √©quipement</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout ce qui pr√©c√®de peut √™tre calcul√© et trait√© par le processeur de n'importe quel syst√®me informatique. Les processeurs modernes de la famille x86-64 prennent en charge toutes les op√©rations math√©matiques n√©cessaires et contiennent m√™me des sous-syst√®mes distincts pour cela. Cependant, la t√¢che de rendu d'une seule image n√©cessite de nombreux calculs r√©p√©t√©s et une parall√©lisation importante du travail. Les processeurs centraux ne sont pas adapt√©s √† cela, car ils sont cr√©√©s pour r√©soudre le plus large √©ventail possible de t√¢ches. Les processeurs sp√©cialis√©s pour le calcul graphique sont appel√©s </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GPU</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (unit√©s de traitement graphique). Ils sont cr√©√©s pour DirectX, OpenGL et Vulkan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous utiliserons un benchmark qui vous permet de rendre une image √† l'aide d'un processeur central ou d'un √©quipement sp√©cialis√© - </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V-ray NEXT</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Soci√©t√©s du Groupe Chaos. </font><font style="vertical-align: inherit;">En fait, il fait le lancer de rayons plut√¥t que le rendu, mais la plupart des op√©rations num√©riques ici d√©pendent √©galement du mat√©riel.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/dc6/4be/7bd/dc64be7bd6494f79cec1f01c501b7502.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Passons la r√©f√©rence en trois modes: uniquement le processeur central, uniquement le processeur graphique et une combinaison des deux processeurs:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CPU seul = 53 millions de rayons</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GPU seul = 251 millions de rayons</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La combinaison des deux processeurs = 299 millions de rayons</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'unit√© de mesure peut √™tre ignor√©e, l'essence est cinq fois la diff√©rence. </font><font style="vertical-align: inherit;">Mais encore, ce test n'est pas trop li√© aux jeux, alors tournons-nous vers le benchmark √† l'ancienne </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Futuremark 3DMark03</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Ex√©cutons un test Wings of Fury simple avec un calcul forc√© de tous les vertex shaders (c'est-√†-dire avec un ensemble complet d'op√©rations pour d√©placer et colorer des triangles) √† l'aide du processeur central.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9f3/f30/609/9f3f30609c33987cb25f2e10c4aff602.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le r√©sultat ne devrait pas vous surprendre:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Processeur central = 77 images / s en moyenne.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GPU = 1580 images / s en moyenne.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lorsque tous les calculs avec les sommets sont effectu√©s par le processeur central, il faut en moyenne 13 ms pour restituer et afficher chaque image. Et lorsque vous utilisez un processeur graphique, ce chiffre tombe √† 0,6 ms - plus de 20 fois plus rapide. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La diff√©rence augmente encore plus si vous ex√©cutez le test de r√©f√©rence le plus difficile - M√®re Nature. Le processeur central a produit 3,1 images / s insignifiantes! Et le processeur graphique a grimp√© √† 1388 images / s: presque 450 fois plus vite. Veuillez noter: 3DMark03 est sorti 16 en arri√®re, et dans le test sur le processeur central, seuls les sommets sont trait√©s, le processeur graphique prend toujours en charge la pixellisation et l'√©tape de pixel. Imaginez si la r√©f√©rence √©tait moderne et la plupart des op√©rations ont √©t√© effectu√©es par programme?</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7ec/85a/87f/7ec85a87fbffad6ef27cf88d08970aea.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Essayons </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">maintenant √†</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nouveau le benchmark </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;">Unigine Valley</font></a><font style="vertical-align: inherit;"> , les graphiques qu'il traite sont tr√®s similaires √† ceux utilis√©s dans des jeux comme Far Cry 5. Il existe √©galement un moteur de rendu enti√®rement logiciel en plus du standard DirectX 11. En fonctionnant sur un processeur vid√©o, nous avons obtenu un r√©sultat moyen de 196 images / s . Et la version du logiciel? Apr√®s quelques plantages, un puissant PC de test a g√©n√©r√© une moyenne de 0,1 images / s. - presque </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">deux mille fois</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> plus lentement. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La raison d'une telle diff√©rence r√©side dans les calculs math√©matiques et le format de donn√©es utilis√© dans le rendu 3D. Chaque c≈ìur du CPU est √©quip√© </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">de modules √† virgule flottante</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Le i7-9700K contient 8 c≈ìurs, chacun avec deux de ces modules. Bien que l'architecture des modules dans Titan X soit diff√©rente, les deux types peuvent effectuer les m√™mes calculs avec des donn√©es du m√™me format. Cette carte vid√©o poss√®de plus de 3 500 modules pour effectuer des calculs comparables, et bien que leur fr√©quence d'horloge soit bien inf√©rieure √† celle du processeur central (1,5 GHz et 4,7 GHz), cependant, le processeur vid√©o prend le nombre de modules. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bien que le Titan X ne soit pas une carte graphique de masse, m√™me un mod√®le √©conomique d√©passera tout processeur central. Par cons√©quent, tous les jeux 3D et toutes les API sont con√ßus pour un √©quipement sp√©cialis√©. Vous pouvez t√©l√©charger </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V-ray</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3DMark</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ou </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n'importe </font></font></a><font style="vertical-align: inherit;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;">quel </font></a></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">benchmark </font></font></a><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unigine</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et testez votre syst√®me - voyez par vous-m√™me dans quelle mesure les processeurs vid√©o sont adapt√©s au rendu des graphiques dans les jeux.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les derniers mots</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ce fut une courte digression dans le processus de cr√©ation d'une seule image dans les jeux 3D, d'un point dans l'espace √† une image color√©e sur un moniteur. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En fait, tout le processus fonctionne uniquement avec des chiffres. Cependant, beaucoup de choses sont rest√©es en dehors du champ d'application de l'article. Nous n'avons pas pris en compte les calculs math√©matiques sp√©cifiques de l'alg√®bre lin√©aire euclidienne, de la trigonom√©trie et des calculs diff√©rentiels effectu√©s par les vertex et les pixel shaders. Nous n'avons pas non plus parl√© du traitement des textures √† l'aide d'un √©chantillonnage statistique. J'ai omis des effets visuels sympas comme bloquer la lumi√®re ambiante dans l'espace de l'√©cran, r√©duire les interf√©rences avec le lancer de rayons, en utilisant la plage dynamique √©tendue et le lissage temporel.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et la prochaine fois que vous lancerez un jeu 3D moderne, nous esp√©rons que non seulement vous regarderez les graphiques avec des yeux diff√©rents, mais que vous voudrez √©galement en savoir plus √† ce sujet.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr500670/index.html">Comment nous cr√©ons notre produit. Premi√®re partie, Recherche</a></li>
<li><a href="../fr500672/index.html">Poursuite du flux pour les testeurs et pas seulement</a></li>
<li><a href="../fr500676/index.html">Annonce d'un atelier en ligne sur l'automatisation des tests</a></li>
<li><a href="../fr500678/index.html">ClickHouse pour les utilisateurs avanc√©s dans les questions et r√©ponses</a></li>
<li><a href="../fr500688/index.html">Travailler avec une base de donn√©es dans Flask: de juin √† juin</a></li>
<li><a href="../fr500694/index.html">68 conseils non sollicit√©s</a></li>
<li><a href="../fr500696/index.html">Comment les chaussures de course tentent de s'adapter au pied f√©minin</a></li>
<li><a href="../fr500698/index.html">Evgeny Katyshev: ¬´OpenStreetMap ne convient √† aucune information¬ª</a></li>
<li><a href="../fr500700/index.html">Prise en charge de TLS1.3 et extension de votre compte personnel: ce qui a √©t√© fait pour le premier trimestre 2020</a></li>
<li><a href="../fr500704/index.html">Les licornes (Airbnb, Uber, Lyft, Careem) licencient des milliers d'employ√©s en raison de probl√®mes lors de la pand√©mie de coronavirus</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>