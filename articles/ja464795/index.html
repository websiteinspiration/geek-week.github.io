<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🛀🏽 🦆 🏈 Merry Quartusel、またはプロセッサがどのようにしてこのような生活を送ってきたか 🏅 ☺️ 🚘</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="通常のプログラムをデバッグする場合、ブレークポイントはほとんどどこにでもかなり大量に設定できます。ああ。コントローラでプログラムを実行する場合、このルールは適用されません。時間図が形成されるセクションがある場合、ストップはすべてを台無しにします。低域と高域のパッセージは同じではありません。境界条件は...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Merry Quartusel、またはプロセッサがどのようにしてこのような生活を送ってきたか</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/464795/"><img src="https://habrastorage.org/webt/ws/5w/vc/ws5wvcsjeh19phozcqcximmvjbo.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
通常のプログラムをデバッグする場合、ブレークポイントはほとんどどこにでもかなり大量に設定できます。ああ。コントローラでプログラムを実行する場合、このルールは適用されません。時間図が形成されるセクションがある場合、ストップはすべてを台無しにします。低域と高域のパッセージは同じではありません。境界条件は開発者の惨劇です。または、USBバスなどです。 NIOS IIではそれを使用しませんでしたが、STM32では恐ろしいです。そして、私は何かを見たいと思います、そして、あなたが止まるとき、あなたはタイムアウトを捕まえます。一般に、高度なJTAGデバッグが存在するにもかかわらず、タイムクリティカルな領域でのプログラムの動作が不明瞭になることがよくあります。少なくとも実行後に、プログラムが通過したチェーン、機能したブランチ、機能しなかったチェーンを確認することは素晴らしいことです。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
例外の履歴を知ることはさらに重要です。</font><font style="vertical-align: inherit;">NIOS IIでは、これを行うことはできませんでしたが、ARMコアのCyclone V SoCでは完全に実行できました。</font><font style="vertical-align: inherit;">デバッグ時にはすべてが機能し、ROMからプログラムを起動すると例外が発生します。</font><font style="vertical-align: inherit;">彼らがどのようにしてそれに参加したかは明らかであり、これにつながる状況のどのような進展がそうではありませんでした。</font><font style="vertical-align: inherit;">トレースもすべてのカバーを引き裂きます。</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
シリーズの以前の記事：</font></font><ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ReddにインストールされたFPGA用の最も単純な「ファームウェア」の開発、および例としてメモリテストを使用したデバッグ</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ReddにインストールされたFPGA用の最も単純な「ファームウェア」の開発。</font><font style="vertical-align: inherit;">パート2.プログラムコード</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FPGAベースのプロセッサシステムに埋め込むための独自のコアの開発</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FPGAへのアクセスの例に関する中央プロセッサReddのプログラムの開発</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ReddコンプレックスのFPGAでのCPUとプロセッサの接続の例でストリーミングプロトコルを使用した最初の実験</font></font></a></li>
</ol><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">前書き</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
真面目な顔の教育記事を書くことは慣習であり、穏やかで公平に資料を説明します。しかし、悲しいかな、これは常にうまくいくとは限りません。さて、計画によると、Reddコンプレックス内の合成プロセッサの最適化に関する記事があるはずです。ここでは、キャッシュを操作する機能について説明する必要があります。次はバスにアクセスするときの遅延についての記事です。一般に、これらはすべてオシロスコープで表示できます。私はすでにDMAに関する記事でこれを行いました（「</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DMA：神話と現実」</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"）。</font><font style="vertical-align: inherit;">しかし、プロセッサ自体を使用してすべてをデモンストレーションしたかったので、FPGA Cyclone V SoCのARMコアに対してそのようなチェックを行いました。</font><font style="vertical-align: inherit;">非常に便利です（ただし、結果は公開されていません）。</font><font style="vertical-align: inherit;">このため、JTAGブロックに固有のトレースメカニズムを扱うことにしました。</font><font style="vertical-align: inherit;">これまでのところ、無料のダウンロード可能なリソースでは、これまたはそのコマンドが実行しているビートの数を表示できなかったのは残念ですが、プログラムがそのような人生に到達した方法を常に尋ねることができる資料がありました。</font><font style="vertical-align: inherit;">まあ、それに加えて、嵐の夜の記憶は私の記憶の中で新鮮ですが、私はそれらをかなり感情的な方法で捨てます。</font><font style="vertical-align: inherit;">だから今日は多くの回顧録と少し役に立つ理論があるでしょう。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ハードウェア</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そのため、マイクロコントローラーのプログラムをデバッグするときは、移動したパスを知ることが望ましいことが多く、全速でパスする必要があります。 NIOS IIの場合、このメカニズムが存在し、プロセッサコアプロパティのこのタブで有効になります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/aw/b5/cq/awb5cqb6qtp8es-_vm_xo1dwuok.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
トレースタイプは、格納する情報のタイプを設定します。何も保存できません（これによりクリスタルのメモリが保存されます）、コマンドの履歴のみを保存する（ほとんどの場合これで十分です）、またはコマンドとデータの両方の履歴を保存できます。後者のモードでは、コマンドの履歴とのオーバーレイが可能であり、メモリの消費量が増える一方で、情報の保存はどういうわけか難しいとドキュメントに記載されていることは注目に値します。したがって、このモードは本当に必要な場合にのみ使用してください。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Trace Storageパラメータは、トレースが保存されるメモリのタイプを設定します。</font><font style="vertical-align: inherit;">ドキュメントには、外部メモリは標準の開発環境ではサポートされていないと記載されています。</font><font style="vertical-align: inherit;">したがって、内部のみを選択することをお勧めします。</font></font><br>
 <br>
<img src="https://habrastorage.org/webt/vy/bw/ef/vybwef9zoeklef_gcevjoeihy6y.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
オンチップトレースフレームサイズは、バッファのサイズを設定します。</font><font style="vertical-align: inherit;">バッファが大きいほど、そこに配置できるイベントが増えるほど、履歴をより多く考慮することができます。</font><font style="vertical-align: inherit;">しかし、他のニーズのためのクリスタルのメモリは少なくなります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/_f/l5/u0/_fl5u0ax87tjg6jqriqa6ksg6ic.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
個別のJTAGポートを作成するチェックボックスを有効にする必要はありません。</font><font style="vertical-align: inherit;">すべてのものを普通のタクシーに乗せましょう。</font></font><br>
 <br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ソフトウェアサポート</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
良い。</font><font style="vertical-align: inherit;">それでは、プロセッサコアをセットアップしました。次に何をしますか？</font><font style="vertical-align: inherit;">おお！</font><font style="vertical-align: inherit;">その後、探偵物語が始まります。</font><font style="vertical-align: inherit;">上記の図を行動のガイドとして使用する必要がある場合は、混乱と吐き気を示すイラストが続きます。</font><font style="vertical-align: inherit;">トレースを使用するには、サードパーティの高価なプログラムや特別なJTAG機器を使用する必要があると多くの文書が述べています。</font><font style="vertical-align: inherit;">しかし、一部のドキュメントでは、フルタイムで何かを取ることができます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eclipse実験</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
完璧に。</font><font style="vertical-align: inherit;">Eclipseを見てみましょう。</font><font style="vertical-align: inherit;">Quartus Prime 17.1開発環境を使用していることを思い出します。</font><font style="vertical-align: inherit;">まあ、それは起こりました。</font><font style="vertical-align: inherit;">デバッグプログラムを開始し、さまざまなウィンドウを開くことができるメニュー項目に移動します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/eu/yc/2z/euyc2ztgrga0uxh606lat4tu3kw.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そこで、[デバッグ]&gt; [トレース制御]ウィンドウを選択します。</font></font><br>
 <br>
<img src="https://habrastorage.org/webt/6w/qu/wz/6wquwzygaqz4ozivccboxsyvuey.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、このようなダミーを取得します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/hv/qb/hd/hvqbhdjpwryfpsbhprwh7ehbobq.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ただし、デバッグセッションが開始されました。</font><font style="vertical-align: inherit;">さらに、メニュー項目[トレースの開始]と[トレースの停止]も表示されました（このウィンドウを開く前は表示されていませんでした）。</font><font style="vertical-align: inherit;">しかし、それらはブロックされています。</font><font style="vertical-align: inherit;">そして、私はそれらをアクティブにすることができませんでした。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/mk/xp/ir/mkxpiratj9qrxtpee0hz91tx3uc.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
無駄にGoogleにさまざまなリクエストを送信しました。</font><font style="vertical-align: inherit;">古いドキュメントでは、これらのポイントは非常にうまく機能していると説明されていますが、最近のドキュメントでは、それらについては言及されていません。</font><font style="vertical-align: inherit;">誰もフォーラムでそれらについて言及していません。</font><font style="vertical-align: inherit;">多分コメントの誰かがあなたに何かを教えてくれますか？</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最新バージョンのEclipseに関する問題</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
良い。開発環境の最新バージョンはどうですか？たぶんすべてがそこで機能しますか？イェイイ！これは別の章のトピックです。 4番目と5番目のサイクロンの最新バージョンは18.1.1です。つまり、最初にバージョン18.1をダウンロードしてから、アップデート18.1.1をインストールする必要があります。余暇が多すぎるとか、細かいことをするためにソフトウェアを並べ替えるとか誰かが決めたなら、それで問題ありません。主なチェックは、キャッシュの問題に関するものでした。彼らはもっと深刻です、私は新しいバージョンでそれらをチェックしたかったので、ここではそれらについて書いているだけではありません。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それで、ダウンロードしました。インストール済み。まず、WIN7の下でバージョン18.1が起動されますが、18.1.1はDLLを見つけません。良い。 Visual Studio 2015からRedistをダウンロードする必要があることがわかりました。インストールしました。走り出した。プロセッサシステムでプロジェクトを作成しました。彼は準備さえしました。私はEclipseに行き、それに基づいてBSPを使用してプログラムを作成します。これまでに何度も行ってきたように...そして私はそのようなことを実現しています... </font></font><br>
<br>
<img src="https://habrastorage.org/webt/dz/ge/wm/dzgewmffjurbmrm7q9gzziiok5i.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プロジェクトはそうではありません。終了して入力すると、部分的にしか開きません。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/hw/_p/85/hw_p85rarlvryo3rvmuu_zoqa7k.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
フォルダを閉じましたか？このような。どうして？おお！ 3つのファイル：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/08/ca/fu/08cafumzaksxsqe9tquadzuckwa.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらは素晴らしい保護の属性です。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/zj/zy/db/zjzydbav2mjwdppsuq6y5mp3uay.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
つまり、開くことも変更することもできません...さらに権限を与えると、プロジェクトは開きますが、ファイルは完全には作成されないため、収集は機能しません。 Eclipseが閉じられるまで権限を付与しようとし、プロジェクトを保存しました。結果は同じです。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
急速に老朽化しているWindows 7のせいでしょうか？ライブラリが足りなかったのも不思議ではありません！新鮮なQuartusをWIN10に置いたところ、プロジェクトの作成とまったく同じ結果が得られました。友達がいます。仕事の都合で国内メーカーの商品に出会うこともある。そして彼は彼ら自身と彼らの親類についての一連の考えを表現します。さて、「誰がこれを作っているのか」という事実について。ご存知のように、インテルのソフトウェアの面白さを見ると、出身国とはかけ離れていると思い始めます...実際、これはアルターでは当てはまりませんでした...何かが起こりましたが、私はこれを覚えていません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
外に出たところです。プロジェクトをFAT32ファイルシステムのUSBフラッシュドライブにコピーしました。セキュリティ属性はありません。私はそれからプロジェクトを開き、Eclipseに入ってコードを作成しました。セキュリティ属性なし-問題ありません。次に、ハードドライブにコピーして戻しました。もちろん、BSPの生成で問題が発生しました。 * .bspファイルには多くの相対パスと1つの絶対パスが含まれているためです。フラッシュドライブを抜いて良かったです。それ以外の場合は、BSPがドロップオフすることに気づかなかったでしょう（これがプロジェクトの発祥の地であるため）、プロジェクトはハードドライブに収集されます。そのようなパスの例を次に示します（すでに修正済み）。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ba/qw/c3/baqwc3vz7g4xtyxou9lzaydkaf0.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さて、結構です...すべてが生成され、アセンブルされました...そしてバージョン17.1とまったく同じように動作します...そして新しい環境のSoCコントローラーでは、プログラマーで毎回JTAGチェーンを再作成する必要があります。</font><font style="vertical-align: inherit;">バージョン17.1では、これを1回実行して保存するだけで十分でした... Eeeeeh。</font><font style="vertical-align: inherit;">とにかく…</font></font><br>
 <br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アルテラモニターとその問題</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
何らかの方法で、「トレースの開始」と「トレースの停止」という単語をネットで検索すると、興味深いドキュメントが見つかりました。彼らは今日</font><font style="vertical-align: inherit;">、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アルテラモニター</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と呼ばれる面白いプログラムのさまざまなバージョンについて説明しています</font><font style="vertical-align: inherit;">（古いドキュメントでは名前が異なりました）。彼女を見つけることは比較的簡単でした。</font><font style="vertical-align: inherit;">ご使用のバージョンの開発環境に対応する</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ユニバーシティプログラム</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パッケージをダウンロードする必要があり</font><font style="vertical-align: inherit;">ます。ライセンスの制限に注意してください。でも今勉強しているので怖くないです。しかし、商業的な仕事のために-すべてがそこで悪いです。詳細はこちら：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.intel.com/content/www/us/en/programmable/support/training/university/materials-software.html</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ダウンロードして置いてください...現在のバージョンに添付されているドキュメントがあります（インターネット上に散在するバージョンは大きく異なるため）。 DE0-Nano-SoCブレッドボードの例を実行してみました。彼は働く。しかし、プロジェクトを作成しようとしても、うまくいきませんでした。 * .sofファイルがFPGAにロードされ、しばらくすると、メッセージが</font></font><br>
<br>
<img src="https://habrastorage.org/webt/h-/v9/8-/h-v98-afyfovvykexwt8piekhdu.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
表示されます。指定されたウィンドウには情報がありません。もう一度ダウンロードしようとすると、そのウィンドウに次のテキストが表示され</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。JTAGインスタンスIDをクエリできませんでした。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
FPGAが正しい.sofファイルを使用して設定されていることを確認してください。</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これはどんなトラブルですか？</font><font style="vertical-align: inherit;">Googleで検索しました。</font><font style="vertical-align: inherit;">同じ問題のあるフォーラムがいくつか見つかりました。</font><font style="vertical-align: inherit;">まず、インテルの従業員は、著者がJTAGで持っている頻度を尋ね、標準の頻度を設定することを提案しました。</font><font style="vertical-align: inherit;">そのときまでに、私はそれが頻度の問題ではないことをすでに理解していました：会社の例が機能し、それをどのように設定するのですか？</font><font style="vertical-align: inherit;">あるフォーラムで、著者はどういうわけかそれが通過したと書いた。</font><font style="vertical-align: inherit;">彼はその方法を理解していませんでした。</font><font style="vertical-align: inherit;">そして、指示に従って注意深くすべてを実行すれば、すべてがうまくいくと彼は言った。</font><font style="vertical-align: inherit;">画像の残りの部分は同じでした。</font><font style="vertical-align: inherit;">男は尋ねる。</font><font style="vertical-align: inherit;">彼らは彼に答えません。</font><font style="vertical-align: inherit;">6か月または1年後、誰かが同じ状況にあると書いていますが、解決策はありましたか？</font><font style="vertical-align: inherit;">そして沈黙aaaaaaaa ...</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">経験豊富なソリューションの試み</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
良い。その理由は何でしょうか？まず、実際の例を見回すことにしました。どんな謎のJTAG ID？これは、機能しているシステムIDシステムの存在が原因である可能性がありますか？</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jo/an/be/joanbea7ptsikwoxwrio-xjcfta.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
自分自身に追加、助けにはならなかった。多分、JTAGからAvalonへのブリッジ（すべての周辺デバイスが追加で接続されている）のせいですか？</font></font><br>
 <br>
<img src="https://habrastorage.org/webt/to/al/dr/toaldrafp5anp22mp7f-b0kfv6o.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
追加-助けにはならなかった。</font><font style="vertical-align: inherit;">さらにいくつかの仮説を試しましたが、いつまでも推測できることに気づきました。</font><font style="vertical-align: inherit;">悲しみとともに、私はYandex、Bing、さらにはBaiDuにさえ尋ねました。</font><font style="vertical-align: inherit;">彼らはすべてグーグルほど知らない。</font><font style="vertical-align: inherit;">プログラム自体から必要なものを試すために、逆コンパイルに対処する必要があることが明らかになりました。</font><font style="vertical-align: inherit;">プログラムがどの言語で書かれているかを確認した。</font><font style="vertical-align: inherit;">それはJavaで判明しました。</font><font style="vertical-align: inherit;">バイトコードは、Altera_Monitor_Program.jarファイルに格納されています。</font><font style="vertical-align: inherit;">まあ、それは奇妙です。</font><font style="vertical-align: inherit;">私はこのJavaをまったく知らないという事実を除いて。</font><font style="vertical-align: inherit;">Java Scriptで、Internet of Thingsに手を出されたケースがありましたが、実際のJavaに出くわしませんでした。</font><font style="vertical-align: inherit;">しかし、私たちが消えなかった場所！</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">問題を見つけるためのJAVAバイトコード分析</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
バイトコードを開く方法は？ GoogleはHabréに関する記事を紹介しました。そのためには、JD-GUIを使用する必要があると述べています。 githubで見つけ、ダウンロードしました。 JD-GUIには素晴らしいインタラクティブなナビゲーションがあるので、問題のある領域をかなり早く特定しました。投稿を10分でサイトに残しました。このセクションでは、サードパーティのプログラムを呼び出し、その後、その応答を分析します。呼び出しは次のようになります。</font></font><br>
<pre><code class="plaintext hljs">         systemConsoleCommand[index] = "system-console";<font></font>
         systemConsoleCommand[var24++] = "--script=" + Globals.gHost.getMonitorProgramRootDir("bin/jtag_instance_check.tcl", true);<font></font>
         systemConsoleCommand[var24++] = cable;<font></font>
         systemConsoleCommand[var24++] = Globals.gProject.system.sofFilename;<font></font>
         try {<font></font>
            Process sysConsoleProc = NiosIIShell.executeCommand(systemConsoleCommand).start();<font></font>
            BufferedReader gdbIn = new BufferedReader(new InputStreamReader(sysConsoleProc.getInputStream()));<font></font>
</code></pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さて、そしてさらに-私たちがまだ考慮していない答えの分析。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このコードを使用して、NIOS IIコンソールを開こうとしました：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/s4/u8/tl/s4u8tl-vtf3qn8x0ckrughrfjey.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
sofファイルがあるディレクトリに移動し、コマンドラインを実行しました：</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">system-console --script = jtag_instance_check.tcl USB-0 test.sof</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
True、これにはCファイルをコピーする必要がありました： \ intelFPGALite \ 17.1 \ University_Program \ Monitor_Program \ bin \ jtag_instance_check.tcl to the same where isf is so、to be to be path on the path。</font><font style="vertical-align: inherit;">その結果、私はかなりまともな回答を得ました：</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TYPE_NAME altera_avalon_jtag_uart.jtag FULL_HPATH jtag_uart_0（INSTANCE_ID：0）</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
TYPE_NAME altera_nios2_gen2.data_master FULL_HPATH nios2_gen2_0（INSTANCE_ID：0）</font></font><br>
</b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
のように、すべてが美しいです...</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JAVAバイトコードトレース</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
事件が今日発生した場合、このセクションは存在しません。しかし、それは昨日起こった。私はまだJavaを非常によく理解していません。テキストの解析中にそこに書かれたのは、私にとって暗い森でした。確かに、私の子供は1Sovskieフランチャイジーのオリンピックコースに2年間出席しました（証明書と配布物は1Sovskieでした）。これらのコースにはクレイジーなお金が与えられました。そして、彼らはそこでJavaだけでそれらを教えました。したがって、彼はさらにコードで何が書かれているかを理解していませんでした（陰謀を維持して、今ではなく少し低くコードを公開します）。全体的に、たどる時だという気持ちが根強く残っていました。私は悪いセクションを知っています、そこでラインが受信されたことがわかります、そしてプログラムは何かでそれらを好きではありません。だから何？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
子供は私に非常に素晴らしい記事を見つけました</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.crowdstrike.com/blog/native-java-bytecode-debugging-without-source-code</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eclipseの非常に便利なプラグインについて説明します。これにより、JARを操作して、JARにブレークポイントを設定できます。ダウンロードする場所は、</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">marketplace.eclipse.org</font></a><font style="vertical-align: inherit;"> / </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">content</font></a><font style="vertical-align: inherit;"> / </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">bytecode-visualizer</font></a><font style="vertical-align: inherit;"> / </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">helpです。</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私はEclipseをダウンロードし、オフラインインストール用のプラグインをダウンロードして、悲しみを半分にしました...インストールを開始しました-十分なライブラリがありません。読み始めました。プラグインには3つのバージョンがあることがわかりました。 Eslipse 4.5（火星）、4.4（ルナ）、4.3（名前は覚えていません）。まあ、すべてが簡単です。 EclipseのWebサイトにアクセスすると、Mars for Javaのバージョンをダウンロードするためのリンクが表示されます。問題ない！約12のミラーがあります！..そして、それらへのリンクはすべて死んでいます。私たちはLuna for Javaを試します。x64へのリンクは無効です。x86へのリンクは1つあります。私の友人の1人が言うように、「痔核は包括的です。」一般的に、Googleは苦労しましたが、火星版の64ビットJavaアセンブリを非公式のサーバーで見つけました。 30分ダウンロードしましたが、ダウンロードしました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プラグインを実装し、プロジェクトを作成しました...ホラー！そこでは、トレースはソースコードレベルではなく、アラセンブラレベルで行われます。つまり、デコードされたバイトコードがトレースされます。しかし、実際にはそれは問題ではありません！結局のところ、逆コンパイルされたソースを別のウィンドウで開いていつでも確認できます。さらに、そのプラグインは非常に良いコメントを表示します...ブレークポイントはどこにも設定できず、関数の入り口でのみ設定できることもわかりました。でも止められない！そこにはそれほど多くはなく、入口から問題のあるエリアまで歩く必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私はあなたを思い出させるしてみましょう、このような処理された行のルックス：</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TYPE_NAME altera_avalon_jtag_uart.jtag FULL_HPATH jtag_uart_0（INSTANCE_ID：0）</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
TYPE_NAME altera_nios2_gen2.data_master FULL_HPATH nios2_gen2_0（INSTANCE_ID：0）</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
そして、ここでは、Javaコードです：</font></font><br>
<pre><code class="plaintext hljs">if (str.contains("(INSTANCE_ID:")) {<font></font>
    Pattern getInstance = Pattern.compile("\\(INSTANCE_ID:(\\d+)\\)");<font></font>
    Matcher idMatcher = getInstance.matcher(str);<font></font>
    if (idMatcher.find()) {<font></font>
       String foundstr = idMatcher.group(1);<font></font>
       instance = Integer.parseInt(foundstr);<font></font>
    }<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
インスタンスIDを完全に分離します。</font><font style="vertical-align: inherit;">そしてここにコードがあります：</font></font><br>
<pre><code class="plaintext hljs">            Pattern getHPath = Pattern.compile("FULL_HPATH (.+?)\\|(.+?) \\(");<font></font>
            Matcher hpathMatcher = getHPath.matcher(str);<font></font>
            if (hpathMatcher.find()) {<font></font>
              hpath = hpathMatcher.group(2).replace("|", ".");<font></font>
            }<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
hpath変数は設定されません。</font><font style="vertical-align: inherit;">今日、私は正規表現が次のとおりであることをすでに知っています：</font></font><br>
<pre><code class="plaintext hljs">"FULL_HPATH (.+?)\\|(.+?) \\("</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
垂直バーで区切られた2つの単語が必要です。</font><font style="vertical-align: inherit;">さて、それから、ラインが取られた後のものだけです。</font><font style="vertical-align: inherit;">昨日は知りませんでした。</font><font style="vertical-align: inherit;">もっと興味深いのは別のものです。</font><font style="vertical-align: inherit;">子供はJavaで2年間仕事を学び、正規表現を学びませんでした！</font><font style="vertical-align: inherit;">いいえ、彼らが言語ではなく、オリンピアードのプログラミングを言語によって教えられたことは明らかですが、私が理解しているように、Javaの正規表現は順番に並んでいます。</font><font style="vertical-align: inherit;">彼らはそのようなお金を受け取り、評判の良い会社からの証明書を揺さぶりますが、彼らは重要なことを教えません...しかし、私は余談です。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">トンネルの端にあるライト</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
垂直線とは何ですか？働いていたプロジェクトを取る、我々も彼と同じチームにして、ここで答えを得る：</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TYPE_NAME altera_avalon_jtag_uart.jtag FULL_HPATH Computer_System：The_System | JTAG_UART（INSTANCE_ID：0）</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
TYPE_NAME altera_avalon_jtag_uart.jtag FULL_HPATH Computer_System：The_System | JTAG_UART_2nd_Core（INSTANCE_ID：1）</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
TYPE_NAMEのaltera_avalon_jtag_uart .jtag FULL_HPATH Computer_System：The_System | JTAG_UART_for_ARM_0（ INSTANCE_ID： </font><font style="vertical-align: inherit;">2）</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
TYPE_NAME altera_avalon_jtag_uart.jtag FULL_HPATH Computer_System：The_System | JTAG_UART_for_ARM_1（INSTANCE_ID：3）</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
TYPE_NAME altera_nios2_gen2.data_master FULL_HPATH Computer_System：The_System | Nios2（INSTANCE_ID：0）</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
TYPE_NAME altera_nios2_gen2.data_master FULL_HPATH Computer_System。 The_System | Nios2_2nd_Core（INSTANCE_ID：1）</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Computer_Systemとは：The_System？</font><font style="vertical-align: inherit;">ここではすべてが簡単です。</font><font style="vertical-align: inherit;">このシリーズの記事では、コンピューターシステムが階層の最上位にある高度なアイデアを紹介します。</font></font><div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">この例には、次のVerilogレイヤーがあります。</font></font></b><div class="spoiler_text"><pre><code class="plaintext hljs">module DE0_Nano_SoC_Computer (<font></font>
	////////////////////////////////////<font></font>
	// FPGA Pins<font></font>
	////////////////////////////////////<font></font>
<font></font>
	// Clock pins<font></font>
	input              CLOCK_50,<font></font>
	input              CLOCK2_50,<font></font>
	input              CLOCK3_50,<font></font>
	<font></font>
	// ADC<font></font>
	output             ADC_CONVST,<font></font>
	output             ADC_SCLK,<font></font>
	output             ADC_SDI,<font></font>
	input              ADC_SDO,<font></font>
	<font></font>
	// ARDUINO<font></font>
	inout       [15:0] ARDUINO_IO,<font></font>
	inout              ARDUINO_RESET_N,<font></font>
	<font></font>
	// GPIO<font></font>
	inout       [35:0] GPIO_0,<font></font>
	inout       [35:0] GPIO_1,<font></font>
	<font></font>
	// KEY<font></font>
	input       [1:0]  KEY,<font></font>
	<font></font>
	// LED<font></font>
	output      [7:0]  LED,<font></font>
	<font></font>
	// SW<font></font>
	input       [3:0]  SW,<font></font>
	<font></font>
	////////////////////////////////////<font></font>
	// HPS Pins<font></font>
	////////////////////////////////////<font></font>
	<font></font>
	// DDR3 SDRAM<font></font>
	output      [14:0] HPS_DDR3_ADDR,<font></font>
	output      [2:0]  HPS_DDR3_BA,<font></font>
	output             HPS_DDR3_CAS_N,<font></font>
	output             HPS_DDR3_CKE,<font></font>
	output             HPS_DDR3_CK_N,<font></font>
	output             HPS_DDR3_CK_P,<font></font>
	output             HPS_DDR3_CS_N,<font></font>
	output      [3:0]  HPS_DDR3_DM,<font></font>
	inout       [31:0] HPS_DDR3_DQ,<font></font>
	inout       [3:0]  HPS_DDR3_DQS_N,<font></font>
	inout       [3:0]  HPS_DDR3_DQS_P,<font></font>
	output             HPS_DDR3_ODT,<font></font>
	output             HPS_DDR3_RAS_N,<font></font>
	output             HPS_DDR3_RESET_N,<font></font>
	input              HPS_DDR3_RZQ,<font></font>
	output             HPS_DDR3_WE_N,<font></font>
<font></font>
	// Ethernet<font></font>
	output             HPS_ENET_GTX_CLK,<font></font>
	inout              HPS_ENET_INT_N,<font></font>
	output             HPS_ENET_MDC,<font></font>
	inout              HPS_ENET_MDIO,<font></font>
	input              HPS_ENET_RX_CLK,<font></font>
	input       [3:0]  HPS_ENET_RX_DATA,<font></font>
	input              HPS_ENET_RX_DV,<font></font>
	output      [3:0]  HPS_ENET_TX_DATA,<font></font>
	output             HPS_ENET_TX_EN,<font></font>
<font></font>
	// Accelerometer<font></font>
	inout              HPS_GSENSOR_INT,<font></font>
<font></font>
	// I2C<font></font>
	inout              HPS_I2C0_SCLK,<font></font>
	inout              HPS_I2C0_SDAT,<font></font>
	inout              HPS_I2C1_SCLK,<font></font>
	inout              HPS_I2C1_SDAT,<font></font>
	<font></font>
	// Pushbutton<font></font>
	inout              HPS_KEY,<font></font>
<font></font>
	// LED<font></font>
	inout              HPS_LED,<font></font>
<font></font>
	// LTC<font></font>
	inout              HPS_LTC_GPIO,<font></font>
<font></font>
	// SD Card<font></font>
	output             HPS_SD_CLK,<font></font>
	inout              HPS_SD_CMD,<font></font>
	inout       [3:0]  HPS_SD_DATA,<font></font>
	<font></font>
	// SPI<font></font>
	output             HPS_SPIM_CLK,<font></font>
	input              HPS_SPIM_MISO,<font></font>
	output             HPS_SPIM_MOSI,<font></font>
	inout              HPS_SPIM_SS,<font></font>
	<font></font>
	// UART<font></font>
	input              HPS_UART_RX,<font></font>
	output             HPS_UART_TX,<font></font>
	<font></font>
	// USB<font></font>
	inout              HPS_CONV_USB_N,<font></font>
	input              HPS_USB_CLKOUT,<font></font>
	inout       [7:0]  HPS_USB_DATA,<font></font>
	input              HPS_USB_DIR,<font></font>
	input              HPS_USB_NXT,<font></font>
	output             HPS_USB_STP<font></font>
);<font></font>
<font></font>
<font></font>
//=======================================================<font></font>
//  REG/WIRE declarations<font></font>
//=======================================================<font></font>
wire  hps_fpga_reset_n;<font></font>
<font></font>
<font></font>
<font></font>
<font></font>
//=======================================================<font></font>
//  Structural coding<font></font>
//=======================================================<font></font>
<font></font>
<font></font>
Computer_System The_System (<font></font>
	////////////////////////////////////<font></font>
	// FPGA Side<font></font>
	////////////////////////////////////<font></font>
<font></font>
	// Global signals<font></font>
	.system_pll_ref_clk_clk				(CLOCK_50),<font></font>
	.system_pll_ref_reset_reset			(1'b0),<font></font>
<font></font>
	// ADC<font></font>
	.adc_sclk							(ADC_SCLK),<font></font>
	.adc_cs_n							(ADC_CONVST),<font></font>
	.adc_dout							(ADC_SDO),<font></font>
	.adc_din							(ADC_SDI),<font></font>
<font></font>
	// Arduino GPIO<font></font>
	.arduino_gpio_export				(ARDUINO_IO),<font></font>
<font></font>
	// Arduino Reset_n<font></font>
	.arduino_reset_n_export				(ARDUINO_RESET_N),<font></font>
<font></font>
	// Slider Switches<font></font>
	.slider_switches_export				(SW),<font></font>
<font></font>
	// Pushbuttons<font></font>
	.pushbuttons_export					(~KEY),<font></font>
<font></font>
	// Expansion JP1<font></font>
	.expansion_jp1_export				({GPIO_0[35:19], GPIO_0[17], GPIO_0[15:3], GPIO_0[1]}),<font></font>
<font></font>
	// Expansion JP7<font></font>
	.expansion_jp7_export				({GPIO_1[35:19], GPIO_1[17], GPIO_1[15:3], GPIO_1[1]}),<font></font>
<font></font>
	// LEDs<font></font>
	.leds_export						(LED),<font></font>
	<font></font>
	////////////////////////////////////<font></font>
	// HPS Side<font></font>
	////////////////////////////////////<font></font>
	// DDR3 SDRAM<font></font>
	.memory_mem_a			(HPS_DDR3_ADDR),<font></font>
	.memory_mem_ba			(HPS_DDR3_BA),<font></font>
	.memory_mem_ck			(HPS_DDR3_CK_P),<font></font>
	.memory_mem_ck_n		(HPS_DDR3_CK_N),<font></font>
	.memory_mem_cke			(HPS_DDR3_CKE),<font></font>
	.memory_mem_cs_n		(HPS_DDR3_CS_N),<font></font>
	.memory_mem_ras_n		(HPS_DDR3_RAS_N),<font></font>
	.memory_mem_cas_n		(HPS_DDR3_CAS_N),<font></font>
	.memory_mem_we_n		(HPS_DDR3_WE_N),<font></font>
	.memory_mem_reset_n		(HPS_DDR3_RESET_N),<font></font>
	.memory_mem_dq			(HPS_DDR3_DQ),<font></font>
	.memory_mem_dqs			(HPS_DDR3_DQS_P),<font></font>
	.memory_mem_dqs_n		(HPS_DDR3_DQS_N),<font></font>
	.memory_mem_odt			(HPS_DDR3_ODT),<font></font>
	.memory_mem_dm			(HPS_DDR3_DM),<font></font>
	.memory_oct_rzqin		(HPS_DDR3_RZQ),<font></font>
		  <font></font>
	// Accelerometer<font></font>
	.hps_io_hps_io_gpio_inst_GPIO61		(HPS_GSENSOR_INT),<font></font>
<font></font>
	// Ethernet<font></font>
	.hps_io_hps_io_gpio_inst_GPIO35		(HPS_ENET_INT_N),<font></font>
	.hps_io_hps_io_emac1_inst_TX_CLK	(HPS_ENET_GTX_CLK),<font></font>
	.hps_io_hps_io_emac1_inst_TXD0		(HPS_ENET_TX_DATA[0]),<font></font>
	.hps_io_hps_io_emac1_inst_TXD1		(HPS_ENET_TX_DATA[1]),<font></font>
	.hps_io_hps_io_emac1_inst_TXD2		(HPS_ENET_TX_DATA[2]),<font></font>
	.hps_io_hps_io_emac1_inst_TXD3		(HPS_ENET_TX_DATA[3]),<font></font>
	.hps_io_hps_io_emac1_inst_RXD0		(HPS_ENET_RX_DATA[0]),<font></font>
	.hps_io_hps_io_emac1_inst_MDIO		(HPS_ENET_MDIO),<font></font>
	.hps_io_hps_io_emac1_inst_MDC		(HPS_ENET_MDC),<font></font>
	.hps_io_hps_io_emac1_inst_RX_CTL	(HPS_ENET_RX_DV),<font></font>
	.hps_io_hps_io_emac1_inst_TX_CTL	(HPS_ENET_TX_EN),<font></font>
	.hps_io_hps_io_emac1_inst_RX_CLK	(HPS_ENET_RX_CLK),<font></font>
	.hps_io_hps_io_emac1_inst_RXD1		(HPS_ENET_RX_DATA[1]),<font></font>
	.hps_io_hps_io_emac1_inst_RXD2		(HPS_ENET_RX_DATA[2]),<font></font>
	.hps_io_hps_io_emac1_inst_RXD3		(HPS_ENET_RX_DATA[3]),<font></font>
<font></font>
	// I2C<font></font>
	.hps_io_hps_io_i2c0_inst_SDA		(HPS_I2C0_SDAT),<font></font>
	.hps_io_hps_io_i2c0_inst_SCL		(HPS_I2C0_SCLK),<font></font>
	.hps_io_hps_io_i2c1_inst_SDA		(HPS_I2C1_SDAT),<font></font>
	.hps_io_hps_io_i2c1_inst_SCL		(HPS_I2C1_SCLK),<font></font>
<font></font>
	// Pushbutton<font></font>
	.hps_io_hps_io_gpio_inst_GPIO54		(HPS_KEY),<font></font>
<font></font>
	// LED<font></font>
	.hps_io_hps_io_gpio_inst_GPIO53		(HPS_LED),<font></font>
<font></font>
	// LTC<font></font>
	.hps_io_hps_io_gpio_inst_GPIO40		(HPS_LTC_GPIO),<font></font>
<font></font>
	// SD Card<font></font>
	.hps_io_hps_io_sdio_inst_CMD		(HPS_SD_CMD),<font></font>
	.hps_io_hps_io_sdio_inst_D0			(HPS_SD_DATA[0]),<font></font>
	.hps_io_hps_io_sdio_inst_D1			(HPS_SD_DATA[1]),<font></font>
	.hps_io_hps_io_sdio_inst_CLK		(HPS_SD_CLK),<font></font>
	.hps_io_hps_io_sdio_inst_D2			(HPS_SD_DATA[2]),<font></font>
	.hps_io_hps_io_sdio_inst_D3			(HPS_SD_DATA[3]),<font></font>
<font></font>
	// SPI<font></font>
	.hps_io_hps_io_spim1_inst_CLK		(HPS_SPIM_CLK),<font></font>
	.hps_io_hps_io_spim1_inst_MOSI		(HPS_SPIM_MOSI),<font></font>
	.hps_io_hps_io_spim1_inst_MISO		(HPS_SPIM_MISO),<font></font>
	.hps_io_hps_io_spim1_inst_SS0		(HPS_SPIM_SS),<font></font>
<font></font>
	// UART<font></font>
	.hps_io_hps_io_uart0_inst_RX		(HPS_UART_RX),<font></font>
	.hps_io_hps_io_uart0_inst_TX		(HPS_UART_TX),<font></font>
<font></font>
	// USB<font></font>
	.hps_io_hps_io_gpio_inst_GPIO09		(HPS_CONV_USB_N),<font></font>
	.hps_io_hps_io_usb1_inst_D0			(HPS_USB_DATA[0]),<font></font>
	.hps_io_hps_io_usb1_inst_D1			(HPS_USB_DATA[1]),<font></font>
	.hps_io_hps_io_usb1_inst_D2			(HPS_USB_DATA[2]),<font></font>
	.hps_io_hps_io_usb1_inst_D3			(HPS_USB_DATA[3]),<font></font>
	.hps_io_hps_io_usb1_inst_D4			(HPS_USB_DATA[4]),<font></font>
	.hps_io_hps_io_usb1_inst_D5			(HPS_USB_DATA[5]),<font></font>
	.hps_io_hps_io_usb1_inst_D6			(HPS_USB_DATA[6]),<font></font>
	.hps_io_hps_io_usb1_inst_D7			(HPS_USB_DATA[7]),<font></font>
	.hps_io_hps_io_usb1_inst_CLK		(HPS_USB_CLKOUT),<font></font>
	.hps_io_hps_io_usb1_inst_STP		(HPS_USB_STP),<font></font>
	.hps_io_hps_io_usb1_inst_DIR		(HPS_USB_DIR),<font></font>
	.hps_io_hps_io_usb1_inst_NXT		(HPS_USB_NXT)<font></font>
);<font></font>
<font></font>
endmodule<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
具体的には、この場合、完全に不要なコードをどれだけ書く必要があるかを強調するために、完全にまとめました。</font><font style="vertical-align: inherit;">また、脚が追加または削除された場合、このコードも編集する必要があります。</font><font style="vertical-align: inherit;">実際には、ライン</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gg/_n/b3/gg_nb3rvplsmdkewhuqiqgctyqa.png"><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">同じテキスト：</font></font></b><div class="spoiler_text"><pre><code class="plaintext hljs">...<font></font>
Computer_System The_System (<font></font>
	////////////////////////////////////<font></font>
	// FPGA Side<font></font>
	////////////////////////////////////<font></font>
<font></font>
	// Global signals<font></font>
	.system_pll_ref_clk_clk				(CLOCK_50),<font></font>
...<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この接頭辞を付けます。</font><font style="vertical-align: inherit;">著者は、階層はこのようにすべきであり、これだけであり、他のものではないと信じています。</font><font style="vertical-align: inherit;">プロセッサー・システムを深く取り除いたり、持ち越したりすることはできません。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">自然からの憐れみを待つべきではありません。</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちは本当にこの問題に我慢するためにそのような仕事を本当にしましたか？</font><font style="vertical-align: inherit;">私の友人の一人が言うように、「不要な作業は飲酒よりも悪い」であり、そのようなレイヤーの作成は不要な作業の典型的なケースです。</font><font style="vertical-align: inherit;">したがって、この制限を回避しようとします。</font><font style="vertical-align: inherit;">サードパーティのJAVAプログラムを呼び出すときに、コードがいくつかのtclスクリプトを置き換えたことを思い出してください。また、それをsofファイルの隣のディレクトリにコピーしましたか？</font><font style="vertical-align: inherit;">それが私たちの救いです！</font><font style="vertical-align: inherit;">システムコンソールに実行するアクションを指示するのは彼であり、応答をフォーマットするのは彼です。</font><font style="vertical-align: inherit;">フォーマットは次のようになります：</font></font><br>
<img src="https://habrastorage.org/webt/6a/si/cq/6asicqpxflldfmtmq1qveh_6c4q.png"><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">同じテキスト：</font></font></b><div class="spoiler_text"><pre><code class="plaintext hljs"># PRINT OUT INSTANCE ID INFO FOR EVERYTHING:<font></font>
set i 0<font></font>
foreach path [lsort -command compare_node_number [get_service_paths bytestream]] {<font></font>
    # If this path corresponds to a JTAG UART, incr i<font></font>
    if {[string match *$cable_name* $path ] &amp;&amp; [string match *jtag_uart* [marker_get_type $path] ]} {<font></font>
        puts "[marker_get_info $path] (INSTANCE_ID:$i)"<font></font>
        incr i<font></font>
    }<font></font>
}<font></font>
set i 0<font></font>
foreach path [lsort -command compare_node_number [get_service_paths processor]] {<font></font>
     # If this path corresponds to a NiosII, incr i<font></font>
    if {[string match *$cable_name* $path ] &amp;&amp; [string match *nios2* [marker_get_type $path] ]} {<font></font>
        puts "[marker_get_info $path] (INSTANCE_ID:$i)"<font></font>
        incr i<font></font>
    }<font></font>
}<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初のブロックはJTAG_UARTブロックに関する情報をフォーマットし、2番目はプロセッサコアに関する情報をフォーマットします。</font><font style="vertical-align: inherit;">ここで、出力ストリームに垂直線を追加します！</font><font style="vertical-align: inherit;">同僚がこのセクションを次のように修正しました。</font></font><br>
<pre><code class="plaintext hljs"># PRINT OUT INSTANCE ID INFO FOR EVERYTHING:<font></font>
set i 0<font></font>
foreach path [lsort -command compare_node_number [get_service_paths bytestream]] {<font></font>
    # If this path corresponds to a JTAG UART, incr i<font></font>
    if {[string match *$cable_name* $path ] &amp;&amp; [string match *jtag_uart* [marker_get_type $path] ]} {<font></font>
<font></font>
	set info [marker_get_info $path]<font></font>
	if {[string first "|" $info] == -1} {<font></font>
	    set info [string map {"FULL_HPATH " "FULL_HPATH a:b|"} $info]<font></font>
	}<font></font>
	puts "$info (INSTANCE_ID:$i)"<font></font>
<font></font>
        incr i<font></font>
    }<font></font>
}<font></font>
set i 0<font></font>
foreach path [lsort -command compare_node_number [get_service_paths processor]] {<font></font>
     # If this path corresponds to a NiosII, incr i<font></font>
    if {[string match *$cable_name* $path ] &amp;&amp; [string match *nios2* [marker_get_type $path] ]} {<font></font>
	set info [marker_get_info $path]<font></font>
	if {[string first "|" $info] == -1} {<font></font>
	    set info [string map {"FULL_HPATH " "FULL_HPATH a:b|"} $info]<font></font>
	}<font></font>
	puts "$info (INSTANCE_ID:$i)"<font></font>
        incr i<font></font>
    }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ダッシュがない場合は、追加されます。</font><font style="vertical-align: inherit;">そして最後に、プログラムはひどいものだけでなく、最適に書かれたプロセッサシステムでも動作します！</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アルテラモニターでのプロジェクトの設定</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
うふふ。すべて。ガウジング、オフロード、そしてだらしさの終わり（ただし、オフロードについて-これは正確ではありません）。繰り返しになりますが、記事の図面は作業の指示を反映しています！ FPGAのプロジェクトと、Eclipseでビルドして実行するプログラムがあります。次に、アルテラモニターを起動してプロジェクトを作成します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/zy/kc/b0/zykcb02zebkc-u6wknzbnnqozew.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プロジェクトを含むディレクトリを作成し（FPGAのプロジェクトとは別に配置します）、プロジェクトの名前を指定します。また、プロセッサアーキテクチャ</font></font><br>
<br>
<img src="https://habrastorage.org/webt/md/8c/sg/md8csgrftsf_j0mt8vyjrcaaaua.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
を選択し、カスタムシステムを選択します。 * .sofおよび* .sopcinfoファイルを指定する必要があります。作業ディレクトリでそれらを選択します。私たちのシステムはプリローダーを必要としません。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ej/zb/ad/ejzbad_u22w-hczkkgluen36nfa.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プログラムのタイプを選択し、デバイスドライバーをサポートするプログラムを選択すると、BSPライブラリがビルドされ</font></font><br>
 <br>
<img src="https://habrastorage.org/webt/td/dw/ew/tddwewush_a8-srgsrrnpbcmbo4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ます。作業ファイル</font><font style="vertical-align: inherit;">は1つだけ</font><font style="vertical-align: inherit;">です（Eclipseで作成されています）。ここに追加します：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/f9/pt/mk/f9ptmk-t78ilnla5-7hm4mlnpno.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最後のウィンドウでは何も変更しません</font></font><br>
<br>
<img src="https://habrastorage.org/webt/sm/lf/e_/smlfe__fqs5gt3ieiuhcryd0fso.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
。sofファイルのダウンロードに同意します。</font></font><br>
 <br>
<img src="https://habrastorage.org/webt/yl/x6/qx/ylx6qxkmhkql0hbxgdqgakxek4c.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ソフトウェアをインストールしたばかりの場合は、ソースモードに切り替えました。次に、それはすでにオンになっています（すべてがオンになっているときにメニューがどのように見えるかを示します。含めるためのアイテムもあります）。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/nj/jo/4p/njjo4pxzvs87ygedajsdkh8gx_u.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私は最も単純なCプログラムを持っています。</font></font><br>
<pre><code class="plaintext hljs">#include "sys/alt_stdio.h"<font></font>
<font></font>
int main()<font></font>
{ <font></font>
  alt_putstr("Hello from Nios II!\n");<font></font>
  <font></font>
  volatile int i=0;<font></font>
  <font></font>
  i += 1;<font></font>
  i += 2;<font></font>
  i += 3;<font></font>
  i += 4;<font></font>
  i += 5;<font></font>
  i += 6;<font></font>
  i += 7;<font></font>
  i += 8;<font></font>
  i += 9;<font></font>
  i += 10;<font></font>
  i += 11;<font></font>
  i += 12;<font></font>
<font></font>
  /* Event loop never exits. */<font></font>
  while (1);<font></font>
<font></font>
  return 0;<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それをアセンブルしようとすると：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/d_/2q/pq/d_2qpq5wlpcikhp1sqfzfn4qfxq.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
エラーが発生します：</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c：/intelfpga/17.1/nios2eds/bin/gnu/h-x86_64-mingw32/bin /../ lib / gcc / nios2-elf / 5.3.0 /../../。 ./../../H-x86_64-mingw32/nios2-elf/bin/ld.exe：region `Code 'overflowed by 15888 bytes</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
これは、システムにSDRAMを追加しなかったため、内部FPGAメモリに制限しました。</font><font style="vertical-align: inherit;">しかし、なぜすべてがEclipseに収まったのに、ここに収まらないのでしょうか。</font><font style="vertical-align: inherit;">そこにBSPを選択したのは、接尾辞がSmallですが、ここでは自動的に通常のパッケージが作成されました。</font><font style="vertical-align: inherit;">したがって、次のファイルを開きます。C：\ Work \ Play2 \ BSP \ settings.bsp </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、手動チューニングを開始します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/bu/tv/vn/butvvng3etvwox28euel6mvggyq.png"> <br>
<br>
<img src="https://habrastorage.org/webt/sq/ei/kk/sqeikkntwrn4ju8qtve_yybvgxw.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
BSPを再構築</font></font><br>
<br>
<img src="https://habrastorage.org/webt/a0/sf/0_/a0sf0_tbaegc9-cusl2bfa-xova.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
します。プロジェクトを収集します。</font><font style="vertical-align: inherit;">今回は無事。</font><font style="vertical-align: inherit;">それをロードします：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/sm/kg/rl/smkgrlr9croftl0y-fagdqqhr1a.png"> <br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最後に、実際のトレース</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
なぜ私はこれをすべて行うのかを忘れていませんか？トレースのためにこれを行います。有効にする必要があります。これを行うには、[トレース]タブに移動し、コンテキストメニューで[トレースを有効にする]を選択します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/nv/bo/pp/nvboppbqx8ihyhh6qlxmbxjgfq0.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
[逆アセンブリ]タブのメイン（）関数の最後にブレークポイントを配置します（Javaコードが変換される恐ろしいスタックアセンブラの後にRISCアセンブラがどのように見えるかがわかります）これ</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
がメイン関数の始まりです。 ：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ue/m2/-q/uem2-qdgcpj7stuobbouowscfkw.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
少し下にスクロールして、ここにブレークポイントを配置します。</font></font><br>
 <br>
<img src="https://habrastorage.org/webt/ev/zf/ot/evzfotqiwhr4w0j2f-xrilmfooe.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実行し、</font><font style="vertical-align: inherit;">ブレークを</font><font style="vertical-align: inherit;">待って、[トレース]タブに移動します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一般的に、すべてがあまり良くありません。最初は明らかにある種の期待がありました（JTAGに出力があったので、それは正当なものです）：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/yd/fo/jf/ydfojfs41-yysqn8kqndisvaguw.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
結局-他のコード...しかし、メインの関数コードは表示されません！これで終わりです：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ww/eb/ky/wwebkyjc8nj3nrdnxrpfqoosbc0.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
なんて言えばいいのか分からない。</font><font style="vertical-align: inherit;">しかし、とにかく、1つではなく2つのブレークポイント（メイン関数の最初と最後に）を置くと、最初から2番目に実行した後、画像は適切になります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/kq/pr/en/kqprenc25bb2vbucdmxq_49vzqy.png"> <br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">簡単な結論</font></font></h2> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、特定のサイトがどのように機能したかを知ることはかなり可能であることがわかりました。そこで、記事のトピック（「...プロセッサがそのような人生に至った経緯」）が公開されます。結果を得るために問題を解決しなければならなかったすべての人が、どのようにそのような人生に来たのか、それはもっと興味深いですか？そして、残念ながら、これまでのところ、1つまたは別のチームが完了したバーの数を特定できていません。ドキュメンテーションの抜粋から、これは技術的に可能であるように思われることは明らかですが、これを可能にするソフトウェアは明確ではありません。</font><font style="vertical-align: inherit;">tclスクリプトを分析するときに読み通さなければならなかった</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、システムコンソールを使用した設計の分析とデバッグ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">のドキュメントが役立つとの意見があります</font><font style="vertical-align: inherit;">。興味深いタブレットがあります。</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表10-15：トレースシステムコマンド</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、しかし私個人的には、この問題を詳しく研究する時間がないのです。</font><font style="vertical-align: inherit;">しかし、おそらくそれは誰かにとって非常に重要なので、彼はすべてを実装します。</font><font style="vertical-align: inherit;">これらのコマンドは、tclスクリプトに含まれています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さて、次の記事では、オシロスコープを使用して、昔ながらの方法で測定を行う必要があります。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja464779/index.html">快楽主義のミツバチについて、人々が彼らを働かせる方法とドローン</a></li>
<li><a href="../ja464781/index.html">スマートTV：CRTからHDR</a></li>
<li><a href="../ja464785/index.html">競争力のないビーラインのメリット</a></li>
<li><a href="../ja464787/index.html">上級モバイル開発者は推薦だけで来ると確信しています</a></li>
<li><a href="../ja464791/index.html">車のKubernetes：開発者が車載コンピューターにアクセスできるようにし、安全にする方法</a></li>
<li><a href="../ja464803/index.html">「wwwを隠す」：主流のブラウザ開発者がサブドメインの表示を再び拒否した理由</a></li>
<li><a href="../ja464805/index.html">iPadで蛇を書く（pythonista）</a></li>
<li><a href="../ja464809/index.html">顔認識技術をテストした方法とその結果</a></li>
<li><a href="../ja464811/index.html">開発者向けApple Music</a></li>
<li><a href="../ja464813/index.html">Punto Switcher、Birmanレイアウトをautohotkeyのスクリプトに置き換える</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>