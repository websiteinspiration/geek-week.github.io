<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👼🏼 🎟️ 👩🏽 依存性注入の研究 🤽🏻 👨🏿‍🎨 ✊🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="このパターンは12年以上前から存在し、多くの記事（および翻訳）があるにもかかわらず、紛争、コメント、質問、およびさまざまな実現がますます増えています。 
 
 バックグラウンド 2004 “Inversion of Control Containers and the Dependency Inje...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>依存性注入の研究</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/456588/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">このパターンは12年以上前から存在し、多くの記事（および翻訳）があるにもかかわらず、紛争、コメント、質問、およびさまざまな実現がますます増えています。 </font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">バックグラウンド</font></font></b><div class="spoiler_text"> 2004      “<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">Inversion of Control Containers and the Dependency Injection pattern</a>”,          Java.         .   ,   IOS,     .    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">  </a>,      .<br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ハブにも十分な情報がありますが、それはどこで</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">どのよう</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">にそれを行う</font><b><font style="vertical-align: inherit;">か</font></b><font style="vertical-align: inherit;">について議論されてい</font><b><font style="vertical-align: inherit;">ます</font></b><font style="vertical-align: inherit;">が、実際にはどこにも議論されて</font><font style="vertical-align: inherit;">いないという事実- </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">理由</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">それが何のために、何のために良いのかわからない場合、良いアーキテクチャを作成することは可能ですか？</font><font style="vertical-align: inherit;">特定の原則と明確な傾向を考慮に入れることができます-これは予期しない問題を最小限に抑えるのに役立ちますが、理解はさらに良くなります。</font></font><br>
<a name="habracut"></a><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">依存性注入</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、オブジェクトを作成するためのフィールドまたはパラメーターが外部で構成される設計パターンです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初の段落を読むことに限定される人が多いことを知っていたので、記事を変更しました。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このようなDIの「定義」は多くのソースで見られますが、インジェクションはオブジェクトの作成/初期化を置き換えるものであるとユーザーに思わせるため、あいにく曖昧です。少なくとも、このプロセスには非常に積極的に関与しています。もちろん、そのようなDIの実装を禁止する人はいません。ただし、DIは、入力パラメーターのプロビジョニングを提供するオブジェクトの作成に関するパッシブラッパーになる可能性があります。この実装では、別のレベルの抽象化と優れた職務分離が得られます。オブジェクトはその初期化を担当し、インジェクションはデータのストレージを実装してアプリケーションモジュールに提供します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、すべてを順序正しく詳細に説明します。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私は単純なものから始めます、なぜ新しいパターンの必要性が生じたのか、なぜいくつかの古いパターンはスコープが非常に制限されたのですか？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私の意見では、変更の大部分はセルフテストの大規模な導入によって導入されました。また、自動テストを積極的に作成している人にとって、この記事はホワイトデーとして明白であり、これ以上読むことはできません。あなただけが何人がそれらを書かないか想像することはできません。中小企業や新興企業にはこれらのリソースがないことを理解していますが、残念ながら、大企業は優先順位の高い問題を抱えていることがよくあります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここでの推論は非常に簡単です。パラメータ</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">b</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用して関数をテストし</font><font style="vertical-align: inherit;">、結果</font><i><font style="vertical-align: inherit;">x</font></i><font style="vertical-align: inherit;">を取得するとします。</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。ある時点で、期待が満たされない場合、関数は結果</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">yを</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返します。</font><font style="vertical-align: inherit;">しばらくすると、関数内にシングルトンが見つかり、一部の状態では関数の結果が別の値になります。このシングルトンは</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">暗黙的依存症</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と呼ばれ、</font><font style="vertical-align: inherit;">あらゆる状況でこのような状況で使用することを誓約しました。残念ながら、曲から言葉を捨てることはありません。そうしないと、まったく別の曲になります。したがって、関数への入力変数としてシングルトンを取り出します。これで、3つの入力変数</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">b</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sができました</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。すべてが明らかであるように見えます。パラメーターを変更します-明確な結果が得られます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
例を挙げませんが。</font><font style="vertical-align: inherit;">さらに、それはクラス内の関数だけでなく、クラスやモジュールなどの作成にも適用できる概略的な引数です。</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">シングルトンノート</font></font></b><div class="spoiler_text"><i> 1. ,    ,    ,  ,  UserDefaults,     ,      . </i><br>
<br>
<i> 2.    ,   -        .  ,       ,     —    .        .</i><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
上記の例を補足してください。ドキュメントの読み取り、編集、署名、印刷、転送、削除、ロック、実行、コピーなど、9つのユーザー設定（変数）を含むオブジェクトがあります。関数は、これらの設定から3つの変数のみを使用します。関数に何を渡しますか：1つのパラメーターとして9つの変数を持つオブジェクト全体、または3つの別個のパラメーターを持つ3つの必要な設定のみ？多くの場合、多くのパラメータを設定しないように、転送されたオブジェクトを拡大します。つまり、最初のオプションを選択します。この方法は、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「不当に広い依存関係」</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の移行と見なされ</font><font style="vertical-align: inherit;">ます。すでにお気づきのとおり、セルフテストの目的では、2番目のオプションを使用して、使用されるパラメーターのみを渡すことをお勧めします。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2つの結論を出しました。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 -関数は入力で必要なすべてのパラメーターを受け取る必要があります</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 -関数は入力で不要なパラメーターを受け取ってはなりません</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最高のものを望みましたが、6つのパラメーターを持つ関数を受け取りました。すべてが関数内で順序どおりであると仮定しますが、誰かが関数に入力パラメーターを提供する責任を負う必要があります。すでに書いたように、私の推論は大ざっぱです。通常のクラス関数だけでなく、モジュールの初期化/作成関数（vip、viper、データオブジェクトなど）を意味します。このコンテキストでは、質問を言い換えます。誰がモジュールを作成するための入力パラメーターを提供する必要がありますか？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1つの解決策は、このケースを呼び出しモジュールにシフトすることです。しかし、その後、呼び出し元のモジュールが子のパラメーターを渡す必要があることがわかります。これには、次のような複雑な問題が伴います。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まず、少し前に、「不当に広い依存関係」を回避することにしました。第2に、多くのパラメータがあることを理解するために一生懸命作業する必要はありません。子モジュールを追加するたびにそれらを編集するのは非常に面倒であり、子モジュールの削除について考えるのも面倒です。ちなみに、一部のアプリケーションでは、モジュールの階層を構築することがまったく不可能です：ソーシャルネットワークを見てください：プロフィール-&gt;友達-&gt;友達のプロフィール-&gt;友達の友達など。第三に、このトピックでSOLI </font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の原理を思い出すことができ</font><font style="vertical-align: inherit;">ます：「トップレベルのモジュールは下位レベルのモジュールに依存しない」</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、モジュールの作成/初期化を別の構造に置くというアイデアを生み出します。次に、例として数行を書きます。</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AccountList</span> </span>{
  <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">showAccountDetail</span><span class="hljs-params">(account: String)</span></span> {
    <span class="hljs-keyword">let</span> accountDetail = <span class="hljs-type">AccountDetail</span>.make(account: account)
    <span class="hljs-comment">// to do something with accountDetail</span><font></font>
  }<font></font>
}<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AccountDetail</span> </span>{
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">init</span>(account: <span class="hljs-type">String</span>, permission1: <span class="hljs-type">Bool</span>, permission2: <span class="hljs-type">Bool</span>) {
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"account = \(account), p1 = \(permission1), p2 = \(permission2)"</span>)<font></font>
  }<font></font>
}<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">extension</span> <span class="hljs-title">AccountDetail</span> </span>{<font></font>
  <font></font>
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">make</span><span class="hljs-params">(account: String)</span></span> -&gt; <span class="hljs-type">AccountDetail?</span> {
    <span class="hljs-keyword">let</span> p1 = ...
    <span class="hljs-keyword">let</span> p2 = ...
    <span class="hljs-keyword">return</span> <span class="hljs-type">AccountDetail</span>(account: account, permission1: p1, permission2: p2)<font></font>
  }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この例では、アカウントAccountListのリストのモジュールがあり、アカウントAccountDetailの詳細情報のモジュールを呼び出します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AccountDetailモジュールを初期化するには、3つの変数が必要です。</font><font style="vertical-align: inherit;">変数Account AccountDetailが親モジュールから受け取り、変数permission1、permission2が挿入されます。</font><font style="vertical-align: inherit;">インジェクションのため、請求書の詳細を含むモジュール呼び出しは次のようになります。</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">let</span> accountDetail = <span class="hljs-type">AccountDetail</span>.make(account: account)
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
代わりに </font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">let</span> accountDetail = <span class="hljs-type">AccountDetail</span>(account: account, permission1: p1, permission2: p2)
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アカウントのリストの親モジュールであるAccountListは、何も知らないパーミッションを持つパラメーターを渡す義務から解放されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
インジェクション（アセンブリ）実装をクラス拡張の静的関数にレンダリングしました。</font><font style="vertical-align: inherit;">ただし、実装は任意です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ご覧のとおり：</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">モジュールは必要なパラメータを受け取りました。</font><font style="vertical-align: inherit;">その作成と実行は、すべての値のセットで安全にテストできます。</font></font></li>
<li> ,          .</li>
<li>      ,     (p1, p2).  ,     -     ,          (    ),        ,     . </li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
依存性注入の本質は、あるモジュールを別のモジュールから呼び出すときに、独立したオブジェクト/メカニズムが呼び出されたモジュールにデータを転送（注入）するプロセスの構築です。つまり、呼び出されたモジュールは外部で設定されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
いくつかの構成方法があります：</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンストラクターインジェクション</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プロパティインジェクション</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">インターフェイスインジェクション</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Swiftの場合：</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Initializer Injection</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Property Injection</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Method Injection</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最も一般的なのは、コンストラクタ（初期化）インジェクションとプロパティです。</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重要：</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ほとんどすべてのソースで、コンストラクター注入が推奨されます。</font><font style="vertical-align: inherit;">コンストラクター/初期化子の注入とプロパティの注入を比較します。</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">let</span> account = ..
<span class="hljs-keyword">let</span> p1 = ...
<span class="hljs-keyword">let</span> p2 = ...
<span class="hljs-keyword">let</span> accountDetail = <span class="hljs-type">AccountDetail</span>(account: account, permission1: p1, permission2: p2)
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
より良い</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">let</span> accountDetail = <span class="hljs-type">AccountDetail</span>()<font></font>
accountDetail.account = ..<font></font>
accountDetail.permission1 = ...<font></font>
accountDetail.permission2 = ...<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初の方法の利点は明白であるように見えますが、何らかの理由で、既に作成されたオブジェクトを構成するための注入を理解し、2番目の方法を使用する人もいます。</font><font style="vertical-align: inherit;">私は最初の方法です：</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">デザイナーによる作成は、有効なオブジェクトを保証します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プロパティインジェクションでは、作成以外の場所でプロパティの変更をテストする必要があるかどうかは明確ではありません。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オプション性を使用する言語では、プロパティインジェクションを実装するには、フィールドをオプションにするか、巧妙な初期化メソッドを考え出す必要があります（遅延メソッドは常に機能するとは限りません）。</font><font style="vertical-align: inherit;">オプションが多すぎると、不要なコードと不要なテストスイートが追加されます。</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ただし、一部の依存関係がなくなるまで、依存関係を1つの肩から別の肩にシフトしました。論理的な問題は、アセンブリ自体のどこからデータを取得するかです（この例ではmake関数）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アセンブリメカニズムでシングルトーンを使用しても、隠れた依存関係に関する上記の問題が発生しなくなりました。任意のデータセットでモジュールの作成をテストできます。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、ここではシングルトンのもう1つのマイナスに直面しています。処理が不十分です（おそらく、多くの憎悪に満ちた議論をもたらす可能性がありますが、怠惰です）。機能モジュールに分散されているため、多くの格納された/シングルトーンをアセンブリーに分散させることは、他の人との類推では適切ではありません。しかし、そのようなリファクタリングであっても、コードとモジュールのテストにほとんど影響を与えずにアセンブリの順序を復元できるため、衛生状態への最初のステップになります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アーキテクチャをさらに合理化し、移行とアセンブリのテストを行う場合は、もう少し作業を行う必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DIの概念により、必要なすべてのデータをコンテナーに格納することができます。快適です。まず、データの保存（登録）と受信（解決）は、それぞれ1つのコンテナーオブジェクトを経由するため、データの管理とテストが簡単です。次に、データの相互依存性を考慮することができます。 Swiftを含む多くの言語には、既成の依存関係管理コンテナーがあり、通常、依存関係はツリーを形成します。私がリストしない残りの長所と短所は、投稿の冒頭に投稿したリンクでそれらについて読むことができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コンテナを使用したアセンブリは次のようになります。</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">import</span> Foundation
<span class="hljs-keyword">import</span> Swinject<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Configurator</span> </span>{<font></font>
  <font></font>
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">let</span> container = <span class="hljs-type">Container</span>()<font></font>
  <font></font>
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">register</span>&lt;T&gt;<span class="hljs-params">(name: String, value: T)</span></span> {<font></font>
    container.register(type(of: value), name: name) { <span class="hljs-number">_</span> <span class="hljs-keyword">in</span> value }<font></font>
  }<font></font>
<font></font>
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">resolve</span>&lt;T&gt;<span class="hljs-params">(service: T.<span class="hljs-keyword">Type</span>, name: String)</span></span> -&gt; <span class="hljs-type">T?</span> {
    <span class="hljs-keyword">return</span> container.resolve(service, name: name)<font></font>
  }<font></font>
} <font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">extension</span> <span class="hljs-title">AccountDetail</span> </span>{<font></font>
  <font></font>
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">make</span><span class="hljs-params">(account: String)</span></span> -&gt; <span class="hljs-type">AccountDetail?</span> {<font></font>
    <font></font>
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> p1 = <span class="hljs-type">Configurator</span>.resolve(service: <span class="hljs-type">Bool</span>.<span class="hljs-keyword">self</span>, name: <span class="hljs-string">"permission1"</span>),
       <span class="hljs-keyword">let</span> p2 = <span class="hljs-type">Configurator</span>.resolve(service: <span class="hljs-type">Bool</span>.<span class="hljs-keyword">self</span>, name: <span class="hljs-string">"permission2"</span>) {
       <span class="hljs-keyword">return</span> <span class="hljs-type">AccountDetail</span>(account: account, permission1: p1, permission2: p2)<font></font>
    } <span class="hljs-keyword">else</span> {
       <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span><font></font>
    }<font></font>
  }<font></font>
}<font></font>
<font></font>
<span class="hljs-comment">// -   ,        </span>
<span class="hljs-comment">//   () </span>
<span class="hljs-type">Configurator</span>.register(name: <span class="hljs-string">"permission1"</span>, value: <span class="hljs-literal">true</span>)
<span class="hljs-type">Configurator</span>.register(name: <span class="hljs-string">"permission2"</span>, value: <span class="hljs-literal">false</span>)<font></font>
...<font></font>
<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは可能な実装例です。</font><font style="vertical-align: inherit;">この例では、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Swinject</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">フレームワークを使用して</font><font style="vertical-align: inherit;">います。</font><font style="vertical-align: inherit;">Swinjectを使用すると、自動化された依存関係管理用のコンテナーを作成できます。また、ストーリーボード用のコンテナーを作成することもできます。</font><font style="vertical-align: inherit;">Swinjectの詳細については、raywenderlichの例を</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参照</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">して</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ください</font></a><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">私はこのサイトが本当に好きですが、この例はコンテナがアプリケーションアーキテクチャ内に配置される必要がある一方で、自動テストでのみコンテナの使用を考慮しているため、最も成功しているわけではありません。</font><font style="vertical-align: inherit;">あなたのコードでは、自分でコンテナを書くことができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
みなさん、ありがとうございました。</font><font style="vertical-align: inherit;">このテキストを読んで退屈していなかったといいのですが。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja456574/index.html">最小のケーブルテレビネットワーク。パート10：KTVネットワークのトラブルシューティング</a></li>
<li><a href="../ja456578/index.html">バックエンド開発者のためのVueJSの概念-6月22日のマスタークラス</a></li>
<li><a href="../ja456580/index.html">DBMSの自律的な未来</a></li>
<li><a href="../ja456582/index.html">なぜインターネットはまだオンラインなのですか？</a></li>
<li><a href="../ja456584/index.html">＃ITX5はJAVA開発者のパーティーを開催します</a></li>
<li><a href="../ja456592/index.html">英語の「時代」の発達における認知の歪み、または誰が私たちを妨害するかが私たちを助けます</a></li>
<li><a href="../ja456594/index.html">Webpackツリーの振とうと再エクスポートで2分</a></li>
<li><a href="../ja456596/index.html">微生物相。テストはどのように機能しますか？</a></li>
<li><a href="../ja456600/index.html">Nginxレシピ：captchaによるLDAP認証</a></li>
<li><a href="../ja456602/index.html">iOSアプリケーションで自動更新サブスクリプションを実装するためのガイド</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>