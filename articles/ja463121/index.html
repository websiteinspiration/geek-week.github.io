<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👌🏿 🧗🏿 👇🏿 象を分けて食べます。アプリケーションヘルスモニタリング戦略の例 🧠 👴 👩🏾‍🤝‍👩🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="みなさん、こんにちは！
 
 当社はソフトウェア開発とその後の技術サポートを行っています。テクニカルサポートの一環として、エラーを修正するだけでなく、アプリケーションのパフォーマンスを監視する必要があります。
 
 たとえば、サービスの1つが「クラッシュ」した場合、この問題を自動的に修正して解決を開...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>象を分けて食べます。アプリケーションヘルスモニタリング戦略の例</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/463121/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">みなさん、こんにちは！</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
当社はソフトウェア開発とその後の技術サポートを行っています。</font><font style="vertical-align: inherit;">テクニカルサポートの一環として、エラーを修正するだけでなく、アプリケーションのパフォーマンスを監視する必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
たとえば、サービスの1つが「クラッシュ」した場合、この問題を自動的に修正して解決を開始する必要があり、不満のあるユーザーに対するテクニカルサポートへの電話を待たないでください。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちには小さな会社があり、アプリケーションを監視するための複雑なソリューションを研究して含めるリソースはありません。シンプルで効果的なソリューションを見つける必要がありました。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/qo/zb/np/qozbnp3tqosarppzcbttecwzpda.png"><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">モニタリング戦略</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アプリケーションのヘルスチェックを実行するのは簡単ではありません。このタスクは簡単ではなく、創造的であるとさえ言うかもしれません。</font><font style="vertical-align: inherit;">複雑なマルチリンクシステムをテストすることは特に困難です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
象を食べるには？</font><font style="vertical-align: inherit;">一部のみ！</font><font style="vertical-align: inherit;">このアプローチを使用して、アプリケーションを監視します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちの監視戦略の本質：</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アプリケーションをコンポーネントに分解します。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コンポーネントごとに、制御チェックを考え出します。</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">すべての制御チェックがエラーなしで実行された場合、コンポーネントは正常であると見なされます。すべてのコンポーネントが機能している場合、アプリケーションは正常であると見なされます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、どのシステムもコンポーネントのツリーとして表すことができます。複雑なコンポーネントは、より単純なコンポーネントに分解されます。単純なコンポーネントにはチェックがあります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ts/jj/un/tsjjunljmwoa6dex7za-zfnqvwq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
制御チェックでは機能テストを実行しないでください。これらは単体テストではありません。制御チェックは、コンポーネントが現在の瞬間にどのように感じているか、その機能に必要なすべてのリソースがあるかどうか、問題がないかどうかをチェックする必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
奇跡はありません。ほとんどのチェックは独立して開発する必要があります。</font><font style="vertical-align: inherit;">しかし、怖がらないでください。ほとんどの場合、1つのチェックに5〜10行のコードが必要ですが、任意のロジックを実装でき、チェックの動作を明確に理解できます。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">監視システム</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アプリケーションをコンポーネントに分割し、各コンポーネントのチェックを発明および実装するとしますが、これらのチェックの結果をどう処理するのでしょうか。</font><font style="vertical-align: inherit;">ある種のチェックが失敗したことをどうやって知るのですか？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
監視システムが必要です。</font><font style="vertical-align: inherit;">彼女は次のタスクを実行します。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">テスト結果を受け取り、それらからコンポーネントのステータスを判断します。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
視覚的には、コンポーネントツリーを強調表示しているように見えます。</font><font style="vertical-align: inherit;">保守可能なコンポーネントは緑色になり、問題のあるコンポーネントは赤色に変わります。</font></font><br>
</li>
<li>   « ». <br>
      .   ,   . ,         .<br>
</li>
<li>     .</li>
<li>  ,  ,   .</li>
</ul><br>
<h2>   </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
例によって最もよく説明されます。</font><font style="vertical-align: inherit;">ASMOシステムの動作の監視がどのように構成されているかを見てみましょう。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ASMOは自動気象サポートシステムです。</font><font style="vertical-align: inherit;">このシステムは、道路サービスの専門家が防氷材で道路を処理する必要がある場所と時期を理解するのに役立ちます。</font><font style="vertical-align: inherit;">システムは交通管制ポイントからデータを収集します。</font><font style="vertical-align: inherit;">道路管制点は、機器が設置されている道路上の場所です。気象ステーション、ビデオカメラなどです。</font><font style="vertical-align: inherit;">危険な状況を予測するために、システムは外部ソースから天気予報を受け取ります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/yo/wo/ib/yowoibav3w7q6pcrq4wbldp3bjw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、システムの構成は非常に典型的です：ウェブサイト、エージェント、機器。</font><font style="vertical-align: inherit;">監視を始めましょう。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">システムをコンポーネントに分割します</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ASMOシステムでは、次のコンポーネントを区別できます</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。1.個人アカウント</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
これはWebアプリケーションです。少なくとも、アプリケーションがインターネットで利用できることを確認する必要があります。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.データベースデータベース</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
には、レポートに重要なデータが格納されます。データベースのバックアップが正常に作成されていることを確認する必要があります。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.サーバー</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
サーバーとは、アプリケーションが実行されているハードウェアを指し</font><b><font style="vertical-align: inherit;">ます</font></b><font style="vertical-align: inherit;">。 HDD、RAM、CPUの状態を確認する必要があります。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.エージェント</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
これは、さまざまなスケジュールされたタスクを実行するWindowsサービスです。少なくとも、サービスが実行されていることを確認する必要があります。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.エージェントタスク</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
エージェントが機能していることを知るだけでは十分ではありません。エージェントは機能しますが、割り当てられたタスクを実行することはできません。エージェントコンポーネントをタスクに分割し、各エージェントタスクが正常に機能するかどうかを確認します。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.道路管理ポイント（すべてのMPCのコンテナー）</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
道路管理ポイントは多数あるため、すべてのMPCを1つのコンポーネントに結合します。これにより、監視データが読みやすくなります。コンポーネント「ASMOシステム」の状態を表示すると、アプリケーション、ハードウェア、またはMPCのどこに問題があるかがすぐにわかります。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.道路制御点（1つのMPC）</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
このコンポーネントは、このMPC上のすべてのデバイスが保守可能である場合、保守可能と見なされます。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8.デバイス</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
これは、MPCにインストールされているビデオカメラまたはウェザーステーションです。デバイスが正常に動作していることを確認する必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
監視システムでは、コンポーネントツリーは次のようになります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/fx/rm/ki/fxrmkikhpp6we9dhhgifttv_9k4.png"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Webアプリケーションの監視</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そのため、システムをコンポーネントに分割し、各コンポーネントのチェックを行う必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Webアプリケーションを監視するには、次のチェックを使用します</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。1.メインページの開始を確認する</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
このチェックは、監視システムによって実行されます。これを実行するには、ページアドレス、予想される応答フラグメント、および最大クエリ実行時間を指定します。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.ドメインの支払い期間</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
の確認非常に重要なチェック。支払いなしでドメインを離れると、ユーザーはサイトを開くことができません。この問題の解決には数日かかることがあります。 DNSの変更はすぐには適用されません。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. SSL証明書の検証</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
これで、ほとんどすべてのサイトがhttpsプロトコルを使用してアクセスします。プロトコルが正しく機能するためには、有効なSSL証明書が必要です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
監視システムのコンポーネント「マイアカウント」を以下に示します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/2q/ib/gu/2qibguw4p_2djjqryrp0mozkt20.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
上記のすべてのチェックは、ほとんどのアプリケーションに適しており、コードを記述する必要はありません。</font><font style="vertical-align: inherit;">5分で任意のWebアプリケーションの監視を開始できるため、これは素晴らしいことです。</font><font style="vertical-align: inherit;">以下は、Webアプリケーションに対して実行できる追加のチェックですが、それらの実装はより複雑で、アプリケーションごとに固有であるため、この記事ではそれらを分析しません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
他に何を確認できますか？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Webアプリケーションをより完全に監視するには、次のチェックを実行します。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">期間ごとのJavaScriptエラーの数</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">期間中のWebアプリケーション（バックエンド）側のエラーの数</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">失敗したWebアプリケーション応答の数（応答コード404、500など）</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">平均クエリ実行時間</font></font></li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Windowsサービスの監視（エージェント）</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ASMOシステムでは、エージェントはバックグラウンドでスケジュールされたタスクを実行するタスクスケジューラとして機能します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
エージェントのすべてのタスクが成功した場合、エージェントは正しく機能しています。エージェントを監視するには、そのタスクを監視する必要があることがわかります。したがって、エージェントコンポーネントをタスクに分割します。タスクごとに、監視システムに個別のコンポーネントを作成します。「エージェント」コンポーネントは「親」になります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
エージェントコンポーネントを子コンポーネント（タスク）に分割します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/4c/qc/tg/4cqctgxm0ynlhbmsrptau2cxdue.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、複雑なコンポーネントをいくつかの単純なコンポーネントに分割しました。次に、単純なコンポーネントごとにチェックを行う必要があります。監視システムは子コンポーネントのステータスに基づいてステータスを計算するため、親コンポーネント「エージェント」には単一のチェックがないことに注意してください。つまり、すべてのタスクが正常に完了した場合、エージェントも正常に機能します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ASMOシステムには100を超えるタスクがありますが、タスクごとに固有のチェックを行う必要がありますか？もちろん、エージェントのタスクごとに独自の特別なチェックを実装すると、制御が向上しますが、ほとんどの場合、ユニバーサルチェックを使用するだけで十分です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ASMOシステムはタスクに対してユニバーサルチェックのみを使用し、これはシステムのパフォーマンスを監視するのに十分です。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">履行</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
の</font><b><font style="vertical-align: inherit;">検証</font></b><font style="vertical-align: inherit;">最も単純で最も効果的な検証は履行の検証です。</font><font style="vertical-align: inherit;">チェックは、タスクが実行されており、エラーがないことを確認します。</font><font style="vertical-align: inherit;">すべてのタスクにこのチェックがあります。</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">検証アルゴリズム</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
各タスクの実行後、タスクが成功した場合はSUCCESS検証結果を監視システムに送信し、実行が失敗した場合はERRORを送信する必要があります。</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">このチェックにより、次の問題を検出できます。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タスクは実行されますが失敗します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タスクが実行を停止しました。たとえば、フリーズしました。</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらの問題がどのように解決されるかをさらに詳しく検討してみましょう。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">問題1-タスクは実行されるが失敗する</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
以下は、タスクが実行されるが、14：00から16:00までが失敗する場合です。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/s0/rg/8p/s0rg8pg32epl1ncyrkwuoncpxiy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この図は、タスクが失敗すると、信号がすぐに監視システムに送信され、監視システムでの対応するチェックのステータスがアラームになることを示しています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
監視システムでは、コンポーネントのステータスは検証のステータスに依存することに注意してください。チェックのアラームステータスは、すべての上位レベルのコンポーネントをアラームに変換します。以下の図を参照してください。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/fo/gl/yz/foglyzszffhzaf0mrpk_6my0jp0.png"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">問題2-タスクの実行が停止した（ハングした）タスクが停止したことを</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
監視システムはどのように理解しますか？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
チェックの結果には、1時間などの関連性のある時間が含まれます。 1時間経過しても新しいテスト結果がない場合、監視システムはスキャンにアラームステータスを設定します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/qk/sy/o7/qksyo76gplxby3hfwoxjsr3zvla.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
上の写真の14:00に、ライトがオフになりました。 15:00に、監視システムはテスト結果（14:00から）が腐っていることを検出します。関連性の期限が切れました（1時間）が、新しい結果はなく、チェックをアラームステータスに転送します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
16:00にライトが再びオンになり、プログラムがタスクを完了し、結果を監視システムに送信し、検証ステータスが再び成功になります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
チェックの有効期間はいつですか？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
関連時間は、タスクの実行期間よりも長くする必要があります。関連性の時間をタスクの期間の2〜3倍に設定することをお勧めします。これは、タスクが通常よりも長くかかったり、誰かがプログラムを再ロードしたりしたときに、誤った通知を受信しないようにするために必要です。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">進捗チェック</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ASMOシステムには「予測のダウンロード」というタスクがあり、1時間に1回、外部ソースから新しい予測をダウンロードしようとします。新しい予測が外部システムに表示される正確な時刻は不明ですが、これが1日に2回発生することがわかっています。数時間新しい予測がない場合、これは正常ですが、1日以上新しい予測がない場合、どこかで何かが壊れています。たとえば、外部の予測システムでは、ASMOが新しい予測リリースを表示しないため、データ形式が変更される場合があります。</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">検証アルゴリズム</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
タスクは、進捗状況を取得できる場合（新しい天気予報をダウンロードする場合）に、SUCCESS検証結果を監視システムに送信します。</font><font style="vertical-align: inherit;">進捗がないか、エラーが発生した場合、監視システムには何も送信されません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
監査は、この期間中に新しい進捗状況を受け取ることが保証されるように、関連性のある間隔を持つ必要があります。</font></font></blockquote><img src="https://habrastorage.org/webt/4c/oa/ot/4coaotwdujcgv41vjexohnepxv8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
監視システムは、最後のテスト結果の関連性の期限が切れるまで待機するため、遅延の問題について学習することに注意してください。</font><font style="vertical-align: inherit;">したがって、チェックの関連性の時間をあまり長くする必要はありません。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">データベース監視</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ASMOシステムのデータベースを制御するために、以下のチェックを実行します。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">バックアップを確認する</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ディスクの空き容量を確認する</font></font></li>
</ol><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">バックアップの検証</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ほとんどのアプリケーションでは、サーバーがクラッシュした場合にプログラムを新しいサーバーに展開できるように、最新のデータベースバックアップを作成することが重要です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ASMOは、週に1回、バックアップコピーを作成してリポジトリに送信します。</font><font style="vertical-align: inherit;">この手順が正常に完了すると、成功チェックの結果が監視システムに送信されます。</font><font style="vertical-align: inherit;">チェックの結果の有効期間は9日です。</font><font style="vertical-align: inherit;">それら。</font><font style="vertical-align: inherit;">バックアップの作成を制御するために、上記で検討した「進行状況を確認する」メカニズムが使用されます。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ディスクの空き容量の確認ディスクに</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
十分な空き容量がない場合、データベースは正常に動作できなくなるため、空き容量を制御することが重要です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
メトリックを使用して数値パラメータをチェックすると便利です。</font></font><br>
<blockquote><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メトリック</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は数値変数であり、その値は監視システムに渡されます。</font><font style="vertical-align: inherit;">監視システムはしきい値をチェックし、メトリックのステータスを計算します。</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下は、監視システムで「データベース」コンポーネントがどのように見えるかの写真です。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/me/k2/3i/mek23iw6yn36d1ocos5hq_3pxga.png"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サーバー監視</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
サーバーを監視するには、次のチェックと測定基準を使用します</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。1.空きディスク領域</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ディスク領域が不足すると、アプリケーションは動作しなくなります。</font><font style="vertical-align: inherit;">2つのしきい値を使用します。最初のレベルはWARNING、2番目のレベルはALARMです。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. 1時間あたりのパーセントで表したRAM</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
の平均値。1時間あたりの平均値を使用します</font><b><font style="vertical-align: inherit;">。</font></b><font style="vertical-align: inherit;">珍しい種族には興味がありません。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. 1時間あたりのパーセントで表したCPU</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
の平均値。1時間あたりの平均値を使用します</font><b><font style="vertical-align: inherit;">。</font></b><font style="vertical-align: inherit;">珍しい種族には興味がありません。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4. pingの</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
確認サーバーがネットワーク上にあることを確認します。</font><font style="vertical-align: inherit;">監視システムはこのチェックを実行できるため、コードを記述する必要はありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以下は、監視システムでの「サーバー」コンポーネントの外観です。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/pw/pp/xb/pwppxbrmsqreuojevziycqoda7q.png"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">設備監視</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
データの受信方法についてお話します。タスクスケジューラの道路制御（MPC）の各ポイントには、たとえば「Poll MPC M2 km 200」などのタスクがあります。 30分に1回のタスクは、すべてのMPCデバイスからデータを受信します。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通信チャネルの問題。</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ほとんどの機器は都市の外にあり、GSMネットワークがデータ伝送に使用されているため、安定して動作しません（つまり、存在しません）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
頻繁なネットワーク障害が原因で、モニタリングでMACポーリングを初めて確認したときは、次のようになりました。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/0e/at/me/0eatme_jcfrfkkzu8k7tkimmlpc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
問題について多くの誤った警告が受信されたため、これは有効なオプションではないことが明らかになりました。次に、各デバイスが「進行状況チェック」を使用することが決定されました。デバイスがエラーなしでポーリングされると、成功信号のみが監視システムに送信されます。関連時間は5時間に設定されました。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ql/pm/4f/qlpm4fedlrheg_dw33mb9uspvay.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
現在、監視は、デバイスが5時間以上問い合わせることに失敗した場合にのみ、問題の通知を送信します。高い確率で、これらは誤警報ではなく、実際の問題です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以下は、監視システムでの機器の外観の写真です。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/a7/o8/m1/a7o8m1fjmicudpjx9ynmepfl-jg.png"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重要！</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
GSMネットワークが機能を停止すると、すべてのMPCデバイスは問い合わせされません。</font><font style="vertical-align: inherit;">監視システムからの文字数を減らすために、エンジニアは「デバイス」ではなく「MPC」タイプのコンポーネントに関する問題の通知をサブスクライブします。</font><font style="vertical-align: inherit;">これにより、MACごとに1つの通知を受信でき、デバイスごとに個別の通知を受信できません。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最後の監視スキームASMO</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それをすべてまとめて、どのような監視スキームがあるか見てみましょう。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/b7/1l/nr/b71lnrqwuh-gv2boh9pbd7uao3y.png"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">結論</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まとめましょう。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ASMOのパフォーマンスの監視から何が得られましたか？</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.欠陥の修正にかかる時間が短縮された</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
以前は、ユーザーから欠陥について学びましたが、すべてのユーザーが欠陥を報告するわけではありません。偶然、システムのコンポーネントが機能しなくなってから1週間後にシステムの不具合が判明しました。問題が検出されるとすぐに、監視システムから問題が通知されます。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.システムの安定性が向上し、</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
不具合が早期に解消され始めたため、システム全体としての安定性が大幅に向上しました。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.テクニカルサポートコールの数を減らす</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
多くの問題は、ユーザーが知る前に解決されるようになりました。ユーザーがテクニカルサポートに連絡する可能性は低くなります。これらすべてが私たちの評判に良い影響を与えます。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.顧客とユーザーの忠誠度の増加：顧客</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
は、システムの安定性に前向きな変化を感じました。ユーザーはシステムで問題が発生する可能性が低くなります。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.テクニカルサポートのコストの削減：</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
手動によるチェックの実行を停止しました。これで、すべてのチェックが自動化されました。以前はユーザーから問題について学びましたが、ユーザーが話している問題を理解することはしばしば困難でした。現在、ほとんどの問題は監視システムによって報告されており、通知には技術データが含まれているため、どこでどこで問題が発生したかは常に明確です。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重要！</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アプリケーションが実行されているのと同じサーバーに監視システムをインストールすることはできません。</font><font style="vertical-align: inherit;">サーバーがクラッシュした場合、アプリケーションは動作を停止し、これに関する通知を送信するユーザーがなくなります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
監視システムは、別のデータセンターの別のサーバーで動作する必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
新しいデータセンターで専用サーバーを使用したくない場合は、クラウド監視システムを使用できます。</font><font style="vertical-align: inherit;">当社ではZidiumクラウド監視システムを使用していますが、他の監視システムを使用することもできます。</font><font style="vertical-align: inherit;">クラウド監視システムのコストは、新しいサーバーを借りるよりも低くなります。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">推奨事項：</font></font></b><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンポーネントツリーの形式でアプリケーションとシステムをできる限り詳細に分割するので、どこで何が破損しているかを理解すると便利であり、制御はより完全になります。</font></font></li>
<li>     .     ,   .</li>
<li>       ,     .     ,    .</li>
<li>       ,      - ,  -    ,  .</li>
<li>  ,         ,    .       ,         ,    .</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まだモニタリングシステムを使用していない場合は、開始してください。</font><font style="vertical-align: inherit;">見た目ほど難しくはありません。</font><font style="vertical-align: inherit;">自分で成長させたコンポーネントの緑の木を見て、高くなります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
幸運を。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja463105/index.html">Haikuでの4日目：インストールとブートの問題</a></li>
<li><a href="../ja463107/index.html">ShIoTiny：小さな自動化、モノのインターネット、または「休暇の6か月前」</a></li>
<li><a href="../ja463113/index.html">Computer Vision Meetupのデータとモデルのバージョン管理</a></li>
<li><a href="../ja463115/index.html">シューティングゲームデザインのドアの問題</a></li>
<li><a href="../ja463117/index.html">PHP 7.4でのプリロード</a></li>
<li><a href="../ja463123/index.html">AVRマイクロコントローラー用のアセンブラーコードジェネレーターライブラリ。パート3</a></li>
<li><a href="../ja463125/index.html">写真のOOP</a></li>
<li><a href="../ja463127/index.html">UPSモニタリング。パート2-分析の自動化</a></li>
<li><a href="../ja463135/index.html">2019年にIT企業を登録することが収益を上げているのはどの国ですか？</a></li>
<li><a href="../ja463137/index.html">あなたがゲームデザイナーになりたいとしても、誰もあなたに方法を教えることはありません</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>