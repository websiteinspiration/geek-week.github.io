<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßïüèø üí¥ üë©üèº‚Äçüåæ L'architecture native React repens√©e en 2020 ‚ôìÔ∏è üóÑÔ∏è üéÆ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Le cadre React Native (RN) est apparu en 2015. Il est con√ßu pour d√©velopper des applications mobiles multiplateformes √† l'aide de la biblioth√®que Reac...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>L'architecture native React repens√©e en 2020</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/505540/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le cadre React Native (RN) est apparu en 2015. Il est con√ßu pour d√©velopper des applications mobiles multiplateformes √† l'aide de la biblioth√®que React. Ces applications prennent en charge les capacit√©s natives des plates-formes pour lesquelles elles sont cr√©√©es. L'architecture originale de React Native avait certains d√©fauts. Mais malgr√© cela, RN a re√ßu un bon soutien de la communaut√©, sa popularit√© augmentait progressivement, notamment - gr√¢ce √† la r√©putation de React.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/ka/ai/2b/kaai2bun5gnxmt-soerdq3iyzj8.png"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le projet d'architecture React Native a √©t√© √©voqu√© en 2018. </font><font style="vertical-align: inherit;">Ce travail est effectu√© par l'√©quipe Facebook. </font><font style="vertical-align: inherit;">La refonte a pour but de rendre le cadre plus stable et de r√©soudre les probl√®mes les plus courants qui se sont accumul√©s dans la RN au cours des ann√©es de d√©veloppement. </font><font style="vertical-align: inherit;">Le mat√©riel, dont nous publions la traduction aujourd'hui, est consacr√© √† l'examen de la fa√ßon dont le traitement de l'architecture RN peut am√©liorer les performances des applications et la vitesse des programmeurs.</font></font><br>
<a name="habracut"></a><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Architecture ancienne</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
React Native est un exemple de solution qui peut √™tre appel√©e ind√©pendante de la plateforme. </font><font style="vertical-align: inherit;">En cons√©quence, il s'av√®re que l'objectif principal du cadre est de permettre aux d√©veloppeurs d'√©crire du code JavaScript √† l'aide des m√©canismes React. </font><font style="vertical-align: inherit;">L'objectif de React Native est de transformer l'arborescence des composants React en quelque chose qui fonctionnera sur diverses plates-formes mobiles. </font><font style="vertical-align: inherit;">Cela signifie ce qui suit:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Formation d'interface correcte.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fournir l'acc√®s aux capacit√©s natives de diverses plates-formes.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En r√®gle g√©n√©rale, dans les √©cosyst√®mes Android / iOS, le m√©canisme utilis√© pour accomplir ces t√¢ches ressemble √† la figure suivante.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/eb7/270/553/eb7270553b52c21de9acda19fe7b7891.jpg"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Architecture React Native existante ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">source</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Dans chaque application React Native, les trois threads suivants s'ex√©cutent en parall√®le:</font></font><br>
<br>
<ul>
<li> JS.  ‚Äî ,       JavaScript-.       .  Metro   JS-   ,    JSX-  TS-.      JavaScriptCore,       .</li>
<li> Native.     .     JavaScript- ,         .       . , Native UI,       . , Native Modules,      ,    .       .  , ,  React Native  Bluetooth-,    ,    ,  ,   ,  .</li>
<li> Shadow.      .    Yoga,    Facebook.     ,     .     ,    .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour organiser l'interaction entre JS et les threads natifs, le module Bridge est utilis√©. Ce module est √©crit en C ++ et est bas√© sur une file d'attente asynchrone. Lorsqu'un pont re√ßoit des donn√©es de l'une des parties, il s√©rialise ces donn√©es, les convertit sous forme de cha√Æne et les transmet √† la file d'attente. Lorsque les donn√©es arrivent √† destination, elles sont d√©s√©rialis√©es. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cela signifie que tous les threads reposent sur des messages JSON asynchrones envoy√©s sur le pont. Chaque partie envoie ces messages, s'attendant (mais sans garantie) qu'√† un moment donn√© √† l'avenir, ces messages recevront une r√©ponse. Avec ce sch√©ma d'√©change de donn√©es, il existe un risque de surcharge du canal de communication.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voici un exemple qui est g√©n√©ralement donn√© pour illustrer comment un tel sch√©ma d'√©change de donn√©es peut entra√Æner des probl√®mes avec les performances des applications. Supposons qu'un utilisateur d'application fasse d√©filer une √©norme liste. Lorsque l'√©v√©nement onScroll se produit dans l'environnement natif, les informations sont transmises de mani√®re asynchrone √† l'environnement JavaScript. Mais les m√©canismes natifs n'attendent pas que la partie JavaScript de l'application fasse son travail et leur en fasse rapport. De ce fait, il y a un d√©lai, exprim√© dans l'apparition dans la liste, avant d'afficher son contenu, un espace vide.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De m√™me, avant que les r√©sultats du recalcul de la disposition n'atteignent l'√©cran, le syst√®me doit effectuer plusieurs sessions d'√©change de donn√©es. </font><font style="vertical-align: inherit;">Ainsi, avant que les donn√©es de mise en page ne p√©n√®trent dans l'environnement natif, elles doivent √™tre trait√©es dans Yoga. </font><font style="vertical-align: inherit;">Et cela, bien s√ªr, signifie que ces donn√©es doivent √©galement √™tre transmises via le pont. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme vous pouvez le voir, l'envoi de donn√©es JSON √† l'aide de m√©canismes asynchrones, ainsi que la s√©rialisation et la d√©s√©rialisation de ces donn√©es, entra√Ænent des probl√®mes de performances. </font><font style="vertical-align: inherit;">Ce m√©canisme est imparfait. </font><font style="vertical-align: inherit;">Mais comment pouvez-vous interagir autrement entre les m√©canismes natifs et JavaScript? </font><font style="vertical-align: inherit;">Vous pouvez r√©pondre √† cette question en utilisant la technologie JSI.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nouvelle architecture</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lors de la refonte de l'architecture React Native, les fonctions du pont sont progressivement supprim√©es, remplac√©es par un nouveau m√©canisme appel√© l'interface JavaScript (JSI). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'utilisation de JSI ouvre de grandes am√©liorations. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La premi√®re am√©lioration de ce type est que le bundle JS ne repose plus sur JSC. En d'autres termes, le moteur JSC peut maintenant √™tre facilement remplac√© par quelque chose d'autre, offrant tr√®s probablement des performances plus √©lev√©es. Par exemple - au moteur V8.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La deuxi√®me am√©lioration est √† la base de la nouvelle architecture React Native. Il r√©side dans le fait que, gr√¢ce √† l'utilisation de JSI, en JavaScript, vous pouvez stocker des liens vers des objets C ++ (Host Objects) et appeler des m√©thodes de ces objets. En cons√©quence, il s'av√®re que la partie JavaScript de l'application et les m√©canismes natifs se conna√Ætront plus qu'avant. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En d'autres termes, JSI permet une interaction compl√®te entre tous les threads. En utilisant le concept de propri√©t√© partag√©e, le code JavaScript peut ex√©cuter des m√©thodes natives directement √† partir du flux JS. Il n'est pas n√©cessaire d'utiliser JSON pour transf√©rer des donn√©es. Cela vous permet de vous d√©barrasser des probl√®mes sp√©cifiques √† l'utilisation du pont associ√©s aux d√©bordements de file d'attente possibles et au transfert de donn√©es asynchrone.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/34e/2fa/1bd/34e2fa1bdca25d1f878ee5295033dab2.jpg"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nouvelle architecture native React ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">source</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
En plus du fait que le sch√©ma ci-dessus am√©liore consid√©rablement l'interaction entre les diff√©rents threads, la nouvelle architecture permet √©galement un contr√¥le direct des modules natifs. </font><font style="vertical-align: inherit;">Cela signifie que les modules natifs peuvent √™tre utilis√©s √† ce moment-l√†, ils sont alors n√©cessaires et ne pas tous les initialiser au d√©marrage de l'application. </font><font style="vertical-align: inherit;">Cela conduit √† une s√©rieuse augmentation de la vitesse de lancement des applications. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ce nouveau m√©canisme peut ouvrir la voie au d√©veloppement de nouveaux projets capables de ce qui n'√©tait pas disponible pour les anciennes applications RN. </font><font style="vertical-align: inherit;">Le fait est que nous disposions d√©sormais de la puissance du C ++. </font><font style="vertical-align: inherit;">Cela signifie que sur la base de React Native, il sera d√©sormais possible de cr√©er beaucoup plus de vari√©t√©s d'applications qu'auparavant.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sommaire</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Au fil des ann√©es de d√©veloppement, de nombreuses choses se sont accumul√©es dans l'infrastructure React Native qui peuvent aujourd'hui √™tre consid√©r√©es comme obsol√®tes et inutilis√©es. Le d√©sir des d√©veloppeurs RN d'en supprimer inutilement et d'am√©liorer la capacit√© de le prendre en charge, conduit √† la suppression de certaines de ses capacit√©s. Par exemple, nous parlons du fait que ses modules de noyau, tels que Webview et AsyncStorage, sont progressivement supprim√©s du framework et constitu√©s en r√©f√©rentiels d√©velopp√©s par la communaut√© React Native. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gr√¢ce au nouveau noyau compact et aux impressionnants m√©canismes d'interaction entre le code JavaScript et le code natif, la refonte de l'architecture React Native devrait conduire au fait que les applications RN deviendront plus productives, et qu'elles seront plus rapides et plus pratiques √† d√©velopper.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La restructuration de React Native devrait s'achever au quatri√®me trimestre 2020. </font><font style="vertical-align: inherit;">Je suis ravi des perspectives sur les performances et la convivialit√© des applications qui accompagnent la refonte de l'architecture RN. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous utilisez React Native, parlez-nous des lacunes de ce framework que vous avez rencontr√©es.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/gu/ab/cg/guabcgmwuqoopx1ar80sjpz6keq.png"></a> <br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/de/0y/l-/de0yl-6ppopvisr_a80b4yuhjj8.png"></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr505522/index.html">Mon√©tisation dans les jeux en ligne: comment utiliser l'exp√©rience de quelqu'un d'autre pour vos propres besoins</a></li>
<li><a href="../fr505528/index.html">La chose la plus importante dans le Wi-Fi 6. Non, s√©rieusement</a></li>
<li><a href="../fr505530/index.html">Google fabrique son processeur et AMD s'appr√™te √† d√©truire Qualcomm</a></li>
<li><a href="../fr505532/index.html">Cha√Ænes de t√©l√©gramme sur le d√©veloppement de jeux: partie 2</a></li>
<li><a href="../fr505536/index.html">Comment cuisiner le suivi des appels: l'exp√©rience cyan</a></li>
<li><a href="../fr505546/index.html">Flutter et d√©veloppement de bureau</a></li>
<li><a href="../fr505548/index.html">Sans inscription et SMS: sites ¬´socialement significatifs¬ª et liste du minist√®re des Affaires num√©riques</a></li>
<li><a href="../fr505554/index.html">Au Concours ¬´Jeunes Techniciens et Inventeurs¬ª, les vrais jeunes inventeurs ne sont pas n√©cessaires</a></li>
<li><a href="../fr505556/index.html">Apple suit les iPhones pill√©s et donne des pillards √† la police</a></li>
<li><a href="../fr505558/index.html">Amazon DeepLens Deep Learning Camera. D√©ballage, connexion et d√©ploiement d'un projet</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>