<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏼‍🚒 🌽 🍅 Reduxと組み合わせてFlutterでアプリケーションを作成します 🍵 ⤵️ 💢</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="みなさん、こんにちは！この記事では、Reduxを使用してFlutterアプリケーションを作成する方法を紹介します。Flutterがわからない場合、これはGoogleからモバイルアプリケーションを作成するためのオープンソースSDKです。これは、AndroidおよびiOS向けのアプリケーションを開発する...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Reduxと組み合わせてFlutterでアプリケーションを作成します</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/481624/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/xp/kq/1p/xpkq1phvyqjcztfqddbiedcjijw.jpeg" alt="画像"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
みなさん、こんにちは！</font><font style="vertical-align: inherit;">この記事では、Reduxを使用してFlutterアプリケーションを作成する方法を紹介します。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Flutterが</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">わからない場合</font><font style="vertical-align: inherit;">、これはGoogleからモバイルアプリケーションを作成するためのオープンソースSDKです。</font><font style="vertical-align: inherit;">これは、AndroidおよびiOS向けのアプリケーションを開発するために使用され、Google Fuchsia向けのアプリケーションを開発するための唯一の方法でもあります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Flutterに精通しており、うまく設計され、テストが簡単で、予測可能な動作が可能なアプリケーションを作成したい場合は、この記事を読み続けるとすぐにわかります！</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、アプリケーション自体の記述を始める前に。</font><font style="vertical-align: inherit;">理論に少し慣れてみましょう。Reduxとは何かを説明することから始めましょう。</font></font><br>
<a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Reduxとは何ですか？</font></font></h3><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Redux</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は元々JavaScript言語用に作成されたアーキテクチャであり、</font></font><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リアクティブフレームワーク</font></font></b></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（React NativeやFlutterなど）</font><font style="vertical-align: inherit;">を使用して作成されたアプリケーションで使用されます</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">ReduxはFacebookによって作成されたFluxアーキテクチャの簡易バージョンです。</font><font style="vertical-align: inherit;">基本的に、次の3つのことを知っておく必要があります。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">唯一の信頼できる情報源- </font><font style="vertical-align: inherit;">アプリケーションの</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">状態</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全体が</font><font style="vertical-align: inherit;">1か所（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ストア</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と呼ばれる</font><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">にのみ保存されます</font><font style="vertical-align: inherit;">。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">状態は読み取り専用/状態は読み取り専用-アプリケーションの状態を変更するには、アクション（アクション）を送信する必要があります。その後、新しい状態が作成されます</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">変更は、純粋な関数/純粋な関数を使用して行われます-純粋な関数（簡単にするために、副作用のない関数です）は、現在の状態のアプリケーションとアクションを受け入れ、アプリケーションの新しい状態を返します</font></font></li>
</ol><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注：</font></font></b> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">関数の副作用は、その計算を実行するプロセスにおける機能です。グローバル変数の値を読み取り、変更し、I / O操作を実行し、例外的な状況に応答し、それらのハンドラーを呼び出すことができます。</font><font style="vertical-align: inherit;">同じ入力引数値のセットで副作用のある関数を2回呼び出すと、異なる値が結果として返されることがあります。</font><font style="vertical-align: inherit;">このような関数は、副作用のある非決定的関数と呼ばれます。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
クールに聞こえますが、このソリューションの利点は何ですか？</font></font><br>
<br>
<ul>
<li>     <b>state/</b> —  ,    ,    ,     ,        </li>
<li><b>Reducer</b>       —    state, action    ,  </li>
<li>   —       actions, models, -  . . —     ,      <i></i></li>
<li>       —     state     view    </li>
<li>    ...</li>
</ul><br>
<h3>Redux Time Travel</h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Reduxには興味深い機会が1つあります。タイムトラベルです。</font><font style="vertical-align: inherit;">Reduxと関連ツールを使用すると、アプリケーションの状態を経時的に追跡し、実際の状態を確認して、いつでも再作成できます。</font><font style="vertical-align: inherit;">この機能の動作をご覧ください。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e4c/d8e/168/e4cd8e16824e262401b8c2f7fae2a181.gif" alt="画像"></div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">簡単な例でのウィジェットのRedux</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
上記のルールはすべて、Reduxでのデータフローを一方向にします。</font><font style="vertical-align: inherit;">しかし、これはどういう意味ですか？</font><font style="vertical-align: inherit;">実際には、これはすべて</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">action</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">reducer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">store</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、および</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">state</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用して行われ</font><b><font style="vertical-align: inherit;">ます</font></b><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">カウンターを表示するアプリケーションを想像してみましょう：</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/871/eb8/5e8/871eb85e8a5a12340a0b03d81ada4635.png" alt="画像"></div><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アプリケーションの</font><font style="vertical-align: inherit;">起動時に</font><font style="vertical-align: inherit;">特定の</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">状態</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（クリック数、0）がある</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">この状態に基づいて、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ビューが</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">レンダリングされます</font><font style="vertical-align: inherit;">。</font></font></li>
<li>    ,   <b>action</b> (, IncrementCounter)</li>
<li>  <i>action</i>  <b>reducer</b>,    <i>state</i> ( 0),   <i>action</i> (IncrementCounter)     <b>state</b> (   1)</li>
<li>    <b>state/</b> (  1)</li>
<li>   <b>state</b>,  <b>view</b>,      state/</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ご覧のとおり、通常はすべて</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">状態</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。</font><font style="vertical-align: inherit;">すべてのアプリケーションの</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">状態が</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">あり</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、読み取り専用のみ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を示し、新しい</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">状態</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を作成する</font><font style="vertical-align: inherit;">に</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、アクション</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を送信する必要があります</font><font style="vertical-align: inherit;">。</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アクション</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">送信</font><font style="vertical-align: inherit;">すると、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">レデューサー</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が起動し</font><font style="vertical-align: inherit;">、新しい</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">状態</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が作成され</font><font style="vertical-align: inherit;">て</font><b><font style="vertical-align: inherit;">Google</font></b><font style="vertical-align: inherit;">に戻ります</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">そして、物語は繰り返されます。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/abd/064/a28/abd064a286704f7c441d19257ed8a390.png" alt="画像"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それでも、小さなアプリケーションを作成して、実際のReduxアプローチの実装を詳しく</font><font style="vertical-align: inherit;">
見てみましょ</font><font style="vertical-align: inherit;">う。アプリケーションは「</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ショッピングリスト</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">」</font><font style="vertical-align: inherit;">と呼ばれ、</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">実際のReduxの動作を確認します。</font><font style="vertical-align: inherit;">簡単なShoppingCartアプリを作成します。</font><font style="vertical-align: inherit;">アプリケーションには次のような機能があります。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">購入を追加する</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">購入済みとしてマークすることが可能になります</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">そして、それは基本的にすべてです </font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アプリケーションは次のようになります。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/85c/b09/372/85cb09372a6f1e4fa72817ab2f2f855a.png" alt="画像"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コードを書き始めましょう！ </font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">前提条件</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この記事では、このアプリケーションのユーザーインターフェイスの作成については説明しません。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Reduxダイビングに進む前に、私が用意したコードをよく理解してください</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">その後、引き続きコードを記述</font><font style="vertical-align: inherit;">し、現在のアプリケーションに</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Redux</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">追加し</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注：</font></font></b> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これまでFlutterを使用したことがない場合は</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、GoogleのFlutter Codelabs</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を試すことをお勧めします</font><font style="vertical-align: inherit;">。</font></font></i><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">事前準備</font></font></h3><br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Redux</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> for Flutterの</font><font style="vertical-align: inherit;">
使用を開始</font><font style="vertical-align: inherit;">するには、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pubspec.yaml</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ファイルに依存関係を追加する必要があります</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="swift hljs">flutter_redux: ^<span class="hljs-number">0.5</span>.<span class="hljs-number">2</span></code></pre><br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">flutter_redux</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ページに</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">移動</font></a><font style="vertical-align: inherit;">して、この依存関係の現在のバージョンを確認することもできます</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">執筆時点では、バージョンはflutter_redux 0.6.0でした。</font></font></i><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">型番</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アプリケーションは要素の追加と変更を制御できる必要があるため、単純な</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CartItem</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">モデル</font><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">使用して</font><font style="vertical-align: inherit;">1つの要素の状態を保存します。</font><font style="vertical-align: inherit;">アプリケーションのすべての状態は、単にCartItemsのリストになります。</font><font style="vertical-align: inherit;">ご覧のとおり、CartItemは単なるオブジェクトです。</font></font><br>
<br>
<pre><code class="swift hljs">
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CartItem</span> </span>{
  <span class="hljs-type">String</span> name;<font></font>
  bool checked;<font></font>
<font></font>
  <span class="hljs-type">CartItem</span>(this.name, this.checked);<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まず、アクションを宣言する必要があります。</font><font style="vertical-align: inherit;">アクションは基本的に、アプリケーションの状態を変更するために呼び出すことができるあらゆる意図です。</font><font style="vertical-align: inherit;">本質的に、要素を追加および変更するための2つのアクションがあります。</font></font><br>
<br>
<pre><code class="swift hljs">
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AddItemAction</span> </span>{
  <span class="hljs-keyword">final</span> <span class="hljs-type">CartItem</span> item;<font></font>
<font></font>
  <span class="hljs-type">AddItemAction</span>(this.item);<font></font>
}<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ToggleItemStateAction</span> </span>{
  <span class="hljs-keyword">final</span> <span class="hljs-type">CartItem</span> item;<font></font>
<font></font>
  <span class="hljs-type">ToggleItemStateAction</span>(this.item);<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、これらの</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アクションを</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">どうするかをアプリケーションに指示する必要があります</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">そのため、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">レデューサー</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が</font><font style="vertical-align: inherit;">使用されます。</font><i><font style="vertical-align: inherit;">レデューサー</font></i><font style="vertical-align: inherit;">は、アプリケーションの現在の状態とアクション（アプリケーションの状態とアクション）を取得し、新しい状態を作成して返します。</font><font style="vertical-align: inherit;">2つの</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">レデューサー</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メソッドがあります。</font></font><br>
<br>
<pre><code class="swift hljs">
<span class="hljs-type">List</span>&lt;<span class="hljs-type">CartItem</span>&gt; appReducers(<span class="hljs-type">List</span>&lt;<span class="hljs-type">CartItem</span>&gt; items, <span class="hljs-keyword">dynamic</span> action) {
  <span class="hljs-keyword">if</span> (action <span class="hljs-keyword">is</span> <span class="hljs-type">AddItemAction</span>) {
    <span class="hljs-keyword">return</span> addItem(items, action);<font></font>
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (action <span class="hljs-keyword">is</span> <span class="hljs-type">ToggleItemStateAction</span>) {
    <span class="hljs-keyword">return</span> toggleItemState(items, action);<font></font>
  } <font></font>
  <span class="hljs-keyword">return</span> items;<font></font>
}<font></font>
<font></font>
<span class="hljs-type">List</span>&lt;<span class="hljs-type">CartItem</span>&gt; addItem(<span class="hljs-type">List</span>&lt;<span class="hljs-type">CartItem</span>&gt; items, <span class="hljs-type">AddItemAction</span> action) {
  <span class="hljs-keyword">return</span> <span class="hljs-type">List</span>.from(items)..add(action.item);<font></font>
}<font></font>
<font></font>
<span class="hljs-type">List</span>&lt;<span class="hljs-type">CartItem</span>&gt; toggleItemState(<span class="hljs-type">List</span>&lt;<span class="hljs-type">CartItem</span>&gt; items, <span class="hljs-type">ToggleItemStateAction</span> action) {
  <span class="hljs-keyword">return</span> items.<span class="hljs-built_in">map</span>((item) =&gt; item.name == action.item.name ?<font></font>
    action.item : item).toList();<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">appReducers（）</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
メソッド</font><font style="vertical-align: inherit;">は、アクションを適切なメソッドに委任します。</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">addItem（）</font></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メソッド</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font><i><font style="vertical-align: inherit;">toggleItemState（）メソッドは</font></i><font style="vertical-align: inherit;">どちらも</font><font style="vertical-align: inherit;">新しいリストを返します。これが新しい状態です。</font><font style="vertical-align: inherit;">ご覧のとおり</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、現在のリストは変更しないでください</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">代わりに、毎回新しいリストを作成します。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">StoreProvider</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
今、私たちが持っている</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アクション</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">や</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">レデューサーを</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、私たちは、格納する場所を提供する必要がある</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アプリケーションの状態を</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">Reduxでは、それは</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ストア</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font><font style="vertical-align: inherit;">呼ば</font><font style="vertical-align: inherit;">れ、アプリケーションの唯一の</font><font style="vertical-align: inherit;">信頼</font><font style="vertical-align: inherit;">できる情報源です。</font></font><br>
<br>
<pre><code class="swift hljs"><font></font>
void main() {<font></font>
  <span class="hljs-keyword">final</span> store = new <span class="hljs-type">Store</span>&lt;<span class="hljs-type">List</span>&lt;<span class="hljs-type">CartItem</span>&gt;&gt;(<font></font>
      appReducers,<font></font>
      initialState: new <span class="hljs-type">List</span>());<font></font>
<font></font>
  runApp(new <span class="hljs-type">FlutterReduxApp</span>(store));<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ストア</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
を作成する</font><font style="vertical-align: inherit;">には、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">reducers</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メソッド</font><font style="vertical-align: inherit;">と初期</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">状態</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を渡す必要があり</font><font style="vertical-align: inherit;">ます。</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ストア</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を作成した場合は</font><font style="vertical-align: inherit;">、それを</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">StoreProvider</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に</font><font style="vertical-align: inherit;">渡して</font><b><font style="vertical-align: inherit;">、</font></b><font style="vertical-align: inherit;">アプリケーションの</font><font style="vertical-align: inherit;">現在の</font><b><font style="vertical-align: inherit;">状態</font></b><font style="vertical-align: inherit;">を要求したい人なら誰でも</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ストア</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用できることを</font><font style="vertical-align: inherit;">アプリケーションに通知する必要</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">があり</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<pre><code class="swift hljs">
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FlutterReduxApp</span> <span class="hljs-title">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{
  <span class="hljs-keyword">final</span> <span class="hljs-type">Store</span>&lt;<span class="hljs-type">List</span>&lt;<span class="hljs-type">CartItem</span>&gt;&gt; store;<font></font>
<font></font>
  <span class="hljs-type">FlutterReduxApp</span>(this.store);<font></font>
<font></font>
  @<span class="hljs-keyword">override</span>
  <span class="hljs-type">Widget</span> build(<span class="hljs-type">BuildContext</span> context) {
    <span class="hljs-keyword">return</span> new <span class="hljs-type">StoreProvider</span>&lt;<span class="hljs-type">List</span>&lt;<span class="hljs-type">CartItem</span>&gt;&gt;(<font></font>
      store: store,<font></font>
      child: new <span class="hljs-type">ShoppingCartApp</span>(),<font></font>
    );<font></font>
  }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
上記の例では、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ShoppingCartApp（</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）がアプリケーションのメインウィジェットです。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">StoreConnector</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
現在、購入するアイテムを実際に追加および変更する以外はすべて揃っています。</font><font style="vertical-align: inherit;">どうやってするの？</font><font style="vertical-align: inherit;">これを可能にするには、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">StoreConnector</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用する必要があります</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">これは、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ストア</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を取得して</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アクション</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を送信</font><font style="vertical-align: inherit;">する方法、</font><font style="vertical-align: inherit;">または現在の</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">状態</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を取得する方法</font><font style="vertical-align: inherit;">です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まず、現在のデータを取得し、画面にリストとして表示します。</font></font><br>
<br>
<pre><code class="swift hljs">
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ShoppingList</span> <span class="hljs-title">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{<font></font>
  @<span class="hljs-keyword">override</span>
  <span class="hljs-type">Widget</span> build(<span class="hljs-type">BuildContext</span> context) {
    <span class="hljs-keyword">return</span> new <span class="hljs-type">StoreConnector</span>&lt;<span class="hljs-type">List</span>&lt;<span class="hljs-type">CartItem</span>&gt;, <span class="hljs-type">List</span>&lt;<span class="hljs-type">CartItem</span>&gt;&gt;(<font></font>
      converter: (store) =&gt; store.state,<font></font>
      builder: (context, list) {<font></font>
        <span class="hljs-keyword">return</span> new <span class="hljs-type">ListView</span>.builder(<font></font>
            itemCount: list.length,<font></font>
            itemBuilder: (context, position) =&gt;<font></font>
                new <span class="hljs-type">ShoppingListItem</span>(list[position]));<font></font>
      },<font></font>
    );<font></font>
  }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
上記のコード</font><font style="vertical-align: inherit;">は、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ListView.builder</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">StoreConnectorで</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ラップ</font><font style="vertical-align: inherit;">してい</font><i><font style="vertical-align: inherit;">ます</font></i><font style="vertical-align: inherit;">。</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">StoreConnector</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は現在の</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">状態</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（アイテムのリスト</font><i><font style="vertical-align: inherit;">）を</font></i><font style="vertical-align: inherit;">受け入れることができ</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">マップ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">関数</font><font style="vertical-align: inherit;">を使用してそれを何にでも変換できます。しかし、</font><font style="vertical-align: inherit;">ここでは買い物リストが必要なので</font><font style="vertical-align: inherit;">、この場合は同じ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">状態</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（リスト）になります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ビルダー</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">関数で</font><font style="vertical-align: inherit;">リストを取得します。これは基本的</font><font style="vertical-align: inherit;">に</font><b><font style="vertical-align: inherit;">ストア</font></b><font style="vertical-align: inherit;">から</font><font style="vertical-align: inherit;">の</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CartItemsの</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リストであり</font><font style="vertical-align: inherit;">、これを使用して</font><b><font style="vertical-align: inherit;">ListView</font></b><font style="vertical-align: inherit;">を作成できます</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">
わかりました。データがあります。では、データを設定するにはどうすればよいですか？</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
      <i>StoreConnector</i>,   -.<br>
<br>
<pre><code class="swift hljs">
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AddItemDialog</span> <span class="hljs-title">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{<font></font>
  @<span class="hljs-keyword">override</span>
  <span class="hljs-type">Widget</span> build(<span class="hljs-type">BuildContext</span> context) {
    <span class="hljs-keyword">return</span> new <span class="hljs-type">StoreConnector</span>&lt;<span class="hljs-type">List</span>&lt;<span class="hljs-type">CartItem</span>&gt;, <span class="hljs-type">OnItemAddedCallback</span>&gt;(<font></font>
        converter: (store) {<font></font>
      <span class="hljs-keyword">return</span> (itemName) =&gt;<font></font>
          store.dispatch(<span class="hljs-type">AddItemAction</span>(<span class="hljs-type">CartItem</span>(itemName, <span class="hljs-literal">false</span>)));<font></font>
    }, builder: (context, callback) {<font></font>
      <span class="hljs-keyword">return</span> new <span class="hljs-type">AddItemDialogWidget</span>(callback);<font></font>
    });<font></font>
  }<font></font>
}typedef <span class="hljs-type">OnItemAddedCallback</span> = <span class="hljs-type">Function</span>(<span class="hljs-type">String</span> itemName);
</code></pre><br>
   .    <i>StoreConnector</i>,     ,        <i>CartItems</i>    ,      <b>map</b>  <i>OnItemAddedCallback</i>.  ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">  </a>  <i>AddItemDialogWidget</i>   ,      :<br>
<br>
<pre><code class="swift hljs">
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AddItemDialogWidgetState</span> <span class="hljs-title">extends</span> <span class="hljs-title">State</span>&lt;<span class="hljs-title">AddItemDialogWidget</span>&gt; </span>{
  <span class="hljs-type">String</span> itemName;<font></font>
<font></font>
  <span class="hljs-keyword">final</span> <span class="hljs-type">OnItemAddedCallback</span> callback;
  <span class="hljs-type">AddItemDialogWidgetState</span>(this.callback);<font></font>
<font></font>
  @<span class="hljs-keyword">override</span>
  <span class="hljs-type">Widget</span> build(<span class="hljs-type">BuildContext</span> context) {
    <span class="hljs-keyword">return</span> new <span class="hljs-type">AlertDialog</span>(<font></font>
      ...<font></font>
      actions: &lt;<span class="hljs-type">Widget</span>&gt;[<font></font>
        ...<font></font>
        new <span class="hljs-type">FlatButton</span>(<font></font>
            child: const <span class="hljs-type">Text</span>('<span class="hljs-type">ADD'</span>),<font></font>
            onPressed: () {<font></font>
              ...<font></font>
              callback(itemName);<font></font>
            })<font></font>
      ],<font></font>
    );<font></font>
  }<font></font>
}<font></font>
</code></pre><br>
  ,     «ADD»,     <b>action</b> <i>AddItemAction()</i>.<br>
<br>
          .<br>
<br>
<pre><code class="swift hljs">
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ShoppingListItem</span> <span class="hljs-title">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{
  <span class="hljs-keyword">final</span> <span class="hljs-type">CartItem</span> item;<font></font>
<font></font>
  <span class="hljs-type">ShoppingListItem</span>(this.item);<font></font>
<font></font>
  @<span class="hljs-keyword">override</span>
  <span class="hljs-type">Widget</span> build(<span class="hljs-type">BuildContext</span> context) {
    <span class="hljs-keyword">return</span> new <span class="hljs-type">StoreConnector</span>&lt;<span class="hljs-type">List</span>&lt;<span class="hljs-type">CartItem</span>&gt;, <span class="hljs-type">OnStateChanged</span>&gt;(<font></font>
        converter: (store) {<font></font>
      <span class="hljs-keyword">return</span> (item) =&gt; store.dispatch(<span class="hljs-type">ToggleItemStateAction</span>(item));<font></font>
    }, builder: (context, callback) {<font></font>
      <span class="hljs-keyword">return</span> new <span class="hljs-type">ListTile</span>(<font></font>
        title: new <span class="hljs-type">Text</span>(item.name),<font></font>
        leading: new <span class="hljs-type">Checkbox</span>(<font></font>
            value: item.checked,<font></font>
            onChanged: (bool newValue) {<font></font>
              callback(<span class="hljs-type">CartItem</span>(item.name, newValue));<font></font>
            }),<font></font>
      );<font></font>
    });<font></font>
  }<font></font>
}<font></font>
</code></pre><br>
    ,   <b>StoreConnector</b>   <i>List      <i>OnStateChanged</i>.   ,    (  onChanged),      <i>ToggleItemStateAction</i>.<br>
<br>
<h3></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
全部です！</font><font style="vertical-align: inherit;">この記事では、買い物リストを表示する簡単なアプリケーションを作成し、Reduxアーキテクチャの使用に少し没頭しました。</font><font style="vertical-align: inherit;">このアプリケーションでは、要素を追加してその状態を変更できます。</font><font style="vertical-align: inherit;">このアプリケーションに新しい機能を追加するのは、新しい</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アクション</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">や</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">レデューサー</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を追加するのと同じくらい簡単</font><font style="vertical-align: inherit;">です。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ここに</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タイムトラベル</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ウィジェットを含む、このアプリケーションのソースコードがあります</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この投稿をお楽しみいただければ幸いです。</font></font></i></i></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja481606/index.html">C ++とCortex M4マイクロコントローラーを使用するObserverテンプレートを使用した静的サブスクリプション</a></li>
<li><a href="../ja481610/index.html">PostgreSQLアンチパターン：負荷のかかった大きなテーブルの更新</a></li>
<li><a href="../ja481616/index.html">測地線ドーム。デバイスと私の計算経験について</a></li>
<li><a href="../ja481618/index.html">UnityのMVPまたは生活を簡素化する方法</a></li>
<li><a href="../ja481620/index.html">ジュニパーSRXとCisco ASA：次のシリーズ</a></li>
<li><a href="../ja481626/index.html">iOSの複雑な表示コレクション：VKontakteフィードの例に関する問題と解決策</a></li>
<li><a href="../ja481628/index.html">テストケースで予備ステップを記述するためのルール</a></li>
<li><a href="../ja481632/index.html">クラウドプロバイダー：市場で最も優れているのは誰ですか？</a></li>
<li><a href="../ja481634/index.html">フードデザインダイジェスト、2019年11月</a></li>
<li><a href="../ja481638/index.html">複雑な生産の3Dモデルが役立つ理由</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>