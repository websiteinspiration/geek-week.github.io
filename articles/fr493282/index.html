<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§≤üèª üßíüèº üë©üèª‚Äçüíª Comprendre les strat√©gies r√©seau avec Calico üì• üë∞üèª üë©üèø‚Äçüé§</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Calico Network Plugin fournit une large gamme de politiques r√©seau avec une syntaxe unifi√©e pour prot√©ger les h√¥tes sur le mat√©riel, les machines virt...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Comprendre les strat√©gies r√©seau avec Calico</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/nixys/blog/493282/"><img src="https://habrastorage.org/webt/ui/yk/5t/uiyk5t_l9nxqernjewtrtln6kaa.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Calico Network Plugin fournit une large gamme de politiques r√©seau avec une syntaxe unifi√©e pour prot√©ger les h√¥tes sur le mat√©riel, les machines virtuelles et les pods. Ces strat√©gies peuvent √™tre appliqu√©es dans l'espace de noms ou √™tre des strat√©gies de r√©seau global applicables au </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">point de terminaison h√¥te</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (pour prot√©ger les applications s'ex√©cutant directement sur l'h√¥te - le serveur ou la machine virtuelle peut √™tre l'h√¥te directement) ou pour </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;">charger le point de terminaison de la charge</font></a><font style="vertical-align: inherit;"> de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">travail</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(pour prot√©ger les applications s'ex√©cutant dans des conteneurs ou des machines virtuelles h√©berg√©es). Les politiques de Calico vous permettent d'appliquer des mesures de s√©curit√© √† diff√©rents points du chemin du package √† l'aide de param√®tres tels que preDNAT, untracked et applyOnForward. Comprendre comment ces options fonctionnent peut aider √† am√©liorer la s√©curit√© et les performances du syst√®me dans son ensemble. Cet article explique l'essence de ces param√®tres de strat√©gie Calico (preDNAT, non-annul√© et applyOnForward) appliqu√©s aux points de terminaison h√¥te, en mettant l'accent sur ce qui se passe dans les chemins de traitement des paquets (cha√Ænes iptabels).</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cet article suppose que vous comprenez le fonctionnement des strat√©gies de r√©seau Kubernetes et Calico. Sinon, nous vous recommandons d'essayer le </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">didacticiel de base sur la strat√©gie r√©seau</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et le </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">didacticiel sur la protection de l'h√¥te √† l'</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> aide de Calico avant de lire cet article. Nous nous attendons √©galement √† ce que vous ayez une compr√©hension de base d' </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">iptables</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sous Linux. </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;">Politique du r√©seau mondial de</font></a></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Calico</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vous permet d'appliquer un ensemble de r√®gles d'acc√®s aux √©tiquettes (aux groupes d'h√¥tes et aux charges de travail / pods). Ceci est tr√®s utile si vous utilisez ensemble des syst√®mes h√©t√©rog√®nes - des machines virtuelles, un syst√®me directement sur le mat√©riel ou l'infrastructure kubernetes. De plus, vous pouvez prot√©ger votre cluster (n≈ìuds) √† l'aide d'un ensemble de strat√©gies d√©claratives et appliquer des strat√©gies r√©seau au trafic entrant (par exemple, via le service NodePorts ou des adresses IP externes).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√Ä un niveau fondamental, lorsque Calico connecte un pod √† un r√©seau (voir sch√©ma ci-dessous), il le connecte √† un h√¥te √† l'aide d'une interface Ethernet virtuelle (veth). Le trafic envoy√© par le pod arrive sur l'h√¥te √† partir de cette interface virtuelle et est trait√© comme s'il provenait d'une interface r√©seau physique. Par d√©faut, Calico appelle ces interfaces caliXXX. Puisque le trafic passe par l'interface virtuelle, il passe par iptables, comme si le pod √©tait √† la distance d'un bond. Par cons√©quent, lorsque le trafic provient / provient du pod, il est transmis du point de vue de l'h√¥te.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sur le n≈ìud Kubernetes o√π Calico est ex√©cut√©, vous pouvez mapper l'interface virtuelle (veth) √† la charge de travail comme suit. Dans l'exemple ci-dessous, vous pouvez voir que veth # 10 (calic1cbf1ca0f8) est connect√© √† cnx-manager- * dans l'espace de noms calico-monitoring.</font></font><br>
<br>
<pre><code class="plaintext hljs">[centos@ip-172-31-31-46 K8S]$ sudo ip a<font></font>
...<font></font>
10: calic1cbf1ca0f8@if4: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1440 qdisc noqueue state UP group default<font></font>
    link/ether ee:ee:ee:ee:ee:ee brd ff:ff:ff:ff:ff:ff link-netnsid 5<font></font>
    inet6 fe80::ecee:eeff:feee:eeee/64 scope link<font></font>
       valid_lft forever preferred_lft forever<font></font>
...<font></font>
<font></font>
[centos@ip-172-31-31-46 K8S]$ calicoctl get wep --all-namespaces<font></font>
...<font></font>
calico-monitoring cnx-manager-8f778bd66-lz45m                            ip-172-31-31-46.ec2.internal 192.168.103.134/32<font></font>
calic1cbf1ca0f8<font></font>
...</code></pre><br>
<img src="https://habrastorage.org/webt/j4/sz/k4/j4szk45ps1af4itowiylazzg-mm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√âtant donn√© que Calico cr√©e une interface veth pour chaque charge de travail, comment applique-t-il les strat√©gies? </font><font style="vertical-align: inherit;">Pour ce faire, Calico cr√©e des hooks dans diff√©rentes cha√Ænes du chemin de traitement des packages √† l'aide d'iptables. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le diagramme ci-dessous montre les cha√Ænes impliqu√©es dans le traitement des paquets dans iptables (ou le sous-syst√®me netfilter). </font><font style="vertical-align: inherit;">Lorsqu'un paquet arrive via une interface r√©seau, il passe d'abord par la cha√Æne PREROUTING. </font><font style="vertical-align: inherit;">Ensuite, une d√©cision de routage est prise, et sur cette base, le paquet passe par INPUT (dirig√© vers les processus h√¥tes) ou FORWARD (dirig√© vers le pod ou un autre n≈ìud sur le r√©seau). </font><font style="vertical-align: inherit;">√Ä partir du processus local, le paquet passe par la cha√Æne de SORTIE, puis POSTROUTING avant de l'envoyer sur le c√¢ble.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Notez que pod est √©galement un objet externe (connect√© √† veth) en termes de gestion des iptables. </font><font style="vertical-align: inherit;">R√©sumer:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le trafic retransmis (nat, achemin√© vers / depuis le pod) passe par les cha√Ænes PREROUTING - FORWARD - POSTROUTING.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le trafic vers le processus h√¥te local passe par la cha√Æne PREROUTING - INPUT.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le trafic provenant du processus h√¥te local passe par la cha√Æne OUTPUT - POSTROUTING.</font></font></li>
</ul><br>
<img src="https://habrastorage.org/webt/vo/8v/pj/vo8vpjpwprnf9w3wo4rc1rio9is.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Calico fournit des options de strat√©gie pour appliquer des strat√©gies √† toutes les cha√Ænes. </font><font style="vertical-align: inherit;">Dans cet esprit, examinons les diff√©rents param√®tres de strat√©gie disponibles dans Calico. </font><font style="vertical-align: inherit;">Les num√©ros de la liste d'options ci-dessous correspondent aux num√©ros du sch√©ma ci-dessus.</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Strat√©gie de point de terminaison de charge de travail (pod)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Strat√©gie de point de terminaison h√¥te</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Option ApplyOnForward</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Politique PreDNAT</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Politique non suivie</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Commen√ßons par examiner comment les strat√©gies s'appliquent aux points de terminaison de charge de travail (pods Kubernetes ou OpenStack VMs), puis examinons les options de strat√©gie pour les points de terminaison h√¥te.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Points de terminaison de charge de travail</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Strat√©gie de point de terminaison de charge de travail (1)</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il s'agit d'une option pour prot√©ger vos pods kubernetes. </font><font style="vertical-align: inherit;">Calico prend en charge le travail avec Kubernetes NetworkPolicy, mais il fournit √©galement des politiques suppl√©mentaires - Calico NetworkPolicy et GlobalNetworkPolicy. </font><font style="vertical-align: inherit;">Calico cr√©e une cha√Æne pour chaque pod (charge de travail) et accroche les cha√Ænes INPUT et OUTPUT pour la charge de travail √† la table de filtrage de la cha√Æne FORWARD.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Points de terminaison h√¥te</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Strat√©gie de point de terminaison h√¥te (2)</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En plus de CNI (interface de r√©seau de conteneurs), les politiques Calico offrent la possibilit√© de prot√©ger directement l'h√¥te. Dans Calico, vous pouvez cr√©er un point de terminaison h√¥te en sp√©cifiant une combinaison de l'interface h√¥te et, si n√©cessaire, des num√©ros de port. L'application des politiques pour cette entit√© est r√©alis√©e en utilisant la table de filtrage dans les cha√Ænes INPUT et OUTPUT. Comme le montre le diagramme, (2) ils sont appliqu√©s aux processus locaux sur le n≈ìud / h√¥te. Autrement dit, si vous avez cr√©√© une strat√©gie qui s'applique au point de terminaison h√¥te, cela n'affectera pas le trafic allant vers / depuis vos pods. Mais il fournit une interface / syntaxe unique pour bloquer le trafic pour votre h√¥te et vos pods √† l'aide des politiques Calico. Cela simplifie consid√©rablement le processus de gestion des politiques pour un r√©seau h√©t√©rog√®ne. La configuration de strat√©gies de point de terminaison h√¥te pour am√©liorer la protection du cluster est un autre cas d'utilisation important.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Politique ApplyOnForward (3)</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'option ApplyOnForward est disponible dans la strat√©gie de r√©seau mondial Calico pour permettre aux strat√©gies de s'appliquer √† tout le trafic passant par le point de terminaison de l'h√¥te, y compris le trafic qui sera transmis par l'h√¥te. </font><font style="vertical-align: inherit;">Ce trafic comprend l'envoi vers un module local ou n'importe o√π ailleurs sur le r√©seau. </font><font style="vertical-align: inherit;">Calico n√©cessite que ce param√®tre soit activ√© pour les strat√©gies qui utilisent PreDNAT et non suivies, voir les sections suivantes. </font><font style="vertical-align: inherit;">De plus, ApplyOnForward peut √™tre utilis√© pour suivre le trafic h√¥te lors de l'utilisation d'un routeur virtuel ou d'un logiciel NAT.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Notez que si vous devez appliquer la m√™me strat√©gie r√©seau pour les processus h√¥tes et les pods, vous n'avez pas besoin d'utiliser l'option ApplyOnForward. </font><font style="vertical-align: inherit;">Il vous suffit de cr√©er une √©tiquette pour le point de terminaison h√¥te et le point de terminaison de charge de travail (pod) souhait√©s. </font><font style="vertical-align: inherit;">Calico est suffisamment intelligent pour appliquer des strat√©gies bas√©es sur des √©tiquettes, quel que soit le type de point de terminaison (point de terminaison h√¥te ou charge de travail).</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Politique PreDNAT (4)</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans Kubernetes, les ports de l'entit√© de service peuvent √™tre transf√©r√©s vers l'ext√©rieur √† l'aide de l'option NodePorts ou, facultativement (lorsque vous utilisez Calico), en les d√©clarant via les options IP de cluster ou IP externes. Kube-proxy √©quilibre le trafic entrant li√© au service aux pods du service correspondant √† l'aide de DNAT. Compte tenu de cela, comment appliquez-vous des politiques au trafic passant par NodePorts? Pour que ces politiques soient appliqu√©es avant que le trafic ne soit trait√© par DNAT (qui est un mappage entre l'h√¥te: port et le service correspondant), Calico fournit un param√®tre pour globalNetworkPolicy appel√© "preDNAT: true".</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lorsque la pr√©-DNAT est activ√©e, ces politiques sont impl√©ment√©es en (4) dans le diagramme - dans la table mangle de la cha√Æne PREROUTING - imm√©diatement avant DNAT. La politique de commande habituelle n'est pas respect√©e ici, puisque l'application de ces politiques se produit beaucoup plus t√¥t le long du chemin de traitement du trafic. Cependant, les politiques preDNAT respectent l'ordre d'application entre elles. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lors de la cr√©ation de strat√©gies avec pr√©-DNAT, il est important de tenir compte du trafic que vous souhaitez traiter et de permettre √† la plupart d'√™tre rejet√©. Le trafic marqu√© comme ¬´autoris√©¬ª dans la strat√©gie pr√©-DNAT ne sera plus v√©rifi√© par la strat√©gie du point d'h√¥te, tandis que le trafic lorsque la strat√©gie pr√©-DNAT √©choue continuera de circuler √† travers le reste des cha√Ænes.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Calico a rendu obligatoire l'activation de l'option applyOnForward lors de l'utilisation de preDNAT, car par d√©finition, la destination du trafic n'a pas encore √©t√© s√©lectionn√©e. </font><font style="vertical-align: inherit;">Le trafic peut √™tre dirig√© vers le processus h√¥te, ou il peut √™tre redirig√© vers un pod ou vers un autre n≈ìud.</font></font><br>
 <br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Politique non suivie (5)</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les r√©seaux et les applications peuvent avoir de grandes diff√©rences de comportement. Dans certains cas extr√™mes, les applications peuvent g√©n√©rer de nombreuses connexions √† court terme. Cela peut entra√Æner un manque de m√©moire pour conntrack (le composant principal de la pile r√©seau Linux). Traditionnellement, pour ex√©cuter ce type d'application sous Linux, vous devez configurer ou d√©sactiver manuellement conntrack, ou √©crire des r√®gles iptables pour contourner conntrack. La strat√©gie non suivie dans Calico est une option plus simple et plus efficace si vous souhaitez traiter les connexions le plus rapidement possible. Par exemple, si vous utilisez un </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">memcache</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> massif </font><font style="vertical-align: inherit;">ou comme mesure suppl√©mentaire de protection contre </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DDOS</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lisez cet </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">article de blog</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (ou </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">notre traduction</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) pour plus d'informations, y compris des tests de performances √† l'aide de la strat√©gie non suivie. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lorsque vous d√©finissez l'option ¬´doNotTrack: true¬ª dans Calico globalNetworkPolicy, elle devient une strat√©gie ** non suivie ** et est appliqu√©e au tout d√©but du pipeline de traitement des packages Linux. </font><font style="vertical-align: inherit;">Si vous regardez le diagramme ci-dessus, les strat√©gies non suivies sont appliqu√©es dans les cha√Ænes PREROUTING et OUTPUT de la table brute avant le d√©marrage du suivi de connexion (conntrack). </font><font style="vertical-align: inherit;">Lorsqu'un package est autoris√© par une strat√©gie non suivie, il est marqu√© pour d√©sactiver le suivi de connexion pour ce package. </font><font style="vertical-align: inherit;">√áa veut dire:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Une strat√©gie non suivie est appliqu√©e pour chaque package. </font><font style="vertical-align: inherit;">Il n'y a pas de concept de connexion (ou de flux). </font><font style="vertical-align: inherit;">Le manque de connexions entra√Æne plusieurs cons√©quences importantes:</font></font></li>
<li>      ,    ,      ,     ( Calico   conntrack,      ).</li>
<li>  untracked    workload Kubernetes (pod‚Äô),            pod‚Äô.</li>
<li> NAT      (  ‚Äã‚Äã  NAT  conntrack).</li>
<li>    ¬´ ¬ª  untracked-      .     ,   ,         untracked- (         ).</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les politiques non suivies sont appliqu√©es au tout d√©but du pipeline de traitement des paquets. </font><font style="vertical-align: inherit;">Ceci est tr√®s important √† comprendre lors de la cr√©ation de politiques Calico. </font><font style="vertical-align: inherit;">Vous pouvez avoir une politique pour un module avec commande: 1 et une politique non suivie avec commande: 1000. </font><font style="vertical-align: inherit;">Cela n'aura pas d'importance. </font><font style="vertical-align: inherit;">La strat√©gie non suivie sera appliqu√©e avant la strat√©gie du pod. </font><font style="vertical-align: inherit;">Les politiques non suivies ne respectent l'ordre d'ex√©cution qu'entre elles.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√âtant donn√© que l'un des objectifs de la strat√©gie doNotTrack est d'appliquer la strat√©gie au tout d√©but du pipeline de traitement des packages Linux, Calico rend obligatoire la sp√©cification de l'option applyOnForward lors de l'utilisation de doNotTrack. </font><font style="vertical-align: inherit;">En se r√©f√©rant au diagramme de traitement des paquets, notez que la politique non suivie (5) est appliqu√©e avant toute d√©cision de routage. </font><font style="vertical-align: inherit;">Le trafic peut √™tre dirig√© vers le processus h√¥te, ou il peut √™tre redirig√© vers un pod ou vers un autre n≈ìud.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sommaire</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons examin√© les diff√©rentes options de strat√©gie (point de terminaison h√¥te, ApplyOnForward, preDNAT et Untracked) dans Calico et comment elles s'appliquent au traitement des paquets. </font><font style="vertical-align: inherit;">Comprendre l'essence de leur travail aide √† d√©velopper des politiques efficaces et s√©curis√©es. </font><font style="vertical-align: inherit;">Avec Calico, vous pouvez utiliser la strat√©gie de r√©seau globale, qui s'applique √† l'√©tiquette (un groupe de n≈ìuds et de pods) et appliquer des strat√©gies avec diff√©rents param√®tres. </font><font style="vertical-align: inherit;">Cela permet aux sp√©cialistes de la s√©curit√© et de la conception de r√©seaux de prot√©ger imm√©diatement et ¬´tout¬ª (types de points de terminaison) en utilisant le m√™me langage de politique que les politiques Calico. </font></font><br>
<br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Remerciements: Je tiens √† remercier </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sean Crampton</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alex Pollitt</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pour leur examen et leurs pr√©cieuses informations.</font></font></i></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr493266/index.html">45 cha√Ænes YouTube en anglais pour les professionnels de l'informatique</a></li>
<li><a href="../fr493268/index.html">Pentester Appliqu√©</a></li>
<li><a href="../fr493272/index.html">Comment activer Google Documents hors ligne dans le nouveau Microsoft Edge</a></li>
<li><a href="../fr493274/index.html">Plus de 30 recommandations professionnelles concises pour les d√©veloppeurs Android</a></li>
<li><a href="../fr493278/index.html">–ù—É–∂–Ω–æ –ª–∏ –∫—É—Ä–∏—Ç—å –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç SARS-CoV-2</a></li>
<li><a href="../fr493284/index.html">Kubernetes 1.18: aper√ßu des principales innovations</a></li>
<li><a href="../fr493288/index.html">Cinq citations de programmation expliqu√©es c√©l√®bres</a></li>
<li><a href="../fr493292/index.html">R√©actif ou r√©actif? Analyse de la structure des composants React</a></li>
<li><a href="../fr493294/index.html">Nous regardons √† l'int√©rieur du circuit int√©gr√© sovi√©tique avec TTL</a></li>
<li><a href="../fr493298/index.html">Registres C ++, m√©taprogrammation et microcontr√¥leur</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>