<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>◀️ 👩🏽‍🚀 🤷🏽 退屈なNumPyチュートリアル 👨🏻‍🚀 ♏️ ⛹🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="私の名前はビャチェスラフです。私は慢性数学者であり、数年前
 
 から配列を操作する際にサイクルを使用していません... まさにNumPyでベクトル演算を発見してからです。データと画像の配列を処理するために最もよく使用するNumPy関数を紹介します。記事の最後で、NumPyツールキットを使用して、反...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>退屈なNumPyチュートリアル</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/469355/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">私の名前はビャチェスラフです。私は慢性数学者であり、数年前</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
から</font><font style="vertical-align: inherit;">配列を</font><font style="vertical-align: inherit;">操作する</font><font style="vertical-align: inherit;">際にサイクルを使用していません... </font><font style="vertical-align: inherit;">まさにNumPyでベクトル演算を発見してからです。</font><font style="vertical-align: inherit;">データと画像の配列を処理するために最もよく使用するNumPy関数を紹介します。</font><font style="vertical-align: inherit;">記事の最後で、NumPyツールキットを使用して、反復なしで画像を畳み込む方法（=非常に高速）を示します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
忘れないで</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np</code></pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
行きましょう！</font></font><a name="habracut"></a><br>
<br>
<a name="top"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
内容</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Numpyとは何ですか？</font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">配列の作成</font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要素、スライスへのアクセス</font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">配列の形状とその変更</font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">軸と転置の再配置</font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">配列の結合</font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">データの複製</font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">配列要素の数学演算</font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">行列乗算</font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アグリゲーター</font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">結論の代わりに-例</font></font></a><br>
<a name="p1"></a><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">numpyとは何ですか？</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、SciPyプロジェクトから分離されたオープンソースライブラリです。</font><font style="vertical-align: inherit;">NumPyは、NumericおよびNumArrayの子孫です。</font><font style="vertical-align: inherit;">NumPyは、Fortranで書かれたLAPACライブラリーに基づいています。</font><font style="vertical-align: inherit;">NumPyの非Python代替はMatlabです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
NumPyはFortranに基づいているため、高速なライブラリです。</font><font style="vertical-align: inherit;">また、多次元配列でのベクトル演算をサポートしているため、非常に便利です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
基本バージョン（基本バージョンの多次元配列）に加えて、NumPyには次のような特殊なタスクを解決するための一連のパッケージが含まれています。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> numpy.linalg-線形代数演算を実装します（ベクトルと行列の単純な乗算は基本バージョンにあります）。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> numpy.random-ランダム変数を操作するための関数を実装します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> numpy.fft-直接および逆フーリエ変換を実装します。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
だから、私はいくつかのNumPy機能とその使用例のみを詳細に検討することを提案します。これは、このツールがどれほど強力であるかを理解するのに十分です！</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;上&gt;</font></font></a><br>
<br>
<a name="p2"></a><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アレイの作成</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
配列を作成するにはいくつかの方法があります。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リストを配列に変換：</font></font><br>
<br>
<pre><code class="python hljs">A = np.array([[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]])<font></font>
A<font></font>
<font></font>
Out:<font></font>
array([[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>],<font></font>
       [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]])</code></pre></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アレイをコピーします（コピーとディープコピーが必要です!!!）：</font></font><br>
 <br>
<pre><code class="python hljs">B = A.copy()<font></font>
B<font></font>
<font></font>
Out:<font></font>
array([[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>],<font></font>
       [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]])</code></pre></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指定されたサイズのゼロまたは1つの配列を作成します。</font></font><br>
 <br>
 <pre><code class="python hljs">A = np.zeros((<span class="hljs-number">2</span>, <span class="hljs-number">3</span>))<font></font>
A<font></font>
<font></font>
Out:<font></font>
array([[<span class="hljs-number">0.</span>, <span class="hljs-number">0.</span>, <span class="hljs-number">0.</span>],<font></font>
       [<span class="hljs-number">0.</span>, <span class="hljs-number">0.</span>, <span class="hljs-number">0.</span>]])
</code></pre><br>
<pre><code class="python hljs">B = np.ones((<span class="hljs-number">3</span>, <span class="hljs-number">2</span>))<font></font>
B<font></font>
<font></font>
Out:<font></font>
array([[<span class="hljs-number">1.</span>, <span class="hljs-number">1.</span>],<font></font>
       [<span class="hljs-number">1.</span>, <span class="hljs-number">1.</span>],<font></font>
       [<span class="hljs-number">1.</span>, <span class="hljs-number">1.</span>]])</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
または、既存の配列の次元を取ります：</font></font><br>
<br>
<pre><code class="python hljs">A = np.array([[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]])<font></font>
B = np.zeros_like(A)<font></font>
B<font></font>
<font></font>
Out:<font></font>
array([[<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>],<font></font>
       [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>]])
</code></pre><br>
<pre><code class="python hljs">A = np.array([[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]])<font></font>
B = np.ones_like(A)<font></font>
B<font></font>
<font></font>
Out:<font></font>
array([[<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>],<font></font>
       [<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>]])</code></pre><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2次元の正方配列を作成するときは、単位対角行列にすることができます。</font></font><br>
 <br>
 <pre><code class="python hljs">A = np.eye(<span class="hljs-number">3</span>)<font></font>
A<font></font>
<font></font>
Out:<font></font>
array([[<span class="hljs-number">1.</span>, <span class="hljs-number">0.</span>, <span class="hljs-number">0.</span>],<font></font>
       [<span class="hljs-number">0.</span>, <span class="hljs-number">1.</span>, <span class="hljs-number">0.</span>],<font></font>
       [<span class="hljs-number">0.</span>, <span class="hljs-number">0.</span>, <span class="hljs-number">1.</span>]])</code></pre></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">From（含む）からTo（含まない）までの数値の配列をステップステップで作成します。</font></font><br>
<br>
<pre><code class="python hljs">From = <span class="hljs-number">2.5</span>
To = <span class="hljs-number">7</span>
Step = <span class="hljs-number">0.5</span><font></font>
A = np.arange(From, To, Step)<font></font>
A<font></font>
<font></font>
Out:<font></font>
array([<span class="hljs-number">2.5</span>, <span class="hljs-number">3.</span> , <span class="hljs-number">3.5</span>, <span class="hljs-number">4.</span> , <span class="hljs-number">4.5</span>, <span class="hljs-number">5.</span> , <span class="hljs-number">5.5</span>, <span class="hljs-number">6.</span> , <span class="hljs-number">6.5</span>])</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
デフォルトでは、from = 0、step = 1であるため、1つのパラメーターを持つバリアントはToとして解釈されます。</font></font><br>
<br>
<pre><code class="python hljs">A = np.arange(<span class="hljs-number">5</span>)<font></font>
A<font></font>
<font></font>
Out:<font></font>
array([<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>])</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
または2つあります-FromとToのように：</font></font><br>
<br>
<pre><code class="python hljs">A = np.arange(<span class="hljs-number">10</span>, <span class="hljs-number">15</span>)<font></font>
A<font></font>
<font></font>
Out:<font></font>
array([<span class="hljs-number">10</span>, <span class="hljs-number">11</span>, <span class="hljs-number">12</span>, <span class="hljs-number">13</span>, <span class="hljs-number">14</span>])</code></pre></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
メソッドNo. 3では、配列の次元が</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1つの</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パラメーター（サイズのタプル）</font><font style="vertical-align: inherit;">として渡されたことに注意してください</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">メソッドNo. 3およびNo. 4の2番目のパラメーターでは、必要な配列要素のタイプを指定できます。</font></font><br>
<br>
<pre><code class="python hljs">A = np.zeros((<span class="hljs-number">2</span>, <span class="hljs-number">3</span>), <span class="hljs-string">'int'</span>)<font></font>
A<font></font>
<font></font>
Out:<font></font>
array([[<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>],<font></font>
       [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>]])</code></pre><br>
<pre><code class="python hljs">B = np.ones((<span class="hljs-number">3</span>, <span class="hljs-number">2</span>), <span class="hljs-string">'complex'</span>)<font></font>
B<font></font>
<font></font>
Out:<font></font>
array([[<span class="hljs-number">1.</span>+<span class="hljs-number">0.j</span>, <span class="hljs-number">1.</span>+<span class="hljs-number">0.j</span>],<font></font>
       [<span class="hljs-number">1.</span>+<span class="hljs-number">0.j</span>, <span class="hljs-number">1.</span>+<span class="hljs-number">0.j</span>],<font></font>
       [<span class="hljs-number">1.</span>+<span class="hljs-number">0.j</span>, <span class="hljs-number">1.</span>+<span class="hljs-number">0.j</span>]])</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
astypeメソッドを使用すると、配列を別の型にキャストできます。</font><font style="vertical-align: inherit;">目的のタイプはパラメーターとして示されます。</font></font><br>
<br>
<pre><code class="python hljs">A = np.ones((<span class="hljs-number">3</span>, <span class="hljs-number">2</span>))<font></font>
B = A.astype(<span class="hljs-string">'str'</span>)<font></font>
B<font></font>
<font></font>
Out:<font></font>
array([[<span class="hljs-string">'1.0'</span>, <span class="hljs-string">'1.0'</span>],<font></font>
       [<span class="hljs-string">'1.0'</span>, <span class="hljs-string">'1.0'</span>],<font></font>
       [<span class="hljs-string">'1.0'</span>, <span class="hljs-string">'1.0'</span>]], dtype=<span class="hljs-string">'&lt;U32'</span>)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
使用可能なすべてのタイプは、sctypes辞書にあります。 </font></font><br>
<br>
<pre><code class="python hljs">np.sctypes<font></font>
<font></font>
Out:<font></font>
{<span class="hljs-string">'int'</span>: [numpy.int8, numpy.int16, numpy.int32, numpy.int64],
 <span class="hljs-string">'uint'</span>: [numpy.uint8, numpy.uint16, numpy.uint32, numpy.uint64],
 <span class="hljs-string">'float'</span>: [numpy.float16, numpy.float32, numpy.float64, numpy.float128],
 <span class="hljs-string">'complex'</span>: [numpy.complex64, numpy.complex128, numpy.complex256],
 <span class="hljs-string">'others'</span>: [bool, object, bytes, str, numpy.void]}</code></pre><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;上&gt;</font></font></a><br>
<br>
<a name="p3"></a><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要素、スライスへのアクセス</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
配列の要素へのアクセスは整数インデックスによって実行され、カウントダウンは0から始まります。</font></font><br>
<br>
<pre><code class="python hljs">A = np.array([[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]])<font></font>
A[<span class="hljs-number">1</span>, <span class="hljs-number">1</span>]<font></font>
<font></font>
Out:<font></font>
<span class="hljs-number">5</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
多次元配列をネストされた1次元配列（その要素が線形配列の場合がある線形配列）のシステムとして想像すると、不完全な一連のインデックスを使用してサブ配列にアクセスできることが明らかになります。</font></font><br>
<br>
<pre><code class="python hljs">A = np.array([[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]])<font></font>
A[<span class="hljs-number">1</span>]<font></font>
<font></font>
Out:<font></font>
array([<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>])</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このパラダイムがあれば、1つの要素へのアクセスの例を書き直すことができます。</font></font><br>
<br>
<pre><code class="python hljs">A = np.array([[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]])<font></font>
A[<span class="hljs-number">1</span>][<span class="hljs-number">1</span>]<font></font>
<font></font>
Out:<font></font>
<span class="hljs-number">5</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
不完全なインデックスのセットを使用すると、欠落しているインデックスは、対応する軸に沿って可能なすべてのインデックスのリストで暗黙的に置き換えられます。</font><font style="vertical-align: inherit;">"："を設定することでこれを明示的に行うことができます。</font><font style="vertical-align: inherit;">1つのインデックスを持つ前述の例は、次のように書き換えることができます。</font></font><br>
<br>
<pre><code class="python hljs">A = np.array([[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]])<font></font>
A[<span class="hljs-number">1</span>, :]<font></font>
<font></font>
Out:<font></font>
array([<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>])</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
任意の1つまたは複数の軸に沿ってインデックスを「スキップ」できます。「スキップされた」軸の後にインデックス付きの軸が続く場合、「：」は次の条件を満たす必要があります。</font></font><br>
<br>
<pre><code class="python hljs">A = np.array([[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]])<font></font>
A[:, <span class="hljs-number">1</span>]<font></font>
<font></font>
Out:<font></font>
array([<span class="hljs-number">2</span>, <span class="hljs-number">5</span>])</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
インデックスは負の整数値を取ることができます。</font><font style="vertical-align: inherit;">この場合、カウントは配列の最後からになります。</font></font><br>
<br>
<pre><code class="python hljs">A = np.arange(<span class="hljs-number">5</span>)<font></font>
print(A)<font></font>
A[<span class="hljs-number">-1</span>]<font></font>
<font></font>
Out:<font></font>
[<span class="hljs-number">0</span> <span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">4</span>]
<span class="hljs-number">4</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
単一のインデックスではなく、各軸に沿ったインデックスのリストを使用できます。</font></font><br>
<br>
<pre><code class="python hljs">A = np.arange(<span class="hljs-number">5</span>)<font></font>
print(A)<font></font>
A[[<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">-1</span>]]<font></font>
<font></font>
Out:<font></font>
[<span class="hljs-number">0</span> <span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">4</span>]<font></font>
array([<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">4</span>])</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
または、「From：To：Step」の形式でインデックス範囲を指定します。</font><font style="vertical-align: inherit;">このデザインはスライスと呼ばれます。</font><font style="vertical-align: inherit;">すべての要素は、開始インデックスから開始インデックスまでのインデックスのリストから選択され</font><font style="vertical-align: inherit;">、Stepステップに</font><font style="vertical-align: inherit;">は</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">含ま</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">れ</font><font style="vertical-align: inherit;">ません</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="python hljs">A = np.arange(<span class="hljs-number">5</span>)<font></font>
print(A)<font></font>
A[<span class="hljs-number">0</span>:<span class="hljs-number">4</span>:<span class="hljs-number">2</span>]<font></font>
<font></font>
Out:<font></font>
[<span class="hljs-number">0</span> <span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">4</span>]<font></font>
array([<span class="hljs-number">0</span>, <span class="hljs-number">2</span>])</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
インデックスステップのデフォルト値は1で、スキップできます。</font></font><br>
<br>
<pre><code class="python hljs">A = np.arange(<span class="hljs-number">5</span>)<font></font>
print(A)<font></font>
A[<span class="hljs-number">0</span>:<span class="hljs-number">4</span>]<font></font>
<font></font>
Out:<font></font>
[<span class="hljs-number">0</span> <span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">4</span>]<font></font>
array([<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>])</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
From値とTo値にもデフォルト値があります。それぞれ0とインデックス軸に沿った配列のサイズです。</font></font><br>
<br>
<pre><code class="python hljs">A = np.arange(<span class="hljs-number">5</span>)<font></font>
print(A)<font></font>
A[:<span class="hljs-number">4</span>]<font></font>
<font></font>
Out:<font></font>
[<span class="hljs-number">0</span> <span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">4</span>]<font></font>
array([<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>])</code></pre><br>
<pre><code class="python hljs">A = np.arange(<span class="hljs-number">5</span>)<font></font>
print(A)<font></font>
A[<span class="hljs-number">-3</span>:]<font></font>
<font></font>
Out:<font></font>
[<span class="hljs-number">0</span> <span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">4</span>]<font></font>
array([<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>])</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
FromとToをデフォルトで使用し（この軸のすべてのインデックス）、ステップが1と異なる場合は、2つのコロンのペアを使用して、インタープリターが単一のパラメーターをStepとして識別できるようにする必要があります。</font><font style="vertical-align: inherit;">次のコードは、2番目の軸に沿って配列を「拡張」しますが、最初の軸に沿っては変更しません。</font></font><br>
<br>
<pre><code class="python hljs">A = np.array([[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]])<font></font>
B = A[:, ::<span class="hljs-number">-1</span>]<font></font>
print(<span class="hljs-string">"A"</span>, A)<font></font>
print(<span class="hljs-string">"B"</span>, B)<font></font>
<font></font>
Out:<font></font>
A [[<span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span>]<font></font>
 [<span class="hljs-number">4</span> <span class="hljs-number">5</span> <span class="hljs-number">6</span>]]<font></font>
B [[<span class="hljs-number">3</span> <span class="hljs-number">2</span> <span class="hljs-number">1</span>]<font></font>
 [<span class="hljs-number">6</span> <span class="hljs-number">5</span> <span class="hljs-number">4</span>]]</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
今やりましょう</font></font><br>
<br>
<pre><code class="python hljs">print(A)<font></font>
B[<span class="hljs-number">0</span>, <span class="hljs-number">0</span>] = <span class="hljs-number">0</span><font></font>
print(A)<font></font>
<font></font>
Out:<font></font>
[[<span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span>]<font></font>
 [<span class="hljs-number">4</span> <span class="hljs-number">5</span> <span class="hljs-number">6</span>]]<font></font>
[[<span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">0</span>]<font></font>
 [<span class="hljs-number">4</span> <span class="hljs-number">5</span> <span class="hljs-number">6</span>]]</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ご覧のとおり、Bを通じてAのデータを変更しました。そのため、実際のタスクでコピーを使用することが重要です。</font><font style="vertical-align: inherit;">上記の例は次のようになります。</font></font><br>
<br>
<pre><code class="python hljs">A = np.array([[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]])<font></font>
B = A.copy()[:, ::<span class="hljs-number">-1</span>]<font></font>
print(<span class="hljs-string">"A"</span>, A)<font></font>
print(<span class="hljs-string">"B"</span>, B)<font></font>
<font></font>
Out:<font></font>
A [[<span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span>]<font></font>
 [<span class="hljs-number">4</span> <span class="hljs-number">5</span> <span class="hljs-number">6</span>]]<font></font>
B [[<span class="hljs-number">3</span> <span class="hljs-number">2</span> <span class="hljs-number">1</span>]<font></font>
 [<span class="hljs-number">6</span> <span class="hljs-number">5</span> <span class="hljs-number">4</span>]]</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
NumPyは、ブールインデックス配列を介して複数の配列要素にアクセスする機能も提供します。</font><font style="vertical-align: inherit;">インデックス配列は、インデックス付きの配列の形状と一致する必要があります。</font></font><br>
<br>
<pre><code class="python hljs">A = np.array([[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]])<font></font>
I = np.array([[<span class="hljs-literal">False</span>, <span class="hljs-literal">False</span>, <span class="hljs-literal">True</span>], [ <span class="hljs-literal">True</span>, <span class="hljs-literal">False</span>, <span class="hljs-literal">True</span>]])<font></font>
A[I]<font></font>
<font></font>
Out:<font></font>
array([<span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">6</span>])</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ご覧のとおり、このような構造は、真のインデックスに対応するインデックス付き配列の要素で構成されるフラット配列を返します。</font><font style="vertical-align: inherit;">ただし、配列の要素へのこのようなアクセスを使用して値を変更すると、配列の形状は保持されます。</font></font><br>
<br>
<pre><code class="python hljs">A = np.array([[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]])<font></font>
I = np.array([[<span class="hljs-literal">False</span>, <span class="hljs-literal">False</span>, <span class="hljs-literal">True</span>], [ <span class="hljs-literal">True</span>, <span class="hljs-literal">False</span>, <span class="hljs-literal">True</span>]])<font></font>
A[I] = <span class="hljs-number">0</span><font></font>
print(A)<font></font>
<font></font>
Out:<font></font>
[[<span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">0</span>]<font></font>
 [<span class="hljs-number">0</span> <span class="hljs-number">5</span> <span class="hljs-number">0</span>]]</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
論理演算logical_and、logical_or、logical_notは、ブール配列のインデックス付けに対して定義され、要素ごとに論理演算AND、OR、NOTを実行します。</font></font><br>
<br>
<pre><code class="python hljs">A = np.array([[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]])<font></font>
<font></font>
I1 = np.array([[<span class="hljs-literal">False</span>, <span class="hljs-literal">False</span>, <span class="hljs-literal">True</span>], [<span class="hljs-literal">True</span>, <span class="hljs-literal">False</span>, <span class="hljs-literal">True</span>]])<font></font>
I2 = np.array([[<span class="hljs-literal">False</span>, <span class="hljs-literal">True</span>, <span class="hljs-literal">False</span>], [<span class="hljs-literal">False</span>, <span class="hljs-literal">False</span>, <span class="hljs-literal">True</span>]])<font></font>
<font></font>
B = A.copy()<font></font>
C = A.copy()<font></font>
D = A.copy()<font></font>
<font></font>
B[np.logical_and(I1, I2)] = <span class="hljs-number">0</span>
C[np.logical_or(I1, I2)] = <span class="hljs-number">0</span>
D[np.logical_not(I1)] = <span class="hljs-number">0</span><font></font>
<font></font>
print(<span class="hljs-string">'B\n'</span>, B)<font></font>
print(<span class="hljs-string">'\nC\n'</span>, C)<font></font>
print(<span class="hljs-string">'\nD\n'</span>, D)<font></font>
<font></font>
Out:<font></font>
B<font></font>
 [[<span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span>]<font></font>
 [<span class="hljs-number">4</span> <span class="hljs-number">5</span> <span class="hljs-number">0</span>]]<font></font>
<font></font>
C<font></font>
 [[<span class="hljs-number">1</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span>]<font></font>
 [<span class="hljs-number">0</span> <span class="hljs-number">5</span> <span class="hljs-number">0</span>]]<font></font>
<font></font>
D<font></font>
 [[<span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">3</span>]<font></font>
 [<span class="hljs-number">4</span> <span class="hljs-number">0</span> <span class="hljs-number">6</span>]]</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
logical_andとlogical_orは2つのオペランドを取りますが、logical_notは1つを取ります。</font><font style="vertical-align: inherit;">演算子＆、|を使用できます。</font><font style="vertical-align: inherit;">および〜は、AND、OR、およびNOTをそれぞれ、任意の数のオペランドで実行します。</font></font><br>
<br>
<pre><code class="python hljs">A = np.array([[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]])<font></font>
<font></font>
I1 = np.array([[<span class="hljs-literal">False</span>, <span class="hljs-literal">False</span>, <span class="hljs-literal">True</span>], [<span class="hljs-literal">True</span>, <span class="hljs-literal">False</span>, <span class="hljs-literal">True</span>]])<font></font>
I2 = np.array([[<span class="hljs-literal">False</span>, <span class="hljs-literal">True</span>, <span class="hljs-literal">False</span>], [<span class="hljs-literal">False</span>, <span class="hljs-literal">False</span>, <span class="hljs-literal">True</span>]])<font></font>
<font></font>
A[I1 &amp; (I1 | ~ I2)] = <span class="hljs-number">0</span><font></font>
<font></font>
print(A)<font></font>
<font></font>
Out:<font></font>
[[<span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">0</span>]<font></font>
 [<span class="hljs-number">0</span> <span class="hljs-number">5</span> <span class="hljs-number">0</span>]]</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、I1のみを使用するのと同じです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
配列の名前をオペランドとして論理条件を書き込むことにより、値の配列に形式で対応するインデックス付き論理配列を取得することが可能です。</font><font style="vertical-align: inherit;">インデックスのブール値は、対応する配列要素の式の真として計算されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3より大きいI要素のインデックス配列を見つけます。値が2未満で4を超える要素はゼロにリセットされます。</font></font><br>
<br>
<pre><code class="python hljs">A = np.array([[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]])<font></font>
print(<span class="hljs-string">'A before\n'</span>, A)<font></font>
<font></font>
I = A &gt; <span class="hljs-number">3</span>
print(<span class="hljs-string">'I\n'</span>, I)<font></font>
<font></font>
A[np.logical_or(A &lt; <span class="hljs-number">2</span>, A &gt; <span class="hljs-number">4</span>)] = <span class="hljs-number">0</span>
print(<span class="hljs-string">'A after\n'</span>, A)<font></font>
<font></font>
Out:<font></font>
A before<font></font>
 [[<span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span>]<font></font>
 [<span class="hljs-number">4</span> <span class="hljs-number">5</span> <span class="hljs-number">6</span>]]<font></font>
I<font></font>
 [[<span class="hljs-literal">False</span> <span class="hljs-literal">False</span> <span class="hljs-literal">False</span>]<font></font>
 [ <span class="hljs-literal">True</span>  <span class="hljs-literal">True</span>  <span class="hljs-literal">True</span>]]<font></font>
A after<font></font>
 [[<span class="hljs-number">0</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span>]<font></font>
 [<span class="hljs-number">4</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span>]]</code></pre><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;上&gt;</font></font></a><br>
<br>
<a name="p4"></a><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">配列の形状とその変化</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
多次元配列は、最大長の1次元配列として表すことができ、最後の軸の長さに沿って断片にカットされ、軸に沿ってレイヤーに配置されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
わかりやすくするために、例を考えます。</font></font><br>
<br>
<pre><code class="python hljs">A = np.arange(<span class="hljs-number">24</span>)<font></font>
B = A.reshape(<span class="hljs-number">4</span>, <span class="hljs-number">6</span>)<font></font>
C = A.reshape(<span class="hljs-number">4</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>)<font></font>
print(<span class="hljs-string">'B\n'</span>, B)<font></font>
print(<span class="hljs-string">'\nC\n'</span>, C)<font></font>
<font></font>
Out:<font></font>
B<font></font>
 [[ <span class="hljs-number">0</span>  <span class="hljs-number">1</span>  <span class="hljs-number">2</span>  <span class="hljs-number">3</span>  <span class="hljs-number">4</span>  <span class="hljs-number">5</span>]<font></font>
 [ <span class="hljs-number">6</span>  <span class="hljs-number">7</span>  <span class="hljs-number">8</span>  <span class="hljs-number">9</span> <span class="hljs-number">10</span> <span class="hljs-number">11</span>]<font></font>
 [<span class="hljs-number">12</span> <span class="hljs-number">13</span> <span class="hljs-number">14</span> <span class="hljs-number">15</span> <span class="hljs-number">16</span> <span class="hljs-number">17</span>]<font></font>
 [<span class="hljs-number">18</span> <span class="hljs-number">19</span> <span class="hljs-number">20</span> <span class="hljs-number">21</span> <span class="hljs-number">22</span> <span class="hljs-number">23</span>]]<font></font>
<font></font>
C<font></font>
 [[[ <span class="hljs-number">0</span>  <span class="hljs-number">1</span>]<font></font>
  [ <span class="hljs-number">2</span>  <span class="hljs-number">3</span>]<font></font>
  [ <span class="hljs-number">4</span>  <span class="hljs-number">5</span>]]<font></font>
<font></font>
 [[ <span class="hljs-number">6</span>  <span class="hljs-number">7</span>]<font></font>
  [ <span class="hljs-number">8</span>  <span class="hljs-number">9</span>]<font></font>
  [<span class="hljs-number">10</span> <span class="hljs-number">11</span>]]<font></font>
<font></font>
 [[<span class="hljs-number">12</span> <span class="hljs-number">13</span>]<font></font>
  [<span class="hljs-number">14</span> <span class="hljs-number">15</span>]<font></font>
  [<span class="hljs-number">16</span> <span class="hljs-number">17</span>]]<font></font>
<font></font>
 [[<span class="hljs-number">18</span> <span class="hljs-number">19</span>]<font></font>
  [<span class="hljs-number">20</span> <span class="hljs-number">21</span>]<font></font>
  [<span class="hljs-number">22</span> <span class="hljs-number">23</span>]]]</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この例では、長さが24要素の1次元配列から2つの新しい配列を形成しました。配列B、サイズ4 x6。値の順序を見ると、2番目の次元に沿って連続する値のチェーンがあることがわかります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
配列Cでは、4 x 3 x 2の連続値が最後の軸に沿って実行されます。 2番目の軸に沿って順次ブロックがあり、その組み合わせにより配列Bの2番目の軸に沿って行が生成されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コピーを作成しなかったことを考えると、これらは同じデータ配列の異なる形式の表現であることが明らかになります。したがって、データ自体を変更することなく、配列の形状を簡単かつ迅速に変更できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
配列の次元（軸の数）を確認するには、ndimフィールド（数値）を使用し、各軸に沿ったサイズ-形状（タプル）を確認します。</font><font style="vertical-align: inherit;">形状の長さによっても寸法を認識できます。</font><font style="vertical-align: inherit;">配列の要素の総数を調べるには、サイズの値を使用できます。</font></font><br>
<br>
<pre><code class="python hljs">A = np.arange(<span class="hljs-number">24</span>)<font></font>
C = A.reshape(<span class="hljs-number">4</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>)<font></font>
<font></font>
print(C.ndim, C.shape, len(C.shape), A.size)<font></font>
<font></font>
Out:<font></font>
<span class="hljs-number">3</span> (<span class="hljs-number">4</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>) <span class="hljs-number">3</span> <span class="hljs-number">24</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ndimとshapeは属性であり、メソッドではないことに注意してください！</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
配列を1次元で表示するには、ravel関数を使用できます。</font></font><br>
<br>
<pre><code class="python hljs">A = np.array([[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]])<font></font>
A.ravel()<font></font>
<font></font>
Out:<font></font>
array([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>])</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
軸または次元に沿ってサイズを変更するには、reshapeメソッドを使用します。</font></font><br>
<br>
<pre><code class="python hljs">A = np.array([[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]])<font></font>
A.reshape(<span class="hljs-number">3</span>, <span class="hljs-number">2</span>)<font></font>
<font></font>
Out:<font></font>
array([[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>],<font></font>
       [<span class="hljs-number">3</span>, <span class="hljs-number">4</span>],<font></font>
       [<span class="hljs-number">5</span>, <span class="hljs-number">6</span>]])</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
要素の数を維持することが重要です。</font><font style="vertical-align: inherit;">そうしないと、エラーが発生します。</font></font><br>
<br>
<pre><code class="python hljs">A = np.array([[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]])<font></font>
A.reshape(<span class="hljs-number">3</span>, <span class="hljs-number">3</span>)<font></font>
<font></font>
Out:<font></font>
ValueError                                Traceback (most recent call last)<font></font>
&lt;ipython-input<span class="hljs-number">-73</span>-d204e18427d9&gt; <span class="hljs-keyword">in</span> &lt;module&gt;
      <span class="hljs-number">1</span> A = np.array([[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]])<font></font>
----&gt; <span class="hljs-number">2</span> A.reshape(<span class="hljs-number">3</span>, <span class="hljs-number">3</span>)<font></font>
<font></font>
ValueError: cannot reshape array of size <span class="hljs-number">6</span> into shape (<span class="hljs-number">3</span>,<span class="hljs-number">3</span>)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
要素の数が一定であることを考えると、変形を実行するときの任意の1つの軸に沿ったサイズは、他の軸に沿った長さの値から計算できます。</font><font style="vertical-align: inherit;">1つの軸に沿ったサイズを-1に指定すると、自動的に計算されます。</font></font><br>
<br>
<pre><code class="python hljs">A = np.arange(<span class="hljs-number">24</span>)<font></font>
B = A.reshape(<span class="hljs-number">4</span>, <span class="hljs-number">-1</span>)<font></font>
C = A.reshape(<span class="hljs-number">4</span>, <span class="hljs-number">-1</span>, <span class="hljs-number">2</span>)<font></font>
<font></font>
print(B.shape, C.shape)<font></font>
<font></font>
Out:<font></font>
(<span class="hljs-number">4</span>, <span class="hljs-number">6</span>) (<span class="hljs-number">4</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ravelの代わりにreshapeを使用できます。</font></font><br>
<br>
<pre><code class="python hljs">A = np.array([[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]])<font></font>
B = A.reshape(<span class="hljs-number">-1</span>)<font></font>
print(B.shape)<font></font>
<font></font>
Out:<font></font>
(<span class="hljs-number">6</span>,)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
画像処理のための機能のいくつかの実用的なアプリケーションを検討してください。</font><font style="vertical-align: inherit;">写真を学習の対象として使用します。Pythonを使用して、写真</font></font><br>
<br>
<img src="https://habrastorage.org/webt/s4/_x/kd/s4_xkde-zkxl7hxntuvj6b9rulo.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
をロードして視覚化してみます。</font><font style="vertical-align: inherit;">これには、OpenCVとMatplotlibが必要です。</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-keyword">import</span> cv2
<span class="hljs-keyword">from</span> matplotlib <span class="hljs-keyword">import</span> pyplot <span class="hljs-keyword">as</span> plt<font></font>
<font></font>
I = cv2.imread(<span class="hljs-string">'sarajevo.jpg'</span>)[:, :, ::<span class="hljs-number">-1</span>]<font></font>
plt.figure(num=<span class="hljs-literal">None</span>, figsize=(<span class="hljs-number">15</span>, <span class="hljs-number">15</span>), dpi=<span class="hljs-number">80</span>, facecolor=<span class="hljs-string">'w'</span>, edgecolor=<span class="hljs-string">'k'</span>)<font></font>
plt.imshow(I)<font></font>
plt.show()</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
結果は次のよう</font></font><br>
<br>
<img src="https://habrastorage.org/webt/a3/z7/05/a3z705cacyhqxhtwmxdcngq88hu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
になります。ダウンロード行に注意してください。</font></font><br>
<br>
<pre><code class="python hljs">I = cv2.imread(<span class="hljs-string">'sarajevo.jpg'</span>)[:, :, ::<span class="hljs-number">-1</span>]<font></font>
print(I.shape)<font></font>
<font></font>
Out:<font></font>
(<span class="hljs-number">1280</span>, <span class="hljs-number">1920</span>, <span class="hljs-number">3</span>)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
OpenCVはBGR形式の画像で動作し、RGBに精通しています。</font><font style="vertical-align: inherit;">OpenCV関数にアクセスせずに、</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 "[：、：、::-1]" </font><font style="vertical-align: inherit;">コンストラクトを使用して、色軸に沿ってバイトオーダーを変更します</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
各軸で画像を2倍に縮小します。</font><font style="vertical-align: inherit;">私たちの画像は、それぞれ軸に沿って均等な次元を持ち、補間せずに縮小できます。</font></font><br>
<br>
<pre><code class="python hljs">I_ = I.reshape(I.shape[<span class="hljs-number">0</span>] // <span class="hljs-number">2</span>, <span class="hljs-number">2</span>, I.shape[<span class="hljs-number">1</span>] // <span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">-1</span>)<font></font>
print(I_.shape)<font></font>
<font></font>
plt.figure(num=<span class="hljs-literal">None</span>, figsize=(<span class="hljs-number">10</span>, <span class="hljs-number">10</span>), dpi=<span class="hljs-number">80</span>, facecolor=<span class="hljs-string">'w'</span>, edgecolor=<span class="hljs-string">'k'</span>)<font></font>
plt.imshow(I_[:, <span class="hljs-number">0</span>, :, <span class="hljs-number">0</span>])<font></font>
plt.show()</code></pre><br>
<img src="https://habrastorage.org/webt/9z/ig/12/9zig12b_iqus6ymezttmqu7poga.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
配列の形状を変更して、2つの新しい軸、それぞれに2つの値を取得しました。これらは、元の画像の奇数行と偶数行および列で構成されるフレームに対応しています。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
軸に沿って寸法を確認できるため、Matplotlibを使用すると品質が低下します。</font><font style="vertical-align: inherit;">実際、サムネイルの品質は次のとおりです：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/__/32/cp/__32cpcj6xlm1n5efxcwkp4lhxw.jpeg"><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;top&gt;</font></font></a><br>
<br>
<a name="p5"></a><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">軸の再配置と転置</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
データユニットの同じ順序で配列の形状を変更することに加えて、多くの場合、軸の順序を変更する必要があります。これは、当然、データブロックの順列を伴います。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このような変換の例は、行列の転置、つまり行と列の入れ替えです。</font></font><br>
<br>
<pre><code class="python hljs">A = np.array([[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]])<font></font>
print(<span class="hljs-string">'A\n'</span>, A)<font></font>
print(<span class="hljs-string">'\nA data\n'</span>, A.ravel())<font></font>
<font></font>
B = A.T<font></font>
print(<span class="hljs-string">'\nB\n'</span>, B)<font></font>
print(<span class="hljs-string">'\nB data\n'</span>, B.ravel())<font></font>
<font></font>
Out:<font></font>
A<font></font>
 [[<span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span>]<font></font>
 [<span class="hljs-number">4</span> <span class="hljs-number">5</span> <span class="hljs-number">6</span>]]<font></font>
<font></font>
A data<font></font>
 [<span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">4</span> <span class="hljs-number">5</span> <span class="hljs-number">6</span>]<font></font>
<font></font>
B<font></font>
 [[<span class="hljs-number">1</span> <span class="hljs-number">4</span>]<font></font>
 [<span class="hljs-number">2</span> <span class="hljs-number">5</span>]<font></font>
 [<span class="hljs-number">3</span> <span class="hljs-number">6</span>]]<font></font>
<font></font>
B data<font></font>
 [<span class="hljs-number">1</span> <span class="hljs-number">4</span> <span class="hljs-number">2</span> <span class="hljs-number">5</span> <span class="hljs-number">3</span> <span class="hljs-number">6</span>]
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この例では、ATコンストラクトを使用して行列Aを転置しました。転置演算子は軸の順序を反転します。</font><font style="vertical-align: inherit;">3つの軸を持つ別の例を考えます。</font></font><br>
<br>
<pre><code class="python hljs">C = np.arange(<span class="hljs-number">24</span>).reshape(<span class="hljs-number">4</span>, <span class="hljs-number">-1</span>, <span class="hljs-number">2</span>)<font></font>
<font></font>
print(C.shape, np.transpose(C).shape)<font></font>
print()<font></font>
print(C[<span class="hljs-number">0</span>])<font></font>
print()<font></font>
print(C.T[:, :, <span class="hljs-number">0</span>])<font></font>
<font></font>
Out:<font></font>
[[<span class="hljs-number">0</span> <span class="hljs-number">1</span>]<font></font>
 [<span class="hljs-number">2</span> <span class="hljs-number">3</span>]<font></font>
 [<span class="hljs-number">4</span> <span class="hljs-number">5</span>]]<font></font>
<font></font>
[[<span class="hljs-number">0</span> <span class="hljs-number">2</span> <span class="hljs-number">4</span>]<font></font>
 [<span class="hljs-number">1</span> <span class="hljs-number">3</span> <span class="hljs-number">5</span>]]
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この短いエントリには、np.transpose（A）という長い対応物があります。</font><font style="vertical-align: inherit;">これは、軸の順序を置き換えるためのより用途の広いツールです。</font><font style="vertical-align: inherit;">2番目のパラメーターでは、ソース配列の軸番号のタプルを指定できます。これにより、結果の配列内での位置の順序が決まります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
たとえば、画像の最初の2つの軸を再配置します。</font><font style="vertical-align: inherit;">画像は反転しますが、色軸は変更しません。</font></font><br>
<br>
<pre><code class="python hljs">I_ = np.transpose(I, (<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>))<font></font>
<font></font>
plt.figure(num=<span class="hljs-literal">None</span>, figsize=(<span class="hljs-number">15</span>, <span class="hljs-number">15</span>), dpi=<span class="hljs-number">80</span>, facecolor=<span class="hljs-string">'w'</span>, edgecolor=<span class="hljs-string">'k'</span>)<font></font>
plt.imshow(I_)<font></font>
plt.show()<font></font>
</code></pre><br>
<img src="https://habrastorage.org/webt/qm/am/ej/qmamejo5ghalkut44wbbfmeliaq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この例では、別のswapaxesツールを使用できます。</font><font style="vertical-align: inherit;">このメソッドは、パラメーターで指定された2つの軸を交換します。</font><font style="vertical-align: inherit;">上記の例は、次のように実装できます。</font></font><br>
<br>
<pre><code class="python hljs">I_ = np.swapaxes(I, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>)
</code></pre><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;上&gt;</font></font></a><br>
<br>
<a name="p45"></a><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">配列結合</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
マージされた配列は同じ数の軸をもたなければなりません。</font><font style="vertical-align: inherit;">配列は、新しい軸の形成と組み合わせるか、または既存の軸に沿って組み合わせることができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
新しい軸の形成と組み合わせるには、元の配列はすべての軸に沿って同じ次元でなければなりません。</font></font><br>
<br>
<pre><code class="python hljs">A = np.array([[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>], [<span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>]])<font></font>
B = A[::<span class="hljs-number">-1</span>]<font></font>
C = A[:, ::<span class="hljs-number">-1</span>]<font></font>
<font></font>
D = np.stack((A, B, C))<font></font>
print(D.shape)<font></font>
D<font></font>
<font></font>
Out:<font></font>
(<span class="hljs-number">3</span>, <span class="hljs-number">2</span>, <span class="hljs-number">4</span>)<font></font>
array([[[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>],<font></font>
        [<span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>]],<font></font>
<font></font>
       [[<span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>],<font></font>
        [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]],<font></font>
<font></font>
       [[<span class="hljs-number">4</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>],<font></font>
        [<span class="hljs-number">8</span>, <span class="hljs-number">7</span>, <span class="hljs-number">6</span>, <span class="hljs-number">5</span>]]])
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
例からわかるように、オペランド配列は新しいオブジェクトのサブ配列になり、新しい軸に沿って並んでいます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
既存の軸に沿って配列を組み合わせるには、結合するために選択された軸を除くすべての軸で同じサイズでなければならず、それに沿って任意のサイズにすることができます。</font></font><br>
<br>
<pre><code class="python hljs">A = np.ones((<span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>))<font></font>
B = np.zeros((<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>))<font></font>
<font></font>
C = np.concatenate((A, B), <span class="hljs-number">1</span>)<font></font>
print(C.shape)<font></font>
C<font></font>
<font></font>
Out:<font></font>
(<span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">2</span>)<font></font>
array([[[<span class="hljs-number">1.</span>, <span class="hljs-number">1.</span>],<font></font>
        [<span class="hljs-number">0.</span>, <span class="hljs-number">0.</span>],<font></font>
        [<span class="hljs-number">0.</span>, <span class="hljs-number">0.</span>],<font></font>
        [<span class="hljs-number">0.</span>, <span class="hljs-number">0.</span>]],<font></font>
<font></font>
       [[<span class="hljs-number">1.</span>, <span class="hljs-number">1.</span>],<font></font>
        [<span class="hljs-number">0.</span>, <span class="hljs-number">0.</span>],<font></font>
        [<span class="hljs-number">0.</span>, <span class="hljs-number">0.</span>],<font></font>
        [<span class="hljs-number">0.</span>, <span class="hljs-number">0.</span>]]])
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1番目または2番目の軸に沿って組み合わせるには、それぞれvstackおよびhstackメソッドを使用できます。</font><font style="vertical-align: inherit;">これを画像の例で示します。</font><font style="vertical-align: inherit;">vstackは同じ幅の高さのイメージを結合し、hsstackは同じ高さのイメージを1つの幅に結合します。</font></font><br>
<br>
<pre><code class="python hljs">I = cv2.imread(<span class="hljs-string">'sarajevo.jpg'</span>)[:, :, ::<span class="hljs-number">-1</span>]<font></font>
<font></font>
I_ = I.reshape(I.shape[<span class="hljs-number">0</span>] // <span class="hljs-number">2</span>, <span class="hljs-number">2</span>, I.shape[<span class="hljs-number">1</span>] // <span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">-1</span>)<font></font>
<font></font>
Ih = np.hstack((I_[:, <span class="hljs-number">0</span>, :, <span class="hljs-number">0</span>], I_[:, <span class="hljs-number">0</span>, :, <span class="hljs-number">1</span>]))<font></font>
Iv = np.vstack((I_[:, <span class="hljs-number">0</span>, :, <span class="hljs-number">0</span>], I_[:, <span class="hljs-number">1</span>, :, <span class="hljs-number">0</span>]))<font></font>
<font></font>
plt.figure(num=<span class="hljs-literal">None</span>, figsize=(<span class="hljs-number">10</span>, <span class="hljs-number">10</span>), dpi=<span class="hljs-number">80</span>, facecolor=<span class="hljs-string">'w'</span>, edgecolor=<span class="hljs-string">'k'</span>)<font></font>
plt.imshow(Ih)<font></font>
plt.show()<font></font>
<font></font>
plt.figure(num=<span class="hljs-literal">None</span>, figsize=(<span class="hljs-number">10</span>, <span class="hljs-number">10</span>), dpi=<span class="hljs-number">80</span>, facecolor=<span class="hljs-string">'w'</span>, edgecolor=<span class="hljs-string">'k'</span>)<font></font>
plt.imshow(Iv)<font></font>
plt.show()<font></font>
</code></pre><br>
<img src="https://habrastorage.org/webt/-6/ob/95/-6ob95gddbk6k3cphy4jxmkz4de.png"><br>
<br>
<img src="https://habrastorage.org/webt/up/ik/dw/upikdwlnydr1bcnun2rtkcniebq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このセクションのすべての例で、結合された配列は1つのパラメーター（タプル）によって渡されることに注意してください。</font><font style="vertical-align: inherit;">オペランドの数はいくつでもかまいませんが、必ずしも2である必要はありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、配列を組み合わせるときにメモリがどうなるかにも注意してください。</font></font><br>
<br>
<pre><code class="python hljs">A = np.array([[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>], [<span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>]])<font></font>
B = A[::<span class="hljs-number">-1</span>]<font></font>
C = A[:, ::<span class="hljs-number">-1</span>]<font></font>
<font></font>
D = np.stack((A, B, C))<font></font>
D[<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>] = <span class="hljs-number">0</span><font></font>
print(A)<font></font>
<font></font>
Out:<font></font>
[[<span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">4</span>]<font></font>
 [<span class="hljs-number">5</span> <span class="hljs-number">6</span> <span class="hljs-number">7</span> <span class="hljs-number">8</span>]]
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
新しいオブジェクトが作成されるので、その中のデータは元の配列からコピーされるため、新しいデータの変更は元の配列に影響を与えません。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;上&gt;</font></font></a><br>
<br>
<a name="p6"></a><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">データ複製</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
np.repeat（A、n）演算子は、配列Aの要素を持つ1次元配列を返します。各要素はn回繰り返されます。</font></font><br>
<br>
<pre><code class="python hljs">A = np.array([[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>], [<span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>]])<font></font>
print(np.repeat(A, <span class="hljs-number">2</span>))<font></font>
<font></font>
Out:<font></font>
[<span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">3</span> <span class="hljs-number">4</span> <span class="hljs-number">4</span> <span class="hljs-number">5</span> <span class="hljs-number">5</span> <span class="hljs-number">6</span> <span class="hljs-number">6</span> <span class="hljs-number">7</span> <span class="hljs-number">7</span> <span class="hljs-number">8</span> <span class="hljs-number">8</span>]
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この変換後、配列のジオメトリを再構築して、1つの軸で重複データを収集できます。</font></font><br>
<br>
<pre><code class="python hljs">A = np.array([[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>], [<span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>]])<font></font>
B = np.repeat(A, <span class="hljs-number">2</span>).reshape(A.shape[<span class="hljs-number">0</span>], A.shape[<span class="hljs-number">1</span>], <span class="hljs-number">-1</span>)<font></font>
print(B)<font></font>
<font></font>
Out:<font></font>
[[[<span class="hljs-number">1</span> <span class="hljs-number">1</span>]<font></font>
  [<span class="hljs-number">2</span> <span class="hljs-number">2</span>]<font></font>
  [<span class="hljs-number">3</span> <span class="hljs-number">3</span>]<font></font>
  [<span class="hljs-number">4</span> <span class="hljs-number">4</span>]]<font></font>
<font></font>
 [[<span class="hljs-number">5</span> <span class="hljs-number">5</span>]<font></font>
  [<span class="hljs-number">6</span> <span class="hljs-number">6</span>]<font></font>
  [<span class="hljs-number">7</span> <span class="hljs-number">7</span>]<font></font>
  [<span class="hljs-number">8</span> <span class="hljs-number">8</span>]]]
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このオプションは、同じデータが配置される軸の位置のみが配列とスタックオペレーター自体の組み合わせとは異なります。</font><font style="vertical-align: inherit;">上記の例では、スタックを使用する場合、これが最後の軸です-最初の軸：</font></font><br>
<br>
<pre><code class="python hljs">A = np.array([[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>], [<span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>]])<font></font>
B = np.stack((A, A))<font></font>
print(B)<font></font>
<font></font>
Out:<font></font>
[[[<span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">4</span>]<font></font>
  [<span class="hljs-number">5</span> <span class="hljs-number">6</span> <span class="hljs-number">7</span> <span class="hljs-number">8</span>]]<font></font>
<font></font>
 [[<span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">4</span>]<font></font>
  [<span class="hljs-number">5</span> <span class="hljs-number">6</span> <span class="hljs-number">7</span> <span class="hljs-number">8</span>]]]
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
データがどのように複製されても、次のステップは、同じ値が立っている軸を軸システムの任意の位置に移動することです。</font></font><br>
<br>
<pre><code class="python hljs">A = np.array([[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>], [<span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>]])<font></font>
<font></font>
B = np.transpose(np.stack((A, A)), (<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>))<font></font>
C = np.transpose(np.repeat(A, <span class="hljs-number">2</span>).reshape(A.shape[<span class="hljs-number">0</span>], A.shape[<span class="hljs-number">1</span>], <span class="hljs-number">-1</span>), (<span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>))<font></font>
<font></font>
print(<span class="hljs-string">'B\n'</span>, B)<font></font>
print(<span class="hljs-string">'\nC\n'</span>, C)<font></font>
<font></font>
Out:<font></font>
B<font></font>
 [[[<span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">4</span>]<font></font>
  [<span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">4</span>]]<font></font>
<font></font>
 [[<span class="hljs-number">5</span> <span class="hljs-number">6</span> <span class="hljs-number">7</span> <span class="hljs-number">8</span>]<font></font>
  [<span class="hljs-number">5</span> <span class="hljs-number">6</span> <span class="hljs-number">7</span> <span class="hljs-number">8</span>]]]<font></font>
<font></font>
C<font></font>
 [[[<span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">4</span>]<font></font>
  [<span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">4</span>]]<font></font>
<font></font>
 [[<span class="hljs-number">5</span> <span class="hljs-number">6</span> <span class="hljs-number">7</span> <span class="hljs-number">8</span>]<font></font>
  [<span class="hljs-number">5</span> <span class="hljs-number">6</span> <span class="hljs-number">7</span> <span class="hljs-number">8</span>]]]
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
要素の繰り返しを使用して任意の軸を「ストレッチ」する場合は、同じ値を持つ軸を</font><font style="vertical-align: inherit;">（転置を使用して）エキスパンドの</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">後</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に配置</font><b><font style="vertical-align: inherit;">し、</font></b><font style="vertical-align: inherit;">次に（形状変更を使用して）これらの2つの軸を組み合わせる</font><font style="vertical-align: inherit;">必要があります</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">行を複製して垂直軸に沿って画像を引き伸ばす例を考えてみましょう：</font></font><br>
<br>
<pre><code class="python hljs">I0 = cv2.imread(<span class="hljs-string">'sarajevo.jpg'</span>)[:, :, ::<span class="hljs-number">-1</span>]     <span class="hljs-comment">#   </span>
I1 = I.reshape(I.shape[<span class="hljs-number">0</span>] // <span class="hljs-number">2</span>, <span class="hljs-number">2</span>, I.shape[<span class="hljs-number">1</span>] // <span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">-1</span>)[:, <span class="hljs-number">0</span>, :, <span class="hljs-number">0</span>]  <span class="hljs-comment">#     </span><font></font>
<font></font>
I2 = np.repeat(I1, <span class="hljs-number">2</span>)  <span class="hljs-comment">#  </span>
I3 = I2.reshape(I1.shape[<span class="hljs-number">0</span>], I1.shape[<span class="hljs-number">1</span>], I1.shape[<span class="hljs-number">2</span>], <span class="hljs-number">-1</span>)<font></font>
I4 = np.transpose(I3, (<span class="hljs-number">0</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>)) <span class="hljs-comment">#   </span>
I5 = I4.reshape(<span class="hljs-number">-1</span>, I1.shape[<span class="hljs-number">1</span>], I1.shape[<span class="hljs-number">2</span>]) <span class="hljs-comment">#  </span><font></font>
<font></font>
print(<span class="hljs-string">'I0'</span>, I0.shape)<font></font>
print(<span class="hljs-string">'I1'</span>, I1.shape)<font></font>
print(<span class="hljs-string">'I2'</span>, I2.shape)<font></font>
print(<span class="hljs-string">'I3'</span>, I3.shape)<font></font>
print(<span class="hljs-string">'I4'</span>, I4.shape)<font></font>
print(<span class="hljs-string">'I5'</span>, I5.shape)<font></font>
<font></font>
plt.figure(num=<span class="hljs-literal">None</span>, figsize=(<span class="hljs-number">10</span>, <span class="hljs-number">10</span>), dpi=<span class="hljs-number">80</span>, facecolor=<span class="hljs-string">'w'</span>, edgecolor=<span class="hljs-string">'k'</span>)<font></font>
plt.imshow(I5)<font></font>
plt.show()<font></font>
<font></font>
Out:<font></font>
I0 (<span class="hljs-number">1280</span>, <span class="hljs-number">1920</span>, <span class="hljs-number">3</span>)<font></font>
I1 (<span class="hljs-number">640</span>, <span class="hljs-number">960</span>, <span class="hljs-number">3</span>)<font></font>
I2 (<span class="hljs-number">3686400</span>,)<font></font>
I3 (<span class="hljs-number">640</span>, <span class="hljs-number">960</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>)<font></font>
I4 (<span class="hljs-number">640</span>, <span class="hljs-number">2</span>, <span class="hljs-number">960</span>, <span class="hljs-number">3</span>)<font></font>
I5 (<span class="hljs-number">1280</span>, <span class="hljs-number">960</span>, <span class="hljs-number">3</span>)
</code></pre><br>
<img src="https://habrastorage.org/webt/e1/kx/0w/e1kx0wvkavizpfamsclewgm8wj8.png"><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;上&gt;</font></font></a><br>
<br>
<a name="p7"></a><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">配列要素の数学演算</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AとBが同じサイズの配列である場合、それらを加算、乗算、減算、除算、累乗することができます。</font><font style="vertical-align: inherit;">これらの操作は</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要素</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ごとに実行</font><b><font style="vertical-align: inherit;">され</font></b><font style="vertical-align: inherit;">、結果の配列は元の配列とジオメトリが一致し、その各要素は元の配列の要素のペアに対する対応する操作の結果になります。</font></font><br>
<br>
<pre><code class="python hljs">A = np.array([[<span class="hljs-number">-1.</span>, <span class="hljs-number">2.</span>, <span class="hljs-number">3.</span>], [<span class="hljs-number">4.</span>, <span class="hljs-number">5.</span>, <span class="hljs-number">6.</span>], [<span class="hljs-number">7.</span>, <span class="hljs-number">8.</span>, <span class="hljs-number">9.</span>]])<font></font>
B = np.array([[<span class="hljs-number">1.</span>, <span class="hljs-number">-2.</span>, <span class="hljs-number">-3.</span>], [<span class="hljs-number">7.</span>, <span class="hljs-number">8.</span>, <span class="hljs-number">9.</span>], [<span class="hljs-number">4.</span>, <span class="hljs-number">5.</span>, <span class="hljs-number">6.</span>], ])<font></font>
<font></font>
C = A + B<font></font>
D = A - B<font></font>
E = A * B<font></font>
F = A / B<font></font>
G = A ** B<font></font>
<font></font>
print(<span class="hljs-string">'+\n'</span>, C, <span class="hljs-string">'\n'</span>)<font></font>
print(<span class="hljs-string">'-\n'</span>, D, <span class="hljs-string">'\n'</span>)<font></font>
print(<span class="hljs-string">'*\n'</span>, E, <span class="hljs-string">'\n'</span>)<font></font>
print(<span class="hljs-string">'/\n'</span>, F, <span class="hljs-string">'\n'</span>)<font></font>
print(<span class="hljs-string">'**\n'</span>, G, <span class="hljs-string">'\n'</span>)<font></font>
<font></font>
Out:<font></font>
+<font></font>
 [[ <span class="hljs-number">0.</span>  <span class="hljs-number">0.</span>  <span class="hljs-number">0.</span>]<font></font>
 [<span class="hljs-number">11.</span> <span class="hljs-number">13.</span> <span class="hljs-number">15.</span>]<font></font>
 [<span class="hljs-number">11.</span> <span class="hljs-number">13.</span> <span class="hljs-number">15.</span>]] <font></font>
<font></font>
-<font></font>
 [[<span class="hljs-number">-2.</span>  <span class="hljs-number">4.</span>  <span class="hljs-number">6.</span>]<font></font>
 [<span class="hljs-number">-3.</span> <span class="hljs-number">-3.</span> <span class="hljs-number">-3.</span>]<font></font>
 [ <span class="hljs-number">3.</span>  <span class="hljs-number">3.</span>  <span class="hljs-number">3.</span>]] <font></font>
<font></font>
*<font></font>
 [[<span class="hljs-number">-1.</span> <span class="hljs-number">-4.</span> <span class="hljs-number">-9.</span>]<font></font>
 [<span class="hljs-number">28.</span> <span class="hljs-number">40.</span> <span class="hljs-number">54.</span>]<font></font>
 [<span class="hljs-number">28.</span> <span class="hljs-number">40.</span> <span class="hljs-number">54.</span>]] <font></font>
<font></font>
/<font></font>
 [[<span class="hljs-number">-1.</span>         <span class="hljs-number">-1.</span>         <span class="hljs-number">-1.</span>        ]<font></font>
 [ <span class="hljs-number">0.57142857</span>  <span class="hljs-number">0.625</span>       <span class="hljs-number">0.66666667</span>]<font></font>
 [ <span class="hljs-number">1.75</span>        <span class="hljs-number">1.6</span>         <span class="hljs-number">1.5</span>       ]] <font></font>
<font></font>
**<font></font>
 [[<span class="hljs-number">-1.0000000e+00</span>  <span class="hljs-number">2.5000000e-01</span>  <span class="hljs-number">3.7037037e-02</span>]<font></font>
 [ <span class="hljs-number">1.6384000e+04</span>  <span class="hljs-number">3.9062500e+05</span>  <span class="hljs-number">1.0077696e+07</span>]<font></font>
 [ <span class="hljs-number">2.4010000e+03</span>  <span class="hljs-number">3.2768000e+04</span>  <span class="hljs-number">5.3144100e+05</span>]]
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
配列と数値に対して、上記の操作を実行できます。</font><font style="vertical-align: inherit;">この場合、操作は配列の各要素に対しても実行されます。</font></font><br>
<br>
<pre><code class="python hljs">A = np.array([[<span class="hljs-number">-1.</span>, <span class="hljs-number">2.</span>, <span class="hljs-number">3.</span>], [<span class="hljs-number">4.</span>, <span class="hljs-number">5.</span>, <span class="hljs-number">6.</span>], [<span class="hljs-number">7.</span>, <span class="hljs-number">8.</span>, <span class="hljs-number">9.</span>]])<font></font>
B = <span class="hljs-number">-2.</span><font></font>
<font></font>
C = A + B<font></font>
D = A - B<font></font>
E = A * B<font></font>
F = A / B<font></font>
G = A ** B<font></font>
<font></font>
print(<span class="hljs-string">'+\n'</span>, C, <span class="hljs-string">'\n'</span>)<font></font>
print(<span class="hljs-string">'-\n'</span>, D, <span class="hljs-string">'\n'</span>)<font></font>
print(<span class="hljs-string">'*\n'</span>, E, <span class="hljs-string">'\n'</span>)<font></font>
print(<span class="hljs-string">'/\n'</span>, F, <span class="hljs-string">'\n'</span>)<font></font>
print(<span class="hljs-string">'**\n'</span>, G, <span class="hljs-string">'\n'</span>)<font></font>
<font></font>
Out:<font></font>
+<font></font>
 [[<span class="hljs-number">-3.</span>  <span class="hljs-number">0.</span>  <span class="hljs-number">1.</span>]<font></font>
 [ <span class="hljs-number">2.</span>  <span class="hljs-number">3.</span>  <span class="hljs-number">4.</span>]<font></font>
 [ <span class="hljs-number">5.</span>  <span class="hljs-number">6.</span>  <span class="hljs-number">7.</span>]] <font></font>
<font></font>
-<font></font>
 [[ <span class="hljs-number">1.</span>  <span class="hljs-number">4.</span>  <span class="hljs-number">5.</span>]<font></font>
 [ <span class="hljs-number">6.</span>  <span class="hljs-number">7.</span>  <span class="hljs-number">8.</span>]<font></font>
 [ <span class="hljs-number">9.</span> <span class="hljs-number">10.</span> <span class="hljs-number">11.</span>]] <font></font>
<font></font>
*<font></font>
 [[  <span class="hljs-number">2.</span>  <span class="hljs-number">-4.</span>  <span class="hljs-number">-6.</span>]<font></font>
 [ <span class="hljs-number">-8.</span> <span class="hljs-number">-10.</span> <span class="hljs-number">-12.</span>]<font></font>
 [<span class="hljs-number">-14.</span> <span class="hljs-number">-16.</span> <span class="hljs-number">-18.</span>]] <font></font>
<font></font>
/<font></font>
 [[ <span class="hljs-number">0.5</span> <span class="hljs-number">-1.</span>  <span class="hljs-number">-1.5</span>]<font></font>
 [<span class="hljs-number">-2.</span>  <span class="hljs-number">-2.5</span> <span class="hljs-number">-3.</span> ]<font></font>
 [<span class="hljs-number">-3.5</span> <span class="hljs-number">-4.</span>  <span class="hljs-number">-4.5</span>]] <font></font>
<font></font>
**<font></font>
 [[<span class="hljs-number">1.</span>         <span class="hljs-number">0.25</span>       <span class="hljs-number">0.11111111</span>]<font></font>
 [<span class="hljs-number">0.0625</span>     <span class="hljs-number">0.04</span>       <span class="hljs-number">0.02777778</span>]<font></font>
 [<span class="hljs-number">0.02040816</span> <span class="hljs-number">0.015625</span>   <span class="hljs-number">0.01234568</span>]] 
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
多次元配列は、要素が配列（他の軸）であるフラット配列（最初の軸）と見なすことができると考えると、Bのジオメトリが最初の軸に沿った固定値でサブ配列Aのジオメトリと一致する場合、配列AおよびBで考慮される操作を実行できます。 。</font><font style="vertical-align: inherit;">つまり、軸数とサイズが同じA [i]とBです。この場合、配列A [i]とBはそれぞれ、配列で定義された演算のオペランドになります。</font></font><br>
<br>
<pre><code class="python hljs">A = np.array([[<span class="hljs-number">1.</span>, <span class="hljs-number">2.</span>, <span class="hljs-number">3.</span>], [<span class="hljs-number">4.</span>, <span class="hljs-number">5.</span>, <span class="hljs-number">6.</span>], [<span class="hljs-number">7.</span>, <span class="hljs-number">8.</span>, <span class="hljs-number">9.</span>]])<font></font>
B = np.array([<span class="hljs-number">-1.1</span>, <span class="hljs-number">-1.2</span>, <span class="hljs-number">-1.3</span>])<font></font>
<font></font>
C = A.T + B<font></font>
D = A.T - B<font></font>
E = A.T * B<font></font>
F = A.T / B<font></font>
G = A.T ** B<font></font>
<font></font>
print(<span class="hljs-string">'+\n'</span>, C, <span class="hljs-string">'\n'</span>)<font></font>
print(<span class="hljs-string">'-\n'</span>, D, <span class="hljs-string">'\n'</span>)<font></font>
print(<span class="hljs-string">'*\n'</span>, E, <span class="hljs-string">'\n'</span>)<font></font>
print(<span class="hljs-string">'/\n'</span>, F, <span class="hljs-string">'\n'</span>)<font></font>
print(<span class="hljs-string">'**\n'</span>, G, <span class="hljs-string">'\n'</span>)<font></font>
<font></font>
Out:<font></font>
+<font></font>
 [[<span class="hljs-number">-0.1</span>  <span class="hljs-number">2.8</span>  <span class="hljs-number">5.7</span>]<font></font>
 [ <span class="hljs-number">0.9</span>  <span class="hljs-number">3.8</span>  <span class="hljs-number">6.7</span>]<font></font>
 [ <span class="hljs-number">1.9</span>  <span class="hljs-number">4.8</span>  <span class="hljs-number">7.7</span>]] <font></font>
<font></font>
-<font></font>
 [[ <span class="hljs-number">2.1</span>  <span class="hljs-number">5.2</span>  <span class="hljs-number">8.3</span>]<font></font>
 [ <span class="hljs-number">3.1</span>  <span class="hljs-number">6.2</span>  <span class="hljs-number">9.3</span>]<font></font>
 [ <span class="hljs-number">4.1</span>  <span class="hljs-number">7.2</span> <span class="hljs-number">10.3</span>]] <font></font>
<font></font>
*<font></font>
 [[ <span class="hljs-number">-1.1</span>  <span class="hljs-number">-4.8</span>  <span class="hljs-number">-9.1</span>]<font></font>
 [ <span class="hljs-number">-2.2</span>  <span class="hljs-number">-6.</span>  <span class="hljs-number">-10.4</span>]<font></font>
 [ <span class="hljs-number">-3.3</span>  <span class="hljs-number">-7.2</span> <span class="hljs-number">-11.7</span>]] <font></font>
<font></font>
/<font></font>
 [[<span class="hljs-number">-0.90909091</span> <span class="hljs-number">-3.33333333</span> <span class="hljs-number">-5.38461538</span>]<font></font>
 [<span class="hljs-number">-1.81818182</span> <span class="hljs-number">-4.16666667</span> <span class="hljs-number">-6.15384615</span>]<font></font>
 [<span class="hljs-number">-2.72727273</span> <span class="hljs-number">-5.</span>         <span class="hljs-number">-6.92307692</span>]] <font></font>
<font></font>
**<font></font>
 [[<span class="hljs-number">1.</span>         <span class="hljs-number">0.18946457</span> <span class="hljs-number">0.07968426</span>]<font></font>
 [<span class="hljs-number">0.4665165</span>  <span class="hljs-number">0.14495593</span> <span class="hljs-number">0.06698584</span>]<font></font>
 [<span class="hljs-number">0.29865282</span> <span class="hljs-number">0.11647119</span> <span class="hljs-number">0.05747576</span>]] 
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この例では、配列Bが配列Aの各行で操作されます。別の軸に沿ってサブ配列の次数を乗算/除算/追加/減算/上げる必要がある場合は、転置を使用して目的の軸を最初に配置し、その場所に戻す必要があります。</font><font style="vertical-align: inherit;">上記の例を考えますが、配列Aの列のベクトルBを乗算します。</font></font><br>
<br>
<pre><code class="python hljs">A = np.array([[<span class="hljs-number">1.</span>, <span class="hljs-number">2.</span>, <span class="hljs-number">3.</span>], [<span class="hljs-number">4.</span>, <span class="hljs-number">5.</span>, <span class="hljs-number">6.</span>], [<span class="hljs-number">7.</span>, <span class="hljs-number">8.</span>, <span class="hljs-number">9.</span>]])<font></font>
B = np.array([<span class="hljs-number">-1.1</span>, <span class="hljs-number">-1.2</span>, <span class="hljs-number">-1.3</span>])<font></font>
<font></font>
C = (A.T + B).T<font></font>
D = (A.T - B).T<font></font>
E = (A.T * B).T<font></font>
F = (A.T / B).T<font></font>
G = (A.T ** B).T<font></font>
<font></font>
print(<span class="hljs-string">'+\n'</span>, C, <span class="hljs-string">'\n'</span>)<font></font>
print(<span class="hljs-string">'-\n'</span>, D, <span class="hljs-string">'\n'</span>)<font></font>
print(<span class="hljs-string">'*\n'</span>, E, <span class="hljs-string">'\n'</span>)<font></font>
print(<span class="hljs-string">'/\n'</span>, F, <span class="hljs-string">'\n'</span>)<font></font>
print(<span class="hljs-string">'**\n'</span>, G, <span class="hljs-string">'\n'</span>)<font></font>
<font></font>
Out:<font></font>
+<font></font>
 [[<span class="hljs-number">-0.1</span>  <span class="hljs-number">0.9</span>  <span class="hljs-number">1.9</span>]<font></font>
 [ <span class="hljs-number">2.8</span>  <span class="hljs-number">3.8</span>  <span class="hljs-number">4.8</span>]<font></font>
 [ <span class="hljs-number">5.7</span>  <span class="hljs-number">6.7</span>  <span class="hljs-number">7.7</span>]] <font></font>
<font></font>
-<font></font>
 [[ <span class="hljs-number">2.1</span>  <span class="hljs-number">3.1</span>  <span class="hljs-number">4.1</span>]<font></font>
 [ <span class="hljs-number">5.2</span>  <span class="hljs-number">6.2</span>  <span class="hljs-number">7.2</span>]<font></font>
 [ <span class="hljs-number">8.3</span>  <span class="hljs-number">9.3</span> <span class="hljs-number">10.3</span>]] <font></font>
<font></font>
*<font></font>
 [[ <span class="hljs-number">-1.1</span>  <span class="hljs-number">-2.2</span>  <span class="hljs-number">-3.3</span>]<font></font>
 [ <span class="hljs-number">-4.8</span>  <span class="hljs-number">-6.</span>   <span class="hljs-number">-7.2</span>]<font></font>
 [ <span class="hljs-number">-9.1</span> <span class="hljs-number">-10.4</span> <span class="hljs-number">-11.7</span>]] <font></font>
<font></font>
/<font></font>
 [[<span class="hljs-number">-0.90909091</span> <span class="hljs-number">-1.81818182</span> <span class="hljs-number">-2.72727273</span>]<font></font>
 [<span class="hljs-number">-3.33333333</span> <span class="hljs-number">-4.16666667</span> <span class="hljs-number">-5.</span>        ]<font></font>
 [<span class="hljs-number">-5.38461538</span> <span class="hljs-number">-6.15384615</span> <span class="hljs-number">-6.92307692</span>]] <font></font>
<font></font>
**<font></font>
 [[<span class="hljs-number">1.</span>         <span class="hljs-number">0.4665165</span>  <span class="hljs-number">0.29865282</span>]<font></font>
 [<span class="hljs-number">0.18946457</span> <span class="hljs-number">0.14495593</span> <span class="hljs-number">0.11647119</span>]<font></font>
 [<span class="hljs-number">0.07968426</span> <span class="hljs-number">0.06698584</span> <span class="hljs-number">0.05747576</span>]] 
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
より複雑な関数（たとえば、三角関数、指数、対数、度とラジアン間の変換、モジュール、平方根など）の場合、NumPyに実装があります。</font><font style="vertical-align: inherit;">指数と対数の例を考えてみましょう。</font></font><br>
 <br>
<pre><code class="python hljs">A = np.array([[<span class="hljs-number">1.</span>, <span class="hljs-number">2.</span>, <span class="hljs-number">3.</span>], [<span class="hljs-number">4.</span>, <span class="hljs-number">5.</span>, <span class="hljs-number">6.</span>], [<span class="hljs-number">7.</span>, <span class="hljs-number">8.</span>, <span class="hljs-number">9.</span>]])<font></font>
B = np.exp(A)<font></font>
C = np.log(B)<font></font>
<font></font>
print(<span class="hljs-string">'A'</span>, A, <span class="hljs-string">'\n'</span>)<font></font>
print(<span class="hljs-string">'B'</span>, B, <span class="hljs-string">'\n'</span>)<font></font>
print(<span class="hljs-string">'C'</span>, C, <span class="hljs-string">'\n'</span>)<font></font>
<font></font>
Out:<font></font>
A [[<span class="hljs-number">1.</span> <span class="hljs-number">2.</span> <span class="hljs-number">3.</span>]<font></font>
 [<span class="hljs-number">4.</span> <span class="hljs-number">5.</span> <span class="hljs-number">6.</span>]<font></font>
 [<span class="hljs-number">7.</span> <span class="hljs-number">8.</span> <span class="hljs-number">9.</span>]] <font></font>
<font></font>
B [[<span class="hljs-number">2.71828183e+00</span> <span class="hljs-number">7.38905610e+00</span> <span class="hljs-number">2.00855369e+01</span>]<font></font>
 [<span class="hljs-number">5.45981500e+01</span> <span class="hljs-number">1.48413159e+02</span> <span class="hljs-number">4.03428793e+02</span>]<font></font>
 [<span class="hljs-number">1.09663316e+03</span> <span class="hljs-number">2.98095799e+03</span> <span class="hljs-number">8.10308393e+03</span>]] <font></font>
<font></font>
C [[<span class="hljs-number">1.</span> <span class="hljs-number">2.</span> <span class="hljs-number">3.</span>]<font></font>
 [<span class="hljs-number">4.</span> <span class="hljs-number">5.</span> <span class="hljs-number">6.</span>]<font></font>
 [<span class="hljs-number">7.</span> <span class="hljs-number">8.</span> <span class="hljs-number">9.</span>]] 
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
NumPyの数学演算の完全なリストは、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">こちらにあります</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;上&gt;</font></font></a><br>
<br>
<a name="p8"></a><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">行列の乗算</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
上記の配列の積の演算は、要素ごとに実行されます。</font><font style="vertical-align: inherit;">また、配列に対する線形代数の規則に従ってテンソルよりも演算を実行する必要がある場合は、ドット（A、B）メソッドを使用できます。</font><font style="vertical-align: inherit;">オペランドのタイプに応じて、関数は以下を実行します。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 引数がスカラー（数値）の場合、乗算が実行されます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 引数がベクトル（1次元配列）とスカラーの場合、配列は数値で乗算されます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 引数がベクトルの場合、スカラー乗算が実行されます（要素ごとの積の合計）。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 引数がテンソル（多次元配列）およびスカラーの場合、ベクトルは数値で乗算されます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> テンソルの引数の場合、最初の引数の最後の軸に沿ったテンソルと最後から2番目– 2番目の積が実行されます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 引数が行列の場合、行列の積が実行されます（これはテンソルの積の特殊なケースです）。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 引数が行列とベクトルの場合、行列とベクトルの積が実行されます（これは、テンソルの積の特殊なケースでもあります）。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
操作を実行するには、対応するサイズが一致している必要があります。長さベクトルの場合、テンソルの場合は、要素ごとの積が合計される軸に沿った長さです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
スカラーとベクトルの例を考えます。</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-comment"># </span>
A = <span class="hljs-number">2</span>
B = <span class="hljs-number">3</span><font></font>
<font></font>
print(np.dot(A, B), <span class="hljs-string">'\n'</span>)<font></font>
<font></font>
<span class="hljs-comment">#   </span>
A = np.array([<span class="hljs-number">2.</span>, <span class="hljs-number">3.</span>, <span class="hljs-number">4.</span>])<font></font>
B = <span class="hljs-number">3</span><font></font>
<font></font>
print(np.dot(A, B), <span class="hljs-string">'\n'</span>)<font></font>
<font></font>
<span class="hljs-comment"># </span>
A = np.array([<span class="hljs-number">2.</span>, <span class="hljs-number">3.</span>, <span class="hljs-number">4.</span>])<font></font>
B = np.array([<span class="hljs-number">-2.</span>, <span class="hljs-number">1.</span>, <span class="hljs-number">-1.</span>])<font></font>
<font></font>
print(np.dot(A, B), <span class="hljs-string">'\n'</span>)<font></font>
<font></font>
<span class="hljs-comment">#   </span>
A = np.array([[<span class="hljs-number">2.</span>, <span class="hljs-number">3.</span>, <span class="hljs-number">4.</span>], [<span class="hljs-number">5.</span>, <span class="hljs-number">6.</span>, <span class="hljs-number">7.</span>]])<font></font>
B = <span class="hljs-number">2</span><font></font>
<font></font>
print(np.dot(A, B), <span class="hljs-string">'\n'</span>)<font></font>
<font></font>
Out:<font></font>
<span class="hljs-number">6</span> <font></font>
<font></font>
[ <span class="hljs-number">6.</span>  <span class="hljs-number">9.</span> <span class="hljs-number">12.</span>] <font></font>
<font></font>
<span class="hljs-number">-5.0</span> <font></font>
<font></font>
[[ <span class="hljs-number">4.</span>  <span class="hljs-number">6.</span>  <span class="hljs-number">8.</span>]<font></font>
 [<span class="hljs-number">10.</span> <span class="hljs-number">12.</span> <span class="hljs-number">14.</span>]] 
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
テンソルを使用して、結果の配列のジオメトリのサイズがどのように変化するかのみを調べます。</font></font><br>
<pre><code class="python hljs"><span class="hljs-comment">#  ( 2)   ( 1)</span>
A = np.ones((<span class="hljs-number">5</span>, <span class="hljs-number">6</span>))<font></font>
B = np.ones(<span class="hljs-number">6</span>)<font></font>
<font></font>
print(<span class="hljs-string">'A:'</span>, A.shape, <span class="hljs-string">'\nB:'</span>, B.shape, <span class="hljs-string">'\nresult:'</span>, np.dot(A, B).shape, <span class="hljs-string">'\n\n'</span>)<font></font>
<font></font>
<span class="hljs-comment">#  ( 2)</span>
A = np.ones((<span class="hljs-number">5</span>, <span class="hljs-number">6</span>))<font></font>
B = np.ones((<span class="hljs-number">6</span>, <span class="hljs-number">7</span>))<font></font>
<font></font>
print(<span class="hljs-string">'A:'</span>, A.shape, <span class="hljs-string">'\nB:'</span>, B.shape, <span class="hljs-string">'\nresult:'</span>, np.dot(A, B).shape, <span class="hljs-string">'\n\n'</span>)<font></font>
<font></font>
<span class="hljs-comment">#  </span>
A = np.ones((<span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>))<font></font>
B = np.ones((<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">8</span>, <span class="hljs-number">4</span>))<font></font>
<font></font>
print(<span class="hljs-string">'A:'</span>, A.shape, <span class="hljs-string">'\nB:'</span>, B.shape, <span class="hljs-string">'\nresult:'</span>, np.dot(A, B).shape, <span class="hljs-string">'\n\n'</span>)<font></font>
<font></font>
Out:<font></font>
A: (<span class="hljs-number">5</span>, <span class="hljs-number">6</span>) <font></font>
B: (<span class="hljs-number">6</span>,) <font></font>
result: (<span class="hljs-number">5</span>,) <font></font>
<font></font>
<font></font>
A: (<span class="hljs-number">5</span>, <span class="hljs-number">6</span>) <font></font>
B: (<span class="hljs-number">6</span>, <span class="hljs-number">7</span>) <font></font>
result: (<span class="hljs-number">5</span>, <span class="hljs-number">7</span>) <font></font>
<font></font>
<font></font>
A: (<span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>) <font></font>
B: (<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">8</span>, <span class="hljs-number">4</span>) <font></font>
result: (<span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>) 
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ドットに対して定義されたものではなく、他の軸を使用してテンソル積を実行するには、明示的な軸でテンソルドットを使用できます。</font></font><br>
<br>
<pre><code class="python hljs">A = np.ones((<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">7</span>, <span class="hljs-number">4</span>))<font></font>
B = np.ones((<span class="hljs-number">5</span>, <span class="hljs-number">7</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>))<font></font>
<font></font>
print(<span class="hljs-string">'A:'</span>, A.shape, <span class="hljs-string">'\nB:'</span>, B.shape, <span class="hljs-string">'\nresult:'</span>, np.tensordot(A, B, [<span class="hljs-number">2</span>, <span class="hljs-number">1</span>]).shape, <span class="hljs-string">'\n\n'</span>)<font></font>
<font></font>
Out:<font></font>
A: (<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">7</span>, <span class="hljs-number">4</span>) <font></font>
B: (<span class="hljs-number">5</span>, <span class="hljs-number">7</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>) <font></font>
result: (<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>)  
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初の配列の3番目の軸と2番目の配列の2番目の軸を使用することを明示的に示しました（これらの軸に沿ったサイズは一致する必要があります）。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;上&gt;</font></font></a><br>
<br>
<a name="p9"></a><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アグリゲーター</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アグリゲーターはNumPyメソッドであり、一部の軸に沿ってデータを積分特性に置き換えることができます。たとえば、任意の1つまたは複数の軸に沿った平均値、最大値、最小値、変動またはその他の特性を計算し、このデータから新しい配列を形成できます。新しい配列の形状には、アグリゲーターがカウントされた軸を除いて、元の配列のすべての軸が含まれます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
例として、ランダムな値を持つ配列を作成します。次に、その列で最小値、最大値、平均値を見つけます。</font></font><br>
<br>
<pre><code class="python hljs">A = np.random.rand(<span class="hljs-number">4</span>, <span class="hljs-number">5</span>)<font></font>
<font></font>
print(<span class="hljs-string">'A\n'</span>, A, <span class="hljs-string">'\n'</span>)<font></font>
<font></font>
print(<span class="hljs-string">'min\n'</span>, np.min(A, <span class="hljs-number">0</span>), <span class="hljs-string">'\n'</span>)<font></font>
print(<span class="hljs-string">'max\n'</span>, np.max(A, <span class="hljs-number">0</span>), <span class="hljs-string">'\n'</span>)<font></font>
print(<span class="hljs-string">'mean\n'</span>, np.mean(A, <span class="hljs-number">0</span>), <span class="hljs-string">'\n'</span>)<font></font>
print(<span class="hljs-string">'average\n'</span>, np.average(A, <span class="hljs-number">0</span>), <span class="hljs-string">'\n'</span>)<font></font>
<font></font>
Out:<font></font>
A<font></font>
 [[<span class="hljs-number">0.58481838</span> <span class="hljs-number">0.32381665</span> <span class="hljs-number">0.53849901</span> <span class="hljs-number">0.32401355</span> <span class="hljs-number">0.05442121</span>]<font></font>
 [<span class="hljs-number">0.34301843</span> <span class="hljs-number">0.38620863</span> <span class="hljs-number">0.52689694</span> <span class="hljs-number">0.93233065</span> <span class="hljs-number">0.73474868</span>]<font></font>
 [<span class="hljs-number">0.09888225</span> <span class="hljs-number">0.03710514</span> <span class="hljs-number">0.17910721</span> <span class="hljs-number">0.05245685</span> <span class="hljs-number">0.00962319</span>]<font></font>
 [<span class="hljs-number">0.74758173</span> <span class="hljs-number">0.73529492</span> <span class="hljs-number">0.58517879</span> <span class="hljs-number">0.11785686</span> <span class="hljs-number">0.81204847</span>]] <font></font>
<font></font>
min<font></font>
 [<span class="hljs-number">0.09888225</span> <span class="hljs-number">0.03710514</span> <span class="hljs-number">0.17910721</span> <span class="hljs-number">0.05245685</span> <span class="hljs-number">0.00962319</span>] <font></font>
<font></font>
max<font></font>
 [<span class="hljs-number">0.74758173</span> <span class="hljs-number">0.73529492</span> <span class="hljs-number">0.58517879</span> <span class="hljs-number">0.93233065</span> <span class="hljs-number">0.81204847</span>] <font></font>
<font></font>
mean<font></font>
 [<span class="hljs-number">0.4435752</span>  <span class="hljs-number">0.37060634</span> <span class="hljs-number">0.45742049</span> <span class="hljs-number">0.35666448</span> <span class="hljs-number">0.40271039</span>] <font></font>
<font></font>
average<font></font>
 [<span class="hljs-number">0.4435752</span>  <span class="hljs-number">0.37060634</span> <span class="hljs-number">0.45742049</span> <span class="hljs-number">0.35666448</span> <span class="hljs-number">0.40271039</span>]
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この使用法では、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">平均</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">平均</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は同義語のように見えます。</font><font style="vertical-align: inherit;">ただし、これらの関数には追加のパラメーターの異なるセットがあります。</font><font style="vertical-align: inherit;">平均化されたデータのマスキングと重み付けにはさまざまな可能性があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
複数の軸で積分特性を計算できます。</font></font><br>
<br>
<pre><code class="python hljs">A = np.ones((<span class="hljs-number">10</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>))<font></font>
<font></font>
print(<span class="hljs-string">'sum\n'</span>, np.sum(A, (<span class="hljs-number">0</span>, <span class="hljs-number">2</span>)), <span class="hljs-string">'\n'</span>)<font></font>
print(<span class="hljs-string">'min\n'</span>, np.min(A, (<span class="hljs-number">0</span>, <span class="hljs-number">2</span>)), <span class="hljs-string">'\n'</span>)<font></font>
print(<span class="hljs-string">'max\n'</span>, np.max(A, (<span class="hljs-number">0</span>, <span class="hljs-number">2</span>)), <span class="hljs-string">'\n'</span>)<font></font>
print(<span class="hljs-string">'mean\n'</span>, np.mean(A, (<span class="hljs-number">0</span>, <span class="hljs-number">2</span>)), <span class="hljs-string">'\n'</span>)<font></font>
<font></font>
Out:<font></font>
sum<font></font>
 [<span class="hljs-number">50.</span> <span class="hljs-number">50.</span> <span class="hljs-number">50.</span> <span class="hljs-number">50.</span>] <font></font>
<font></font>
min<font></font>
 [<span class="hljs-number">1.</span> <span class="hljs-number">1.</span> <span class="hljs-number">1.</span> <span class="hljs-number">1.</span>] <font></font>
<font></font>
max<font></font>
 [<span class="hljs-number">1.</span> <span class="hljs-number">1.</span> <span class="hljs-number">1.</span> <span class="hljs-number">1.</span>] <font></font>
<font></font>
mean<font></font>
 [<span class="hljs-number">1.</span> <span class="hljs-number">1.</span> <span class="hljs-number">1.</span> <span class="hljs-number">1.</span>] 
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この例では、別の積分特性合計、つまり合計が考慮されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アグリゲーターのリストは次のようになります。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sum：sumとnansum-nanで正しく管理されるバリアント。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仕事：prodとnanprod;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">平均と期待値：平均と平均（nanmean）、</font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nanaverageはあり</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ませ</font><s><font style="vertical-align: inherit;">ん</font></s><font style="vertical-align: inherit;">。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">中央値：中央値と南中央値;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パーセンタイル：パーセンタイルとナンパーセンタイル。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">バリエーション：varおよびnanvar;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">標準偏差（変動の平方根）：stdおよびnanstd;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最小値：minおよびnanmin;</font></font></li>
<li> : max  nanmax;</li>
<li> ,   : argmin  nanargmin;</li>
<li> ,   : argmax  nanargmax.</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
argminとargmax（それぞれ、nanargminとnanargmaxの両方）を使用する場合、特性が考慮される1つの軸を指定する必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
軸を指定しない場合、デフォルトでは、考慮されるすべての特性が</font><font style="vertical-align: inherit;">配列</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全体で</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">考慮されます</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">この場合、argminとargmaxも正しく機能し、配列内のすべてのデータがravel（）コマンドで同じ軸に沿って引き伸ばされているかのように、最大​​または最小要素のインデックスを見つけます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、集約メソッドはNumPyモジュールのメソッドとしてだけでなく、配列自体に対しても定義されていることにも注意してください。エントリnp.aggregator（A、axes）は、エントリA.aggregator（axes）と同等です。ここで、aggregatorは、上記の関数の1つを意味します。軸-軸のインデックス。</font></font><br>
<br>
<pre><code class="python hljs">A = np.ones((<span class="hljs-number">10</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>))<font></font>
<font></font>
print(<span class="hljs-string">'sum\n'</span>, A.sum((<span class="hljs-number">0</span>, <span class="hljs-number">2</span>)), <span class="hljs-string">'\n'</span>)<font></font>
print(<span class="hljs-string">'min\n'</span>, A.min((<span class="hljs-number">0</span>, <span class="hljs-number">2</span>)), <span class="hljs-string">'\n'</span>)<font></font>
print(<span class="hljs-string">'max\n'</span>, A.max((<span class="hljs-number">0</span>, <span class="hljs-number">2</span>)), <span class="hljs-string">'\n'</span>)<font></font>
print(<span class="hljs-string">'mean\n'</span>, A.mean((<span class="hljs-number">0</span>, <span class="hljs-number">2</span>)), <span class="hljs-string">'\n'</span>)<font></font>
<font></font>
Out:<font></font>
sum<font></font>
 [<span class="hljs-number">50.</span> <span class="hljs-number">50.</span> <span class="hljs-number">50.</span> <span class="hljs-number">50.</span>] <font></font>
<font></font>
min<font></font>
 [<span class="hljs-number">1.</span> <span class="hljs-number">1.</span> <span class="hljs-number">1.</span> <span class="hljs-number">1.</span>] <font></font>
<font></font>
max<font></font>
 [<span class="hljs-number">1.</span> <span class="hljs-number">1.</span> <span class="hljs-number">1.</span> <span class="hljs-number">1.</span>] <font></font>
<font></font>
mean<font></font>
 [<span class="hljs-number">1.</span> <span class="hljs-number">1.</span> <span class="hljs-number">1.</span> <span class="hljs-number">1.</span>] 
</code></pre><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;上&gt;</font></font></a><br>
<br>
<a name="p10"></a><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">結論の代わりに-例</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
線形ローパス画像フィルタリングのアルゴリズムを作成しましょう。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
はじめに、ノイズの多い画像をアップロードします。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/sk/vx/re/skvxregibvdnuam6jqcq6edholy.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
画像の断片を検討してノイズを確認し</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ur/ex/q6/urexq6ndlc0hyjoccbgmrt23xuu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ます。ガウスフィルターを使用して画像をフィルター処理します。</font><font style="vertical-align: inherit;">ただし、直接（反復を使用して）畳み込みを行う代わりに、相互にシフトした画像スライスの加重平均を適用します。</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">smooth</span>(<span class="hljs-params">I</span>):</span><font></font>
    <font></font>
    J = I.copy()<font></font>
    <font></font>
    J[<span class="hljs-number">1</span>:<span class="hljs-number">-1</span>] = (J[<span class="hljs-number">1</span>:<span class="hljs-number">-1</span>] // <span class="hljs-number">2</span> + J[:<span class="hljs-number">-2</span>] // <span class="hljs-number">4</span> + J[<span class="hljs-number">2</span>:] // <span class="hljs-number">4</span>)<font></font>
    J[:, <span class="hljs-number">1</span>:<span class="hljs-number">-1</span>] = (J[:, <span class="hljs-number">1</span>:<span class="hljs-number">-1</span>] // <span class="hljs-number">2</span> + J[:, :<span class="hljs-number">-2</span>] // <span class="hljs-number">4</span> + J[:, <span class="hljs-number">2</span>:] // <span class="hljs-number">4</span>)<font></font>
    <font></font>
    <span class="hljs-keyword">return</span> J
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この関数を画像に1回、2回、3回適用します。</font></font><br>
<br>
<pre><code class="python hljs">I_noise = cv2.imread(<span class="hljs-string">'sarajevo_noise.jpg'</span>)<font></font>
I_denoise_1 = smooth(I_noise)<font></font>
I_denoise_2 = smooth(I_denoise_1)<font></font>
I_denoise_3 = smooth(I_denoise_2)<font></font>
<font></font>
cv2.imwrite(<span class="hljs-string">'sarajevo_denoise_1.jpg'</span>, I_denoise_1)<font></font>
cv2.imwrite(<span class="hljs-string">'sarajevo_denoise_2.jpg'</span>, I_denoise_2)<font></font>
cv2.imwrite(<span class="hljs-string">'sarajevo_denoise_3.jpg'</span>, I_denoise_3)
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次の結果が得られ</font></font><br>
<br>
<img src="https://habrastorage.org/webt/mv/1s/i1/mv1si1hpbk2v2kxdn9j5dwaskj0.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/xt/4h/tk/xt4htkohwjvr1hpdvqokrgugx0q.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ます。フィルターを1回使用すると、</font></font><br>
<br>
<img src="https://habrastorage.org/webt/fl/cq/is/flcqisbvoidqfdp6pyabhs5t5u8.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/j2/bm/cg/j2bmcgqp5fceli_gstvdcthahn0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ダブル付き; </font></font><br>
<br>
<img src="https://habrastorage.org/webt/de/2c/ta/de2cta31kkhkspk0dxxleb6kbcu.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/rj/yt/ux/rjytuxx-xgw5-d7le_snkgzms-w.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3回で。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
フィルターパスの数が増えると、ノイズレベルが低下することがわかります。ただし、これにより画像の鮮明さが低下します。これは、線形フィルターの既知の問題です。しかし、画像のノイズ除去方法は最適であるとは主張していません。これは、反復なしでたたみ込みを実装するNumPyの機能のデモにすぎません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、フィルタリングが同等のカーネルとのたたみ込みを見てみましょう。これを行うには、単一のユニットインパルスを同様の変換にかけ、視覚化します。実際、混合自体は整数データ用に最適化されているため、インパルスは単一ではなく、振幅が255に等しくなります。しかし、これは核の一般的な外観の評価を妨げません：</font></font><br>
<br>
<pre><code class="python hljs">M = np.zeros((<span class="hljs-number">11</span>, <span class="hljs-number">11</span>))<font></font>
M[<span class="hljs-number">5</span>, <span class="hljs-number">5</span>] = <span class="hljs-number">255</span><font></font>
<font></font>
M1 = smooth(M)<font></font>
M2 = smooth(M1)<font></font>
M3 = smooth(M2)<font></font>
<font></font>
plt.subplot(<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>)<font></font>
plt.imshow(M1)<font></font>
plt.subplot(<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>)<font></font>
plt.imshow(M2)<font></font>
plt.subplot(<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">3</span>)<font></font>
plt.imshow(M3)<font></font>
plt.show()<font></font>
</code></pre><br>
<img src="https://habrastorage.org/webt/xr/yd/rq/xrydrqb7rmtcm0ootv_7ttyqmgu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
NumPy機能の完全なセットからはほど遠いと考えましたが、これでこのツールの全機能と美しさを十分に発揮できると思います！</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;アップ&gt;</font></font></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja469341/index.html">ホリバー。ルネットの歴史。パート1.開始：カリフォルニアヒッピー、スパウト、ダッシュの90年代</a></li>
<li><a href="../ja469345/index.html">ビツセフスキー公園でのアトミッククエスト</a></li>
<li><a href="../ja469349/index.html">数学とデータの学習チャネルdudvstud</a></li>
<li><a href="../ja469351/index.html">Intel Comet Lake-UおよびComet Lake-Y：薄型軽量のラップトップ向けの最大6コア</a></li>
<li><a href="../ja469353/index.html">モバイルデベロッパー向けの興味深い資料のダイジェスト＃317（9月23〜29日）</a></li>
<li><a href="../ja469357/index.html">走れ、ゴーファー、走れ！-GolangConfで何について話すか</a></li>
<li><a href="../ja469361/index.html">スヴェルト3の痛みと涙</a></li>
<li><a href="../ja469367/index.html">WindowsのSTM32CubeIDEでローカルにユニットテストを実行する</a></li>
<li><a href="../ja469369/index.html">9月30日から10月6日までのモスクワでのデジタルイベント</a></li>
<li><a href="../ja469371/index.html">Redux Thunkを使用してコードを編成およびテストする方法の説明</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>