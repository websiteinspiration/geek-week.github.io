<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üîâ üó°Ô∏è üåÄ Acc√®s s√©curis√© √† une maison intelligente en l'absence d'une adresse IP publique (partie 1) üå´Ô∏è üöπ üë©üèª‚Äç‚öñÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="introduction
 Il est difficile de choisir un titre volumineux qui refl√®te le sens, je d√©crirai donc imm√©diatement la t√¢che que je me suis fix√©e. 
 
 I...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Acc√®s s√©curis√© √† une maison intelligente en l'absence d'une adresse IP publique (partie 1)</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/504716/"><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">introduction</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il est difficile de choisir un titre volumineux qui refl√®te le sens, je d√©crirai donc imm√©diatement la t√¢che que je me suis fix√©e. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il y a une "maison intelligente". </font><font style="vertical-align: inherit;">Dans mon cas, il s'agit d'un serveur domestique sans ventilateur avec ioBroker, bien que ce ne soit pas important. </font><font style="vertical-align: inherit;">En plus de la maison, je veux y accrocher des capteurs de l'ext√©rieur (par exemple, sur un ESP32 d'une serre distante). </font><font style="vertical-align: inherit;">J'ai d√©cid√© de le faire via mqtt. </font><font style="vertical-align: inherit;">Acc√®s √† l'interface depuis Internet. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La chose habituelle. </font><font style="vertical-align: inherit;">Mais il y a des nuances:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le fournisseur n'a aucun moyen de me donner une adresse IP publique. </font><font style="vertical-align: inherit;">Et il n'y a pas d'autres fournisseurs.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Je n'aime pas me lier √† des services cloud sp√©cifiques. </font><font style="vertical-align: inherit;">Un service externe peut √©galement fermer (car gbridge a r√©cemment envoy√© une notification). </font><font style="vertical-align: inherit;">Et juste en cas d'√©chec, on ne sait pas quoi faire. </font><font style="vertical-align: inherit;">Je pr√©f√®re le mien, qui peut √™tre transf√©r√©, refait avec peu de sang si quelque chose se passe.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La s√©curit√© est importante. </font><font style="vertical-align: inherit;">Pas de parano√Øa, mais mettre ioBroker sur Internet, d'autant plus qu'il existe plusieurs services expos√©s (flot ...). </font><font style="vertical-align: inherit;">Pas vraiment.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De plus, je veux montrer non pas imm√©diatement le r√©sultat, mais le processus. </font><font style="vertical-align: inherit;">Comment cela s'est pass√©, comment la liste de souhaits a √©t√© transform√©e, les d√©cisions ont chang√©. </font><font style="vertical-align: inherit;">Il est possible que certains points puissent √™tre r√©solus plus correctement / efficacement (je ne suis pas un administrateur syst√®me, pas un d√©veloppeur). </font><font style="vertical-align: inherit;">Ou peut-√™tre que quelqu'un n'ira pas aussi loin et ne b√©n√©ficiera pas d'une solution provisoire que, par exemple, je n'ai pas trouv√©e s√ªre ou pratique pour moi. </font><font style="vertical-align: inherit;">En fait, ce qui est d√©crit dans cette partie est tout √† fait une option de travail, mais pour moi, c'est ¬´interm√©diaire¬ª.</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Adresse publique de mqtt</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√Ä la maison, l'IP publique sur le routeur ne brille pas (je ne parle pas de fixe, cela peut √™tre r√©solu via des dyndns et des analogues), √† savoir, le fournisseur donne 10.x.x.x, sans options. </font><font style="vertical-align: inherit;">Donc, vous devez louer un petit VPS et en faire un probros. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le moyen le plus simple est de passer par ssh. </font><font style="vertical-align: inherit;">Sur le serveur domestique (je l'appellerai iob.xxx.xx) j'ex√©cute:</font></font><br>
<br>
<pre><code class="plaintext hljs">ssh -N -T -R pub.xxx.xx:1883:127.0.0.1:1883 a@iob.xxx.xx </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En vous connectant au port 1883 du serveur externe pub.xxx.xx, vous vous retrouvez en r√©alit√© sur votre iob domestique: 1883 avec le conteneur mqtt (moustique) en marche. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Naturellement, il faut que cela d√©marre automatiquement, la connexion est r√©tablie apr√®s une panne. </font><font style="vertical-align: inherit;">Par cons√©quent, j'ai utilis√© autossh, le concevant comme un service. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
/etc/systemd/system/ssh_mqtt.service:</font></font><br>
<br>
<pre><code class="plaintext hljs">[Unit]<font></font>
Description=SSH Tunnel mqtt<font></font>
After=network.target<font></font>
<font></font>
[Service]<font></font>
Environment="AUTOSSH_GATETIME=0"<font></font>
ExecStart=autossh -M 0 -o "ServerAliveInterval 30" -o "ServerAliveCountMax 3" -NR pub.xxx.xx:1883:127.0.0.1:1883 -i /home/a/.ssh/id_rsa a@pub.xxx.xx<font></font>
<font></font>
[Install]<font></font>
WantedBy=multi-user.target</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Toutes sortes d'activation / red√©marrage du syst√®me, etc. Je ne d√©crirai pas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Malheureusement, malgr√© l'autossh, j'ai √©t√© hant√© par des gels constants. J'ai donc d√©cid√© qu'il n'√©tait pas n√©cessaire de produire des entit√©s et j'ai opt√© pour le ssh habituel: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
/etc/systemd/system/ssh_mqtt.service:</font></font><br>
<br>
<pre><code class="plaintext hljs">[Unit]<font></font>
Description=SSH Tunnel mqtt<font></font>
After=network.target<font></font>
<font></font>
[Service]<font></font>
Restart=always<font></font>
RestartSec=20<font></font>
User=anri<font></font>
ExecStart=/bin/ssh -N -T -R pub.xxx.xx:1883:127.0.0.1:1883 -i /home/a/.ssh/id_rsa a@pub.xxx.xx<font></font>
<font></font>
[Install]<font></font>
WantedBy=multi-user.target</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par la suite, au fait, il s'est av√©r√© que ce fournisseur √©tait tellement oblique. Eh bien, ou le tarif le moins cher pour 45 roubles / mois fonctionne si mal pour lui. La session se bloque p√©riodiquement, m√™me lorsqu'elle est simplement connect√©e via ssh (MobaXterm). Donc √† la fin je me suis command√© un VPS d'un autre (55 roubles / mois), et les probl√®mes de gel ont disparu. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Au fait, j'ai choisi moi-m√™me o√π prendre les VPS non seulement sur la base du prix, mais aussi en tenant compte du ping (10-20 ms). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En g√©n√©ral, cette option est tout √† fait normale, d'autant plus que j'ai ensuite √©tabli une connexion Internet exclusivement au port 8883 via TLS. Ceux. Le mot de passe du moustique a √©t√© transmis crypt√©.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par la suite rendu les certificats clients obligatoires. </font><font style="vertical-align: inherit;">Ceux. </font><font style="vertical-align: inherit;">tout d'abord, au niveau TLS, vous devez pr√©senter un certificat client, puis connectez-vous avec le nom de mot de passe sp√©cifi√© dans moustique. </font><font style="vertical-align: inherit;">Ceux. </font><font style="vertical-align: inherit;">il n'est pas si facile d'acc√©der √† la phase de recherche de mot de passe. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En cons√©quence, j'ai d'abord utilis√© le certificat de serveur de LetsEncrypt, puis, en raison du besoin de certificats clients, je suis pass√© √† l'auto-signature.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√âtant donn√© que dans le processus, j'ai √©galement travaill√© sur le logiciel pour ESP32, j'ai remarqu√© (ou pensais simplement, je ne me souviens plus) que lorsqu'il y a des probl√®mes avec la connexion VPN, la batterie sera consomm√©e beaucoup plus rapidement. </font><font style="vertical-align: inherit;">Pendant le fonctionnement normal, le cycle: r√©veillez-vous, mettez les capteurs sous tension, connectez-vous au WiFi, √©tablissez une connexion avec le serveur mqtt, lisez les lectures des capteurs lorsqu'ils sont pr√™ts, transf√©rez-les vers mqtt, coupez l'alimentation des capteurs, dormez profond√©ment pendant 10 minutes.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Normalement, un tel cycle prend environ 4 secondes. </font><font style="vertical-align: inherit;">1,5-2 secondes - connexion au WiFi, une seconde suppl√©mentaire en raison de la transition vers mqtt via TLS. </font><font style="vertical-align: inherit;">Cela vous convient pendant 4 secondes, tout de m√™me, les capteurs ont besoin de temps pour se r√©veiller. </font><font style="vertical-align: inherit;">Mais si le VPN tombait en panne (il √©tait clairement visible lorsque l'autossh est tomb√©), que dois-je faire? </font><font style="vertical-align: inherit;">Bien s√ªr, je me suis mis en place pour qu'apr√®s 20 secondes le syst√®me s'endorme quand m√™me. </font><font style="vertical-align: inherit;">Mais 20 secondes au lieu de 4 est tr√®s perceptible. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En g√©n√©ral, j'ai d√©cid√© qu'il vaut mieux garder le serveur mqtt sur un VPS externe. </font><font style="vertical-align: inherit;">Maintenant que tout fonctionne comme une horloge, je ne sais pas si c'est n√©cessaire. </font><font style="vertical-align: inherit;">Mais je ne vois aucun sens √† le refaire.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Adresse publique pour Vis</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vis est un syst√®me de visualisation populaire chez ioBroker. Vous ne pouviez pas d√©ranger, et configurez-le vous-m√™me sur https et de m√™me, transf√©rez simplement le port. De plus, elle peut demander un mot de passe au niveau de l'application. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais ce n'est pas cool. Surtout si l'on consid√®re que pour le travail, il connecte des services suppl√©mentaires. Disons, je dessine des graphiques en flot, relativement parlant, je me connecte √† </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vis.xxx.xx</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : 8082 / vis / index.html, mais √† l'int√©rieur il y a des liens vers les graphiques </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vis.xxx.xxx</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : 8082 / flot / index.html. √Ä un moment donn√©, il s'est av√©r√© que lors de la connexion √† / vis, un mot de passe est demand√© et que l'interface graphique est accessible sans mot de passe.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√Ä certains moments, c'√©tait g√©n√©ralement √©trange - j'√©tais autoris√© vis, je vois le graphique, mais en bas √† droite, il y a une fen√™tre translucide ¬´Pas de connexion au serveur¬ª. R√©√©crit pour ce bloc CSS pour le cacher. Mais, d√®s que j'ai commenc√© √† utiliser le cadre pour basculer entre les graphiques sur le m√™me √©cran, il s'est av√©r√© que mon chevauchement sur l'affichage dans le cadre ne fonctionnait pas. (Comme il s'est av√©r√© plus tard, il devrait en √™tre ainsi). J'√©teins l'autorisation - tout va bien, pas de jurons. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai donc d√©cid√© sur le m√™me serveur externe d'√©lever nginx en mode proxy inverse. Et d√©j√† faire une autorisation dessus.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Depuis le navigateur, cela a fonctionn√©. Mais l'application native iobroker.vis du Play Market n'a pas pu se connecter de cette mani√®re. Et je voulais l'utiliser. Bien qu'il s'agisse en fait d'un navigateur dans la fen√™tre, mais il poss√®de un certain nombre de fonctionnalit√©s int√©ressantes. Disons d√©finir l'√©chelle (93% en mode vertical), et l'image s'adapte. Sur un autre appareil avec une r√©solution d'√©cran diff√©rente, vous s√©lectionnez simplement le coefficient, et c'est tout. Et dans le navigateur, vous devez ajuster √† chaque fois ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
D'accord, je pense. J'ajouterai un code d√©licat dans l'URL au lieu du mot de passe. Tapez </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vis.xxx.xx</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : 8082 / &lt;s√©quence longue&gt; /vis/index.html. Souvent, une telle astuce est utilis√©e. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Presque gagn√©. Mais avec des probl√®mes, creuser a montr√© que cette application Web n'√©tait pas √©crite correctement. De nombreux liens √† l'int√©rieur ne sont pas relatifs, mais √† partir de la racine.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
D'accord, j'ai trouv√© plusieurs liens, j'ai √©crit pour eux, disent-ils, si le r√©f√©rent contient un tel code, faites toujours confiance, r√©√©crivez l'URL, etc. </font><font style="vertical-align: inherit;">Mais ils sont progressivement apparus. </font><font style="vertical-align: inherit;">J'ai donc d√©cid√© que c'√©tait tordu, faux et qu'une approche diff√©rente √©tait n√©cessaire.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VPN</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai d√©cid√© de sacrifier un peu l'universalit√© de l'acc√®s. Permettez-moi d'avoir acc√®s depuis mon ordinateur portable, mon smartphone. Mais √† partir des appareils d'autres personnes, du cybercaf√© n'est pas n√©cessaire, je vais g√©rer. Ensuite, vous pouvez mettre un petit client qui installera le VPN. Et √† l'int√©rieur, ni SSL ni autorisation n'est requis. Et en m√™me temps, vous n'avez pas besoin de refaire les liens. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le moyen le plus simple pour moi √©tait Z√©rotier. Pour mon syst√®me d'exploitation (Windows, Android, Linux), il y a des clients. Et il y en a m√™me de pr√™ts √† l'emploi dans le docker. Oui. Je lance tout dans Docker, sur les fonctionnalit√©s de cela plus tard. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous installez le client, entrez un code unique pour votre r√©seau, puis </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">confirmez-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> le </font><font style="vertical-align: inherit;">dans l'interface Web sur </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">my.zerotier.com</font></a><font style="vertical-align: inherit;"> , si n√©cessaire, d√©finissez une adresse statique √† partir de votre r√©seau priv√© personnel (√† la 10.20.30.0), et c'est tout. Tous les clients connect√©s se voient.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La seule chose que j'ai eu √† traiter un peu √©tait "comment se connecter √† un serveur distant √† partir d'un appareil dans votre WiFi domestique sans d√©marrer le client." Eh bien, mon serveur domestique est d√©j√† un client, m√™me s'il se route lui-m√™me. Il s'est av√©r√© que tout est simple. Le r√©seau domestique 192.168.x.0 doit √™tre enregistr√© sur my.zerotier.com dans la section Itin√©raires g√©r√©s, en sp√©cifiant comme ma passerelle, bien s√ªr, il s'agit de mon serveur domestique. Eh bien, dans le r√©seau WiFi, configurez l'itin√©raire en cons√©quence (sur le routeur WiFi, statique 10.20.30.0 sur le serveur domestique). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lorsque vous connectez un client Zerotier, vous pouvez sp√©cifier un autre serveur DNS. Ceux. J'ai connect√© le client et le nom de domaine ne se r√©sout pas √† une adresse publique, mais √† une adresse priv√©e, car DNS pointe d√©sormais vers le serveur domestique, o√π dnsmasq paie pour les enregistrements IP individuels du r√©seau priv√© Zerotier.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
M√™me Zerotier √©tait satisfait du choix efficace d'un itin√©raire de connexion. </font><font style="vertical-align: inherit;">Si j'active un client Zerotier en WiFi domestique, le ping vers l'ordinateur domestique (son adresse IP d√©livr√©e par Zerotier) est le m√™me couple de millisecondes que sans client (uniquement via WiFi). </font><font style="vertical-align: inherit;">Ceux. </font><font style="vertical-align: inherit;">La connexion au cloud ne se fait qu'au premier moment. </font><font style="vertical-align: inherit;">Un √©change de trafic suppl√©mentaire est effectu√© directement, et non via le cloud. </font><font style="vertical-align: inherit;">Si vous installez, par exemple, OpenVPN sur VPS, le m√™me trafic a √©t√© ex√©cut√© du client vers VPS, puis de nouveau vers le m√™me r√©seau WiFi vers le serveur domestique. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En principe, il y a m√™me une puce pour mettre vos serveurs lunaires. </font><font style="vertical-align: inherit;">Presque dans un r√©seau coup√© d'Internet, toute cette √©conomie est √† d√©ployer.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quel est le r√©sultat?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ESP32 envoie ses donn√©es au serveur mqtt d√©ploy√© sur le VPS. Sur TLS, certificat client requis. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un VPN via Zerotier est install√© avec le serveur domestique. Sonoff rfBridge communique avec le firmware Tasmota via ce serveur domestique de mqtt √† VPS. Il n'y a aucun moyen de d√©finir TLS avec un certificat client, donc le MQTT habituel est configur√© pour 1883. Quoi qu'il en soit, le serveur domestique cryptera ce trafic √† l'aide de Zerotier. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eh bien, je me connecte directement √† vis depuis le r√©seau domestique et depuis Internet en activant le client Zerotier. Vous ne pouvez pas le d√©sactiver du tout, cela fonctionne √©galement. Mais seulement parfois, j'ai besoin d'autres clients VPN (par exemple, allez dans "Interdit ILV"). Deux VPN sur un smartphone ne sont pas imm√©diatement devenus amis, mais je n'ai pas compris.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout est tr√®s simple. </font><font style="vertical-align: inherit;">Mais le ver a aval√© l'√¢me. </font><font style="vertical-align: inherit;">M√™me si je n'ai pas de r√©acteur nucl√©aire, mais tout d'un coup? </font><font style="vertical-align: inherit;">Il y a eu un cas o√π ils ont cass√© TeamViewer (une entreprise, pas sp√©cifiquement un logiciel client), et gr√¢ce √† eux ont eu acc√®s √† de nombreux comptes. </font><font style="vertical-align: inherit;">Et en g√©n√©ral, j'ai √©crit au tout d√©but que j'aime tout le mien. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Donc, l'√©tape suivante, je suis pass√© de Zerotier √† OpenVPN. </font><font style="vertical-align: inherit;">Tout est entre mes mains. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le seul ¬´√©tranger¬ª est le VPS du fournisseur. </font><font style="vertical-align: inherit;">Eh bien, je lance tout sp√©cialement dans des conteneurs Docker pour pouvoir bouger instantan√©ment. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si je savais combien je devrais faire face √† OpenVPN, peut-√™tre que non. </font><font style="vertical-align: inherit;">En toute justice - les principaux probl√®mes √©taient pr√©cis√©ment √† cause des conteneurs.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusion</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans le prochain article, je parlerai d'OpenVPN et des fonctionnalit√©s de configuration dans mes conditions (conteneurs, routage d'autres appareils depuis le r√©seau domestique). Il y aura plus de configurations, de d√©tails techniques et de difficult√©s. Mais aussit√¥t la deuxi√®me partie n'a pas commenc√© √† √©crire sans cela. Il ne serait pas clair pourquoi de telles perversions sont n√©cessaires. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et juste au cas o√π, une question pour ceux qui savent: m√™me si j'ai un VPS et un petit (512 Mo de RAM), il est utilis√© √† moins de 1%. Docker stats: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/8v/fp/ka/8vfpkabqind44rkwfcycs7b7ais.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et j'ai eu l'id√©e de tout lancer comme un conteneur sur Google Cloud Run, Amazon Fargate ou quelque chose de similaire. Le d√©ploiement d'un serveur avec toutes sortes de fail2ban via ansible n'est pas un probl√®me. Installez √©galement Docker. Mais pourquoi, si vous n'avez besoin que d'une petite fraction de ses ressources? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cependant, selon mes calculs, le m√™me Fargate me co√ªterait beaucoup plus cher.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Peut-√™tre que je n'ai pas compris quelque chose? </font><font style="vertical-align: inherit;">Il serait donc int√©ressant d'avoir un petit conteneur uniquement pour le transfert du port d'origine, et non un VPS entier. </font><font style="vertical-align: inherit;">Il n'y a rien comme √ßa?</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr504706/index.html">Gestion automatique de l'alimentation Wi-Fi</a></li>
<li><a href="../fr504708/index.html">Probl√®me de certificat Sectigo apr√®s le 30 mai 2020 et m√©thode de solution</a></li>
<li><a href="../fr504710/index.html">FOSS News n ¬∞ 18 - une revue des nouvelles gratuites et open source du 25 au 31 mai 2020</a></li>
<li><a href="../fr504712/index.html">Pourquoi je n'utilise pas SharedViewModel pour les fragments?</a></li>
<li><a href="../fr504714/index.html">Go outils de mesure logiciels</a></li>
<li><a href="../fr504718/index.html">Le condens√© de mati√®res fra√Æches du monde du front-end de la derni√®re semaine n ¬∞ 417 (25 - 31 mai 2020)</a></li>
<li><a href="../fr504720/index.html">Le moteur de template le plus rapide pour PHP</a></li>
<li><a href="../fr504722/index.html">HLS en MP4 en utilisant ffmpeg dans un navigateur</a></li>
<li><a href="../fr504724/index.html">Connectionisme</a></li>
<li><a href="../fr504726/index.html">4 accords</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>