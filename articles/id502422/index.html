<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🎃 😼 👩🏽‍🌾 Pengurangan 60% dalam ukuran aplikasi Bereaksi Asli dalam beberapa langkah sederhana 👨🏿‍⚖️ 🔀 🤝</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Saya bekerja di Mutual . Dia bekerja di Brasil, di bidang kredit yang sama. Kami membantu peminjam dan pemberi pinjaman untuk terhubung satu sama lain...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Pengurangan 60% dalam ukuran aplikasi Bereaksi Asli dalam beberapa langkah sederhana</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/502422/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Saya bekerja di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mutual</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Dia bekerja di Brasil, di bidang kredit yang sama. </font><font style="vertical-align: inherit;">Kami membantu peminjam dan pemberi pinjaman untuk terhubung satu sama lain. </font><font style="vertical-align: inherit;">Yang pertama mencari taruhan yang baik, sedangkan yang kedua mencari pendapatan yang melebihi apa yang bisa ditawarkan pasar kepada mereka. </font><font style="vertical-align: inherit;">Produk kami digunakan oleh berbagai pengguna, kami bekerja di negara besar. </font><font style="vertical-align: inherit;">Akibatnya, aplikasi iOS dan Android berbasis React Native kami mengunduh ke perangkat yang sangat berbeda.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/webt/59/3g/lf/593glf1nnlud4u0pbaogbghegiy.jpeg"></a><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Perlu dicatat bahwa sebagian besar pengguna kami menginstal aplikasi pada perangkat anggaran. </font><font style="vertical-align: inherit;">Kita bisa menarik kesimpulan seperti itu menggunakan data dari pustaka </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;">kelas perangkat</font></a><font style="vertical-align: inherit;"> Facebook Facebook.</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Pustaka ini, setelah menerima informasi tentang model perangkat, melaporkan tahun mana perangkat ini akan dianggap sebagai ponsel unggulan kelas atas. </font><font style="vertical-align: inherit;">Misalnya, ponsel paling populer di kalangan pengguna kami adalah Samsung Galaxy A10. </font><font style="vertical-align: inherit;">Ponsel ini, meskipun dirilis pada tahun 2019, dapat dianggap sebagai unggulan hanya pada tahun 2013. Menganalisis data pada perangkat pengguna, dapat dikatakan bahwa 85% dari perangkat ini dapat dikenali sebagai perangkat kelas atas hanya pada tahun 2015 atau sebelumnya. </font><font style="vertical-align: inherit;">Karena itu, kami memiliki persyaratan khusus untuk mengoptimalkan aplikasi seluler kami. </font><font style="vertical-align: inherit;">Tujuan pengoptimalan adalah agar pengguna dengan perangkat yang lemah sekalipun dapat dengan nyaman menggunakan aplikasi kami.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1e2/e6b/cf3/1e2e6bcf354e0ed85e47f70b1570dbba.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Persentase perangkat yang dapat dikenali sebagai unggulan di tahun tertentu</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam hal ini, kami memperhatikan ukuran aplikasi. Dalam hal versi Android-nya, itu 26,8 MB. Meskipun ini bukan ukuran besar, itu pasti lebih dari ukuran median aplikasi pengguna kami. Angka ini, menurut Google Play Console, adalah 16,3 MB. Ukuran aplikasi dapat menjadi faktor penentu bagi pengguna dengan paket tarif terbatas, atau bagi mereka yang memiliki perangkat dengan memori rendah, yang memaksa pengguna untuk dengan hati-hati memilih aplikasi yang akan mereka instal. Akibatnya, beberapa aplikasi harus dihapus instalasinya. Ini sangat penting dalam kasus aplikasi Reksa, karena peminjam membayar cicilan bulanan melalui aplikasi ini. Ketika peminjam mencopot pemasangan aplikasi kita, kemungkinan dia akan melakukan pembayaran tepat waktu sangat berkurang.Dan ini secara langsung mempengaruhi pendapatan investor yang menggunakan platform kami.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/72c/cea/78e/72ccea78ee7c05e86b626c0cf6ea45ef.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ukuran aplikasi Saling jauh lebih besar dari ukuran median</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
aplikasi</font><i><font color="#999999"><font style="vertical-align: inherit;"> pengguna kami</font></font></i><font style="vertical-align: inherit;"> . Ukuran aplikasi tidak hanya mempengaruhi tingkat penghapusan instalasi. Ukuran juga memengaruhi tingkat konversi pengaturan aplikasi.</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Inilah</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> artikel bagus tentang ini yang ditulis oleh tim Google Play. Artikel ini membahas pentingnya ukuran aplikasi. Secara khusus, dikatakan bahwa setiap tambahan 6 MB dari ukuran file APK mengurangi tingkat konversi instalasi sebesar 1%.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mereka juga berbicara tentang fakta bahwa di negara-negara berkembang di mana perangkat anggaran adalah norma, efek ini bahkan lebih kuat. Yaitu, mengurangi ukuran file APK sebesar 10 MB di pasar negara berkembang sesuai dengan peningkatan tingkat konversi instalasi sekitar 2,5%.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1c1/624/15d/1c162415de7e88ff4c5ed89853b6483b.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Meningkatkan tingkat konversi instalasi untuk setiap 10 Mb untuk mengurangi ukuran file APK di berbagai negara (menurut data internal Google)</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Kami sangat termotivasi oleh bagaimana mengurangi ukuran aplikasi dapat memengaruhi tingkat penghapusan instalasi dan tingkat konversi pengaturan aplikasi. </font><font style="vertical-align: inherit;">Sebagai hasilnya, kami mulai bekerja yang bertujuan mengurangi ukuran aplikasi sebanyak mungkin, dengan mempertimbangkan kenyamanannya bagi pengguna. </font><font style="vertical-align: inherit;">Langkah pertama dalam proyek ini adalah menganalisis</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> rekomendasi</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> resmi</font><font style="vertical-align: inherit;">Google untuk pengembang Android.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bundel Aplikasi Android</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Membaca rekomendasi, kami belajar bahwa cara termudah untuk mengurangi ukuran aplikasi adalah dengan menggunakan metode distribusi aplikasi baru yang disebut </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Android App Bundle</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (AAB). Hingga saat ini, kami mendistribusikan aplikasi, mengumpulkan file </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Android Package</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (APK) </font><font style="vertical-align: inherit;">lama yang baik </font><font style="vertical-align: inherit;">, yang dapat dijalankan di sebagian besar perangkat Android, dan mengunggahnya ke Google Play Console. Tetapi bundel AAB hanya berisi kode dan sumber daya yang dikompilasi. Akibatnya, ketika diunduh, Google bertanggung jawab untuk menghasilkan file APK yang dioptimalkan untuk berbagai jenis perangkat, dengan mempertimbangkan spesifikasi dan arsitektur CPU mereka.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ternyata dengan melakukan perubahan sederhana pada proses pembangunan proyek, dapatkah kita mendapatkan pengurangan serius dalam ukuran aplikasi tanpa melakukan upaya lagi? Ini terlalu bagus untuk kebenaran! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setelah kami membaca dokumentasi, kami baru saja mengubah skrip build React Native Gradle sehingga itu </font></font><code>assembleRelease</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">akan berjalan </font><font style="vertical-align: inherit;">alih-alih yang sekarang </font></font><code>bundleRelease</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Hanya itu yang kami butuhkan untuk membuat file AAB. Setelah beberapa modifikasi dilakukan pada </font></font><code>supply</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">konfigurasi </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fastlane</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mengenai pengunggahan otomatis bahan langsung ke Play Store, kami beralih ke AAB, dan versi baru aplikasi kami muncul di Google Play Console.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Perubahan ini saja telah menyebabkan pengurangan ukuran file APK yang ditransfer ke perangkat pengguna. Penurunan berkisar antara 9,1 hingga 12,4 Mb. Ternyata, penggunaan Bundel Aplikasi Android adalah teknik yang efektif yang memang memungkinkan Anda untuk mengurangi ukuran aplikasi.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9e5/feb/57b/9e5feb57bf54450425a6dc54da48f613.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">File APK lama dan bundel AAB baru, yang penggunaannya mengarah pada fakta bahwa ukuran aplikasi pada perangkat yang berbeda dapat dari 14,4 hingga 17,7 MB</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Benar, Anda harus berhati-hati di sini. </font><font style="vertical-align: inherit;">Jika Anda menggunakan Bereaksi Asli dengan</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Hermes</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , maka Anda mungkin perlu memperbarui ketergantungan Anda</font></font><code>soloader</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(lihat detailnya di</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sini</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font><font style="vertical-align: inherit;">Jika tidak, ada risiko memberi pengguna aplikasi yang akan mengandung kesalahan kritis. </font><font style="vertical-align: inherit;">Kami beruntung, kami dapat mengidentifikasi masalah ini selama pengujian rilis alpha proyek. </font><font style="vertical-align: inherit;">Tetapi kesalahan bisa dengan mudah masuk ke dalam produksi, karena tidak muncul selama pengujian lokal atau ketika membangun file APK.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mengoptimalkan sumber daya aplikasi menggunakan Android Size Analyzer</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saran berikutnya untuk mengoptimalkan aplikasi yang kami temukan dalam dokumentasi adalah penggunaan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Android Size Analyzer</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Ini adalah alat baris perintah yang menganalisis aplikasi Android dan mencari cara untuk mengurangi ukurannya. </font><font style="vertical-align: inherit;">Kami meluncurkan alat ini menggunakan perintah dari formulir berikut:</font></font><br>
<br>
<pre><code class="javascript hljs">size-analyzer check-bundle [BUNDLE].aab
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hasilnya, kami mendapat daftar sumber daya aplikasi dan gambar yang bagus yang dapat kami optimalkan. </font><font style="vertical-align: inherit;">Kami juga disarankan untuk mengatur ProGuard.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ed0/a26/0b0/ed0a260b0a19878cf664c53ec54c9026.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Laporan penganalisa ukuran</font></font></font></i><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▍ProGuard</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ProGuard adalah alat untuk mengompresi, mengaburkan, dan mengoptimalkan bytecode Java. </font><font style="vertical-align: inherit;">Kami belum menjelajahi kemungkinan menggunakan alat ini, karena kami tahu bahwa itu mungkin tidak kompatibel dengan beberapa perpustakaan Android. </font><font style="vertical-align: inherit;">Karena kami berupaya mengurangi ukuran aplikasi kami secepat mungkin, dan menjadikannya sesederhana mungkin, kami memutuskan untuk meninggalkan metode pengoptimalan ini di masa mendatang.</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▍Sumber daya aplikasi yang besar</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Menjalankannya </font></font><code>size-analyzer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lagi, dengan kunci </font></font><code>-d</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, kami mendapat daftar sumber daya aplikasi, diurutkan berdasarkan ukurannya. </font><font style="vertical-align: inherit;">Karena alat ini tidak tahu apa-apa tentang bagaimana pengguna bekerja dengan aplikasi, itu memberi kami kesempatan untuk secara mandiri memutuskan sumber daya mana yang harus dihapus dan mana yang harus dimuat ke dalam aplikasi secara dinamis.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/900/d84/262/900d84262161b1440fe03e0d8b0d4fab.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Daftar sumber daya aplikasi besar yang diurutkan berdasarkan ukuran</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Sumber daya pertama dan terbesar dalam daftar ini adalah bundel JavaScript Bereaksi Asli. </font><font style="vertical-align: inherit;">Sekarang kita tidak dapat memisahkan bundel ini dan memuatnya secara dinamis. </font><font style="vertical-align: inherit;">Tetapi nanti kita akan memikirkannya. </font><font style="vertical-align: inherit;">Lebih jauh ke bawah daftar adalah file font besar (TTF) dan file gambar (JPG dan PNG).</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▍ Gambar yang tidak perlu</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Perhatian kami segera tertuju pada gambar-gambar JPG besar yang digunakan dalam </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Storybook</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Kami menggunakan sistem ini untuk mengembangkan dan menguji komponen. </font><font style="vertical-align: inherit;">Ini adalah 2 MB sampah yang masuk ke versi produksi proyek. </font><font style="vertical-align: inherit;">Kesalahan memalukan! </font><font style="vertical-align: inherit;">Ketika sesuatu seperti ini terjadi, kita merasa telah melakukan kebodohan yang serius. </font><font style="vertical-align: inherit;">Namun dalam dunia pengembangan perangkat lunak yang kompleks, semua orang membuat kesalahan. </font><font style="vertical-align: inherit;">Saya percaya bahwa jika Anda berbicara tentang kesalahan Anda di depan umum, itu akan membantu pengembang lain belajar dari kesalahan ini. </font><font style="vertical-align: inherit;">Ada kemungkinan bahwa Anda membuat kesalahan yang sama jika Anda tidak menganalisis struktur sumber daya aplikasi, yang ukurannya secara bertahap meningkat.</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▍ Font</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setelah kami dengan cepat menyingkirkan gambar yang tidak perlu, kami melanjutkan untuk menganalisis elemen lain dari daftar sumber daya. Jelas bahwa ada banyak font bawaan di dalamnya. Setelah kami membicarakan hal ini dengan para desainer kami, mereka memberi tahu kami bahwa banyak komponen lama tidak berbeda dalam kepatuhan ketat terhadap manual tipografi. Oleh karena itu, kami menemukan komponen mana yang dapat dihapus, dan di mana Anda dapat menggunakan font terbaru yang sesuai. Berkat ini, kami dapat mengurangi jumlah font yang digunakan dari enam menjadi empat.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hal lain yang kami perhatikan adalah ukuran file font itu sendiri. Ukuran masing-masing sekitar 670 Kb. Ini berarti bahwa empat font dalam bundel terkompresi menempati 2,7 Mb yang menakjubkan. Tapi, untungnya, ada alat bernama </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FontForge</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> yang memungkinkan Anda untuk menganalisis dan memodifikasi file font secara mendalam. Dengan menggunakan alat ini, kami dapat menemukan bahwa alasan utama untuk ukuran besar file font adalah karakter Cyrillic yang diperluas dan mesin terbang yang tidak perlu. Kita dapat menghapus semua ini dengan aman, karena bagian teks dari aplikasi kita sepenuhnya ditulis dalam bahasa Portugis. Berkat perubahan ini, kami dapat mengurangi ukuran file font dari 670 Kb menjadi 70 Kb - hingga 90%.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7d0/144/f9c/7d0144f9c3954dee6570347075fbe392.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contoh beberapa mesin terbang termasuk dalam font kami</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Karena fakta bahwa kami menyingkirkan font yang tidak perlu dan mengoptimalkan yang tersisa, kami dapat mengurangi ukuran aplikasi sebesar 3,8 Mb. </font><font style="vertical-align: inherit;">Ini menyebabkan pengurangan yang menyenangkan dalam ukuran total file APK sebesar 2 MB.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/52b/62c/a55/52b62ca55ea0178919421a1c08304adc.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Daftar font dan ukurannya sebelum optimasi</font></font></font></i><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/83e/374/6db/83e3746db754c475501170c6e4372c49.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Daftar font dan ukurannya setelah optimasi</font></font></font></i><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PtOptimasi gambar</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setelah menganalisis gambar yang masih tersisa di aplikasi, kami perhatikan bahwa beberapa di antaranya cukup besar. </font><font style="vertical-align: inherit;">Kami memproses beberapa gambar ini dengan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">alat</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> optimisasi grafis </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;">TinyPNG</font></a><font style="vertical-align: inherit;"> dan melihat pengurangan yang signifikan dalam ukuran gambar-gambar ini. </font><font style="vertical-align: inherit;">Setelah itu, kami memutuskan untuk mengoptimalkan semua gambar JPG dan PNG yang digunakan dalam aplikasi. </font><font style="vertical-align: inherit;">Ada 41 dari mereka.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/aa5/8e9/9e6/aa58e99e6307077787f37d0d60fc59db.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gambar sebelum dan sesudah optimasi</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Ini memberi kami kesempatan untuk mengurangi ukuran gambar dari 2,5 MB menjadi 756 KB, yaitu sebesar 70%. </font><font style="vertical-align: inherit;">Namun, karena fakta bahwa gambar sebelumnya tidak dioptimalkan, mereka dikompresi selama pembuatan file APK akhir. </font><font style="vertical-align: inherit;">Ternyata pengoptimalan kami menyebabkan penurunan ukuran aplikasi yang diunduh oleh pengguna hanya 500 Kb. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setelah itu, kami menyadari bahwa kami telah kehabisan semua kemungkinan optimasi cepat. </font><font style="vertical-align: inherit;">Melanjutkan optimalisasi sumber daya akan membutuhkan upaya besar atau hanya perbaikan kecil.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bereaksi Optimasi Bundel JavaScript Asli</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setelah kami menemukan sumber daya aplikasi khusus untuk platform Android, sekarang saatnya untuk menganalisis bundel JavaScript. </font><font style="vertical-align: inherit;">Optimasi bundel dapat dianggap sebagai ide yang bagus karena tiga alasan. </font><font style="vertical-align: inherit;">Pertama, ini mengurangi ukuran file APK jadi. </font><font style="vertical-align: inherit;">Kedua, ini mengarah pada peluncuran aplikasi yang lebih cepat, karena mesin virtual JS harus memproses lebih sedikit kode. </font><font style="vertical-align: inherit;">Akhirnya, dan yang paling penting, ini mempercepat pembaruan OTA yang kami lakukan beberapa kali seminggu menggunakan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CodePush</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▍ Penganalisis bundel dan optimisasi kode</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk membuat keputusan tentang cara mengurangi ukuran bundel, pertama, Anda harus mencari tahu apa yang paling banyak terjadi di bundel. Untuk melakukan ini, kami menggunakan alat open source yang sangat baik </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">react-native-bundle-visualizer</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Setelah menganalisis proyek dengan bantuannya, kami mendapat visualisasi di mana setiap folder dan setiap ketergantungan aplikasi hadir, menunjukkan ukuran entitas yang sesuai.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7f2/641/4c0/7f26414c02bec1a7cf7bcd6b901fb837.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jepretan pustaka dan folder basis kode dari frontend aplikasi Mutual dengan indikasi ukuran.</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Kami menemukan bahwa ukuran total bundel adalah 5,49 Mb. 57,8% dari volume ini diwakili oleh dependensi dari folder</font></font><code>node_modules</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, 27,5% - kode aplikasi. Yang tersisa, alat yang kami gunakan tidak bisa diidentifikasi. Selama proses perakitan bundel, kode yang tidak digunakan sudah dihapus, jadi yang kami lihat adalah kode yang sebenarnya digunakan oleh aplikasi. Tetapi, meskipun mempertimbangkan ini, dalam bundel Anda selalu dapat menemukan sesuatu yang dapat ditingkatkan.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ketergantungan proyek terbesar adalah</font></font><code>math.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Perpustakaan ini, seperti namanya, mengimplementasikan banyak operasi matematika. Kami tidak memiliki kebutuhan khusus untuk perpustakaan ini karena fakta bahwa kami melakukan semua perhitungan penting di server, setelah itu kami cukup mengirimkan hasilnya ke aplikasi. Ketika kami melihat kode aplikasi, ternyata perpustakaan hanya digunakan untuk melakukan beberapa operasi sederhana. Kemungkinan besar digunakan oleh pengembang yang bekerja pada kode server hanya berdasarkan kebiasaan. Kami dengan cepat mengekstrak metode yang sesuai dari pustaka dan memasukkannya ke dalam basis kode kami, sepenuhnya menghilangkan ketergantungan ini. Ini memungkinkan untuk mengurangi ukuran bundel menjadi 4,64 Mb. Penolakan hanya satu perpustakaan yang diizinkan untuk mengurangi ukuran bundel sebesar 15,5%!</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seperti yang telah disebutkan, kami menggunakan Storybook untuk mengembangkan dan menguji komponen. Benar, kemampuan yang sesuai harus tersedia hanya di lingkungan lokal dan menengah. Pengguna akhir tidak membutuhkan ini. Berkat ini, kami menggunakan variabel </font></font><code>ENVIRONMENT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">untuk mengontrol masuknya bagian yang sesuai dari aplikasi. Meskipun ini cocok untuk membatasi akses, bundler tidak dapat mengetahui nilai apa yang ditulis untuk variabel ini. Karena keterbatasan ini, semua kode Storybook masuk ke dalam bundel produksi.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk memperbaiki masalah, kami mengisolasi impor bagian ini dalam satu file. Lalu kami membuat dua versi file ini: satu yang menyertakan Storybook, dan yang lain untuk produksi, yang hanya berisi tata letak komponen. Untuk beralih di antara file-file ini ketika menyiapkan versi produksi bundel, kami menulis skrip yang dijalankan sebelum proyek dibuat dan mengubah satu file ke yang lain. Berkat metode ini, kami dapat sepenuhnya menghapus kode Storybook dari versi produksi aplikasi, menghapus ketergantungan </font></font><code>node_modules</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan kode biasa mengenai konfigurasi "story" Storybook.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/996/4cc/276/9964cc2769a8a23b3b18d5b0d273cfd9.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Folder Storybook yang diperbarui dengan dua versi file indeks.</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Kedua perubahan ini mengurangi ukuran bundel dari 5,49 MB menjadi 4,2 MB. </font><font style="vertical-align: inherit;">Ini berarti, antara lain, aplikasi akan memuat lebih cepat dan memperbarui lebih cepat.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/034/06f/f53/03406ff53c8a918119c9febd41e6d752.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ukuran bundel terakhir adalah 4,2 MB.</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Setelah semua perbaikan ini, kami kembali mengunduh aplikasi di Play Store. </font><font style="vertical-align: inherit;">Sekarang kami diberitahu bahwa ukuran file APK yang sudah selesai akan berada dalam kisaran 10,5 hingga 13,7 Mb. </font><font style="vertical-align: inherit;">Ini, mengingat fakta bahwa aplikasi awalnya memiliki ukuran 26,8 MB, berarti pengurangan yang luar biasa dalam ukuran proyek sekitar 60%! </font><font style="vertical-align: inherit;">Jadi, seperti yang kami katakan dalam sebuah artikel oleh tim Google Play, kami dapat sepenuhnya berharap bahwa tingkat konversi instalasi akan meningkat sebesar 3,75%.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/715/69e/cec/71569ececb25a15225a48cef54bfb254.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Perbandingan versi APK asli dari aplikasi dengan versi AAB akhir, di mana semua perbaikan yang dijelaskan di atas dibuat</font></font></font></i><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ringkasan</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami, sebagai programmer yang berorientasi bisnis, tahu bahwa kadang-kadang perusahaan, demi pengembangan proyek yang lebih cepat, dapat terus meningkatkan utang teknisnya. </font><font style="vertical-align: inherit;">Ini terutama berlaku untuk startup muda seperti Mutual, yang mencoba mencari tempat mereka di pasar. </font><font style="vertical-align: inherit;">Tetapi jika Anda tidak melihat hutang ini, Anda dapat membuat kesalahan yang mengganggu, seperti mengirim 2 MB gambar uji untuk produksi dan penggunaan perpustakaan besar yang tidak dapat dibenarkan. </font><font style="vertical-align: inherit;">Hutang teknis seharusnya tidak boleh di luar kendali dan menyebabkan masalah.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selain itu, sering terjadi bahwa pengembang hanya kehilangan peluang yang tersedia bagi mereka untuk mengoptimalkan proyek. </font><font style="vertical-align: inherit;">Karena itu, kadang-kadang disarankan untuk menganalisis secara kritis proyek Anda. </font><font style="vertical-align: inherit;">Hanya untuk memeriksa apakah Anda melewatkan beberapa peluang untuk dengan cepat mengoptimalkan ukuran, kecepatan, atau aspek lain dari aplikasi. </font><font style="vertical-align: inherit;">Kami hanya membutuhkan dua hari untuk menganalisis aplikasi, merencanakan pekerjaan, dan melakukan perbaikan pada proyek, yang memungkinkan kami untuk mengurangi ukuran aplikasi hingga 60%. </font><font style="vertical-align: inherit;">Sulit untuk menghasilkan sesuatu yang lain yang dapat menghasilkan hasil yang sama dalam waktu yang singkat. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bagaimana Anda mengoptimalkan proyek Asli Bereaksi Anda?</font></font></b><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/webt/a_/bs/aa/a_bsaactpbr8fltzymtkhqbw1d4.png"></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id502412/index.html">Guilloche dengan cara yang berbeda</a></li>
<li><a href="../id502414/index.html">FOSS News No. 16 - ulasan perangkat lunak bebas dan sumber terbuka untuk 11-17 Mei 2020</a></li>
<li><a href="../id502416/index.html">Melengkapi SQL. Bagian 1. Kompleksitas penguraian. Cerita tentang menyelesaikan file ANTLR</a></li>
<li><a href="../id502418/index.html">Monitor gambar 3D</a></li>
<li><a href="../id502420/index.html">Temuan CSS yang Menarik dalam Desain Twitter</a></li>
<li><a href="../id502424/index.html">Hentikan mengimpor seluruh paket JavaScript</a></li>
<li><a href="../id502428/index.html">Barang Sintaksis Julia</a></li>
<li><a href="../id502430/index.html">Praktik terbaik Kubernetes. Tes viabilitas Kubernetes dengan uji Readiness and Liveness</a></li>
<li><a href="../id502432/index.html">Intisari bahan segar dari dunia front-end untuk minggu terakhir No. 415 (11-17 Mei, 2020)</a></li>
<li><a href="../id502436/index.html">CI TeamCity - Otomatisasi proses pembuatan pengujian Android dan UI</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>