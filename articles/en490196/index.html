<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üê∞ üÜì üíáüèæ [Flipper Zero] refuse Raspberry Pi, make our own board from scratch. Finding the right WiFi chip üñïüèª üèÖ üëºüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Flipper Zero is a pocket multitool project for hackers in the tamagotchi form factor, which I am developing with friends. Previous post [1] .
 
 A lot...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>[Flipper Zero] refuse Raspberry Pi, make our own board from scratch. Finding the right WiFi chip</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/490196/"><img src="https://habrastorage.org/webt/pt/qc/4x/ptqc4xjuvuvgicmkywwcaynd9xe.jpeg"><br>
<br>
<b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Flipper Zero</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> is a pocket multitool project for hackers in the tamagotchi form factor, which I am developing with friends. Previous post </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[1]</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
A lot has happened since the first post about flipper. We worked hard all this time and the project has undergone radical changes. The main news is that we decided to completely abandon the Raspberry Pi Zero and make our board from scratch based on the i.MX6 chip. This greatly complicates the development and completely changes the whole concept, but I'm sure it's worth it.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Also, we still have not found the correct WiFi chipset, which supports all the necessary functions for WiFi attacks, while supporting the 5Ghz range and has not been outdated for 15 years. Therefore, I invite everyone to participate in our study.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In the article I will tell you why we made such a decision, at what stage the project is, current tasks, and how you can take part. </font></font><br>
<a name="habracut"></a><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What is bad Raspberry Pi Zero</font></font></h2><br>
<img src="https://habrastorage.org/webt/w4/2s/91/w42s913rofa7mmbyaetuk3ufvvs.jpeg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I personally adore the Raspberry Pi, but during the development process it turned out that it sucks for many reasons. </font><font style="vertical-align: inherit;">The most commonplace - you can‚Äôt stupidly buy it. </font><font style="vertical-align: inherit;">Even large distributors have no more than a couple of hundred rpi0s, and stores like Adafruit and Sparkfun sell no more than 1 in their hands. </font><font style="vertical-align: inherit;">Yes, there are several factories that produce rpi0 under a license from the Raspberry Pi Foundation, but they also cannot ship batches of 3-5 thousand each. </font><font style="vertical-align: inherit;">It looks like that rpi0 is sold at a price on the verge of cost and is more aimed at popularizing the platform.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Here are the main reasons for abandoning rpi0</font></font></h3><br>
<ul>
<li>    .   Farnell   Compute Module.   Alibaba     ,        . ,   ,    ,    -   5  ,       . </li>
<li> .</li>
<li>  BCM2835,       rpi.     .</li>
<li>  ,     .</li>
<li>  WiFi.</li>
<li>   .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The Raspberry Pi Foundation itself proposes to use the RPi Compute Module for such tasks. This is a board in the form factor of the SO-DIMM module (like RAM in laptops), which is inserted into the motherboard. This option does not suit us, since it greatly increases the size of the device. </font></font><br>
<img width="400" src="https://habrastorage.org/webt/gh/5f/ba/gh5fbawqddacswz5wve_matypu4.jpeg"><br>
<font color="99999999"><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Raspberry Pi Compute Module - a board in the form factor of the SO-DIMM module for installation in your device</font></font></sup></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Then we started looking at different SoMs (System on Module), the most attractive looking modules based on i.MX6. All our searches are described in the topic on the </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">Raspberry Pi Zero Alternatives</font></a><font style="vertical-align: inherit;"> forum.</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. But you need to keep in mind that not all companies will be ready to work with you with volumes even of 3-5 thousand units per year. For example, the Israeli Variscite simply stopped responding to us when it found out the planned procurement volumes. Apparently, they are not only interested in selling SoMs without additional services in the form of support and integration. I would also like to mention the Russian developer </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Starterkit.ru</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , who make very interesting devices, like </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SK-iMX6ULL-NANO</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . They are almost impossible to google, and I would not have known about their existence if my friends had not told me. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As a result, comparing all the options and considering the economy, we made a difficult decision to make our SoM from scratch especially for Flipper based on the </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">i.MX6 ULZ</font></a><font style="vertical-align: inherit;"> chip</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">This is a single core Cortex-A7 with a frequency of 900 MHz with almost the same performance as rpi0, while it is almost cold under load, while rpi0 heats up like a stove. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Making our motherboard from scratch, we have complete freedom in the arrangement of elements on the motherboard, which is why we expect to get a more compact device. </font><font style="vertical-align: inherit;">i.MX6 ULZ is a stripped down version of i.MX6 ULL without some interfaces and a video core, so for development we use the MCIMX6ULL-EVK devboard with the i.MX6 ULL chip, just not using part of the interfaces. </font><font style="vertical-align: inherit;">This board, by the way, is supported by the mainline linux kernel, so Kali Linux with the kernel from the packages is loaded on it. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Here is what flipper without clothes looks like at the moment:</font></font><br>
<img src="https://habrastorage.org/webt/ak/en/zt/akenztkjyglzl3mau8zcmgrguga.jpeg"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Correct wifi</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hacking WiFi is one of Flipper's main features, so it is extremely important to choose the right WiFi chipset that will support all the necessary functions: packet injection and monitor mode. </font><font style="vertical-align: inherit;">At the same time be able to 5GHz range and modern standards like 802.11ac. </font><font style="vertical-align: inherit;">Unfortunately, such chips could not be found right away. </font></font><br>
<img width="400" src="https://habrastorage.org/webt/sq/zz/kx/sqzzkxook6lq_gcl9dq2cshqbwc.jpeg"><br>
<font color="9999999"><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chinese SiP module (system in package) Apmak AP6255 based on BCM43456</font></font></sup></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Now we are considering several candidates, but all of them require finishing and it is not yet known which one is better to choose. </font><font style="vertical-align: inherit;">Therefore, I really ask everyone who understands WiFi poke to join our search here: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wi-Fi chip with SPI / SDIO interface that supports monitoring and packet injection</font></font></a><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Key candidates: </font></font></h3><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Broadcom / Cypress BCM43455 or BCM4345 with patched firmware. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Discussion in the nexmon repository.</font></font></a></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mediatek MT7668 - not yet tested, but in theory it may be suitable.</font></font></li>
</ul><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Please carefully read the requirements on the forum, including the connection interface, before advising something. </font><font style="vertical-align: inherit;">Remember that I have been carefully studying this topic for several months and have already shoveled everything that can be found.</font></font></blockquote><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What is ready</font></font></h2><br>
<img src="https://habrastorage.org/webt/wh/tu/j7/whtuj75k_oujivzrgmeazimjrhu.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The entire part for which STM32 is responsible is already working: 433Mhz, iButton, read-emulation 125kHz. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The mechanical part, buttons, case, connectors, layout are now under active development, the video and photos below have an outdated case, there will be more joystick in new versions. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In the video, a simple demonstration of the opening of the barrier using a replay of the remote control signal.</font></font><br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://player.vimeo.com/video/394135219" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<br>
<hr><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FAQ</font></font></h2><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">How to buy?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Presumably, the crowdfunding campaign on Kickstarter will be launched in April-May of this year. </font><font style="vertical-align: inherit;">We hope to send finished devices six months after the completion of the collection. </font><font style="vertical-align: inherit;">If you are interested in the device, I ask you to leave your mail at the bottom of the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">site</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , we will send offers to subscribers when prototypes and early samples for sale are ready.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It is legal?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This is a research tool. </font><font style="vertical-align: inherit;">All its components can be purchased separately at the store. </font><font style="vertical-align: inherit;">If you build in a WiFi adapter and a 433MHz transmitter in a small case and add a screen there, it will not become more illegal from this. </font><font style="vertical-align: inherit;">The device does not fall under the definition of special. </font><font style="vertical-align: inherit;">means or device for secret collection of information. </font><font style="vertical-align: inherit;">It can be illegal to use it ONLY for the purpose of causing damage or for illegal actions. </font><font style="vertical-align: inherit;">In other words, I can make knives of any shape and from any metal, the responsibility for using my knives lies with you.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">How to embed?</font></font></h3><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><img align="left" width="140" src="https://habrastorage.org/webt/wm/bx/6x/wmbx6xfrvdtvzbmffgoftasej40.png"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">At the moment, you can personally support me with small donations for food through </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Patreon</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Regular donations in the form of $ 1 are much better than a large amount at a time, because they allow you to predict ahead.</font></font><br>
<br>
<hr><br>
<img width="50" src="https://habrastorage.org/webt/ue/ii/md/ueiimdzuyrmmsl8smmtdvprox94.png"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I publish all the notes on the project in my Telegram channel </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@zhovner_hub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en490180/index.html">Kubernetes Storage Patterns</a></li>
<li><a href="../en490184/index.html">Alphabet has a second, secret group of quantum computer developers</a></li>
<li><a href="../en490186/index.html">What we made JET BI from. Architecture Business Intelligence System without lyric digressions</a></li>
<li><a href="../en490190/index.html">I'm going to search: host geo-positioning by IP address in the global Internet using the Binance crypto exchange as an example</a></li>
<li><a href="../en490194/index.html">Using RabbitMQ with MonsterMQ Part 4</a></li>
<li><a href="../en490198/index.html">Trust but verify! Demo zone with Epson projectors for home theater in the demo hall Pult.ru</a></li>
<li><a href="../en490202/index.html">Query Counting: Basic Django Performance Testing</a></li>
<li><a href="../en490204/index.html">The digest of events for HR and IT recruiters in March 2020</a></li>
<li><a href="../en490208/index.html">Backend section on DUMP2020: banter, fan, fail</a></li>
<li><a href="../en490210/index.html">Speeding up the frontend. When a lot of server requests are good</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>