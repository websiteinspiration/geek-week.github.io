<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üìΩÔ∏è üõÄüèΩ ü¶à M√°scaras de juego con cara en Instagram, o doble clic en los ojos ‚òùÔ∏è ü¶Ñ üñêüèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Qu√© tonter√≠a, piensas. ¬øQu√© tipo de conjunto de palabras sin sentido? Pero, por desgracia o aplausos, alguien as√≠, hoy esto no es una tonter√≠a, sino l...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>M√°scaras de juego con cara en Instagram, o doble clic en los ojos</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/486498/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/qr/9p/o1/qr9po1b7d633kt3pmdsf2esb9io.jpeg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Qu√© tonter√≠a, piensas. ¬øQu√© tipo de conjunto de palabras sin sentido? Pero, por desgracia o aplausos, alguien as√≠, hoy esto no es una tonter√≠a, sino la realidad. El art√≠culo tratar√° sobre un juego que escrib√≠ para Instagram en el que tu cara se usa como controlador, o m√°s bien, no solo eso, sino a veces toda la cabeza. Moverse por el campo de juego se lleva a cabo girando e inclinando la cabeza, y la elecci√≥n de la acci√≥n es abriendo la boca o haciendo doble clic en los ojos (parpadeando). El doble parpadeo probablemente valdr√≠a la pena llamarlo ...</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬°Oh, valiente mundo nuevo! Probablemente, los hipsters del futuro desarrollar√°n guiones para generar humo hermoso y colorido detr√°s de sus c√°psulas espaciales livianas o escribir sombreadores para dar efectos visuales interesantes a las puertas negras de un teletransporte personal, como copos de nieve cayendo (Web 100.0) o niebla fractal (WebGL 100.0) o ... No, tal vez No tengo suficiente imaginaci√≥n para imaginar qu√© tipo de tonter√≠as podr√≠amos enfrentar en el futuro: trato de pensar demasiado l√≥gicamente. Pero hace unos 30 a√±os, ciertamente, en ning√∫n sue√±o, bajo ninguna circunstancia, podr√≠amos haber pensado que hoy crearemos m√°scaras para una red social llamada Instagram. Y lo que es m√°s, dentro de estas m√°scaras aparecer√°n juegos completos. Me asust√© e interesante. En general, aterrador interesante. Y, como ya entendiste, no pude resistirme y tambi√©n escrib√≠ un juego as√≠.Por supuesto, para jugarlo, debes tener un tel√©fono inteligente en Android o iOS con una c√°mara frontal y la aplicaci√≥n de Instagram instalada.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este juego es Tic Tac Toe. </font><font style="vertical-align: inherit;">En general, este es uno de los primeros juegos que cre√© en mi vida, y tal vez incluso el primero. Simplemente no lo recordar√© ahora. </font><font style="vertical-align: inherit;">Pero lo volv√≠ a escribir en Pascal, luego arrastr√© ese viejo algoritmo a Delphi. </font><font style="vertical-align: inherit;">Despu√©s de eso, el juego, por supuesto, tambi√©n apareci√≥ en la web, en mi sitio web: bueno, en tu p√°gina personal sin tu propio tic-tac-toe ... Y ahora es el momento de poner este √©pico juego en Instagram. </font><font style="vertical-align: inherit;">En general, si fuera una daga o un tac toe en este juego (m√°s bien, probablemente un dedo del pie), podr√≠a contar mucho sobre mi larga e interesante vida ...</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬øQu√© tipo de m√°scaras son estas?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para empezar, una breve digresi√≥n hist√≥rica. Las m√°scaras en Instagram aparecieron gracias al equipo bielorruso que desarroll√≥ la aplicaci√≥n para selfies MSQRD. Despu√©s de que Facebook compr√≥ esta aplicaci√≥n, el equipo de la corporaci√≥n continu√≥ integrando su tecnolog√≠a en los productos de Facebook. As√≠ que hab√≠a una plataforma que ofrec√≠a funciones de realidad aumentada, Spark AR. En agosto de 2019, la plataforma dej√≥ el estado beta y estuvo disponible para todos los usuarios que ahora pueden crear contenido de realidad aumentada para Facebook e Instagram.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Las m√°scaras fueron concebidas como filtros para dar efectos divertidos a su fisonom√≠a con la posterior colocaci√≥n de una selfie en una red social. En cuanto a los juegos enmascarados, no encontr√© tantos. Hay una Flying Face, un an√°logo de Flappy Bird, donde un p√°jaro vuela por la pantalla, y debes evitar que se estrelle contra obst√°culos, parpadeando en los momentos correctos. Tambi√©n vi un juego en el que debes atrapar la comida que cae de arriba a abajo. Un tirador como Invaders. Y un corredor 3D donde un personaje corre por una calle de la ciudad y salta obst√°culos. Quiz√°s hay algunos m√°s. En general, el tema es bastante nuevo.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El proceso de creaci√≥n de contenido tiene lugar en el entorno de desarrollo de Spark AR Studio, que se puede descargar para Windows de forma gratuita. Adem√°s, vale la pena descargar la aplicaci√≥n Spark AR Player para probar los efectos que crea en dispositivos m√≥viles Andrioid o iOS, para los cuales, de hecho, estos efectos est√°n destinados. La conexi√≥n a la computadora es a trav√©s de un cable USB, al menos en mi caso con un tel√©fono inteligente Android. Despu√©s de descargar la m√°scara a trav√©s del componente Facebook / sparkarhub y pasar la moderaci√≥n, su m√°scara (o juego) estar√° disponible para todos los usuarios de Instagram desde Internet. La m√°scara se puede obtener por enlace directo o desde la p√°gina de su creador en Instagram.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comprender c√≥mo trabajar en Spark AR Studio no es nada dif√≠cil. </font><font style="vertical-align: inherit;">No me detendr√© en esto en detalle, especialmente porque Internet est√° lleno de lecciones sobre este tema. </font><font style="vertical-align: inherit;">Solo notar√© que hay dos formas de desarrollar una aplicaci√≥n m√°s o menos interactiva que implique algo m√°s que simplemente aplicar alg√∫n tipo de sprite est√°tico en tu cara: crear los llamados parches y escribir scripts. </font><font style="vertical-align: inherit;">El primer m√©todo se asemeja visualmente al trabajo con materiales en un editor 3D, y el segundo es simplemente programar en Javascript usando una API especializada. </font><font style="vertical-align: inherit;">Eleg√≠ la segunda opci√≥n. </font><font style="vertical-align: inherit;">Sin embargo, nadie proh√≠be combinar ambos m√©todos: desde los scripts existe la posibilidad de acceder a todo lo que sucede en los parches.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Artes graficas</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces, para empezar, ser√≠a bueno crear algunos elementos gr√°ficos que se usar√°n en el juego. </font><font style="vertical-align: inherit;">Abra su programa de modelado 3D favorito y cree. </font><font style="vertical-align: inherit;">Estoy usando Blender </font><font style="vertical-align: inherit;">En principio, puede crear sprites separados, y luego pedirles algo de l√≥gica de comportamiento usando Spark AR y no usar el editor 3D en absoluto. </font><font style="vertical-align: inherit;">Pero decid√≠ hacer figuras voluminosas de cruces y dedos de los pies, por lo que no podr√≠a prescindir de tal editor. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lo primero que debe hacer es crear una textura 2D. </font><font style="vertical-align: inherit;">Combina todas las texturas en un atlas.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/9y/ii/n8/9yiin8wu1jf3emkzbnyjn88jmgq.jpeg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Textura satinada</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora sobre modelos 3D. Como un espacio de juego en 3D, se usa un plano de dos tri√°ngulos, en el que se estira la marca de campo (aqu√≠ est√° ese gran fragmento de malla del atlas de textura). El atlas en s√≠ es con un canal alfa transparente. Se insertar√°n 9 cuadrados azules, que tambi√©n consisten en dos tri√°ngulos cada uno, en el campo. Adem√°s, adem√°s de los nueve azules, el modelo 3D contendr√° en las mismas coordenadas 9 cuadrados verdes y rojos que estar√°n ocultos al comienzo del juego. El significado es que, en el estado normal, el color de todos los cuadrados del campo es azul, y el verde y el rojo se utilizan como cursor para seleccionar la posici√≥n en la que desea establecer una cruz o un cero, respectivamente. Adem√°s, el verde y el rojo se usan para resaltar la fila ganadora de tres celdas al final de cada ronda. Ser√≠a suficiente, por supuesto,usa 9 cuadrados azules y solo 3 cuadrados verdes y rojos, pero luego deber√≠as, adem√°s de mostrar / ocultar, establecer alg√∫n tipo de l√≥gica de movimiento. Me pareci√≥ que ocultarlos y mostrarlos sin ninguna manipulaci√≥n de las coordenadas en el espacio ser√≠a m√°s f√°cil, y el modelo 3D lo cargar√≠a de manera insignificante.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/vy/fk/bs/vyfkbs_c_hezcstqfoebd2xyjoy.jpeg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El campo de juego</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
En el juego, las posiciones de los tres cuadrados en cada uno de los nueve grupos, por supuesto, coinciden. Aqu√≠, los dispers√© verticalmente en una de las celdas para demostrar claramente en qu√© consiste el modelo 3D en su conjunto. Tenga en cuenta que los cuadros tienen nombres (en la figura de la derecha) de cierta manera: de b11 a b33, de g11 a g33 y de r11 a r33, donde cada d√≠gito cambia en el rango de 1 a 3. En otras palabras, la letra denota un color, y los n√∫meros son la fila y la columna. Esto es necesario para acceder a los cuadros (mallas, en terminolog√≠a 3D) por los nombres del script, para que sea conveniente ocultarlos y mostrarlos.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Luego model√© las figuras de cruces y dedos del pie, coloc√°ndolos tambi√©n en pares en cada celda. </font><font style="vertical-align: inherit;">(Para mayor claridad, elev√≥ uno de los ceros.) No mire el hecho de que su textura es tan "alegre" hasta ahora. </font><font style="vertical-align: inherit;">Hice esto por la conveniencia de aplicar una exploraci√≥n UV. </font><font style="vertical-align: inherit;">Luego, en el atlas de texturas, reemplac√© las texturas de las figuras por otras m√°s tranquilas, que puedes ver en el juego en s√≠.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/qq/qc/cp/qqqccp5siugamnwegcpegomgank.jpeg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Piezas del juego</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Finalmente, model√© 4 flechas planas que indicar√°n la direcci√≥n en la que se mueve el cursor en el juego. </font><font style="vertical-align: inherit;">Apliqu√© una textura a su geometr√≠a: en la hoja de sprite, esta es una flecha triangular blanca en un trazo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Exportamos todos los modelos 3D (los tres, es decir, el campo, las formas y las flechas) al formato FBX, que requiere Spark AR Studio.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Importar a Spark AR Studio</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Primero, inicie Spark AR Studio e importe modelos 3D all√≠. Aparecer√°n en la lista de activos en la parte inferior izquierda. Al mismo tiempo, crearemos para nosotros una m√°scara tem√°tica con pintura de guerra en forma de "tatuajes" de una cruz y un dedo del pie en la cara. Puede aprender sobre c√≥mo crear una m√°scara texturizada a partir de miles de lecciones en la red global o de la documentaci√≥n oficial en la plataforma, no me enfocar√© en esto. En resumen: descargue el "espacio en blanco", √°bralo en su editor de gr√°ficos favorito, dibuje algo en la parte superior, guarde, importe la imagen en Spark AR Studio, ajuste los par√°metros de material y textura.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/pv/-d/aw/pv-dawxo7-dqxkgd2rxga-umd7w.jpeg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Arrastre nuestros modelos de Activos a la lista de Escenas anterior. Adem√°s, necesitamos que se procesen en un cierto orden: primero el campo (field.fbx), luego el modelo de las figuras (fieldxo.fbx) y, finalmente, las flechas (arrows.fbx). Adem√°s, en la capa inferior tambi√©n habr√° faceTracker con faceMesh: esta es una m√°scara para su cara. Probablemente pueda lanzar modelos al escenario en cualquier orden, sin embargo, tengo la intenci√≥n de desactivar la Prueba de profundidad y Escribir en la memoria intermedia de profundidad (en las propiedades del material) para todos los materiales (excepto las figuras), as√≠ que d√©jelos en el orden que configur√© manualmente: m√°scara - campo - figuras - flechas.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En los materiales de cada capa, configure Modo de fusi√≥n = Alfa para que los objetos se vuelvan transparentes en aquellas partes donde esto se especifica en la textura. </font><font style="vertical-align: inherit;">Y estableceremos las texturas Filtering = Medium para suavizar. </font><font style="vertical-align: inherit;">(Si selecciona un material o una textura de la lista de la izquierda, todas las propiedades disponibles para ellos se mostrar√°n en el lado derecho de la ventana). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Finalmente, agregue el elemento Script a los elementos Activos (haciendo clic en el elemento inferior izquierdo + Agregar activo). </font><font style="vertical-align: inherit;">Adem√°s de los modelos 3D, script.js aparecer√° en la lista, haciendo clic en el cual se abrir√° su editor de texto externo de scripts. </font><font style="vertical-align: inherit;">Cuando guarda en el editor, su programa se reinicia en Spark AR Studio.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Programaci√≥n</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al comienzo del script, conecte los m√≥dulos que necesitamos en este proyecto. </font><font style="vertical-align: inherit;">Esta es una escena, seguimiento de rostros, m√≥dulos para trabajar con tiempo, sonido y animaci√≥n.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> Scene = <span class="hljs-built_in">require</span>(<span class="hljs-string">'Scene'</span>);
<span class="hljs-keyword">const</span> FaceTracking = <span class="hljs-built_in">require</span>(<span class="hljs-string">'FaceTracking'</span>);
<span class="hljs-keyword">const</span> Time = <span class="hljs-built_in">require</span>(<span class="hljs-string">'Time'</span>);
<span class="hljs-keyword">const</span> Audio = <span class="hljs-built_in">require</span>(<span class="hljs-string">'Audio'</span>);
<span class="hljs-keyword">const</span> Animation = <span class="hljs-built_in">require</span>(<span class="hljs-string">'Animation'</span>);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hay muchas formas de implementar tic-tac-toe en Javascript. </font><font style="vertical-align: inherit;">Este art√≠culo no trata de implementar este juego en un lenguaje de programaci√≥n dado, sino de administrarlo con la ayuda de una persona. </font><font style="vertical-align: inherit;">Describir√© los puntos clave espec√≠ficos de la interacci√≥n con el sistema Spark AR para que se entienda el principio. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Acceda al fragmento con nombre del modelo 3D (malla), por ejemplo, al cuadrado azul en la primera fila, segunda columna del campo de juego:</font></font><br>
<br>
<pre><code class="javascript hljs">Scene.root.find(<span class="hljs-string">'b12'</span>);</code></pre><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(Recordemos b12: as√≠ es como llamamos a esta malla en el editor 3D).</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Acceda a la cruz en esta posici√≥n:</font></font><br>
<br>
<pre><code class="javascript hljs">Scene.root.find(<span class="hljs-string">'x12'</span>);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ocultando un dedo del pie (o), estableciendo una cruz (x) y coloreando en verde (g) las celdas del campo '32' (tercera fila, segunda columna):</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">// figure</span>
Scene.root.find(<span class="hljs-string">'o32'</span>).hidden = <span class="hljs-literal">true</span>;<font></font>
Scene.root.find(<span class="hljs-string">'x32'</span>).hidden = <span class="hljs-literal">false</span>;
<span class="hljs-comment">// background</span>
Scene.root.find(<span class="hljs-string">'b32'</span>).hidden = <span class="hljs-literal">true</span>;<font></font>
Scene.root.find(<span class="hljs-string">'g32'</span>).hidden = <span class="hljs-literal">false</span>;<font></font>
Scene.root.find(<span class="hljs-string">'r32'</span>).hidden = <span class="hljs-literal">true</span>;</code></pre><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/tk/xg/bz/tkxgbzthiw7ubagtismtw7pmedk.jpeg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cruz verde con luz de fondo verde en el campo '32'.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Suscr√≠base a los eventos de giro e inclinaci√≥n de la cabeza para moverse por el campo.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">//vert: fov+ back-</span>
FaceTracking.face(<span class="hljs-number">0</span>).cameraTransform.rotationX.monitor().subscribe(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{
	<span class="hljs-keyword">var</span> v = event.newValue;<font></font>
	...<font></font>
});<font></font>
<font></font>
<span class="hljs-comment">//hor: rt+ dn-</span>
FaceTracking.face(<span class="hljs-number">0</span>).cameraTransform.rotationY.monitor().subscribe(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{
	<span class="hljs-keyword">var</span> v = event.newValue;<font></font>
	...<font></font>
});</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqu√≠ todo es muy simple. </font><font style="vertical-align: inherit;">Tomamos del evento los valores de la rotaci√≥n o inclinaci√≥n de la cabeza (event.newValue) y verificamos si est√°n fuera de cierto rango. </font><font style="vertical-align: inherit;">En caso afirmativo, mueva el cursor (cuadro verde) visualmente en la direcci√≥n deseada. </font><font style="vertical-align: inherit;">Un valor negativo de la rotaci√≥n de la cabeza corresponde a su rotaci√≥n hacia la izquierda, positiva hacia la derecha. </font><font style="vertical-align: inherit;">Del mismo modo, para inclinar la cabeza hacia adelante y hacia atr√°s para moverse a lo largo de las l√≠neas. </font><font style="vertical-align: inherit;">El rango completo es de -1 a +1. </font><font style="vertical-align: inherit;">Por lo tanto, puede implementar el movimiento del cursor y ...</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Y luego ca√≠ en la cuenta</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De repente me di cuenta de que controlar el cursor en el campo de la manera que eleg√≠ era inconveniente: debe girar la cabeza para mover una celda, luego volver la cabeza a su posici√≥n original, luego girarla nuevamente para el siguiente paso y as√≠ sucesivamente. ¬øY por qu√© no usar los valores fraccionales de girar la cabeza hacia los lados e inclinarse hacia adelante y hacia atr√°s para enfocarse inmediatamente en la celda deseada en el campo? Es decir, c√≥mo indicarle al cursor su posici√≥n con una mirada, o m√°s bien, con la direcci√≥n de la cabeza. Y luego, el primer m√©todo es un entrenamiento demasiado duro para el cuello. La educaci√≥n f√≠sica es, por supuesto, buena, pero no en la misma medida. Naturalmente, recordaremos la posici√≥n actual en alg√∫n lugar en ap.cur = {x: 1, y: 1} para borrar el cursor en la posici√≥n anterior y guardar las coordenadas de la nueva posici√≥n, que posteriormente se necesita para el "clic". Por ciertoYa no se necesitan flechas visuales para indicar la direcci√≥n del movimiento del cursor: lanzamos un modelo 3D (arrows.fbx) desde el proyecto. Tambi√©n puede borrar la imagen de la flecha de la textura.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Doble parpadeo?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y ahora llegamos a lo m√°s interesante. </font><font style="vertical-align: inherit;">Haga doble clic en los ojos. </font><font style="vertical-align: inherit;">Adm√≠telo, ¬øquer√≠as hacer esto desde el momento en que te enteraste al principio del art√≠culo? </font><font style="vertical-align: inherit;">¬°Ahora le dir√°s a tus amigos que el mouse ya no est√° actualizado y que el doble parpadeo se usa para hacer clic hoy! </font><font style="vertical-align: inherit;">Parpadeo doble </font><font style="vertical-align: inherit;">¬øPor qu√© doble? </font><font style="vertical-align: inherit;">Todo es simple: una persona soltera lo hace involuntariamente peri√≥dicamente, por lo que colgar cualquier evento en un solo parpadeo ser√≠a sadismo.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/qb/ke/8j/qbke8jqkze91tmgkb2xrhxhjrbm.jpeg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En Spark AR, hay eventos leftEye.openness y rightEye.openness, al suscribirse, puede obtener el valor de apertura de cada ojo en event.newValue en el rango de 0 a 1. Consideraremos el ojo cerrado con un valor inferior a 0.1. </font><font style="vertical-align: inherit;">Y llamaremos a la funci√≥n de procesamiento de parpadeo ap.blink1 () (ap es un espacio de nombres, es m√°s conveniente para m√≠).</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">//leftEye</span>
FaceTracking.face(<span class="hljs-number">0</span>).leftEye.openness.monitor().subscribe(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{
	<span class="hljs-keyword">if</span>  (event.newValue &lt; <span class="hljs-number">0.1</span>) {<font></font>
		ap.blink1();<font></font>
	};<font></font>
});<font></font>
<font></font>
<span class="hljs-comment">//leftEye</span>
FaceTracking.face(<span class="hljs-number">0</span>).rightEye.openness.monitor().subscribe(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{
	<span class="hljs-keyword">if</span>  (event.newValue &lt; <span class="hljs-number">0.1</span>) {<font></font>
		ap.blink1();<font></font>
	};<font></font>
});</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En la funci√≥n de procesamiento de parpadeo, definimos el intervalo m√≠nimo entre parpadeos de 200 milisegundos para que esta funci√≥n no funcione inmediatamente dos veces cuando parpadea con ambos ojos, ya que su llamada se cuelga en cada ojo. </font><font style="vertical-align: inherit;">Creo que est√° claro. </font><font style="vertical-align: inherit;">Adem√°s, definimos el tiempo m√°ximo de doble parpadeo: 1 seg. </font><font style="vertical-align: inherit;">Si encajamos en este rango, la funci√≥n action () funcionar√°, que muestra la cruz en la posici√≥n actual. </font><font style="vertical-align: inherit;">Al mismo tiempo, colgaremos action () en el evento mouth.openness, para que el jugador tenga la opci√≥n de poner una cruz en doble parpadeo o al abrir la boca.</font></font><br>
<br>
<pre><code class="javascript hljs">blink1:<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
	<span class="hljs-keyword">var</span> tmNew = <span class="hljs-built_in">Date</span>.now();
	<span class="hljs-keyword">if</span>  (tmNew - ap.blinkStart &gt; <span class="hljs-number">200</span>) {<font></font>
		ap.blinkCount++;<font></font>
		<span class="hljs-keyword">if</span>  (ap.blinkCount &gt; <span class="hljs-number">1</span>) {
			<span class="hljs-comment">//action</span>
			<span class="hljs-keyword">if</span> (tmNew - ap.blinkStart &lt; <span class="hljs-number">1000</span>) {<font></font>
				ap.action();<font></font>
			};<font></font>
			ap.blinkCount = <span class="hljs-number">0</span>;<font></font>
			ap.blinkStart = <span class="hljs-number">0</span>;<font></font>
		} <span class="hljs-keyword">else</span> {<font></font>
			ap.blinkStart = tmNew;<font></font>
		};<font></font>
	};<font></font>
},<font></font>
<font></font>
<span class="hljs-attr">action</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
	<span class="hljs-keyword">if</span>  (ap.fProc == <span class="hljs-literal">false</span>) {<font></font>
		ap.fProc = <span class="hljs-literal">true</span>;<font></font>
		xo.putx();<font></font>
	};<font></font>
},<font></font>
<font></font>
<span class="hljs-comment">//mouth</span>
FaceTracking.face(<span class="hljs-number">0</span>).mouth.openness.monitor().subscribe(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{
	<span class="hljs-keyword">if</span>  (event.newValue &gt; <span class="hljs-number">0.2</span>) {<font></font>
		ap.action();<font></font>
	};<font></font>
});</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Suena</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los encontr√© en las secciones libres de regal√≠as de varios sitios de efectos de sonido. Detalle importante: Spark AR requiere archivos de sonido de cierto formato, a saber, M4A, mono, 44.1 kHz, 16 bits. Los convertidores en l√≠nea de wav y mp3 a m4a est√°n en stock en la red global. Agregu√© sonido a cuatro eventos: mover, ganar dagas, ganar tac toe y dibujar. El volumen total de todos los sonidos despu√©s de la conversi√≥n fue de 105 Kb. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para usar sonidos en un script, debe conectar un m√≥dulo de audio en el script, agregar el n√∫mero deseado de altavoces a la escena por el n√∫mero de sonidos (obtuve Speaker0, Speaker1, Speaker2, Speaker3), agregar el m√≥dulo Playback Controllers a Assets, crear el n√∫mero necesario de subelementos de audioPlaybackController seg√∫n el n√∫mero de sonidos y adjunte un sonido a cada altavoz.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/zz/ib/s8/zzibs8wwtsk_0dzinsuzxu4klb4.jpeg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Despu√©s de eso, puede reproducir el sonido del gui√≥n de la siguiente manera (por ejemplo, el sonido de un clic):</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">var</span> audioClick = Audio.getPlaybackController(<span class="hljs-string">'audioPlaybackControllerClick'</span>);<font></font>
audioClick.reset();<font></font>
audioClick.setPlaying(<span class="hljs-literal">true</span>);</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Construcci√≥n final</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para crear compilaciones para todos los dispositivos m√≥viles compatibles (Android, iOs), simplemente haga clic en Archivo -&gt; Exportar. El volumen del juego para cada plataforma m√≥vil con todos los modelos y texturas 3D en mi caso fue de aproximadamente 1 Mb. Luego, debe ir a trav√©s del navegador al Spark AR Hub en Facebook / sparkarhub y cargar el archivo exportado all√≠. Tambi√©n debe completar una descripci√≥n, buscar palabras clave y descargar un video de demostraci√≥n. Adem√°s, debe ser filmado en el tel√©fono a trav√©s de la c√°mara de Instagram. Para hacer esto, en el centro hay una secci√≥n "Vista previa de la c√°mara" que contiene un enlace. Este enlace se puede abrir en un dispositivo m√≥vil. Se iniciar√° la aplicaci√≥n de Instagram y se abrir√° tu m√°scara (juego). El enlace tambi√©n se puede enviar para probarlo a todos sus amigos, quienes, por supuesto, deben tener un tel√©fono inteligente con la aplicaci√≥n de Instagram instalada.Hasta el final del proceso de moderaci√≥n, la m√°scara no ser√° visible para todos los usuarios y no podr√°n agregarla a su lista de efectos hasta que solo sea visible mediante este enlace.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El proceso de moderaci√≥n generalmente toma un par de d√≠as (puede tomar hasta 10 d√≠as h√°biles). Seg√∫n tengo entendido, al principio el efecto est√° sujeto a pruebas de m√°quina, al menos un video de demostraci√≥n, seguro, porque un segundo despu√©s del env√≠o recib√≠ un mensaje de que la moderaci√≥n no pas√≥. Motivo: el video contiene texto. En general, por alguna raz√≥n, el texto enmascarado no es bienvenido, como dicen las reglas. Tuve que redise√±ar la interfaz del juego para que el puntaje no colgara constantemente por encima de la cabeza del jugador, como lo hab√≠a hecho antes, sino que solo apareci√≥ al final de cada ronda. Y vuelva a grabar el video. Despu√©s de hacer todos los cambios, volv√≠ a presentar mi juego para moderaci√≥n.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tres d√≠as despu√©s, el juego fue aprobado, luego de pasarlo a la secci√≥n "Estilos de c√°mara". </font><font style="vertical-align: inherit;">Honestamente, no recuerdo en qu√© secci√≥n la puse inicialmente (y la secci√≥n, o, en otras palabras, la categor√≠a, deb√≠a seleccionarse). </font><font style="vertical-align: inherit;">Esto no es obvio, ya que no hay una secci√≥n de juegos para Instagram. </font><font style="vertical-align: inherit;">Pero, bueno, ahora sabremos d√≥nde poner nuevos juegos. </font><font style="vertical-align: inherit;">Si los juegos aparecer√°n en el futuro, entonces, probablemente, Instagram deber√≠a agregar una nueva secci√≥n.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Total</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Puede probar una m√°scara yendo al perfil de su creador en Instagram y haciendo clic en el icono de sus m√°scaras a continuaci√≥n (emotic√≥n con dos m√°s). </font><font style="vertical-align: inherit;">Lo mismo se aplica, por supuesto, a los juegos enmascarados. </font><font style="vertical-align: inherit;">Anteriormente, durante la prueba beta de m√°scaras, tambi√©n era necesario suscribirse al autor. </font><font style="vertical-align: inherit;">Pero ahora esta regla ha sido cancelada.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No pagan dinero por crear m√°scaras y no hay una tienda de m√°scaras pagas donde se puedan vender, como aplicaciones en tiendas conocidas. Adem√°s, no necesita pagar la ubicaci√≥n de la m√°scara que cre√≥ en su perfil. Solo es necesario esperar el paso de la moderaci√≥n. Sin embargo, muchos bloggers y compa√±√≠as ordenan el desarrollo de m√°scaras de marca para ellos mismos. Bueno, por supuesto, puedes pedirles a tus suscriptores que se prueben las m√°scaras que creaste y jueguen tus juegos, transmitiendo todo esto a la historia de Instagram. Tales acciones pueden producir el llamado efecto viral, especialmente si el juego es interesante. Esto puede ayudar a promocionar su cuenta. Sin embargo, ahora todos no son demasiado vagos para hacer m√°scaras. Pero la idea de los juegos enmascarados de Instagram todav√≠a es bastante nueva. Adem√°s, hay un umbral de entrada m√°s alto y menos competencia,ya que no todos los creadores de m√°scaras son programadores para escribir un juego completo.</font></font></div>
      
    </div><p class="reference-to-source js-reference-to-source">Source: https://habr.com/ru/post/undefined/</p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es486480/index.html">Waymo Robocars (Google) comienza a entregar paquetes en Phoenix, EE. UU.</a></li>
<li><a href="../es486482/index.html">Caras √∫nicas: contar visitantes, buscar extra√±os, identificaci√≥n en sistemas de reconocimiento</a></li>
<li><a href="../es486484/index.html">Nuevo coronavirus nCOV / 2019-nCoV / NCP / COVID19: previsiones, estad√≠sticas, protecci√≥n, noticias [cuarta reimpresi√≥n, rev.07.03]</a></li>
<li><a href="../es486488/index.html">Sistema operativo Sivelkiriya: descripci√≥n introductoria</a></li>
<li><a href="../es486492/index.html">Icloud phishers y donde viven</a></li>
<li><a href="../es486500/index.html">Componentes web y est√°ndares abiertos</a></li>
<li><a href="../es486506/index.html">Problema n. ¬∞ 30: Capacitaci√≥n en TI: problemas y desaf√≠os actuales de compa√±√≠as l√≠deres</a></li>
<li><a href="../es486510/index.html">Visualizaci√≥n de informaci√≥n de excepci√≥n antes de la salida de emergencia</a></li>
<li><a href="../es486512/index.html">Brevemente sobre c√≥mo ense√±arle a las impresoras multifunci√≥n Brother a escanear en Windows Server</a></li>
<li><a href="../es486514/index.html">Lectura de fin de semana: 10 materiales sobre r√©plicas de tarjetas de sonido, bibliotecas de sonido abiertas y software de audio</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>