<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üï∫üèª üò¥ üõµ Why did we switch to Selenide by writing more than 200 new autotests along the way üë©üèº‚Äçü§ù‚Äçüë®üèø ü§õüèª üêî</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi, I‚Äôm a test automation tool for one of the projects of a large company. In this article, I will explain why we decided to switch from Serenity to S...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Why did we switch to Selenide by writing more than 200 new autotests along the way</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/maxilect/blog/499810/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hi, I‚Äôm a test automation tool for one of the projects of a large company. </font><font style="vertical-align: inherit;">In this article, I will explain why we decided to switch from Serenity to Selenide. </font><font style="vertical-align: inherit;">We have a large-scale task, and although changing the technological stack took some time, later it more than paid for itself by accelerating the writing of tests and performing regression.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/wz/cu/r3/wzcur3lohguxx4c6qnnjfp9wgri.jpeg" alt="image"><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Before we get to the point, a little about the task as a whole. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unfortunately, I cannot disclose the details of the project under the terms of the NDA. In fact, these are some tools for a call center of one large company - call routing, separation of operators according to call topics, etc. in a beautiful user interface. The interface, by the way, is provided not only for operators, but also for controllers listening and evaluating selected calls. Above all this, there is a system of differentiation of rights and an admin panel that allows you to configure all the built-in functions - from telephony to ratings available to controllers.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The entire volume of functionality is divided into several projects: telephony, user panel and admin panel. </font><font style="vertical-align: inherit;">All three projects are under active development. </font><font style="vertical-align: inherit;">And my task is to automate testing on these projects in the broad sense of the word. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For some of the developed functionality, automatic tests already existed, but the specialist who developed them left the company, so there appeared a certain technical duty to automate testing. </font><font style="vertical-align: inherit;">In total, about 50 autotests were written, but the vast majority of them are completely out of date, because </font><font style="vertical-align: inherit;">the functionality has gone far ahead. </font><font style="vertical-align: inherit;">Therefore, initially the task was to update all this.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Stack update</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Existing autotests were written using the Serenity library. In fact, they had to be rewritten again, so there was no point in holding onto the existing developments. The library itself was familiar to me, but personally, I do not consider it an optimal tool. So, understanding the amount of work, I decided to switch to Selenide from the very beginning. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selenide is a fairly popular tool for which there are many ready-made solutions. Some of the features of Selenide are also available for analogues - Atlas, Selenium, HTMLElements, etc. But each of them in its own way did not suit us. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selenium is the basis of Selenide. But for our purposes it is too low level. It makes no sense to reinvent the wheel when there is a ready-made solution. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Atlas appeared recently. It is raw enough and does not have Groovy support.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
HtmlElements is good for everyone, but is deprecated and not supported. There is also JDI, but it has multithreading issues. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Serenity, previously used on the project, was too cumbersome. Everything in it is so interconnected that in order to add some new event handler or interceptor, a dozen classes had to be rewritten (and this did not lead to success every time). Plus, Surenity could not connect Allure, the actual industry and corporate standard for generating test reports. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In Selenide, from an automation point of view, everything is much simpler. For example, there is no need to separately describe the steps - attach to methods, etc. Since it has Allure support out of the box, all actions related to working with web elements automatically fall into the test report.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Of course, Selenide has support for PageFactory, Page Object, and PageElement. This makes the code more readable. Plus, there are internal expectations for the moment when the element appears - there is no need to explicitly state that you need to stop the test for a few seconds before moving on (the timeout limit is set in the configs). Explicit expectations exist separately - you can explicitly redefine the timeout for the necessary elements at each test step. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Conveniently, Selenide has a whole set of various ready-made methods. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Since at the start of the transition from Serenity to Selenide I was alone in the team, the additional advantage was that I already had sufficient experience with Selenide and Groovy, so I could quickly implement ready-made solutions and subsequently spend less effort to support them.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The transition was almost painless. We have implemented Selenide in conjunction with Allure. Allure allows you to create readable and even somewhat beautiful reports, which clearly show which steps fell and with what error. Out of the box, you can attach screenshots of web pages to reports. We even add a video of the run, the source code of the page, the logs of the browser and the web driver.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Migrating existing tests required a minimum of effort. </font><font style="vertical-align: inherit;">What Serenity has, what Selenide has are PageObjects with @FindBy annotations. </font><font style="vertical-align: inherit;">Serenity and Allure use the same Step annotations. </font><font style="vertical-align: inherit;">I had to update the model, the nesting of elements in each other, the order of calling test steps. </font><font style="vertical-align: inherit;">Some tests were completely deleted, some were rewritten from scratch, and somewhere just updating the locators was enough. </font><font style="vertical-align: inherit;">In fact, moving has become a trivial task that most UI automators face when designing a web application.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Test Update</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
After updating the technological stack, they took up the tests themselves. By the way, part of this work has already been completed as part of the transition to a new stack. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Given the accumulated lag behind the functionality of projects, they would still have to be rewritten anyway - this is more profitable in time than to look for inconsistencies in such a volume of code. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In total, about 220 autotests have been written at the moment for both the front-end and the back-end. The emphasis in further development will be on the backend, since most of the functional elements on the front end are already involved in autotests. At the same time, it is constantly changing, so the more tests appear on the front-end, the more forces have to be spent on their support.</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Having infinite time resources, we always try to direct efforts to what will allow us to reduce labor costs for support, covering functionality as much as possible. </font><font style="vertical-align: inherit;">Now the coverage of autotests slightly exceeded 50%.</font></font></blockquote><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The rewritten tests on Selenide have become more compact and accurate due to repeated reuse of the code - all thanks to the capabilities of the library itself. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Updating the tests, we took into account that they need to be run simultaneously (in several threads). </font><font style="vertical-align: inherit;">Tests were previously run on separate virtual machines. </font><font style="vertical-align: inherit;">But the transition to Selenide allowed us to parallelize the task even more, running them in several threads.</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Roughly speaking, the transition to a new framework itself increased the number of simultaneously launched threads from 3 to 8, and the subsequent optimization of tests - up to 50. As a result, 100 UI tests run in just 10 minutes.</font></font></blockquote><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Multithreading, by the way, is another advantage for which we chose Selenide. This is not a big layer of boilerplate, you write a minimum of code. There is no superfluous writing that Selenium needs to prepare the project for launch. Everything you need to run the tests is already out of the box. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In parallel with updating and writing new tests, I conducted training for the guys from the testing department, helping them to switch from manual to full-stack testing, so it arrived in the automation regiment on the project. The technology stack used has a lower entry threshold, and the Internet is full of documentation and videos on how to solve certain problems. A month later, I was joined by a couple of testers who could perform tasks related to automation.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Already a whole team, we were able to optimize regression testing. If earlier the regression took 7 days from the team, now the same tasks are performed for 4 days, i.e. We reduced the time of the tests by almost 2 times. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
There are many scenarios ahead that have yet to be automated. We automated the Smoke tests almost completely, but now we have switched to the most labor-intensive testing scenarios. This will help further reduce recourse times. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Naturally, we will develop a testing infrastructure. Plans to introduce a Mock server. Now we are testing everything on a real stand, generating test data. It takes time and resources. The mock server will allow you to run autotests without this preliminary preparation (we wrote about the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mock server for another project</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We also plan to implement an autotest record so that you can write a TestRail script based on a workpiece obtained by directly clicking on the interface in the browser. </font><font style="vertical-align: inherit;">At the output, we get a kind of autotest prototype. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Article author: Yuri Kudryavtsev, Specialist in automated software testing. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PS We publish our articles on several sites of the Runet. </font><font style="vertical-align: inherit;">Subscribe to our pages on </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VK</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FB</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Instagram</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> or the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Telegram channel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> to learn about all of our publications and other Maxilect news.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en499798/index.html">Two tapas to money: how we developed a financial chat bot with instant card issuance in Azerbaijan</a></li>
<li><a href="../en499802/index.html">Gamedev, cyberpunk and eternal philosophy: 3 weekend mini-series</a></li>
<li><a href="../en499804/index.html">How to work effectively with issues on issues on GitHub</a></li>
<li><a href="../en499806/index.html">Do you know English? Find out how far you could go in the past</a></li>
<li><a href="../en499808/index.html">Customer Experience - how to think through and ensure a quality customer experience</a></li>
<li><a href="../en499812/index.html">Issue # 37: IT training - current issues and challenges from leading companies</a></li>
<li><a href="../en499814/index.html">How our sensors spent their first winter</a></li>
<li><a href="../en499816/index.html">10th Generation Intel Core processor specifications and pricing published</a></li>
<li><a href="../en499818/index.html">Uzbek Telegram Marketing</a></li>
<li><a href="../en499820/index.html">Why we chose Kotlin as one of our target languages. Part 2: Kotlin Multiplatform</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>