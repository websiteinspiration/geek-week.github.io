<!doctype html>
<html class="no-js" lang="ar">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ¤¶ ğŸ³ ğŸ¤¶ğŸ¿ ØªØ¹Ù„Ù… Ù†Ø´Ø± Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø©. Ø§Ù„Ø¬Ø²Ø¡ 2. Kubernetes ğŸ‹ ğŸ¤±ğŸ¼ ğŸ”‡</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ù…Ø±Ø­Ø¨Ø§ ÙŠØ§ Ù‡Ø§Ø¨Ø±!
 

Ù‡Ø°Ø§ Ù‡Ùˆ Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø«Ø§Ù†ÙŠ Ù…Ù† Ø³Ù„Ø³Ù„Ø© Ù…Ù‚Ø§Ù„Ø§Øª "ØªØ¹Ù„Ù… Ù†Ø´Ø± Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø©". ÙÙŠ Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø³Ø§Ø¨Ù‚ ØŒ ÙƒØªØ¨Ù†Ø§ Ø®Ø¯Ù…ØªÙŠÙ† ØµØºÙŠØ±ØªÙŠÙ† Ø¨Ø³ÙŠØ·ØªÙŠÙ† - Ø®Ù„ÙÙŠØ© ÙˆØ¨ÙˆØ§Ø¨Ø© ØŒ ÙˆØ§ÙƒØª...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>ØªØ¹Ù„Ù… Ù†Ø´Ø± Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø©. Ø§Ù„Ø¬Ø²Ø¡ 2. Kubernetes</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/488796/"><p><img src="https://habrastorage.org/webt/iu/kn/ul/iuknulmsnhmtr6n6gcuojiax5vi.png"></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ù…Ø±Ø­Ø¨Ø§ ÙŠØ§ Ù‡Ø§Ø¨Ø±!</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ù‡Ø°Ø§ Ù‡Ùˆ Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø«Ø§Ù†ÙŠ Ù…Ù† Ø³Ù„Ø³Ù„Ø© Ù…Ù‚Ø§Ù„Ø§Øª "ØªØ¹Ù„Ù… Ù†Ø´Ø± Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø©". </font><font style="vertical-align: inherit;">ÙÙŠ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø³Ø§Ø¨Ù‚ ØŒ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ÙƒØªØ¨Ù†Ø§ Ø®Ø¯Ù…ØªÙŠÙ† ØµØºÙŠØ±ØªÙŠÙ† Ø¨Ø³ÙŠØ·ØªÙŠÙ† - Ø®Ù„ÙÙŠØ© ÙˆØ¨ÙˆØ§Ø¨Ø© ØŒ ÙˆØ§ÙƒØªØ´ÙÙ†Ø§ ÙƒÙŠÙÙŠØ© Ø­Ø²Ù…Ù‡Ø§ ÙÙŠ ØµÙˆØ± Ø¹Ø§Ù…Ù„ Ù…ÙŠÙ†Ø§Ø¡. </font><font style="vertical-align: inherit;">ÙÙŠ Ù†ÙØ³ Ø§Ù„Ù…Ù‚Ø§Ù„Ø© ØŒ Ø³Ù†Ù†Ø¸Ù… ØªÙ†Ø³ÙŠÙ‚ Ø­Ø§ÙˆÙŠØ§Øª Ø§Ù„Ø³ÙÙ† Ø§Ù„Ø®Ø§ØµØ© Ø¨Ù†Ø§ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Kubernetes. </font><font style="vertical-align: inherit;">Ø³Ù†Ù‚ÙˆÙ… Ø¨Ø§Ù„ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØªØ³Ù„Ø³Ù„ÙŠØ© Ù„Ø¨Ø¯Ø¡ ØªØ´ØºÙŠÙ„ Ø§Ù„Ù†Ø¸Ø§Ù… ÙÙŠ Minikube ØŒ Ø«Ù… ØªÙƒÙŠÙŠÙÙ‡ Ù„Ù„Ù†Ø´Ø± ÙÙŠ Google Kubernetes Engine.</font></font></p><a name="habracut"></a><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ø®Ø·Ø© Ø§Ù„Ø³Ù„Ø³Ù„Ø©:</font></font></p><br>
<ol>
<li><p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ø¥Ù†Ø´Ø§Ø¡ Ø®Ø¯Ù…Ø§Øª ÙÙŠ Spring Boot ØŒ Ø§Ù„Ø¹Ù…Ù„ Ù…Ø¹ Docker</font></font></a></p><br>
<p><strong><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©: Java 11 ØŒ Spring Boot ØŒ Docker ØŒ ØªØ­Ø³ÙŠÙ† Ø§Ù„ØµÙˆØ±Ø©</font></font></em></strong></p><br>
</li>
<li><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ØªØ·ÙˆÙŠØ± Ù†Ø¸Ø§Ù… Ø§Ù„ØªÙ‡ÙŠØ¦Ø© ÙˆØ§Ù„Ù†Ø´Ø± Kubernetes ÙÙŠ Ù…Ø­Ø±Ùƒ Google Kubernetes</font></font></p><br>
<p><strong><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©: Kubernetes ØŒ GKE ØŒ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙˆØ§Ø±Ø¯ ØŒ autoscaling ØŒ Ø§Ù„Ø£Ø³Ø±Ø§Ø±</font></font></em></strong></p><br>
</li>
<li><p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø®Ø·Ø· Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Helm 3 Ù„Ø¥Ø¯Ø§Ø±Ø© Ø£ÙƒØ«Ø± ÙƒÙØ§Ø¡Ø© Ù„Ù„ÙƒØªÙ„Ø©</font></font></a></p><br>
<p><strong><em> : Helm 3, chart deployment</em></strong></p><br>
</li>
<li><p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="> Jenkins        </a></p><br>
<p><strong><em> : Jenkins configuration, plugins, separate configs repository</em></strong></p><br>
</li>
</ol><br>
<p>       Kubernetes:</p><br>
<ul>
<li>.          ,     .      ,     .</li>
<li>.   ,     ,       .</li>
<li> .                .           .</li>
<li> .    -   ,   Docker-,  Kubernetes       ,       .</li>
<li>.        ().</li>
</ul><br>
<p>Kubernetes â€”  ,     ,     .        .         Kubernetes-    .</p><br>
<p>    GitHub  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"></a>.</p><br>
<h2 id="sreda-kubernetes"> Kubernetes</h2><br>
<p>Minikube â€”       Kubernetes   .          .   ,    ,     GKE. Google Cloud Platform   -  300$     .          2+   (n1-standard-1).</p><br>
<p>   :</p><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"> Minikube</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">   GKE</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">   kubectl (  Kubernetes)</a></li>
</ul><br>
<h2 id="obekty-kubernetes"> Kubernetes</h2><br>
<p>   Kubernetes            .           .    ,     . </p><br>
<p>   Kubernetes:</p><br>
<ul>
<li><p><strong>Namespace</strong> â€”  .   ,      .           .</p><br>
</li>
<li><p><strong>Pod</strong> â€”   .        .       , ,  ,  ,  .</p><br>
</li>
<li><p><strong>ReplicaSet</strong> â€” ,         ,    .    ,        .            ReplicaSet  â€”    Deployment.</p><br>
</li>
<li><p><strong>Deployment</strong> â€”  ,       ReplicaSet'.     .</p><br>
</li>
<li><p><strong>Service</strong> â€”      .        ,       IP-.    ,      .          -  ,  Service  .</p><br>
<p>         ""      Kubernetes,    .</p><br>
<p>   .        ,  .         .     ,     .  :</p><br>
<ul>
<li>ClusterIP â€”   .        IP-,    .</li>
<li>NodePort â€”  IP-  (  ClusterIP)      ,     .      <code>&lt;NodeIP&gt;:&lt;NodePort&gt;</code>.</li>
<li>LoadBalancer â€”   NodePort     ,   .       IP-   .</li>
</ul><br>
<p> Kubernetes     DNS  ,       .       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="></a>.</p><br>
</li>
<li><p><strong>ConfigMap</strong> â€”    ,  , ,       .</p><br>
</li>
<li><p><strong>Secret</strong> â€”     .     (â„– SSL-),    ,   base64- ,      .       .</p><br>
</li>
<li><p><strong>HorizontalPodAutoscaler</strong> â€” ,           .</p><br>
</li>
</ul><br>
<h2 id="minikube-configuration">Minikube configuration</h2><br>
<h5 id="namespace">Namespace:</h5><br>
<p> :</p><br>
<pre><code class="plaintext hljs">kubectl create namespace msvc-ns</code></pre><br>
<p>   :</p><br>
<pre><code class="plaintext hljs">kubectl config set-context --current --namespace=msvc-ns</code></pre><br>
<p>       'msvc-ns'.    ,     'default'.</p><br>
<p>   Kubernetes    yaml-   ,          CLI.        yaml-.</p><br>
<h5 id="configmap">ConfigMap</h5><br>
<p>,    .            URL-  .  ConfigMap       ,          (     ).</p><br>
<pre><code class="plaintext hljs">apiVersion: v1<font></font>
kind: ConfigMap<font></font>
metadata:<font></font>
  name: urls-config<font></font>
data:<font></font>
  BACKEND_URL: "http://backend:8080/"</code></pre><br>
<p>   ,   Kubernetes     .    ,      'backend'   8080 .</p><br>
<h5 id="secret">Secret</h5><br>
<pre><code class="plaintext hljs">apiVersion: v1<font></font>
kind: Secret<font></font>
metadata:<font></font>
  name: msvc-secret<font></font>
type: Opaque<font></font>
stringData:<font></font>
  secret: secret</code></pre><br>
<p> Opaque ,      -.   , ,   Docker-,   .            <em>stringData</em>.       base64,      .       :</p><br>
<pre><code class="plaintext hljs">data:<font></font>
  secret: c2VjcmV0 </code></pre><br>
<h5 id="deployments">Deployments</h5><br>
<p>     â€”    .</p><br>
<p> :</p><br>
<pre><code class="plaintext hljs">apiVersion: apps/v1<font></font>
kind: Deployment<font></font>
metadata:<font></font>
  name: gateway<font></font>
  labels:<font></font>
    tier: gateway<font></font>
    app: microservices<font></font>
spec:<font></font>
  replicas: 3<font></font>
  selector:<font></font>
    matchLabels:<font></font>
      tier: gateway<font></font>
  strategy:<font></font>
    rollingUpdate:<font></font>
      maxSurge: 25%<font></font>
      maxUnavailable: 25%<font></font>
    type: RollingUpdate<font></font>
  template:<font></font>
    metadata:<font></font>
      labels:<font></font>
        tier: gateway<font></font>
    spec:<font></font>
      containers:<font></font>
        - name: gateway<font></font>
          image: anshelen/microservices-gateway:latest<font></font>
          envFrom:<font></font>
            - configMapRef:<font></font>
                name: urls-config<font></font>
          env:<font></font>
            - name: SECRET<font></font>
              valueFrom:<font></font>
                secretKeyRef:<font></font>
                  name: msvc-secret<font></font>
                  key: secret<font></font>
          readinessProbe:<font></font>
              httpGet:<font></font>
                path: /actuator/health<font></font>
                port: 8080<font></font>
              initialDelaySeconds: 5<font></font>
              periodSeconds: 3<font></font>
          ports:<font></font>
            - containerPort: 8080<font></font>
              protocol: TCP<font></font>
          resources:<font></font>
            limits:<font></font>
              memory: "256Mi"<font></font>
              cpu: "200m"<font></font>
            requests:<font></font>
              memory: "128Mi"<font></font>
              cpu: "50m"</code></pre><br>
<ul>
<li><p><strong><em>metadata.labels</em></strong><br>
       ,      .     ,        'microservices'   'gateway'.<br>
       <em>metadata.annotations</em> â€”      ,      .</p><br>
</li>
<li><p><strong><em>spec.replicas</em></strong><br>
       .</p><br>
</li>
<li><p><strong><em>spec.selector.matchLabels</em></strong><br>
        .          ,     tier,  'backend'.   <em>spec.template</em>      ,           <em>metadata.labels</em>     ,   .</p><br>
</li>
<li><p><strong><em>spec.strategy</em></strong><br>
 <em>spec.strategy</em>    .  'rollingUpdate' ,     ReplicaSet,        ReplicaSet',     .    (  /    )    <em>maxSurge</em>  <em>maxUnavailable</em>.      ,  .     <em>spec.strategy</em>     ,       . </p><br>
</li>
<li><p><strong><em>spec.templates</em></strong><br>
 <em>spec.templates</em>      .</p><br>
</li>
<li><p><strong><em>spec.templates.metadata.labels</em></strong><br>
    ,      <em>spec.selector.matchLabels</em>,      "" .</p><br>
</li>
<li><p><strong><em>spec.templates.spec.containers.image</em></strong><br>
 .  latest   Docker-,      ,     .          ,    â€”     Kubernetes.           ,       .         .      'latest'      4    ,      Jenkins. </p><br>
</li>
<li><p><strong><em>spec.templates.spec.containers.envFrom.configMapRef</em></strong><br>
    ConfigMap         .</p><br>
</li>
<li><p><strong><em>spec.templates.spec.containers.env</em></strong><br>
      'SECRET',     -   'secret'.</p><br>
</li>
<li><p><strong><em>spec.templates.spec.containers.readinessProbe</em></strong><br>
    .    ,     . Kubernetes       ,   3       200,        .</p><br>
<p><em>initialDelaySeconds</em> â€”    .<br>
<em>periodSeconds</em> â€”   .</p><br>
<p>     <em>livenessProbe</em>,         ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="></a>   ).</p><br>
</li>
<li><p><strong><em>spec.templates.spec.containers.ports</em></strong><br>
  <em>ports</em>       .     (      <code>-p 8080:8080</code>).</p><br>
</li>
<li><p><strong><em>spec.templates.spec.containers.resources</em></strong><br>
   . <strong><em>limits</em></strong> â€”   ,  <strong><em>requests</em></strong> â€”  ,     . 200m â€” 200  (  ), Mi â€” . </p><br>
</li>
</ul><br>
<p>     ,   ,          .</p><br>
<h5 id="services">Services</h5><br>
<p> :</p><br>
<pre><code class="plaintext hljs">apiVersion: v1<font></font>
kind: Service<font></font>
metadata:<font></font>
  labels:<font></font>
    tier: backend<font></font>
  name: backend<font></font>
spec:<font></font>
  ports:<font></font>
    - port: 8080<font></font>
      protocol: TCP<font></font>
      targetPort: 8080<font></font>
  selector:<font></font>
    tier: backend</code></pre><br>
<p><strong><em>spec.ports.targetPort</em></strong> â€”   , <strong><em>spec.ports.port</em></strong> â€”   .  <strong><em>spec.selector</em></strong>  ,       ,   tier,  'backend'.       ,     ClusterIP,          <code>http://backend:8080</code>.</p><br>
<p> :</p><br>
<pre><code class="plaintext hljs">apiVersion: v1<font></font>
kind: Service<font></font>
metadata:<font></font>
  labels:<font></font>
    tier: gateway<font></font>
  name: gateway<font></font>
spec:<font></font>
  ports:<font></font>
    - nodePort: 30500<font></font>
      port: 80<font></font>
      protocol: TCP<font></font>
      targetPort: 8080<font></font>
  selector:<font></font>
    tier: gateway<font></font>
  type: NodePort</code></pre><br>
<p>     Minikube,       ,     NodePort. <strong><em>spec.ports.nodePort</em></strong> â€”   .    ,        30000-32767.</p><br>
<h5 id="itogovyy-fayl-konfiguracii-dlya-minikube">    Minikube</h5><br>
<div class="spoiler"><b class="spoiler_title">deploy.yaml</b><div class="spoiler_text"><pre><code class="plaintext hljs">apiVersion: v1<font></font>
kind: ConfigMap<font></font>
metadata:<font></font>
  name: urls-config<font></font>
data:<font></font>
  BACKEND_URL: "http://backend:8080/"<font></font>
<font></font>
---<font></font>
<font></font>
apiVersion: v1<font></font>
kind: Secret<font></font>
metadata:<font></font>
  name: msvc-secret<font></font>
type: Opaque<font></font>
stringData:<font></font>
  secret: secret<font></font>
<font></font>
---<font></font>
<font></font>
apiVersion: v1<font></font>
kind: Service<font></font>
metadata:<font></font>
  labels:<font></font>
    tier: backend<font></font>
  name: backend<font></font>
spec:<font></font>
  ports:<font></font>
    - port: 8080<font></font>
      protocol: TCP<font></font>
      targetPort: 8080<font></font>
  selector:<font></font>
    tier: backend<font></font>
<font></font>
---<font></font>
<font></font>
apiVersion: v1<font></font>
kind: Service<font></font>
metadata:<font></font>
  labels:<font></font>
    tier: gateway<font></font>
  name: gateway<font></font>
spec:<font></font>
  ports:<font></font>
    - nodePort: 30500<font></font>
      port: 80<font></font>
      protocol: TCP<font></font>
      targetPort: 8080<font></font>
  selector:<font></font>
    tier: gateway<font></font>
  type: NodePort<font></font>
<font></font>
---<font></font>
<font></font>
apiVersion: apps/v1<font></font>
kind: Deployment<font></font>
metadata:<font></font>
  name: backend<font></font>
  labels:<font></font>
    tier: backend<font></font>
    app: microservices<font></font>
spec:<font></font>
  replicas: 3<font></font>
  selector:<font></font>
    matchLabels:<font></font>
      tier: backend<font></font>
  strategy:<font></font>
    rollingUpdate:<font></font>
      maxSurge: 25%<font></font>
      maxUnavailable: 25%<font></font>
    type: RollingUpdate<font></font>
  template:<font></font>
    metadata:<font></font>
      labels:<font></font>
        tier: backend<font></font>
    spec:<font></font>
      containers:<font></font>
        - name: backend<font></font>
          image: anshelen/microservices-backend:latest<font></font>
          envFrom:<font></font>
            - configMapRef:<font></font>
                name: urls-config<font></font>
          ports:<font></font>
            - containerPort: 8080<font></font>
              protocol: TCP<font></font>
          readinessProbe:<font></font>
            httpGet:<font></font>
              path: /actuator/health<font></font>
              port: 8080<font></font>
            initialDelaySeconds: 5<font></font>
            periodSeconds: 3<font></font>
          resources:<font></font>
            limits:<font></font>
              memory: "256Mi"<font></font>
              cpu: "200m"<font></font>
            requests:<font></font>
              memory: "128Mi"<font></font>
              cpu: "50m"<font></font>
<font></font>
---<font></font>
<font></font>
apiVersion: apps/v1<font></font>
kind: Deployment<font></font>
metadata:<font></font>
  name: gateway<font></font>
  labels:<font></font>
    tier: gateway<font></font>
    app: microservices<font></font>
spec:<font></font>
  replicas: 3<font></font>
  selector:<font></font>
    matchLabels:<font></font>
      tier: gateway<font></font>
  strategy:<font></font>
    rollingUpdate:<font></font>
      maxSurge: 25%<font></font>
      maxUnavailable: 25%<font></font>
    type: RollingUpdate<font></font>
  template:<font></font>
    metadata:<font></font>
      labels:<font></font>
        tier: gateway<font></font>
    spec:<font></font>
      containers:<font></font>
        - name: gateway<font></font>
          image: anshelen/microservices-gateway:latest<font></font>
          envFrom:<font></font>
            - configMapRef:<font></font>
                name: urls-config<font></font>
          env:<font></font>
            - name: SECRET<font></font>
              valueFrom:<font></font>
                secretKeyRef:<font></font>
                  name: msvc-secret<font></font>
                  key: secret<font></font>
          readinessProbe:<font></font>
              httpGet:<font></font>
                path: /actuator/health<font></font>
                port: 8080<font></font>
              initialDelaySeconds: 5<font></font>
              periodSeconds: 3<font></font>
          ports:<font></font>
            - containerPort: 8080<font></font>
              protocol: TCP<font></font>
          resources:<font></font>
            limits:<font></font>
              memory: "256Mi"<font></font>
              cpu: "200m"<font></font>
            requests:<font></font>
              memory: "128Mi"<font></font>
              cpu: "50m"</code></pre></div></div><br>
<h5 id="zapusk"></h5><br>
<p> :</p><br>
<pre><code class="plaintext hljs">kubectl apply -f deploy.yaml</code></pre><br>
<p>    Kubernetes    URL  :</p><br>
<pre><code class="plaintext hljs">minikube service gateway --url -n msvc-ns</code></pre><br>
<p>  :</p><br>
<pre><code class="plaintext hljs">for i in `seq 50`; do curl $(minikube service gateway --url -n msvc-ns) &amp;&amp; echo; done</code></pre><br>
<p>  (    ):</p><br>
<pre><code class="plaintext hljs">Number of requests 1 (gateway 544429797, secret secret)<font></font>
Number of requests 1 (gateway 1543772618, secret secret)<font></font>
Number of requests 2 (gateway 544429797, secret secret)<font></font>
Number of requests 3 (gateway 544429797, secret secret)<font></font>
Number of requests 4 (gateway 544429797, secret secret)<font></font>
Number of requests 1 (gateway -1940767433, secret secret)<font></font>
Number of requests 2 (gateway -1940767433, secret secret)<font></font>
Number of requests 2 (gateway 1543772618, secret secret)<font></font>
Number of requests 5 (gateway 544429797, secret secret)<font></font>
...<font></font>
</code></pre><br>
<div class="spoiler"><b class="spoiler_title"> </b><div class="spoiler_text"><pre><code class="plaintext hljs">Number of requests 1 (gateway 544429797, secret secret)<font></font>
Number of requests 1 (gateway 1543772618, secret secret)<font></font>
Number of requests 2 (gateway 544429797, secret secret)<font></font>
Number of requests 3 (gateway 544429797, secret secret)<font></font>
Number of requests 4 (gateway 544429797, secret secret)<font></font>
Number of requests 1 (gateway -1940767433, secret secret)<font></font>
Number of requests 2 (gateway -1940767433, secret secret)<font></font>
Number of requests 2 (gateway 1543772618, secret secret)<font></font>
Number of requests 5 (gateway 544429797, secret secret)<font></font>
Number of requests 3 (gateway 1543772618, secret secret)<font></font>
Number of requests 6 (gateway 544429797, secret secret)<font></font>
Number of requests 3 (gateway -1940767433, secret secret)<font></font>
Number of requests 4 (gateway 1543772618, secret secret)<font></font>
Number of requests 7 (gateway 544429797, secret secret)<font></font>
Number of requests 4 (gateway -1940767433, secret secret)<font></font>
Number of requests 8 (gateway 544429797, secret secret)<font></font>
Number of requests 9 (gateway 544429797, secret secret)<font></font>
Number of requests 10 (gateway 544429797, secret secret)<font></font>
Number of requests 5 (gateway 1543772618, secret secret)<font></font>
Number of requests 5 (gateway -1940767433, secret secret)<font></font>
Number of requests 6 (gateway -1940767433, secret secret)<font></font>
Number of requests 7 (gateway -1940767433, secret secret)<font></font>
Number of requests 6 (gateway 1543772618, secret secret)<font></font>
Number of requests 8 (gateway -1940767433, secret secret)<font></font>
Number of requests 7 (gateway 1543772618, secret secret)<font></font>
Number of requests 11 (gateway 544429797, secret secret)<font></font>
Number of requests 12 (gateway 544429797, secret secret)<font></font>
Number of requests 8 (gateway 1543772618, secret secret)<font></font>
Number of requests 9 (gateway -1940767433, secret secret)<font></font>
Number of requests 10 (gateway -1940767433, secret secret)<font></font>
Number of requests 11 (gateway -1940767433, secret secret)<font></font>
Number of requests 9 (gateway 1543772618, secret secret)<font></font>
Number of requests 10 (gateway 1543772618, secret secret)<font></font>
Number of requests 11 (gateway 1543772618, secret secret)<font></font>
Number of requests 12 (gateway -1940767433, secret secret)<font></font>
Number of requests 12 (gateway 1543772618, secret secret)<font></font>
Number of requests 13 (gateway 544429797, secret secret)<font></font>
Number of requests 13 (gateway 1543772618, secret secret)<font></font>
Number of requests 13 (gateway -1940767433, secret secret)<font></font>
Number of requests 14 (gateway 1543772618, secret secret)<font></font>
Number of requests 14 (gateway -1940767433, secret secret)<font></font>
Number of requests 15 (gateway -1940767433, secret secret)<font></font>
Number of requests 14 (gateway 544429797, secret secret)<font></font>
Number of requests 15 (gateway 544429797, secret secret)<font></font>
Number of requests 16 (gateway 544429797, secret secret)<font></font>
Number of requests 17 (gateway 544429797, secret secret)<font></font>
Number of requests 15 (gateway 1543772618, secret secret)<font></font>
Number of requests 16 (gateway 1543772618, secret secret)<font></font>
Number of requests 16 (gateway -1940767433, secret secret)<font></font>
Number of requests 17 (gateway 1543772618, secret secret)</code></pre></div></div><br>
<p>   ,         . ,     ,    .      - ,         -,   ,        .    ,      ,   . ,      1   ,   1000,     ""   ,         1000 . , ,     ,          .    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"></a>.</p><br>
<h5 id="upravlenie-klasterom"> </h5><br>
<p>        .</p><br>
<p><strong><em> </em></strong></p><br>
<p><code>kubectl get &lt;object-type&gt;</code> â€”     .      'pod', 'service', 'deployment'  .        'all'.<br>
<code>kubectl get &lt;object-type&gt; &lt;object-name&gt; -o yaml</code> â€”      yaml-.<br>
<code>kubectl describe &lt;object-type&gt; &lt;object-name&gt;</code> â€”    .<br>
<code>kubectl cluster-info</code> â€”   .<br>
<code>kubectl top pod/node</code> â€”   /.</p><br>
<p><strong><em>  </em></strong></p><br>
<p><code>kubectl apply -f &lt;file/directory&gt;</code> â€”         .<br>
<code>kubectl delete &lt;object-type&gt; &lt;object-name&gt;</code> â€”  .<br>
<code>kubectl scale deployment &lt;deployment-name&gt; --replicas=n</code> â€”  .     :  n = 0,     n,      .<br>
<code>kubectl edit &lt;object-type&gt; &lt;object-name&gt;</code> â€”     .<br>
<code>kubectl rollout undo deployment &lt;deployment-name&gt;</code> â€”      .</p><br>
<p><strong><em></em></strong></p><br>
<p><code>kubectl logs &lt;pod-name&gt;</code> â€”   .  <code>-f</code>       .<br>
<code>kubectl port-forward &lt;pod-name&gt; &lt;host-port&gt;:&lt;container-port&gt;</code> â€”      .      .<br>
<code>kubectl exec -it &lt;pod-name&gt; -- /bin/sh</code> â€”     .<br>
<code>kubectl run curl --image=radial/busyboxplus:curl -i --tty</code> â€”   .        curl,     , ,   .<br>
<code>kubectl get events --sort-by='.metadata.creationTimestamp'</code> â€”     Kubernetes.    , ,  ,     .</p><br>
<h2 id="gke-configuration">GKE configuration</h2><br>
<p>   ,   ,    ,     Google Kubernetes Engine.</p><br>
<h5 id="services-1">Services</h5><br>
<p> GKE     ,        IP-.   ,      LoadBalancer:</p><br>
<pre><code class="plaintext hljs">apiVersion: v1<font></font>
kind: Service<font></font>
metadata:<font></font>
  labels:<font></font>
    tier: gateway<font></font>
  name: gateway<font></font>
spec:<font></font>
  selector:<font></font>
    tier: gateway<font></font>
  ports:<font></font>
    - port: 80<font></font>
      protocol: TCP<font></font>
      targetPort: 8080<font></font>
  type: LoadBalancer</code></pre><br>
<p>    ,       ,    .   ,      GCP ( VPC -&gt;  IP-)    ,   ,       <strong><em>spec.loadBalancerIp</em></strong>.</p><br>
<h5 id="horizontalpodautoscalers">HorizontalPodAutoscalers</h5><br>
<p>HorizontalPodAutoscaler           .         Minikube (-     ),   GKE    .</p><br>
<pre><code class="plaintext hljs">apiVersion: autoscaling/v1<font></font>
kind: HorizontalPodAutoscaler<font></font>
metadata:<font></font>
  name: backend<font></font>
spec:<font></font>
  scaleTargetRef:<font></font>
    apiVersion: apps/v1<font></font>
    kind: Deployment<font></font>
    name: backend<font></font>
  minReplicas: 1<font></font>
  maxReplicas: 3<font></font>
  targetCPUUtilizationPercentage: 50</code></pre><br>
<p> <strong><em>spec.scaleTargetRef</em></strong>  ,        backend.  ,     1  3        50%. ,       (     ),     <strong><em>requests.cpu</em></strong>   .</p><br>
<p> HorizontalPodAutoscaler'  .</p><br>
<h5 id="quotas">Quotas</h5><br>
<p>       .   ,       (multitenant environment).   ,    :</p><br>
<pre><code class="plaintext hljs">apiVersion: v1  <font></font>
kind: ResourceQuota  <font></font>
metadata:  <font></font>
  name: msvc-quota  <font></font>
spec:  <font></font>
  hard:<font></font>
    limits.cpu: "2"  <font></font>
    limits.memory: 4Gi</code></pre><br>
<p>       - ,          .    , ,     CLI (. <code>kubectl run</code>),        LimitRange:</p><br>
<pre><code class="plaintext hljs">apiVersion: v1  <font></font>
kind: LimitRange  <font></font>
metadata:  <font></font>
  name: msvc-default-resources  <font></font>
spec:  <font></font>
  limits: <font></font>
    - default:<font></font>
        memory: "512Mi"  <font></font>
        cpu: "250m"  <font></font>
      defaultRequest:  <font></font>
        memory: "256Mi"  <font></font>
        cpu: "50m"  <font></font>
      type: Container</code></pre><br>
<p>         ,       .</p><br>
<h5 id="itogovye-fayly-konfiguracii-dlya-gke">    GKE</h5><br>
<p>     <code>scripts_gke/</code>.</p><br>
<div class="spoiler"><b class="spoiler_title">create_quotas.yaml</b><div class="spoiler_text"><pre><code class="plaintext hljs">apiVersion: v1  <font></font>
kind: ResourceQuota  <font></font>
metadata:  <font></font>
  name: msvc-quota  <font></font>
spec:  <font></font>
  hard:<font></font>
    limits.cpu: "2"  <font></font>
    limits.memory: 4Gi<font></font>
<font></font>
---  <font></font>
<font></font>
apiVersion: v1  <font></font>
kind: LimitRange  <font></font>
metadata:  <font></font>
  name: msvc-default-resources  <font></font>
spec:  <font></font>
  limits: <font></font>
    - default:<font></font>
        memory: "512Mi"  <font></font>
        cpu: "250m"  <font></font>
      defaultRequest:  <font></font>
        memory: "256Mi"  <font></font>
        cpu: "50m"  <font></font>
      type: Container</code></pre></div></div><br>
<div class="spoiler"><b class="spoiler_title">deploy.yaml</b><div class="spoiler_text"><pre><code class="plaintext hljs">apiVersion: v1<font></font>
kind: ConfigMap<font></font>
metadata:<font></font>
  name: urls-config<font></font>
data:<font></font>
  BACKEND_URL: "http://backend:8080/"<font></font>
<font></font>
---<font></font>
<font></font>
apiVersion: v1<font></font>
kind: Secret<font></font>
metadata:<font></font>
  name: msvc-secret<font></font>
type: Opaque<font></font>
stringData:<font></font>
  secret: secret<font></font>
<font></font>
---<font></font>
<font></font>
apiVersion: v1<font></font>
kind: Service<font></font>
metadata:<font></font>
  labels:<font></font>
    tier: backend<font></font>
  name: backend<font></font>
spec:<font></font>
  ports:<font></font>
    - port: 8080<font></font>
      protocol: TCP<font></font>
      targetPort: 8080<font></font>
  selector:<font></font>
    tier: backend<font></font>
<font></font>
---<font></font>
<font></font>
apiVersion: v1<font></font>
kind: Service<font></font>
metadata:<font></font>
  labels:<font></font>
    tier: gateway<font></font>
  name: gateway<font></font>
spec:<font></font>
  selector:<font></font>
    tier: gateway<font></font>
  ports:<font></font>
    - port: 80<font></font>
      protocol: TCP<font></font>
      targetPort: 8080<font></font>
  type: LoadBalancer<font></font>
<font></font>
---<font></font>
<font></font>
apiVersion: apps/v1<font></font>
kind: Deployment<font></font>
metadata:<font></font>
  name: backend<font></font>
  labels:<font></font>
    tier: backend<font></font>
    app: microservices<font></font>
spec:<font></font>
  replicas: 2<font></font>
  selector:<font></font>
    matchLabels:<font></font>
      tier: backend<font></font>
  strategy:<font></font>
    rollingUpdate:<font></font>
      maxSurge: 25%<font></font>
      maxUnavailable: 25%<font></font>
    type: RollingUpdate<font></font>
  template:<font></font>
    metadata:<font></font>
      labels:<font></font>
        tier: backend<font></font>
    spec:<font></font>
      containers:<font></font>
        - name: backend<font></font>
          image: anshelen/microservices-backend:latest<font></font>
          envFrom:<font></font>
            - configMapRef:<font></font>
                name: urls-config<font></font>
          ports:<font></font>
            - containerPort: 8080<font></font>
              protocol: TCP<font></font>
          readinessProbe:<font></font>
            httpGet:<font></font>
              path: /actuator/health<font></font>
              port: 8080<font></font>
            initialDelaySeconds: 5<font></font>
            periodSeconds: 3<font></font>
          resources:<font></font>
            limits:<font></font>
              memory: "512Mi"<font></font>
              cpu: "250m"<font></font>
            requests:<font></font>
              memory: "256Mi"<font></font>
              cpu: "50m"<font></font>
<font></font>
---<font></font>
<font></font>
apiVersion: autoscaling/v1<font></font>
kind: HorizontalPodAutoscaler<font></font>
metadata:<font></font>
  name: backend<font></font>
spec:<font></font>
  scaleTargetRef:<font></font>
    apiVersion: apps/v1<font></font>
    kind: Deployment<font></font>
    name: backend<font></font>
  minReplicas: 1<font></font>
  maxReplicas: 3<font></font>
  targetCPUUtilizationPercentage: 50<font></font>
<font></font>
---<font></font>
<font></font>
apiVersion: apps/v1<font></font>
kind: Deployment<font></font>
metadata:<font></font>
  name: gateway<font></font>
  labels:<font></font>
    tier: gateway<font></font>
    app: microservices<font></font>
spec:<font></font>
  replicas: 2<font></font>
  selector:<font></font>
    matchLabels:<font></font>
      tier: gateway<font></font>
  strategy:<font></font>
    rollingUpdate:<font></font>
      maxSurge: 25%<font></font>
      maxUnavailable: 25%<font></font>
    type: RollingUpdate<font></font>
  template:<font></font>
    metadata:<font></font>
      labels:<font></font>
        tier: gateway<font></font>
    spec:<font></font>
      containers:<font></font>
        - name: gateway<font></font>
          image: anshelen/microservices-gateway:latest<font></font>
          envFrom:<font></font>
            - configMapRef:<font></font>
                name: urls-config<font></font>
          env:<font></font>
            - name: SECRET<font></font>
              valueFrom:<font></font>
                secretKeyRef:<font></font>
                  name: msvc-secret<font></font>
                  key: secret<font></font>
          readinessProbe:<font></font>
              httpGet:<font></font>
                path: /actuator/health<font></font>
                port: 8080<font></font>
              initialDelaySeconds: 5<font></font>
              periodSeconds: 3<font></font>
          ports:<font></font>
            - containerPort: 8080<font></font>
              protocol: TCP<font></font>
          resources:<font></font>
            limits:<font></font>
              memory: "512Mi"<font></font>
              cpu: "250m"<font></font>
            requests:<font></font>
              memory: "256Mi"<font></font>
              cpu: "50m"<font></font>
<font></font>
---<font></font>
<font></font>
apiVersion: autoscaling/v1<font></font>
kind: HorizontalPodAutoscaler<font></font>
metadata:<font></font>
  name: gateway<font></font>
spec:<font></font>
  scaleTargetRef:<font></font>
    apiVersion: apps/v1<font></font>
    kind: Deployment<font></font>
    name: gateway<font></font>
  minReplicas: 1<font></font>
  maxReplicas: 3<font></font>
  targetCPUUtilizationPercentage: 50</code></pre></div></div><br>
<h5 id="zapusk-1"></h5><br>
<p>      scripts_gke:</p><br>
<pre><code class="plaintext hljs">kubectl apply -f scripts_gke/</code></pre><br>
<p>        ,        . URL  :</p><br>
<pre><code class="plaintext hljs">kubectl get svc gateway -o jsonpath='{.status.loadBalancer.ingress[0].ip}'</code></pre><br>
<p>   HorizontalPodAutoscaler'           .</p><br>
<h2 id="zaklyuchenie"></h2><br>
<p>     Kubernetes-       Google Kubernetes Engine.</p><br>
<p>,     ,  ,               .                  ,           â€¦     -           ,    Kubernetes.   (  )     Helm.</p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ÙÙŠ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø«Ø§Ù„Ø« Ù…Ù†</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ø³Ù„Ø³Ù„Ø© Ø§Ù„Ù…Ù‚Ø§Ù„Ø§Øª Ù‡Ø°Ù‡ ØŒ Ù†ØªØ·Ø±Ù‚ Ø¥Ù„Ù‰ Helm 3 ØŒ ÙˆÙ†Ù†Ø´Ø¦ Ù…Ø®Ø·Ø·Ù‹Ø§ Ù„Ù„Ø±Ø¹Ø§ÙŠØ© Ù„Ù†Ø¸Ø§Ù…Ù†Ø§ ÙˆÙ†Ø¶Ø¹Ù‡ ÙÙŠ Ù…Ø³ØªÙˆØ¯Ø¹ ØªÙ… Ø¥Ù†Ø´Ø§Ø¤Ù‡ Ø¹Ù„Ù‰ Ø£Ø³Ø§Ø³ ØµÙØ­Ø§Øª GitHub.</font></font></p></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar488782/index.html">ÙƒÙŠÙ ØªØ­Ø¨ Ø®ÙŠØ§Ø± Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªØ¨Ø¹ÙŠØ© Ù‡Ø°Ø§ ÙÙŠ PythonØŸ</a></li>
<li><a href="../ar488784/index.html">ØªØ³ÙˆÙŠÙ‚ ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠØ§Øª Ø§Ù„Ø­Ø±Ø© Ø¨Ù…ÙˆØ¬Ø¨ ØªØ±Ø§Ø®ÙŠØµ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ø§Ù„Ù…ØªØ±ÙˆÙƒØ©</a></li>
<li><a href="../ar488786/index.html">Ù…Ø§ Ù…Ø¯Ù‰ ØªÙØµÙŠÙ„ Ù‚ØµØ© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ØŸ</a></li>
<li><a href="../ar488792/index.html">Ø±ØµØ¯ Ù…Ø¯Ù‰ ØªÙˆÙØ± Ø§Ù„Ù…ÙˆÙ‚Ø¹ ÙÙŠ Ø±ÙˆØ³ÙŠØ§ Ø¹Ù„Ù‰ Ø§Ù„Ø±ÙƒØ¨Ø©</a></li>
<li><a href="../ar488794/index.html">Golang + Phaser3 = MMORPG - Ø§Ù„Ø¹Ù…ÙŠÙ„ ÙˆØ§Ù„Ø®Ø§Ø¯Ù…</a></li>
<li><a href="../ar488800/index.html">Ø±Ø´ÙŠÙ‚: 9 Ù†ØµØ§Ø¦Ø­ Ø³ÙŠØ¦Ø©</a></li>
<li><a href="../ar488806/index.html">Ø£Ù„ÙŠØ³Øª Ù‡Ø°Ù‡ Ø¨Ù†Ø§Ø¡Ø© Ø£Ù… Ø£Ù†Ùƒ ØªÙ‚Ø¯Ù… Ø§Ù„Ø¹Ø±ÙŠØ¶Ø© Ù„Ù„Ù…Ù„ÙƒØŸ</a></li>
<li><a href="../ar488808/index.html">Ù…Ø¨Ø±Ù…Ø¬ÙˆÙ† ØŒ Ø¯Ø¹Ù†Ø§ Ù†Ø¯Ø±Ø³ Ù…ØµØ§Ø¯Ø± Ø§Ù„Ø¨Ø±Ø§Ù…Ø¬ Ø§Ù„ÙƒÙ„Ø§Ø³ÙŠÙƒÙŠØ©</a></li>
<li><a href="../ar488810/index.html">Ù†Ø­ÙŠØ§ Ø§Ù„Ø³Ø¯Ø§Ø³ÙŠ. Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø£ÙˆÙ„</a></li>
<li><a href="../ar488812/index.html">Ø§Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø´Ø±ÙƒØ© Ù†ÙØ· Ø§Ù„Ø¬Ù†ÙˆØ¨ ØŒ Ø¬ÙŠØ¯Ø© ÙˆÙ…Ø®ØªÙ„ÙØ©. ØªÙØªØ­ Intel AIB Ù„Ù„Ù…Ø·ÙˆØ±ÙŠÙ† ÙˆØ§Ù„Ù…ØµÙ†Ø¹ÙŠÙ†</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>