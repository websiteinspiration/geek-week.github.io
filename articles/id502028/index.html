<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🛀🏽 🕴🏼 ✍️ Vanya pergi ke adaptif dinamis atau nenek JavaScript 👨🏻‍⚖️ ⚫️ 💷</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Saat bekerja pada adaptif, kita sekarang dan kemudian harus mengubah penampilan objek. Biasanya cukup bagi kami untuk mendaftarkan beberapa pertanyaan...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Vanya pergi ke adaptif dinamis atau nenek JavaScript</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/502028/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Saat bekerja pada adaptif, kita sekarang dan kemudian harus mengubah penampilan objek. </font><font style="vertical-align: inherit;">Biasanya cukup bagi kami untuk mendaftarkan beberapa pertanyaan media dan kami bisa melakukannya. </font><font style="vertical-align: inherit;">Dalam beberapa kasus, kita perlu mengubah urutan elemen, dan di sini, misalnya, properti pesanan dari teknologi Flexbox atau Grid datang untuk menyelamatkan. </font><font style="vertical-align: inherit;">Tetapi ada saat-saat ini tidak membantu kita. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gagasan adaptif dinamis dirancang untuk menyederhanakan kehidupan desainer tata letak dan dengan cepat mengadaptasi elemen tata letak yang kompleks.</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/QKuMr575vlQ" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sebagai contoh, lihat kasus ini. Di sini kita memiliki struktur berikut: heading dan beberapa teks. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/jd/hs/i8/jdhsi8bq-3u7lszevxzxd9mmgxq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tetapi dengan izin tertentu, perancang menunjukkan bahwa teks yang berada di bawah judul sekarang harus berada di tempat yang sama sekali berbeda dalam struktur. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/cy/e4/u6/cye4u6m9mmoop_qysyp4mzfxinq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Biasanya, desainer tata letak memecahkan masalah ini dengan salah satu dari dua cara. Saya akan segera mengingatkan Anda tentang mereka. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya akan menunjukkannya sebagai contoh situasi kehidupan ketika bocah kota Vanya benar-benar ingin datang ke neneknya selama musim panas. Tetapi bukan karena dia merindukan neneknya, tetapi karena dia ingin pergi ke sungai bersama gadis Olya. Dan dia ingin melakukan ini pada resolusi di bawah 992px. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/x9/ev/nj/x9evnjtlgrzdje2vpbxvajitcw8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bagaimana kita memecahkan masalah Vani?</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kita dapat melakukan hal berikut: Sembunyikan Vanya di kota atas izin ini, dan tunjukkan Vanya di sungai dengan Olya. Tapi untuk ini kita perlu membuat klon dari Vani. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Inilah kota (asli) Vanya. Tapi Vanya, pada kenyataannya, di sungai sudah bersama Olya. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/cq/34/hu/cq34hu8vfdlpqmc5nqsniftrdxw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Namun awalnya Vanya sungai ini disembunyikan dalam CSS. Kami menulis kueri media dengan parameter yang kami butuhkan, di mana kami menampilkan Vanya yang baru, dan menyembunyikan Vanya yang lama (kota). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/2t/i0/id/2ti0idhaphwbdm9kelpifg0ndec.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Semuanya bekerja untuk kita - atas izin yang kita butuhkan, Vanya menemukan dirinya di bawah Olya. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vv/hz/i6/vvhzi6fnhiti6hed2t5ojkq42wg.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dengan demikian, ketika resolusi lebih besar dari 992px, Vanya segera kembali ke kota. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vd/s1/q7/vds1q743_a221midfog7xtlodtq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan sepertinya semuanya baik-baik saja, Vanya dengan Olya saat dibutuhkan. Anda dapat membubarkan ...</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tapi tidak sesederhana itu. Bahkan, beberapa pelanggan sangat menentang duplikat konten. Ini disebabkan oleh beberapa masalah dengan SEO, dan, pada prinsipnya, pembuatan blok yang tidak perlu. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang kita beruntung, dalam situasi kita, Vanya agak kecil, dan Vanya kebetulan sangat besar, masif, dipompa kawan, yang masing-masing membutuhkan banyak baris kode. Dan dalam situasi ini, termasuk pelanggan, mereka meminta Anda untuk memindahkan objek DOM menggunakan JavaScript. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ini dapat dilakukan kira-kira sebagai berikut. Untuk memulainya, saya harus menghapus Vanya, yang merupakan klon, dalam HTML dan meninggalkan Vanya yang asli. Di CSS, komentari semua baris yang awalnya kami miliki untuk opsi pembungkus lain. Dan tambahkan di sini kode JS yang sederhana.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">// </span>
<span class="hljs-keyword">const</span> parent_original = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.content__blocks_city'</span>);
<span class="hljs-keyword">const</span> parent = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.content__column_river'</span>);
<span class="hljs-keyword">const</span> item = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.content__block_item'</span>);<font></font>
<font></font>
<span class="hljs-comment">//   </span>
<span class="hljs-built_in">window</span>.addEventListener(<span class="hljs-string">'resize'</span>, move);<font></font>
<font></font>
<span class="hljs-comment">//</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">move</span>(<span class="hljs-params"></span>)</span>{
	<span class="hljs-keyword">const</span> viewport_width = <span class="hljs-built_in">Math</span>.max(<span class="hljs-built_in">document</span>.documentElement.clientWidth, <span class="hljs-built_in">window</span>.innerWidth || <span class="hljs-number">0</span>);
	<span class="hljs-keyword">if</span> (viewport_width &lt;= <span class="hljs-number">992</span>) {
		<span class="hljs-keyword">if</span> (!item.classList.contains(<span class="hljs-string">'done'</span>)) {<font></font>
			parent.insertBefore(item, parent.children[<span class="hljs-number">2</span>]);<font></font>
			item.classList.add(<span class="hljs-string">'done'</span>);<font></font>
		}<font></font>
	} <span class="hljs-keyword">else</span> {
		<span class="hljs-keyword">if</span> (item.classList.contains(<span class="hljs-string">'done'</span>)) {<font></font>
			parent_original.insertBefore(item, parent_original.children[<span class="hljs-number">2</span>]);<font></font>
			item.classList.remove(<span class="hljs-string">'done'</span>);<font></font>
		}<font></font>
	}<font></font>
}<font></font>
<font></font>
<span class="hljs-comment">// </span><font></font>
move();<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pertama, kita mendeklarasikan variabel di mana kita "memanggil" ke kota, sungai dan Vani asli. Selanjutnya, kita mulai "mendengarkan" lebar layar untuk menangkap momen ketika kita perlu memindahkan Vanya. Setelah kami mendapatkan lebar dan mengatur kondisi di mana kami memeriksa bahwa lebarnya kurang dari atau sama dengan 992px. Saat memindahkan Vanya, kami memberikan kelas kepadanya, jadi kami memeriksa keberadaan kelas sehingga gerakan ini tidak terjadi setiap saat (Vanya bergerak sekali dan hanya itu, Anda tidak perlu terus-menerus mentransfernya). Dan kami melakukan transfer itu sendiri di dalam induk (ke sungai), di sini kami menunjukkan posisi di pohon DOM di mana kita perlu memindahkan Vanya (di bawah Olya, di atas Olya). Dan ketika kita memiliki resolusi lebih besar dari 992px, kita harus mengembalikan Vanya ke tempat itu. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami mencoba dan melihat bahwa Vanya kami kembali bergerak di bawah Olya.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan semuanya baik-baik saja: kami tidak memiliki konten duplikat, semuanya berfungsi dengan baik, pelanggan puas, semua orang senang. Tetapi metode ini memiliki sejumlah masalah yang terkait dengan penulisan kode js itu sendiri. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami memahami bahwa untuk satu kasus, ini normal - kami menulis dengan baik. Tetapi saya mendapat ide untuk mengotomatiskan proses ini. Misalkan saya perlu melemparkan 5-6 elemen yang sama sekali berbeda pada halaman. Untuk tugas ini, menulis kode js menggunakan metode ini cukup melelahkan dan memakan waktu. Dan poin kedua, yang, tentu saja, membuat Anda tegang, adalah beban pada PC pengguna, karena di sini kita terus-menerus "mendengarkan" lebar layar. Saya juga ingin mengoptimalkan momen ini. Itu dapat dioptimalkan dalam kode ini juga, tetapi karena saya menulis </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">alat</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> otomatisasi yang saya sebut </font><b><font style="vertical-align: inherit;">"adaptive dinamis"</font></b><font style="vertical-align: inherit;"> , saya dioptimalkan di sana.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang saya akan menunjukkan cara kerjanya. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setelah menghubungkan adaptif dinamis saya, saya hanya perlu bekerja dengan file HTML dan tidak perlu mengakses JavaScript. Untuk melakukan ini, saya perlu menulis atribut data-da (da adalah kependekan dari adaptif dinamis) dan menentukan tiga parameter dalam tanda kutip, dipisahkan dengan koma. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Parameter pertama adalah di mana. Saya mengambil kelas objek yang unik di mana saya ingin memindahkan Vanya. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Parameter kedua adalah yang (berturut-turut). Objek saya memiliki dua elemen: nol dan yang pertama (kita tahu bahwa di JavaScript semuanya dimulai dari awal). Saya perlu memasukkan Vanya setelah objek "1", jadi saya menulis parameter "2". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Parameter ketiga adalah kapan. Pada parameter ketiga, saya menulis "992", ini adalah resolusi di bawah ini yang Vanya benar-benar ingin dapatkan ke Olya.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Parameter kedua dan ketiga adalah opsional. Secara default, objek akan dipindahkan ke ujung blok dengan resolusi di bawah 768px. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/s6/aw/an/s6awan4diwfqltbtcyvt7nkkg-k.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami memeriksa. Semuanya berfungsi sama seperti di versi sebelumnya, tetapi tanpa duplikasi konten dan semuanya otomatis. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pertimbangkan fasilitasnya. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang, untuk memindahkan Vanya ke Olya, saya hanya perlu mengubah nomor seri di parameter atribut kedua. Dan Vanya sudah akan melewati Olya. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/cl/w1/it/clw1it_jfjybuy4wewk8bwxdbio.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nyaman bukan? Saya dapat melakukan hal yang sama dengan parameter breakpoint ketiga. Saya dapat menentukan, misalnya, 1280px. (data-da = "content__column_river, 1,1280"). Jadi Vanya akan pergi ke Olya sedikit lebih awal, tepatnya ketika nilai ini tercapai. Dan yang paling keren adalah Vanya akan kembali ke tempatnya secara otomatis.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk menambah kenyamanan, alih-alih nomor seri pada parameter kedua atribut, Anda dapat menentukan satu dari dua nilai - pertama atau terakhir. Ketika saya menulis pertama kali, Vanya akan bergerak di atas judul "Saya seorang sungai." Ini akan terletak paling pertama di dalam objek tempat kita mengirimnya. Dengan demikian, jika Anda menentukan yang terakhir, maka Vanya kami akan berada di paling bawah objek. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/hx/kb/l4/hxkbl42bvvf9aqvsnffcqhpkq0w.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mari kita lihat beberapa contoh lagi. Misalkan kita dapat mengirim Kolya ke taman lota, dan mengirim Anya ke sungai ke Van dan Ola juga, itu akan lebih menyenangkan. Kami menulis untuk Kolya atribut dengan parameter </font></font><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">data-da = "content__column_garden, 2,992"</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Dan untuk Ani kita menulis </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">data-da = "content__column_river, 1.1280"</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Kita melihat: Anya, Olya dan Vanya di sungai. Kolya pergi ke Lota beberapa saat kemudian. Setelah kembali, semua pria ada di tempat mereka. Semuanya bagus.</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bermain-main di CodePen: </font></font></b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">codepen.io/FreelancerLifeStyle/project/full/ZmWOPm</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Tentu saja, Anda mungkin memiliki pertanyaan: bagaimana dengan acara yang dapat digantung pada objek yang dapat dipindahkan? Sebagai contoh, pada awalnya, ketika mengklik Anya, kita mendapatkan jendela dengan tulisan: "Semuanya baik-baik saja." Mari kita lihat apa yang terjadi ketika dia bergerak bersama para pria ke sungai. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pindahkan, buat klik - semuanya berfungsi dengan baik, jendela juga ditampilkan. Acara tetap dengan objek saat dipindahkan. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/pn/yp/9w/pnyp9wq5kdlt6nl5ypa-rgx3uhw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan pertanyaan kedua yang menarik adalah beban, yang saya coba meminimalkan. Sekarang saya akan menunjukkan ini dengan menceritakan sedikit tentang kode yang tersembunyi di bawah kap adaptif dinamis.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pertama-tama, saya mendeklarasikan beberapa variabel, termasuk membuat array, yang saya isi di bawah ini. Saya mendapatkan atribut, pisahkan, mengubahnya menjadi array untuk mendapatkan elemen individual. Selanjutnya, saya mengisi posisi asli benda-benda itu sehingga mereka dapat dikembalikan ke tempat orang tua mereka (di kota). Setelah itu, saya mengisi array elemen sendiri, sehingga saya bisa mengurutkannya untuk operasi yang benar.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">let</span> originalPositions = [];
<span class="hljs-keyword">let</span> daElements = <span class="hljs-built_in">document</span>.querySelectorAll(<span class="hljs-string">'[data-da]'</span>);
<span class="hljs-keyword">let</span> daElementsArray = [];
<span class="hljs-keyword">let</span> daMatchMedia = [];
<span class="hljs-comment">// </span>
<span class="hljs-keyword">if</span> (daElements.length &gt; <span class="hljs-number">0</span>) {
	<span class="hljs-keyword">let</span> number = <span class="hljs-number">0</span>;
	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> index = <span class="hljs-number">0</span>; index &lt; daElements.length; index++) {
		<span class="hljs-keyword">const</span> daElement = daElements[index];
		<span class="hljs-keyword">const</span> daMove = daElement.getAttribute(<span class="hljs-string">'data-da'</span>);
		<span class="hljs-keyword">if</span> (daMove != <span class="hljs-string">''</span>) {
			<span class="hljs-keyword">const</span> daArray = daMove.split(<span class="hljs-string">','</span>);
			<span class="hljs-keyword">const</span> daPlace = daArray[<span class="hljs-number">1</span>] ? daArray[<span class="hljs-number">1</span>].trim() : <span class="hljs-string">'last'</span>;
			<span class="hljs-keyword">const</span> daBreakpoint = daArray[<span class="hljs-number">2</span>] ? daArray[<span class="hljs-number">2</span>].trim() : <span class="hljs-string">'767'</span>;
			<span class="hljs-keyword">const</span> daDestination = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.'</span> + daArray[<span class="hljs-number">0</span>].trim())
			<span class="hljs-keyword">if</span> (daArray.length &gt; <span class="hljs-number">0</span> &amp;&amp; daDestination) {<font></font>
				daElement.setAttribute(<span class="hljs-string">'data-da-index'</span>, number);
				<span class="hljs-comment">//   </span><font></font>
				originalPositions[number] = {<font></font>
					<span class="hljs-string">"parent"</span>: daElement.parentNode,
					<span class="hljs-string">"index"</span>: indexInParent(daElement)<font></font>
				};<font></font>
				<span class="hljs-comment">//   </span><font></font>
				daElementsArray[number] = {<font></font>
					<span class="hljs-string">"element"</span>: daElement,
					<span class="hljs-string">"destination"</span>: <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.'</span> + daArray[<span class="hljs-number">0</span>].trim()),
					<span class="hljs-string">"place"</span>: daPlace,
					<span class="hljs-string">"breakpoint"</span>: daBreakpoint<font></font>
				}<font></font>
				number++;<font></font>
			}<font></font>
		}<font></font>
	}<font></font>
	dynamicAdaptSort(daElementsArray);<font></font>
<font></font>
	<span class="hljs-comment">//    </span>
	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> index = <span class="hljs-number">0</span>; index &lt; daElementsArray.length; index++) {
		<span class="hljs-keyword">const</span> el = daElementsArray[index];
		<span class="hljs-keyword">const</span> daBreakpoint = el.breakpoint;
		<span class="hljs-keyword">const</span> daType = <span class="hljs-string">"max"</span>; <span class="hljs-comment">// MobileFirst   min</span><font></font>
<font></font>
		daMatchMedia.push(<span class="hljs-built_in">window</span>.matchMedia(<span class="hljs-string">"("</span> + daType + <span class="hljs-string">"-width: "</span> + daBreakpoint + <span class="hljs-string">"px)"</span>));<font></font>
		daMatchMedia[index].addListener(dynamicAdapt);<font></font>
	}<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan pada akhirnya, optimasi yang saya bicarakan diimplementasikan: alih-alih mengubah ukuran jendela (mendengarkan setiap perubahan jendela), kita hanya akan mendengarkan perubahan di breakpoint menggunakan window matchMedia. </font><font style="vertical-align: inherit;">Dengan cara ini kami mendapatkan respons browser hanya di beberapa titik: yang kami tunjukkan dalam atribut objek kami. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selanjutnya, saya mengumpulkan array dari breakpoints ini dan menggantung acara untuk setiap breakpoints. </font><font style="vertical-align: inherit;">Dalam fungsi dynamic_adapt utama, saya perluas semua ini di dalam array yang kami kumpulkan dan disortir, periksa keberadaan breakpoint, pindahkan elemen, atau kembalikan ke tempat mereka.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">// </span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">dynamicAdapt</span>(<span class="hljs-params">e</span>) </span>{
	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> index = <span class="hljs-number">0</span>; index &lt; daElementsArray.length; index++) {
		<span class="hljs-keyword">const</span> el = daElementsArray[index];
		<span class="hljs-keyword">const</span> daElement = el.element;
		<span class="hljs-keyword">const</span> daDestination = el.destination;
		<span class="hljs-keyword">const</span> daPlace = el.place;
		<span class="hljs-keyword">const</span> daBreakpoint = el.breakpoint;
		<span class="hljs-keyword">const</span> daClassname = <span class="hljs-string">"_dynamic_adapt_"</span> + daBreakpoint;<font></font>
<font></font>
		<span class="hljs-keyword">if</span> (daMatchMedia[index].matches) {
			<span class="hljs-comment">// </span>
			<span class="hljs-keyword">if</span> (!daElement.classList.contains(daClassname)) {
				<span class="hljs-keyword">let</span> actualIndex = indexOfElements(daDestination)[daPlace];
				<span class="hljs-keyword">if</span> (daPlace === <span class="hljs-string">'first'</span>) {<font></font>
					actualIndex = indexOfElements(daDestination)[<span class="hljs-number">0</span>];<font></font>
				} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (daPlace === <span class="hljs-string">'last'</span>) {<font></font>
					actualIndex = indexOfElements(daDestination)[indexOfElements(daDestination).length];<font></font>
				}<font></font>
				daDestination.insertBefore(daElement, daDestination.children[actualIndex]);<font></font>
				daElement.classList.add(daClassname);<font></font>
			}<font></font>
		} <span class="hljs-keyword">else</span> {
			<span class="hljs-comment">//  </span>
			<span class="hljs-keyword">if</span> (daElement.classList.contains(daClassname)) {<font></font>
				dynamicAdaptBack(daElement);<font></font>
				daElement.classList.remove(daClassname);<font></font>
			}<font></font>
		}<font></font>
	}<font></font>
	customAdapt();<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kembali ke fungsi posisi asal:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">//   </span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">dynamicAdaptBack</span>(<span class="hljs-params">el</span>) </span>{
	<span class="hljs-keyword">const</span> daIndex = el.getAttribute(<span class="hljs-string">'data-da-index'</span>);
	<span class="hljs-keyword">const</span> originalPlace = originalPositions[daIndex];
	<span class="hljs-keyword">const</span> parentPlace = originalPlace[<span class="hljs-string">'parent'</span>];
	<span class="hljs-keyword">const</span> indexPlace = originalPlace[<span class="hljs-string">'index'</span>];
	<span class="hljs-keyword">const</span> actualIndex = indexOfElements(parentPlace, <span class="hljs-literal">true</span>)[indexPlace];<font></font>
	parentPlace.insertBefore(el, parentPlace.children[actualIndex]);<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Secara alami, banyak yang memiliki pertanyaan tentang Mobile First. </font><font style="vertical-align: inherit;">Tidak ada masalah - kita hanya perlu mengubah beberapa variabel dalam kode (menghapus pengaturan ini dalam HTML sudah berfungsi):</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ketika saya mengumpulkan array breakpoint, kita perlu mengubah "maks" menjadi "min" di sini. </font><font style="vertical-align: inherit;">Dan acara tersebut akan "didengarkan" bukan oleh max-width, tetapi oleh min-width.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anda juga perlu mengubah pengurutan agar objek dalam array disejajarkan dalam urutan yang berbeda saat kami mengurutkannya berdasarkan breakpoint. </font></font></li>
</ol><br>
<pre><code class="javascript hljs">	<span class="hljs-comment">// </span>
	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">dynamicAdaptSort</span>(<span class="hljs-params">arr</span>) </span>{<font></font>
		arr.sort(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">a, b</span>) </span>{
			<span class="hljs-keyword">if</span> (a.breakpoint &gt; b.breakpoint) { <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span> } <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> <span class="hljs-number">1</span> } <span class="hljs-comment">// MobileFirst </span><font></font>
		});<font></font>
		arr.sort(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">a, b</span>) </span>{
			<span class="hljs-keyword">if</span> (a.place &gt; b.place) { <span class="hljs-keyword">return</span> <span class="hljs-number">1</span> } <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span> }<font></font>
		});<font></font>
	}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Juga dalam adaptive dinamis, saya menggunakan metode tertentu untuk mendapatkan indeks ketika objek dilempar. </font><font style="vertical-align: inherit;">Dan ini adalah kelemahan pertama - saya harus mengecualikan objek yang ditransfer. </font><font style="vertical-align: inherit;">Itu </font><font style="vertical-align: inherit;">ketika saya mentransfer objek ke tempat yang sama, sehingga semuanya memadai dan objek berbaris dalam urutan yang kita inginkan, saat mentransfer, saya perlu mengecualikan objek yang sebelumnya ditransfer ke titik yang sama.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">//       </span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">indexOfElements</span>(<span class="hljs-params">parent, back</span>) </span>{
	<span class="hljs-keyword">const</span> children = parent.children;
	<span class="hljs-keyword">const</span> childrenArray = [];
	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; children.length; i++) {
		<span class="hljs-keyword">const</span> childrenElement = children[i];
		<span class="hljs-keyword">if</span> (back) {<font></font>
			childrenArray.push(i);<font></font>
		} <span class="hljs-keyword">else</span> {
			<span class="hljs-comment">//  </span>
			<span class="hljs-keyword">if</span> (childrenElement.getAttribute(<span class="hljs-string">'data-da'</span>) == <span class="hljs-literal">null</span>) {<font></font>
				childrenArray.push(i);<font></font>
			}<font></font>
		}<font></font>
	}<font></font>
	<span class="hljs-keyword">return</span> childrenArray;<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tetapi membutuhkan masalah penyortiran lainnya. Misalnya, jika saya mentransfer orang-orang pada saat yang sama ke posisi yang sama, saya tidak akan dapat mengontrol pesanan mereka. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Salah satu cara untuk mengembangkan adaptasi dinamis ini dapat, misalnya, penciptaan beberapa breakpoints. Contoh, kita perlu memindahkan Vanya ke Ola pada 1280px, dan pada 992px Vanya untuk pindah ke taman, atau kembali ke tempat itu. Fungsi ini tidak tersedia sekarang, jadi masih ada pekerjaan yang harus dilakukan. Secara umum, untuk mencakup 95% tugas sehari-hari secara adaptif, fungsi yang sekarang sudah cukup bagi saya. Untuk menyelesaikan masalah memindahkan item ke tempat lain, saya perlu menghabiskan beberapa detik untuk menulis atribut. Dan saya akan mendapatkan hasil yang saya butuhkan.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Secara alami, saya mendesak semua orang yang menyukai adaptive dinamis untuk mengambil bagian dalam pengujian, pengembangan dan peningkatan fungsional dan optimalisasi kode itu sendiri. </font><font style="vertical-align: inherit;">Dan semuanya agar Kohl, Ani, Vani, dan Olya kita akan bersama ketika mereka menginginkannya. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Repositori GitHub</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github.com/FreelancerLifeStyle/dynamic_adapt</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Berdasarkan video " </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dynamic Adaptive // ​​Fast Adaptation of Objects Complex in JavaScript</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> " di saluran youtube " </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Freelancer for Life</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> "</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id501996/index.html">Zen Go (Versi Saku)</a></li>
<li><a href="../id501998/index.html">Harga gaya mahal. Laporan Yandex</a></li>
<li><a href="../id502000/index.html">12 Mata Kuliah Rekayasa Data Online</a></li>
<li><a href="../id502004/index.html">Metode Kanban: Memahami Proses Anda sebagai Proses Membangun Pengetahuan Kolektif - Bagian 1 (resep)</a></li>
<li><a href="../id502008/index.html">Pemrograman ke massa</a></li>
<li><a href="../id502030/index.html">Layanan Web di Oracle</a></li>
<li><a href="../id502034/index.html">Komponen yang terkontrol dan tidak terkendali dalam Bereaksi tidak harus rumit</a></li>
<li><a href="../id502038/index.html">Mengangkat atom, pendekatan 2.0.1</a></li>
<li><a href="../id502040/index.html">Tentang Phrasal Verbs-5 (atas / bawah)</a></li>
<li><a href="../id502046/index.html">Lima tahun Karat</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>