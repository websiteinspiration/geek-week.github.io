<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🛃 🎞️ 🤦🏿 Uso de NAT Traversal para conectar usuarios pasivamente ⤴️ 📓 👩🏾‍🍳</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Este artículo es una traducción gratuita de una de las entradas del blog para desarrolladores de DC ++ . 
 
 Con el permiso del autor (así como en ara...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Uso de NAT Traversal para conectar usuarios pasivamente</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/497944/"><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Este artículo es una traducción gratuita de una de las entradas del </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">blog para desarrolladores de DC ++</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Con el permiso del autor (así como en aras de la claridad y el interés, en aras del bien) lo florecí con enlaces y agregué algunas investigaciones personales.</font></font><a name="habracut"></a></i><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Introducción</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Actualmente, al menos un usuario de un par de usuarios conectados debe estar en modo activo. El mecanismo de "derivación" NAT será útil si el modo activo no está configurado en ninguno de los lados. Esto suele suceder porque el firewall entrante o el dispositivo NAT bloquea las conexiones entrantes. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si ambos clientes están en modo activo, el</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Cliente </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">iniciador envía el</font></a></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
comando </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ ConnectToMe que</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> contiene su propia dirección IP y puerto a </font><font style="vertical-align: inherit;">otro cliente. Con estos datos, el cliente que recibe el comando establece una conexión con el iniciador. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si uno de los clientes está en modo pasivo</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Por medio del concentrador, el cliente pasivo </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> envía el </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">comando $ RevConnectToMe al</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> cliente activo </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">B</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que luego responde con el comando $ ConnectToMe. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/l7/vz/bn/l7vzbngdxp3yprlxzcymuutpvp4.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como el servidor </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en el caso de las anteriores actúa centro de CC </font></font></i><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si los dos clientes en un modo pasivo, el </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=http://h" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">centro de ADC</font></font></a></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
se encuentra detrás de los diferentes clientes NAT </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">B</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> se unieron al cubo </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<img src="https://habrastorage.org/webt/yz/li/l3/yzlil3rmvxyjvuz6sv0jqtar3dy.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Por lo tanto, la conexión al concentrador se ve desde el lado del cliente </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A.</font></font></b></i><font style="vertical-align: inherit;"><i><font style="vertical-align: inherit;"> El</font></i></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
concentrador acepta conexiones en el puerto 1511. El cliente </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> realiza conexiones salientes desde su red privada a través del puerto 50758. El concentrador, a su vez, ve la dirección del dispositivo NAT, trabaja con él y transmite a los clientes de acuerdo con sus identificadores. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El cliente </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> envía al servidor </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">un mensaje pidiendo ayuda para conectarse con la </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cama</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> del cliente </font><b><font style="vertical-align: inherit;">y</font></b><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">
Al estar también en modo pasivo, el cliente </font><b><font style="vertical-align: inherit;">B</font></b><font style="vertical-align: inherit;"> , después de recibir este comando, debe informar su puerto privado utilizado para conectarse al concentrador a través de NAT. </font><font style="vertical-align: inherit;">
Después de recibir esta información, el cliente </font><b><font style="vertical-align: inherit;">A</font></b><font style="vertical-align: inherit;"> intenta inmediatamente establecer una conexión con el cliente </font><b><font style="vertical-align: inherit;">B</font></b><font style="vertical-align: inherit;"> e informa su propio puerto privado.</font></font><br>
<br>
<code>Hub: [Outgoing][178.79.159.147:1511] D<b>RCM</b> AAAA BBBB ADCS/0.10 1649612991</code><br>
<br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br>
<code>Hub: [Incoming][178.79.159.147:1511] D<b>NAT</b> BBBB AAAA ADCS/0.10 <b>59566</b> 1649612991</code><br>
<br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br>
<code>Hub: [Outgoing][178.79.159.147:1511] D<b>RNT</b> AAAA BBBB ADCS/0.10 <b>50758</b> 1649612991</code><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cual es el interes </font><font style="vertical-align: inherit;">El interés está en cambiar el punto final de la misma conexión creando una nueva conexión a una dirección pública a través del puerto privado ya utilizado.</font></font></blockquote><br>
<img src="https://habrastorage.org/webt/q3/up/g7/q3upg7hmlgqkvge0cvcfft6mmf0.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¡Bingo!</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Por supuesto, al mismo tiempo, el NAT del cliente </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">B</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tiene el derecho total de rechazar la primera solicitud de conexión del cliente </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , pero su propia solicitud ya se precipita en el "agujero" creado por esta conexión, y la conexión se establece. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/h1/f4/cd/h1f4cdqdozb75akwftzuxs49tce.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ilustración adecuada para todo el proceso con la advertencia de que el </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">protocolo</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> no utiliza puertos públicos abiertos por la sesión </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NAT</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , así como direcciones privadas. </font></font></i><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Epílogo</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Al momento de escribir el artículo (original), aproximadamente la mitad de los clientes de DC son pasivos. Esto significa que una cuarta parte de todas las conexiones posibles no se pueden hacer. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En el futuro, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DC ++ podrá "evitar" NAT</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">utilizando las </font><font style="vertical-align: inherit;">conexiones </font><font style="vertical-align: inherit;">existentes </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">B</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para establecer una conexión directa cliente - cliente, incluso si </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">B</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> están en modo pasivo.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es497930/index.html">Emulación Sinclair zx80 / ​​zx81</a></li>
<li><a href="../es497932/index.html">Estudiamos el motor VoIP Mediastreamer2. Parte 10</a></li>
<li><a href="../es497934/index.html">COVID-19: qué tratan de tratar, qué se puede tratar y algunas teorías de conspiración</a></li>
<li><a href="../es497938/index.html">El despertar de un instituto para dormir: cómo eliminamos a los Python Walkers de REAPER</a></li>
<li><a href="../es497940/index.html">Desarrollador Heart: Sega Saturn Devkits</a></li>
<li><a href="../es497946/index.html">¿Había vida antes de un CD de audio? Decodificador de software PCM</a></li>
<li><a href="../es497950/index.html">21 lecciones aprendidas en 21 años de programación</a></li>
<li><a href="../es497952/index.html">Abreviaturas en inglés y títulos de TI que pronunciamos mal</a></li>
<li><a href="../es497956/index.html">Sars milagroso? Genealogía del coronavirus de Wuhan</a></li>
<li><a href="../es497958/index.html">Están entre nosotros: explorando vulnerabilidades y código malicioso en Zoom para Windows</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>