<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧚🏿 ↘️ 👭 Robô ROS e Mendigo de Grade Neural 🚰 👩🏻‍🚒 👵🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Geralmente, duas dessas questões surgem para tais ofícios: "como?" e para quê?" A publicação em si é dedicada à primeira pergunta, e responderei imedi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Robô ROS e Mendigo de Grade Neural</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/500150/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Geralmente, duas dessas questões surgem para tais ofícios: "como?" e para quê?" A publicação em si é dedicada à primeira pergunta, e responderei imediatamente à segunda: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
iniciei este projeto para dominar a robótica, começando com o Raspberry Pi e a câmera. Como você sabe, uma das melhores maneiras de aprender algo é criar uma tarefa técnica e tentar cumpri-la, enquanto obtém as habilidades necessárias. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Naquela época, eu ainda não tinha idéias brilhantes no campo da robótica, então decidi fazer um projeto exclusivamente divertido - um robô mendigo. O resultado é um robô autônomo no Raspberry Pi e ROS, usando o Movidius Neural Cumpute Stick para detectar rostos. Ele anda pela sala, procurando por pessoas, e balança uma lata na frente deles. Aqui está a aparência desse robô:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/pt/wp/nt/ptwpntdd13lkskxbxjuhoyx1oom.jpeg"><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O robô se move aleatoriamente pela sala e, se notar uma pessoa, rola até ele e sacode uma jarra para coisas pequenas. </font><font style="vertical-align: inherit;">Por diversão, adicionei uma pequena expressão facial a ele - ele sabe como mover as sobrancelhas: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/2x/lm/aw/2xlmaw5tm_hogsuqfuvqwjmeblk.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
após a primeira tentativa, o robô tenta encontrar seu rosto novamente à vista, vira-se para a pessoa e sacode o banco novamente. </font><font style="vertical-align: inherit;">Mas o que acontece se você sair neste momento:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ko/8x/xz/ko8xxzvzo_owit62gkv8z3wn1ik.gif"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Robô</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tomei a idéia de um robô implorador da </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">revista Popular Mechanics</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">A autoria do protótipo de Chris Eckert, chamada Gimme, parece muito esteticamente agradável.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/374/8d6/dbc/3748d6dbcb97d04751dacd866eb94e07.jpg" alt="imagem" width="300" height="300"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como eu queria me concentrar mais na funcionalidade, o gabinete foi montado a partir de materiais improvisados. </font><font style="vertical-align: inherit;">Em particular, os cantos de PVC provaram ser o material mais versátil com o qual você pode conectar quase duas partes. </font><font style="vertical-align: inherit;">Parece que no momento o robô é composto por cinco por cento de cantos de PVC e parafusos M3. </font><font style="vertical-align: inherit;">O gabinete em si consiste em três plataformas laminadas nas quais a cabeça e todos os componentes eletrônicos estão montados. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A base do robô é o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Raspberry Pi 2B</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , e o código está escrito em C ++ e está no </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Visão</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para perceber a realidade, o robô usa a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">câmera Paspberry Pi Camera Module v2</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que pode ser controlada usando a biblioteca </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RaspiCam</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para detecção de rosto, tentei várias abordagens diferentes. A qualidade dos detectores clássicos da OpenCV não me satisfazia, então, no final, cheguei a uma solução não padronizada. Detecção de pessoas envolvidas na rede neural em execução no dispositivo </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Movidius Neural Compute Stick (NCS)</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sob a estrutura de controle </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenVINO</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O NCS é uma peça de hardware para o lançamento eficaz de redes neurais, dentro da qual existem vários processadores vetoriais especialmente adaptados para isso. O dispositivo está conectado via USB e consome apenas 1 Watt de energia. Assim, o NCS atua como um coprocessador para o Raspberry Pi, que não puxa a rede neural. Enquanto o NCS está processando o próximo quadro, o processador Paspberry está livre para outras operações. Vale ressaltar que, para uma operação ideal do dispositivo, é necessária uma interface USB 3.0, que não está disponível nas versões mais antigas do Raspberry; com o USB 2.0, ele também funciona, apenas mais devagar. Além disso, para não bloquear os conectores USB Raspberry, conecto o NCS a ele através de um cabo USB curto. Escrevi em detalhes sobre como trabalhar com o Neural Compute Stick </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">no meu artigo anterior</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No começo eu tentei treinar</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">detector de rosto próprio com arquitetura MobileNet + SSD</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> em conjuntos de dados abertos. O detector realmente funcionou, mas não é muito estável: com a inevitável deterioração das condições de disparo (exposição e fotos desfocadas), a qualidade do detector diminuiu bastante. No entanto, depois de algum tempo, os detectores de rosto prontos apareceram no OpenVINO, e eu mudei para um detector com a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">arquitetura SqueezeNet light + SSD</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que não só funcionou melhor em várias condições de disparo, mas também foi mais rápido. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Antes de carregar a imagem no NCS para obter as previsões do detector, a imagem deve ser pré-processada. O detector de minha escolha funciona com imagens coloridas</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>300</mn><mo>&amp;#x00D7;</mo><mn>300</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="9.815ex" height="2.009ex" viewBox="0 -755.5 4225.9 865.1" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjfs-2U697WckjEf7LamT4qsfS9cA#MJMAIN-33"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjfs-2U697WckjEf7LamT4qsfS9cA#MJMAIN-30" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjfs-2U697WckjEf7LamT4qsfS9cA#MJMAIN-30" x="1001" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjfs-2U697WckjEf7LamT4qsfS9cA#MJMAIN-D7" x="1723" y="0"></use><g transform="translate(2724,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjfs-2U697WckjEf7LamT4qsfS9cA#MJMAIN-33"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjfs-2U697WckjEf7LamT4qsfS9cA#MJMAIN-30" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjfs-2U697WckjEf7LamT4qsfS9cA#MJMAIN-30" x="1001" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>300</mn><mo>×</mo><mn>300</mn></math></span></span><script type="math/tex" id="MathJax-Element-1">300 \times 300</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, para que a imagem precise ser compactada primeiro. Para fazer isso, eu uso o algoritmo de dimensionamento mais leve - o método vizinho mais próximo (INTER_NEAREST na biblioteca OpenCV). Funciona um pouco mais rápido que os métodos de interpolação e quase não afeta o resultado. Também vale a pena prestar atenção na ordem dos canais de imagem: o detector espera a ordem BGR, portanto, é necessário definir o mesmo para a câmera.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Também tentei separar o processamento de vídeo em dois fluxos, um dos quais recebeu o próximo quadro da câmera e o processou, e o outro naquele momento carregou o quadro anterior no NCS e esperou pelos resultados do detector. Com esse esquema, tecnicamente, a velocidade de processamento aumenta, mas o atraso entre o recebimento do quadro e o recebimento de detecções também aumenta. Por causa desse atraso na realidade, monitorar o rosto se torna apenas mais difícil, então, no final, recusei esse esquema. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Além de realmente detectar rostos, eles também precisam ser rastreados para evitar erros no detector. Para fazer isso, eu uso o rastreador leve </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Simple Online Realtime Tracker (SORT)</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Este rastreador simples consiste em duas partes: o </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">algoritmo húngaro</font></a><font style="vertical-align: inherit;"> é usado para combinar objetos em quadros adjacentes</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, e para prever a trajetória do objeto, se ele desaparecer repentinamente - </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">filtro Kalman</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Enquanto brincava com o rastreamento de rostos, descobri que as trajetórias previstas pelo filtro Kalman podem ser muito implausíveis com movimentos bruscos, o que novamente apenas complica o processo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Portanto, desliguei o filtro Kalman, deixando apenas o algoritmo de correspondência de faces e o contador do número seqüencial de quadros em que a face foi detectada - desta maneira, me livrei dos falsos positivos do detector. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Plataforma superior, da esquerda para a direita: câmera, servos para controlar a cabeça e as sobrancelhas, interruptor, terminais de energia, botão vermelho grande.</font></font></i><br>
<img src="https://habrastorage.org/webt/hb/ky/kk/hbkykkpwtkhtfl39aonaop5indg.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tráfego</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para movimentação, o robô possui cinco servos: dois servos de rotação contínua FS5103R giram as rodas; Existem mais dois FS5109Ms comuns, um dos quais gira a cabeça e o outro sacode a lata; finalmente, o pequeno SG90 move as sobrancelhas.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para ser honesto, os mini-servos SG90 pareciam lixo para mim - um dos meus servos tinha a largura de pulso de controle incorreta e apenas um sobreviveu entre os outros quatro. Para ser justo, acidentalmente levei um dos criados com o cotovelo, mas os outros dois simplesmente não aguentavam a carga (eu costumava usá-los na cabeça e na lata). Até o último servo, que conseguiu o trabalho mais simples - mover as sobrancelhas, tem que enfiar um pedaço de pau de vez em quando, para que não cunha. Com outros servos, não notei nenhum problema. É verdade que, às vezes, os servos de rotação contínua precisam ser calibrados para que não girem no estado inativo - para isso, existe um pequeno regulador neles que pode ser girado com uma chave de fenda. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gerenciar servos com Raspberry, ao que parece, não é tão simples. Primeiro, eles são controlados por</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">modulação de largura de pulso (PWM / PWM)</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e no Raspberry existem apenas dois pinos nos quais o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PWM é suportado por hardware</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Em segundo lugar, é claro, o Raspberry não será capaz de alimentar os servos, não suportará isso. Felizmente, esses problemas são resolvidos usando um controlador PWM externo. </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O Adafruit PCA9685</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> é um controlador PWM de 16 canais que pode ser controlado via </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">interface I2C</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Também é muito conveniente que tenha terminais para fornecer energia para servos. Além disso, [teoricamente] é possível encadear até 62 controladores enquanto recebe até 992 pinos de controle - para isso, é necessário atribuir um endereço exclusivo a cada controlador usando jumpers especiais. Então, se você precisa de um exército de servos de repente, sabe o que fazer.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para controlar o PCA9685, existe uma </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">biblioteca de</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> alto nível </font><font style="vertical-align: inherit;">que atua como uma extensão </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WiringPi</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Trabalhar com isso é bastante conveniente - durante a inicialização, ele cria 16 pinos virtuais nos quais você pode gravar um sinal PWM, mas primeiro você precisa calcular o número de ticks. </font><font style="vertical-align: inherit;">Para girar a alavanca do servo para um determinado ângulo na faixa [0, 180], primeiro você deve converter esse ângulo na faixa de comprimentos de pulso de controle em milissegundos [SERVO_MS_MIN, SERVO_MS_MAX]. </font><font style="vertical-align: inherit;">Para todos os meus servos, esses valores são aproximadamente 0,6 ms e 2,4 ms, respectivamente. </font><font style="vertical-align: inherit;">Em geral, esses valores podem ser encontrados na folha de dados do servo, mas a prática demonstrou que eles podem diferir e, portanto, podem precisar ser selecionados. </font><font style="vertical-align: inherit;">Em seguida, divida o valor resultante por 20 ms (o valor padrão da duração do ciclo de controle) e multiplique pelo número máximo de ticks PCA9685 (4096):</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">driveDegs</span><span class="hljs-params">(<span class="hljs-keyword">float</span> angle, <span class="hljs-keyword">int</span> pin)</span> </span>{
    <span class="hljs-keyword">int</span> ticks = (<span class="hljs-keyword">int</span>) (PCA_MAX_PWM * (angle/<span class="hljs-number">180.0f</span>*(SERVO_MS_MAX-SERVO_MS_MIN) + SERVO_MS_MIN) / <span class="hljs-number">20.0f</span>); <font></font>
    pwmWrite(pin, ticks);<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Da mesma forma, isso é feito com servos de rotação contínua - em vez de um ângulo, definimos a velocidade no intervalo [-1,1].</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Montei o chassi do robô, bem como o corpo, a partir de meios improvisados: coloquei rodas de móveis nos servocontroladores de rotação contínua e um suporte de bola de móveis atua como a terceira roda. Anteriormente, em vez disso, havia uma roda em um suporte rotativo, mas com esse chassi era difícil fazer curvas precisas, então tive que substituí-lo. Há também uma pequena roda sob a lata para transferir parte do peso do servo para a carcaça. Uma coisa simples que não me era óbvia inicialmente foi que as servo-alavancas devem ser fixadas com um parafuso, especialmente para as rodas, para que não caiam ao longo do caminho. Por causa dessa estupidez, tive que refazer o chassi uma vez. Também fiz do robô um pára-choque amplo feito de cantos de PVC, para que não ficasse preso com tanta frequência.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora, sobre o que você pode fazer sobre isso. Primeiramente, você pode agitar a jarra e mover as sobrancelhas - para isso, basta girar a alavanca do servo para ângulos pré-selecionados. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em segundo lugar, você pode girar sua cabeça. Eu não queria que a cabeça girasse na velocidade máxima do servo, porque ela tem uma câmera. Portanto, decidi reduzir programaticamente a velocidade: preciso girar a alavanca em um pequeno ângulo e esperar alguns milissegundos - e assim por diante até que o ângulo desejado seja atingido. Nesse caso, é necessário lembrar a posição absoluta atual da cabeça e sempre verificar se ela excedeu os limites permitidos (no meu robô, ela está na faixa de [10, 90] graus).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em terceiro lugar, você pode alterar a direção do movimento alterando a velocidade de rotação das rodas. </font><font style="vertical-align: inherit;">Da mesma maneira, você pode girar a plataforma, por exemplo, para seguir a face. </font><font style="vertical-align: inherit;">A velocidade angular de rotação depende tanto dos próprios servos quanto da localização no chassi; portanto, é mais fácil medi-lo uma vez e levá-lo em consideração nas curvas. </font><font style="vertical-align: inherit;">Para encontrar o atraso necessário entre ligar os motores para rotação e desligá-los, é necessário dividir o módulo de ângulo pela velocidade angular. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por fim, você pode girar a cabeça e o chassi simultaneamente e de forma assíncrona para não perder tempo. </font><font style="vertical-align: inherit;">Eu faço assim:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">auto</span> waitRotation = <span class="hljs-built_in">std</span>::async(<span class="hljs-built_in">std</span>::launch::async, rotatePlatform, platformAngle);<font></font>
success = driveHead(headAngle);<font></font>
waitRotation.wait();<font></font>
</code></pre><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Plataforma central, da esquerda para a direita: PCA9685, barramento de força, Raspberry Pi, MCP3008 ADC</font></font></i><br>
<img src="https://habrastorage.org/webt/bq/q1/8_/bqq18_ilwmgadlcsz0ydepdk44u.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Navegação</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como eu não compliquei nada, o robô usa apenas dois telêmetros infravermelhos Sharp GP2Y0A02YK para navegação. Isso também não é tão simples, porque os sensores são analógicos, mas o Raspberry, ao contrário do Arduino, </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">não</font></a><font style="vertical-align: inherit;"> possui </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">entradas analógicas</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Esse problema foi resolvido pelo conversor analógico-digital (ADC / ADC) - eu uso o MCP3008 de 10 bits e 8 canais. Ele é vendido como um microcircuito separado, portanto teve que ser soldado a uma placa de circuito impresso e os pinos também foram soldados lá para tornar a conexão mais conveniente. Além disso, seguindo o conselho do meu bati, que se atrapalha mais em circuitos, soldei dois capacitores (cerâmicos e eletrolíticos) entre as pernas da fonte de alimentação e o solo para absorver o ruído da parte digital de todo o circuito. Os sensores produzem não mais que três volts na saída; portanto, 3.3v com Raspberry pode ser conectado como uma tensão ADC de referência (VREF) - a mesma da fonte de alimentação MCP3008 (VDD). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O MCP3008 pode ser controlado pela interface </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SPI</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e, para isso, é fácil encontrar </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">código pronto no GitHub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apesar disso, para um trabalho conveniente com o ADC, você precisará de algumas danças com um pandeiro.</font></font></b>
                        <div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">int</span> <span class="hljs-title">analogRead</span><span class="hljs-params">(mcp3008Spi &amp;adc, <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">char</span> channel)</span>
</span>{
    <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">char</span> spi_data[<span class="hljs-number">3</span>];
    <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">int</span> val = <span class="hljs-number">0</span>;<font></font>
<font></font>
    spi_data[<span class="hljs-number">0</span>] = <span class="hljs-number">1</span>;  <span class="hljs-comment">// start bit</span>
    spi_data[<span class="hljs-number">1</span>] = <span class="hljs-number">0b10000000</span> | ( channel &lt;&lt; <span class="hljs-number">4</span>); <span class="hljs-comment">// mode and channel</span>
    spi_data[<span class="hljs-number">2</span>] = <span class="hljs-number">0</span>; <span class="hljs-comment">// anything</span>
    adc.spiWriteRead(spi_data, <span class="hljs-keyword">sizeof</span>(spi_data));<font></font>
  <font></font>
    <span class="hljs-comment">// read value, combine last two bits of second byte with whole third byte</span>
    val = (spi_data[<span class="hljs-number">1</span>]&lt;&lt; <span class="hljs-number">8</span>) &amp; <span class="hljs-number">0b1100000000</span>; <font></font>
    val |= (spi_data[<span class="hljs-number">2</span>] &amp; <span class="hljs-number">0xff</span>);
    <span class="hljs-keyword">return</span> val;<font></font>
}<font></font>
</code></pre><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Três bytes devem ser enviados para o MCP3008, onde o bit inicial é gravado no primeiro byte e o número do modo e do canal (0-7) no segundo. </font><font style="vertical-align: inherit;">Também recebemos três bytes, após o qual precisamos colar os dois bits menos significativos do segundo byte com todos os bits do terceiro byte. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora que podemos obter os valores dos sensores, precisamos calibrá-los, porque os dois sensores podem diferir ligeiramente um do outro. </font><font style="vertical-align: inherit;">Em geral, a exibição à distância devido à intensidade do sinal desses sensores não é linear e não é muito simples ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para mais detalhes, consulte a folha de dados em pdf</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font><font style="vertical-align: inherit;">Portanto, basta captar dois coeficientes, quando multiplicados pelos quais os sensores fornecerão um valor de 1,0 a uma distância igual e significativa.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As leituras dos sensores podem ser bastante barulhentas, especialmente em obstáculos difíceis, então eu uso uma média móvel ponderada exponencialmente (EWMA) para suavizar o sinal de cada sensor. </font><font style="vertical-align: inherit;">Selecionei os parâmetros de suavização a olho nu, para que o sinal não faça barulho e não fique muito atrás da realidade. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vista frontal: banco, telémetros e pára-choques.</font></font></i><br>
<img src="https://habrastorage.org/webt/kb/vw/l-/kbvwl-usmln86iqj8aq236ifhpo.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nutrição</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Primeiro, vamos avaliar qual corrente o robô consumirá ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sobre o consumo atual de framboesa e periféricos</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ):</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Raspberry Pi 2B: não inferior a 350 mA, mas mais sob carga (até 750-820 mA (?));</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Câmera: cerca de 250 mA;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vara de computação neural: consumo de energia declarado de 1 watt, a uma voltagem de 5 volts no USB é de 200 mA;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sensores IR: 33 mA cada ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">folha de dados, pdf</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> );</font></font></li>
<li>MCP3008:  ,  0.5  (<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">, pdf</a>);</li>
<li>PCA9685:  , 6  (<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">, pdf</a>);</li>
<li>:  ~150-200   1500-2000     (stall current),          (<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"> FS5109M, pdf</a>)</li>
<li>HDMI (   ): 50 ;</li>
<li> +  ( ): ~200 .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No total, pode-se estimar que 1,5-2,5 amperes devem ser suficientes, desde que todos os servos não se movam simultaneamente sob carga pesada. Ao mesmo tempo, o Raspberry precisa de 5 volts condicionais de voltagem e para servos - 4,8-6 volts. Resta encontrar uma fonte de energia que atenda a esses requisitos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como resultado, decidi alimentar o robô com baterias 18650. Se você pegar duas </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">baterias ROBITON 3.4 / Li18650</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (3,6 volts, 3400 mAh, corrente máxima de descarga 4875 mA) e conectá-las em série, elas podem produzir até 4,8 amperes a uma voltagem de 7,2 volts. Com uma corrente de consumo de 1,5-2,5 amperes, eles devem ser suficientes por uma hora ou duas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As baterias, por sinal, têm um problema: apesar do fator de forma indicado 18650, seus tamanhos estão longe de</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>18</mn><mo>&amp;#x00D7;</mo><mn>650</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="8.653ex" height="2.009ex" viewBox="0 -755.5 3725.4 865.1" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjfs-2U697WckjEf7LamT4qsfS9cA#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjfs-2U697WckjEf7LamT4qsfS9cA#MJMAIN-38" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjfs-2U697WckjEf7LamT4qsfS9cA#MJMAIN-D7" x="1223" y="0"></use><g transform="translate(2223,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjfs-2U697WckjEf7LamT4qsfS9cA#MJMAIN-36"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjfs-2U697WckjEf7LamT4qsfS9cA#MJMAIN-35" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjfs-2U697WckjEf7LamT4qsfS9cA#MJMAIN-30" x="1001" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>18</mn><mo>×</mo><mn>650</mn></math></span></span><script type="math/tex" id="MathJax-Element-2">18 \times 650</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mm - são vários milímetros mais longos devido ao circuito de controle de carregamento embutido. Por causa disso, tive que esfaquear o compartimento da bateria com uma faca, para que eles se encaixassem lá. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Resta apenas baixar a tensão para 5 volts. Para isso, eu uso dois conversores DC-DC </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">reduzidos separados DFRobot Power Module</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Este pedaço de ferro permite diminuir a tensão com uma tensão de entrada de 3,6-25 volts e uma diferença de tensão de pelo menos 0,6 volts. Por conveniência, ele possui uma chave que permite selecionar exatamente 5 volts na saída ou configurar uma tensão de saída arbitrária usando um regulador especial. Defino os dois conversores em 5 volts; um deles alimenta o Raspberry através de um conector Micro-USB e o segundo alimenta servos através dos terminais PCA9685. Isso é necessário para maximizar a fonte de alimentação das partes lógicas e de energia do robô, para que elas não interfiram.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No estágio de depuração, usei uma fonte de alimentação chinesa de 9 volts e 2 ampères em vez das baterias, e foi suficiente para o robô funcionar - eu a conectei, como as baterias, a dois conversores DC-DC. Portanto, por conveniência, criei terminais no robô, nos quais você pode conectar uma fonte de alimentação ou compartimento de bateria para escolher. Isso ajudou muito quando eu reescrevi completamente todo o código no ROS, e tive que depurar o robô por um longo tempo, incluindo servos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por conveniência, eu também tive que fazer um "barramento de força" - na verdade, apenas um pedaço da placa com três fileiras de pinos conectados para terra, 3,3v e 5v, respectivamente. O barramento se conecta aos pinos correspondentes de framboesa. Somente rangefinders IR são alimentados a partir do barramento 5v, e MCP3008 e PCA9685 a partir do barramento 3.3v.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E, é claro, de acordo com a boa e velha tradição, eu coloco o Grande Botão Vermelho no robô - quando pressionado, ele simplesmente interrompe todo o circuito de potência. </font><font style="vertical-align: inherit;">Não era necessário usá-lo para uma parada de emergência, mas ligar o robô com a ajuda de um botão é realmente mais conveniente. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Plataforma inferior, da esquerda para a direita: compartimento da bateria, conversores NCS, DC-DC, servomotores com rodas, telémetros.</font></font></i><br>
<img src="https://habrastorage.org/webt/od/tf/6b/odtf6b5gksijt0nhbflim7wrh1m.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Controle de robô</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Não há Wi-Fi no Raspberry Pi 2B, então eu tenho que conectar via ssh através de um cabo Ethernet (a propósito, isso também pode ser feito </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">diretamente do laptop, sem o uso de um roteador</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). Acontece que este esquema: nós nos conectamos via ssh através do cabo, ligamos o robô e o retiramos. Em seguida, ele pode ser retornado ao seu lugar para acessar o Raspberry novamente. Existem soluções mais elegantes, mas decidi não complicar. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para que o robô possa ser facilmente parado sem desligar, eu adicionei um grande interruptor soviético (de um submarino?). Quando você o desliga, o programa termina e o robô para. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O switch se conecta ao terra e a um dos pinos do Raspberry GPIO, e você pode ler usando </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a biblioteca WiringPi</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="cpp hljs">wiringPiSetup();<font></font>
pinMode(PIN_SWITCH, INPUT);<font></font>
pullUpDnControl(PIN_SWITCH, PUD_UP);<font></font>
<span class="hljs-keyword">bool</span> value = digitalRead(BB_PIN_SWITCH);
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
É importante notar que, com essa conexão, a tensão no pino deve ser puxada para 3,3v e, ao mesmo tempo, produzirá um sinal alto no estado aberto e um sinal baixo no estado fechado.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Juntando tudo</font></font></h3><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tópicos</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Agora, todas as opções acima precisam ser combinadas em um programa que controla o robô. </font><font style="vertical-align: inherit;">Na primeira versão do robô, eu fiz isso usando threads ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pthread</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font><font style="vertical-align: inherit;">Esta versão está no ramo </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">principal</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , mas o código é bastante assustador. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O programa funciona em quatro threads: um thread tira quadros da câmera e inicia o detector no NCS; </font><font style="vertical-align: inherit;">o segundo fluxo lê dados de rangefinders; </font><font style="vertical-align: inherit;">o terceiro segmento monitora o comutador e define a variável global </font></font><code>is_running</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">como</font></font><code>false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">se estiver desligado; O thread principal é responsável pelo comportamento do robô e pelo servo controle. Os threads têm ponteiros em comum com o thread principal, pelo qual eles escrevem os resultados de seu trabalho. Limitei os vetores que armazenam informações sobre as faces encontradas pelo detector no mutex e declarei as outras variáveis ​​comuns mais simples como atômicas. Para coordenar o fluxo do detector de rosto com a rosca principal, há um sinalizador </font></font><code>face_processed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que é redefinido quando um novo resultado vem do detector e sobe quando a rosca principal usa esse resultado para selecionar um comportamento - isso é necessário para não processar dados antigos que podem não ser relevantes depois de se mudar. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
versão </font><b><font style="vertical-align: inherit;">ROS</font></b><font style="vertical-align: inherit;"> com fluxos funcionou bem, mas eu comecei tudo isso para aprender algo, então por que não ao mesmo tempo mestre</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ros</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ? </font><font style="vertical-align: inherit;">Eu escuto esse framework há muito tempo, e até tive que trabalhar um pouco com ele em um hackathon, então no final decidi reescrever todo o código no ROS. </font><font style="vertical-align: inherit;">Esta versão do código está no ramo padrão do </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ros</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e parece muito mais decente. </font><font style="vertical-align: inherit;">É claro que a implementação no ROS quase certamente será mais lenta que a implementação nos fluxos devido à sobrecarga de envio de mensagens e tudo mais - a única questão é quanto?</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conceito ROS</font></font></b>
                        <div class="spoiler_text">ROS (Robot Operating System) —     ,             ,   ,        .<br>
<br>
    ,  ,  ,     (node), ,    ,       .<br>
<br>
      (topic)      (message)  ,         -    . <br>
<br>
    —   (service).         ,       ,     .      « »,    .<br>
<br>
         <code>.msg</code>  <code>.srv</code> .          .<br>
<br>
 ROS    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"> </a>.<br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para o meu robô, não usei nenhum pacote pronto com algoritmos do ROS, apenas projetei o código do robô em um pacote separado que consiste em cinco nós se comunicando usando mensagens e serviços ROS. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O nó mais simples </font></font><code>switch_node</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, monitora o estado do comutador. Assim que o comutador é desligado, o nó começa a enviar mensagens não informativas do tipo </font></font><code>bool</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">no tópico </font></font><code>terminator</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Este é um sinal para o nó principal de que está na hora de concluir o trabalho. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O segundo nó ,, </font></font><code>sensor_node</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lê periodicamente as leituras dos dois rangefinders de infravermelho e as envia para o tópico em </font></font><code>sensor_state</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">uma mensagem. Além disso, este nó é responsável pelo processamento do sinal: escala por fatores de calibração e média móvel. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Terceiro nó</font></font><code>camera_node</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ele é responsável por tudo relacionado aos rostos: ele tira imagens da câmera, processa-os, recebe os resultados do detector, passa-os pelo rastreador e encontra o rosto mais próximo do centro do quadro - o robô não usa o resto de qualquer maneira, mas você deseja fazer mensagens menores. As mensagens que o nó envia para o tópico </font></font><code>camera_state</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">contêm o número do quadro, o fato de ter uma face (porque você também precisa saber sobre a ausência de uma face), as coordenadas relativas do canto superior esquerdo, a largura e a altura da face. É assim que a descrição do tipo de mensagem no arquivo se parece </font></font><code>DetectionBox.msg</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="plaintext hljs">int64 count<font></font>
bool present<font></font>
float32 x<font></font>
float32 y<font></font>
float32 width<font></font>
float32 height<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O quarto nó </font></font><code>servo_node</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é responsável pelos servos. Em primeiro lugar, suporta um serviço </font></font><code>servo_action</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que permite que uma das ações seja executada pelos servos por seu número: colocar todo o nó em seu estado inicial (sobrancelhas, banco, cabeça, parar o chassi); transferir a cabeça para seu estado inicial; agite o frasco; retrate com uma sobrancelha uma das três expressões (boa, neutra, má). Em segundo lugar, usando o serviço, </font></font><code>servo_speed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">você pode definir novas velocidades para as duas rodas enviando-as na solicitação. Ambos os serviços não retornam nada. Finalmente, existe um serviço </font></font><code>servo_head_platform</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que permite girar a cabeça e / ou o chassi em um determinado ângulo em relação à posição atual. Este serviço retorna </font></font><code>true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">se for possível girar a cabeça pelo menos parcialmente e</font></font><code>false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">caso contrário, no caso em que a cabeça já esteja na borda do ângulo admissível, e estamos tentando movê-la ainda mais. </font><font style="vertical-align: inherit;">Se os dois ângulos da solicitação forem diferentes de zero, o serviço girará assincronamente, conforme indicado acima. </font><font style="vertical-align: inherit;">No loop principal, o nó servo não faz nada. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui, por exemplo, está uma descrição do serviço </font></font><code>servo_head_platform</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="plaintext hljs">float32 head_delta<font></font>
float32 platform_delta<font></font>
---<font></font>
bool head_success<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cada um dos nós listados suporta um serviço </font></font><code>terminate_{switch, camera, sensor, servo}</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">com uma solicitação de resposta vazia, que interrompe a operação do nó. </font><font style="vertical-align: inherit;">É implementado desta maneira:</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Algum código</font></font></b>
                        <div class="spoiler_text"><pre><code class="cpp hljs">...
<span class="hljs-built_in">std</span>::<span class="hljs-keyword">atomic_bool</span> is_running; <span class="hljs-comment">// global</span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">terminate_node</span><span class="hljs-params">(std_srvs::Empty::Request &amp;req, std_srvs::Empty::Response &amp;ignored)</span> </span>{<font></font>
    is_running = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> **argv)</span> </span>{<font></font>
    is_running = <span class="hljs-literal">true</span>;<font></font>
    ...<font></font>
    <span class="hljs-keyword">while</span> (is_running &amp;&amp; ros::ok()) {
        <span class="hljs-comment">// do stuff</span><font></font>
    }<font></font>
    ...<font></font>
}<font></font>
</code></pre><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O nó possui uma variável global </font></font><code>is_running</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, cujo valor determina o ciclo principal do nó. O serviço simplesmente redefine essa variável e o loop principal é interrompido. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Há também um nó principal </font></font><code>beggar_bot</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">no qual a lógica básica do robô é implementada. Antes do início do loop principal, ele assina tópicos </font></font><code>sensor_state</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e </font></font><code>camera_state</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">salva o conteúdo de mensagens em variáveis ​​globais em funções de retorno de chamada. Ele também está inscrito no tópico </font></font><code>terminator</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, cujo retorno de chamada redefine o sinalizador </font></font><code>is_running</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, interrompendo o loop principal. Além disso, antes do início do ciclo, o nó anuncia as interfaces para os serviços do nó servo e aguarda alguns segundos para que os outros nós sejam inicializados. Depois que o loop principal termina, esse nó chama os serviços</font></font><code>terminate_{switch, camera, sensor, servo}</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, desativando todos os outros nós e, em seguida, desativando-o. Ou seja, quando o interruptor é desligado, todos os cinco nós concluem a operação. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mudar para o ROS me forçou a mudar bastante a estrutura do programa. Por exemplo, anteriormente era possível alterar a velocidade da roda com alta frequência, e isso funcionava bem, mas o serviço ROS trabalha em uma ordem de magnitude mais lenta, então tive que reescrever o código para que o serviço fosse chamado apenas quando a velocidade realmente mudar (no "modo lento"). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O ROS também permite executar comodamente todos os nós do robô. Para fazer isso, você precisa escrever </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">um arquivo de inicialização .launch</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> listando todos os nós e outros atributos do robô no formato xml e, em seguida, execute o comando:</font></font><br>
<br>
<pre><code class="plaintext hljs">roslaunch beggar_bot robot.launch</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ROS x pthread</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Agora, finalmente, você pode comparar a velocidade da versão ROS e da versão pthread. </font><font style="vertical-align: inherit;">Eu faço da seguinte maneira: o thread / nó responsável por trabalhar com a câmera considera seu FPS (como o elemento mais lento), desde que todo o resto também funcione. </font><font style="vertical-align: inherit;">Para a versão pthread, eu sempre obtive o FPS 9.99 ou mais; para a versão ROS, ficou em torno de 8.3. </font><font style="vertical-align: inherit;">De fato, isso é suficiente para um brinquedo assim, mas a sobrecarga é bastante perceptível.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comportamento do robô</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A idéia é bastante simples: se o robô vê uma pessoa, ele deve dirigir-se a ele e apertar a lata. Agitar a jarra é bastante simples e divertido, mas primeiro você precisa chegar à pessoa. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Existe uma função </font></font><code>follow_face</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que, se houver uma face no quadro, gira o chassi e a cabeça do robô em sua direção (somente a face mais próxima do centro é levada em consideração). Isso é necessário para que o robô mantenha sempre o curso de uma pessoa, se ela estiver na moldura, e também olhe diretamente na cara quando ele sacode uma jarra. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A </font></font><code>camera_state</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mesma variável é usada </font><font style="vertical-align: inherit;">para sincronizar esta função com o tópico </font><font style="vertical-align: inherit;">.</font></font><code>face_processed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, como na versão com fluxos. A ideia é a mesma - queremos processar dados apenas uma vez, porque o robô está em constante movimento. A função primeiro espera até que o retorno de chamada do tópico com as detecções diminua o sinalizador de que o último quadro foi processado. Enquanto ela espera, ela liga constantemente </font></font><code>ros::spinOnce()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para receber novas mensagens (em geral, isso deve ser feito sempre que o programa espera novos dados). Se houver uma face no quadro, os ângulos são calculados, o que precisa girar a plataforma e a cabeça - isso pode ser feito conhecendo as coordenadas relativas do centro da face e o campo de visão da câmera na horizontal e na vertical. Depois disso, você pode ligar para o serviço </font></font><code>servo_head_platform</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e mover o robô.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Há um ponto sutil: as informações sobre a posição do rosto ficam atrás do movimento real do rosto e podem ficar atrás dos movimentos do próprio robô. Portanto, o robô pode superestimar o ângulo de rotação, pelo que a cabeça começa a se mover para frente e para trás com amplitude crescente. Para evitar isso, faço atrasos após a movimentação (300 ms) e também pulo um quadro após a movimentação. Para a mesma finalidade, os ângulos de rotação do chassi e da cabeça são multiplicados por um fator de 0,8 (os componentes P do </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">controlador PID</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> fazem sentido </font><font style="vertical-align: inherit;">). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Função</font></font><code>follow_face</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">retorna o status de uma pessoa. </font><font style="vertical-align: inherit;">Uma pessoa pode: estar ausente, estar perto o suficiente do centro, estar muito longe do robô; </font><font style="vertical-align: inherit;">outra opção - quando ligamos o robô e não sabemos o que aconteceu com o rosto (no processo de busca); </font><font style="vertical-align: inherit;">ainda há um caso raro em que a cabeça está na borda, e é por isso que é impossível virar o rosto. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Uma coisa bastante simples acontece no loop principal:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ligue </font></font><code>follow_face</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">até a pessoa ter um determinado status (qualquer um, exceto "no processo de pesquisa"). </font><font style="vertical-align: inherit;">No final desta etapa, o robô olhará diretamente para o rosto.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Se o rosto for encontrado e estiver próximo: </font></font><br>
 <ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Agite a lata;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Encontre o rosto novamente;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Se o rosto estiver no lugar, faça uma boa expressão com as sobrancelhas e agite o frasco novamente;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Se o rosto desapareceu, faça uma expressão de raiva com as sobrancelhas;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vire-se, vá para o início do ciclo.</font></font></li>
</ol><br>
 </li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Se não houver pessoa (ou estiver longe) - navegue pela sala:</font></font><br>
 <ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Se houver longe de obstáculos de ambos os lados, siga em frente (se o rosto foi encontrado, mas se mostrou muito distante, o robô irá para a pessoa);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Se houver obstáculos próximos dos dois lados, faça uma curva aleatória no intervalo </font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo stretchy=&quot;false&quot;>[</mo><mn>90</mn><mo>,</mo><mn>180</mn><mo stretchy=&quot;false&quot;>]</mo><mo>&amp;#x222A;</mo><mo stretchy=&quot;false&quot;>[</mo><mo>&amp;#x2212;</mo><mn>180</mn><mo>,</mo><mo>&amp;#x2212;</mo><mn>90</mn><mo stretchy=&quot;false&quot;>]</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="22.479ex" height="2.634ex" viewBox="0 -809.3 9678.3 1134.2" role="img" focusable="false" style="vertical-align: -0.755ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjfs-2U697WckjEf7LamT4qsfS9cA#MJMAIN-5B" x="0" y="0"></use><g transform="translate(278,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjfs-2U697WckjEf7LamT4qsfS9cA#MJMAIN-39"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjfs-2U697WckjEf7LamT4qsfS9cA#MJMAIN-30" x="500" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjfs-2U697WckjEf7LamT4qsfS9cA#MJMAIN-2C" x="1279" y="0"></use><g transform="translate(1724,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjfs-2U697WckjEf7LamT4qsfS9cA#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjfs-2U697WckjEf7LamT4qsfS9cA#MJMAIN-38" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjfs-2U697WckjEf7LamT4qsfS9cA#MJMAIN-30" x="1001" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjfs-2U697WckjEf7LamT4qsfS9cA#MJMAIN-5D" x="3226" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjfs-2U697WckjEf7LamT4qsfS9cA#MJMAIN-222A" x="3726" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjfs-2U697WckjEf7LamT4qsfS9cA#MJMAIN-5B" x="4616" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjfs-2U697WckjEf7LamT4qsfS9cA#MJMAIN-2212" x="4895" y="0"></use><g transform="translate(5673,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjfs-2U697WckjEf7LamT4qsfS9cA#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjfs-2U697WckjEf7LamT4qsfS9cA#MJMAIN-38" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjfs-2U697WckjEf7LamT4qsfS9cA#MJMAIN-30" x="1001" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjfs-2U697WckjEf7LamT4qsfS9cA#MJMAIN-2C" x="7175" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjfs-2U697WckjEf7LamT4qsfS9cA#MJMAIN-2212" x="7620" y="0"></use><g transform="translate(8398,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjfs-2U697WckjEf7LamT4qsfS9cA#MJMAIN-39"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjfs-2U697WckjEf7LamT4qsfS9cA#MJMAIN-30" x="500" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjfs-2U697WckjEf7LamT4qsfS9cA#MJMAIN-5D" x="9399" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">[</mo><mn>90</mn><mo>,</mo><mn>180</mn><mo stretchy="false">]</mo><mo>∪</mo><mo stretchy="false">[</mo><mo>−</mo><mn>180</mn><mo>,</mo><mo>−</mo><mn>90</mn><mo stretchy="false">]</mo></math></span></span><script type="math/tex" id="MathJax-Element-3">[90, 180] \cup [-180, -90]</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Se o obstáculo estiver apenas de um lado, gire na direção oposta em um ângulo aleatório </font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo stretchy=&quot;false&quot;>[</mo><mn>0</mn><mo>,</mo><mn>90</mn><mo stretchy=&quot;false&quot;>]</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.815ex" height="2.634ex" viewBox="0 -809.3 2503.7 1134.2" role="img" focusable="false" style="vertical-align: -0.755ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjfs-2U697WckjEf7LamT4qsfS9cA#MJMAIN-5B" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjfs-2U697WckjEf7LamT4qsfS9cA#MJMAIN-30" x="278" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjfs-2U697WckjEf7LamT4qsfS9cA#MJMAIN-2C" x="779" y="0"></use><g transform="translate(1224,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjfs-2U697WckjEf7LamT4qsfS9cA#MJMAIN-39"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjfs-2U697WckjEf7LamT4qsfS9cA#MJMAIN-30" x="500" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjfs-2U697WckjEf7LamT4qsfS9cA#MJMAIN-5D" x="2225" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">[</mo><mn>0</mn><mo>,</mo><mn>90</mn><mo stretchy="false">]</mo></math></span></span><script type="math/tex" id="MathJax-Element-4">[0, 90]</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Se o movimento para a frente continuar por muito tempo (possivelmente travado), recue um pouco e faça uma curva aleatória no intervalo </font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo stretchy=&quot;false&quot;>[</mo><mn>90</mn><mo>,</mo><mn>180</mn><mo stretchy=&quot;false&quot;>]</mo><mo>&amp;#x222A;</mo><mo stretchy=&quot;false&quot;>[</mo><mo>&amp;#x2212;</mo><mn>180</mn><mo>,</mo><mo>&amp;#x2212;</mo><mn>90</mn><mo stretchy=&quot;false&quot;>]</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="22.479ex" height="2.634ex" viewBox="0 -809.3 9678.3 1134.2" role="img" focusable="false" style="vertical-align: -0.755ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjfs-2U697WckjEf7LamT4qsfS9cA#MJMAIN-5B" x="0" y="0"></use><g transform="translate(278,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjfs-2U697WckjEf7LamT4qsfS9cA#MJMAIN-39"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjfs-2U697WckjEf7LamT4qsfS9cA#MJMAIN-30" x="500" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjfs-2U697WckjEf7LamT4qsfS9cA#MJMAIN-2C" x="1279" y="0"></use><g transform="translate(1724,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjfs-2U697WckjEf7LamT4qsfS9cA#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjfs-2U697WckjEf7LamT4qsfS9cA#MJMAIN-38" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjfs-2U697WckjEf7LamT4qsfS9cA#MJMAIN-30" x="1001" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjfs-2U697WckjEf7LamT4qsfS9cA#MJMAIN-5D" x="3226" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjfs-2U697WckjEf7LamT4qsfS9cA#MJMAIN-222A" x="3726" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjfs-2U697WckjEf7LamT4qsfS9cA#MJMAIN-5B" x="4616" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjfs-2U697WckjEf7LamT4qsfS9cA#MJMAIN-2212" x="4895" y="0"></use><g transform="translate(5673,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjfs-2U697WckjEf7LamT4qsfS9cA#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjfs-2U697WckjEf7LamT4qsfS9cA#MJMAIN-38" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjfs-2U697WckjEf7LamT4qsfS9cA#MJMAIN-30" x="1001" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjfs-2U697WckjEf7LamT4qsfS9cA#MJMAIN-2C" x="7175" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjfs-2U697WckjEf7LamT4qsfS9cA#MJMAIN-2212" x="7620" y="0"></use><g transform="translate(8398,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjfs-2U697WckjEf7LamT4qsfS9cA#MJMAIN-39"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjfs-2U697WckjEf7LamT4qsfS9cA#MJMAIN-30" x="500" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/500150/&amp;usg=ALkJrhjfs-2U697WckjEf7LamT4qsfS9cA#MJMAIN-5D" x="9399" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">[</mo><mn>90</mn><mo>,</mo><mn>180</mn><mo stretchy="false">]</mo><mo>∪</mo><mo stretchy="false">[</mo><mo>−</mo><mn>180</mn><mo>,</mo><mo>−</mo><mn>90</mn><mo stretchy="false">]</mo></math></span></span><script type="math/tex" id="MathJax-Element-5">[90, 180] \cup [-180, -90]</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">; </font></font></li>
</ol><br>
 </li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esse algoritmo não afirma ser uma forte inteligência artificial; no entanto, o comportamento aleatório e um amplo amortecedor permitem que o robô saia de quase qualquer posição mais cedo ou mais tarde.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusão</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apesar de sua aparente simplicidade, este projeto abrange muitos tópicos não triviais: trabalho com sensores analógicos, trabalho com PWM, visão computacional, coordenação de tarefas assíncronas. </font><font style="vertical-align: inherit;">Além disso, é incrivelmente divertido. </font><font style="vertical-align: inherit;">Provavelmente, além disso, farei algo mais significativo, mas mais com um viés no aprendizado profundo. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como um bônus - a galeria:</font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/el/cw/jd/elcwjdoa21liogjvhakstzg-yru.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/il/12/fp/il12fpucbbreblnwyb2ojwsfmwu.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/3w/kr/7m/3wkr7mfjqjo2b_f9kvekia82ztq.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/z4/3q/wr/z43qwrmlfgwndbi3dw-jnvxzqew.jpeg"></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt500140/index.html">"Até 10 mil": mais de 25 avaliações de fones de ouvido</a></li>
<li><a href="../pt500142/index.html">Gerenciar direitos no nível da instalação</a></li>
<li><a href="../pt500144/index.html">David O'Brien (Xirus): Métricas! Métricas! Métricas! Parte 1</a></li>
<li><a href="../pt500146/index.html">Procura de emprego na Alemanha como gerente de produtos e muito mais. Parte 3/5. O que você precisa fazer antes de começar a enviar currículos</a></li>
<li><a href="../pt500148/index.html">Filtro de firewall Mikrotik: script gerando a base para uma política de filtragem</a></li>
<li><a href="../pt500152/index.html">Como integrei o terminal POS e o FR IKKM-Touch em 1C: empresa</a></li>
<li><a href="../pt500154/index.html">Aprendizado de máquina confidencial. Biblioteca PySyft</a></li>
<li><a href="../pt500158/index.html">Interação SwiftUI com Redux</a></li>
<li><a href="../pt500160/index.html">Elementos visuais</a></li>
<li><a href="../pt500162/index.html">Tutorial sobre processamento de dados esportivos em python</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>