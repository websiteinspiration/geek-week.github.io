<!doctype html>
<html class="no-js" lang="zh-CN">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ” ğŸ‘ ğŸ‘©ğŸ¾â€ğŸš€ ä½¿ç”¨Linuxçš„PVS-Studio Cï¼ƒè¿›è¡Œå•è¡Œä»£ç æˆ–NethermindéªŒè¯ ğŸ‘µğŸ½ ğŸ–¤ ğŸ¦</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="æœ¬æ–‡è‡´åŠ›äºå¯åŠ¨é’ˆå¯¹Linuxçš„PVS-Studio Cï¼ƒbetaæµ‹è¯•ä»¥åŠRideræ’ä»¶ã€‚å‡ºäºå¦‚æ­¤å¥‡å¦™çš„åŸå› ï¼Œä½¿ç”¨è¿™äº›å·¥å…·ï¼Œæˆ‘ä»¬æ£€æŸ¥äº†Nethermindäº§å“çš„æºä»£ç ï¼Œåœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†ä»‹ç»ä¸€äº›æœ‰è¶£ä¸”æœ‰æ—¶å¾ˆæœ‰è¶£çš„é”™è¯¯ã€‚
 
 Nethermindæ˜¯Linuxï¼ŒWindowsï¼ŒMacOsçš„.NET Cor...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>ä½¿ç”¨Linuxçš„PVS-Studio Cï¼ƒè¿›è¡Œå•è¡Œä»£ç æˆ–NethermindéªŒè¯</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pvs-studio/blog/504320/"><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b64/5fc/72d/b645fc72ddcded21612bdc5e9fac2c78.png" alt="å›¾ç‰‡1"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æœ¬æ–‡è‡´åŠ›äºå¯åŠ¨é’ˆå¯¹Linuxçš„PVS-Studio Cï¼ƒbetaæµ‹è¯•ä»¥åŠRideræ’ä»¶ã€‚</font><font style="vertical-align: inherit;">å‡ºäºå¦‚æ­¤å¥‡å¦™çš„åŸå› ï¼Œä½¿ç”¨è¿™äº›å·¥å…·ï¼Œæˆ‘ä»¬æ£€æŸ¥äº†Nethermindäº§å“çš„æºä»£ç ï¼Œåœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†ä»‹ç»ä¸€äº›æœ‰è¶£ä¸”æœ‰æ—¶å¾ˆæœ‰è¶£çš„é”™è¯¯ã€‚</font></font><br>
<a name="habracut"></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nethermind</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ˜¯Linuxï¼ŒWindowsï¼ŒMacOsçš„.NET Coreä»¥å¤ªåŠçš„å¿«é€Ÿå®¢æˆ·ç«¯ã€‚</font><font style="vertical-align: inherit;">è®¾ç½®ä»¥å¤ªåŠæˆ–dAppsä¸“ç”¨ç½‘ç»œæ—¶ï¼Œå¯ä»¥åœ¨é¡¹ç›®ä¸­ä½¿ç”¨å®ƒã€‚</font><font style="vertical-align: inherit;">Nethermindæ˜¯</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¼€æ”¾æºä»£ç </font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä½äºGitHubä¸Šã€‚</font><font style="vertical-align: inherit;">è¯¥é¡¹ç›®æˆç«‹äº2017å¹´ï¼Œå¹¶ä¸”åœ¨ä¸æ–­å‘å±•ã€‚</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä»‹ç»</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä½ å–œæ¬¢ä½“åŠ›åŠ³åŠ¨å—ï¼Ÿä¾‹å¦‚ï¼Œä¾‹å¦‚åœ¨ç¨‹åºä»£ç ä¸­æŸ¥æ‰¾é”™è¯¯ã€‚åŒæ„ï¼Œé˜…è¯»å’Œåˆ†ææ‚¨ç¼–å†™çš„ç½‘ç«™æˆ–æ•´ä¸ªé¡¹ç›®ä»¥å¯»æ‰¾ä¸€äº›æ£˜æ‰‹çš„bugç›¸å½“ç¹çã€‚å¥½å§ï¼Œå¦‚æœé¡¹ç›®å¾ˆå°ï¼Œé‚£ä¹ˆå‡è®¾æœ‰5,000æ¡çº¿ï¼Œä½†æ˜¯å¦‚æœå®ƒçš„è§„æ¨¡å·²ç»è¶…è¿‡äº†åä¸‡æˆ–ä¸€ç™¾ä¸‡æ¡çº¿å‘¢ï¼Ÿè€Œä¸”ï¼Œå®ƒæ˜¯ç”±ä¸åŒçš„ç¨‹åºå‘˜ç¼–å†™çš„ï¼Œæœ‰æ—¶ä¸æ˜¯å¾ˆå®¹æ˜“ç†è§£çš„å½¢å¼ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹è¯¥æ€ä¹ˆåŠï¼Ÿæ‚¨æ˜¯å¦çœŸçš„å¿…é¡»ç¡åœ¨æŸä¸ªåœ°æ–¹ï¼Œä¸€ä¸ªè¢«ä½ä¼°çš„åœ°æ–¹ä»¥åŠ100ï¼…çš„æ—¶é—´æ‰èƒ½æ„è¯†åˆ°æ‰€æœ‰è¿™äº›æ— å°½çš„çº¿ç´¢ï¼Œä»¥ä¾¿äº†è§£è¿™ä¸ªä»¤äººè®¨åŒçš„é”™è¯¯åœ¨å“ªé‡Œï¼Ÿæˆ‘æ€€ç–‘æ‚¨æƒ³è¿™æ ·åšã€‚é‚£ä¹ˆè¯¥æ€ä¹ˆåŠï¼Œä¹Ÿè®¸æœ‰ç°ä»£åŒ–çš„æ–¹æ³•å¯ä»¥ä½¿å®ƒè‡ªåŠ¨åŒ–ï¼Ÿ</font></font><br>
<br>
<p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/34f/9eb/338/34f9eb3387d61eb4ebfa67f0dbccbef7.png" alt="å›¾3"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç„¶ååƒé™æ€ä»£ç åˆ†æå™¨è¿™æ ·çš„å·¥å…·å¼€å§‹èµ·ä½œç”¨ã€‚</font><font style="vertical-align: inherit;">é™æ€åˆ†æå™¨æ˜¯ç”¨äºæ£€æµ‹ç¨‹åºæºä»£ç ä¸­çš„ç¼ºé™·çš„å·¥å…·ã€‚</font><font style="vertical-align: inherit;">ä¸æ‰‹åŠ¨éªŒè¯ç›¸æ¯”ï¼Œæ­¤å·¥å…·çš„ä¼˜åŠ¿å¦‚ä¸‹ï¼š</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å‡ ä¹ä¸èŠ±æ—¶é—´å¯»æ‰¾é”™è¯¯çš„ä½ç½®ï¼ˆè‡³å°‘è‚¯å®šæ¯”ç”¨çœ¼ç›å¯»æ‰¾å¤±è´¥çš„å¤åˆ¶ç²˜è´´è¦å¿«ï¼‰ï¼›</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸ç´¯ï¼Œä¸åƒä¸€ä¸ªäººç»è¿‡ä¸€æ®µæ—¶é—´çš„æœç´¢åéœ€è¦ä¼‘æ¯ï¼›</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">çŸ¥é“å¾ˆå¤šäººç”šè‡³å¯èƒ½ä¸çŸ¥é“çš„é”™è¯¯æ¨¡å¼ï¼› </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä½¿ç”¨è¯¸å¦‚æ•°æ®æµåˆ†æï¼Œç¬¦å·æ‰§è¡Œï¼Œæ¨¡å¼åŒ¹é…ç­‰æŠ€æœ¯ï¼›</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä½¿æ‚¨èƒ½å¤Ÿå®šæœŸå’Œéšæ—¶è¿›è¡Œåˆ†æï¼›</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç­‰ç­‰</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å½“ç„¶ï¼Œä½¿ç”¨é™æ€ä»£ç åˆ†æå™¨ä¸ä¼šæ›¿æ¢æˆ–å–æ¶ˆä»£ç æ£€æŸ¥ã€‚</font><font style="vertical-align: inherit;">ä½†æ˜¯ä»£ç å®¡æŸ¥å˜å¾—è¶Šæ¥è¶Šæœ‰æ•ˆç‡å’Œæœ‰ç”¨ã€‚</font><font style="vertical-align: inherit;">æ‚¨å¯ä»¥ä¸“æ³¨äºå‘ç°é«˜çº§é”™è¯¯ï¼Œè½¬ç§»çŸ¥è¯†ï¼Œè€Œä¸æ˜¯è´¹åŠ›åœ°é˜…è¯»ä»£ç ä»¥æŸ¥æ‰¾é”™åˆ«å­—ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¦‚æœæ‚¨æœ‰å…´è¶£é˜…è¯»æ›´å¤šæœ‰å…³å®ƒçš„å†…å®¹ï¼Œé‚£ä¹ˆå»ºè®®æ‚¨é˜…è¯»</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä»¥ä¸‹æ–‡ç« </font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œä»¥åŠæœ‰å…³</font><font style="vertical-align: inherit;">PVS-Studioä¸­ä½¿ç”¨</font><font style="vertical-align: inherit;">çš„</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æŠ€æœ¯</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">çš„æ–‡ç« </font><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é€‚ç”¨äºLinux / macOSçš„PVS-Studio Cï¼ƒ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç›®å‰ï¼Œæˆ‘ä»¬æ­£åœ¨å°†Cï¼ƒåˆ†æå™¨ç§»æ¤åˆ°.NET Coreï¼Œå¹¶ä¸”æˆ‘ä»¬ä¹Ÿåœ¨ç§¯æå¼€å‘IDE Riderçš„æ’ä»¶ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¦‚æœæ‚¨æœ‰å…´è¶£ï¼Œå¯ä»¥é€šè¿‡å¡«å†™</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ­¤é¡µé¢ä¸Š</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">çš„è¡¨æ ¼æ¥æ³¨å†ŒBetaæµ‹è¯•</font><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">å®‰è£…è¯´æ˜å°†å‘é€åˆ°æ‚¨çš„é‚®ä»¶ä¸­ï¼ˆä¸ç”¨æ‹…å¿ƒï¼Œè¿™å¾ˆç®€å•ï¼‰ä»¥åŠä½¿ç”¨åˆ†æä»ªçš„è®¸å¯ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¿™æ˜¯å¸¦æœ‰PVS-Studioæ’ä»¶çš„Riderçš„å¤–è§‚ï¼š</font></font><br>
<br>
<p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/rp/p6/f_/rpp6f_9oohudg2ov2jt-hdu0yg0.png" alt="å›¾ç‰‡4"></div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æœ‰ç‚¹æ„¤æ…¨</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘æƒ³è¯´çš„æ˜¯ï¼Œåœ¨æŸäº›åœ°æ–¹å¾ˆéš¾é˜…è¯»Nethermindçš„æºä»£ç ï¼Œå› ä¸ºå…¶ä¸­300-500ä¸ªå­—ç¬¦çš„è¡Œå¾ˆæ­£å¸¸ã€‚</font><font style="vertical-align: inherit;">æ˜¯çš„ï¼Œæ‰€æœ‰ä»£ç éƒ½æ²¡æœ‰ä¸€è¡Œæ ¼å¼åŒ–ã€‚</font><font style="vertical-align: inherit;">ä¾‹å¦‚ï¼Œè¿™äº›è¡ŒåŒ…å«å¤šä¸ªä¸‰å…ƒè¿ç®—ç¬¦å’Œé€»è¾‘è¿ç®—ç¬¦ï¼Œå¹¶ä¸”é‚£é‡Œä»€ä¹ˆä¹Ÿæ²¡æœ‰ã€‚</font><font style="vertical-align: inherit;">é€šå¸¸ï¼Œäº«å—ä»ç‹åº§æ¸¸æˆçš„æœ€åä¸€ä¸ªèµ›å­£å¼€å§‹ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘å°†è§£é‡Šä¸€äº›ä»¥äº†è§£èŒƒå›´ã€‚</font><font style="vertical-align: inherit;">æˆ‘æœ‰ä¸€å°é•¿çº¦82å˜ç±³çš„UltraWideæ˜¾ç¤ºå™¨ã€‚</font><font style="vertical-align: inherit;">å¦‚æœæ‚¨ä»¥å…¨å±æ–¹å¼åœ¨å…¶ä¸Šæ‰“å¼€IDEï¼Œåˆ™å®ƒå°†é€‚åˆ340ä¸ªå­—ç¬¦ã€‚</font><font style="vertical-align: inherit;">ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘æ‰€è°ˆè®ºçš„ç•Œé™ç”šè‡³ä¸åˆé€‚ã€‚</font><font style="vertical-align: inherit;">å¦‚æœæ‚¨æƒ³çœ‹ä¸€ä¸‹å®ƒçš„å¤–è§‚ï¼Œæˆ‘åœ¨GitHubä¸Šç•™ä¸‹äº†æŒ‡å‘æ–‡ä»¶çš„é“¾æ¥ï¼š</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç¤ºä¾‹1</font></font></b><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">LogBlockAuthorNicely</span>(<span class="hljs-params">Block block, ISyncPeer syncPeer</span>)</span><font></font>
{<font></font>
    <span class="hljs-keyword">string</span> authorString = (block.Author == <span class="hljs-literal">null</span> ? <span class="hljs-literal">null</span> : <span class="hljs-string">"sealed by "</span> +<font></font>
(KnownAddresses.GoerliValidators.ContainsKey(block.Author) ?<font></font>
KnownAddresses.GoerliValidators[block.Author] : block.Author?.ToString())) ??<font></font>
(block.Beneficiary == <span class="hljs-literal">null</span> ? <span class="hljs-keyword">string</span>.Empty : <span class="hljs-string">"mined by "</span> +<font></font>
(KnownAddresses.KnownMiners.ContainsKey(block.Beneficiary) ?<font></font>
KnownAddresses.KnownMiners[block.Beneficiary] : block.Beneficiary?.ToString()));<font></font>
    <span class="hljs-keyword">if</span> (_logger.IsInfo)<font></font>
    {<font></font>
        <span class="hljs-keyword">if</span> (_logger.IsInfo) _logger.Info(<span class="hljs-string">$"Discovered a new block
<span class="hljs-subst">{<span class="hljs-keyword">string</span>.Empty.PadLeft(<span class="hljs-number">9</span> - block.Number.ToString().Length, <span class="hljs-string">'
'</span>)}</span><span class="hljs-subst">{block.ToString(Block.Format.HashNumberAndTx)}</span> <span class="hljs-subst">{authorString}</span>, sent by
<span class="hljs-subst">{syncPeer:s}</span>"</span>);<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
â†’ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ–‡ä»¶é“¾æ¥</font></font></a><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç¤ºä¾‹2</font></font></b><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">BuildTransitions</span>(<span class="hljs-params"></span>)</span><font></font>
{<font></font>
    ...<font></font>
    releaseSpec.IsEip1283Enabled = (_chainSpec.Parameters.Eip1283Transition ??<font></font>
<span class="hljs-keyword">long</span>.MaxValue) &lt;= releaseStartBlock &amp;&amp;<font></font>
((_chainSpec.Parameters.Eip1283DisableTransition ?? <span class="hljs-keyword">long</span>.MaxValue) <font></font>
&gt; releaseStartBlock || (_chainSpec.Parameters.Eip1283ReenableTransition ??<font></font>
<span class="hljs-keyword">long</span>.MaxValue) &lt;= releaseStartBlock);           <font></font>
    ...<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
â†’ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é“¾æ¥åˆ°æ–‡ä»¶</font></font></a><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> 
<span class="hljs-title">Will_not_reject_block_with_bad_total_diff_but_will_reset_diff_to_null</span>(<span class="hljs-params"></span>)</span><font></font>
{<font></font>
    ...<font></font>
    _syncServer = <span class="hljs-keyword">new</span> SyncServer(<span class="hljs-keyword">new</span> StateDb(), <span class="hljs-keyword">new</span> StateDb(), localBlockTree,<font></font>
NullReceiptStorage.Instance, <span class="hljs-keyword">new</span> BlockValidator(Always.Valid, <span class="hljs-keyword">new</span><font></font>
HeaderValidator(localBlockTree, Always.Valid, MainnetSpecProvider.Instance,<font></font>
LimboLogs.Instance), Always.Valid, MainnetSpecProvider.Instance, <font></font>
LimboLogs.Instance), Always.Valid, _peerPool, StaticSelector.Full, <font></font>
<span class="hljs-keyword">new</span> SyncConfig(), LimboLogs.Instance);<font></font>
    ...     <font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
â†’ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é“¾æ¥åˆ°æ–‡ä»¶</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ç°åœ¨æƒ³è±¡åœ¨è¿™æ ·çš„éƒ¨åˆ†ä¸­å‘ç”Ÿé”™è¯¯ï¼Œå¯»æ‰¾å®ƒä¼šä»¤äººæ„‰æ‚¦å—ï¼Ÿ</font><font style="vertical-align: inherit;">æˆ‘ç¡®å®šä¸æ˜¯è¿™æ ·ï¼Œæ¯ä¸ªäººéƒ½çŸ¥é“ä¸å¯èƒ½è¿™æ ·å†™ã€‚</font><font style="vertical-align: inherit;">é¡ºä¾¿è¯´ä¸€å¥ï¼Œè¿™ä¸ªé¡¹ç›®ä¸­æœ‰ä¸€ä¸ªç±»ä¼¼çš„åœ°æ–¹å‡ºé”™ã€‚</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">éªŒè¯ç»“æœ</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸å–œæ¬¢0çš„æ¡ä»¶</font></font></h3><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ¡ä»¶1</font></font></b><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> ReceiptsMessage <span class="hljs-title">Deserialize</span>(<span class="hljs-params"><span class="hljs-keyword">byte</span>[] bytes</span>)</span><font></font>
{<font></font>
    <span class="hljs-keyword">if</span> (bytes.Length == <span class="hljs-number">0</span> &amp;&amp; bytes[<span class="hljs-number">0</span>] == Rlp.OfEmptySequence[<span class="hljs-number">0</span>])
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> ReceiptsMessage(<span class="hljs-literal">null</span>);<font></font>
    ...<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PVS-Studioè­¦å‘Šï¼š</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3106</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¯èƒ½ç´¢å¼•è¶…å‡ºèŒƒå›´ã€‚</font><font style="vertical-align: inherit;">ç´¢å¼•â€œ 0â€æŒ‡å‘â€œå­—èŠ‚â€ç•Œé™ä¹‹å¤–ã€‚</font><font style="vertical-align: inherit;">Nethermind.Network ReceiptsMessageSerializer.cs 50 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¦æ³¨æ„é”™è¯¯ï¼Œè¯·è€ƒè™‘æ•°ç»„ä¸­å…ƒç´ çš„æ•°é‡ä¸º0çš„æƒ…å†µã€‚ç„¶åï¼Œ</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bytes.Length == 0</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ¡ä»¶</font><font style="vertical-align: inherit;">ä¸ºtrueï¼Œå¹¶ä¸”è®¿é—®æ•°ç»„elementæ—¶å°†</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¼•å‘</font></font></i><font style="vertical-align: inherit;"><i><font style="vertical-align: inherit;">ç±»å‹ä¸º0</font></i><font style="vertical-align: inherit;">çš„</font><i><font style="vertical-align: inherit;">indexOutOfRangeException</font></i><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä»–ä»¬æƒ³åœ¨æ•°ç»„ä¸ºç©ºæˆ–0å…ƒç´ ç­‰äºæŸä¸ªå€¼æ—¶ç«‹å³é€€å‡ºæ­¤æ–¹æ³•ï¼Œä½†ä¼¼ä¹ä»–ä»¬ä¸å°å¿ƒæ··æ·†äº†â€œ ||â€ </font><font style="vertical-align: inherit;">ä¸â€œ &amp;&amp;â€ã€‚</font><font style="vertical-align: inherit;">æˆ‘å»ºè®®æŒ‰ä»¥ä¸‹æ–¹å¼è§£å†³æ­¤é—®é¢˜ï¼š</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> ReceiptsMessage <span class="hljs-title">Deserialize</span>(<span class="hljs-params"><span class="hljs-keyword">byte</span>[] bytes</span>)</span><font></font>
{<font></font>
    <span class="hljs-keyword">if</span> (bytes.Length == <span class="hljs-number">0</span> || bytes[<span class="hljs-number">0</span>] == Rlp.OfEmptySequence[<span class="hljs-number">0</span>])
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> ReceiptsMessage(<span class="hljs-literal">null</span>);<font></font>
    ...<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ¡ä»¶2</font></font></b><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">DiscoverAll</span>(<span class="hljs-params"></span>)</span><font></font>
{<font></font>
    ...<font></font>
    Type? GetStepType(Type[] typesInGroup)<font></font>
    {<font></font>
        Type? GetStepTypeRecursive(Type? contextType)<font></font>
        {<font></font>
            ...<font></font>
        }<font></font>
        ...<font></font>
        <span class="hljs-keyword">return</span> typesInGroup.Length == <span class="hljs-number">0</span> ? typesInGroup[<span class="hljs-number">0</span>] :<font></font>
               GetStepTypeRecursive(_context.GetType());<font></font>
    }<font></font>
    ...<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PVS-Studioè­¦å‘Šï¼š</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3106</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¯èƒ½ç´¢å¼•è¶…å‡ºèŒƒå›´ã€‚</font><font style="vertical-align: inherit;">ç´¢å¼•â€œ 0â€æŒ‡å‘â€œ typesInGroupâ€ç•Œé™ä¹‹å¤–ã€‚</font><font style="vertical-align: inherit;">Nethermind.Runner EthereumStepsManager.cs 70 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å‘ç”Ÿç±»ä¼¼äºä¸Šè¿°æƒ…å†µã€‚</font><font style="vertical-align: inherit;">å¦‚æœ</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">typesInGroupä¸­</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">çš„å…ƒç´ æ•°</font><font style="vertical-align: inherit;">ç­‰äº0ï¼Œåˆ™åœ¨è®¿é—®0å…ƒç´ æ—¶ï¼Œå°†</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æŠ›å‡ºIndexOutOfRangeException</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç±»å‹çš„</font><i><font style="vertical-align: inherit;">å¼‚å¸¸</font></i><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä»…åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘æ‰ä¸äº†è§£å¼€å‘äººå‘˜çš„éœ€æ±‚ã€‚</font><font style="vertical-align: inherit;">æœ€æœ‰å¯èƒ½çš„æ˜¯ï¼Œ</font><font style="vertical-align: inherit;">æ‚¨éœ€è¦ç¼–å†™</font><i><font style="vertical-align: inherit;">null</font></i><font style="vertical-align: inherit;">ï¼Œè€Œä¸æ˜¯</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">typesInGroup [0]</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é”™è¯¯æˆ–æœªå®Œæˆçš„ä¼˜åŒ–ï¼Ÿ</font></font></h3><br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">DeleteBlocks</span>(<span class="hljs-params">Keccak deletePointer</span>)</span><font></font>
{<font></font>
   ...<font></font>
   <span class="hljs-keyword">if</span> (currentLevel.BlockInfos.Length == <span class="hljs-number">1</span>)<font></font>
   {<font></font>
      shouldRemoveLevel = <span class="hljs-literal">true</span>;<font></font>
   }<font></font>
   <span class="hljs-keyword">else</span><font></font>
   {<font></font>
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; currentLevel.BlockInfos.Length; i++)<font></font>
      {<font></font>
         <span class="hljs-keyword">if</span> (currentLevel.BlockInfos[<span class="hljs-number">0</span>].BlockHash == currentHash) <span class="hljs-comment">// &lt;=</span><font></font>
         {<font></font>
            currentLevel.BlockInfos = currentLevel.BlockInfos<font></font>
                                      .Where(bi =&gt; bi.BlockHash != currentHash)<font></font>
                                      .ToArray();<font></font>
            <span class="hljs-keyword">break</span>;<font></font>
         }<font></font>
      }<font></font>
   }<font></font>
   ...<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PVS-Studioè­¦å‘Šï¼š</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3102</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é€šè¿‡å¾ªç¯å†…çš„å¸¸é‡ç´¢å¼•å¯ç–‘è®¿é—®'currentLevel.BlockInfos'å¯¹è±¡çš„å…ƒç´ ã€‚ Nethermind.Blockchain BlockTree.cs 895 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¹çœ‹ä¹‹ä¸‹ï¼Œè¯¥é”™è¯¯æ˜¯æ˜¾è€Œæ˜“è§çš„-å¾ªç¯æ—¨åœ¨</font><font style="vertical-align: inherit;">éå†</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">currentLevel.BlockInfos</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å…ƒç´ </font><font style="vertical-align: inherit;">ï¼Œä½†æ˜¯åœ¨è®¿é—®</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">currentLevel.BlockInfos [i]æ—¶ï¼Œä»–ä»¬</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç¼–å†™äº†</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">currentLevel.BlockInfos [0]</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚æˆ‘ä»¬åœ¨</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸Šå›ºå®š0ï¼Œ</font><font style="vertical-align: inherit;">ä»»åŠ¡å®Œæˆã€‚ä½†æ˜¯ä¸è¦ç€æ€¥ï¼Œè®©æˆ‘ä»¬å¼„æ¸…æ¥šã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç°åœ¨ï¼Œæˆ‘ä»¬é€šè¿‡</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Length</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è®¿é—®</font><font style="vertical-align: inherit;">nullå…ƒç´ </font><font style="vertical-align: inherit;">çš„</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BlockHash</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚å¦‚æœç­‰äº</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">currentHash</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä»</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">currentLevel.BlockInfosä¸­è·å–</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ‰€æœ‰ä¸ç›¸ç­‰çš„å…ƒç´ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">currentHash</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œå¯¹å…¶è¿›è¡Œå†™å…¥å¹¶é€€å‡ºå¾ªç¯ã€‚</font><font style="vertical-align: inherit;">äº‹å®è¯æ˜ï¼Œè¯¥å¾ªç¯æ˜¯å¤šä½™çš„ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘è®¤ä¸ºä»¥å‰æœ‰ä¸€ç§ç®—æ³•ï¼Œä»–ä»¬å†³å®šä½¿ç”¨</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">linq</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¿›è¡Œæ›´æ”¹/ä¼˜åŒ–</font><font style="vertical-align: inherit;">ï¼Œä½†æ˜¯å‡ºäº†ç‚¹é—®é¢˜ã€‚</font><font style="vertical-align: inherit;">ç°åœ¨ï¼Œå¦‚æœæ¡ä»¶ä¸ºå‡ï¼Œæˆ‘ä»¬å°†å¾—åˆ°æ— æ„ä¹‰çš„è¿­ä»£ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é¡ºä¾¿è¯´ä¸€å¥ï¼Œå¦‚æœç¼–å†™æ­¤æ–‡æ¡£çš„å¼€å‘äººå‘˜å°†ä½¿ç”¨</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¢é‡åˆ†æ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ¨¡å¼</font><font style="vertical-align: inherit;">ï¼Œé‚£ä¹ˆä»–ç«‹å³æ„è¯†åˆ°æœ‰äº›é—®é¢˜æ˜¯é”™è¯¯çš„ï¼Œå¹¶ä¸”å¯ä»¥å¿«é€Ÿä¿®å¤æ‰€æœ‰é—®é¢˜ã€‚</font><font style="vertical-align: inherit;">æ­¤åˆ»ï¼Œæˆ‘å°†åƒè¿™æ ·é‡å†™ä»£ç ï¼š</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">DeleteBlocks</span>(<span class="hljs-params">Keccak deletePointer</span>)</span><font></font>
{<font></font>
    ...<font></font>
    <span class="hljs-keyword">if</span> (currentLevel.BlockInfos.Length == <span class="hljs-number">1</span>)<font></font>
    {<font></font>
        shouldRemoveLevel = <span class="hljs-literal">true</span>;<font></font>
    }<font></font>
    <span class="hljs-keyword">else</span><font></font>
    {<font></font>
        currentLevel.BlockInfos = currentLevel.BlockInfos<font></font>
                                  .Where(bi =&gt; bi.BlockHash != currentHash)<font></font>
                                  .ToArray();<font></font>
    }<font></font>
    ...<font></font>
}</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å–æ¶ˆå¼•ç”¨ç©ºå¼•ç”¨</font></font></h3><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è§£é™¤å¼•ç”¨1</font></font></b><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Sign</span>(<span class="hljs-params">Transaction tx, <span class="hljs-keyword">int</span> chainId</span>)</span><font></font>
{<font></font>
    <span class="hljs-keyword">if</span> (_logger.IsDebug)<font></font>
        _logger?.Debug(<span class="hljs-string">$"Signing transaction: <span class="hljs-subst">{tx.Value}</span> to <span class="hljs-subst">{tx.To}</span>"</span>);<font></font>
    IBasicWallet.Sign(<span class="hljs-keyword">this</span>, tx, chainId);<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PVS-Studioè­¦å‘Šï¼š</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3095</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åœ¨éªŒè¯æ˜¯å¦ä¸ºnullä¹‹å‰ï¼Œå·²ä½¿ç”¨'_logger'å¯¹è±¡ã€‚æ£€æŸ¥è¡Œï¼š118ï¼Œ118ã€‚Nethermind.Wallet DevKeyStoreWallet.cs 118 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é”™è¯¯çš„é¡ºåºé”™è¯¯ã€‚é¦–å…ˆæ˜¯è¦ä¸Šè¯‰</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">_logger.IsDebug</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åªæœ‰ç»è¿‡æ˜¯</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">_loggeræ£€æŸ¥</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸º</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç©º</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚å› æ­¤ï¼Œåœ¨</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">_logger</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸º</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">null</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">çš„æƒ…å†µä¸‹</font><font style="vertical-align: inherit;">ï¼Œæˆ‘ä»¬å°†è·å¾—</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NullReferenceException</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç±»å‹çš„å¼‚å¸¸</font><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å–æ¶ˆå¼•ç”¨2</font></font></b><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">BuildNodeInfo</span>(<span class="hljs-params"></span>)</span><font></font>
{<font></font>
    _nodeInfo = <span class="hljs-keyword">new</span> NodeInfo();<font></font>
    _nodeInfo.Name = ClientVersion.Description;<font></font>
    _nodeInfo.Enode = _enode.Info;                           <span class="hljs-comment">// &lt;=</span>
    <span class="hljs-keyword">byte</span>[] publicKeyBytes = _enode?.PublicKey?.Bytes;        <span class="hljs-comment">// &lt;=</span>
    _nodeInfo.Id = (publicKeyBytes == <span class="hljs-literal">null</span> ? Keccak.Zero :<font></font>
                   Keccak.Compute(publicKeyBytes)).ToString(<span class="hljs-literal">false</span>);<font></font>
    _nodeInfo.Ip = _enode?.HostIp?.ToString();<font></font>
    _nodeInfo.ListenAddress = <span class="hljs-string">$"<span class="hljs-subst">{_enode.HostIp}</span>:<span class="hljs-subst">{_enode.Port}</span>"</span>;<font></font>
    _nodeInfo.Ports.Discovery = _networkConfig.DiscoveryPort;<font></font>
    _nodeInfo.Ports.Listener = _networkConfig.P2PPort;<font></font>
    UpdateEthProtocolInfo();<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PVS-Studioè­¦å‘Šï¼š</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3095</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åœ¨éªŒè¯ä¸ºç©ºä¹‹å‰ä½¿ç”¨äº†'_enode'å¯¹è±¡ã€‚</font><font style="vertical-align: inherit;">æ£€æŸ¥è¡Œï¼š55ã€56ã€‚Nethermind.JsonRpc AdminModule.cs 55è¯¥</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é”™è¯¯ä¸ä¸Šè¿°å®Œå…¨ç›¸åŒï¼Œä»…è¿™æ¬¡æ˜¯ç½ªé­ç¥¸é¦–æ˜¯</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">_enode</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘è¦è¡¥å……ä¸€ç‚¹ï¼Œå¦‚æœæ‚¨å¿˜è®°æ£€æŸ¥æ˜¯å¦ä¸ºnullï¼Œé‚£ä¹ˆä»…åœ¨ç¨‹åºå´©æºƒæ—¶è®°ä½è¿™ä¸€ç‚¹ã€‚</font><font style="vertical-align: inherit;">åˆ†æä»ªä¼šæé†’æ‚¨è¿™ä¸€ç‚¹ï¼Œä¸€åˆ‡éƒ½ä¼šå¥½èµ·æ¥çš„ã€‚</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ‘ä»¬æœ€å–œæ¬¢çš„å¤åˆ¶ç²˜è´´</font></font></h3><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æƒ…å†µ1</font></font></b><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">bool</span> <span class="hljs-title">Equals</span>(<span class="hljs-params"><span class="hljs-keyword">ref</span> UInt256 a, <span class="hljs-keyword">ref</span> UInt256 b</span>)</span><font></font>
{<font></font>
    <span class="hljs-keyword">return</span> a.s0 == b.s0 &amp;&amp; a.s1 == b.s1 &amp;&amp; a.s2 == b.s2 &amp;&amp; a.s2 == b.s2;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PVS-Studioè­¦å‘Šï¼š</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3001</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> '&amp;&amp;'è¿ç®—ç¬¦çš„å·¦ä¾§å’Œå³ä¾§æœ‰ç›¸åŒçš„å­è¡¨è¾¾å¼'a.s2 == b.s2'ã€‚</font><font style="vertical-align: inherit;">Nethermind.Dirichlet.Numerics UInt256.cs 1154 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨æ­¤ç›¸åŒæ¡ä»¶è¢«æ£€æŸ¥2æ¬¡ï¼š</font></font><br>
<br>
<pre><code class="cs hljs">a.s2 == b.s2</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç”±äºå‚æ•°</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å’Œ</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">b</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å…·æœ‰å­—æ®µ</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s3</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œå› æ­¤æˆ‘å‡è®¾åœ¨å¤åˆ¶æ—¶æˆ‘ä»¬åªæ˜¯å¿˜è®°å°†</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s2</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ›´æ”¹</font><font style="vertical-align: inherit;">ä¸º</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s3</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
äº‹å®è¯æ˜ï¼Œå‚æ•°ç›¸ç­‰çš„é¢‘ç‡æ¯”ä»£ç ä½œè€…æœŸæœ›çš„æ›´é¢‘ç¹ã€‚åŒæ—¶ï¼Œä¸€äº›å¼€å‘äººå‘˜è®¤ä¸ºä»–ä»¬ä¸è¿™æ ·åšï¼Œè€Œæ˜¯å¼€å§‹åœ¨ä¸€ä¸ªå®Œå…¨ä¸åŒçš„åœ°æ–¹å¯»æ‰¾é”™è¯¯ï¼Œè¿™èŠ±è´¹äº†å¾ˆå¤šç²¾åŠ›å’Œç¥ç»ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é¡ºä¾¿è¯´ä¸€ä¸‹ï¼Œæ¯”è¾ƒå‡½æ•°ä¸­çš„é”™è¯¯é€šå¸¸æ˜¯ç»å…¸çš„ã€‚æ˜¾ç„¶ï¼Œç¨‹åºå‘˜è®¤ä¸ºè¿™æ ·çš„åŠŸèƒ½å¾ˆç®€å•ï¼Œæ‰€ä»¥ä»–ä»¬çš„å†™ä½œéå¸¸éšæ„å’Œæ¼«ä¸ç»å¿ƒã€‚</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¯æ˜</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚çŸ¥é“äº†è¿™ä¸€ç‚¹ï¼Œç°åœ¨è¦å°å¿ƒ:)ï¼</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æƒ…å†µäºŒ</font></font></b><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> Task&lt;ApiResponse&gt; 
<span class="hljs-title">PublishBlockAsync</span>(<span class="hljs-params">SignedBeaconBlock signedBlock,
                  CancellationToken cancellationToken</span>)</span><font></font>
{<font></font>
    <span class="hljs-keyword">bool</span> acceptedLocally = <span class="hljs-literal">false</span>;<font></font>
    ...<font></font>
    <span class="hljs-keyword">if</span> (acceptedLocally)<font></font>
    {<font></font>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> ApiResponse(StatusCode.Success);<font></font>
    }<font></font>
    <span class="hljs-keyword">else</span><font></font>
    {<font></font>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> ApiResponse(StatusCode.Success);<font></font>
    }<font></font>
    ...<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PVS-Studioè­¦å‘Šï¼š</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3004'then</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 'è¯­å¥ç­‰æ•ˆäº'else'è¯­å¥ã€‚ Nethermind.BeaconNode BeaconNodeFacade.cs 177 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¯¹äº</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">acceptedLocally</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å˜é‡çš„ä»»ä½•å€¼ï¼Œè¯¥</font><font style="vertical-align: inherit;">æ–¹æ³•å°†è¿”å›ç›¸åŒçš„å€¼ã€‚å¾ˆéš¾è¯´è¿™æ˜¯å¦æ˜¯ä¸€ä¸ªé”™è¯¯ã€‚å‡è®¾ç¨‹åºå‘˜å¤åˆ¶äº†ä¸€è¡Œå¹¶å¿˜è®°å°†</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">StatusCode.Success</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ›´æ”¹</font><font style="vertical-align: inherit;">ä¸ºå…¶ä»–å†…å®¹ï¼Œé‚£ä¹ˆè¿™æ˜¯ä¸€ä¸ªçœŸæ­£çš„é”™è¯¯ã€‚æ­¤å¤–ï¼Œ</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">StatusCode</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å…·æœ‰</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">InternalError</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å’Œ</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">InvalidRequest</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚ä½†æ˜¯ä»£ç é‡æ„å¾ˆå¯èƒ½æ˜¯ç½ªé­ç¥¸é¦–ï¼Œæ— è®ºå¦‚ä½•æˆ‘ä»¬éƒ½ä¸åœ¨ä¹</font><i><font style="vertical-align: inherit;">acceptedLocallyçš„</font></i><font style="vertical-align: inherit;">å€¼</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ¡ä»¶å˜æˆè®©æ‚¨åä¸‹æ¥æ€è€ƒæ˜¯å¦é”™è¯¯çš„åœ°æ–¹ã€‚</font><font style="vertical-align: inherit;">å› æ­¤ï¼Œæ— è®ºå¦‚ä½•ï¼Œè¿™ç§æƒ…å†µæ˜¯éå¸¸ä¸æ„‰å¿«çš„ã€‚</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æƒ…å†µ3</font></font></b><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">TearDown</span>(<span class="hljs-params"></span>)</span><font></font>
{<font></font>
    ...<font></font>
    <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> testResult <span class="hljs-keyword">in</span> _results)<font></font>
    {<font></font>
         <span class="hljs-keyword">string</span> message = <span class="hljs-string">$"<span class="hljs-subst">{testResult.Order}</span>. <span class="hljs-subst">{testResult.Name}</span> has "</span> 
               + <span class="hljs-string">$"<span class="hljs-subst">{(testResult.Passed ? <span class="hljs-string">"passed [+]"</span> : <span class="hljs-string">"failed [-]"</span>)}</span>"</span>;
         <span class="hljs-keyword">if</span> (testResult.Passed)<font></font>
         {<font></font>
               TestContext.WriteLine(message);<font></font>
         }<font></font>
         <span class="hljs-keyword">else</span><font></font>
         {<font></font>
               TestContext.WriteLine(message);<font></font>
         }<font></font>
     }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PVS-Studioè­¦å‘Šï¼š</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3004'then</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 'è¯­å¥ç­‰æ•ˆäº'else'è¯­å¥ã€‚</font><font style="vertical-align: inherit;">Nethermind.Overseer.Test TestBuilder.cs 46 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åŒæ ·ï¼Œæˆ‘ä»¬ä¹Ÿä¸å…³å¿ƒéªŒè¯ï¼Œå› ä¸ºæœ€ç»ˆæˆ‘ä»¬å¾—åˆ°çš„æ˜¯ç›¸åŒçš„ä¸œè¥¿ã€‚</font><font style="vertical-align: inherit;">æˆ‘ä»¬å†æ¬¡åä¸‹æ¥è‹¦è‹¦æ€ç´¢ï¼Œä½†æ˜¯å¼€å‘äººå‘˜æƒ³åœ¨è¿™é‡Œå†™äº›ä»€ä¹ˆã€‚</font><font style="vertical-align: inherit;">é€šè¿‡ä½¿ç”¨é™æ€åˆ†æå¹¶ç«‹å³ä¿®å¤æ­¤ç±»å«ç³Šçš„ä»£ç ï¼Œå¯ä»¥é¿å…æµªè´¹æ—¶é—´ã€‚</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ¡ˆä¾‹4</font></font></b><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Setup</span>(<span class="hljs-params"></span>)</span><font></font>
{<font></font>
    <span class="hljs-keyword">if</span> (_decoderBuffer.ReadableBytes &gt; <span class="hljs-number">0</span>)<font></font>
    {<font></font>
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> Exception(<span class="hljs-string">"decoder buffer"</span>);<font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">if</span> (_decoderBuffer.ReadableBytes &gt; <span class="hljs-number">0</span>)<font></font>
    {<font></font>
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> Exception(<span class="hljs-string">"decoder buffer"</span>);<font></font>
    }<font></font>
    ...<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PVS-Studioè­¦å‘Šï¼š</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3021</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æœ‰ä¸¤ä¸ªå¸¦æœ‰ç›¸åŒæ¡ä»¶è¡¨è¾¾å¼çš„'if'è¯­å¥ã€‚ç¬¬ä¸€ä¸ª'if'è¯­å¥åŒ…å«æ–¹æ³•returnã€‚è¿™æ„å‘³ç€ç¬¬äºŒä¸ªâ€œ ifâ€è¯­å¥æ˜¯æ¯«æ— æ„ä¹‰çš„Nethermind.Network.Benchmark InFlowBenchmarks.cs 55 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åªéœ€å†æ¬¡</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æŒ‰Ctrl + Vå³å¯</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚æˆ‘ä»¬åˆ é™¤äº†å¤šä½™çš„æ”¯ç¥¨ï¼Œä¸€åˆ‡éƒ½å¾ˆå¥½ã€‚æˆ‘æ•¢è‚¯å®šï¼Œå¦‚æœå…¶ä»–ä¸€äº›æ¡ä»¶åœ¨è¿™é‡Œå¾ˆé‡è¦ï¼Œé‚£ä¹ˆæ¯ä¸ªäººéƒ½ä¼šåœ¨ä¸€ä¸ªå†™</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œå¦‚æœ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é€šè¿‡é€»è¾‘è¿ç®—ç¬¦ï¼Œä¸€</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç®±5</font></font></b><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">LogBlockAuthorNicely</span>(<span class="hljs-params">Block block, ISyncPeer syncPeer</span>)</span><font></font>
{<font></font>
    <span class="hljs-keyword">if</span> (_logger.IsInfo)<font></font>
    {<font></font>
        <span class="hljs-keyword">if</span> (_logger.IsInfo)<font></font>
        {<font></font>
            ...<font></font>
        }<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PVS-Studioè­¦å‘Šï¼š</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3030</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å®šæœŸæ£€æŸ¥ã€‚</font><font style="vertical-align: inherit;">'_logger.IsInfo'æ¡ä»¶å·²åœ¨ç¬¬242è¡Œä¸­å¾—åˆ°éªŒè¯ã€‚Nethermind.Synchronization SyncServer.cs 244 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸ç¬¬å››ç§æƒ…å†µä¸€æ ·ï¼Œå°†æ‰§è¡Œé¢å¤–çš„æ£€æŸ¥ã€‚</font><font style="vertical-align: inherit;">ä½†æ˜¯ï¼ŒåŒºåˆ«åœ¨äº</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">_logger</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸ä»…å…·æœ‰ä¸€ä¸ªå±æ€§ï¼Œè€Œä¸”è¿˜å…·æœ‰ä¾‹å¦‚' </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bool IsError {get; </font><font style="vertical-align: inherit;">}</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 'ã€‚</font><font style="vertical-align: inherit;">å› æ­¤ï¼Œä»£ç å¯èƒ½çœ‹èµ·æ¥åƒè¿™æ ·ï¼š</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">LogBlockAuthorNicely</span>(<span class="hljs-params">Block block, ISyncPeer syncPeer</span>)</span><font></font>
{<font></font>
    <span class="hljs-keyword">if</span> (_logger.IsInfo)<font></font>
    {<font></font>
        <span class="hljs-keyword">if</span> (!_logger.IsError) <span class="hljs-comment">// &lt;=</span><font></font>
        {<font></font>
            ...<font></font>
        }<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¥½å§ï¼Œæˆ–è€…ä»£ç é‡æ„çš„æ‰€æœ‰é”™è¯¯ï¼Œä¸å†éœ€è¦æ£€æŸ¥ã€‚</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ¡ˆä¾‹6</font></font></b><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">if</span> (missingParamsCount != <span class="hljs-number">0</span>)<font></font>
{<font></font>
    <span class="hljs-keyword">bool</span> incorrectParametersCount = missingParamsCount != <span class="hljs-number">0</span>; <span class="hljs-comment">// &lt;=</span>
    <span class="hljs-keyword">if</span> (missingParamsCount &gt; <span class="hljs-number">0</span>)<font></font>
    {<font></font>
        ...<font></font>
    }<font></font>
    ...<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PVS-Studio </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è­¦å‘Š</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">V3022</font></a><font style="vertical-align: inherit;">è¡¨è¾¾å¼'missingParamsCountï¼= 0'å§‹ç»ˆä¸ºtrueã€‚</font><font style="vertical-align: inherit;">Nethermind.JsonRpc JsonRpcService.cs 127 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ£€æŸ¥æ¡ä»¶ï¼ˆmissingParamsCountï¼= 0ï¼‰ï¼Œå¦‚æœä¸ºtrueï¼Œåˆ™å†æ¬¡è¿›è¡Œè®¡ç®—å¹¶å°†ç»“æœåˆ†é…ç»™å˜é‡ã€‚</font><font style="vertical-align: inherit;">åŒæ„è¿™æ˜¯ä¸€ç§ç›¸å½“çœŸå®çš„å†™ä½œæ–¹å¼ã€‚</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä»¤äººå›°æƒ‘çš„æ”¯ç¥¨</font></font></h3><br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> Task&lt;<span class="hljs-keyword">long</span>&gt; 
<span class="hljs-title">DownloadHeaders</span>(<span class="hljs-params">PeerInfo bestPeer, 
                BlocksRequest blocksRequest, 
                CancellationToken cancellation</span>)</span><font></font>
{<font></font>
  ...<font></font>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt; headers.Length; i++)<font></font>
  {<font></font>
    ...<font></font>
    BlockHeader currentHeader = headers[i];<font></font>
    ...<font></font>
    <span class="hljs-keyword">bool</span> isValid = i &gt; <span class="hljs-number">1</span> ? <font></font>
        _blockValidator.ValidateHeader(currentHeader, headers[i - <span class="hljs-number">1</span>], <span class="hljs-literal">false</span>):<font></font>
        _blockValidator.ValidateHeader(currentHeader, <span class="hljs-literal">false</span>);<font></font>
    ...<font></font>
    <span class="hljs-keyword">if</span> (HandleAddResult(bestPeer, <font></font>
                        currentHeader, <font></font>
                        i == <span class="hljs-number">0</span>,                              <span class="hljs-comment">// &lt;=</span><font></font>
                        _blockTree.Insert(currentHeader))) <font></font>
    {<font></font>
       headersSynced++;<font></font>
    }<font></font>
<font></font>
    ...<font></font>
  }<font></font>
  ...<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PVS-Studio </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è­¦å‘Š</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">V3022</font></a><font style="vertical-align: inherit;">è¡¨è¾¾å¼'i == 0'å§‹ç»ˆä¸ºfalseã€‚</font><font style="vertical-align: inherit;">Nethermind.Synchronization BlockDownloader.cs 192 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è®©æˆ‘ä»¬æŒ‰é¡ºåºå¼€å§‹ã€‚</font><font style="vertical-align: inherit;">åˆå§‹åŒ–æ—¶ï¼Œå˜é‡</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">iè¢«</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">èµ‹å€¼ä¸º1ã€‚æ¥ä¸‹æ¥ï¼Œå˜é‡ä»…é€’å¢ï¼›å› æ­¤ï¼Œè¯¥å€¼å°†å§‹ç»ˆä¼ é€’ç»™å‡½æ•°</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">false</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç°åœ¨è®©æˆ‘ä»¬çœ‹ä¸€ä¸‹</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HandleAddResult</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">bool</span> <span class="hljs-title">HandleAddResult</span>(<span class="hljs-params">PeerInfo peerInfo, 
                             BlockHeader block,
                             <span class="hljs-keyword">bool</span> isFirstInBatch, 
                             AddBlockResult addResult</span>)</span><font></font>
{<font></font>
    ...<font></font>
    <span class="hljs-keyword">if</span> (isFirstInBatch)<font></font>
    {<font></font>
        ...<font></font>
    }<font></font>
    <span class="hljs-keyword">else</span><font></font>
    {<font></font>
        ...<font></font>
    }<font></font>
    ...<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å¯¹</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">isFirstInBatch</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ„Ÿå…´è¶£</font><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">æ ¹æ®æ­¤å‚æ•°çš„åç§°åˆ¤æ–­ï¼Œå®ƒè´Ÿè´£ç¡®å®šæŸæ–¹æ˜¯å¦æ˜¯ç¬¬ä¸€ä¸ªã€‚</font><font style="vertical-align: inherit;">å—¯é¦–å…ˆ </font><font style="vertical-align: inherit;">è®©æˆ‘ä»¬åœ¨ä¸Šé¢å†æ¬¡æŸ¥çœ‹ï¼Œå‘ç°ä½¿ç”¨</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æœ‰2ä¸ªè°ƒç”¨</font><font style="vertical-align: inherit;">ï¼š</font></font><br>
<br>
<pre><code class="cs hljs">BlockHeader currentHeader = headers[i];<font></font>
_blockValidator.ValidateHeader(currentHeader, headers[i - <span class="hljs-number">1</span>], <span class="hljs-literal">false</span>)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸è¦å¿˜äº†ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå€’è®¡æ—¶ä»1å˜ä¸ºäº‹å®è¯æ˜ï¼Œæˆ‘ä»¬æœ‰2ä¸ªé€‰æ‹©ï¼šè¦ä¹ˆâ€œç¬¬ä¸€â€çš„æ„æ€æŒ‡æ•°1ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œæˆ–åœ¨ç´¢å¼•ä¸º0ã€‚ä½†åœ¨ä»»ä½•æƒ…å†µä¸‹ï¼Œè¿™</font><font style="vertical-align: inherit;">å°†ç­‰äº</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ‘</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
äº‹å®è¯æ˜ï¼Œå‡½æ•°è°ƒç”¨åº”å¦‚ä¸‹æ‰€ç¤ºï¼š</font></font><br>
<br>
<pre><code class="cs hljs">HandleAddResult(bestPeer, currentHeader, <font></font>
                i == <span class="hljs-number">1</span>, _blockTree.Insert(currentHeader))</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ–åƒè¿™æ ·ï¼š</font></font><br>
<br>
<pre><code class="cs hljs">HandleAddResult(bestPeer, currentHeader, <font></font>
                i - <span class="hljs-number">1</span> == <span class="hljs-number">0</span>, _blockTree.Insert(currentHeader))</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åŒæ ·ï¼Œå¦‚æœå¼€å‘äººå‘˜ç»å¸¸ä½¿ç”¨é™æ€åˆ†æå™¨ï¼Œé‚£ä¹ˆä»–å°†ç¼–å†™æ­¤ä»£ç å¹¶çœ‹åˆ°è­¦å‘Šï¼Œå°†è¿…é€Ÿä¿®å¤å®ƒå¹¶äº«å—ç”Ÿæ´»ã€‚ </font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¼˜å…ˆæƒ ï¼Ÿï¼Ÿ</font></font></h3><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æƒ…å†µ1</font></font></b><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> MemorySize<font></font>
{<font></font>
  <span class="hljs-keyword">get</span><font></font>
  {<font></font>
    <span class="hljs-keyword">int</span> unaligned = (Keccak == <span class="hljs-literal">null</span> ? MemorySizes.RefSize : <font></font>
        MemorySizes.RefSize + Keccak.MemorySize) <font></font>
        + (MemorySizes.RefSize + FullRlp?.Length <font></font>
                                 ?? MemorySizes.ArrayOverhead)   <span class="hljs-comment">// &lt;=</span><font></font>
        + (MemorySizes.RefSize + _rlpStream?.MemorySize <font></font>
                                 ?? MemorySizes.RefSize)         <span class="hljs-comment">// &lt;=</span><font></font>
        + MemorySizes.RefSize + (MemorySizes.ArrayOverhead + _data?.Length <font></font>
        * MemorySizes.RefSize ?? MemorySizes.ArrayOverhead) <font></font>
        + MemorySizes.SmallObjectOverhead + (Key?.MemorySize ?? <span class="hljs-number">0</span>);
    <span class="hljs-keyword">return</span> MemorySizes.Align(unaligned);<font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PVS-Studioè­¦å‘Šï¼š </font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3123ä¹Ÿè®¸æ˜¯â€œ ??â€ </font><font style="vertical-align: inherit;">æ“ä½œå‘˜çš„å·¥ä½œæ–¹å¼ä¸é¢„æœŸä¸åŒã€‚</font><font style="vertical-align: inherit;">å®ƒçš„ä¼˜å…ˆçº§ä½äºå…¶å·¦ä¾§çš„å…¶ä»–è¿è¥å•†çš„ä¼˜å…ˆçº§ã€‚</font><font style="vertical-align: inherit;">Nethermind.Trie TrieNode.cs 43</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3123ä¹Ÿè®¸æ˜¯â€œ ??â€ </font><font style="vertical-align: inherit;">æ“ä½œå‘˜çš„å·¥ä½œæ–¹å¼ä¸é¢„æœŸä¸åŒã€‚</font><font style="vertical-align: inherit;">å®ƒçš„ä¼˜å…ˆçº§ä½äºå…¶å·¦ä¾§çš„å…¶ä»–è¿è¥å•†çš„ä¼˜å…ˆçº§ã€‚</font><font style="vertical-align: inherit;">Nethermind.Trie TrieNode.cs 44</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åˆ†æå™¨å»ºè®®æ‚¨æ£€æŸ¥æˆ‘ä»¬å¦‚ä½•ä½¿ç”¨â€œ ??â€è¿ç®—ç¬¦ï¼Œå¹¶äº†è§£é—®é¢˜æ‰€åœ¨ï¼Œå› æ­¤å»ºè®®è€ƒè™‘ä»¥ä¸‹æƒ…å†µã€‚</font><font style="vertical-align: inherit;">æˆ‘ä»¬åœ¨è¿™é‡Œçœ‹è¿™è¡Œï¼š</font></font><br>
<br>
<pre><code class="cs hljs">(MemorySizes.RefSize + FullRlp?.Length ?? MemorySizes.ArrayOverhead)</code></pre><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MemorySizes.RefSize</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å’Œ</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MemorySizes.ArrayOverhead</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ˜¯å¸¸é‡ï¼š</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title">MemorySizes</span><font></font>
{<font></font>
    ...<font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> RefSize = <span class="hljs-number">8</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> ArrayOverhead = <span class="hljs-number">20</span>;<font></font>
    ...<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å› æ­¤ï¼Œä¸ºæ¸…æ¥šèµ·è§ï¼Œæˆ‘å»ºè®®é‡å†™å­—ç¬¦ä¸²ï¼Œæ›¿æ¢å…¶å€¼ï¼š</font></font><br>
<br>
<pre><code class="cs hljs">(<span class="hljs-number">8</span> + FullRlp?.Length ?? <span class="hljs-number">20</span>)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç°åœ¨å‡è®¾</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FullRlp</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸º</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç©ºã€‚</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç„¶å</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼ˆ8 + nullï¼‰</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å°†ä¸ºnull </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¾—åˆ°äº†è¡¨è¾¾ï¼ˆ</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç©º?? 20</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰ï¼Œè¿™å°†è¿”å›20. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
äº‹å®è¯æ˜ï¼Œåªè¦</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FullRlp</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ˜¯</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç©º</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œä»ä»·å€¼</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MemorySizes.ArrayOverhead</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ€»æ˜¯ä¼šå›æ¥ï¼Œ</font><font style="vertical-align: inherit;">ä¸ç®¡æ˜¯ä»€ä¹ˆå­˜å‚¨åœ¨</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MemorySizes.RefSizeã€‚</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸‹ä¸€è¡Œçš„ç‰‡æ®µç±»ä¼¼ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä½†æ˜¯é—®é¢˜æ˜¯ï¼Œå¼€å‘äººå‘˜æ˜¯å¦æƒ³è¦è¿™ç§è¡Œä¸ºï¼Ÿè®©æˆ‘ä»¬çœ‹ä¸€ä¸‹ä¸‹é¢çš„è¡Œï¼š</font></font><br>
<br>
<pre><code class="cs hljs">MemorySizes.RefSize + (MemorySizes.ArrayOverhead <font></font>
    + _data?.Length * MemorySizes.RefSize ?? MemorySizes.ArrayOverhead) </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨è¿™é‡Œï¼Œä¸ä¸Šé¢</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è®¨è®º</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">çš„éƒ¨åˆ†ä¸€æ ·ï¼Œå°†</font><i><font style="vertical-align: inherit;">MemorySizes.RefSize</font></i><font style="vertical-align: inherit;">æ·»åŠ åˆ°è¡¨è¾¾å¼ä¸­ï¼Œä½†æ˜¯</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¯·æ³¨æ„ï¼Œåœ¨ç¬¬ä¸€ä¸ªâ€œ +â€è¿ç®—ç¬¦ä¹‹åæœ‰ä¸€ä¸ªæ‹¬å·ã€‚</font><font style="vertical-align: inherit;">äº‹å®è¯æ˜ï¼Œ</font><font style="vertical-align: inherit;">æˆ‘ä»¬åº”è¯¥</font><font style="vertical-align: inherit;">å‘</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MemorySizes.RefSize</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ·»åŠ ä¸€äº›è¡¨è¾¾å¼ï¼Œå¦‚æœå®ƒä¸º</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">null</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°†æ·»åŠ å¦ä¸€ä¸ª</font><font style="vertical-align: inherit;">è¡¨è¾¾å¼</font><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">å› æ­¤ï¼Œä»£ç åº”å¦‚ä¸‹æ‰€ç¤ºï¼š</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> MemorySize<font></font>
{<font></font>
  <span class="hljs-keyword">get</span><font></font>
  {<font></font>
    <span class="hljs-keyword">int</span> unaligned = (Keccak == <span class="hljs-literal">null</span> ? MemorySizes.RefSize : <font></font>
       MemorySizes.RefSize + Keccak.MemorySize) <font></font>
       + (MemorySizes.RefSize + (FullRlp?.Length <font></font>
                                 ?? MemorySizes.ArrayOverhead))    <span class="hljs-comment">// &lt;=</span><font></font>
       + (MemorySizes.RefSize + (_rlpStream?.MemorySize <font></font>
                                 ?? MemorySizes.RefSize))          <span class="hljs-comment">// &lt;=</span><font></font>
       + MemorySizes.RefSize + (MemorySizes.ArrayOverhead + _data?.Length <font></font>
       * MemorySizes.RefSize ?? MemorySizes.ArrayOverhead) <font></font>
       + MemorySizes.SmallObjectOverhead + (Key?.MemorySize ?? <span class="hljs-number">0</span>);
    <span class="hljs-keyword">return</span> MemorySizes.Align(unaligned);<font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åŒæ ·ï¼Œè¿™åªæ˜¯ä¸€ä¸ªå‡è®¾ï¼Œä½†æ˜¯ï¼Œå¦‚æœå¼€å‘äººå‘˜æƒ³è¦å…¶ä»–è¡Œä¸ºï¼Œåˆ™åº”è¯¥æ˜ç¡®æŒ‡å‡ºï¼š</font></font><br>
<br>
<pre><code class="cs hljs">((MemorySizes.RefSize + FullRlp?.Length) ?? MemorySizes.ArrayOverhead)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç„¶åï¼Œé˜…è¯»æ­¤ä»£ç çš„äººå°±ä¸å¿…é•¿æ—¶é—´ç ”ç©¶è¿™é‡Œå‘ç”Ÿçš„äº‹æƒ…ä»¥åŠç¨‹åºå‘˜æƒ³è¦çš„ä¸œè¥¿ã€‚</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æƒ…å†µäºŒ</font></font></b><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">async</span> Task&lt;JsonRpcResponse&gt; 
<span class="hljs-title">ExecuteAsync</span>(<span class="hljs-params">JsonRpcRequest request, 
             <span class="hljs-keyword">string</span> methodName,
             (MethodInfo Info, <span class="hljs-keyword">bool</span> ReadOnly</span>) method)</span><font></font>
{<font></font>
    <span class="hljs-keyword">var</span> expectedParameters = method.Info.GetParameters();
    <span class="hljs-keyword">var</span> providedParameters = request.Params;<font></font>
    ...<font></font>
    <span class="hljs-keyword">int</span> missingParamsCount = expectedParameters.Length <font></font>
            - (providedParameters?.Length ?? <span class="hljs-number">0</span>) <font></font>
            + providedParameters?.Count(<span class="hljs-keyword">string</span>.IsNullOrWhiteSpace) ?? <span class="hljs-number">0</span>; <span class="hljs-comment">// &lt;=</span>
    <span class="hljs-keyword">if</span> (missingParamsCount != <span class="hljs-number">0</span>)<font></font>
    {<font></font>
        ...<font></font>
    }<font></font>
    ...<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PVS-Studioè­¦å‘Šï¼š</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3123</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¹Ÿè®¸æ˜¯â€œ ??â€ </font><font style="vertical-align: inherit;">æ“ä½œå‘˜çš„å·¥ä½œæ–¹å¼ä¸é¢„æœŸä¸åŒã€‚</font><font style="vertical-align: inherit;">å®ƒçš„ä¼˜å…ˆçº§ä½äºå…¶å·¦ä¾§çš„å…¶ä»–è¿è¥å•†çš„ä¼˜å…ˆçº§ã€‚</font><font style="vertical-align: inherit;">Nethermind.JsonRpc JsonRpcService.cs 123 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åŒæ ·ï¼Œè¯¥æ“ä½œçš„ä¼˜å…ˆçº§æ˜¯â€œ ??â€ï¼Œå› æ­¤ï¼Œæ­£å¦‚ä¸Šä¸€æ¬¡ä¸€æ ·ï¼Œæˆ‘ä»¬è€ƒè™‘è¿™ç§æƒ…å†µã€‚</font><font style="vertical-align: inherit;">æˆ‘ä»¬åœ¨è¿™é‡Œçœ‹è¿™è¡Œï¼š</font></font><br>
<br>
<pre><code class="cs hljs">expectedParameters.Length <font></font>
            - (providedParameters?.Length ?? <span class="hljs-number">0</span>) <font></font>
            + providedParameters?.Count(<span class="hljs-keyword">string</span>.IsNullOrWhiteSpace) ?? <span class="hljs-number">0</span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å‡è®¾</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">providedParameters</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸º</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç©º</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œç„¶åä¸ºæ¸…æ¥šèµ·è§ï¼Œè¯·ç«‹å³æ›´æ¢ç›¸å…³çš„ä¸€åˆ‡</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">providedParameters</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç©ºï¼Œ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¹¶</font><font style="vertical-align: inherit;">æ›¿æ¢ä¸€ä¸ªéšæœºå€¼</font><font style="vertical-align: inherit;">ï¼Œè€Œä¸æ˜¯</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">expectedParameters.Length</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-number">100</span> - (<span class="hljs-literal">null</span> ?? <span class="hljs-number">0</span>) + <span class="hljs-literal">null</span> ?? <span class="hljs-number">0</span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç°åœ¨ï¼Œæˆ‘ä»¬ç«‹å³æ³¨æ„åˆ°æœ‰ä¸¤é¡¹ç±»ä¼¼çš„æ£€æŸ¥ï¼Œåªæœ‰ä¸€ç§æƒ…å†µä¸‹æœ‰æ‹¬å·ï¼Œè€Œå¦ä¸€ç§æƒ…å†µä¸‹æœ‰æ‹¬å·ã€‚è®©æˆ‘ä»¬è¿è¡Œè¿™ä¸ªä¾‹å­ã€‚é¦–å…ˆæˆ‘ä»¬å¾—åˆ°ï¼ˆ</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">null ?? 0</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰å°†è¿”å›0ï¼Œç„¶åä»100ä¸­å‡å»0å¹¶å¾—åˆ°100ï¼š</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-number">100</span> + <span class="hljs-literal">null</span> ?? <span class="hljs-number">0</span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç°åœ¨ï¼Œæˆ‘ä»¬ä¸å†å®Œå…¨æ‰§è¡Œâ€œ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">null ?? 0</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> â€ï¼Œæœ€åå¾—åˆ°ï¼ˆ</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">100 + 0</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰ï¼Œè€Œä¸æ˜¯ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é¦–å…ˆå®ƒå°†æ‰§è¡Œï¼ˆ</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">100 + null</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰ï¼Œç„¶åå¾—åˆ°</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">null</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚ç„¶åï¼Œå®ƒæ£€æŸ¥ï¼ˆ</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">null ?? 0</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰ï¼Œè¿™å¯¼è‡´missingParamsCountå˜é‡çš„å€¼ä¸º0ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç”±äºä¸‹ä¸€ä¸ªæ¡ä»¶æ˜¯</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">missingParamsCount</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç­‰äºé›¶ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å‡å®šè¿™æ˜¯å¼€å‘äººå‘˜æ‰€å¯»æ±‚çš„è¡Œä¸ºã€‚æˆ‘ä¼šè¯´ï¼Œä¸ºä»€ä¹ˆä¸æ”¾åœ¨æ–¹æ‹¬å·ä¸­å¹¶æ˜ç¡®è¡¨è¾¾æˆ‘çš„æƒ³æ³•å‘¢ï¼Ÿé€šå¸¸ï¼Œæ­¤æ£€æŸ¥å¯èƒ½æ˜¯ç”±äºè¯¯è§£äº†æœ‰æ—¶è¿”å›0çš„åŸå› ï¼Œè€Œè¿™ä»…ä»…æ˜¯æ‹æ–ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å†ä¸€æ¬¡ï¼Œå°½ç®¡æˆ‘ä»¬å¯èƒ½æ²¡æœ‰è¿™æ ·åšï¼Œä½†æˆ‘ä»¬è¿˜æ˜¯åœ¨æµªè´¹æ—¶é—´ï¼›åœ¨ç¼–å†™ä»£ç æ—¶ä½¿ç”¨</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¢é‡åˆ†æ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ¨¡å¼</font><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç»“è®º</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æœ€åï¼Œæˆ‘å¸Œæœ›æˆ‘èƒ½å‘æ‚¨ä¼ è¾¾çš„æ˜¯ï¼Œé™æ€åˆ†æä»ªæ˜¯æ‚¨çš„æœ‹å‹ï¼Œè€Œä¸æ˜¯é‚ªæ¶çš„ç›‘ç£è€…ï¼Œä»–åªæ˜¯åœ¨ç­‰æ‚¨çŠ¯é”™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¿˜åº”è¯¥æ³¨æ„çš„æ˜¯ï¼Œé€šè¿‡ä¸€æ¬¡ä½¿ç”¨æˆ–å¾ˆå°‘ä½¿ç”¨åˆ†æä»ªï¼Œæ‚¨å½“ç„¶ä¼šå‘ç°é”™è¯¯ï¼Œå¹¶ä¸”å…¶ä¸­ä¸€äº›é”™è¯¯ç”šè‡³ä¼šå¾ˆå¿«å¾—åˆ°è§£å†³ï¼Œä½†ä¹Ÿæœ‰ä¸€äº›é”™è¯¯éœ€è¦æ‚¨çš„æ³¨æ„ã€‚</font><font style="vertical-align: inherit;">å› æ­¤ï¼Œæ‚¨éœ€è¦ä¸æ–­ä½¿ç”¨é™æ€åˆ†æä»ªã€‚</font><font style="vertical-align: inherit;">ç„¶åï¼Œæ‚¨å°†å‘ç°æ›´å¤šé”™è¯¯ï¼Œå¹¶åœ¨ç¼–å†™ç¨‹åºä»£ç æ—¶çº æ­£äº†è¿™äº›é”™è¯¯ï¼Œå¹¶ä¸”æ‚¨å®Œå…¨äº†è§£è¦æ‰§è¡Œçš„æ“ä½œã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸€ä¸ªç®€å•çš„äº‹å®æ˜¯ï¼Œæ¯ä¸ªäººéƒ½ä¼šçŠ¯é”™ï¼Œè¿™å¾ˆæ­£å¸¸ã€‚</font><font style="vertical-align: inherit;">æˆ‘ä»¬éƒ½ä»é”™è¯¯ä¸­å­¦ä¹ ï¼Œä½†åªèƒ½ä»é‚£äº›èƒ½å¤Ÿæ³¨æ„åˆ°å’Œç†è§£çš„é”™è¯¯ä¸­å­¦ä¹ ã€‚</font><font style="vertical-align: inherit;">å› æ­¤ï¼Œè¯·ä½¿ç”¨ç°ä»£å·¥å…·æœç´¢è¿™äº›é”™è¯¯ï¼Œä¾‹å¦‚-PVS-Studioã€‚</font><font style="vertical-align: inherit;">è°¢è°¢æ‚¨çš„å…³æ³¨ã€‚</font></font><br>
<br>
<p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="></a></p><div style="text-align:center;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/eb2/f9c/3bb/eb2f9c3bb5f32f39239298d36431961c.png"></a></div><p></p><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¦‚æœæ‚¨æƒ³ä¸è®²è‹±è¯­çš„è¯»è€…åˆ†äº«è¿™ç¯‡æ–‡ç« ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹é“¾æ¥ï¼šNikolay Mironovã€‚</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä½¿ç”¨Linuxçš„PVS-Studio Cï¼ƒè¿›è¡Œå•è¡Œä»£ç æˆ–Nethermindçš„æ£€æŸ¥</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN504296/index.html">åœ¨Pythonä¸­ç”Ÿæˆéšæœºåˆ†æ”¯</a></li>
<li><a href="../zh-CN504306/index.html">å¦‚ä½•åœ¨Elbrusä¸Šåˆ¶é€ ç”¨äºå­˜å‚¨Aerodisk Vostokçš„ä¿„ç½—æ–¯ç¡¬ä»¶</a></li>
<li><a href="../zh-CN504310/index.html">æ•°æ®äºŒåˆ†æ³•ï¼šé‡æ–°è€ƒè™‘ä¸æ•°æ®å’ŒæœåŠ¡çš„å…³ç³»</a></li>
<li><a href="../zh-CN504312/index.html">ä¿„è¯­ç¨‹åºå’ŒGPLçš„ç»Ÿä¸€æ³¨å†Œã€‚æˆ‘çš„äº”åˆ†é’±</a></li>
<li><a href="../zh-CN504314/index.html">é€šè¿‡HTTPè¯·æ±‚åœ¨æ²¡æœ‰docker clientçš„æƒ…å†µä¸‹å®ç°docker pullå’Œdocker pushå‘½ä»¤</a></li>
<li><a href="../zh-CN504326/index.html">å¶å¤«æ ¹å°¼Â·è¿ªåŸºä¼Šï¼ˆEvgeny Dikiyï¼‰ï¼šâ€œåœ¨å½“åœ°ï¼Œå—ææ´²å—åˆ°çš„æ±¡æŸ“æœ€å°‘ï¼Œä½†æ˜¯å…¨çƒæ±¡æŸ“åœ¨è¿™é‡Œéå¸¸æ˜æ˜¾â€</a></li>
<li><a href="../zh-CN504328/index.html">åœ¨è«æ–¯ç§‘æœé©¬2019å¹´ä¸¾è¡Œçš„ç”µå­æŠ•ç¥¨è¯¾ç¨‹</a></li>
<li><a href="../zh-CN504332/index.html">æœ‰ç”¨çš„å¸–å­ï¼šæ‰€æœ‰æœ€ç›¸å…³çš„è¯¾ç¨‹ï¼Œå¹¿æ’­å’ŒæŠ€æœ¯æµ</a></li>
<li><a href="../zh-CN504334/index.html">ĞĞ°ÑĞºĞ¾Ğ»ÑŒĞºĞ¾ Ñ…Ğ¾Ñ€Ğ¾ÑˆĞ¾ Ğ²Ñ‹ Ğ·Ğ½Ğ°ĞµÑ‚Ğµ JavaScript?</a></li>
<li><a href="../zh-CN504338/index.html">USB over IP Ğ² Ğ´Ğ¾Ğ¼Ğ°ÑˆĞ½Ğ¸Ñ… ÑƒÑĞ»Ğ¾Ğ²Ğ¸ÑÑ…</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>