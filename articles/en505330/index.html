<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§õüèæ üë®üèø‚Äçüíº üìø How to not create a cryptocurrency from scratch in 3 years üìö üö® üè≥Ô∏è‚Äçüåà</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this article, I will describe how I wrote cryptocurrency alone from scratch, what interesting technologies I learned from there, with what experien...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>How to not create a cryptocurrency from scratch in 3 years</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/505330/"><img src="https://habrastorage.org/webt/p5/vm/p3/p5vmp3vpw1waurtqnk8ccsaqmgc.jpeg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In this article, I will describe how I wrote cryptocurrency alone from scratch, what interesting technologies I learned from there, with what experience I left and what happened afterwards. </font><font style="vertical-align: inherit;">This is not a tutorial, but simply a description of the events, but if I want to, I can write a couple of articles on what and why, although I'm not sure if anyone needs this. </font><font style="vertical-align: inherit;">At the end of the article there will be conclusions that I came to after 3 years of creation.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hello everyone, I haven‚Äôt written anything here for a long time. </font><font style="vertical-align: inherit;">My last post about the prolog bot was more or less successful and the audience liked it. </font><font style="vertical-align: inherit;">Since I like to fit into all kinds of strange undertakings, I wanted to do something.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A bit of history</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So, in the summer of 2017, I started reading about blockchain and cryptocurrencies, and so, how to learn from me is best obtained in practice - I decided to write my own cryptocurrency. </font><font style="vertical-align: inherit;">In fact, the goal was not just to study, it all started with one simple thought - blockchain - the registry, and therefore - the database. </font><font style="vertical-align: inherit;">Why, then, only financial data is stored in the blockchain - why not store arbitrary data?</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
With these thoughts in mind, I began to study the Bitcoin blockchain, and completely repeated it on nodejs with my calculations (and of course bicycles) in 4 months. By October 2017, I had a working draft with a very crooked code, which was hard to maintain, literally in November I wrote another SPV client and added support for light clients to the network, in addition I redid the mining pool (the only part that I did not do from scratch, but just took the finished one and finalized it), created and designed the block explorer, which communicated with the local node via rpc methods. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
III ... there were events that were beyond my control, postponing further development (and possibly launching) for an indefinite period (until the 19th year, as it turned out later). Let me remind you that somewhere in the fall and winter of the 17th cryptocurrency suddenly decided to go to the maximums of its prices.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The fact that I had a working cryptocurrency with a certain idea and infrastructure and I missed the moment when everyone, absolutely all cryptocurrencies showed their maximums and any cryptocurrency could be launched (even some token provided with bricks) - added a little disappointment to mine bright plans, but I did not despair. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
At that moment I could not continue development, but there was time to study the top 10 cryptocurrencies, so I made a telegram channel in which I analyzed the main cryptocurrencies that were in the top 10 at that time from the technical side. By the way, if habrayuzery want - I can "port" these articles here.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This analysis in the future, when I did return to development - they allowed me to improve the model and think in more detail about the architecture of the future cryptocurrency. </font><font style="vertical-align: inherit;">In 2019, I returned to development and started from scratch. </font><font style="vertical-align: inherit;">I thought over the future architecture in more detail, got rid of cross-references in the code, deleted redundant modules, transferred some of the modules to separate npm packages and collected cryptocurrency just recently.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Details</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I must say right away that this is not a project, but just a set of useless code, so I hope that I will not be banned for links to the github and indicating the names. </font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cryptocurrency</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
After the first relatively successful experiment, I became bolder and decided that the next project should be more beautiful in terms of code than the first prototype. </font><font style="vertical-align: inherit;">In addition, I decided to make the system modular, in the form of a framework, in order to be able to connect and disconnect modules if necessary. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In general, writing a cryptocurrency in technical terms is not such a difficult task, in short:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">build a database for blocks and indexing</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">organize a protocol for exchanging messages between nodes</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Define data serialization format and transaction signing algorithm</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">define consensus and set up rules for adding and validating</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rpc server optional</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and then configure the console client and try to run by generating the genesis block and setting up validators</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">after a ton of corrected errors and inaccuracies - you have a working cryptocurrency, congratulations</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
After that, there is the stage of adding functions that are not based on. </font><font style="vertical-align: inherit;">For example, I have this datascript, the basis of the project.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Datascript</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The project that I wrote for 4 months was called orwell and is fork of bitcoin to a greater extent, but it also assumes that each transaction, in addition to financial information, contains additional data in the HEX format, which (if the transaction is valid and fell into the block) is translated into a specialized A VM that decrypts this data and translates it into a regular database. </font><font style="vertical-align: inherit;">I named this VM orwelldb, and the format is datascript, decryption example: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hex:</font></font><br>
<br>
<code>ef01fd4f01190b6578616d706c6564617461fd3f0154fd3b011f000f0fa1067e45f40003f1096f776e65725f6b65798230343233633635653064373364626161386537393435633965663135626338366533643864396638636364323636626366323362623032646336333432386636623239343766336164643731636536333962653739646561333933313237613061336661623136613339306630326537363966633135373561333535333130323461f30a70726976696c6567657301f1008230346231363165656566623739363163366637306137643338666434373764616633333437643231346561663365313639643964316434336232346437323338383665343063643962633563633232393638333635656531663962653635333932303539383630643735656432356136303836653830666462653138336565613364f20b7772697465536372697074fdb815</code> <br>
<br>
<pre><code class="json hljs">[<font></font>
{<font></font>
   <span class="hljs-attr">"dataset"</span>: <span class="hljs-string">"exampledata"</span>,
   <span class="hljs-attr">"operator"</span>: <span class="hljs-string">"create"</span>,
   <span class="hljs-attr">"content"</span>: {
    <span class="hljs-attr">"owner_key"</span>: <span class="hljs-string">"0423c65e0d73dbaa8e7945c9ef15bc86e3d8d9f8ccd266bcf23bb02dc63428f6b2947f3add71ce639be79dea393127a0a3fab16a390f02e769fc1575a35531024a"</span>,
    <span class="hljs-attr">"privileges"</span>: [
<span class="hljs-string">"04b161eeefb7961c6f70a7d38fd477daf3347d214eaf3e169d9d1d43b24d723886e40cd9bc5cc22968365ee1f9be65392059860d75ed25a6086e80fdbe183eea3d"</span><font></font>
    ],<font></font>
    <span class="hljs-attr">"writeScript"</span>: <span class="hljs-number">5560</span><font></font>
   },<font></font>
   <span class="hljs-attr">"canRead"</span>: <span class="hljs-literal">true</span>,
   <span class="hljs-attr">"success"</span>: <span class="hljs-literal">true</span><font></font>
  }<font></font>
]<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I'll tell you a little about the contents. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The datascript contains an array of calls to a specific database and its datasets, in this case, the transaction describes the creation of a new dataset (ie, a table, if we are talking about relational databases), this follows from the contents of the ‚Äúoperator‚Äù field. In addition to create, there can also be ‚Äúwrite‚Äù and ‚Äúsettings‚Äù - adding (or changing) data and updating dataset parameters, respectively. ‚ÄúContent‚Äù is just the data that is written to the dataset. In this case, we create a table, so the content is identical to what is written with operator = settings - table settings. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To describe what exactly is written there, one must turn to the concept of a data script. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I will demonstrate the diagram from 2017 created for these purposes:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/nj/jd/_7/njjd_72nro0czhi3e_4bbhkbrv4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The data script, by analogy with bitcoin and its lock and unlock scripts, contains read and writeScript, the first determines who can read the message, and the second - who can write to a specific dataset. </font><font style="vertical-align: inherit;">Scripts are stack-oriented languages. </font><font style="vertical-align: inherit;">Readscript is written in the message itself and indicates who can read the message. </font><font style="vertical-align: inherit;">This is implemented using encryption. </font><font style="vertical-align: inherit;">When specifying encryption, only one who has the necessary key in the keystore can read, otherwise, anyone who wants it can. </font><font style="vertical-align: inherit;">Messages with the create / settings statement should never be encrypted. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
An example of open readScript (anyone can read it):</font></font><br>
<br>
<pre><code class="plaintext hljs">DATA_HEXJSON + jsonhexbytes <font></font>
 DATA_HEXJSON  = 0x54</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Encrypted:</font></font><br>
<br>
<pre><code class="plaintext hljs">DATA_HEXJSONENCRYPTED + var_str(encrypted data) + PUSHDATA_DBREADPRIVATEKEY + uint8(encryption) + OP_DECRYPT + OP_HASH256 + DATA_HASH + char[32](hash) + OP_EQUAL</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
in raw form: </font></font><br>
<br>
<pre><code class="plaintext hljs">0x53 + var_str + 0x56 + (0x1 or 0x2) + 0x57 + 0x59 + 0x58 + char[32] + 0x87</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Data decryption test with hash verification of decrypted data. </font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If anyone is interested, in more detail I described everything in the documentation for the protocol: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github: datascript docs</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But the jsonhex specified in the code is my implementation of translating json into a binary format. </font><font style="vertical-align: inherit;">It would seem that you could leave the usual json, but I wanted uniformity, so I developed a separate protocol. </font><font style="vertical-align: inherit;">If you want to read about him, here is the documentation: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github: bitowl</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></blockquote><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Writescript is registered in the dataset settings, in the example it is 0x5560. </font><font style="vertical-align: inherit;">In this case, it says:</font></font><br>
<br>
<pre><code class="plaintext hljs">PUSHDATA_DBWRITEPUBLICKEY  OP_CHECKDBPRIVILEGES</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Those. </font><font style="vertical-align: inherit;">send the public key of the sender of the message to the stack - and check the list of privileges for this dataset. </font><font style="vertical-align: inherit;">If this key is in the list of privileges (either the sender of the create message, or owner_key), then he can write. </font><font style="vertical-align: inherit;">In addition, if writescript is empty, it means ALL, i.e. </font><font style="vertical-align: inherit;">anyone can write to this dataset. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For operator = settings, everything looks the same, only the settings inside the content change. </font><font style="vertical-align: inherit;">For write - content contains the actual data.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A bit about blockchain</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But what about the database, you ask? In my case, I made a hack - if the transaction contains a data script content - the first output of this transaction is always zero, and this data script is sent to it, i.e. every address on the network is a database. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This model allows you to store data inside the blockchain itself, which gives some flexibility, but at the same time adds storage problems, because the bitcoin blockchain has already grown to almost 500 gigabytes, and this is only on financial data. If you add here also arbitrary ones - it will turn out redundantly. Therefore, storage was limited to all sorts of keys and connections for authorization. And by the way, all the rules are validated at the VM level during creation, but you need to synchronize it with the blockchain.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For example, I made a couple of system datasets in the system database: domain, masternode, token, dapp, thereby you can create domains for each address / database and operate not with a set of obscure characters, but with a convenient nickname (for example), in addition, domains, By design, they can be used in dapps (which I will write about later). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As for the dataset token and masternode, the first one stores user tokens that each participant can create, and masternode stores a list of public keys of participants who are network validators. </font><font style="vertical-align: inherit;">A small digression is needed here.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Consensus </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The basis of the blockchain is consensus, i.e. an agreement between nodes, a certain set of rules that operate on the network and all of them comply in order for the network to be operational. For example, the Bitcoin consensus is Proof of Work, or mining, which, I am sure, have been written about here many times. The essence of consensus is to check the new blocks published by network participants. In Bitcoin, network participants randomly publish blocks - whoever finds the first will receive a reward. He initially did the same on his network, but later decided that it was not rational, since one bitcoin miner would be enough to disrupt my network and apply a 51% attack. So after some time I implemented the consensus module </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">consensusjs</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, which described several different consensus: centralized, PoW, PoS (PoW + PoS), static dpow, static dos, dynamic dpos. At the last I stopped. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dynamic delegate pos (ddpos) assumes that at the very beginning if there is a certain number of delegates (validators) whose list is sorted by rating and number of coins in use, a round is created during which each validator from the list publishes a block in strict order. When the round ends, a new one is calculated, and each member of the network has the opportunity to independently calculate the current round and the next round based on open data from the network.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Actually, this requires the masternode table, in it we store all those who have expressed a desire to be a validator, and their current rating. </font><font style="vertical-align: inherit;">At the beginning of each round, we sort this table, and create a round with the resulting N validators. </font><font style="vertical-align: inherit;">If the number of validators is less than N, we create a round with standard network validators described in the config file (their public keys).</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">democracy</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The concept of voting within the network was invented and implemented in the old version of the cryptocurrency, it allows you to receive averaged data from the network from all voted nodes. </font><font style="vertical-align: inherit;">In the new version, I implemented a separate module, but did not manage to integrate it. </font><font style="vertical-align: inherit;">It was assumed that with the help of democracy it would be possible to change the network parameters by fair voting, as well as reduce the size of the stored blockchain by shifting the block genesis (the genesis block becomes larger by placing old UTXO and data in it), but it would allow synchronizing not a million blocks , but only the last 1000, for example. </font><font style="vertical-align: inherit;">In addition, voting could manage forks and changes in the network, as well as solve organizational issues related to the network. </font><font style="vertical-align: inherit;">True, I did not manage to implement this module, as I wrote above, but the idea remained.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dapps</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The concept of dapps was invented a little later after the peak of bitcoin in the early 18th. Then there was the idea to make it through registering the application (public key) in the blockchain, registering workers (public keys) in the system tables, communication of the workers with the application, and the workers would already work in their own isolated blockchain. There is still a viewer in this concept, i.e. part of the application with an interface for communication with the client, both the browser and a separate application can act as a viewer. Later, I refused this idea, since it took me a long time to implement and made it a little easier.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
You can also register dApp in the blockchain, associate it with a domain, and a participant, knowing the domain that is associated with the public key of the application, can interact with this application. </font><font style="vertical-align: inherit;">When accessing the domain, the transparent dns server in the network client reads the user‚Äôs request, encrypts it using ecdh encryption, so that only the participant with the public key of the application can read the content and sends it to the network. </font><font style="vertical-align: inherit;">The application receives this request, sends it to the endpoint specified in the config for this application, and returns the result to the network, also encrypted.</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> By the way, a funny fact: since the nodes communicate with each other using ecdh encryption and dApp sends and receives data encrypted - at the time of transfers between the nodes, part of the message is encrypted twice.</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
With this method, an encrypted network is obtained, where each participant can create sites (and not only), and it becomes easier to control traffic, since each participant contains his own public key, with which he "browses the site", ip addresses are cut from requests and answers making the network anonymous. </font><font style="vertical-align: inherit;">Thus, initially there is authorization, and it is also possible to see the user's balance, the balance of tokens (associated with the site, for example) and complete the payment process without leaving the site and the network. </font><font style="vertical-align: inherit;">The only drawback at the time of the tests was performance - in this form, sites load 10 times slower, as they are sent over a decentralized network. </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The mechanism described above is just a concept, but already half implemented. </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Under the spoiler, I pushed a link to the code that implements this (github):</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Raw dapp code</font></font></b>
                        <div class="spoiler_text"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow">https://github.com/gettocat/friday/blob/master/node/modules/dapps/index.js</a><br>
</div>
                    </div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Where would i start now</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 And in the end I want to write a couple of tricks that I would apply if I had to start all over again with current knowledge. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Modular architecture - definitely only to ensure that each module is minimally connected to all the others and can be replaced in case of, for example, a change in consensus. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Isolation of modules is essentially a continuation of the previous paragraph, specifically about functional modules, and not logical ones. </font><font style="vertical-align: inherit;">For example - in my code, consensus is implemented by a separate consensusjs module, which allows you to test it up and down before implementing it in a working draft, the same applies to so-called primitives (transaction format, blocks and their serialization / deserialization), thereby you can test the functionality of a specific module up to embedding it in the main code.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tests - covering each module with tests is the basis of well-being during the launch process and normal sleep at night (tested on oneself). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Versions in everything - since cryptocurrencies are a closed system - you need to think in advance about what will happen next - how you will support it. </font><font style="vertical-align: inherit;">It is necessary to think over a model for updating functionality from version to version for all participants, in order not to suffer those who have not yet updated, since in the opposite case an unintended fork of the main network may occur. </font><font style="vertical-align: inherit;">In my consensusjs module, the functionality for determining forks and valid block versions was implemented, but I haven‚Äôt added it to the main code yet.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Summary</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As I promised, at the end of the article I will summarize some of the results. This post can be considered a point in history with a homemade cryptocurrency. On the one hand, I realized that this was not for production, more sensitive code control, test coverage and other things from production projects, as well as more than one programmer, were needed. And finance, finance, finance. Nowhere without it. I don‚Äôt have all of this, and I didn‚Äôt have it, so I was just interested to try, study the technology and see if it was worth it or not. It was worth it. I can say that after the work done, I began to better understand many aspects of programming, technology (I‚Äôve really advanced in working with byte sequences, for example) and definitely studied the blockchain and technologies based on it.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For example, I know for sure that Ethereum uses a similar concept with transaction data and a virtual machine that processes this data, only Ethereum uses data as functions (if in a simple way) and accesses to them (apart from creating contracts). I know for sure that the internal scripts of bitcoin (the stack language) are a pretty strong thing, Satoshi implied the creation of smart contracts based on them long before the concept of ‚Äúsmart contract‚Äù appeared, but the use of these scripts is curtailed in bitcoin, since possible previously unknown bugs.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If we talk about the technologies that I liked after my 3-year research - this is definitely a consensus, i.e. agreement between network participants and general rules for message validation. The bloom filter is a rather interesting thing, which allows us to send a filter to another participant by which he filters the data being sent without revealing details. Thereby - you get data without revealing what kind of data you need. Merkle tree as a data storage structure, the basis of light nodes in bitcoin and state trees (there are three of them) ethereum. PoW is such a simple, but at the same time such an elegant idea, "everyone is looking for a number less than the total average complexity over the last N blocks, calculated by the usual ratio."</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As for the cons, there are plenty of them too. The first of these is labor costs. Over time, I burned out to this idea, even though it captured me for about 3 years. For example, now the cryptocurrency seems to be even launched, and it would seem that it is already holding nothing to launch it, but after 5 thousand blocks a strange bug has formed with the fact that for some reason the block counting starts from scratch (the indexes seem to be crashing somehow) , to search for which there is no time, no desire.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maybe someday I will return to this idea or similar to it (or based on it). </font><font style="vertical-align: inherit;">If you wish, you can study the code or fork the friday project on my github, all code is under the MIT license. </font><font style="vertical-align: inherit;">Definitely definitely will not stop working in this direction, because decentralized technologies are very interesting, albeit quite laborious. </font><font style="vertical-align: inherit;">I am waiting in the PM if there are any questions / suggestions or clarifications. </font><font style="vertical-align: inherit;">I will help to figure it out if you suddenly need to. </font><font style="vertical-align: inherit;">Below I will organize a survey - is it worth anything else to write on this topic here, although the rating itself will put everything in place.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en505302/index.html">10 circuit design tips</a></li>
<li><a href="../en505306/index.html">From games to e-commerce projects. Changing the two-year program of Technopark</a></li>
<li><a href="../en505310/index.html">What distinguishes technologically advanced companies and how techlide can help your team grow</a></li>
<li><a href="../en505314/index.html">Linux time synchronization: NTP, Chrony, and systemd-timesyncd</a></li>
<li><a href="../en505322/index.html">Dispatcher of the future: how will his role in the service company change?</a></li>
<li><a href="../en505336/index.html">How to: Manet or Monet? Neural network responds</a></li>
<li><a href="../en505340/index.html">Walmart employees try to prove that anti-theft AI doesn't work</a></li>
<li><a href="../en505342/index.html">Dependency injection and the dependency inversion principle are NOT ONE AND SAME</a></li>
<li><a href="../en505362/index.html">Vite - lead development without bundles on Vue</a></li>
<li><a href="../en505378/index.html">All this marketing: how to work with contact points in an IT company?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>