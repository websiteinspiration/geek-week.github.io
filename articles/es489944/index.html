<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üå∫ üë®‚Äçüëß‚Äçüëß üì∏ Integraci√≥n de Python de Gitlab, Jira y Confluence para automatizar las versiones de lanzamiento üíè üç£ üíï</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recientemente, en un stand-up, un colega hizo una propuesta racional : automatizar la compilaci√≥n del lanzamiento, tomando como base desarrollos listo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Integraci√≥n de Python de Gitlab, Jira y Confluence para automatizar las versiones de lanzamiento</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/489944/"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Recientemente, en un stand-up, un colega hizo una propuesta racional</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : automatizar la compilaci√≥n del lanzamiento, tomando como base desarrollos listos para la interacci√≥n con Jira escritos en Python. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El proceso de implementaci√≥n es el siguiente: cuando se acumula un n√∫mero suficiente de tareas que se han probado, liberan un candidato candidato (RC) en cada proyecto afectado por las tareas, luego las tareas se prueban como parte de RC. Despu√©s de eso, el RC se vierte en el servidor de preparaci√≥n, donde, muy cerca del entorno de combate, todav√≠a se prueba y se realiza una regresi√≥n completa. Y luego, despu√©s de las acciones de implementaci√≥n necesarias, la nueva versi√≥n se vierte en el maestro.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hasta hace poco, todo el proceso de ensamblaje lo realizaba manualmente uno de los desarrolladores. Lo que me llev√≥ una hora, dos o m√°s y fue, me parece, una ocupaci√≥n no muy interesante. Ahora, cuando casi todo est√° listo, el lanzamiento de 20 tareas, que afectan a 5 proyectos, se llevar√° a menos de un minuto. Queda, por supuesto, la resoluci√≥n de conflictos, el lanzamiento de pruebas perdidas, etc., pero incluso teniendo en cuenta esto, el tiempo de los desarrolladores y probadores, que se ven obligados a esperar hasta que alguien sea el primero en liberarse y crear RC, se ahorra mucho. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En general, comenc√© la tarea, y result√≥ ser muy interesante y fascinante. ¬øY qu√© m√°s se necesita para el placer del trabajo, si no proyectos emocionantes?</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Estudi√© legado: result√≥ que utilizaba la API de Jira directamente, y fue escrito, me pareci√≥, no √≥ptimo. Por ejemplo, la lista de tareas de lanzamiento se obtuvo de la siguiente manera: todos los lanzamientos existentes se descargaron de Jira, y luego cada uno de ellos por nombre se compar√≥ con el nombre de nuestro lanzamiento hasta que se encontr√≥ el deseado:</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_release_info</span>(<span class="hljs-params">config</span>):</span><font></font>
<font></font>
   <span class="hljs-keyword">try</span>:<font></font>
<font></font>
       release_input = sys.argv[<span class="hljs-number">1</span>]<font></font>
<font></font>
   <span class="hljs-keyword">except</span> IndexError:<font></font>
<font></font>
       <span class="hljs-keyword">raise</span> Exception(<span class="hljs-string">'Enter release name'</span>)<font></font>
<font></font>
   releases_json = requests.get(url=RELEASES_LIST_URL, auth=(login, jira_password).json()<font></font>
<font></font>
   <span class="hljs-keyword">for</span> release <span class="hljs-keyword">in</span> releases_json:<font></font>
<font></font>
       <span class="hljs-keyword">if</span> release[<span class="hljs-string">'name'</span>] == release_input:<font></font>
<font></font>
                ...</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En general, la interacci√≥n directa con la API conduce a un c√≥digo poco legible. Y no quer√≠a inventar una bicicleta. Mi primera b√∫squeda en Github me llev√≥ a la Biblioteca JIRA Python, una biblioteca bastante simple y poderosa. Inicialmente plane√© crear solicitudes de Marge utilizando la biblioteca GitPython, tambi√©n encontrada en Github. Pero un estudio posterior del problema llev√≥ inmediatamente a la idea de encontrar algo relacionado no con git, sino de inmediato con Gitlab. Como resultado, me decid√≠ por la soluci√≥n m√°s famosa: Python GitLab. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comenc√© obteniendo una lista de tareas en el estado apropiado para el lanzamiento</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Decid√≠ no alterar fuertemente la soluci√≥n anterior, sino hacerla m√°s efectiva solicitando de inmediato a la API la tarea de la versi√≥n deseada:</font></font><br>
<br>
<pre><code class="python hljs">fix_issues = jira.search_issues(<span class="hljs-string">f'fixVersion=<span class="hljs-subst">{release_input}</span>'</span>)<font></font>
<font></font>
fix_id = jira.issue(fix_issues.iterable[<span class="hljs-number">0</span>]).fields.fixVersions[<span class="hljs-number">0</span>].id
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aunque lo m√°s probable es que ocurra lo mismo debajo del cap√≥, sin embargo, result√≥ ser m√°s hermoso y √≥ptimo, pero a√∫n no muy legible. </font><font style="vertical-align: inherit;">Adem√°s, de las tareas recibidas, es necesario recopilar enlaces para fusionar las solicitudes. </font><font style="vertical-align: inherit;">Decid√≠ almacenar las solicitudes de fusi√≥n encontradas en namedtuple, son excelentes para esto:</font></font><br>
<br>
<pre><code class="python hljs">Merge_request = namedtuple(<span class="hljs-string">'Merge_request'</span>, [<span class="hljs-string">'url'</span>, <span class="hljs-string">'iid'</span>, <span class="hljs-string">'project'</span>, <span class="hljs-string">'issue'</span>])</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Las solicitudes de fusi√≥n tambi√©n se recibieron utilizando la API de Jira:</font></font><br>
<br>
<pre><code class="python hljs">projects = set()<font></font>
<font></font>
links_json = requests.get(url=REMOTE_LINK.format(issue_number),<font></font>
<font></font>
                            auth=login,jira_password).json()<font></font>
<font></font>
<span class="hljs-keyword">for</span> link <span class="hljs-keyword">in</span> links_json:<font></font>
<font></font>
   url_parts = link[<span class="hljs-string">'object'</span>][<span class="hljs-string">'url'</span>].split(<span class="hljs-string">'/'</span>)<font></font>
<font></font>
   project = <span class="hljs-string">f'<span class="hljs-subst">{url_parts[<span class="hljs-number">4</span>]}</span>'</span><font></font>
<font></font>
   iid = url_parts[<span class="hljs-number">6</span>]<font></font>
<font></font>
   projects.add(project)   </code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Despu√©s de eso, decid√≠ d√≥nde podr√≠a usar las bibliotecas encontradas</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Entonces, quiz√°s, refactorizar√© estas piezas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A continuaci√≥n, debe verificar, de repente, las ramas RC correctas ya existen, si ya hubo intentos de compilaci√≥n, entonces deben eliminarse y crearse otras nuevas. </font><font style="vertical-align: inherit;">Ya hice esto usando la biblioteca Python GitLab:</font></font><br>
<br>
<pre><code class="python hljs">gl = gitlab.Gitlab(<span class="hljs-string">'https://gitlab...ru/'</span>, private_token=GITLAB_PRIVATE_TOKEN)<font></font>
<font></font>
pr = gl.projects.get(project)<font></font>
<font></font>
<span class="hljs-keyword">try</span>:<font></font>
<font></font>
   rc = pr.branches.get(<span class="hljs-string">f'<span class="hljs-subst">{RC_name}</span>'</span>)<font></font>
<font></font>
   rc.delete()<font></font>
<font></font>
   pr.branches.create({<span class="hljs-string">'branch'</span>: <span class="hljs-string">f'<span class="hljs-subst">{RC_name}</span>'</span>, <span class="hljs-string">'ref'</span>: <span class="hljs-string">'master'</span>})<font></font>
<font></font>
<span class="hljs-keyword">except</span> gitlab.GitlabError:<font></font>
<font></font>
   pr.branches.create({<span class="hljs-string">'branch'</span>: <span class="hljs-string">f'<span class="hljs-subst">{RC_name}</span>'</span>, <span class="hljs-string">'ref'</span>: <span class="hljs-string">'master'</span>})</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Despu√©s de eso, puede comenzar a llenar la tabla en la tarea de ensamblaje de Jira</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . La informaci√≥n en la tabla est√° contenida en las siguientes columnas: No., Tarea, Prioridad, Solicitudes de fusi√≥n de la tarea en RC, Estado de la solicitud de fusi√≥n (si las pruebas aprobadas en Gitlab, si hay conflictos o no, se vierte / no se vierte). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En este paso, me encontr√© con un defecto desagradable de Gitlab: si los cambios se congelaron previamente en la rama de destino de la solicitud de fusi√≥n, entonces la API de Gitlab, al solicitar el estado de la solicitud de fusi√≥n, da una respuesta sobre la presencia de conflictos. En principio, esto se puede entender: si no hay nada que verter, entonces no funcionar√°, pero ¬øpor qu√© decir que hay un conflicto en este lugar? Los foros de Gitlab han estado preguntando a la gente durante varios a√±os, pero a√∫n no hay respuestas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En mi caso, esto lleva a un estado de conflicto falso y a verificar manualmente la solicitud de fusi√≥n. Todav√≠a no se me ocurri√≥ nada.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La l√≥gica al crear solicitudes de fusi√≥n es la siguiente: si no se pasan las pruebas, o si hay un conflicto, se crean solicitudes de fusi√≥n, pero no fluyen hacia RC, los estados correspondientes se colocan en la tabla. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para verificar la ejecuci√≥n de las pruebas, buscamos una lista de tuber√≠as adecuadas. </font><font style="vertical-align: inherit;">Gitlab los emite ordenados por fecha en orden descendente, tal como lo necesitamos. </font><font style="vertical-align: inherit;">Tomamos el primero: ser√° el que se necesita:</font></font><br>
<br>
<pre><code class="python hljs">pipelines = project.pipelines.list(ref=<span class="hljs-string">f'<span class="hljs-subst">{issue}</span>'</span>)<font></font>
<font></font>
<span class="hljs-keyword">if</span> pipelines:<font></font>
<font></font>
   pipelines = pipelines[<span class="hljs-number">0</span>]<font></font>
<font></font>
   <span class="hljs-keyword">if</span> pipelines.attributes[<span class="hljs-string">'status'</span>] != <span class="hljs-string">'success'</span>:<font></font>
<font></font>
       status = <span class="hljs-string">'(x)   !, '</span></code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Luego cree las solicitudes de fusi√≥n ellos mismos</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Verificamos los abiertos, en caso de que este no sea el primer intento de compilaci√≥n. </font><font style="vertical-align: inherit;">En ausencia de la solicitud de fusi√≥n requerida, cree esto:</font></font><br>
<br>
<pre><code class="python hljs">mr = project.mergerequests.list(<font></font>
<font></font>
 state=<span class="hljs-string">'opened'</span>,<font></font>
<font></font>
source_branch=source_branch,         target_branch=target_branch)<font></font>
<font></font>
<span class="hljs-keyword">if</span> mr:<font></font>
<font></font>
   mr = mr[<span class="hljs-number">0</span>]<font></font>
<font></font>
<span class="hljs-keyword">else</span>:<font></font>
<font></font>
   mr = project.mergerequests.create(<font></font>
<font></font>
{<span class="hljs-string">'source_branch'</span>: source_branch,<font></font>
<font></font>
           <span class="hljs-string">'target_branch'</span>: target_branch,<font></font>
<font></font>
           <span class="hljs-string">'title'</span>: <span class="hljs-string">f"<span class="hljs-subst">{(MR.issue).replace(<span class="hljs-string">'-'</span>, <span class="hljs-string">'_'</span>)}</span> -&gt; <span class="hljs-subst">{RC_name}</span>"</span>,<font></font>
<font></font>
           <span class="hljs-string">'target_project_id'</span>: PROJECTS_NAMES[MR.project],})<font></font>
<font></font>
status = mr.attributes[<span class="hljs-string">'merge_status'</span>]<font></font>
<font></font>
url = mr.attributes[<span class="hljs-string">'web_url'</span>]<font></font>
<font></font>
<span class="hljs-keyword">return</span> status, url, mr
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MR.issue.replace ('-', '_'): cambie el nombre de la tarea para deshacerse de los comentarios poco informativos de Gitlaba sobre la tarea en Jira. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A continuaci√≥n, observamos el estado de la solicitud de fusi√≥n recibida</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : si no hay conflicto, lo vertimos en RC. Si hay un conflicto, anote los estados apropiados y deje la verificaci√≥n manual. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adem√°s, por analog√≠a, creamos solicitudes de fusi√≥n de RC a Staging y de Staging a Master para todos los proyectos. Se verter√°n despu√©s de verificar toda la versi√≥n de lanzamiento en las ramas RC. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se agregaron dos campos a la plantilla de tareas de Jira: para acciones previas y posteriores a la publicaci√≥n. Para todas las tareas involucradas, el algoritmo recopila una lista de tales acciones y entra en la tarea de ensamblaje para no olvidar nada. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Y finalmente, el resultado en Jira es la creaci√≥n de una tarea de ensamblaje</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="python hljs">existing_issue = jira.search_issues(<font></font>
<font></font>
<span class="hljs-string">f'project=PROJ AND summary ~ " <span class="hljs-subst">{release_name}</span>"'</span>)<font></font>
<font></font>
<span class="hljs-keyword">if</span> existing_issue:<font></font>
<font></font>
   existing_issue = existing_issue[<span class="hljs-number">0</span>]<font></font>
<font></font>
   existing_issue.update(fields={<font></font>
<font></font>
       <span class="hljs-string">'description'</span>: message,<font></font>
<font></font>
       <span class="hljs-string">'customfield_xxx'</span>: message_before_deploy,<font></font>
<font></font>
       <span class="hljs-string">'customfield_yyy'</span>: message_post_deploy,})<font></font>
<font></font>
<span class="hljs-keyword">else</span>:<font></font>
<font></font>
   issue_dict = {<font></font>
<font></font>
       <span class="hljs-string">"fixVersions"</span>: [{<span class="hljs-string">"name"</span>: release_name,}],<font></font>
<font></font>
       <span class="hljs-string">'project'</span>: {<span class="hljs-string">'key'</span>: <span class="hljs-string">'PROJ'</span>},<font></font>
<font></font>
       <span class="hljs-string">'summary'</span>: <span class="hljs-string">f" <span class="hljs-subst">{release_name}</span>"</span>,<font></font>
<font></font>
       <span class="hljs-string">'description'</span>: message,<font></font>
<font></font>
       <span class="hljs-string">'issuetype'</span>: {<span class="hljs-string">'name'</span>: <span class="hljs-string">'RC'</span>},  <span class="hljs-comment">#      </span><font></font>
<font></font>
       <span class="hljs-string">'customfield_xxx'</span>: message_before_deploy,<font></font>
<font></font>
       <span class="hljs-string">'customfield_yyy'</span>: message_post_deploy,}<font></font>
<font></font>
   new_issue = jira.create_issue(fields=issue_dict)</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Otros pensamientos son los siguientes</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ejecutar un script en Gitlab con un enlace web de Jira. Por ejemplo, puede hacer un webhook para crear una tarea de ensamblaje (crear un tipo especial de tarea para ella) o crear una tarea con la palabra "Ensamblaje" en el t√≠tulo. Y Gitlab para este gancho ejecutar√° un script bash que inicia todo el proceso o generar√° una imagen de Docker con Python y ejecutar√° un script en √©l. Aunque la segunda opci√≥n ya es demasiado complicada. S√≠, y necesito cuentas t√©cnicas en Jira y Gitlab. En general, a√∫n no hay una decisi√≥n final. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Despu√©s de crear ramas RC, tambi√©n puede implementar un banco de pruebas en las ramas necesarias y ejecutar pruebas de regresi√≥n. Jenkins puede manejar esto. Pero esto tambi√©n est√° en los planes por ahora.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todo esto fue en aras de acelerar el trabajo de los probadores y liberar a los desarrolladores del trabajo de rutina. Sin embargo, el sentido econ√≥mico aqu√≠ tambi√©n es bastante espec√≠fico: tome un desarrollador promedio (en el vac√≠o) con un salario hipot√©tico de 150,000 rublos por 8 horas de tiempo de trabajo por d√≠a. Durante dos a√±os, tuvimos alrededor de 700 lanzamientos, esto es aproximadamente el lanzamiento por d√≠a. Un poco m√°s, algo menos, pero creo que en promedio, al menos una hora del tiempo del desarrollador para construir el lanzamiento se hab√≠a ido. Es decir, la automatizaci√≥n de este proceso le ahorra a la empresa un m√≠nimo de 150,000 / 8 = 18,750 rublos por mes.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En el camino, hice un gui√≥n separado para m√≠, mostrando estad√≠sticas sobre el pr√≥ximo lanzamiento: cu√°ntas tareas, qu√© proyectos se ven afectados, etc. </font><font style="vertical-align: inherit;">Dado que si no tengo estado de desarrollador en ninguno de los proyectos en Gitlab, habr√° una denegaci√≥n de acceso al crear solicitudes de fusi√≥n. </font><font style="vertical-align: inherit;">Adem√°s, es conveniente saber de antemano acerca de las acciones de implementaci√≥n o detectar una tarea que cay√≥ en esta versi√≥n por error. </font><font style="vertical-align: inherit;">La distribuci√≥n de las notificaciones de lanzamiento se resolvi√≥ utilizando los m√≥dulos SMTP y de correo electr√≥nico. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Estaba satisfecho con la soluci√≥n a este problema: siempre es interesante aprender algo nuevo y ponerlo en pr√°ctica. </font><font style="vertical-align: inherit;">Ser√° bueno si esta experiencia es √∫til para alguien.</font></font><cut></cut></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es489932/index.html">Teatro: construcci√≥n y demolici√≥n</a></li>
<li><a href="../es489936/index.html">Obtener sesiones de meterpreter dentro de una red NAT usando m√°quinas Chrome y Pivot</a></li>
<li><a href="../es489938/index.html">Motores de hielo y llamas de los sat√©lites</a></li>
<li><a href="../es489940/index.html">Descripci√≥n general y configuraci√≥n de contenedores Kata</a></li>
<li><a href="../es489942/index.html">Problemas para preparar una reserva deportiva en deportes de computadora (informe)</a></li>
<li><a href="../es489946/index.html">La cultura traum√°tica del crujido en el estudio de desarrollo de la serie Mortal Kombat</a></li>
<li><a href="../es489948/index.html">Noticias del mundo de OpenStreetMap No. 499 (04.02.2020-10.02.2020)</a></li>
<li><a href="../es489952/index.html">Fondos de escritorio en vivo y motivadores</a></li>
<li><a href="../es489954/index.html">Seagate SkyHawk AI: enorme y vengativo</a></li>
<li><a href="../es489956/index.html">Animamos RecyclerView f√°cilmente sin cambiar a ViewPager2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>