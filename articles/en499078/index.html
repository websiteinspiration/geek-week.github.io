<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚úãüèæ üë©üèæ‚Äçüíª üññüèº The Clean Architecture on TypeScript and React. Part 1: The Basics üôéüèº üèæ ü§±üèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good afternoon, dear readers. In this article, we will talk about software architecture in web development. For quite some time, my colleagues and I h...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>The Clean Architecture on TypeScript and React. Part 1: The Basics</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/499078/"><img src="https://habrastorage.org/webt/q7/ls/cw/q7lscw7mpm4ex_ivtew-qlanrkw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Good afternoon, dear readers. In this article, we will talk about software architecture in web development. For quite some time, my colleagues and I have used a variation of </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The Clean Architecture</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> to build architecture in their Frontend projects. Initially, I adopted it with the transition to TypeScript, because I did not find other suitable generally accepted architectural approaches in the React development world (and I came from Android development, where a long time ago, before Kotlin, I made a fuss about </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">an article from Fernando Cejas</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , to which I still sometimes refer).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In this article, I want to tell you about our experience with The Clean Architecture in React applications using TypeScript. </font><font style="vertical-align: inherit;">Why am I telling this? </font><font style="vertical-align: inherit;">- Sometimes I have to clarify and justify its use to developers who are not yet familiar with this approach. </font><font style="vertical-align: inherit;">Therefore, here I will make a detailed analysis with visual explanations to which I can refer in the future.</font></font><br>
<a name="habracut"></a><br>
<u><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Content</font></font></b></u><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Introduction</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Theoretical part</font></font><ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What is architecture for?</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Original definition of The Clean Architecture</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The Clean Architecture for Frontend</font></font></li>
</ul></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Practical part</font></font><br>
 <ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Description of web authorization application</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Source Code Structure</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> UML project diagram</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Code parsing</font></font></li>
</ul></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusion</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Resources and Sources</font></font></li>
</ol><br>
<b><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. Introduction</font></font></u></b><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Architecture is, first of all, a global thing.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Its understanding is not necessary in the context of a specific programming language. You need an understanding of key ideas in general, so that means whereby the benefits of using one or another architecture are achieved. The principle is the same as with design patterns or SOLID - they were not invented for a specific language, but for entire programming methodologies (such as OOP).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Understanding architecture is easiest when you see the whole picture. Therefore, in this article I will not only talk about how it should be ‚Äúin theory‚Äù - I will also give a concrete example of the project. First, we‚Äôll deal with the theoretical part of using The Clean Architecture in the frontend, and then consider a web application with a UML diagram and description of each class.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Important clarification: The Clean Architecture does not establish strict rules for organizing applications, it only gives recommendations. Each platform and language will have its own nuances. This article presents the approach that I have used with my colleagues and am using now - it is not a panacea. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I would also like to note that the use of such architectural approaches may be redundant for small projects.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> The primary goal of any architecture is to make code understandable, supported, and testable. But if your application is faster to write in JS without architectures, testing and other things - this is quite normal. </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Do not overengineering where it is not needed.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Remember that the main strength of architecture / testing is acquired in large projects with several developers, where you need to understand and change other people's code.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UPD_0</font></font></b>
                        <div class="spoiler_text"><b>UPD_0:</b>            .      ,     ‚Äî <b>  ,   ,     .</b>          - ,      .      ,       ,      .<br>
<br>
   ,  ,    :<br>
<br>
<blockquote>  ‚Äî   ( )   .<br>
<br>
‚Äî  , ¬´Computer Programming as an Art¬ª (1974)<br>
</blockquote><br>
<br>
 , ¬´ ‚Äî  ¬ª.     - ,       (  ,      ). <br>
</div>
                    </div><br>
<br>
<u><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. Theoretical part </font></font></b></u><br>
<br>
<u><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.1. What is architecture for?</font></font></b></u><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Answer: architecture is necessary to save time in the development process, to maintain testability and extensibility of the system over a long development period.</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
In more detail about what happens if you don‚Äôt lay the architecture for large applications, you can read, for example, in the book of The Clean Architecture by Bob Martin. For a brief explanation, I will give the following chart from this book:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/7n/t2/pr/7nt2praknbscvpol8lrcqetew7c.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
On this chart we see that with each new version (let's say they are released at regular intervals), an ever smaller number of lines are added to the system, as well as an increase in the cost of one line. This is due to the complexity of the system, and making changes begins to require an unreasonably large amount of effort.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In The Clean Architecture, this graph is an example of poor architecture. </font><font style="vertical-align: inherit;">Such an approach will sooner or later lead to the fact that the cost of expanding the system will cost more than the benefits of the system itself.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Once again about the ratio of development time</font></font></b>
                        <div class="spoiler_text">           (   ):<br>
<blockquote>¬´  90    10  ,   .   10     90 ¬ª<br>
<br>
‚Äî  , Bell Labs</blockquote><br>
:   ,      ,       .<br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And now my ‚Äúideal‚Äù option, which we (developers, PMs, customers) would like to see in our projects: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/46/h9/_s/46h9_st273xssd8efxtwezq5uhw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The graph clearly shows that the growth rate of the number of lines does not change depending on the version. </font><font style="vertical-align: inherit;">The cost of a line of code (depending on the version) increases, but not significantly considering that we are talking about millions of lines. </font><font style="vertical-align: inherit;">Unfortunately, this option is unlikely if we are talking about a large Enterprise system, as the product expands, the complexity of the system increases, developers change, so development costs will inevitably increase.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
However, I can please you too - we are talking about Frontend applications! Let's face it - as a rule, such applications do not grow to millions of lines, otherwise browsers would corny download such applications. In extreme cases, they are divided into different products, and the main logic lies on the backend side. Therefore, to some extent, we can strive for the above trend of increasing the cost of code (with varying degrees of success, depending on the size of the application). If our project is even 50% cheaper to maintain than it could without a good architecture - this is already saving developers time and customer funds. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Having initially built a good and clear architecture, as a result we get the following </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">advantages</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<ul>
<li><b>  </b> (,     );</li>
<li><b>  </b> (,       -  ‚Äú  ‚Äù);</li>
<li><b>     </b>.</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I think the question ‚Äúwhy is this necessary ?!‚Äù I answered. Next, we move on to the technical part of the question. </font></font><br>
<br>
<u><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.2. The original definition</font></font></b></u><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
I will not go into a detailed description of The Clean Architecture, since this topic is disclosed in many articles, but only briefly state the essence of the issue. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In the original article of Bob Martin in 2012, the following diagram is shown: The </font></font><br>
<br>
<img src="https://habrastorage.org/webt/58/se/fx/58sefxx6ubqmvllmbzzwsiw_yz0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
key idea of ‚Äã‚Äãthis diagram is that the application is divided into layers (there can be any number of layers). </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The inner layers do not know about the outer ones, the dependencies are turned to the center</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . The farther the layer from the center, the more it knows about the ‚Äúnon-weighted‚Äù details of the application (for example, what kind of framework is used and how many buttons are on the screen).</font></font><br>
<br>
<ul>
<li><b>Entities.</b>      Entities ().    -       . Entities   - . ,   Cart () ‚Äî      ,    ..    ,  React,  ,  ‚Äî    .<br>
<br>
      ,        React\Angular\Express\Nest.js\DI  .. , ,  ,       Web-  React‚Äôe ‚Äî      NodeJS  .</li>
<li><b>Use cases.</b>      Use Cases (  ‚Äî  ,   ‚Äî Interactors).   ,        . ,      ,       ‚Äî   ,            (. ).</li>
<li><b>Gateways, Presenters, etc.</b>    (Gateways = Repositories, Presenters = View Models) ‚Äî  ,      -      . ,   ,        API  ,  View Model      React-   -.<br>
<br>
:    Use Cases  Repositories,  ,     ,      frontend         API.</li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">External interfaces. </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Platform dependent layer. </font><font style="vertical-align: inherit;">Here are direct calls to the API, React components, etc. </font><font style="vertical-align: inherit;">This layer is the most difficult to test and abstract (a button in React'e - there is a React'e button).</font></font></li>
</ul><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.3. </font><font style="vertical-align: inherit;">Definition in the context of frontend</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Now let's move on to our frontend area. </font><font style="vertical-align: inherit;">In the context of Frontend, the diagram above can be represented like this:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gp/5l/_e/gp5l_eksd3uomyw5w82-gigeozo.png"><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Entities. </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Business entities are the same as in the original architecture. </font><font style="vertical-align: inherit;">Note that entities can store state and are often used for this purpose. </font><font style="vertical-align: inherit;">For example, the entity ‚Äúbasket‚Äù can store the orders of the current session in order to provide methods for working with them (obtaining the total price, total quantity of goods, etc.).</font></font></li>
<li><b>Repository interfaces.</b>     API, ,   . .   ,        ‚Äú‚Äù  . ,   ,         .         ,    .      SOLID‚Äôa (     ,    ).     (,   ,      API     ).</li>
<li><b>Use Cases</b>.   . ,   -     (. . ,     ‚Äî , , , ).</li>
<li><b>View Models  View Interfaces.</b><br>
<br>
ViewModel ‚Äî   Presenters   .       MVVP  MVP\MVC\MV*.   ,   MVP   : Presenter   View    ,  ViewModel    View,       . View  ‚Äú‚Äù  View Model. MVVP    (View ‚Üí ViewModel),  MVP ‚Äî  (View Ô∏é Presenter).   ‚Äî  .<br>
<br>
View Interfaces ‚Äî   ,      View,   View Model    View  .     onViewModelChanged(): void.     .</li>
<li><b>5. External interfaces.</b>   ,       .     ‚Äî   React‚Äôa       API.         (AngularJS, React Native)     (IndexDB, local storage  ..). The Clean Architecutre     ,   ,      -   .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If you present the diagram above in the form of a three-layer application, it takes the following form: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/xo/wp/vo/xowpvop6kgrincjtlrapfycy6hm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Red arrows indicate the flow of data flow (but not dependencies, the dependency diagram is displayed on the pie diagram above). An image in the form of a rectangular diagram allows you to better understand how the data flow moves inside the application. I saw the idea of ‚Äã‚Äãa description in the form of such a diagram in </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">THIS</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> article. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Keep in mind that in more complex applications, the layer structure can change. For example, it is a common practice when each of the layers is higher than the domain - it can have its own mappers for data conversion. </font></font><br>
<br>
<b><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. Sample application </font></font></u></b><br>
<br>
<b><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.1. Description of web authorization application</font></font></u></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To make the application of architecture more visual and understandable, I created a web application built on its basis. </font><font style="vertical-align: inherit;">You can see the source code of the application in </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">the GitHub repository</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">The application looks like this: The </font></font><br>
<br>
<img src="https://habrastorage.org/webt/br/rj/wy/brrjwylya7qywcwp6vrjexacmk0.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
application is a simple login window. </font><font style="vertical-align: inherit;">To complicate the application itself (so that the architecture is appropriate), we do the following introduction:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fields must not be empty (validation).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The entered mail must have the correct format (validation).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Access data must be validated on the server (API stub) and receive a validation key.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">For authorization, the API method needs to provide validation data and a validation key.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">After authorization, the access key must be saved inside the application (entity layer).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Upon exit, the authorization key must be erased from memory.</font></font></li>
</ol><br>
<b><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.2. </font><font style="vertical-align: inherit;">Source Code Structure</font></font></u></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
In our example, the structure of the src folder is as follows:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/cu/5i/gz/cu5igzdr9m0fk_kvvyuqm_snlm0.png"><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">data</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - contains classes for working with data. </font><font style="vertical-align: inherit;">This directory is the last circle in the pie chart, as it contains classes for implementing repository interfaces. </font><font style="vertical-align: inherit;">Therefore, these classes are aware of the API and platform-specific things (local storage, cookie, etc.).</font></font></li>
<li><b>domain </b> ‚Äî   .   Entities, Use Cases  Repository Interfaces.   entities     : models  structures.      ,  models ‚Äî    ,  structures ‚Äî    (  POJO  Java).     ,    models   ,    ()    ,   structures ‚Äî ,      JSON- (json2ts, ¬´¬ª)        .</li>
<li><b>presentation </b> ‚Äî  View Models, View Interfaces  View ( ),   util ‚Äî   ,   ..</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Of course, the structure can vary from project to project. </font><font style="vertical-align: inherit;">For example, at the root of presentation in one of my projects are classes for monitoring the status of the sidebar and a class for navigating between pages. </font></font><br>
<br>
<b><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.3. </font><font style="vertical-align: inherit;">URM project diagram</font></font></u></b><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/580/b00/846/580b008464e6c4e0ea26e20879989581.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Sources for increasing - </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Separation of classes by layers is clearly shown by rectangles. </font><font style="vertical-align: inherit;">Please note that the dependencies are directed towards the Domain layer (in accordance with the diagram). </font></font><br>
<br>
<b><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.4. </font><font style="vertical-align: inherit;">Analysis of the code</font></font></u></b><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Entities layer</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
In this section we will go through all the classes with a description of their logic of work. </font><font style="vertical-align: inherit;">Let's start with the most distant circle - Entities, since the rest of the classes are based on it. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AuthListener.tsx</font></font></i><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">//    </span>
<span class="hljs-comment">//   AuthHolder</span>
<span class="hljs-keyword">export</span>&nbsp;<span class="hljs-keyword">default</span>&nbsp;interface&nbsp;AuthListener&nbsp;{<font></font>
&nbsp;&nbsp;onAuthChanged():&nbsp;<span class="hljs-keyword">void</span>;<font></font>
}</code></pre><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AuthHolder.tsx</font></font></i><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span>&nbsp;AuthListener&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'./AuthListener'</span>;<font></font>
<font></font>
<span class="hljs-comment">//      (. 3.1.5).  , </span>
<span class="hljs-comment">//  presentation ,    Observer</span>
<span class="hljs-comment">//   AuthListener</span>
<span class="hljs-keyword">export</span>&nbsp;<span class="hljs-keyword">default</span>&nbsp;<span class="hljs-class"><span class="hljs-keyword">class</span>&nbsp;<span class="hljs-title">AuthHolder</span>&nbsp;</span>{<font></font>
&nbsp;&nbsp;private&nbsp;authListeners:&nbsp;AuthListener[];<font></font>
&nbsp;&nbsp;private&nbsp;isAuthorized:&nbsp;boolean;<font></font>
&nbsp;&nbsp;private&nbsp;authToken:&nbsp;string;<font></font>
<font></font>
&nbsp;&nbsp;public&nbsp;<span class="hljs-keyword">constructor</span>()&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.isAuthorized&nbsp;=&nbsp;<span class="hljs-literal">false</span>;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.authListeners&nbsp;=&nbsp;[];
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.authToken&nbsp;=&nbsp;<span class="hljs-string">''</span>;<font></font>
&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;public&nbsp;onSignedIn(authToken:&nbsp;string):&nbsp;<span class="hljs-keyword">void</span>&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.isAuthorized&nbsp;=&nbsp;<span class="hljs-literal">true</span>;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.authToken&nbsp;=&nbsp;authToken;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.notifyListeners();<font></font>
&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;public&nbsp;onSignedOut():&nbsp;<span class="hljs-keyword">void</span>&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.isAuthorized&nbsp;=&nbsp;<span class="hljs-literal">false</span>;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.authToken&nbsp;=&nbsp;<span class="hljs-string">''</span>;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.notifyListeners();<font></font>
&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;public&nbsp;isUserAuthorized():&nbsp;boolean&nbsp;{<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span>&nbsp;<span class="hljs-keyword">this</span>.isAuthorized;<font></font>
&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;<span class="hljs-comment">/**
&nbsp;&nbsp;&nbsp;*&nbsp;<span class="hljs-doctag">@throws&nbsp;<span class="hljs-type">{Error}</span>&nbsp;</span>if&nbsp;user&nbsp;is&nbsp;not&nbsp;authorized
&nbsp;&nbsp;&nbsp;*/</span><font></font>
&nbsp;&nbsp;public&nbsp;getAuthToken():&nbsp;string&nbsp;{<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">if</span>&nbsp;(!<span class="hljs-keyword">this</span>.isAuthorized)&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">throw</span>&nbsp;<span class="hljs-keyword">new</span>&nbsp;<span class="hljs-built_in">Error</span>(<span class="hljs-string">'User&nbsp;is&nbsp;not&nbsp;authorized'</span>);<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span>&nbsp;<span class="hljs-keyword">this</span>.authToken;<font></font>
&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;public&nbsp;addAuthListener(authListener:&nbsp;AuthListener):&nbsp;<span class="hljs-keyword">void</span>&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.authListeners.push(authListener);<font></font>
&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;public&nbsp;removeAuthListener(authListener:&nbsp;AuthListener):&nbsp;<span class="hljs-keyword">void</span>&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.authListeners.splice(<span class="hljs-keyword">this</span>.authListeners.indexOf(authListener),&nbsp;<span class="hljs-number">1</span>);<font></font>
&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;private&nbsp;notifyListeners():&nbsp;<span class="hljs-keyword">void</span>&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.authListeners.forEach(<span class="hljs-function">(<span class="hljs-params">listener</span>)&nbsp;=&gt;</span>&nbsp;listener.onAuthChanged());<font></font>
&nbsp;&nbsp;}<font></font>
}</code></pre><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AuthorizationResult.tsx</font></font></i><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">//       </span>
<span class="hljs-keyword">export</span>&nbsp;<span class="hljs-keyword">default</span>&nbsp;interface&nbsp;AuthorizationResult&nbsp;{
&nbsp;&nbsp;<span class="hljs-attr">authorizationToken</span>:&nbsp;string;<font></font>
}</code></pre><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ValidationResult.tsx</font></font></i><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">//        </span>
<span class="hljs-keyword">export</span>&nbsp;<span class="hljs-keyword">default</span>&nbsp;interface&nbsp;ValidationResult&nbsp;{
&nbsp;&nbsp;<span class="hljs-attr">validationKey</span>:&nbsp;string;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This ends the entity layer. </font><font style="vertical-align: inherit;">Please note that this layer deals exclusively with business logic (state storage) and is used to transfer data throughout the rest of the application. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Often state does not need to be stored in business logic classes. </font><font style="vertical-align: inherit;">For this purpose, a repository bundle with a usage scenario (for data conversion) is well suited. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Repository interfaces </font></font></b><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AuthRepository.tsx</font></font></i><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span>&nbsp;ValidationResult&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'../../entity/auth/stuctures/ValidationResult'</span>;
<span class="hljs-keyword">import</span>&nbsp;AuthorizationResult&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'../../entity/auth/stuctures/AuthorizationResult'</span>;<font></font>
<font></font>
<span class="hljs-comment">//    ,        API</span>
<span class="hljs-keyword">export</span>&nbsp;<span class="hljs-keyword">default</span>&nbsp;interface&nbsp;AuthRepository&nbsp;{
&nbsp;&nbsp;<span class="hljs-comment">/**
&nbsp;&nbsp;&nbsp;*&nbsp;<span class="hljs-doctag">@throws&nbsp;<span class="hljs-type">{Error}</span>&nbsp;</span>if&nbsp;validation&nbsp;has&nbsp;not&nbsp;passed
&nbsp;&nbsp;&nbsp;*/</span>
&nbsp;&nbsp;validateCredentials(email:&nbsp;string,&nbsp;<span class="hljs-attr">password</span>:&nbsp;string):&nbsp;<span class="hljs-built_in">Promise</span>&lt;ValidationResult&gt;;<font></font>
<font></font>
&nbsp;&nbsp;<span class="hljs-comment">/**
&nbsp;&nbsp;&nbsp;*&nbsp;@throws&nbsp;{Error}&nbsp;if&nbsp;credentials&nbsp;have&nbsp;not&nbsp;passed
&nbsp;&nbsp;&nbsp;*/</span>
&nbsp;&nbsp;login(email:&nbsp;string,&nbsp;<span class="hljs-attr">password</span>:&nbsp;string,&nbsp;<span class="hljs-attr">validationKey</span>:&nbsp;string):&nbsp;<span class="hljs-built_in">Promise</span>&lt;AuthorizationResult&gt;;<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Use Cases </font></font></b><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LoginUseCase.tsx</font></font></i><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span>&nbsp;AuthRepository&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'../../repository/auth/AuthRepository'</span>;
<span class="hljs-keyword">import</span>&nbsp;AuthHolder&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'../../entity/auth/models/AuthHolder'</span>;<font></font>
<font></font>
<span class="hljs-keyword">export</span>&nbsp;<span class="hljs-keyword">default</span>&nbsp;<span class="hljs-class"><span class="hljs-keyword">class</span>&nbsp;<span class="hljs-title">LoginUseCase</span>&nbsp;</span>{<font></font>
&nbsp;&nbsp;private&nbsp;authRepository:&nbsp;AuthRepository;<font></font>
&nbsp;&nbsp;private&nbsp;authHolder:&nbsp;AuthHolder;<font></font>
<font></font>
&nbsp;&nbsp;public&nbsp;<span class="hljs-keyword">constructor</span>(authRepository:&nbsp;AuthRepository,&nbsp;authHolder:&nbsp;AuthHolder)&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.authRepository&nbsp;=&nbsp;authRepository;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.authHolder&nbsp;=&nbsp;authHolder;<font></font>
&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;<span class="hljs-comment">/**
&nbsp;&nbsp;&nbsp;*&nbsp;<span class="hljs-doctag">@throws&nbsp;<span class="hljs-type">{Error}</span>&nbsp;</span>if&nbsp;credentials&nbsp;are&nbsp;not&nbsp;valid&nbsp;or&nbsp;have&nbsp;not&nbsp;passed
&nbsp;&nbsp;&nbsp;*/</span>
&nbsp;&nbsp;public&nbsp;<span class="hljs-keyword">async</span>&nbsp;loginUser(email:&nbsp;string,&nbsp;<span class="hljs-attr">password</span>:&nbsp;string):&nbsp;<span class="hljs-built_in">Promise</span>&lt;<span class="hljs-keyword">void</span>&gt;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span>&nbsp;validationResult&nbsp;=&nbsp;<span class="hljs-keyword">await</span>&nbsp;<span class="hljs-keyword">this</span>.authRepository.validateCredentials(email,&nbsp;password);
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span>&nbsp;authResult&nbsp;=&nbsp;<span class="hljs-keyword">await</span>&nbsp;<span class="hljs-keyword">this</span>.authRepository.login(<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;email,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;password,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;validationResult.validationKey,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;);<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.authHolder.onSignedIn(authResult.authorizationToken);<font></font>
&nbsp;&nbsp;}<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In this case, Use Case has only one method. Usually, use cases have only one public method, which implements complex logic for one action. In this case, you must first validate, and then send the validation data to the authorization API method. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
However, an approach is often used when several scenarios are combined into one if they have common logic. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Carefully ensure that use cases do not contain logic that must reside in entities. Too many methods or storing state in a Use Case often serves as an indicator that the code should be in another layer. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Repository implemetation </font></font></b><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AuthFakeApi.tsx</font></font></i><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span>&nbsp;AuthRepository&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'../../domain/repository/auth/AuthRepository'</span>;
<span class="hljs-keyword">import</span>&nbsp;ValidationResult&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'../../domain/entity/auth/stuctures/ValidationResult'</span>;
<span class="hljs-keyword">import</span>&nbsp;AuthorizationResult&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'../../domain/entity/auth/stuctures/AuthorizationResult'</span>;<font></font>
<font></font>
<span class="hljs-comment">// ,    API</span>
<span class="hljs-keyword">export</span>&nbsp;<span class="hljs-keyword">default</span>&nbsp;<span class="hljs-class"><span class="hljs-keyword">class</span>&nbsp;<span class="hljs-title">AuthFakeApi</span>&nbsp;<span class="hljs-title">implements</span>&nbsp;<span class="hljs-title">AuthRepository</span>&nbsp;</span>{
&nbsp;&nbsp;<span class="hljs-comment">/**
&nbsp;&nbsp;&nbsp;*&nbsp;<span class="hljs-doctag">@throws&nbsp;<span class="hljs-type">{Error}</span>&nbsp;</span>if&nbsp;validation&nbsp;has&nbsp;not&nbsp;passed
&nbsp;&nbsp;&nbsp;*/</span>
&nbsp;&nbsp;validateCredentials(email:&nbsp;string,&nbsp;<span class="hljs-attr">password</span>:&nbsp;string):&nbsp;<span class="hljs-built_in">Promise</span>&lt;ValidationResult&gt;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span>&nbsp;<span class="hljs-keyword">new</span>&nbsp;<span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve,&nbsp;reject</span>)&nbsp;=&gt;</span>&nbsp;{
      <span class="hljs-comment">//  ,      </span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">if</span>&nbsp;(password.length&nbsp;&lt;&nbsp;<span class="hljs-number">5</span>)&nbsp;{<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reject(<span class="hljs-keyword">new</span>&nbsp;<span class="hljs-built_in">Error</span>(<span class="hljs-string">'Password&nbsp;length&nbsp;should&nbsp;be&nbsp;more&nbsp;than&nbsp;5&nbsp;characters'</span>));
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span>;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resolve({<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">validationKey</span>:&nbsp;<span class="hljs-string">'A34dZ7'</span>,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;});<font></font>
&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;<span class="hljs-comment">/**
&nbsp;&nbsp;&nbsp;*&nbsp;<span class="hljs-doctag">@throws&nbsp;<span class="hljs-type">{Error}</span>&nbsp;</span>if&nbsp;credentials&nbsp;have&nbsp;not&nbsp;passed
&nbsp;&nbsp;&nbsp;*/</span>
&nbsp;&nbsp;login(email:&nbsp;string,&nbsp;<span class="hljs-attr">password</span>:&nbsp;string,&nbsp;<span class="hljs-attr">validationKey</span>:&nbsp;string):&nbsp;<span class="hljs-built_in">Promise</span>&lt;AuthorizationResult&gt;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span>&nbsp;<span class="hljs-keyword">new</span>&nbsp;<span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve,&nbsp;reject</span>)&nbsp;=&gt;</span>&nbsp;{
      <span class="hljs-comment">//    </span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">if</span>&nbsp;(validationKey&nbsp;===&nbsp;<span class="hljs-string">'A34dZ7'</span>)&nbsp;{
        <span class="hljs-comment">//       user@email.com   password</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">if</span>&nbsp;(email&nbsp;===&nbsp;<span class="hljs-string">'user@email.com'</span>&nbsp;&amp;&amp;&nbsp;password&nbsp;===&nbsp;<span class="hljs-string">'password'</span>)&nbsp;{<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resolve({<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">authorizationToken</span>:&nbsp;<span class="hljs-string">'Bearer&nbsp;ASKJdsfjdijosd93wiesf93isef'</span>,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="hljs-keyword">else</span>&nbsp;{<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reject(<span class="hljs-keyword">new</span>&nbsp;<span class="hljs-built_in">Error</span>(<span class="hljs-string">'Validation&nbsp;key&nbsp;is&nbsp;not&nbsp;correct.&nbsp;Please&nbsp;try&nbsp;later'</span>));
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span>;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reject(<span class="hljs-keyword">new</span>&nbsp;<span class="hljs-built_in">Error</span>(<span class="hljs-string">'Email&nbsp;or&nbsp;password&nbsp;is&nbsp;not&nbsp;correct'</span>));<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;});<font></font>
&nbsp;&nbsp;}<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In this class, we have simulated access to the API. We are returning a Promise that would return a real fetch request. If we want to replace the implementation with a real API, just change the AuthFakeApi class to AuthApi in the App.tsx file or the dependency injection tool, if one is used. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Please note that we annotate error description methods so that other programmers understand the need for error handling. Unfortunately, TypeScript does not currently have instructions on the type of throws in Java, so we use a simple annotation. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">util (presentation layer)</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
In this directory we put classes that implement the logic of ‚Äúpreventive‚Äù data validation, as well as other classes for working with the UI layer. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FormValidator.tsx</font></font></i><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">export</span>&nbsp;<span class="hljs-keyword">default</span>&nbsp;<span class="hljs-class"><span class="hljs-keyword">class</span>&nbsp;<span class="hljs-title">FormValidator</span>&nbsp;</span>{
&nbsp;&nbsp;<span class="hljs-keyword">static</span>&nbsp;isValidEmail(email:&nbsp;string):&nbsp;boolean&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span>&nbsp;emailRegex&nbsp;=&nbsp;<span class="hljs-regexp">/^\S+@\S+\.\S+$/</span>;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span>&nbsp;emailRegex.test(email);<font></font>
&nbsp;&nbsp;}<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">View interfaces </font></font></b><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BaseView.tsx A</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
class that allows the View Model to notify View of changes. </font><font style="vertical-align: inherit;">Implemented by all View components.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">export</span>&nbsp;<span class="hljs-keyword">default</span>&nbsp;interface&nbsp;BaseView&nbsp;{<font></font>
&nbsp;&nbsp;onViewModelChanged():&nbsp;<span class="hljs-keyword">void</span>;<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">View Models </font></font></b><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BaseViewModel.tsx A</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
class that provides basic methods for linking a View Model and a View. </font><font style="vertical-align: inherit;">Implemented by all View Models.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span>&nbsp;BaseView&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'../view/BaseView'</span>;<font></font>
<font></font>
<span class="hljs-keyword">export</span>&nbsp;<span class="hljs-keyword">default</span>&nbsp;interface&nbsp;BaseViewModel&nbsp;{<font></font>
&nbsp;&nbsp;attachView(baseView:&nbsp;BaseView):&nbsp;<span class="hljs-keyword">void</span>;<font></font>
&nbsp;&nbsp;detachView():&nbsp;<span class="hljs-keyword">void</span>;<font></font>
}</code></pre><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AuthViewModel.tsx</font></font></i><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span>&nbsp;BaseViewModel&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'../BaseViewModel'</span>;<font></font>
<font></font>
<span class="hljs-comment">//  ViewModel,    View. </span>
<span class="hljs-comment">//    ,    View</span>
<span class="hljs-keyword">export</span>&nbsp;<span class="hljs-keyword">default</span>&nbsp;interface&nbsp;AuthViewModel&nbsp;extends&nbsp;BaseViewModel&nbsp;{
&nbsp;&nbsp;<span class="hljs-attr">emailQuery</span>:&nbsp;string;<font></font>
&nbsp;&nbsp;passwordQuery:&nbsp;string;<font></font>
&nbsp;&nbsp;isSignInButtonVisible:&nbsp;boolean;<font></font>
&nbsp;&nbsp;isSignOutButtonVisible:&nbsp;boolean;<font></font>
<font></font>
&nbsp;&nbsp;isShowError:&nbsp;boolean;<font></font>
&nbsp;&nbsp;errorMessage:&nbsp;string;<font></font>
<font></font>
&nbsp;&nbsp;authStatus:&nbsp;string;<font></font>
&nbsp;&nbsp;isAuthStatusPositive:&nbsp;boolean;<font></font>
<font></font>
&nbsp;&nbsp;onEmailQueryChanged(loginQuery:&nbsp;string):&nbsp;<span class="hljs-keyword">void</span>;<font></font>
&nbsp;&nbsp;onPasswordQueryChanged(passwordQuery:&nbsp;string):&nbsp;<span class="hljs-keyword">void</span>;<font></font>
&nbsp;&nbsp;onClickSignIn():&nbsp;<span class="hljs-keyword">void</span>;<font></font>
&nbsp;&nbsp;onClickSignOut():&nbsp;<span class="hljs-keyword">void</span>;<font></font>
}</code></pre><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AuthViewModelImpl.tsx</font></font></i><br>
<br>
<pre><code class="javascript hljs">
<span class="hljs-keyword">import</span>&nbsp;AuthViewModel&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'./AuthViewModel'</span>;
<span class="hljs-keyword">import</span>&nbsp;BaseView&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'../../view/BaseView'</span>;
<span class="hljs-keyword">import</span>&nbsp;LoginUseCase&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'../../../domain/interactors/auth/LoginUseCase'</span>;
<span class="hljs-keyword">import</span>&nbsp;AuthHolder&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'../../../domain/entity/auth/models/AuthHolder'</span>;
<span class="hljs-keyword">import</span>&nbsp;AuthListener&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'../../../domain/entity/auth/models/AuthListener'</span>;
<span class="hljs-keyword">import</span>&nbsp;FormValidator&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'../../util/FormValidator'</span>;<font></font>
<font></font>
<span class="hljs-keyword">export</span>&nbsp;<span class="hljs-keyword">default</span>&nbsp;<span class="hljs-class"><span class="hljs-keyword">class</span>&nbsp;<span class="hljs-title">AuthViewModelImpl</span>&nbsp;<span class="hljs-title">implements</span>&nbsp;<span class="hljs-title">AuthViewModel</span>,&nbsp;<span class="hljs-title">AuthListener</span>&nbsp;</span>{<font></font>
&nbsp;&nbsp;public&nbsp;emailQuery:&nbsp;string;<font></font>
&nbsp;&nbsp;public&nbsp;passwordQuery:&nbsp;string;<font></font>
&nbsp;&nbsp;public&nbsp;isSignInButtonVisible:&nbsp;boolean;<font></font>
&nbsp;&nbsp;public&nbsp;isSignOutButtonVisible:&nbsp;boolean;<font></font>
<font></font>
&nbsp;&nbsp;public&nbsp;isShowError:&nbsp;boolean;<font></font>
&nbsp;&nbsp;public&nbsp;errorMessage:&nbsp;string;<font></font>
<font></font>
&nbsp;&nbsp;public&nbsp;authStatus:&nbsp;string;<font></font>
&nbsp;&nbsp;public&nbsp;isAuthStatusPositive:&nbsp;boolean;<font></font>
<font></font>
&nbsp;&nbsp;private&nbsp;baseView?:&nbsp;BaseView;<font></font>
&nbsp;&nbsp;private&nbsp;loginUseCase:&nbsp;LoginUseCase;<font></font>
&nbsp;&nbsp;private&nbsp;authHolder:&nbsp;AuthHolder;<font></font>
<font></font>
&nbsp;&nbsp;public&nbsp;<span class="hljs-keyword">constructor</span>(loginUseCase:&nbsp;LoginUseCase,&nbsp;authHolder:&nbsp;AuthHolder)&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.emailQuery&nbsp;=&nbsp;<span class="hljs-string">''</span>;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.passwordQuery&nbsp;=&nbsp;<span class="hljs-string">''</span>;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.isSignInButtonVisible&nbsp;=&nbsp;<span class="hljs-literal">true</span>;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.isSignOutButtonVisible&nbsp;=&nbsp;<span class="hljs-literal">false</span>;<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.isShowError&nbsp;=&nbsp;<span class="hljs-literal">false</span>;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.errorMessage&nbsp;=&nbsp;<span class="hljs-string">''</span>;<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.authStatus&nbsp;=&nbsp;<span class="hljs-string">'is&nbsp;not&nbsp;authorized'</span>;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.isAuthStatusPositive&nbsp;=&nbsp;<span class="hljs-literal">false</span>;<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.loginUseCase&nbsp;=&nbsp;loginUseCase;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.authHolder = authHolder;<font></font>
<font></font>
    <span class="hljs-comment">//      </span>
    <span class="hljs-keyword">this</span>.authHolder.addAuthListener(<span class="hljs-keyword">this</span>);<font></font>
  }<font></font>
<font></font>
  public attachView = (baseView: BaseView): <span class="hljs-function"><span class="hljs-params">void</span> =&gt;</span> {
    <span class="hljs-keyword">this</span>.baseView = baseView;<font></font>
  };<font></font>
<font></font>
  public detachView = (): <span class="hljs-function"><span class="hljs-params">void</span> =&gt;</span> {
    <span class="hljs-keyword">this</span>.baseView = <span class="hljs-literal">undefined</span>;<font></font>
  };<font></font>
<font></font>
  <span class="hljs-comment">//      AuthListener</span>
&nbsp;&nbsp;public&nbsp;onAuthChanged&nbsp;=&nbsp;():&nbsp;<span class="hljs-function"><span class="hljs-params">void</span>&nbsp;=&gt;</span>&nbsp;{
    <span class="hljs-comment">//   ,  View</span>
    <span class="hljs-comment">//      </span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">if</span>&nbsp;(<span class="hljs-keyword">this</span>.authHolder.isUserAuthorized())&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.isSignInButtonVisible&nbsp;=&nbsp;<span class="hljs-literal">false</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.isSignOutButtonVisible&nbsp;=&nbsp;<span class="hljs-literal">true</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.authStatus&nbsp;=&nbsp;<span class="hljs-string">'authorized'</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.isAuthStatusPositive&nbsp;=&nbsp;<span class="hljs-literal">true</span>;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="hljs-keyword">else</span>&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.isSignInButtonVisible&nbsp;=&nbsp;<span class="hljs-literal">true</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.isSignOutButtonVisible&nbsp;=&nbsp;<span class="hljs-literal">false</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.authStatus&nbsp;=&nbsp;<span class="hljs-string">'is&nbsp;not&nbsp;autorized'</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.isAuthStatusPositive&nbsp;=&nbsp;<span class="hljs-literal">false</span>;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.notifyViewAboutChanges();<font></font>
&nbsp;&nbsp;};<font></font>
<font></font>
&nbsp;&nbsp;public&nbsp;onEmailQueryChanged&nbsp;=&nbsp;(loginQuery:&nbsp;string):&nbsp;<span class="hljs-function"><span class="hljs-params">void</span>&nbsp;=&gt;</span>&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.emailQuery&nbsp;=&nbsp;loginQuery;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.notifyViewAboutChanges();<font></font>
&nbsp;&nbsp;};<font></font>
<font></font>
&nbsp;&nbsp;public&nbsp;onPasswordQueryChanged&nbsp;=&nbsp;(passwordQuery:&nbsp;string):&nbsp;<span class="hljs-function"><span class="hljs-params">void</span>&nbsp;=&gt;</span>&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.passwordQuery&nbsp;=&nbsp;passwordQuery;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.notifyViewAboutChanges();<font></font>
&nbsp;&nbsp;};<font></font>
<font></font>
&nbsp;&nbsp;public&nbsp;onClickSignIn&nbsp;=&nbsp;<span class="hljs-keyword">async</span>&nbsp;():&nbsp;<span class="hljs-built_in">Promise</span>&lt;<span class="hljs-keyword">void</span>&gt;&nbsp;=&gt;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">if</span>&nbsp;(!<span class="hljs-keyword">this</span>.validateLoginForm())&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.notifyViewAboutChanges();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span>;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">try</span>&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">await</span>&nbsp;<span class="hljs-keyword">this</span>.loginUseCase.loginUser(<span class="hljs-keyword">this</span>.emailQuery,&nbsp;<span class="hljs-keyword">this</span>.passwordQuery);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.isShowError&nbsp;=&nbsp;<span class="hljs-literal">false</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.errorMessage&nbsp;=&nbsp;<span class="hljs-string">''</span>;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="hljs-keyword">catch</span>&nbsp;(e)&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.errorMessage&nbsp;=&nbsp;e.message;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.isShowError&nbsp;=&nbsp;<span class="hljs-literal">true</span>;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.notifyViewAboutChanges();<font></font>
&nbsp;&nbsp;};<font></font>
<font></font>
&nbsp;&nbsp;public&nbsp;onClickSignOut&nbsp;=&nbsp;():&nbsp;<span class="hljs-function"><span class="hljs-params">void</span>&nbsp;=&gt;</span>&nbsp;{
    <span class="hljs-comment">//         </span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.authHolder.onSignedOut();<font></font>
&nbsp;&nbsp;};<font></font>
<font></font>
&nbsp;&nbsp;private&nbsp;validateLoginForm&nbsp;=&nbsp;():&nbsp;<span class="hljs-function"><span class="hljs-params">boolean</span>&nbsp;=&gt;</span>&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">if</span>&nbsp;(!<span class="hljs-keyword">this</span>.emailQuery)&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.isShowError&nbsp;=&nbsp;<span class="hljs-literal">true</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.errorMessage&nbsp;=&nbsp;<span class="hljs-string">'Email&nbsp;cannot&nbsp;be&nbsp;empty'</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span>&nbsp;<span class="hljs-literal">false</span>;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
    <span class="hljs-comment">//  ,      </span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">if</span>&nbsp;(<span class="hljs-keyword">this</span>.errorMessage&nbsp;===&nbsp;<span class="hljs-string">'Email&nbsp;cannot&nbsp;be&nbsp;empty'</span>)&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.isShowError&nbsp;=&nbsp;<span class="hljs-literal">false</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.errorMessage&nbsp;=&nbsp;<span class="hljs-string">''</span>;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">if</span>&nbsp;(!FormValidator.isValidEmail(<span class="hljs-keyword">this</span>.emailQuery))&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.isShowError&nbsp;=&nbsp;<span class="hljs-literal">true</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.errorMessage&nbsp;=&nbsp;<span class="hljs-string">'Email&nbsp;format&nbsp;is&nbsp;not&nbsp;valid'</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span>&nbsp;<span class="hljs-literal">false</span>;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">if</span>&nbsp;(<span class="hljs-keyword">this</span>.errorMessage&nbsp;===&nbsp;<span class="hljs-string">'Email&nbsp;format&nbsp;is&nbsp;not&nbsp;valid'</span>)&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.isShowError&nbsp;=&nbsp;<span class="hljs-literal">false</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.errorMessage&nbsp;=&nbsp;<span class="hljs-string">''</span>;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">if</span>&nbsp;(!<span class="hljs-keyword">this</span>.passwordQuery)&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.isShowError&nbsp;=&nbsp;<span class="hljs-literal">true</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.errorMessage&nbsp;=&nbsp;<span class="hljs-string">'Password&nbsp;cannot&nbsp;be&nbsp;empty'</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span>&nbsp;<span class="hljs-literal">false</span>;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">if</span>&nbsp;(<span class="hljs-keyword">this</span>.errorMessage&nbsp;===&nbsp;<span class="hljs-string">'Password&nbsp;cannot&nbsp;be&nbsp;empty'</span>)&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.isShowError&nbsp;=&nbsp;<span class="hljs-literal">false</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.errorMessage&nbsp;=&nbsp;<span class="hljs-string">''</span>;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span>&nbsp;<span class="hljs-literal">true</span>;<font></font>
&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;private&nbsp;notifyViewAboutChanges&nbsp;=&nbsp;():&nbsp;<span class="hljs-function"><span class="hljs-params">void</span>&nbsp;=&gt;</span>&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">if</span>&nbsp;(<span class="hljs-keyword">this</span>.baseView)&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.baseView.onViewModelChanged();<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;};<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pay attention to the method </font></font><code>onClickSignOut</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- in it we directly refer to the AuthHolder class. </font><font style="vertical-align: inherit;">This is one of those cases where an intermediary in the form of a usage scenario would be superfluous, because the logic of the method is quite trivial. </font><font style="vertical-align: inherit;">Similarly, you can access the repository interface directly. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
However, if the code is complicated, in order to exit, it is necessary to place it in a separate use case. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UI (views) </font></font></b><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AuthComponent.tsx</font></font></i><br>
<br>
<pre><code class="javascript hljs">
<span class="hljs-keyword">import</span>&nbsp;React&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span>&nbsp;<span class="hljs-string">'./auth-component.css'</span>;
<span class="hljs-keyword">import</span>&nbsp;BaseView&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'../BaseView'</span>;
<span class="hljs-keyword">import</span>&nbsp;AuthViewModel&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'../../view-model/auth/AuthViewModel'</span>;<font></font>
<font></font>
<span class="hljs-keyword">export</span>&nbsp;interface&nbsp;AuthComponentProps&nbsp;{
&nbsp;&nbsp;<span class="hljs-attr">authViewModel</span>:&nbsp;AuthViewModel;<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">export</span>&nbsp;interface&nbsp;AuthComponentState&nbsp;{
&nbsp;&nbsp;<span class="hljs-attr">emailQuery</span>:&nbsp;string;<font></font>
&nbsp;&nbsp;passwordQuery:&nbsp;string;<font></font>
&nbsp;&nbsp;isSignInButtonVisible:&nbsp;boolean;<font></font>
&nbsp;&nbsp;isSignOutButtonVisible:&nbsp;boolean;<font></font>
<font></font>
&nbsp;&nbsp;isShowError:&nbsp;boolean;<font></font>
&nbsp;&nbsp;errorMessage:&nbsp;string;<font></font>
<font></font>
&nbsp;&nbsp;authStatus:&nbsp;string;<font></font>
&nbsp;&nbsp;isAuthStatusPositive:&nbsp;boolean;<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">export</span>&nbsp;<span class="hljs-keyword">default</span>&nbsp;<span class="hljs-class"><span class="hljs-keyword">class</span>&nbsp;<span class="hljs-title">AuthComponent</span>&nbsp;
  <span class="hljs-keyword">extends</span>&nbsp;<span class="hljs-title">React</span>.<span class="hljs-title">Component</span>&lt;<span class="hljs-title">AuthComponentProps</span>,&nbsp;<span class="hljs-title">AuthComponentState</span>&gt;
&nbsp;&nbsp;<span class="hljs-title">implements</span>&nbsp;<span class="hljs-title">BaseView</span>&nbsp;</span>{<font></font>
&nbsp;&nbsp;private&nbsp;authViewModel:&nbsp;AuthViewModel;<font></font>
<font></font>
&nbsp;&nbsp;public&nbsp;<span class="hljs-keyword">constructor</span>(props:&nbsp;AuthComponentProps)&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">super</span>(props);<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span>&nbsp;{&nbsp;authViewModel&nbsp;}&nbsp;=&nbsp;<span class="hljs-keyword">this</span>.props;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.authViewModel&nbsp;=&nbsp;authViewModel;<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.state&nbsp;=&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">emailQuery</span>:&nbsp;authViewModel.emailQuery,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">passwordQuery</span>:&nbsp;authViewModel.passwordQuery,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">isSignInButtonVisible</span>:&nbsp;authViewModel.isSignInButtonVisible,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">isSignOutButtonVisible</span>:&nbsp;authViewModel.isSignOutButtonVisible,<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">isShowError</span>:&nbsp;authViewModel.isShowError,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">errorMessage</span>:&nbsp;authViewModel.errorMessage,<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">authStatus</span>:&nbsp;authViewModel.authStatus,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">isAuthStatusPositive</span>:&nbsp;authViewModel.isAuthStatusPositive,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;};<font></font>
&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;public&nbsp;componentDidMount():&nbsp;<span class="hljs-keyword">void</span>&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.authViewModel.attachView(<span class="hljs-keyword">this</span>);<font></font>
&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;public&nbsp;componentWillUnmount():&nbsp;<span class="hljs-keyword">void</span>&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.authViewModel.detachView();<font></font>
&nbsp;&nbsp;}<font></font>
<font></font>
  <span class="hljs-comment">//    ViewModel,   </span>
  <span class="hljs-comment">// state  </span>
&nbsp;&nbsp;public&nbsp;onViewModelChanged():&nbsp;<span class="hljs-keyword">void</span>&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.setState({
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">emailQuery</span>:&nbsp;<span class="hljs-keyword">this</span>.authViewModel.emailQuery,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">passwordQuery</span>:&nbsp;<span class="hljs-keyword">this</span>.authViewModel.passwordQuery,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">isSignInButtonVisible</span>:&nbsp;<span class="hljs-keyword">this</span>.authViewModel.isSignInButtonVisible,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">isSignOutButtonVisible</span>:&nbsp;<span class="hljs-keyword">this</span>.authViewModel.isSignOutButtonVisible,<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">isShowError</span>:&nbsp;<span class="hljs-keyword">this</span>.authViewModel.isShowError,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">errorMessage</span>:&nbsp;<span class="hljs-keyword">this</span>.authViewModel.errorMessage,<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">authStatus</span>:&nbsp;<span class="hljs-keyword">this</span>.authViewModel.authStatus,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">isAuthStatusPositive</span>:&nbsp;<span class="hljs-keyword">this</span>.authViewModel.isAuthStatusPositive,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;});<font></font>
&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;public&nbsp;render():&nbsp;JSX.Element&nbsp;{<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span>&nbsp;{<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;emailQuery,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;passwordQuery,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isSignInButtonVisible,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isSignOutButtonVisible,<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isShowError,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;errorMessage,<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;authStatus,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isAuthStatusPositive,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;=&nbsp;<span class="hljs-keyword">this</span>.state;<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span>&nbsp;(<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;className="row&nbsp;flex-grow-1&nbsp;d-flex&nbsp;justify-content-center&nbsp;align-items-center"&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;className="auth-container&nbsp;col&nbsp;bg-white&nbsp;border&nbsp;rounded-lg&nbsp;py-4&nbsp;px-5"&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;className="row&nbsp;mt-2&nbsp;mb-4"&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Status:&nbsp;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;className={`${isAuthStatusPositive&nbsp;?&nbsp;'text-success'&nbsp;:&nbsp;'text-danger'}`}&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{authStatus}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;className="row&nbsp;mt-2"&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;input<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type="text"<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;placeholder="user@email.com"<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onChange={(e:&nbsp;React.FormEvent&lt;HTMLInputElement&gt;):&nbsp;void&nbsp;=&gt;&nbsp;{<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.authViewModel.onEmailQueryChanged(e.currentTarget.value);<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value={emailQuery}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;className="form-control"<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;className="row&nbsp;mt-2"&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;input<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type="password"<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;placeholder="password"<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onChange={(e:&nbsp;React.FormEvent&lt;HTMLInputElement&gt;):&nbsp;void&nbsp;=&gt;&nbsp;{<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.authViewModel.onPasswordQueryChanged(e.currentTarget.value);<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value={passwordQuery}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;className="form-control"<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{isShowError&nbsp;&amp;&amp;&nbsp;(<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;className="row&nbsp;my-3&nbsp;text-danger&nbsp;justify-content-center"&gt;{errorMessage}&lt;/div&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)}<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{isSignInButtonVisible&nbsp;&amp;&amp;&nbsp;(<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;className="row&nbsp;mt-4"&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;button<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type="button"<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;className="col&nbsp;btn&nbsp;btn-primary"<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onClick={():&nbsp;void&nbsp;=&gt;&nbsp;this.authViewModel.onClickSignIn()}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sign&nbsp;in<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/button&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)}<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{isSignOutButtonVisible&nbsp;&amp;&amp;&nbsp;(<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;className="row&nbsp;mt-4"&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;button<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type="button"<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;className="col&nbsp;btn&nbsp;btn-primary"<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onClick={():&nbsp;void&nbsp;=&gt;&nbsp;this.authViewModel.onClickSignOut()}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sign&nbsp;out<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/button&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;);<font></font>
&nbsp;&nbsp;}<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This component is dependent on the framework and, therefore, is located in the very extreme layer of the diagram. </font><font style="vertical-align: inherit;">When mounting ( </font><font style="vertical-align: inherit;">), </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AuthComponent</font></font></i><font style="vertical-align: inherit;"></font><code>componentDidMount</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> attaches to the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AuthViewModel</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font><i><font style="vertical-align: inherit;">detaches</font></i><font style="vertical-align: inherit;"> when ( </font></font><code>componentWillUnmount</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font><font style="vertical-align: inherit;">disappears </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Each time the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ViewModel</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> changes </font><font style="vertical-align: inherit;">, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AuthComponent</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> updates its state to further update the markup. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pay attention to conditional rendering depending on state:</font></font><br>
<br>
<pre><code class="javascript hljs"><font></font>
{isSignOutButtonVisible&nbsp;&amp;&amp;&nbsp;(<font></font>
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&nbsp;<span class="hljs-attr">className</span>=<span class="hljs-string">"row&nbsp;mt-4"</span>&gt;</span>
&nbsp;&nbsp;  <span class="hljs-tag">&lt;<span class="hljs-name">button</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">className</span>=<span class="hljs-string">"col&nbsp;btn&nbsp;btn-primary"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">onClick</span>=<span class="hljs-string">{():</span>&nbsp;<span class="hljs-attr">void</span>&nbsp;=&gt;</span>&nbsp;this.authViewModel.onClickSignOut()}
&nbsp;&nbsp;&nbsp;&nbsp;&gt;
&nbsp;&nbsp;&nbsp;&nbsp;  Sign&nbsp;out
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
&nbsp;&nbsp;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><font></font>
)}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As well as invoking ViewModel methods to pass values:</font></font><br>
<br>
<pre><code class="javascript hljs">onClick={():&nbsp;<span class="hljs-function"><span class="hljs-params">void</span>&nbsp;=&gt;</span>&nbsp;<span class="hljs-keyword">this</span>.authViewModel.onClickSignOut()}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Entry point</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
To enter the application, we use the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">index.tsx</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">App.tsx files</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">index.tsx</font></font></i><br>
<br>
<pre><code class="javascript hljs">
<span class="hljs-keyword">import</span>&nbsp;React&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span>&nbsp;ReactDOM&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'react-dom'</span>;
<span class="hljs-keyword">import</span>&nbsp;<span class="hljs-string">'bootstrap/dist/css/bootstrap.css'</span>;<font></font>
<font></font>
<span class="hljs-keyword">import</span>&nbsp;App&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'./App'</span>;
<span class="hljs-keyword">import</span>&nbsp;*&nbsp;<span class="hljs-keyword">as</span>&nbsp;serviceWorker&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'./serviceWorker'</span>;<font></font>
<font></font>
ReactDOM.render(<font></font>
&nbsp;&nbsp;<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">React.StrictMode</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">App</span>&nbsp;/&gt;</span>
&nbsp;&nbsp;<span class="hljs-tag">&lt;/<span class="hljs-name">React.StrictMode</span>&gt;</span></span>,
&nbsp;&nbsp;<span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'root'</span>),<font></font>
);<font></font>
<font></font>
serviceWorker.unregister();<font></font>
</code></pre><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">App.tsx</font></font></i><br>
<br>
<pre><code class="javascript hljs">
<span class="hljs-keyword">import</span>&nbsp;React&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span>&nbsp;<span class="hljs-string">'./app.css'</span>;
<span class="hljs-keyword">import</span>&nbsp;AuthComponent&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'./presentation/view/auth/AuthComponent'</span>;
<span class="hljs-keyword">import</span>&nbsp;AuthViewModelImpl&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'./presentation/view-model/auth/AuthViewModelImpl'</span>;
<span class="hljs-keyword">import</span>&nbsp;AuthFakeApi&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'./data/auth/AuthFakeApi'</span>;
<span class="hljs-keyword">import</span>&nbsp;LoginUseCase&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'./domain/interactors/auth/LoginUseCase'</span>;
<span class="hljs-keyword">import</span>&nbsp;AuthHolder&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'./domain/entity/auth/models/AuthHolder'</span>;<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span>&nbsp;<span class="hljs-title">App</span>(<span class="hljs-params"></span>):&nbsp;<span class="hljs-title">JSX</span>.<span class="hljs-title">Element</span>&nbsp;</span>{
&nbsp;&nbsp;<span class="hljs-comment">//&nbsp;data&nbsp;layer</span>
&nbsp;&nbsp;<span class="hljs-keyword">const</span>&nbsp;authRepository&nbsp;=&nbsp;<span class="hljs-keyword">new</span>&nbsp;AuthFakeApi();
&nbsp;&nbsp;<span class="hljs-comment">//&nbsp;domain&nbsp;layer</span>
&nbsp;&nbsp;<span class="hljs-keyword">const</span>&nbsp;authHolder&nbsp;=&nbsp;<span class="hljs-keyword">new</span>&nbsp;AuthHolder();
&nbsp;&nbsp;<span class="hljs-keyword">const</span>&nbsp;loginUseCase&nbsp;=&nbsp;<span class="hljs-keyword">new</span>&nbsp;LoginUseCase(authRepository,&nbsp;authHolder);
&nbsp;&nbsp;<span class="hljs-comment">//&nbsp;view&nbsp;layer</span>
&nbsp;&nbsp;<span class="hljs-keyword">const</span>&nbsp;authViewModel&nbsp;=&nbsp;<span class="hljs-keyword">new</span>&nbsp;AuthViewModelImpl(loginUseCase,&nbsp;authHolder);<font></font>
<font></font>
&nbsp;&nbsp;<span class="hljs-keyword">return</span>&nbsp;(
&nbsp;&nbsp;&nbsp;&nbsp;<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&nbsp;<span class="hljs-attr">className</span>=<span class="hljs-string">"app-container&nbsp;d-flex&nbsp;container-fluid"</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">AuthComponent</span>&nbsp;<span class="hljs-attr">authViewModel</span>=<span class="hljs-string">{authViewModel}</span>&nbsp;/&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><font></font>
&nbsp;&nbsp;);<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">export</span>&nbsp;<span class="hljs-keyword">default</span>&nbsp;App;
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It is in the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">App.tsx</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> file </font><font style="vertical-align: inherit;">that all the dependencies are initialized. </font><font style="vertical-align: inherit;">In this application, we do not use dependency injection tools so as not to unnecessarily complicate the code. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If we need to change some dependency, we will replace it in this file. </font><font style="vertical-align: inherit;">For example, instead of the line:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span>&nbsp;authRepository&nbsp;=&nbsp;<span class="hljs-keyword">new</span>&nbsp;AuthFakeApi();</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Write:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span>&nbsp;authRepository&nbsp;=&nbsp;<span class="hljs-keyword">new</span>&nbsp;AuthApi();</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Also note that we use only interfaces, not specific implementations (everything is based on abstraction). </font><font style="vertical-align: inherit;">When declaring variables, we mean the following:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span>&nbsp;authRepository: AuthRepository&nbsp;=&nbsp;<span class="hljs-keyword">new</span>&nbsp;AuthFakeApi();</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This allows you to hide implementation details (in order to replace it later without changing the interface). </font></font><br>
<br>
<u><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4. Conclusion</font></font></b></u><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
I hope that during reading the article you have an understanding of how The Clean Architecture can be applied in React (and not only projects), and our experience will help to make your applications better. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This article described the theoretical and practical basics of using The Clean Architecture in frontend projects. As mentioned earlier, The Clean Architecture gives only recommendations on how to build your architecture.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The above was an example of a simple application that uses this architecture. </font><font style="vertical-align: inherit;">Keep in mind that as the application grows, the architecture may change, so the above code is not a panacea (as mentioned at the beginning), this article is only a transfer of part of our experience. </font></font><br>
<br>
<u><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5. Resources</font></font></b></u><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Source Code </font></font></a><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UML Diagram</font></font></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en499064/index.html">Alternative contextual understanding using a statistical language model</a></li>
<li><a href="../en499068/index.html">Defining Point Cloud Transformation Parameters</a></li>
<li><a href="../en499070/index.html">–ü–®–ï AndroidStudio or how to use VCS Tools to the fullest</a></li>
<li><a href="../en499074/index.html">How to reuse code with symfony 5 bundles? Part 4. Host Bundle Extension</a></li>
<li><a href="../en499076/index.html">How to reuse code with symfony 5 bundles? Part 5. Configuration</a></li>
<li><a href="../en499082/index.html">Eagle owl letter</a></li>
<li><a href="../en499086/index.html">Dask Home Cluster</a></li>
<li><a href="../en499088/index.html">Flexible markup without media queries: min (), max (), clamp () functions</a></li>
<li><a href="../en499090/index.html">Complication of console commands, 1979‚àí2020</a></li>
<li><a href="../en499092/index.html">Reference model BIAN. What new and useful for the corporate architecture of the bank does it offer?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>