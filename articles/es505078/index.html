<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèø‚Äçü§ù‚Äçüë®üèª üé• üíæ BLE bajo el microscopio (ATT GATT ...) üí™üèª ü§úüèº üêû</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="BLE bajo el microscopio (ATT GATT ...) Parte 1, descripci√≥n general
 
 Ha pasado bastante tiempo desde que sali√≥ la primera especificaci√≥n para Blueto...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>BLE bajo el microscopio (ATT GATT ...)</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/505078/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/jc/9m/ea/jc9meakt15qji8lrruuauk5z_fw.png" alt="imagen"></div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BLE bajo el microscopio (ATT GATT ...)</font></font></h2> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Parte 1, descripci√≥n general</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Ha pasado bastante tiempo desde que sali√≥ la primera especificaci√≥n para Bluetooth 4.0. </font><font style="vertical-align: inherit;">Y aunque el tema BLE es muy interesante, a√∫n empuja a muchos desarrolladores por su complejidad. </font><font style="vertical-align: inherit;">En mis art√≠culos anteriores, miraba principalmente el nivel m√°s bajo de capa de enlace y capa f√≠sica. </font><font style="vertical-align: inherit;">Esto nos permiti√≥ no abordar conceptos tan complejos y confusos como el protocolo de atributos (ATT) y el perfil de atributos comunes (GATT). </font><font style="vertical-align: inherit;">Sin embargo, a donde ir sin entenderlos, es imposible desarrollar dispositivos compatibles. </font><font style="vertical-align: inherit;">Hoy me gustar√≠a compartir este conocimiento con ustedes. </font><font style="vertical-align: inherit;">En mi art√≠culo, me basar√© en una </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cartilla</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> del sitio web n√≥rdico. </font><font style="vertical-align: inherit;">Entonces empecemos.</font></font><br>
<a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬øPor qu√© es todo tan dif√≠cil?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En mi opini√≥n, qued√≥ claro de inmediato que la administraci√≥n de dispositivos a trav√©s de tel√©fonos inteligentes es un tema muy prometedor y de larga duraci√≥n. Por lo tanto, decidieron estructurarlo de inmediato y al m√°ximo. Para que los fabricantes de varios dispositivos no presenten sus propios protocolos, que ser√°n incompatibles. De ah√≠ la complejidad. Ya en la primera etapa, trataron de exprimir todo lo posible en el protocolo BLE. Y no importa si resulta √∫til o no. Adem√°s, proporcionaron la posibilidad de ampliar la lista de dispositivos para el futuro.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Echemos un vistazo a la imagen donde se dibuja el diagrama del protocolo BLE. Se compone de varias capas. La capa f√≠sica m√°s baja (PHY) es responsable del canal de radio del dispositivo. La capa de enlace (LL) contiene la secuencia completa de bytes en el mensaje transmitido. En art√≠culos anteriores, lo estudiamos. La interfaz de controlador de host (HCI) es un protocolo para el intercambio entre capas o chips BLE si el controlador y el host se implementan en chips diferentes. El Protocolo de Adaptaci√≥n y Control de Enlace L√≥gico (L2CAP) es responsable de la formaci√≥n de paquetes, divididos por tramas, control de errores y ensamblaje de paquetes. El cifrado de paquetes es responsabilidad del Protocolo de Security Manager (SMP). Un perfil de acceso compartido (GAP) es responsable de la comunicaci√≥n inicial entre dispositivos para determinar qui√©n es qui√©n. Tambi√©n incluye escaneo y publicidad.En este art√≠culo me centrar√© en las dos partes restantes del protocolo: GATT y ATT. GATT es un complemento para ATT, por lo que est√°n muy entrelazados.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/51/qi/ms/51qimsv8ccop7bncjcrllcc7tcg.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para simplificar la historia, me gustar√≠a pasar a una analog√≠a. La escuch√© en alguna parte y me gustar√≠a apoyarla. Imagine un dispositivo BLE como una estanter√≠a con varios estantes. Cada estante es un tema separado. Por ejemplo, tenemos estantes con ficci√≥n, matem√°ticas, enciclopedias. En cada estante hay libros con un tema espec√≠fico. Y en algunos libros hay incluso marcadores de papel con notas. Adem√°s, tenemos un peque√±o cat√°logo en papel de todos los libros. Si recuerdas las bibliotecas escolares, esta es una caja estrecha con tarjetas de papel. Con esta analog√≠a, el gabinete es el perfil de nuestro dispositivo. Los estantes son servicios, los libros son caracter√≠sticas y un directorio es una tabla de atributos. Los marcadores en los libros son descriptores, que tambi√©n discutir√© m√°s adelante, con m√°s detalle.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todos los que desarrollaron el dispositivo saben que muchos proyectos tienen piezas de c√≥digo similares. El hecho es que muchos dispositivos tienen una funcionalidad similar. Por ejemplo, si los dispositivos funcionan con bater√≠as, entonces el problema de cargar y controlar su nivel ser√° el mismo. Lo mismo ocurre con los sensores. En realidad, el enfoque orientado a objetos para la programaci√≥n </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"proporciona la capacidad de crear objetos que combinan propiedades y comportamientos en una uni√≥n independiente, que luego puede reutilizarse"</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. En mi opini√≥n, en BLE se intent√≥ un enfoque similar. El Grupo de Inter√©s Especial Bluetooth (SIG) ha desarrollado perfiles. Los dispositivos de diferentes fabricantes con los mismos perfiles deber√≠an funcionar entre s√≠ sin dificultad. Los perfiles, a su vez, consisten en servicios y servicios de caracter√≠sticas, complementados por descriptores. En general, puede verse as√≠: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/yv/7v/w-/yv7vw-vhvlnavelyabkxtwe8p0e.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
por ejemplo, considere el perfil del perfil del monitor de frecuencia card√≠aca (brazalete de ejercicios). Consta de dos servicios y varias caracter√≠sticas. A partir de √©l, la jerarqu√≠a del perfil se aclara inmediatamente. La caracter√≠stica del punto de control restablece el recuento total de calor√≠as a cero. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1. El servicio de frecuencia card√≠aca incluye tres caracter√≠sticas (0x180D): </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&nbsp;&nbsp;&nbsp;&nbsp;a) Caracter√≠stica obligatoria de la frecuencia card√≠aca (0x2A37)</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&nbsp;&nbsp;&nbsp;&nbsp;b) Caracter√≠stica opcional de la posici√≥n del sensor corporal (0x2A38) </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&nbsp;&nbsp;&nbsp;&nbsp;c) Caracter√≠stica condicional del punto de referencia de frecuencia card√≠aca (0x2A39) </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2. Servicio de bater√≠a (0x180F): </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&nbsp;&nbsp;&nbsp;&nbsp;a) Caracter√≠stica obligatoria del nivel de bater√≠a (0x2A19)</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Uido</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para que podamos referirnos sin ambig√ºedad a los elementos del perfil (servicios, caracter√≠sticas y descriptores), necesitamos numerarlos todos de alguna manera. Para este prop√≥sito, se introduce un concepto como ID universalmente √∫nico (UUID) o Identificador √∫nico universal. Entre par√©ntesis de cada l√≠nea solo se especifica UUID. Y hay una caracter√≠stica. Para UUID, decidimos usar una longitud de c√≥digo de 16 y 128 bits. ¬øPorque preguntas? En el protocolo BLE, todo est√° sujeto a la conservaci√≥n de energ√≠a. Por lo tanto, la dimensi√≥n de 16 bits es bastante razonable. Es poco probable que se creen m√°s de 65 mil en el futuro cercano. Servicios y caracter√≠sticas √∫nicas. Por el momento, todo lo que podr√≠an haber sido contados (recuerde de d√≥nde vino: ‚Äú√©l tambi√©n lo cont√≥ a usted‚Äù :-)) Elementos numerados de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">perfiles</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">servicios</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">caracter√≠sticas</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">descriptores</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> puedes mirar los enlaces. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sin embargo, creo que todos recuerdan la historia con 4 bytes de direcci√≥n IP en Internet. Al principio pensaron que era suficiente, pero ahora a√∫n no vamos a la direcci√≥n de 6 bytes. Para no repetir este error y dar cabida a las manos juguetonas de los fabricantes caseros, SIG inmediatamente decidi√≥ introducir tambi√©n UUID de 128 bits. Esto me recuerda personalmente a la banda sin licencia de 433 MHz, que se entreg√≥ a todo tipo de Kulibin desde el canal de radio. En nuestro caso, se entreg√≥ un identificador de 128 bits de servicios y caracter√≠sticas. Esto significa que nosotros, para nuestros servicios y dispositivos, podemos usar casi cualquier valor de 128 bits. De todos modos, la probabilidad de obtener el mismo UUID tiende a cero.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De hecho, los UUID cortos de 16 bits tienen su extensi√≥n hasta valores de 128 bits. </font><font style="vertical-align: inherit;">En la especificaci√≥n, esta extensi√≥n se denomina UUID base Bluetooth y tiene el valor 00000000-0000-1000-8000-00805F9B34FB. </font><font style="vertical-align: inherit;">Si, por ejemplo, el atributo UUID de 16 bits tiene el valor 0x1234, entonces el UUID equivalente de 128 bits tendr√° el valor 00001234-0000-1000-8000-00805F9B34FB. </font><font style="vertical-align: inherit;">E incluso se da la f√≥rmula correspondiente: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;128_bit_value = 16_bit_value * 2 ^ 96 + Bluetooth_Base_UUID </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No s√© de d√≥nde vino este n√∫mero m√°gico. </font><font style="vertical-align: inherit;">Si alguno de los lectores lo sabe, d√©jelos escribir en los comentarios. </font><font style="vertical-align: inherit;">En cuanto a la invenci√≥n de UUID de 128 bits, en principio, puede usar un </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">generador</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> especial </font><font style="vertical-align: inherit;">que lo haga por usted.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ATT GATT ...</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 En realidad, comienza la diversi√≥n. Recuerdo que ATT se basa en una relaci√≥n cliente-servidor. Ahora estamos considerando el dispositivo del servidor. Contiene informaci√≥n como valores de sensores, estado del interruptor de luz, datos de ubicaci√≥n, etc. Ahora que todos los "participantes en nuestro desfile" est√°n numerados, debemos colocarlos de alguna manera en la memoria del dispositivo. Para hacer esto, los colocamos en una tabla llamada tabla de atributos. Recuerda esto bien. Este es el coraz√≥n de BLE. Lo consideraremos en el futuro. Ahora llamaremos a cada l√≠nea un atributo. Esta tabla es profunda en la pila y, por regla general, no tenemos acceso directo a ella. Lo inicializamos y recurrimos a √©l, pero lo que sucede adentro est√° oculto detr√°s de siete sellos.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Considere la imagen de la especificaci√≥n, pero antes de eso, quiero llamar inmediatamente la atenci√≥n sobre la frecuente confusi√≥n en t√©rminos, es decir, en descriptores. El papel del descriptor es complementar la descripci√≥n de la caracter√≠stica. Cuando es necesario expandir sus capacidades, entonces usan descriptores. Tambi√©n son atributos, y de la misma manera, junto con los servicios y caracter√≠sticas, se encuentran en la tabla de atributos. Los analizaremos en detalle en la segunda parte del art√≠culo. Sin embargo, a veces los descriptores se denominan n√∫mero de l√≠nea en la tabla de atributos. Esto debe tenerse en cuenta. Nosotros, para no confundirnos, utilizaremos el t√©rmino "puntero de atributo" para estos fines. </font></font><br>
<img src="https://habrastorage.org/webt/a5/rl/lk/a5rllkmo7i3doe3ripvpjd2ztwy.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por lo tanto, un atributo es un valor discreto que tiene las siguientes propiedades asociadas: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1. El identificador de atributo es el √≠ndice de la tabla correspondiente al atributo</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2. El tipo de atributo es el UUID que describe su tipo </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3. El valor de atributo son los datos indexados por el puntero de atributo </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
4. Los permisos de atributo son parte del atributo, permisos que no pueden ser le√≠do o escrito usando el protocolo de atributos </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øC√≥mo entender todo esto? El puntero de atributo es, relativamente hablando, su n√∫mero en nuestra tabla.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Permite al cliente hacer referencia a un atributo en las solicitudes de lectura o escritura. Podemos numerar nuestras l√≠neas (atributos) de 0x0001 a 0xFFFF. En nuestra asociaci√≥n con una estanter√≠a, este es el n√∫mero de tarjeta en el cat√°logo de papel. Del mismo modo, como en el cat√°logo de la biblioteca, las tarjetas se ordenan en orden creciente. El n√∫mero de cada l√≠nea posterior debe ser mayor que el anterior. Al igual que en la biblioteca, algunas tarjetas se pierden a veces, por lo que tenemos: puede haber huecos en la numeraci√≥n de l√≠neas. Esto esta permitido. Lo principal es que siguen aumentando. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El tipo de atributo determina cu√°l es el atributo. Por analog√≠a con el lenguaje C, </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
donde hay cadenas y variables num√©ricas booleanas, as√≠ que aqu√≠. Por el tipo de atributo que reconocemos</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
con qu√© estamos tratando y c√≥mo continuar trabajando con este atributo. A continuaci√≥n observamos algunos tipos espec√≠ficos de atributos. Por ejemplo, "declaraci√≥n de servicio" (0x2800), "declaraci√≥n de caracter√≠sticas" (0x2803), "declaraci√≥n de descriptor" (0x2902). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El valor del atributo es en realidad su valor, perd√≥n por la tautolog√≠a. Si el tipo de atributo es una cadena, entonces el valor del atributo puede ser, por ejemplo, el eslogan "¬°Hola Mundo!". Si el tipo de atributo es una "declaraci√≥n de servicio", entonces su valor es el servicio en s√≠. Y a veces esta es informaci√≥n sobre d√≥nde encontrar otros atributos y sus propiedades. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los permisos de atributo permiten al servidor comprender si se permite el acceso de lectura o escritura.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tenga en cuenta que estos permisos se aplican solo al valor del atributo y no al puntero, tipo y campo de permisos en s√≠. </font><font style="vertical-align: inherit;">Aquellos. </font><font style="vertical-align: inherit;">Si se permite la grabaci√≥n de atributos, entonces podemos cambiar, por ejemplo, la l√≠nea "¬°Hola Mundo!" </font><font style="vertical-align: inherit;">en la l√≠nea "Buenos d√≠as". </font><font style="vertical-align: inherit;">Pero no podemos prohibir el registro de una nueva l√≠nea o cambiar el tipo de atributo y designar la l√≠nea como "declaraci√≥n de servicio". </font><font style="vertical-align: inherit;">Cuando un cliente accede al servidor, el cliente solicita sus atributos. </font><font style="vertical-align: inherit;">Esto permite al cliente averiguar qu√© puede proporcionar el servidor. </font><font style="vertical-align: inherit;">Aunque no es necesario leer y escribir valores.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C√≥mo se ve</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El concepto de GATT es agrupar atributos en una tabla de atributos en un orden muy espec√≠fico y l√≥gico. Echemos un vistazo m√°s de cerca al perfil de frecuencia card√≠aca a continuaci√≥n. La columna m√°s a la izquierda de esta tabla es opcional. Simplemente nos describe qu√© es esta l√≠nea (atributo). Todas las otras columnas ya nos son familiares.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/6k/vt/4l/6kvt4lzc9h6ll9kwdu9g6qps22c.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En la parte superior de cada grupo, siempre tenemos un atributo de anuncio de servicio. Su tipo siempre es 0x2800, y el puntero depende de cu√°ntos atributos ya est√°n presentes en la tabla. Sus permisos son siempre de solo lectura, sin ninguna autenticaci√≥n o autorizaci√≥n. Hablaremos sobre estos conceptos un poco m√°s tarde. Un valor es otro UUID que determina qu√© tipo de servicio es. En la tabla, el valor es 0x180D, que se define por Bluetooth SIG como un servicio de frecuencia card√≠aca.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tras el anuncio del servicio, el anuncio de la caracter√≠stica. En forma, es similar a una declaraci√≥n de servicio. Su UUID siempre es 0x2803, y los permisos tambi√©n son siempre de solo lectura sin ninguna autenticaci√≥n o autorizaci√≥n. Veamos el campo Valor de atributo, que incluye algunos datos. Siempre contiene un puntero, un UUID y un conjunto de propiedades. Estos tres elementos describen la declaraci√≥n posterior del valor caracter√≠stico. El puntero indica naturalmente el lugar de declaraci√≥n del valor caracter√≠stico en la tabla de atributos. El UUID describe qu√© tipo de informaci√≥n o valor podemos esperar. Por ejemplo, el valor de temperatura, el estado del interruptor de la luz o alg√∫n otro valor arbitrario. Y finalmente, propiedades que describen c√≥mo puede interactuar con un valor caracter√≠stico.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqu√≠ estamos esperando otra trampa. Se asocia con permisos de atributos y propiedades de caracter√≠sticas. Veamos la imagen de las propiedades del campo de bits de la especificaci√≥n. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ko/co/5y/koco5ykz3gqkfwww1k48ssxvjug.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como puede ver, aqu√≠ tambi√©n hay campos que proporcionan capacidades de lectura y escritura. Quiz√°s se pregunte por qu√© tenemos permisos de lectura / escritura para el atributo y propiedades de </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
lectura / escritura para el valor caracter√≠stico. ¬øNo deber√≠an ser siempre iguales? El hecho es que las propiedades para el valor caracter√≠stico, de hecho, son solo recomendaciones para el cliente, utilizadas en el GATT y las capas de aplicaci√≥n. Estas son solo pistas sobre lo que un cliente puede esperar de un atributo de anuncio de funci√≥n. Tratemos esto con m√°s detalle. ¬øQu√© tipos de permisos tiene el atributo? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1. Permisos de acceso:</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&nbsp;&nbsp;&nbsp;&nbsp; - lectura </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&nbsp;&nbsp;&nbsp;&nbsp; - escritura </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&nbsp;&nbsp;&nbsp;&nbsp; - lectura y escritura </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2. Permiso de autenticaci√≥n: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&nbsp;&nbsp;&nbsp;&nbsp; - se requiere </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&nbsp;&nbsp;&nbsp;&nbsp; autenticaci√≥n - no se requiere autenticaci√≥n </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3. Permiso de autorizaci√≥n: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&nbsp;&nbsp;&nbsp;&nbsp; - se requiere </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&nbsp;&nbsp;&nbsp;&nbsp; autorizaci√≥n - no se requiere autorizaci√≥n</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La principal diferencia entre la resoluci√≥n de atributos y las propiedades de caracter√≠sticas es que las primeras se relacionan con los servidores y las √∫ltimas con los clientes. </font><font style="vertical-align: inherit;">Se le puede permitir al servidor leer el valor de la caracter√≠stica, pero al mismo tiempo existe un requisito de autenticaci√≥n o autorizaci√≥n. </font><font style="vertical-align: inherit;">Por lo tanto, cuando el cliente solicita propiedades de la caracter√≠stica, obtenemos que la lectura est√° permitida. </font><font style="vertical-align: inherit;">Pero cuando tratamos de leer, recibimos un error. </font><font style="vertical-align: inherit;">Por lo tanto, podemos hablar con seguridad sobre la prioridad de los permisos sobre las propiedades. </font><font style="vertical-align: inherit;">No podemos obtener conocimiento sobre los permisos del atributo en el lado del cliente.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Descriptor</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De vuelta a nuestra mesa. Despu√©s de declarar un valor de caracter√≠stica, son posibles las siguientes declaraciones de atributos: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1. Nueva declaraci√≥n de una caracter√≠stica (puede haber muchas caracter√≠sticas en un servicio) </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2. Nueva declaraci√≥n de un servicio (puede haber muchas de ellas en una tabla) </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3. Declaraci√≥n de un descriptor</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En el caso de una caracter√≠stica que mide la frecuencia card√≠aca, en nuestra tabla, la declaraci√≥n del valor de la caracter√≠stica se acompa√±a de la declaraci√≥n de un descriptor. Un descriptor es un atributo con informaci√≥n adicional sobre la caracter√≠stica. Hay varios tipos de descriptores. Hablaremos de ellos en detalle en la segunda parte de este art√≠culo. Ahora solo tocaremos el Descriptor de configuraci√≥n caracter√≠stica del cliente (CCCD). Tiene un UUID de 0x2902. Con este descriptor, el cliente tiene la capacidad de habilitar la indicaci√≥n o notificaci√≥n en el servidor. La diferencia entre ellos es peque√±a, pero sigue ah√≠. La notificaci√≥n no requiere confirmaci√≥n de recepci√≥n por parte del cliente. La indicaci√≥n requiere esto, aunque ocurre en el nivel GATT, sin alcanzar el nivel de aplicaci√≥n. ¬øPor qu√© lo preguntas? Por desgracia, no lo s√©.Solo puedo decir que los expertos n√≥rdicos recomiendan usar notificaciones. Adem√°s, la comprobaci√≥n de integridad de paquetes (usando CRC) ocurre en ambos casos.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusi√≥n</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al final del art√≠culo, me gustar√≠a decir esto. </font><font style="vertical-align: inherit;">La √∫ltima tabla es algo confusa. </font><font style="vertical-align: inherit;">Sin embargo, lo decid√≠ porque se da en el </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">art√≠culo</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en el que me baso. </font><font style="vertical-align: inherit;">En la segunda parte de mi art√≠culo, tengo la intenci√≥n de profundizar en la especificaci√≥n BlueTooth 4.0. </font><font style="vertical-align: inherit;">All√≠ estamos esperando esquemas y dibujos m√°s correctos. </font><font style="vertical-align: inherit;">En la tercera parte, me gustar√≠a analizar el registro obtenido con la ayuda del programa Wireshark de uno de los dispositivos y ver "en vivo" toda la teor√≠a que estamos estudiando. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Empleado del Grupo de Empresas </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sat√©lite C√©sar</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Pecherskikh Vladimir</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es505052/index.html">Pruebas r√°pidas de Motionia.js y Consoleimg.js</a></li>
<li><a href="../es505060/index.html">Inserte una matriz numpy en la base de datos MySQL a trav√©s de Python</a></li>
<li><a href="../es505064/index.html">Mikrotik split-dns: lo hicieron</a></li>
<li><a href="../es505070/index.html">Masturbaci√≥n intelectual sobre la buena escritura.</a></li>
<li><a href="../es505074/index.html">Hosting y servidores dedicados: responda preguntas. Parte 2. ¬øPor qu√© un Internet tan costoso en el centro de datos?</a></li>
<li><a href="../es505080/index.html">Mutex en el mundo del c√≥digo asincr√≥nico</a></li>
<li><a href="../es505090/index.html">Acerca de traducir las palabras "√∫til" / "uso" sin uso / √∫til</a></li>
<li><a href="../es505092/index.html">C√≥mo consegu√≠ un trabajo en Microsoft</a></li>
<li><a href="../es505098/index.html">Revisi√≥n del tel√©fono IP Snom D717</a></li>
<li><a href="../es505104/index.html">C√≥mo desarrollamos un servicio que ingres√≥ a los 5 sitios de farmacias m√°s grandes del mundo</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>