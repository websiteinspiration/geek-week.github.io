<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§öüèª üå∏ üö≠ How we did a dance ball online üç§ üë©üèª‚Äçüíº üßïüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The Bolshoi Sevastopol Officer Ball is traditionally held in June, but this time the preparation did not work out. The organizers decided to launch Se...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>How we did a dance ball online</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/506362/"><img src="https://habrastorage.org/webt/r5/ac/7i/r5ac7iy_cxktzepbq9f02bdsweq.jpeg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The Bolshoi Sevastopol Officer Ball is traditionally held in June, but this time the preparation did not work out. </font><font style="vertical-align: inherit;">The organizers decided to launch Sevastopol Ball Online. </font><font style="vertical-align: inherit;">Since we have been broadcasting the event for several years in a row, there was nowhere to retreat. </font><font style="vertical-align: inherit;">Spectators on facebook, vkontakte and on YouTube, 35 couples dance at home.</font></font><a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In general, while engaged in online broadcasts for some time, we noticed a tendency that almost every project requires (or we require from ourselves) some kind of innovation. </font><font style="vertical-align: inherit;">First we use SDI, then a video sender, then we transmit a signal using several 4G modems from the sea, a new remote control, a signal matrix, pick up video from a copter, restrict to 25 VC groups and the like. </font><font style="vertical-align: inherit;">Each new project makes you plunge into the world of streams even deeper. </font><font style="vertical-align: inherit;">We talk about this on VidMK YouTube, we decided to write on Habr.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">So the task ...</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
An epidemic dance ball is held online. There is a leading couple, the rest of the participants dance, repeating after them, that is, they must see and hear the main couple along with the music. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zi/le/m7/zilem75qo6iakbpyybhq8dqumg8.jpeg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In the beginning, the governor of Sevastopol is connected to open the ball. Ready-made directed broadcast goes to YouTube, Facebook and VK. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/td/e-/ks/tde-ksp-4qv10sdzlgyxnoqnsfo.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The most obvious way was to phone everyone in the video chat. The first one that came to mind was Zoom, but I usually try not to grab at once what I am hearing, but look for alternatives. Perhaps they have great marketing, and even if the tool is good, there is probably something else. In the chat, AVstream talked several times about TrueConf, I decided to try it.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It is important to say here that we are in the Crimea and many popular services do not work here. You have to look, and often the alternatives are better. So, for example, instead of the locked Trello, we started using the powerful Planfix. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
TrueConf immediately bribed with the ability to raise its server. In theory, this would mean that we are not dependent on the overall increased load on data centers during the period of self-isolation, we sit quietly in Sevastopol, we connect mainly local users and several from other cities, and everything works stably. In addition, using your server was more profitable for money. And in the case of our customers, it was also given for free, since the organizers of the ball had NPOs.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In general, we tested the product and realized that it suits us. </font><font style="vertical-align: inherit;">Although they did not do the full load of 35 people in the tests, it was a little scary how the old computer would behave as a server. </font><font style="vertical-align: inherit;">The system requirements are quite high with such a load, so they dragged a computer based on AMD Ryzen 7 2700, it became quieter with it. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The server was physically located where the ball was broadcast. </font><font style="vertical-align: inherit;">The main application for video communication was connected on the same network as the server. </font><font style="vertical-align: inherit;">This added confidence that the picture would certainly get to the server, and only then it would go online to the other participants. </font><font style="vertical-align: inherit;">By the way, the internet should be good. </font><font style="vertical-align: inherit;">For our 35 participants, the return speed reached 120 Mbit, that is, the usual Internet at 100 Mbit will not be enough. </font><font style="vertical-align: inherit;">In general, the server is working, let's go on the air ...</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Camera signal</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Any video chat offers to choose a webcam as an image source and a microphone for sound. What if we need to get a professional video camera and sound from two microphones with a phonogram? In short, we used NDI. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We had to direct the entire broadcast and stream on social networks. To do this, we had a main computer in the role of a mini-TCP (mobile television studio). All work was done using the vMix program. This is a fairly powerful software for organizing broadcasts of various types and levels of complexity.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/kn/tt/rw/knttrwjaoeoay65nbb0nvwa2yac.jpeg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Our dance couple was filmed by one camera, simply it was not necessary anymore. We captured the camera signal using the internal BlackMagic Intensity Pro card. In my opinion, this is a current card for capturing one HDMI signal. This signal also had to be sent as a webcam to TrueConf. You could immediately convert the stream to a webcam using vMix, but did not want to pile everything on one computer. Therefore, a separate laptop was used for the phone call.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
How to get a signal from a camera on a laptop? You can create a virtual video signal on one computer and catch it on any other computer on the local network as many times as you like. This is NDI (Network Device Interface). In fact, a kind of virtual cable that does not need to be cunningly administrated in any special way. The width of one stream for 1080p25 is almost 100 Mbit, so for stable operation, you need a 1 Gb network or Wi-Fi more than 150 Mbit. But the cable is better. There can be many such NDI signals in one local network, if only the channel width is enough.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So, on the main computer in vMix, we see the signal from the camera, send it to the network as an NDI signal. </font><font style="vertical-align: inherit;">On a laptop-dialer, we catch this signal using the NDI Virtual Input program from the NDI Tools package (it is free). </font><font style="vertical-align: inherit;">This mini-program creates a virtual webcam in which you include the desired NDI signal. </font><font style="vertical-align: inherit;">In fact, everything, our HDMI-camera via NDI appeared in TrueConf.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What's the sound?</font></font></h2><br>
<img src="https://habrastorage.org/webt/5v/lc/ei/5vlceisfjup8w_keruygyoulnoy.jpeg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We collect sound from two radio microphones and a phonogram using a good audio remote control and start up an external audio card in vMix. </font><font style="vertical-align: inherit;">It is this audio sum that we send to the air and to our NDI stream for Trukonf. </font><font style="vertical-align: inherit;">There, instead of the microphone of the laptop, we select NewTek NDI Audio. </font><font style="vertical-align: inherit;">Now all our dancers see and hear in a call our beautiful picture and high-quality sound.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ethereal picture</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
TrueConf chose the usual mode of phoning, when everyone sees everyone. </font><font style="vertical-align: inherit;">There was another option when we see everyone, and everyone sees only the leaders. </font><font style="vertical-align: inherit;">This is more effective, but then there would be no mass effect. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/bh/gw/yt/bhgwyt231u4btanw1-gt4w7agza.jpeg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In the ‚Äúeveryone sees everyone‚Äù call format, you can select any window that needs to be made large. </font><font style="vertical-align: inherit;">So the participants saw the leading couple, and we created another user from whose account the image was broadcast and switched between the pairs. </font><font style="vertical-align: inherit;">We clicked on the desired pair and enlarged their screen, the remaining pairs were small below. </font><font style="vertical-align: inherit;">Sometimes all screens were displayed to show how many people were dancing in sync.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Now about synchronization</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
You probably wondered about the delay. Yes, she was, about 1-2 seconds in both directions. Here we play music, the sound comes to the participants later, they dance to this rhythm, and their image returns to us even later. We decided to neglect this within the framework of the format, and still it looked large-scale and interesting. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
You can solve the issue of synchronization for viewers by artificially delaying sound on our air for social networks. Then the stream‚Äôs viewer would see the participants dancing to the rhythm of the music. But not the fact that the image comes from everyone with the same delay. This is another complication of the ether scheme, we will definitely do it next time.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
By the way, in the NDI Tools package there is another mini-program - Scan Converter. </font><font style="vertical-align: inherit;">It creates an NDI signal, capturing your screen or webcam. </font><font style="vertical-align: inherit;">This is how easy it is to organize an ether, for example, cyber competition inside the local network, having only this network and webcams. </font><font style="vertical-align: inherit;">No more devices are needed. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/j_/qo/tk/j_qotkmfhackaibgynkxlzruylc.jpeg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For us, this was another project where it was necessary to try out new solutions in business that were not yet encountered in battle streams. </font><font style="vertical-align: inherit;">I will be happy to answer all your comments, carefully and with interest I will study the wishes and recommendations, if you know how to do better. </font><font style="vertical-align: inherit;">The world of streams is endless, many technologies appear before our eyes and you can learn together faster. </font><font style="vertical-align: inherit;">Below you can see the overview video from the site.</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/RemrkGwDP2g" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en506338/index.html">Gold Against Cancer: Biocompatible Gold Nanoparticles For Individual Oncotherapy Received</a></li>
<li><a href="../en506340/index.html">What Amazon's new safeguards look like</a></li>
<li><a href="../en506342/index.html">How an automation system solves the problems of a sports club</a></li>
<li><a href="../en506346/index.html">Million in a month: how to launch a startup in Europe on your own</a></li>
<li><a href="../en506358/index.html">3 options for court behavior when they receive cases of prosecutorial locks</a></li>
<li><a href="../en506370/index.html">Compare the performance of Check Constraint and Foreign Key in SQL Server</a></li>
<li><a href="../en506372/index.html">–£ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–∞ –Ω–∞–π–¥–µ–Ω –∏–Ω—Å—Ç–∏–Ω–∫—Ç —Ä–∞–∑–º–Ω–æ–∂–µ–Ω–∏—è</a></li>
<li><a href="../en506380/index.html">Free or domestic software. Standard or free tuition</a></li>
<li><a href="../en506384/index.html">Neural network - training without a teacher. Policy Gradient Method</a></li>
<li><a href="../en506386/index.html">–ö–∞–∫ –±—Ä–æ—Å–∏—Ç—å —à–∫–æ–ª—É –∏ –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ —Ä–µ–±–µ–Ω–∫–∞ –Ω–∞ —É–¥–∞–ª—ë–Ω–∫—É</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>