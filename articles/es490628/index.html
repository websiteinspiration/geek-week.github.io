<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üõ≥Ô∏è üë®üèª‚Äçüöí üíÄ ¬øQu√© hacer cuando CSS bloquea el an√°lisis de p√°ginas? ü§µüèø üß† üçú</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recientemente, realic√© una auditor√≠a de un sitio y encontr√© un patr√≥n preload/polyfillque ya he visto con varios clientes. Hoy en d√≠a, no se recomiend...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>¬øQu√© hacer cuando CSS bloquea el an√°lisis de p√°ginas?</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/490628/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Recientemente, realic√© una auditor√≠a de un sitio y encontr√© un patr√≥n </font></font><code>preload/polyfill</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que ya he visto con varios clientes. </font><font style="vertical-align: inherit;">Hoy en d√≠a, no se recomienda el uso de este patr√≥n anteriormente popular. </font><font style="vertical-align: inherit;">Sin embargo, es √∫til considerarlo para ilustrar la importancia del uso cuidadoso del mecanismo de precarga de materiales por parte de los navegadores web. </font><font style="vertical-align: inherit;">Tambi√©n es interesante porque le permite demostrar un ejemplo del mundo real de c√≥mo el orden de los elementos en un documento puede afectar el rendimiento (esto es lo que se discute en </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">este</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> maravilloso art√≠culo de Harry Roberts). </font><font style="vertical-align: inherit;">
El material, cuya traducci√≥n publicamos hoy, est√° dedicado al an√°lisis de situaciones en las que el manejo inadecuado e inoportuno de los recursos CSS afecta el rendimiento de las p√°ginas web.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/webt/j9/ku/dh/j9kudhouixuhlvhywk7misjih8w.jpeg"></a><br>
<br><font style="vertical-align: inherit;"></font><br>
<a name="habracut"></a><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sobre loadCSS</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Soy un gran admirador del </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Filament Group</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : lanzan una incre√≠ble cantidad de grandes proyectos. Adem√°s, constantemente crean herramientas invaluables y las comparten para mejorar la web. Una de estas herramientas es </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">loadCSS</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que durante mucho tiempo fue la herramienta que recomend√© que todos usaran para cargar recursos CSS no cr√≠ticos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aunque esto ahora ha cambiado (y el Filament Group ha publicado un excelente </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">art√≠culo</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sobre lo que sus empleados prefieren usar en estos d√≠as), todav√≠a, cuando audito sitios, a menudo veo c√≥mo lo </font></font><code>loadCSS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">usan en la producci√≥n. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Uno de los patrones que he encontrado es el patr√≥n.</font></font><code>preload/polyfill</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Con este enfoque, todos los archivos con estilos se cargan en modo de precarga (el atributo de los </font></font><code>rel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">enlaces correspondientes se establece en </font></font><code>preload</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">). </font><font style="vertical-align: inherit;">Despu√©s de eso, cuando est√©n listos para usar, aplique sus eventos </font></font><code>onload</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para conectarlos a la p√°gina.</font></font><br>
<br>
<pre><code class="javascript hljs">&lt;link rel=<span class="hljs-string">"preload"</span> href=<span class="hljs-string">"path/to/mystylesheet.css"</span> <span class="hljs-keyword">as</span>=<span class="hljs-string">"style"</span> onload=<span class="hljs-string">"this.rel='stylesheet'"</span>&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">noscript</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"path/to/mystylesheet.css"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">noscript</span>&gt;</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dado que no todos los navegadores admiten el dise√±o </font></font><code>&lt;a href="https://caniuse.com/#feat=link-rel-preload"&gt;&lt;link rel="preload"&gt;&lt;/a&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, el proyecto </font></font><code>loadCSS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ofrece a los desarrolladores un polyfill conveniente, que se agrega a la p√°gina despu√©s de la descripci√≥n de los enlaces relevantes:</font></font><br>
<br>
<pre><code class="javascript hljs">&lt;link rel=<span class="hljs-string">"preload"</span> href=<span class="hljs-string">"path/to/mystylesheet.css"</span> <span class="hljs-keyword">as</span>=<span class="hljs-string">"style"</span> onload=<span class="hljs-string">"this.rel='stylesheet'"</span>&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">noscript</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"path/to/mystylesheet.css"</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">noscript</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-comment">/*! loadCSS rel=preload polyfill. [c]2017 Filament Group, Inc. MIT License */</span>
(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{ ... }());
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span></code></pre><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Desorden en las prioridades de la red</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nunca he sido un fan√°tico ardiente de este patr√≥n. </font><font style="vertical-align: inherit;">La precarga es una herramienta grosera. </font><font style="vertical-align: inherit;">Los materiales descargados mediante enlaces de atributos </font></font><code>rel="preload"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">luchan con √©xito con otros materiales por recursos de red. </font><font style="vertical-align: inherit;">El uso </font></font><code>preload</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">supone que las hojas de estilo que se cargan de forma as√≠ncrona debido al hecho de que no desempe√±an un papel cr√≠tico en el resultado de una p√°gina reciben una prioridad muy alta de los navegadores. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La siguiente imagen, tomada de WebPageTest, demuestra muy bien este problema. </font><font style="vertical-align: inherit;">En las l√≠neas 3-6, puede ver la carga asincr√≥nica de archivos CSS utilizando un patr√≥n </font></font><code>preload</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Pero, aunque los desarrolladores consideran que estos archivos no son tan importantes que descargarlos bloquear√≠a la representaci√≥n, utilice</font></font><code>preload</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> significa que se cargar√°n antes de que el navegador reciba los recursos restantes.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8f9/07f/75a/8f907f75ae91cafe98091b00c2e7750e.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Los archivos CSS que usan el patr√≥n de precarga cuando se cargan llegar√°n al navegador antes que otros recursos, a pesar de que no son recursos esenciales para la representaci√≥n inicial de una p√°gina</font></font></font></i><br>
 <br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bloqueo del analizador HTML</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los problemas asociados con la prioridad de la carga de recursos ya son suficientes para evitar usar el patr√≥n en la mayor√≠a de las situaciones </font></font><code>preload</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Pero en este caso, la situaci√≥n se ve agravada por la presencia de otra hoja de estilo, que se carga de la manera habitual.</font></font><br>
<br>
<pre><code class="javascript hljs">&lt;link rel=<span class="hljs-string">"stylesheet"</span> href=<span class="hljs-string">"path/to/main.css"</span> /&gt;<font></font>
&lt;link rel="preload" href="path/to/mystylesheet.css" as="style" onload="this.rel='stylesheet'"&gt;<font></font>
&lt;noscript&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;link rel="stylesheet" href="path/to/mystylesheet.css"&gt;<font></font>
&lt;/noscript&gt;<font></font>
&lt;script&gt;<font></font>
/*! loadCSS rel=preload polyfill. [c]2017 Filament Group, Inc. MIT License */<font></font>
(function(){ ... }());<font></font>
&lt;/script&gt;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Existen los mismos problemas cuando se utiliza </font></font><code>preload</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">el hecho de que no los archivos m√°s importantes tienen alta prioridad. Pero es igual de importante, y quiz√°s menos obvio, qu√© efecto tiene esto en la capacidad del navegador para analizar la p√°gina. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Una vez m√°s, esto ya se ha </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">escrito</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en detalle </font><font style="vertical-align: inherit;">, por lo que recomiendo leer ese material para comprender mejor lo que est√° sucediendo. Aqu√≠ hablar√© sobre esto brevemente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por lo general, cargar estilos bloquea la representaci√≥n de la p√°gina. El navegador necesita consultar y analizar estilos para poder mostrar la p√°gina. Sin embargo, esto no impide que el navegador analice el resto del c√≥digo HTML. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los scripts, por otro lado, bloquean el analizador si no est√°n marcados como </font></font><code>defer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o </font></font><code>async</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dado que el navegador debe suponer que el script puede manipular el contenido de la p√°gina o los estilos aplicados, debe tener cuidado cuando se ejecuta este script. </font><font style="vertical-align: inherit;">Si el navegador sabe que se est√° cargando alg√∫n c√≥digo CSS, esperar√° la llegada de este c√≥digo CSS y luego ejecutar√° el script. </font><font style="vertical-align: inherit;">Y dado que el navegador no puede continuar analizando el documento hasta que se ejecute el script, esto significa que los estilos ya no solo bloquean la representaci√≥n. </font><font style="vertical-align: inherit;">Evitan que el navegador analice HTML. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este comportamiento es cierto tanto para los scripts externos como para los scripts incrustados en la p√°gina. </font><font style="vertical-align: inherit;">Si se carga CSS, los scripts en l√≠nea no se ejecutan hasta que este CSS llega al navegador.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Estudio de problemas</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La forma m√°s comprensible de visualizar este problema es usar las herramientas de desarrollador de Chrome (realmente me gusta el nivel al que han crecido estas herramientas). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entre las herramientas de Chrome hay una pesta√±a </font></font><code>Performance</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">con la que puede grabar el perfil de carga de la p√°gina. Recomiendo ralentizar artificialmente la conexi√≥n de red para que el problema se manifieste m√°s brillante. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En este caso, prob√© usando la configuraci√≥n de red Fast 3G. Si observa detenidamente lo que sucede con el hilo principal, puede comprender que la solicitud para cargar el archivo CSS se produce al comienzo del an√°lisis HTML (aproximadamente 1,7 segundos despu√©s de que la p√°gina comienza a cargarse).</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/40b/881/a00/40b881a0060365bcbb5e4944b6784a2d.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un peque√±o rect√°ngulo debajo del bloque de an√°lisis HTML representa una solicitud para recibir un archivo CSS.</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Durante el siguiente per√≠odo de tiempo, que es aproximadamente un segundo, el hilo principal est√° inactivo. </font><font style="vertical-align: inherit;">Aqu√≠ puedes ver peque√±as islas de actividad. </font><font style="vertical-align: inherit;">Este es un desencadenante de eventos que indican la finalizaci√≥n de la carga de estilos; es el env√≠o por el mecanismo de precarga de recursos de otras solicitudes. </font><font style="vertical-align: inherit;">Pero el navegador deja de analizar HTML por completo.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/059/fca/6f1/059fca6f1820ca9a3b841140ab912d4e.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si observa el panorama general, resulta que despu√©s del inicio de la carga de CSS, la transmisi√≥n principal est√° inactiva durante m√°s de 1.1 segundos.</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Por lo tanto, han pasado 2.8 segundos, el estilo se carga y el navegador lo procesa. </font><font style="vertical-align: inherit;">Solo entonces vemos el procesamiento de la secuencia de comandos incorporada, y despu√©s de eso, el navegador finalmente vuelve al an√°lisis HTML.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/65a/a96/da2/65aa96da21d2e1ac6db4116ad54a8f80.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CSS llega en aproximadamente 2.8 segundos, despu√©s de lo cual vemos que el navegador contin√∫a analizando HTML</font></font></font></i><br>
 <br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Firefox es una buena excepci√≥n</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El comportamiento anterior es com√∫n para Chrome, Edge y Safari. </font><font style="vertical-align: inherit;">Firefox es una buena excepci√≥n a la lista de navegadores populares. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todos los dem√°s navegadores suspenden el an√°lisis HTML, pero utilizan un analizador proactivo (un medio para precargar materiales) para ver el c√≥digo de los enlaces a recursos externos y cumplir con las solicitudes de carga de estos recursos. </font><font style="vertical-align: inherit;">Firefox, sin embargo, va un paso m√°s all√° en este asunto: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">construye</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> especulativamente </font><font style="vertical-align: inherit;">un √°rbol DOM, aunque espera que el script se ejecute.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A menos que el script manipule el DOM, lo que lleva a la necesidad de descartar los resultados del an√°lisis especulativo, este enfoque permite que Firefox se aproveche. Por supuesto, si el navegador tiene que soltar el √°rbol DOM construido especulativamente, significa que no hizo nada √∫til al construir este √°rbol. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este es un enfoque interesante. Ten√≠a mucha curiosidad por saber qu√© tan efectivo es. Ahora, sin embargo, no hay informaci√≥n sobre esto en Firefox Performance Profiler. All√≠ no puede averiguar si el analizador especulativo funcion√≥, si es necesario rehacer el trabajo realizado y si a√∫n necesita ser rehecho, c√≥mo esto afectar√° el rendimiento.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Habl√© con los responsables de las herramientas para desarrolladores de Firefox, y puedo decir que tienen ideas interesantes sobre c√≥mo presentar dicha informaci√≥n en el generador de perfiles en el futuro. </font><font style="vertical-align: inherit;">Espero que tengan √©xito.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Soluci√≥n al problema</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En el caso del cliente, que mencion√© al principio, el primer paso para resolver este problema parec√≠a extremadamente simple: deshacerse del patr√≥n </font></font><code>preload/polyfill</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">La precarga de CSS no cr√≠tico no tiene sentido. </font><font style="vertical-align: inherit;">Aqu√≠ debe cambiar a usar, en lugar de </font></font><code>rel="preload"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, un atributo </font></font><code>media="print"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Esto es exactamente lo que recomiendan los expertos del Grupo Filamento. </font><font style="vertical-align: inherit;">Este enfoque, adem√°s, le permite deshacerse por completo de polyfill.</font></font><br>
<br>
<pre><code class="javascript hljs">&lt;link rel=<span class="hljs-string">"stylesheet"</span> href=<span class="hljs-string">"/path/to/my.css"</span> media=<span class="hljs-string">"print"</span> onload=<span class="hljs-string">"this.media='all'"</span>&gt;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esto ya nos coloca en una mejor posici√≥n: ahora las prioridades de la red est√°n mucho mejor alineadas con la importancia real de las descargas. Y tambi√©n nos deshacemos del script incorporado. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En este caso, todav√≠a hay otro script incorporado ubicado en el encabezado del documento, debajo de la l√≠nea que inicia la solicitud para cargar CSS. Si mueve este script de modo que est√© delante de la l√≠nea que carga el CSS, esto eliminar√° el bloqueo del analizador. Si analiza la p√°gina nuevamente utilizando las Herramientas para desarrolladores de Chrome, la diferencia ser√° completamente obvia.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d16/c64/170/d16c64170a5ae365154626fc77eea21f.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Antes de realizar cambios en el c√≥digo de la p√°gina, el analizador HTML se detuvo en la l√≠nea 1939, despu√©s de haber encontrado un script incorporado, y permaneci√≥ aqu√≠ durante aproximadamente un segundo. Despu√©s de la optimizaci√≥n, pudo llegar a la l√≠nea 5281</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Anteriormente, el analizador se detuvo en la l√≠nea 1939 y estaba esperando que se cargara CSS, pero ahora llega a la l√≠nea 5281. All√≠, al final de la p√°gina, hay otro script incorporado que detiene el analizador nuevamente.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esta es una soluci√≥n r√°pida al problema. Esta no es la opci√≥n que representa la soluci√≥n final al problema. Cambiar el orden de los elementos y deshacerse del patr√≥n</font></font><code>preload/polyfill</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">es solo el primer paso. Puede resolver mejor este problema incrustando c√≥digo CSS cr√≠tico en una p√°gina, en lugar de cargarlo desde un archivo externo. Modelo</font></font><code>preload/polyfill</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dise√±ado para ser utilizado adem√°s de CSS en l√≠nea. </font><font style="vertical-align: inherit;">Esto nos permite ignorar por completo los problemas asociados con los scripts y asegurarnos de que el navegador, despu√©s de ejecutar la primera solicitud, tenga todos los estilos necesarios para representar la p√°gina. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero por ahora, debe tenerse en cuenta que podemos lograr un buen aumento del rendimiento haciendo cambios muy peque√±os en el proyecto con respecto a la forma en que se cargan los estilos y el orden de los elementos en el DOM.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Resumen</font></font></font></h2><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si usa un </font></font><code>loadCSS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">patr√≥n </font></font><code>preload/polyfill</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, vaya al patr√≥n de carga de estilo </font></font><code>print</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si tiene estilos externos que se cargan de la manera habitual (es decir, utilizando enlaces regulares a archivos de estos estilos), mueva todos los scripts incorporados que se pueden mover sobre los enlaces para cargar estilos.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Incruste estilos cr√≠ticos en la p√°gina para garantizar el inicio m√°s r√°pido posible del renderizado.</font></font></li>
</ul><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬°Queridos lectores! </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬øHa encontrado problemas para ralentizar el renderizado de p√°ginas debido a CSS? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬°PS </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
RUVDS felicita a todos los profesionales de TI el 8 de marzo! </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este a√±o, decidimos no dar tulipanes y no hacer una selecci√≥n de regalos geek. </font><font style="vertical-align: inherit;">Tomamos un camino diferente y creamos la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p√°gina IT is female</font></font></b></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para mostrar la presencia de especialistas femeninas en IT.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es490618/index.html">Tampones de pila de goroutina</a></li>
<li><a href="../es490620/index.html">Cuando escucho las palabras "restaur√≥ la red neuronal", subo para verificar las copias de seguridad</a></li>
<li><a href="../es490622/index.html">Combatir p√©rdidas de memoria en aplicaciones web</a></li>
<li><a href="../es490624/index.html">Encabezado HTTP de caracter√≠stica-pol√≠tica y control del navegador web</a></li>
<li><a href="../es490626/index.html">Una gu√≠a completa de datos- * atributos HTML</a></li>
<li><a href="../es490630/index.html">Carga de matrices NumPy desde disco: comparaci√≥n de memmap () y Zarr / HDF5</a></li>
<li><a href="../es490634/index.html">Eventos digitales en Mosc√∫ del 2 al 8 de marzo.</a></li>
<li><a href="../es490636/index.html">Eventos digitales en San Petersburgo del 2 al 8 de marzo.</a></li>
<li><a href="../es490640/index.html">Sobrecarga en C ++. Parte III Sobrecarga de declaraciones nuevas / eliminar</a></li>
<li><a href="../es490642/index.html">Plugin para monitorear aplicaciones K8s DevOpsProdigy KubeGraf v1.3.0: nueva versi√≥n y nuevas caracter√≠sticas</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>