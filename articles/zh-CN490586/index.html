<!doctype html>
<html class="no-js" lang="zh-CN">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🏧 👨🏻 🧘🏽 什么是Spring Framework？从依赖注入到Web MVC 🦓 🎙️ 🍵</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="您可以将本手册用于多种目的：
 

- 了解什么是Spring框架
- 其核心功能如何工作：例如依赖项注入或Web MVC
- 这也是详尽的FAQ（常见问题列表）
 

注意：约9000字的文章可能不值得在移动设备上阅读。收藏它，稍后再回来。甚至在计算机上，一次吃掉一只大象：-)
 内容
 

- ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>什么是Spring Framework？从依赖注入到Web MVC</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/490586/"><p><img src="https://habrastorage.org/webt/fo/sj/jq/fosjjqngdcvbwvaoqsr_3zgnf4q.png"></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您可以将本手册用于多种目的：</font></font></p><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">了解什么是Spring框架</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">其核心功能如何工作：例如依赖项注入或Web MVC</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这也是详尽的FAQ（常见问题列表）</font></font></li>
</ul><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意：约9000字的文章可能不值得在移动设备上阅读。</font><font style="vertical-align: inherit;">收藏它，稍后再回来。</font><font style="vertical-align: inherit;">甚至在计算机上，一次</font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">吃掉</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一只大象：-)</font></font></p><br>
<h3 id="soderzhanie"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内容</font></font></h3><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">介绍</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">依赖注入基础</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Spring IOC /依赖注入容器</font></font></li>
<li>Spring AOP (- )  </li>
<li>  Spring</li>
<li>Spring Web MVC</li>
<li>  Spring Framework</li>
<li>Spring Framework:   </li>
<li><a name="habracut"></a><br>
<blockquote><u> </u>:<br>
              .      .<br>
</blockquote></li>
</ul><br>
<h2 id="vvedenie"></h2><br>
<h3 id="slozhnost-ekosistemy-spring">  Spring</h3><br>
<p>   Spring,             <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">spring.io</a>,  ,   Spring      21   . !</p><br>
<p> ,       Spring    ,    ,      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">Spring Boot</a>  Spring Data.</p><br>
<p>     ,     : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">Spring Framework</a>. ?</p><br>
<p>   ,  Spring Framework      . Spring Boot, Spring Data, Spring Batch —     Spring.</p><br>
<p>   :</p><br>
<ul>
<li>   Spring Framework     <em></em>.       , . Spring Boot,   , ,      Spring Framework .</li>
<li> ~ 15     ,     80% Spring Framework,      .</li>
</ul><br>
<h2 id="chto-takoe-spring-framework">  Spring Framework?</h2><br>
<h4 id="kratkiy-otvet"> :</h4><br>
<p>  Spring Framework    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">  </a>,     (:    , , - , RPC, - MVC).         Java-.</p><br>
<p>    ,   ?</p><br>
<h4 id="k-schastyu-est-i-dlinnyy-otvet"> ,    :</h4><br>
<p>   .</p><br>
<h2 id="osnovy-vnedreniya-zavisimostey">  </h2><br>
<p>   ,    ,        <strong> Spring IOC / Dependency Injection</strong>.     .</p><br>
<h3 id="chto-takoe-zavisimost">  ?</h3><br>
<p>,    Java ,            .      DAO (   )  . ,     UserDAO.</p><br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserDao</span> </span>{<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> User <span class="hljs-title">findById</span><span class="hljs-params">(Integer id)</span> </span>{
        <span class="hljs-comment">// execute a sql query to find the user</span><font></font>
    }<font></font>
}</code></pre><br>
<p>  UserDAO    ,             . </p><br>
<p>   SQL ,   UserDAO     .    Java , ,        ,  DataSource. ,       :</p><br>
<pre><code class="java hljs"><span class="hljs-keyword">import</span> javax.sql.DataSource;<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserDao</span> </span>{<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> User <span class="hljs-title">findById</span><span class="hljs-params">(Integer id)</span> <span class="hljs-keyword">throws</span> SQLException </span>{
        <span class="hljs-keyword">try</span> (Connection connection = dataSource.getConnection()) { <span class="hljs-comment">// (1)</span>
               PreparedStatement selectStatement = connection.prepareStatement(<span class="hljs-string">"select * from users where id =  ?"</span>);
               <span class="hljs-comment">// use the connection etc.</span><font></font>
        }<font></font>
    }<font></font>
<font></font>
}</code></pre><br>
<ol>
<li>  ,   UserDao      ? ,  DAO <strong><em> </em></strong>       SQL-.</li>
</ol><br>
<h3 id="vnedrenie-zavisimostey-s-pomoschyu-new">    new()</h3><br>
<p>           ,  ,    . ,      MySQL  UserDAO   :</p><br>
<pre><code class="java hljs"><span class="hljs-keyword">import</span> com.mysql.cj.jdbc.MysqlDataSource;<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserDao</span> </span>{<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> User <span class="hljs-title">findById</span><span class="hljs-params">(Integer id)</span> </span>{<font></font>
        MysqlDataSource dataSource = <span class="hljs-keyword">new</span> MysqlDataSource(); <span class="hljs-comment">// (1)</span>
        dataSource.setURL(<span class="hljs-string">"jdbc:mysql://localhost:3306/myDatabase"</span>);<font></font>
        dataSource.setUser(<span class="hljs-string">"root"</span>);<font></font>
        dataSource.setPassword(<span class="hljs-string">"s3cr3t"</span>);<font></font>
<font></font>
        <span class="hljs-keyword">try</span> (Connection connection = dataSource.getConnection()) { <span class="hljs-comment">// (2)</span>
             PreparedStatement selectStatement = connection.prepareStatement(<span class="hljs-string">"select * from users where id =  ?"</span>);
             <span class="hljs-comment">// execute the statement..convert the raw jdbc resultset to a user</span>
             <span class="hljs-keyword">return</span> user;<font></font>
        }<font></font>
    }<font></font>
}</code></pre><br>
<ol>
<li>      MySQL,     MysqlDataSource      url/username/password    . </li>
<li>        .</li>
</ol><br>
<p> ,   ,  ,      UserDao  , findByFirstName. </p><br>
<p> ,        .         UserDAO    ,   <strong>newDataSource</strong>.</p><br>
<pre><code class="java hljs"><span class="hljs-keyword">import</span> com.mysql.cj.jdbc.MysqlDataSource;<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserDao</span> </span>{<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> User <span class="hljs-title">findById</span><span class="hljs-params">(Integer id)</span> </span>{
        <span class="hljs-keyword">try</span> (Connection connection = newDataSource().getConnection()) { <span class="hljs-comment">// (1)</span>
               PreparedStatement selectStatement = connection.prepareStatement(<span class="hljs-string">"select * from users where id =  ?"</span>);
               <span class="hljs-comment">// TODO execute the select , handle exceptions, return the user</span><font></font>
        }<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> User <span class="hljs-title">findByFirstName</span><span class="hljs-params">(String firstName)</span> </span>{
        <span class="hljs-keyword">try</span> (Connection connection = newDataSource().getConnection()) { <span class="hljs-comment">// (2)</span>
               PreparedStatement selectStatement = connection.prepareStatement(<span class="hljs-string">"select * from users where first_name =  ?"</span>);
               <span class="hljs-comment">// TODO execute the select ,  handle exceptions, return the user</span><font></font>
        }<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> DataSource <span class="hljs-title">newDataSource</span><span class="hljs-params">()</span> </span>{<font></font>
        MysqlDataSource dataSource = <span class="hljs-keyword">new</span> MysqlDataSource(); <span class="hljs-comment">// (3)</span>
        dataSource.setUser(<span class="hljs-string">"root"</span>);<font></font>
        dataSource.setPassword(<span class="hljs-string">"s3cr3t"</span>);<font></font>
        dataSource.setURL(<span class="hljs-string">"jdbc:mysql://localhost:3306/myDatabase"</span>);
        <span class="hljs-keyword">return</span> dataSource;<font></font>
    }<font></font>
}<font></font>
</code></pre><br>
<ol>
<li>findById       newDataSource().</li>
<li>findByFirstName        newDataSource(). </li>
<li>    ,     .</li>
</ol><br>
<p>  ,    :</p><br>
<ol>
<li><p> ,       ProductDAO,     SQL?  ProductDAO     DataSource,        UserDAO.           ,   DataSource.</p><br>
</li>
<li><p>         SQL. ,  DataSource   -   Java-    .      .    ,      <strong></strong>      ,  ,      .                UserDao,        ,         DAO.</p><br>
</li>
</ol><br>
<h3 id="zavisimosti-v-globalnom-klasse-prilozheniya">    </h3><br>
<p>   ,        Application,    :</p><br>
<pre><code class="java hljs"><span class="hljs-keyword">import</span> com.mysql.cj.jdbc.MysqlDataSource;<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> Application {<font></font>
<font></font>
    INSTANCE;<font></font>
<font></font>
    <span class="hljs-keyword">private</span> DataSource dataSource;<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> DataSource <span class="hljs-title">dataSource</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">if</span> (dataSource == <span class="hljs-keyword">null</span>) {<font></font>
            MysqlDataSource dataSource = <span class="hljs-keyword">new</span> MysqlDataSource();<font></font>
            dataSource.setUser(<span class="hljs-string">"root"</span>);<font></font>
            dataSource.setPassword(<span class="hljs-string">"s3cr3t"</span>);<font></font>
            dataSource.setURL(<span class="hljs-string">"jdbc:mysql://localhost:3306/myDatabase"</span>);
            <span class="hljs-keyword">this</span>.dataSource = dataSource;<font></font>
        }<font></font>
        <span class="hljs-keyword">return</span> dataSource;<font></font>
    }<font></font>
}</code></pre><br>
<p>  UserDAO    :</p><br>
<pre><code class="java hljs"><span class="hljs-keyword">import</span> com.yourpackage.Application;<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserDao</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">public</span> User <span class="hljs-title">findById</span><span class="hljs-params">(Integer id)</span> </span>{
        <span class="hljs-keyword">try</span> (Connection connection = Application.INSTANCE.dataSource().getConnection()) { <span class="hljs-comment">// (1)</span>
               PreparedStatement selectStatement = connection.prepareStatement(<span class="hljs-string">"select * from users where id =  ?"</span>);
               <span class="hljs-comment">// TODO execute the select etc.</span><font></font>
        }<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> User <span class="hljs-title">findByFirstName</span><span class="hljs-params">(String firstName)</span> </span>{
        <span class="hljs-keyword">try</span> (Connection connection = Application.INSTANCE.dataSource().getConnection()) { <span class="hljs-comment">// (2)</span>
               PreparedStatement selectStatement = connection.prepareStatement(<span class="hljs-string">"select * from users where first_name =  ?"</span>);
               <span class="hljs-comment">// TODO execute the select etc.</span><font></font>
        }<font></font>
    }<font></font>
}</code></pre><br>
<p>    :</p><br>
<ol>
<li> UserDAO        DataSource,       Application   .        DAO.</li>
<li>     ( ,      INSTANCE),           DataSource.</li>
</ol><br>
<p>       :</p><br>
<ol>
<li>UserDAO <strong></strong>  ,    ,      → Application.INSTANCE.dataSource().</li>
<li>    ,        ,       Application.java,     .           /   ..</li>
</ol><br>
<h3 id="inversiya-upravleniya-ioc-inversion-of-control">  (IoC, Inversion of Control)</h3><br>
<p>     .</p><br>
<p>  ,      UserDAO      <strong> </strong>?  ,    Application.INSTANCE.dataSource(),  UserDAO   (-) ,    ,    ,  /  /    ?</p><br>
<p> ,   <strong><em> </em></strong> (Inversion of Control).</p><br>
<p> ,      UserDAO,   .</p><br>
<pre><code class="java hljs"><span class="hljs-keyword">import</span> javax.sql.DataSource;<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserDao</span> </span>{<font></font>
<font></font>
    <span class="hljs-keyword">private</span> DataSource dataSource;<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-title">UserDao</span><span class="hljs-params">(DataSource dataSource)</span> </span>{ <span class="hljs-comment">// (1)</span>
        <span class="hljs-keyword">this</span>.dataSource = dataSource;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> User <span class="hljs-title">findById</span><span class="hljs-params">(Integer id)</span> </span>{
        <span class="hljs-keyword">try</span> (Connection connection = dataSource.getConnection()) { <span class="hljs-comment">// (2)</span>
               PreparedStatement selectStatement = connection.prepareStatement(<span class="hljs-string">"select * from users where id =  ?"</span>);
               <span class="hljs-comment">// TODO execute the select etc.</span><font></font>
        }<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> User <span class="hljs-title">findByFirstName</span><span class="hljs-params">(String firstName)</span> </span>{
        <span class="hljs-keyword">try</span> (Connection connection = dataSource.getConnection()) { <span class="hljs-comment">// (2)</span>
               PreparedStatement selectStatement = connection.prepareStatement(<span class="hljs-string">"select * from users where first_name =  ?"</span>);
               <span class="hljs-comment">// TODO execute the select etc.</span><font></font>
        }<font></font>
    }<font></font>
}</code></pre><br>
<ol>
<li> ,     UserDao   ,       .</li>
<li> findByX      .</li>
</ol><br>
<p>   UserDao    .        ,   ,     .    ,  «    (  ) ,      ».</p><br>
<p> ,      .      «new UserService()»,        UserDao(dataSource).</p><br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyApplication</span> </span>{<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{<font></font>
        UserDao userDao = <span class="hljs-keyword">new</span> UserDao(Application.INSTANCE.dataSource());<font></font>
        User user1 = userDao.findById(<span class="hljs-number">1</span>);<font></font>
        User user2 = userDao.findById(<span class="hljs-number">2</span>);
        <span class="hljs-comment">// etc ...</span><font></font>
    }<font></font>
}</code></pre><br>
<h3 id="konteynery-dlya-vnedreniya-zavisimostey">   </h3><br>
<p>,   ,  ,  ,    UserDAO     ,  ,   DataSource .</p><br>
<p>    ,   <strong>-</strong> ,   UserDAO     DataSource,  ,   ?        <strong></strong> :  DataSource   UserDao?</p><br>
<p> -        ,     Spring.</p><br>
<h2 id="konteyner-spring-ioc--dependency-injection"> Spring IOC / Dependency Injection</h2><br>
<p>     , Spring Framework       ,           (.  ).  ,   .</p><br>
<h3 id="chto-takoe-applicationcontext-dlya-chego-tebe-eto">  ApplicationContext?    ?</h3><br>
<p>,            (:     ),  <strong><em>ApplicationContext</em></strong>   Spring.</p><br>
<p>   ,     (  UserDao  DataSource   ,   ,       ):</p><br>
<pre><code class="java hljs"><span class="hljs-keyword">import</span> org.springframework.context.ApplicationContext;
<span class="hljs-keyword">import</span> org.springframework.context.annotation.AnnotationConfigApplicationContext;
<span class="hljs-keyword">import</span> javax.sql.DataSource;<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyApplication</span> </span>{<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{<font></font>
        ApplicationContext ctx = <span class="hljs-keyword">new</span> AnnotationConfigApplicationContext(someConfigClass); <span class="hljs-comment">// (1)</span><font></font>
<font></font>
        UserDao userDao = ctx.getBean(UserDao.class); // (<span class="hljs-number">2</span>)<font></font>
        User user1 = userDao.findById(<span class="hljs-number">1</span>);<font></font>
        User user2 = userDao.findById(<span class="hljs-number">2</span>);<font></font>
<font></font>
        DataSource dataSource = ctx.getBean(DataSource.class); // (<span class="hljs-number">3</span>)
        <span class="hljs-comment">// etc ...</span><font></font>
    }<font></font>
}</code></pre><br>
<ol>
<li>    Spring ApplicationContext.     ,   ,   .</li>
<li>ApplicationContext      UserDao,        DataSource.</li>
<li>ApplicationContext       ,   <strong> </strong>  ,     UserDao.</li>
</ol><br>
<p>  ,   ? ,   ,       ,     ApplicationContext    !</p><br>
<p>   ?</p><br>
<h3 id="chto-takoe-applicationcontextconfiguration-kak-postroit-applicationcontexts-iz-konfiguraciy">  ApplicationContextConfiguration?   ApplicationContexts  .</h3><br>
<p>         someConfigClass   AnnotationConfigApplicationContext.   :</p><br>
<pre><code class="java hljs"><span class="hljs-keyword">import</span> org.springframework.context.annotation.AnnotationConfigApplicationContext;
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyApplication</span> </span>{<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{<font></font>
        ApplicationContext ctx = <span class="hljs-keyword">new</span> AnnotationConfigApplicationContext(someConfigClass); <span class="hljs-comment">// (1)</span>
        <span class="hljs-comment">// ...</span><font></font>
    }<font></font>
}</code></pre><br>
<p>,        ApplicationContext,     ,     :</p><br>
<pre><code class="java hljs"><span class="hljs-keyword">import</span> org.springframework.context.annotation.Bean;
<span class="hljs-keyword">import</span> org.springframework.context.annotation.Configuration;<font></font>
<font></font>
<span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyApplicationContextConfiguration</span> </span>{  <span class="hljs-comment">// (1)</span><font></font>
<font></font>
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> DataSource <span class="hljs-title">dataSource</span><span class="hljs-params">()</span> </span>{  <span class="hljs-comment">// (2)</span>
        MysqlDataSource dataSource = <span class="hljs-keyword">new</span> MysqlDataSource();<font></font>
        dataSource.setUser(<span class="hljs-string">"root"</span>);<font></font>
        dataSource.setPassword(<span class="hljs-string">"s3cr3t"</span>);<font></font>
        dataSource.setURL(<span class="hljs-string">"jdbc:mysql://localhost:3306/myDatabase"</span>);
        <span class="hljs-keyword">return</span> dataSource;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> UserDao <span class="hljs-title">userDao</span><span class="hljs-params">()</span> </span>{ <span class="hljs-comment">// (3)</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> UserDao(dataSource());<font></font>
    }<font></font>
<font></font>
}</code></pre><br>
<ol>
<li>      ApplicationContext,   <code>@Configuration</code>,      Application.java   <strong>    </strong>.</li>
<li>   ,   DataSource   <code>@Bean</code>  Spring.</li>
<li>    ,   UserDao    UserDao,   bean- dataSource.</li>
</ol><br>
<p>          Spring.</p><br>
<pre><code class="java hljs"><span class="hljs-keyword">import</span> org.springframework.context.ApplicationContext;
<span class="hljs-keyword">import</span> org.springframework.context.annotation.AnnotationConfigApplicationContext;<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyApplication</span> </span>{<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{<font></font>
        ApplicationContext ctx = <span class="hljs-keyword">new</span> AnnotationConfigApplicationContext(MyApplicationContextConfiguration.class);<font></font>
        UserDao userDao = ctx.getBean(UserDao.class);<font></font>
        // User user1 = userDao.findById(<span class="hljs-number">1</span>);
        <span class="hljs-comment">// User user2 = userDao.findById(1);</span><font></font>
        DataSource dataSource = ctx.getBean(DataSource.class);<font></font>
    }<font></font>
}</code></pre><br>
<p>  ,   Spring  AnnotationConfigApplicationContext     ,   .</p><br>
<h3 id="pochemu-my-sozdali-annotationconfigapplicationcontext-suschestvuyut-li-drugie-klassy-applicationcontext">   AnnotationConfigApplicationContext?     ApplicationContext?</h3><br>
<p>    Spring ApplicationContext, ,    XML,    Java   .         <strong><em>ApplicationContext</em></strong>.</p><br>
<p>   MyApplicationContextConfiguration .   Java,    Spring.      <em></em> ConfigApplicationContext.</p><br>
<p>       ApplicationContext   XML,    <strong><em>ClassPathXmlApplicationContext</em></strong>.</p><br>
<p>   ,     Spring  <em></em>    ,   .</p><br>
<h3 id="chto-delaet-annotaciya-bean-chto-takoe-spring-bean">   <code>@Bean</code>?   Spring Bean?</h3><br>
<p>         ApplicationContext    .      ,  ,    UserDao,   ,    DataSource.</p><br>
<p> ,     ,  bean-.   :  ( Spring)  ,      .</p><br>
<p>    :        Spring?</p><br>
<h3 id="chto-takoe-spring-bean-scope">  Spring bean scope?</h3><br>
<p>   DAO    Spring?     ,     <strong>bean scope</strong> (  ).</p><br>
<ul>
<li>  Spring  <em>singleton</em>:   DAO       ?</li>
<li>  Spring  <em>prototype</em>:   DAO     ?</li>
<li>         , :     HttpRequest?   HttpSession?   WebSocket?</li>
</ul><br>
<p>      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">  </a> ,    ,            .</p><br>
<pre><code class="java hljs"><span class="hljs-keyword">import</span> org.springframework.context.annotation.Bean;
<span class="hljs-keyword">import</span> org.springframework.context.annotation.Scope;
<span class="hljs-keyword">import</span> org.springframework.context.annotation.Configuration;<font></font>
<font></font>
<span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyApplicationContextConfiguration</span> </span>{<font></font>
<font></font>
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-meta">@Scope("singleton")</span>
    <span class="hljs-comment">// @Scope("prototype") etc.</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> DataSource <span class="hljs-title">dataSource</span><span class="hljs-params">()</span> </span>{<font></font>
        MysqlDataSource dataSource = <span class="hljs-keyword">new</span> MysqlDataSource();<font></font>
        dataSource.setUser(<span class="hljs-string">"root"</span>);<font></font>
        dataSource.setPassword(<span class="hljs-string">"s3cr3t"</span>);<font></font>
        dataSource.setURL(<span class="hljs-string">"jdbc:mysql://localhost:3306/myDatabase"</span>);
        <span class="hljs-keyword">return</span> dataSource;<font></font>
    }<font></font>
}</code></pre><br>
<p>  (scope annotation) ,    Spring. ,   ,   :</p><br>
<ul>
<li>Scope("singleton") →    , ..    .</li>
<li>Scope("prototype") →  ,  -     , Spring  . (   , , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">   </a>).</li>
<li>Scope("session") →    HTTP     .</li>
<li> ..</li>
</ul><br>
<p>:   Spring      bean-,          bean- (, , , websocket  ..).</p><br>
<p>,     ApplicationContexts, Beans &amp; Scopes,       ,   UserDAO   DataSource.</p><br>
<h3 id="chto-takoe-spring-java-config">  Spring Java Config?</h3><br>
<p>       bean-   ApplicationContext    <code>@Bean</code>  Java.</p><br>
<p> ,     Spring <em>Java Config</em>,       XML,      Spring.    ,   :</p><br>
<pre><code class="java hljs"><span class="hljs-keyword">import</span> org.springframework.context.annotation.Bean;
<span class="hljs-keyword">import</span> org.springframework.context.annotation.Configuration;<font></font>
<font></font>
<span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyApplicationContextConfiguration</span> </span>{<font></font>
<font></font>
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> DataSource <span class="hljs-title">dataSource</span><span class="hljs-params">()</span> </span>{<font></font>
        MysqlDataSource dataSource = <span class="hljs-keyword">new</span> MysqlDataSource();<font></font>
        dataSource.setUser(<span class="hljs-string">"root"</span>);<font></font>
        dataSource.setPassword(<span class="hljs-string">"s3cr3t"</span>);<font></font>
        dataSource.setURL(<span class="hljs-string">"jdbc:mysql://localhost:3306/myDatabase"</span>);
        <span class="hljs-keyword">return</span> dataSource;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> UserDao <span class="hljs-title">userDao</span><span class="hljs-params">()</span> </span>{ <span class="hljs-comment">// (1)</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> UserDao(dataSource());<font></font>
    }<font></font>
<font></font>
}</code></pre><br>
<ol>
<li> :       UserDao()    dataSource()?  Spring      ? </li>
</ol><br>
<p>     <code>@ComponentScan</code>.</p><br>
<h3 id="chto-delaet-componentscan">  <code>@ComponentScan</code>?</h3><br>
<p> ,        , —       <code>@ComponentScan</code>.</p><br>
<pre><code class="java hljs"><span class="hljs-keyword">import</span> org.springframework.context.annotation.Bean;
<span class="hljs-keyword">import</span> org.springframework.context.annotation.ComponentScan;
<span class="hljs-keyword">import</span> org.springframework.context.annotation.Configuration;<font></font>
<font></font>
<span class="hljs-meta">@Configuration</span>
<span class="hljs-meta">@ComponentScan</span>  <span class="hljs-comment">// (1)</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyApplicationContextConfiguration</span> </span>{<font></font>
<font></font>
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> DataSource <span class="hljs-title">dataSource</span><span class="hljs-params">()</span> </span>{<font></font>
        MysqlDataSource dataSource = <span class="hljs-keyword">new</span> MysqlDataSource();<font></font>
        dataSource.setUser(<span class="hljs-string">"root"</span>);<font></font>
        dataSource.setPassword(<span class="hljs-string">"s3cr3t"</span>);<font></font>
        dataSource.setURL(<span class="hljs-string">"jdbc:mysql://localhost:3306/myDatabase"</span>);
        <span class="hljs-keyword">return</span> dataSource;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-comment">// (2)</span><font></font>
<font></font>
    <span class="hljs-comment">// no more UserDao @Bean method!</span>
}</code></pre><br>
<ol>
<li>   <code>@ComponentScan</code>.</li>
<li> ,   UserDAO     !</li>
</ol><br>
<p>,     <code>@ComponentScan</code>,   Spring:   <strong></strong>  Java  <strong>  </strong>,    ,     Spring Bean!</p><br>
<p> , ,   MyApplicationContextConfiguration    com.marcobehler, Spring    ,  ,    com.marcobehler     Spring.</p><br>
<p> Spring ,   -  Spring? :       ,  <code>@Component</code>.</p><br>
<h3 id="chto-delayut-annotacii-component-i-autowired">   <code>@Component</code>  <code>@Autowired</code>?</h3><br>
<p>   <code>@Component</code>   UserDAO.</p><br>
<pre><code class="java hljs"><span class="hljs-keyword">import</span> javax.sql.DataSource;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Component;<font></font>
<font></font>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserDao</span> </span>{<font></font>
<font></font>
    <span class="hljs-keyword">private</span> DataSource dataSource;<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-title">UserDao</span><span class="hljs-params">(DataSource dataSource)</span> </span>{ <span class="hljs-comment">// (1)</span>
        <span class="hljs-keyword">this</span>.dataSource = dataSource;<font></font>
    }<font></font>
}<font></font>
</code></pre><br>
<ol>
<li>  Spring,    <code>@Bean</code>,    : ,   ,      <code>@Component</code>   <code>@ComponentScan</code>,      Spring,  ,   !</li>
</ol><br>
<p>(      ,   <code>@Controller</code>, <code>@Service</code>  <code>@Repository</code>, ,  ,      <strong></strong>  , <strong></strong>  <code>@Component</code>!).</p><br>
<p>     .  Spring ,     DataSource,      <code>@Bean</code>,     UserDAO    DataSource?</p><br>
<p>,   : <code>@Autowired</code>. ,       .</p><br>
<pre><code class="java hljs"><span class="hljs-keyword">import</span> javax.sql.DataSource;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Component;
<span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;<font></font>
<font></font>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserDao</span> </span>{<font></font>
<font></font>
    <span class="hljs-keyword">private</span> DataSource dataSource;<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-title">UserDao</span><span class="hljs-params">(<span class="hljs-meta">@Autowired</span> DataSource dataSource)</span> </span>{
        <span class="hljs-keyword">this</span>.dataSource = dataSource;<font></font>
    }<font></font>
}</code></pre><br>
<p> Spring   ,    bean- UserDAO:</p><br>
<ul>
<li>UserDAO  <code>@Component</code> → Spring  </li>
<li>UserDAO    <code>@Autowired</code> → Spring    ,      <code>@Bean</code></li>
<li>    Spring       ,    NoSuchBeanDefinition   .</li>
</ul><br>
<h3 id="vnedrenie-zavisimosti-cherez-konstruktor-i-autowired">     Autowired</h3><br>
<p>   -   .     Spring ( 4.2)     <code>@Autowired</code>,    .</p><br>
<p>    Spring   ,     <em></em>   <code>@Autowired</code>  .      .</p><br>
<pre><code class="java hljs"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserDao</span> </span>{<font></font>
<font></font>
    <span class="hljs-keyword">private</span> DataSource dataSource;<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-title">UserDao</span><span class="hljs-params">(DataSource dataSource)</span> </span>{
        <span class="hljs-keyword">this</span>.dataSource = dataSource;<font></font>
    }<font></font>
}</code></pre><br>
<p>   <code>@Autowired</code> ?    ,             <code>@Autowired</code>    ,  .</p><br>
<p>      —   —     .</p><br>
<h3 id="chto-takoe-field-injection-chto-takoe-setter-injection">  Field Injection?   Setter Injection?</h3><br>
<p> , Spring       .</p><br>
<p>     .</p><br>
<pre><code class="java hljs"><span class="hljs-keyword">import</span> javax.sql.DataSource;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Component;
<span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;<font></font>
<font></font>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserDao</span> </span>{<font></font>
<font></font>
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> DataSource dataSource;<font></font>
<font></font>
}</code></pre><br>
<p> , Spring    .</p><br>
<pre><code class="java hljs"><span class="hljs-keyword">import</span> javax.sql.DataSource;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Component;
<span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;<font></font>
<font></font>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserDao</span> </span>{<font></font>
<font></font>
    <span class="hljs-keyword">private</span> DataSource dataSource;<font></font>
<font></font>
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setDataSource</span><span class="hljs-params">(DataSource dataSource)</span> </span>{
        <span class="hljs-keyword">this</span>.dataSource = dataSource;<font></font>
    }<font></font>
<font></font>
}</code></pre><br>
<p>    (, )    ,    :    Spring Bean.       ,  <strong> </strong>,      .</p><br>
<p> ,      ,  ,       ,             .</p><br>
<h3 id="vnedrenie-zavisimosti-cherez-konstruktor-ili-cherez-pole">      </h3><br>
<p>                 , ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">     (setter) </a>.</p><br>
<p>         <em></em> :</p><br>
<ol>
<li>       ,          .     ,          .</li>
<li> :        80%  ,    10%      10%.</li>
<li> Spring  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"> </a>  :               /     .   :     .</li>
</ol><br>
<h3 id="rezyume-o-konteynere-spring-ioc">   Spring IoC</h3><br>
<p>       ,        Spring.</p><br>
<p>,    ,       ApplicationContexts, Beans,      ,      .</p><br>
<p> ,     Spring,    .</p><br>
<h2 id="spring-aop-aspektno-orientirovannoe-programmirovanie-i-proksi">Spring AOP (- )  </h2><br>
<p>        ,         ,      Spring.       ApplicationContextConfiguration:</p><br>
<pre><code class="java hljs"><span class="hljs-keyword">import</span> org.springframework.context.annotation.Bean;
<span class="hljs-keyword">import</span> org.springframework.context.annotation.Configuration;<font></font>
<font></font>
<span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyApplicationContextConfiguration</span> </span>{<font></font>
<font></font>
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> UserService <span class="hljs-title">userService</span><span class="hljs-params">()</span> </span>{ <span class="hljs-comment">// (1)</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> UserService();<font></font>
    }<font></font>
}</code></pre><br>
<ol>
<li>,  UserService —  ,                 .</li>
</ol><br>
<p>      Spring:</p><br>
<p>   Spring  ,   <code>@Bean</code>,   ,   Spring ,      UserService.</p><br>
<p> Spring     - <strong></strong>,    UserService. ? ?</p><br>
<h3 id="spring-mozhet-sozdavat-proksi">Spring   </h3><br>
<p>      Spring <code>@Bean</code>    ,  (  ) <strong><em>   </em></strong> UserService,       .</p><br>
<p>    <em></em>.</p><br>
<p>-  -    UserService,   ,      <strong> </strong>.</p><br>
<p><img src="https://habrastorage.org/webt/or/lg/wd/orlgwdavkbcixbf02krcvy9v6w8.png"></p><br>
<p> , Spring     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">- Cglib</a>,       - (,   - JDK):   Cglib  -     . (       ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">   </a>.)</p><br>
<h3 id="pochemu-spring-zhelaet-sozdavat-proksi"> Spring   ?</h3><br>
<p>    Spring  <strong></strong>      .  ,  ,   - (: AOP) .</p><br>
<p>  <strong> </strong>  AOP —  Spring <code>@Transactional</code>.</p><br>
<h3 id="spring-annotaciya-transactional">Spring  <code>@Transactional</code></h3><br>
<p>  UserService     :</p><br>
<pre><code class="java hljs"><span class="hljs-keyword">import</span> org.springframework.stereotype.Component;
<span class="hljs-keyword">import</span> org.springframework.transaction.annotation.Transactional;<font></font>
<font></font>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserService</span> </span>{<font></font>
<font></font>
    <span class="hljs-meta">@Transactional</span>           <span class="hljs-comment">// (2)</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> User <span class="hljs-title">activateUser</span><span class="hljs-params">(Integer id)</span> </span>{  <span class="hljs-comment">// (1)</span>
        <span class="hljs-comment">// execute some sql</span>
        <span class="hljs-comment">// send an event</span>
        <span class="hljs-comment">// send an email</span><font></font>
    }<font></font>
}</code></pre><br>
<ol>
<li>   activUser,       SQL-,       , ,        .</li>
<li><code>@Transactional</code>     Spring,            /           .  Spring   .</li>
</ol><br>
<p>:  Spring     UserService   applicationContext,      UserService.       ,            .</p><br>
<p>   <strong> </strong>,       UserService,   .  ,  -  ,        ,        UserService.</p><br>
<p>       ContextConfiguration.</p><br>
<pre><code class="java hljs"><span class="hljs-meta">@Configuration</span>
<span class="hljs-meta">@EnableTransactionManagement</span> <span class="hljs-comment">// (1)</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyApplicationContextConfiguration</span> </span>{<font></font>
<font></font>
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> UserService <span class="hljs-title">userService</span><span class="hljs-params">()</span> </span>{ <span class="hljs-comment">// (2)</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> UserService();<font></font>
    }<font></font>
}</code></pre><br>
<ol>
<li>  ,  Spring: ,    <code>@Transactional</code>,  <strong></strong>   Cglib  .</li>
<li>     Spring <strong></strong>      UserService .   Cglib-  ,  ,     UserService,     UserService      .</li>
</ol><br>
<p>      ,    Spring        . -    Spring      :     ,        <strong></strong> —   . , ,     .</p><br>
<h3 id="nuzhno-li-spring-ispolzovat-proksi-cglib">  Spring   Cglib?</h3><br>
<p>   <strong> </strong>   AOP   Spring.      ,       AspectJ,       -.   AspectJ     .</p><br>
<p>  : <strong>    Spring AOP  AspectJ?</strong></p><br>
<h3 id="rezyume-o-podderzhke-spring-aop">   Spring AOP</h3><br>
<p>,  -     ,       ,       Spring AOP,   <code>@Transactional</code>  Spring Security, <code>@Secured</code>.        AOP,  .</p><br>
<p>     ,        ,     <code>@Transactional</code>  Spring,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><code>   @Transactional</code></a>.</p><br>
<h2 id="upravlenie-resursami-spring">  Spring</h2><br>
<p>        .     ,          Spring.        Spring.</p><br>
<p>,          Java  HTTP  FTP.    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"> URL  Java</a>    .</p><br>
<p>  ,            ?    ,      - (  ,          packaged.jar).</p><br>
<p> ,       ,   , ,  ,        (URL-,   ,  ).</p><br>
<p>  :   Spring.     .</p><br>
<pre><code class="java hljs"><span class="hljs-keyword">import</span> org.springframework.core.io.Resource;<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyApplication</span> </span>{<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{<font></font>
            ApplicationContext ctx = <span class="hljs-keyword">new</span> AnnotationConfigApplicationContext(someConfigClass); <span class="hljs-comment">// (1)</span><font></font>
<font></font>
            Resource aClasspathTemplate = ctx.getResource(<span class="hljs-string">"classpath:somePackage/application.properties"</span>); <span class="hljs-comment">// (2)</span><font></font>
<font></font>
            Resource aFileTemplate = ctx.getResource(<span class="hljs-string">"file:///someDirectory/application.properties"</span>); <span class="hljs-comment">// (3)</span><font></font>
<font></font>
            Resource anHttpTemplate = ctx.getResource(<span class="hljs-string">"https://marcobehler.com/application.properties"</span>); <span class="hljs-comment">// (4)</span><font></font>
<font></font>
            Resource depends = ctx.getResource(<span class="hljs-string">"myhost.com/resource/path/myTemplate.txt"</span>); <span class="hljs-comment">// (5)</span><font></font>
<font></font>
            Resource s3Resources = ctx.getResource(<span class="hljs-string">"s3://myBucket/myFile.txt"</span>); <span class="hljs-comment">// (6)</span><font></font>
    }<font></font>
}</code></pre><br>
<ol>
<li> ,   ApplicationContext  .</li>
<li>   getResource()  applicationContext  ,    <strong>classpath:</strong>, Spring      application classpath.</li>
<li>   getResource()  ,   <strong>file:</strong>, Spring       .</li>
<li>   getResource()  ,    <strong>https:</strong> ( http), Spring     .</li>
<li>    ,    ,      .    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"></a>.</li>
<li>      Spring Framework,    ,   Spring Cloud,        s3://.</li>
</ol><br>
<p> , Spring           .      :</p><br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Resource</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">InputStreamSource</span> </span>{<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">boolean</span> <span class="hljs-title">exists</span><span class="hljs-params">()</span></span>;<font></font>
<font></font>
    <span class="hljs-function">String <span class="hljs-title">getFilename</span><span class="hljs-params">()</span></span>;<font></font>
<font></font>
    <span class="hljs-function">File <span class="hljs-title">getFile</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException</span>;<font></font>
<font></font>
    <span class="hljs-function">InputStream <span class="hljs-title">getInputStream</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException</span>;<font></font>
<font></font>
    <span class="hljs-comment">// ... other methods commented out</span>
}</code></pre><br>
<p> ,         :</p><br>
<ul>
<li> ?</li>
<li>  ?</li>
<li>     File.</li>
<li>      (InputStream).</li>
</ul><br>
<p>    ,     ,   ,     ,         .</p><br>
<p>      ,          ,  Spring: Properties.</p><br>
<h3 id="chto-takoe-spring-environment">  Spring Environment?</h3><br>
<p>    —    (properties),        ,   ,     ..</p><br>
<p>        .properties,     :</p><br>
<ul>
<li>     classpath,         ,   .</li>
<li>       ,       ,  .</li>
<li>         .</li>
</ul><br>
<p>Spring                 <em>environment</em>.</p><br>
<pre><code class="java hljs"><span class="hljs-keyword">import</span> org.springframework.core.env.Environment;
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyApplication</span> </span>{<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{<font></font>
           ApplicationContext ctx = <span class="hljs-keyword">new</span> AnnotationConfigApplicationContext(someConfigClass);<font></font>
           Environment env = ctx.getEnvironment(); <span class="hljs-comment">// (1)</span>
           String databaseUrl = env.getProperty(<span class="hljs-string">"database.url"</span>); <span class="hljs-comment">// (2)</span>
           <span class="hljs-keyword">boolean</span> containsPassword = env.containsProperty(<span class="hljs-string">"database.password"</span>);
           <span class="hljs-comment">// etc</span><font></font>
    }<font></font>
}</code></pre><br>
<ol>
<li> applicationContext         (<strong><em>environment</em></strong>)  Spring .</li>
<li> (<strong><em>environment</em></strong>),   ,  ,  ,    .</li>
</ol><br>
<p>  environment?</p><br>
<h3 id="chto-takoe-spring--propertysources">  Spring <code>@PropertySources</code>?</h3><br>
<p>  ,          Spring . :</p><br>
<ul>
<li>/mydir/application.properties</li>
<li>classpath:/application-default.properties</li>
</ul><br>
<p>(.     ,    «<strong>dev</strong>»  «<strong>production</strong>»,              ).</p><br>
<p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"> </a>  - Spring MVC    ServletConfig/Context,    JNDI  JVM.    ,  ,         .</p><br>
<p>  ,     <code>@PropertySources</code> :</p><br>
<pre><code class="java hljs"><span class="hljs-keyword">import</span> org.springframework.context.annotation.PropertySources;
<span class="hljs-keyword">import</span> org.springframework.context.annotation.PropertySource;<font></font>
<font></font>
<span class="hljs-meta">@Configuration</span>
<span class="hljs-meta">@PropertySources(
        {@PropertySource("classpath:/com/${my.placeholder:default/path}/app.properties"),
         @PropertySource("file://myFolder/app-production.properties")})</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyApplicationContextConfiguration</span> </span>{
    <span class="hljs-comment">// your beans</span>
}</code></pre><br>
<p>   ,       Spring .        .</p><br>
<p> <code>@PropertySource</code>       Spring            Spring: ,     : http://, file://, classpath:  ..,</p><br>
<p>   <code>@PropertySources</code> —  ,     ,    ,     ? , .</p><br>
<h3 id="spring-annotaciya-value-i-vnedrenie-znacheniy-svoystv">Spring  <code>@Value</code>    </h3><br>
<p>       bean-,  ,        <code>@Autowired</code>.        <code>@Value</code>.</p><br>
<pre><code class="java hljs"><span class="hljs-keyword">import</span> org.springframework.stereotype.Component;
<span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Value;<font></font>
<font></font>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PaymentService</span> </span>{<font></font>
<font></font>
    <span class="hljs-meta">@Value("${paypal.password}")</span>  <span class="hljs-comment">// (1)</span>
    <span class="hljs-keyword">private</span> String paypalPassword;<font></font>
<font></font>
     <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">PaymentService</span><span class="hljs-params">(<span class="hljs-meta">@Value("${paypal.url}")</span> String paypalUrl)</span> </span>{ <span class="hljs-comment">// (2)</span>
         <span class="hljs-keyword">this</span>.paypalUrl = paypalUrl;<font></font>
    }<font></font>
}</code></pre><br>
<ol>
<li> <code>@Value</code>     ...</li>
<li>   .</li>
</ol><br>
<p>     .  ,     <code>@Value</code>, Spring     ()      —     ,     .</p><br>
<h2 id="spring-web-mvc">Spring Web MVC</h2><br>
<p>Spring Web MVC,    Spring MVC,  - Spring.    ,    ,   -   -.    ,   Spring Boot.</p><br>
<h3 id="chto-takoe-mvc">  MVC?</h3><br>
<p>      MVC,     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">Model-View-Controller</a>  ,    .</p><br>
<p>   HTML-, ,    ,    <strong>MVC</strong>  Spring:</p><br>
<ul>
<li> <strong>Model ()</strong>  ,      -.       HTML,    Java (,  ),     .</li>
<li> <strong>View ()</strong>  HTML-,      HTML-,     .        ,       , ,  .</li>
<li><strong>Controller ()</strong>    <code>@Controller</code>,    HTTP- /account  ,   HTTP-   Java,     Java   HTML.</li>
</ul><br>
<p>,         Spring,     HTTP-,   (/account),     HTML-,       ,    .</p><br>
<p>      - JSON  XML.</p><br>
<p>       ,      ,     -  -- Java:     API  Java (   Spring MVC). ).</p><br>
<h3 id="httpservlet-pamyatka">HttpServlet </h3><br>
<p>    MVC:   -,   HTTP  Java,     ,  , HttpServlets (  : ,    ,   ).    HTTP-,        HTTP-.</p><br>
<p>          ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">Tomcat</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">Jetty.</a>     ,  ,   URL   -   .    "/*",    HTTP-      .</p><br>
<p>     :</p><br>
<pre><code class="java hljs"><span class="hljs-keyword">import</span> javax.servlet.http.HttpServlet;
<span class="hljs-keyword">import</span> javax.servlet.http.HttpServletRequest;
<span class="hljs-keyword">import</span> javax.servlet.http.HttpServletResponse;<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span> </span>{ <span class="hljs-comment">// (1)</span><font></font>
<font></font>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doGet</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> </span>{ <span class="hljs-comment">// (2)</span>
        <span class="hljs-keyword">if</span> (request.getRequestURI().startsWith(<span class="hljs-string">"/account"</span>)) {<font></font>
            String userId = request.getParameter(<span class="hljs-string">"userId"</span>);
            <span class="hljs-comment">// return &lt;html&gt; or {json} or &lt;xml&gt; for an account get request</span>
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (request.getRequestURI().startsWith(<span class="hljs-string">"/status"</span>)) {
            <span class="hljs-comment">// return &lt;html&gt; or {json} or &lt;xml&gt; for a health status get request</span>
        } <span class="hljs-comment">// etc</span><font></font>
    }<font></font>
<font></font>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doPost</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> </span>{ <span class="hljs-comment">// (3)</span>
        <span class="hljs-comment">// return &lt;html&gt; or {json} or &lt;xml&gt; for a post request, like a form submission</span><font></font>
    }<font></font>
}</code></pre><br>
<ol>
<li>    Java HttpServlet.</li>
<li>    doGet(),    Http GET.    "/"      GET.  ,  «/status», «/info», «/account»            doGet.</li>
<li>    doPost()    POST Http.    "/"      POST.  ,    «/register», «/submit-form», «/password-recovery»           doPost().</li>
</ol><br>
<p>         —   ,   ,    MVC,    .</p><br>
<p> ,  MyServlet ()      HTTP- ,  URI ,  ,  requestParameters     .</p><br>
<p>   ,              Spring    .     DispatcherServlet.</p><br>
<h3 id="chto-delaet-dispatcherservlet">  DispatcherServlet?</h3><br>
<p>Uber-   Spring MVC Spring   ,   <strong>DispatcherServlet</strong>.</p><br>
<p>  DispatcherServlet,         HTTP-,            Java   Controller.</p><br>
<p>   ,            HTML / JSON / XML,    ,  .      (     ,   DispatcherServlet     ).</p><br>
<p><img src="https://habrastorage.org/webt/gu/bc/i3/gubci3irnnqd1zs81r6n2k0esb4.png"></p><br>
<p>  ,   .</p><br>
<ul>
<li>Spring    HTTP .</li>
<li>   .</li>
<li>   ()   ( Java ).</li>
</ul><br>
<p>      Controller  .</p><br>
<h3 id="kak-pisat-klassy-tipa-controller">    Controller</h3><br>
<p>,     <strong>Controller</strong> ,    /account.</p><br>
<p> /account  HTML-    ,    , ,     ..</p><br>
<pre><code class="java hljs"><span class="hljs-keyword">import</span> org.springframework.stereotype.Controller;
<span class="hljs-keyword">import</span> org.springframework.ui.Model;
<span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.GetMapping;
<span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.PathVariable;<font></font>
<font></font>
<span class="hljs-comment">/**
*  A class that responds to /account requests.
*  Think of Netflix's account page, where you want to see your username/password/subscription info
*/</span>
<span class="hljs-meta">@Controller</span> <span class="hljs-comment">// (1)</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AccountController</span> </span>{<font></font>
<font></font>
    <span class="hljs-meta">@GetMapping("/account/{userId}")</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">account</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> Integer userId)</span> </span>{ <span class="hljs-comment">// (2)</span>
        <span class="hljs-comment">// TODO retrieve name, address, subscription information</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">"templates/account"</span>; <span class="hljs-comment">// (3)</span><font></font>
    }<font></font>
}</code></pre><br>
<p>     <em></em>,  ,  .</p><br>
<p>    AccountController,   <code>@Controller</code>.   Spring:      HTTP-  ,  DispatcherServlet   .</p><br>
<p>    Java-,  account().   ,   <code>@GetMapping</code>.   DispatcherServlet,   ,   /account/{userId},      .  , dispatcherServlet  {userId},            !</p><br>
<p>  Java     account.       ,     (HTML-).       .</p><br>
<h3 id="kak-generirovat-html-predstavlenie-view-s-pomoschyu-spring-web-mvc">  HTML  (view)   Spring Web MVC</h3><br>
<p>Spring MVC   ,      HTML. ,  ,      HTML-    ,      ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">Velocity</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">Freemarker</a>. Spring     .</p><br>
<p><em>,       ():<br>
<strong>classpath:/templates/account.vm</strong></em></p><br>
<pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><font></font>
    Hello $user.name, this is your account!<font></font>
    <span class="hljs-comment">&lt;!-- list subscriptions etc --&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></code></pre><br>
<p>   HTML-,   , $user.name.      ?         .   .</p><br>
<pre><code class="java hljs"><span class="hljs-keyword">import</span> org.springframework.stereotype.Controller;
<span class="hljs-keyword">import</span> org.springframework.ui.Model;
<span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.GetMapping;
<span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.PathVariable;<font></font>
<font></font>
<span class="hljs-meta">@Controller</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AccountController</span> </span>{<font></font>
<font></font>
    <span class="hljs-meta">@GetMapping("/account/{userId}")</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">account</span><span class="hljs-params">(Model model, <span class="hljs-meta">@PathVariable</span> Integer userId)</span> </span>{ <span class="hljs-comment">// (1)</span>
        <span class="hljs-comment">// TODO validate user id</span>
        model.addAttribute(<span class="hljs-string">"user"</span>, userDao.findById(userId)); <span class="hljs-comment">// (2)</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">"templates/account"</span>; <span class="hljs-comment">// (3)</span><font></font>
    }<font></font>
}</code></pre><br>
<ol>
<li>Spring     "Model"    .   ,    ,        , ..  .</li>
<li> Spring     map (),                  .</li>
<li> ,     view,  ,    .</li>
</ol><br>
<p>  ,  Spring MVC  !</p><br>
<h3 id="kak-generirovat-json--xml-predstavleniya-s-pomoschyu-spring-web-mvc">  JSON / XML ()   Spring Web MVC</h3><br>
<p> -    HTML,   XML  JSON.   ,  Spring MVC .</p><br>
<p>,    ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">Jackson</a>,    ,        Controller  ,   Spring: ,    Java   XML / JSON,  ,       .</p><br>
<pre><code class="java hljs"><span class="hljs-keyword">import</span> org.springframework.stereotype.Controller;
<span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.GetMapping;
<span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.ResponseBody;<font></font>
<font></font>
<span class="hljs-meta">@Controller</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HealthController</span> </span>{<font></font>
<font></font>
    <span class="hljs-meta">@GetMapping("/health")</span>
    <span class="hljs-meta">@ResponseBody</span> <span class="hljs-comment">// (1)</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> HealthStatus <span class="hljs-title">health</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> HealthStatus(); <span class="hljs-comment">// (2)</span><font></font>
    }<font></font>
}</code></pre><br>
<ol>
<li>       <code>@ResponseBody</code>   ,   Spring,      Java- HealthStatus   HttpResponse (,   XML  JSON).</li>
<li>    Java-   ,       .</li>
</ol><br>
<p>  Spring ,     XML, JSON  - ?</p><br>
<h3 id="kak-rabotaet-soglasovanie-kontenta-content-negotiation-spring-mvc">    (content negotiation) Spring MVC</h3><br>
<p>  ,    ,  ,   Spring MVC,           Spring MVC.</p><br>
<ul>
<li>  Accept,   «Accept: application/json»  «Accept: application/xml».   " ",             XML  JSON.</li>
<li>  URL    ,  /health.json  /health.xml.      Spring MVC  .</li>
<li>     ,  /health?Format = json.      Spring MVC  .</li>
</ul><br>
<p> Spring :       <code>@ResponseBody</code>,    «JSON».        ,  ,    JSON?  , ,   HealthStatus  JSON.     .</p><br>
<p>       ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"> </a>.</p><br>
<h3 id="kakoy-tip-vvoda-http-zaprosa-ponimaet-spring">   HTTP-  Spring?</h3><br>
<p>Spring MVC    ,   HTTP —    .</p><br>
<p> ,         JSON, XML  HTTP (Multipart) Fileupload,  Spring       Java.</p><br>
<h3 id="kakie-http-otvety-mozhet-napisat-spring-mvc"> HTTP-   Spring MVC?</h3><br>
<p>Spring MVC       HttpServletResponse —    .</p><br>
<p>  HTML, JSON, XML     WebSocket.  ,     Java       .</p><br>
<h3 id="a-kak-naschet-drugih-koncepciy-spring-mvc">     Spring MVC?</h3><br>
<p>  Spring MVC    , ,   -.</p><br>
<p>,       RequestParams, , , ViewHandlers, RootContexts, ,   ,     .        ,   .</p><br>
<p>             .</p><br>
<br>
<p>:   Spring Boot<br>
     Spring Boot,   ,     <code>@RestController</code>,   , ,      Spring Boot.</p><br>
<p>   ,    Spring Boot (     ), ,     ,     Spring MVC.   :</p><br>
<pre><code class="java hljs"><span class="hljs-comment">// some other annotations left out</span>
<span class="hljs-meta">@Controller</span>
<span class="hljs-meta">@ResponseBody</span>
<span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> RestController {<font></font>
<font></font>
}</code></pre><br>
<p> , Spring MVC <code>@RestController</code> —    ,  Spring MVC <code>@Controller</code>     Spring MVC <code>@ResponseBody</code> —    ,   -   Spring Boot.</p><br>
<h3 id="rezyume-spring-mvc">: Spring MVC</h3><br>
<p>Spring MVC —     MVC,      HTML / JSON / XML -  -.        Spring,     .</p><br>
<p>:       Java-,  ,       ,     Http-  ,           .</p><br>
<h2 id="dopolnitelnye-moduli-spring-framework">  Spring Framework</h2><br>
<p>   IoC Spring, Spring Web MVC      Spring.    .   ?</p><br>
<h3 id="o-chem-dopolnitelnye-moduli-spring-framework">    Spring Framework?</h3><br>
<p>Spring Framework       ,      .           20   Spring  spring.io. ,       Spring.</p><br>
<p>,     ?</p><br>
<p>  ,    ,  Spring    ,     Java.   JDK,   . Spring Framework      .</p><br>
<p> :       Java API , , ,     . <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"> </a>  .</p><br>
<p>Spring    API-  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">Java Mail API</a>,    ,  ,   ,       Spring.</p><br>
<pre><code class="java hljs"><span class="hljs-keyword">import</span> org.springframework.core.io.FileSystemResource;
<span class="hljs-keyword">import</span> org.springframework.mail.javamail.JavaMailSender;
<span class="hljs-keyword">import</span> org.springframework.mail.javamail.MimeMessageHelper;<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SpringMailSender</span> </span>{<font></font>
<font></font>
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> JavaMailSender mailSender; <span class="hljs-comment">// (1)</span><font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">sendInvoice</span><span class="hljs-params">(User user, File pdf)</span> <span class="hljs-keyword">throws</span> Exception </span>{<font></font>
        MimeMessage mimeMessage = mailSender.createMimeMessage();<font></font>
<font></font>
        MimeMessageHelper helper = <span class="hljs-keyword">new</span> MimeMessageHelper(mimeMessage, <span class="hljs-keyword">true</span>); <span class="hljs-comment">// (2)</span><font></font>
<font></font>
        helper.setTo(<span class="hljs-string">"john@rambo.com"</span>);<font></font>
        helper.setText(<span class="hljs-string">"Check out your new invoice!"</span>);<font></font>
        FileSystemResource file = <span class="hljs-keyword">new</span> FileSystemResource(pdf);<font></font>
        helper.addAttachment(<span class="hljs-string">"invoice.pdf"</span>, file);<font></font>
<font></font>
        mailSender.send(mimeMessage);<font></font>
    }<font></font>
}</code></pre><br>
<ol>
<li>,       (URL,  , ),    MailSender,   Spring,       ,     .</li>
<li>Spring   ,   MimeMessageHelper,     , ,  ,   .</li>
</ol><br>
<p>, ,  Spring Framework   ,  «»   Java,      , ,   API   Spring.</p><br>
<h3 id="est-li-spisok-vseh-dopolnitelnyh-moduley-spring-framework">      Spring Framework?</h3><br>
<p>         ,   ,        Spring.   ,           .     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"> </a>    .</p><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">Spring’s Data Access</a>:     Spring Data (JPA / JDBC).     Springs <code>@Transactional</code>,     JDBC  ORM (, Hibernate).</li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">Spring Integration </a>:    ,   JMS  AMQP,    . .</li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">Spring Expression Language (SpEL)</a>:      ,      DSL  Regex   /  /  Spring Bean.          .</li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">  Spring</a>.    -.</li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">  Spring</a>.  ()   Spring , ,  Spring,       REST.</li>
</ul><br>
<h2 id="spring-framework-faq">Spring Framework: FAQ</h2><br>
<h3 id="kakuyu-versiyu-spring-ya-dolzhen-ispolzovat">  Spring   ?</h3><br>
<p>  Spring  :</p><br>
<ul>
<li>     Spring Boot,    Spring  . ,    Spring Boot 2.2.x,    Spring 5.2.x (     ).</li>
<li>    Spring   ,     ,  .    Spring 5.2.3.RELEASE,          <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"> Spring</a>.</li>
<li>   Spring   ,           Spring,         (     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">EOL </a>) —  Spring     (.  ).</li>
</ul><br>
<p>       Spring  4.x-5.x,  ,    ,    Spring 3.x ( : 2009).</p><br>
<h3 id="kak-chasto-vypuskayutsya-novye-versii-spring-kak-dolgo-oni-podderzhivayutsya">     Spring?    ?</h3><br>
<p>   ,    Spring:</p><br>
<p><img src="https://habrastorage.org/webt/y2/qh/ah/y2qhahtajo_8ib_4mru9ht_mzzi.png"></p><br>
<p>  ,    Spring  ~ 17  ,       3-4 .     ,     .</p><br>
<ul>
<li>, Spring 4.3     2016       2020 .</li>
<li>  Spring 5.0  5.1     2020 ,   Spring 5.2,      2019 .</li>
</ul><br>
<p>. <strong> EOL()</strong> (    )    Spring,  5.2,      <strong>31  2020 </strong>.</p><br>
<h3 id="kakie-biblioteki-vam-nuzhny-chtoby-nachat-rabotu-s-spring">   ,     Spring?</h3><br>
<p>      ,   ,      Spring.   <strong><em>spring-context</em></strong>.   ,      Spring.</p><br>
<p>     Maven  Gradle,         (.   : <strong>  Spring   ?</strong>) —     .jar       .</p><br>
<pre><code class="xml hljs"><span class="hljs-comment">&lt;!-- Maven --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-context<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.2.3.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></code></pre><br>
<pre><code class="xml hljs">// Gradle<font></font>
compile group: 'org.springframework', name: 'spring-context', version: '5.2.3.RELEASE'</code></pre><br>
<p>   Spring (   Spring JDBC  JMS)     . </p><br>
<p>        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">  Spring</a>,      Maven artifactIds     .  :</p><br>
<pre><code class="xml hljs"><span class="hljs-comment">&lt;!-- Maven --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-webmvc<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.2.3.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><font></font>
<font></font>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-jdbc<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.2.3.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></code></pre><br>
<h3 id="chem-otlichayutsya-versii-spring">   Spring?</h3><br>
<p> JVM,  Spring   ,  ,    ( ) -   Spring 1.0 xml    Spring 5.0 ( ,   ,    ).  ,  , , 3  5      (.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">  </a>).</p><br>
<p> ,  ,   Spring      Spring      ( , ,  Python 2  3). ,   ,     Spring  3  4,    Spring  5.</p><br>
<p>     ,     7     Spring, :</p><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">   Spring 4</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">   Spring 5</a></li>
</ul><br>
<p>   :</p><br>
<p> ( ,    ..)     .  Spring             Java,   , -,    ..</p><br>
<h3 id="chto-seychas-proishodit-v-20-drugih-proektah-springio-kak-naschet-izmeneniya-realnogo-bayt-koda">    20   Spring.io?     -?</h3><br>
<p>            ,    ,   ,  , .</p><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">Spring Boot</a>: ,    Spring.  Spring Boot  ""   Spring Framework.       Spring  Spring Boot  ,         .</li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">Spring Batch</a>: ,        .</li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">Spring Cloud</a>:  ,     Spring    «» (, AWS)   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"></a>.</li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">Spring Security</a>: ,    , ,  -  OAuth2  Basic Auth.</li>
<li>   ...</li>
</ul><br>
<p>:     <strong>Spring Framework</strong>        .</p><br>
<h3 id="v-chem-raznica-mezhdu-spring-i-spring-boot">    Spring  Spring Boot?</h3><br>
<p>    ,   ,  Spring Boot   Spring.   ,       Spring Boot,   ,   «   »  Spring Boot.</p><br>
<p>Spring     .properties    ,     <code>@PropertySource</code>.        JSON REST     Web MVC.</p><br>
<p>  ,           . Spring Boot,   ,        . :</p><br>
<ul>
<li><strong>  </strong>   application.properties     ​​ .</li>
<li><strong>   Tomcat,</strong>         Rest .</li>
<li><strong></strong>     /  JSON,      Maven / Gradle.</li>
</ul><br>
<p>       Java,    <code>@SpringBootApplication</code>.  , Spring Boot   Maven / Gradle,         .jar,      :</p><br>
<pre><code class="powershell hljs">java <span class="hljs-literal">-jar</span> mySpringBootApp.jar</code></pre><br>
<p>, Spring Boot —  ,    ,     Spring Framework,          .</p><br>
<h3 id="v-chem-raznica-mezhdu-spring-aop-i-aspectj">    Spring AOP  AspectJ?</h3><br>
<p>     <strong>  Spring   Cglib?"</strong>  Spring    AOP   .          ,   .      ,            AOP,     Spring.</p><br>
<p>AspectJ,   ,     -        .            .</p><br>
<p>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"> Spring   AOP AspectJ</a>  AOP     .</p><br>
<p>  ,         :</p><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">  AspectJ</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">Spring AOP  AspectJ</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">Spring AOP  </a></li>
</ul><br>
<h3 id="v-chem-raznica-mezhdu-spring-i-spring-batch">    Spring  Spring Batch?</h3><br>
<p>Spring Batch —  ,    , .. «  95 CSV-    3          ».</p><br>
<p> ,     Spring Framework,      .</p><br>
<p>  ,  ,    <strong></strong>            Spring Framework     Spring Batch.</p><br>
<h3 id="v-chem-raznica-mezhdu-spring-i-spring-web-mvc">    Spring  Spring Web MVC?</h3><br>
<p>    ,   ,  Spring Web MVC    Spring.</p><br>
<p>         Spring-  -   DispatcherServlet,    <code>@Controller</code>.</p><br>
<p>   RestControllers (   XML  JSON )    HTML-,    HTML   ,  Thymeleaf, Velocity  Freemarker.</p><br>
<h3 id="v-chem-raznica-mezhdu-spring-i-struts">    Spring  Struts?</h3><br>
<p>  :   Spring Web MVC  Struts?</p><br>
<p>   : Spring Web MVC    Struts, ,  ,     Spring (. ).</p><br>
<p>    , ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">Struts 2</a>, ,       , Spring Web MVC    ,       Spring.  Spring Webflow  RestControllers Spring Boot.</p><br>
<h3 id="chto-luchshe-spring-xml-ili-annotacii-ili-java-konfiguraciya"> ? Spring XML    Java ?</h3><br>
<p>Spring     XML.  ,       /  Java .</p><br>
<p>  ,   XML      ,  ,         Java  .</p><br>
<p>    :</p><br>
<ol>
<li> ,     XML /  / Java Config   ,      .</li>
<li>        Spring,          XML,    Java,     .</li>
</ol><br>
<h3 id="chto-luchshe-vnedrenie-zavisimostey-na-osnove-konstruktora-ili-polya"> ?       ?</h3><br>
<p>       ,      .  ,          :        83%          17%.</p><br>
<p>       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"> Spring</a>:      ,  /     ,           .</p><br>
<p> ,   :               .</p><br>
<h3 id="est-li-alternativy-konteyneru-vnedreniya-zavisimostey-v-spring">       Spring?</h3><br>
<p>,     Java:</p><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">Google Guice</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">Google Dagger</a>,  Square</li>
</ul><br>
<p> ,  Dagger    ,    . Guice      ,     (  Guice Persist).</p><br>
<h2 id="zaklyuchenie"></h2><br>
<p>    ,          ,   Spring Framework.</p><br>
<p> ,        Spring (  Spring Boot  Spring Data)   ,    ,           «<strong>  Spring ?</strong>»</p><br>
<p>,      (~ =   ).</p><br>
<p>Spring Framework —   DIY- (~ =    ),     ,    (~ =  / )   (~ = Web MVC)   .            (   Java).</p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（注意：不要问我如何进行这些比较；）</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">今天就这些。</font><font style="vertical-align: inherit;">如果您有任何疑问或建议，请给我发送电子邮件至marco@marcobehler.com或在下面发表评论。</font><font style="vertical-align: inherit;">有关实际练习，请查看</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Spring Framework教程</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">谢谢阅读。</font><font style="vertical-align: inherit;">Auf Wiedersehen。</font></font></p><br>
<h2 id="blagodarnosti"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">致谢</font></font></h2><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">非常感谢：</font></font></p><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Patricio Moschcovich，在阅读本文并指出许多小错误方面做得非常出色。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Maciej Walkowiak指出</font></font><code>@RestController</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">他一直是Spring MVC的一部分，而不是Spring Boot的一部分。</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（感谢原始文章的作者-大约翻译）</font></font><br>
</blockquote></li>
</ul></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN490572/index.html">单板计算机（SBC）Tinker板和Arduino DUE上的自制自动驾驶仪</a></li>
<li><a href="../zh-CN490574/index.html">递归，登录页面和内容营销有什么共同点：机构Embacy的创始人说</a></li>
<li><a href="../zh-CN490576/index.html">超声波浴。第1部分</a></li>
<li><a href="../zh-CN490578/index.html">面向335号移动开发人员的有趣材料的摘要（2月24日至3月1日）</a></li>
<li><a href="../zh-CN490584/index.html">英飞凌在其加密芯片中引入了交叉签名证书</a></li>
<li><a href="../zh-CN490588/index.html">自制潜水艇与表面wifi天线</a></li>
<li><a href="../zh-CN490592/index.html">使用docker降级PHP在VPS上安装VestaCP</a></li>
<li><a href="../zh-CN490594/index.html">FOSS新闻5-2020年2月24日至3月1日免费和开源新闻的回顾</a></li>
<li><a href="../zh-CN490596/index.html">语音合成器的历史：第一个机械装置</a></li>
<li><a href="../zh-CN490598/index.html">Microsoft关于考试和证书的公告</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>