<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§≤üèæ üë©üèø‚Äçüåæ üßúüèΩ Desenvolvimento de firmware para uma c√¢mera de v√≠deo anal√≥gica EVR-Y2022F üßï ü§æüèæ üë©üèΩ‚Äçüéì</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Em um artigo anterior, o dispositivo de uma c√¢mera de v√≠deo anal√≥gica foi examinado detalhadamente para criar seu pr√≥prio firmware. Como j√° mencionado...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Desenvolvimento de firmware para uma c√¢mera de v√≠deo anal√≥gica EVR-Y2022F</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/499546/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Em um artigo anterior, o dispositivo de uma c√¢mera de v√≠deo anal√≥gica foi examinado detalhadamente para criar seu pr√≥prio firmware. Como j√° mencionado, a c√¢mera possui um microcontrolador de origem desconhecida. √â muito mais rico que os AVRs usuais: possui duas tens√µes de alimenta√ß√£o de 3,3V e 1,8V e tamb√©m possui uma fun√ß√£o DSP. Cheguei a essa conclus√£o quando pensei na implementa√ß√£o do algoritmo de foco autom√°tico. No entanto, eu n√£o preferia MKs complexos como o STM32 e outros, apenas porque nunca trabalhei com eles. Definitivamente, decidi usar um dos AVR MKs para implementar meu firmware. Portanto, j√° nesse est√°gio, comecei a perceber que a implementa√ß√£o da fun√ß√£o de foco autom√°tico n√£o seria muito f√°cil de manusear, ou melhor, imposs√≠vel.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Minha escolha caiu no ATmega128 MK, j√° que foi ele quem caiu no meu bra√ßo. Obviamente, o ATmega8 MK n√£o ser√° suficiente em termos de n√∫mero de conclus√µes, especialmente porque, apenas no caso, decidi reservar uma porta MK inteira para o fluxo de v√≠deo digital do processador de v√≠deo. Primeiro de tudo, eu descobri quais fun√ß√µes estar√£o no meu pr√≥prio firmware, em particular as que n√£o estavam no firmware original e quais ter√£o que ser negligenciadas.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vamos considerar uma variante do algoritmo de foco autom√°tico para analisar um fluxo de v√≠deo digital. Consegui descobrir que os dados do fluxo de v√≠deo s√£o uma altern√¢ncia de bytes sincronizados com os pulsos ‚ÄúCK‚Äù. Os bytes do fluxo de v√≠deo codificam os n√≠veis dos componentes Y, Cr, Cb do sinal de v√≠deo com grada√ß√£o de 8 bits (256 n√≠veis). Ou seja, a sa√≠da de v√≠deo digital do processador de v√≠deo desta c√¢mera √© multiplexada por componente. Informa√ß√µes sobre brilho (Y) est√£o contidas em cada segundo byte do fluxo de v√≠deo, e informa√ß√µes sobre cores s√£o duas vezes menos frequentes. Ou seja, informa√ß√µes sobre o sinal de diferen√ßa de cor do Cr vermelho est√£o contidas em cada quarto byte, bem como informa√ß√µes sobre o sinal de diferen√ßa de cor do azul. Assim, o fluxo representa a seguinte sequ√™ncia: Cb0, Y0, Cr0, Y1, Cb2, Y2, Cr2, Y3, Cb4, Y4, Cr4, Y5, .... Ou seja,enquanto as informa√ß√µes sobre o brilho de cada pixel s√£o fornecidas sem lacunas, as informa√ß√µes sobre a cor dos pixels s√£o exibidas em componentes em sequ√™ncia. Esse afinamento √© devido √†s propriedades de insensibilidade √† cor de pequenos detalhes e uma redu√ß√£o na faixa de cores no sinal de v√≠deo. Essas propriedades s√£o usadas na digitaliza√ß√£o anal√≥gica de televis√£o e v√≠deo. A "compress√£o" acima (subamostragem de cores) possui uma propor√ß√£o de componente de 4: 2: 2.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para que o algoritmo de foco autom√°tico funcione, basta analisar apenas o componente de brilho, o que tamb√©m √© f√°cil de obter interceptando o fluxo de v√≠deo ‚Äúbyte a byte‚Äù. Se a frequ√™ncia CK for de cerca de 18 MHz, CK / 2 √© de 9 MHz, o que parece ser bastante vi√°vel para o ATmega128 MK. Os pulsos de sincroniza√ß√£o horizontal e vertical permitem ao controlador ‚Äúcontar‚Äù e analisar qualquer √°rea da imagem. Talvez, para o algoritmo de foco autom√°tico, seja suficiente analisar apenas o centro da varredura. Obviamente, quanto melhor o foco, mais n√≠tida a imagem e, portanto, maior a faixa de frequ√™ncia do sinal de v√≠deo (mais componentes de RF). Ou seja, √© poss√≠vel (at√© necess√°rio) aplicar o algoritmo Fast Fourier Transform (FFT) a fragmentos de um fluxo de v√≠deo digital e analisar os componentes de RF. Nesse caso, voc√™ precisa torcer o foco do foco toda vez,usando o m√©todo de ‚Äúmeia divis√£o‚Äù como um m√©todo de otimiza√ß√£o matem√°tica. Assim, voc√™ pode alcan√ßar o melhor resultado.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eu n√£o me incomodei com a fun√ß√£o de foco autom√°tico, considerando que era imposs√≠vel no MK com uma arquitetura simples, embora, em qualquer caso, reservei uma porta para v√≠deo digital. Em vez de focar automaticamente, decidi implementar v√°rias outras fun√ß√µes que n√£o estavam dispon√≠veis no firmware original. Mas, para isso, a c√¢mera de v√≠deo precisar√° se limitar a condi√ß√µes estacion√°rias, o que √© t√≠pico para a vigil√¢ncia por v√≠deo. Sup√µe-se que a c√¢mera possa girar posteriormente no plano horizontal e vertical usando mecanismos especiais, autom√°tica e manualmente. Quando a c√¢mera √© direcionada automaticamente para um objeto espec√≠fico, cujas coordenadas esf√©ricas ser√£o pr√©-armazenadas na mem√≥ria do dispositivo de controle, as ‚Äúcoordenadas‚Äù do zoom e foco tamb√©m ser√£o alteradas, que tamb√©m ser√£o pr√©-selecionadas e armazenadas na mem√≥ria.Al√©m disso, o gerenciamento pode ser organizado de acordo com o protocolo PELCO-D. Na especifica√ß√£o deste protocolo, h√° uma equipe especial para esse neg√≥cio. As coordenadas do zoom e foco, √© claro, ser√£o "emparelhadas" para uma dist√¢ncia espec√≠fica. Ou seja, um objeto que estar√° localizado a uma determinada dist√¢ncia estar√° em foco.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Antes de come√ßar a escrever um programa de firmware, voc√™ precisa pensar sobre quais perif√©ricos do MK e quais conclus√µes estar√£o envolvidas. Ent√£o voc√™ precisa pensar em como colocar e consertar a placa com seu pr√≥prio MK dentro da c√¢mera. E para que fosse o mais conveniente e sustent√°vel poss√≠vel. Decidi usar uma placa com o MK, cujas conclus√µes ser√£o completamente encaminhadas para o lado esquerdo e direito. A placa estar√° localizada na parte inferior da c√¢mera, onde h√° pouco espa√ßo, e ser√° mantida em uma conex√£o destac√°vel. Ao mesmo tempo, haver√° "pinos" do conector na pr√≥pria placa e haver√° soquetes correspondentes nas laterais da c√¢mera. Para os soquetes de resposta, decidi fazer mais duas placas adaptadoras, do tamanho da lateral da c√¢mera. As lamelas desses cart√µes v√£o para o lado superior da c√¢mera, diretamente para a placa principal. Sup√µe-se que cada lamela seja conectada ao ponto desejado na placa principal da c√¢mera.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Durante o desenvolvimento da placa com a MK, tive a ideia de suplementar a c√¢mera de v√≠deo com um rel√≥gio (RTC), e destaquei a linha I2C, colocada na placa RTC DS1307 (eu j√° sei o que diabos) com quartzo e uma bateria e, no caso, EEPROM 24AA512, que eram √† m√£o. Tamb√©m na placa na borda superior est√£o os conectores para conectar os programadores SPI e JTAG. Na placa-m√£e original, o MK tem clock de quartzo de 12 MHz. √â o mesmo para mim. Em geral, √© melhor colocar quartzo em 11.0592 MHz para uma opera√ß√£o UART clara. As dist√¢ncias entre os "pentes" das juntas destac√°veis ‚Äã‚Äãforam cuidadosamente calculadas com anteced√™ncia. Decidi alimentar o MK do ‚ÄúKrenka‚Äù de cinco volts, que ser√° parafusado no quadro sob a placa principal (tamb√©m servir√° como dissipador de calor). A energia ser√° retirada da tens√£o de entrada 12V imediatamente ap√≥s o fus√≠vel FB801, conforme mostrado na figura.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/pk/rs/q8/pkrsq8mtjjredo8w2mfne5goziy.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FIG. 1. Gerenciamento de energia do microcontrolador.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Enquanto desenhava pranchetas no "SprintLayout", me perguntava o objetivo de cada pino do MK, que √© enviado "para fora" do conector. O resultado √© essa imagem. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/bm/95/xg/bm95xgf-akgycofwc_mdsjp8rki.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FIG. 2. Esbo√ßos de placas de circuito impresso adicionais.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Para dizer a verdade, desenhei as placas laterais (ao longo das bordas) na fase de reda√ß√£o deste artigo. Mas, na verdade, eu os fiz com um cortador. Acabou n√£o sendo a op√ß√£o mais bem-sucedida. E o pr√≥prio quadro com MK foi feito de maneira torta. De alguma forma, aparafusei as placas auxiliares laterais nas laterais do quadro da c√¢mera, soldando porcas de fluxo na superf√≠cie de cobre da PCB. O fato √© que h√° muito pouco espa√ßo nas laterais e a tampa da c√¢mera est√° praticamente "apertada" de costas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As figuras abaixo mostram a distribui√ß√£o das conclus√µes do MK, bem como sua finalidade.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/cc/ry/d2/ccryd2b_viknimo-w0asy0j8fuy.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FIG. 3. O objetivo das conclus√µes do microcontrolador.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
H√° muitos pontos para comentar. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para o programador SPI (STK200 +), a sa√≠da "PEN" era desnecess√°ria. A ativa√ß√£o ocorre por "RESET", como de costume. Mas, em vez de ‚ÄúMISO‚Äù e ‚ÄúMOSI‚Äù, o MK possui uma interface separada (PDI / PDO), e a linha ‚ÄúCLK‚Äù √© combinada. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como tens√£o de refer√™ncia para o ADC, escolhi os mesmos 5V, dos quais o pr√≥prio MK √© alimentado. Tentei obter separadamente 3,3V (como no circuito original), mas ao mesmo tempo havia armadilhas. E, para mudar para a tens√£o de refer√™ncia de 5V, √© necess√°rio mudar um pouco o circuito, conforme mostrado na figura. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/mn/od/wr/mnodwrbakf5xlxkq1qskzeuhmkc.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FIG. 4. Tradu√ß√£o dos bot√µes na tens√£o de refer√™ncia de 5V.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Ou seja, √© necess√°rio dessoldar um lado do resistor R505 do lado da fonte de 3,3V e aplicar 5V a partir da linha de energia MK.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das conclus√µes do MK, que s√£o usadas apenas dentro da placa projetada, apenas tr√™s est√£o envolvidas. Um sinal de pulso de 1 Hz com RTC chega ao PB7 para atualizar a hora. Os pinos PD0 e PD1 s√£o alocados ao barramento I2C. Ele ser√° implementado programaticamente usando a biblioteca CVAVR ‚Äúi2c.h‚Äù, apesar de uma interface de hardware i2c (TWI) estar conectada a essas sa√≠das. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O pino MC ‚ÄúRESET‚Äù √© emitido, mas a redefini√ß√£o do MK ocorrer√° por conta pr√≥pria sem uma cadeia de redefini√ß√£o externa. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entendeu-se que os pulsos de clock HD e VD chegariam ao MK atrav√©s de portas de interrup√ß√£o externas para a precis√£o da leitura do campo de v√≠deo. No entanto, excluindo a fun√ß√£o de foco autom√°tico, eles n√£o s√£o mais necess√°rios. Os sinais dos interruptores de limite de zoom e foco chegam √†s portas vizinhas de interrup√ß√µes externas.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A porta "A" MK √© reservada para o fluxo de v√≠deo digital. A porta "C" √© totalmente reservada para SD.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O pino PD4 √© usado para alternar TX / RX RS-485. N√£o houve comuta√ß√£o no circuito original: a 2¬™ e a 3¬™ pernas do chip MAX485 estavam no ch√£o. O MK original s√≥ conseguiu receber dados para controlar a c√¢mera via PELCO-D. Eu decidi fazer uma pequena atualiza√ß√£o. A ideia era essa. Se a c√¢mera de v√≠deo ficar alta e em uma caixa fechada, ser√° simplesmente imposs√≠vel atualizar rapidamente o firmware. E essa necessidade certamente surgir√°: eliminar v√°rios erros e melhorar a funcionalidade se tornar√° uma pr√°tica regular pela primeira vez. Portanto, tive a ideia de implementar um gerenciador de inicializa√ß√£o para o MK e j√° us√°-lo atualizar remotamente o firmware via RS-485. E, neste caso, uma troca de m√£o dupla √© muito desej√°vel. Sobre o carregador de inicializa√ß√£o ser√° uma parte separada deste artigo. E para conectar o MAX485 (2 e 3 pernas) a este pino MK,voc√™ precisa fazer uma pequena altera√ß√£o no primeiro e no segundo quadro. Essas placas s√£o conectadas por um cabo de loop, nos conectores dos quais existe um contato ‚ÄúIRL‚Äù n√£o utilizado para controle da luz de fundo. Na segunda placa (principal), voc√™ precisa dessoldar o resistor e a solda R520, em vez disso, um fio que passa pela placa adaptadora ao ATmega128 MK na sa√≠da correspondente. E, na primeira placa, √© necess√°rio dessoldar e dobrar 2 e 3 pernas do U202, sold√°-las e pux√°-las da fia√ß√£o para a sa√≠da livre de 1 conector J302. Essas opera√ß√µes para alterar o circuito s√£o mostradas na figura.que passar√° pela placa adaptadora para o ATmega128 MK na sa√≠da correspondente. E, na primeira placa, √© necess√°rio dessoldar e dobrar 2 e 3 pernas do U202, sold√°-las e pux√°-las da fia√ß√£o para a sa√≠da livre de 1 conector J302. Essas opera√ß√µes para alterar o circuito s√£o mostradas na figura.que passar√° pela placa adaptadora para o ATmega128 MK na sa√≠da correspondente. E, na primeira placa, √© necess√°rio dessoldar e dobrar 2 e 3 pernas do U202, sold√°-las e pux√°-las da fia√ß√£o para a sa√≠da livre de 1 conector J302. Essas opera√ß√µes para alterar o circuito s√£o mostradas na figura.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/qu/20/oe/qu20oe_mzvupcc4mpsbtg4omwma.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FIG. 5. Organiza√ß√£o da linha TRX para controle do TX / RX MAX485.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Existem duas interfaces UART a bordo do ATmega128. Nesse caso, voc√™ deve usar a segunda interface (pinos 27, 28), j√° que a primeira interface nos pinos (pinos 2, 3) √© combinada com a interface do programador SPI. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No quadro, quase todas as conclus√µes do MK est√£o envolvidas. As conclus√µes do porto "G" n√£o foram utilizadas. A prop√≥sito, foi poss√≠vel implementar o rel√≥gio programaticamente com base no MK. Ele fornece um modo de suspens√£o com o uso de uma bateria para contar o tempo em que a energia principal est√° desligada. Existem at√© conclus√µes para conectar um quartzo de baixa frequ√™ncia separado. No entanto, eu n√£o me incomodei com isso, batendo no DS1307.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A figura abaixo mostra o objetivo de cada sa√≠da da placa com o MK. Al√©m disso, est√° marcado condicionalmente o que e de que lado da placa principal os fios de cada pino ser√£o soldados. Tamb√©m √© necess√°rio fazer alguns coment√°rios. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/i0/fd/df/i0fddfrritx4bjzwqgsfl3bu1r4.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FIG. 6. Atribui√ß√£o de conclus√µes de um pagamento adicional com a MK.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os sinais dos interruptores de limite de zoom e foco chegam n√£o apenas √†s portas de interrup√ß√£o, mas tamb√©m √†s entradas ADC. O fato √© que, mesmo na fase do estudo da SD, eu notei esse recurso. Se o mecanismo de zoom ou foco estiver em "zero", o sinal de sa√≠da do trailer poder√° assumir um estado "intermedi√°rio". Para capturar melhor esses casos raros, decidi usar o ADC. Obviamente, essa n√£o √© uma abordagem muito competente, mas, ao fazer isso, rapidamente sa√≠ do problema que √†s vezes surgia no est√°gio de inicializa√ß√£o do firmware de teste. Assim, aumentei a estabilidade do algoritmo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os sinais SDA / SCL do I2C s√£o apenas conectados ao conector, apenas por precau√ß√£o, e eles n√£o s√£o usados ‚Äã‚Äãfora desta placa.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os nomes de cada pino para o controle do ID s√£o assinados de acordo com a conex√£o real. A conex√£o de dados, olhando para o futuro, foi finalmente corrigida no est√°gio de depura√ß√£o. Havia muita confus√£o, mas os erros eram apenas na altern√¢ncia de fases precisas ao contr√°rio, e n√£o na ordena√ß√£o. As alternativas ‚Äú4-1-2-3‚Äù (para zoom) e ‚Äú2-3-4-1‚Äù (para foco) s√£o a mesma coisa, assim como ‚Äú1-2-3-4‚Äù, que e foi tomada como base. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No final do artigo </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(para n√£o desonrar),</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> duas fotos s√£o apresentadas. O primeiro √© a vista inferior da c√¢mera de v√≠deo com a placa de circuito adicional. O segundo √© uma vista de cima da placa principal da c√¢mera de v√≠deo com um MK padr√£o isolado (microprocessador, para ser mais preciso), um monte de jumpers de fios e outras ranhuras.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eu escrevi o programa (firmware) junto com seus testes preliminares no programa ISIS 7 Professional (Proteus). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/mt/qr/f7/mtqrf7iej-6e3adbtcg-bgghokq.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FIG. 7. Vis√£o do projeto em Proteus.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Em vez dos chips exclusivos do gerador de caracteres e do processador de v√≠deo (que obviamente n√£o est√£o no Proteus), instalei depuradores SPI. Com a ajuda deles, √© conveniente controlar os bytes que o MK envia pelo SPI. Mas a rea√ß√£o real a esses bytes √© controlada diretamente no hardware. Com o Proteus, voc√™ pode monitorar e depurar comandos PELCO-D provenientes de um DVR real. Para fazer isso, como op√ß√£o, voc√™ precisa conectar o DVR √† porta COM do computador atrav√©s do adaptador unidirecional mais simples RS485-&gt; RS232. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ent√£o eu comecei a desenvolver e modelar. O Excel ajudou muito com isso.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Primeiro, voc√™ precisa decidir sobre os temporizadores e sua configura√ß√£o. Um temporizador - para realizar a rota√ß√£o do motor de passo e a implementa√ß√£o de opera√ß√µes repetidas dos bot√µes enquanto os segura. Ao pressionar este bot√£o ou aquele durante as configura√ß√µes no menu, a opera√ß√£o do SD ser√° exclu√≠da. E quando voc√™ mant√©m um dos bot√µes de controle de zoom ou foco fora do menu, o SD gira com o par√¢metro de tempo correspondente. Assim, n√£o h√° conflitos. Planejei usar o segundo temporizador para implementar o PWM para o SD, mas com o tempo decidi abandon√°-lo. De fato, no meu caso, quando n√£o h√° foco autom√°tico, n√£o h√° necessidade de PWM. Al√©m disso, o mecanismo de transmiss√£o possui uma estrutura helicoidal, portanto, em repouso, voc√™ n√£o pode "segurar" o SD por corrente cont√≠nua, o mecanismo n√£o se arrasta em lugar algum.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√â necess√°rio revisar o alfabeto de caracteres do gerador de caracteres, de acordo com a folha de dados, e compar√°-lo com o alfabeto padr√£o ASCII. O alfabeto do gerador de caracteres consiste em 128 caracteres, metade do tamanho do √∫ltimo. Por exemplo, os caracteres cir√≠licos no gerador de caracteres est√£o completamente ausentes, mas h√° caracteres especiais que s√£o caracter√≠sticos de sua aplica√ß√£o (sol, ampulheta, homenzinho, anota√ß√£o, telefone etc.). Eu fiz uma matriz de "smb [256]" de 256 elementos, colocando-a no EEPROM MK. A nota√ß√£o smb [i] = adr significa que no endere√ßo adr no gerador de caracteres existe um caractere com o c√≥digo ASCII i. E se o s√≠mbolo i n√£o estiver no alfabeto do gerador de caracteres, o valor do elemento da matriz se refere ao "espa√ßo" com o endere√ßo 0x7E. Ou seja, quase metade dos elementos da matriz tem o valor "0x7E". Essa matriz √© apresentada em forma de tabela na figura abaixo.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/yo/_b/_g/yo_b_gqswkjfk1smuefynrwgs0e.png"><br>
<i>. 8.    ASCII    PD6464A.</i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em seguida, voc√™ precisa considerar como processar bot√µes atrav√©s do ADC. De acordo com a lei de Ohm, √© f√°cil calcular os valores de tens√£o na entrada do ADC quando voc√™ clica em um bot√£o. Depois disso, √© f√°cil calcular os limites dos intervalos, cujo meio ser√° o mesmo valor de tens√£o. No total, s√£o obtidos seis intervalos: cinco deles correspondem a cada bot√£o e um √† aus√™ncia de pressionamento (nenhum bot√£o √© pressionado). No n√≠vel do hardware, o ADC MK analisa periodicamente o valor da tens√£o dos bot√µes. O cron√¥metro para anti-rejei√ß√£o pode ser implementado com base no c√°lculo dos ciclos de rel√≥gio ADC, o que eu fiz. No est√°gio de depura√ß√£o, essa parte do programa teve suas armadilhas. Eu acho que n√£o vale a pena escrever detalhes. Para conseguir o trabalho claro dessa funcionalidade, tive que mexer muito tempo. A fun√ß√£o de reconhecimento de bot√£o √© colocada na se√ß√£o de interrup√ß√£o do ADC e, em sua sa√≠da, est√° o n√∫mero do bot√£o,bandeira de depress√£o e bandeira de lan√ßamento. O processamento adicional dos bot√µes ocorre no ciclo principal do programa. A frequ√™ncia de polling do bot√£o (frequ√™ncia ADC) foi 12000/128 = 93,75 (kHz), onde 128 √© o divisor m√°ximo poss√≠vel.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em seguida, compilei uma matriz de valores de registro UART UBRR1 da configura√ß√£o UART, dependendo de uma ou outra taxa de transmiss√£o PELCO-D, que pode ser selecionada na lista nas configura√ß√µes atrav√©s do menu. </font><font style="vertical-align: inherit;">Esses valores podem ser calculados usando a f√≥rmula da folha de dados no MK e tamb√©m podem ser obtidos usando o configurador autom√°tico do AVR Wizard. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ent√£o eu comecei a modelar o menu. </font><font style="vertical-align: inherit;">Este √© o est√°gio principal e demorado de escrever um programa. </font><font style="vertical-align: inherit;">Em princ√≠pio, eu n√£o iria repetir o menu do firmware padr√£o, exceto por isso, decidi complic√°-lo para uma estrutura hier√°rquica (se√ß√£o na se√ß√£o). </font><font style="vertical-align: inherit;">Abaixo est√° uma descri√ß√£o do modelo e as defini√ß√µes do menu que fiz para mim.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N√£o posso ler</font></font></b>
                        <div class="spoiler_text">     .<br>
          .<br>
      .<br>
          .<br>
       ¬´MENU¬ª.<br>
<br>
    ¬´¬ª    .<br>
    ¬´¬ª  ¬´¬ª       .<br>
  ¬´¬ª       .<br>
  ¬´¬ª       .<br>
  (   )   ,         .<br>
   ¬´ ¬ª,     .<br>
<br>
   :<br>
 ‚Äî ;<br>
 ‚Äî ;<br>
 ‚Äî ;<br>
 ‚Äî .<br>
<br>
    ,   ,   .<br>
    &lt;&gt;.<br>
     .<br>
         "&lt;..&gt;".<br>
      ¬´¬ª.<br>
      ,   .<br>
        ( ) .<br>
    "&lt;..&gt;"      .<br>
        ,    .<br>
           .<br>
<br>
      .<br>
     .<br>
        .<br>
     "&lt;‚Ä¢&gt;" ( ).<br>
     "&lt; &gt;" ().<br>
      ¬´¬ª.<br>
<br>
    .<br>
           .<br>
     ¬´l*l¬ª (,   ¬´l¬ª).<br>
     ¬´l l¬ª (,   ¬´l¬ª).<br>
        ¬´¬ª.<br>
<br>
  ,       .<br>
     .<br>
           .<br>
            .<br>
       : ¬´000¬ª, ¬´00¬ª, ¬´0¬ª.<br>
        .<br>
         : ": ".<br>
  ‚Äî      (    )       .<br>
 ,   ,     ¬´¬ª  ¬´¬ª.<br>
    ¬´¬ª     1.<br>
    ¬´¬ª     1.<br>
<br>
         .<br>
         .<br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Assim, a navega√ß√£o no menu √© um pouco semelhante √† navega√ß√£o nos arquivos e pastas atrav√©s do ‚ÄúTotal Commander‚Äù. O c√≥digo de implementa√ß√£o para este modelo de menu n√£o √© muito complicado, mas muito complicado. Existem duas vari√°veis ‚Äã‚Äãprincipais: o n√∫mero da p√°gina ativa e o n√∫mero da posi√ß√£o ativa na p√°gina. Para ambas as vari√°veis, duas fun√ß√µes de ‚Äúcaixa de mudan√ßa‚Äù funcionam uma na outra. Este par de fun√ß√µes est√° envolvido no processo de pressionar os bot√µes "Esquerda", "Direita" e "Menu". Em cada local (para cada bot√£o, p√°gina e item atual), certas a√ß√µes s√£o registradas. Cada p√°gina do menu possui uma fun√ß√£o que implementa a exibi√ß√£o da p√°gina na tela com todas as inscri√ß√µes e par√¢metros. Antes de implementar as fun√ß√µes de sa√≠da da p√°gina, eu as modelei anteriormente no Excel, como se costuma dizer, "por c√©lulas".Portanto, as coordenadas das c√©lulas de cada s√≠mbolo no campo da tela s√£o apresentadas com mais clareza e essas informa√ß√µes s√£o necess√°rias na fase de programa√ß√£o. Na figura abaixo, como exemplo, dei a visualiza√ß√£o da p√°gina 9, na qual o baudrate PELCO-D √© selecionado na lista. O elemento da interface na p√°gina √© um bot√£o de op√ß√£o. Al√©m disso, o primeiro par√°grafo &lt;..&gt; √© sair desta se√ß√£o.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/c0/s1/uy/c0s1uyuaoh9dawm-bqpf5g4pmjg.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FIG. 9. Modelando o OSD no Excel.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Tamb√©m fiz uma matriz que reflete o n√∫mero de pontos em cada p√°gina. √â usado no processamento de pressionar os bot√µes Para cima e Para baixo. Isso √© feito para reduzir o c√≥digo e evitar o uso da fun√ß√£o de caixa de mudan√ßa.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Prensas virtuais repetidas enquanto mant√©m pressionados os bot√µes s√£o implementadas no corpo da interrup√ß√£o do timer pela fun√ß√£o "case-switch", que funciona em uma vari√°vel inteira, que √© um sinalizador. O valor do sinalizador √© exclusivo para cada a√ß√£o de um bot√£o em uma p√°gina espec√≠fica e em um item de menu espec√≠fico. Ele √© atribu√≠do ao sinalizador como um n√∫mero de s√©rie apenas nos locais em que s√£o necess√°rios cliques virtuais. Ao mesmo tempo, dentro da fun√ß√£o ‚Äúcaixa de mudan√ßa‚Äù (no corpo da interrup√ß√£o do temporizador) s√£o colocadas c√≥pias de fun√ß√µes que implementam as a√ß√µes dos bot√µes. Para economizar mem√≥ria, foi poss√≠vel colocar "atalhos" (links) em chamadas regulares para a fun√ß√£o de processamento de bot√µes. √â ainda mais razo√°vel, mas naquela √©poca eu n√£o tinha paci√™ncia para pensar em como faz√™-lo melhor, porque queria terminar o projeto o mais r√°pido poss√≠vel. E a mem√≥ria no ATmega128 acabou sendo bastante.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por fim, implementei ‚Äúbibliotecas‚Äù para trabalhar com um processador de v√≠deo, gerador de caracteres e o RTC DS1307 com as fun√ß√µes necess√°rias. Depois disso, determinei os endere√ßos do EEPROM MK para armazenar essas ou aquelas informa√ß√µes. Os primeiros 32 bytes s√£o reservados para armazenar informa√ß√µes de configura√ß√µes de menu. Os pr√≥ximos 32 bytes s√£o reservados para armazenar texto que pode ser exibido na tela ou alterado usando o comando padr√£o ‚ÄúPelco-D Write Char. Para tela ". Os pr√≥ximos 256 bytes da √°rea EEPROM s√£o reservados para o alfabeto (convers√£o de um caractere de ASCII em um endere√ßo para um gerador de caracteres, conforme mencionado acima). Por fim, os pr√≥ximos 128 bytes s√£o reservados para armazenar "predefini√ß√µes" (modelos) de zoom / foco. Eu introduzi esse recurso devido √† falta de foco autom√°tico. Eu escrevi sobre isso no come√ßo do artigo. Um total de 32 modelos. As coordenadas do zoom ou foco s√£o codificadas em dois bytes.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Separadamente, vale a pena escrever sobre a implementa√ß√£o do gerenciamento de SD. A rota√ß√£o do SD √© obtida chamando as fun√ß√µes StepF () e StepZ () no bloco de interrup√ß√£o do temporizador. A velocidade de rota√ß√£o √© determinada pela configura√ß√£o deste temporizador. E a implementa√ß√£o das fun√ß√µes acima implementa a promo√ß√£o de foco ou zoom (respectivamente) em uma etapa m√≠nima. Durante a rota√ß√£o da lente zoom e do foco, suas posi√ß√µes finais s√£o controladas. A posi√ß√£o do foco m√°ximo e a posi√ß√£o do zoom m√≠nimo s√£o representadas no programa por constantes (280 e -600, respectivamente). Mas a posi√ß√£o do foco m√≠nimo e a posi√ß√£o do zoom m√°ximo - na forma das vari√°veis ‚Äã‚ÄãF_min e Z_max (mais precisamente, fun√ß√µes). Essa abordagem foi facilitada por uma √°rea de trabalho n√£o retangular com um canto inferior direito cortado. Para calcular os valores de F_min e Z_max, s√£o usadas as fun√ß√µes definidas por partes F_min (Z) e Z_max (F). Al√©m disso,quando o zoom SD gira na dire√ß√£o positiva em Z (coordenada de zoom)&gt; 500, o foco SD gira simultaneamente na mesma dire√ß√£o se o √∫ltimo tiver coordenadas &lt;(- 180). Ou seja, a posi√ß√£o m√°xima de zoom, em princ√≠pio, n√£o √© limitada pela posi√ß√£o atual de foco, mas √© limitada a 600. Simplesmente acontece que dois SDs rodam simultaneamente quando a borda angular correspondente da regi√£o pentagonal √© atingida e o movimento nesse est√°gio ocorre ao longo do ‚Äúlado cortado‚Äù (se interpretado graficamente) ) Do ponto de vista da mec√¢nica, isso √© equivalente ao processo descrito no artigo anterior, quando, na aus√™ncia de SD e ao mover manualmente os n√≥s de zoom e foco, o n√≥ de zoom no final do caminho "puxa" o n√≥ de foco. Devido ao fato de que a coordenada de zoom domina a coordenada de foco (√© por isso que considero a depend√™ncia de F (Z),mas n√£o vice-versa), n√£o comecei a implementar um procedimento semelhante de rolagem de zoom na fun√ß√£o Step_F ().</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No firmware original, a velocidade de alterar o zoom e o foco tinha valores fixos. Isso nem sempre √© conveniente. No meu firmware, forneci quatro valores das velocidades de zoom e foco (independentemente), que podem ser selecionados atrav√©s do menu e usando o comando PELCO-D atribu√≠do a esta fun√ß√£o. Esses quatro valores s√£o pr√©-selecionados no est√°gio de depura√ß√£o com base na conveni√™ncia e, em seguida, s√£o inseridos no firmware.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A fun√ß√£o de inicializa√ß√£o do BD init_MR () √© necess√°ria para vincular a mec√¢nica do zoom e focar no sistema de coordenadas. √â realizada uma vez toda vez que voc√™ liga a c√¢mera de v√≠deo. O algoritmo de seu trabalho √© aproximadamente o seguinte. Antes de tudo, sup√µe-se que o zoom ou o foco esteja no ponto zero, e √© feita uma tentativa de capturar o retorno do sinal dos interruptores de limite pelas fun√ß√µes externas de interrup√ß√£o. Observarei imediatamente que, se o zoom ou o foco estiver "em zero" (nos limites da parti√ß√£o do trailer √≥ptico), o sinal na sa√≠da do trailer ter√° um estado "intermedi√°rio" entre o l√≥gico "0" e "1". Tais casos s√£o muito improv√°veis, mas n√£o podem ser descartados. No entanto, a fun√ß√£o de interrup√ß√£o n√£o interpreta um sinal como ressalto. Foi por isso que eu vim para usar o ADC MK, acionando sinais dos interruptores de limite e zoom nos dois canais livres. Assim,o primeiro passo √© a "digitaliza√ß√£o" dos sinais dos interruptores de limite com precis√£o de 8 bits. Isso √© feito usando uma √∫nica convers√£o de anal√≥gico para digital. Vale lembrar que a tens√£o de refer√™ncia no nosso caso √© de 5V, e o n√≠vel l√≥gico ‚Äú1‚Äù do interruptor de limite √© de 3,3V. Para um "0" l√≥gico, o valor ADC ser√° zero e para um "1" - 3,3 / 5 * 255 = 168. Se o valor do sinal de um ou outro trailer cair na faixa, por exemplo, de 2 a 165 (um intervalo nebuloso √© obtido), isso significa que o n√≥ correspondente j√° est√° "em zero" e o procedimento de inicializa√ß√£o para esse n√≥ pode ser interrompido. Caso contr√°rio, pelo valor l√≥gico do sinal do trailer ("0" ou "1"), voc√™ precisar√° determinar em qual parte (metade) o n√≥ est√° localizado. A dire√ß√£o de rota√ß√£o do SD depender√° disso. De uma forma ou de outra, o SD deve ser girado nessa dire√ß√£o,para que o n√≥ correspondente se mova em dire√ß√£o ao "zero" (chave limitadora). Assim, a rota√ß√£o do acionamento do motor √© iniciada com o c√°lculo simult√¢neo do n√∫mero de etapas at√© que a chave limite seja atingida. Assim que o interruptor de limite correspondente for alcan√ßado, o que determina a fun√ß√£o da interrup√ß√£o externa de acordo com a diferen√ßa no n√≠vel l√≥gico, haver√° uma rota√ß√£o reversa do acionamento do motor. Ele ir√° girar na dire√ß√£o oposta pelo mesmo n√∫mero de etapas, retornando assim √† sua posi√ß√£o original. O valor do n√∫mero de etapas para cada BD com o sinal correspondente ser√° copiado para as vari√°veis ‚Äã‚Äãcorrespondentes antes de sair da fun√ß√£o de inicializa√ß√£o. O procedimento descrito acima ocorre independentemente para foco e zoom na mesma fun√ß√£o (n√£o por sua vez).A velocidade de rota√ß√£o do acionamento do motor no est√°gio de inicializa√ß√£o √© determinada por uma constante separada e corresponde √† velocidade m√°xima para uma rota√ß√£o correta e confi√°vel do SM.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Considere o exemplo em que, antes de ligar a c√¢mera, o zoom estava na regi√£o negativa e o foco estava na regi√£o positiva. A figura mostra esquematicamente a trajet√≥ria do ponto (Z; F) durante o procedimento de inicializa√ß√£o do motor de passo. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/1p/59/6d/1p596dlrqriwqff1jh4jfrtvu-8.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FIG. 10. O processo de inicializa√ß√£o do zoom e foco.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
O ponto A √© a posi√ß√£o inicial do zoom e do foco. O movimento dos dois n√≥s ocorre na dire√ß√£o de "zero" com a mesma velocidade (velocidade de inicializa√ß√£o). No ponto B, o foco chega a zero, pois estava mais perto de zero que o zoom. Ent√£o o foco √© invertido. No ponto C, o foco conclui o processo de inicializa√ß√£o, retornando √† sua posi√ß√£o original. Ao mesmo tempo, o zoom ainda est√° se movendo em dire√ß√£o ao seu "zero". No ponto D, atinge seu "zero" e retorna √† sua posi√ß√£o original (ponto A).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al√©m da fun√ß√£o de inicializa√ß√£o init_MR (), h√° uma fun√ß√£o goto_zf (z, f). </font><font style="vertical-align: inherit;">Com base no nome, pretende-se alternar de uma predefini√ß√£o para outra, sobre a qual escrevi no in√≠cio do artigo. </font><font style="vertical-align: inherit;">A velocidade de rota√ß√£o do motor de passo durante a transi√ß√£o √© a mesma que durante a inicializa√ß√£o. </font><font style="vertical-align: inherit;">O processo de transi√ß√£o em zoom e foco √© realizado simultaneamente. </font><font style="vertical-align: inherit;">Ou seja, se for necess√°rio ir do ponto (z1; f1) para o ponto (z2; f2), a rota√ß√£o simult√¢nea de dois SDs ser√° iniciada. </font><font style="vertical-align: inherit;">Se, por exemplo, | f2-f1 | &lt;| z2-z1 |, o foco SD ser√° interrompido mais cedo. </font><font style="vertical-align: inherit;">Isso √© demonstrado na figura abaixo. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fb/-y/ya/fb-yyanbovlb6i3pe6rxsfh0ax8.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FIG. </font><font style="vertical-align: inherit;">11. O processo de alterar o zoom e o foco ao escolher uma predefini√ß√£o.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Durante todo o tempo de opera√ß√£o do motor de passo durante a passagem do limitador de marca zero, a coordenada correspondente √© zerada. </font><font style="vertical-align: inherit;">E isso apesar do fato de que teoricamente isso n√£o pode ser feito. </font><font style="vertical-align: inherit;">No entanto, na pr√°tica, ainda existe um erro de 1-2 etapas do SD.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vale acrescentar que, ao contr√°rio do firmware original, no meu caso, ao controlar o zoom e o foco (tanto pelos bot√µes quanto pelo PELCO-D), ofereci a possibilidade de movimento passo a passo. Isso funciona da seguinte maneira. Quando voc√™ clica em qualquer um dos 4 bot√µes para controlar o zoom ou o foco, o SD correspondente √© girado uma etapa, minimizando o movimento do n√≥ de zoom ou foco. Se voc√™ n√£o soltar o bot√£o, a rota√ß√£o normal do motor de passo come√ßar√° ap√≥s um curto per√≠odo de tempo. Esse atraso √© selecionado empiricamente com anteced√™ncia. Esse recurso √© semelhante ao pressionamentos virtuais repetidos enquanto mant√©m pressionado o bot√£o. Gra√ßas a esse recurso, o problema de "colar" o bot√£o ao controlar o zoom ou o foco no dispositivo remoto PELCO-D por uma conex√£o ruim √† Internet √© eliminado. Mais precisamente, a oportunidade surge como rude,e ajustar o zoom ou o foco.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O int√©rprete dos comandos PELCO-D √© feito pela mesma analogia do dispositivo para alternar cargas via PTZ. Dediquei anteriormente um pequeno artigo separado sobre Habr√© a esse dispositivo simples. Diferente do firmware original, os comandos de controle de zoom e foco se referem totalmente ao pressionar os bot√µes correspondentes. Ou seja, √© poss√≠vel ‚Äúsubir‚Äù no menu usando os bot√µes de zoom e foco PELCO-D. E para acessar remotamente o menu pelo PELCO-D, ou melhor, pressionar o bot√£o ‚ÄúMENU‚Äù, comparei o bot√£o de abertura com ele, porque essa fun√ß√£o n√£o √© usada neste modelo de c√¢mera. Portanto, existem cinco comandos PELCO-D b√°sicos para pressionar, bem como cinco comandos b√°sicos para liberar bot√µes. Al√©m disso, como j√° escrevi casualmente ao longo do artigo, comandos adicionais s√£o processados: "Definir predefini√ß√£o", "Limpar predefini√ß√£o","Ir para predefini√ß√£o", "Escrever caracteres. To Screen ‚Äù,‚Äú Clear Screen ‚Äù,‚Äú Set Speed ‚Äã‚ÄãSpeed ‚Äã‚Äã‚Äù,‚Äú Set Speed ‚Äã‚ÄãSpeed ‚Äã‚Äã‚Äù.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A data e a hora com o RTC s√£o exibidas no canto inferior esquerdo da imagem por analogia com as c√¢meras VHS antigas, se esta op√ß√£o estiver ativada no menu. Al√©m disso, no menu voc√™ pode selecionar o formato de sa√≠da, que tamb√©m forneci com anteced√™ncia. Tamb√©m na tela ao lado da data e hora √© poss√≠vel exibir o dia da semana. Al√©m do rel√≥gio, as coordenadas atuais de zoom e foco s√£o exibidas na tela como informa√ß√µes adicionais. Esta op√ß√£o √© necess√°ria principalmente no est√°gio de depura√ß√£o.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vou falar sobre as fun√ß√µes do menu que eu implementei. Com o tempo, se necess√°rio, o menu ser√° revisado: algumas fun√ß√µes podem ser removidas e outras adicionadas. A estrutura do menu que desenhei no SPlan, com visualiza√ß√µes de p√°gina, √© mostrada na figura abaixo. Setas vermelhas - entre na se√ß√£o. Setas azuis - saia da se√ß√£o. N√£o desenhei setas azuis em cada p√°gina do menu, desenhei apenas duas por exemplo. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/rl/vs/mp/rlvsmpdeoixbmwlg-jmf2uwj51m.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FIG. 12. A estrutura do menu na tela.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Algumas se√ß√µes do meu menu s√£o um pouco como as se√ß√µes do original. Primeiro de tudo, estas s√£o as duas primeiras se√ß√µes: balan√ßo de branco e exposi√ß√£o. Na terceira se√ß√£o, voc√™ pode especificar o endere√ßo da c√¢mera PELCO-D e selecionar a taxa de dados (taxa de transmiss√£o) na lista. A quarta se√ß√£o √© dedicada √† data e hora. Voc√™ pode definir a data, hora, dia da semana, escolher um dos quatro formatos de exibi√ß√£o e escolher um m√©todo de exibi√ß√£o. A quinta se√ß√£o - trabalhando com predefini√ß√µes (modelos) de zoom e foco, onde voc√™ pode cham√°-lo por n√∫mero, al√©m de apagar ou substituir. Tamb√©m nesta se√ß√£o do menu, voc√™ pode escolher uma das quatro velocidades para alterar o foco ou o zoom. A quinta se√ß√£o permite editar os par√¢metros do processador de v√≠deo localizado no byte 9 da categoria 3. Esse √© o n√≠vel e a invers√£o do componente burst do sinal de v√≠deo e o espelhamento de v√≠deo. A √∫ltima se√ß√£o do menu √© para depura√ß√£o.Com ele, voc√™ pode gravar no processador de v√≠deo qualquer valor de qualquer byte em qualquer categoria. O valor pode ser definido na forma decimal e bin√°ria.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora vou dizer algumas palavras sobre o gerenciador de inicializa√ß√£o. Como j√° escrevi, o gerenciador de inicializa√ß√£o √© necess√°rio para fazer o flash remoto da c√¢mera de v√≠deo via RS-485. Inicialmente, pensei em implementar totalmente o gerenciador de inicializa√ß√£o. No entanto, para economizar tempo, decidi fazer um dos downloaders j√° implementados que podem ser encontrados na Internet. Al√©m disso, nunca os usei, tendo uma id√©ia deles apenas no n√≠vel te√≥rico. Um dos crit√©rios importantes para escolher um gerenciador de inicializa√ß√£o √© o suporte ao RS-485. Normalmente, os downloaders AVR operam no UART RS-232. E o carregador de inicializa√ß√£o com suporte ao RS-485 difere apenas no fato de uma sa√≠da adicional ser alocada no lado do MK para alternar o transceptor RS-485 (por exemplo, MAX485) durante a transfer√™ncia de dados do MK para o PC. Ao piscar o MK, o carregador de inicializa√ß√£o transmite informa√ß√µes sobre a grava√ß√£o com ou sem √™xito para o computador. Primeiro carregador de inicializa√ß√£oque eu achei que permite gravar n√£o apenas a mem√≥ria FLASH do MK com firmware, mas tamb√©m EEPROM. Al√©m de escrever, voc√™ tamb√©m pode ler dados. Mas esse projeto com c√≥digo fonte do assembler foi bastante confuso e eu n√£o o entendi. Al√©m disso, a √™nfase principal deste gerenciador de inicializa√ß√£o visava a capacidade de piscar v√°rios dispositivos individualmente, sem desconect√°-los da rede RS-485, acessando cada dispositivo em um endere√ßo previamente costurado nele. N√£o preciso desses recursos funcionais, pois uso uma topologia diferente da rede RS-485 e √© poss√≠vel alternar rapidamente a c√¢mera de v√≠deo do DVR para o PC. O segundo gerenciador de inicializa√ß√£o √© o Chip45 alem√£o. O c√≥digo fonte n√£o √© de dom√≠nio p√∫blico, pode ser comprado do autor. Em vez disso, existem centenas de arquivos HEX para diferentes AVR MKs, diferentes interfaces UART (se houver v√°rios, como no meu caso),RS-485 ou RS-232 para escolher. Em suma, para todas as ocasi√µes. Ao mesmo tempo, o autor observa que, no caso do RS-485, a sa√≠da de comuta√ß√£o TX / RX √© fixa e corresponde ao pino XCK UART da interface do controlador, que praticamente n√£o √© usado no UART. No meu caso, o trig√©simo pino do XCK da segunda interface UART do Atmega128 MK √© PORTD.5 ‚Äã‚Äãe √© usado para ativar os interruptores de limite de zoom e foco. Em princ√≠pio, essa fun√ß√£o n√£o √© necess√°ria, porque, como os estudos mostraram, as chaves de limite est√£o sempre ativas, como j√° escrevi. E, se necess√°rio, voc√™ pode transferir esta fun√ß√£o para qualquer outro MK de sa√≠da livre. Mas, de qualquer forma, esse carregador de inicializa√ß√£o tamb√©m n√£o me impressionou, principalmente porque me deparei com um carregador de inicializa√ß√£o mais interessante chamado ‚ÄúAVR Universal Bootloader‚Äù de design chin√™s. Como o Chip45, ele s√≥ pode escrever e apenas na mem√≥ria FLASH do MK.Mas ele tem um grande n√∫mero de possibilidades e, portanto, decidi firmemente continuar nela. Ele vem como um projeto do AVR Studio com c√≥digo-fonte C. Devido ao fato de trabalhar no CodeVisionAVR, tive que instalar o AVR Studio junto com o WinAVR. Para obter o arquivo HEX do firmware do gerenciador de inicializa√ß√£o, voc√™ precisa compilar o projeto fazendo altera√ß√µes preliminares no c√≥digo-fonte na configura√ß√£o do seu pr√≥prio dispositivo e precisa do seu. A compila√ß√£o do projeto consiste no lan√ßamento de um arquivo bat (arquivo em lote), no qual os comandos de compila√ß√£o s√£o gravados. Portanto, n√£o √© necess√°rio que um projeto no AVR Studio seja aberto. Altera√ß√µes no c√≥digo fonte podem ser feitas manualmente (no n√≠vel do programador) ou usando o configurador. A fun√ß√£o deste √∫ltimo √© uma janela adicional do utilit√°rio que funciona com o carregador de inicializa√ß√£o, que tamb√©m est√° anexado.No configurador, voc√™ pode especificar o pino MK para a comuta√ß√£o TX / RX RS-485, o pino MK para o LED de controle piscando, o pino MK para entrar no gerenciador de inicializa√ß√£o, a maneira como o gerenciador de inicializa√ß√£o √© inserido, o nome e a frequ√™ncia do MK, etc., n√£o podem ser listados. Al√©m disso, o conhecido programa padr√£o "HyperTerminal" pode funcionar como um utilit√°rio para carregar um programa de usu√°rio no MK, ou seja, trabalhar com o gerenciador de inicializa√ß√£o, e usa o protocolo "Xmodem" para baixar o firmware. E, para trabalhar de forma conveniente e visual com o gerenciador de inicializa√ß√£o atrav√©s do terminal de texto, a fun√ß√£o especial "Modo verboso" √© fornecida no configurador. Mas, apesar da atratividade do hiperterminal, decidi usar o utilit√°rio que acompanha o carregador de inicializa√ß√£o. O fato √© que, com a conveniente fun√ß√£o Verbose ativada no configurador, trabalhando atrav√©s do terminal, me deparei com a seguinte situa√ß√£o.√Äs vezes, acontecia quando o tr√°fego de dados na linha "colidia" (ambos os dispositivos no modo TX), como resultado do MAX485 na c√¢mera de v√≠deo ficar muito quente e falhar, ou melhor, n√£o completamente, mas apenas a se√ß√£o RX (transmiss√£o de dados via RS-485 para a c√¢mera) . Por causa disso, abandonei o HyperTerminal. E h√° mais um inconveniente. O HyperTerminal n√£o funciona com arquivos de texto HEX e aceita apenas um arquivo bin√°rio. Portanto, eu teria que aplicar uma convers√£o adicional de hex para bin. Depois que o arquivo HEX do gerenciador de inicializa√ß√£o foi gerado por mim, eu o costurei no MK usando o programa PonyProg e o programador SPI usual. Como resultado, o carregador de inicializa√ß√£o funciona da seguinte maneira. Quando voc√™ liga a c√¢mera de v√≠deo, o carregador de inicializa√ß√£o √© imediatamente ativado. Ele espera por uma conex√£o do utilit√°rio por um segundo e o firmware principal come√ßa a funcionar. Se a conex√£o for estabelecida com sucesso,ent√£o o processo de piscar come√ßa. Ao mesmo tempo, a outra extremidade da linha RS-485 deve ser desconectada do DVR com anteced√™ncia e conectada ao PC atrav√©s do adaptador USB RS485 &lt;-&gt; RS232 ou RS485 &lt;-&gt; USB. A prop√≥sito, sobre os adaptadores. Surgiu a quest√£o de como fazer esse adaptador voc√™ mesmo, porque os adaptadores comprados s√£o caros. Procurando na Internet, encontrei um circuito adaptador RS485 &lt;-&gt; RS232 simples. √â mostrado na figura abaixo. Consiste principalmente nos microcircuitos MAX232 e MAX485 conhecidos, e o TX / RX √© comutado pelo sinal da 3¬™ sa√≠da da porta COM do computador atrav√©s de uma cadeia com um diodo zener. Ou seja, o MAX485 √© alternado pelo tr√°fego de dados que o PC transmite. Tudo √© simples e engenhoso.RS232 ou RS485 &lt;-&gt; USB. A prop√≥sito, sobre os adaptadores. Surgiu a quest√£o de como fazer esse adaptador voc√™ mesmo, porque os adaptadores comprados s√£o caros. Procurando na Internet, encontrei um circuito adaptador RS485 &lt;-&gt; RS232 simples. √â mostrado na figura abaixo. Consiste principalmente nos microcircuitos MAX232 e MAX485 conhecidos, e o TX / RX √© comutado pelo sinal da 3¬™ sa√≠da da porta COM do computador atrav√©s de uma cadeia com um diodo zener. Ou seja, o MAX485 √© alternado pelo tr√°fego de dados que o PC transmite. Tudo √© simples e engenhoso.RS232 ou RS485 &lt;-&gt; USB. A prop√≥sito, sobre os adaptadores. Surgiu a quest√£o de como fazer esse adaptador voc√™ mesmo, porque os adaptadores comprados s√£o caros. Procurando na Internet, encontrei um circuito adaptador RS485 &lt;-&gt; RS232 simples. √â mostrado na figura abaixo. Consiste principalmente nos microcircuitos MAX232 e MAX485 conhecidos, e o TX / RX √© comutado pelo sinal da 3¬™ sa√≠da da porta COM do computador atrav√©s de uma cadeia com um diodo zener. Ou seja, o MAX485 √© alternado pelo tr√°fego de dados que o PC transmite. Tudo √© simples e engenhoso.Consiste principalmente nos microcircuitos MAX232 e MAX485 conhecidos, e o TX / RX √© comutado pelo sinal da 3¬™ sa√≠da da porta COM do computador atrav√©s de uma cadeia com um diodo zener. Ou seja, o MAX485 √© alternado pelo tr√°fego de dados que o PC transmite. Tudo √© simples e engenhoso.Consiste principalmente nos microcircuitos MAX232 e MAX485 conhecidos, e o TX / RX √© comutado pelo sinal da 3¬™ sa√≠da da porta COM do computador atrav√©s de uma cadeia com um diodo zener. Ou seja, o MAX485 √© alternado pelo tr√°fego de dados que o PC transmite. Tudo √© simples e engenhoso.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/dg/_j/xg/dg_jxg5vy5h-i32yee8szg8urho.png"><br>
<i>. 13.   RS-232 &lt;-&gt; RS-485.</i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Depois de dominar o gerenciador de inicializa√ß√£o, no meu tempo livre, decidi pesquisar a √≥tica da c√¢mera de v√≠deo. Mais precisamente, tornou-se interessante para mim quais combina√ß√µes de valores de zoom e foco produzir√£o imagens focadas a diferentes dist√¢ncias da lente ao objeto. Deixe-me lembr√°-lo de que a regi√£o de v√°rios valores m√∫tuos de zoom e foco √© descrita por uma regi√£o pentagonal (quase retangular). Por exemplo, calcule a dist√¢ncia da lente ao objeto em 10 cm. O argumento (ao longo do eixo da abcissa) do zoom tem uma faixa de valores de -600 a 600. √â necess√°rio selecionar o valor do foco em cada valor de zoom no qual o assunto na frente da lente na imagem de v√≠deo estar√° em foco. Ent√£o voc√™ precisa fazer uma mesa. Obviamente, n√£o faz sentido classificar todos os 1200 valores de zoom; basta levar algumas dezenas de valores com um certo passo igual. Como tal, escolhi o valor 50.Em cada valor de zoom com esta etapa (-600, -550, -500, ...) selecionei o valor do foco e registrei os resultados da medi√ß√£o. Eu fiz um procedimento semelhante com outras dist√¢ncias da lente ao objeto: 50 cm, 1 m, 10 m, 100 M. O resultado foi uma fam√≠lia de curvas que eu exibi no Excel.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/5o/_4/qi/5o_4qikxragcwmdaeespjactaoi.png"><br>
<i>. 14.  Z-F   .</i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Olhando para os gr√°ficos, quero fazer muitos coment√°rios. No zoom m√≠nimo, os valores de foco s√£o ligeiramente menores que o "meio" (zero) para quase qualquer dist√¢ncia. A curva rosa por uma dist√¢ncia de 10 cm termina com um valor de zoom de cerca de 250, o que corresponde ao valor m√≠nimo de foco. Essa curva tem um car√°ter decrescente e √© convexa para cima. A curva vermelha por uma dist√¢ncia de 1 m tem uma forma completamente diferente. Em primeiro lugar, n√£o √© mon√≥tono e, em segundo lugar, no que diz respeito √† propriedade de convexidade, existe um ponto de inflex√£o. As curvas para dist√¢ncias de 10 me 100 m s√£o de natureza semelhante, as quais, ali√°s, praticamente coincidem, que eu j√° conhecia antecipadamente. Portanto, as dist√¢ncias medidas de 10 e 100 metros, √© claro, tomei aproximadamente. O que oscila a curva azul por meio metro de dist√¢ncia - inicialmente eu n√£o faria medi√ß√µes nela.Selecionei essa dist√¢ncia aproximadamente com base no princ√≠pio de que o mais pr√≥ximo poss√≠vel com um fragmento da curva correspondente se aproxima do limite do canto da regi√£o (corte). E assim aconteceu: essa borda praticamente toca um fragmento da curva. Em geral, vale ressaltar que a metade superior da regi√£o (valores de foco positivo) praticamente n√£o √© utilizada. A exce√ß√£o est√° a uma grande dist√¢ncia do objeto at√© a lente e com o maior zoom. E, no entanto, para quase todas as dist√¢ncias (exceto a mais pr√≥xima, a menos de meio metro), com zoom baixo (150 ou menos), os valores de foco s√£o quase os mesmos. De um modo geral, todos os fatos de medi√ß√£o declarados devem ter uma interpreta√ß√£o te√≥rica, com base nas leis da √≥ptica. Mas, atualmente, n√£o tenho id√©ia dos dispositivos de lentes desse tipo. M√°ximo,o que encontrei no campo da √≥ptica √© a constru√ß√£o de um simples telesc√≥pio refrator de duas lentes. E no caso desta c√¢mera de v√≠deo - eu n√£o entendi a mec√¢nica da √≥ptica. Na sa√≠da, apenas dois n√≥s m√≥veis n√£o est√£o dispon√≠veis: o n√≥ de foco (respons√°vel pelo foco) e o n√≥ de zoom. E n√£o sei quantas lentes totais existem. Suponho que dois que est√£o conectados com esses n√≥s em movimento. Tamb√©m √© importante notar que, ao ajustar o foco, o zoom tamb√©m muda visualmente levemente, mesmo se o n√≥ correspondente estiver fixo.conectado a esses n√≥s em movimento. Tamb√©m √© importante notar que, ao ajustar o foco, o zoom tamb√©m muda visualmente levemente, mesmo se o n√≥ correspondente estiver fixo.conectado a esses n√≥s em movimento. Tamb√©m √© importante notar que, ao ajustar o foco, o zoom tamb√©m muda visualmente levemente, mesmo se o n√≥ correspondente estiver fixo.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No final do artigo, passamos aos testes pr√°ticos da c√¢mera de v√≠deo. Decidi n√£o tirar muitas fotos, mas imediatamente enviei o v√≠deo inteiro. Gravei a captura de v√≠deo atrav√©s do dispositivo, o som foi gravado separadamente no gravador de √°udio. A resolu√ß√£o original √© 720 por 576. Ap√≥s o upload do v√≠deo para o YouTube, sua qualidade mudou visivelmente.</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/H4agAlZlWW8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quando voc√™ liga a c√¢mera, a primeira coisa que acontece √© a inicializa√ß√£o dos motores de passo de zoom e o foco no fundo da imagem de v√≠deo. Essa imagem √© em preto e branco e sem AGC, pois o procedimento de inicializa√ß√£o do processador de v√≠deo ainda n√£o passou. No canto inferior esquerdo, a data e a hora atuais exibir√£o a data e a hora da compila√ß√£o do firmware atual da c√¢mera. No c√≥digo-fonte do firmware, criei as vari√°veis ‚Äã‚Äãcorrespondentes que est√£o localizadas em endere√ßos fixos no c√≥digo HEX. Sup√µe-se que no est√°gio de compila√ß√£o, mais precisamente ap√≥s, um programa seja executado automaticamente, que pegue os valores das vari√°veis ‚Äã‚Äãdesde o hor√°rio do sistema e os insira no arquivo HEX nos endere√ßos desejados. Al√©m disso, ainda √© necess√°rio recontar as somas de verifica√ß√£o. Talvez exista uma maneira mais simples. No exemplo do v√≠deo, essas vari√°veis ‚Äã‚Äãs√£o iguais a zero, pois ainda n√£o implementei essa fun√ß√£o.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ap√≥s a inicializa√ß√£o do SD, o processador de v√≠deo √© inicializado e uma sauda√ß√£o √© exibida imediatamente no fundo da imagem de v√≠deo. Ao ajustar o zoom e o foco, suas coordenadas s√£o exibidas no canto inferior direito. No v√≠deo, demonstro o uso da fun√ß√£o de salvar e recuperar modelos (predefini√ß√µes) de zoom e foco em v√°rias partes da imagem. Ao limpar uma predefini√ß√£o, as vari√°veis ‚Äã‚Äãcorrespondentes adquirem o valor 0xFFFF, que corresponde a um valor de -1. Esta fun√ß√£o, em princ√≠pio, √© sup√©rflua, pode ser exclu√≠da.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Na √∫ltima se√ß√£o do menu, usada para depura√ß√£o, mostro o registro da categoria 9 byte 3. As fun√ß√µes correspondentes a esse byte est√£o na se√ß√£o anterior do menu, escrevi sobre elas v√°rias vezes. Devido ao fato de o estado atual do byte n√£o ser lido no processador de v√≠deo, eu o defino manualmente como "48" como um dos aceit√°veis. Depois disso, altero os bits individuais desse byte, mostrando assim as fun√ß√µes "Mirror" e "Inverse Burst". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ao ajustar o n√≠vel ‚ÄúBurst‚Äù na pen√∫ltima se√ß√£o do menu, voc√™ notar√° um pequeno bug de firmware que √© f√°cil de corrigir. Das outras defici√™ncias - √†s vezes, ao atualizar a hora, ocorrem lacunas nos caracteres. Eu acho que isso se deve √† instala√ß√£o ‚Äúdistorcida‚Äù de eletr√¥nicos dentro da c√¢mera de v√≠deo.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em geral, ao operar a c√¢mera, foram encontrados pequenos inconvenientes associados √† navega√ß√£o no menu. </font><font style="vertical-align: inherit;">Portanto, √© bem poss√≠vel que a revis√£o necess√°ria seja feita ao longo do tempo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sim, quase esqueci. </font><font style="vertical-align: inherit;">Como prometido, trago duas fotografias do que o preenchimento da c√¢mera de v√≠deo transformou ap√≥s o desenvolvimento. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/m-/0-/ah/m-0-ahq2z2xqxpr988ndcfae5uu.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FIG. </font><font style="vertical-align: inherit;">15. Uma vis√£o atualizada da c√¢mera de v√≠deo na parte inferior. </font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/gs/8_/bw/gs8_bwxf2yy1mqyrt2gmbgzoyu8.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FIG. </font><font style="vertical-align: inherit;">16. Uma vis√£o atualizada da c√¢mera de v√≠deo dentro da parte superior.</font></font></i><br>
<br></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt499534/index.html">Guia de desenvolvimento de servi√ßos de back-end do Python</a></li>
<li><a href="../pt499536/index.html">Growbox como um m√©todo de conhecer a si mesmo</a></li>
<li><a href="../pt499540/index.html">Como funciona a renderiza√ß√£o de jogos em 3D: texturiza√ß√£o e filtragem de textura</a></li>
<li><a href="../pt499542/index.html">Top Fakapov Cyan</a></li>
<li><a href="../pt499544/index.html">Aprenda redes neurais no Planilhas Google</a></li>
<li><a href="../pt499548/index.html">M√°scara - cuidar dos outros ou uma ilus√£o de seguran√ßa?</a></li>
<li><a href="../pt499550/index.html">Solu√ß√µes de baixo c√≥digo para ecossistemas</a></li>
<li><a href="../pt499556/index.html">Servidor de jogos no MS Orleans - Parte 3: Resumo</a></li>
<li><a href="../pt499560/index.html">Corretor de layout Xswitcher para linux: etapa dois</a></li>
<li><a href="../pt499562/index.html">Artigo mal sucedido sobre acelera√ß√£o da reflex√£o</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>