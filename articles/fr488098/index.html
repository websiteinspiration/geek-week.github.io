<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏼‍🎤 🤵🏼 🔨 Comment créer un projet Django à partir d'un modèle 💠 🏇🏾 🧜</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Rebonjour! Surtout pour les étudiants du cours "Développeur Web en Python", nous avons préparé une autre traduction intéressante.
 
 
 
 
 Un modèle d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Comment créer un projet Django à partir d'un modèle</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/488098/"><b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rebonjour! </font><font style="vertical-align: inherit;">Surtout pour les étudiants du cours </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Développeur Web en Python",</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nous avons préparé une autre traduction intéressante.</font></font></i></b><br>
<br>
<img src="https://habrastorage.org/webt/_c/dp/9z/_cdp9zo7tpy3bzjeh-cyrcscd6y.png"><br>
<hr><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un modèle de projet Django est un moyen naturel de résoudre les problèmes qui surviennent lorsque le format de projet Django par défaut ne répond plus aux exigences. </font><font style="vertical-align: inherit;">Aujourd'hui, dans ce guide, vous apprendrez à créer votre propre projet à partir d'un modèle.</font></font><a name="habracut"></a><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Qu'est-ce qu'un modèle de projet dans Django?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'une des fonctionnalités peu connues de Django est la possibilité de créer un projet à partir d'un modèle, c'est-à-dire une structure de répertoires personnalisée. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C'est pratique lorsque le format de projet par défaut ne suffit plus (et ce ne sera certainement pas suffisant lorsque vous souhaitez déployer votre solution en production, croyez-moi), ou lorsque vous atteignez le point où vous utiliserez les mêmes configurations encore et encore pour beaucoup de projets sur Django. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un modèle de projet Django n'est rien de plus qu'un projet avec une structure de répertoires personnalisée prédéfinie que vous pouvez créer vous-même en quelques minutes. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un exemple du modèle Django populaire est le </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">django-cookiecutter</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Django cookiecutter</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Il dispose d'un large éventail de fonctions et de configurations prêtes pour un déploiement autonome en production, c'est le chemin qui peut être utilisé pour créer presque n'importe quel nouveau projet sur Django. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cependant, le </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">django-cookiecutter est</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> parfois redondant, surtout pour les débutants, donc avant de l'utiliser, créez un modèle Django plus simple qui peut mieux vous aider à comprendre les bases. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans les sections suivantes, vous apprendrez à créer votre propre modèle.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comment créer votre propre modèle de projet Django</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour commencer, créez un environnement virtuel Python dans le dossier sélectionné et installez Django (notez qu'il s'agit de quatre commandes distinctes):</font></font><br>
<br>
<pre><code class="django hljs"><span class="xml">mkdir project-name &amp;&amp; cd $_
python3 -m venv venv
source venv/bin/activate
pip install django</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Créez ensuite un projet Django avec: </font></font><br>
<br>
<pre><code class="django hljs"><span class="xml">django-admin startproject project_name .</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Faites attention au nom, il doit être exactement </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">project_name</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Après cela, ouvrez le projet dans l'éditeur. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
(Notez que dans notre exemple, j'ai utilisé </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">project_name</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pour le dossier et pour le nom du projet). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, vous devez regarder chaque fichier du projet et remplacer tous les </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">project_name</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> par </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{{project_name}}</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (une commande sed sur une seule ligne est très bien). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fichiers à modifier:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">manage.py</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">settings.py</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wsgi.py</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">asgi.py</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme vous l'avez peut-être deviné, la variable </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{{project_name}}</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est un espace réservé. </font><font style="vertical-align: inherit;">Par exemple, dans </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">manage.py,</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> vous devrez remplacer ce qui suit:</font></font><br>
<br>
<pre><code class="django hljs"><span class="xml"># manage.py

def main():
    os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'project_name.settings')
    try:
# omit</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sur ce:</font></font><br>
<br>
<pre><code class="django hljs"><span class="xml"># manage.py

def main():
    os.environ.setdefault('DJANGO_SETTINGS_MODULE', '</span><span class="hljs-template-variable">{{ project_name }}</span><span class="xml">.settings')
    try:
# omit</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wsgi.py,</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> vous changez ceci:</font></font><br>
<br>
<pre><code class="django hljs"><span class="xml">os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'project_name.settings')</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aux éléments suivants:</font></font><br>
<br>
<pre><code class="django hljs"><span class="xml">os.environ.setdefault('DJANGO_SETTINGS_MODULE', '</span><span class="hljs-template-variable">{{ project_name }}</span><span class="xml">.settings')</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Etc. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De plus, vous pouvez créer n'importe quelle configuration que vous souhaitez, ou mieux encore, analyser les paramètres de Django dans des fichiers séparés pour le développement, les tests et la production. </font><font style="vertical-align: inherit;">Vous en trouverez un exemple </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Avant de passer à l'étape suivante, assurez-vous de supprimer l'environnement virtuel du modèle de projet.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comment créer un projet Django à partir de votre propre modèle</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant que vous avez le modèle de projet, vous pouvez l'utiliser. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour ce faire, créez un nouvel environnement virtuel Python dans un autre dossier et installez Django:</font></font><br>
<br>
<pre><code class="django hljs"><span class="xml">mkdir new-django-project &amp;&amp; cd $_
python3 -m venv venv
source venv/bin/activate
pip install django</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, au lieu d'exécuter simplement </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">django-admin startproject</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , nous passerons l'indicateur </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">--template</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pour l'installer à partir de notre modèle. </font><font style="vertical-align: inherit;">Supposons que si vous créiez un modèle dans votre répertoire personnel </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">~ / project-name</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , vous feriez:</font></font><br>
<br>
<pre><code class="django hljs"><span class="xml">django-admin startproject --template ~/project-name new_django_project .</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cette commande créera un nouveau projet Django à partir du modèle. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
(Notez que dans cet exemple, j'ai utilisé </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">new-django-project</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> comme dossier externe et </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">new_django_project</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pour le nom du projet). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pouvez maintenant vous demander s'il est possible d'utiliser un modèle distant depuis le référentiel sur GitHub, par exemple. </font><font style="vertical-align: inherit;">Oui bien sûr!</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comment créer un projet Django à partir d'un modèle distant</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'indicateur </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">--template</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pour </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">startproject</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> peut accepter une URL comme source distante. </font><font style="vertical-align: inherit;">Vous pouvez donc créer un projet Django à partir d'un modèle distant, par exemple:</font></font><br>
<br>
<pre><code class="django hljs"><span class="xml">django-admin startproject --template https://github.com/username/repo/archive/master.zip new_django_project .</span></code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bonus: des modèles pour tout</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En plus de standardiser les fichiers liés à Django, vous pouvez faire de même pour n'importe quel autre fichier du projet. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Imaginez que vous devez déployer sur Heroku où un </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Procfile</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est requis </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Pour passer </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Procfile</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> via le système de modèles afin que </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{{nom_projet}} soit</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> remplacé par le nom réel du projet, vous pouvez exécuter </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">startproject</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> avec l'indicateur </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">--name</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<pre><code class="django hljs"><span class="xml">django-admin startproject --template https://github.com/username/repo/archive/master.zip --name=Procfile new_django_project .</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Assurez-vous que </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Procfile</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> a un espace réservé pour </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nom_projet</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="django hljs"><span class="xml">release: python manage.py migrate
web: gunicorn -w 3 </span><span class="hljs-template-variable">{{ project_name }}</span><span class="xml">.wsgi --log-file -</span></code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sources</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour créer un modèle Django sophistiqué, jetez un œil à </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ponee</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , un modèle Django léger, prêt à l'emploi avec Heroku. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voici un matériel si petit mais intéressant. </font><font style="vertical-align: inherit;">Nous attendons vos commentaires et sommes </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">invités à un webinaire gratuit</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , dans le cadre duquel nous </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">apprendrons en détail comment tester des projets sur Flask, écrire et exécuter des tests pour des projets sur Flask, créer des données de test à l'aide de Faker et Factory Boy.</font></font><br>
</i></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr488078/index.html">Mon bot pour la Russian AI Cup 2019</a></li>
<li><a href="../fr488082/index.html">En bref: Async / Await Best Practices in .NET</a></li>
<li><a href="../fr488088/index.html">Comment Habr interagit avec les organes de l'État et les autres candidats. Rapport de transparence pour toutes les années</a></li>
<li><a href="../fr488092/index.html">Hackathons. Comment tirer le meilleur parti et survivre</a></li>
<li><a href="../fr488096/index.html">400g. Vue depuis le côté de la transmission. ZR / ZR +</a></li>
<li><a href="../fr488102/index.html">La relation entre C # et C #: REST, gRPC et tout le reste</a></li>
<li><a href="../fr488104/index.html">DBA: trouver des index inutiles</a></li>
<li><a href="../fr488108/index.html">SAP HANA Lab dans Azure</a></li>
<li><a href="../fr488112/index.html">Comprendre les itérateurs en Python</a></li>
<li><a href="../fr488116/index.html">Cinq leçons importantes sur l'équilibre du jeu</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>