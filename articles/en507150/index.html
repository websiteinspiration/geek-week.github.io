<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üÜí ü§ûüèΩ ü§ûüèº We draw an interference picture in JavaScript üë©üèΩ‚Äçü§ù‚Äçüë®üèº üëßüèª üèÇ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="15 years ago I tried to write a dissertation on the topic "Optoelectronic method for determining surface roughness." In the course of work, BRDF funct...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>We draw an interference picture in JavaScript</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/507150/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">15 years ago I tried to write a dissertation on the topic "Optoelectronic method for determining surface roughness." In the course of work, BRDF functions and other wonderful mathematical apparatus for optics were actively used. Code was written and a couple of chapters, but interest was gone - got stuck in work. I tried to start again a couple of times, but, unfortunately, I did not find a reason to leave my family and work for a year or more. As a side task, I decided for myself to implement the visualization of some interesting optical effect. The choice fell on interference (wiki: mutual increase or decrease in the resulting amplitude of two or more coherent waves when they are superimposed on each other), as the most simple mechanics to implement.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/q8/kd/hz/q8kdhz18lbynhlgkla2i9vhlbqa.jpeg" alt="image"><br>
<a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The first version was implemented on Delphi + OpenGL back in 2005, it assumed the manimation of the phase change of the wave and consisted of only 200 lines of code. </font><font style="vertical-align: inherit;">Surprisingly, her code is still available in the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Storeroom</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's go back to a later version that was already executed in JavaScript.</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The physics of rendering is simple:</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We place it on the canvas page and attach the onclick event, which remembers the coordinates of the last two mouse clicks - radiation sources: (x1, y1) and (x2, y2). </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We loop through each canvas (x, y) point and calculate the Euclidean distance to our radiation sources: S1 = SQRT ((x1-x) ^ 2 + (y1-y) ^ 2) and S2 = SQRT ((x2-x ) ^ 2 + (y2-y) ^ 2) </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We assume that our sources emit a sinusoidal signal, so we can easily calculate the amplitude of each point: A (x, y) = sin (S1 * W) + sin (S2 * W), where W is the wavelength. </font><font style="vertical-align: inherit;">You can add a phase to this, but this is optional.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Next, we normalize the obtained amplitude and get the pixel color: C (x, y) = A (x, y) * 68 + 127 </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">???</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Profit</font></font></li>
</ol><br>
<br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The </font><font style="vertical-align: inherit;">source code is available </font><font style="vertical-align: inherit;">in </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JSFiddle</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and it is possible to play </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">around by</font></a><font style="vertical-align: inherit;"> setting sources in different angles of the scene.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/hx/1l/xt/hx1lxthtkindxwm4fwylynboxtg.jpeg" alt="image"><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If you are interested, you can add "realism":</font></font></h4><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Signal attenuation.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Phase change animation.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Reflection of a signal from a plane (through affine transformations it is easiest).</font></font></li>
</ol></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en507124/index.html">PDB is not only valuable fur</a></li>
<li><a href="../en507132/index.html">Vladimir Kitov: ‚ÄúIt is impossible to understand how pioneering scientists foresaw universal computerization back in the 1950s!‚Äù</a></li>
<li><a href="../en507138/index.html">21st Century Geology as the Earth Data Science</a></li>
<li><a href="../en507146/index.html">Multi-colored windows: virtual constructor, CRTP and intricate templates</a></li>
<li><a href="../en507148/index.html">Send magic links using Node.js</a></li>
<li><a href="../es486176/index.html">Memo de correspondencia de correo electr√≥nico corporativo</a></li>
<li><a href="../es486178/index.html">FOSS News No. 1 - revisi√≥n de noticias gratuitas y de c√≥digo abierto del 27 de enero al 2 de febrero de 2020</a></li>
<li><a href="../es486180/index.html">Consejos y fuentes para crear aplicaciones sin servidor</a></li>
<li><a href="../es486184/index.html">C√≥mo usar la b√∫squeda de manera efectiva</a></li>
<li><a href="../es486186/index.html">Nube catastr√≥fica: c√≥mo funciona</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>