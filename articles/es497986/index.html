<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®‚Äç‚úàÔ∏è üì∑ üßëüèΩ‚Äçü§ù‚Äçüßëüèº Supervisi√≥n de toda la memoria utilizada por una p√°gina web: performance.measureMemory () üà∂ üçô ‚ùî</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="El autor del art√≠culo, cuya traducci√≥n publicamos hoy, habla sobre c√≥mo monitorear la memoria asignada a las p√°ginas web. La atenci√≥n cuidadosa a la m...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Supervisi√≥n de toda la memoria utilizada por una p√°gina web: performance.measureMemory ()</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/497986/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El autor del art√≠culo, cuya traducci√≥n publicamos hoy, habla sobre c√≥mo monitorear la memoria asignada a las p√°ginas web. </font><font style="vertical-align: inherit;">La atenci√≥n cuidadosa a la memoria de las p√°ginas que trabajan en producci√≥n ayuda a mantener la productividad de los proyectos web a un alto nivel.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/webt/uj/ux/6i/ujux6ittjoa4u5aoapnuhggx4ca.jpeg"></a><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los navegadores controlan autom√°ticamente la memoria asignada a las p√°ginas web. Cuando una p√°gina crea un objeto, el navegador, utilizando sus mecanismos internos, asigna memoria para almacenar este objeto. Como la memoria no es un recurso infinito, el navegador realiza peri√≥dicamente la recolecci√≥n de basura, durante la cual se detectan objetos innecesarios y se borra la memoria que ocupan. El proceso de detecci√≥n de tales objetos, sin embargo, no es ideal. </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">Ha</font></a><font style="vertical-align: inherit;"> sido </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">probado</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que la identificaci√≥n absolutamente precisa y completa de tales objetos es una tarea insoluble. Como resultado, los navegadores est√°n reemplazando la idea de encontrar "objetos innecesarios" con la idea de encontrar "objetos inalcanzables". Si una p√°gina web no puede acceder al objeto a trav√©s de las variables que tiene y los campos de otros objetos accesibles, esto significa que el navegador puede borrar con seguridad la memoria ocupada por dicho objeto. La diferencia entre "innecesario" e "inalcanzable" conduce a p√©rdidas de memoria, como se ilustra en el siguiente ejemplo:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> object = { <span class="hljs-attr">a</span>: <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(<span class="hljs-number">1000</span>), <span class="hljs-attr">b</span>: <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(<span class="hljs-number">2000</span>) };<font></font>
setInterval(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-built_in">console</span>.log(object.a), <span class="hljs-number">1000</span>);
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqu√≠ hay una gran matriz innecesaria </font></font><code>b</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, pero el navegador no libera la memoria que ocupa debido al hecho de que es accesible a trav√©s de la propiedad del objeto </font></font><code>object.b</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en la devoluci√≥n de llamada. Como resultado, la memoria ocupada por esta matriz tiene fugas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Las p√©rdidas de memoria son </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">frecuentes</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en el desarrollo web. Aparecen muy f√°cilmente en programas cuando, por ejemplo, los desarrolladores olvidan darse de baja del detector de eventos, cuando capturan accidentalmente objetos en un elemento </font></font><code>iframe</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, cuando olvidan cerrar al trabajador, cuando recolectan objetos en matrices. Si una p√°gina web tiene p√©rdidas de memoria, esto lleva al hecho de que con el tiempo aumenta el consumo de memoria de la p√°gina. Tal p√°gina parece lenta y lenta para los usuarios.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El primer paso para resolver este problema es tomar medidas. </font><font style="vertical-align: inherit;">La nueva API </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">performance.measureMemory ()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> permite a los desarrolladores medir el uso de memoria de las p√°ginas web en producci√≥n y, como resultado, detectar p√©rdidas de memoria que se escapan a trav√©s de pruebas locales.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬øEn qu√© se diferencia la nueva API performance.measureMemory () de la antigua performance.memory?</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si est√° familiarizado con la API no est√°ndar existente </font></font><code>performance.memory</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, es posible que le interese la cuesti√≥n de c√≥mo la nueva API difiere de la anterior. La principal diferencia es que la API anterior devuelve el tama√±o del mont√≥n de JavaScript, y la nueva eval√∫a el uso de memoria de toda la p√°gina web. Esta distinci√≥n es importante cuando Chrome organiza el uso compartido del mont√≥n entre varias p√°ginas web (o varias instancias de la misma p√°gina). En tales casos, los resultados devueltos por la antigua API pueden estar distorsionados. Dado que la antigua API se define en t√©rminos espec√≠ficos de la implementaci√≥n, como un mont√≥n, estandarizarla es un negocio desesperado.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Otra diferencia es que en Chrome, la nueva API toma medidas de memoria al recolectar basura. </font><font style="vertical-align: inherit;">Esto reduce el "ruido" en los resultados de la medici√≥n, pero puede tomar alg√∫n tiempo obtener los resultados. </font><font style="vertical-align: inherit;">Tenga en cuenta que los creadores de otros navegadores pueden decidir implementar la nueva API sin vincularse a la recolecci√≥n de basura.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Formas recomendadas de usar la nueva API</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El uso de la memoria por parte de las p√°ginas web depende de la ocurrencia de eventos, acciones del usuario, recolecci√≥n de basura. </font><font style="vertical-align: inherit;">Es por eso que la API est√° </font></font><code>performance.measureMemory()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dise√±ada para estudiar el nivel de uso de memoria en la producci√≥n. </font><font style="vertical-align: inherit;">Los resultados de llamar a esta API en un entorno de prueba son menos √∫tiles. </font><font style="vertical-align: inherit;">Aqu√≠ hay ejemplos de opciones para usarlo:</font></font><br>
<br>
<ul>
<li>          -     .</li>
<li>A/B-  ,            .</li>
<li>            .</li>
<li>    ,  .           .</li>
</ul><br>
<h2><font color="#3AC1EF"> </font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Actualmente, la API en cuesti√≥n solo es compatible con Chrome 83, de acuerdo con el esquema Origin Trial. </font><font style="vertical-align: inherit;">Los resultados devueltos por la API dependen en gran medida de la implementaci√≥n, ya que diferentes navegadores utilizan diferentes formas de representar objetos en la memoria y diferentes formas de evaluar el nivel de uso de la memoria. </font><font style="vertical-align: inherit;">Los navegadores pueden excluir algunas √°reas de la memoria de la contabilidad si la contabilidad completa de toda la memoria utilizada es una tarea excesivamente dif√≠cil o imposible. </font><font style="vertical-align: inherit;">Como resultado, podemos decir que los resultados producidos por esta API en diferentes navegadores no son comparables. </font><font style="vertical-align: inherit;">Tiene sentido comparar solo los resultados obtenidos en el mismo navegador.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Progreso laboral actual</font></font></font></h2><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Paso</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">condici√≥n</font></font></strong></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. Crear explicaciones de API</font></font><br>
</td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Terminado</font></font></a></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. Crear un borrador de especificaci√≥n</font></font><br>
</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Realizado</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. Recopilaci√≥n de comentarios y finalizaci√≥n del proyecto.</font></font><br>
</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Realizado</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4. Pruebas de prueba de origen</font></font><br>
</td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Realizado</font></font></a></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5. Lanzamiento</font></font><br>
</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No empezado</font></font></td>
</tr>
</tbody></table></div><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Usando performance.measureMemory ()</font></font></font></h2><br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ñç Habilitar el soporte de prueba de Origin</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La API </font></font><code>performance.measureMemory()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">est√° disponible en Chrome 83 de acuerdo con el esquema Origin Trial. </font><font style="vertical-align: inherit;">Se espera que esta fase finalice con el lanzamiento de Chrome 84. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El programa Origin Trial permite a los desarrolladores aprovechar las nuevas funciones de Chrome y compartir comentarios sobre la conveniencia, usabilidad y efectividad de estas funciones con la comunidad web. </font><font style="vertical-align: inherit;">Los detalles sobre este programa se pueden encontrar </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqu√≠</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Puede suscribirse al programa en </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">la p√°gina de</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> registro.</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ñçRegistro en el programa Origin Trial</font></font></font></h3><br>
<ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Solicite un</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> token para la oportunidad que le interesa.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Agregue el token a las p√°ginas del proyecto piloto. </font><font style="vertical-align: inherit;">Hay 2 formas de hacer esto:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Agregue una </font></font><code>&lt;meta&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">etiqueta </font></font><code>origin-trial</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">al t√≠tulo de cada p√°gina. </font><font style="vertical-align: inherit;">Por ejemplo, podr√≠a tener este aspecto: </font></font><code>&lt;meta http-equiv="origin-trial" content="TOKEN_GOES_HERE"&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si tiene acceso a la configuraci√≥n del servidor, puede agregar un token utilizando un encabezado HTTP </font></font><code>Origin-Trial</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Como resultado, la cabecera de respuesta deber√≠a aparecer algo como lo siguiente: </font></font><code>Origin-Trial: TOKEN_GOES_HERE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li>
</ul></li>
</ol><br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ñçHabilitar una nueva funci√≥n a trav√©s de las banderas de Chrome</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Con el fin de experimentar con </font></font><code>performance.measureMemory()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, prescindiendo de la ficha Origen de prueba, es necesario tener la bandera </font></font><code>#experimental-web-platform-features</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en </font></font><code>chrome://flags</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ñçVerificaci√≥n del uso de la API</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Una llamada de funci√≥n </font></font><code>performance.measureMemory()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">puede fallar, con un </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SecurityError arrojado</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Esto puede suceder si el entorno no cumple con los requisitos de seguridad para las filtraciones de informaci√≥n. </font><font style="vertical-align: inherit;">Durante la prueba de Origin Trial en Chrome, esta API requiere la inclusi√≥n del </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aislamiento</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> del </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">sitio</font></a><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Cuando la API est√© lista para su uso normal, depender√° de la propiedad </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">crossOriginIsolated</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Una p√°gina web puede funcionar en este modo configurando los encabezados </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">COOP y COEP</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqu√≠ hay un c√≥digo de muestra:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">if</span> (performance.measureMemory) {
&nbsp;&nbsp;<span class="hljs-keyword">let</span> result;
&nbsp;&nbsp;<span class="hljs-keyword">try</span> {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;result = <span class="hljs-keyword">await</span> performance.measureMemory();<font></font>
&nbsp;&nbsp;} <span class="hljs-keyword">catch</span> (error) {
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">if</span> (error <span class="hljs-keyword">instanceof</span> DOMException &amp;&amp;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;error.name === <span class="hljs-string">"SecurityError"</span>) {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-built_in">console</span>.log(<span class="hljs-string">"The context is not secure."</span>);<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;} <span class="hljs-keyword">else</span> {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">throw</span> error;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;<span class="hljs-built_in">console</span>.log(result);<font></font>
}<font></font>
</code></pre><br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ñç Pruebas locales</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Chrome toma una medida de memoria cuando recolecta basura. </font><font style="vertical-align: inherit;">Esto significa que acceder a la API no resuelve instant√°neamente la promesa. </font><font style="vertical-align: inherit;">Para obtener el resultado, debe esperar la pr√≥xima sesi√≥n de recolecci√≥n de basura. </font><font style="vertical-align: inherit;">La API inicia forzosamente la recolecci√≥n de basura despu√©s de un cierto tiempo de espera, que actualmente est√° configurado en 20 segundos. </font><font style="vertical-align: inherit;">Si ejecuta Chrome con un indicador de l√≠nea de comando </font></font><code>--enable-blink-features='ForceEagerMeasureMemory'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, el tiempo de espera se reducir√° a cero, lo que es √∫til para la depuraci√≥n local y las pruebas locales.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ejemplo</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se recomienda que utilice la nueva API definiendo un monitor de memoria global que mida el nivel de uso de memoria de toda la p√°gina y env√≠e los resultados al servidor, donde se pueden agregar y analizar. La forma m√°s f√°cil de trabajar con esta API es tomar mediciones peri√≥dicas. Por ejemplo, pueden correr cada </font></font><code>M</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">minuto. Sin embargo, esto introduce distorsiones en los datos, ya que pueden producirse picos en el uso de la memoria entre las mediciones. El siguiente ejemplo demuestra c√≥mo, utilizando </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">el proceso de Poisson</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , hacer mediciones sin errores sistem√°ticos. Este enfoque garantiza que las sesiones de medici√≥n pueden, con la misma probabilidad, ocurrir en cualquier momento ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqu√≠ hay una</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> demostraci√≥n de este enfoque,</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aqu√≠</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est√° el c√≥digo fuente). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Primero, declare una funci√≥n que planifique el pr√≥ximo inicio de una sesi√≥n para medir la cantidad de memoria consumida utilizando una funci√≥n </font></font><code>setTimeout()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">con un intervalo establecido aleatoriamente. </font><font style="vertical-align: inherit;">Se debe llamar a esta funci√≥n despu√©s de cargar la p√°gina en la ventana del navegador.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">scheduleMeasurement</span>(<span class="hljs-params"></span>) </span>{
&nbsp;&nbsp;<span class="hljs-keyword">if</span> (!performance.measureMemory) {
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-built_in">console</span>.log(<span class="hljs-string">"performance.measureMemory() is not available."</span>);
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span>;<font></font>
&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;<span class="hljs-keyword">const</span> interval = measurementInterval();
&nbsp;&nbsp;<span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Scheduling memory measurement in "</span> +
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-built_in">Math</span>.round(interval / <span class="hljs-number">1000</span>) + <span class="hljs-string">" seconds."</span>);<font></font>
&nbsp;&nbsp;setTimeout(performMeasurement, interval);<font></font>
}<font></font>
<font></font>
<span class="hljs-comment">//       .</span>
<span class="hljs-built_in">window</span>.onload = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{<font></font>
&nbsp;&nbsp;scheduleMeasurement();<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La funci√≥n </font></font><code>measurementInterval()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">encuentra un intervalo aleatorio, expresado en milisegundos, configurado de tal manera que se realice una medici√≥n aproximadamente cada cinco minutos. </font><font style="vertical-align: inherit;">Si est√° interesado en los conceptos matem√°ticos en los que se basa esta funci√≥n, lea sobre la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">distribuci√≥n exponencial</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">measurementInterval</span>(<span class="hljs-params"></span>) </span>{
&nbsp;&nbsp;<span class="hljs-keyword">const</span> MEAN_INTERVAL_IN_MS = <span class="hljs-number">5</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>;
&nbsp;&nbsp;<span class="hljs-keyword">return</span> -<span class="hljs-built_in">Math</span>.log(<span class="hljs-built_in">Math</span>.random()) * MEAN_INTERVAL_IN_MS;<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como resultado, la funci√≥n asincr√≥nica </font></font><code>performMeasurement()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">llama a nuestra API, registra el resultado y planifica la pr√≥xima medici√≥n.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">performMeasurement</span>(<span class="hljs-params"></span>) </span>{
&nbsp;&nbsp;<span class="hljs-comment">// 1.  performance.measureMemory().</span>
&nbsp;&nbsp;<span class="hljs-keyword">let</span> result;
&nbsp;&nbsp;<span class="hljs-keyword">try</span> {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;result = <span class="hljs-keyword">await</span> performance.measureMemory();<font></font>
&nbsp;&nbsp;} <span class="hljs-keyword">catch</span> (error) {
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">if</span> (error <span class="hljs-keyword">instanceof</span> DOMException &amp;&amp;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;error.name === <span class="hljs-string">"SecurityError"</span>) {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-built_in">console</span>.log(<span class="hljs-string">"The context is not secure."</span>);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span>;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">//    .</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">throw</span> error;<font></font>
&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;<span class="hljs-comment">// 2.  .</span>
&nbsp;&nbsp;<span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Memory usage:"</span>, result);
&nbsp;&nbsp;<span class="hljs-comment">// 3.   .</span><font></font>
&nbsp;&nbsp;scheduleMeasurement();<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los resultados de la medici√≥n pueden verse as√≠:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">// ,    :</span><font></font>
{<font></font>
&nbsp;&nbsp;<span class="hljs-attr">bytes</span>: <span class="hljs-number">60</span>_000_000,
&nbsp;&nbsp;<span class="hljs-attr">breakdown</span>: [<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;{<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">bytes</span>: <span class="hljs-number">40</span>_000_000,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">attribution</span>: [<span class="hljs-string">"https://foo.com"</span>],
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">userAgentSpecificTypes</span>: [<span class="hljs-string">"Window"</span>, <span class="hljs-string">"JS"</span>]<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;},<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;{<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">bytes</span>: <span class="hljs-number">20</span>_000_000,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">attribution</span>: [<span class="hljs-string">"https://foo.com/iframe"</span>],
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">userAgentSpecificTypes</span>: [<span class="hljs-string">"Window"</span>, <span class="hljs-string">"JS"</span>]<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;]<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En el campo se muestra una estimaci√≥n del nivel general de uso de memoria </font></font><code>bytes</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Al derivar esta estimaci√≥n, </font><font style="vertical-align: inherit;">se utilizan </font><font style="vertical-align: inherit;">los </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">separadores de los</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> d√≠gitos de los n√∫meros. Estos valores dependen mucho de la implementaci√≥n. Si se reciben para diferentes navegadores, entonces no puede compararlos. La forma en que se obtienen puede variar incluso en diferentes versiones del mismo navegador. Mientras dure el programa Origin Trial, los valores de retorno incluyen indicadores del uso de memoria JavaScript por la ventana principal, indicadores del uso de memoria de elementos </font></font><code>iframe</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">del mismo sitio e indicadores de ventanas relacionadas. Cuando la API est√© lista, este valor representar√° informaci√≥n sobre la memoria consumida por JavaScript, el DOM, todos los elementos </font></font><code>iframe</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">asociados con Windows y los trabajadores web. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lista</font></font><code>breakdown</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">da informaci√≥n m√°s detallada sobre la memoria utilizada. </font><font style="vertical-align: inherit;">Cada entrada describe un fragmento de memoria y asocia este fragmento con un conjunto de ventanas, elementos </font></font><code>iframe</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o trabajadores identificados por una URL. </font><font style="vertical-align: inherit;">El campo </font></font><code>userAgentSpecificTypes</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">enumera los tipos de memoria determinados por las caracter√≠sticas de implementaci√≥n. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es importante tener en cuenta estas listas de manera general y no intentar, bas√°ndose en las caracter√≠sticas de un navegador determinado, analizar todo en funci√≥n de ellas. </font><font style="vertical-align: inherit;">Por ejemplo, algunos navegadores pueden devolver una lista </font></font><code>breakdown</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vac√≠a o campos vac√≠os </font></font><code>attribution</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Otros navegadores pueden devolver </font></font><code>attribution</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">m√∫ltiples URL </font><font style="vertical-align: inherit;">en un elemento </font><font style="vertical-align: inherit;">, lo que indica que no pueden identificar a cu√°l de estas URL pertenece la memoria.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Retroalimentaci√≥n</font></font></font></h2><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El Web Performance Community Group</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y el equipo de desarrollo de Chrome estar√°n encantados de saber lo que piensas </font></font><code>performance.measureMemory()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y conocer tu experiencia con esta API.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comparta sus ideas sobre el dispositivo API con nosotros</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øHay algo en esta API que no funciona como se esperaba? </font><font style="vertical-align: inherit;">¬øTal vez le falta algo que necesita para implementar su idea? </font><font style="vertical-align: inherit;">Abra una nueva tarea en el </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rastreador de</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> proyectos o comente una tarea existente.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Informar un problema de implementaci√≥n</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øEncontr√≥ un error en su implementaci√≥n de Chrome? </font><font style="vertical-align: inherit;">¬øO tal vez result√≥ que la implementaci√≥n es diferente de la especificaci√≥n? </font><font style="vertical-align: inherit;">Registre el error aqu√≠: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">new.crbug.com</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Intente incluir tantos detalles como sea posible en su mensaje, incluya instrucciones simples sobre c√≥mo reproducir el error e indique que el problema est√° relacionado </font></font><code>Blink&gt;PerformanceAPIs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Glitch es una</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> muy buena manera de demostrar errores </font><font style="vertical-align: inherit;">.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apoyanos</font></font></font></h2><br><font style="vertical-align: inherit;"></font><code>performance.measureMemory()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬øEst√°s </font><font style="vertical-align: inherit;">
planeando usar </font><font style="vertical-align: inherit;">? </font><font style="vertical-align: inherit;">Si es as√≠, cu√©ntanoslo. </font><font style="vertical-align: inherit;">Estas historias ayudan al equipo de desarrollo de Chrome a priorizar. </font><font style="vertical-align: inherit;">Estas historias muestran a los creadores de otros navegadores la importancia de admitir nuevas funciones. </font><font style="vertical-align: inherit;">Si lo desea, env√≠e un tweet a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@ChromiumDev</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">cu√©ntenos</font></a><font style="vertical-align: inherit;"> d√≥nde y c√≥mo usa la nueva API. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬°Queridos lectores! </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬øLo has intentado </font></font><code>performance.measureMemory()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">?</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/webt/iq/fi/b4/iqfib45pgphfrxv--zfemt0qnmw.jpeg"></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es497964/index.html">Telemedicina Estetoscopio electr√≥nico de ingenier√≠a inversa</a></li>
<li><a href="../es497968/index.html">Recursos para desarrolladores web: API y elementos de la interfaz de usuario</a></li>
<li><a href="../es497980/index.html">¬øCu√°nta agua se ha filtrado? Resolvemos el problema con un paseo lunar en Haskell</a></li>
<li><a href="../es497982/index.html">Enfoque funcional y de proceso para la gesti√≥n. ¬øC√≥mo y qu√© gestionar?</a></li>
<li><a href="../es497984/index.html">Migraci√≥n de reCAPTCHA a hCaptcha en Cloudflare</a></li>
<li><a href="../es497988/index.html">Reaccionar el perfil de rendimiento de la aplicaci√≥n</a></li>
<li><a href="../es497990/index.html">PostgreSQL: Desarrollo de extensiones (funciones) en lenguaje C</a></li>
<li><a href="../es497994/index.html">La mec√°nica del lenguaje escapa al an√°lisis</a></li>
<li><a href="../es497996/index.html">No quieres fortalecer la inmunidad. O los extremos del cuerpo humano</a></li>
<li><a href="../es498000/index.html">Cosas que me gustar√≠a saber antes de desarrollar mi propio juego</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>