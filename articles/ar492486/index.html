<!doctype html>
<html class="no-js" lang="ar">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ•£ ğŸ´ó §ó ¢ó ³ó £ó ´ó ¿ ğŸ‘ˆğŸ¾ Nuxt + Django + GraphQL Ø¹Ù„Ù‰ Ø³Ø¨ÙŠÙ„ Ø§Ù„Ù…Ø«Ø§Ù„ ğŸ¥„ ğŸ“ˆ ğŸš´</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ù…Ù‚Ø¯Ù…Ø©
 

Nuxt Ù‡Ùˆ "Ø¥Ø·Ø§Ø± Ø¹Ù…Ù„ Ø¹Ù„Ù‰ Ø¥Ø·Ø§Ø± Vue" Ø£Ùˆ ØªÙƒÙˆÙŠÙ† Ø´Ø§Ø¦Ø¹ Ù„Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø¹Ù„Ù‰ Vue Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø£ÙØ¶Ù„ Ù…Ù…Ø§Ø±Ø³Ø§Øª ØªØ·ÙˆÙŠØ± Vue. Ù…Ù† Ø¨ÙŠÙ†Ù‡Ø§: ØªÙ†Ø¸ÙŠÙ… Ø£Ø¯Ù„Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø› ØªØ¶Ù…ÙŠÙ†...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Nuxt + Django + GraphQL Ø¹Ù„Ù‰ Ø³Ø¨ÙŠÙ„ Ø§Ù„Ù…Ø«Ø§Ù„</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/492486/"><p><img src="https://habrastorage.org/webt/cm/nl/wm/cmnlwmcwqu2drhdusjqe2nn6luq.jpeg"></p><br>
<h2 id="predislovie"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ù…Ù‚Ø¯Ù…Ø©</font></font></h2><br>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nuxt</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ù‡Ùˆ "Ø¥Ø·Ø§Ø± Ø¹Ù…Ù„ Ø¹Ù„Ù‰ Ø¥Ø·Ø§Ø± Vue" Ø£Ùˆ ØªÙƒÙˆÙŠÙ† Ø´Ø§Ø¦Ø¹ Ù„Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø¹Ù„Ù‰ Vue Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø£ÙØ¶Ù„ Ù…Ù…Ø§Ø±Ø³Ø§Øª ØªØ·ÙˆÙŠØ± Vue. </font><font style="vertical-align: inherit;">Ù…Ù† Ø¨ÙŠÙ†Ù‡Ø§: ØªÙ†Ø¸ÙŠÙ… Ø£Ø¯Ù„Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø› </font><font style="vertical-align: inherit;">ØªØ¶Ù…ÙŠÙ† ÙˆØªÙƒÙˆÙŠÙ† Ù…Ø³Ø¨Ù‚ Ù„Ø£Ø¯ÙˆØ§Øª Ø£ÙƒØ«Ø± Ø´ÙŠÙˆØ¹Ù‹Ø§ ÙÙŠ Ø´ÙƒÙ„ ÙˆØ­Ø¯Ø§Øª Nuxt Ø› </font><font style="vertical-align: inherit;">ØªØ¶Ù…ÙŠÙ† </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vuex</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ø¨Ø´ÙƒÙ„ Ø§ÙØªØ±Ø§Ø¶ÙŠ ÙÙŠ Ø£ÙŠ ØªÙƒÙˆÙŠÙ† Ø› </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SSR</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ø¬Ø§Ù‡Ø² ÙˆÙ…Ù‡ÙŠØ£ Ù…Ø³Ø¨Ù‚Ù‹Ø§ </font><font style="vertical-align: inherit;">Ù…Ø¹ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³Ø§Ø®Ù†</font></font></a></p><br>
<p><strong>Django</strong> â€”   -          â€” Python.      "-    ".     "  "       MVP  -.</p><br>
<p><strong>GraphQL</strong> â€”      Facebook.          ,    <strong>Apollo</strong>    <strong>graphene</strong>  .</p><br>
<h2 id="o-chem-i-dlya-kogo-eta-statya">      </h2><a name="habracut"></a><br>
<p>         dev-  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">SPA</a>   server side ,    Django  Nuxt,      GraphQL API. </p><br>
<p>      ,                 .</p><br>
<p>      ,        (,  ,    ),      .</p><br>
<p>  ,        ,    ,            ,              .</p><br>
<p> ,         ,          ,                  ,        .</p><br>
<p>    ,           .</p><br>
<h2 id="pered-nachalom"> </h2><br>
<p>,      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">node.js</a>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">python</a>.    : <strong>13.9</strong>  <strong>3.7</strong> . </p><br>
<p>     python     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">pipenv</a>.</p><br>
<p>       bash.    Windows,    <code>cd</code>, <code>mv</code>, <code>mkdir</code>  ,   -  python  node,        .</p><br>
<p>        Sqlite,     .</p><br>
<p>        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"></a> .    ,     .</p><br>
<p><strong>Python </strong></p><br>
<div class="scrollable-table"><table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">django</a></td>
<td>2.2</td>
</tr>
<tr>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">graphene-django</a></td>
<td>2.8.2</td>
</tr>
<tr>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">django-cors-headers</a></td>
<td>3.2</td>
</tr>
</tbody>
</table></div><br>
<p><strong>Javascript </strong></p><br>
<div class="scrollable-table"><table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">Nuxt</a></td>
<td>2.11</td>
</tr>
<tr>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">nuxtjs/apollo</a></td>
<td>4.0.1</td>
</tr>
<tr>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">nuxtjs/vuetify</a></td>
<td>0.5.5</td>
</tr>
<tr>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">cookie-universal-nuxt</a></td>
<td>2.1.2</td>
</tr>
<tr>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">graphql-tag</a></td>
<td>2.10</td>
</tr>
</tbody>
</table></div><br>
<h2 id="pristupim"></h2><br>
<h2 id="django">Django</h2><br>
<h3 id="sozdanie-proekta-i-okruzheniya">   </h3><br>
<p>      .      pipenv.  :</p><br>
<pre><code class="bash hljs">pip install pipenv</code></pre><br>
<p>          .  pipenv       .</p><br>
<p>         <code>pipenv</code>.         <code>~/Documents/projects/todo-list</code>.       .</p><br>
<pre><code class="bash hljs">mkdir ~/Documents/projects/todo-list
<span class="hljs-built_in">cd</span> ~/Documents/projects/todo-list</code></pre><br>
<p>      <code>django</code>  <code>graphene_django</code>:</p><br>
<pre><code class="bash hljs">pipenv install django==2.2.10 graphene_django</code></pre><br>
<p> <code>graphene_django</code>    GraphQL API    Django ORM.  ,    ,           .</p><br>
<p>     pipenv.     ,       .</p><br>
<pre><code class="bash hljs">pipenv shell  <span class="hljs-comment">#    pipenv</span></code></pre><br>
<p>  Django. </p><br>
<pre><code class="bash hljs">django-admin createapp backend</code></pre><br>
<h3 id="nastroyka"></h3><br>
<h4 id="perenos-managepy"><strong> manage.py</strong></h4><br>
<p>      todo-     ,           .  Django    <code>manage.py</code>,      <code>backend</code>   . </p><br>
<p> ,    :</p><br>
<pre><code class="bash hljs">mv backend/manage.py .</code></pre><br>
<p>          <code>manage.py</code>.</p><br>
<pre><code class="python hljs"><span class="hljs-comment"># manage.py</span>
<span class="hljs-keyword">import</span> os
<span class="hljs-keyword">import</span> sys<font></font>
<font></font>
<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    <span class="hljs-comment">#       </span>
    os.environ.setdefault(<span class="hljs-string">"DJANGO_SETTINGS_MODULE"</span>, <span class="hljs-string">"backend.backend.settings"</span>)<font></font>
    ...</code></pre><br>
<p>   <code>backend/backend/settings.py</code>     :</p><br>
<pre><code class="python hljs">ROOT_URLCONF = <span class="hljs-string">'backend.backend.urls'</span>
WSGI_APPLICATION = <span class="hljs-string">'backend.backend.wsgi.application'</span></code></pre><br>
<h4 id="dobavlenie-graphene_django"><strong> graphene_django</strong></h4><br>
<p>  <code>backend/backend/settings.py</code>   <code>INSTALLED_APPS</code>    <code>graphene_django</code>:</p><br>
<pre><code class="python hljs"><span class="hljs-comment"># backend/backend/settings.py</span><font></font>
<font></font>
INSTALLED_APPS = [<font></font>
  ...,<font></font>
  <span class="hljs-string">'graphene_django'</span>,<font></font>
]</code></pre><br>
<h4 id="proveryaem-rabotosposobnost"><strong> </strong></h4><br>
<pre><code class="python hljs">python manage.py runserver</code></pre><br>
<p>-     <code>8000</code>.   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">http://localhost:8000/</a>,      :</p><br>
<div class="spoiler"><b class="spoiler_title">Django hello</b><div class="spoiler_text"><p><img src="https://habrastorage.org/webt/hh/b-/ry/hhb-rytssx5jg9nspydgu6lwenc.png"></p></div></div><br>
<h4 id="nastroyka-graphene"><strong> graphene</strong></h4><br>
<p>   <code>http://localhost:8000/</code>      .   <code>backend/backend/urls.py</code></p><br>
<pre><code class="python hljs"><span class="hljs-comment"># backend/backend/urls.py</span>
<span class="hljs-keyword">from</span> django.contrib <span class="hljs-keyword">import</span> admin
<span class="hljs-keyword">from</span> django.urls <span class="hljs-keyword">import</span> path
<span class="hljs-keyword">from</span> graphene_django.views <span class="hljs-keyword">import</span> GraphQLView
<span class="hljs-keyword">from</span> django.conf <span class="hljs-keyword">import</span> settings<font></font>
<font></font>
urlpatterns = [<font></font>
    path(<span class="hljs-string">'admin/'</span>, admin.site.urls),
    <span class="hljs-comment"># graphiql -  IDE   graphql </span>
    path(<span class="hljs-string">'graphql/'</span>, GraphQLView.as_view(graphiql=settings.DEBUG))<font></font>
]</code></pre><br>
<p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"></a>, ,   <code>backend/backend/api.py</code></p><br>
<pre><code class="python hljs"><span class="hljs-comment"># backend/todo_list/api.py</span>
<span class="hljs-keyword">import</span> graphene<font></font>
schema = graphene.Schema()</code></pre><br>
<p>      <code>GRAPHENE</code>,        :</p><br>
<pre><code class="python hljs"><span class="hljs-comment"># /backend/backend/settings.py</span><font></font>
GRAPHENE = {<font></font>
    <span class="hljs-string">'SCHEMA'</span>: <span class="hljs-string">'backend.backend.api.schema'</span>,<font></font>
}</code></pre><br>
<p> .      <code>runserver</code>:</p><br>
<pre><code class="bash hljs">python manage.py runserver</code></pre><br>
<p>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">http://localhost:8000/graphql/</a>.        "IDE" <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">GrapiQL</a>:</p><br>
<div class="spoiler"><b class="spoiler_title">GraphiQL</b><div class="spoiler_text"><p><img src="https://habrastorage.org/webt/pt/jb/nv/ptjbnvouc67igph8iswnrys656g.png"></p></div></div><br>
<p>   ,    .   - ,    .      .</p><br>
<h3 id="prilozhenie-todo_list"> todo_list</h3><br>
<h4 id="sozdanie-prilozheniya"><strong> </strong></h4><br>
<p>  todo_list    .  ,        pipenv:</p><br>
<pre><code class="bash hljs"><span class="hljs-built_in">cd</span> backend<font></font>
django-admin startapp todo_list</code></pre><br>
<p> <code>django-admin</code>       ,       <code>backend/todo_list/apps.py</code>,     :</p><br>
<pre><code class="python hljs"><span class="hljs-keyword">from</span> django.apps <span class="hljs-keyword">import</span> AppConfig<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TodoListConfig</span>(<span class="hljs-params">AppConfig</span>):</span>
    name = <span class="hljs-string">'backend.todo_list'</span></code></pre><br>
<p>     <code>INSTALLED_APPS</code>,     <code>settings.py</code>:</p><br>
<pre><code class="python hljs"><span class="hljs-comment"># backend/backend/settings.py</span><font></font>
INSTALLED_APPS = [<font></font>
    ...,<font></font>
    <span class="hljs-string">'backend.todo_list'</span>,<font></font>
    ...<font></font>
]</code></pre><br>
<p>  <code>Todo</code>  <code>Category</code>   <code>backend/todo_list/models.py</code>:</p><br>
<div class="spoiler"><b class="spoiler_title">models.py</b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment"># backend/todo_list/models.py</span>
<span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> timedelta<font></font>
<font></font>
<span class="hljs-keyword">from</span> django.db <span class="hljs-keyword">import</span> models
<span class="hljs-keyword">from</span> django.utils <span class="hljs-keyword">import</span> timezone<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Category</span>(<span class="hljs-params">models.Model</span>):</span>
    name = models.CharField(max_length=<span class="hljs-number">100</span>, unique=<span class="hljs-literal">True</span>)<font></font>
<font></font>
    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Meta</span>:</span>
        verbose_name = <span class="hljs-string">''</span>
        verbose_name_plural = <span class="hljs-string">''</span><font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__str__</span>(<span class="hljs-params">self</span>):</span>
        <span class="hljs-keyword">return</span> self.name<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_due_date</span>():</span>
    <span class="hljs-string">"""    -    """</span>
    <span class="hljs-keyword">return</span> timezone.now() + timedelta(days=<span class="hljs-number">1</span>)<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Todo</span>(<span class="hljs-params">models.Model</span>):</span>
    title = models.CharField(max_length=<span class="hljs-number">250</span>)<font></font>
    text = models.TextField(blank=<span class="hljs-literal">True</span>)<font></font>
    created_date = models.DateField(auto_now_add=<span class="hljs-literal">True</span>)<font></font>
    due_date = models.DateField(default=get_due_date)<font></font>
    category = models.ForeignKey(Category, related_name=<span class="hljs-string">'todo_list'</span>, on_delete=models.PROTECT)<font></font>
    done = models.BooleanField(default=<span class="hljs-literal">False</span>)<font></font>
<font></font>
    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Meta</span>:</span>
        verbose_name = <span class="hljs-string">''</span>
        verbose_name_plural = <span class="hljs-string">''</span><font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__str__</span>(<span class="hljs-params">self</span>):</span>
        <span class="hljs-keyword">return</span> self.title</code></pre></div></div><br>
<p> ,        ,   : </p><br>
<p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"></a>,       :</p><br>
<pre><code class="bash hljs">python manage.py makemigrations</code></pre><br>
<p>   :<br>
<img src="https://habrastorage.org/webt/za/dk/tt/zadktt1beqf8wd6wt2t7ps3d1qy.png"></p><br>
<p>    <code>migrate</code>. ..     <code>migrate</code>,        Django:</p><br>
<pre><code class="bash hljs">python manage.py migrate</code></pre><br>
<div class="spoiler"><b class="spoiler_title"> </b><div class="spoiler_text"><p><img src="https://habrastorage.org/webt/ss/cr/yo/sscryoufym2z282jrfldthrscjw.png"></p></div></div><br>
<h4 id="sozdanie-graphql-api"><strong> GraphQL API</strong></h4><br>
<p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"></a>, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">   </a>    .      <code>todo_list</code>   <code>schema.py</code>,   :</p><br>
<div class="spoiler"><b class="spoiler_title">schema.py</b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment"># backend/todo_list/schema.py</span>
<span class="hljs-keyword">import</span> graphene
<span class="hljs-keyword">from</span> graphene_django <span class="hljs-keyword">import</span> DjangoObjectType<font></font>
<font></font>
<span class="hljs-keyword">from</span> backend.todo_list.models <span class="hljs-keyword">import</span> Todo, Category<font></font>
<font></font>
<span class="hljs-comment">#   graphene_django    ,</span>
<span class="hljs-comment">#          ,</span>
<span class="hljs-comment">#    GraphiQL.</span>
<span class="hljs-comment">#   ,    </span>
<span class="hljs-comment">#        .   </span>
<span class="hljs-comment">#     CRUD .</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CategoryNode</span>(<span class="hljs-params">DjangoObjectType</span>):</span>
    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Meta</span>:</span><font></font>
        model = Category<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TodoNode</span>(<span class="hljs-params">DjangoObjectType</span>):</span>
    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Meta</span>:</span><font></font>
        model = Todo<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Query</span>(<span class="hljs-params">graphene.ObjectType</span>):</span>
    <span class="hljs-string">"""       """</span><font></font>
    todo_list = graphene.List(TodoNode)<font></font>
    categories = graphene.List(CategoryNode)<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">resolve_todo_list</span>(<span class="hljs-params">self, info</span>):</span>
        <span class="hljs-keyword">return</span> Todo.objects.all().order_by(<span class="hljs-string">'-id'</span>)<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">resolve_categories</span>(<span class="hljs-params">self, info</span>):</span>
        <span class="hljs-keyword">return</span> Category.objects.all()<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Mutation</span>(<span class="hljs-params">graphene.ObjectType</span>):</span>
    <span class="hljs-string">"""      (  ),
          
    """</span><font></font>
    add_todo = graphene.Field(TodoNode,<font></font>
                              title=graphene.String(required=<span class="hljs-literal">True</span>),<font></font>
                              text=graphene.String(),<font></font>
                              due_date=graphene.Date(required=<span class="hljs-literal">True</span>),<font></font>
                              category=graphene.String(required=<span class="hljs-literal">True</span>))<font></font>
    remove_todo = graphene.Field(graphene.Boolean, todo_id=graphene.ID())<font></font>
    toggle_todo = graphene.Field(TodoNode, todo_id=graphene.ID())<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">resolve_add_todo</span>(<span class="hljs-params">self, info, **kwargs</span>):</span>
        category, _ = Category.objects.get_or_create(name=kwargs.pop(<span class="hljs-string">'category'</span>))
        <span class="hljs-keyword">return</span> Todo.objects.create(category=category, **kwargs)<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">resolve_remove_todo</span>(<span class="hljs-params">self, info, todo_id</span>):</span>
        <span class="hljs-keyword">try</span>:<font></font>
            Todo.objects.get(id=todo_id).delete()<font></font>
        <span class="hljs-keyword">except</span> Todo.DoesNotExist:
            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>
        <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">resolve_toggle_todo</span>(<span class="hljs-params">self, info, todo_id</span>):</span><font></font>
        todo = Todo.objects.get(id=todo_id)<font></font>
        todo.done = <span class="hljs-keyword">not</span> todo.done<font></font>
        todo.save()<font></font>
        <span class="hljs-keyword">return</span> todo</code></pre></div></div><br>
<p>     ,      .  , ,       <code>api.py</code>:</p><br>
<pre><code class="python hljs"><span class="hljs-comment"># backend/backend/api.py</span>
<span class="hljs-keyword">import</span> graphene
<span class="hljs-keyword">from</span> backend.todo_list.schema <span class="hljs-keyword">import</span> Query, Mutation<font></font>
schema = graphene.Schema(query=Query, mutation=Mutation)</code></pre><br>
<p>    ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="></a>   ,     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">Graphene</a> (.).</p><br>
<h4 id="proverka-api"><strong> API</strong></h4><br>
<p>ID        ID  .</p><br>
<p>    <code>runserver</code>:</p><br>
<pre><code class="bash hljs">python manage.py runserver</code></pre><br>
<p>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">http://localhost:8000/graphql/</a>.        <code>graphiql</code>.   , ,   . </p><br>
<p>     .</p><br>
<div class="spoiler"><b class="spoiler_title">addTodo</b><div class="spoiler_text"><p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ØªØ­Ù‚ÙŠÙ‚</font></font></strong></p><br>
<pre><code class="plaintext hljs">  mutation(<font></font>
    $title: String!<font></font>
    $text: String<font></font>
    $dueDate: Date!<font></font>
    $category: String!<font></font>
  ) {<font></font>
    addTodo(<font></font>
      title: $title<font></font>
      text: $text<font></font>
      dueDate: $dueDate<font></font>
      category: $category<font></font>
    ) {<font></font>
      todo {<font></font>
        id<font></font>
        title<font></font>
        text<font></font>
        done<font></font>
        createdDate<font></font>
        dueDate<font></font>
        category {<font></font>
          id<font></font>
          name<font></font>
        }<font></font>
      }<font></font>
    }<font></font>
  }</code></pre><br>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª</font></font></strong></p><br>
<pre><code class="plaintext hljs">{<font></font>
  "title": "First Todo",<font></font>
  "text": "Just do it!",<font></font>
  "dueDate": "2020-10-17",<font></font>
  "category": ""<font></font>
}</code></pre><br>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ù†ØªÙŠØ¬Ø©</font></font></strong><br>
<img src="https://habrastorage.org/webt/yg/wi/lo/ygwilohcsxhxvwn0x65lk661nt0.png"></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ù†ØªÙŠØ¬Ø© Ù„Ù‡Ø°Ù‡ Ø§Ù„Ø·ÙØ±Ø© ØŒ Ø£Ù†Ø´Ø£Ù†Ø§ Ø¥Ø¯Ø®Ø§Ù„ÙŠÙ†:</font></font></p><br>
<ul>
<li><code>Todo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ù„Ø§Ù† </font><font style="vertical-align: inherit;">Ø§Ù„Ø·ÙØ±Ø© Ù†ÙØ³Ù‡Ø§ Ù„Ù‡Ø°Ø§ Ø§Ù„ØºØ±Ø¶ Ù…ÙƒØªÙˆØ¨Ø© Ø›</font></font></li>
<li><code>Category</code>, ..        "",   <code>get_or_create</code>    .</li>
</ul></div></div><br>
<div class="spoiler"><b class="spoiler_title">todoList  categories</b><div class="spoiler_text"><p><strong></strong></p><br>
<pre><code class="plaintext hljs">{<font></font>
  todoList {<font></font>
    id<font></font>
    title<font></font>
    text<font></font>
    createdDate<font></font>
    dueDate<font></font>
category {<font></font>
      id<font></font>
      name<font></font>
    }<font></font>
  }<font></font>
  categories {<font></font>
    id<font></font>
    name<font></font>
  }<font></font>
}</code></pre><br>
<p><strong></strong>:<br>
<img src="https://habrastorage.org/webt/vu/a6/ho/vua6horn_mwn6fvz2souvalge7e.png"></p></div></div><br>
<div class="spoiler"><b class="spoiler_title">toggleTodo</b><div class="spoiler_text"><p><strong></strong></p><br>
<pre><code class="plaintext hljs">mutation ($todoId: ID) {<font></font>
  toggleTodo(todoId: $todoId) {<font></font>
    id<font></font>
    title<font></font>
    text<font></font>
    createdDate<font></font>
    dueDate<font></font>
    category {<font></font>
      id<font></font>
      name<font></font>
    }<font></font>
    done<font></font>
  }<font></font>
}</code></pre><br>
<p><strong></strong></p><br>
<pre><code class="plaintext hljs">{<font></font>
  "todoId": "1"<font></font>
}</code></pre><br>
<p><strong></strong>:<br>
<img src="https://habrastorage.org/webt/oa/ng/cw/oangcw2rkfy2clb-sgjfgbrghzw.png"></p></div></div><br>
<div class="spoiler"><b class="spoiler_title">removeTodo</b><div class="spoiler_text"><p><strong></strong></p><br>
<pre><code class="plaintext hljs">mutation ($todoId: ID) {<font></font>
  removeTodo(todoId: $todoId)<font></font>
}</code></pre><br>
<p><strong></strong>     .</p><br>
<p><strong></strong><br>
<img src="https://habrastorage.org/webt/xo/vn/26/xovn268dblwy2d4gp97ahgnve6s.png"></p></div></div><br>
<p>       GraphQL,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="></a>   .</p><br>
<h2 id="nuxt">Nuxt</h2><br>
<h3 id="sozdanie-nuxt-prilozheniya"> Nuxt </h3><br>
<p>          <code>Nuxt</code>:</p><br>
<pre><code class="bash hljs">npx create-nuxt-app frontend</code></pre><br>
<p>      ,             .  ,  ,         "Custom UI Framework: vuetify", ..     ,  "Rendering mode: Universal", ..       SSR.</p><br>
<p>  :<br>
<img src="https://habrastorage.org/webt/sv/cm/av/svcmav9eve7fwvxkvks75i7b3-y.png"></p><br>
<p>      .         .   :</p><br>
<pre><code class="bash hljs"><span class="hljs-built_in">cd</span> frontend<font></font>
npm run dev</code></pre><br>
<p>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">http://localhost:3000</a>.       Nuxt + Vuetify:</p><br>
<div class="spoiler"><b class="spoiler_title">Nuxt + Vuetify</b><div class="spoiler_text"><p><img src="https://habrastorage.org/webt/oi/me/o_/oimeo_qzmt-juuzhixs20put1cy.png"></p></div></div><br>
<h3 id="perenos-konfiguracionnyh-faylov">  </h3><br>
<p>   ,          ,            .       :</p><br>
<pre><code class="plaintext hljs">cd frontend<font></font>
mv node_modules ..<font></font>
mv nuxt.config.js ..<font></font>
mv .gitignore ..<font></font>
mv package-lock.json ..<font></font>
mv package.json ..<font></font>
mv .prettierrc ..<font></font>
mv .eslintrc.js ..<font></font>
mv .editorconfig ..<font></font>
rm -rf .git</code></pre><br>
<p>   <code>nuxt.config.js</code>    :</p><br>
<pre><code class="javascript hljs"><span class="hljs-comment">// nuxt.config.js</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {<font></font>
  ...,<font></font>
  <span class="hljs-attr">rootDir</span>: <span class="hljs-string">'frontend'</span>,<font></font>
  ...<font></font>
}</code></pre><br>
<p>        ,   dev-    :</p><br>
<pre><code class="bash hljs">npm run dev</code></pre><br>
<h3 id="verstka-funkcionalnogo-maketa">  </h3><br>
<p>    <code>v-</code>   UI-toolkit'a Vuetify.       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"></a>.</p><br>
<p>    ,      ,     <code>v-component-name</code>.   ,      vuetify 1.5.</p><br>
<p>  <code>frontend/layouts/default.vue</code>  :</p><br>
<pre><code class="html hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">v-app</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">v-content</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">v-container</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">nuxt</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">v-container</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">v-content</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">v-app</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></code></pre><br>
<p>   <code>Todo</code>   <code>frontend/components/NewTodoForm.vue</code>:</p><br>
<div class="spoiler"><b class="spoiler_title">NewTodoForm.vue</b><div class="spoiler_text"><pre><code class="html hljs xml"><span class="hljs-comment">&lt;!-- frontend/components/NewTodoForm.vue --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">v-form</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"form"</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"valid"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">v-card</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">v-card-text</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"pt-0 mt-0"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">v-layout</span> <span class="hljs-attr">row</span> <span class="hljs-attr">wrap</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">v-flex</span> <span class="hljs-attr">xs8</span>&gt;</span>
            <span class="hljs-comment">&lt;!--     --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">v-text-field</span>
              <span class="hljs-attr">v-model</span>=<span class="hljs-string">"newTodo.title"</span>
              <span class="hljs-attr">:rules</span>=<span class="hljs-string">"[nonEmptyField]"</span>
              <span class="hljs-attr">label</span>=<span class="hljs-string">""</span>
              <span class="hljs-attr">prepend-icon</span>=<span class="hljs-string">"check_circle_outline"</span>
            /&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">v-flex</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">v-flex</span> <span class="hljs-attr">xs4</span>&gt;</span>
            <span class="hljs-comment">&lt;!--      --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">v-menu</span>
              <span class="hljs-attr">ref</span>=<span class="hljs-string">"menu"</span>
              <span class="hljs-attr">v-model</span>=<span class="hljs-string">"menu"</span>
              <span class="hljs-attr">:close-on-content-click</span>=<span class="hljs-string">"false"</span>
              <span class="hljs-attr">:nudge-right</span>=<span class="hljs-string">"40"</span>
              <span class="hljs-attr">:return-value.sync</span>=<span class="hljs-string">"newTodo.dueDate"</span>
              <span class="hljs-attr">lazy</span>
              <span class="hljs-attr">transition</span>=<span class="hljs-string">"scale-transition"</span>
              <span class="hljs-attr">offset-y</span>
              <span class="hljs-attr">full-width</span>
              <span class="hljs-attr">min-width</span>=<span class="hljs-string">"290px"</span>
            &gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">v-slot:activator</span>=<span class="hljs-string">"{ on }"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">v-text-field</span>
                  <span class="hljs-attr">v-model</span>=<span class="hljs-string">"newTodo.dueDate"</span>
                  <span class="hljs-attr">:rules</span>=<span class="hljs-string">"[nonEmptyField]"</span>
                  <span class="hljs-attr">v-on</span>=<span class="hljs-string">"on"</span>
                  <span class="hljs-attr">label</span>=<span class="hljs-string">" "</span>
                  <span class="hljs-attr">prepend-icon</span>=<span class="hljs-string">"event"</span>
                  <span class="hljs-attr">readonly</span>
                /&gt;</span>
              <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">v-date-picker</span>
                <span class="hljs-attr">v-model</span>=<span class="hljs-string">"newTodo.dueDate"</span>
                <span class="hljs-attr">no-title</span>
                <span class="hljs-attr">scrollable</span>
                <span class="hljs-attr">locale</span>=<span class="hljs-string">"ru-ru"</span>
                <span class="hljs-attr">first-day-of-week</span>=<span class="hljs-string">"1"</span>
              &gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">v-spacer</span> /&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">v-btn</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"menu = false"</span> <span class="hljs-attr">flat</span> <span class="hljs-attr">color</span>=<span class="hljs-string">"primary"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">v-btn</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">v-btn</span>
                  @<span class="hljs-attr">click</span>=<span class="hljs-string">"$refs.menu.save(newTodo.dueDate)"</span>
                  <span class="hljs-attr">flat</span>
                  <span class="hljs-attr">color</span>=<span class="hljs-string">"primary"</span>
                  &gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">v-btn</span>
                &gt;</span>
              <span class="hljs-tag">&lt;/<span class="hljs-name">v-date-picker</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">v-menu</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">v-flex</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">v-flex</span> <span class="hljs-attr">xs12</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">v-textarea</span>
              <span class="hljs-attr">v-model</span>=<span class="hljs-string">"newTodo.text"</span>
              <span class="hljs-attr">:rules</span>=<span class="hljs-string">"[nonEmptyField]"</span>
              <span class="hljs-attr">label</span>=<span class="hljs-string">""</span>
              <span class="hljs-attr">prepend-icon</span>=<span class="hljs-string">"description"</span>
              <span class="hljs-attr">hide-details</span>
              <span class="hljs-attr">rows</span>=<span class="hljs-string">"1"</span>
              <span class="hljs-attr">class</span>=<span class="hljs-string">"py-0 my-0"</span>
            /&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">v-flex</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">v-layout</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">v-card-text</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">v-card-actions</span>&gt;</span>
        <span class="hljs-comment">&lt;!--  .     --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">v-combobox</span>
          <span class="hljs-attr">v-model</span>=<span class="hljs-string">"newTodo.category"</span>
          <span class="hljs-attr">:rules</span>=<span class="hljs-string">"[nonEmptyField]"</span>
          <span class="hljs-attr">:items</span>=<span class="hljs-string">"categories"</span>
          <span class="hljs-attr">hide-details</span>
          <span class="hljs-attr">label</span>=<span class="hljs-string">""</span>
          <span class="hljs-attr">class</span>=<span class="hljs-string">"my-0 mx-2 mb-2 pt-0"</span>
          <span class="hljs-attr">prepend-icon</span>=<span class="hljs-string">"category"</span>
        /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">v-spacer</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">v-btn</span> <span class="hljs-attr">:disabled</span>=<span class="hljs-string">"!valid"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"add"</span> <span class="hljs-attr">color</span>=<span class="hljs-string">"blue lighten-1"</span> <span class="hljs-attr">flat</span>
          &gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">v-btn</span>
        &gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">v-card-actions</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">v-card</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">v-form</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><font></font>
<font></font>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">name</span>: <span class="hljs-string">'NewTodoForm'</span>,
  data() {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">newTodo</span>: <span class="hljs-literal">null</span>,
      <span class="hljs-attr">categories</span>: [<span class="hljs-string">''</span>, <span class="hljs-string">''</span>, <span class="hljs-string">''</span>, <span class="hljs-string">''</span>],
      <span class="hljs-attr">valid</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">menu</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">nonEmptyField</span>: <span class="hljs-function"><span class="hljs-params">text</span> =&gt;</span>
        text ? !!text.length : <span class="hljs-string">'    '</span>
    }
  },
  created() {
    <span class="hljs-keyword">this</span>.clear()
  },
  <span class="hljs-attr">methods</span>: {
    add() {
      <span class="hljs-keyword">this</span>.$emit(<span class="hljs-string">'add'</span>, <span class="hljs-keyword">this</span>.newTodo)
      <span class="hljs-keyword">this</span>.clear()
      <span class="hljs-keyword">this</span>.$refs.form.reset()
    },
    clear() {
      <span class="hljs-keyword">this</span>.newTodo = {
        <span class="hljs-attr">title</span>: <span class="hljs-string">''</span>,
        <span class="hljs-attr">text</span>: <span class="hljs-string">''</span>,
        <span class="hljs-attr">dueDate</span>: <span class="hljs-string">''</span>,
        <span class="hljs-attr">category</span>: <span class="hljs-string">''</span>
      }
    }
  }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></code></pre></div></div><br>
<p>   <code>Todo</code>,  :</p><br>
<div class="spoiler"><b class="spoiler_title">TodoItem.vue</b><div class="spoiler_text"><pre><code class="html hljs xml"><span class="hljs-comment">&lt;!-- frontend/components/TodoItem.vue --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">v-card</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">v-card-title</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"pb-1"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"overflow-wrap: break-word;"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">b</span>&gt;</span>{{ todo.title }}<span class="hljs-tag">&lt;/<span class="hljs-name">b</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">v-spacer</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">v-btn</span>
        @<span class="hljs-attr">click</span>=<span class="hljs-string">"$emit('delete', todo.id)"</span>
        <span class="hljs-attr">flat</span>
        <span class="hljs-attr">small</span>
        <span class="hljs-attr">icon</span>
        <span class="hljs-attr">style</span>=<span class="hljs-string">"position: absolute; right: 0; top: 0"</span>
      &gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">v-icon</span> <span class="hljs-attr">:disabled</span>=<span class="hljs-string">"$nuxt.isServer"</span> <span class="hljs-attr">small</span>&gt;</span>close<span class="hljs-tag">&lt;/<span class="hljs-name">v-icon</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">v-btn</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">v-card-title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">v-card-text</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"py-1"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">v-layout</span> <span class="hljs-attr">row</span> <span class="hljs-attr">justyfy-center</span> <span class="hljs-attr">align-center</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">v-flex</span> <span class="hljs-attr">xs11</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"overflow-wrap: break-word;"</span>&gt;</span><font></font>
          {{ todo.text }}<font></font>
        <span class="hljs-tag">&lt;/<span class="hljs-name">v-flex</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">v-flex</span> <span class="hljs-attr">xs1</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"text-align: right;"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">v-checkbox</span>
              <span class="hljs-attr">v-model</span>=<span class="hljs-string">"todo.done"</span>
              <span class="hljs-attr">hide-details</span>
              <span class="hljs-attr">class</span>=<span class="hljs-string">"pa-0 ma-0"</span>
              <span class="hljs-attr">style</span>=<span class="hljs-string">"display: inline-block;"</span>
              <span class="hljs-attr">color</span>=<span class="hljs-string">"green lighten-1"</span>
            /&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">v-flex</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">v-layout</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">v-card-text</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">v-card-actions</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"grey--text"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">v-icon</span> <span class="hljs-attr">small</span>&gt;</span>event<span class="hljs-tag">&lt;/<span class="hljs-name">v-icon</span>&gt;</span> {{ todo.dueDate }} | 
        <span class="hljs-tag">&lt;<span class="hljs-name">v-icon</span> <span class="hljs-attr">small</span>&gt;</span>calendar_today<span class="hljs-tag">&lt;/<span class="hljs-name">v-icon</span>&gt;</span> {{ todo.createdDate }}
      <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">v-spacer</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"grey--text"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">v-icon</span> <span class="hljs-attr">small</span>&gt;</span>category<span class="hljs-tag">&lt;/<span class="hljs-name">v-icon</span>&gt;</span>: {{ todo.category }}
      <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">v-card-actions</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">v-card</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><font></font>
<font></font>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">name</span>: <span class="hljs-string">'TodoItem'</span>,
  <span class="hljs-attr">props</span>: {
    <span class="hljs-attr">todo</span>: {
      <span class="hljs-attr">type</span>: <span class="hljs-built_in">Object</span>,
      <span class="hljs-attr">default</span>: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> ({})
    }
  }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></code></pre></div></div><br>
<p>      <code>index.vue</code>,      :</p><br>
<div class="spoiler"><b class="spoiler_title">index.vue</b><div class="spoiler_text"><pre><code class="html hljs xml"><span class="hljs-comment">&lt;!-- frontend/pages/index.vue --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">v-layout</span> <span class="hljs-attr">row</span> <span class="hljs-attr">wrap</span> <span class="hljs-attr">justify-center</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">v-flex</span> <span class="hljs-attr">xs8</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"pb-1"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">new-todo-form</span> @<span class="hljs-attr">add</span>=<span class="hljs-string">"addTodo"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">v-flex</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">v-flex</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">"todo of todoList"</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">"todo.id"</span> <span class="hljs-attr">xs8</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"my-1"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">todo-item</span> <span class="hljs-attr">:todo</span>=<span class="hljs-string">"todo"</span> @<span class="hljs-attr">delete</span>=<span class="hljs-string">"deleteTodo"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">v-flex</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">v-layout</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><font></font>
<font></font>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> NewTodoForm <span class="hljs-keyword">from</span> <span class="hljs-string">'../components/NewTodoForm'</span>
<span class="hljs-keyword">import</span> TodoItem <span class="hljs-keyword">from</span> <span class="hljs-string">'../components/TodoItem'</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">components</span>: { TodoItem, NewTodoForm },
  data() {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">todoList</span>: [
        {
          <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>,
          <span class="hljs-attr">title</span>: <span class="hljs-string">'TODO 1'</span>,
          <span class="hljs-attr">text</span>:
            <span class="hljs-string">'Lorem ipsum dolor sit amet, consectetur adipiscing elit'</span>,
          <span class="hljs-attr">dueDate</span>: <span class="hljs-string">'2020-10-16'</span>,
          <span class="hljs-attr">createdDate</span>: <span class="hljs-string">'2020-03-09'</span>,
          <span class="hljs-attr">done</span>: <span class="hljs-literal">false</span>,
          <span class="hljs-attr">category</span>: <span class="hljs-string">''</span>
        },
        {
          <span class="hljs-attr">id</span>: <span class="hljs-number">2</span>,
          <span class="hljs-attr">title</span>: <span class="hljs-string">'TODO 2'</span>,
          <span class="hljs-attr">text</span>:
            <span class="hljs-string">'Lorem ipsum dolor sit amet, consectetur adipiscing elit'</span>,
          <span class="hljs-attr">dueDate</span>: <span class="hljs-string">'2020-10-16'</span>,
          <span class="hljs-attr">createdDate</span>: <span class="hljs-string">'2020-03-09'</span>,
          <span class="hljs-attr">done</span>: <span class="hljs-literal">false</span>,
          <span class="hljs-attr">category</span>: <span class="hljs-string">''</span>
        },
        {
          <span class="hljs-attr">id</span>: <span class="hljs-number">3</span>,
          <span class="hljs-attr">title</span>: <span class="hljs-string">'TODO 3'</span>,
          <span class="hljs-attr">text</span>:
            <span class="hljs-string">'Lorem ipsum dolor sit amet, consectetur adipiscing elit'</span>,
          <span class="hljs-attr">dueDate</span>: <span class="hljs-string">'2020-10-16'</span>,
          <span class="hljs-attr">createdDate</span>: <span class="hljs-string">'2020-03-09'</span>,
          <span class="hljs-attr">done</span>: <span class="hljs-literal">false</span>,
          <span class="hljs-attr">category</span>: <span class="hljs-string">''</span>
        },
        {
          <span class="hljs-attr">id</span>: <span class="hljs-number">4</span>,
          <span class="hljs-attr">title</span>: <span class="hljs-string">'TODO 4'</span>,
          <span class="hljs-attr">text</span>:
            <span class="hljs-string">'Lorem ipsum dolor sit amet, consectetur adipiscing elit'</span>,
          <span class="hljs-attr">dueDate</span>: <span class="hljs-string">'2020-10-16'</span>,
          <span class="hljs-attr">createdDate</span>: <span class="hljs-string">'2020-03-09'</span>,
          <span class="hljs-attr">done</span>: <span class="hljs-literal">false</span>,
          <span class="hljs-attr">category</span>: <span class="hljs-string">''</span>
        },
        {
          <span class="hljs-attr">id</span>: <span class="hljs-number">5</span>,
          <span class="hljs-attr">title</span>: <span class="hljs-string">'TODO 5'</span>,
          <span class="hljs-attr">text</span>:
            <span class="hljs-string">'Lorem ipsum dolor sit amet, consectetur adipiscing elit'</span>,
          <span class="hljs-attr">dueDate</span>: <span class="hljs-string">'2020-10-16'</span>,
          <span class="hljs-attr">createdDate</span>: <span class="hljs-string">'2020-03-09'</span>,
          <span class="hljs-attr">done</span>: <span class="hljs-literal">false</span>,
          <span class="hljs-attr">category</span>: <span class="hljs-string">''</span>
        },
        {
          <span class="hljs-attr">id</span>: <span class="hljs-number">6</span>,
          <span class="hljs-attr">title</span>: <span class="hljs-string">'TODO 6'</span>,
          <span class="hljs-attr">text</span>:
            <span class="hljs-string">'Lorem ipsum dolor sit amet, consectetur adipiscing elit'</span>,
          <span class="hljs-attr">dueDate</span>: <span class="hljs-string">'2020-10-16'</span>,
          <span class="hljs-attr">createdDate</span>: <span class="hljs-string">'2020-03-09'</span>,
          <span class="hljs-attr">done</span>: <span class="hljs-literal">false</span>,
          <span class="hljs-attr">category</span>: <span class="hljs-string">''</span>
        }
      ]
    }
  },
  <span class="hljs-attr">methods</span>: {
    addTodo(newTodo) {
      <span class="hljs-keyword">const</span> id = <span class="hljs-keyword">this</span>.todoList.length
        ? <span class="hljs-built_in">Math</span>.max.apply(
            <span class="hljs-literal">null</span>,
            <span class="hljs-keyword">this</span>.todoList.map(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.id)
          ) + <span class="hljs-number">1</span>
        : <span class="hljs-number">1</span>
      <span class="hljs-keyword">this</span>.todoList.unshift({
        id,
        <span class="hljs-attr">createdDate</span>: <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().toISOString().substr(<span class="hljs-number">0</span>, <span class="hljs-number">10</span>),
        <span class="hljs-attr">done</span>: <span class="hljs-literal">false</span>,
        ...newTodo
      })
    },
    deleteTodo(todoId) {
      <span class="hljs-keyword">this</span>.todoList = <span class="hljs-keyword">this</span>.todoList.filter(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.id !== todoId)
    }
  }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></code></pre></div></div><br>
<p>       .  <code>dev</code>     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">http://localhost:3000/</a>,      :</p><br>
<div class="spoiler"><b class="spoiler_title"> </b><div class="spoiler_text"><p><img src="https://habrastorage.org/webt/gs/g0/pl/gsg0plu-vg6tllgm1gvgfcot9oi.png"></p></div></div><br>
<h2 id="obedinenie-frontenda-i-bekenda">   </h2><br>
<h3 id="nastroyka-csrf-zaschity-django--apollo"> CSRF- Django + Apollo</h3><br>
<p> Django -  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">CSRF</a> .</p><br>
<p>     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://djbook.ru/rel1.7/topics/" rel="nofollow"> </a> (middleware) â€” <code>CsrfViewMiddleware</code>.        <code>settings.py</code>   <code>MIDDLEWARE</code>.</p><br>
<p>    :   POST-  Django     CSRF-.    ,      .</p><br>
<p>CSRF-   django      GET-,          .</p><br>
<p>     ,     ,   Apollo   ,   -   POST. Apollo      ,   <code>Query</code>    GET,   <code>Mutation</code> â€” POST,    , graphene        . </p><br>
<p>   :     <code>CsrfViewMiddleware</code>  ,     GraphQL ,         .</p><br>
<p>     CSRF, ,      <code>api.py</code></p><br>
<div class="spoiler"><b class="spoiler_title">api.py</b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment"># backend/backend/api.py</span>
<span class="hljs-keyword">import</span> json
<span class="hljs-keyword">import</span> graphene
<span class="hljs-keyword">from</span> django.middleware.csrf <span class="hljs-keyword">import</span> CsrfViewMiddleware<font></font>
<font></font>
<span class="hljs-keyword">from</span> backend.todo_list.schema <span class="hljs-keyword">import</span> Query, Mutation<font></font>
<font></font>
schema = graphene.Schema(query=Query, mutation=Mutation)<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CustomCsrfMiddleware</span>(<span class="hljs-params">CsrfViewMiddleware</span>):</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">process_view</span>(<span class="hljs-params">self, request, callback, callback_args, callback_kwargs</span>):</span>
        <span class="hljs-keyword">if</span> getattr(request, <span class="hljs-string">'csrf_processing_done'</span>, <span class="hljs-literal">False</span>):
            <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>
        <span class="hljs-keyword">if</span> getattr(callback, <span class="hljs-string">'csrf_exempt'</span>, <span class="hljs-literal">False</span>):
            <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>
        <span class="hljs-keyword">try</span>:<font></font>
            body = request.body.decode(<span class="hljs-string">'utf-8'</span>)<font></font>
            body = json.loads(body)<font></font>
        <span class="hljs-comment">#        CsrfViewMiddleware</span>
        <span class="hljs-keyword">except</span> (TypeError, ValueError, UnicodeDecodeError):
            <span class="hljs-keyword">return</span> super(CustomCsrfMiddleware, self).process_view(request, callback, callback_args, callback_kwargs)
        <span class="hljs-comment">#   list, ..    "" </span>
        <span class="hljs-comment"># https://blog.apollographql.com/batching-client-graphql-queries-a685f5bcd41b</span>
        <span class="hljs-keyword">if</span> isinstance(body, list):
            <span class="hljs-keyword">for</span> query <span class="hljs-keyword">in</span> body:
                <span class="hljs-comment">#       ,   </span>
                <span class="hljs-comment">#   CsrfViewMiddleware</span>
                <span class="hljs-keyword">if</span> <span class="hljs-string">'mutation'</span> <span class="hljs-keyword">in</span> query:
                    <span class="hljs-keyword">break</span>
            <span class="hljs-keyword">else</span>:
                <span class="hljs-keyword">return</span> self._accept(request)
        <span class="hljs-keyword">else</span>:
            <span class="hljs-comment">#   query    csrf</span>
            <span class="hljs-keyword">if</span> <span class="hljs-string">'query'</span> <span class="hljs-keyword">in</span> body <span class="hljs-keyword">and</span> <span class="hljs-string">'mutation'</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> body:
                <span class="hljs-keyword">return</span> self._accept(request)
        <span class="hljs-keyword">return</span> super(CustomCsrfMiddleware, self).process_view(request, callback, callback_args, callback_kwargs)</code></pre><br>
<p>,   <code>settings.py</code>   "" <code>CsrfViewMiddleware</code>,  :</p><br>
<pre><code class="python hljs"><span class="hljs-comment"># settings.py</span><font></font>
MIDDLEWARE = [<font></font>
    ...,<font></font>
    <span class="hljs-string">'backend.backend.api.CustomCsrfMiddleware'</span>,
    <span class="hljs-comment"># 'django.middleware.csrf.CsrfViewMiddleware',</span><font></font>
    ...,<font></font>
]</code></pre></div></div><br>
<p>         CSRF-   Django + Nuxt + Apollo,       .</p><br>
<h3 id="django-cors-headers">Django CORS Headers</h3><br>
<p>.. dev          ,  Django  ,      ,      .       <code>django-cors-headers</code>:</p><br>
<pre><code class="bash hljs">pipenv install <span class="hljs-string">"django-cors-headers&gt;=3.2"</span></code></pre><br>
<p> <code>settings.py</code> : </p><br>
<pre><code class="python hljs"><span class="hljs-comment"># backend/backend/settings.py</span>
<span class="hljs-keyword">from</span> corsheaders.defaults <span class="hljs-keyword">import</span> default_headers<font></font>
<font></font>
INSTALLED_APPS = [<font></font>
    ...,<font></font>
    <span class="hljs-string">'graphene_django'</span>,
    <span class="hljs-string">'backend.todo_list'</span>,
    <span class="hljs-string">'corsheaders'</span>,  <span class="hljs-comment">#   </span><font></font>
]<font></font>
<font></font>
CORS_ALLOW_CREDENTIALS = <span class="hljs-literal">True</span>
CORS_ALLOW_HEADERS = default_headers + (<span class="hljs-string">'cache-control'</span>, <span class="hljs-string">'cookies'</span>)<font></font>
CORS_ORIGIN_ALLOW_ALL = <span class="hljs-literal">True</span>  <span class="hljs-comment">#    production</span><font></font>
<font></font>
<span class="hljs-comment">#    middleware</span><font></font>
MIDDLEWARE = [<font></font>
    ...,<font></font>
    <span class="hljs-string">'corsheaders.middleware.CorsMiddleware'</span>,
    <span class="hljs-string">'django.middleware.common.CommonMiddleware'</span>,<font></font>
    ...,<font></font>
]</code></pre><br>
<h3 id="ustanovka-i-nastroyka-apollo">   Apollo</h3><br>
<p> Nuxt    <code>apollo</code>,        <code>vue-apollo</code> (      Apollo).    :</p><br>
<pre><code class="bash hljs">npm install --save @nuxtjs/apollo graphql-tag cookie-universal-nuxt</code></pre><br>
<p>   <code>Apollo</code>     <code>cookie-universal-nuxt</code>        .<br>
    <code>nuxt.config.js</code>.            .      <code>vuetify</code>:</p><br>
<pre><code class="javascript hljs"><span class="hljs-comment">// nuxt.config.js</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {<font></font>
  ...,<font></font>
  <span class="hljs-attr">modules</span>: [<font></font>
    ...,<font></font>
    <span class="hljs-string">'@nuxtjs/vuetify'</span>,
    <span class="hljs-string">'@nuxtjs/apollo'</span>,
    <span class="hljs-string">'cookie-universal-nuxt'</span><font></font>
  ],<font></font>
  <span class="hljs-attr">apollo</span>: {
    <span class="hljs-attr">clientConfigs</span>: {
      <span class="hljs-attr">default</span>: <span class="hljs-string">'~/plugins/apollo-client.js'</span><font></font>
    }<font></font>
  },<font></font>
  ...<font></font>
}</code></pre><br>
<p> Apollo   .    .      :</p><br>
<p>  <code>Apollo</code>,        .</p><br>
<div class="spoiler"><b class="spoiler_title">apollo-client.js</b><div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-comment">// frontend/plugins/apollo-client.js</span>
<span class="hljs-keyword">import</span> { HttpLink } <span class="hljs-keyword">from</span> <span class="hljs-string">'apollo-link-http'</span>
<span class="hljs-keyword">import</span> { setContext } <span class="hljs-keyword">from</span> <span class="hljs-string">'apollo-link-context'</span>
<span class="hljs-keyword">import</span> { <span class="hljs-keyword">from</span>, concat } <span class="hljs-keyword">from</span> <span class="hljs-string">'apollo-link'</span>
<span class="hljs-keyword">import</span> { InMemoryCache } <span class="hljs-keyword">from</span> <span class="hljs-string">'apollo-cache-inmemory'</span><font></font>
<font></font>
<span class="hljs-comment">//    ,     Nuxt     ctx</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> ctx =&gt; {
  <span class="hljs-comment">/**
   * -      
   *      ,   ""
   *   .
   */</span>
  <span class="hljs-keyword">const</span> ssrMiddleware = setContext(<span class="hljs-function">(<span class="hljs-params">_, { headers }</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (process.client) <span class="hljs-keyword">return</span> headers
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">headers</span>: {<font></font>
        ...headers,<font></font>
        <span class="hljs-attr">connection</span>: ctx.app.context.req.headers.connection,
        <span class="hljs-attr">referer</span>: ctx.app.context.req.headers.referer,
        <span class="hljs-attr">cookie</span>: ctx.app.context.req.headers.cookie<font></font>
      }<font></font>
    }<font></font>
  })<font></font>
<font></font>
  <span class="hljs-comment">/**
   *  CSRF-  .
   * https://docs.djangoproject.com/en/2.2/ref/csrf/#ajax
   */</span>
  <span class="hljs-keyword">const</span> csrfMiddleware = setContext(<span class="hljs-function">(<span class="hljs-params">_, { headers }</span>) =&gt;</span> {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">headers</span>: {<font></font>
        ...headers,<font></font>
        <span class="hljs-string">'X-CSRFToken'</span>: ctx.app.$cookies.get(<span class="hljs-string">'csrftoken'</span>) || <span class="hljs-literal">null</span><font></font>
      }<font></font>
    }<font></font>
  })<font></font>
  <span class="hljs-keyword">const</span> httpLink = <span class="hljs-keyword">new</span> HttpLink({
    <span class="hljs-attr">uri</span>: <span class="hljs-string">'http://localhost:8000/graphql/'</span>,
    <span class="hljs-attr">credentials</span>: <span class="hljs-string">'include'</span><font></font>
  })<font></font>
  <span class="hljs-comment">// Middleware  Apollo       middleware  Django, </span>
  <span class="hljs-comment">//    .    .  .</span>
  <span class="hljs-keyword">const</span> link = <span class="hljs-keyword">from</span>([csrfMiddleware, ssrMiddleware, httpLink])
  <span class="hljs-comment">//  .       Vuex,</span>
  <span class="hljs-comment">//    -   </span>
  <span class="hljs-keyword">const</span> cache = <span class="hljs-keyword">new</span> InMemoryCache()<font></font>
<font></font>
  <span class="hljs-keyword">return</span> {<font></font>
    link,<font></font>
    cache,<font></font>
    <span class="hljs-comment">//    apollo-module HttpLink'a    </span>
    <span class="hljs-attr">defaultHttpLink</span>: <span class="hljs-literal">false</span><font></font>
  }<font></font>
}</code></pre></div></div><br>
<p>      ,  Nuxt   ,  dev .</p><br>
<h3 id="ozhivlyaem-prilozhenie"> </h3><br>
<p>        .</p><br>
<p>  -  ,          .         <code>frontend/graphql.js</code>     :</p><br>
<div class="spoiler"><b class="spoiler_title">graphql.js</b><div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-keyword">import</span> gql <span class="hljs-keyword">from</span> <span class="hljs-string">'graphql-tag'</span><font></font>
<font></font>
<span class="hljs-comment">// ..   Todo     ,</span>
<span class="hljs-comment">//       </span>
<span class="hljs-comment">// https://www.apollographql.com/docs/react/data/fragments/</span>
<span class="hljs-keyword">const</span> TODO_FRAGMENT = gql<span class="hljs-string">`
  fragment TodoContents on TodoNode {
    id
    title
    text
    done
    createdDate
    dueDate
    category {
      id
      name
    }
  }
`</span><font></font>
<font></font>
<span class="hljs-keyword">const</span> ADD_TODO = gql<span class="hljs-string">`
  mutation(
    $title: String!
    $text: String
    $dueDate: Date!
    $category: String!
  ) {
    addTodo(
      title: $title
      text: $text
      dueDate: $dueDate
      category: $category
    ) {
      ...TodoContents
    }
  }
  <span class="hljs-subst">${TODO_FRAGMENT}</span>
`</span><font></font>
<font></font>
<span class="hljs-keyword">const</span> TOGGLE_TODO = gql<span class="hljs-string">`
  mutation($todoId: ID) {
    toggleTodo(todoId: $todoId) {
      ...TodoContents
    }
  }
  <span class="hljs-subst">${TODO_FRAGMENT}</span>
`</span><font></font>
<font></font>
<span class="hljs-keyword">const</span> GET_CATEGORIES = gql<span class="hljs-string">`
  {
    categories {
      id
      name
    }
  }
`</span><font></font>
<font></font>
<span class="hljs-keyword">const</span> GET_TODO_LIST = gql<span class="hljs-string">`
  {
    todoList {
      ...TodoContents
    }
  }
  <span class="hljs-subst">${TODO_FRAGMENT}</span>
`</span><font></font>
<font></font>
<span class="hljs-keyword">const</span> REMOVE_TODO = gql<span class="hljs-string">`
  mutation($todoId: ID) {
    removeTodo(todoId: $todoId)
  }
`</span><font></font>
<font></font>
<span class="hljs-keyword">export</span> { ADD_TODO, TOGGLE_TODO, GET_CATEGORIES, GET_TODO_LIST, REMOVE_TODO }</code></pre></div></div><br>
<p>       .        .</p><br>
<p> Vue :</p><br>
<div class="spoiler"><b class="spoiler_title">index.vue</b><div class="spoiler_text"><pre><code class="html hljs xml"><span class="hljs-comment">&lt;!-- frontend/pages/index.vue --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">v-layout</span> <span class="hljs-attr">row</span> <span class="hljs-attr">wrap</span> <span class="hljs-attr">justify-center</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">v-flex</span> <span class="hljs-attr">xs8</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"pb-1"</span>&gt;</span>
      <span class="hljs-comment">&lt;!-- emit'     --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">new-todo-form</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">v-flex</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">v-flex</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">"todo of todoList"</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">"todo.id"</span> <span class="hljs-attr">xs8</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"my-1"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">todo-item</span> <span class="hljs-attr">:todo</span>=<span class="hljs-string">"todo"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">v-flex</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">v-layout</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><font></font>
<font></font>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> NewTodoForm <span class="hljs-keyword">from</span> <span class="hljs-string">'../components/NewTodoForm'</span>
<span class="hljs-keyword">import</span> TodoItem <span class="hljs-keyword">from</span> <span class="hljs-string">'../components/TodoItem'</span>
<span class="hljs-comment">//   </span>
<span class="hljs-keyword">import</span> { GET_TODO_LIST } <span class="hljs-keyword">from</span> <span class="hljs-string">'../graphql'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">components</span>: { TodoItem, NewTodoForm },
  data() {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">todoList</span>: []
    }
  },
  <span class="hljs-attr">apollo</span>: {
    <span class="hljs-comment">//   todoList.      todoList</span>
    <span class="hljs-comment">//    ,    </span>
    <span class="hljs-comment">//   </span>
    <span class="hljs-attr">todoList</span>: { <span class="hljs-attr">query</span>: GET_TODO_LIST }
  }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></code></pre></div></div><br>
<div class="spoiler"><b class="spoiler_title">NewTodoForm.vue</b><div class="spoiler_text"><pre><code class="html hljs xml"><span class="hljs-comment">&lt;!-- frontend/components/NewTodoForm.vue --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">v-form</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"form"</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"valid"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">v-card</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">v-card-text</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"pt-0 mt-0"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">v-layout</span> <span class="hljs-attr">row</span> <span class="hljs-attr">wrap</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">v-flex</span> <span class="hljs-attr">xs8</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">v-text-field</span>
              <span class="hljs-attr">v-model</span>=<span class="hljs-string">"newTodo.title"</span>
              <span class="hljs-attr">:rules</span>=<span class="hljs-string">"[nonEmptyField]"</span>
              <span class="hljs-attr">label</span>=<span class="hljs-string">""</span>
              <span class="hljs-attr">prepend-icon</span>=<span class="hljs-string">"check_circle_outline"</span>
            /&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">v-flex</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">v-flex</span> <span class="hljs-attr">xs4</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">v-menu</span>
              <span class="hljs-attr">ref</span>=<span class="hljs-string">"menu"</span>
              <span class="hljs-attr">v-model</span>=<span class="hljs-string">"menu"</span>
              <span class="hljs-attr">:close-on-content-click</span>=<span class="hljs-string">"false"</span>
              <span class="hljs-attr">:nudge-right</span>=<span class="hljs-string">"40"</span>
              <span class="hljs-attr">:return-value.sync</span>=<span class="hljs-string">"newTodo.dueDate"</span>
              <span class="hljs-attr">lazy</span>
              <span class="hljs-attr">transition</span>=<span class="hljs-string">"scale-transition"</span>
              <span class="hljs-attr">offset-y</span>
              <span class="hljs-attr">full-width</span>
              <span class="hljs-attr">min-width</span>=<span class="hljs-string">"290px"</span>
            &gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">v-slot:activator</span>=<span class="hljs-string">"{ on }"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">v-text-field</span>
                  <span class="hljs-attr">v-model</span>=<span class="hljs-string">"newTodo.dueDate"</span>
                  <span class="hljs-attr">:rules</span>=<span class="hljs-string">"[nonEmptyField]"</span>
                  <span class="hljs-attr">v-on</span>=<span class="hljs-string">"on"</span>
                  <span class="hljs-attr">label</span>=<span class="hljs-string">" "</span>
                  <span class="hljs-attr">prepend-icon</span>=<span class="hljs-string">"event"</span>
                  <span class="hljs-attr">readonly</span>
                /&gt;</span>
              <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">v-date-picker</span>
                <span class="hljs-attr">v-model</span>=<span class="hljs-string">"newTodo.dueDate"</span>
                <span class="hljs-attr">no-title</span>
                <span class="hljs-attr">scrollable</span>
                <span class="hljs-attr">locale</span>=<span class="hljs-string">"ru-ru"</span>
                <span class="hljs-attr">first-day-of-week</span>=<span class="hljs-string">"1"</span>
              &gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">v-spacer</span> /&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">v-btn</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"menu = false"</span> <span class="hljs-attr">flat</span> <span class="hljs-attr">color</span>=<span class="hljs-string">"primary"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">v-btn</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">v-btn</span>
                  @<span class="hljs-attr">click</span>=<span class="hljs-string">"$refs.menu.save(newTodo.dueDate)"</span>
                  <span class="hljs-attr">flat</span>
                  <span class="hljs-attr">color</span>=<span class="hljs-string">"primary"</span>
                  &gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">v-btn</span>
                &gt;</span>
              <span class="hljs-tag">&lt;/<span class="hljs-name">v-date-picker</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">v-menu</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">v-flex</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">v-flex</span> <span class="hljs-attr">xs12</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">v-textarea</span>
              <span class="hljs-attr">v-model</span>=<span class="hljs-string">"newTodo.text"</span>
              <span class="hljs-attr">:rules</span>=<span class="hljs-string">"[nonEmptyField]"</span>
              <span class="hljs-attr">label</span>=<span class="hljs-string">""</span>
              <span class="hljs-attr">prepend-icon</span>=<span class="hljs-string">"description"</span>
              <span class="hljs-attr">hide-details</span>
              <span class="hljs-attr">rows</span>=<span class="hljs-string">"1"</span>
              <span class="hljs-attr">class</span>=<span class="hljs-string">"py-0 my-0"</span>
            /&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">v-flex</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">v-layout</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">v-card-text</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">v-card-actions</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">v-combobox</span>
          <span class="hljs-attr">v-model</span>=<span class="hljs-string">"newTodo.category"</span>
          <span class="hljs-attr">:rules</span>=<span class="hljs-string">"[nonEmptyField]"</span>
          <span class="hljs-attr">:items</span>=<span class="hljs-string">"categories"</span>
          <span class="hljs-attr">hide-details</span>
          <span class="hljs-attr">label</span>=<span class="hljs-string">""</span>
          <span class="hljs-attr">class</span>=<span class="hljs-string">"my-0 mx-2 mb-2 pt-0"</span>
          <span class="hljs-attr">prepend-icon</span>=<span class="hljs-string">"category"</span>
        /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">v-spacer</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">v-btn</span>
          <span class="hljs-attr">:disabled</span>=<span class="hljs-string">"!valid"</span>
          <span class="hljs-attr">:loading</span>=<span class="hljs-string">"loading"</span>
          @<span class="hljs-attr">click</span>=<span class="hljs-string">"add"</span>
          <span class="hljs-attr">color</span>=<span class="hljs-string">"blue lighten-1"</span>
          <span class="hljs-attr">flat</span>
          &gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">v-btn</span>
        &gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">v-card-actions</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">v-card</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">v-form</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><font></font>
<font></font>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-comment">//   </span>
<span class="hljs-keyword">import</span> { ADD_TODO, GET_CATEGORIES, GET_TODO_LIST } <span class="hljs-keyword">from</span> <span class="hljs-string">'../graphql'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">name</span>: <span class="hljs-string">'NewTodoForm'</span>,
  data() {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">newTodo</span>: <span class="hljs-literal">null</span>,
      <span class="hljs-attr">categories</span>: [],
      <span class="hljs-attr">valid</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">menu</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">nonEmptyField</span>: <span class="hljs-function"><span class="hljs-params">text</span> =&gt;</span>
        text ? !!text.length : <span class="hljs-string">'    '</span>,
      <span class="hljs-attr">loading</span>: <span class="hljs-literal">false</span> <span class="hljs-comment">//   </span>
    }
  },
  <span class="hljs-attr">apollo</span>: {
    <span class="hljs-comment">//     </span>
    <span class="hljs-attr">categories</span>: {
      <span class="hljs-attr">query</span>: GET_CATEGORIES,
      update({ categories }) {
        <span class="hljs-keyword">return</span> categories.map(<span class="hljs-function"><span class="hljs-params">c</span> =&gt;</span> c.name)
      }
    }
  },
  created() {
    <span class="hljs-keyword">this</span>.clear()
  },
  <span class="hljs-attr">methods</span>: {
    add() {
      <span class="hljs-keyword">this</span>.loading = <span class="hljs-literal">true</span>
      <span class="hljs-keyword">this</span>.$apollo
        .mutate({
          <span class="hljs-attr">mutation</span>: ADD_TODO,
          <span class="hljs-attr">variables</span>: {
            ...this.newTodo
          },
          <span class="hljs-comment">//        ,  </span>
          <span class="hljs-comment">//  ,     .    </span>
          <span class="hljs-comment">//      Todo.    , </span>
          <span class="hljs-comment">//    GET_TODO_LIST,    Apollo</span>
          <span class="hljs-comment">//        .  </span>
          <span class="hljs-comment">//     todoList   index.vue</span>
          <span class="hljs-attr">update</span>: <span class="hljs-function">(<span class="hljs-params">store, { data: { addTodo } }</span>) =&gt;</span> {
            <span class="hljs-comment">//       ,   </span>
            <span class="hljs-keyword">const</span> todoListData = store.readQuery({ <span class="hljs-attr">query</span>: GET_TODO_LIST })
            todoListData.todoList.unshift(addTodo)
            store.writeQuery({ <span class="hljs-attr">query</span>: GET_CATEGORIES, <span class="hljs-attr">data</span>: todoListData })

            <span class="hljs-keyword">const</span> categoriesData = store.readQuery({ <span class="hljs-attr">query</span>: GET_CATEGORIES })
            <span class="hljs-comment">//        Todo.   </span>
            <span class="hljs-comment">//   .      </span>
            <span class="hljs-comment">//   </span>
            <span class="hljs-keyword">const</span> category = categoriesData.categories.find(
              <span class="hljs-function"><span class="hljs-params">c</span> =&gt;</span> c.name === addTodo.category.name
            )
            <span class="hljs-keyword">if</span> (!category) {
              categoriesData.categories.push(addTodo.category)
              store.writeQuery({ <span class="hljs-attr">query</span>: GET_CATEGORIES, <span class="hljs-attr">data</span>: categoriesData })
            }
          }
        })
        .then(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
          <span class="hljs-keyword">this</span>.clear()
          <span class="hljs-keyword">this</span>.loading = <span class="hljs-literal">false</span>
          <span class="hljs-keyword">this</span>.$refs.form.reset() <span class="hljs-comment">//   </span>
        })
    },
    clear() {
      <span class="hljs-keyword">this</span>.newTodo = {
        <span class="hljs-attr">title</span>: <span class="hljs-string">''</span>,
        <span class="hljs-attr">text</span>: <span class="hljs-string">''</span>,
        <span class="hljs-attr">dueDate</span>: <span class="hljs-string">''</span>,
        <span class="hljs-attr">category</span>: <span class="hljs-string">''</span>
      }
    }
  }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></code></pre></div></div><br>
<div class="spoiler"><b class="spoiler_title">TodoItem.vue</b><div class="spoiler_text"><pre><code class="html hljs xml"><span class="hljs-comment">&lt;!-- frontend/components/NewTodoForm.vue --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">v-card</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">v-card-title</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"pb-1"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"overflow-wrap: break-word;"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">b</span>&gt;</span>{{ todo.title }}<span class="hljs-tag">&lt;/<span class="hljs-name">b</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">v-spacer</span> /&gt;</span>
      <span class="hljs-comment">&lt;!--   --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">v-btn</span>
        @<span class="hljs-attr">click</span>=<span class="hljs-string">"remove"</span>
        <span class="hljs-attr">flat</span>
        <span class="hljs-attr">small</span>
        <span class="hljs-attr">icon</span>
        <span class="hljs-attr">style</span>=<span class="hljs-string">"position: absolute; right: 0; top: 0"</span>
      &gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">v-icon</span> <span class="hljs-attr">:disabled</span>=<span class="hljs-string">"$nuxt.isServer"</span> <span class="hljs-attr">small</span>&gt;</span>close<span class="hljs-tag">&lt;/<span class="hljs-name">v-icon</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">v-btn</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">v-card-title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">v-card-text</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"py-1"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">v-layout</span> <span class="hljs-attr">row</span> <span class="hljs-attr">justyfy-center</span> <span class="hljs-attr">align-center</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">v-flex</span> <span class="hljs-attr">xs11</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"overflow-wrap: break-word;"</span>&gt;</span><font></font>
          {{ todo.text }}<font></font>
        <span class="hljs-tag">&lt;/<span class="hljs-name">v-flex</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">v-flex</span> <span class="hljs-attr">xs1</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"text-align: right;"</span>&gt;</span>
            <span class="hljs-comment">&lt;!--    --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">v-checkbox</span>
              <span class="hljs-attr">:value</span>=<span class="hljs-string">"todo.done"</span>
              @<span class="hljs-attr">click.once</span>=<span class="hljs-string">"toggle"</span>
              <span class="hljs-attr">hide-details</span>
              <span class="hljs-attr">class</span>=<span class="hljs-string">"pa-0 ma-0"</span>
              <span class="hljs-attr">style</span>=<span class="hljs-string">"display: inline-block;"</span>
              <span class="hljs-attr">color</span>=<span class="hljs-string">"green lighten-1"</span>
            /&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">v-flex</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">v-layout</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">v-card-text</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">v-card-actions</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"grey--text"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">v-icon</span> <span class="hljs-attr">small</span>&gt;</span>event<span class="hljs-tag">&lt;/<span class="hljs-name">v-icon</span>&gt;</span> {{ todo.dueDate }} | 
        <span class="hljs-tag">&lt;<span class="hljs-name">v-icon</span> <span class="hljs-attr">small</span>&gt;</span>calendar_today<span class="hljs-tag">&lt;/<span class="hljs-name">v-icon</span>&gt;</span> {{ todo.createdDate }}
      <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">v-spacer</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"grey--text"</span>&gt;</span>
        <span class="hljs-comment">&lt;!--      --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">v-icon</span> <span class="hljs-attr">small</span>&gt;</span>category<span class="hljs-tag">&lt;/<span class="hljs-name">v-icon</span>&gt;</span>: {{ todo.category.name }}
      <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">v-card-actions</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">v-card</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><font></font>
<font></font>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-comment">//   </span>
<span class="hljs-keyword">import</span> { GET_TODO_LIST, REMOVE_TODO, TOGGLE_TODO } <span class="hljs-keyword">from</span> <span class="hljs-string">'../graphql'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">name</span>: <span class="hljs-string">'TodoItem'</span>,
  <span class="hljs-attr">props</span>: {
    <span class="hljs-attr">todo</span>: {
      <span class="hljs-attr">type</span>: <span class="hljs-built_in">Object</span>,
      <span class="hljs-attr">default</span>: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> ({})
    }
  },
  <span class="hljs-comment">//     -</span>
  <span class="hljs-attr">methods</span>: {
    toggle() {
      <span class="hljs-comment">//        </span>
      <span class="hljs-comment">//    update. Apollo    </span>
      <span class="hljs-comment">//  ""  ,    </span>
      <span class="hljs-comment">//  .        index.vue</span>
      <span class="hljs-comment">//    Todo</span>
      <span class="hljs-keyword">this</span>.$apollo.mutate({
        <span class="hljs-attr">mutation</span>: TOGGLE_TODO,
        <span class="hljs-attr">variables</span>: {
          <span class="hljs-attr">todoId</span>: <span class="hljs-keyword">this</span>.todo.id
        }
      })
    },
    remove() {
      <span class="hljs-comment">//  update    this</span>
      <span class="hljs-keyword">const</span> todoId = <span class="hljs-keyword">this</span>.todo.id
      <span class="hljs-keyword">this</span>.$apollo.mutate({
        <span class="hljs-attr">mutation</span>: REMOVE_TODO,
        <span class="hljs-attr">variables</span>: {
          todoId
        },
        update(store, { <span class="hljs-attr">data</span>: { removeTodo } }) {
          <span class="hljs-keyword">if</span> (!removeTodo) <span class="hljs-keyword">return</span>
          <span class="hljs-comment">//         </span>
          <span class="hljs-keyword">const</span> data = store.readQuery({ <span class="hljs-attr">query</span>: GET_TODO_LIST })
          data.todoList = data.todoList.filter(<span class="hljs-function"><span class="hljs-params">todo</span> =&gt;</span> todo.id !== todoId)
          <span class="hljs-comment">// !</span>
          store.writeQuery({ <span class="hljs-attr">query</span>: GET_TODO_LIST, data })
        }
      })
    }
  }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></code></pre></div></div><br>
<p>,    </p><br>
<div class="spoiler"><b class="spoiler_title"></b><div class="spoiler_text"><p><img src="https://habrastorage.org/webt/xy/3e/_-/xy3e_-efabaavt-hjfy68fb_ftw.gif"></p></div></div><br>
<h2 id="zaklyuchenie"></h2><br>
<p>          Django  Nuxt   GraphQL API,        .      - ,      . </p><br>
<p>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">GitHub</a>.</p></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar492474/index.html">Ù†Ø­Ù† Ù†Ø¨Ù†ÙŠ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¹Ù„Ù‰ Ù…Ø±Ø¨Ø¹Ø§Øª Android ÙˆÙ†Ø­Ù„Ù„ Ù…Ø§ ÙŠØ¬Ø¨ Ø£Ù† ØªØªÙ…ÙƒÙ† Ø§Ù„Ø¨Ø§Ø¯Ø¦Ø© Ø§Ù„Ø¹Ø§Ø¯ÙŠØ© Ù…Ù† Ø§Ù„Ù‚ÙŠØ§Ù… Ø¨Ù‡.</a></li>
<li><a href="../ar492478/index.html">Ø¨Ø¯ÙˆÙ† Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø¹Ø±ÙØ© ØŒ ÙŠØ¤Ù„Ù…Ùƒ: 5 Ø¹ÙˆØ§Ù‚Ø¨ Ø±Ø¦ÙŠØ³ÙŠØ© Ù„Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Ù†Ø¸Ø§Ù…</a></li>
<li><a href="../ar492480/index.html">ÙƒÙŠÙ Ø¹Ø§Ù†ÙŠÙ†Ø§ Ù…Ù† Ø§Ù„Ø£ÙˆØ¨Ø¦Ø© Ù…Ù† Ù‚Ø¨Ù„ ÙˆÙ…Ø§ Ù†ÙØ¹Ù„Ù‡ Ø¶Ø¯ ÙÙŠØ±ÙˆØ³Ø§Øª Ø§Ù„ØªØ§Ø¬ÙŠØ©</a></li>
<li><a href="../ar492482/index.html">Ø§Ù„Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ø±Ù‚Ù…ÙŠØ© ÙÙŠ Ù…ÙˆØ³ÙƒÙˆ Ù…Ù† 16 Ø¥Ù„Ù‰ 22 Ù…Ø§Ø±Ø³</a></li>
<li><a href="../ar492484/index.html">Ø§Ù„Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ø±Ù‚Ù…ÙŠØ© ÙÙŠ Ø³Ø§Ù†Øª Ø¨Ø·Ø±Ø³Ø¨Ø±Øº Ù…Ù† 16 Ù…Ø§Ø±Ø³ Ø¥Ù„Ù‰ 22 Ù…Ø§Ø±Ø³</a></li>
<li><a href="../ar492488/index.html">OpenID Connect: ØªØ±Ø®ÙŠØµ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠØ© Ù…Ù† Ø¹Ø§Ù… Ø¥Ù„Ù‰ Ù‚ÙŠØ§Ø³ÙŠ</a></li>
<li><a href="../ar492492/index.html">NikiRobot - ØªØ·ÙˆØ± ÙÙŠ Ø§Ù„Ø±ÙˆØ¨ÙˆØªØ§Øª Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ©</a></li>
<li><a href="../ar492496/index.html">Ø¹ÙŠÙ†Ø© Ø¨Ø³ÙŠØ·Ø© Ù…Ù† Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª SPA ÙÙŠ Mithril.js</a></li>
<li><a href="../ar492500/index.html">ÙƒØ±Ø§Ø¬ Ø§Ù„Ø¹Ù„ÙˆÙ… Ø¨Ø§Ù„Ù„ØºØ© Ø§Ù„Ø±ÙˆØ³ÙŠØ©. ØªØ¬Ø±Ø¨Ø© ØªØ±Ø¬Ù…Ø© Ø¹Ø±Ø¶ Ø£Ù…Ø±ÙŠÙƒÙŠ</a></li>
<li><a href="../ar492502/index.html">MIP * = RE: Ø£Ø¯Ù„Ø© Ø­Ø¯ÙŠØ«Ø© Ø§Ù„Ø¹Ù‡Ø¯ ÙÙŠ Ù…Ø¬Ø§Ù„ Ø¹Ù„ÙˆÙ… Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ± ØªØ³Ø¨Ø¨Øª ÙÙŠ ØªØ£Ø«ÙŠØ± Ø§Ù„Ø¯ÙˆÙ…ÙŠÙ†Ùˆ ÙÙŠ Ø§Ù„ÙÙŠØ²ÙŠØ§Ø¡ ÙˆØ§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>