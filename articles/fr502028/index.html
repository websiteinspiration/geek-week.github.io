<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>⬇️ 👞 👏🏻 Vanya va à grand-mère ou adaptative JavaScript dynamique 🏄 🤟 🌨️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Tout en travaillant sur l'adaptatif, nous devons de temps en temps changer l'apparence des objets. Habituellement, il nous suffit d'enregistrer plusie...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Vanya va à grand-mère ou adaptative JavaScript dynamique</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/502028/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tout en travaillant sur l'adaptatif, nous devons de temps en temps changer l'apparence des objets. </font><font style="vertical-align: inherit;">Habituellement, il nous suffit d'enregistrer plusieurs requêtes médiatiques et nous pouvons le faire. </font><font style="vertical-align: inherit;">Dans certains cas, nous devons changer l'ordre des éléments, et ici, par exemple, la propriété order de Flexbox ou de la technologie Grid vient à la rescousse. </font><font style="vertical-align: inherit;">Mais il y a des moments où cela ne nous aide pas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'idée de l'adaptabilité dynamique est conçue pour simplifier la vie d'un concepteur de mise en page et adapter rapidement des éléments de mise en page complexes.</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/QKuMr575vlQ" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par exemple, regardez ce cas. Ici, nous avons la structure suivante: en-tête et du texte. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/jd/hs/i8/jdhsi8bq-3u7lszevxzxd9mmgxq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais avec une certaine permission, le concepteur a indiqué que le texte qui était sous le titre devrait maintenant être à un endroit complètement différent dans la structure. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/cy/e4/u6/cye4u6m9mmoop_qysyp4mzfxinq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En règle générale, les concepteurs de mise en page ont résolu ce problème de deux manières. Je vais leur rappeler rapidement. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je vais le montrer comme un exemple d'une situation de vie où le garçon de la ville Vanya voulait vraiment venir chez sa grand-mère pour l'été. Mais pas parce qu'il a raté sa grand-mère, mais parce qu'il voulait aller à la rivière avec la fille Olya. Et il voulait le faire avec une résolution inférieure à 992px. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/x9/ev/nj/x9evnjtlgrzdje2vpbxvajitcw8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comment allons-nous résoudre le problème de Vani?</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous pouvons faire ce qui suit: cacher Vanya dans la ville avec cette permission et montrer Vanya sur la rivière avec Olya. Mais pour cela, nous devons faire un clone de Vani. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voici la ville (originale) Vanya. Mais Vanya, en fait, sur la rivière déjà avec Olya. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/cq/34/hu/cq34hu8vfdlpqmc5nqsniftrdxw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais au départ, cette rivière Vanya est cachée dans CSS. Nous écrivons une requête média avec les paramètres dont nous avons besoin, dans laquelle nous montrons la nouvelle Vanya et cachons l'ancienne Vanya (ville). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/2t/i0/id/2ti0idhaphwbdm9kelpifg0ndec.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout a fonctionné pour nous - avec la permission dont nous avons besoin, Vanya se retrouve sous Olya. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vv/hz/i6/vvhzi6fnhiti6hed2t5ojkq42wg.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En conséquence, lorsque la résolution est supérieure à 992 pixels, Vanya revient immédiatement dans la ville. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vd/s1/q7/vds1q743_a221midfog7xtlodtq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et tout semble aller bien, Vanya avec Olya quand c'est nécessaire. Vous pouvez vous disperser ...</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais pas si simple. En fait, certains clients sont très opposés au contenu en double. Cela est dû à certains problèmes de référencement et, en principe, à la création de blocs inutiles. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, nous avons de la chance, dans notre situation, Vanya est un peu petite, et Vanya se trouve être des gars très gros, massifs et gonflés, qui nécessitent respectivement beaucoup de lignes de code. Et dans cette situation, y compris les clients, ils vous demandent de déplacer l'objet DOM à l'aide de JavaScript. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cela peut être fait approximativement comme suit. Pour commencer, je dois supprimer Vanya, qui est un clone, en HTML et laisser Vanya originale. En CSS, commentez toutes les lignes que nous avions à l'origine pour une autre option d'habillage. Et ajoutez ici un code JS aussi simple.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">// </span>
<span class="hljs-keyword">const</span> parent_original = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.content__blocks_city'</span>);
<span class="hljs-keyword">const</span> parent = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.content__column_river'</span>);
<span class="hljs-keyword">const</span> item = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.content__block_item'</span>);<font></font>
<font></font>
<span class="hljs-comment">//   </span>
<span class="hljs-built_in">window</span>.addEventListener(<span class="hljs-string">'resize'</span>, move);<font></font>
<font></font>
<span class="hljs-comment">//</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">move</span>(<span class="hljs-params"></span>)</span>{
	<span class="hljs-keyword">const</span> viewport_width = <span class="hljs-built_in">Math</span>.max(<span class="hljs-built_in">document</span>.documentElement.clientWidth, <span class="hljs-built_in">window</span>.innerWidth || <span class="hljs-number">0</span>);
	<span class="hljs-keyword">if</span> (viewport_width &lt;= <span class="hljs-number">992</span>) {
		<span class="hljs-keyword">if</span> (!item.classList.contains(<span class="hljs-string">'done'</span>)) {<font></font>
			parent.insertBefore(item, parent.children[<span class="hljs-number">2</span>]);<font></font>
			item.classList.add(<span class="hljs-string">'done'</span>);<font></font>
		}<font></font>
	} <span class="hljs-keyword">else</span> {
		<span class="hljs-keyword">if</span> (item.classList.contains(<span class="hljs-string">'done'</span>)) {<font></font>
			parent_original.insertBefore(item, parent_original.children[<span class="hljs-number">2</span>]);<font></font>
			item.classList.remove(<span class="hljs-string">'done'</span>);<font></font>
		}<font></font>
	}<font></font>
}<font></font>
<font></font>
<span class="hljs-comment">// </span><font></font>
move();<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout d'abord, nous déclarons les variables où nous «composons» la ville, la rivière et le Vani d'origine. Ensuite, nous commençons à «écouter» la largeur de l'écran afin de saisir l'instant où nous devons déplacer Vanya. Après avoir obtenu la largeur et défini la condition dans laquelle nous vérifions que la largeur est inférieure ou égale à 992px. Lors du déplacement de Vanya, nous lui attribuons une classe, nous vérifions donc la présence d'une classe afin que ce mouvement ne se produise pas tout le temps (Vanya a bougé une fois et c'est tout, vous n'avez pas besoin de la transférer constamment). Et nous effectuons le transfert lui-même à l'intérieur du parent (vers la rivière), ici nous indiquons la position dans l'arbre DOM où nous devons déplacer Vanya (sous Olya, au-dessus d'Olya). Et quand nous avons une résolution supérieure à 992px, nous devons retourner Vanya à l'endroit. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous essayons de voir que notre Vanya s'est de nouveau déplacée sous Olya.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et tout va bien: nous n’avons aucun contenu en double, tout fonctionne bien, le client est satisfait, tout le monde est content. Mais cette méthode a un certain nombre de problèmes associés à l'écriture du code js lui-même. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous comprenons que pour un seul cas, c'est normal - nous avons bien écrit. Mais j'ai eu l'idée d'automatiser ce processus. Supposons que je doive lancer 5-6 éléments complètement différents sur la page. Pour cette tâche, l'écriture d'un code js à l'aide de cette méthode est assez laborieuse et prend du temps. Et le deuxième point, qui, naturellement, a pesé sur beaucoup d'entre vous, est la charge sur le PC de l'utilisateur, car ici, nous «écoutons» constamment la largeur de l'écran. Je voulais aussi optimiser ce moment. Il peut également être optimisé dans ce code, mais depuis que j'ai écrit un </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">outil d'</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> automatisation que j'ai appelé </font><b><font style="vertical-align: inherit;">«adaptatif dynamique»</font></b><font style="vertical-align: inherit;"> , je l'ai optimisé là-bas.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je vais maintenant vous montrer comment tout cela fonctionne. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Après avoir connecté mon adaptative dynamique, je n'ai qu'à travailler avec le fichier HTML et il n'est pas nécessaire d'accéder à JavaScript. Pour ce faire, je dois écrire l'attribut data-da (da est l'abréviation de dynamic adaptive) et spécifier trois paramètres entre guillemets, séparés par des virgules. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le premier paramètre est où. Je prends une classe unique de l'objet où je veux déplacer Vanya. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le deuxième paramètre est lequel (dans une rangée). Mon objet a deux éléments: zéro et le premier (on sait qu'en JavaScript tout part de zéro). J'ai besoin d'insérer Vanya après l'objet "1", donc j'écris le paramètre "2". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le troisième paramètre est quand. Dans le troisième paramètre, j'écris «992», c'est la résolution en dessous de laquelle Vanya veut vraiment arriver à Olya.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les deuxième et troisième paramètres sont facultatifs. Par défaut, l'objet sera déplacé à la fin du bloc à une résolution inférieure à 768 px. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/s6/aw/an/s6awan4diwfqltbtcyvt7nkkg-k.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous vérifions. Tout fonctionne de la même manière que dans les versions précédentes, mais sans duplication de contenu et tout est automatisé. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pensez aux commodités. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, afin de déplacer Vanya sur Olya, j'ai juste besoin de changer le numéro de série dans le deuxième paramètre d'attribut. Et Vanya sera déjà sur Olya. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/cl/w1/it/clw1it_jfjybuy4wewk8bwxdbio.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pratique, non? Je peux faire de même avec le troisième paramètre de point d'arrêt. Je peux spécifier, par exemple, 1280px. (data-da = "content__column_river, 1,1280"). Vanya ira donc à Olya un peu plus tôt, précisément lorsque cette valeur sera atteinte. Et le plus cool, c'est que Vanya retournera chez lui de manière absolument automatique.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour plus de confort, au lieu du numéro de série dans le deuxième paramètre de l'attribut, vous pouvez spécifier l'une des deux valeurs - première ou dernière. Lorsque j'écrirai en premier, Vanya passera sur la rubrique "Je suis une rivière". Il sera situé le premier à l'intérieur de l'objet où nous l'envoyons. En conséquence, si vous spécifiez en dernier, alors notre Vanya sera tout en bas de l'objet. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/hx/kb/l4/hxkbl42bvvf9aqvsnffcqhpkq0w.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Regardons quelques autres exemples. Supposons que nous puissions envoyer Kolya au jardin de la lota et envoyer Anya à la rivière à Van et Ola aussi, ce sera plus amusant. Nous écrivons pour Kolya un attribut avec les paramètres </font></font><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">data-da = "content__column_garden, 2,992"</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Et pour Ani nous écrivons </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">data-da = "content__column_river, 1.1280"</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Nous regardons: Anya, Olya et Vanya sur la rivière. Kolya va à Lota un peu plus tard. Au retour, tous les gars sont à leur place. Tout est bon.</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jouez dans CodePen: </font></font></b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">codepen.io/FreelancerLifeStyle/project/full/ZmWOPm</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Bien sûr, vous pouvez avoir une question: qu'en est-il de l'événement qui pourrait être suspendu à des objets déplaçables? Par exemple, au départ, en cliquant sur Anya, nous obtenons une fenêtre avec l'inscription: "Tout va bien." Voyons ce qui se passe quand elle se déplace avec les gars vers la rivière. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Déplacez, faites un clic - tout fonctionne bien, la fenêtre s'affiche également. L'événement reste avec l'objet lorsqu'il est déplacé. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/pn/yp/9w/pnyp9wq5kdlt6nl5ypa-rgx3uhw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et la deuxième question passionnante est la charge, que j'ai essayé de minimiser. Maintenant, je vais le montrer en racontant un peu le code qui est caché sous le capot de l'adaptatif dynamique.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout d'abord, je déclare certaines variables, y compris la création de tableaux, que je remplis ci-dessous. J'obtiens l'attribut, le sépare, le transformant en un tableau pour obtenir des éléments individuels. Ensuite, je remplis la position d'origine des objets pour qu'ils puissent ensuite être ramenés chez leurs parents (en ville). Après cela, je remplis le tableau des éléments eux-mêmes, afin de pouvoir ensuite le trier pour un fonctionnement correct.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">let</span> originalPositions = [];
<span class="hljs-keyword">let</span> daElements = <span class="hljs-built_in">document</span>.querySelectorAll(<span class="hljs-string">'[data-da]'</span>);
<span class="hljs-keyword">let</span> daElementsArray = [];
<span class="hljs-keyword">let</span> daMatchMedia = [];
<span class="hljs-comment">// </span>
<span class="hljs-keyword">if</span> (daElements.length &gt; <span class="hljs-number">0</span>) {
	<span class="hljs-keyword">let</span> number = <span class="hljs-number">0</span>;
	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> index = <span class="hljs-number">0</span>; index &lt; daElements.length; index++) {
		<span class="hljs-keyword">const</span> daElement = daElements[index];
		<span class="hljs-keyword">const</span> daMove = daElement.getAttribute(<span class="hljs-string">'data-da'</span>);
		<span class="hljs-keyword">if</span> (daMove != <span class="hljs-string">''</span>) {
			<span class="hljs-keyword">const</span> daArray = daMove.split(<span class="hljs-string">','</span>);
			<span class="hljs-keyword">const</span> daPlace = daArray[<span class="hljs-number">1</span>] ? daArray[<span class="hljs-number">1</span>].trim() : <span class="hljs-string">'last'</span>;
			<span class="hljs-keyword">const</span> daBreakpoint = daArray[<span class="hljs-number">2</span>] ? daArray[<span class="hljs-number">2</span>].trim() : <span class="hljs-string">'767'</span>;
			<span class="hljs-keyword">const</span> daDestination = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.'</span> + daArray[<span class="hljs-number">0</span>].trim())
			<span class="hljs-keyword">if</span> (daArray.length &gt; <span class="hljs-number">0</span> &amp;&amp; daDestination) {<font></font>
				daElement.setAttribute(<span class="hljs-string">'data-da-index'</span>, number);
				<span class="hljs-comment">//   </span><font></font>
				originalPositions[number] = {<font></font>
					<span class="hljs-string">"parent"</span>: daElement.parentNode,
					<span class="hljs-string">"index"</span>: indexInParent(daElement)<font></font>
				};<font></font>
				<span class="hljs-comment">//   </span><font></font>
				daElementsArray[number] = {<font></font>
					<span class="hljs-string">"element"</span>: daElement,
					<span class="hljs-string">"destination"</span>: <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.'</span> + daArray[<span class="hljs-number">0</span>].trim()),
					<span class="hljs-string">"place"</span>: daPlace,
					<span class="hljs-string">"breakpoint"</span>: daBreakpoint<font></font>
				}<font></font>
				number++;<font></font>
			}<font></font>
		}<font></font>
	}<font></font>
	dynamicAdaptSort(daElementsArray);<font></font>
<font></font>
	<span class="hljs-comment">//    </span>
	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> index = <span class="hljs-number">0</span>; index &lt; daElementsArray.length; index++) {
		<span class="hljs-keyword">const</span> el = daElementsArray[index];
		<span class="hljs-keyword">const</span> daBreakpoint = el.breakpoint;
		<span class="hljs-keyword">const</span> daType = <span class="hljs-string">"max"</span>; <span class="hljs-comment">// MobileFirst   min</span><font></font>
<font></font>
		daMatchMedia.push(<span class="hljs-built_in">window</span>.matchMedia(<span class="hljs-string">"("</span> + daType + <span class="hljs-string">"-width: "</span> + daBreakpoint + <span class="hljs-string">"px)"</span>));<font></font>
		daMatchMedia[index].addListener(dynamicAdapt);<font></font>
	}<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et à la fin, l'optimisation dont j'ai parlé est implémentée: au lieu de redimensionner la fenêtre (écouter chaque changement de fenêtre), nous n'écouterons les changements au point d'arrêt qu'en utilisant window matchMedia. </font><font style="vertical-align: inherit;">De cette façon, nous n'obtenons la réponse du navigateur qu'à certains points: ceux que nous avons indiqués dans les attributs de nos objets. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, je collecte un tableau de ces points d'arrêt et suspend un événement pour chaque point d'arrêt. </font><font style="vertical-align: inherit;">Dans la fonction principale dynamic_adapt, j'étends tout cela à l'intérieur du tableau que nous avons collecté et trié, vérifie la présence d'un point d'arrêt, déplace les éléments ou les remets à leur place.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">// </span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">dynamicAdapt</span>(<span class="hljs-params">e</span>) </span>{
	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> index = <span class="hljs-number">0</span>; index &lt; daElementsArray.length; index++) {
		<span class="hljs-keyword">const</span> el = daElementsArray[index];
		<span class="hljs-keyword">const</span> daElement = el.element;
		<span class="hljs-keyword">const</span> daDestination = el.destination;
		<span class="hljs-keyword">const</span> daPlace = el.place;
		<span class="hljs-keyword">const</span> daBreakpoint = el.breakpoint;
		<span class="hljs-keyword">const</span> daClassname = <span class="hljs-string">"_dynamic_adapt_"</span> + daBreakpoint;<font></font>
<font></font>
		<span class="hljs-keyword">if</span> (daMatchMedia[index].matches) {
			<span class="hljs-comment">// </span>
			<span class="hljs-keyword">if</span> (!daElement.classList.contains(daClassname)) {
				<span class="hljs-keyword">let</span> actualIndex = indexOfElements(daDestination)[daPlace];
				<span class="hljs-keyword">if</span> (daPlace === <span class="hljs-string">'first'</span>) {<font></font>
					actualIndex = indexOfElements(daDestination)[<span class="hljs-number">0</span>];<font></font>
				} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (daPlace === <span class="hljs-string">'last'</span>) {<font></font>
					actualIndex = indexOfElements(daDestination)[indexOfElements(daDestination).length];<font></font>
				}<font></font>
				daDestination.insertBefore(daElement, daDestination.children[actualIndex]);<font></font>
				daElement.classList.add(daClassname);<font></font>
			}<font></font>
		} <span class="hljs-keyword">else</span> {
			<span class="hljs-comment">//  </span>
			<span class="hljs-keyword">if</span> (daElement.classList.contains(daClassname)) {<font></font>
				dynamicAdaptBack(daElement);<font></font>
				daElement.classList.remove(daClassname);<font></font>
			}<font></font>
		}<font></font>
	}<font></font>
	customAdapt();<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fonction de retour à la position d'origine:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">//   </span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">dynamicAdaptBack</span>(<span class="hljs-params">el</span>) </span>{
	<span class="hljs-keyword">const</span> daIndex = el.getAttribute(<span class="hljs-string">'data-da-index'</span>);
	<span class="hljs-keyword">const</span> originalPlace = originalPositions[daIndex];
	<span class="hljs-keyword">const</span> parentPlace = originalPlace[<span class="hljs-string">'parent'</span>];
	<span class="hljs-keyword">const</span> indexPlace = originalPlace[<span class="hljs-string">'index'</span>];
	<span class="hljs-keyword">const</span> actualIndex = indexOfElements(parentPlace, <span class="hljs-literal">true</span>)[indexPlace];<font></font>
	parentPlace.insertBefore(el, parentPlace.children[actualIndex]);<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Naturellement, beaucoup ont une question sur Mobile First. </font><font style="vertical-align: inherit;">Il n'y a aucun problème - nous devons changer seulement quelques variables dans le code (la suppression de ce paramètre en HTML fonctionne déjà):</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lorsque je collecte un tableau de points d'arrêt, nous devons changer "max" en "min" ici. </font><font style="vertical-align: inherit;">Et l'événement sera «écouté» non pas par largeur max, mais par largeur min.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous devez également modifier le tri afin que les objets du tableau soient alignés dans un ordre différent lorsque nous les trions par point d'arrêt. </font></font></li>
</ol><br>
<pre><code class="javascript hljs">	<span class="hljs-comment">// </span>
	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">dynamicAdaptSort</span>(<span class="hljs-params">arr</span>) </span>{<font></font>
		arr.sort(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">a, b</span>) </span>{
			<span class="hljs-keyword">if</span> (a.breakpoint &gt; b.breakpoint) { <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span> } <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> <span class="hljs-number">1</span> } <span class="hljs-comment">// MobileFirst </span><font></font>
		});<font></font>
		arr.sort(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">a, b</span>) </span>{
			<span class="hljs-keyword">if</span> (a.place &gt; b.place) { <span class="hljs-keyword">return</span> <span class="hljs-number">1</span> } <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span> }<font></font>
		});<font></font>
	}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Toujours en dynamique adaptative, j'utilise une certaine méthode pour obtenir l'index lorsque l'objet est lancé. </font><font style="vertical-align: inherit;">Et voici les premiers défauts - je dois exclure l'objet transféré. </font><font style="vertical-align: inherit;">Ceux. </font><font style="vertical-align: inherit;">lorsque je transfère des objets au même endroit, afin que tout soit adéquat et que les objets s'alignent dans l'ordre que nous voulons, lors du transfert, je dois exclure l'objet précédemment transféré au même point.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">//       </span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">indexOfElements</span>(<span class="hljs-params">parent, back</span>) </span>{
	<span class="hljs-keyword">const</span> children = parent.children;
	<span class="hljs-keyword">const</span> childrenArray = [];
	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; children.length; i++) {
		<span class="hljs-keyword">const</span> childrenElement = children[i];
		<span class="hljs-keyword">if</span> (back) {<font></font>
			childrenArray.push(i);<font></font>
		} <span class="hljs-keyword">else</span> {
			<span class="hljs-comment">//  </span>
			<span class="hljs-keyword">if</span> (childrenElement.getAttribute(<span class="hljs-string">'data-da'</span>) == <span class="hljs-literal">null</span>) {<font></font>
				childrenArray.push(i);<font></font>
			}<font></font>
		}<font></font>
	}<font></font>
	<span class="hljs-keyword">return</span> childrenArray;<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais entraîne un autre problème de tri. Par exemple, si je transfère les gars en même temps au même poste, je ne pourrai pas contrôler leur commande. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une des façons de développer cet adaptatif dynamique peut être, par exemple, la création de plusieurs points d'arrêt. Par exemple, nous devons déplacer Vanya à Ola à 1280 px et à 992 px Vanya pour déménager dans le jardin ou retourner à l'endroit. Cette fonctionnalité n'est pas disponible actuellement, il y a donc encore du travail à faire. En général, pour couvrir 95% des tâches quotidiennes dans l'adaptatif, la fonctionnalité qui me suffit maintenant me suffit. Pour résoudre le problème du déplacement d'objets vers un autre endroit, je dois maintenant passer quelques secondes à écrire un attribut. Et j'obtiendrai le résultat dont j'ai besoin.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Naturellement, j'exhorte absolument tous ceux qui ont aimé l'adaptabilité dynamique à participer à ses tests, à son développement et à son amélioration à la fois fonctionnelle et d'optimisation du code lui-même. </font><font style="vertical-align: inherit;">Et tout pour que nos Kohl, Ani, Vani et Olya soient ensemble quand ils le veulent. </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">Dépôt </font></a></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github.com/FreelancerLifeStyle/dynamic_adapt</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Basé sur la vidéo " </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dynamic Adaptive // ​​Adaptation rapide d'objets complexes en JavaScript</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> " sur la chaîne youtube " </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Freelancer for Life</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> "</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr501996/index.html">Zen Go (Pocket Version)</a></li>
<li><a href="../fr501998/index.html">Prix ​​cher des styles. Rapport Yandex</a></li>
<li><a href="../fr502000/index.html">12 cours en ligne d'ingénierie des données</a></li>
<li><a href="../fr502004/index.html">Méthode Kanban: comprendre votre processus en tant que processus de renforcement des connaissances collectives - Partie 1 (recettes)</a></li>
<li><a href="../fr502008/index.html">Programmation aux masses</a></li>
<li><a href="../fr502030/index.html">Services Web dans Oracle</a></li>
<li><a href="../fr502034/index.html">Les composants contrôlés et non contrôlés de React n'ont pas à être compliqués</a></li>
<li><a href="../fr502038/index.html">Élever un atome, approche 2.0.1</a></li>
<li><a href="../fr502040/index.html">À propos des verbes Phrasal-5 (haut / bas)</a></li>
<li><a href="../fr502046/index.html">Cinq ans de rouille</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>