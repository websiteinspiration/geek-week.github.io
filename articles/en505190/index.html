<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßóüèº üßóüèæ üèà How to recreate the moire pattern effect in the p5.js library for a beginner (quick guide) ü§π üéç ‚è∏Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Moire pattern is an optical illusion that occurs when two periodic mesh patterns are applied. The repeating elements of the two patterns either overla...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>How to recreate the moire pattern effect in the p5.js library for a beginner (quick guide)</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/505190/"><img src="https://habrastorage.org/webt/r4/y5/c3/r4y5c3ll3ab62bu_giksqihzjx4.jpeg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Moire pattern is an optical illusion that occurs when two periodic mesh patterns are applied. The repeating elements of the two patterns either overlap or form gaps. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In ordinary life, we often encounter it, for example, when we look at the curtains of tulle. Not surprisingly, the French name Moire itself originally meant a similar type of silk fabric. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/yi/1q/9d/yi1q9drnqyien6jqpq4l-x-s5sq.jpeg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This effect can often be observed in a variety of areas - from photography to radiology and navigation. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In order to achieve this effect, and at the same time practice in p5.js, I decided to write simple code that recreates it.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
p5.js is a Javascript library created in 2014. </font><font style="vertical-align: inherit;">Its main goal is to become a window into the world of programming for designers, artists, teachers and other representatives of creative professions. </font><font style="vertical-align: inherit;">It supports both animation and diagrams, easily translates to web format.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To get started, you need to create a new project online editor. </font><font style="vertical-align: inherit;">By default, the new project is as follows:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setup</span>(<span class="hljs-params"></span>) </span>{<font></font>
  createCanvas(<span class="hljs-number">400</span>, <span class="hljs-number">400</span>);<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">draw</span>(<span class="hljs-params"></span>) </span>{<font></font>
  background(<span class="hljs-number">220</span>);<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
function setup () - sets a function that is executed only once </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
function draw () - repeats in an infinite loop </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We start by setting up our ‚Äúcanvas‚Äù. </font><font style="vertical-align: inherit;">For the createCanvas () function, we set the parameters 720 and 500 (width and height, respectively). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To make an ellipse appear on the background, we insert the following parameters into the draw () function (which, as we recall, is responsible for repetition):</font></font><br>
<br>
<pre><code class="javascript hljs">{<font></font>
  noFill()<font></font>
  stroke (<span class="hljs-string">'purple'</span>) <font></font>
  strokeWeight(<span class="hljs-number">3</span>)<font></font>
  ellipse(<span class="hljs-number">360</span>,<span class="hljs-number">250</span>,<span class="hljs-number">100</span>,<span class="hljs-number">100</span>) }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
What is going on here? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
noFill () - does not fill the inside of the ellipse with any color. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
stroke ('purple') - creates a line with purple color. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
strokeWeight (3) - sets the thickness of this line. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ellipse (360,250,100,100) - says that the line should be twisted into an ellipse with the given parameters (position along X, position along Y, diameter along X, diameter along Y). The first and second parameters are equal to half the parameters in the createCanvas (400, 400) function - to be exactly in the center. The same 3 and 4 parameters create the shape of a circle, not an oval. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As a result, you get something like this. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/z1/3a/ga/z13agansua-rb64spcr1h-v2zdq.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Not impressive yet, right?</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now we need to make these ellipses more, each next little more than the previous one. To do this, we need to create a loop, remove our ellipse into it, and make the third and fourth parameters variables.</font></font><br>
<br>
<pre><code class="javascript hljs"> background(<span class="hljs-number">220</span>);
  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">1000</span>; i+=<span class="hljs-number">10</span>) {<font></font>
  noFill()<font></font>
  stroke (<span class="hljs-string">'purple'</span>) <font></font>
  strokeWeight(<span class="hljs-number">3</span>)<font></font>
  ellipse(<span class="hljs-number">360</span>,<span class="hljs-number">250</span>,i,i)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If you have ever dealt with cycles at least once in your life, you will understand what is happening. We set the initial value i = 0, so at the beginning we draw an ellipse in a zero radius. Then we set the limit to what value i we will repeat the cycle (up to 1000), after which we determine the change step i + = 10 - each time i will be added to the previous result i. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We substitute the parameter i into the ellipse drawing function as the third and fourth parameter responsible for the diameter in width and height. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now, when we run the code, we get the following. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/q_/um/3m/q_um3mbhly7bkqy0gexgd48ud48.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This is not moir√©, but it is already similar. What did the code do? He simply consistently drew 100 circles (until the diameter of the latter became 1000), which differ in diameter by 10, each time saving the result.</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Do not forget to enter noFill () otherwise you will save and display only the result of the last iteration.</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now, to get the second ellipse, we enter it into the same loop, but with slightly different parameters:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">draw</span>(<span class="hljs-params"></span>) </span>{<font></font>
  background(<span class="hljs-number">220</span>);
  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">1000</span>; i+=<span class="hljs-number">10</span>) {<font></font>
  noFill()<font></font>
  stroke (<span class="hljs-string">'purple'</span>) <font></font>
  strokeWeight(<span class="hljs-number">3</span>)<font></font>
  ellipse(<span class="hljs-number">360</span>,<span class="hljs-number">250</span>,i,i)<font></font>
    <font></font>
  stroke(<span class="hljs-string">"red"</span>)<font></font>
  strokeWeight(<span class="hljs-number">3</span>)<font></font>
  ellipse(<span class="hljs-number">360</span>, <span class="hljs-number">250</span>,i<span class="hljs-number">-500</span>,i<span class="hljs-number">-500</span>)<font></font>
  }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As a result, you will get a sequence of circles, the largest of which will be in diameter equal to 1000 minus 500. The height of our canvas is just 500, so that the internal perfectionist will be satisfied. </font><font style="vertical-align: inherit;">Well, it will be red. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It is time for the final action - to make these circles move past each other. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To do this, OUT of the loop, add the variable x with the value 0 at the very beginning of the entire code and the if loop AFTER the draw () function</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">let</span> x = <span class="hljs-number">0</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setup</span>(<span class="hljs-params"></span>) </span>{<font></font>
  createCanvas(<span class="hljs-number">720</span>, <span class="hljs-number">500</span>);<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">draw</span>(<span class="hljs-params"></span>) </span>{<font></font>
  background(<span class="hljs-number">220</span>);
  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">1000</span>; i+=<span class="hljs-number">10</span>) {<font></font>
  noFill()<font></font>
  stroke (<span class="hljs-string">'purple'</span>) <font></font>
  strokeWeight(<span class="hljs-number">3</span>)<font></font>
  ellipse(<span class="hljs-number">360</span>,<span class="hljs-number">250</span>,i,i)<font></font>
    <font></font>
  stroke(<span class="hljs-string">"red"</span>)<font></font>
  strokeWeight(<span class="hljs-number">3</span>)<font></font>
  ellipse(x,<span class="hljs-number">250</span>,i<span class="hljs-number">-500</span>,i<span class="hljs-number">-500</span>)<font></font>
  }<font></font>
<span class="hljs-keyword">if</span> (x&gt;width) {<font></font>
  x= <span class="hljs-number">0</span>
} <span class="hljs-keyword">else</span> {x= x+<span class="hljs-number">3</span>}<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
There is a condition. </font><font style="vertical-align: inherit;">If x is less than the width of the canvas, then we reset x to the default zero value. </font><font style="vertical-align: inherit;">Until this happens, we add 3 to our x value. </font><font style="vertical-align: inherit;">As it can be understood, through X we want to set the coordinate along the X axis for the second circle. </font><font style="vertical-align: inherit;">Since it will change slightly every time, our circle will move horizontally to the right until its center reaches the edge of the screen.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/3v/ww/so/3vwwsobznt-udcvzksly9kipe5s.png" alt="image"><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Do not forget to change the first parameter of the second ellipse from 360 to the variable x.</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Done. </font><font style="vertical-align: inherit;">As a result, you get a repeating, endlessly moire effect on your computer screen, which is easy to integrate into your web projects. </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Link to the final result</font></font></a><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The project idea was taken from Superfun P5.js Projects - Nazia Fakhruddin, honestly bought from Amazon.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Part of the material was taken from an article by the same author on Medium </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">medium.com/@naziafakhruddin/the-mysterious-moir%C3%A9-pattern-49d797897355</font></font></a></li>
</ul></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en505142/index.html">How Amazon wants innovation out of the pandemic</a></li>
<li><a href="../en505156/index.html">Django: one user for everything</a></li>
<li><a href="../en505176/index.html">What assets allowed investors to protect resources during a pandemic?</a></li>
<li><a href="../en505178/index.html">DIY Exergaming in isolation</a></li>
<li><a href="../en505186/index.html">Three ways to combine ground on a printed circuit board</a></li>
<li><a href="../en505194/index.html">Windows Defender SmartScreen harms independent developers</a></li>
<li><a href="../en505196/index.html">Bad leader - instruction manual</a></li>
<li><a href="../en505208/index.html">How and why should a product hold CustDev?</a></li>
<li><a href="../en505212/index.html">Apple warned looters to track all stolen phones</a></li>
<li><a href="../en505218/index.html">Online Security Meeting</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>