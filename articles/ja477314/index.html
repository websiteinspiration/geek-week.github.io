<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ™‡ğŸ¾ ğŸ‹ â˜„ï¸ ViewModelã‹ã‚‰MVVMã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£/ãƒ•ãƒ©ã‚°ãƒ¡ãƒ³ãƒˆã¸ã®ã‚¤ãƒ™ãƒ³ãƒˆã®é€ä¿¡ ğŸ¦‡ ğŸ‘©ğŸ¼ ğŸ¤šğŸ½</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ä»Šæ—¥ã¯ã€MVVMã§ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£/ãƒ•ãƒ©ã‚°ãƒ¡ãƒ³ãƒˆã¨ViewModelã®é–“ã§ã‚¤ãƒ™ãƒ³ãƒˆã‚’äº¤æ›ã™ã‚‹æ–¹æ³•ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚ViewModelã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹ã«ã¯ã€ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£/ãƒ•ãƒ©ã‚°ãƒ¡ãƒ³ãƒˆã§ã€ViewModelã«ã‚ã‚‹LiveDataãƒ‡ãƒ¼ã‚¿ã‚’ã‚µãƒ–ã‚¹ã‚¯ãƒ©ã‚¤ãƒ–ã™ã‚‹ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚ã—ã‹ã—ã€é€šçŸ¥ã‚’è¡¨ç¤ºã—ãŸã‚Š...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>ViewModelã‹ã‚‰MVVMã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£/ãƒ•ãƒ©ã‚°ãƒ¡ãƒ³ãƒˆã¸ã®ã‚¤ãƒ™ãƒ³ãƒˆã®é€ä¿¡</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/homecredit/blog/477314/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä»Šæ—¥ã¯ã€MVVMã§ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£/ãƒ•ãƒ©ã‚°ãƒ¡ãƒ³ãƒˆã¨ViewModelã®é–“ã§ã‚¤ãƒ™ãƒ³ãƒˆã‚’äº¤æ›ã™ã‚‹æ–¹æ³•ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ViewModelã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹ã«ã¯ã€ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£/ãƒ•ãƒ©ã‚°ãƒ¡ãƒ³ãƒˆã§ã€ViewModelã«ã‚ã‚‹LiveDataãƒ‡ãƒ¼ã‚¿ã‚’ã‚µãƒ–ã‚¹ã‚¯ãƒ©ã‚¤ãƒ–ã™ã‚‹ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã—ã‹ã—ã€é€šçŸ¥ã‚’è¡¨ç¤ºã—ãŸã‚Šã€ãŸã¨ãˆã°ã€åˆ¥ã®ãƒ•ãƒ©ã‚°ãƒ¡ãƒ³ãƒˆã‚’é–‹ã„ãŸã‚Šã™ã‚‹ãªã©ã€å˜ä¸€ã®ï¼ˆã ã‘ã§ãªãï¼‰ã‚¤ãƒ™ãƒ³ãƒˆã‚’é€ä¿¡ã™ã‚‹ã«ã¯ã©ã†ã™ã‚Œã°ã‚ˆã„ã§ã—ã‚‡ã†ã‹ã€‚</font></font><br>
<br>
<img src="https://habrastorage.org/webt/td/ey/cp/tdeycpvhsyngrmfgzco-mpmjzta.jpeg"><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã¿ãªã•ã‚“ã€ã“ã‚“ã«ã¡ã¯ï¼</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç§ã®åå‰ã¯ã‚¢ãƒ¬ãƒƒã‚¯ã‚¹ã§ã™ã€‚ãƒ›ãƒ¼ãƒ ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆãƒãƒ³ã‚¯ã®Androidé–‹ç™ºè€…ã§ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®è¨˜äº‹ã§ã¯ã€ViewModelsã‹ã‚‰Viewsï¼ˆã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£/ãƒ•ãƒ©ã‚°ãƒ¡ãƒ³ãƒˆï¼‰ã¸ã®ã‚¤ãƒ™ãƒ³ãƒˆã®é€å—ä¿¡æ–¹æ³•ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç§ãŸã¡ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€ŒHome Credit Bankã‹ã‚‰ã®å‰²è³¦å•†å“ã€</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã§ã¯ã€ãƒ•ãƒ©ã‚°ãƒ¡ãƒ³ãƒˆã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ãŸã‚ã€ãã‚Œã‚‰ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ãŒã€ã™ã¹ã¦ãŒã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ã«ã‚‚é–¢é€£ã—ã¦ã„ã¾ã™ã€‚</font></font></i><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç§é”ä½•ãŒæ¬²ã—ã„ã®ï¼Ÿ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã„ãã¤ã‹ã®ViewModelã‚’å«ã‚€FragmentãŒã‚ã‚Šã€ãƒ‡ãƒ¼ã‚¿ã¯</font></font><code>DataBinding</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-th </font><font style="vertical-align: inherit;">ã«ã‚ˆã£ã¦ãƒã‚¤ãƒ³ãƒ‰ã•ã‚Œã¦ã„</font><font style="vertical-align: inherit;">ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã™ã¹ã¦ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ™ãƒ³ãƒˆã¯ViewModelã‚’å—ã‘å–ã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã‚¤ãƒ™ãƒ³ãƒˆãŒãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã®å ´åˆï¼šã‚ãªãŸã¯ã€åˆ¥ã®ãƒ•ãƒ©ã‚°ãƒ¡ãƒ³ãƒˆ/ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ã‚’é–‹ã„ã¦ç¤ºã•ãªã‘ã‚Œã°ãªã‚‰ãªã„</font></font><code>AlertDialog</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€</font></font><code>Snackbar</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãªã©ã®ã‚·ã‚¹ãƒ†ãƒ è¦æ±‚æ¨©é™ã€ãã—ã¦ã“ã®ã‚¤ãƒ™ãƒ³ãƒˆã¯ã€ãƒ•ãƒ©ã‚°ãƒ¡ãƒ³ãƒˆå†…ã§å®Ÿè¡Œã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</font></font><br>
<cut></cut><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãã—ã¦å®Ÿéš›ã€ä½•ãŒå•é¡Œãªã®ã§ã—ã‚‡ã†ã‹ï¼Ÿ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ“ãƒ¥ãƒ¼ã¨ViewModelã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã¯ç„¡é–¢ä¿‚ã§ã™ã€‚</font><font style="vertical-align: inherit;">ViewModelã«ã¯ã€ãƒ•ãƒ©ã‚°ãƒ¡ãƒ³ãƒˆã«ã¤ã„ã¦ä½•ã‚‚çŸ¥ã‚‰ãªã„ã¯ãšãªã®ã§ã€ãƒªã‚¹ãƒŠãƒ¼ã«ãƒã‚¤ãƒ³ãƒ‰ã™ã‚‹ã“ã¨ã¯ä¸å¯èƒ½ã§ã‚ã‚‹ã€ã¨ã‚ãªãŸãŒçŸ¥ã£ã¦ã„ã‚‹ã‚ˆã†ã«ã‚‚ãƒ¡ãƒ¢ãƒªãŒã€ŒãŒé–‹å§‹ã•ã‚Œã¾ã™ã€ãã‚Œä»¥å¤–ã®å ´åˆã¯ã€ãƒ•ãƒ©ã‚°ãƒ¡ãƒ³ãƒˆã¸ã®ãƒªãƒ³ã‚¯ã‚’å«ã‚ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å–œã³ã¾ã™</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fragmentsã¨ViewModelé–“ã®ç›¸äº’ä½œç”¨ã®æ¨™æº–çš„ãªã‚¢ãƒ—ãƒ­ãƒ¼ãƒã¯ã€ViewModelã«ã‚ã‚‹ã‚’ã‚µãƒ–ã‚¹ã‚¯ãƒ©ã‚¤ãƒ–ã™ã‚‹ã“ã¨</font></font><code>LiveData</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã§ã™ã€‚</font></font><code>LiveData</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã“ã®æ–¹æ³•ã§ã¯ã€ã‚¤ãƒ™ãƒ³ãƒˆãŒæ—¢ã«å®Œäº†ã—ã¦ã„ã‚‹ã‹ã©ã†ã‹ãŒè€ƒæ…®ã•ã‚Œãªã„ãŸã‚ã€</font><font style="vertical-align: inherit;">ã‚’ä»‹ã—ã¦ã‚¤ãƒ™ãƒ³ãƒˆã‚’ç›´æ¥é€ä¿¡ã™ã‚‹ã“ã¨ã¯</font><font style="vertical-align: inherit;">ã§ãã¾ã›ã‚“ã€‚</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å­˜åœ¨ã™ã‚‹ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ï¼š</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1. </font><b><font style="vertical-align: inherit;">é•·æ‰€ã‚’</font></b><font style="vertical-align: inherit;">ä½¿ç”¨</font><b><font style="vertical-align: inherit;">ï¼š</font></b><font style="vertical-align: inherit;">ã‚¤ãƒ™ãƒ³ãƒˆã¯ä¸€åº¦ã ã‘å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚</font><b><font style="vertical-align: inherit;">çŸ­æ‰€ï¼š</font></b><font style="vertical-align: inherit;"> 1ã¤ã®ã‚¤ãƒ™ãƒ³ãƒˆ</font><b><font style="vertical-align: inherit;">-1</font></b><font style="vertical-align: inherit;">ã¤</font><font style="vertical-align: inherit;">ã€‚å¤šæ•°ã®ã‚¤ãƒ™ãƒ³ãƒˆãŒã‚ã‚‹ã¨ã€Nå€‹ã®ã‚¤ãƒ™ãƒ³ãƒˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒViewModelã«è¡¨ç¤ºã•ã‚Œã€ãã‚Œãã‚ŒãŒãƒ•ãƒ©ã‚°ãƒ¡ãƒ³ãƒˆã§ã‚µãƒ–ã‚¹ã‚¯ãƒ©ã‚¤ãƒ–ã•ã‚Œã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">
2.è‰¯ã„</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ä¾‹</font></a><font style="vertical-align: inherit;">ã€‚</font><b><font style="vertical-align: inherit;">é•·æ‰€ï¼š</font></b><font style="vertical-align: inherit;"> 1ã¤ã®ã‚¤ãƒ™ãƒ³ãƒˆã‚‚1å›å®Ÿè¡Œã•ã‚Œã€viewModelã‹ã‚‰ãƒ•ãƒ©ã‚°ãƒ¡ãƒ³ãƒˆã«ãƒ‡ãƒ¼ã‚¿ã‚’è»¢é€ã§ãã¾ã™ã€‚</font><b><font style="vertical-align: inherit;">çŸ­æ‰€ï¼š</font></b><font style="vertical-align: inherit;">ã‚¤ãƒ™ãƒ³ãƒˆå†…ã®ãƒ‡ãƒ¼ã‚¿ãŒå¿…è¦ã§ã™ãŒã€ãƒ‡ãƒ¼ã‚¿ãªã—ã§ã‚¤ãƒ™ãƒ³ãƒˆã‚’å®Ÿè¡Œã™ã‚‹å¿…è¦ãŒã‚ã‚‹å ´åˆ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><code>SingleLiveEvent</code></a> <br>
<b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><code>SingleLiveEvent</code><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
<b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><code>(val content: T)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€åˆ¥ã®ã‚¯ãƒ©ã‚¹ã‚’ä½œæˆã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">1ã¤ã®ã‚¿ã‚¤ãƒ—ã®ã‚¤ãƒ™ãƒ³ãƒˆã‚’1å›å®Ÿè¡Œã™ã‚‹å•é¡Œã¯è§£æ±ºã—ã¾ã›ã‚“ï¼ˆã‚¤ãƒ™ãƒ³ãƒˆè‡ªä½“ã¯1å›å®Ÿè¡Œã•ã‚Œã¾ã™ãŒã€ã“ã®ã‚¿ã‚¤ãƒ—ã®ã‚¤ãƒ™ãƒ³ãƒˆã¯ã€ViewModelã‹ã‚‰å®Ÿè¡Œã—ãŸå›æ•°ã ã‘å®Ÿè¡Œã•ã‚Œã¾ã™ï¼‰ã€‚</font><font style="vertical-align: inherit;">ãŸã¨ãˆã°ã€Nãƒªã‚¯ã‚¨ã‚¹ãƒˆã¯éåŒæœŸã§ç§ãŸã¡ã‚’é›¢ã‚Œã¾ã™ãŒã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</font><font style="vertical-align: inherit;">å„ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¯ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼ã§è¿”ã•ã‚Œã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼ã«é–¢ã™ã‚‹Nå€‹ã®ã‚¤ãƒ™ãƒ³ãƒˆã®ãƒ•ãƒ©ã‚°ãƒ¡ãƒ³ãƒˆã‚’å–å¾—ã—ã¾ã™ã€‚ãƒ•ãƒ©ã‚°ãƒ¡ãƒ³ãƒˆã§ã¯Nå€‹ã®ã‚¢ãƒ©ãƒ¼ãƒˆãŒé–‹ãã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ãã®ã‚ˆã†ãªæ±ºå®šã‚’æ‰¿èªã—ã¾ã›ã‚“:)ã€‚</font><font style="vertical-align: inherit;">ã“ã®ã‚¨ãƒ©ãƒ¼ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ä¸€åº¦è¡¨ç¤ºã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã¤ã¾ã‚Šã€ã“ã®ã‚¿ã‚¤ãƒ—ã®ã‚¤ãƒ™ãƒ³ãƒˆã¯1å›å®Ÿè¡Œã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ±ºå®š</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åŸºæœ¬ã¨ã—ã¦</font></font><code>SingleLiveEvent</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†ã«é–¢ã™ã‚‹æƒ…å ±ã‚’ä¿å­˜</font><font style="vertical-align: inherit;">ã™ã‚‹ã¨ã„ã†è€ƒãˆã‚’æ¡ç”¨ã—ã¦ã„</font><font style="vertical-align: inherit;">ã¾ã™ã€‚</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¯èƒ½ãªã‚¤ãƒ™ãƒ³ãƒˆã‚¿ã‚¤ãƒ—ã‚’å®šç¾©ã™ã‚‹</font></font></h4><br>
<pre><code class="kotlin hljs"><span class="hljs-keyword">enum</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Type</span> </span>{<font></font>
    EXECUTE_WITHOUT_LIMITS, <span class="hljs-comment">//    â€“   ,            </span>
    EXECUTE_ONCE, <span class="hljs-comment">//     </span>
    WAIT_OBSERVER_IF_NEEDED,<span class="hljs-comment">//    ,     -      </span>
    WAIT_OBSERVER_IF_NEEDED_AND_EXECUTE_ONCE <span class="hljs-comment">//    ,     -          </span>
}</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åŸºæœ¬ã‚¤ãƒ™ãƒ³ãƒˆã‚¯ãƒ©ã‚¹ã‚’ä½œæˆã™ã‚‹- </font></font><code>NavigationEvent</code></h4><br>
<code>isHandled</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ã‚¤ãƒ™ãƒ³ãƒˆãŒå—ä¿¡ã•ã‚ŒãŸã‹ã©ã†ã‹ã‚’ç¤ºã—ã¾ã™ï¼ˆãƒ•ãƒ©ã‚°ãƒ¡ãƒ³ãƒˆã§ObserverãŒå—ä¿¡ã•ã‚ŒãŸå ´åˆã«å®Ÿè¡Œã•ã‚ŒãŸã¨è€ƒãˆã‚‰ã‚Œã¾ã™ï¼‰ã€‚</font></font><br>
<br>
<pre><code class="kotlin hljs"><span class="hljs-keyword">open</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">NavigationEvent</span></span>(<span class="hljs-keyword">var</span> isHandled: <span class="hljs-built_in">Boolean</span> = <span class="hljs-literal">false</span>, <span class="hljs-keyword">var</span> type: Events.Type)</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¨ãƒŸãƒƒã‚¿ãƒ¼ã‚¯ãƒ©ã‚¹ã‚’ä½œæˆã™ã‚‹- </font></font><code>Emitter</code></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚¤ãƒ™ãƒ³ãƒˆã‚¨ãƒŸãƒƒã‚¿ã‚¯ãƒ©ã‚¹ã¯</font></font><code>LiveData</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt; </font></font><code>NavigationEvent</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&gt;ã‚’</font><font style="vertical-align: inherit;">ç¶™æ‰¿ã—</font><font style="vertical-align: inherit;">ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã®ã‚¯ãƒ©ã‚¹ã¯ã€ViewModelã§ã‚¤ãƒ™ãƒ³ãƒˆã‚’ãƒ‡ã‚£ã‚¹ãƒ‘ãƒƒãƒã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Emitter</span> : <span class="hljs-type">MutableLiveData</span>&lt;<span class="hljs-type">NavigationEvent</span>&gt;</span>() {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> waitingEvents: ArrayList&lt;NavigationEvent&gt; = ArrayList()
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> isActive = <span class="hljs-literal">false</span><font></font>
<font></font>
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onInactive</span><span class="hljs-params">()</span></span> {<font></font>
        isActive = <span class="hljs-literal">false</span><font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onActive</span><span class="hljs-params">()</span></span> {<font></font>
        isActive = <span class="hljs-literal">true</span>
        <span class="hljs-keyword">val</span> postingEvents = ArrayList&lt;NavigationEvent&gt;()<font></font>
        waitingEvents<font></font>
            .forEach {<font></font>
                <span class="hljs-keyword">if</span> (hasObservers()) {
                    <span class="hljs-keyword">this</span>.value = it<font></font>
                    postingEvents.add(it)<font></font>
                }<font></font>
            }.also { waitingEvents.removeAll(postingEvents) }<font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">newEvent</span><span class="hljs-params">(event: <span class="hljs-type">NavigationEvent</span>, type: <span class="hljs-type">Type</span>)</span></span> {<font></font>
        event.type = type<font></font>
        <span class="hljs-keyword">this</span>.value = <span class="hljs-keyword">when</span> (type) {<font></font>
            Type.EXECUTE_WITHOUT_LIMITS,<font></font>
            Type.EXECUTE_ONCE -&gt; <span class="hljs-keyword">if</span> (hasObservers()) event <span class="hljs-keyword">else</span> <span class="hljs-literal">null</span><font></font>
<font></font>
            Type.WAIT_OBSERVER_IF_NEEDED,<font></font>
            Type.WAIT_OBSERVER_IF_NEEDED_AND_EXECUTE_ONCE -&gt; {<font></font>
                <span class="hljs-keyword">if</span> (hasObservers() &amp;&amp; isActive) event
                <span class="hljs-keyword">else</span> {<font></font>
                    waitingEvents.add(event)<font></font>
                    <span class="hljs-literal">null</span><font></font>
                }<font></font>
            }<font></font>
        }<font></font>
    }<font></font>
<font></font>
    <span class="hljs-comment">/** Clear All Waiting Events */</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">clearWaitingEvents</span><span class="hljs-params">()</span></span> =  waitingEvents.clear()<font></font>
}</code></pre><br>
<code>isActive</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font></font><code>Emitter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å°‘ãªãã¨ã‚‚1ã¤ã«</font><font style="vertical-align: inherit;">ç™»éŒ²ã•ã‚Œã¦ã„ã‚‹ã‹ã©ã†ã‹ã‚’ç†è§£ã™ã‚‹å¿…è¦ãŒã‚ã‚Š</font></font><code>Observer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãã—ã¦ã€ã‚µãƒ–ã‚¹ã‚¯ãƒ©ã‚¤ãƒãƒ¼ãŒç¾ã‚Œã€å½¼ã‚’å¾…ã£ã¦ã„ã‚‹ã‚¤ãƒ™ãƒ³ãƒˆãŒè“„ç©ã—ãŸå ´åˆã€ã“ã‚Œã‚‰ã®ã‚¤ãƒ™ãƒ³ãƒˆã‚’é€ä¿¡ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">é‡è¦ãªèª¬æ˜ï¼šã‚¤ãƒ™ãƒ³ãƒˆã¯ã‹ã‚‰</font></font><code>this.postValue(event)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã§ã¯ãªãã€setterã‹ã‚‰</font><font style="vertical-align: inherit;">é€ä¿¡ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™</font></font><code>this.value = event</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">ãã‚Œä»¥å¤–ã®å ´åˆã€ã‚µãƒ–ã‚¹ã‚¯ãƒ©ã‚¤ãƒãƒ¼ã¯ãƒªã‚¹ãƒˆã®æœ€å¾Œã®ã‚¤ãƒ™ãƒ³ãƒˆã®ã¿ã‚’å—ã‘å–ã‚Šã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ–°ã—ã„ã‚¤ãƒ™ãƒ³ãƒˆè‡ªä½“ã‚’é€ä¿¡ã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã¯ã€</font></font><code>newEvent(event, type)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2ã¤ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã‚’å—ã‘å–ã‚Šã¾ã™ã€‚å®Ÿéš›ã«ã¯ã€ã‚¤ãƒ™ãƒ³ãƒˆè‡ªä½“ã¨ã“ã®ã‚¤ãƒ™ãƒ³ãƒˆã®ã‚¿ã‚¤ãƒ—ã§ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã™ã¹ã¦ã®ã‚¿ã‚¤ãƒ—ã®ã‚¤ãƒ™ãƒ³ãƒˆï¼ˆãƒ­ãƒ³ã‚°ãƒãƒ¼ãƒ ï¼‰ã‚’è¦šãˆãªã„ã‚ˆã†ã«ã™ã‚‹ãŸã‚ã«ã€ã‚¤ãƒ™ãƒ³ãƒˆè‡ªä½“ã®ã¿ã‚’å—ã‘å…¥ã‚Œã‚‹å€‹åˆ¥ã®ãƒ‘ãƒ–ãƒªãƒƒã‚¯ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½œæˆã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Emitter</span> : <span class="hljs-type">MutableLiveData</span>&lt;<span class="hljs-type">NavigationEvent</span>&gt;</span>() {<font></font>
    â€¦<font></font>
<font></font>
    <span class="hljs-comment">/** Default: Emit Event for Execution */</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">emitAndExecute</span><span class="hljs-params">(event: <span class="hljs-type">NavigationEvent</span>)</span></span> = newEvent(event, Type.EXECUTE_WITHOUT_LIMITS)<font></font>
<font></font>
    <span class="hljs-comment">/** Emit Event for Execution Once */</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">emitAndExecuteOnce</span><span class="hljs-params">(event: <span class="hljs-type">NavigationEvent</span>)</span></span> = newEvent(event, Type.EXECUTE_ONCE)<font></font>
<font></font>
    <span class="hljs-comment">/** Wait Observer Available and Emit Event for Execution */</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">waitAndExecute</span><span class="hljs-params">(event: <span class="hljs-type">NavigationEvent</span>)</span></span> = newEvent(event, Type.WAIT_OBSERVER_IF_NEEDED)<font></font>
<font></font>
    <span class="hljs-comment">/** Wait Observer Available and Emit Event for Execution Once */</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">waitAndExecuteOnce</span><span class="hljs-params">(event: <span class="hljs-type">NavigationEvent</span>)</span></span> = newEvent(event, Type.WAIT_OBSERVER_IF_NEEDED_AND_EXECUTE_ONCE)<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ­£å¼ã«ã¯</font></font><code>Emitter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€ViewModelã«</font><font style="vertical-align: inherit;">ã‚µãƒ–ã‚¹ã‚¯ãƒ©ã‚¤ãƒ–ã—ã¦</font><font style="vertical-align: inherit;">ã€ãã®å‡¦ç†ã«é–¢ä¿‚ãªãï¼ˆã‚¤ãƒ™ãƒ³ãƒˆãŒã™ã§ã«å‡¦ç†ã•ã‚Œã¦ã„ã‚‹ã‹ã©ã†ã‹ã«é–¢ä¿‚ãªãï¼‰ã‚¤ãƒ™ãƒ³ãƒˆã‚’å—ã‘å–ã‚‹</font><font style="vertical-align: inherit;">ã“ã¨ãŒã§ãã¾ã™</font><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¤ãƒ™ãƒ³ãƒˆã‚ªãƒ–ã‚¶ãƒ¼ãƒãƒ¼ã‚¯ãƒ©ã‚¹ã‚’ä½œæˆã™ã‚‹- </font></font><code>EventObserver</code></h4><br>
<pre><code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">EventObserver</span></span>(<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> handlerBlock: (NavigationEvent) -&gt; <span class="hljs-built_in">Unit</span>) : Observer&lt;NavigationEvent&gt; {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> executedEvents: HashSet&lt;String&gt; = hashSetOf()<font></font>
    <font></font>
    <span class="hljs-comment">/** Clear All Executed Events */</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">clearExecutedEvents</span><span class="hljs-params">()</span></span> =  executedEvents.clear()<font></font>
    <font></font>
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onChanged</span><span class="hljs-params">(it: <span class="hljs-type">NavigationEvent</span>?)</span></span> {
        <span class="hljs-keyword">when</span> (it?.type) {<font></font>
            Type.EXECUTE_WITHOUT_LIMITS,<font></font>
            Type.WAIT_OBSERVER_IF_NEEDED -&gt; {<font></font>
                <span class="hljs-keyword">if</span> (!it.isHandled) {<font></font>
                    it.isHandled = <span class="hljs-literal">true</span><font></font>
                    it.apply(handlerBlock)<font></font>
                }<font></font>
            }<font></font>
            Type.EXECUTE_ONCE,<font></font>
            Type.WAIT_OBSERVER_IF_NEEDED_AND_EXECUTE_ONCE -&gt; {<font></font>
                <span class="hljs-keyword">if</span> (it.javaClass.simpleName !<span class="hljs-keyword">in</span> executedEvents) {
                    <span class="hljs-keyword">if</span> (!it.isHandled) {<font></font>
                        it.isHandled = <span class="hljs-literal">true</span><font></font>
                        executedEvents.add(it.javaClass.simpleName)<font></font>
                        it.apply(handlerBlock)<font></font>
                    }<font></font>
                }<font></font>
            }<font></font>
        }<font></font>
    }<font></font>
} </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®ã‚ªãƒ–ã‚¶ãƒ¼ãƒãƒ¼ã¯ã€é«˜æ¬¡é–¢æ•°ã‚’å…¥åŠ›ã¨ã—ã¦å—ã‘å…¥ã‚Œã¾ã™ã€‚ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†ã¯ãƒ•ãƒ©ã‚°ãƒ¡ãƒ³ãƒˆã§è¨˜è¿°ã•ã‚Œã¾ã™ï¼ˆä»¥ä¸‹ã®ä¾‹ï¼‰ã€‚</font><font style="vertical-align: inherit;">å®Œäº†ã—ãŸã‚¤ãƒ™ãƒ³ãƒˆï¼ˆä¸€åº¦å®Ÿè¡Œã™ã‚‹å¿…è¦ãŒã‚ã£ãŸã‚‚ã®ï¼‰ã‚’ã‚¯ãƒªã‚¢ã™ã‚‹</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ–¹æ³•</font></font><code>clearExecutedEvents()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚ç”»é¢ã®æ›´æ–°æ™‚ã«å¿…è¦ã§ã™ï¼ˆä¾‹ï¼šcï¼‰</font></font><code>swipeToRefresh()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å®Ÿéš›ã€</font></font><code>onChange()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã“ã®ã‚ªãƒ–ã‚¶ãƒ¼ãƒãƒ¼ãŒã‚µãƒ–ã‚¹ã‚¯ãƒ©ã‚¤ãƒ–ã™ã‚‹ã€æ–°ã—ã„ã‚¨ãƒŸãƒƒã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ãŒå—ä¿¡ã•ã‚ŒãŸã¨ãã«ç™ºç”Ÿã™ã‚‹</font><font style="vertical-align: inherit;">ãƒ¡ã‚¤ãƒ³ãƒ¡ã‚½ãƒƒãƒ‰</font><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚¤ãƒ™ãƒ³ãƒˆã®å®Ÿè¡Œã‚¿ã‚¤ãƒ—ãŒç„¡åˆ¶é™ã§ã‚ã‚‹å ´åˆã¯ã€ã‚¤ãƒ™ãƒ³ãƒˆãŒå®Ÿè¡Œã•ã‚ŒãŸã‹ã©ã†ã‹ã‚’ç¢ºèªã—ã¦å‡¦ç†ã—ã¾ã™ã€‚ã‚¤ãƒ™ãƒ³ãƒˆã‚’å®Ÿè¡Œã—ã€å—ä¿¡ã—ã¦å‡¦ç†ã—ãŸã“ã¨ã‚’ç¤ºã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="kotlin hljs"><span class="hljs-keyword">if</span> (!it.isHandled) {<font></font>
    it.isHandled = <span class="hljs-literal">true</span><font></font>
    it.apply(handlerBlock)<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚¤ãƒ™ãƒ³ãƒˆãŒ1å›å®Ÿè¡Œã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã‚¿ã‚¤ãƒ—ã®å ´åˆã¯ã€ã“ã®ã‚¤ãƒ™ãƒ³ãƒˆã®ã‚¯ãƒ©ã‚¹ãŒãƒãƒƒã‚·ãƒ¥ãƒ†ãƒ¼ãƒ–ãƒ«ã«ã‚ã‚‹ã‹ã©ã†ã‹ã‚’ç¢ºèªã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãã†ã§ãªã„å ´åˆã¯ã€ã‚¤ãƒ™ãƒ³ãƒˆã‚’å®Ÿè¡Œã—ã€ã“ã®ã‚¤ãƒ™ãƒ³ãƒˆã®ã‚¯ãƒ©ã‚¹ã‚’ãƒãƒƒã‚·ãƒ¥ãƒ†ãƒ¼ãƒ–ãƒ«ã«è¿½åŠ ã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="kotlin hljs"><span class="hljs-keyword">if</span> (it.javaClass.simpleName !<span class="hljs-keyword">in</span> executedEvents) {
    <span class="hljs-keyword">if</span> (!it.isHandled) {<font></font>
        it.isHandled = <span class="hljs-literal">true</span><font></font>
        executedEvents.add(it.javaClass.simpleName)<font></font>
        it.apply(handlerBlock)<font></font>
    }<font></font>
}</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã—ã‹ã—ã€ã‚¤ãƒ™ãƒ³ãƒˆå†…ã§ãƒ‡ãƒ¼ã‚¿ã‚’è»¢é€ã™ã‚‹æ–¹æ³•ã¯ï¼Ÿ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®ãŸã‚ã€</font></font><code>MyFragmentNavigation</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‹ã‚‰ç¶™æ‰¿ã•ã‚Œ</font></font><code>NavigationEvent()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãŸ</font><font style="vertical-align: inherit;">ã‚¯ãƒ©ã‚¹ã§æ§‹æˆã•ã‚Œã‚‹</font><font style="vertical-align: inherit;">ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ãŒä½œæˆã•ã‚Œã¾ã™</font><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">ã•ã¾ã–ã¾ãªã‚¯ãƒ©ã‚¹ãŒã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã‚’æ¸¡ã—ãŸå ´åˆã¨æ¸¡ã•ãªã„å ´åˆã§ä»¥ä¸‹ã«ä½œæˆã•ã‚Œã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">MyFragmentNavigation</span> </span>{
    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ShowCategoryList</span> : <span class="hljs-type">NavigationEvent</span></span>()
    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">OpenProduct</span></span>(<span class="hljs-keyword">val</span> productId: String, <span class="hljs-keyword">val</span> productName: String) : NavigationEvent()
    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PlayVideo</span></span>(<span class="hljs-keyword">val</span> url: String) : NavigationEvent()
    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ShowNetworkError</span> : <span class="hljs-type">NavigationEvent</span></span>()<font></font>
}</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å®Ÿéš›ã®ä»•çµ„ã¿</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ViewModelã‹ã‚‰ã‚¤ãƒ™ãƒ³ãƒˆã‚’é€ä¿¡ã™ã‚‹ï¼š</font></font><br>
<br>
<pre><code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyViewModel</span> : <span class="hljs-type">ViewModel</span></span>() {
    <span class="hljs-keyword">val</span> emitter = Events.Enitter()<font></font>
    <font></font>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">doOnShowCategoryListButtonClicked</span><span class="hljs-params">()</span></span> = emitter.emitAndExecute(MyNavigation.ShowCategoryList())<font></font>
    <font></font>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">doOnPlayClicked</span><span class="hljs-params">()</span></span> = emitter.waitAndExecuteOnce(MyNavigation.PlayVideo(url = <span class="hljs-string">"https://site.com/abc"</span>))<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">doOnProductClicked</span><span class="hljs-params">()</span></span> = emitter.emitAndExecute(MyNavigation.OpenProduct(<font></font>
            productId = <span class="hljs-string">"123"</span>, <font></font>
            productTitle = <span class="hljs-string">" Samsung"</span>)<font></font>
        )<font></font>
    <font></font>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">doOnNetworkError</span><span class="hljs-params">()</span></span> = emitter.emitAndExecuteOnce(MyNavigation.ShowNetworkError())<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">doOnSwipeRefresh</span><span class="hljs-params">()</span></span>{<font></font>
        emitter.clearWaitingEvents()<font></font>
        ..<span class="hljs-comment">//loadData()</span><font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ•ãƒ©ã‚°ãƒ¡ãƒ³ãƒˆã§ã‚¤ãƒ™ãƒ³ãƒˆã‚’å—ä¿¡ã™ã‚‹ï¼š</font></font><br>
<br>
<pre><code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyFragment</span> : <span class="hljs-type">Fragment</span></span>() {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> navigationEventsObserver = Events.EventObserver { event -&gt;
            <span class="hljs-keyword">when</span> (event) {
                <span class="hljs-keyword">is</span> MyFragmentNavigation.ShowCategoryList -&gt; ShowCategoryList()
                <span class="hljs-keyword">is</span> MyFragmentNavigation.PlayVideo -&gt; videoPlayerView.loadUrl(event.url)
                <span class="hljs-keyword">is</span> MyFragmentNavigation.OpenProduct -&gt; openProduct(id = event.productId, name = event.otherInfo)
                <span class="hljs-keyword">is</span> MyFragmentNavigation.ShowNetworkError -&gt; showNetworkErrorAlert()<font></font>
            }<font></font>
        }<font></font>
<font></font>
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onViewCreated</span><span class="hljs-params">(view: <span class="hljs-type">View</span>, savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
            <span class="hljs-keyword">super</span>.onViewCreated(view, savedInstanceState)
            <span class="hljs-comment">// Observer   ViewModels    </span><font></font>
            myViewModel.emitter.observe(viewLifecycleOwner, navigationEventsObserver)<font></font>
            myViewModelSecond.emitter.observe(viewLifecycleOwner, navigationEventsObserver)<font></font>
            myViewModelThird.emitter.observe(viewLifecycleOwner, navigationEventsObserver)<font></font>
        }<font></font>
    <font></font>
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">ShowCategoryList</span><span class="hljs-params">()</span></span>{<font></font>
        ...<font></font>
    }<font></font>
    <font></font>
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">openProduct</span><span class="hljs-params">(id: <span class="hljs-type">String</span>, name: <span class="hljs-type">String</span>)</span></span>{<font></font>
        ...<font></font>
    }<font></font>
    <font></font>
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">showNetworkErrorAlert</span><span class="hljs-params">()</span></span>{<font></font>
        ...<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æœ¬è³ªçš„ã«ã€Rx- </font></font><code>BehaviorSubjec</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">taã¨</font></font><code>EventBus</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-aã®</font><font style="vertical-align: inherit;">é¡ä¼¼ç‰©ã‚’å¾—</font><font style="vertical-align: inherit;">ã¾ã—</font></font><code>LiveData</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãŸã€‚ã“ã‚Œ</font></font><code>Emitter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¯ã€executor-ObserverãŒå‡ºç¾ã™ã‚‹å‰ã«ã‚¤ãƒ™ãƒ³ãƒˆã‚’åé›†ã§ãã€ObserverãŒã‚¤ãƒ™ãƒ³ãƒˆã®ã‚¿ã‚¤ãƒ—ã‚’ç›£è¦–ã—ã€å¿…è¦ã«å¿œã˜ã¦ãã‚Œã‚‰ã‚’1å›ã ã‘å‘¼ã³å‡ºã™</font><font style="vertical-align: inherit;">ã“ã¨</font><font style="vertical-align: inherit;">ãŒã§ãã‚‹ã“ã¨ã«</font><font style="vertical-align: inherit;">åŸºã¥ã„ã¦</font><font style="vertical-align: inherit;">ã„</font><font style="vertical-align: inherit;">ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚³ãƒ¡ãƒ³ãƒˆã§ã‚³ãƒ¡ãƒ³ãƒˆã‚’æ­“è¿ã—ã¾ã™ã€‚</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚½ãƒ¼ã‚¹ã¸ã®ãƒªãƒ³ã‚¯</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Home Credit Bankã‹ã‚‰ã®åˆ†å‰²æ‰•ã„ãƒ—ãƒ©ãƒ³</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja477300/index.html">å›½ã®æœ€é«˜ã®åœ°æ–¹ç©ºæ¸¯ã®å†…éƒ¨ï¼šã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚µãƒ¼ãƒ“ã‚¹</a></li>
<li><a href="../ja477306/index.html">ç”Ÿç”£ã‹ã‚‰çµ¦ä¸ã¾ã§ã€ç”Ÿç”£ã‹ã‚‰æ³¨æ–‡ã¾ã§ã€‚ã‚¹ãƒ†ãƒƒãƒ—ã®ã‚·ãƒ¼ã‚±ãƒ³ã‚¹ã¨å®Ÿéš›ã®å®Ÿè£…ã®ä¾‹</a></li>
<li><a href="../ja477308/index.html">ã‚¯ãƒ­ãƒ¼ãƒ³ãƒŠãƒ³ãƒ”ãƒ¼</a></li>
<li><a href="../ja477310/index.html">ä½ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·ã®WebRTCã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ç”¨ã®å‹•çš„CDN</a></li>
<li><a href="../ja477312/index.html">ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã§ã®ã‚²ãƒ¼ãƒ é–‹ç™º</a></li>
<li><a href="../ja477318/index.html">PHPãƒ€ã‚¤ã‚¸ã‚§ã‚¹ãƒˆNo. 168ï¼ˆ2019å¹´11æœˆ5ã€œ25æ—¥ï¼‰</a></li>
<li><a href="../ja477320/index.html">ç’°å¢ƒé¢ï¼šãƒ¢ãƒã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆãŒç’°å¢ƒã‚’ä¿è­·ã™ã‚‹ã®ã«ã©ã®ã‚ˆã†ã«å½¹ç«‹ã¤ã‹</a></li>
<li><a href="../ja477326/index.html">ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ’ãƒƒã‚­ãƒ¼</a></li>
<li><a href="../ja477328/index.html">PVS-Studioé™çš„ã‚³ãƒ¼ãƒ‰ã‚¢ãƒŠãƒ©ã‚¤ã‚¶ãƒ¼ã‚’é–‹ç™ºãƒ—ãƒ­ã‚»ã‚¹ã«å°å…¥ã™ã‚‹ç†ç”±</a></li>
<li><a href="../ja477332/index.html">Hackneyãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ï¼šOzonã€Yandex.Tolkiã€Netologiyaã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿ã‚’ãƒãƒ¼ã‚¯ã‚¢ãƒƒãƒ—ã™ã‚‹ãŸã‚ã®ãƒãƒƒã‚«ã‚½ãƒ³</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>