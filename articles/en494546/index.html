<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👰 👩‍👧 🧜🏻 Modeling the universe: celestial mechanics clearly 🕺🏾 🙅 👩🏻‍⚖️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Let's imagine that we need to launch a soccer ball into the orbit of the Earth. No rockets needed! Enough mountains, a height of 100 kilometers and re...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Modeling the universe: celestial mechanics clearly</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/494546/"><img src="https://habrastorage.org/webt/qr/sq/rt/qrsqrtig-au84ql57mqzfsvfz4c.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let's imagine that we need to launch a soccer ball into the orbit of the Earth. </font><font style="vertical-align: inherit;">No rockets needed! </font><font style="vertical-align: inherit;">Enough mountains, a height of 100 kilometers and remarkable strength. </font><font style="vertical-align: inherit;">But how much do you need to kick the ball so that it never returns to Earth? </font><font style="vertical-align: inherit;">How to send the ball on a journey to the stars, having only brute force and knowledge of celestial mechanics? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Today in the program:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Infinite possibilities of one formula</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">How to take energy from Jupiter</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Where do planets come from </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">How mathematics helped discover Neptune </font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fortunately, we live in the age of computer technology. </font><font style="vertical-align: inherit;">We do not need to climb a high mountain and kick the ball with all our strength, everything can be modeled! </font><font style="vertical-align: inherit;">Let's get started.</font></font><br>
<a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One formula</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The same one, known from the lessons of physics and astronomy: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/nd/zg/mj/ndzgmjxjc0wp_f9mesuk0msgmeo.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It shows how strongly the bodies will interact, depending on their masses, the distance between them and the gravitational constant G. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I wrote a program in which you can place balls interacting with each other by gravitational forces, with Each ball has its own mass, speed and coordinates. For clarity, the balls leave a trail. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let's put a large and massive blue ball (Earth) and a small red ball near it. Run the simulation: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/bd/c9/g7/bdc9g74bhavrklo1fn9nimxf1ha.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
He fell! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To enter orbit, speed is needed so that the ball falls and misses the earth all the time. But WHAT speed? And again, school knowledge comes to the rescue: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The minimum speed required to enter the Earth’s orbit is called</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">first cosmic speed</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For the Earth, it is 7.91 km / s. And for simulation it can be easily calculated: We </font></font><br>
<br>
<img src="https://habrastorage.org/webt/st/tt/sv/stttsvj38vrmajpgoau213lohts.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
disperse the ball and see the result: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/kw/wo/sx/kwwosxhyppp5qmnuhr0c5b-1pnw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Normal flight! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The ball describes a circle with the Earth in the center. What will happen if you give it a little more speed? Now </font></font><br>
<br>
<img src="https://habrastorage.org/webt/od/in/um/odinumvzny6ywgxhdsq16idxigo.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
let's </font><font style="vertical-align: inherit;">check: </font><font style="vertical-align: inherit;">Now the shape of the orbit is elliptical, we can distinguish 2 very important points - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">apogee</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">perigee</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apogee is the point at which the ball is as far from the Earth as possible. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Perigee - on the contrary, the point closest to the Earth. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
With an increase in the initial velocity, the perigee does not change, but the apogee is getting farther, and in the end has an infinite distance to the Earth. Here we come close to the concept</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">second space velocity</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">This is the speed that must be given to the ball so that it overcomes the gravity of the Earth and flies away to plow the expanses of the universe. </font><font style="vertical-align: inherit;">For land, it is 11.2 km / s. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
An interesting trick: if we multiply the first cosmic velocity by √2, we get the second cosmic velocity. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Multiplied. </font><font style="vertical-align: inherit;">Launched. </font><font style="vertical-align: inherit;">Received: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/n2/oa/p-/n2oap-wffotxeboxo2ezcu7acva.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
He flew away irrevocably! </font><font style="vertical-align: inherit;">By the way, now it has a parabolic orbit. </font><font style="vertical-align: inherit;">And if you run the ball even stronger, we get a hyperbola. </font><font style="vertical-align: inherit;">It turns out interestingly, mathematics haunts us everywhere. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In this case, the formula remains the same. </font><font style="vertical-align: inherit;">The circle turns into an ellipse, an ellipse into a parabola, and a parabola into a hyperbola due to the elongation of the orbit (increased </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">eccentricity</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ).</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">How to take energy from Jupiter?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let's expand our model, add the Sun, make the Earth revolve around it. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/8s/vc/vt/8svcvt5ubgpzguozlheom9o28uw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Imagine that the ball needs to be given such speed that it flies outside the solar system - the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">third cosmic speed</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . In the real world, it is 16.7 km / s. Unfortunately, this speed is too high, I'm afraid we will not have enough strength ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wait! But what if you take a little speed from some massive body, for example, Jupiter. We can fly up to something very massive and make a </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gravitational maneuver</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . When flying past Jupiter, the gravitational forces mutually attract the ball and the gas giant, but the mass of the ball is so small that it has almost no effect on the movement of Jupiter, and Jupiter itself accelerates a body passing by at high speeds. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Talk less, work more:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/au/02/1h/au021ho0j9l8arq8dn8qb4y9fj8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The moment of the gravitational maneuver - the ball flew up to Jupiter. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vl/zc/sr/vlzcsrmmjiydwlzbsteqebnjgck.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hooray! </font><font style="vertical-align: inherit;">We got a speed sufficient to exit the solar system, while not spending anything. </font><font style="vertical-align: inherit;">True, Jupiter began to move a little slower, but we definitely will not notice it. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
All spacecraft launched by man beyond the limits of the solar system (Voyagers 1 and 2, Pioneers 10 and 11, New Horizons) used just such a method for acceleration.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zoom in!</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I added the friction of the particles so that when they collide, they transfer part of the energy to each other. I also introduced the power of a normal reaction, now the particles respect their personal space, pushing others away from themselves. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We put the random generation of balls and give them a random direction and speed. Let them be, say, 100 pieces. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/wb/9a/nv/wb9anvwqfq8qfd_fvrvmycfrvvw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Complete chaos, each particle moves wherever it wants, but nevertheless, the gravitational forces take their toll and clusters of balls begin to form: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ms/bm/pb/msbmpbcbw6_rt83vav4sbxqnuey.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And after a while a large body is formed, consisting of 99 balls and one single ball orbiting around it: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ei/jl/nr/eijlnrddky0hdpzvviqlgwa7ibo.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
With another launch, the following : </font></font><br>
<br>
<img src="https://habrastorage.org/webt/et/-y/fu/et-yfufpsujieyl8t8s3leh7m9y.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Two massive bodies orbiting a common center of mass. If we imagine that these two objects are stars, then we get a </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">double star</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Interestingly, about half of the stars in our galaxy are binary. </font><font style="vertical-align: inherit;">If our Sun had a companion star, then in the sky we could observe the following picture:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/lc/jg/ne/lcjgneyjd4py4kgkzeoe_oskpns.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Where do planets come from?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The main reason for the appearance of rings is the destruction of satellites flying too close to the planet, or rather, crossing </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">the Roche limit</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">In this case, the tidal forces caused by the gravity of the planet become larger than the forces holding the satellite intact, and it breaks into many parts, leaving behind a ring that encircles the planet. </font><font style="vertical-align: inherit;">Let's simulate this situation: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/go/l9/db/gol9db01lgvjj-puclravymtvki.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The satellite is a little further than the Roche limit, it rotates around the planet in a stable circular orbit. </font><font style="vertical-align: inherit;">But what happens if you generate it a little closer to the planet?</font></font><br>
<br>
<img src="https://habrastorage.org/webt/fw/7z/ql/fw7zql9igjiz5qm11gap36ksetw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The satellite scattered into many small parts that formed rings around the planet. </font><font style="vertical-align: inherit;">So it is in the real world. </font><font style="vertical-align: inherit;">Triton (satellite of Neptune) is gradually approaching the planet, and in 2 billion years it will be torn, and Neptune will have more rings than Saturn.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">How was Neptune discovered and what does mathematics have to do with it?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Since we are talking about Neptune, let's talk about its discovery. </font><font style="vertical-align: inherit;">“A planet open at the tip of a pen” has a mass, which means it acts on objects around. </font><font style="vertical-align: inherit;">Astronomers of the 19th century noticed changes in the orbit of Uranus, its orbit was different from the calculated one, apparently, something affected it. </font><font style="vertical-align: inherit;">The orbit of Uranus had disturbances: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/jr/hs/zi/jrhszio9dizwno87wq-uuxjc2xw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This exaggerated model shows how an unknown body beyond Uranus affected its orbit. </font><font style="vertical-align: inherit;">Astronomers could only calculate the position of a secret planet and look through a telescope. </font><font style="vertical-align: inherit;">Indeed, the planet Neptune was exactly where it was predicted!</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ue/d7/vy/ued7vyhfbawgo-0nqa8swbmyeva.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusion</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Of course, this simulation does not generalize all the laws and phenomena occurring in space, for example, Einstein's theory of relativity is not taken into account here, since the speed of particles is far from the speed of light. </font><font style="vertical-align: inherit;">But there are many more interesting things that can be implemented in this simulation. </font><font style="vertical-align: inherit;">Try it yourself! </font><font style="vertical-align: inherit;">All you need is Python3 and the Pygame library.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Source</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment"># </span>
Track = <span class="hljs-literal">True</span><font></font>
<font></font>
<span class="hljs-comment"># </span>
Track_time = <span class="hljs-number">5</span><font></font>
<font></font>
<span class="hljs-comment"># </span>
G = <span class="hljs-number">5</span><font></font>
<font></font>
<span class="hljs-comment">#  (  -</span>
<span class="hljs-comment">#,  - )</span>
MagnConst = <span class="hljs-number">0</span><font></font>
<font></font>
<span class="hljs-comment"># </span>
count = <span class="hljs-number">100</span><font></font>
<font></font>
<span class="hljs-comment">#  </span>
kv = <span class="hljs-number">6</span><font></font>
<font></font>
<span class="hljs-comment">#  </span>
RANDOM = <span class="hljs-literal">True</span><font></font>
<font></font>
<span class="hljs-comment">#  </span>
r = <span class="hljs-number">3</span><font></font>
<font></font>
<span class="hljs-comment">#   </span>
WIN_WIDTH, WIN_HEIGHT = <span class="hljs-number">900</span>, <span class="hljs-number">650</span><font></font>
<font></font>
<font></font>
<span class="hljs-string">''',  ,   '''</span><font></font>
<font></font>
<span class="hljs-comment">#   </span>
zg = <span class="hljs-number">2</span><font></font>
<font></font>
<span class="hljs-comment">#   </span>
zm = <span class="hljs-number">2</span><font></font>
<font></font>
<span class="hljs-comment">#. ,    -   </span>
k = <span class="hljs-number">40</span><font></font>
<font></font>
<span class="hljs-comment"># </span>
antiG = <span class="hljs-number">0.1</span><font></font>
<font></font>
max_speed = <span class="hljs-number">3</span><font></font>
<font></font>
ResDist = <span class="hljs-number">1</span><font></font>
<font></font>
<span class="hljs-comment"># </span>
EarthG = <span class="hljs-number">0</span><font></font>
<font></font>
<span class="hljs-comment">#   </span>
Mirror = <span class="hljs-literal">True</span><font></font>
<font></font>
<span class="hljs-keyword">import</span> pygame
<span class="hljs-keyword">from</span> math <span class="hljs-keyword">import</span> hypot, ceil, sqrt
<span class="hljs-keyword">from</span> random <span class="hljs-keyword">import</span> randint, random<font></font>
<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">custom_pos</span>():</span>
    <span class="hljs-string">'''      '''</span>
    <span class="hljs-string">'''   RANDOM = FALSE'''</span>
    B.append(Ball(<span class="hljs-number">200</span>, <span class="hljs-number">300</span>, YELLOW, r = <span class="hljs-number">10</span>, mass = <span class="hljs-number">200</span>, vx = <span class="hljs-number">0.151</span>))    <span class="hljs-comment">#x, y, col, r, vx, vy, mass</span>
    B.append(Ball(<span class="hljs-number">200</span>, <span class="hljs-number">50</span>, GREEN, r = <span class="hljs-number">6</span>, mass = <span class="hljs-number">10</span>, vx = -(<span class="hljs-number">200</span> * G / <span class="hljs-number">250</span>)**<span class="hljs-number">0.5</span>))<font></font>
    <font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Ball</span>:</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, x, y, col, r = <span class="hljs-number">4</span>, vx = <span class="hljs-number">0</span>, vy = <span class="hljs-number">0</span>, mass = <span class="hljs-number">4</span></span>):</span><font></font>
        self.x = x<font></font>
        self.y = y<font></font>
        self.r = r<font></font>
        self.col = col<font></font>
        self.vx = vx<font></font>
        self.vy = vy<font></font>
        self.mass = mass<font></font>
        <font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">move</span>(<span class="hljs-params">self, Walls, WIN_WIDTH, WIN_HEIGHT, ofs_x, ofs_y</span>):</span>
        <span class="hljs-keyword">if</span> Walls:<font></font>
            x = self.x - ofs_x<font></font>
            y = self.y - ofs_y<font></font>
            <span class="hljs-keyword">if</span> x &lt;= <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> self.vx &lt; <span class="hljs-number">0</span>:
                <span class="hljs-keyword">if</span> Mirror:<font></font>
                    self.vx = -self.vx<font></font>
                <span class="hljs-keyword">else</span>:<font></font>
                    self.x += WIN_WIDTH<font></font>
                self.vx, self.vy = self.v_norm(self.vx, self.vy)<font></font>
            <span class="hljs-keyword">if</span> x &gt;= WIN_WIDTH <span class="hljs-keyword">and</span> self.vx &gt; <span class="hljs-number">0</span>:
                <span class="hljs-keyword">if</span> Mirror:<font></font>
                    self.vx = -self.vx<font></font>
                <span class="hljs-keyword">else</span>:<font></font>
                    self.x -= WIN_WIDTH<font></font>
                self.vx, self.vy = self.v_norm(self.vx, self.vy)<font></font>
            <span class="hljs-keyword">if</span> y &lt;= <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> self.vy &lt; <span class="hljs-number">0</span>:
                <span class="hljs-keyword">if</span> Mirror:<font></font>
                    self.vy = -self.vy<font></font>
                <span class="hljs-keyword">else</span>:<font></font>
                    self.y += WIN_HEIGHT<font></font>
                self.vx, self.vy = self.v_norm(self.vx, self.vy)<font></font>
            <span class="hljs-keyword">if</span> y &gt;= WIN_HEIGHT <span class="hljs-keyword">and</span> self.vy &gt; <span class="hljs-number">0</span>:
                <span class="hljs-keyword">if</span> Mirror:<font></font>
                    self.vy = -self.vy<font></font>
                <span class="hljs-keyword">else</span>:<font></font>
                    self.y -= WIN_HEIGHT<font></font>
                self.vx, self.vy = self.v_norm(self.vx, self.vy)<font></font>
            <font></font>
        self.x += self.vx<font></font>
        self.y += self.vy<font></font>
<font></font>
        <font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">force</span>(<span class="hljs-params">self, ind, selfind</span>):</span><font></font>
        ox = B[ind].x<font></font>
        oy = B[ind].y<font></font>
        m = B[ind].mass<font></font>
        <span class="hljs-keyword">if</span> m &lt; <span class="hljs-number">0.01</span> <span class="hljs-keyword">and</span> self.mass &lt; <span class="hljs-number">0.01</span>:
            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><font></font>
        r = B[ind].r<font></font>
        vx = B[ind].vx<font></font>
        vy = B[ind].vy<font></font>
        dist = hypot(self.x - ox, self.y - oy)<font></font>
        min_dist = (self.r + B[ind].r) * ResDist<font></font>
        f = <span class="hljs-number">0</span><font></font>
        m_relative = self.mass / B[ind].mass<font></font>
        <span class="hljs-keyword">if</span> dist &lt;= min_dist:<font></font>
            newVx = (vx * m + self.vx * self.mass) / (m + self.mass)<font></font>
            newVy = (vy * m + self.vy * self.mass) / (m + self.mass)<font></font>
            self.vx = (newVx + k * self.vx) / (k + <span class="hljs-number">1</span>)<font></font>
            B[ind].vx = (newVx + k * B[ind].vx) / (k + <span class="hljs-number">1</span>)<font></font>
            self.vy = (newVy + k * self.vy) / (k + <span class="hljs-number">1</span>)<font></font>
            B[ind].vy = (newVy + k * B[ind].vy) / (k + <span class="hljs-number">1</span>)<font></font>
            f -= antiG * min(abs(min_dist - dist), min(m, self.mass) * <span class="hljs-number">3</span>)
        <span class="hljs-keyword">else</span>:<font></font>
            f += min(self.mass * B[ind].mass * G  / (dist ** zg), G / <span class="hljs-number">10</span>)<font></font>
            mf = MagnConst * self.mass / (dist ** zm)<font></font>
            <span class="hljs-keyword">if</span> B[ind].col == B[selfind].col:<font></font>
                mf = - mf<font></font>
            f += mf<font></font>
        fx = f * ((ox - self.x) / dist)<font></font>
        fy = f * ((oy - self.y) / dist)<font></font>
        ax = fx / self.mass<font></font>
        ay = fy / self.mass<font></font>
        self.vx += ax<font></font>
        self.vy += ay + EarthG<font></font>
        B[ind].vx -= ax * m_relative<font></font>
        B[ind].vy -= ay * m_relative - EarthG<font></font>
<font></font>
<span class="hljs-meta">    @staticmethod</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">v_norm</span>(<span class="hljs-params">vx, vy</span>):</span><font></font>
        v = hypot(vx, vy)<font></font>
        <span class="hljs-keyword">if</span> v &gt; max_speed:<font></font>
            vx = max_speed * (vx / v)<font></font>
            vy = max_speed * (vy / v)<font></font>
        <span class="hljs-keyword">return</span> vx, vy<font></font>
<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Point</span>:</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, x, y, col, r = <span class="hljs-number">0</span>, max_age = Track_time</span>):</span>
        self.age = <span class="hljs-number">0</span><font></font>
        self.x = x<font></font>
        self.y = y<font></font>
        self.col = col<font></font>
        self.r = r<font></font>
        self.max_age = max_age<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">vis</span>(<span class="hljs-params">self, ofs_x, ofs_y</span>):</span><font></font>
        pygame.draw.circle(sc, self.col, (round(self.x - ofs_x),<font></font>
                                          round(self.y - ofs_y)), self.r, <span class="hljs-number">0</span>)<font></font>
        self.age += <span class="hljs-number">1</span>
        <span class="hljs-keyword">if</span> self.age &gt; self.max_age:<font></font>
            T.remove(self)<font></font>
        <font></font>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">rand</span>(<span class="hljs-params">count, WIN_WIDTH, WIN_HEIGHT</span>):</span>
    <span class="hljs-keyword">global</span> kv<font></font>
    B = []<font></font>
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(count):<font></font>
        m = r ** <span class="hljs-number">2</span>
        x = randint(<span class="hljs-number">0</span>, WIN_WIDTH) + random()<font></font>
        y = randint(<span class="hljs-number">0</span>, WIN_HEIGHT) + random()<font></font>
        vx = kv * randint(<span class="hljs-number">-100</span>, <span class="hljs-number">100</span>) / <span class="hljs-number">100</span>
        vy = kv * randint(<span class="hljs-number">-100</span>, <span class="hljs-number">100</span>) / <span class="hljs-number">100</span>
        col = Colors[randint(<span class="hljs-number">0</span>, len(Colors) - <span class="hljs-number">1</span>)]<font></font>
        B.append(Ball(x, y, col, r = r, vx = vx, vy = vy, mass = m))<font></font>
    <span class="hljs-keyword">return</span> B<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">createBall</span>(<span class="hljs-params">col, x, y, r = r, m = r</span>):</span><font></font>
    m = r<font></font>
    B.append(Ball(x, y, col))<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_offset</span>(<span class="hljs-params">B</span>):</span>
    sum_x, sum_y = <span class="hljs-number">0</span>, <span class="hljs-number">0</span>
    m = <span class="hljs-number">0</span>
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(len(B)):<font></font>
        sum_x += B[i].x * B[i].mass<font></font>
        sum_y += B[i].y * B[i].mass<font></font>
        m += B[i].mass<font></font>
    <span class="hljs-keyword">if</span> len(B) == <span class="hljs-number">0</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>, <span class="hljs-number">0</span>
    <span class="hljs-keyword">return</span> sum_x / m, sum_y / m<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">visBalls</span>(<span class="hljs-params">B</span>):</span>
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(len(B)):<font></font>
        pygame.draw.circle(sc, B[i].col, (round(B[i].x - ofs_x),<font></font>
                                          round(B[i].y - ofs_y)), B[i].r, <span class="hljs-number">0</span>)<font></font>
        T.append(Point(B[i].x, B[i].y, B[i].col))<font></font>
        <font></font>
FPS = <span class="hljs-number">60</span>
darkblue = (<span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">25</span>)<font></font>
ORANGE = (<span class="hljs-number">255</span>, <span class="hljs-number">200</span>, <span class="hljs-number">150</span>)<font></font>
RED = (<span class="hljs-number">255</span>, <span class="hljs-number">150</span>, <span class="hljs-number">150</span>)<font></font>
GREEN = (<span class="hljs-number">150</span>, <span class="hljs-number">255</span>, <span class="hljs-number">150</span>)<font></font>
BLUE = (<span class="hljs-number">150</span>, <span class="hljs-number">150</span>, <span class="hljs-number">255</span>)<font></font>
YELLOW = (<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0</span>)<font></font>
Colors = [RED, BLUE]<span class="hljs-comment">#, GREEN]#, ORANGE]                       </span><font></font>
pygame.init() <font></font>
clock = pygame.time.Clock()<font></font>
sc = pygame.display.set_mode((WIN_WIDTH, WIN_HEIGHT))<font></font>
sc.fill(darkblue)<font></font>
<font></font>
maxF = <span class="hljs-number">0.3</span>
minv = <span class="hljs-number">0.01</span>
Walls = <span class="hljs-literal">True</span>
Collisions = <span class="hljs-literal">True</span>
Same = <span class="hljs-literal">True</span>
Check = <span class="hljs-literal">False</span><font></font>
tt = []<font></font>
<font></font>
B = []<font></font>
<span class="hljs-keyword">if</span> RANDOM:<font></font>
    B = rand(count, WIN_WIDTH, WIN_HEIGHT)<font></font>
<span class="hljs-keyword">else</span>:<font></font>
    custom_pos()<font></font>
    <font></font>
Pause = <span class="hljs-literal">False</span>
delay = <span class="hljs-number">0</span><font></font>
<font></font>
<span class="hljs-keyword">if</span> Track:<font></font>
    T = []<font></font>
<span class="hljs-keyword">for</span> z <span class="hljs-keyword">in</span> range(<span class="hljs-number">100000</span>):<font></font>
    sc = pygame.display.set_mode((WIN_WIDTH, WIN_HEIGHT))<font></font>
    sc.fill(darkblue)<font></font>
    ofs_x, ofs_y = get_offset(B)<font></font>
    ofs_x -= WIN_WIDTH // <span class="hljs-number">2</span>
    ofs_y -= WIN_HEIGHT // <span class="hljs-number">2</span>
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> pygame.event.get():
        <span class="hljs-keyword">if</span> i.type == pygame.QUIT:<font></font>
            pygame.quit()<font></font>
            quit()<font></font>
        <span class="hljs-keyword">if</span> i.type == pygame.KEYDOWN:
            <span class="hljs-keyword">if</span> i.key == pygame.K_SPACE:<font></font>
                Pause = <span class="hljs-keyword">not</span> Pause
            <span class="hljs-keyword">elif</span> i.key == pygame.K_w:<font></font>
                WIN_HEIGHT += <span class="hljs-number">10</span>
                WIN_WIDTH += <span class="hljs-number">10</span>
            <span class="hljs-keyword">elif</span> i.key == pygame.K_s:<font></font>
                WIN_HEIGHT -= <span class="hljs-number">10</span>
                WIN_WIDTH -= <span class="hljs-number">10</span><font></font>
                <font></font>
    pressed = pygame.mouse.get_pressed()<font></font>
    pos = pygame.mouse.get_pos()<font></font>
    x = pos[<span class="hljs-number">0</span>]<font></font>
    y = pos[<span class="hljs-number">1</span>]
    <span class="hljs-keyword">if</span> pressed[<span class="hljs-number">0</span>] <span class="hljs-keyword">and</span> delay &lt; <span class="hljs-number">0</span>:<font></font>
        delay = <span class="hljs-number">20</span><font></font>
        createBall(RED, x + ofs_x, y + ofs_y)<font></font>
    <span class="hljs-keyword">if</span> pressed[<span class="hljs-number">2</span>] <span class="hljs-keyword">and</span> delay &lt; <span class="hljs-number">0</span>:<font></font>
        delay = <span class="hljs-number">20</span><font></font>
        createBall(BLUE, x + ofs_x, y + ofs_y )<font></font>
    delay -= <span class="hljs-number">1</span><font></font>
    <font></font>
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> Pause:
        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(len(B)):
            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> range(i + <span class="hljs-number">1</span>, len(B)):<font></font>
                B[i].force(j, i)<font></font>
        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(len(B)):<font></font>
            B[i].move(Walls, WIN_WIDTH, WIN_HEIGHT, ofs_x, ofs_y)<font></font>
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(len(T)):
        <span class="hljs-keyword">try</span>:<font></font>
            T[i].vis(ofs_x, ofs_y)<font></font>
        <span class="hljs-keyword">except</span> IndexError:
            <span class="hljs-keyword">pass</span><font></font>
    visBalls(B)<font></font>
    <font></font>
    pygame.display.update()<font></font>
    clock.tick(FPS)<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I hope this article has been informative for you. </font><font style="vertical-align: inherit;">Thank you for the attention!</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en494534/index.html">No masks, but you hold 1/2</a></li>
<li><a href="../en494536/index.html">Epistemic standards of inventions</a></li>
<li><a href="../en494538/index.html">Twitch streamers earn thousands of dollars in a dream</a></li>
<li><a href="../en494542/index.html">Rainbow proof demonstrates the presence of standard components in graphs</a></li>
<li><a href="../en494544/index.html">Parsing photos from cian.ru using Selenium</a></li>
<li><a href="../en494548/index.html">Karasic programming language</a></li>
<li><a href="../en494552/index.html">About bad employers good employees: passions after the week off</a></li>
<li><a href="../en494554/index.html">SDL 2.0 Lesson Cycle: Lesson 6 - Downloading Fonts with SDL_ttf</a></li>
<li><a href="../en494560/index.html">Accurate driving: how and why automotive innovations provoke accidents - study</a></li>
<li><a href="../en494562/index.html">How to correctly transfer employees to a remote control? Legal Lifehacks</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>