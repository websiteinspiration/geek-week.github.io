<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèº‚Äç‚öïÔ∏è üç¢ üõê Simuladores de sistemas de computadores - eles parecem realidade üë∑üèº üßìüèæ ‚¨úÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Em uma linguagem simples e acess√≠vel sobre termos b√°sicos do campo de simuladores, bem como tipos e n√≠veis de detalhe de modelos. Material para famili...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Simuladores de sistemas de computadores - eles parecem realidade</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/auriga/blog/504086/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Em uma linguagem simples e acess√≠vel sobre termos b√°sicos do campo de simuladores, bem como tipos e n√≠veis de detalhe de modelos. </font><font style="vertical-align: inherit;">Material para familiariza√ß√£o f√°cil e r√°pida com esta √°rea.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/n6/ra/jd/n6rajd4edfjmszumvujqoaqtxt8.jpeg" alt="imagem"><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se me perguntassem sobre a simula√ß√£o h√° algum tempo, a primeira coisa que me ocorreria seria meu filho, que fala sobre seu est√¥mago doente na v√©spera do controle da escola. No entanto, nos √∫ltimos dez anos, tenho trabalhado com simuladores de v√°rios sistemas de computadores, de telefones a servidores baseados em microprocessadores, SOCs (System-On-Chip) e chipsets de um dos maiores fabricantes (infelizmente, o nome est√° sob o NDA), e minha ideia de A simula√ß√£o mudou. Mas as primeiras coisas primeiro.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tenho certeza de que muitos de voc√™s j√° se depararam com simuladores, que costumam ser chamados de m√°quinas virtuais, hipervisores. </font><font style="vertical-align: inherit;">Algu√©m instala o Parallels Studio em seu Mac para executar o Windows no MacOS, algu√©m usa um produto do VmWare - Workstation para ter outro sistema operacional (SO) em execu√ß√£o no interior j√° instalado. </font><font style="vertical-align: inherit;">Quem conhece o Linux prefere o KVM e o QEMU. </font><font style="vertical-align: inherit;">Tamb√©m popular entre as pessoas √© o VirtualBox. </font><font style="vertical-align: inherit;">As pessoas que desenvolvem profissionalmente hardware baseado em FPGA (circuitos integrados de l√≥gica program√°vel) conhecem o VCS da Synopsys e da Mentor Graphics Questa. </font><font style="vertical-align: inherit;">E, no entanto, isso √© apenas uma pequena parte do que pode ser chamado de simuladores.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O que √© um simulador? </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um simulador √© um modelo, geralmente um software, dispositivo real. </font><font style="vertical-align: inherit;">Por conseguinte, a simula√ß√£o √© um processo desse modelo que repete a opera√ß√£o do dispositivo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em princ√≠pio, voc√™ pode criar um modelo de qualquer dispositivo, mas os mais comuns s√£o simuladores de dispositivos de microprocessador, ou seja, dispositivos cujo componente central √© um microprocessador, e o restante da l√≥gica j√° est√° sendo constru√≠do em torno dele. </font><font style="vertical-align: inherit;">Um dos principais usos do simulador √© o lan√ßamento de programas projetados para esse microprocessador. </font><font style="vertical-align: inherit;">Ao mesmo tempo, o uso de um dispositivo real √© dif√≠cil por um motivo ou outro, por exemplo, ele pode simplesmente ainda n√£o existir, se estivermos falando sobre modelar a futura gera√ß√£o de microprocessadores.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Airbnb em simula√ß√£o - convidado e anfitri√£o</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O c√≥digo executado no simulador √© chamado de "c√≥digo convidado", pode ser um "programa convidado" ou todo o "sistema operacional convidado". </font><font style="vertical-align: inherit;">O pr√≥prio sistema simulado √© simplesmente chamado de "convidado". </font><font style="vertical-align: inherit;">Por sua vez, o sistema, o computador em que o simulador √© executado, √© chamado de "host" (host em ingl√™s) e o sistema operacional em execu√ß√£o no host em que o simulador √© executado √© chamado de "SO do host".</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/0z/u-/6c/0zu-6c26huucbitovqa4ln8pjcc.jpeg" alt="imagem"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Assim, podemos dizer que um simulador que implementa um determinado conjunto de instru√ß√µes do sistema convidado as simula usando as ferramentas do sistema host dispon√≠veis.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Simula√ß√£o e emula√ß√£o - qual o nome correto?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O modelo pode repetir o dispositivo com v√°rios graus de precis√£o e detalhes. </font><font style="vertical-align: inherit;">Freq√ºentemente, essa √© uma simula√ß√£o apenas do comportamento externo do sistema dispon√≠vel para o c√≥digo do programa. </font><font style="vertical-align: inherit;">O c√≥digo n√£o se importa com o modo como exatamente essa ou aquela instru√ß√£o do processador √© implementada - o principal √© que funciona. </font><font style="vertical-align: inherit;">Esta vers√£o da simula√ß√£o √© comum, n√£o √© dif√≠cil de desenvolver e √© bastante r√°pida, n√£o diminui a velocidade mesmo em computadores de usu√°rios comuns.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No entanto, isso n√£o √© suficiente se queremos saber, por exemplo, quanto tempo o programa ser√° executado em hardware real. </font><font style="vertical-align: inherit;">Isso requer modelagem n√£o apenas do comportamento externo, mas tamb√©m uma repeti√ß√£o da estrutura interna e l√≥gica do trabalho. </font><font style="vertical-align: inherit;">Isso tamb√©m pode ser feito com v√°rios graus de detalhes e precis√£o. </font><font style="vertical-align: inherit;">√â mais correto chamar esses modelos de emuladores, que realmente emulam o dispositivo, e n√£o "simular" os resultados.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Criar emuladores √© muito mais complicado devido √† maior quantidade de funcionalidades que devem ser implementadas no modelo. </font><font style="vertical-align: inherit;">Eles tamb√©m funcionam muito mais lentamente em compara√ß√£o com simuladores do comportamento externo do dispositivo. </font><font style="vertical-align: inherit;">Com os emuladores, n√£o estamos falando de iniciar o Windows - pode levar anos. </font><font style="vertical-align: inherit;">Ningu√©m est√° envolvido na cria√ß√£o de um emulador de software de toda a plataforma - √© muito longo e caro. </font><font style="vertical-align: inherit;">Em vez disso, os componentes individuais do sistema s√£o emulados, como o mesmo processador central, e apenas parte do processo de simula√ß√£o √© iniciada nele. </font><font style="vertical-align: inherit;">V√°rios esquemas h√≠bridos s√£o poss√≠veis, quando parte do simulador √© um modelo de alto n√≠vel, parte √© um modelo de baixo n√≠vel, parte √© de um FPGA e parte √© realmente um peda√ßo de ferro real.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/lt/j3/yd/ltj3ydvpjsh9jgsczxuqi-cu2x0.jpeg" alt="imagem"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4 n√≠veis de detalhe da simula√ß√£o</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como escrevi acima, a op√ß√£o mais comum √© a simula√ß√£o no n√≠vel das instru√ß√µes do processador, o chamado ISA (Instruction Set Architecture) ou, mais precisamente, o resultado de sua execu√ß√£o, ou seja, sem emular toda a l√≥gica interna de como isso acontece em um processador real e sem levar em conta o tempo de execu√ß√£o de v√°rias instru√ß√µes. Tais simuladores tamb√©m s√£o chamados funcionais. √â assim que o VirtualBox, a VMware Workstation, a Wind River Simics, a KVM e a QEMU funcionam. Isso permite que voc√™, convenientemente, sem a√ß√µes adicionais desnecess√°rias, execute programas projetados para o dispositivo simulado. Em outras palavras, nem a recompila√ß√£o nem quaisquer outras manipula√ß√µes com programas em execu√ß√£o s√£o necess√°rias. Nesses casos, eles dizem que √© poss√≠vel executar c√≥digo bin√°rio n√£o modificado.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se falamos de um n√≠vel mais alto de abstra√ß√£o, essa ser√° a implementa√ß√£o de uma certa ABI (Application Binary Interface). Em poucas palavras, a ABI descreve uma interface bin√°ria para a intera√ß√£o de dois programas - geralmente um programa de usu√°rio e uma biblioteca ou sistema operacional. A ABI cobre conven√ß√µes de chamada (como passar par√¢metros e retornar valores), tamanhos de tipos de dados, fazer chamadas do sistema. Como funciona? Por exemplo, se um programa escrito para Linux precisar criar um encadeamento adicional (a partir do encadeamento em ingl√™s) para execu√ß√£o, a fun√ß√£o pthread_create () ser√° chamada. Mas e se voc√™ criar uma biblioteca com essa fun√ß√£o no Windows e implementar os mecanismos necess√°rios para vincular o aplicativo e a biblioteca (vincula√ß√£o din√¢mica)? Nesse caso, ser√° poss√≠vel executar aplicativos Linux no Windows. O Windows "simula" o Linux.Isso √© exatamente o que foi feito no subsistema Windows para Linux no Windows 10, que permite executar aplicativos Linux bin√°rios n√£o modificados no Windows.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora vamos ver como s√£o os n√≠veis detalhados e de n√≠vel inferior da simula√ß√£o. Esse ser√° o n√≠vel da microarquitetura em que algoritmos internos reais e blocos de processador s√£o simulados, como um decodificador de instru√ß√µes, filas, uma unidade de processamento extraordin√°ria, um preditor de transi√ß√£o, um cache, um planejador e os pr√≥prios dispositivos de contagem. Essa modelagem nos permite analisar a velocidade real da execu√ß√£o do programa e, por exemplo, otimiz√°-los para arquiteturas existentes. E no caso de simular prot√≥tipos de microprocessadores futuros, √© poss√≠vel prever e avaliar o desempenho desses dispositivos.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Abaixo do n√≠vel da simula√ß√£o microarquitet√¥nica, est√° o n√≠vel de emula√ß√£o dos elementos l√≥gicos dos quais os chips modernos s√£o feitos. Esses emuladores s√£o software e hardware usando FPGAs. A l√≥gica do FPGA √© descrita usando RTL (Register Transfer Level) nos idiomas Verilog, VHDL, etc. Ap√≥s a compila√ß√£o, √© obtida uma imagem (fluxo de bits), que √© ent√£o lan√ßada no FPGA. E para isso, n√£o √© necess√°rio usar um ferro de soldar e entender a engenharia el√©trica. A placa est√° conectada a um computador, por exemplo, via interface USB ou JTAG, e um software especial do fabricante da placa FPGA realiza a grava√ß√£o. O custo dessas placas come√ßa entre dez d√≥lares, para as op√ß√µes mais simples, e milh√µes de d√≥lares para placas FPGA grandes, do tamanho de um gabinete usado em grandes empresas fabricantes de chips.Nessas empresas, a simula√ß√£o de FPGA √© o est√°gio final antes da RTL ser colocada em produ√ß√£o.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se estamos falando de dispositivos simples, e tendo a imagem FPGA em m√£os, voc√™ pode entrar em contato com empresas especializadas que far√£o um dispositivo real (n√£o FPGA) com l√≥gica programada. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A figura abaixo mostra os n√≠veis de simula√ß√£o descritos.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jr/zp/yb/jrzpybtaxtzvnzr9rxixvbkifqo.jpeg" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al√©m desses n√≠veis de simula√ß√£o, eu tamb√©m tive que lidar com simuladores h√≠bridos. De fato, eles s√£o simuladores conectados entre si, modelando diferentes partes do sistema em diferentes n√≠veis. Por exemplo, voc√™ precisa analisar a largura de banda de uma nova placa de rede que funcione em conjunto com o driver que est√° sendo desenvolvido para um sistema operacional espec√≠fico. Esse dispositivo de rede, assim como v√°rios dispositivos relacionados, pode ser implementado primeiro no n√≠vel microarquitetural para an√°lise preliminar e, em seguida, no FPGA, no n√≠vel dos elementos l√≥gicos, para verifica√ß√µes finais. Ao mesmo tempo, o restante do sistema, que est√° envolvido apenas parcialmente, √© implementado no n√≠vel da instru√ß√£o. Voc√™ n√£o pode ficar sem ele, pois √© necess√°rio, por exemplo, carregar o sistema operacional e n√£o faz sentido implement√°-lo em um n√≠vel mais baixo e mais complexo.</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ent√£o, que tal comparar simuladores e realidade? </font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como agora est√° claro, n√£o h√° tarefa de tornar este ou aquele simulador o mais semelhante poss√≠vel √† realidade. </font><font style="vertical-align: inherit;">H√° uma tarefa colocada pelos neg√≥cios, e a simula√ß√£o √© realizada com o grau de "semelhan√ßa" com a realidade, que √© minimamente suficiente para resolver esse problema, sem desperdi√ßar tempo e dinheiro extra. </font><font style="vertical-align: inherit;">Em um caso, pode ser uma biblioteca simples que implementa a interface bin√°ria necess√°ria (ABI) e, no outro, um simulador microarquitet√¥nico detalhado n√£o pode ser dispensado. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esta √© a informa√ß√£o mais b√°sica sobre o que s√£o simuladores e o que s√£o. </font><font style="vertical-align: inherit;">No pr√≥ximo artigo, descreverei os detalhes da implementa√ß√£o de simuladores de plataforma completa, modelos de batida e trabalho com trilhas.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt504072/index.html">Contrato ideal do usu√°rio: como minimizar os riscos para os desenvolvedores</a></li>
<li><a href="../pt504074/index.html">Glass Nightmare: Limpando a heran√ßa nuclear da Guerra Fria de Hanford</a></li>
<li><a href="../pt504080/index.html">Como os funcion√°rios da Apple e do Google ajudam os funcion√°rios da √°rea de sa√∫de a acompanhar o coronav√≠rus juntos</a></li>
<li><a href="../pt504082/index.html">O que faremos com os 1,2 GHz adicionais?</a></li>
<li><a href="../pt504084/index.html">Explore o bug do iOS com o Hopper</a></li>
<li><a href="../pt504088/index.html">Registro Avan√ßado do Windows. Procurando por mimikatz</a></li>
<li><a href="../pt504092/index.html">Uma primeira olhada nos registros e tuplas JavaScript</a></li>
<li><a href="../pt504096/index.html">Maneira ideal para iniciantes em C ++ / Qt</a></li>
<li><a href="../pt504098/index.html">V√≠deo Dipfake um quadro</a></li>
<li><a href="../pt504102/index.html">Introdu√ß√£o ao Python Functools</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>