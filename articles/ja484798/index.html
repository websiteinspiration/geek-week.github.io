<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏾‍🤝‍👨🏽 🖥️ 🚴🏻 なぜ高速ソートが本当に遅いのですか？新しい配列ソート方法 👩🏾‍🤝‍👩🏻 🔜 ☝🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="多くのプログラマーは、クイックソートがすべての中で最速のアルゴリズムであると考えています。これは部分的に本当です。しかし、サポートエレメントが正しく選択されている場合にのみ、それは本当にうまく機能します（複雑度はO（n log n）です）。そうでなければ、漸近的な振る舞いは、バブルの振る舞いとほぼ同...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>なぜ高速ソートが本当に遅いのですか？新しい配列ソート方法</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/484798/"><p><img align="right" src="https://habrastorage.org/webt/-7/ej/om/-7ejomnvmra_demx9nkes8yinge.jpeg" width="320" alt="画像"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">多くのプログラマーは、</font></font><i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クイックソート</font></font></a></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">がすべての中で最速のアルゴリズムである</font><font style="vertical-align: inherit;">と考えてい</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">これは部分的に本当です。</font><font style="vertical-align: inherit;">しかし、サポートエレメントが正しく選択されている場合にのみ、それは本当にうまく機能します（</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">複雑度は</font></font><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O（n log n）です</font></font></nobr></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">そうでなければ、漸近的な振る舞いは、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">バブルの</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">振る舞いとほぼ同じになります</font><font style="vertical-align: inherit;">（</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">つまり、O（n </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font></font><br clear="left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同時に、配列がすでにソートされている場合、アルゴリズムはO（n log n）より速く動作しません。</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これに基づいて、配列をソートするための独自のアルゴリズムを作成して、quick_sortよりも機能するようにしました。</font><font style="vertical-align: inherit;">そして、配列がすでにソートされている場合は、多くのアルゴリズムの場合のように、それを何度も実行しないでください。</font></font></p><blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「夕方でした、何もありませんでした」とセルゲイ・ミハルコフ。</font></font></blockquote><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要件： </font></font></h2><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ベストケース</font></font><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O（n）</font></font></nobr></li>
<li><font style="vertical-align: inherit;"><nobr><font style="vertical-align: inherit;">O</font></nobr><font style="vertical-align: inherit;">の平均ケース</font></font><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（n log n）</font></font></nobr></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最悪のケース</font></font><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O（n log n）</font></font></nobr></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クイックソーティングより平均的に速い</font></font></li>
</ol><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">このトピックを理解するには、次のことを知っておく必要があります。</font></font></b><div class="spoiler_text"><ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> </a></li>
</ul></div></div><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">それでは、すべてを順番に取得しましょう</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">私たちのアルゴリズムが常に迅速に機能するためには、平均的なケースでは、漸近的な振る舞いが少なくともO（n log n）、せいぜいO（n）であることが必要です。</font><font style="vertical-align: inherit;">私たちは皆、よくても、挿入によるソートは1つのパスで機​​能することを知っています。</font><font style="vertical-align: inherit;">しかし、最悪の場合、彼女はその中に要素がある限り何回もアレイをドライブする必要があります。</font></font></p><br>
<a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">予備情報</font></font></h3><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2つの配列をマージする機能</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int</span>* <span class="hljs-title">glue</span><span class="hljs-params">(<span class="hljs-keyword">int</span>* a, <span class="hljs-keyword">int</span> lenA, <span class="hljs-keyword">int</span>* b, <span class="hljs-keyword">int</span> lenB)</span> </span>{
	<span class="hljs-keyword">int</span> lenC = lenA + lenB;
	<span class="hljs-keyword">int</span>* c = <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[lenC]; <span class="hljs-comment">//  </span>
	<span class="hljs-keyword">int</span> indx_a = <span class="hljs-number">0</span>;
	<span class="hljs-keyword">int</span> indx_b = <span class="hljs-number">0</span>;
	<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>;<font></font>
			<font></font>
	<span class="hljs-keyword">for</span> (; i &lt; lenC; ++i) {
		<span class="hljs-keyword">if</span> (indx_a &lt; lenA) {
			<span class="hljs-keyword">if</span> (indx_b &lt; lenB) { <span class="hljs-comment">//    </span><font></font>
				c[i] = (a[indx_a] &lt; b[indx_b]) ? <font></font>
					a[indx_a++] : <font></font>
					b[indx_b++];<font></font>
				<span class="hljs-keyword">continue</span>;<font></font>
			} <span class="hljs-comment">//     </span>
			<span class="hljs-keyword">while</span> (indx_a &lt; lenA)<font></font>
				c[i++] = a[indx_a++];<font></font>
		}<font></font>
		<span class="hljs-keyword">else</span> <span class="hljs-comment">//     </span>
			<span class="hljs-keyword">while</span> (indx_b &lt; lenB)<font></font>
				c[i++] = b[indx_b++];<font></font>
		<span class="hljs-keyword">break</span>;<font></font>
	}<font></font>
			<font></font>
	<span class="hljs-keyword">return</span> c;<font></font>
}<font></font>
</code></pre><br>
</div></div><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2つの配列をマージする関数は、結果を指定された配列に保存します。</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">glueDelete</span><span class="hljs-params">(<span class="hljs-keyword">int</span>*&amp; arr, <span class="hljs-keyword">int</span>*&amp; a, <span class="hljs-keyword">int</span> lenA, <span class="hljs-keyword">int</span>*&amp; b, <span class="hljs-keyword">int</span> lenB)</span> </span>{
	<span class="hljs-keyword">if</span> (lenA == <span class="hljs-number">0</span>) { <span class="hljs-comment">//   </span>
		<span class="hljs-keyword">delete</span>[] a; <span class="hljs-comment">//    </span>
		arr = b; <span class="hljs-comment">//    </span>
		<span class="hljs-keyword">return</span>;<font></font>
	}<font></font>
	<span class="hljs-keyword">if</span> (lenB == <span class="hljs-number">0</span>) { <span class="hljs-comment">//   </span>
		<span class="hljs-keyword">delete</span>[] b; <span class="hljs-comment">//    </span>
		arr = a; <span class="hljs-comment">//    </span>
		<span class="hljs-keyword">return</span>;<font></font>
	}<font></font>
<font></font>
	<span class="hljs-keyword">int</span> *copy = glue(a, lenA, b, lenB); <span class="hljs-comment">// </span>
	<span class="hljs-keyword">delete</span>[]a; <span class="hljs-comment">//   </span>
	<span class="hljs-keyword">delete</span>[]b; <span class="hljs-comment">//   </span>
	arr = copy;  <span class="hljs-comment">//  </span><font></font>
}<font></font>
</code></pre><br>
</div></div><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">loとhiの間の挿入によってソートを行う関数</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">insertionSort</span><span class="hljs-params">(<span class="hljs-keyword">int</span>*&amp; arr, <span class="hljs-keyword">int</span> lo, <span class="hljs-keyword">int</span> hi)</span> </span>{
	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = lo + <span class="hljs-number">1</span>; i &lt;= hi; ++i)
		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = i; j &gt; <span class="hljs-number">0</span> &amp;&amp; arr[j - <span class="hljs-number">1</span>] &gt; arr[j]; --j)<font></font>
			swap(arr[j - <span class="hljs-number">1</span>], arr[j]);<font></font>
}<font></font>
</code></pre></div></div><br>
<h2><a name="first-version"></a><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アルゴリズムの初期バージョン（最適ではない）：</font></font></a></h2><br>
<p>         ( ).       .     ,       .      ,      .     .</p><br>
<h3>          </h3><br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">FirstNewGeneratingSort</span><span class="hljs-params">(<span class="hljs-keyword">int</span>*&amp; arr, <span class="hljs-keyword">int</span> len)</span>
</span></code></pre><br>
<h3>     (   )     </h3><br>
<pre><code class="cpp hljs"><span class="hljs-keyword">int</span>* selection = <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[len &lt;&lt; <span class="hljs-number">1</span>]; <span class="hljs-comment">//     new int[len * 2]</span>
<span class="hljs-keyword">int</span> left = len - <span class="hljs-number">1</span>; <span class="hljs-comment">//      </span>
<span class="hljs-keyword">int</span> right = len; <span class="hljs-comment">//      </span><font></font>
<font></font>
<span class="hljs-keyword">int</span>* restElements = <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[len]; <span class="hljs-comment">//  ,     </span>
<span class="hljs-keyword">int</span> restLen = <span class="hljs-number">0</span>; <span class="hljs-comment">//     </span>
</code></pre><br>
<p> ,       2   ,    .                .        .    (   ).</p><br>
<h3>       .      </h3><br>
<pre><code class="cpp hljs"><span class="hljs-keyword">if</span> (arr[<span class="hljs-number">0</span>] &gt; arr[<span class="hljs-number">1</span>])<font></font>
	swap(arr[<span class="hljs-number">0</span>], arr[<span class="hljs-number">1</span>]);<font></font>
<font></font>
selection[left--] = arr[<span class="hljs-number">0</span>];<font></font>
selection[right++] = arr[<span class="hljs-number">1</span>];
</code></pre><br>
<h3>  </h3><br>
<pre><code class="cpp hljs"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">2</span>; i &lt; len; ++i) {<font></font>
<font></font>
	<span class="hljs-keyword">if</span> (selection[right - <span class="hljs-number">1</span>] &lt;= arr[i]) <span class="hljs-comment">//    </span><font></font>
	{<font></font>
		selection[right++] = arr[i];<font></font>
		<span class="hljs-keyword">continue</span>;<font></font>
	}<font></font>
<font></font>
	<span class="hljs-keyword">if</span> (selection[left + <span class="hljs-number">1</span>] &gt;= arr[i]) <span class="hljs-comment">//    </span><font></font>
	{<font></font>
		selection[left--] = arr[i];<font></font>
		<span class="hljs-keyword">continue</span>;<font></font>
	}<font></font>
<font></font>
	restElements[restLen++] = arr[i]; <span class="hljs-comment">//      ,   </span><font></font>
}<font></font>
</code></pre><br>
<p>      ,  «» ,     .        .</p><br>
<h3>  </h3><br>
<pre><code class="cpp hljs"><span class="hljs-keyword">int</span> selectionLen = right - left - <span class="hljs-number">1</span>; <span class="hljs-comment">//   </span>
<span class="hljs-keyword">int</span>* copy = glue(selection + left + <span class="hljs-number">1</span>, selectionLen, <span class="hljs-literal">nullptr</span>, <span class="hljs-number">0</span>); <span class="hljs-comment">//      </span><font></font>
<font></font>
<span class="hljs-keyword">delete</span>[] selection; <span class="hljs-comment">//   2 * len ,         ,    </span>
selection = copy; <span class="hljs-comment">//  ,    selection    </span><font></font>
<font></font>
<span class="hljs-keyword">delete</span>[] arr; <span class="hljs-comment">//    ,         ,      </span>
</code></pre><br>
<h3>           </h3><br>
<pre><code class="cpp hljs">FirstNewGeneratingSort(restElements, restLen);<font></font>
glueDelete(arr, selection, selectionLen, restElements, restLen);<font></font>
</code></pre><br>
<div class="spoiler"><b class="spoiler_title">   ( )</b><div class="spoiler_text"><pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">FirstNewGeneratingSort</span>(<span class="hljs-params"><span class="hljs-keyword">int</span>*&amp; arr, <span class="hljs-keyword">int</span> len</span>)</span> {
	<span class="hljs-keyword">if</span> (len &lt; <span class="hljs-number">2</span>)
		<span class="hljs-keyword">return</span>;<font></font>
<font></font>
	<span class="hljs-keyword">int</span>* selection = <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[len &lt;&lt; <span class="hljs-number">1</span>];
	<span class="hljs-keyword">int</span> left = len - <span class="hljs-number">1</span>;
	<span class="hljs-keyword">int</span> right = len;<font></font>
<font></font>
	<span class="hljs-keyword">int</span>* restElements = <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[len];
	<span class="hljs-keyword">int</span> restLen = <span class="hljs-number">0</span>;<font></font>
<font></font>
	<span class="hljs-keyword">if</span> (arr[<span class="hljs-number">0</span>] &gt; arr[<span class="hljs-number">1</span>])<font></font>
		swap(arr[<span class="hljs-number">0</span>], arr[<span class="hljs-number">1</span>]);<font></font>
<font></font>
	selection[left--] = arr[<span class="hljs-number">0</span>];<font></font>
	selection[right++] = arr[<span class="hljs-number">1</span>];<font></font>
<font></font>
	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">2</span>; i &lt; len; ++i) {<font></font>
<font></font>
		<span class="hljs-keyword">if</span> (selection[right - <span class="hljs-number">1</span>] &lt;= arr[i]) <span class="hljs-comment">//    </span><font></font>
		{<font></font>
			selection[right++] = arr[i];<font></font>
			<span class="hljs-keyword">continue</span>;<font></font>
		}<font></font>
<font></font>
		<span class="hljs-keyword">if</span> (selection[left + <span class="hljs-number">1</span>] &gt;= arr[i]) <span class="hljs-comment">//    </span><font></font>
		{<font></font>
			selection[left--] = arr[i];<font></font>
			<span class="hljs-keyword">continue</span>;<font></font>
		}<font></font>
<font></font>
		restElements[restLen++] = arr[i]; <span class="hljs-comment">//      ,   </span><font></font>
	}<font></font>
	<span class="hljs-keyword">int</span> selectionLen = right - left - <span class="hljs-number">1</span>; <span class="hljs-comment">//   </span>
	<span class="hljs-keyword">int</span>* copy = glue(selection + left + <span class="hljs-number">1</span>, selectionLen, nullptr, <span class="hljs-number">0</span>); <span class="hljs-comment">//      </span><font></font>
<font></font>
	delete[] selection; <span class="hljs-comment">//   2 * len ,          ,    </span>
	selection = copy; <span class="hljs-comment">//  ,    selection    </span><font></font>
<font></font>
	delete[] arr; <span class="hljs-comment">//    ,         ,      </span><font></font>
		<font></font>
	FirstNewGeneratingSort(restElements, restLen);<font></font>
<font></font>
	glueDelete(arr, selection, selectionLen, restElements, restLen);<font></font>
}<font></font>
</code></pre><br>
</div></div><br>
<h3>       Quick Sort</h3><br>
<img src="https://habrastorage.org/webt/df/7j/fo/df7jfo7uodtdpuxqyna-z4gsgr8.png" alt="画像"><br>
<p> ,    ,   .   6  ,  QuickSort!       ,       .               .       .</p><br>
<p> : </p><br>
<ul>
<li> : <nobr><i>O (n <sup>2</sup>)</i></nobr></li>
<li> : <nobr><i>O (n <sup>2</sup>)</i></nobr></li>
<li> : <nobr><i>O (n)</i></nobr></li>
</ul><br>
<p>,         . ,      ()   ,       .</p><br>
<p>    .       :</p><br>
<img src="https://habrastorage.org/webt/uv/ix/j6/uvixj6zxnviyqztdde_u4fzhg7w.png" alt="画像"><br>
<br>
<div class="spoiler"><b class="spoiler_title">   :</b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">newGenerationMergeSort</span><span class="hljs-params">(<span class="hljs-keyword">int</span>* a, <span class="hljs-keyword">int</span> lo, <span class="hljs-keyword">int</span> hi, <span class="hljs-keyword">int</span>&amp; minPortion)</span> </span>{
	<span class="hljs-keyword">if</span> (hi &lt;= lo)
		<span class="hljs-keyword">return</span>;<font></font>
<font></font>
	<span class="hljs-keyword">int</span> mid = lo + (hi - lo) / <span class="hljs-number">2</span>;
	<span class="hljs-keyword">if</span> (hi - lo &lt;= minPortion) { <span class="hljs-comment">//       ,    </span>
		<span class="hljs-keyword">int</span>* part = glue(a + lo, hi - lo + <span class="hljs-number">1</span>, <span class="hljs-literal">nullptr</span>, <span class="hljs-number">0</span>); <span class="hljs-comment">//   </span>
		FirstNewGeneratingSort(part, hi - lo + <span class="hljs-number">1</span>);<font></font>
<font></font>
		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = lo; i &lt;= hi; ++i) {<font></font>
			a[i] = part[i - lo];<font></font>
		}<font></font>
		<span class="hljs-keyword">delete</span>[] part;<font></font>
<font></font>
		<span class="hljs-keyword">return</span>;<font></font>
	}<font></font>
<font></font>
	newGenerationMergeSort(a, lo, mid, minPortion);<font></font>
	newGenerationMergeSort(a, mid + <span class="hljs-number">1</span>, hi, minPortion);<font></font>
<font></font>
	<span class="hljs-keyword">int</span>* b = glue(a + lo, mid - lo + <span class="hljs-number">1</span>, a + mid + <span class="hljs-number">1</span>, hi - mid);<font></font>
<font></font>
	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = lo; i &lt;= hi; i++)<font></font>
		a[i] = b[i - lo];<font></font>
	<span class="hljs-keyword">delete</span>[] b;<font></font>
}<font></font>
</code></pre><br>
</div></div><br>
<h3>    - </h3><br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">newMergeSort</span><span class="hljs-params">(<span class="hljs-keyword">int</span> *arr, <span class="hljs-keyword">int</span> length)</span> </span>{
	<span class="hljs-keyword">int</span> portion = log2(length); <span class="hljs-comment">//     </span><font></font>
	portion *= portion;<font></font>
		<font></font>
	newGenerationMergeSort(arr, <span class="hljs-number">0</span>, length - <span class="hljs-number">1</span>, portion);<font></font>
}<font></font>
</code></pre><br>
<p> :</p><br>
<img src="https://habrastorage.org/webt/qx/ky/r5/qxkyr54rzxuve_lkombyqfqd4ws.png" alt="画像"><br>
<p>,    ,  -      ,  Quick Sort.        O (n)   .     .</p><br>
<h3>   </h3><br>
<ol>
<li><p> ,     <nobr>O (n<sup>2</sup>)</nobr>,    ,        1   ,    2 .        ,      .       <i><nobr>O (n log n)</nobr></i></p></li>
<li><p>   ,   ()        ,     .        .      ,          , ,  .</p></li>
</ol><br>
<p>   ,   .    .         .</p><br>
<h2><a name="second-variant"></a><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">   :</a></h2><br>
<h3>       </h3><br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">newGenerationSort</span><span class="hljs-params">(<span class="hljs-keyword">int</span>*&amp; arr, <span class="hljs-keyword">int</span> len)</span></span></code></pre><br>
<p>  ,       ,      delete[] ( —   ). -    ,         .</p><br>
<h3> </h3><br>
<p>     « » (catch up coefficient) —      8.        ,    «-»  «-»   .</p><br>
<pre><code class="cpp hljs"><span class="hljs-keyword">int</span> localCatchUp = min(catchUp, len); <span class="hljs-comment">//           </span>
insertionSort(arr, <span class="hljs-number">0</span>, localCatchUp - <span class="hljs-number">1</span>); <span class="hljs-comment">//     localCatchUp </span><font></font>
<font></font>
<span class="hljs-keyword">if</span> (len &lt;= localCatchUp) <span class="hljs-comment">//       n &lt;= catchUp ,   </span>
	<span class="hljs-keyword">return</span>; <span class="hljs-comment">//    (      )</span>
</code></pre><br>
<h3>    </h3><br>
<p> - ,     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> </a></p><br>
<pre><code class="cpp hljs"><span class="hljs-keyword">int</span>* selection = <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[len &lt;&lt; <span class="hljs-number">1</span>]; <span class="hljs-comment">//     new int[len * 2]</span>
<span class="hljs-keyword">int</span> left = len - <span class="hljs-number">1</span>; <span class="hljs-comment">//      </span>
<span class="hljs-keyword">int</span> right = len;  <span class="hljs-comment">//      </span>
</code></pre><br>
<h3>     </h3><br>
<pre><code class="cpp hljs">selection[left--] = arr[<span class="hljs-number">0</span>];
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt; localCatchUp; ++i) {<font></font>
	selection[right++] = arr[i];<font></font>
}<font></font>
</code></pre><br>
<p>,           ,    —  </p><br>
<h3>      </h3><br>
<pre><code class="cpp hljs"><span class="hljs-keyword">int</span> restLen = len &gt;&gt; <span class="hljs-number">1</span>; <span class="hljs-comment">//     len / 2</span>
<span class="hljs-keyword">int</span>* restFirst = <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[restLen];
<span class="hljs-keyword">int</span>* restSecond = <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[restLen];<font></font>
<font></font>
<span class="hljs-keyword">int</span> restFirstLen = <span class="hljs-number">0</span>;
<span class="hljs-keyword">int</span> restSecondLen = <span class="hljs-number">0</span>;
</code></pre><br>
<h3>,   —      </h3><br>
<p>   localCatchUp (               ).    .                   -.</p><p> ,       ,      ( )     8   (right − localCatchUp).   ,             .     , -   .         .                 rest-.</p><br>
<p>    :</p><br>
<pre><code class="cpp hljs"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = localCatchUp; i &lt; len; ++i) {<font></font>
<font></font>
	<span class="hljs-keyword">if</span> (selection[right - localCatchUp] &lt;= arr[i])<font></font>
	{<font></font>
		selection[right] = arr[i];<font></font>
<font></font>
		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = right; selection[j - <span class="hljs-number">1</span>] &gt; selection[j]; --j)<font></font>
			swap(selection[j - <span class="hljs-number">1</span>], selection[j]);<font></font>
<font></font>
		++right;<font></font>
		<span class="hljs-keyword">continue</span>;<font></font>
	}<font></font>
<font></font>
	<span class="hljs-keyword">if</span> (selection[left + localCatchUp] &gt;= arr[i])<font></font>
	{<font></font>
		selection[left] = arr[i];<font></font>
<font></font>
		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = left; selection[j] &gt; selection[j + <span class="hljs-number">1</span>]; ++j)<font></font>
			swap(selection[j], selection[j + <span class="hljs-number">1</span>]);<font></font>
<font></font>
		--left;<font></font>
		<span class="hljs-keyword">continue</span>;<font></font>
	}<font></font>
<font></font>
	<span class="hljs-keyword">if</span> (i &amp; <span class="hljs-number">1</span>) { <span class="hljs-comment">// i - </span><font></font>
		restFirst[restFirstLen++] = arr[i];<font></font>
	}<font></font>
	<span class="hljs-keyword">else</span> {<font></font>
		restSecond[restSecondLen++] = arr[i];<font></font>
	}<font></font>
}<font></font>
</code></pre><br>
<p> ,   ?      .  ? —  ,    .      —    restFirst  restSecond.</p><br>
<p>   .           (    <i>[left + 1]</i>    <i>[right − 1]</i>),    <i>restFirst </i> <i>restSecond </i> <i>restFirstLen </i> <i>restSecondLen </i>.</p><br>
<h3>    ,         (       )</h3><br>
<pre><code class="cpp hljs"><span class="hljs-keyword">delete</span>[] arr; </code></pre><br>
<p>   <i>selection</i>      .      .</p><br>
<h3>  </h3><br>
<pre><code class="cpp hljs"><span class="hljs-keyword">int</span> selectionLen = right - left - <span class="hljs-number">1</span>; <span class="hljs-comment">//    </span>
<span class="hljs-keyword">int</span>* copy = glue(selection + left + <span class="hljs-number">1</span>, selectionLen, <span class="hljs-literal">nullptr</span>, <span class="hljs-number">0</span>); <span class="hljs-comment">//       </span><font></font>
			<font></font>
<span class="hljs-keyword">delete</span>[] selection; <span class="hljs-comment">//    2 * len  </span>
selection = copy; <span class="hljs-comment">//      ,  </span>
</code></pre><br>
<h3>        restFirst  restSecond</h3><br>
<p>      ,      .           restFirst  restSecond  .</p><pre><code class="cpp hljs">newGenerationSort(restFirst, restFirstLen);<font></font>
newGenerationSort(restSecond, restSecondLen);<font></font>
</code></pre><br>
<p>, ,    3        arr.</p><p>     <i>restFirst </i>+ <i>restSecond </i> -  <i>restFull</i>,      <i>selection </i>+ <i>restFull</i>.      ,     <i>selection </i>    ,    <i>rest</i>-.   <i>selection </i> 100 ,  <i>restFirst </i> — 990,   <i>restSecond </i> — 1010.    <i>restFull </i>   990 + 1010 = 2000  .      <i>selection </i> —  2000 + 100 .        2000 + 2100 = 4100.</p><p>   .   <i>selection </i> <i>restFirst </i>  <i>selection</i>.  : 100 + 990 = 1090.    <i>selection </i> <i>restSecond </i>    1090 + 1010 = 2100 .   2100 + 1090 = 3190,     ,    . </p><br>
<h3>  </h3><br>
<pre><code class="cpp hljs"><span class="hljs-keyword">int</span>* part2;
<span class="hljs-keyword">int</span> part2Len;
<span class="hljs-keyword">if</span> (selectionLen &lt; restFirstLen) {<font></font>
	glueDelete(selection, restFirst, restFirstLen, selection, selectionLen); <span class="hljs-comment">// selection += restFirst </span><font></font>
	selectionLen += restFirstLen;<font></font>
				<font></font>
	part2 = restSecond;	<font></font>
	part2Len = restSecondLen;<font></font>
}<font></font>
<span class="hljs-keyword">else</span> {<font></font>
	glueDelete(part2, restFirst, restFirstLen, restSecond, restSecondLen); <span class="hljs-comment">// part2 = restFirst + restSecond</span><font></font>
	part2Len = restFirstLen + restSecondLen;<font></font>
}<font></font>
			<font></font>
glueDelete(arr, selection, selectionLen, part2, part2Len);<font></font>
</code></pre><br>
<p> ,     <i>selection </i> <i>restFirst</i>,     .      <i>«restFull»</i></p><br>
<div class="spoiler"><b class="spoiler_title">  :</b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-comment">/// works only if arr is pointer assigned by new keyword</span>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">newGenerationSort</span><span class="hljs-params">(<span class="hljs-keyword">int</span>*&amp; arr, <span class="hljs-keyword">int</span> len)</span> </span>{
	<span class="hljs-keyword">int</span> localCatchUp = min(catchUp, len); <span class="hljs-comment">//           </span>
	insertionSort(arr, <span class="hljs-number">0</span>, localCatchUp - <span class="hljs-number">1</span>); <span class="hljs-comment">//     localCatchUp </span><font></font>
<font></font>
	<span class="hljs-keyword">if</span> (len &lt;= localCatchUp) <span class="hljs-comment">//       n &lt;= catchUp </span>
		<span class="hljs-keyword">return</span>; <span class="hljs-comment">//     </span><font></font>
<font></font>
	<span class="hljs-keyword">int</span>* selection = <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[len &lt;&lt; <span class="hljs-number">1</span>]; <span class="hljs-comment">//     new int[len * 2]</span>
	<span class="hljs-keyword">int</span> left = len - <span class="hljs-number">1</span>; <span class="hljs-comment">//      </span>
	<span class="hljs-keyword">int</span> right = len;  <span class="hljs-comment">//      </span><font></font>
			<font></font>
	selection[left--] = arr[<span class="hljs-number">0</span>];
	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt; localCatchUp; ++i) {<font></font>
		selection[right++] = arr[i];<font></font>
	}<font></font>
<font></font>
	<span class="hljs-keyword">int</span> restLen = len &gt;&gt; <span class="hljs-number">1</span>;
	<span class="hljs-keyword">int</span>* restFirst = <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[restLen];
	<span class="hljs-keyword">int</span>* restSecond = <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[restLen];<font></font>
<font></font>
	<span class="hljs-keyword">int</span> restFirstLen = <span class="hljs-number">0</span>;
	<span class="hljs-keyword">int</span> restSecondLen = <span class="hljs-number">0</span>;<font></font>
<font></font>
	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = localCatchUp; i &lt; len; ++i) {<font></font>
<font></font>
		<span class="hljs-keyword">if</span> (selection[right - localCatchUp] &lt;= arr[i]) <font></font>
		{<font></font>
			selection[right] = arr[i];<font></font>
<font></font>
			<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = right; selection[j - <span class="hljs-number">1</span>] &gt; selection[j]; --j)<font></font>
				swap(selection[j - <span class="hljs-number">1</span>], selection[j]);<font></font>
<font></font>
			++right;<font></font>
			<span class="hljs-keyword">continue</span>;<font></font>
		}<font></font>
<font></font>
		<span class="hljs-keyword">if</span> (selection[left + localCatchUp] &gt;= arr[i])<font></font>
		{<font></font>
			selection[left] = arr[i];<font></font>
<font></font>
			<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = left; selection[j] &gt;= selection[j + <span class="hljs-number">1</span>]; ++j)<font></font>
				swap(selection[j], selection[j + <span class="hljs-number">1</span>]);<font></font>
<font></font>
			--left;<font></font>
			<span class="hljs-keyword">continue</span>;<font></font>
		}<font></font>
<font></font>
		<span class="hljs-keyword">if</span> (i &amp; <span class="hljs-number">1</span>) { <span class="hljs-comment">// i - </span><font></font>
			restFirst[restFirstLen++] = arr[i];<font></font>
		}<font></font>
		<span class="hljs-keyword">else</span> {<font></font>
			restSecond[restSecondLen++] = arr[i];<font></font>
		}<font></font>
	}<font></font>
	<span class="hljs-keyword">delete</span>[] arr; <font></font>
<font></font>
	<span class="hljs-keyword">int</span> selectionLen = right - left - <span class="hljs-number">1</span>; <span class="hljs-comment">//    </span>
	<span class="hljs-keyword">int</span>* copy = glue(selection + left + <span class="hljs-number">1</span>, selectionLen, <span class="hljs-literal">nullptr</span>, <span class="hljs-number">0</span>); <span class="hljs-comment">//       </span><font></font>
			<font></font>
	<span class="hljs-keyword">delete</span>[] selection; <span class="hljs-comment">//    2 * len  </span>
	selection = copy; <span class="hljs-comment">//      ,  </span><font></font>
<font></font>
	newGenerationSort(restFirst, restFirstLen);<font></font>
	newGenerationSort(restSecond, restSecondLen);<font></font>
<font></font>
	<span class="hljs-keyword">int</span>* part2;
	<span class="hljs-keyword">int</span> part2Len;
	<span class="hljs-keyword">if</span> (selectionLen &lt; restFirstLen) {<font></font>
		glueDelete(selection, restFirst, restFirstLen, selection, selectionLen); <span class="hljs-comment">// selection += restFirst </span><font></font>
		selectionLen += restFirstLen;<font></font>
				<font></font>
		part2 = restSecond;	<font></font>
		part2Len = restSecondLen;<font></font>
	}<font></font>
	<span class="hljs-keyword">else</span> {<font></font>
		glueDelete(part2, restFirst, restFirstLen, restSecond, restSecondLen); <span class="hljs-comment">// part2 = restFirst + restSecond</span><font></font>
		part2Len = restFirstLen + restSecondLen;<font></font>
	}<font></font>
			<font></font>
	glueDelete(arr, selection, selectionLen, part2, part2Len);<font></font>
}<font></font>
</code></pre><br>
</div></div><br>
<h3>  </h3><br>
<div class="spoiler"><b class="spoiler_title">   Source.cpp:</b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;ctime&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;vector&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;algorithm&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"time_utilities.h"</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"sort_utilities.h"</span></span><font></font>
<font></font>
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> rela589n;<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">printArr</span><span class="hljs-params">(<span class="hljs-keyword">int</span>* arr, <span class="hljs-keyword">int</span> len)</span> </span>{
	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; len; ++i) {
		<span class="hljs-built_in">cout</span> &lt;&lt; arr[i] &lt;&lt; <span class="hljs-string">" "</span>;<font></font>
	}<font></font>
	<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">arraysEqual</span><span class="hljs-params">(<span class="hljs-keyword">int</span>* arr1, <span class="hljs-keyword">int</span>* arr2, <span class="hljs-keyword">int</span> len)</span> </span>{
	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; len; ++i) {
		<span class="hljs-keyword">if</span> (arr1[i] != arr2[i]) {
			<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<font></font>
		}<font></font>
	}<font></font>
	<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span>* <span class="hljs-title">createArray</span><span class="hljs-params">(<span class="hljs-keyword">int</span> length)</span> </span>{
	<span class="hljs-keyword">int</span>* a1 = <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[length];<font></font>
<font></font>
	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; length; i++) {<font></font>
		a1[i] = rand();<font></font>
		<span class="hljs-comment">//a1[i] = (i + 1) % (length / 4);</span><font></font>
	}<font></font>
<font></font>
	<span class="hljs-keyword">return</span> a1;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span>* <span class="hljs-title">array_copy</span><span class="hljs-params">(<span class="hljs-keyword">int</span>* arr, <span class="hljs-keyword">int</span> length)</span> </span>{
	<span class="hljs-keyword">int</span>* a2 = <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[length];
	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; length; i++) {<font></font>
		a2[i] = arr[i];<font></font>
	}<font></font>
<font></font>
	<span class="hljs-keyword">return</span> a2;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">tester</span><span class="hljs-params">(<span class="hljs-keyword">int</span> tests, <span class="hljs-keyword">int</span> length)</span> </span>{
	<span class="hljs-keyword">double</span> t1, t2;<font></font>
<font></font>
	<span class="hljs-keyword">int</span>** arrays1 = <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>* [tests];
	<span class="hljs-keyword">int</span>** arrays2 = <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>* [tests];<font></font>
<font></font>
	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> t = <span class="hljs-number">0</span>; t &lt; tests; ++t) { <span class="hljs-comment">//   </span>
		<span class="hljs-keyword">int</span>* arr1 = createArray(length);<font></font>
		arrays1[t] = arr1;<font></font>
		arrays2[t] = array_copy(arr1, length);<font></font>
	}<font></font>
<font></font>
	t1 = getCPUTime();<font></font>
	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> t = <span class="hljs-number">0</span>; t &lt; tests; ++t) {<font></font>
	 	quickSort(arrays1[t], <span class="hljs-number">0</span>, length - <span class="hljs-number">1</span>);<font></font>
	}<font></font>
	t2 = getCPUTime();<font></font>
	<font></font>
	<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Avg Qsort       time for "</span> &lt;&lt; length &lt;&lt; <span class="hljs-string">" elements: "</span> &lt;&lt; (t2 - t1) * <span class="hljs-number">1000</span> / tests &lt;&lt; <span class="hljs-built_in">endl</span>;<font></font>
	<font></font>
	<span class="hljs-keyword">int</span> portion = catchUp = <span class="hljs-number">8</span>;<font></font>
	<font></font>
	t1 = getCPUTime();<font></font>
	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> t = <span class="hljs-number">0</span>; t &lt; tests; ++t) {<font></font>
		newGenerationSort(arrays2[t], length);<font></font>
	}	<font></font>
	t2 = getCPUTime();<font></font>
<font></font>
	<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Avg newGenSort  time for "</span> &lt;&lt; length &lt;&lt; <span class="hljs-string">" elements: "</span> &lt;&lt; (t2 - t1) * <span class="hljs-number">1000</span> / tests <span class="hljs-comment">//&lt;&lt; " Catch up coef: "&lt;&lt; portion</span>
		&lt;&lt; <span class="hljs-built_in">endl</span>;<font></font>
<font></font>
	<span class="hljs-keyword">bool</span> confirmed = <span class="hljs-literal">true</span>; <span class="hljs-comment">//    </span>
	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> t = <span class="hljs-number">0</span>; t &lt; tests; ++t) {
		<span class="hljs-keyword">if</span> (!arraysEqual(arrays1[t], arrays2[t], length)) {<font></font>
			confirmed = <span class="hljs-literal">false</span>;
			<span class="hljs-keyword">break</span>;<font></font>
		}<font></font>
	}<font></font>
	<span class="hljs-keyword">if</span> (confirmed) {
		<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Confirmed"</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<font></font>
	}<font></font>
	<span class="hljs-keyword">else</span> {
		<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Review your code! Something wrong..."</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<font></font>
	}<font></font>
}<font></font>
 <font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{<font></font>
	srand(time(<span class="hljs-literal">NULL</span>));<font></font>
<font></font>
	<span class="hljs-keyword">int</span> length;
	<span class="hljs-keyword">double</span> t1, t2;<font></font>
<font></font>
	<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"size: "</span>;
	<span class="hljs-built_in">cin</span> &gt;&gt; length;<font></font>
	<font></font>
	<span class="hljs-keyword">int</span> t;
	<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"tests: "</span>;
	<span class="hljs-built_in">cin</span> &gt;&gt; t;<font></font>
	tester(t, length);<font></font>
	system(<span class="hljs-string">"pause"</span>);<font></font>
<font></font>
	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<font></font>
}<font></font>
</code></pre><br>
</div></div><br>
<div class="spoiler"><b class="spoiler_title"> Quick Sort,       :</b><div class="spoiler_text"><p> :      quickSort  ,    .  sort   algorithm   ,    2    .</p><br>
<pre><code class="cpp hljs"><span class="hljs-comment">// [min, max]</span>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">random</span><span class="hljs-params">(<span class="hljs-keyword">int</span> min, <span class="hljs-keyword">int</span> max)</span> </span>{
	<span class="hljs-keyword">return</span> min + rand() % ((max + <span class="hljs-number">1</span>) - min);<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">quickSort</span><span class="hljs-params">(<span class="hljs-keyword">int</span> * arr, <span class="hljs-keyword">int</span> b, <span class="hljs-keyword">int</span> e)</span>
</span>{
	<span class="hljs-keyword">int</span> l = b, r = e;
	<span class="hljs-keyword">int</span> piv = arr[random(l, r)];
	<span class="hljs-keyword">while</span> (l &lt;= r)	<font></font>
	{<font></font>
		<span class="hljs-keyword">for</span> (; arr[l] &lt; piv; ++l);<font></font>
<font></font>
		<span class="hljs-keyword">for</span> (; arr[r] &gt; piv; --r);<font></font>
<font></font>
		<span class="hljs-keyword">if</span> (l &lt;= r)<font></font>
			swap(arr[l++], arr[r--]);<font></font>
	}<font></font>
	<span class="hljs-keyword">if</span> (b &lt; r)<font></font>
		quickSort(arr, b, r);<font></font>
	<span class="hljs-keyword">if</span> (e &gt; l)<font></font>
		quickSort(arr, l, e);<font></font>
}<font></font>
</code></pre><br>
</div></div><br>
<div class="spoiler"><b class="spoiler_title">getCPUTime -   :</b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">pragma</span> once</span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">if</span> defined(_WIN32)</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;Windows.h&gt;</span></span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">elif</span> defined(__unix__) || defined(__unix) || defined(unix) || (defined(__APPLE__) &amp;&amp; defined(__MACH__))</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;unistd.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;sys/resource.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;sys/times.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;time.h&gt;</span></span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">else</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">error</span> <span class="hljs-meta-string">"Unable to define getCPUTime( ) for an unknown OS."</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span><font></font>
<font></font>
<span class="hljs-comment">/**
 * Returns the amount of CPU time used by the current process,
 * in seconds, or -1.0 if an error occurred.
 */</span>
<span class="hljs-function"><span class="hljs-keyword">double</span> <span class="hljs-title">getCPUTime</span><span class="hljs-params">()</span>
</span>{
<span class="hljs-meta">#<span class="hljs-meta-keyword">if</span> defined(_WIN32)</span>
	<span class="hljs-comment">/* Windows -------------------------------------------------- */</span><font></font>
	FILETIME createTime;<font></font>
	FILETIME exitTime;<font></font>
	FILETIME kernelTime;<font></font>
	FILETIME userTime;<font></font>
	<span class="hljs-keyword">if</span> (GetProcessTimes(GetCurrentProcess(),<font></font>
		&amp;create;Time, &amp;<span class="hljs-built_in">exit</span>;Time, &amp;kernel;Time, &amp;user;Time) != <span class="hljs-number">-1</span>)<font></font>
	{<font></font>
		SYSTEMTIME userSystemTime;<font></font>
		<span class="hljs-keyword">if</span> (FileTimeToSystemTime(&amp;user;Time, &amp;user;SystemTime) != <span class="hljs-number">-1</span>)
			<span class="hljs-keyword">return</span> (<span class="hljs-keyword">double</span>)userSystemTime.wHour * <span class="hljs-number">3600.0</span> +<font></font>
			(<span class="hljs-keyword">double</span>)userSystemTime.wMinute * <span class="hljs-number">60.0</span> +<font></font>
			(<span class="hljs-keyword">double</span>)userSystemTime.wSecond +<font></font>
			(<span class="hljs-keyword">double</span>)userSystemTime.wMilliseconds / <span class="hljs-number">1000.0</span>;<font></font>
	}<font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">elif</span> defined(__unix__) || defined(__unix) || defined(unix) || (defined(__APPLE__) &amp;&amp; defined(__MACH__))</span>
	<span class="hljs-comment">/* AIX, BSD, Cygwin, HP-UX, Linux, OSX, and Solaris --------- */</span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">if</span> defined(_POSIX_TIMERS) &amp;&amp; (_POSIX_TIMERS &gt; 0)</span>
	<span class="hljs-comment">/* Prefer high-res POSIX timers, when available. */</span><font></font>
	{<font></font>
		<span class="hljs-keyword">clockid_t</span> id;
		<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">timespec</span> <span class="hljs-title">ts</span>;</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">if</span> _POSIX_CPUTIME &gt; 0</span>
		<span class="hljs-comment">/* Clock ids vary by OS.  Query the id, if possible. */</span>
		<span class="hljs-keyword">if</span> (clock_getcpuclockid(<span class="hljs-number">0</span>, &amp;id;) == <span class="hljs-number">-1</span>)
<span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">if</span> defined(CLOCK_PROCESS_CPUTIME_ID)</span>
			<span class="hljs-comment">/* Use known clock id for AIX, Linux, or Solaris. */</span><font></font>
			id = CLOCK_PROCESS_CPUTIME_ID;<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">elif</span> defined(CLOCK_VIRTUAL)</span>
			<span class="hljs-comment">/* Use known clock id for BSD or HP-UX. */</span><font></font>
			id = CLOCK_VIRTUAL;<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">else</span></span>
			id = (<span class="hljs-keyword">clockid_t</span>)<span class="hljs-number">-1</span>;
<span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span>
		<span class="hljs-keyword">if</span> (id != (<span class="hljs-keyword">clockid_t</span>)<span class="hljs-number">-1</span> &amp;&amp; clock_gettime(id, &amp;ts;) != <span class="hljs-number">-1</span>)
			<span class="hljs-keyword">return</span> (<span class="hljs-keyword">double</span>)ts.tv_sec +<font></font>
			(<span class="hljs-keyword">double</span>)ts.tv_nsec / <span class="hljs-number">1000000000.0</span>;<font></font>
	}<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">if</span> defined(RUSAGE_SELF)</span><font></font>
	{<font></font>
		<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">rusage</span> <span class="hljs-title">rusage</span>;</span>
		<span class="hljs-keyword">if</span> (getrusage(RUSAGE_SELF, &amp;rusage;) != <span class="hljs-number">-1</span>)
			<span class="hljs-keyword">return</span> (<span class="hljs-keyword">double</span>)rusage.ru_utime.tv_sec +<font></font>
			(<span class="hljs-keyword">double</span>)rusage.ru_utime.tv_usec / <span class="hljs-number">1000000.0</span>;<font></font>
	}<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">if</span> defined(_SC_CLK_TCK)</span><font></font>
	{<font></font>
		<span class="hljs-keyword">const</span> <span class="hljs-keyword">double</span> ticks = (<span class="hljs-keyword">double</span>)sysconf(_SC_CLK_TCK);
		<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">tms</span> <span class="hljs-title">tms</span>;</span>
		<span class="hljs-keyword">if</span> (times(&amp;tms;) != (<span class="hljs-keyword">clock_t</span>)<span class="hljs-number">-1</span>)
			<span class="hljs-keyword">return</span> (<span class="hljs-keyword">double</span>)tms.tms_utime / ticks;<font></font>
	}<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">if</span> defined(CLOCKS_PER_SEC)</span><font></font>
	{<font></font>
		<span class="hljs-keyword">clock_t</span> cl = clock();
		<span class="hljs-keyword">if</span> (cl != (<span class="hljs-keyword">clock_t</span>)<span class="hljs-number">-1</span>)
			<span class="hljs-keyword">return</span> (<span class="hljs-keyword">double</span>)cl / (<span class="hljs-keyword">double</span>)CLOCKS_PER_SEC;<font></font>
	}<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span><font></font>
<font></font>
	<span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;      <span class="hljs-comment">/* Failed. */</span><font></font>
}<font></font>
</code></pre><br>
</div></div><br>
<p>       . <i>Intel core i3 7100u</i>  <i>8 </i> </p><br>
<div class="spoiler"><b class="spoiler_title">  </b><div class="spoiler_text"><pre><code class="cpp hljs">a1[i] = rand();
</code></pre><br>
<br>
<img width="460" src="https://habrastorage.org/webt/kh/hu/jo/khhujosglkjbo3m5i6cc_w9zpca.png" alt="image"><br>
<img width="460" src="https://habrastorage.org/webt/o3/cr/vf/o3crvfqy-0covklmhes08dcwymy.png" alt="image"><br>
<img width="460" src="https://habrastorage.org/webt/d6/wu/69/d6wu690kon7l6bcvxy8gvrl61ym.png" alt="image"><br>
<img width="460" src="https://habrastorage.org/webt/uj/ov/yd/ujovydr2ijvhj9ekoxxg-r0m7ie.png" alt="image"><br>
<img width="460" src="https://habrastorage.org/webt/hr/jf/gz/hrjfgzrbqdt7bxq35gktgbijfac.png" alt="image"><br>
</div></div><br>
<div class="spoiler"><b class="spoiler_title">  </b><div class="spoiler_text"><pre><code class="cpp hljs">a1[i] = (i + <span class="hljs-number">1</span>) % (length / <span class="hljs-number">4</span>);</code></pre><br>
<img width="460" src="https://habrastorage.org/webt/_k/ox/w4/_koxw4xsxbt2lnpfd5wpmojuen4.png" alt="image"><br>
<img width="460" src="https://habrastorage.org/webt/s_/xq/tg/s_xqtgnerhcgun43cxkh-nbmqsg.png" alt="image"><br>
<img width="460" src="https://habrastorage.org/webt/r2/s5/w3/r2s5w3zzsl8l3qmirmtytdpcsdi.png" alt="image"><br>
<img width="460" src="https://habrastorage.org/webt/cq/co/lh/cqcolhl4sosszhmcxl_ck9axmxi.png" alt="image"><br>
<img width="460" src="https://habrastorage.org/webt/_j/mv/56/_jmv56bfnzwngx5jv_47nno0deq.png" alt="image"><br>
</div></div><br>
<div class="spoiler"><b class="spoiler_title">  </b><div class="spoiler_text"><pre><code class="cpp hljs">a1[i] = (i + <span class="hljs-number">1</span>);</code></pre><br>
<img width="460" src="https://habrastorage.org/webt/ip/7h/a_/ip7ha_kamipmlbbppuvkvj5b2qk.png" alt="image"><br>
<img width="460" src="https://habrastorage.org/webt/c8/bv/wl/c8bvwlsv1e7cudchzdgkl0y9_as.png" alt="image"><br>
<img width="460" src="https://habrastorage.org/webt/e1/_b/mk/e1_bmkjy4_nqceabjv8w1luwmcg.png" alt="image"><br>
<img width="460" src="https://habrastorage.org/webt/6v/qi/1x/6vqi1xvsgsdvnaxdiflwmpm2tdm.png" alt="image"><br>
<img width="460" src="https://habrastorage.org/webt/rj/nm/00/rjnm00iiaqstfkm7__-9szbyfye.png" alt="image"><br>
</div></div><br>
<h3></h3><br>
<p> ,  ,   .       ,  .   ,  ,  .   .  -     .       &gt;  ≥  - . </p></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja484782/index.html">Blazorクライアント側オンラインストア：パート2-CI / CD</a></li>
<li><a href="../ja484788/index.html">システムのその他の機能：テレフォニーおよびCRM / ERP /ヘルプデスクの統合。何を、どのように、そしてなぜ？</a></li>
<li><a href="../ja484790/index.html">サーバーWindowsの1つのオプションが原因で、サイトの速度が低下したという話</a></li>
<li><a href="../ja484792/index.html">ゲームシーンの3Dモデルの最適化</a></li>
<li><a href="../ja484796/index.html">OSWE認定を取得するにはどうすればよいですか？</a></li>
<li><a href="../ja484800/index.html">Microsoft Application Inspectorソースコードアナライザー</a></li>
<li><a href="../ja484802/index.html">自己破壊モード：光による内視鏡カプセルの分解</a></li>
<li><a href="../ja484804/index.html">企業システムで何を暗号化しますか？そして、なぜこれを行うのですか？</a></li>
<li><a href="../ja484806/index.html">cPanelとPlesk Obsidianの違い</a></li>
<li><a href="../ja484808/index.html">10年間オンコール。何を学びましたか？（レビューとビデオレポート）</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>