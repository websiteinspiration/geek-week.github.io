<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®‚Äçüç≥ üë¥üèº üñãÔ∏è NPS, transportador, computa√ß√£o autom√°tica e de novo ... corotinas ü§ö üëºüèø üò•</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="1. Novamente sobre corotinas
 No meu artigo anterior, prezado Habr, apenas toquei nos problemas de conhecimento da programa√ß√£o moderna. A discuss√£o qu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>NPS, transportador, computa√ß√£o autom√°tica e de novo ... corotinas</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/489664/"><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. Novamente sobre corotinas</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No meu artigo anterior, prezado Habr, apenas toquei nos problemas de conhecimento da programa√ß√£o moderna. A discuss√£o que se seguiu apenas confirmou os medos espont√¢neos que surgiram: os not√≥rios ‚Äúfundamentos te√≥ricos‚Äù imediatamente se tornaram uma fonte de desacordo. O fato de eles (discord√¢ncias) n√£o existirem ou serem de natureza diferente n√£o parece incomodar a maioria dos programadores "reais". Al√©m disso, talvez n√£o seja particularmente interessante, porque os programadores s√£o estimulados principalmente por um interesse - c√≥digo, c√≥digo e apenas c√≥digo. Bem, quase "como o m√©dico receitou" [1] ...</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tocando no assunto de corutin em meu artigo e coment√°rios, eu nem sonhei com o quanto eles est√£o na tend√™ncia "atual". Surpreendeu, no entanto, as "faixas de acompanhamento" dos meus coment√°rios com ou sem. Para o que, dizem, programadores? No entanto, parece-me que tudo ficou claro depois de ler o artigo sobre o rec√©m-aprovado C ++ 20 e as perspectivas de seu desenvolvimento [2]. Para minha surpresa, verificou-se que as corotinas est√£o na vanguarda das inova√ß√µes presentes e futuras do meu amado C ++ (veja tamb√©m a biblioteca </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CppCoro</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bem, diga-me, √© poss√≠vel levar a s√©rio e / ou com calma uma sobrancelha que, ao que parece, se imagina algu√©m? Bata o que √© chamado! :(</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os antecedentes de meu conhecimento com corotinas (eu os chamarei todos da mesma maneira da maneira antiga) s√£o os seguintes. Havia uma necessidade de paralelizar, mas algo adequado n√£o era. Eu tive que inventar, estudando a literatura dispon√≠vel. Como resultado, as corotinas foram rejeitadas imediatamente e encadeadas posteriormente. A raz√£o √© que ambos s√£o m√©todos estruturais de programas paralelos, e n√£o modelos computacionais. Mas eu n√£o queria isso.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A descri√ß√£o do que eu finalmente cheguei √© dada em meus artigos anteriores sobre Habr√©. Essa conversa est√° longe de terminar, mas por enquanto, como as corotinas foram lembradas, uma vez que j√° se tornaram objeto de uma discuss√£o t√£o acalorada? A √∫nica coisa s√£o os "pontos" dos processos de parada / comuta√ß√£o. Diferentemente dos encadeamentos, eles possibilitaram prever o comportamento de processos que simulam opera√ß√µes paralelas. Em teoria, isso tamb√©m reduziu as perdas do sistema para a implementa√ß√£o do paralelismo. Mas, no entanto, em suma, tudo isso fundamentalmente alguma coisa n√£o mudou. E como os "pontos" foram simplesmente imitados pelos estados do modelo de programa√ß√£o de aut√¥matos (AP), meu conhecimento com corotinas foi conclu√≠do por sete.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas n√£o pude supor que a encarna√ß√£o das corotinas, agora denominadas corotinas, me superasse. Disto, e o meu, possivelmente "ataques" injustificados a eles, pelos quais pe√ßo sinceras desculpas aos apologistas de Corutin. Provavelmente apressado. No entanto, as circunst√¢ncias rec√©m-descobertas n√£o afetaram minha atitude em rela√ß√£o √†s corotinas. Para o novo c√≥digo, para raciocinar a seu favor, nunca vi nada fundamentalmente novo. No entanto, quero observar que as corotinas s√£o, no entanto, mais pr√≥ximas e mais claras para mim do que os fios, porque cont√™m, como eu disse acima, um an√°logo do conjunto de estados internos de aut√¥matos finitos (CA).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No entanto, pare de se arrepender. </font><font style="vertical-align: inherit;">Voltemos aos aut√¥matos que cobrem completamente o ‚Äútema da corotina‚Äù. </font><font style="vertical-align: inherit;">A seguir, apresentarei os recursos do AP associados √† modelagem de modelos paralelos bastante conhecidos na teoria e na pr√°tica - modelos de algoritmos paralelos e de pipeline em camadas. </font><font style="vertical-align: inherit;">A solu√ß√£o autom√°tica, na minha opini√£o, parece mais visual, natural e simples do que seria baseada nas mesmas corotinas.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. Formas de algoritmos paralelos e de pipeline</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Suponha que voc√™ precise calcular a express√£o: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
y = (((a + b) * (c + d)) + ((e * f) + (q + h))). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al√©m disso, seja definido o tempo de execu√ß√£o da opera√ß√£o, definido em unidades arbitr√°rias de tempo discreto - medidas em que a adi√ß√£o leva 1 medida e a multiplica√ß√£o leva 5 medidas. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Com base na l√≥gica de calcular a express√£o, o tempo de execu√ß√£o das opera√ß√µes e o n√∫mero de vari√°veis ‚Äã‚Äãintermedi√°rias, em uma modalidade, a distribui√ß√£o das opera√ß√µes por camadas e o n√∫mero de camadas em si podem parecer, por exemplo, o seguinte: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
t1 = a + b; t2 = c + d; t3 = e * f; t4 = q + h; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
N√≠vel0: t1; t2; t3; t4; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
N√≠vel1: t5 = t1 * t2; t6 = t3 + t4; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
N√≠vel2: t7 = t5 + t6;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Graficamente, isso √© mostrado na fig. 1, que mostra duas op√ß√µes para a distribui√ß√£o de c√°lculos em camadas e o tempo de c√°lculo afixado em ticks. Sua compara√ß√£o mostra que, no caso geral, uma diminui√ß√£o no n√∫mero de camadas n√£o significa automaticamente uma redu√ß√£o no tempo de computa√ß√£o. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/mn/z8/3v/mnz83viq523btod82i4vgotp5yi.jpeg" alt="imagem"> <br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FIG. 1. Forma paralela de camada para calcular uma express√£o,</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
mas mais uma op√ß√£o pode ser considerada, que j√° √© representada por uma infinidade de formas paralelas de camada que resolvem um √∫nico problema. Na fig. A Figura 2 mostra exatamente essa solu√ß√£o. O tempo de computa√ß√£o diminuiu. A paraleliza√ß√£o do NPS tamb√©m pode ser atraente, levando em considera√ß√£o sua execu√ß√£o em sistemas multiprocessadores. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ab/xq/kg/abxqkgiggx-qyvkm8jra-bo0xro.jpeg" alt="imagem"> <br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FIG. 2. NPS paralelo</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se voc√™ girar o gr√°fico JPF, poder√° obter o esquema da computa√ß√£o em pipeline. </font><font style="vertical-align: inherit;">Nele, os elementos do transportador ser√£o camadas, cujo tempo de opera√ß√£o √© reduzido para a camada mais lenta. </font><font style="vertical-align: inherit;">Na fig. </font><font style="vertical-align: inherit;">A Figura 3 mostra esse esquema de pipelining da express√£o original. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/1r/um/ah/1rumah082yimeiqe0csndeauofy.jpeg" alt="imagem"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FIG. </font><font style="vertical-align: inherit;">3. Modelo de tubula√ß√£o</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Como para este exemplo, o tempo discreto do transportador √© de 5 ciclos de rel√≥gio, o tempo de c√°lculo ser√° ainda pior que a pior vers√£o do NPS. </font><font style="vertical-align: inherit;">Vantagens do pipeline apenas na continuidade dos c√°lculos.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. Um modelo de aut√¥mato para calcular express√µes</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se voc√™ remover as restri√ß√µes na sincroniza√ß√£o das opera√ß√µes, o NPS poder√° ser transformado em um circuito que gerar√° o resultado como um pipeline, mas sem restri√ß√µes relacionadas √† sequ√™ncia e ao tempo das opera√ß√µes. Esse diagrama de rede l√≥gico com uma demonstra√ß√£o da opera√ß√£o de adi√ß√£o (a implementa√ß√£o da multiplica√ß√£o √© semelhante) na forma de um modelo de rede de espa√ßonave √© mostrado na Fig. 4. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/tf/-4/-c/tf-4-cwnottehdr8cownolbacrm.jpeg" alt="imagem"> <br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. 4. C√°lculos de express√µes baseadas em uma rede de m√°quinas de estados finitos</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voc√™ pode ver que a rede produz constantemente um resultado com um atraso de 7 ciclos de rel√≥gio, ou seja, bem como o modelo mais r√°pido do NPS (Fig. 7). Suas desvantagens incluem instabilidade de sa√≠da associada a corridas de dados. Por exemplo, uma altera√ß√£o simult√¢nea no valor das vari√°veis ‚Äã‚Äãnos pares de vari√°veis ‚Äã‚Äãg, he e, f levar√° a uma altera√ß√£o em t4 no pr√≥ximo ciclo de clock, ap√≥s um ciclo de clock para uma altera√ß√£o na vari√°vel t6 e outro ciclo de clock na vari√°vel de sa√≠da t7 (consulte a Fig. 1 e Fig. 4) . Ao mesmo tempo, ap√≥s 5 ciclos de rel√≥gio, a vari√°vel t3 ser√° alterada, o que levar√° a uma altera√ß√£o e √† sa√≠da dos valores finalmente estabelecidos das vari√°veis ‚Äã‚Äãt6, t7. </font></font><br>
 <br>
<img src="https://habrastorage.org/webt/ju/yk/iz/juykiznycz_4f_o-fl62ce-snee.jpeg" alt="imagem"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FIG. 5. Modelagem de NPS com uma rede de aut√¥matos</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Na fig. </font><font style="vertical-align: inherit;">A Figura 5 mostra como a introdu√ß√£o de um bloco adicional torna poss√≠vel simular a computa√ß√£o do NPS. </font><font style="vertical-align: inherit;">Da mesma forma, voc√™ pode simular o modelo de computa√ß√£o em pipeline, bem como bloquear a altera√ß√£o na sa√≠da associada √†s corridas de dados.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. Conclus√µes </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seria estranho duvidar que as ‚Äúfiguras‚Äù acima n√£o possam ser realizadas usando corotinas. Para ser sincero, eu n√£o gostaria de fazer isso. Para mim, √© muito mais f√°cil criar aut√¥matos que implementam as opera√ß√µes necess√°rias e, alterando apenas o n√∫mero e os relacionamentos entre eles, implementa o c√°lculo de qualquer express√£o. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
N√£o me canso de repetir que estou atra√≠do pelo conceito de programa√ß√£o visual implementado no pacote Stateflow no MATLAB. Aqui voc√™ tamb√©m pode criar as opera√ß√µes de aut√¥mato necess√°rias e, em seguida, us√°-las, como blocos padr√£o, "desenha" um esquema de c√°lculo para qualquer express√£o, que ap√≥s a compila√ß√£o se transforma em um programa de trabalho (por exemplo, no mesmo C ++). Ao mesmo tempo, durante o processo de design, estar√£o dispon√≠veis ferramentas de visualiza√ß√£o e depura√ß√£o espec√≠ficas da tecnologia de programa√ß√£o automatizada.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√â verdade que a quest√£o pode surgir - por que links permanentes para um determinado ambiente desconhecido do CPSU, se houver Stateflow? Mas falaremos sobre isso separadamente ainda ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√â uma coisa ingrata fazer previs√µes, mas, no entanto, com base na minha experi√™ncia, vou expressar um pensamento sedicioso: como linguagens de alto n√≠vel usadas para negar a programa√ß√£o em linguagem assembly, a programa√ß√£o visual, mais cedo ou mais tarde n√£o menos aglomera√ß√£o de programa√ß√£o em linguagens de alto n√≠vel. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Literatura</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
1. Programadores, vamos estudar as fontes dos programas cl√°ssicos. [Recurso eletr√¥nico], Modo de acesso: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">habr.com/en/post/488808</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> gr√°tis. Yaz. russo (data do tratamento 02.22.2020). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2. C ++ 20 aprovado! O que esperar e o que preparar para os desenvolvedores do C ++ 23. [Recurso eletr√¥nico], Modo de acesso:</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">habr.com/en/company/yandex/blog/488588</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> gratuitamente. </font><font style="vertical-align: inherit;">Yaz. </font><font style="vertical-align: inherit;">russo </font><font style="vertical-align: inherit;">(data do tratamento 02.20.2020).</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt489640/index.html">Cientistas do MIT conseguiram obter eletricidade do ar usando prote√≠na bacteriana</a></li>
<li><a href="../pt489642/index.html">Patentes engra√ßadas da ind√∫stria automotiva</a></li>
<li><a href="../pt489644/index.html">Part√≠culas macias no WebGL e OpenGL ES</a></li>
<li><a href="../pt489650/index.html">Automa√ß√£o de um jornalista. Parte 1: Tarefas e calend√°rios</a></li>
<li><a href="../pt489662/index.html">PHP Digest No. 174 (10 a 24 de fevereiro de 2020)</a></li>
<li><a href="../pt489666/index.html">Sobrecarga em C ++. parte II Sobrecarga do operador</a></li>
<li><a href="../pt489668/index.html">Limites de CPU e acelera√ß√£o agressiva no Kubernetes</a></li>
<li><a href="../pt489672/index.html">Revivemos o hexapod. Parte dois</a></li>
<li><a href="../pt489674/index.html">Angular: uma introdu√ß√£o clara ao NGRX</a></li>
<li><a href="../pt489676/index.html">Fazemos um clone do servi√ßo de entrega de comida usando Nuxt.js, GraphQL, Strapi e Stripe. Parte 1/7</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>