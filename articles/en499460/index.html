<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèº‚Äçüöí üö∞ üåè Concurrency, coroutines, event machines, ... living math üôéüèø üìà ü§ûüèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Parallel computing fascinates with the unexpectedness of its behavior. But the joint behavior of processes cannot be unpredictable. Only in this case ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Concurrency, coroutines, event machines, ... living math</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/499460/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Parallel computing fascinates with the unexpectedness of its behavior. But the joint behavior of processes cannot be unpredictable. Only in this case can he be studied and understood in his quirks. Modern multi-threaded concurrency is unique. In a literal sense. And this is all his </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bad</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> essence. The essence that can and should be influenced. The essence, which should, in a good way, have long been changed ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Although there is another option. There is no need to change anything and / or influence something. Let there be multithreading and coroutines, let it be ... and parallel automatic programming (AP). Let them compete and, when necessary and possible, complement each other. In this sense, modern parallelism has at least one plus - it allows you to do this. </font></font><br>
<br>
<s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Well, let's compete !?</font></font></s><br>
<a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. From serial to parallel</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Consider programming the simplest arithmetic equation: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C2 = A + B + A1 + B1; </font><font style="vertical-align: inherit;">(1) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let there be blocks that implement simple arithmetic operations. </font><font style="vertical-align: inherit;">In this case, summing blocks are sufficient. </font><font style="vertical-align: inherit;">A clear and accurate idea of ‚Äã‚Äãthe number of blocks, their structure and the relationships between them gives rice. </font><font style="vertical-align: inherit;">1. And in Fig. 2. </font><font style="vertical-align: inherit;">the configuration of the VKP (a) medium is given for solving equation (1). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/5q/vn/lc/5qvnlcbing_aolxkkz-ysz8d8-4.jpeg" alt="image"><br>
 <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. 1. </font><font style="vertical-align: inherit;">Structural model of processes</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
But the structural diagram in Fig. 1 corresponds to a system of three equations: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 = A + B; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C1 = A1 + B; </font><font style="vertical-align: inherit;">(2) </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C2 = C + C1;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
At the same time (2), this is a parallel implementation of equation (1), which is an algorithm for summing an array of numbers, also known as a doubling algorithm. </font><font style="vertical-align: inherit;">Here the array is represented by four numbers A, B, A1, B1, variables C and C1 are intermediate results, and C2 is the sum of the array. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/e_/qn/ll/e_qnllaermfl1ps3slc29pwvo1e.jpeg" alt="image"> <br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. 2. </font><font style="vertical-align: inherit;">Type of dialogs for the configuration of three parallel processes.</font></font><br>
</i><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
The implementation features include the continuity of its operation, when any change in the input data leads to a recount of the result. </font><font style="vertical-align: inherit;">After changing the input data, it will take two clock cycles, and when the blocks are connected in series, the same effect will be achieved in three clock cycles. </font><font style="vertical-align: inherit;">And the larger the array, the greater the speed gain.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. Concurrency as a problem</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Do not be surprised if you will be called many arguments in favor of one or another parallel solution, but at the same time they will be silent about possible problems that are completely absent in ordinary sequential programming. The main reason for the similar interpretation of the problem of the correct implementation of parallelism. They say the least about her. If at all they say. We will touch upon it in the part related to parallel access to data. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Any process can be represented as many consecutive indivisible steps. For many processes, at each such step, actions belonging to all processes are executed simultaneously. And here we may well encounter a problem that manifests itself in the following elementary example. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Suppose there are two parallel processes that correspond to the following system of equations:</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
c = a + b; </font><font style="vertical-align: inherit;">(3) </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
a = b + c; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Suppose the variables a, b, c are assigned the initial values ‚Äã‚Äã1, 1, 0. We can expect that the calculation protocol for the five steps will be as follows:</font></font><br>
<br>
<pre><code class="plaintext hljs">a              b               c<font></font>
1.000       1.000       0.000      <font></font>
1.000       1.000       2.000       <font></font>
3.000       1.000       2.000       <font></font>
3.000       1.000       4.000       <font></font>
5.000       1.000       4.000        <font></font>
5.000       1.000       6.000   </code></pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
When forming it, we proceeded from the fact that the operators are executed in parallel (simultaneously) and within one discrete measure (step). </font><font style="vertical-align: inherit;">For looped statements, it will be an iteration of the loop. </font><font style="vertical-align: inherit;">We can also assume that in the process of calculations the variables have values ‚Äã‚Äãfixed at the beginning of a discrete measure, and their change occurs at its end. </font><font style="vertical-align: inherit;">This is quite consistent with the real situation, when it takes some time to complete the operation. </font><font style="vertical-align: inherit;">It is often associated with a delay inherent in a given block. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But, most likely, you will get something like this protocol:</font></font><br>
<br>
<pre><code class="plaintext hljs">   a              b               c<font></font>
1.000       1.000       0.000      <font></font>
3.000       1.000       2.000       <font></font>
5.000       1.000       4.000       <font></font>
7.000       1.000       6.000       <font></font>
9.000       1.000       8.000       <font></font>
11.000     1.000     10.000       <font></font>
</code></pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It is equivalent to the work of a process executing two consecutive statements in a cycle: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
c = a + b; a = b + c; (4) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But it may happen that the execution of the statements will be exactly the opposite, and then the protocol will be as follows:</font></font><br>
<br>
<pre><code class="plaintext hljs">   a              b               c<font></font>
1.000       1.000       0.000      <font></font>
1.000       1.000       2.000       <font></font>
3.000       1.000       4.000       <font></font>
5.000       1.000       6.000       <font></font>
7.000       1.000       8.000       <font></font>
9.000       1.000     10.000       <font></font>
</code></pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In multi-threaded programming, the situation is even worse. In the absence of synchronization of processes, it is not only difficult to predict the sequence of operators launching, but their work will also be interrupted anywhere. All this cannot but affect the results of the joint work of the operators. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Within the framework of AP technology, work with common process variables is allowed simply and correctly. Here, most often, no special efforts are required to synchronize processes and work with data. But it will be necessary to single out actions that will be considered conditionally instantaneous and indivisible, as well as create automatic process models. In our case, the actions will be summation operators, and automata with cyclic transitions will be responsible for their launch.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Listing 1 shows the code for a process that implements the sum operation. </font><font style="vertical-align: inherit;">Its model is a finite state machine (see Fig. 3) with one state and an unconditional loop transition, for which the only action y1, having performed the operation of summing two variables, puts the result in the third. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/qz/xe/0f/qzxe0ffddnbmlivrwlmd_jl1ads.jpeg" alt="image"> <br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. 3. </font><font style="vertical-align: inherit;">Automated model of the operation of summation</font></font></i><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Listing 1. Implementation of an automaton process for a sum operation</font></font></b>
                        <div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"lfsaappl.h"</span></span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FSumABC</span> :</span>
    <span class="hljs-keyword">public</span> LFsaAppl<font></font>
{<font></font>
<span class="hljs-keyword">public</span>:
    <span class="hljs-function">LFsaAppl* <span class="hljs-title">Create</span><span class="hljs-params">(CVarFSA *pCVF)</span> </span>{ Q_UNUSED(pCVF)<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> FSumABC(nameFsa); }
    <span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">FCreationOfLinksForVariables</span><span class="hljs-params">()</span></span>;<font></font>
    FSumABC(<span class="hljs-built_in">string</span> strNam);<font></font>
    CVar *pVarA;		<span class="hljs-comment">//</span>
    CVar *pVarB;		<span class="hljs-comment">//</span>
    CVar *pVarC;		<span class="hljs-comment">//</span>
    CVar *pVarStrNameA;        <span class="hljs-comment">//</span>
    CVar *pVarStrNameB;        <span class="hljs-comment">//</span>
    CVar *pVarStrNameC;        <span class="hljs-comment">//</span>
<span class="hljs-keyword">protected</span>:
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">y1</span><span class="hljs-params">()</span></span>;<font></font>
};<font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"stdafx.h"</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"FSumABC.h"</span></span><font></font>
<font></font>
<span class="hljs-keyword">static</span> LArc TBL_SumABC[] = {<font></font>
    LArc(<span class="hljs-string">"s1"</span>,	<span class="hljs-string">"s1"</span>,<span class="hljs-string">"--"</span>, <span class="hljs-string">"y1"</span>),<font></font>
    LArc()<font></font>
};<font></font>
<font></font>
FSumABC::FSumABC(<span class="hljs-built_in">string</span> strNam):<font></font>
    LFsaAppl(TBL_SumABC, strNam, <span class="hljs-literal">nullptr</span>, <span class="hljs-literal">nullptr</span>)<font></font>
{ }<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">FSumABC::FCreationOfLinksForVariables</span><span class="hljs-params">()</span> </span>{<font></font>
    pVarA = CreateLocVar(<span class="hljs-string">"a"</span>, CLocVar::vtBool, <span class="hljs-string">"variable a"</span>);<font></font>
    pVarB = CreateLocVar(<span class="hljs-string">"b"</span>, CLocVar::vtBool, <span class="hljs-string">"variable c"</span>);<font></font>
    pVarC = CreateLocVar(<span class="hljs-string">"c"</span>, CLocVar::vtBool, <span class="hljs-string">"variable c"</span>);<font></font>
    pVarStrNameA = CreateLocVar(<span class="hljs-string">"strNameA"</span>, CLocVar::vtString, <span class="hljs-string">""</span>);
    <span class="hljs-built_in">string</span> str = pVarStrNameA-&gt;strGetDataSrc();
    <span class="hljs-keyword">if</span> (str != <span class="hljs-string">""</span>) { pVarA = pTAppCore-&gt;GetAddressVar(pVarStrNameA-&gt;strGetDataSrc().c_str(), <span class="hljs-keyword">this</span>); }<font></font>
    pVarStrNameB = CreateLocVar(<span class="hljs-string">"strNameB"</span>, CLocVar::vtString, <span class="hljs-string">""</span>);<font></font>
    str = pVarStrNameB-&gt;strGetDataSrc();<font></font>
    <span class="hljs-keyword">if</span> (str != <span class="hljs-string">""</span>) { pVarB = pTAppCore-&gt;GetAddressVar(pVarStrNameB-&gt;strGetDataSrc().c_str(), <span class="hljs-keyword">this</span>); }<font></font>
    pVarStrNameC = CreateLocVar(<span class="hljs-string">"strNameC"</span>, CLocVar::vtString, <span class="hljs-string">""</span>);<font></font>
    str = pVarStrNameC-&gt;strGetDataSrc();<font></font>
    <span class="hljs-keyword">if</span> (str != <span class="hljs-string">""</span>) { pVarC = pTAppCore-&gt;GetAddressVar(pVarStrNameC-&gt;strGetDataSrc().c_str(), <span class="hljs-keyword">this</span>); }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">FSumABC::y1</span><span class="hljs-params">()</span> </span>{ <font></font>
    pVarC-&gt;SetDataSrc(<span class="hljs-keyword">this</span>, pVarA-&gt;GetDataSrc() + pVarB-&gt;GetDataSrc()); <font></font>
}<font></font>
</code></pre><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Important, or rather, even necessary, here is the use of the environment variables of the CPSU. </font><font style="vertical-align: inherit;">Their ‚Äúshadow properties‚Äù ensure the correct interaction of processes. </font><font style="vertical-align: inherit;">Moreover, the environment allows you to change the mode of its operation, excluding the recording of variables in the intermediate shadow memory. </font><font style="vertical-align: inherit;">An analysis of the protocols obtained in this mode allows us to verify the necessity of using shadow variables.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. And the coroutines? ...</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It would be nice to know how the coroutines represented by the Kotlin language will cope with the task. </font><font style="vertical-align: inherit;">Let us take as a solution template the program considered in the discussion of [1]. </font><font style="vertical-align: inherit;">It has a structure that is easily reduced to the required look. </font><font style="vertical-align: inherit;">To do this, replace the logical variables in it with a numeric type and add another variable, and instead of logical operations we will use the summation operation. </font><font style="vertical-align: inherit;">The corresponding code is shown in listing 2.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Listing 2. Kotlin parallel summation program</font></font></b>
                        <div class="spoiler_text"><pre><code class="kotlin hljs"><span class="hljs-keyword">import</span> kotlinx.coroutines.*<font></font>
<font></font>
<span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> =
    <span class="hljs-comment">// Structured concurrency: if any child coroutine fails,</span>
    <span class="hljs-comment">// everything else will be cancelled</span><font></font>
    coroutineScope {<font></font>
        <span class="hljs-keyword">var</span> a = <span class="hljs-number">1</span>
        <span class="hljs-keyword">var</span> b = <span class="hljs-number">1</span>
        <span class="hljs-keyword">var</span> c = <span class="hljs-number">0</span>;
        <span class="hljs-comment">// Use default thread pool </span><font></font>
        withContext(Dispatchers.Default) {<font></font>
            <span class="hljs-keyword">for</span> (i <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..<span class="hljs-number">4</span>) {
               <span class="hljs-keyword">var</span> res = listOf(async { a+b }, async{ b+c }).map { it.await() }<font></font>
			c = res[<span class="hljs-number">0</span>]<font></font>
			a = res[<span class="hljs-number">1</span>]<font></font>
               println(<span class="hljs-string">"<span class="hljs-variable">$a</span>, <span class="hljs-variable">$b</span>, <span class="hljs-variable">$c</span>"</span>)<font></font>
            }<font></font>
        }<font></font>
    }<font></font>
</code></pre><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
There are no questions about the result of this program, as </font><font style="vertical-align: inherit;">it exactly matches the first of the above protocols. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
However, the conversion of the source code was not as obvious as it might seem, because </font><font style="vertical-align: inherit;">It seemed natural to use the following code fragment:</font></font><br>
<br>
<pre><code class="kotlin hljs">listOf(async {  = a+b }, async{  = b+c })
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As shown by testing (this can be done online on the Kotlin website - </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kotlinlang.org/#try-kotlin</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), its use leads to a completely unpredictable result, which also changes from launch to launch. </font><font style="vertical-align: inherit;">And only a more careful analysis of the source program led to the correct code. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Code that contains an error from the point of view of the functioning of the program, but is legitimate from the point of view of the language, makes us fear for the reliability of the programs on it. </font><font style="vertical-align: inherit;">This opinion, probably, can be challenged by Kotlin experts. </font><font style="vertical-align: inherit;">Nevertheless, the ease of making a mistake, which cannot be explained only by a lack of understanding of ‚Äúcoroutine programming,‚Äù is nevertheless persistently pushing for such conclusions.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4. Event machines in Qt</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Earlier, we established that an event automaton is not an automaton in its classical definition. He is good or bad, but to some extent the event machine is still a relative of classical machines. Is it distant, near, but we must talk about it directly so that there are no misconceptions about this. We started talking about this in [2], but all for continuing it. Now we will do this by examining other examples of the use of event machines in Qt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Of course, an event automaton can be considered as a degenerate case of a classical automaton with an indefinite and / or variable cycle duration associated with an event. The possibility of such an interpretation was shown in a previous article when solving only one and, moreover, a rather specific example (see details [2]). Next, we will try to eliminate this gap.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The Qt library only associates machine transitions with events, which is a serious limitation. For example, in the same UML language, a transition is associated not only with an event called an initiating event, but also with a protective condition - a logical expression calculated after the event is received [3]. In MATLAB, the situation is mitigated more and sounds like this: ‚Äúif the name of the event is not specified, then the transition will occur when </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">any</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> event occurs‚Äù [4]. But here and there, the root cause of the transition is the event / s. But what if there are no events?</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If there are no events, then ... you can try to create them. </font><font style="vertical-align: inherit;">Listing 3 and Figure </font><font style="vertical-align: inherit;">4 demonstrate how to do this, using the descendant of the automaton class LFsaAppl of the VKPa environment as a "wrapper" of the event Qt-class. </font><font style="vertical-align: inherit;">Here, the action y2 with a periodicity of the discrete time of the automaton space sends a signal initiating the start of the transition of the Qt automaton. </font><font style="vertical-align: inherit;">The latter, using the s0Exited method, starts the action y1, which implements the summation operation. </font><font style="vertical-align: inherit;">Note that the event machine is created by the action y3 strictly after checking the initialization of local variables of the LFsaAppl class. </font></font><br>
 <br>
<img src="https://habrastorage.org/webt/lv/gc/zv/lvgczvyataz7ybhpht1pvs28uhm.jpeg" alt="image"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. 4. </font><font style="vertical-align: inherit;">Combination of classic and event machines</font></font><br>
</i><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Listing 3. Implementing a summation model with an event automaton</font></font></b>
                        <div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"lfsaappl.h"</span></span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">QStateMachine</span>;</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">QState</span>;</span><font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FSumABC</span> :</span>
    <span class="hljs-keyword">public</span> QObject,
    <span class="hljs-keyword">public</span> LFsaAppl<font></font>
{<font></font>
    Q_OBJECT<font></font>
...<font></font>
<span class="hljs-keyword">protected</span>:
    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">x1</span><span class="hljs-params">()</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">y1</span><span class="hljs-params">()</span></span>; <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">y2</span><span class="hljs-params">()</span></span>; <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">y3</span><span class="hljs-params">()</span></span>; <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">y12</span><span class="hljs-params">()</span></span>;<font></font>
signals:<font></font>
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">GoState</span><span class="hljs-params">()</span></span>;
<span class="hljs-keyword">private</span> slots:
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">s0Exited</span><span class="hljs-params">()</span></span>;
<span class="hljs-keyword">private</span>:<font></font>
    QStateMachine * machine;<font></font>
    QState * s0;<font></font>
};<font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"stdafx.h"</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"FSumABC.h"</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;QStateMachine&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;QState&gt;</span></span><font></font>
<font></font>
<span class="hljs-keyword">static</span> LArc TBL_SumABC[] = {<font></font>
    LArc(<span class="hljs-string">"st"</span>,	<span class="hljs-string">"st"</span>,<span class="hljs-string">"^x1"</span>,	<span class="hljs-string">"y12"</span>),<font></font>
    LArc(<span class="hljs-string">"st"</span>,	<span class="hljs-string">"s1"</span>,<span class="hljs-string">"x1"</span>,	<span class="hljs-string">"y3"</span>),<font></font>
    LArc(<span class="hljs-string">"s1"</span>,	<span class="hljs-string">"s1"</span>,<span class="hljs-string">"--"</span>,	<span class="hljs-string">"y2"</span>),<font></font>
    LArc()<font></font>
};<font></font>
<font></font>
FSumABC::FSumABC(<span class="hljs-built_in">string</span> strNam):<font></font>
    QObject(),<font></font>
    LFsaAppl(TBL_SumABC, strNam, <span class="hljs-literal">nullptr</span>, <span class="hljs-literal">nullptr</span>)<font></font>
{ }<font></font>
...<font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">FSumABC::x1</span><span class="hljs-params">()</span> </span>{ <span class="hljs-keyword">return</span> pVarA&amp;&amp;pVarB&amp;&amp;pVarC; }<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">FSumABC::y1</span><span class="hljs-params">()</span> </span>{<font></font>
    pVarC-&gt;SetDataSrc(<span class="hljs-keyword">this</span>, pVarA-&gt;GetDataSrc() + pVarB-&gt;GetDataSrc());<font></font>
}<font></font>
<span class="hljs-comment">//</span>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">FSumABC::y2</span><span class="hljs-params">()</span> </span>{ <span class="hljs-function">emit <span class="hljs-title">GoState</span><span class="hljs-params">()</span></span>; }
<span class="hljs-comment">//</span>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">FSumABC::y3</span><span class="hljs-params">()</span> </span>{<font></font>
    s0 = <span class="hljs-keyword">new</span> QState();<font></font>
    QSignalTransition *ps = s0-&gt;addTransition(<span class="hljs-keyword">this</span>, SIGNAL(GoState()), s0);<font></font>
    connect (s0, SIGNAL(entered()), <span class="hljs-keyword">this</span>, SLOT(s0Exited()));<font></font>
    machine = <span class="hljs-keyword">new</span> QStateMachine(<span class="hljs-literal">nullptr</span>);<font></font>
    machine-&gt;addState(s0);<font></font>
    machine-&gt;setInitialState(s0);<font></font>
    machine-&gt;start();<font></font>
}<font></font>
<span class="hljs-comment">//    </span>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">FSumABC::y12</span><span class="hljs-params">()</span> </span>{ FInit(); }<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">FSumABC::s0Exited</span><span class="hljs-params">()</span> </span>{ y1(); }
</code></pre><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Above, we implemented a very simple machine. </font><font style="vertical-align: inherit;">Or, more precisely, a combination of classic and event automatons. </font><font style="vertical-align: inherit;">If the previous implementation of the FSumABC class is replaced with the created one, then there will simply be no differences in the application. </font><font style="vertical-align: inherit;">But for more complex models, the limited properties of event-driven automata begin to fully manifest themselves. </font><font style="vertical-align: inherit;">At a minimum, already in the process of creating a model. </font><font style="vertical-align: inherit;">Listing 4 shows the implementation of the model of the AND-NOT element in the form of an event automaton (for more details on the used automaton model of the AND-NOT element, see [2]).</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Listing 4. Implementing an element model AND NOT by an event machine</font></font></b>
                        <div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;QObject&gt;</span></span><font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">QStateMachine</span>;</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">QState</span>;</span><font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MainWindow</span>;</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ine</span> :</span> <span class="hljs-keyword">public</span> QObject<font></font>
{<font></font>
    Q_OBJECT<font></font>
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-keyword">explicit</span> <span class="hljs-title">ine</span><span class="hljs-params">(MainWindow *parent = <span class="hljs-literal">nullptr</span>)</span></span>;
    <span class="hljs-keyword">bool</span> bX1, bX2, bY;<font></font>
signals:<font></font>
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">GoS0</span><span class="hljs-params">()</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">GoS1</span><span class="hljs-params">()</span></span>;
<span class="hljs-keyword">private</span> slots:
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">s1Exited</span><span class="hljs-params">()</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">s0Exited</span><span class="hljs-params">()</span></span>;
<span class="hljs-keyword">private</span>:<font></font>
    QStateMachine * machine;<font></font>
    QState * s0;<font></font>
    QState * s1;<font></font>
    MainWindow *pMain{<span class="hljs-literal">nullptr</span>};
<span class="hljs-keyword">friend</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MainWindow</span>;</span><font></font>
};<font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"ine.h"</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;QStateMachine&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;QState&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"mainwindow.h"</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"ui_mainwindow.h"</span></span><font></font>
<font></font>
ine::ine(MainWindow *parent) :<font></font>
    QObject(parent)<font></font>
{<font></font>
    pMain = parent;<font></font>
    s0 = <span class="hljs-keyword">new</span> QState();<font></font>
    s1 = <span class="hljs-keyword">new</span> QState();<font></font>
<font></font>
    s0-&gt;addTransition(<span class="hljs-keyword">this</span>, SIGNAL(GoS1()), s1);<font></font>
    s1-&gt;addTransition(<span class="hljs-keyword">this</span>, SIGNAL(GoS0()), s0);<font></font>
<font></font>
    connect (s0, SIGNAL(entered()), <span class="hljs-keyword">this</span>, SLOT(s0Exited()));<font></font>
    connect (s1, SIGNAL(entered()), <span class="hljs-keyword">this</span>, SLOT(s1Exited()));<font></font>
<font></font>
<font></font>
    machine = <span class="hljs-keyword">new</span> QStateMachine(<span class="hljs-literal">nullptr</span>);<font></font>
    machine-&gt;addState(s0);<font></font>
    machine-&gt;addState(s1);<font></font>
    machine-&gt;setInitialState(s1);<font></font>
    machine-&gt;start();<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">ine::s1Exited</span><span class="hljs-params">()</span> </span>{<font></font>
    bY = !(bX1&amp;&amp;bX2);<font></font>
    pMain-&gt;ui-&gt;checkBoxY-&gt;setChecked(bY);<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">ine::s0Exited</span><span class="hljs-params">()</span> </span>{<font></font>
    bY = !(bX1&amp;&amp;bX2);<font></font>
    pMain-&gt;ui-&gt;checkBoxY-&gt;setChecked(bY);<font></font>
}<font></font>
</code></pre><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It becomes clear that event automata in Qt are based strictly on Moore automata. This limits the capabilities and flexibility of the model, as actions are associated only with states. As a result, for example, it is impossible to distinguish between two transitions from the 0 to 1 state for the automaton shown in Fig. 4 in [2]. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Of course, to implement the Miles, you can use the well-known procedure for switching to Moore machines. But this leads to an increase in the number of states and eliminates the simple, visual and useful association of model states with the result of its actions. For example, after such transformations, the two states of the Moore automaton must be matched to the single state of the output of model 1 from [2].</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
On a more complex model, problems with transition conditions begin to appear with obviousness. </font><font style="vertical-align: inherit;">To get around them for the software implementation of the AND-NOT element under consideration, an analysis of the state of the input channels was built into the model control dialog, as shown in Listing 5.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Listing 5. NAND element control dialog</font></font></b>
                        <div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"mainwindow.h"</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"ui_mainwindow.h"</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"ine.h"</span></span><font></font>
<font></font>
MainWindow::MainWindow(QWidget *parent)<font></font>
    : QMainWindow(parent)<font></font>
    , ui(<span class="hljs-keyword">new</span> Ui::MainWindow)<font></font>
{<font></font>
    ui-&gt;setupUi(<span class="hljs-keyword">this</span>);<font></font>
    pine = <span class="hljs-keyword">new</span> ine(<span class="hljs-keyword">this</span>);<font></font>
    connect(<span class="hljs-keyword">this</span>, SIGNAL(GoState0()), pine, SIGNAL(GoS0()));<font></font>
    connect(<span class="hljs-keyword">this</span>, SIGNAL(GoState1()), pine, SIGNAL(GoS1()));<font></font>
}<font></font>
<font></font>
MainWindow::~MainWindow()<font></font>
{<font></font>
    <span class="hljs-keyword">delete</span> ui;<font></font>
}<font></font>
<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">MainWindow::on_checkBoxX1_clicked</span><span class="hljs-params">(<span class="hljs-keyword">bool</span> checked)</span>
</span>{<font></font>
    bX1 = checked;<font></font>
    pine-&gt;bX1 = bX1;<font></font>
    bY = !(bX1&amp;&amp;bX2);<font></font>
    <span class="hljs-keyword">if</span> (!(bX1&amp;&amp;bX2)) <span class="hljs-function">emit <span class="hljs-title">GoState0</span><span class="hljs-params">()</span></span>;
    <span class="hljs-keyword">else</span> emit GoState1();<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">MainWindow::on_checkBoxX2_clicked</span><span class="hljs-params">(<span class="hljs-keyword">bool</span> checked)</span>
</span>{<font></font>
    bX2 = checked;<font></font>
    pine-&gt;bX2 = bX2;<font></font>
    bY = !(bX1&amp;&amp;bX2);<font></font>
    <span class="hljs-keyword">if</span> (!(bX1&amp;&amp;bX2)) <span class="hljs-function">emit <span class="hljs-title">GoState0</span><span class="hljs-params">()</span></span>;
    <span class="hljs-keyword">else</span> emit GoState1();<font></font>
}<font></font>
</code></pre><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In sum, all of the above clearly complicates the model and creates problems with understanding its work. </font><font style="vertical-align: inherit;">In addition, such local solutions may not work when considering compositions from them. </font><font style="vertical-align: inherit;">A good example in this case would be an attempt to create an RS-trigger model (for more details on a two-component automaton model of an RS-trigger see [5]). </font><font style="vertical-align: inherit;">However, the pleasure of the achieved result will be delivered to fans of event machines. </font><font style="vertical-align: inherit;">If ... unless, of course, they succeed;)</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5. Quadratic function and ... butterfly?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It is convenient to represent the input data as an external parallel process. Above this was the dialog for managing the model of an AND-NOT element. Moreover, the rate of change of data can significantly affect the result. To confirm this, we consider the calculation of the quadratic function y = ax¬≤ + bx + c, which we implement in the form of a set of parallel-functioning and interacting blocks.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The graph of a quadratic function is known to have the shape of a parabola. But the parabola depicted by the mathematician and the parabola that the oscilloscope, for example, will display, strictly speaking, will never match. The reason for this is that the mathematician often thinks in instantaneous categories, believing that a change in the input quantity leads immediately to the calculation of the function. But in real life this is not at all true. The appearance of the function graph will depend on the speed of the calculator, on the rate of change of the input data, etc. etc. Yes, and the programs themselves for speed may differ from each other. These factors will affect the form of the function, in the form of which in a certain situation it will be difficult to guess the parabola. We will be convinced of this further.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So, we add to the summing block the blocks of multiplication, division and exponentiation. Having such a set, we can ‚Äúcollect‚Äù mathematical expressions of any complexity. But we can also have ‚Äúcubes‚Äù that implement more complex functions. Fig. 5. implementation of a quadratic function is shown in two versions - multi-block (see arrow with a label - 1, and also Fig. 6) and a variant from one block (in Fig. 5 arrow with a label 2). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ol/sy/-b/olsy-bjhlcp81hkd_7nt6x68j3m.jpeg" alt="image"> <br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig.5. Two options for implementing the quadratic function </font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/ip/vb/ho/ipvbhompt2jbuexhklumgnxkr_y.jpeg" alt="image"> <br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. 6. Structural model for calculating a quadratic function</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
That in fig. 5. it seems ‚Äúblurred‚Äù (see arrow marked 3), when properly enlarged (see graphs (trends), marked 4), it is convinced that the matter is not in the graphics properties. This is the result of the influence of time on the calculation of variables: the variable y1 is the output value of the multi-block variant (red color of the graph) and the variable y2 is the output value of the single-block variant (black color). But both of these graphics are different from the "abstract graphics" [y2 (t), x (t-1)] (green). The latter is constructed for the value of the variable y2 and the value of the input variable delayed by one clock cycle (see the variable with the name x [t-1]).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Thus, the higher the rate of change of the input function x (t), the stronger the ‚Äúblurring effect‚Äù will be and the farther the graphs y1, y2 will be from the graph [y2 (t), x (t-1)]. The detected "defect" can be used for your own purposes. For example, nothing prevents us from applying a sinusoidal signal to the input. We will consider an even more complicated option, when the first coefficient of the equation also changes in a similar way. The result of the experiment demonstrates a screen of the VKPa medium, shown in Fig. 7. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ip/qz/q1/ipqzq1ueyewokzslezd1_vcpuke.jpeg" alt="image"> <br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. 7. Simulation results with a sinusoidal input signal</font></font></i><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The screen on the lower left shows the signal supplied to the inputs of realizations of a quadratic function. Above it are the graphs of the output values ‚Äã‚Äãy1 and y2. Charts in the form of ‚Äúwings‚Äù are values ‚Äã‚Äãplotted in two coordinates. So, with the help of various realizations of the quadratic function, we drew the half of the ‚Äúbutterfly‚Äù. To draw a whole is a matter of technology ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But the paradoxes of parallelism do not end there. In fig. Figure 8 shows trends in the ‚Äúreverse‚Äù change of the independent variable x. They pass already to the left of the "abstract" graph (the latter, we note, has not changed its position!). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/_e/br/dl/_ebrdlojr1kvybj6xjtwdbclefs.jpeg" alt="image"> <br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. 8. The type of graphs with direct and reverse linear change of the input signal</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In this example, the ‚Äúdouble‚Äù error of the output signal with respect to its ‚Äúinstantaneous‚Äù value becomes apparent. </font><font style="vertical-align: inherit;">And the slower the computing system or the higher the signal frequency, the greater the error. </font><font style="vertical-align: inherit;">A sine wave is an example of a forward and reverse change of an input signal. </font><font style="vertical-align: inherit;">Due to this, the ‚Äúwings‚Äù in Fig. 4 took this form. </font><font style="vertical-align: inherit;">Without the ‚Äúbackward error‚Äù effect, they would be twice as narrow.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6. Adaptive PID Controller</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let's consider one more example on which the considered problems are shown. </font><font style="vertical-align: inherit;">In fig. </font><font style="vertical-align: inherit;">Figure 9 shows the configuration of the VKP (a) medium when modeling an adaptive PID controller. </font><font style="vertical-align: inherit;">A block diagram is also shown in which the PID controller is represented by a unit named PID. </font><font style="vertical-align: inherit;">At the black box level, it is similar to the previously considered single-block implementation of a quadratic function.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The result of comparing the results of the calculation of the PID controller model within a certain mathematical package and the protocol obtained from the simulation results in the VKP (a) environment is shown in Fig. 10, where the red graph is the calculated values, and the blue graph is the protocol. The reason for their mismatch is that the calculation within the framework of the mathematical package, as shown by further analysis, corresponds to the sequential operation of the objects when they first work out the PID controller and stop, and then the model of the object, etc. in the loop. The VKPa environment implements / models the parallel operation of objects according to the real situation, when the model and the object work in parallel. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fh/2h/xw/fh2hxwfiimcko0qfrytqy_q0jno.jpeg" alt="image"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. 9. Implementation of the PID controller </font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/st/55/nh/st55nh7x7lcyyroleawlr5xd-tg.jpeg" alt="image"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. 10. Comparison of calculated values ‚Äã‚Äãwith simulation results of the PID controller</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Since, as we already announced, VKP (a) has a mode for simulating the sequential operation of structural blocks, it is not difficult to verify the hypothesis of a sequential calculation mode of the PID controller. </font><font style="vertical-align: inherit;">Changing the operating mode of the medium to serial, we get the coincidence of the graphs, as shown in Fig. 11. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/y4/a3/11/y4a311fqptw0zzi06v1ptbaz5a0.jpeg" alt="image"> <br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. 11. </font><font style="vertical-align: inherit;">Sequential operation of the PID controller and control object</font></font><br>
</i><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7. Conclusions</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Within the framework of the CPSU (a), the computational model endows programs with properties that are characteristic of real "living" objects. Hence the figurative association with ‚Äúliving mathematics‚Äù. As practice shows, we in models are simply obliged to take into account that which cannot be ignored in real life. In parallel computing, this is primarily the time and finiteness of the calculations. Of course, while not forgetting the adequacy of the [automatic] mathematical model to one or another ‚Äúliving‚Äù object.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It is impossible to fight that which cannot be defeated. It's about time. This is possible only in a fairy tale. But it makes sense to take it into account and / or even use it for your own purposes. In modern parallel programming, ignoring time leads to many difficultly controlled and detected problems - signal racing, deadlock processes, problems with synchronization, etc. etc. The VKP (a) technology is largely free from such problems simply because it includes a real-time model and takes into account the finiteness of computing processes. It contains what most of its analogues are simply ignored.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In conclusion. </font><font style="vertical-align: inherit;">Butterflies are butterflies, but you can, for example, consider a system of equations of quadratic and linear functions. </font><font style="vertical-align: inherit;">To do this, it is enough to add to the already created model a linear function model and a process that controls their coincidence. </font><font style="vertical-align: inherit;">So the solution will be found by modeling. </font><font style="vertical-align: inherit;">It will most likely not be as accurate as analytical, but it will be obtained more simply and quickly. </font><font style="vertical-align: inherit;">And in many cases this is more than enough. </font><font style="vertical-align: inherit;">And finding an analytical solution is, as a rule, often an open question. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In connection with the latter, AVMs were recalled. </font><font style="vertical-align: inherit;">For those who are not up to date or have forgotten, - analog computers. </font><font style="vertical-align: inherit;">Structural principles are in many general, and the approach to finding a solution.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">application</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1) </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Video</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">youtu.be/vf9gNBAmOWQ</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
2) </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Archive of examples</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github.com/lvs628/FsaHabr/blob/master/FsaHabr.zip</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3) </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Archive of the necessary Qt dll libraries version 5.11.2</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github.com/lvs628/FsaHabr/blob/master/QtDLLs.zip</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Examples are developed in the Windows 7 environment. To install them, open the examples archive and if you do not have Qt installed or the current version of Qt is different from version 5.11.2, then additionally open the Qt archive and write the path to the libraries in the Path environment variable. Next, run \ FsaHabr \ VCPaMain \ release \ FsaHabr.exe and use the dialog to select the configuration directory of an example, for example, \ FsaHabr \ 9.ParallelOperators \ Heading1 \ Pict1.C2 = A + B + A1 + B1 \ (see also video).</font></font><br>
<br>
<i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comment. </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">At the first start, instead of the directory selection dialog, a file selection dialog may appear. </font><font style="vertical-align: inherit;">We also select the configuration directory and some file in it, for example, vSetting.txt. </font><font style="vertical-align: inherit;">If the configuration selection dialog does not appear at all, then before starting, delete the ConfigFsaHabr.txt file in the directory where the FsaHabr.exe file is located. </font></font><br>
</i><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In order not to repeat the configuration selection in the ‚Äúkernel: automatic spaces‚Äù dialog (it can be opened using the menu item: FSA-tools / Space Management / Management), click the ‚Äúremember directory path‚Äù button and uncheck ‚Äúdisplay the configuration selection dialog at startup ". </font><font style="vertical-align: inherit;">In the future, to select a different configuration, this choice will need to be set again.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Literature</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NPS, conveyor, automatic computing, and again ... coroutines.</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> [Electronic resource], Access mode: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">habr.com/en/post/488808</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> free. Yaz. Russian (date of treatment 02.22.2020). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Are automatic machines an event thing?</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> [Electronic resource], Access mode: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">habr.com/en/post/483610</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> free. Yaz. Russian (date of treatment 02.22.2020). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3. BUCH G., RAMBO J., JACOBSON I. UML. User's manual. Second edition. IT Academy: Moscow, 2007 .-- 493 p. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
4. Rogachev G.N. Stateflow V5. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">User's manual.</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> [Electronic resource], Access mode: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bourabai.kz/cm/stateflow.htm</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> free. Yaz. Russian (circulation date 10.04.2020). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
5.</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Parallel Computing Model </font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[Electronic resource], Access mode: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">habr.com/en/post/486622</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> free. </font><font style="vertical-align: inherit;">Yaz. </font><font style="vertical-align: inherit;">Russian </font><font style="vertical-align: inherit;">(circulation date 04/11/2020).</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en499448/index.html">Implementing SOLID and layered architecture in Node.js with TypeScript and InversifyJS</a></li>
<li><a href="../en499450/index.html">Choosing the equipment for a game Persian using genetics / evolution in Python</a></li>
<li><a href="../en499452/index.html">Everyday life of an ophthalmologist at the clinic: when doctors are not enough</a></li>
<li><a href="../en499454/index.html">Video Live! Badoo Localization Meetup April 21</a></li>
<li><a href="../en499458/index.html">GOnline mitap materials: library design, code generation, machine learning</a></li>
<li><a href="../en499464/index.html">MOS Technology 6502 - Taming the semiconductor seed</a></li>
<li><a href="../en499470/index.html">Do not touch! Manage a webpage using a webcam</a></li>
<li><a href="../en499472/index.html">How coronavirus will accelerate the fourth industrial revolution</a></li>
<li><a href="../en499474/index.html">How to implement Atlassian Jira + Confluence in a corporation. Technical issues</a></li>
<li><a href="../en499476/index.html">Automation testing of turnkey web applications, without registration and SMS</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>