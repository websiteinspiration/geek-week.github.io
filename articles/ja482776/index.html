<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👆🏽 ✊🏾 🔏 高さマップと視差 ⚖️ 🙅🏿 💭</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="この記事では、視差マップとも呼ばれる高さマップについて学びます。
 
 高さマップとは何ですか？
 いつものように、「マップ」と言うときは、3Dオブジェクトの外観に関する情報を含むテクスチャを意味します。高さ/視差マップは、オブジェクトの一部が他よりも強い、つまり高さが高いという錯覚を作成するために...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>高さマップと視差</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/482776/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/lm/sn/vj/lmsnvj3wdef50qck6dbrpgx23os.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この記事では、視差マップとも呼ばれる高さマップについて学びます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">高さマップとは何ですか？</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
いつものように、「マップ」と言うときは、3Dオブジェクトの外観に関する情報を含むテクスチャを意味します。</font><font style="vertical-align: inherit;">高さ/視差マップは、オブジェクトの一部が他よりも強い、つまり</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">高さ</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が高いという錯覚を作成するために使用できるマップです</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/2y/5u/k6/2y5uk67n4gpgyl1-ned6p6hf2m0.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">高さマップなし。</font></font></i><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/as/jm/e2/asjme2oljml4kbu9imva9och6ry.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">高さマップ付き。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
説明によると、これは3Dオブジェクトがより目立つように見えるため、通常のマップと非常に似ているように見えるかもしれませんが、動作が少し異なります。</font><font style="vertical-align: inherit;">法線マップは、照明を使用して、オブジェクトを実際よりもエンボス加工したように見せます。</font><font style="vertical-align: inherit;">標高マップは</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">視差</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">使用</font><font style="vertical-align: inherit;">して、オブジェクトを実際よりも高くします。</font></font><br>
<a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">視差</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
子供の頃、夕方を歩くと月がついてくることに気づきましたか？私たちが通り過ぎるオブジェクト、または</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">それらに平行に</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">移動</font><em><font style="vertical-align: inherit;">する</font></em><font style="vertical-align: inherit;">オブジェクト</font><font style="vertical-align: inherit;">は、近づき、離れ</font><em><font style="vertical-align: inherit;">ていきます</font></em><font style="vertical-align: inherit;">が、月は常に空の同じ場所を占めています。あなたが私のように山の近くで育った場合、それらもあまり速く移動しないことにも気づくかもしれませんが、十分離れると、それらはまだ残されます。オブジェクトが遠くにあるほど、オブジェクトの画角が変化するとき（たとえば、車で運転するとき）の「移動」が遅くなり、オブジェクトが近づくほど、位置と画角を変更するときのオブジェクトの移動が速くなります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
マリオやレイマンのような2次元の横スクロールゲームでは、クリエイターはこのエフェクトを使用しました。彼らは、どれだけ近く見えるべきかに応じて、異なる速度で背景スクロールのいくつかのレイヤーを作成しました。これは単なる幻想です。もちろん、すべてのスプライトはフラットですが、シーンに奥行きを与えます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ただし、3Dグラフィックスでは、この現象を使用することもできます。ただし、ここでスクロールする代わりに、ビューの方向に応じてテクスチャの座標をくしゃくしゃにしたり伸ばしたりして、目をだまして奥行きを確認できます。これがまさにこの効果が法線マップと異なる点です。</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">法線マップはテクスチャの座標を変更せずに残しますが、オブジェクトが向けられていると感じる側を変更します。高さマップは方向を維持しますが、他のすべてのマップに使用するテクスチャの座標を変更します。</font></font></strong><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
それらを別々に見ると、違いは明白です。あなた自身のプロジェクトで記事から画像を再作成するか、単にそれを読むことができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
独自のプロジェクトを作成したい場合は、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow noopener"></a><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.textures.com/download/pbr0419/137925</font></font></u></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">そして、ファイルをプロジェクトフォルダーにダウンロードします（例：</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Assets / Textures / Acoustic </font></font></strong> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Foam）</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">（心配しないで、テクスチャは無料です！）次に、マテリアルを作成し、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">このチェッカーボードパターン</font></font></u></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">をメインテクスチャのスロットに設定してから、平面マテリアルを設定します。</font><font style="vertical-align: inherit;">マテリアルに標準シェーダーを残します。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/tu/ve/g5/tuveg5enq09gon4-fzfmar2bfik.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
飛行機の素材には、</font><font style="vertical-align: inherit;">アルベドの主なテクスチャとして</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">このチェッカーボードパターン</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">のみが</font><font style="vertical-align: inherit;">あり、他のカードはありません。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/go/m6/qx/gom6qxaw9sjeqcb6c3hkqqrahvc.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここでは、アルベドの基本的なテクスチャとしてチェスパターンを使用し、音響フォームの形の法線マップを使用しました。</font><font style="vertical-align: inherit;">チェスのパターンはまだ完全に均一であることに注意してください。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/ei/nd/al/eindalp7m1laufcu9xxhclvl5cy.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここでは、チェスパターンがアルベドのメインテクスチャとして使用され、アコースティックフォームが高さマップとして使用されています。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/rb/73/gt/rb73gthou5zkmsiahkqigmcp9ny.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
よく見ると効果にムラがあることがわかります！</font><font style="vertical-align: inherit;">これは、これら2つの部分のレビューの方向が同じではないために起こりました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
効果は非常に興味深いですが、平面をほぼ垂直に見て、平面を横から見るとばらばらにすると最も効果的です。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/gf/9_/hd/gf9_hdlassstoep6vq9qrivqwv4.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
だから、これはすべてとてもクールですが、幻想はこれを達成することしかできません。</font><font style="vertical-align: inherit;">プレイヤーがそのような角度から見ることができないそれらのオブジェクトに少量でそれを使用するのが最善のようです。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/mo/tf/nh/motfnhdzcxa67h40flpqepmcyeg.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、これは、アルベドテクスチャとしてのチェッカーボードパターン、アコースティックフォーム法線マップ、アコースティックフォーム高さマップを持つ平面です。</font><font style="vertical-align: inherit;">彼らは一緒にうまくいきます！</font><font style="vertical-align: inherit;">さて、十分な話、このタスクを実行するシェーダーを書いてみましょう！</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">トレーニング</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unityでシーンを開きます。階層内を右クリックし、[3Dオブジェクト]&gt; [平面]を選択して、平面を追加します。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/pc/pd/6q/pcpd6qe94oj9l89vnihf2t1vlfc.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
変換平面を0、0、0に設定し、デフォルトのマテリアルをそのままにします。スケールのアイデアを提供するために必要になります。同じ方法で、1つまたは2つの形状を追加します。球と立方体を使います。それらを平面上のどこか、またはその上に配置します。これらの無料のテクスチャをプロジェクトにダウンロードします：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow noopener"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow noopener"><font style="vertical-align: inherit;">//www.textures.com/download/pbr0579/138828</font></a><font style="vertical-align: inherit;">（または標高マップで他のテクスチャセットを使用して</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow noopener"><font style="vertical-align: inherit;">ください</font></a><font style="vertical-align: inherit;">！）たとえば、</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Assets / Textures / CrystalOre</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。マテリアルフォルダと同じフォルダまたはサブフォルダに、Crystal Oreという新しいマテリアルを作成します。 2つの形状に新しいマテリアルを適用します。 Assets / Shaders / Standardを右クリックし、Create&gt; Shaders&gt; Standard Surface Shaderを選択します</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/ck/4q/fr/ck4qfrti4zfg6kn9v2ej0bydxak.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
新しい</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BasicParallax</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">シェーダー</font><strong><font style="vertical-align: inherit;">ファイルに</font></strong><font style="vertical-align: inherit;">名前を付け、</font><font style="vertical-align: inherit;">ダブルクリックしてVisual Studioで開きます。</font><font style="vertical-align: inherit;">最初の行を</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Shader“ Xibanya / Standard / BasicParallax”</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に変更し、保存してUnityに戻ります。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/at/mt/at/atmtatne1fhwb78m4m1iirrrqss.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
BasicParallaxシェーダーをCrystal Oreに割り当てます。</font><font style="vertical-align: inherit;">これで、アルベドマップをテクスチャスロットにドラッグできます。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/tu/d0/xx/tud0xxm6e5zgf6tw7xk-z-itkz8.png"></div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">シェーダーを作成する</font></font></h3><br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">法線マップ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メタリックマップなどの</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
使用方法についてはすでに説明しました</font><font style="vertical-align: inherit;">ので、その方法はすでに知っていると思います。 （そうでない場合は、リンクを読んで戻ってきてください！）</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow noopener"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作成した基本シェーダーに移動し</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、[Raw]ボタンをクリックして、シェーダーをコピーしてBasicParallaxに貼り付けます（ただし、名前を上から</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Xibanya / Standard / BasicParallaxに変更して</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ください）。これで、法線マップとAOマップをドラッグできます。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/ns/g1/w0/nsg1w0xtvkqdgmfjxlkbnzigkzi.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
標準の照明モデルで使用されるすべてのプロパティを記録するためにこの最小限のシェーダーを作成しましたが、それ以外には何もないので、シェーダーが粗さマップを使用できるように追加の構成が必要です。</font><font style="vertical-align: inherit;">この行をプロパティに追加します（たとえば、光沢マップの上）。</font></font><br>
<br>
<pre><code class="cpp hljs">[Toggle(ROUGHNESS)]_Roughness(<span class="hljs-string">"Roughness?"</span>, <span class="hljs-keyword">float</span>) = <span class="hljs-number">0</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これを下に追加 </font></font><code>surface pragma</code><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">pragma</span> shader_feature_local ROUGHNESS</span></code></pre><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/nh/1q/wn/nh1qwntc2qn1c5mcxxjjgsbxbb4.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、glossmapが解凍される部分を次のように変更します。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/rv/ca/gy/rvcagyj4kcap4cxcrqva1zf9upw.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
（ラフネスマップまたはキーワードに慣れていない場合は、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ここで読む</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">こと</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ができます！</font></a><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">これが</font><font style="vertical-align: inherit;">終了し</font><font style="vertical-align: inherit;">たら</font><font style="vertical-align: inherit;">、保存してUnityに戻ります。</font><font style="vertical-align: inherit;">次に、粗さマップをドラッグして、粗さフラグをtrueに切り替えます。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/qr/xg/eq/qrxgeq99lwhrgfxgphb9twysmis.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
いいね！</font><font style="vertical-align: inherit;">いよいよファンデーションの準備が整いました。パララックスのスタートです！</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">視差シェーダーの作成</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
上部のプロパティセクションで、次の5行を追加します。</font></font><br>
<br>
<pre><code class="cpp hljs">[Space]<font></font>
[Header(Parallax)]<font></font>
[Toggle(_PARALLAXMAP)]_Parallaxmap(<span class="hljs-string">"Parallax?"</span>, <span class="hljs-keyword">float</span>) = <span class="hljs-number">0</span>
_ParallaxMap(<span class="hljs-string">"Parallax Map"</span>, <span class="hljs-number">2</span>D) = <span class="hljs-string">"white"</span> {}<font></font>
_Parallax(<span class="hljs-string">"Parallax Strength"</span>, Range(<span class="hljs-number">0</span>, <span class="hljs-number">0.1</span>)) = <span class="hljs-number">0.005</span></code></pre><br><font style="vertical-align: inherit;"></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">_PARALLAXMAPキーワード</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
によってアクティブ化/非アクティブ化される関数を視差にします</font><font style="vertical-align: inherit;">。視差マップを正しく使用するに</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、ビューの接線方向</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用する必要</font><strong><font style="vertical-align: inherit;">があります</font></strong><font style="vertical-align: inherit;">。サーフェスシェーダーを作成している場合、キーワードが指定されている（つまり、オンになっている）場合、これは入力構造から受け取ったレビューの方向になります。 _PARALLAXMAPキーワードが</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指定されていない</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">場合でも、o.Normal </font><font style="vertical-align: inherit;">に書き込むと、ビューの接線方向が取得</font><em><font style="vertical-align: inherit;">されます</font></em><font style="vertical-align: inherit;">。ただし、これを常に行うとは限らない可能性があるため、忘れがちで混乱しやすいので、視差マップをアンパックする必要があるときはいつでも使用することに慣れている方がいいです。 Roughnessキーワードのプラグマに、次の行を追加します。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">pragma</span> shader_feature_local _PARALLAXMAP</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、構造体Input </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">float3 viewDirに</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">追加し</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/la/ty/zw/latyzww3dmhiixnsdhbvvxjgdds.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最後に、サブシェーダーで視差マップテクスチャと視差力のプロパティを宣言します。</font></font><br>
<br>
<pre><code class="cpp hljs">sampler2D _ParallaxMap;<font></font>
half _Parallax;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コードを保存してUnityに戻り、タイプミスやエラーがないことを確認します。</font><font style="vertical-align: inherit;">すべてが正しければ、CrystalOre_1k_heightテクスチャをマテリアルパララックスマップスロットにドラッグできます。</font><font style="vertical-align: inherit;">そこで視差を有効にすることを忘れないでください。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/pu/pa/rt/pupartrzcspzf5l5uxpbbvcy9yw.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
もちろん、表面関数に変更を加えていないので、これはまだ何にもつながりません！</font><font style="vertical-align: inherit;">テクスチャの座標を圧縮またはストレッチする方法を決定するために視差マップを使用するため、他のすべてに関連するすべての視差を処理す​​る必要があります。</font><font style="vertical-align: inherit;">以下を表面関数の最初に追加します。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/2-/26/dz/2-26dzwzd1xpaymdmvy9n9ivlfi.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
テクスチャをアンパックし、緑のチャネルを取得します（ほとんどの高さマップは白黒であり、これがすべてのチャネルが同じであるので、1つを使用する必要があるだけです）、次にそれを転送します。 ）と呼ばれる組み込み関数に</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ParallaxOffset</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。 ParallaxOffsetは、ビューの方向に応じてUV座標の圧縮またはストレッチを決定する値です。</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow noopener"><font style="vertical-align: inherit;">UnityCG.cginc</font></a><font style="vertical-align: inherit;">ライブラリにあります</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow noopener"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">各サーフェスシェーダに含まれています。</font><font style="vertical-align: inherit;">ParallaxOffsetは値float2を返します。これをテクスチャ座標IN.uv_MainTex（これもfloat2です！）に追加できます。これにより、その後アンパックされた各テクスチャがオフセットでアンパックされます。</font><font style="vertical-align: inherit;">興味があれば、このように見えますが、サーフェイスシェーダーに視差を追加する方法を知っている必要はありません。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/um/wc/nl/umwcnlr9nur3mipjgwe6gebjsiy.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
（これをシェーダーに追加しないでください。このコードはすでに統合されています！）そして、ここでの作業は完了です！</font><font style="vertical-align: inherit;">保存してUnityに戻ります。</font><font style="vertical-align: inherit;">視差の強さスライダーをいじって、実際の効果を確認してください。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/p6/ae/kl/p6aeklfomxd3vojgifvncokoesq.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">強さは0</font></font></i><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/lm/sn/vj/lmsnvj3wdef50qck6dbrpgx23os.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">力は0.1です。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
プロパティでは、間隔スライダーを使用して、視差の力を0から0.1に制限しました。0.1を超える値の場合、最も理想的な視野角でもすべてがかなり奇妙に見え始めるためですが、間隔から浮動にプロパティを変更して、異なる視差のパワーを試してください。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/hc/r2/be/hcr2bej9gabbndib5zppwr8ldpi.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">バギーです！</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このチュートリアルで作成したシェーダーは、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BasicParallax.shader</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">としてこの投稿に添付されてい</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ます</font></a><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">質問がある場合、またはあなたがしたことを共有したい場合は、元の記事へのコメント、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow noopener"><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Twitter、</font></font></u></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">または</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow noopener"><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Discord</font></font></u></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に書き込んでください</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このチュートリアルは、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow noopener"><u><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Creative </font></font></em></u> <u><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Commons </font></font></em></u> <u><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Attribution-NonCommercial-ShareAlike4.0 International </font></font></em></u> <u><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Licenseに基づいてライセンスされてい</font></font></em></u></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">このチュートリアルで投稿されたコードは、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow noopener"><u><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CreativeCommonsAttribution </font></font></em></u> <u><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.0 </font></font></em></u> <u><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">International </font></font></em></u> <u><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Licenseの</font></font></em></u></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条件に基づいてライセンスされ</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font></font></em><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UVChecker.png</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BasicParallax.shader</font></font></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja482764/index.html">Rhasspyは、オープンソースで完全にオフラインの音声ツールキットです。ロシア語の認識。クラウドへの漏れなし</a></li>
<li><a href="../ja482766/index.html">いくつかのマイクロ最適化の問題について</a></li>
<li><a href="../ja482768/index.html">DeepRegistryはいつ登場しますか？すべてを制御する世界の規制当局の愛について</a></li>
<li><a href="../ja482772/index.html">2020年のプログレッシブWebアプリケーション</a></li>
<li><a href="../ja482774/index.html">黒ソシニキと最高のプロモーション方法。大人、薬局、エッセイ、デート。シェスタコフ| People PRO＃75</a></li>
<li><a href="../ja482778/index.html">アパートの回復と換気。ダクトとSMSなし</a></li>
<li><a href="../ja482780/index.html">地震データに基づくニューラルネットワークの実験</a></li>
<li><a href="../ja482784/index.html">Linuxサーバーの秘密の生活またはSSHサブシステムへのファンの総当たり攻撃</a></li>
<li><a href="../ja482786/index.html">未解決の謎</a></li>
<li><a href="../ja482788/index.html">Google Coral Edge TPUの内容：速度のテストとデバイスの解析</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>