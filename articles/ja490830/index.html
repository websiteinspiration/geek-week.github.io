<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🏁 🧐 😃 Zimbra Collaboration Suite Open-Source Editionのパスワード管理 🧑🏻‍🤝‍🧑🏻 🤚🏼 🌼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="パスワード管理は常に、情報システムの安全な運用に関連する最も重要な問題の1つでした。複数のアカウントのパスワードを安全に保存してすばやく変更する機能、ユーザーが忘れたパスワードを安全にリセットする機能、および管理者パスワードを安全にリセットする機能は、前述したパスワードセキュリティポリシーと同じくら...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Zimbra Collaboration Suite Open-Source Editionのパスワード管理</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/zimbra/blog/490830/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パスワード管理は常に、情報システムの安全な運用に関連する最も重要な問題の1つでした。複数のアカウントのパスワードを安全に保存してすばやく変更する機能、ユーザーが忘れたパスワードを安全にリセットする機能、および管理者パスワードを安全にリセットする機能は、前述した</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パスワードセキュリティポリシー</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と同じくらい</font><font style="vertical-align: inherit;">重要です</font><font style="vertical-align: inherit;">。この記事では、これらの機能がZimbra OSEでどのように実装されるかを見ていきます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/op/xi/ie/opxiieyaijocgswpkt2td6f4-u0.png"><a name="habracut"></a><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ユーザーおよびグローバル管理者</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
パスワードの</font><b><font style="vertical-align: inherit;">変更グローバル管理者</font></b><font style="vertical-align: inherit;">パスワードは、Zimbra OSEのインストール中に設定され、その後Webクライアント設定で変更できます。ユーザーパスワードはアカウントの作成時に最初に設定されますが、管理者はユーザーが最初にWebクライアントにログインするときにパスワードの強制変更を有効にして、ユーザーが自分のパスワードを設定するのを忘れないようにすることができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ユーザーがパスワードを忘れた場合に備えて、Zimbra OSEはパスワード回復機能を提供します。この機能を管理者が有効にすると、ユーザーは一時的な確認コードが送信されるバックアップメールボックスを指定できます。このワンタイムコードを使用して、ユーザーはZimbra OSE Webクライアントにアクセスし、パスワードを変更できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ただし、管理者が自分のアカウントのパスワードを突然忘れたために、Webクライアントにログインしてパスワードを変更できない場合は、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">setPassword</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性を使用する&nbsp; </font><font style="vertical-align: inherit;">か</font><font style="vertical-align: inherit;">、コマンドラインで</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sp</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を実行する</font><font style="vertical-align: inherit;">だけ&nbsp; </font><font style="vertical-align: inherit;">です。たとえば、コマンド&nbsp; </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zmprov sp admin@company.ru qwertyを</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &nbsp;使用すると、Zimbra OSE Webクライアントにログインせずに管理者パスワードを</font><b><font style="vertical-align: inherit;">qwerty</font></b><font style="vertical-align: inherit;">に変更できます。同じコマンドを使用して、他のユーザーのパスワードを変更できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、管理者にはユーザーのパスワードを表示するオプションがないことに注意してください。この制限は、Zimbra OSEが原則としてユーザーのパスワードをクリアテキストで保存しないためです。代わりに、Zimbra OSEはソルトパスワードハッシュのみを保存し、ログインしようとしたときに、ユーザーが入力したパスワードのハッシュをLDAPサーバーに保存されているものと比較します。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ADによる認証中のパスワード変更</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ADを使用してユーザーを認証する場合、パスワードもサーバーに保存されません。代わりに、Zimbra OSEは単にADにユーザー入力を渡し、このアカウントが認証されているかどうかに関する応答を受け取ります。また、すべてのアカウント情報は別のサーバーに保存されるため、外部ADを使用する場合、通常、Zimbra OSE Webクライアントの自己変更パスワード機能を無効にすることをお勧めします。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ただし、ADによるユーザー認証とユーザーのパスワードを個別に変更する機能を組み合わせる方法があります。</font><font style="vertical-align: inherit;">これは、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Active Directory Change Password</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">という拡張機能によって実行できます&nbsp; </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">ADのパスワードが変更されるように、Zimbra OSE Webクライアントのパスワード変更ボタンの機能を変更します。&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
拡張機能はインストールが非常に簡単で、次のように機能します。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ユーザーがパスワード変更ボタンをクリックする</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パスワードを入力する</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">拡張機能はユーザーDNを定義します</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">外部ADサーバーを検索します</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">安全な接続を介してアカウントのパスワードを変更します</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
拡張機能は、次のコマンドを使用してコマンドラインにインストールされます。</font></font><br>
&nbsp;<blockquote>&nbsp;mkdir -p /opt/zimbra/lib/ext/adpassword<br>
&nbsp; wget&nbsp;https://github.com/Zimbra-Community/ADPassword/raw/master/out/artifacts/ADPassword_jar/ADPassword.jar&nbsp;-O /opt/zimbra/lib/ext/adpassword/adPassword.jar<br>
&nbsp; su zimbra<br>
&nbsp; zmprov md domain.ext zimbraAuthLdapBindDn "%u@company.ru"<br>
&nbsp; zmprov md domain.ext zimbraAuthLdapSearchBase «CN=Users,DC=DOMAIN,DC=EXT»<br>
&nbsp; zmprov md domain.ext zimbraAuthLdapSearchBindDn «CN=serviceAccount,CN=Users,DC=DOMAIN,DC=EXT»<br>
&nbsp; zmprov md domain.ext zimbraAuthLdapSearchBindPassword "*********"<br>
&nbsp; zmprov md domain.ext zimbraAuthLdapSearchFilter "(samaccountname=%u)"<br>
&nbsp; zmprov md domain.ext zimbraAuthLdapURL «ldaps://ad.company.ru:636»<br>
&nbsp; zmprov md domain.ext zimbraExternalGroupLdapSearchBase «CN=Users,DC=DOMAIN,DC=EXT»<br>
&nbsp; zmprov md domain.ext zimbraExternalGroupLdapSearchFilter "(samaccountname=%u)"<br>
&nbsp; zmprov md domain.ext zimbraAuthMech «ad»<br>
&nbsp; zmprov md domain.ext zimbraAuthMechAdmin «ad»<br>
&nbsp; zmprov md domain.ext zimbraPasswordChangeListener ADPassword<br>
&nbsp; zmprov gd domain.ext | grep -i ldap | grep -v Gal<br>
&nbsp; zmprov gd domain.ext | grep -i zimbraPasswordChangeListener<br>
&nbsp; zmprov md domain.ext zimbraAuthFallbackToLocal FALSE<br>
&nbsp; zmcontrol restart</blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに、Zimbra OSEサーバーとActive Directoryサーバーが異なるSSL証明書を使用している場合は、AD証明書をZimbra OSEサーバーの信頼済みリストに追加する必要があります。両方の情報システムが同じ証明書を使用する場合は、この手順をスキップできます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、この拡張機能をインストールすると、ADを使用した認証を使用している場合でも、ユーザーはZimbra OSE Webクライアントで直接パスワードを変更できるようになります。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">大量パスワードのリセット</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
多数のZimbra OSEユーザーのパスワードをすばやくリセットする必要がある場合は、かなり許容できる状況です。ユーザーの数が十分に多い場合、手動でパスワードをリセットするのに時間がかかり、重大な状況では単に許容できない場合があります。スクリプトはこのタスクを最適化するのに役立ち、単一のドメインとメールサーバー全体の両方のユーザーのパスワードを自動的にリセットできます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
たとえば、company.ruドメインのすべてのユーザーのパスワードをリセットします。これを行うには、サーバーにログインし、コマンド&nbsp; </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zmprov -l gaa company.ru&gt; /tmp/domainusers.txtを実行し</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。このコマンドを実行すると、テキストファイル</font><b><font style="vertical-align: inherit;">domainusers.txt</font></b><font style="vertical-align: inherit;">が作成されます</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、指定されたドメインのすべてのユーザーがリストされます。</font><font style="vertical-align: inherit;">このコマンドでドメインを指定しない場合、このサーバーのすべてのアカウントがテキストファイルに書き込まれます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その後、galsyncやspamなどのすべてのシステムアカウント、およびパスワードがリセットされないユーザーを、受信したテキストファイルから削除できます。</font><font style="vertical-align: inherit;">ファイルの準備ができたら、次のスクリプトを実行できます。</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">for `cat / tmp / domainusers.txt`; </font><font style="vertical-align: inherit;">do newpass = "Z1mBr @` openssl rand -base64 12`0a "&amp;&amp; / opt / zimbra / bin / zmprov sp $ i $ newpass &amp;&amp; echo $ i $ newpass &gt;&gt; newlogin.txt &amp;&amp; echo $ i &amp;&amp; sleep 5s; </font><font style="vertical-align: inherit;">終わった</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このスクリプトの結果は</font><font style="vertical-align: inherit;">、新しいアカウントパスワードを</font><font style="vertical-align: inherit;">含む</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">newlogin.txt</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ファイルに</font><font style="vertical-align: inherit;">なります。できるだけ早く安全な場所に保存し、このファイルをサーバーから削除することをお勧めします。その後、ユーザーに新しいパスワードを通知して、ユーザーがZimbra OSEで引き続き作業できるようにします。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">モバイルデバイス用の個別のパスワード</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zimbra OSEの拡張機能のZextrasスイートをインストールした後に利用可能になるもう1つの興味深い機能は、モバイルデバイスからメールボックスに入力するための個別のパスワードです。つまり、モバイルデバイスのアカウントを使用してアカウントに追加のパスワードが作成されます。これにより、デバイスをメールボックスと同期できますが、Zimbra OSE Webクライアントにログインできません。この機能により、モバイルデバイスが危険にさらされたり盗まれたりする可能性があるため、オフィスの外で電子メールを使用する際のセキュリティが大幅に向上し、モバイルパスワード機能により、実際のアカウントパスワードが攻撃者の手に渡るのを防ぎます。</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/FLGYFkXLMZU" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
モバイルデバイスのパスワードの作成は非常に簡単です。</font><font style="vertical-align: inherit;">これは、Zextrasプラグインを使用する管理コンソールとコマンドラインの両方で実行できます。</font><font style="vertical-align: inherit;">したがって、たとえば、コマンド&nbsp; </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zxsuite mobile setAccountMobilePassword manager@company.ru Z1mBr @を</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用して、ユーザーmanager@company.ruにパスワードZ1mBr @を指定します。</font><font style="vertical-align: inherit;">コマンド使用して&nbsp; </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、モバイルgetAccountMobilePasswordがmanager@company.ru zxsuite</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、ユーザーmanager@company.ruのモバイルパスワードを見ることができますが、コマンドを使用しては</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、モバイルunsetAccountMobilePasswordがmanager@company.ru zxsuite</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">あなたが完全に指定したユーザーからモバイルパスワードを削除することができます。&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zextras Suiteに関するすべての質問については、Zextrasの会社であるEkaterina Triandafilidiの担当者に電子メールkaterina@zextras.comで連絡できます。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja490820/index.html">1つの拠点内のすべてのハブ</a></li>
<li><a href="../ja490822/index.html">DEF CON 2019-2020で車をハッキングするための最良の資料</a></li>
<li><a href="../ja490824/index.html">Java開発者の目から見たPostgreSQLインデックスの状態</a></li>
<li><a href="../ja490826/index.html">生産効率の源泉</a></li>
<li><a href="../ja490828/index.html">Unityでローグライクをゼロから作成する</a></li>
<li><a href="../ja490832/index.html">靴のマーキング：200万のマーキングコード「1C」+「正直な​​サイン」を流通させたとき</a></li>
<li><a href="../ja490836/index.html">コメントを開いてスパムに溺れない方法</a></li>
<li><a href="../ja490838/index.html">WiFi 6が登場：市場が提供するものと、なぜこのテクノロジーが必要なのか</a></li>
<li><a href="../ja490840/index.html">リソースプランニング。パート4.1。リソース計画を立てる前に</a></li>
<li><a href="../ja490842/index.html">写真内のGPT-2（Transformer言語モデルの視覚化）</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>