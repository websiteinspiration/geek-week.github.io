<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>♿️ 🍗 🔥 Betten Sie Ihr Smart Home-Gerät in das SmartThings-Ökosystem ein 🔶 👇🏽 🤰🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Mit Smart Home-Plattformen können Sie Geräte integrieren und neue Szenarien für deren Interaktion erstellen. Der Plattformeffekt ist bekannt: Benutzer...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Betten Sie Ihr Smart Home-Gerät in das SmartThings-Ökosystem ein</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/samsung/blog/489834/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mit Smart Home-Plattformen können Sie Geräte integrieren und neue Szenarien für deren Interaktion erstellen. </font><font style="vertical-align: inherit;">Der Plattformeffekt ist bekannt: Benutzer wählen eher das Gerät, mit dem ihre vorhandenen Geräte kompatibel sind, als zu einem neuen zu wechseln. </font><font style="vertical-align: inherit;">Daher kann es für Entwickler neuer genialer Geräte rentabler sein, sich in eine bereits fertiggestellte Plattform zu integrieren, wobei der Schwerpunkt auf dem „Eisen“ -Produkt liegt, anstatt eigene „Fahrräder“ in Form von Cloud-Ökosystemen und persönlichen Konten zu entwickeln. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lassen Sie uns sehen, wie Sie Ihr eigenes Gerät in die Samsung SmartThings Smart Home-Plattform integrieren. </font><font style="vertical-align: inherit;">Wir implementieren eine direkte Verbindungsoption zur Steuerung des Smart Home-Geräts am Beispiel eines Tastenschalters und einer dreifarbigen Glühbirne.&nbsp;</font></font><br>
<br>
<img src="https://habrastorage.org/webt/cx/se/xy/cxsexydnzipoeqmkj3n7jq9x4iu.gif"><br>
<a name="habracut"></a><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Warum brauchen wir Smart Home-Plattformen?</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt werden Gadgets und intelligente Geräte zum Verkauf angeboten - so viel Sie möchten. Kein Problem beim Kauf eines Wasserkochers mit Bluetooth-Steuerung oder einer Glühbirne mit WLAN. Aber macht das Ihr Zuhause „schlau“? Eine Situation ist nicht ungewöhnlich: Eine Glühbirne wird nur über eine mobile Anwendung des Herstellers gesteuert. Dies führt zu Unannehmlichkeiten, wenn Sie versuchen, mindestens mehrere verschiedene Marken zu kombinieren. Daher ist die ideale Plattform eine Plattform, mit der Sie Geräte verschiedener Hersteller auf dieselbe Weise verwalten können.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Darüber hinaus würde ich gerne einen „Computer sehen, der im Alltag aufgelöst ist“, wie Mark Weiser von Xerox PARC davon geträumt hat: Steuern Sie nicht durch eine spezielle Anwendung, sprühen Sie nicht Ihre Aufmerksamkeit. Ich möchte eine natürliche Interaktion mit einer intelligenten Umgebung, die unsere Gewohnheiten nicht ändert. Wie kann man das technisch umsetzen? Es können beispielsweise Szenarien sein, in denen heterogene Geräte im Haus betroffen sind: Sie sind aufgewacht - das tragbare Gerät hat dies erkannt und der Wasserkocher eingeschaltet; Sie sind nach Hause gekommen - der Sensor an der Tür hat dies unter Berücksichtigung der Tageszeit aufgezeichnet, die Vorhänge geschlossen, die Lampe eingeschaltet und die Klimaanlage unter Berücksichtigung der Temperatur eingeschaltet.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Szenarien werden noch nützlicher, wenn wir das Internet nutzen: Zum Beispiel, um aus der Ferne zu überprüfen, ob die Steckdose mit dem Bügeleisen ausgeschaltet ist. </font><font style="vertical-align: inherit;">Oder ein banales Beispiel: Ihr Smart Home hat sich die Wettervorhersage angesehen und Ihnen Tipps gegeben, wie Sie sich am besten anziehen können. </font><font style="vertical-align: inherit;">Oder Sie können die Sprachsteuerung über einen intelligenten Lautsprecher hinzufügen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Smart Home-Plattform ist dafür ausgelegt. </font><font style="vertical-align: inherit;">Überlegen Sie, was die Samsung SmartThings-Plattform leisten kann.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hintergrund - Was sind SmartThings?</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SmartThings wurde als Startup gestartet. Als er 2012 in den USA erschien, stand das Thema „Smart Home“ noch nicht ganz oben auf dem Hype, es gab noch keine Smart Speaker und eine Vielzahl von Gadgets in den Läden. Die Idee kam dem Gründer des Startups, Alex Hawkinson, nach einem Vorfall: Das Haus seiner Familie in Colorado litt darunter, dass die Wasserleitungen nach einem vorübergehenden Ausfall stark gefroren waren, platzten und der gesamte Boden überflutet wurde. Dann dachte er, er hätte das Problem verhindern können, wenn er gewusst hätte, was im Haus vor sich ging.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nachdem Hawkinson und seine Kollegen erfolglos nach einer schlüsselfertigen Lösung gesucht hatten, erstellten sie einen Prototyp des Geräts und starteten eine Kampagne auf Kickstarter. Die Kampagne war übererfolgreich und brachte in 30 Tagen 1.200.000 USD anstelle der geplanten 250.000 USD ein. Der Verkauf eines Hub-Hubs mit einem kleinen Satz von Geräten im Kit hat begonnen: Smart Socket, Türöffnungssensor, Bewegungssensor, Präsenzsensor. Und bereits 2019 wurde unter der Marke Samsung SmartThings die dritte Version des Hubs veröffentlicht. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/he/xk/vi/hexkviuwr8rq2bf7z84ft-akdnm.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der Schlüssel zum Erfolg bei Kickstarter war die Verfügbarkeit funktionierender Prototypen von Eisen und Software sowie die Freundlichkeit für die Herstellergemeinschaft</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Macher des Startups haben die DIY-Umgebung verlassen und entwickeln konsequent das Konzept einer offenen API für Geek-Macher, die frühzeitig als Early Adopters fungieren können. In der Kickstarter-Kampagne gab es einen Schutzschild für Arduino und verschiedene Cloud-Module, um Ihr Gerät eines Drittanbieters nahtlos zu verbinden. Im Internet können Sie viele Beispiele für hausgemachte Geräte kompatibel mit SmartThings zu finden, ob es sich um </font><font style="vertical-align: inherit;">eine kontrollierte ist </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tür eines Hühnerstall</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (mit der Lösung einer schweren Lebensaufgabe - Hühner aus einem räuberischen Nerz zu speichern) oder Remote - </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Installation von</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> einem elektronischen Sperrcode für Gäste mit Airbnb. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ct/fd/tl/ctfdtl25yhvhmrnz2yufm_qwhfw.jpeg" width="500"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fotoquelle: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://www.hackster.io/aaronpk/auto-airbnb-entry-745799</font></font></a></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In den Jahren 2012-2013 durchlief SmartThings mehrere Investitionsrunden und erhielt 12,5 Millionen US-Dollar. </font><font style="vertical-align: inherit;">Und schließlich interessierte sie sich 2014 für Samsung und wurde im Rahmen einer Strategie für den Eintritt in den Internet der Dinge-Markt für 200 Millionen US-Dollar erworben. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Cloud-Funktionen der Plattform blieben kostenlos: Die Autoren, jetzt Samsung-Mitarbeiter, schließen die theoretische Möglichkeit aus, für große Verkehrsmengen Gebühren zu erheben, und betonen: Für Geräteentwickler wird es immer eine kostenlose Option geben. </font><font style="vertical-align: inherit;">Dies ist gut, da mittlerweile fast alle Cloud-Dienste eine Monetarisierung ermöglichen und Sie häufig sogar für einen Testzeitraum eine Bankkarte anhängen müssen. </font><font style="vertical-align: inherit;">SmartThings ist eine völlig kostenlose Plattform.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SmartThings-Architektur</font></font></h1><br>
<img src="https://habrastorage.org/webt/dm/gw/ir/dmgwirddjoqbh-1caazcx5kg-sc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bewegen wir das Muster von links nach rechts.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Geräte</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SmartThings-Geräte - Dies können nicht nur Geräte aus </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">der SmartThings-Suite sein</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , sondern auch viele Partner von Drittanbietern aus der Liste der Partner. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ut/j6/oq/utj6oqymmwwnqazkm_jekxgymwq.jpeg" width="300"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn das Gerät nicht in der Liste der offiziell unterstützten Geräte enthalten ist, können Sie nach dem </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Geräte-Handler</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> suchen </font><font style="vertical-align: inherit;">- er kann von </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">der</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Entwickler- </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">Community</font></a><font style="vertical-align: inherit;"> bereitgestellt werden </font><font style="vertical-align: inherit;">- oder einen eigenen schreiben.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verbindungsmethoden</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie können Geräte auf folgende Weise mit der Plattform verbinden:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hub-verbunden - über einen Hub-Hub, der für Geräte relevant ist, die keine Internetverbindung haben, aber für solche Systeme über herkömmliche drahtlose Netzwerke wie ZigBee verbunden sind.&nbsp;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Direkt verbunden - über das Internet direkt mit der Cloud. </font><font style="vertical-align: inherit;">SmartThings hat kürzlich </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">einen</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Camcorder, eine Glühbirne und eine Smart-Fassung herausgebracht, die ohne Hub funktionieren - über WLAN. </font><font style="vertical-align: inherit;">Dies ist die Option, die wir in diesem Handbuch implementieren werden.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cloud-verbunden - über eine Cloud eines Drittanbieters für Geräte, die bereits über ein eigenes Cloud-Ökosystem verfügen. </font><font style="vertical-align: inherit;">Dies ist komplizierter, daher werden wir eine solche Option nicht in Betracht ziehen.</font></font></li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nabe</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um eine Vielzahl von Geräten in Ihrem Haus anzuschließen, sollte normalerweise ein spezieller kleiner Server "Smart Home" verwendet werden, der verschiedene Protokolle unterstützt. </font><font style="vertical-align: inherit;">Er - ein Hub, Hub, Gateway - die Namen sind unterschiedlich. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/gx/yy/_b/gxyy_bk9o6kvzdfzldagqw4lbb0.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hub und eine Reihe von Geräten dazu. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fotoquelle</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">IXBT</font></a><font style="vertical-align: inherit;"> .</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anwendung</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die SmartThings App ist eine Anwendung, die auf dem mobilen Hauptbetriebssystem und mit ihrer Hilfe installiert werden kann: Hinzufügen neuer Geräte zum System, Steuern bereits hinzugefügter Geräte, Festlegen von Automatisierungsregeln, Empfangen von Benachrichtigungen per Push und SMS und vieles mehr.&nbsp;</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ua/tu/-q/uatu-qhi_oijgiuumtopuqsjedk.png" width="400"><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Abstraktion</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In SmartThings gibt es wie in vielen anderen Smart-Home-Plattformen die folgenden Abstraktionen: Räume, Szenen, Szenarien.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Geräte sind in Räume gruppiert. </font><font style="vertical-align: inherit;">Sie hängen dieses oder jenes Gadget einfach an einen Raum in der Anwendung an und nennen es "Küche", "Badezimmer", "Flur". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gibt immer noch Szenen (Szenen) - dies sind Situationen: "Schlaf", "Ruhe", "Arbeit", "Film ansehen" - jede der Situationen ist durch ihre eigenen Gerätezustände gekennzeichnet. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/qt/vo/5o/qtvo5o8yo8thwuwhptupdthayjc.png" width="300"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Szenen und Räume auf dem Anwendungsbildschirm</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und schließlich Skripte (Routinen): Wenn-Dann-Automatisierungsregeln. Standardmäßig verfügt das Programm über vier Szenarien: "Ich bin zurück", "Gute Nacht", "Tschüss", "Guten Morgen". Sie können die Aktivierung des Skripts entsprechend dem Zustand des Morgens oder im Falle einer Bewegung oder im Falle des Öffnens der Tür usw. konfigurieren. Ein nicht triviales Beispiel: Wenn ich mit meiner Heimüberwachungskamera den Netzwerkverkehr blockiere, um das Auslaufen meiner persönlichen Videos zu verhindern. Oder ein grausames pädagogisches Beispiel: Trennen Sie das Tablet zwangsweise vom Netzwerk, wenn es 11 Uhr abends ist, um zu verhindern, dass Sie im Internet bleiben, anstatt gesund zu schlafen.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/7j/gp/qg/7jgpqgdehbjdzjtpmfnf7a2supc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Darüber hinaus gibt es im SmartThings-Programm am Telefon eine interessante Möglichkeit - das Auswendiglernen typischer Aktionen. Wenn Sie das Telefon im Laufe der Zeit häufig verwenden, erfahren Sie, wie Sie Szenen basierend auf den am häufigsten gestarteten Anwendungen am besten konfigurieren können. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um dem System neue Geräte hinzuzufügen, wird ein Plug-In-System bereitgestellt. Der Entwickler kann das Plug-In für sein eigenes Gerät programmieren - die Benutzeroberfläche in der SmartThings-Anwendung und die Logik des Geräts. Dies ist im Wesentlichen eine Webanwendung. Aus Sicht des Entwicklers kann das Plugin Ereignisse oder Benachrichtigungen vom Gerät abonnieren, ihm eine Nachricht senden und den Status der Verbindung mit dem Gerät überwachen. Es gibt eine klare </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dokumentation</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> über den Lebenszyklus des Plugins.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie werden vom Benutzer bei Bedarf aus dem "Plug-in-Store" heruntergeladen, um die Anwendung auf dem Telefon nicht aufzublähen. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/2t/i7/6p/2ti76pkvardmqwv2efyxjh5nec4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aber jetzt werden wir keine Plug-Ins mehr machen, sondern es einfacher machen: Wir werden ein hausgemachtes Gerät hinzufügen, das nur Standard-Plattform-Tools verwendet.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kompatibilität Ihres Geräts mit SmartThings</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie haben vielleicht eine Frage: Warum? </font><font style="vertical-align: inherit;">Was bringt es, wenn Sie als Geräteentwickler kompatibel sind?</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der Hauptvorteil ist die Steigerung des Produktwerts durch die automatische Integration in das gesamte Ökosystem.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unter der Bedingung, dass die Funktionstests bestanden wurden, können Sie das Logo „Kompatibel mit SmartThings“ in die Produktverpackung einfügen, um eine problemlose Installation und Konfiguration des Geräts im SmartThings-Ökosystem zu gewährleisten.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wie bei jeder Plattform wird Ihre Aufgabe erleichtert: Sie müssen nicht mehr versuchen, beispielsweise eine Benutzeroberfläche zu entwickeln - Sie können die Standardschaltflächen und andere Elemente der SmartThings-Benutzeroberfläche verwenden.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dank der SmartThings-Community (die lebhaft und aktiv ist) erhalten Sie PR und Benutzerpublikum.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im folgenden Handbuch werden wir unser eigenes, vollständig benutzerdefiniertes Gerät anschließen.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Was ist zu tun vorgeschlagen</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das SmartThings Device SDK (STDK) wurde kürzlich auf der Samsung Developer Conference im Oktober 2019 vorgestellt. Nachfolgend bieten wir eine Übersetzung des </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Handbuchs</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> für dieses SDK an. Und nicht nur eine Übersetzung: Wir haben das Gleiche getan und es mit unseren eigenen Händen wiederholt, sodass es einige praktische Kommentare gibt, die über das ursprüngliche Handbuch hinausgehen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie das Endergebnis im Video aussehen wird:</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/Rvo6pbI2-0U" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die RGB-Lampe ist über WLAN mit der SmartThings-Plattform verbunden und wird über das Telefon gesteuert. Die Lampe selbst wird auf die billigste und einfachste Weise implementiert - auf dem sehr beliebten ESP8266-Chip. Eisen ist nicht wichtig: Es kann auf jedem Mikrocontroller ausgeführt werden, da das SDK in C geschrieben und öffentlich zugänglich ist und auf Wunsch portiert werden kann. Es ist unwahrscheinlich, dass das ESP in Produktion geht (für den Anfang ist es bequemer, andere Schnittstellen im Smart Home als WLAN zu verwenden), aber es eignet sich gut für das Modell und die Abbildung. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die resultierende „Smart Bulb“ bietet folgende Funktionen: RGB-LED-Steuerung über das Farbrad des Telefons. Sowie das Ein- und Ausschalten mit der Taste. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Entwicklungsprozess ist in der Abbildung dargestellt:</font></font><br>
<img src="https://habrastorage.org/webt/ba/kb/_h/bakb_hunqhwmmaovm0jk2xrbqgk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der gezeigte Prozess ist nicht schwer, einige der Schritte können umgekehrt werden, was wir im Handbuch zeigen werden.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eisen</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Originalhandbuch zeigt alles am Beispiel der WeMos D1 Mini-Karte. Dies ist eine ESP8266-basierte Debug-Karte, die in das Steckbrett eingesetzt werden kann. </font><font style="vertical-align: inherit;">Im Allgemeinen ist nichts Kniffliges daran, es ist nur ein Modul des chinesischen ESP-Chips, das bei Fans sehr beliebt ist und der Einfachheit halber auf ein breiteres Board in der Größe des Steckbretts gelötet wird. </font><font style="vertical-align: inherit;">Daher können Sie alles auf jedem anderen Board tun. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/rs/lo/8t/rslo8ts8_gfmrhvrrnh-jb87yry.jpeg" width="200"> <img src="https://habrastorage.org/webt/bl/sg/mw/blsgmwf3onhbr9x9y4s9dxialiw.jpeg" width="200"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Links: WeMos D1, rechts - Troyka WiFi Shield</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sanft</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Was Sie brauchen, um das Beispiel zu erstellen:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ubuntu Linux Version nicht niedriger als 18.04 (Sie können ein Beispiel für Windows und MacOS erstellen, aber aus Gründen der Bestimmtheit haben wir Linux gewählt)</font></font><br>
</li>
<li>  Android    1.7.39,  iOS    1.6.41-343.   Play Market  SmartThings,     Samsung Account.       Samsung,    .<br>
</li>
<li>ESP8266 SDK.  , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="></a>  ,   ,   :<br>
<br>
<pre><code class="bash hljs">git <span class="hljs-built_in">clone</span> https://github.com/espressif/ESP8266_RTOS_SDK.git</code></pre><br>
     SDK   IDF_PATH:<br>
<br>
<pre><code class="bash hljs">nano ~/.bashrc
<span class="hljs-built_in">export</span> IDF_PATH=<span class="hljs-string">"~/git/ESP8266_RTOS_SDK:<span class="hljs-variable">$IDF_PATH</span>"</span></code></pre></li>
<li>   :<br>
<br>
<pre><code class="bash hljs">sudo apt-get install gcc git wget make libncurses-dev flex bison gperf python python-pip python-setuptools python-serial python-cryptography python-future python-pyparsing python-pyelftools</code></pre><br>
   ():<br>
<br>
<pre><code class="bash hljs">sudo mkdir /opt/Espressif<font></font>
sudo chown username /opt/Espressif/<font></font>
<span class="hljs-built_in">cd</span> /opt/Espressif<font></font>
wget https://dl.espressif.com/dl/xtensa-lx106-elf-linux64-1.22.0-100-ge567ec7-5.2.0.tar.gz<font></font>
tar -xzf ./xtensa-lx106-elf-linux64-1.22.0-100-ge567ec7-5.2.0.tar.gz<font></font>
<span class="hljs-built_in">cd</span> xtensa-lx106-elf
<span class="hljs-built_in">export</span> PATH=<span class="hljs-string">"/opt/Espressif/xtensa-lx106-elf/bin:<span class="hljs-variable">$PATH</span>"</span></code></pre><br>
</li>
<li>Smart Things Device SDK C –   .     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="></a>  github,         ,     ,       .<br>
<br>
<pre><code class="bash hljs">git <span class="hljs-built_in">clone</span> https://github.com/SmartThingsCommunity/st-device-sdk-c-ref.git
<span class="hljs-built_in">cd</span> st-device-sdk-c-ref<font></font>
./setup.sh esp8266</code></pre><br>
</li>
</ul><br>
<h2></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die folgenden Geräte werden als Beispiele betrachtet: Smart Switch und Smart Glühbirne. </font><font style="vertical-align: inherit;">Wir werden mit einem intelligenten Switch beginnen, der einfacher ist und keine externen Peripheriegeräte benötigt.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schritt 1. Registrieren Sie Ihr Gerät.</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Arbeit beginnt im </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SmartThings Developer Workspace</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , in dem Sie sich mit Ihrem Samsung-Konto anmelden müssen. </font><font style="vertical-align: inherit;">Dieses Konto wird kostenlos erstellt. Zum Erstellen ist kein Samsung-Telefon erforderlich.&nbsp;</font></font><br>
<br>
<img src="https://habrastorage.org/webt/rz/vc/tb/rzvctbgclnb7ug6rcxccoqsfe88.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In Developer Workspace wird Ihnen sofort angeboten, das erste Projekt zu erstellen. </font><font style="vertical-align: inherit;">Wir sind uns einig, wonach Sie aus den beiden Projektoptionen die Geräteintegration auswählen müssen. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/mh/7z/0f/mh7z0fghp37p2_kfmlj4p3bjkvg.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie können zwischen drei Optionen für die Integration des Geräts wählen:&nbsp;</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SmartThings Cloud Connector - zum Verbinden von Geräten mit eigener Cloud, die mit der SmartThings Cloud verbunden werden</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SmartThings Hub ist für ZigBee-, Z-Wave-, Bluetooth-Geräte und zum Zeitpunkt des Schreibens nicht verfügbar, da der Hub in Russland noch nicht offiziell verkauft wird</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Direkt verbunden ist die einfachste Möglichkeit, ohne Zwischenhändler direkt eine Verbindung herzustellen.&nbsp;</font></font><br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wählen Sie die dritte Option. </font><font style="vertical-align: inherit;">Stellen Sie sich der Einfachheit halber beispielsweise einen Projektnamen vor - SmartSwitch. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/or/dg/5w/ordg5wpiqskc-9kyau_hjlquhaq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fügen Sie ein Geräteprofil hinzu. </font><font style="vertical-align: inherit;">In Bezug auf OOP ist ein Geräteprofil eine solche „Klasse“, und ein bestimmtes Gerät ist eine „Klasseninstanz“. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir müssen die funktionalen Eigenschaften des Geräts im Hinblick auf die SmartThings-Fähigkeit bestimmen. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Informationen</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> zu den allgemeinen „Funktionen“ des Geräts finden Sie </font><font style="vertical-align: inherit;">im Handbuch.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gk/sx/wl/gksxwlnkswip3cxd21fngup5jc0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir füllen die Felder mit unseren Werten aus. </font><font style="vertical-align: inherit;">Beispielsweise kann der Profilname eingegeben werden. Test-Switch-Profil, Beschreibung - beliebiger Text, Gerätetyp - Switch, Hersteller-ID - beliebiger Text. </font><font style="vertical-align: inherit;">"Gerätetyp" wirkt sich auf das Symbol Ihres Geräts und die Benutzeroberfläche aus. </font><font style="vertical-align: inherit;">Es gibt nicht viele mögliche Gerätetypen auf der Liste (obwohl es exotische gibt, zum Beispiel WineCellar - ein Weinschrank). Wenn Sie also Ihren nicht finden, lassen Sie sich nicht entmutigen und wählen Sie einfach den nächstgelegenen und nächstgelegenen. </font><font style="vertical-align: inherit;">Auf dem letzten Bildschirm (Dashboard Control) können Sie nichts ändern. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vergessen Sie nach dem Erstellen des Profils nicht, oben rechts auf die Schaltfläche „Geräteprofil zum Projekt hinzufügen“ zu klicken.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/py/_m/ou/py_mouuxfu6aqpzsuhypzlwxhau.png"><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wichtig: Für alle direkt angeschlossenen Geräte ist ein Health Check erforderlich. </font><font style="vertical-align: inherit;">Fügen Sie es dem Geräteprofil hinzu.&nbsp;</font></font><br>
</li>
<li>  « »   : Switch, Health Check.<br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fügen Sie nun das Authentifizierungsprofil (Onboarding-Profil) hinzu. Kurz gesagt, in diesem Profil können Sie die Bildschirme anpassen, die beim ersten Herstellen und Anmelden angezeigt werden. Geben Sie einen beliebigen Namen und eine dreistellige Nummer ein. Sie können die beiden anderen Bildschirme vorerst überspringen. Wählen Sie im letzten Bildschirm die Bestätigungsoption - Schaltfläche Bestätigen - durch Drücken der Taste am Gerät. In diesem Handbuch wird davon ausgegangen, dass Sie eine Platine mit integriertem Knopf haben. Wenn plötzlich keine Schaltfläche mehr vorhanden ist (z. B. wenn Sie ein anderes ESP-Modul verwenden), können Sie die Option ohne Authentifizierung auswählen. Sie heißt Just Works, dh sie funktioniert ohne Fragen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vergessen Sie auch in Analogie zum vorherigen Beispiel nicht, auf die Schaltfläche "Onboarding zum Projekt hinzufügen" zu klicken.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/_4/8w/k1/_48wk1mewseukstfc4rbvdjx8qw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie müssen nur noch auf die Schaltfläche Bereitstellen klicken. </font><font style="vertical-align: inherit;">Danach können Sie Ihr Gerät in der SmartThings-Anwendung sehen - jedoch nur im Entwicklermodus. </font><font style="vertical-align: inherit;">Wenn Deploy nicht gepusht wird und die Meldung "Bitte fügen Sie einen Modellnamen hinzu" angezeigt wird. Dies bedeutet, dass Sie keine Geräte-Onboarding-ID angegeben haben. Scrollen Sie auf der folgenden Seite nach unten und geben Sie einen beliebigen Namen Ihrer Wahl ein. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/l1/cc/pr/l1ccprru9d4xx-2onzisikmuhlk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt können Sie Ihr virtuelles Gerät auf Ihrem Telefon testen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der gesamte erste Schritt wird im Video detailliert dargestellt:</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/0KLJNC2nj5M" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Registrieren Sie ein Gerät in der Cloud</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bevor Sie mit der eigentlichen Hardware arbeiten, müssen Sie etwas anderes tun. Nach dem Klicken auf die Schaltfläche Bereitstellen sieht der Bildschirm anders aus: Dort wird ein neues Feld für die Geräteidentität angezeigt.&nbsp; </font></font><br>
<img src="https://habrastorage.org/webt/ow/hj/tk/owhjtkpdu8stli8nbv5hykchulo.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um Ihr Gerät in der SmartThings-Cloud zu authentifizieren, müssen Sie die Seriennummer und den öffentlichen Schlüssel eingeben (mit ED25519-Signaturschema). Das ist einfach genug. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dieses Beispiel zeigt, wie Sie mit einem Tool im SDK ein Paar ED25519-Schlüssel erstellen. Sie erhalten die Datei </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">device_info.json</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> als Ergebnis des Programms im </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ordner tools / keygen / linux / output_ {serialNumber}</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Linux-Version von keygen befindet sich in </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">st-iot-device-sdk-c-reference / iot-core / tools / keygen / linux</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> oder in </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">st-device-sdk-c / tools / keygen / linux</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Seriennummer für das Testgerät wird zufällig im STDK + [MNID] -Format + alphanumerischen Format (8 Zeichen) generiert. </font><font style="vertical-align: inherit;">Sie finden Ihre MNID im Entwicklerprofil im Abschnitt Konto verwalten.&nbsp;</font></font><br>
<br>
<img src="https://habrastorage.org/webt/f6/6b/tq/f66btqfqggupzu83olz6lbaru6c.png" width="300"><br>
<br>
<img src="https://habrastorage.org/webt/qv/1k/p0/qv1kp0xha-it8b8xnyaa4hj2fe8.png" width="300"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um den alphanumerischen Teil zu generieren, müssen Sie als Nächstes Ihre MNID (4 Zeichen) als keygen-Parameter eingeben. </font><font style="vertical-align: inherit;">Im folgenden Beispiel lautet die MNID fJ * c.</font></font><br>
<br>
<pre><code class="bash hljs">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-built_in">cd</span> ~/Workspace/st-iot-device-sdk-c-ref/iot-core/tools/keygen<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;./stdk-keygen -m fJ*c<font></font>
&nbsp;&nbsp;&nbsp; Go Device Identity of Developer Workspace.<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;Serial Number:<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;┌──────────┬──────────┐<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;│ STDKfJ*c&nbsp; &nbsp; │ abed**5c   │<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;└──────────┴──────────┘<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;Public Key:<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;waGgyjWIvHhF1LU***FG2hx/4u***ADFHr/ry0j5jbk=<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kopieren Sie "abed ** 5c" aus der Keygen-Ausgabe und fügen Sie sie in die XXXXXXXX-Felder im Abschnitt "Geräteidentitätsregistrierung" ein. </font><font style="vertical-align: inherit;">In einem Fenster werden Sie aufgefordert, den öffentlichen Schlüssel einzugeben. </font></font><br>
<img src="https://habrastorage.org/webt/wv/bd/ft/wvbdftti3tqz7qug9us-jphddq8.png" width="500"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kopieren Sie den öffentlichen Schlüssel aus der Keygen-Ausgabe (in diesem Beispiel "waGgyjWIvHhF1LU *** FG2hx / 4u *** ADFHr / ry0j5jbk =") und fügen Sie ihn in das Feld "Öffentlicher Geräteschlüssel" ein.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gx/wn/60/gxwn602ru15zwlvouhg68zo8918.png"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schritt 2. Gerätefirmware</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sprechen Sie über den Code, den Sie auf das Gerät herunterladen werden. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beispiele für Firmware befinden sich im </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ordner st-device-sdk-c-ref / apps / esp8266 /</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Wir werden uns für das Beispiel </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">st_switch</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> interessieren </font><font style="vertical-align: inherit;">.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Laden Sie </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">onboarding_profile.json</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> im Übersichtsfenster Ihres Geräts im Büro des Entwicklers </font><font style="vertical-align: inherit;">herunter </font><font style="vertical-align: inherit;">.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/o5/he/mn/o5hemnlglw1ak1cu134aqeka4sm.png"><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kopieren Sie </font><font style="vertical-align: inherit;">die heruntergeladene </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">onboarding_profile.json</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Datei </font><font style="vertical-align: inherit;">in das Verzeichnis Ihrer Anwendung - in unserem Fall </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">apps / Esp8266 / st_switch / main</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<pre><code class="plaintext hljs">cd ~/Workspace/st-device-sdk-c-ref/apps/esp8266/st_switch/main/<font></font>
cp ~/Downloads/onboarding_profile.json .<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gibt bereits ein Beispiel für eine solche Datei - ersetzen Sie sie einfach durch Ihre.</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kopieren </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sie auf</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ähnliche Weise die Datei </font><b><font style="vertical-align: inherit;">device_info.json</font></b><font style="vertical-align: inherit;"> aus dem </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ordner tools / keygen / linux / output_ {serialNumber}</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , in dem sich die gerätespezifischen Informationen befinden, in denselben Ordner und ersetzen Sie die vorhandene Datei.</font></font><br>
<br>
<pre><code class="plaintext hljs">cd ~/Workspace/st-device-sdk-c-ref/iot-core/tools/keygen/linux/<font></font>
cp output_{serialNumber}/device_info.json ~/Workspace/st-device-sdk-c-ref/apps/esp8266/st_switch/main/</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In dieser Datei befindet sich neben den Schlüsseln und der Seriennummer die Zeile „firmwareVersion“, die durch die Version Ihres Programms ersetzt werden kann.</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bauen Sie nun das Programm zusammen und flashen Sie es.</font></font><br>
<br>
<pre><code class="plaintext hljs">cd ~/Workspace/st-device-sdk-c-ref<font></font>
./build.sh esp8266 st_switch<font></font>
./build.sh esp8266 st_switch flash<font></font>
./build.sh esp8266 st_switch monitor</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Oder das gleiche, aber kürzer:</font></font><br>
<br>
<pre><code class="plaintext hljs">cd ~/Workspace/st-device-sdk-c-ref<font></font>
./build.sh esp8266 st_switch flash monitor</code></pre><br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
! </font><font style="vertical-align: inherit;">Wenn Sie das Programm in keiner Weise flashen können, haben Sie höchstwahrscheinlich vergessen, die ESP8266-Karte in den Programmiermodus zu versetzen. </font><font style="vertical-align: inherit;">Dies erfolgt normalerweise durch Drücken einer Taste auf der Platine. </font><font style="vertical-align: inherit;">Zum Beispiel kann das Wi-Fi Troyka-Modul übersetzt werden, indem Sie die PROG-Taste gedrückt halten und dann die RESET-Taste drücken und loslassen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vergessen Sie nach dem Herunterladen der Firmware nicht, die Karte neu zu starten.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schritt 3. Verbindung und Steuerung vom Telefon aus</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aktivieren Sie den Entwicklermodus in der SmartThings-App auf Ihrem Telefon. Wie das geht, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">steht</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> auf der offiziellen Website, aber es ist einfacher in Worten zu erklären: Geben Sie die Einstellungen über das "Zahnrad" ein und drücken Sie die Taste "SmartThings Details" für 20 Sekunden. Das Menü "Entwicklermodus" wird unten angezeigt. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/di/vs/hs/divshsyn6jnwbmaox3t_mkpaebe.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unser Gerät sollte in der Liste in der SmartThings-Anwendung sichtbar sein: Starten Sie die Anwendung, klicken Sie auf die Plus-Schaltfläche und dann auf Gerät hinzufügen. Scrollen Sie zum Ende der Herstellerliste und sehen Sie das Symbol "Meine Testgeräte". Klicken Sie darauf und wählen Sie Ihr Gerät aus. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/_o/ks/pa/_okspakmd1pndm_lh-xpbeehyw8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Außerdem: Wenn Sie den Entwicklermodus bereits aktiviert und das Gerät eingeschaltet haben, steht Ihnen ein Popup-Menü zum Hinzufügen dieses bestimmten Geräts zur Verfügung! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Verbindung wird </font><i><font style="vertical-align: inherit;">gestartet</font></i><font style="vertical-align: inherit;"> : </font></font><br>
<br>
<img src="https://habrastorage.org/webt/8n/by/pd/8nbypdf-00xmksrlukpvetjlv2m.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verwalten Sie das Gerät über die SmartThings-Anwendung.&nbsp;</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Gerät wird zunächst als Zugangspunkt angezeigt, da es das Kennwort für Ihr WLAN noch nicht kennt. </font><font style="vertical-align: inherit;">Während des Verbindungsvorgangs geben Sie das Netzwerk an, mit dem das Gerät eine Verbindung herstellen soll. </font><font style="vertical-align: inherit;">Wenn Sie einen versteckten Zugangspunkt haben, kann ESP keine Verbindung herstellen. Wählen Sie daher einen offenen Punkt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Ergebnis ist folgendes: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/--/pw/ne/--pwnex-v3o9iewlsmw7xk-lps8.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In diesem Beispiel ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">st-Schalter</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) steuern Sie die eingebaute LED auf der Platine, indem Sie die Taste auf der Platine selbst drücken. </font><font style="vertical-align: inherit;">Wie Sie sehen, benötigen Sie für dieses Beispiel nicht einmal zusätzliche Peripheriegeräte, sondern nur die ESP8266-Karte selbst. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie können das Gerät auch mit der Taste auf dem Bedienfeld in der mobilen Anwendung ein- </font></font><br>
<br>
<img src="https://habrastorage.org/webt/nz/ze/-7/nzze-7ywppruvlqiafqpz4-xgew.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
und </font><font style="vertical-align: inherit;">ausschalten: </font><font style="vertical-align: inherit;">Wenn Sie die physische Taste drücken, wird natürlich auch der Status der Glühbirne in der Anwendung aktualisiert.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Beispiel für intelligentes Licht</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nachdem Sie das Smart Switch-Beispiel erstellt haben, versuchen wir, die Dinge etwas zu komplizieren. </font><font style="vertical-align: inherit;">Es wird eine RGB-LED geben, und wir werden eine externe Taste ein- und ausschalten und auch eine Farbe über die Anwendung auswählen.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eisen</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Verbindungsschema wird einfach sein: </font></font><br>
<img src="https://habrastorage.org/webt/sv/xh/cf/svxhcfrv9zn7brswyuebeh_jd9o.png" width="500"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und der Schaltplan tut auch nicht weh: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/1z/gu/8v/1zgu8vamare3efr_qqtqt_s6bqa.png" width="500"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie sich die Quelle ansehen (unter: st-device-sdk-c-ref / apps / esp8266 / st_lamp), dann ist die Verbindung dort wie folgt: </font><font style="vertical-align: inherit;">
Sie können die Schlussfolgerungen entsprechend neu </font><font style="vertical-align: inherit;">zuordnen </font><font style="vertical-align: inherit;">Es ist das Modell des Boards, das Sie haben. </font><font style="vertical-align: inherit;">Bitte beachten Sie, dass sich ein Notationssystem (D1, D2 ...) auf der Karte und ein anderes im Code befindet. Dies lässt sich jedoch leicht anhand der Dokumentation für Ihre Karte herausfinden.</font></font><br>
<br>
<code>#define GPIO_OUTPUT_NOTIFICATION_LED 2<br>
#define GPIO_INPUT_BUTTON 5<br>
#define GPIO_OUTPUT_COLORLED_R 16<br>
#define GPIO_OUTPUT_COLORLED_G 14<br>
#define GPIO_OUTPUT_COLORLED_B 12<br>
#define GPIO_OUTPUT_COLORLED_0 13&nbsp;</code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Software-Teil</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je nach Softwareteil werden wir mehrere Schritte ändern:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Beim Hinzufügen von Funktionen müssen Sie Folgendes angeben: Schalter, Schalterstufe, Farbsteuerung, Integritätsprüfung. </font><font style="vertical-align: inherit;">Die Art des Geräts wird sein - Licht.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir nehmen ein Beispiel für Firmware aus demselben Ordner mit Beispielen, es heißt </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">st_lamp</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .&nbsp;</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Oberfläche in der Anwendung </font></font><br>
<br>
<img src="https://habrastorage.org/webt/r9/qh/d_/r9qhd_lnaxlrnd5qcxonqzu2k70.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
sieht folgendermaßen aus </font><font style="vertical-align: inherit;">: </font><font style="vertical-align: inherit;">Wie sie in Aktion aussieht - noch einmal GIF:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/cx/se/xy/cxsexydnzipoeqmkj3n7jq9x4iu.gif"><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fazit</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie haben also ein fertiges Beispiel. </font><font style="vertical-align: inherit;">Sie sehen, dass der größte Teil des Codes bereits für Sie erstellt wurde - alles in Bezug auf Verbindung, Authentifizierung und Geräteschnittstelle. </font><font style="vertical-align: inherit;">Das SmartThings-Beispiel ist insofern wertvoll, als es nicht an ein Hardwaregerät gebunden ist. Sie können beobachten und bewerten, welche Plattformfunktionen in 2k20 erforderlich sind, wenn Sie ein Smart Home entwickeln. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/g8/kt/h0/g8kth04siprq-9s2uwlli2fp6ae.jpeg" align="left"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tatyana Volkova - Autorin des Internet of Things-Lehrplans der Samsung IT Academy, Spezialistin für Programme zur sozialen Verantwortung von Unternehmen im Samsung Research Center</font></font><br>
</i></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de489822/index.html">Generieren von Pseudozufallszahlen mit einem zellularen Automaten: Regel 30</a></li>
<li><a href="../de489824/index.html">7 wissenswerte Open Source-Tools zur Überwachung der Cloud-Sicherheit</a></li>
<li><a href="../de489826/index.html">Informationen zu veränderlichen Methoden eines Math-Objekts in JavaScript</a></li>
<li><a href="../de489828/index.html">Arbeiten mit GeoJSON in Node.js: eine praktische Einführung</a></li>
<li><a href="../de489832/index.html">Künstliche Atomkügelchen: Manipulationen mit Makrocyclen</a></li>
<li><a href="../de489836/index.html">Lidare der Zukunft: 11.000 Laser statt 128</a></li>
<li><a href="../de489838/index.html">Nuxt Server-Side Memory Leak mit SSR (Server Side Rendering)</a></li>
<li><a href="../de489840/index.html">Antriebsanatomie: Festplatten</a></li>
<li><a href="../de489844/index.html">Vergleichende Analyse einiger Java-Dekompilierer</a></li>
<li><a href="../de489848/index.html">Warum verhalten sich meine Kollegen / Mitarbeiter wie @% §?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>