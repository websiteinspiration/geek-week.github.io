<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>♿️ 🚙 ⏭️ OVirt dalam 2 jam. Bagian 3. Pengaturan lanjutan 👬 🚈 🌃</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Pada artikel ini, kita akan melihat sejumlah pengaturan opsional tetapi bermanfaat:
 
 

- penggunaan nama tambahan untuk manajer ;
- otentikasi konek...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>OVirt dalam 2 jam. Bagian 3. Pengaturan lanjutan</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/502178/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pada artikel ini, kita akan melihat sejumlah pengaturan opsional tetapi bermanfaat:</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">penggunaan nama tambahan untuk manajer</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">otentikasi koneksi melalui Direktori yang Aktif</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mutlipathing</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">manajemen daya</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Penggantian sertifikat SSL</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pengarsipan</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">antarmuka manajemen host (kokpit)</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VLAN</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">khusus untuk HPE</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Artikel ini adalah sekuel, mulai melihat oVirt dalam 2 jam </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bagian 1</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bagian 2</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Artikel</font></font></h2><br>
<ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pengantar</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Instalasi manajer (mesin ovirt) dan hypervisor (host) </font></font></a></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pengaturan Lanjut - Kami Ada Di Sini</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Operasi dasar</font></font></a></li>
</ol><a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pengaturan manajer tambahan</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk kenyamanan, kami akan menyediakan paket tambahan:</font></font><br>
<br>
<pre><code class="bash hljs">$ sudo yum install bash-completion vim</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk mengaktifkan pelengkapan otomatis, perintah bash-completion harus dialihkan ke bash.</font></font><br>
<br>
<a name="add-fqdn"></a><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Menambahkan Nama DNS Tambahan</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ini diperlukan saat Anda harus terhubung ke pengelola dengan nama alternatif (CNAME, alias atau hanya nama pendek tanpa akhiran domain). </font><font style="vertical-align: inherit;">Demi alasan keamanan, manajer hanya mengizinkan koneksi menggunakan daftar nama yang diizinkan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Buat file konfigurasi:</font></font><br>
<br>
<pre><code class="bash hljs">$ sudo vim /etc/ovirt-engine/engine.conf.d/99-custom-sso-setup.conf</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
konten berikut:</font></font><br>
<br>
<pre><code class="cmake hljs">SSO_ALTERNATE_ENGINE_FQDNS=<span class="hljs-string">"ovirt.example.com some.alias.example.com ovirt"</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
dan mulai ulang manajer:</font></font><br>
<br>
<pre><code class="bash hljs">$ sudo systemctl restart ovirt-engine</code></pre><br>
<a name="ad-auth"></a><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Konfigurasikan otentikasi melalui AD</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
oVirt memiliki basis pengguna built-in, tetapi penyedia LDAP eksternal juga didukung, termasuk </font><font style="vertical-align: inherit;">IKLAN. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cara paling sederhana untuk konfigurasi tipikal adalah memulai wizard dan memulai ulang manajer:</font></font><br>
<br>
<pre><code class="bash hljs">$ sudo yum install ovirt-engine-extension-aaa-ldap-setup<font></font>
$ sudo ovirt-engine-extension-aaa-ldap-setup<font></font>
$ sudo systemctl restart ovirt-engine</code></pre><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contoh panduan</font></font></b>
                        <div class="spoiler_text">$ <b>sudo ovirt-engine-extension-aaa-ldap-setup</b><br>
Available LDAP implementations:<br>
…<br>
 3 — Active Directory<br>
…<br>
 Please select: <b>3</b><br>
 Please enter Active Directory Forest name: <b>example.com<br>
</b><br>
 Please select protocol to use (startTLS, ldaps, plain) <b>[startTLS]</b>: <br>
 Please select method to obtain PEM encoded CA certificate (File, URL, Inline, System, Insecure): <b>URL</b><br>
 URL: <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow">wwwca.example.com/myRootCA.pem</a></b><br>
 Enter search user DN (for example uid=username,dc=example,dc=com or leave empty for anonymous): <b>CN=oVirt-Engine,CN=Users,DC=example,DC=com</b><br>
 Enter search user password: <b>*password*</b><br>
[ INFO ] Attempting to bind using 'CN=oVirt-Engine,CN=Users,DC=example,DC=com'<br>
 Are you going to use Single Sign-On for Virtual Machines (Yes, No) <b>[Yes]</b>: <br>
 Please specify profile name that will be visible to users <b>[example.com]</b>: <br>
 Please provide credentials to test login flow:<br>
 Enter user name: <b>someAnyUser</b><br>
 Enter user password: <br>
…<br>
[ INFO ] Login sequence executed successfully<br>
…<br>
 Select test sequence to execute (Done, Abort, Login, Search) <b>[Done]</b>: <br>
[ INFO ] Stage: Transaction setup<br>
…<br>
 CONFIGURATION SUMMARY<br>
…<br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Menggunakan wizard cocok untuk sebagian besar kasus. </font><font style="vertical-align: inherit;">Untuk konfigurasi yang rumit, pengaturannya adalah manual. </font><font style="vertical-align: inherit;">Baca lebih lanjut di dokumentasi oVirt, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Users and Roles</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Setelah berhasil menghubungkan Engine ke AD, profil tambahan akan muncul di jendela koneksi, dan pada tab </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Izin</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> untuk objek sistem - kemampuan untuk mengeluarkan izin kepada pengguna dan grup AD. </font><font style="vertical-align: inherit;">Perlu dicatat bahwa direktori eksternal pengguna dan grup tidak hanya AD, tetapi juga IPA, eDirectory, dll.</font></font><br>
<br>
<a name="mpath"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Multipathing</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam lingkungan produksi, sistem penyimpanan harus terhubung ke host oleh beberapa jalur I / O yang independen. </font><font style="vertical-align: inherit;">Sebagai aturan, di CentOS (dan karena itu OVirt) tidak ada masalah dengan membangun beberapa jalur perangkat (find_multipaths ya). </font><font style="vertical-align: inherit;">Pengaturan tambahan untuk FCoE dijelaskan di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bagian 2</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Perlu memperhatikan rekomendasi dari produsen sistem penyimpanan - banyak yang merekomendasikan menggunakan kebijakan round-robin, secara default, layanan Linux digunakan di Enterprise Linux 7.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Misalnya, 3PAR</font></font></b>
                        <div class="spoiler_text">   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow">HPE 3PAR Red Hat Enterprise Linux, CentOS Linux, Oracle Linux, and OracleVM Server Implementation Guide</a> EL   Host  Generic-ALUA Persona 2,     /etc/multipath.conf   :<br>
<br>
<pre><code class="plaintext hljs">defaults {<font></font>
           polling_interval      10<font></font>
           user_friendly_names   no<font></font>
           find_multipaths       yes<font></font>
          }<font></font>
devices {<font></font>
          device {<font></font>
                   vendor                   "3PARdata"<font></font>
                   product                  "VV"<font></font>
                   path_grouping_policy     group_by_prio<font></font>
                   path_selector            "round-robin 0"<font></font>
                   path_checker             tur<font></font>
                   features                 "0"<font></font>
                   hardware_handler         "1 alua"<font></font>
                   prio                     alua<font></font>
                   failback                 immediate<font></font>
                   rr_weight                uniform<font></font>
                   no_path_retry            18<font></font>
                   rr_min_io_rq             1<font></font>
                   detect_prio              yes<font></font>
                   fast_io_fail_tmo         10<font></font>
                   dev_loss_tmo             "infinity"<font></font>
                 }<font></font>
}</code></pre><br>
     :<br>
<br>
<pre><code class="bash hljs">systemctl restart multipathd</code></pre><br>
<img src="https://habrastorage.org/webt/ez/1c/fs/ez1cfs3-mar5uivpfekvtgomway.png"><br>
<i>. 1 —   -  .</i><br>
<br>
<img src="https://habrastorage.org/webt/j_/6r/ll/j_6rll3gmnpqzwhwz_uffranfgo.png"><br>
<i>. 2 —   -   .</i><br>
</div>
                    </div><br>
<a name="pwr-mgmt"></a><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pengaturan pengelolaan daya</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Memungkinkan Anda untuk melakukan, misalnya, reset perangkat keras mesin, jika Engine tidak dapat menerima respons dari Host untuk waktu yang lama. </font><font style="vertical-align: inherit;">Diimplementasikan melalui Agen Pagar. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hitung -&gt; Host -&gt; </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HOST</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Edit -&gt; Manajemen Daya, kemudian aktifkan "Aktifkan Manajemen Daya" dan tambahkan agen - "Tambahkan Agen Pagar" -&gt; </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami mengindikasikan tipe (misalnya, ilo4 harus ditentukan untuk iLO5), nama / alamat antarmuka ipmi, serta nama pengguna / kata sandi. </font><font style="vertical-align: inherit;">Disarankan agar Anda membuat pengguna terpisah (mis., OVirt-PM) dan, dalam kasus iLO, berikan dia hak istimewa:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gabung</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Konsol jarak jauh</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Daya virtual dan reset</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Media virtual</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Konfigurasikan Pengaturan iLO</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mengelola akun pengguna</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jangan tanya kenapa, itu dipilih secara empiris. </font><font style="vertical-align: inherit;">Agen pagar konsol membutuhkan seperangkat hak yang lebih kecil. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ketika mengatur daftar kontrol akses, harus diingat bahwa agen tidak berjalan pada mesin, tetapi pada host "tetangga" (yang disebut Power Management Proxy), yaitu, jika hanya ada satu node di cluster, manajemen daya </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tidak akan</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> bekerja </font><font style="vertical-align: inherit;">.</font></font><br>
<br>
<a name="ssl-cert"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Penyiapan SSL</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Instruksi resmi lengkap ada di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dokumentasi</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , Lampiran D: oVirt dan SSL - Mengganti Sertifikat oVirt Engine SSL / TLS. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sertifikat dapat berasal dari CA perusahaan kami, atau dari otoritas sertifikasi komersial eksternal. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Catatan penting: sertifikat dirancang untuk terhubung ke manajer, itu tidak akan mempengaruhi interaksi antara Engine dan node - mereka akan menggunakan sertifikat yang ditandatangani sendiri yang dikeluarkan oleh Engine. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Persyaratan:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sertifikat CA penerbit dalam format PEM, dengan seluruh rantai ke CA akar (dari penerbit bawahan di awal ke akar di akhir);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sertifikat Apache yang dikeluarkan oleh CA penerbit (juga dilengkapi oleh seluruh rantai sertifikat CA)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kunci pribadi untuk Apache, tanpa kata sandi.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Misalkan otoritas sertifikasi penerbitan kami menjalankan CentOS, yang disebut subca.example.com, dan permintaan, kunci, dan sertifikat terletak di direktori / etc / pki / tls /. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami melakukan pencadangan dan membuat direktori sementara:</font></font><br>
<br>
<pre><code class="bash hljs">$ sudo cp /etc/pki/ovirt-engine/keys/apache.key.nopass /etc/pki/ovirt-engine/keys/apache.key.nopass.`date +%F`<font></font>
$ sudo cp /etc/pki/ovirt-engine/certs/apache.cer /etc/pki/ovirt-engine/certs/apache.cer.`date +%F`<font></font>
$ sudo mkdir /opt/certs<font></font>
$ sudo chown mgmt.mgmt /opt/certs</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unduh sertifikat, jalankan dari workstation kami atau transfer dengan cara lain yang mudah:</font></font><br>
<br>
<pre><code class="bash hljs">[myuser@mydesktop] $ scp -3 causer@subca.example.com:/etc/pki/tls/cachain.pem mgmt@ovirt.example.com:/opt/certs<font></font>
[myuser@mydesktop] $ scp -3 causer@subca.example.com:/etc/pki/tls/private/ovirt.key mgmt@ovirt.example.com:/opt/certs<font></font>
[myuser@mydesktop] $ scp -3 causer@subca.example.com/etc/pki/tls/certs/ovirt.crt mgmt@ovirt.example.com:/opt/certs</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Akibatnya, Anda akan melihat semua 3 file:</font></font><br>
<br>
<pre><code class="bash hljs">$ ls /opt/certs<font></font>
cachain.pem  ovirt.crt  ovirt.key</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Instalasi Sertifikat</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami menyalin file dan memperbarui daftar kepercayaan:</font></font><br>
<br>
<pre><code class="bash hljs">$ sudo cp /opt/certs/cachain.pem /etc/pki/ca-trust/<span class="hljs-built_in">source</span>/anchors<font></font>
$ sudo update-ca-trust<font></font>
$ sudo rm /etc/pki/ovirt-engine/apache-ca.pem<font></font>
$ sudo cp /opt/certs/cachain.pem /etc/pki/ovirt-engine/apache-ca.pem<font></font>
$ sudo cp /opt/certs/ovirt03.key /etc/pki/ovirt-engine/keys/apache.key.nopass<font></font>
$ sudo cp /opt/certs/ovirt03.crt /etc/pki/ovirt-engine/certs/apache.cer<font></font>
$ sudo systemctl restart httpd.service</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tambah / perbarui file konfigurasi:</font></font><br>
<br>
<pre><code class="bash hljs">$ sudo vim /etc/ovirt-engine/engine.conf.d/99-custom-truststore.conf</code></pre><br>
<pre><code class="plaintext hljs">ENGINE_HTTPS_PKI_TRUST_STORE="/etc/pki/java/cacerts"<font></font>
ENGINE_HTTPS_PKI_TRUST_STORE_PASSWORD=""</code></pre><br>
<pre><code class="bash hljs">$ sudo vim /etc/ovirt-engine/ovirt-websocket-proxy.conf.d/10-setup.conf</code></pre><br>
<pre><code class="plaintext hljs">SSL_CERTIFICATE=/etc/pki/ovirt-engine/certs/apache.cer<font></font>
SSL_KEY=/etc/pki/ovirt-engine/keys/apache.key.nopass</code></pre><br>
<pre><code class="bash hljs">$ sudo vim /etc/ovirt-imageio-proxy/ovirt-imageio-proxy.conf</code></pre><br>
<pre><code class="plaintext hljs"># Key file for SSL connections<font></font>
ssl_key_file = /etc/pki/ovirt-engine/keys/apache.key.nopass<font></font>
# Certificate file for SSL connections<font></font>
ssl_cert_file = /etc/pki/ovirt-engine/certs/apache.cer</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selanjutnya, kami memulai kembali semua layanan yang terpengaruh:</font></font><br>
<br>
<pre><code class="bash hljs">$ sudo systemctl restart ovirt-provider-ovn.service<font></font>
$ sudo systemctl restart ovirt-imageio-proxy<font></font>
$ sudo systemctl restart ovirt-websocket-proxy<font></font>
$ sudo systemctl restart ovirt-engine.service</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selesai! </font><font style="vertical-align: inherit;">Saatnya untuk terhubung ke manajer dan memverifikasi bahwa koneksi dilindungi oleh sertifikat SSL yang ditandatangani.</font></font><br>
<br>
<a name="backup-mgr"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pengarsipan</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di mana tanpa dia! </font><font style="vertical-align: inherit;">Pada bagian ini, kita akan membahas pengarsipan manajer, pengarsipan VM adalah masalah yang terpisah. </font><font style="vertical-align: inherit;">Kami akan membuat salinan arsip sekali sehari dan meletakkannya di NFS, misalnya, pada sistem yang sama di mana kami menempatkan gambar ISO - mynfs01.example.com:/exports/ovirt-backup. </font><font style="vertical-align: inherit;">Tidak disarankan untuk menyimpan arsip di mesin yang sama di mana Engine berjalan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pasang dan aktifkan autofs:</font></font><br>
<br>
<pre><code class="bash hljs">$ sudo yum install autofs<font></font>
$ sudo systemctl <span class="hljs-built_in">enable</span> autofs<font></font>
$ sudo systemctl start autofs</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Buat skrip:</font></font><br>
<br>
<pre><code class="bash hljs">$ sudo vim /etc/cron.daily/make.oVirt.backup.sh</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
konten berikut:</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-meta">#!/bin/bash
</span>
datetime=`date +<span class="hljs-string">"%F.%R"</span>`<font></font>
backupdir=<span class="hljs-string">"/net/mynfs01.example.com/exports/ovirt-backup"</span>
filename=<span class="hljs-string">"<span class="hljs-variable">$backupdir</span>/`hostname --short`.`date +"</span>%F.%R<span class="hljs-string">"`"</span>
engine-backup --mode=backup --scope=all --file=<span class="hljs-variable">$filename</span>.data --<span class="hljs-built_in">log</span>=<span class="hljs-variable">$filename</span>.<span class="hljs-built_in">log</span>
<span class="hljs-comment">#uncomment next line for autodelete files older 30 days </span>
<span class="hljs-comment">#find $backupdir -type f -mtime +30 -exec rm -f {} \;</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami membuat file dapat dieksekusi:</font></font><br>
<br>
<pre><code class="bash hljs">$ sudo chmod a+x /etc/cron.daily/make.oVirt.backup.sh</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang setiap malam kami akan menerima arsip pengaturan manajer.</font></font><br>
<br>
<a name="cockpit"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Antarmuka Manajemen Host</font></font></h2><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cockpit</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> adalah antarmuka administrasi modern untuk sistem Linux. </font><font style="vertical-align: inherit;">Dalam hal ini, ia memainkan peran yang dekat dengan antarmuka web ESXi. </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/587/d56/5c8/587d565c8e0250045773c2772b3fb112.png" alt="gambar"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ara. </font><font style="vertical-align: inherit;">3 - penampilan panel. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ini menginstal sangat sederhana, Anda memerlukan paket kokpit dan plugin kokpit-ovirt-dashboard:</font></font><br>
<br>
<pre><code class="bash hljs">$ sudo yum install cockpit cockpit-ovirt-dashboard -y</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Menghidupkan Cockpit:</font></font><br>
<br>
<pre><code class="bash hljs">$ sudo systemctl <span class="hljs-built_in">enable</span> --now cockpit.socket</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pengaturan Firewall:</font></font><br>
<br>
<pre><code class="bash hljs">sudo firewall-cmd --add-service=cockpit<font></font>
sudo firewall-cmd --add-service=cockpit --permanent</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang Anda dapat terhubung ke host: https: // [Host IP atau FQDN]: 9090</font></font><br>
<br>
<a name="vlans"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VLAN</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Baca lebih lanjut tentang jaringan dalam </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dokumentasi</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Ada banyak kemungkinan, di sini kami menggambarkan koneksi jaringan virtual. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk menghubungkan subnet lain, mereka harus terlebih dahulu dijelaskan dalam konfigurasi: Jaringan -&gt; Jaringan -&gt; Baru, di sini hanya nama yang wajib diisi; kotak centang Jaringan VM, yang memungkinkan mesin untuk menggunakan jaringan ini, dihidupkan, dan untuk menghubungkan tag, aktifkan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aktifkan penandaan VLAN</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , masukkan nomor VLAN dan klik OK. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang Anda harus pergi ke Compute -&gt; Hosts -&gt; kvmNN -&gt; Network Interfaces -&gt; Setup Host Networks hosts. Tarik jaringan menambahkan dari sisi kanan Networks Logical belum ditetapkan ke kiri di Jaringan Logical Ditugaskan: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/wq/kn/wn/wqknwnvkf13ojuxjidpxuc6s9fq.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gambar. 4 - sebelum menambahkan jaringan. </font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/2j/ei/gc/2jeigcdyhds6kfqqrvs-2gtt4zk.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ara. 5 - setelah menambahkan jaringan.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk menghubungkan beberapa jaringan ke host secara massal, akan lebih mudah untuk memberi mereka label saat membuat jaringan, dan menambahkan jaringan dengan label. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setelah jaringan dibuat, host akan masuk ke status Non Operasional sampai jaringan ditambahkan ke semua node cluster. </font><font style="vertical-align: inherit;">Perilaku ini disebabkan oleh bendera Require All pada tab Cluster saat membuat jaringan baru. </font><font style="vertical-align: inherit;">Dalam kasus ketika jaringan tidak diperlukan pada semua node cluster, gejala ini dapat dinonaktifkan, maka jaringan ketika ditambahkan ke host akan di sebelah kanan di bagian Tidak Diperlukan dan Anda dapat memilih apakah akan menghubungkannya ke host tertentu. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zr/10/ey/zr10eyeksh3-j_kqd1ezkcgytnw.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ara. </font><font style="vertical-align: inherit;">6 - pemilihan tanda kebutuhan jaringan.</font></font></i><br>
<br>
<a name="hpe"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Khusus HPE</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hampir semua produsen memiliki alat yang meningkatkan kegunaan produk mereka. </font><font style="vertical-align: inherit;">Menggunakan contoh HPE, AMS (Agentless Management Service, amsd untuk iLO5, hp-ams untuk iLO4) dan SSA (Smart Storage Administrator, bekerja dengan pengontrol disk), dll. Sangat berguna.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hubungkan Repositori HPE</font></font></b>
                        <div class="spoiler_text">     HPE:<br>
<br>
<pre><code class="bash hljs">$ sudo rpm --import https://downloads.linux.hpe.com/SDR/hpePublicKey2048_key1.pub<font></font>
$ sudo vim /etc/yum.repos.d/mcp.repo</code></pre><br>
 :<br>
<br>
<pre><code class="plaintext hljs">[mcp]<font></font>
name=Management Component Pack<font></font>
baseurl=http://downloads.linux.hpe.com/repo/mcp/centos/$releasever/$basearch/current/<font></font>
enabled=1<font></font>
gpgkey=file:///etc/pki/rpm-gpg/GPG-KEY-mcp<font></font>
<font></font>
[spp]<font></font>
name=Service Pack for ProLiant<font></font>
baseurl=http://downloads.linux.hpe.com/SDR/repo/spp/RHEL/$releasever/$basearch/current/<font></font>
enabled=1<font></font>
gpgkey=file:///etc/pki/rpm-gpg/GPG-KEY-mcp</code></pre><br>
       ():<br>
<br>
<pre><code class="bash hljs">$ sudo yum --disablerepo=<span class="hljs-string">"*"</span> --enablerepo=<span class="hljs-string">"mcp"</span> list available<font></font>
$ yum info amsd</code></pre><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Instalasi dan peluncuran:</font></font><br>
<br>
<pre><code class="bash hljs">$ sudo yum install amsd ssacli<font></font>
$ sudo systemctl start amsd</code></pre><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contoh utilitas pengontrol disk</font></font></b>
                        <div class="spoiler_text"><img src="https://habrastorage.org/webt/6_/bh/qw/6_bhqwnjgtqbx7eugqzur06mxxo.png"><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Itu saja untuk saat ini. </font><font style="vertical-align: inherit;">Dalam artikel berikut ini saya berencana untuk memberitahukan beberapa operasi dasar dan aplikasi. </font><font style="vertical-align: inherit;">Misalnya, cara membuat VDI di oVirt.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id502156/index.html">Rambler v. NGINX Kasus: Resiko Pidana Digitalisasi Roundtable 16 Mei</a></li>
<li><a href="../id502158/index.html">Bagaimana mengatur pengujian untuk mempercepat dan menstabilkan rilis produk. Bagian 2</a></li>
<li><a href="../id502160/index.html">Pengembangan aplikasi seluler khusus tidak mahal: kenyataan atau ilusi</a></li>
<li><a href="../id502166/index.html">Hantu Windows 3.1</a></li>
<li><a href="../id502176/index.html">Go: deserialisasi JSON dengan pengetikan yang salah, atau cara mengatasi kesalahan pengembang API</a></li>
<li><a href="../id502180/index.html">Hari perimeter menghilang. Solusi Keamanan dari Microsoft dan Mitra</a></li>
<li><a href="../id502182/index.html">Lagi tentang MikroTik atau SOCKS5 yang sudah lama ditunggu-tunggu</a></li>
<li><a href="../id502186/index.html">Webinar. Keamanan Informasi: SOC karantina</a></li>
<li><a href="../id502196/index.html">В подходе к математике столетней давности найдены новые ключи к разгадке природы времени</a></li>
<li><a href="../id502200/index.html">Entropi: bagaimana Pohon Keputusan membuat keputusan</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>