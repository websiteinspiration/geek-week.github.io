<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧗🏿 🏔️ ⛎ Belajar Mini Stepper Motor 🦇 🕋 🤷🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Motor stepper banyak digunakan dalam industri modern dan produk buatan sendiri. Mereka digunakan jika perlu untuk memastikan keakuratan penentuan posi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Belajar Mini Stepper Motor</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/498788/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Motor stepper banyak digunakan dalam industri modern dan produk buatan sendiri. Mereka digunakan jika perlu untuk memastikan keakuratan penentuan posisi komponen mekanik, tanpa menggunakan umpan balik dan pengukuran yang akurat. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hari ini saya ingin berbicara tentang jenis motor stepper khusus - motor stepper miniatur, yang digunakan dalam pembangunan sistem optik. Kami akan melihat lebih dekat pada perangkat mereka dan bagaimana mengontrol motor sekecil itu.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/zh/sz/_x/zhsz_xl6lm4btv11g953x7e2kwa.jpeg"><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Motor stepper adalah motor listrik brushless (tanpa sikat) dengan beberapa belitan (fase) yang terletak di stator dan magnet (sering permanen) pada rotor. Dengan memberikan tegangan pada belitan stator, kita dapat memperbaiki posisi rotor, dan dengan memberikan tegangan pada belitan, kita dapat secara berturut-turut mendapatkan pergerakan rotor dari satu posisi ke posisi lain (langkah), dan langkah ini memiliki nilai sudut tetap. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami tidak akan memikirkan pertimbangan masing-masing jenis motor stepper. Banyak yang telah ditulis tentang ini di jaringan dan, misalnya, di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sini</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya ingin berbicara tentang jenis motor stepper khusus - motor stepper miniatur, yang digunakan dalam pembangunan sistem optik. </font><font style="vertical-align: inherit;">Anak-anak ini tersedia untuk dijual. </font><font style="vertical-align: inherit;">Tetapi pada jaringan, terutama dalam berbahasa Rusia, ada sangat sedikit informasi tentang motor tersebut. </font><font style="vertical-align: inherit;">Karena itu, ketika saya perlu menggunakannya dalam proyek saya, saya harus cukup mencari informasi dan melakukan beberapa percobaan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya akan membagikan hasil pencarian dan percobaan saya di artikel ini. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami akan mempertimbangkan manajemen motor kecil tersebut, yaitu:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">driver L293D + mikrokontroler ATtiny44;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Driver TMC2208 + mikrokontroler ATtiny44;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mikrokontroler ATtiny44 (tanpa driver).</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sebenarnya, hanya poin terakhir yang dapat menimbulkan pertanyaan di sini. </font><font style="vertical-align: inherit;">Percayalah, saya juga terkejut ketika saya menemukan klip video (ini </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dia</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), di mana orang itu hanya mengambil dan langsung menghubungkan motor stepper ke pin mikrokontroler! </font><font style="vertical-align: inherit;">Tapi mari kita bicara tentang semuanya secara berurutan.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kenalan</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pertama, lihat sedikit penampilan pahlawan kita: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/s9/6n/lu/s96nlurhh1cpirq8g8zrtv1t_t0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dia benar-benar sangat kecil! Menurut buku pintar Petrenko S.F. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
"Motor piezoelektrik dalam instrumentasi", motor elektromagnetik yang lebih kecil, pada prinsipnya, tidak mungkin untuk dibuat ... yaitu, itu mungkin, tetapi dengan penurunan diameter kawat dari mana gulungan dibuat, semakin banyak energi yang dihamburkan sebagai panas ke lingkungan, yang mengarah pada penurunan efisiensi motor dan membuat penggunaannya tidak rasional. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dari yang luar biasa, dapat dicatat bahwa porosnya sangat pendek dan memiliki alur khusus untuk memasang gear atau tuas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dua belitan terlihat jelas, yang bahkan ditutupi dengan isolasi berbagai warna. Jadi, motor kita kemungkinan besar milik kelas </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">motor stepper bipolar</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mari kita lihat cara kerjanya: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/5v/ds/2w/5vds2wkt6kjahi0m55emzq5ipmc.jpeg"><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Saya pikir kenalan kita dengan motor ini tidak akan lengkap jika kita tidak melihat apa yang ada di dalamnya. Itu selalu menarik untuk melihat ke dalam mekanisme! Bukan begitu?</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Sebenarnya, kami tidak melihat sesuatu yang tidak biasa. Rotor bermagnet. Tidak ada bantalan di mana pun, semuanya ada di bushing. Hub belakang ditekan ke rumah engine. Bagian depan tidak diperbaiki oleh apa pun. Menariknya, bodi mesin itu dirakit dengan spot welding. Jadi sampul depan harus dipotong. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang kita beralih ke masalah koneksi dan karakteristik kelistrikannya. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pastikan dia bipolar dengan membunyikan belitan. Benar-benar bipolar, seperti pada gambar di atas. </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Perlawanan berliku sekitar 26 ohm</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , meskipun penjual mengindikasikan 14 ohm.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Deskripsi mengatakan bahwa </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tegangan suplai 5V</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Meskipun kita semua tahu bahwa untuk motor stepper, arus yang akan digunakan belitannya penting. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami mencoba terhubung.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eksperimen No. 1. </font><font style="vertical-align: inherit;">L293D + ATtiny44</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seperti yang kita ketahui, untuk mengendalikan motor stepper bipolar, perlu tidak hanya untuk memberi tegangan pada dua belitan dalam urutan yang diinginkan, tetapi juga untuk mengubah arah arus dalam belitan ini, dan untuk melakukan hal ini secara independen satu sama lain. Untuk ini, setiap belitan membutuhkan jembatan-H sendiri. Agar tidak menghalanginya dari transistor, chip L293D yang sudah jadi diambil. Keunggulan lainnya - chip ini memiliki pin khusus Enable1 dan Enable2, yang menghidupkan dan mematikan setiap jembatan. Mereka dapat digunakan untuk memberikan sinyal PWM, dengan demikian, dimungkinkan untuk mengontrol tegangan suplai setiap jembatan. Mengapa ini diperlukan, kita akan melihat lebih jauh. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selain itu, L293D dapat mengganti </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tegangan hingga 36V dan menghasilkan hingga 1,2A per saluran</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, yang seharusnya cukup untuk menyalakan belitan motor kami. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jadi, diagram: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ap/eu/sm/apeusmkkhcddqmhrdrmvwkpjbsk.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Input kontrol L293D terhubung ke output OC0A dan OC0B, yang akan memungkinkan kita untuk mengirim sinyal PWM kepada mereka di masa depan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami akan mem-flash controller melalui in-circuit programmer (tidak ditampilkan dalam diagram). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Inilah yang terlihat seperti rangkaian rakitan di papan tempat memotong roti: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/gx/87/jg/gx87jgsrgeuethu-dotn-_a-fsc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan inilah bagaimana uji </font></font><br>
<br>
<img src="https://habrastorage.org/webt/xr/so/xw/xrsoxwzgqmg1q80dx9dwecpcg68.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
coba </font><font style="vertical-align: inherit;">kami berada: </font><font style="vertical-align: inherit;">Sekarang Anda dapat mulai bereksperimen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami menghitung arus yang akan mengalir melalui belitan motor ketika mereka terhubung ke tegangan 5V: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I = U / R = 5V / 26Ohm = 190mA </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sangat kecil. Saya ingin tahu berapa lama dia bisa menahan arus dan tidak terlalu panas.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami menyertakan ammeter dan voltmeter di sirkuit salah satu belitan, dan mengukur nilai yang sesuai ketika daya disuplai ke belitan ini melalui pengemudi. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ketika tegangan turun di belitan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.56V, ammeter menunjukkan arus 150mA</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , dan jelas terlihat bagaimana besarnya arus mulai turun selama pemanasan belitan. Perlu dicatat bahwa tidak begitu panas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setelah memastikan bahwa tegangan 5V untuk motor tidak berbahaya, coba putar mereka ke arah yang berbeda. Dan sekarang beberapa kata yang akan kita katakan tentang mode operasi motor stepper. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ini cukup baik dikatakan di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sini</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami tidak akan mengulangi, tetapi ingat bahwa motor stepper dapat beroperasi dalam tiga mode:</font></font><br>
<br>
<ul>
<li>           ,   ,       . </li>
<li>          ,  ,      ,     .</li>
<li>        ,     ,      ,   (   )    . ,  ,          ( , ,   ).   .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mari kita coba untuk mengimplementasikan dua mode pertama pada chip L293D, dan untuk mode micro-step, kita akan meninggalkan driver khusus dari percobaan kedua. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kode sumber program adalah sebagai berikut:</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kode sumber WinAVR</font></font></b>
                        <div class="spoiler_text"><pre><code class="cs hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> F_CPU 8000000UL  //    </span><font></font>
<font></font>
<span class="hljs-comment">//    L: E2; H:DF; Ex:FF; </span>
<span class="hljs-comment">//    8         (     8)</span><font></font>
<font></font>
<span class="hljs-meta">#include &lt;avr/io.h&gt; //   </span><font></font>
<font></font>
<span class="hljs-meta">#include &lt;util/delay.h&gt; //   </span><font></font>
<font></font>
<span class="hljs-meta">#include &lt;avr/interrupt.h&gt; //   </span><font></font>
<font></font>
<span class="hljs-comment">//   </span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> LED_pin PA5</span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> LED_ON PORTA |=(1&lt;&lt;LED_pin)</span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> LED_OFF PORTA &amp;=(~(1&lt;&lt;LED_pin))</span><font></font>
<font></font>
<span class="hljs-comment">//     L293DD</span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> PWM_1 PB2 // OC0A (EN1)</span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> PWM_2 PA7 // OC0B (EN2)</span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> PWM_1_value OCR0A</span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> PWM_2_value OCR0B</span><font></font>
<font></font>
<span class="hljs-comment">//       L293D</span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> IN1 PA0 //  PORTA</span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> IN2 PA1</span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> IN3 PB1 //  PORTB</span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> IN4 PB0</span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">delay_microsecond</span> (<span class="hljs-params">unsigned <span class="hljs-keyword">int</span> delay_time</span>)</span> { <span class="hljs-comment">//     </span><font></font>
    <font></font>
	<span class="hljs-comment">//      </span><font></font>
<font></font>
    <span class="hljs-keyword">for</span>(unsigned <span class="hljs-keyword">int</span> delay_us = <span class="hljs-number">0</span>; delay_us&lt;delay_time; delay_us++) {<font></font>
	<font></font>
	    _delay_us(<span class="hljs-number">1</span>);<font></font>
	<font></font>
	}<font></font>
<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">delay_millisecond</span> (<span class="hljs-params">unsigned <span class="hljs-keyword">int</span> delay_time</span>)</span> { <span class="hljs-comment">//     </span><font></font>
<font></font>
    <span class="hljs-keyword">for</span>(unsigned <span class="hljs-keyword">int</span> delay_ms = <span class="hljs-number">0</span>; delay_ms&lt;delay_time; delay_ms++) {<font></font>
	<font></font>
	    _delay_ms(<span class="hljs-number">1</span>);<font></font>
	<font></font>
	}<font></font>
<font></font>
}<font></font>
<font></font>
<span class="hljs-comment">//      </span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">step_1_one_phase</span> (<span class="hljs-params"><span class="hljs-keyword">void</span></span>)</span> {<font></font>
<font></font>
    PORTB &amp;=(~((<span class="hljs-number">1</span>&lt;&lt;IN3)|(<span class="hljs-number">1</span>&lt;&lt;IN4)));<font></font>
	<font></font>
	PORTA &amp;=(~(<span class="hljs-number">1</span>&lt;&lt;IN2)); <span class="hljs-comment">//   </span><font></font>
  <font></font>
    PORTA |=(<span class="hljs-number">1</span>&lt;&lt;IN1); <span class="hljs-comment">//    </span><font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">step_2_one_phase</span> (<span class="hljs-params"><span class="hljs-keyword">void</span></span>)</span> {<font></font>
<font></font>
    PORTA &amp;=(~((<span class="hljs-number">1</span>&lt;&lt;IN1)|(<span class="hljs-number">1</span>&lt;&lt;IN2)));<font></font>
	<font></font>
	PORTB &amp;=(~(<span class="hljs-number">1</span>&lt;&lt;IN3));<font></font>
  <font></font>
    PORTB |=(<span class="hljs-number">1</span>&lt;&lt;IN4);<font></font>
  <font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">step_3_one_phase</span> (<span class="hljs-params"><span class="hljs-keyword">void</span></span>)</span> {<font></font>
<font></font>
    PORTB &amp;=(~((<span class="hljs-number">1</span>&lt;&lt;IN3)|(<span class="hljs-number">1</span>&lt;&lt;IN4))); <font></font>
	 <font></font>
	PORTA &amp;=(~(<span class="hljs-number">1</span>&lt;&lt;IN1));<font></font>
  <font></font>
    PORTA |=(<span class="hljs-number">1</span>&lt;&lt;IN2);<font></font>
  <font></font>
	<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">step_4_one_phase</span> (<span class="hljs-params"><span class="hljs-keyword">void</span></span>)</span> {<font></font>
<font></font>
    PORTA &amp;=(~((<span class="hljs-number">1</span>&lt;&lt;IN1)|(<span class="hljs-number">1</span>&lt;&lt;IN2))); <font></font>
	<font></font>
	PORTB &amp;=(~(<span class="hljs-number">1</span>&lt;&lt;IN4));<font></font>
    <font></font>
    PORTB |=(<span class="hljs-number">1</span>&lt;&lt;IN3);<font></font>
  <font></font>
}<font></font>
<font></font>
<span class="hljs-comment">//      </span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">step_1_two_phase</span> (<span class="hljs-params"><span class="hljs-keyword">void</span></span>)</span> {<font></font>
<font></font>
    PORTB |=(<span class="hljs-number">1</span>&lt;&lt;IN4);  <font></font>
  <font></font>
    PORTB &amp;=(~(<span class="hljs-number">1</span>&lt;&lt;IN3));<font></font>
  <font></font>
    PORTA |=(<span class="hljs-number">1</span>&lt;&lt;IN1);<font></font>
  <font></font>
    PORTA &amp;=(~(<span class="hljs-number">1</span>&lt;&lt;IN2));<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">step_2_two_phase</span> (<span class="hljs-params"><span class="hljs-keyword">void</span></span>)</span> {<font></font>
<font></font>
    PORTA &amp;=(~(<span class="hljs-number">1</span>&lt;&lt;IN2));<span class="hljs-comment">//2</span><font></font>
	<font></font>
	PORTA |=(<span class="hljs-number">1</span>&lt;&lt;IN1);<font></font>
  <font></font>
    PORTB |=(<span class="hljs-number">1</span>&lt;&lt;IN3);<font></font>
  <font></font>
    PORTB &amp;=(~(<span class="hljs-number">1</span>&lt;&lt;IN4));<font></font>
  <font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">step_3_two_phase</span> (<span class="hljs-params"><span class="hljs-keyword">void</span></span>)</span> {<font></font>
<font></font>
    PORTB |=(<span class="hljs-number">1</span>&lt;&lt;IN3);<span class="hljs-comment">//3</span><font></font>
  <font></font>
    PORTB &amp;=(~(<span class="hljs-number">1</span>&lt;&lt;IN4));<font></font>
	<font></font>
	PORTA &amp;=(~(<span class="hljs-number">1</span>&lt;&lt;IN1));<font></font>
  <font></font>
    PORTA |=(<span class="hljs-number">1</span>&lt;&lt;IN2);<font></font>
  <font></font>
	<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">step_4_two_phase</span> (<span class="hljs-params"><span class="hljs-keyword">void</span></span>)</span> {<font></font>
<font></font>
    PORTA |=(<span class="hljs-number">1</span>&lt;&lt;IN2);<span class="hljs-comment">//4</span><font></font>
  <font></font>
    PORTA &amp;=(~(<span class="hljs-number">1</span>&lt;&lt;IN1));<font></font>
    <font></font>
    PORTB |=(<span class="hljs-number">1</span>&lt;&lt;IN4);<font></font>
  <font></font>
    PORTB &amp;=(~(<span class="hljs-number">1</span>&lt;&lt;IN3));<font></font>
  <font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">stepper_OFF</span> (<span class="hljs-params"><span class="hljs-keyword">void</span></span>)</span> { <span class="hljs-comment">//   </span><font></font>
<font></font>
	<span class="hljs-comment">//    ,       ,    </span><font></font>
	<font></font>
	PORTA &amp;=(~((<span class="hljs-number">1</span>&lt;&lt;IN1)|(<span class="hljs-number">1</span>&lt;&lt;IN2)));<font></font>
	<font></font>
	PORTB &amp;=(~((<span class="hljs-number">1</span>&lt;&lt;IN3)|(<span class="hljs-number">1</span>&lt;&lt;IN4)));<font></font>
	<font></font>
}<font></font>
<font></font>
unsigned <span class="hljs-keyword">char</span> step_counter = <span class="hljs-number">0</span>; <font></font>
<font></font>
<span class="hljs-comment">//      </span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">L293D_step</span> (<span class="hljs-params">unsigned <span class="hljs-keyword">int</span> step_quantity, unsigned <span class="hljs-keyword">char</span> direction, unsigned <span class="hljs-keyword">int</span> step_delay, unsigned <span class="hljs-keyword">char</span> phase</span>)</span> { <span class="hljs-comment">//      </span><font></font>
<font></font>
    <span class="hljs-keyword">while</span>(step_quantity&gt;<span class="hljs-number">0</span>) { <span class="hljs-comment">//  ,      </span><font></font>
<font></font>
        <span class="hljs-keyword">switch</span>(direction) { <span class="hljs-comment">//           </span><font></font>
	<font></font>
			<span class="hljs-keyword">case</span> <span class="hljs-string">'F'</span>:
				<span class="hljs-keyword">if</span>(step_counter&lt;<span class="hljs-number">3</span>) { step_counter++; } <span class="hljs-keyword">else</span> { step_counter=<span class="hljs-number">0</span>; }
			<span class="hljs-keyword">break</span>;<font></font>
		<font></font>
			<span class="hljs-keyword">case</span> <span class="hljs-string">'B'</span>:
				<span class="hljs-keyword">if</span>(step_counter&gt;<span class="hljs-number">0</span>) { step_counter--; } <span class="hljs-keyword">else</span> { step_counter=<span class="hljs-number">3</span>; }
			<span class="hljs-keyword">break</span>;<font></font>
		<font></font>
		}<font></font>
		<font></font>
		<span class="hljs-keyword">switch</span>(phase) { <span class="hljs-comment">//     </span><font></font>
		<font></font>
		    <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>: <font></font>
			<font></font>
				<span class="hljs-keyword">switch</span>(step_counter) { <span class="hljs-comment">//   </span><font></font>
	<font></font>
					<span class="hljs-keyword">case</span> <span class="hljs-number">0</span>:<font></font>
						step_1_two_phase_DL();<font></font>
					<span class="hljs-keyword">break</span>;<font></font>
		<font></font>
					<span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:<font></font>
						step_2_two_phase_DL();<font></font>
					<span class="hljs-keyword">break</span>;<font></font>
		<font></font>
					<span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:<font></font>
						step_3_two_phase_DL();<font></font>
					<span class="hljs-keyword">break</span>;<font></font>
		<font></font>
					<span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:<font></font>
						step_4_two_phase_DL();<font></font>
					<span class="hljs-keyword">break</span>;<font></font>
	<font></font>
				}<font></font>
			<font></font>
			<span class="hljs-keyword">break</span>;<font></font>
			<font></font>
			<span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:<font></font>
			<font></font>
				<span class="hljs-keyword">switch</span>(step_counter) { <span class="hljs-comment">//   </span><font></font>
	<font></font>
					<span class="hljs-keyword">case</span> <span class="hljs-number">0</span>:<font></font>
						step_1_two_phase_DL();<font></font>
					<span class="hljs-keyword">break</span>;<font></font>
		<font></font>
					<span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:<font></font>
						step_2_two_phase_DL();<font></font>
					<span class="hljs-keyword">break</span>;<font></font>
		<font></font>
					<span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:<font></font>
						step_3_two_phase_DL();<font></font>
					<span class="hljs-keyword">break</span>;<font></font>
		<font></font>
					<span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:<font></font>
						step_4_two_phase_DL();<font></font>
					<span class="hljs-keyword">break</span>;<font></font>
	<font></font>
				}<font></font>
			<font></font>
			<span class="hljs-keyword">break</span>;<font></font>
		<font></font>
		}<font></font>
		<font></font>
    delay_millisecond(step_delay); <span class="hljs-comment">//       </span><font></font>
	<font></font>
	step_quantity--; <font></font>
	<font></font>
	} <font></font>
<font></font>
}<font></font>
<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">PWM_init</span> (<span class="hljs-params"><span class="hljs-keyword">void</span></span>)</span> { <span class="hljs-comment">//   </span><font></font>
<font></font>
    DDRB |=(<span class="hljs-number">1</span>&lt;&lt;PWM_1);<font></font>
<font></font>
    DDRA |=(<span class="hljs-number">1</span>&lt;&lt;PWM_2);<font></font>
<font></font>
    TCCR0A = (<span class="hljs-number">1</span>&lt;&lt;WGM01)|(<span class="hljs-number">1</span>&lt;&lt;WGM00)|(<span class="hljs-number">1</span>&lt;&lt;COM0A1)|(<span class="hljs-number">0</span>&lt;&lt;COM0A0)|(<span class="hljs-number">1</span>&lt;&lt;COM0B1)|(<span class="hljs-number">0</span>&lt;&lt;COM0B0); <span class="hljs-comment">//  FAST PWM,   </span><font></font>
	<font></font>
    TCCR0B = (<span class="hljs-number">0</span>&lt;&lt;WGM02)|(<span class="hljs-number">0</span>&lt;&lt;CS02)|(<span class="hljs-number">0</span>&lt;&lt;CS01)|(<span class="hljs-number">1</span>&lt;&lt;CS00); <span class="hljs-comment">//   8</span><font></font>
	<font></font>
    OCR0A = <span class="hljs-number">255</span>; <span class="hljs-comment">//    (0-255)</span><font></font>
<font></font>
    OCR0B = <span class="hljs-number">255</span>;<font></font>
<font></font>
} <span class="hljs-comment">//    </span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span> (<span class="hljs-params"><span class="hljs-keyword">void</span></span>)</span> { <font></font>
<font></font>
    DDRA |=(<span class="hljs-number">1</span>&lt;&lt;LED_pin);<font></font>
	<font></font>
    DDRA |=(<span class="hljs-number">1</span>&lt;&lt;IN1)|(<span class="hljs-number">1</span>&lt;&lt;IN2);<font></font>
<font></font>
    DDRB |=(<span class="hljs-number">1</span>&lt;&lt;IN3)|(<span class="hljs-number">1</span>&lt;&lt;IN4);<font></font>
	<font></font>
    PWM_init(); <span class="hljs-comment">//  </span><font></font>
	<font></font>
    delay_millisecond(<span class="hljs-number">2000</span>);<font></font>
	<font></font>
    <span class="hljs-keyword">while</span>(<span class="hljs-number">1</span>==<span class="hljs-number">1</span>) { <font></font>
	   <font></font>
	LED_ON;<font></font>
		<font></font>
        L293D_step(<span class="hljs-number">16</span>,<span class="hljs-string">'F'</span>,<span class="hljs-number">100</span>,<span class="hljs-number">2</span>); <span class="hljs-comment">//step( ,  F/B,   , / )</span><font></font>
		<font></font>
	<span class="hljs-comment">//stepper_OFF();</span><font></font>
		<font></font>
	delay_millisecond(<span class="hljs-number">2000</span>);<font></font>
		<font></font>
	LED_OFF;<font></font>
		<font></font>
	L293D_step(<span class="hljs-number">16</span>,<span class="hljs-string">'B'</span>,<span class="hljs-number">100</span>,<span class="hljs-number">2</span>);<font></font>
		<font></font>
	<span class="hljs-comment">//stepper_OFF();</span><font></font>
		<font></font>
	delay_millisecond(<span class="hljs-number">2000</span>);<font></font>
		  <font></font>
    } <font></font>
<font></font>
} </code></pre><br>
</div>
                    </div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mode langkah penuh. </font><font style="vertical-align: inherit;">Fase tunggal</font></font></h3><br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/_U7lQKinBe8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mesin mengambil 16 langkah per revolusi. </font><font style="vertical-align: inherit;">Selain itu, langkah-langkah untuk dua fase tidak memiliki nilai sudut yang sama. </font><font style="vertical-align: inherit;">Saya tidak tahu terhubung dengan apa. </font><font style="vertical-align: inherit;">Mungkin desain mesinnya ini? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mari kita lihat frekuensi maksimum langkah-langkah yang dapat dia berikan dalam mode ini tanpa melewatkannya. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Penundaan minimum antara langkah adalah 2 ms, yang berarti 500 langkah / detik. </font><font style="vertical-align: inherit;">Tidak buruk, itu 31 rpm = 1850 rpm.</font></font></b><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mode langkah penuh. </font><font style="vertical-align: inherit;">Dua fase</font></font></h3><br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/AGNc-i35tkI" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Harap dicatat bahwa dalam hal ini langkah-langkahnya lebih mulus, ukurannya sama (dalam hal apa pun, lebih sama dari pada kasus sebelumnya). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Secara alami, dalam hal ini, dua belitan diberi energi secara simultan dan perpindahan panas meningkat. </font><font style="vertical-align: inherit;">Setelah beberapa detik, mesin memanas cukup kuat, jadi saya menghentikan percobaan. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apa dengan frekuensi maksimum langkah? </font><font style="vertical-align: inherit;">500 langkah / detik; </font><font style="vertical-align: inherit;">31 rpm = 1875 rpm. </font></font></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Harus dikatakan bahwa untuk motor stepper cukup gesit. </font><font style="vertical-align: inherit;">Hal ini disebabkan oleh sejumlah kecil kutub magnet pada rotor. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kita lanjutkan ...</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nomor percobaan 2. </font><font style="vertical-align: inherit;">TMC2208 + ATtiny44</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
TMC2208 adalah nama chip driver untuk mengendalikan motor stepper bipolar, juga disebut modul, yang diproduksi untuk pemasangan di printer 3D buatan rumah (dan tidak hanya) dan memiliki tata letak pin terpadu. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Banyak dan jelas mengatakan tentang modul ini di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sini</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Banyak yang telah ditulis di Internet tentang cara memasangnya di printer 3D Anda, tetapi kami tertarik pada cara menghubungkan modul ke mikrokontroler, jadi mari kita mengerti. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Karakteristik chip sangat mengesankan (hanya orang yang mudah dipengaruhi):</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tegangan suplai dari bagian logis: 3-5V;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tegangan suplai motor 5.5-36V;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2A arus puncak;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pengaturan arus motor maksimum;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dukungan antarmuka UART untuk mengelola dan mengkonfigurasi register internal;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">matikan otomatis;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dukungan untuk mode langkah mikro kontrol engine hingga 1/16 langkah.</font></font></li>
</ul><br>
<img src="https://habrastorage.org/webt/hy/4x/fg/hy4xfgf0clqt-j9hxilghfje85u.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ini sangat sederhana untuk dikelola, pada kenyataannya, Anda hanya perlu dua pin mikrokontroler. </font><font style="vertical-align: inherit;">Satu terhubung ke DIR - kami menunjukkan arah putaran motor, yang lain terhubung ke LANGKAH - ketika pulsa diterapkan, sirkuit mikro melakukan manipulasi yang diperlukan dengan arus dan tegangan pada belitan motor dan dibutuhkan satu langkah. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Diagram koneksi akan terlihat seperti ini: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/p6/7m/s1/p67ms10_2wbu6fdbxjmkcz7y5f8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selain itu, saya menggunakan pin EN untuk mematikan motor dan untuk waktu yang lama tidak membuat gulungan berliku.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kode sumber WinAVR</font></font></b>
                        <div class="spoiler_text"><pre><code class="cs hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> F_CPU 8000000UL  //    </span><font></font>
<font></font>
<span class="hljs-comment">//    L: E2; H:DF; Ex:FF; </span>
<span class="hljs-comment">//    8         (     8)</span><font></font>
<font></font>
<span class="hljs-meta">#include &lt;avr/io.h&gt; //   </span><font></font>
<font></font>
<span class="hljs-meta">#include &lt;util/delay.h&gt; //   </span><font></font>
<font></font>
<span class="hljs-meta">#include &lt;avr/interrupt.h&gt; //   </span><font></font>
<font></font>
<span class="hljs-comment">//   </span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> LED_pin PA5</span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> LED_ON PORTA |=(1&lt;&lt;LED_pin)</span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> LED_OFF PORTA &amp;=(~(1&lt;&lt;LED_pin))</span><font></font>
<font></font>
<span class="hljs-comment">//     TMC2208</span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> DIR PB2</span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> EN PA6</span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> STP PA7</span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> EN_OFF PORTA |=(1&lt;&lt;EN)</span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> EN_ON PORTA &amp;=(~(1&lt;&lt;EN))</span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> DIR_FOR PORTB |=(1&lt;&lt;DIR)</span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> DIR_BACK PORTB &amp;=(~(1&lt;&lt;DIR))</span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> STP_ON PORTA |=(1&lt;&lt;STP)</span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> STP_OFF PORTA &amp;=(~(1&lt;&lt;STP))</span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">delay_microsecond</span> (<span class="hljs-params">unsigned <span class="hljs-keyword">int</span> delay_time</span>)</span> { <span class="hljs-comment">//     </span><font></font>
    <font></font>
	<span class="hljs-comment">//      </span><font></font>
<font></font>
    <span class="hljs-keyword">for</span>(unsigned <span class="hljs-keyword">int</span> delay_us = <span class="hljs-number">0</span>; delay_us&lt;delay_time; delay_us++) {<font></font>
	<font></font>
	    _delay_us(<span class="hljs-number">1</span>);<font></font>
	<font></font>
	}<font></font>
<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">delay_millisecond</span> (<span class="hljs-params">unsigned <span class="hljs-keyword">int</span> delay_time</span>)</span> { <span class="hljs-comment">//     </span><font></font>
<font></font>
    <span class="hljs-keyword">for</span>(unsigned <span class="hljs-keyword">int</span> delay_ms = <span class="hljs-number">0</span>; delay_ms&lt;delay_time; delay_ms++) {<font></font>
	<font></font>
	    _delay_ms(<span class="hljs-number">1</span>);<font></font>
	<font></font>
	}<font></font>
<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">TMS2208_STEP</span> (<span class="hljs-params">unsigned <span class="hljs-keyword">int</span> step_quantity, unsigned <span class="hljs-keyword">char</span> direction, unsigned <span class="hljs-keyword">int</span> step_delay</span>)</span> {<font></font>
<font></font>
    <span class="hljs-keyword">switch</span>(direction) { <span class="hljs-comment">//  </span><font></font>
	<font></font>
		<span class="hljs-keyword">case</span> <span class="hljs-string">'F'</span>:<font></font>
			DIR_FOR;	<font></font>
		<span class="hljs-keyword">break</span>;<font></font>
		<font></font>
		<span class="hljs-keyword">case</span> <span class="hljs-string">'B'</span>:<font></font>
			DIR_BACK;	<font></font>
		<span class="hljs-keyword">break</span>;<font></font>
		<font></font>
	}<font></font>
<font></font>
    <span class="hljs-keyword">while</span>(step_quantity&gt;<span class="hljs-number">0</span>) { <span class="hljs-comment">//      </span><font></font>
	<font></font>
		STP_ON; <span class="hljs-comment">//   </span><font></font>
		<font></font>
		delay_microsecond(<span class="hljs-number">100</span>); <span class="hljs-comment">//   100</span><font></font>
		<font></font>
		STP_OFF;<font></font>
		<font></font>
		delay_millisecond(step_delay);<span class="hljs-comment">//   </span><font></font>
	<font></font>
	    step_quantity--;<font></font>
	<font></font>
	}<font></font>
<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span> (<span class="hljs-params"><span class="hljs-keyword">void</span></span>)</span> {<font></font>
<font></font>
        DDRA |=(<span class="hljs-number">1</span>&lt;&lt;LED_pin);<font></font>
<font></font>
        DDRB |=(<span class="hljs-number">1</span>&lt;&lt;DIR);<font></font>
<font></font>
        DDRA |=(<span class="hljs-number">1</span>&lt;&lt;EN);<font></font>
<font></font>
        DDRA |=(<span class="hljs-number">1</span>&lt;&lt;STP);<font></font>
	<font></font>
	PWM_init(); <span class="hljs-comment">//  </span><font></font>
	<font></font>
	delay_millisecond(<span class="hljs-number">2000</span>);<font></font>
	<font></font>
	<span class="hljs-keyword">while</span>(<span class="hljs-number">1</span>==<span class="hljs-number">1</span>) { <font></font>
	   <font></font>
	   LED_ON;<font></font>
	   <font></font>
	   EN_ON;<font></font>
	<font></font>
	   TMS2208_STEP(<span class="hljs-number">32</span>,<span class="hljs-string">'F'</span>,<span class="hljs-number">10</span>); <span class="hljs-comment">// TMS2208_STEP ( ,  F/B,   )</span><font></font>
	   <font></font>
	   delay_millisecond(<span class="hljs-number">2000</span>);<font></font>
	   <font></font>
	   LED_OFF;<font></font>
	   <font></font>
	   TMS2208_STEP(<span class="hljs-number">32</span>,<span class="hljs-string">'B'</span>,<span class="hljs-number">10</span>);<font></font>
	   <font></font>
	   delay_millisecond(<span class="hljs-number">2000</span>);<font></font>
	<font></font>
	   <font></font>
	} <font></font>
<font></font>
}  </code></pre><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sebelum memulai semuanya, Anda perlu melakukan pra-konfigurasi modul. Pertama, atur mode microstep yang diinginkan. Kedua, atur arus motor maksimum yang diinginkan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dengan microstep, semuanya sederhana. Pin MS1 ​​dan MS2 bertanggung jawab untuk ini. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/mr/vf/ba/mrvfbaqfm3rvb_fkop2w28ybtiw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya perhatikan bahwa rangkaian mikro tidak mengubah tegangan secara bertahap, tetapi melakukannya “dengan lancar”, tetapi karena rangkaian mikro adalah digital, outputnya bukan sinyal yang halus, tetapi sinyal dengan langkah kecil, menurut dokumentasi, itu memecah setiap langkah menjadi 256 langkah mikro. Hal ini dilakukan untuk meningkatkan kelancaran pengendaraan, mengurangi kebisingan dari mesin dan, secara teori, tidak boleh membiarkan desain yang dibautnya masuk ke resonansi. Singkatnya, semua agar printer 3D lebih tenang.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk mengatur arus motor, perlu untuk mengukur tegangan pada kontak Vref, yang ditunjukkan pada gambar. Nilai tegangan dapat diubah menggunakan potensiometer yang dipasang di sebelah kontak. Tegangan pada kontak akan sebanding dengan arus motor, dan ketergantungan akan memiliki bentuk berikut: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vref = I * 1,44; </font><b><font style="vertical-align: inherit;">Motor</font></b></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
kami </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">membutuhkan sekitar 150mA, karena Vref = 0,216V</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Kami memasang ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dipahami bahwa peningkatan arus menyediakan sirkuit mikro dengan meningkatkan tegangan pada belitan. Karena itu, Anda perlu memastikan bahwa ketegangan ini sudah cukup. Tapi, saya percaya, 5V seharusnya cukup untuk motor kecil itu. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami akan menguji operasi motor dengan berbagai mode langkah mikro dan melihat apa yang terjadi (jeda antara langkah mikro adalah 10 ms):</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/smws8Omm5Gk" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anda dapat melihat bahwa gerakan motor menjadi lebih halus (dibandingkan dengan percobaan sebelumnya), namun 16 langkah karakteristik masih cukup jelas diamati. </font><font style="vertical-align: inherit;">Yah ... ternyata ini adalah fitur </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">motor stepper dengan rotor magnet permanen</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Perlu juga dicatat bahwa motor dalam mode ini memanas hampir sebanyak dalam mode langkah penuh dengan dua fase. </font><font style="vertical-align: inherit;">Dapat dimengerti, belitan terus-menerus diberi energi, panas terus-menerus dihasilkan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya percaya bahwa untuk motor seperti penggunaan driver seperti itu, dan memang mode microstep, sangat tidak dianjurkan.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nomor percobaan 3. </font><font style="vertical-align: inherit;">Driver ATtiny44</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mari kita kembali sebentar ke percobaan pertama dan ingat bahwa input EN1 dan EN2 dari chip driver terhubung ke pin OC0A dan OC0B dari mikrokontroler. Ini berarti bahwa kita dapat mengirim sinyal PWM yang dihasilkan menggunakan timer TIMER0 dan dengan demikian mengubah tegangan yang diterapkan pada belitan motor dan dengan demikian mengatur arus yang akan mengalir melaluinya. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Menurut datasheet pada mikrokontroler ATtiny44, arus maksimum yang dapat diberikan oleh satu pin hanya 40mA. Selain itu, tidak diindikasikan untuk tipe arus apa (denyut atau konstan) karakteristik ini. Itu hanya di sana dan itu seperti itu ... Saya </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
harus mengatakan bahwa saya telah akrab dengan mikrokontroler ATMEL selama lebih dari 7 tahun. Dan tidak pernah sekalipun saya memiliki keinginan untuk memeriksa baris ini dari lembar data.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/7g/-s/b3/7g-sb3h1t3qbhccp7kyvd0knqge.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mungkin pabrikannya aman dan bahkan dapat memberikan lebih banyak, atau mungkin itu benar-benar maksimal yang dapat memberikan satu pin. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami akan mencari tahu. Tetapi pertama-tama Anda perlu mencari tahu berapa arus minimum motor yang umumnya dapat berputar. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Menggunakan sirkuit dari percobaan pertama, kami menyesuaikan nilai arus melalui belitan sama dengan 40 mA. Kita mulai dalam mode langkah penuh dengan dua fase (karena torsi akan lebih tinggi): </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Luar biasa! </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pada 40mA, mesin mulai berhasil!</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Nilai minimum dari arus belitan yang diperlukan untuk operasi motor yang stabil juga terdeteksi, dan itu sama dengan 30mA. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tentu saja, torsi akan jauh lebih rendah, tetapi kenyataan bahwa kami berhasil menghidupkan motor dengan konsumsi daya yang kecil sangat penting bagi kami.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Diagram koneksi motor stepper ke mikrokontroler adalah sebagai berikut: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/8z/no/s8/8znos8hnrnwto939rm8yap_znpw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Karena setiap pin mikrokontroler berfungsi sebagai setengah-jembatan (dapat mengubah output sirkuit mikro ke Vcc atau GND), untuk mengontrol motor stepper bipolar, kita memerlukan 4 pin mikrokontroler. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kode program:</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kode sumber WinAVR</font></font></b>
                        <div class="spoiler_text"><pre><code class="cs hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> F_CPU 8000000UL  //    </span><font></font>
<font></font>
<span class="hljs-comment">//    L: E2; H:DF; Ex:FF; </span>
<span class="hljs-comment">//    8         (     8)</span><font></font>
<font></font>
<span class="hljs-meta">#include &lt;avr/io.h&gt; //   </span><font></font>
<font></font>
<span class="hljs-meta">#include &lt;util/delay.h&gt; //   </span><font></font>
<font></font>
<span class="hljs-meta">#include &lt;avr/interrupt.h&gt; //   </span><font></font>
<font></font>
<span class="hljs-comment">//   </span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> LED_pin PA5</span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> LED_ON PORTA |=(1&lt;&lt;LED_pin)</span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> LED_OFF PORTA &amp;=(~(1&lt;&lt;LED_pin))</span><font></font>
<font></font>
<span class="hljs-comment">//     L293DD</span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> PWM_1 PB2 // OC0A (EN1)</span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> PWM_2 PA7 // OC0B (EN2)</span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> PWM_1_value OCR0A</span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> PWM_2_value OCR0B</span><font></font>
<font></font>
<span class="hljs-comment">//       L293D</span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> IN1 PA0 //  PORTA</span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> IN2 PA1</span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> IN3 PB1 //  PORTB</span><font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> IN4 PB0</span><font></font>
<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">delay_microsecond</span> (<span class="hljs-params">unsigned <span class="hljs-keyword">int</span> delay_time</span>)</span> { <span class="hljs-comment">//     </span><font></font>
    <font></font>
	<span class="hljs-comment">//      </span><font></font>
<font></font>
    <span class="hljs-keyword">for</span>(unsigned <span class="hljs-keyword">int</span> delay_us = <span class="hljs-number">0</span>; delay_us&lt;delay_time; delay_us++) {<font></font>
	<font></font>
	    _delay_us(<span class="hljs-number">1</span>);<font></font>
	<font></font>
	}<font></font>
<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">delay_millisecond</span> (<span class="hljs-params">unsigned <span class="hljs-keyword">int</span> delay_time</span>)</span> { <span class="hljs-comment">//     </span><font></font>
<font></font>
    <span class="hljs-keyword">for</span>(unsigned <span class="hljs-keyword">int</span> delay_ms = <span class="hljs-number">0</span>; delay_ms&lt;delay_time; delay_ms++) {<font></font>
	<font></font>
	    _delay_ms(<span class="hljs-number">1</span>);<font></font>
	<font></font>
	}<font></font>
<font></font>
}<font></font>
<font></font>
<span class="hljs-comment">//        </span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">step_1_two_phase_DL</span> (<span class="hljs-params"><span class="hljs-keyword">void</span></span>)</span> { <span class="hljs-comment">// DL - driver less</span><font></font>
   <font></font>
   <span class="hljs-comment">//  </span>
   OCR0A = <span class="hljs-number">160</span>;<font></font>
   PORTB &amp;=(~(<span class="hljs-number">1</span>&lt;&lt;IN4)); <font></font>
   <font></font>
   <span class="hljs-comment">//  </span>
   OCR0B = <span class="hljs-number">160</span>;<font></font>
   PORTB &amp;=(~(<span class="hljs-number">1</span>&lt;&lt;IN3)); <font></font>
    <font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">step_2_two_phase_DL</span> (<span class="hljs-params"><span class="hljs-keyword">void</span></span>)</span> { <font></font>
   <font></font>
   <span class="hljs-comment">//  </span>
   OCR0A = <span class="hljs-number">160</span>;<font></font>
   PORTB &amp;=(~(<span class="hljs-number">1</span>&lt;&lt;IN4)); <font></font>
   <font></font>
   <span class="hljs-comment">//  </span>
   OCR0B = <span class="hljs-number">95</span>;<font></font>
   PORTB |=(<span class="hljs-number">1</span>&lt;&lt;IN3); <font></font>
    <font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">step_3_two_phase_DL</span> (<span class="hljs-params"><span class="hljs-keyword">void</span></span>)</span> { <font></font>
   <font></font>
   <span class="hljs-comment">//  </span>
   OCR0A = <span class="hljs-number">95</span>;<font></font>
   PORTB |=(<span class="hljs-number">1</span>&lt;&lt;IN4); <font></font>
   <font></font>
   <span class="hljs-comment">//  </span>
   OCR0B = <span class="hljs-number">95</span>;<font></font>
   PORTB |=(<span class="hljs-number">1</span>&lt;&lt;IN3); <font></font>
    <font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">step_4_two_phase_DL</span> (<span class="hljs-params"><span class="hljs-keyword">void</span></span>)</span> { <font></font>
   <font></font>
   <span class="hljs-comment">//  </span>
   OCR0A = <span class="hljs-number">95</span>;<font></font>
   PORTB |=(<span class="hljs-number">1</span>&lt;&lt;IN4); <font></font>
   <font></font>
   <span class="hljs-comment">//  </span>
   OCR0B = <span class="hljs-number">160</span>;<font></font>
   PORTB &amp;=(~(<span class="hljs-number">1</span>&lt;&lt;IN3)); <font></font>
    <font></font>
}<font></font>
<font></font>
unsigned <span class="hljs-keyword">char</span> step_counter = <span class="hljs-number">0</span>; <font></font>
<font></font>
<span class="hljs-comment">//      </span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">L293D_step</span> (<span class="hljs-params">unsigned <span class="hljs-keyword">int</span> step_quantity, unsigned <span class="hljs-keyword">char</span> direction, unsigned <span class="hljs-keyword">int</span> step_delay, unsigned <span class="hljs-keyword">char</span> phase</span>)</span> { <span class="hljs-comment">//      </span><font></font>
<font></font>
    <span class="hljs-keyword">while</span>(step_quantity&gt;<span class="hljs-number">0</span>) { <span class="hljs-comment">//  ,      </span><font></font>
<font></font>
        <span class="hljs-keyword">switch</span>(direction) { <span class="hljs-comment">//           </span><font></font>
	<font></font>
			<span class="hljs-keyword">case</span> <span class="hljs-string">'F'</span>:
				<span class="hljs-keyword">if</span>(step_counter&lt;<span class="hljs-number">3</span>) { step_counter++; } <span class="hljs-keyword">else</span> { step_counter=<span class="hljs-number">0</span>; }
			<span class="hljs-keyword">break</span>;<font></font>
		<font></font>
			<span class="hljs-keyword">case</span> <span class="hljs-string">'B'</span>:
				<span class="hljs-keyword">if</span>(step_counter&gt;<span class="hljs-number">0</span>) { step_counter--; } <span class="hljs-keyword">else</span> { step_counter=<span class="hljs-number">3</span>; }
			<span class="hljs-keyword">break</span>;<font></font>
		<font></font>
		}<font></font>
		<font></font>
		<span class="hljs-keyword">switch</span>(phase) { <span class="hljs-comment">//     </span><font></font>
		<font></font>
		    <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>: <font></font>
			<font></font>
				<span class="hljs-keyword">switch</span>(step_counter) { <span class="hljs-comment">//   </span><font></font>
	<font></font>
					<span class="hljs-keyword">case</span> <span class="hljs-number">0</span>:<font></font>
						step_1_two_phase_DL();<font></font>
					<span class="hljs-keyword">break</span>;<font></font>
		<font></font>
					<span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:<font></font>
						step_2_two_phase_DL();<font></font>
					<span class="hljs-keyword">break</span>;<font></font>
		<font></font>
					<span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:<font></font>
						step_3_two_phase_DL();<font></font>
					<span class="hljs-keyword">break</span>;<font></font>
		<font></font>
					<span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:<font></font>
						step_4_two_phase_DL();<font></font>
					<span class="hljs-keyword">break</span>;<font></font>
	<font></font>
				}<font></font>
			<font></font>
			<span class="hljs-keyword">break</span>;<font></font>
			<font></font>
			<span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:<font></font>
			<font></font>
				<span class="hljs-keyword">switch</span>(step_counter) { <span class="hljs-comment">//   </span><font></font>
	<font></font>
					<span class="hljs-keyword">case</span> <span class="hljs-number">0</span>:<font></font>
						step_1_two_phase_DL();<font></font>
					<span class="hljs-keyword">break</span>;<font></font>
		<font></font>
					<span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:<font></font>
						step_2_two_phase_DL();<font></font>
					<span class="hljs-keyword">break</span>;<font></font>
		<font></font>
					<span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:<font></font>
						step_3_two_phase_DL();<font></font>
					<span class="hljs-keyword">break</span>;<font></font>
		<font></font>
					<span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:<font></font>
						step_4_two_phase_DL();<font></font>
					<span class="hljs-keyword">break</span>;<font></font>
	<font></font>
				}<font></font>
			<font></font>
			<span class="hljs-keyword">break</span>;<font></font>
		<font></font>
		}<font></font>
		<font></font>
    delay_millisecond(step_delay); <span class="hljs-comment">//       </span><font></font>
	<font></font>
	step_quantity--; <font></font>
	<font></font>
	} <font></font>
<font></font>
}<font></font>
<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">PWM_init</span> (<span class="hljs-params"><span class="hljs-keyword">void</span></span>)</span> { <span class="hljs-comment">//   </span><font></font>
<font></font>
    DDRB |=(<span class="hljs-number">1</span>&lt;&lt;PWM_1); <font></font>
	<font></font>
    DDRA |=(<span class="hljs-number">1</span>&lt;&lt;PWM_2);<font></font>
<font></font>
    TCCR0A = (<span class="hljs-number">1</span>&lt;&lt;WGM01)|(<span class="hljs-number">1</span>&lt;&lt;WGM00)|(<span class="hljs-number">1</span>&lt;&lt;COM0A1)|(<span class="hljs-number">0</span>&lt;&lt;COM0A0)|(<span class="hljs-number">1</span>&lt;&lt;COM0B1)|(<span class="hljs-number">0</span>&lt;&lt;COM0B0); <span class="hljs-comment">//  FAST PWM,   </span><font></font>
	<font></font>
    TCCR0B = (<span class="hljs-number">0</span>&lt;&lt;WGM02)|(<span class="hljs-number">0</span>&lt;&lt;CS02)|(<span class="hljs-number">0</span>&lt;&lt;CS01)|(<span class="hljs-number">1</span>&lt;&lt;CS00); <span class="hljs-comment">//   8</span><font></font>
	<font></font>
    OCR0A = <span class="hljs-number">160</span>; <font></font>
	<font></font>
    OCR0B = <span class="hljs-number">160</span>;<font></font>
<font></font>
} <span class="hljs-comment">//    </span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span> (<span class="hljs-params"><span class="hljs-keyword">void</span></span>)</span> { <span class="hljs-comment">//  </span><font></font>
<font></font>
    DDRA |=(<span class="hljs-number">1</span>&lt;&lt;LED_pin);<font></font>
	<font></font>
	DDRA |=(<span class="hljs-number">1</span>&lt;&lt;IN1)|(<span class="hljs-number">1</span>&lt;&lt;IN2);<font></font>
	<font></font>
	DDRB |=(<span class="hljs-number">1</span>&lt;&lt;IN3)|(<span class="hljs-number">1</span>&lt;&lt;IN4);<font></font>
	<font></font>
	PWM_init(); <span class="hljs-comment">//  </span><font></font>
	<font></font>
	delay_millisecond(<span class="hljs-number">2000</span>);<font></font>
	<font></font>
	<span class="hljs-keyword">while</span>(<span class="hljs-number">1</span>==<span class="hljs-number">1</span>) { <span class="hljs-comment">//  </span><font></font>
<font></font>
	    LED_ON;<font></font>
		<font></font>
	    L293D_step(<span class="hljs-number">16</span>,<span class="hljs-string">'F'</span>,<span class="hljs-number">100</span>,<span class="hljs-number">2</span>); <span class="hljs-comment">//step( ,  F/B,   , / )</span><font></font>
		<font></font>
            delay_millisecond(<span class="hljs-number">2000</span>);<font></font>
		<font></font>
	    LED_OFF;<font></font>
		<font></font>
	    L293D_step(<span class="hljs-number">16</span>,<span class="hljs-string">'B'</span>,<span class="hljs-number">100</span>,<span class="hljs-number">2</span>);<font></font>
		<font></font>
	    delay_millisecond(<span class="hljs-number">2000</span>);<font></font>
		<font></font>
	<font></font>
	   <font></font>
	} <font></font>
<font></font>
} </code></pre><br>
</div>
                    </div> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Izinkan saya menjelaskan sedikit cara kerja program ini. Ini adalah kode yang dimodifikasi dari percobaan pertama. Seperti yang saya katakan di atas, TIMER0 8-bit akan digunakan untuk menghasilkan sinyal PWM pada output OC0A dan OC0B. Timer diatur ke mode FastPWM dengan prescaler 8 (frekuensi sinyal pada 8 MHz dari jam mikrokontroler adalah 3906 Hz). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk mengubah polaritas sinyal pada belitan, pin mikrokontroler beralih dari Vcc ke GND dengan mengubah bit yang sesuai dalam register PORTx dan mengubah siklus tugas PWM dengan menuliskan nilai ke register OCR0A dan OCR0B (nilai-nilai tersebut dipilih secara eksperimental). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan sebagainya:</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/yvaAGt1vhxs" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kursus sirkuit yang diambil pada tahun pertama institut menunjukkan bahwa multimeter menunjukkan nilai rms dari tegangan dan arus pada motor. </font></font></i><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Motor stepper berputar dari pin mikrokontroler tanpa driver! </font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Namun di sini kita tidak melampaui kemampuan mikrokontroler, setidaknya, sesuai dengan apa yang tertulis dalam dokumentasi. </font><font style="vertical-align: inherit;">Dalam mode ini, mikrokontroler dan motor dapat bekerja untuk waktu yang lama. </font><font style="vertical-align: inherit;">Memang, percobaan berlangsung 20 menit. </font><font style="vertical-align: inherit;">Selama waktu ini, tidak ada langkah skipping, tidak ada pengaturan ulang controller, atau overheating (baik mesin maupun controller)</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Singkirkan semua tindakan pencegahan</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami menghapus PWM dari percobaan dan kami akan langsung mengendalikan pin mikrokontroler menggunakan register PORTx. </font><font style="vertical-align: inherit;">Mari kita lihat apa yang terjadi pada mikrokontroler setelah itu. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ini berfungsi ... dengan arus maksimum 51mA ... Ya ... tanpa diduga, tampaknya ini adalah arus maksimum yang dapat memberikan satu pin mikrokontroler? </font><font style="vertical-align: inherit;">Jika saya salah, koreksi saya. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bagaimanapun, video dari YouTube tidak tertipu. </font><font style="vertical-align: inherit;">Memang, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anda dapat mengendalikan motor ini tanpa driver</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">temuan</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami mempelajari secara rinci motor miniatur bipolar stepper, desainnya dan cara mengendalikannya, untuk digunakan dalam aplikasi kami sendiri. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1. Miniatur motor stepper bipolar dengan rotor magnet permanen benar-benar miniatur. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fitur utamanya:</font></font><br>
<br>
<ul>
<li>   ,  ,    ( , ,  16);</li>
<li>    (   ),     1875 /;</li>
<li>     (    );</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2. Motor stepper miniatur dapat dikontrol oleh driver yang cocok untuk bekerja dengan motor stepper bipolar, Anda hanya perlu memilih parameter arus berliku. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3. Menggunakan driver TMC2208 khusus adalah masalah yang kontroversial, karena mode microstep tidak didukung oleh mesin itu sendiri, meskipun transisi antar langkah dilakukan lebih lancar. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
4. Dimungkinkan untuk menghubungkan motor stepper langsung ke port-port mikrokontroler. </font><font style="vertical-align: inherit;">Tapi ini hanya dalam kerangka percobaan, karena torsi dalam kasus ini sangat tidak signifikan, dan bahkan arus kecil tidak memungkinkan langkah-langkah yang harus diambil dengan kecepatan tinggi. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lain kali saya akan memberi tahu Anda mengapa kami membutuhkan motor stepper kecil.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id498760/index.html">Kursus pendidikan karantina gratis: bisnis, manajemen, pemasaran</a></li>
<li><a href="../id498762/index.html">Apakah palsu itu bodoh atau serius?</a></li>
<li><a href="../id498766/index.html">Komedi terbaik IT. 3 acara TV teratas</a></li>
<li><a href="../id498768/index.html">Penggunaan detektor asap di kendaraan</a></li>
<li><a href="../id498782/index.html">Battle Experimenters - Sand and Stick Science - Inokulasi Pemikiran Ilmiah ke dalam Pikiran Publik</a></li>
<li><a href="../id498796/index.html">Kebijakan Keamanan Konten di Magento 2</a></li>
<li><a href="../id498798/index.html">Terus belajar dan belajar dengan JetBrains</a></li>
<li><a href="../id498800/index.html">Bagaimana saya mengajar komputer saya untuk bermain Dobble dengan OpenCV dan Deep Learning</a></li>
<li><a href="../id498808/index.html">Vim dengan Dukungan YAML untuk Kubernetes</a></li>
<li><a href="../id498814/index.html">Anda gagal satu pertanyaan teoritis tentang Jaminan Sosial, dan mereka mengakhiri Anda. Ini normal? // Kita Ditakdirkan # 3</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>