<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßñüèº üíº üé∂ Acesso seguro a uma casa inteligente na aus√™ncia de um IP p√∫blico (parte 1) üèæ üñäÔ∏è üë≥</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introdu√ß√£o
 √â dif√≠cil escolher um t√≠tulo amplo que reflita o significado, por isso descreverei imediatamente a tarefa que propus para mim. 
 
 Existe ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Acesso seguro a uma casa inteligente na aus√™ncia de um IP p√∫blico (parte 1)</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/504716/"><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Introdu√ß√£o</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√â dif√≠cil escolher um t√≠tulo amplo que reflita o significado, por isso descreverei imediatamente a tarefa que propus para mim. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Existe uma "casa inteligente". </font><font style="vertical-align: inherit;">No meu caso, este √© um servidor dom√©stico sem ventilador com ioBroker, embora isso n√£o seja importante. </font><font style="vertical-align: inherit;">Al√©m do material dom√©stico, eu quero conectar sensores a ele do lado de fora (por exemplo, em um ESP32 de uma estufa remota). </font><font style="vertical-align: inherit;">Eu decidi fazer isso atrav√©s do mqtt. </font><font style="vertical-align: inherit;">Acesso √† interface da Internet. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A coisa de sempre. </font><font style="vertical-align: inherit;">Mas existem nuances:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O provedor n√£o tem como me fornecer um endere√ßo IP p√∫blico. </font><font style="vertical-align: inherit;">E n√£o h√° outros fornecedores.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N√£o gosto de vincular servi√ßos espec√≠ficos na nuvem. </font><font style="vertical-align: inherit;">Um servi√ßo externo tamb√©m pode fechar (como a gbridge enviou uma notifica√ß√£o recentemente). </font><font style="vertical-align: inherit;">E apenas em caso de falha, n√£o est√° claro o que fazer. </font><font style="vertical-align: inherit;">Prefiro o meu, que pode ser transferido, refeito com pouco sangue, se algo acontecer.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A seguran√ßa √© importante. </font><font style="vertical-align: inherit;">N√£o paran√≥ia, mas colocar o ioBroker na Internet, especialmente considerando que existem v√°rios servi√ßos exibidos (flot ...). </font><font style="vertical-align: inherit;">N√£o mesmo.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al√©m disso, quero mostrar n√£o imediatamente o resultado, mas o processo. </font><font style="vertical-align: inherit;">Como foi, como a Wishlist foi transformada, as decis√µes mudadas. </font><font style="vertical-align: inherit;">√â poss√≠vel que alguns pontos possam ser resolvidos de maneira mais correta / eficiente (n√£o sou administrador do sistema, n√£o sou desenvolvedor). </font><font style="vertical-align: inherit;">Ou talvez algu√©m n√£o v√° t√£o longe e aproveite uma solu√ß√£o provis√≥ria que, por exemplo, n√£o achei segura ou conveniente para mim. </font><font style="vertical-align: inherit;">Na verdade, o que √© descrito nesta parte √© uma op√ß√£o bastante funcional, mas para mim √© "intermedi√°rio".</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Endere√ßo p√∫blico para mqtt</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em casa, o IP p√∫blico no roteador n√£o brilha (n√£o estou falando de fixo, isso pode ser resolvido atrav√©s de dyndns e an√°logos), ou seja, o provedor fornece 10.x.x.x, sem op√ß√µes. </font><font style="vertical-align: inherit;">Portanto, voc√™ precisa alugar um pequeno VPS e fazer um probros atrav√©s dele. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A maneira mais f√°cil √© fazer um t√∫nel atrav√©s do ssh. </font><font style="vertical-align: inherit;">No servidor dom√©stico (chamarei iob.xxx.xx), executo:</font></font><br>
<br>
<pre><code class="plaintext hljs">ssh -N -T -R pub.xxx.xx:1883:127.0.0.1:1883 a@iob.xxx.xx </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Conectando √† porta 1883 do servidor externo pub.xxx.xx, na realidade, voc√™ se encontra no iob: 1883 de sua casa com o cont√™iner mqtt (mosquito) em execu√ß√£o. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Naturalmente, √© necess√°rio que isso inicie automaticamente, a conex√£o seja restaurada ap√≥s uma falha. </font><font style="vertical-align: inherit;">Portanto, usei o autossh, projetando-o como um servi√ßo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
/etc/systemd/system/ssh_mqtt.service:</font></font><br>
<br>
<pre><code class="plaintext hljs">[Unit]<font></font>
Description=SSH Tunnel mqtt<font></font>
After=network.target<font></font>
<font></font>
[Service]<font></font>
Environment="AUTOSSH_GATETIME=0"<font></font>
ExecStart=autossh -M 0 -o "ServerAliveInterval 30" -o "ServerAliveCountMax 3" -NR pub.xxx.xx:1883:127.0.0.1:1883 -i /home/a/.ssh/id_rsa a@pub.xxx.xx<font></font>
<font></font>
[Install]<font></font>
WantedBy=multi-user.target</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todos os tipos de systemctl ativam / reiniciam, etc. Eu n√£o vou descrever </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Infelizmente, apesar do autossh, fui assombrado por constantes congelamentos. Ent√£o, decidi que n√£o havia necessidade de produzir entidades e resolvi o ssh: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
/etc/systemd/system/ssh_mqtt.service:</font></font><br>
<br>
<pre><code class="plaintext hljs">[Unit]<font></font>
Description=SSH Tunnel mqtt<font></font>
After=network.target<font></font>
<font></font>
[Service]<font></font>
Restart=always<font></font>
RestartSec=20<font></font>
User=anri<font></font>
ExecStart=/bin/ssh -N -T -R pub.xxx.xx:1883:127.0.0.1:1883 -i /home/a/.ssh/id_rsa a@pub.xxx.xx<font></font>
<font></font>
[Install]<font></font>
WantedBy=multi-user.target</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Posteriormente, a prop√≥sito, descobriu-se que esse provedor √© t√£o obl√≠quo. Bem, ou a taxa mais barata por 45 rublos / m√™s, de modo torto funciona para ele. A sess√£o trava periodicamente, mesmo quando √© simplesmente conectada via ssh (MobaXterm). Ent√£o, no final, eu pedi um VPS para outro (55 rublos / m√™s), e os problemas com congelamentos desapareceram. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A prop√≥sito, eu escolhi por onde levar o VPS n√£o apenas com base no pre√ßo, mas tamb√©m considerando o ping (10-20ms). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em geral, essa op√ß√£o √© bastante normal, especialmente considerando que posteriormente fiz uma conex√£o com a Internet exclusivamente √† porta 8883 via TLS. Essa. A senha do mosquito foi transmitida criptografada.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Posteriormente, tornou os certificados de cliente obrigat√≥rios. </font><font style="vertical-align: inherit;">Essa. </font><font style="vertical-align: inherit;">primeiro, no n√≠vel TLS, voc√™ precisa apresentar um certificado de cliente e, em seguida, efetuar login com o nome de senha especificado no mosquito. </font><font style="vertical-align: inherit;">Essa. </font><font style="vertical-align: inherit;">n√£o √© t√£o f√°cil chegar √† fase de pesquisa de senhas. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Portanto, no in√≠cio, usei o certificado do servidor da LetsEncrypt e, devido √† necessidade de certificados de cliente, mudei para autoassinatura.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como no processo, tamb√©m trabalhei no software para ESP32, notei (ou simplesmente n√£o me lembro) que, com problemas com uma conex√£o VPN, a bateria ser√° consumida muito mais rapidamente. </font><font style="vertical-align: inherit;">Durante a opera√ß√£o normal, o ciclo: Acorde, aplique energia aos sensores, conecte-se ao WiFi, estabele√ßa uma conex√£o com o servidor mqtt, leia as leituras do sensor quando estiverem prontas, transfira para o mqtt, desligue a energia dos sensores e entre em sono profundo por 10 minutos.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Normalmente, esse ciclo leva cerca de 4 segundos. </font><font style="vertical-align: inherit;">1,5-2 segundos - conex√£o ao WiFi, um segundo extra devido √† transi√ß√£o para o mqtt pelo TLS. </font><font style="vertical-align: inherit;">Combina com voc√™ por 4 segundos, mesmo assim, os sensores precisam de tempo para acordar. </font><font style="vertical-align: inherit;">Mas se a VPN cair (era claramente vis√≠vel quando o autossh caiu), o que devo fazer? </font><font style="vertical-align: inherit;">Obviamente, eu configurei para que ap√≥s 20 segundos o sistema adormecesse de qualquer maneira. </font><font style="vertical-align: inherit;">Mas 20 segundos em vez de 4 √© muito percept√≠vel. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em geral, decidi que √© melhor manter o servidor mqtt em um VPS externo. </font><font style="vertical-align: inherit;">Agora que tudo funciona como um rel√≥gio, n√£o tenho certeza se isso √© necess√°rio. </font><font style="vertical-align: inherit;">Mas n√£o vejo sentido em refaz√™-lo de volta.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Endere√ßo p√∫blico para Vis</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vis √© um sistema de visualiza√ß√£o popular no ioBroker. Voc√™ n√£o pode se incomodar, e configur√°-lo voc√™ mesmo em https e tamb√©m encaminhar a porta. Al√©m disso, ela pode solicitar uma senha no n√≠vel do aplicativo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas isso n√£o √© legal. Especialmente considerando que, para o trabalho, conecta servi√ßos adicionais. Digamos, eu desenho gr√°ficos no flot, relativamente falando, eu me conecto a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vis.xxx.xx</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : 8082 / vis / index.html, mas por dentro h√° links para gr√°ficos </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vis.xxx.xxx</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : 8082 / flot / index.html. Em algum momento, descobriu-se que, ao conectar-se ao / vis, uma senha √© solicitada e a interface gr√°fica √© acess√≠vel sem uma senha.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em alguns momentos, era geralmente estranho - eu estava autorizado a visualizar, vejo o gr√°fico, mas na parte inferior direita h√° uma janela transl√∫cida de "Sem conex√£o com o servidor". Reescreva este bloco css para ocult√°-lo. Mas, assim que comecei a usar o quadro para alternar entre gr√°ficos na mesma tela, percebi que minha sobreposi√ß√£o na exibi√ß√£o no quadro n√£o funcionava. (Como se viu depois, deve ser assim). Eu desligo a autoriza√ß√£o - est√° tudo bem, sem palavr√µes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ent√£o, decidi no mesmo servidor externo aumentar o nginx no modo proxy reverso. E j√° fa√ßa autoriza√ß√£o nele.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No navegador, funcionou. Mas o aplicativo nativo iobroker.vis do Play Market n√£o p√¥de efetuar logon dessa maneira. E eu queria us√°-lo. Embora este seja realmente um navegador na janela, ele possui v√°rios recursos interessantes. Digamos que defina a escala (93% no modo vertical) e a imagem se encaixa. Em outro dispositivo com uma resolu√ß√£o de tela diferente, basta selecionar o coeficiente, e √© isso. E no navegador voc√™ precisa se ajustar sempre ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ok, eu acho. Adicionarei um c√≥digo complicado no URL em vez da senha. Digite </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vis.xxx.xx</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : 8082 / &lt;sequ√™ncia longa&gt; /vis/index.html. Muitas vezes, esse truque √© usado. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quase ganhou. Mas, com falhas, a escava√ß√£o mostrou que esse aplicativo Web n√£o foi escrito corretamente. Muitos links dentro dele n√£o s√£o relativos, mas da raiz.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ok, encontrei v√°rios links, escrevi para eles, dizem eles, se o referenciador contiver esse c√≥digo, ainda confie, reescreva a URL, etc. </font><font style="vertical-align: inherit;">Mas eles gradualmente vieram √† luz. </font><font style="vertical-align: inherit;">Ent√£o, decidi que isso √© torto, errado e √© necess√°ria uma abordagem diferente.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VPN</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Decidi sacrificar um pouco de universalidade de acesso. Deixe-me ter acesso a partir do meu laptop, smartphone. Mas a partir dos dispositivos de outras pessoas, do cibercaf√© n√£o √© necess√°rio, eu gerirei. Em seguida, voc√™ pode colocar um pequeno cliente que instalar√° a VPN. E dentro dele, nem SSL nem autoriza√ß√£o s√£o necess√°rios. E, ao mesmo tempo, voc√™ n√£o precisa refazer os links. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A maneira mais simples para mim era Zerotier. Para o meu sistema operacional (Windows, Android, Linux), existem clientes. E existem at√© arquivos prontos na janela de encaixe. Sim. Eu corro tudo no docker, sobre os recursos disso mais tarde. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Instale o cliente, insira um c√≥digo exclusivo para sua rede e </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">confirme</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -o </font><font style="vertical-align: inherit;">na interface da Web em </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">my.zerotier.com</font></a><font style="vertical-align: inherit;"> , se necess√°rio, defina um endere√ßo est√°tico da sua rede privada pessoal (a 10.20.30.0) e √© isso. Todos os clientes conectados se veem.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A √∫nica coisa com a qual tive que lidar um pouco foi "como conectar-se a um servidor remoto a partir de um dispositivo em seu WiFi dom√©stico sem iniciar o cliente". Bem, meu servidor dom√©stico j√° √© um cliente, mesmo que ele se direcione. Acabou que tudo √© simples. A rede dom√©stica 192.168.x.0 deve ser registrada em my.zerotier.com na se√ß√£o Rotas gerenciadas, especificando como meu gateway, √© claro, este √© o meu servidor dom√©stico. Bem, na rede WiFi, configure a rota de acordo (no roteador WiFi, est√°tica 10.20.30.0 no servidor dom√©stico). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ao conectar um cliente Zerotier, voc√™ pode especificar um servidor DNS diferente. Essa. Conectei o cliente e o nome do dom√≠nio resolve n√£o um endere√ßo p√∫blico, mas um endere√ßo privado, porque o DNS agora aponta para o servidor dom√©stico, onde o dnsmasq faz o palm off para registros IP individuais da rede privada Zerotier.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
At√© Zerotier ficou satisfeito com a escolha efetiva de uma rota para conex√£o. </font><font style="vertical-align: inherit;">Se eu ativar um cliente Zerotier no WiFi dom√©stico, o ping no computador dom√©stico (seu endere√ßo IP emitido pelo Zerotier) ser√° o mesmo par de milissegundos que sem um cliente (apenas via WiFi). </font><font style="vertical-align: inherit;">Essa. </font><font style="vertical-align: inherit;">Conectar-se √† nuvem √© apenas no primeiro momento. </font><font style="vertical-align: inherit;">Trocas de tr√°fego adicionais s√£o realizadas diretamente, n√£o atrav√©s da nuvem. </font><font style="vertical-align: inherit;">Se voc√™ instalar, por exemplo, o OpenVPN no VPS, o mesmo tr√°fego ser√° executado do cliente para o VPS e, em seguida, voltar√° para a mesma rede Wi-Fi no servidor dom√©stico. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em princ√≠pio, existe at√© um chip para colocar seus servidores moon. </font><font style="vertical-align: inherit;">Quase em uma rede isolada da Internet, toda essa economia deve ser implantada.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Qual √© o resultado?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O ESP32 envia seus dados para o servidor mqtt implantado no VPS. Sobre TLS, certificado de cliente necess√°rio. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Uma VPN atrav√©s do Zerotier √© instalada com o servidor dom√©stico. O Sonoff rfBridge se comunica com o firmware Tasmota atrav√©s deste servidor dom√©stico, do mqtt ao VPS. N√£o h√° como definir o TLS com um certificado de cliente; portanto, o MQTT usual est√° configurado para 1883. De qualquer forma, o servidor dom√©stico criptografa esse tr√°fego usando o Zerotier. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bem, eu me conecto ao vis diretamente da rede dom√©stica e da Internet ativando o cliente Zerotier. Voc√™ n√£o pode deslig√°-lo, isso tamb√©m funciona. Mas somente √†s vezes eu preciso de outros clientes VPN (por exemplo, v√° para "Proibido por ILV"). Duas VPNs em um smartphone n√£o se tornaram imediatamente amigos, mas eu n√£o entendi.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tudo √© muito simples. </font><font style="vertical-align: inherit;">Mas o verme engoliu a alma. </font><font style="vertical-align: inherit;">Embora eu n√£o tenha um reator nuclear, mas de repente? </font><font style="vertical-align: inherit;">Houve um caso em que eles quebraram o TeamViewer (uma empresa, n√£o especificamente o software cliente) e, atrav√©s deles, obtiveram acesso a muitas contas. </font><font style="vertical-align: inherit;">E, em geral, escrevi desde o in√≠cio que amo tudo o que √© meu. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ent√£o, no pr√≥ximo passo, mudei do Zerotier para o OpenVPN. </font><font style="vertical-align: inherit;">Est√° tudo em minhas m√£os. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O √∫nico "alien√≠gena" √© o VPS do fornecedor. </font><font style="vertical-align: inherit;">Bem, estou lan√ßando tudo especialmente em cont√™ineres de encaixe para poder me mover instantaneamente. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se eu soubesse o quanto teria que lidar com o OpenVPN, talvez n√£o. </font><font style="vertical-align: inherit;">Para ser justo, os principais problemas eram precisamente por causa dos cont√™ineres.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclus√£o</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No pr√≥ximo artigo, falarei sobre o OpenVPN e os recursos de configura√ß√£o em minhas condi√ß√µes (cont√™ineres, roteamento de outros dispositivos da rede dom√©stica). Haver√° mais configura√ß√µes, detalhes t√©cnicos e dificuldades. Mas imediatamente a segunda parte n√£o come√ßou a escrever sem isso. N√£o est√° claro por que essas pervers√µes s√£o necess√°rias. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E, por precau√ß√£o, uma pergunta para quem sabe: embora eu tenha um VPS e um pequeno (512 MB de RAM), ele √© usado menos de 1%. docker stats: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/8v/fp/ka/8vfpkabqind44rkwfcycs7b7ais.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E tive a ideia de lan√ßar tudo como um cont√™iner em algum Google Cloud Run, Amazon Fargate ou algo semelhante. A implanta√ß√£o de um servidor com todos os tipos de fail2ban atrav√©s do ansible n√£o √© um problema. Instale o Docker tamb√©m. Mas por que, se voc√™ precisar de apenas uma pequena fra√ß√£o de seus recursos? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No entanto, de acordo com meus c√°lculos, o mesmo Fargate me custaria muitas vezes mais.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Talvez eu n√£o tenha entendido alguma coisa? </font><font style="vertical-align: inherit;">Portanto, seria interessante ter um pequeno cont√™iner puramente para encaminhar o porto para casa e n√£o um VPS inteiro. </font><font style="vertical-align: inherit;">Nao existe tal coisa?</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt504706/index.html">Gerenciamento autom√°tico de energia Wi-Fi</a></li>
<li><a href="../pt504708/index.html">Emiss√£o do certificado Sectigo ap√≥s 30 de maio de 2020 e m√©todo de solu√ß√£o</a></li>
<li><a href="../pt504710/index.html">FOSS News No. 18 - uma revis√£o das not√≠cias gratuitas e de c√≥digo aberto de 25 a 31 de maio de 2020</a></li>
<li><a href="../pt504712/index.html">Por que n√£o estou usando o SharedViewModel para fragmentos?</a></li>
<li><a href="../pt504714/index.html">Ferramentas de medi√ß√£o de software Go</a></li>
<li><a href="../pt504718/index.html">O resumo de materiais frescos do mundo do front-end da √∫ltima semana n ¬∞ 417 (25 a 31 de maio de 2020)</a></li>
<li><a href="../pt504720/index.html">O mecanismo de modelo mais r√°pido para PHP</a></li>
<li><a href="../pt504722/index.html">HLS no MP4 usando ffmpeg em um navegador</a></li>
<li><a href="../pt504724/index.html">Connectionism</a></li>
<li><a href="../pt504726/index.html">4 acordos</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>