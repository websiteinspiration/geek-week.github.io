<!doctype html>
<html class="no-js" lang="zh-CN">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>⚓️ 👩🏼‍🤝‍👨🏿 👼🏽 Terraform，Mono存储库和合规性作为代码 🎖️ 🍱 ⤵️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="大家好。OTUS在“基于Kubernetes的基础架构平台”课程中为一个新团队开放了招聘，与此相关的是，我们准备了关于该主题的有趣材料的翻译。
 
 
 
 您可能是将terraform用于基础结构作为代码的人之一，并且您想知道如何更高效，更安全地使用它。总的来说，最近，这困扰了许多人。我们所有人都...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Terraform，Mono存储库和合规性作为代码</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/496162/"><b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">大家好。</font><font style="vertical-align: inherit;">OTUS在</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“基于Kubernetes的基础架构平台”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">课程中为一个新团队开放了招聘，</font><font style="vertical-align: inherit;">与此相关的是，我们准备了关于该主题的有趣材料的翻译。</font></font></i></b><br>
<br>
<img src="https://habrastorage.org/webt/_-/a_/zq/_-a_zqk4jh1yeiuysg6pmfprejm.png"><br>
<hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
您可能是将terraform用于基础结构作为代码的人之一，并且您想知道如何更高效，更安全地使用它。总的来说，最近，这困扰了许多人。我们所有人都使用不同的工具，语言编写配置和代码，并花费大量时间使其更具可读性，可扩展性和可伸缩性。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ct/v9/dq/ctv9dqpci5uhnejvqacfdlzve5q.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">也许问题出在我们自己身上？</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
书面代码应能创造价值或解决问题，并可重复使用以进行重复数据删除。通常，这种讨论以</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“让我们使用模块”</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">结尾</font><font style="vertical-align: inherit;">。我们都使用terraform模块，对不对？由于过多的模块化，我可能会写很多有问题的故事，但这是完全不同的故事，我不会。</font></font><a name="habracut"></a><br>
<br>
<img src="https://habrastorage.org/webt/up/tu/x2/uptux2lqssssnc_yyadvetw4sa0.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不我不会。不要坚持，不。好吧，也许以后。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
有一种众所周知的做法-在使用模块锁定根模块时标记代码，以便即使更改模块代码也能保证其运行。这种方法应成为团队原则，在其中适当地标记和适当地使用适当的模块。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...但是依赖项呢？如果我</font><font style="vertical-align: inherit;">在</font><b><font style="vertical-align: inherit;">120个</font></b><font style="vertical-align: inherit;">不同的存储库中</font><font style="vertical-align: inherit;">有</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">120个</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模块</font><font style="vertical-align: inherit;">，并且更改一个模块会影响其他20 </font><b><font style="vertical-align: inherit;">个</font></b><font style="vertical-align: inherit;">模块，该</font><font style="vertical-align: inherit;">怎么办</font><font style="vertical-align: inherit;">。这是否意味着我们需要执行</font><b><font style="vertical-align: inherit;">20 + 1</font></b><font style="vertical-align: inherit;">拉取请求？如果审核者的最少人数为2，则意味着</font><b><font style="vertical-align: inherit;">21 x 2 = 44</font></b></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">评论。认真！我们只需通过“更改一个模块”使命令瘫痪，每个人都将开始发送《指环王》的模因或gif，而一天中的其余时间将丢失。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/mh/97/hp/mh97hpwsk28i70xcrk_g-jkie-u.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个PR通知每个人，一个PR召集每个人，sha铐并陷入黑暗</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
，工作值得吗？我们应该减少评论者的数量吗？或者，如果更改有很大的影响，则可以将模块作为例外，而无需PR。真？您想在一片黑暗的黑暗森林中盲目行走吗？还是</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将他们聚在一起，感到无聊而陷入黑暗</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
不，请不要更改评论的顺序。如果您认为与PR合作是正确的，那么请坚持下去。如果您拥有智能管道或将其推向高手，那么请继续使用此方法。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在这种情况下，问题不是</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“您如何工作”</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，而是</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ git存储库的结构是什么”</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/q9/qd/1m/q9qd1mffdrpnnfs2ywarhzzojwk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
这与我最初应用以下建议时的感觉类似，</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
让我们回到基础知识。</font><font style="vertical-align: inherit;">具有terraform模块的存储库的一般要求是什么？</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">必须对其进行标记，以便没有重大更改。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">任何更改都应该能够测试。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">变更必须经过相互审查。</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
然后，我提出以下建议- </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不要将</font></font></b> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">微型存储库用于terraform模块。</font><font style="vertical-align: inherit;">使用一个单存储库</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有变更/要求时，您可以标记整个存储库</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以测试任何更改，PR或推送。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">任何更改都可以通过审核。</font></font></li>
</ul><br>
<img src="https://habrastorage.org/webt/ff/si/dm/ffsidmva0173goa0qakuisrr5o4.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我有力量！</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
好的，但是此存储库的结构是什么？在过去的四年中，我与此相关的失败很多，我得出的结论是，将模块放在单独的目录中将是最佳解决方案。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/rs/0j/0g/rs0j0gfsrkk45cfmo0j8oemoe-4.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mono存储库的示例目录结构。看到tags_override变更了吗？</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
因此，影响其他20个模块的模块更改仅为</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1 PR</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">！即使您在此PR中添加了5位审阅者，与微型存储库相比，审阅也非常快。如果您使用Github，那就更好了！您可以将</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CODEOWNERS</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于具有维护者/所有者的模块，并且对这些模块的任何更改都必须得到该所有者的批准。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
很好，但是如何使用位于mono-repository目录中的模块？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
简单：</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">module</span> <span class="hljs-string">"from_mono_repo"</span> {<font></font>
 source = <span class="hljs-string">"git::ssh://.../&lt;org&gt;/&lt;repo&gt;.git//&lt;my_module_dir&gt;"</span><font></font>
 ...<font></font>
}<font></font>
<span class="hljs-keyword">module</span> <span class="hljs-string">"from_mono_repo_with_tags"</span> {<font></font>
  source = <span class="hljs-string">"git::ssh://..../&lt;org&gt;/&lt;repo&gt;.git//&lt;mod_dir&gt;?ref=1.2.4"</span><font></font>
  ...<font></font>
}<font></font>
<span class="hljs-keyword">module</span> <span class="hljs-string">"from_micro_repo"</span> {<font></font>
  source = <span class="hljs-string">"git::ssh://.../&lt;org&gt;/&lt;mod_repo&gt;.git"</span><font></font>
  ...<font></font>
}<font></font>
<span class="hljs-keyword">module</span> <span class="hljs-string">"from_micro_repo_with_tags"</span> {<font></font>
  source = <span class="hljs-string">"git::ssh://.../&lt;org&gt;/&lt;mod_repo&gt;.git?ref=1.2.4"</span><font></font>
  ...<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
这种结构的缺点是什么？</font><font style="vertical-align: inherit;">好吧，如果您尝试使用PR / change测试“每个模块”，那么您可以获得1.5个小时的CI管道。</font><font style="vertical-align: inherit;">您需要在PR中找到修改后的模块。</font><font style="vertical-align: inherit;">我这样做是这样的：</font></font><br>
<br>
<pre><code class="java hljs">changed_modules=$(git diff --name-only $(git rev-parse origin/master) HEAD | cut -d <span class="hljs-string">"/"</span> -f1 | grep ^aws- | uniq)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
还有一个缺点：每当您运行“ terraform init”时，它将整个存储库加载到.terraform目录中。但是我从来没有遇到过问题，因为我在可伸缩的AWS CodeBuild容器中运行管道。如果您使用詹金斯和持久詹金斯奴隶，那么您可能会遇到此问题。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/cm/fd/jz/cmfdjzpaet7z2bwg5wjvclj2sm4.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不要让我们哭泣。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
使用单一存储库，您仍然拥有微型存储库的所有优点，但是作为一项奖励，您可以减少维护模块的成本。</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">老实说，以这种方式工作之后，将微型存储库用于terraform模块的建议应视为犯罪。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
太好了，单元测试呢？你真的需要这个吗？ ...一般来说，单元测试到底是什么意思。您是否真的要检查AWS资源是否正确创建？这是谁的责任：terraform或处理资源创建的API？也许我们应该更多地关注</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代码的负面测试和幂等性</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
为了检查代码的幂等性，terraform提供了一个出色的参数，称为</font></font><code>-detailed-exitcode</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。赶紧跑：</font></font><br>
<br>
<pre><code class="java hljs">&gt; terraform plan -detailed-exitcode</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
之后，运行即可</font></font><code>terraform apply</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。至少您将确保您的代码是幂等的，并且不会由于随机字符串或其他原因而创建新资源。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
负面测试呢？一般而言，负面测试是什么？实际上，这与单元测试没有太大区别，但是您要注意负面情况。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
例如，</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不允许任何人创建未加密的公共S3存储桶</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
因此，实际上，您不是基于一组策略，而是检查代码是否创建了资源，而不是检查是否实际上在创建S3存储桶。怎么做？ Terraform Enterprise为此提供了一个很好的工具</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sentinel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...但是也有开源替代方案。当前，有许多用于静态分析HCL代码的工具。这些工具基于通用的最佳实践，将不允许您做任何不需要的事情，但是如果它没有您需要的测试……或者，如果您的情况略有不同，则更糟。例如，您希望允许根据某些条件将某些S3存储桶公开，实际上，这将是这些工具的安全漏洞。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
这是出现</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">符合地形的</font></a><font style="vertical-align: inherit;">地方</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">该工具不仅允许您编写自己的测试，可以在其中确定所需的内容作为公司的策略，还可以通过将安全性向左移动来帮助您将安全性与开发分开。</font><font style="vertical-align: inherit;">听起来很有争议，对吧？</font><font style="vertical-align: inherit;">没有。</font><font style="vertical-align: inherit;">怎么了 </font></font><br>
<br>
<img src="https://habrastorage.org/webt/2g/sc/i1/2gsci1q3cc5xgjy2-iazueeaere.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Terraform-compliance徽标</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
首先，terraform-compliance使用行为驱动开发（BDD）。</font></font><br>
<br>
<pre><code class="java hljs">Feature: Ensure that we have encryption everywhere.<font></font>
<font></font>
    Scenario: Reject <span class="hljs-keyword">if</span> an S3 bucket is not encrypted<font></font>
        Given I have aws_s3_bucket defined<font></font>
        Then it must contain server_side_encryption_configuration</code></pre><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">检查是否启用了加密，</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
如果这还不够，您可以编写更详细的信息：</font></font><br>
<br>
<pre><code class="java hljs">Feature: Ensure that we have encryption everywhere.<font></font>
<font></font>
    Scenario: Reject <span class="hljs-keyword">if</span> an S3 bucket is not encrypted with KMS<font></font>
        Given I have aws_s3_bucket defined<font></font>
        Then it must contain server_side_encryption_configuration<font></font>
        And it must contain rule<font></font>
        And it must contain apply_server_side_encryption_by_default<font></font>
        And it must contain sse_algorithm<font></font>
        And its value must match the <span class="hljs-string">"aws:kms"</span> regex</code></pre><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们会更深入地验证KMS是否用于加密</font></font></i> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
，该测试的terraform代码：</font></font><br>
<br>
<pre><code class="java hljs">resource <span class="hljs-string">"aws_kms_key"</span> <span class="hljs-string">"mykey"</span> {<font></font>
 description             = <span class="hljs-string">"This key is used to encrypt bucket objects"</span>
 deletion_window_in_days = <span class="hljs-number">10</span><font></font>
}<font></font>
<font></font>
resource <span class="hljs-string">"aws_s3_bucket"</span> <span class="hljs-string">"mybucket"</span> {<font></font>
 bucket = <span class="hljs-string">"mybucket"</span><font></font>
<font></font>
 server_side_encryption_configuration {<font></font>
   rule {<font></font>
     apply_server_side_encryption_by_default {<font></font>
       kms_master_key_id = <span class="hljs-string">"${aws_kms_key.mykey.arn}"</span>
       sse_algorithm     = <span class="hljs-string">"aws:kms"</span><font></font>
     }<font></font>
   }<font></font>
 }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
因此，组织中的所有内容都能真正理解测试。在这里，您可以将这些测试的编写委托给安全服务或具有足够的安全知识的开发人员。该工具还允许您将BDD文件存储在另一个存储库中。当代码更改和与代码关联的安全策略更改将是两个不同的实体时，这将有助于区分责任。这些可以是具有不同生命周期的不同团队。对不对？好吧，至少对我而言。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
有关</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">terraform-compliance的</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">更多信息</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">，</font></a><font style="vertical-align: inherit;">请参见此</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">演示文稿</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们解决了</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">符合Terraform</font></a><font style="vertical-align: inherit;">的许多问题</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，尤其是在安全服务与开发团队相距甚远且可能不了解开发人员正在做什么的情况下。您已经猜到了此类组织中正在发生什么。通常，安全服务开始阻止对它们可疑的一切，并基于外围安全性构建安全系统。哦，上帝... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在许多情况下，仅对</font><font style="vertical-align: inherit;">设计（或/和陪同）基础架构的团队</font><font style="vertical-align: inherit;">使用</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">terraform</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">terraform-compliance</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有助于将这两个不同的团队放在同一张桌子上。当您的安全团队开始从所有开发管道中获得即时反馈来开发某些东西时，他们通常会动力更大。好吧，通常...</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
因此，在使用terraform时，我们按以下方式构建git存储库：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/vl/d_/ln/vld_ln5d9trbudgjtb2wft-32vk.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
当然，这非常自大。</font><font style="vertical-align: inherit;">但是我很幸运（或者不是很幸运？）可以在几个组织中使用更详细的结构。</font><font style="vertical-align: inherit;">不幸的是，所有这些并没有很好地结束。</font><font style="vertical-align: inherit;">幸福的结局应该隐藏在数字3中。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如果您有微型存储库的成功案例，请告诉我，我真的很感兴趣！</font></font><br>
<br>
<hr><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们邀请您参加</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">免费的课程，</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在其中</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们将考虑未来基础架构平台的组件，并了解如何正确交付我们的应用程序</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></i></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN496148/index.html">ES6 +中的结构设计模式，以《权力的游戏》为例</a></li>
<li><a href="../zh-CN496152/index.html">网络自动化。生活案例</a></li>
<li><a href="../zh-CN496154/index.html">客户服务自动化：DeepPavlov的端到端解决方案</a></li>
<li><a href="../zh-CN496156/index.html">流量分析系统如何通过MITER ATT＆CK检测黑客策略</a></li>
<li><a href="../zh-CN496160/index.html">我们研究了Mediastreamer2 VoIP引擎。第5部分</a></li>
<li><a href="../zh-CN496164/index.html">在危机期间，我失业了，现在我担心编写聪明的代码，以免吓到最新的职位空缺</a></li>
<li><a href="../zh-CN496166/index.html">教义ResultSetMapping与示例</a></li>
<li><a href="../zh-CN496170/index.html">我们注定了第一名// // Udalenka陷入危机和独创性的死亡</a></li>
<li><a href="../zh-CN496174/index.html">对分析，产品团队，亚马逊，以色列，新加坡，远程工作等的需求增加-讨论了很多。</a></li>
<li><a href="../zh-CN496176/index.html">大型虚拟会议：保护现代数字公司的数据的真实经验</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>