<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🕑 🚶🏼 🤴🏼 BFCache, atau Di sana dan kembali. Laporan Yandex 📕 👩🏿‍🤝‍👩🏽 👀</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Orang sering menggunakan tombol kembali ke halaman sebelumnya di browser - mungkin lebih sering daripada yang Anda pikirkan. Dan jika demikian, lalu m...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>BFCache, atau Di sana dan kembali. Laporan Yandex</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/496360/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Orang sering menggunakan tombol kembali ke halaman sebelumnya di browser - mungkin lebih sering daripada yang Anda pikirkan. </font><font style="vertical-align: inherit;">Dan jika demikian, lalu mengapa segera membuang halaman dari memori browser, dan setelah sedetik menghabiskan waktu dan lalu lintas membukanya kembali? </font><font style="vertical-align: inherit;">Agar pengguna dapat kembali dengan cepat, teknologi BFCache diciptakan, yang penting untuk diingat ketika mengembangkan antarmuka. </font><font style="vertical-align: inherit;">Victor Khomyakov</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pemenang-homyakov</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> menemukan "caching bolak-balik" dan menyusun tabel kompatibilitas BFCache dengan API yang berbeda.</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/vz2IsHcSaKE" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Halo, nama saya Victor. </font><font style="vertical-align: inherit;">Saya bekerja sebagai bagian dari tim yang cukup besar yang berhubungan dengan halaman pencarian.</font></font><br>
<a name="habracut"></a><br>
<img src="https://habrastorage.org/webt/ai/mc/ut/aimcutfjg_xnumc1xre2li547vw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Minimal, Anda sudah melihat halaman yang sama atau serupa di Google. Dan khususnya, saya menangani masalah kecepatan unduhan halaman ini - sehingga membuatnya di server secepat mungkin dan mengunduh dan menampilkan kepada klien secepat mungkin. Mengapa ini penting? Semakin sedikit klien yang menunggu halaman Anda dimuat, semakin kecil kemungkinan ia tidak akan menunggu dan meninggalkan Anda. Dan semakin besar kemungkinan klien akan berhasil mengonversi ke hal lain, semakin banyak akan menjadi skor promosi bersih. Artinya, klien akan dengan senang hati memberi tahu semua orang yang mereka tahu bahwa ini adalah halaman keren yang luar biasa - itu memuat dengan sangat cepat, sangat nyaman untuk digunakan. Dan pada akhirnya, semakin banyak uang yang bisa Anda peroleh. Atau perusahaan Anda, maka itu akan memberi Anda hadiah.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya akan memberikan sejumlah contoh dari perusahaan terkenal. Google melakukan percobaan. Mereka dengan sengaja menyematkan penundaan pada halaman pencarian dan mengukur bagaimana ini mempengaruhi kinerja. Ternyata rata-rata ada setengah persen lebih sedikit pencarian per pengguna. Apa itu setengah persen? Hitung: setengah persen dari ratusan juta pengguna Google adalah jumlah yang cukup besar. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bing melakukan percobaan yang sama. Mereka tidak percaya Google, mereka memutuskan untuk mengecek. Mereka mendapat hasil yang serupa: pendapatan yang lebih sedikit per pengguna saat halaman melambat. Mengapa melambat? Karena lebih mudah untuk memperlambat halaman dengan jumlah persis milidetik sehingga dapat dengan mudah diproduksi ulang dalam produksi daripada mempercepatnya dengan jumlah yang sama.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Contoh dari AliExpress. Mereka mempercepat situs mereka sebesar 36% dan menerima lebih banyak pesanan dari pengguna. Pesanan adalah uang langsung. Secara umum, sudah jelas bagi semua orang bahwa kecepatan sangat penting, itu mempengaruhi, melalui sejumlah metrik tertentu, uang yang diperoleh. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan satu faktor lagi. Hari ini kita </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">telah berbicara</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tentang pengoptimalan gambar. Dengan mengoptimalkan lalu lintas Anda, mengurangi jumlah unduhan, Anda membayar lebih sedikit uang kepada hoster Anda untuk lalu lintas keluar. Ini juga uang yang akan tetap di saku Anda. Bagaimana jika saya tiba-tiba menawarkan diskon 10% untuk lalu lintas dari host mana pun tanpa batasan dan ketentuan apa pun? Dan jika saya mengusulkan untuk memastikan bahwa pangsa halaman Anda - misalnya, sepuluh persen - dimuat oleh pengguna hampir secara instan? Tidak ada yang akan menolak.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Teknologi yang akan saya coba bicarakan hari ini adalah salah satu solusi yang memungkinkan yang memberlakukan beberapa batasan pada tumpukan mana Anda bekerja, teknologi mana, tetapi pada saat yang sama berjanji untuk memberi Anda keuntungan yang cukup signifikan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk mulai dengan, Google mengumpulkan statistik tentang bagaimana browser ini digunakan di browser mereka. Dan mereka menerbitkan nomor seperti itu: ternyata, rata-rata, dari semua pembukaan halaman, dari semua navigasi di mobile Chrome, sekitar 19% adalah gerakan bolak-balik melalui cerita. Pikirkan apa artinya itu? Jika Anda bulat, ternyata 20% dari navigasi bergerak ke halaman di mana pengguna baru saja.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bagi kami, seperti untuk penulis halaman, ini berarti: bahkan jika pengguna meninggalkannya, ada kemungkinan besar ia akan kembali. Di satu sisi, ini mungkin justru masalah ponsel: semuanya kecil, mudah kehilangan jari, klik tautan dan tinggalkan halaman, lalu katakan: "Oh, sial! Saya ingin kembali ". Tetapi pada desktop, situasinya hampir sama: ada jumlahnya kurang, tetapi masih ada persentase pengembalian yang signifikan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apa yang sedang kita lakukan saat ini? Kami menghabiskan waktu dan lalu lintas pengguna secara tidak efektif. Artinya, kita mulai memuat kembali halaman yang sama, menguraikannya, membuat ulang DOM, menggambar ulang semua yang ada di layar, memuat, menjalankan JavaScript.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Browser adalah hal yang sangat kuat. Dia mencoba menggunakan cache sedapat mungkin. Dan sebagian besar sumber daya mungkin ada dalam cache-nya. Dia tidak akan menunggu mereka dari jaringan, tetapi akan mengambilnya langsung dari cache. Misalnya, dalam mesin V8, hasil parsing JavaScript juga di-cache. Yaitu, peramban tidak akan memuat ulang dan mem-parsing JS, dan dalam kebanyakan kasus diperlukan untuk segera menjalankannya. Tapi tetap saja, membangun kembali DOM, memuat ulang sumber daya yang tidak di-cache, dan menjalankan JS membutuhkan banyak waktu. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Solusinya menunjukkan sendiri. Apa yang kita lakukan? Kami, ketika pengguna meninggalkan halaman kami, jangan langsung membersihkannya. Kami cukup menyimpan kondisinya dan secara visual menyembunyikannya dari pengguna sehingga di bawah kapnya tetap ada di peramban.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apa yang akan kita lakukan jika pengguna memutuskan untuk kembali? </font><font style="vertical-align: inherit;">Cukup tunjukkan padanya halaman tersimpan yang sama. </font><font style="vertical-align: inherit;">Itu dapat ditampilkan hampir secara instan. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ax/xm/7d/axxm7doualef_atc2j8_ufybr2i.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Teknologi ini disebut back / forward cache, dari kata "bolak-balik". </font><font style="vertical-align: inherit;">Pendek untuk bfcache. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Berikut adalah contoh bagaimana peramban yang sama, rakitan yang sama, berperilaku ketika bfcache mati dan hidup. </font><font style="vertical-align: inherit;">Pembukaan halaman pertama sama lambatnya baik di sana maupun di sana. </font><font style="vertical-align: inherit;">Tetapi lebih jauh lagi, ketika kita mulai bergerak bolak-balik melalui cerita, jeda terlihat di sebelah kiri, dan itu tidak di kanan. </font><font style="vertical-align: inherit;">Di sebelah kiri, gerakan biasa melalui sejarah membutuhkan waktu yang nyata. </font><font style="vertical-align: inherit;">Di sebelah kanan, semuanya terjadi sangat, sangat cepat.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tampilkan GIF</font></font></b><div class="spoiler_text"><img src="https://habrastorage.org/webt/lf/0n/h1/lf0nh1gnji5qf1w9kj_irqcagrm.gif" width="350"><img src="https://habrastorage.org/webt/og/ca/_n/ogca_ny6xmytv-_iqvdl4xslpcq.gif" width="350"></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Contoh serupa dari pencarian kami. Di sebelah kiri adalah Safari biasa di macOS dengan bfcache dinonaktifkan, di sebelah kanan adalah Safari yang sama dengan pengaturan default dan bfcache diaktifkan. Ini adalah kasus yang cukup umum: seseorang datang mencari, mungkin tidak tahu persis apa yang dia cari, mungkin bertanya beberapa opsi permintaan. Saya bertanya permintaan pertama - ada sesuatu yang tidak beres. Permintaan kedua tampaknya lebih baik. Ketiga - tidak, lebih buruk, kembali ke permintaan sebelumnya. Dan pada saat ini akan sangat baik untuk tidak membuatnya menunggu. Dia baru saja melihat permintaan sebelumnya, langsung tunjukkan.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Atau opsi kedua, jika Anda memiliki pagination dan beberapa halaman tentang masalah ini. Man membalik-balik masalah ini. Saya pergi ke halaman kedua, ketiga, keempat, melihat - tidak, ada sesuatu yang salah, saya akan kembali. Dan kami, sekali lagi, dapat menunjukkan halaman sebelumnya hampir secara instan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Masalah penting adalah keamanan. Meskipun laman tempat pengguna tidak dalam kondisi tersembunyi, ia dapat mengakses berbagai API yang memungkinkan Anda membaca status perangkat keras ponsel atau komputer Anda. Berikut adalah daftar singkat dari apa yang langsung terlintas dalam pikiran: geolokasi, mengubah posisi perangkat Anda di ruang, akses ke kamera, dan suara dari mikrofon.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kemudian, ketika halaman muncul, penting bahwa itu tidak mendapatkan akses ke semua peristiwa yang terjadi selama waktu itu disembunyikan. </font><font style="vertical-align: inherit;">Jika tidak, saluran tambahan akan terbuka untuk memata-matai pengguna. </font><font style="vertical-align: inherit;">Adalah penting bahwa dia tidak mendapatkan riwayat gerakan Anda selama ini dan rekaman mikrofon dan kamera. </font><font style="vertical-align: inherit;">Pengembang peramban juga tidak boleh melupakan hal ini.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dukungan API dan browser</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lebih dekat dengan topik. Misalkan saya sudah meyakinkan Anda, Anda adalah: "Ya, topik yang bagus, kita harus bekerja dengan ini." API apa yang kami miliki, apa yang dapat kami kerjakan jika kami setuju untuk mempertimbangkan bfcache, dan bagaimana hal ini didukung oleh browser? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di mana bfcache sudah ada, di mana saya bisa melihatnya? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Sudah lama diterapkan di browser Firefox, Safari (dan macOS, dan iOS), serta di Internet Explorer 11 (!). Biasanya kami memarahi pengembang Microsoft, tetapi di sini mereka hanya mencoba. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Ini diterapkan di browser UC Browser 11/12, versi untuk Android. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Tiba-tiba dia tidak ada di Chrome. Dan di Chromium fitur ini sedang dikembangkan.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/_v/dh/yq/_vdhyq6ph84lnnb05f2ffw75ud4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jadi, ketika mereka melakukan ini di Chromium, hampir semua browser ini (dan ini bukan daftar lengkap) cepat atau lambat akan mendapatkan fungsionalitas ini - gratis, tanpa SMS dan registrasi. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apakah ada API? Saya ingin mengelola bfcache, saya ingin menghidupkan dan mematikannya langsung dari JavaScript, untuk mengetahui apakah ada halaman di bfcache atau tidak. Bagaimana dengan API semacam itu? Tidak ada API semacam itu. Dan ini dilakukan secara sadar: halaman seharusnya tidak ingin menghidupkan atau mematikan bfcache untuk semua orang dan untuk dirinya sendiri. Atau cari tahu apakah ada orang dalam bfcache ini atau tidak. Ini semua karena keamanan. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/4m/5i/ra/4m5iragmxqrikl_7i8dqp-0ijcy.jpeg"><br>
<b><sup><sub><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tautan dari slide</font></font></a></sub></sup></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tetapi apa yang kita miliki? Jenis navigasi. Ada jenis tautan - prerender tautan, saat kami ingin merender halaman sebelumnya. Ada jenis navigasi khusus untuknya: halaman ini akan dibuka dengan "jenis prerender" NavigationType. Jika kita hanya membuka halaman di browser, maka akan ada "navigasi". Jika kita mengklik tombol "Perbarui", itu akan menjadi "memuat ulang". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami tertarik pada jenis navigasi "back_forward" di sini, ini jelas menunjukkan bahwa pengguna bergerak bolak-balik melalui cerita. Ini adalah jenis navigasi yang dapat digunakan oleh bfcache kami.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ud/8o/o_/ud8oo_rhzpnyzjfdymvr11pfg4i.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
API lain adalah acara pageshow pagehide. Mereka sudah ada di browser. Dengan demikian, pageshow dipicu ketika halaman Anda ditampilkan di browser kepada pengguna, pagehide dipicu ketika halaman bersembunyi karena alasan apa pun. Dan mereka dilengkapi dengan bidang yang masih ada. Jika halaman bersembunyi dan pada saat yang sama akan ditempatkan dalam bfcache, maka bidang yang tetap ada akan benar. Jika halaman ditampilkan saat menaikkannya dari bfcache, maka bidang yang tetap ada akan kembali benar. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dengan demikian, jika browser tidak akan melakukan cache halaman, maka pagehide akan tetap salah. Dan jika browser menampilkan halaman selama pemuatan normal, atau tidak menggunakan bfcache, maka pageshow juga akan tetap salah. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/7v/kh/kh/7vkhkhw8tjkz6y10o97urigdhea.jpeg"><br>
<b><sup><sub><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tautan dari slide</font></font></a></sub></sup></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dukungan acara tersedia di hampir semua browser, bahkan yang belum mendukung bfcache. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/om/6w/7h/om6w7hjxxswbq5uvpaiu-afe5to.jpeg"><br>
<b><sup><sub><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tautan dari slide</font></font></a></sub></sup></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Hal yang sama berlaku untuk bidang yang ada. Itu sudah ada di Chrome, dan Chrome masih tidak mendukung bfcache. Artinya, bidang ini akan selalu ada di dalamnya, tetapi untuk saat ini akan salah. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ketika saya menemukan fenomena ini, bfcache, saya harus mempelajarinya, mengetuk semua sisi, memperhatikan cara kerjanya. Saya langsung ingin melihat pada halaman saya ketika saya membuka apa nilai bidang yang bertahan di handler saya sama dengan.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/dx/k6/qe/dxk6qegw2k1ohv-osipeghzjccw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tampaknya semuanya cukup sederhana. Saya menulis handler dan output ke console.log () apa yang datang kepada saya. Tetapi ketika membuka DevTools di beberapa browser, bfcache mungkin tiba-tiba mati. Yaitu, saya membuka DevTools, saya bolak-balik menelusuri halaman-halaman itu, dan ketekunan saya selalu salah, halaman itu tidak masuk ke bfcache. Oke, saya punya alat kuat lainnya - waspada. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tapi tidak. Peramban modern saat membongkar sebuah halaman di halamanhide, sebelumunload dan unload handler mengabaikan peringatan, itu hanya tidak berfungsi di sana. Dan lagi, saya tidak melihat apa yang saya inginkan. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/by/1b/ij/by1bijibkuzglk6vvkhbcvrmmgo.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Oke, saya punya produk yang lebih mematikan. Saya berada di blok tepat di halaman saya sendiri, yang saya jelajahi, hanya menambahkan teks dari isi acara saya dan dengan demikian mencatat semuanya. Metode ini berhasil.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jw/xt/o1/jwxto1ndmuldxtn4hpoa_3z6-bk.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Semuanya, tolong, bisa digunakan. Saya mendebug kode saya, itu berfungsi untuk saya, saya dapat terus melanjutkannya. Tentu saja, saya tidak lupa bahwa bagaimanapun juga, skrip statis eksternal lebih cocok agar tidak memuat kode inline yang sama pada halaman, tetapi menggunakan caching file. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya menempatkan kode ini dalam skrip eksternal. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/x1/5m/s0/x15ms0a9q4solt69-vucvdyoqgu.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tapi tidak, penangan halaman jaga pageshow jatuh di Safari! Untuk beberapa alasan, mereka tidak bekerja dari skrip eksternal. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Oke, saya sudah memiliki versi yang berfungsi. Saya harus membiarkannya seperti itu.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/td/kq/aw/tdkqawklgz4m_mdw7d_elw7a27m.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya akan menuliskan secara singkat apa yang berhasil saya tapak hanya dalam satu hari. Pertama, DevTools dapat menonaktifkan caching. Anda mungkin ingat bahwa di DevTools pada tab Jaringan di Chrome ada kotak centang "Nonaktifkan cache". Ini menonaktifkan cache jaringan, mungkin tidak memengaruhi bfcache, atau mungkin. Analoginya jelas: kami membuka DevTools, yang berarti kami sedang berkembang dan kami mungkin tidak perlu caching. Mungkin itu mengganggu kita. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/4d/up/mb/4dupmbrpcewpmpngg49_fddhuf4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fitur kedua adalah waspada. Firefox dan Safari akan mengabaikannya secara diam-diam dan terus mengeksekusi penangan lebih lanjut, seolah-olah tidak ada peringatan. Dan hanya satu Chrome tua-baik di konsol akan menulis kesalahan dengan warna merah - Anda memiliki peringatan, saya memblokirnya, tahu tentang itu! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekali lagi saya mengingatkan Anda bahwa penangan dari skrip eksternal di Safari mungkin tidak dipanggil, ini sangat aneh.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan satu lagi berita penting. </font><font style="vertical-align: inherit;">Jika halaman Anda di-cache, yaitu, Anda menerima acara pagehide, dan dikatakan tetap benar, dan browser mengatakan kepada Anda: "Ya, saya memasukkannya ke dalam cache" - ini tidak memberikan jaminan bahwa halaman itu akan menjadi nanti dari cache ini dinaikkan dan ditampilkan kembali ke pengguna. </font><font style="vertical-align: inherit;">Karena browser dapat memutuskan untuk menghapus cache ini jika kehabisan memori. </font><font style="vertical-align: inherit;">Karena pengguna dapat menutup browser dan tidak bernavigasi ke mana pun. </font><font style="vertical-align: inherit;">Ingat ini.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fitur Implementasi</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya mulai mempelajari dokumentasi lebih lanjut, untuk meneliti bagaimana saya bisa hidup dengan pengetahuan ini. Anehnya, dokumentasi itu. Artinya, Anda dapat menggali di internet deskripsi tentang cara kerja bfcache di browser. Tetapi, semakin saya membaca, semakin banyak perbedaan yang terakumulasi di antara berbagai browser. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam satu, ia bekerja seperti ini, yang lain bekerja. Dalam satu, satu mengganggu, yang lain tidak mengganggu. Pengembang tidak tahu bagaimana memproses sejumlah API dengan benar saat menempatkan halaman di bfcache. Mereka berkata: ok, jika halaman menggunakan API ini, maka saya abaikan saja, jangan pernah masukkan ke dalam cache dalam keadaan apa pun. Dan daftar ini berbeda di browser yang berbeda, masing-masing sesuai dengan keinginannya. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan kemudian saya mulai menggabungkan apa yang saya pelajari menjadi satu tabel. Saya mendapat sesuatu seperti berikut:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/9v/qm/iy/9vqmiyq_zcjwc5ln8nciv8golra.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya membaca dokumentasi untuk browser - untuk Firefox, Safari, keluarga Chromium. Ada dokumentasi yang tersedia di IE, meskipun sudah ketinggalan zaman. Kami programmer tidak suka memperbarui dokumentasi setelah perubahan di browser? Ketika saya menyadari bahwa informasi itu ketinggalan zaman, saya mulai menguji halaman kecil saya di browser dan memeriksa API mana yang berfungsi dan mana yang tidak. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ini juga tidak cukup: Saya tidak tahu API mana yang harus dilihat secara prinsip, tetapi tidak memilah-milah semuanya? Dan saya harus melihat ke dalam kode sumber mesin browser itu sendiri, yaitu, kode itu ternyata menjadi sumber pengetahuan yang paling akurat dan dapat diandalkan. Saat ini, pelat ini (di depan Anda adalah bagian dari itu, di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sini adalah tautan</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ke versi lengkap) adalah kumpulan pengetahuan paling komprehensif tentang API yang mengizinkan atau melarang bfcache dari bekerja di browser.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
API yang tidak mengganggu tanda centang dan warna hijau, yang pasti akan mencegah halaman masuk ke bfcache ditandai dengan warna merah. </font><font style="vertical-align: inherit;">Bidang putih adalah ruang yang tidak dijelaskan di mana pun.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Firefox</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Berikut ini beberapa detail menarik dari browser tertentu. Saya akan mulai dengan Firefox, dia adalah orang pertama yang melakukan semuanya. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fh/bt/fh/fhbtfhn8db-lqcxhqe8n8vm8z6u.jpeg"><br>
<b><sup><sub><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tautan dari slide</font></font></a></sub></sup></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Hal terpenting yang saya pelajari dari sumber-sumber Firefox adalah bahwa ketika bekerja dengan bfcache, ia dapat menulis ke teks log pada disk semua alasan mengapa ia tidak dapat meletakkan halaman di cache. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/dd/xp/jr/ddxpjraedcefaftwi0u9cdys2tg.jpeg"><br>
<b><sup><sub><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tautan dari slide</font></font></a></sub></sup></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Dan saya bahkan berhasil menemukan cara membuatnya melakukannya. Ada dua variabel lingkungan rahasia: dalam satu kita menunjukkan apa yang akan dicatat, yang kedua - dalam file apa yang akan menulis log. Setelah itu, kami meluncurkan biner, dan voila! Kita akan melihat kira-kira bahwa pada slide sebelumnya, garis-garis dari bentuk "html tersebut tidak dapat di-cache untuk alasan seperti itu, seperti untuk alasan yang berbeda". Kita dapat membacanya segera, sangat nyaman.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ci/_u/3m/ci_u3mrg5k5um_zah0gtm7splmy.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika Anda ingin bereksperimen sekali, Anda dapat membuka halaman about: networking di Firefox. Di sana Anda dapat memasukkan bidang yang sama di bagian "Jurnal". Kami dapat menunjukkan dalam dua bidang apa dan di mana untuk log, dan dengan tombol memulai dan menghentikan log. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/w3/8s/zb/w38szbgmjgikrkqg-2f7tt6px0a.jpeg"><br>
<b><sup><sub><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tautan dari slide</font></font></a></sub></sup></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Kapan Firefox menolak untuk me-cache halaman? Jika Anda memiliki permintaan yang tidak lengkap, termasuk permintaan AJAX atau permintaan sumber daya seperti gambar, maka dia akan menolak untuk meletakkan halaman di bfcache. Dia yakin itu belum selesai, belum selesai mengunduh, ada semacam aktivitas mencurigakan. Tetapi semua ini tidak berlaku untuk favicon. Jika Anda lupa favicon, jika tidak memuat, ia berpikir baik-baik saja, ia akan melakukannya, itu normal untuk situs Anda.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika Anda memiliki skrip yang sudah berjalan lama, browser akan bertanya: karena butuh waktu, memblokir UI, mungkin mengalahkannya? Dan jika Anda setuju, maka halaman seperti itu dianggap agak salah, dan kami tidak menyimpannya.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika Anda menggunakan IndexedDB ... Ini adalah cerita yang instruktif. Sebelumnya, dalam implementasi pertama, mereka melihat: jika Anda memiliki IndexedDB dan ada transaksi yang tidak lengkap, maka halaman tersebut tidak di-cache, karena tidak jelas bagaimana cara menggunakannya (kami mencoba menyembunyikannya tepat di tengah-tengah transaksi). Tapi kemudian mereka kehilangan kode ini saat refactoring. Dan seperti yang Anda bayangkan, mereka tidak memiliki tes untuk ini. Mereka bahkan memiliki bug di bugtracker. Dia sudah berusia dua tahun dengan sesuatu. Orang-orang menulis: "Bfcache saya dengan IndexedDB tidak berfungsi dengan benar, apa yang harus saya lakukan?" Pengembang Firefox menjawab - ini benar-benar rusak, kami baru saja kehilangan bagian teks ini saat refactoring, oke, biarkan terus. Moral: tes menulis, bahkan jika Anda menulis Firefox, jika tidak semuanya bisa berakhir dengan sedih.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan satu faktor lagi yang tidak menarik di bfcache - jika konten campuran diizinkan secara eksplisit. Apa itu? </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fm/2s/le/fm2sleys4nir1cuff_lw8q87cqi.jpeg"><br>
<b><sup><sub><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tautan dari slide</font></font></a></sub></sup></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Misalkan halaman Anda terbuka melalui HTTPS, tetapi Anda masih memuat beberapa sumber daya melalui HTTP, terutama skrip. Artinya, Anda memiliki skrip non-keamanan, dapat dimodifikasi oleh siapa saja. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ts/k8/kj/tsk8kj6weynueewx9goi38sm81o.jpeg"><br>
<b><sup><sub><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tautan dari slide</font></font></a></sub></sup></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Secara default, Firefox, seperti browser lain, tidak menjalankan skrip non-keamanan seperti itu sekarang. Tetapi jika itu sangat penting bagi Anda, Anda masuk ke pengaturan dan membiarkannya dieksekusi, maka, karenanya, itu tidak akan menembolok halaman seperti itu. Dia akan berkata - baik, Anda mengatakan kepada saya untuk tidak mengeksekusi kode, tapi kemudian tidak, tidak!</font></font><br>
<br>
<img src="https://habrastorage.org/webt/pm/fg/_f/pmfg_fqywdhl7tihvcy09agmaxy.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tweak lain adalah ukuran bfcache itu sendiri. Di sini, standarnya adalah minus satu. Itu berarti berapa banyak memori yang dimiliki Firefox, begitu banyak halaman yang coba di-cache. Tetapi kami dapat secara paksa menonaktifkan cache dengan meletakkan angka nol, atau secara eksplisit menetapkan angka - misalnya, ingat tidak lebih dari lima halaman. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Peringatan: slide berikutnya berisi kode sampel dalam bahasa C ++ yang menakutkan, ini bisa berbahaya pada konferensi front-end. Jangan mencoba menyalinnya, jalankan di konsol browser. Disk Anda mungkin diformat, layar dapat meledak, atau bitcoin dapat ditambang. Aku sudah memperingatkanmu. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/31/l-/uo/31l-uokshfiuo6dyxcivmfzsm5o.jpeg"><br>
<b><sup><sub><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tautan dari slide</font></font></a></sub></sup></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jadi, kode tokek. </font><font style="vertical-align: inherit;">Itu dapat dibuka, dibaca, dilihat secara gratis di Internet. </font><font style="vertical-align: inherit;">Dan saya mencari-cari. </font><font style="vertical-align: inherit;">Ada metode yang paling penting - CanSavePresentation (), ini menjawab pertanyaan: apakah mungkin untuk men-cache dokumen ini? </font><font style="vertical-align: inherit;">Artinya, ini adalah sumber kebenaran tertinggi tentang apa yang sekarang diterapkan di Firefox. </font><font style="vertical-align: inherit;">Namun - dari sanalah saya belajar bahwa Anda dapat membaca log. </font><font style="vertical-align: inherit;">Ada variabel seperti itu - gPageCacheLog. </font><font style="vertical-align: inherit;">Ini adalah log di mana semuanya ditulis. </font><font style="vertical-align: inherit;">Berikut ini adalah kisah yang menarik tentang kunjungan ke C ++. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Artinya, Anda membuka tautan, melihat kode, mencari (ada pencarian yang mudah dan, lebih lagi, cepat) dan Anda dapat mengetahui detail implementasi aktual di versi terbaru browser - yang hanya hilang dari dokumentasi.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Safari</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hal paling kejam yang dilakukan Safari ketika sebuah halaman menyentuh bfcache: jika Anda memiliki permintaan AJAX yang tertunda, Safari hanya membunuhnya. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vp/bh/8p/vpbh8ppqy9qpfbpljjsu2huhtda.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bahkan jika Anda overlay dengan penangan kesalahan dan mencoba memeriksa semuanya, perbaiki - sepertinya permintaan itu tidak ada sama sekali. Setelah pulih dari bfcache, Anda tidak akan memiliki kesalahan, tidak ada "OK", tidak ada sama sekali. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ic/jx/yk/icjxykful4yo0d7hbjopj_woljo.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Penangan pageshow pagehide, seperti yang saya katakan, di Safari dipanggil hanya jika mereka ditulis dalam skrip yang sesuai dengan halaman. Dari skrip eksternal, mereka mungkin atau mungkin tidak berfungsi - betapa beruntungnya. Tapi aku sudah memperingatkanmu.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/0i/o7/ns/0io7nsvts4isj0qbirjisggubeg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Perbedaan menarik lainnya: beforeunload dan unload handler tidak mengganggu halaman masuk ke bfcache. Dalam hal ini, beforeunload selalu dipanggil, dan ketika masuk ke cache, dan ketika tidak menekan. Tetapi membongkar ketika halaman hits cache tidak dipanggil. Dan di sini terdapat rake lain: halaman mungkin menuju ke cache dan tidak pernah muncul darinya, dan jika Anda menulis beberapa kode penting dalam unload, itu mungkin tidak pernah dipanggil, walaupun tidak ada satu kesalahan terjadi pada halaman tersebut. Artinya, ia dengan benar pergi ke cache, dan dari sana ke mana-mana, dan pembongkaran Anda tidak akan pernah dipanggil.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/6e/m2/xy/6em2xyin9409en33_y-xk3ewxtg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Poin menarik lainnya. Seperti yang Anda ketahui, Anda dapat membuka beberapa jendela melalui window.open (). Dan pada saat yang sama, windows ini memiliki tautan satu sama lain. Artinya, mereka secara bersamaan dapat naik ke jendela masing-masing, membaca / menulis properti yang berbeda. Pembukaan windows anak ini tidak mengganggu bfcache. Dan di sini, kemungkinan besar, Safari sama kejamnya dengan permintaan AJAX, yaitu, semuanya susah payah, dan selamat tinggal. Pengembang Apple menyukainya lebih keras. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lagi, satu menit, C ++! Sumber-sumber WebKit juga bukan rahasia, mereka juga dapat dibuka, dibaca dan dipelajari. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/a4/p5/cs/a4p5cs2yfjtvgxb_3iud8b-xog4.jpeg"><br>
<b><sup><sub><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tautan dari slide</font></font></a></sub></sup></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Mereka ada di GitHub, di sana saya menyoroti dua fungsi penting: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- canCacheFrame () - periksa apakah frame ini dapat di-cache.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Dalam objek yang berbeda pada halaman, seperti elemen atau font HTML, ada metode canSuspendForDocumentSuspension (). Objek ini bertanggung jawab atas apakah bisa melakukan cache, membeku, atau tidak. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan satu lagi aspek penting: WebKit memiliki tes yang sangat nyaman. Di sana, tepat di folder LayoutTests / fast / history, dalam bentuk html kecil, ringkas, ringkas, ada tes untuk pekerjaan API yang berbeda yang diterapkan di Safari dengan bfcache. Ini adalah contoh nyata tentang bagaimana Anda dapat menulis kode di Safari dengan API ini dan bagaimana mereka memengaruhi atau tidak memengaruhi apakah mereka mengizinkan atau tidak hit bfcache. Sangat menarik untuk dilihat.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/hx/r-/un/hxr-un8ehvr-zc5dqa_kgr4ieki.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dari sana saya belajar bahwa Safari juga menulis semua pengetahuannya tentang bfcache, semua fitur, ke log teks. </font><font style="vertical-align: inherit;">Tapi, sayangnya, saya tidak pernah menemukan cara mengaktifkan pencatatan ini atau, jika diaktifkan, di mana menemukan file ini di disk. </font><font style="vertical-align: inherit;">Jika ada yang tahu, katakan padaku, aku akan sangat berterima kasih.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chromium.</font></font></h3><br>
<img src="https://habrastorage.org/webt/8z/yv/b5/8zyvb5feibkmt6njztlfuxgipas.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seperti yang sudah saya katakan, masih ada pekerjaan yang sedang berlangsung, semuanya ditutup di bawah bendera. Anda dapat mengunduh Chrome Canary yang baru, buka benderanya. Pengaturan disembunyikan di sana - Anda dapat mencoba bermain dengannya. Anda mungkin melihat sesuatu. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/nu/fr/lw/nufrlwudx02dcxcxuwq0n-fk57e.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dari yang menarik - saya sudah berbicara tentang membuka halaman melalui window.open (). Di Chromium, halaman tersebut sejauh ini tidak di-cache. Mereka tidak menemukan cara menyelesaikan semua ini dengan benar, dan tanpa malu memotongnya, seperti di Safari, hati nurani mereka tidak memungkinkan mereka. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika DOMContentLoaded tidak terjadi, maka halaman tersebut juga tidak akan di-cache.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ada banyak API baru yang dimulai dengan "Web" - itu juga sulit dan tidak bisa dipahami dengan mereka, dan sejauh ini semuanya mematikan bfcache secara default. Artinya, jika sesuatu yang trendi, baru digunakan pada halaman, seperti WebGL, WebVR, WebUSB, WebBluetooth, dll., Halaman seperti itu tidak akan masuk ke bfcache. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pekerja Servis. Kami juga belum menyimpan halaman seperti itu, tetapi kami berencana untuk memprosesnya dengan benar dan menyembunyikannya dari pandangan tajam dari Pekerja Servis. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika geolokasi diaktifkan, kami juga belum menyimpannya. Sangat sederhana untuk saat ini. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika selama ini halaman dalam cache, cookie itu busuk, kami yakin bahwa beberapa jenis otorisasi telah kedaluwarsa. Mungkin itu perbankan online atau yang lainnya. Ini berarti bahwa halaman tersebut tidak lagi valid - kami menghapusnya dari cache. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ae/et/dj/aeetdjeogvqqqmflxx5rtdbtz1o.jpeg"><br>
<b><sup><sub><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tautan dari slide</font></font></a></sub></sup></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Orang-orang Google bahkan melangkah lebih jauh. </font><font style="vertical-align: inherit;">Mereka menyarankan agar kami menyatukan semua yang diformalkan, menyatukan di semua browser, mengusulkan spesifikasi siklus hidup halaman untuk semua negara bagian, menyarankan menambahkan acara baru ke transisi antara berbagai negara. </font><font style="vertical-align: inherit;">Anda dapat melihat tautan yang mereka pikir ada di sana. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/bl/nn/tw/blnntwl767kxalazcyls6lhx98c.jpeg"><br>
<b><sup><sub><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tautan dari slide</font></font></a></sub></sup></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sumber. </font><font style="vertical-align: inherit;">Seperti yang Anda ketahui, sumber Chromium juga tersedia. </font><font style="vertical-align: inherit;">Semua ini terletak pada kelas yang disebut BackForwardCacheImpl - penamaan yang sangat bagus, hampir tidak perlu terlihat. </font><font style="vertical-align: inherit;">Metode utama yang memeriksa apakah suatu dokumen dapat disimpan disebut CanStoreDocument (). </font><font style="vertical-align: inherit;">Ada juga metode GetDisallowedFeatures (), yang hanya mencantumkan semua fitur dan API baru yang tidak didukung di bfcache. </font><font style="vertical-align: inherit;">Sangat mudah: terkonsentrasi di satu tempat, membaca dan menyadari apa yang saat ini mungkin dan apa yang tidak dapat digunakan.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Internet Explorer 11</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sebuah perjalanan ke dalam sejarah bagi mereka yang masih memiliki IE 11. Bagi mereka yang memiliki segalanya buruk. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/hw/st/sy/hwstsylp95mjeehn-yapop5nwqy.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ada bfcache di sana, dan ini adalah masalah utama, karena Anda harus menghadapinya. </font><font style="vertical-align: inherit;">Dokumentasi mengatakan bahwa bfcache seharusnya hanya berfungsi melalui HTTP. </font><font style="vertical-align: inherit;">Bahkan, dalam produksi, ini juga berfungsi pada HTTPS karena beberapa alasan. </font><font style="vertical-align: inherit;">Moral: jika Anda seorang pengembang, harap perhatikan dokumentasi Anda. </font><font style="vertical-align: inherit;">Maka Anda harus menderita karena dia. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika ada handler sebelumunload, maka itu akan mencegahnya masuk ke cache. </font><font style="vertical-align: inherit;">Mereka tidak mengatakan apa-apa tentang pembongkaran dalam dokumentasi - mungkin mereka tidak tahu atau melupakannya. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika halaman belum selesai memuat, itu juga tidak di-cache. </font><font style="vertical-align: inherit;">Jika seseorang menggunakan komponen ActiveX, kami juga tidak melakukan cache. </font><font style="vertical-align: inherit;">Dan jika DevTools juga terbuka di sana. </font><font style="vertical-align: inherit;">Ini poin penting.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/8o/lh/n5/8olhn5ii0fctbxehrs7ab4blwro.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bagaimana tanpa bug? Menambahkan bidang yang bertahan, tetapi terkadang tidak berhasil. Artinya, halaman tersebut benar-benar masuk ke cache, kembali dari sana, dan bertahan tidak disetel ke true. Apa yang harus dilakukan? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami memiliki kode cantik yang menentukan apakah kami kembali dari cache atau memuat ulang dari server. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/op/h1/xb/oph1xbddsxbkhzjlygiyoavtmam.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang harus dilengkapi dengan kruk untuk IE. Kami menentukan bahwa kami memiliki IE, dan dalam beberapa penyelesaian kami memahami bahwa halaman tersebut bagaimanapun diambil dari cache dan pada saat yang sama kami memiliki navigasi sejarah (back_forward). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ct/xe/af/ctxeafrbbmwt1h_9j16jw4fviji.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selain itu, bagaimana Anda tahu jika sebuah halaman di-cache? Kami mengambil waktu pengambilannya. Jika dimuat dari server dalam 50 milidetik atau lebih cepat, maka ini pada dasarnya tidak bisa di IE - itu artinya dari cache! :)</font></font><br>
<br>
<img src="https://habrastorage.org/webt/j-/ib/ch/j-ibchnxog-rdmeez6gmjnbmwr4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya sudah menyebutkan navigasi melalui sejarah. </font><font style="vertical-align: inherit;">Jika kita memiliki tipe navigasi back_forward, maka kita telah melewati histori, dan jika halaman tersebut dari cache, itu berarti bfcache, tidak ada opsi lain di IE.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apa berikutnya?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apa yang harus dilakukan selanjutnya dengan pengetahuan ini? </font><font style="vertical-align: inherit;">Saya tidak ingin Anda keluar dan melupakan semua ini seperti mimpi buruk. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Pertama, di sini adalah hal paling berharga yang saya temui dan apa yang ingin saya dorong Anda: gunakan browser open source! </font><font style="vertical-align: inherit;">Dalam akses terbuka ke Internet saat ini adalah kode sumber dari semua browser terkemuka yang digunakan pelanggan kami. </font><font style="vertical-align: inherit;">Dan ini adalah dokumentasi yang paling relevan tentang bagaimana dan bagaimana itu didukung, di mana dan bagaimana cara kerjanya. </font><font style="vertical-align: inherit;">Termasuk ada tes yang langsung ditulis dalam HTML dan JS. </font><font style="vertical-align: inherit;">Gunakan, lihat!</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Kedua, pertimbangkan dalam aplikasi yang sudah ada bahwa mereka dapat mengalami bfcache. </font><font style="vertical-align: inherit;">Beri tahu penguji Anda tentang hal ini sehingga ketika mereka memeriksa navigasi, mereka tahu bahwa saat menavigasi melalui sejarah, halaman dapat dibuka baik dari server maupun dari bfcache. </font><font style="vertical-align: inherit;">Ini adalah video bug nyata yang kami perbaiki ketika bfcache bekerja untuk kami:</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Buka GIF</font></font></b><div class="spoiler_text"><img src="https://habrastorage.org/webt/vx/1j/dv/vx1jdv4ubukownlagrvftn30g6k.gif" width="400"></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pengguna memasukkan empat permintaan, melihat empat masalah. </font><font style="vertical-align: inherit;">Setelah itu, ia kembali, melihat masalah 3 dan permintaan 4. Masalah sebelumnya lainnya adalah 2 dan permintaan 3. Artinya, ia memiliki keadaan halaman yang tidak cocok - konten string pencarian dan pencarian saling bertentangan. </font><font style="vertical-align: inherit;">Ingatlah ini di aplikasi Anda. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Dan ketiga, jika Anda menulis kode baru, pikirkan apakah Anda perlu bfcache. </font><font style="vertical-align: inherit;">Jika demikian, gunakan tabel kompatibilitas API. </font><font style="vertical-align: inherit;">Jika tidak, jangan gunakan, tetapi jika Anda secara tidak sengaja masuk ke bfcache, pertimbangkan fitur Safari dan peramban lain yang saya sebutkan. </font><font style="vertical-align: inherit;">Beberapa hal dapat robek dengan tidak sopan, dan Anda tidak akan dapat memahami mengapa hal ini terjadi. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seperti yang dijanjikan, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tautan</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ke materi.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id496348/index.html">Studi Kasus API Penyimpanan Web</a></li>
<li><a href="../id496350/index.html">Kamu tidak boleh lewat! - Printer 3D menjawab coronavirus</a></li>
<li><a href="../id496354/index.html">Pemrograman komputer ternary: bermain dengan emulator</a></li>
<li><a href="../id496356/index.html">Membuat navigator menggunakan teknologi augmented reality dan metode pembelajaran mesin</a></li>
<li><a href="../id496358/index.html">Bersiap untuk merayakan Hari Kosmonotika online (daftar sedang diperbarui)</a></li>
<li><a href="../id496362/index.html">Masker diatur ulang</a></li>
<li><a href="../id496366/index.html">Miniseri: komputer terner do-it-yourself</a></li>
<li><a href="../id496368/index.html">Startup Australia mengembangkan PC hybrid dari komponen elektronik dan biologis</a></li>
<li><a href="../id496370/index.html">Kegembiraan dan kesedihan karena kemenangan atas C: kami membuat permen dari prototipe wc di Haskell</a></li>
<li><a href="../id496372/index.html">Cara membuat tampilan khusus untuk lansiran (), konfirmasi () dan prompt () untuk digunakan dalam JavaScript</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>