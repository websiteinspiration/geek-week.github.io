<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>➕ 📭 🚽 Python + matplotlibでのカスタム物理相互作用の初歩的なシミュレーション 👨🏽‍🌾 🌘 💈</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="こんにちは！
 
 ここでは、特定の分野の作業について説明し、次にいくつかの美しい機能を作成します（ここではすべてが非常に単純です）。
 
 
 
 この記事で何が起こるか。
 
 一般的なケース：
 
 

1. ベースについて説明します。つまり、ベクターを使用して作業します（手元に乱暴な動きがな...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Python + matplotlibでのカスタム物理相互作用の初歩的なシミュレーション</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/467803/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">こんにちは！</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここでは、特定の分野の作業について説明し、次にいくつかの美しい機能を作成します（ここではすべてが非常に単純です）。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/_u/hj/cw/_uhjcwkdv3vn28vmkcdlvgonnug.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この記事で何が起こるか。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一般的なケース：</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ベースについて説明します。つまり、ベクターを使用して作業します（手元に乱暴な動きがない人のための自転車）。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重要なポイントと相互作用のフィールドについて説明します</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
特殊なケース（一般に基づく）：</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">電磁界強度のベクトル場を可視化してみましょう（1枚目と3枚目）</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">電磁界中の粒子の動きを視覚化しましょう</font></font><br>
</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
カットの下で会いましょう！</font></font><br>
<a name="habracut"></a><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">理論的プログラミング</font></font></h1><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ベクター</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべての基礎の基礎はベクトルです（特に私たちの場合）。</font><font style="vertical-align: inherit;">したがって、開始するのはベクターの説明です。</font><font style="vertical-align: inherit;">私たちは何が必要なのか？</font><font style="vertical-align: inherit;">ベクトル、距離、モジュール、およびいくつかの技術的なものに対する算術演算。</font><font style="vertical-align: inherit;">リストから継承するベクター。</font><font style="vertical-align: inherit;">これはその初期化の様子です：</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Vector</span>(<span class="hljs-params">list</span>):</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, *el</span>):</span>
        <span class="hljs-keyword">for</span> e <span class="hljs-keyword">in</span> el:<font></font>
            self.append(e)<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
つまり、これでベクターを作成できます </font></font><br>
<br>
<pre><code class="python hljs">v = Vector(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>)
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
算術演算の加算を設定しましょう：</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Vector</span>(<span class="hljs-params">list</span>):</span><font></font>
...<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__add__</span>(<span class="hljs-params">self, other</span>):</span>
        <span class="hljs-keyword">if</span> type(other) <span class="hljs-keyword">is</span> Vector:
            <span class="hljs-keyword">assert</span> len(self) == len(other), <span class="hljs-string">"Error 0"</span><font></font>
            r = Vector()<font></font>
            <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(len(self)):<font></font>
                r.append(self[i] + other[i])<font></font>
            <span class="hljs-keyword">return</span> r
        <span class="hljs-keyword">else</span>:<font></font>
            other = Vector.emptyvec(lens=len(self), n=other)<font></font>
            <span class="hljs-keyword">return</span> self + other
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
罰金：</font></font><br>
<br>
<pre><code class="python hljs">v1 = Vector(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>)<font></font>
v2 = Vector(<span class="hljs-number">2</span>, <span class="hljs-number">57</span>, <span class="hljs-number">23.2</span>)<font></font>
v1 + v2<font></font>
<span class="hljs-meta">&gt;&gt;&gt; </span>[<span class="hljs-number">3</span>, <span class="hljs-number">59</span>, <span class="hljs-number">26.2</span>]
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同様に、すべての算術演算を定義します（ベクトルの完全なコードは低くなります）。</font><font style="vertical-align: inherit;">次に距離関数が必要です。</font><font style="vertical-align: inherit;">素朴なdist（v1、v2）を作成できますが、これは美しくないので、％演算子を再定義します。</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Vector</span>(<span class="hljs-params">list</span>):</span><font></font>
...<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__mod__</span>(<span class="hljs-params">self, other</span>):</span>
        <span class="hljs-keyword">return</span> sum((self - other) ** <span class="hljs-number">2</span>) ** <span class="hljs-number">0.5</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
罰金：</font></font><br>
<br>
<pre><code class="python hljs">v1 = Vector(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>)<font></font>
v2 = Vector(<span class="hljs-number">2</span>, <span class="hljs-number">57</span>, <span class="hljs-number">23.2</span>)<font></font>
v1 % v2<font></font>
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-number">58.60068258988115</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ベクトル生成を高速化し、美しい出力を得るには、いくつかの方法も必要です。</font><font style="vertical-align: inherit;">ここではトリッキーなことは何もないので、Vectorクラスのコード全体を次に示します。</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">すべてのベクトルクラスコード</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Vector</span>(<span class="hljs-params">list</span>):</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, *el</span>):</span>
        <span class="hljs-keyword">for</span> e <span class="hljs-keyword">in</span> el:<font></font>
            self.append(e)<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__add__</span>(<span class="hljs-params">self, other</span>):</span>
        <span class="hljs-keyword">if</span> type(other) <span class="hljs-keyword">is</span> Vector:
            <span class="hljs-keyword">assert</span> len(self) == len(other), <span class="hljs-string">"Error 0"</span><font></font>
            r = Vector()<font></font>
            <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(len(self)):<font></font>
                r.append(self[i] + other[i])<font></font>
            <span class="hljs-keyword">return</span> r
        <span class="hljs-keyword">else</span>:<font></font>
            other = Vector.emptyvec(lens=len(self), n=other)<font></font>
            <span class="hljs-keyword">return</span> self + other<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__sub__</span>(<span class="hljs-params">self, other</span>):</span>
        <span class="hljs-keyword">if</span> type(other) <span class="hljs-keyword">is</span> Vector:
            <span class="hljs-keyword">assert</span> len(self) == len(other), <span class="hljs-string">"Error 0"</span><font></font>
            r = Vector()<font></font>
            <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(len(self)):<font></font>
                r.append(self[i] - other[i])<font></font>
            <span class="hljs-keyword">return</span> r
        <span class="hljs-keyword">else</span>:<font></font>
            other = Vector.emptyvec(lens=len(self), n=other)<font></font>
            <span class="hljs-keyword">return</span> self - other<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__mul__</span>(<span class="hljs-params">self, other</span>):</span>
        <span class="hljs-keyword">if</span> type(other) <span class="hljs-keyword">is</span> Vector:
            <span class="hljs-keyword">assert</span> len(self) == len(other), <span class="hljs-string">"Error 0"</span><font></font>
            r = Vector()<font></font>
            <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(len(self)):<font></font>
                r.append(self[i] * other[i])<font></font>
            <span class="hljs-keyword">return</span> r
        <span class="hljs-keyword">else</span>:<font></font>
            other = Vector.emptyvec(lens=len(self), n=other)<font></font>
            <span class="hljs-keyword">return</span> self * other<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__truediv__</span>(<span class="hljs-params">self, other</span>):</span>
        <span class="hljs-keyword">if</span> type(other) <span class="hljs-keyword">is</span> Vector:
            <span class="hljs-keyword">assert</span> len(self) == len(other), <span class="hljs-string">"Error 0"</span><font></font>
            r = Vector()<font></font>
            <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(len(self)):<font></font>
                r.append(self[i] / other[i])<font></font>
            <span class="hljs-keyword">return</span> r
        <span class="hljs-keyword">else</span>:<font></font>
            other = Vector.emptyvec(lens=len(self), n=other)<font></font>
            <span class="hljs-keyword">return</span> self / other<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__pow__</span>(<span class="hljs-params">self, other</span>):</span>
        <span class="hljs-keyword">if</span> type(other) <span class="hljs-keyword">is</span> Vector:
            <span class="hljs-keyword">assert</span> len(self) == len(other), <span class="hljs-string">"Error 0"</span><font></font>
            r = Vector()<font></font>
            <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(len(self)):<font></font>
                r.append(self[i] ** other[i])<font></font>
            <span class="hljs-keyword">return</span> r
        <span class="hljs-keyword">else</span>:<font></font>
            other = Vector.emptyvec(lens=len(self), n=other)<font></font>
            <span class="hljs-keyword">return</span> self ** other<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__mod__</span>(<span class="hljs-params">self, other</span>):</span>
        <span class="hljs-keyword">return</span> sum((self - other) ** <span class="hljs-number">2</span>) ** <span class="hljs-number">0.5</span><font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">mod</span>(<span class="hljs-params">self</span>):</span>
        <span class="hljs-keyword">return</span> self % Vector.emptyvec(len(self))<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">dim</span>(<span class="hljs-params">self</span>):</span>
        <span class="hljs-keyword">return</span> len(self)<font></font>
    <font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__str__</span>(<span class="hljs-params">self</span>):</span>
        <span class="hljs-keyword">if</span> len(self) == <span class="hljs-number">0</span>:
            <span class="hljs-keyword">return</span> <span class="hljs-string">"Empty"</span>
        r = [str(i) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> self]
        <span class="hljs-keyword">return</span> <span class="hljs-string">"&lt; "</span> + <span class="hljs-string">" "</span>.join(r) + <span class="hljs-string">" &gt;"</span><font></font>
    <font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">_ipython_display_</span>(<span class="hljs-params">self</span>):</span><font></font>
        print(str(self))<font></font>
<font></font>
<span class="hljs-meta">    @staticmethod</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">emptyvec</span>(<span class="hljs-params">lens=<span class="hljs-number">2</span>, n=<span class="hljs-number">0</span></span>):</span>
        <span class="hljs-keyword">return</span> Vector(*[n <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(lens)])<font></font>
<font></font>
<span class="hljs-meta">    @staticmethod</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">randvec</span>(<span class="hljs-params">dim</span>):</span>
        <span class="hljs-keyword">return</span> Vector(*[random.random() <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(dim)])
</code></pre><br>
</div></div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">質点</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここでは、理論的にはすべてが単純です-ポイントには座標、速度、加速度があります（簡略化のため）。</font><font style="vertical-align: inherit;">さらに、彼女は質量と一連のカスタムパラメータを持っています（たとえば、電磁界の場合、電荷が私たちを傷つけることはありませんが、少なくともスピンを設定することに煩わされることはありません）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
初期化は次のようになります。</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Point</span>:</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, coords, mass=<span class="hljs-number">1.0</span>, q=<span class="hljs-number">1.0</span> speed=None, **properties</span>):</span><font></font>
        self.coords = coords<font></font>
        <span class="hljs-keyword">if</span> speed <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:<font></font>
            self.speed = Vector(*[<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(len(coords))])
        <span class="hljs-keyword">else</span>:<font></font>
            self.speed = speed<font></font>
        self.acc = Vector(*[<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(len(coords))])<font></font>
        self.mass = mass<font></font>
        self.__params__ = [<span class="hljs-string">"coords"</span>, <span class="hljs-string">"speed"</span>, <span class="hljs-string">"acc"</span>, <span class="hljs-string">"q"</span>] + list(properties.keys())<font></font>
        self.q = q<font></font>
        <span class="hljs-keyword">for</span> prop <span class="hljs-keyword">in</span> properties:<font></font>
            setattr(self, prop, properties[prop])<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、私たちの要点を動かし、固定し、加速するために、次のメソッドを記述します。</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Point</span>:</span><font></font>
...<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">move</span>(<span class="hljs-params">self, dt</span>):</span><font></font>
        self.coords = self.coords + self.speed * dt<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">accelerate</span>(<span class="hljs-params">self, dt</span>):</span><font></font>
        self.speed = self.speed + self.acc * dt<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">accinc</span>(<span class="hljs-params">self, force</span>):</span>  <span class="hljs-comment">#       </span><font></font>
        self.acc = self.acc + force / self.mass<font></font>
    <font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">clean_acc</span>(<span class="hljs-params">self</span>):</span>
        self.acc = self.acc * <span class="hljs-number">0</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
よくやった、ポイント自体は終わりました。</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ポイントコード（美しい出力）</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Point</span>:</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, coords, mass=<span class="hljs-number">1.0</span>, q=<span class="hljs-number">1.0</span> speed=None, **properties</span>):</span><font></font>
        self.coords = coords<font></font>
        <span class="hljs-keyword">if</span> speed <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:<font></font>
            self.speed = Vector(*[<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(len(coords))])
        <span class="hljs-keyword">else</span>:<font></font>
            self.speed = speed<font></font>
        self.acc = Vector(*[<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(len(coords))])<font></font>
        self.mass = mass<font></font>
        self.__params__ = [<span class="hljs-string">"coords"</span>, <span class="hljs-string">"speed"</span>, <span class="hljs-string">"acc"</span>, <span class="hljs-string">"q"</span>] + list(properties.keys())<font></font>
        self.q = q<font></font>
        <span class="hljs-keyword">for</span> prop <span class="hljs-keyword">in</span> properties:<font></font>
            setattr(self, prop, properties[prop])<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">move</span>(<span class="hljs-params">self, dt</span>):</span><font></font>
        self.coords = self.coords + self.speed * dt<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">accelerate</span>(<span class="hljs-params">self, dt</span>):</span><font></font>
        self.speed = self.speed + self.acc * dt<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">accinc</span>(<span class="hljs-params">self, force</span>):</span><font></font>
        self.acc = self.acc + force / self.mass<font></font>
    <font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">clean_acc</span>(<span class="hljs-params">self</span>):</span>
        self.acc = self.acc * <span class="hljs-number">0</span><font></font>
    <font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__str__</span>(<span class="hljs-params">self</span>):</span>
        r = [<span class="hljs-string">"Point {"</span>]
        <span class="hljs-keyword">for</span> p <span class="hljs-keyword">in</span> self.__params__:<font></font>
            r.append(<span class="hljs-string">"  "</span> + p + <span class="hljs-string">" = "</span> + str(getattr(self, p)))<font></font>
        r += [<span class="hljs-string">"}"</span>]
        <span class="hljs-keyword">return</span> <span class="hljs-string">"\n"</span>.join(r)<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">_ipython_display_</span>(<span class="hljs-params">self</span>):</span><font></font>
        print(str(self))<font></font>
</code></pre><br>
:<br>
<img src="https://habrastorage.org/webt/gu/p2/hv/gup2hvuve_ty_bblqsaceemz4iw.png"><br>
</div></div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">相互作用フィールド</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
相互作用のフィールドを、すべてのマテリアルポイントのセットを含み、それらに力を及ぼすオブジェクトと呼びます。</font><font style="vertical-align: inherit;">私たちは素晴らしい宇宙の特別なケースを検討するので、1つのカスタム相互作用があります（もちろん、これは簡単に拡張できます）。</font><font style="vertical-align: inherit;">コンストラクターを宣言し、ポイントを追加します。</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">InteractionField</span>:</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, F</span>):</span>  <span class="hljs-comment"># F -   , F(p1, p2, r), p1, p2 - , r -   </span><font></font>
        self.points = []<font></font>
        self.F = F<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">append</span>(<span class="hljs-params">self, *args, **kwargs</span>):</span><font></font>
        self.points.append(Point(*args, **kwargs))<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここで楽しいのは、その時点で「テンション」を返す関数を宣言することです。</font><font style="vertical-align: inherit;">この概念は電磁相互作用を指しますが、私たちの場合、それは私たちがポイントを移動するいくつかの抽象的なベクトルです。</font><font style="vertical-align: inherit;">この場合、特定の場合には、点qのプロパティがあります-点の電荷（一般に-必要なものは何でも、ベクトルも）。</font><font style="vertical-align: inherit;">では、C点での張力とは何でしょうか。</font><font style="vertical-align: inherit;">このようなもの：</font></font><br>
<br>
<p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mover><mi>E</mi><mo stretchy=&quot;false&quot;>&amp;#x2192;</mo></mover></mrow><mo stretchy=&quot;false&quot;>(</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mover><mi>C</mi><mo stretchy=&quot;false&quot;>&amp;#x2192;</mo></mover></mrow><mo stretchy=&quot;false&quot;>)</mo><mo>=</mo><mo>&amp;#x2211;</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mover><mi>F</mi><mo stretchy=&quot;false&quot;>&amp;#x2192;</mo></mover></mrow><mi>i</mi></msub><mo stretchy=&quot;false&quot;>(</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mover><mi>C</mi><mo stretchy=&quot;false&quot;>&amp;#x2192;</mo></mover></mrow><mo stretchy=&quot;false&quot;>)</mo></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="18.338ex" height="3.759ex" viewBox="0 -1078.4 7895.5 1618.6" role="img" focusable="false" style="vertical-align: -1.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/467803/&amp;usg=ALkJrhgnU4ML7fnj0YnjNxkxl3ZLFN5T5Q#MJMATHI-45" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/467803/&amp;usg=ALkJrhgnU4ML7fnj0YnjNxkxl3ZLFN5T5Q#MJMAIN-20D7" x="717" y="246"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/467803/&amp;usg=ALkJrhgnU4ML7fnj0YnjNxkxl3ZLFN5T5Q#MJMAIN-28" x="764" y="0"></use><g transform="translate(1154,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/467803/&amp;usg=ALkJrhgnU4ML7fnj0YnjNxkxl3ZLFN5T5Q#MJMATHI-43" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/467803/&amp;usg=ALkJrhgnU4ML7fnj0YnjNxkxl3ZLFN5T5Q#MJMAIN-20D7" x="727" y="271"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/467803/&amp;usg=ALkJrhgnU4ML7fnj0YnjNxkxl3ZLFN5T5Q#MJMAIN-29" x="1914" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/467803/&amp;usg=ALkJrhgnU4ML7fnj0YnjNxkxl3ZLFN5T5Q#MJMAIN-3D" x="2581" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/467803/&amp;usg=ALkJrhgnU4ML7fnj0YnjNxkxl3ZLFN5T5Q#MJSZ2-2211" x="3638" y="0"></use><g transform="translate(5249,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/467803/&amp;usg=ALkJrhgnU4ML7fnj0YnjNxkxl3ZLFN5T5Q#MJMATHI-46" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/467803/&amp;usg=ALkJrhgnU4ML7fnj0YnjNxkxl3ZLFN5T5Q#MJMAIN-20D7" x="761" y="246"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/467803/&amp;usg=ALkJrhgnU4ML7fnj0YnjNxkxl3ZLFN5T5Q#MJMATHI-69" x="1078" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/467803/&amp;usg=ALkJrhgnU4ML7fnj0YnjNxkxl3ZLFN5T5Q#MJMAIN-28" x="1106" y="0"></use><g transform="translate(1496,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/467803/&amp;usg=ALkJrhgnU4ML7fnj0YnjNxkxl3ZLFN5T5Q#MJMATHI-43" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/467803/&amp;usg=ALkJrhgnU4ML7fnj0YnjNxkxl3ZLFN5T5Q#MJMAIN-20D7" x="727" y="271"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/467803/&amp;usg=ALkJrhgnU4ML7fnj0YnjNxkxl3ZLFN5T5Q#MJMAIN-29" x="2256" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mrow class="MJX-TeXAtom-ORD"><mover><mi>E</mi><mo stretchy="false">→</mo></mover></mrow><mo stretchy="false">(</mo><mrow class="MJX-TeXAtom-ORD"><mover><mi>C</mi><mo stretchy="false">→</mo></mover></mrow><mo stretchy="false">)</mo><mo>=</mo><mo>∑</mo><mrow class="MJX-TeXAtom-ORD"><msub><mrow class="MJX-TeXAtom-ORD"><mover><mi>F</mi><mo stretchy="false">→</mo></mover></mrow><mi>i</mi></msub><mo stretchy="false">(</mo><mrow class="MJX-TeXAtom-ORD"><mover><mi>C</mi><mo stretchy="false">→</mo></mover></mrow><mo stretchy="false">)</mo></mrow></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-1"> \vec E(\vec C) = \sum {\vec F_i(\vec C)} </script></p><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
つまり、その時点での緊張は </font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mover><mi>C</mi><mo stretchy=&quot;false&quot;>&amp;#x2192;</mo></mover></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.766ex" height="2.759ex" viewBox="0 -1078.4 760.5 1188" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/467803/&amp;usg=ALkJrhgnU4ML7fnj0YnjNxkxl3ZLFN5T5Q#MJMATHI-43" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/467803/&amp;usg=ALkJrhgnU4ML7fnj0YnjNxkxl3ZLFN5T5Q#MJMAIN-20D7" x="727" y="271"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mover><mi>C</mi><mo stretchy="false">→</mo></mover></mrow></math></span></span><script type="math/tex" id="MathJax-Element-2"> \vec C </script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、ある単位点に作用するすべての質点の力の合計に等しくなります。</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">InteractionField</span>:</span><font></font>
...<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">intensity</span>(<span class="hljs-params">self, coord</span>):</span>
        proj = Vector(*[<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(coord.dim())])<font></font>
        single_point = Point(Vector(), mass=<span class="hljs-number">1.0</span>, q=<span class="hljs-number">1.0</span>)  <span class="hljs-comment">#       (   ,       F,      )</span>
        <span class="hljs-keyword">for</span> p <span class="hljs-keyword">in</span> self.points:
            <span class="hljs-keyword">if</span> coord % p.coords &lt; <span class="hljs-number">10</span> ** (<span class="hljs-number">-10</span>):  <span class="hljs-comment">#      ,        ,   ,     (  )</span>
                <span class="hljs-keyword">continue</span><font></font>
            d = p.coords % coord<font></font>
            fmod = self.F(single_point, p, d) * (<span class="hljs-number">-1</span>)    <span class="hljs-comment">#    - </span>
            proj = proj + (coord - p.coords) / d * fmod  <span class="hljs-comment"># </span>
        <span class="hljs-keyword">return</span> proj
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この時点で、すでにベクトルフィールドを描画できますが、最後に描画します。</font><font style="vertical-align: inherit;">今、私たちの相互作用の一歩を踏み出しましょう</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">InteractionField</span>:</span><font></font>
...<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">step</span>(<span class="hljs-params">self, dt</span>):</span><font></font>
        self.clean_acc()<font></font>
        <span class="hljs-keyword">for</span> p <span class="hljs-keyword">in</span> self.points:<font></font>
            p.accinc(self.intensity(p.coords) * p.q)<font></font>
            p.accelerate(dt)<font></font>
            p.move(dt)<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここではすべてが簡単です。</font><font style="vertical-align: inherit;">各点について、これらの座標の張力を決定し、次にETU材料点の最終的な力を決定します。</font></font><br>
<br>
<p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mover><mi>F</mi><mo stretchy=&quot;false&quot;>&amp;#x2192;</mo></mover></mrow><mo>=</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mover><mi>E</mi><mo stretchy=&quot;false&quot;>&amp;#x2192;</mo></mover></mrow><mo>&amp;#x2217;</mo><mi>q</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="9.909ex" height="3.009ex" viewBox="0 -1024.6 4266.5 1295.7" role="img" focusable="false" style="vertical-align: -0.63ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/467803/&amp;usg=ALkJrhgnU4ML7fnj0YnjNxkxl3ZLFN5T5Q#MJMATHI-46" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/467803/&amp;usg=ALkJrhgnU4ML7fnj0YnjNxkxl3ZLFN5T5Q#MJMAIN-20D7" x="761" y="246"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/467803/&amp;usg=ALkJrhgnU4ML7fnj0YnjNxkxl3ZLFN5T5Q#MJMAIN-3D" x="1040" y="0"></use><g transform="translate(2096,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/467803/&amp;usg=ALkJrhgnU4ML7fnj0YnjNxkxl3ZLFN5T5Q#MJMATHI-45" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/467803/&amp;usg=ALkJrhgnU4ML7fnj0YnjNxkxl3ZLFN5T5Q#MJMAIN-20D7" x="717" y="246"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/467803/&amp;usg=ALkJrhgnU4ML7fnj0YnjNxkxl3ZLFN5T5Q#MJMAIN-2217" x="3083" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/467803/&amp;usg=ALkJrhgnU4ML7fnj0YnjNxkxl3ZLFN5T5Q#MJMATHI-71" x="3805" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mrow class="MJX-TeXAtom-ORD"><mover><mi>F</mi><mo stretchy="false">→</mo></mover></mrow><mo>=</mo><mrow class="MJX-TeXAtom-ORD"><mover><mi>E</mi><mo stretchy="false">→</mo></mover></mrow><mo>∗</mo><mi>q</mi></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-3"> \vec F = \vec E * q </script></p><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
不足している関数を定義します。</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">すべてのInteractionFieldコード</font></font></b><div class="spoiler_text"><pre><code class="python hljs">
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">InteractionField</span>:</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, F</span>):</span><font></font>
        self.points = []<font></font>
        self.F = F<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">move_all</span>(<span class="hljs-params">self, dt</span>):</span>
        <span class="hljs-keyword">for</span> p <span class="hljs-keyword">in</span> self.points:<font></font>
            p.move(dt)<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">intensity</span>(<span class="hljs-params">self, coord</span>):</span>
        proj = Vector(*[<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(coord.dim())])<font></font>
        single_point = Point(Vector(), mass=<span class="hljs-number">1.0</span>, q=<span class="hljs-number">1.0</span>)
        <span class="hljs-keyword">for</span> p <span class="hljs-keyword">in</span> self.points:
            <span class="hljs-keyword">if</span> coord % p.coords &lt; <span class="hljs-number">10</span> ** (<span class="hljs-number">-10</span>):
                <span class="hljs-keyword">continue</span><font></font>
            d = p.coords % coord<font></font>
            fmod = self.F(single_point, p, d) * (<span class="hljs-number">-1</span>)<font></font>
            proj = proj + (coord - p.coords) / d * fmod<font></font>
        <span class="hljs-keyword">return</span> proj<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">step</span>(<span class="hljs-params">self, dt</span>):</span><font></font>
        self.clean_acc()<font></font>
        <span class="hljs-keyword">for</span> p <span class="hljs-keyword">in</span> self.points:<font></font>
            p.accinc(self.intensity(p.coords) * p.q)<font></font>
            p.accelerate(dt)<font></font>
            p.move(dt)<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">clean_acc</span>(<span class="hljs-params">self</span>):</span>
        <span class="hljs-keyword">for</span> p <span class="hljs-keyword">in</span> self.points:<font></font>
            p.clean_acc()<font></font>
    <font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">append</span>(<span class="hljs-params">self, *args, **kwargs</span>):</span><font></font>
        self.points.append(Point(*args, **kwargs))<font></font>
    <font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">gather_coords</span>(<span class="hljs-params">self</span>):</span>
        <span class="hljs-keyword">return</span> [p.coords <span class="hljs-keyword">for</span> p <span class="hljs-keyword">in</span> self.points]<font></font>
<font></font>
</code></pre><br>
</div></div><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">特別な場合。</font><font style="vertical-align: inherit;">粒子の動きとベクトル場の可視化</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
だから私たちは最も興味深いものに行きました。</font><font style="vertical-align: inherit;">始めましょう...</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">電磁場における粒子の動きのモデリング</font></font></h3><br>
<pre><code class="python hljs">u = InteractionField(<span class="hljs-keyword">lambda</span> p1, p2, r: <span class="hljs-number">300000</span> * -p1.q * p2.q / (r ** <span class="hljs-number">2</span> + <span class="hljs-number">0.1</span>))
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(<span class="hljs-number">3</span>):<font></font>
    u.append(Vector.randvec(<span class="hljs-number">2</span>) * <span class="hljs-number">10</span>, q=random.random() - <span class="hljs-number">0.5</span>)
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実際、係数kはある種の数十億（9 * 10 ^（-9））に等しいはずですが、時間t-&gt; 0までに消滅するので、すぐに両方を適切な数にすることにしました。</font><font style="vertical-align: inherit;">したがって、私たちの物理学ではk = 300'000です。</font><font style="vertical-align: inherit;">そして、他のすべてのもので、それは明らかだと思います。</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">r ** 2 + 0.1</font></font></b><div class="spoiler_text"> <br>
 —     0. , ,   ,    ,  -       2 ,  -        «  »<br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、各軸に沿って0〜10の座標を持つ10点（2次元空間）を追加します。</font><font style="vertical-align: inherit;">また、各ポイントに-0.25〜0.25の電荷を与えます。</font><font style="vertical-align: inherit;">次に、ループを作成し、それらの座標（およびトレース）に従ってポイントを描画します。</font></font><br>
<br>
<pre><code class="python hljs"><font></font>
X, Y = [], []<font></font>
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(<span class="hljs-number">130</span>):<font></font>
    u.step(<span class="hljs-number">0.0006</span>)<font></font>
    xd, yd = zip(*u.gather_coords())<font></font>
    X.extend(xd)<font></font>
    Y.extend(yd)<font></font>
plt.figure(figsize=[<span class="hljs-number">8</span>, <span class="hljs-number">8</span>])<font></font>
plt.scatter(X, Y)<font></font>
plt.scatter(*zip(*u.gather_coords()), color=<span class="hljs-string">"orange"</span>)<font></font>
plt.show()<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
発生したはずのこと：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/en/px/hm/enpxhmzga54aedh3zunn6vwl9ns.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実際には、描画は完全にランダムになります。これは、力学の発展の瞬間には、各ポイントの軌跡が予測できないためです。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ベクトル場の可視化</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここではすべてが簡単です。</font><font style="vertical-align: inherit;">いくつかのステップで座標を調べ、それぞれに正しい方向にベクトルを描く必要があります。</font></font><br>
<br>
<pre><code class="python hljs">
fig = plt.figure(figsize=[<span class="hljs-number">5</span>, <span class="hljs-number">5</span>])<font></font>
res = []<font></font>
STEP = <span class="hljs-number">0.3</span>
<span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> np.arange(<span class="hljs-number">0</span>, <span class="hljs-number">10</span>, STEP):
    <span class="hljs-keyword">for</span> y <span class="hljs-keyword">in</span> np.arange(<span class="hljs-number">0</span>, <span class="hljs-number">10</span>, STEP):<font></font>
        inten = u.intensity(Vector(x, y))<font></font>
        F = inten.mod()<font></font>
        inten /= inten.mod() * <span class="hljs-number">4</span>  <span class="hljs-comment">#    </span>
        res.append(([x - inten[<span class="hljs-number">0</span>] / <span class="hljs-number">2</span>, x + inten[<span class="hljs-number">0</span>] / <span class="hljs-number">2</span>], [y - inten[<span class="hljs-number">1</span>] / <span class="hljs-number">2</span>, y + inten[<span class="hljs-number">1</span>] / <span class="hljs-number">2</span>], F))
<span class="hljs-keyword">for</span> r <span class="hljs-keyword">in</span> res:<font></font>
    plt.plot(r[<span class="hljs-number">0</span>], r[<span class="hljs-number">1</span>], color=(sigm(r[<span class="hljs-number">2</span>]), <span class="hljs-number">0.1</span>, <span class="hljs-number">0.8</span> * (<span class="hljs-number">1</span> - sigm(r[<span class="hljs-number">2</span>])))) <span class="hljs-comment">#       </span><font></font>
    <font></font>
plt.show()<font></font>
<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ほぼこの結論が得られているはずです。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/hb/3w/ou/hb3wouiyh8_k5ob-drwfsiezzyu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ベクトル自体を長くすることができます。* 4を* 1.5に置き換えます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/3f/5z/i1/3f5zi1kln7lgmw3l_fwrviuwjpy.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">次元とモデリングで遊ぶ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
200の点と、距離の2乗ではなく4次に依存する交互作用を持つ5次元空間を作成します。</font></font><br>
<br>
<pre><code class="python hljs">u = InteractionField(<span class="hljs-keyword">lambda</span> p1, p2, r: <span class="hljs-number">300000</span> * -p1.q * p2.q / (r ** <span class="hljs-number">4</span> + <span class="hljs-number">0.1</span>))
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(<span class="hljs-number">200</span>):<font></font>
    u.append(Vector.randvec(<span class="hljs-number">5</span>) * <span class="hljs-number">10</span>, q=random.random() - <span class="hljs-number">0.5</span>)
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これで、すべての座標、速度などが5次元で定義されます。</font><font style="vertical-align: inherit;">ここで何かをモデル化しましょう：</font></font><br>
<br>
<pre><code class="python hljs">velmod = <span class="hljs-number">0</span><font></font>
velocities = []<font></font>
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(<span class="hljs-number">100</span>):<font></font>
    u.step(<span class="hljs-number">0.0005</span>)<font></font>
    velmod = sum([p.speed.mod() <span class="hljs-keyword">for</span> p <span class="hljs-keyword">in</span> u.points])   <span class="hljs-comment">#      </span><font></font>
    velocities.append(velmod)<font></font>
plt.plot(velocities)<font></font>
plt.show()<font></font>
</code></pre><br>
<img src="https://habrastorage.org/webt/md/ak/v0/mdakv0sa55ytezwm0zxe_i8toss.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、任意の時点でのすべての速度の合計のグラフです。</font><font style="vertical-align: inherit;">ご覧のように、時間の経過とともにゆっくりと加速しています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まあ、それはそのような単純なものを作る方法についての短い指示でした。</font><font style="vertical-align: inherit;">しかし、花で遊ぶとどうなりますか？</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/_iE7qDSQpSI" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">デモ付きのすべてのコード</font></font></b><div class="spoiler_text"><pre><code class="python hljs">
<span class="hljs-keyword">import</span> random<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Vector</span>(<span class="hljs-params">list</span>):</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, *el</span>):</span>
        <span class="hljs-keyword">for</span> e <span class="hljs-keyword">in</span> el:<font></font>
            self.append(e)<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__add__</span>(<span class="hljs-params">self, other</span>):</span>
        <span class="hljs-keyword">if</span> type(other) <span class="hljs-keyword">is</span> Vector:
            <span class="hljs-keyword">assert</span> len(self) == len(other), <span class="hljs-string">"Error 0"</span><font></font>
            r = Vector()<font></font>
            <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(len(self)):<font></font>
                r.append(self[i] + other[i])<font></font>
            <span class="hljs-keyword">return</span> r
        <span class="hljs-keyword">else</span>:<font></font>
            other = Vector.emptyvec(lens=len(self), n=other)<font></font>
            <span class="hljs-keyword">return</span> self + other<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__sub__</span>(<span class="hljs-params">self, other</span>):</span>
        <span class="hljs-keyword">if</span> type(other) <span class="hljs-keyword">is</span> Vector:
            <span class="hljs-keyword">assert</span> len(self) == len(other), <span class="hljs-string">"Error 0"</span><font></font>
            r = Vector()<font></font>
            <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(len(self)):<font></font>
                r.append(self[i] - other[i])<font></font>
            <span class="hljs-keyword">return</span> r
        <span class="hljs-keyword">else</span>:<font></font>
            other = Vector.emptyvec(lens=len(self), n=other)<font></font>
            <span class="hljs-keyword">return</span> self - other<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__mul__</span>(<span class="hljs-params">self, other</span>):</span>
        <span class="hljs-keyword">if</span> type(other) <span class="hljs-keyword">is</span> Vector:
            <span class="hljs-keyword">assert</span> len(self) == len(other), <span class="hljs-string">"Error 0"</span><font></font>
            r = Vector()<font></font>
            <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(len(self)):<font></font>
                r.append(self[i] * other[i])<font></font>
            <span class="hljs-keyword">return</span> r
        <span class="hljs-keyword">else</span>:<font></font>
            other = Vector.emptyvec(lens=len(self), n=other)<font></font>
            <span class="hljs-keyword">return</span> self * other<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__truediv__</span>(<span class="hljs-params">self, other</span>):</span>
        <span class="hljs-keyword">if</span> type(other) <span class="hljs-keyword">is</span> Vector:
            <span class="hljs-keyword">assert</span> len(self) == len(other), <span class="hljs-string">"Error 0"</span><font></font>
            r = Vector()<font></font>
            <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(len(self)):<font></font>
                r.append(self[i] / other[i])<font></font>
            <span class="hljs-keyword">return</span> r
        <span class="hljs-keyword">else</span>:<font></font>
            other = Vector.emptyvec(lens=len(self), n=other)<font></font>
            <span class="hljs-keyword">return</span> self / other<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__pow__</span>(<span class="hljs-params">self, other</span>):</span>
        <span class="hljs-keyword">if</span> type(other) <span class="hljs-keyword">is</span> Vector:
            <span class="hljs-keyword">assert</span> len(self) == len(other), <span class="hljs-string">"Error 0"</span><font></font>
            r = Vector()<font></font>
            <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(len(self)):<font></font>
                r.append(self[i] ** other[i])<font></font>
            <span class="hljs-keyword">return</span> r
        <span class="hljs-keyword">else</span>:<font></font>
            other = Vector.emptyvec(lens=len(self), n=other)<font></font>
            <span class="hljs-keyword">return</span> self ** other<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__mod__</span>(<span class="hljs-params">self, other</span>):</span>
        <span class="hljs-keyword">return</span> sum((self - other) ** <span class="hljs-number">2</span>) ** <span class="hljs-number">0.5</span><font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">mod</span>(<span class="hljs-params">self</span>):</span>
        <span class="hljs-keyword">return</span> self % Vector.emptyvec(len(self))<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">dim</span>(<span class="hljs-params">self</span>):</span>
        <span class="hljs-keyword">return</span> len(self)<font></font>
    <font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__str__</span>(<span class="hljs-params">self</span>):</span>
        <span class="hljs-keyword">if</span> len(self) == <span class="hljs-number">0</span>:
            <span class="hljs-keyword">return</span> <span class="hljs-string">"Empty"</span>
        r = [str(i) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> self]
        <span class="hljs-keyword">return</span> <span class="hljs-string">"&lt; "</span> + <span class="hljs-string">" "</span>.join(r) + <span class="hljs-string">" &gt;"</span><font></font>
    <font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">_ipython_display_</span>(<span class="hljs-params">self</span>):</span><font></font>
        print(str(self))<font></font>
<font></font>
<span class="hljs-meta">    @staticmethod</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">emptyvec</span>(<span class="hljs-params">lens=<span class="hljs-number">2</span>, n=<span class="hljs-number">0</span></span>):</span>
        <span class="hljs-keyword">return</span> Vector(*[n <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(lens)])<font></font>
<font></font>
<span class="hljs-meta">    @staticmethod</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">randvec</span>(<span class="hljs-params">dim</span>):</span>
        <span class="hljs-keyword">return</span> Vector(*[random.random() <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(dim)])<font></font>
<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Point</span>:</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, coords, mass=<span class="hljs-number">1.0</span>, q=<span class="hljs-number">1.0</span>, speed=None, **properties</span>):</span><font></font>
        self.coords = coords<font></font>
        <span class="hljs-keyword">if</span> speed <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:<font></font>
            self.speed = Vector(*[<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(len(coords))])
        <span class="hljs-keyword">else</span>:<font></font>
            self.speed = speed<font></font>
        self.acc = Vector(*[<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(len(coords))])<font></font>
        self.mass = mass<font></font>
        self.__params__ = [<span class="hljs-string">"coords"</span>, <span class="hljs-string">"speed"</span>, <span class="hljs-string">"acc"</span>, <span class="hljs-string">"q"</span>] + list(properties.keys())<font></font>
        self.q = q<font></font>
        <span class="hljs-keyword">for</span> prop <span class="hljs-keyword">in</span> properties:<font></font>
            setattr(self, prop, properties[prop])<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">move</span>(<span class="hljs-params">self, dt</span>):</span><font></font>
        self.coords = self.coords + self.speed * dt<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">accelerate</span>(<span class="hljs-params">self, dt</span>):</span><font></font>
        self.speed = self.speed + self.acc * dt<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">accinc</span>(<span class="hljs-params">self, force</span>):</span><font></font>
        self.acc = self.acc + force / self.mass<font></font>
    <font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">clean_acc</span>(<span class="hljs-params">self</span>):</span>
        self.acc = self.acc * <span class="hljs-number">0</span><font></font>
    <font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__str__</span>(<span class="hljs-params">self</span>):</span>
        r = [<span class="hljs-string">"Point {"</span>]
        <span class="hljs-keyword">for</span> p <span class="hljs-keyword">in</span> self.__params__:<font></font>
            r.append(<span class="hljs-string">"  "</span> + p + <span class="hljs-string">" = "</span> + str(getattr(self, p)))<font></font>
        r += [<span class="hljs-string">"}"</span>]
        <span class="hljs-keyword">return</span> <span class="hljs-string">"\n"</span>.join(r)<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">_ipython_display_</span>(<span class="hljs-params">self</span>):</span><font></font>
        print(str(self))<font></font>
<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">InteractionField</span>:</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, F</span>):</span><font></font>
        self.points = []<font></font>
        self.F = F<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">move_all</span>(<span class="hljs-params">self, dt</span>):</span>
        <span class="hljs-keyword">for</span> p <span class="hljs-keyword">in</span> self.points:<font></font>
            p.move(dt)<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">intensity</span>(<span class="hljs-params">self, coord</span>):</span>
        proj = Vector(*[<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(coord.dim())])<font></font>
        single_point = Point(Vector(), mass=<span class="hljs-number">1.0</span>, q=<span class="hljs-number">1.0</span>)
        <span class="hljs-keyword">for</span> p <span class="hljs-keyword">in</span> self.points:
            <span class="hljs-keyword">if</span> coord % p.coords &lt; <span class="hljs-number">10</span> ** (<span class="hljs-number">-10</span>):
                <span class="hljs-keyword">continue</span><font></font>
            d = p.coords % coord<font></font>
            fmod = self.F(single_point, p, d) * (<span class="hljs-number">-1</span>)<font></font>
            proj = proj + (coord - p.coords) / d * fmod<font></font>
        <span class="hljs-keyword">return</span> proj<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">step</span>(<span class="hljs-params">self, dt</span>):</span><font></font>
        self.clean_acc()<font></font>
        <span class="hljs-keyword">for</span> p <span class="hljs-keyword">in</span> self.points:<font></font>
            p.accinc(self.intensity(p.coords) * p.q)<font></font>
            p.accelerate(dt)<font></font>
            p.move(dt)<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">clean_acc</span>(<span class="hljs-params">self</span>):</span>
        <span class="hljs-keyword">for</span> p <span class="hljs-keyword">in</span> self.points:<font></font>
            p.clean_acc()<font></font>
    <font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">append</span>(<span class="hljs-params">self, *args, **kwargs</span>):</span><font></font>
        self.points.append(Point(*args, **kwargs))<font></font>
    <font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">gather_coords</span>(<span class="hljs-params">self</span>):</span>
        <span class="hljs-keyword">return</span> [p.coords <span class="hljs-keyword">for</span> p <span class="hljs-keyword">in</span> self.points]<font></font>
 <font></font>
<font></font>
<span class="hljs-comment"># </span><font></font>
 <font></font>
<font></font>
<span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-keyword">import</span> time<font></font>
<font></font>
<font></font>
<span class="hljs-comment">#    </span>
<span class="hljs-keyword">if</span> <span class="hljs-literal">False</span>:<font></font>
    u = InteractionField(<span class="hljs-keyword">lambda</span> p1, p2, r: <span class="hljs-number">300000</span> * -p1.q * p2.q / (r ** <span class="hljs-number">2</span> + <span class="hljs-number">0.1</span>))
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(<span class="hljs-number">10</span>):<font></font>
        u.append(Vector.randvec(<span class="hljs-number">2</span>) * <span class="hljs-number">10</span>, q=(random.random() - <span class="hljs-number">0.5</span>) / <span class="hljs-number">2</span>)<font></font>
    X, Y = [], []<font></font>
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(<span class="hljs-number">130</span>):<font></font>
        u.step(<span class="hljs-number">0.0006</span>)<font></font>
        xd, yd = zip(*u.gather_coords())<font></font>
        X.extend(xd)<font></font>
        Y.extend(yd)<font></font>
    plt.figure(figsize=[<span class="hljs-number">8</span>, <span class="hljs-number">8</span>])<font></font>
    plt.scatter(X, Y)<font></font>
    plt.scatter(*zip(*u.gather_coords()), color=<span class="hljs-string">"orange"</span>)<font></font>
    plt.show()<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">sigm</span>(<span class="hljs-params">x</span>):</span>
    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span> / (<span class="hljs-number">1</span> + <span class="hljs-number">1.10</span> ** (-x/<span class="hljs-number">1000</span>))<font></font>
<font></font>
<font></font>
<font></font>
<span class="hljs-comment">#   </span>
<span class="hljs-keyword">if</span> <span class="hljs-literal">False</span>:<font></font>
    u = InteractionField(<span class="hljs-keyword">lambda</span> p1, p2, r: <span class="hljs-number">300000</span> * -p1.q * p2.q / (r ** <span class="hljs-number">2</span> + <span class="hljs-number">0.1</span>))
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(<span class="hljs-number">3</span>):<font></font>
        u.append(Vector.randvec(<span class="hljs-number">2</span>) * <span class="hljs-number">10</span>, q=random.random() - <span class="hljs-number">0.5</span>)<font></font>
    fig = plt.figure(figsize=[<span class="hljs-number">5</span>, <span class="hljs-number">5</span>])<font></font>
    res = []<font></font>
    STEP = <span class="hljs-number">0.3</span>
    <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> np.arange(<span class="hljs-number">0</span>, <span class="hljs-number">10</span>, STEP):
        <span class="hljs-keyword">for</span> y <span class="hljs-keyword">in</span> np.arange(<span class="hljs-number">0</span>, <span class="hljs-number">10</span>, STEP):<font></font>
            inten = u.intensity(Vector(x, y))<font></font>
            F = inten.mod()<font></font>
            inten /= inten.mod() * <span class="hljs-number">1.5</span>
            res.append(([x - inten[<span class="hljs-number">0</span>] / <span class="hljs-number">2</span>, x + inten[<span class="hljs-number">0</span>] / <span class="hljs-number">2</span>], [y - inten[<span class="hljs-number">1</span>] / <span class="hljs-number">2</span>, y + inten[<span class="hljs-number">1</span>] / <span class="hljs-number">2</span>], F))<font></font>
<font></font>
    <span class="hljs-keyword">for</span> r <span class="hljs-keyword">in</span> res:<font></font>
        plt.plot(r[<span class="hljs-number">0</span>], r[<span class="hljs-number">1</span>], color=(sigm(r[<span class="hljs-number">2</span>]), <span class="hljs-number">0.1</span>, <span class="hljs-number">0.8</span> * (<span class="hljs-number">1</span> - sigm(r[<span class="hljs-number">2</span>]))))<font></font>
        <font></font>
    plt.show()<font></font>
<font></font>
<font></font>
<font></font>
<span class="hljs-comment">#    5- </span>
<span class="hljs-keyword">if</span> <span class="hljs-literal">False</span>:<font></font>
    u = InteractionField(<span class="hljs-keyword">lambda</span> p1, p2, r: <span class="hljs-number">300000</span> * -p1.q * p2.q / (r ** <span class="hljs-number">4</span> + <span class="hljs-number">0.1</span>))
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(<span class="hljs-number">200</span>):<font></font>
        u.append(Vector.randvec(<span class="hljs-number">5</span>) * <span class="hljs-number">10</span>, q=random.random() - <span class="hljs-number">0.5</span>)<font></font>
    velmod = <span class="hljs-number">0</span><font></font>
    velocities = []<font></font>
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(<span class="hljs-number">100</span>):<font></font>
        u.step(<span class="hljs-number">0.0005</span>)<font></font>
        velmod = sum([p.speed.mod() <span class="hljs-keyword">for</span> p <span class="hljs-keyword">in</span> u.points])<font></font>
        velocities.append(velmod)<font></font>
    plt.plot(velocities)<font></font>
    plt.show()<font></font>
<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次の記事はおそらくもっと複雑なモデリングについてであり、おそらく流体とナビエ・ストークスの方程式についてです。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
UPD：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ここに</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">私の同僚が書いた記事</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ありがとう</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">モモデフ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ビデオのレンダリングを支援してくれました。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja467791/index.html">Googleデータスタジオでのページスクロール分析</a></li>
<li><a href="../ja467793/index.html">一人のインターネット会社の退屈な技術スタック</a></li>
<li><a href="../ja467795/index.html">暗号通貨と政府規制に関するメモ</a></li>
<li><a href="../ja467797/index.html">「ために笑う」：「戦闘」アプリケーションのないソフトウェアツールが必要になる理由</a></li>
<li><a href="../ja467801/index.html">最小のオートメーション。パート1.1。仮想化の基本</a></li>
<li><a href="../ja467807/index.html">ロシアでの暗号通貨の売買：方法、合法化、リスク</a></li>
<li><a href="../ja467811/index.html">フェアチャイルドチャネルFのアーキテクチャとプログラミング</a></li>
<li><a href="../ja467813/index.html">FSTECの17次の変更のレビュー</a></li>
<li><a href="../ja467815/index.html">メディアは、「ロシアではIPアドレスが不足している」というパニックを引き起こしました。本当に？</a></li>
<li><a href="../ja467817/index.html">ジェネレーティブデザインパターンについて少し</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>