<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>âšªï¸ ğŸ‘ƒ ğŸ‘¨ğŸ½â€ğŸ« Sysbench und die Verteilung von Zufallsvariablen ğŸ§—ğŸ» ğŸ™‹ğŸ¼ ğŸ‘©ğŸ¿â€ğŸ¤â€ğŸ‘¨ğŸ½</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Die Ãœbersetzung des Artikels wurde speziell fÃ¼r Studierende des Kurses â€Datenbankenâ€œ erstellt .
 
 
  
 Was Sie mÃ¶glicherweise nicht Ã¼ber die Generier...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Sysbench und die Verteilung von Zufallsvariablen</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/497466/"><b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Ãœbersetzung des Artikels wurde speziell fÃ¼r Studierende des Kurses </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">â€Datenbankenâ€œ erstellt</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></i></b><br>
<br>
<img src="https://habrastorage.org/webt/wq/ml/k1/wqmlk1exb13grilnxouud_qxo_o.png"><br>
<hr> <br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Was Sie mÃ¶glicherweise nicht Ã¼ber die Generierung von Sysbench-Zufallszahlen</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
gewusst </font><i><font style="vertical-align: inherit;">haben</font></i><font style="vertical-align: inherit;"> Sysbench ist ein beliebtes Tool zum Testen der Leistung. </font><font style="vertical-align: inherit;">Es wurde ursprÃ¼nglich von Peter Zaitsev in den frÃ¼hen 2000er Jahren geschrieben und wurde zum De-facto-Standard fÃ¼r Tests und Benchmarking. </font><font style="vertical-align: inherit;">Es wird derzeit von Alexei Kopytov unterstÃ¼tzt und ist auf Github </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">unter verÃ¶ffentlicht</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich bemerkte jedoch, dass es trotz seiner breiten Verbreitung Momente gibt, die vielen in sysbench unbekannt sind. </font><font style="vertical-align: inherit;">Zum Beispiel die MÃ¶glichkeit, MySQL-Tests einfach mit Lua zu Ã¤ndern oder die Parameter des eingebauten Zufallszahlengenerators zu konfigurieren.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wovon handelt der Artikel?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich habe diesen Artikel geschrieben, um zu zeigen, wie einfach es ist, sysbench an Ihre Anforderungen anzupassen. </font><font style="vertical-align: inherit;">Es gibt viele MÃ¶glichkeiten, die FunktionalitÃ¤t von sysbench zu erweitern. Eine davon besteht darin, die Generierung von Zufallskennungen (IDs) zu konfigurieren. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
StandardmÃ¤ÃŸig bietet sysbench fÃ¼nf verschiedene Optionen zum Generieren von Zufallszahlen. </font><font style="vertical-align: inherit;">Aber sehr oft (in der Tat fast nie) wird keiner von ihnen explizit angegeben, und noch seltener kÃ¶nnen Sie die Generierungsparameter sehen (fÃ¼r Optionen, bei denen sie verfÃ¼gbar sind). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie eine Frage haben: â€Und warum sollte mich das interessieren? </font><font style="vertical-align: inherit;">SchlieÃŸlich sind die Standardwerte durchaus geeignet. â€œDieser Beitrag soll Ihnen helfen, zu verstehen, warum dies nicht immer der Fall ist.</font></font><br>
<a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lasst uns beginnen</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie kÃ¶nnen Zufallszahlen in sysbench generiert werden? </font><font style="vertical-align: inherit;">Folgendes ist derzeit implementiert (Sie kÃ¶nnen sie leicht Ã¼ber die Option --help anzeigen):</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Spezial (Sonderverteilung)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GauÃŸsche (GauÃŸsche Verteilung)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pareto (Pareto-Verteilung)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zipfian (Zipf-Verteilung)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GleichfÃ¶rmig (gleichmÃ¤ÃŸige Verteilung)</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
StandardmÃ¤ÃŸig wird Special mit den folgenden Parametern verwendet:</font></font><br>
<br>
<ul>
<li><code>rand-spec-iter = 12</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Anzahl der Iterationen fÃ¼r eine spezielle Verteilung</font></font></li>
<li><code>rand-spec-pct = 1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Prozentsatz des gesamten Bereichs, in den â€spezielleâ€œ Werte mit einer speziellen Verteilung fallen</font></font></li>
<li><code>rand-spec-res = 75</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Prozentsatz der â€speziellenâ€œ Werte zur Verwendung in einer speziellen Verteilung</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Da ich einfache und leicht zu reproduzierende Tests und Skripte mag, werden alle nachfolgenden Daten mit den folgenden sysbench-Befehlen gesammelt:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sysbench ./src/lua/oltp_read.lua -mysql_storage_engine = innodb â€“db-driver = mysql â€“tables = 10 â€“table_size = 100 vorbereiten</font></font></li>
<li>sysbench ./src/lua/oltp_read_write.lua â€“db-driver=mysql â€“tables=10 â€“table_size=100 â€“skip_trx=off â€“report-interval=1 â€“mysql-ignore-errors=all â€“mysql_storage_engine=innodb â€“auto_inc=on â€“histogram â€“stats_format=csv â€“db-ps-mode=disable â€“threads=10 â€“time=60 â€“rand-type=XXX run</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
FÃ¼hlen Sie sich frei, selbst zu experimentieren. Die Skriptbeschreibung und Daten finden </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sie hier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Warum verwendet sysbench einen Zufallszahlengenerator? Einer der Zwecke besteht darin, IDs zu generieren, die in Abfragen verwendet werden. In unserem Beispiel werden also Zahlen zwischen 1 und 100 generiert, wobei die Erstellung von 10 Tabellen mit jeweils 100 Zeilen berÃ¼cksichtigt wird. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Was ist, wenn Sie sysbench wie oben beschrieben ausfÃ¼hren und nur -rand-type Ã¤ndern?</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Ich habe dieses Skript ausgefÃ¼hrt und das allgemeine Protokoll verwendet, um die HÃ¤ufigkeit der generierten ID-Werte zu erfassen und zu analysieren. Hier ist das Ergebnis: </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Spezielle </font></font></i><br>
<img src="https://habrastorage.org/webt/79/mg/ms/79mgmsokscoestls9idw2scam-m.png"><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Uniform </font></font></i><br>
<img src="https://habrastorage.org/webt/xa/ke/d5/xaked5nxjxi5f0k4wersvgohs9c.png"><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zipfian </font></font></i><br>
<img src="https://habrastorage.org/webt/kc/9w/qq/kc9wqq91bfc_6wm1jitdhvxdify.png"><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pareto </font></font></i><br>
<img src="https://habrastorage.org/webt/qq/tw/to/qqtwtovmhzldtd-wvzdvjwlmb40.png"><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gaussian</font></font></i><br>
<img src="https://habrastorage.org/webt/pk/oe/gd/pkoegdfqzkc-hzix_zug89wy28c.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Es ist zu sehen, dass dieser Parameter wichtig ist, oder? SchlieÃŸlich macht sysbench genau das, was wir von ihm erwartet haben.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Schauen wir uns die einzelnen Distributionen genauer an.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Besondere</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Special wird standardmÃ¤ÃŸig verwendet. Wenn Sie also NICHT den Rand-Typ angeben, verwendet sysbench special. </font><font style="vertical-align: inherit;">Special verwendet eine sehr begrenzte Anzahl von ID-Werten. </font><font style="vertical-align: inherit;">In unserem Beispiel kÃ¶nnen wir sehen, dass die Werte 50-51 hauptsÃ¤chlich verwendet werden, die verbleibenden Werte zwischen 44-56 sind Ã¤uÃŸerst selten, wÃ¤hrend andere praktisch nicht verwendet werden. </font><font style="vertical-align: inherit;">Bitte beachten Sie, dass die ausgewÃ¤hlten Werte in der Mitte des verfÃ¼gbaren Bereichs von 1 bis 100 liegen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In diesem Fall betrÃ¤gt der Peak ungefÃ¤hr zwei IDs, die 2% der Probe darstellen. </font><font style="vertical-align: inherit;">Wenn ich die Anzahl der DatensÃ¤tze auf eine Million erhÃ¶he, bleibt der Peak bestehen, liegt jedoch bei 7493, was 0,74% der Stichprobe entspricht. </font><font style="vertical-align: inherit;">Da dies restriktiver sein wird, ist es wahrscheinlich, dass die Anzahl der Seiten mehr als eins betrÃ¤gt.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GleichfÃ¶rmig (gleichmÃ¤ÃŸige Verteilung)</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie der Name schon sagt, wenn wir Uniform verwenden, werden alle Werte fÃ¼r die ID verwendet und die Verteilung wird ... einheitlich sein.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zipfian (Zipf-Verteilung)</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Zipf-Verteilung, manchmal auch als Zeta-Verteilung bezeichnet, ist eine diskrete Verteilung, die Ã¼blicherweise in der Linguistik, Versicherung und Modellierung seltener Ereignisse verwendet wird. </font><font style="vertical-align: inherit;">In diesem Fall verwendet sysbench Zahlen, die mit der kleinsten (1) beginnen, und reduziert sehr schnell die VerwendungshÃ¤ufigkeit, wobei grÃ¶ÃŸere Zahlen verwendet werden.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pareto (Pareto)</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pareto wendet die </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Regel â€80-20â€œ an</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">In diesem Fall werden die generierten IDs noch weniger verschmiert und konzentrieren sich mehr auf ein kleines Segment. </font><font style="vertical-align: inherit;">In unserem Beispiel hatten 52% aller IDs den Wert 1 und 73% der Werte befanden sich in den ersten 10 Zahlen.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GauÃŸsche (GauÃŸsche Verteilung)</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die GauÃŸsche Verteilung (Normalverteilung) ist </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bekannt und bekannt</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Es wird hauptsÃ¤chlich in der Statistik und Prognose um einen zentralen Faktor verwendet. </font><font style="vertical-align: inherit;">In diesem Fall werden die verwendeten IDs entlang der glockenfÃ¶rmigen Kurve verteilt, beginnend mit dem Durchschnittswert und langsam bis zu den Kanten abnehmend.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Was ist der Sinn davon?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jede der oben genannten Optionen hat ihre eigene Verwendung und kann nach Zweck gruppiert werden. Pareto und Special konzentrieren sich auf Hot Spots. In diesem Fall verwendet die Anwendung immer wieder dieselbe Seite / dieselben Daten. Das mÃ¶gen wir brauchen, aber wir mÃ¼ssen verstehen, was wir tun und dÃ¼rfen hier keine Fehler machen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn wir beispielsweise die Leistung der InnoDB-Seitenkomprimierung beim Lesen testen, sollten Sie vermeiden, den Standardwert Special oder Pareto zu verwenden. Wenn wir einen 1-TB-Datensatz und einen 30-GB-Pufferpool haben und dieselbe Seite mehrmals anfordern, wird diese Seite bereits von der Festplatte gelesen und ist unkomprimiert im Speicher verfÃ¼gbar. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kurz gesagt, ein solcher Test ist eine Verschwendung von Zeit und MÃ¼he.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Gleiche gilt, wenn wir die Leistung der Aufnahme Ã¼berprÃ¼fen mÃ¼ssen. Immer wieder dieselbe Seite zu schreiben, ist nicht die beste Option. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wie wÃ¤re es mit Leistungstests?</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Auch hier mÃ¶chten wir die Leistung testen, aber fÃ¼r welchen Fall? Es ist wichtig zu verstehen, dass die Methode zur Erzeugung von Zufallszahlen die Testergebnisse stark beeinflusst. Und Ihre â€guten Standardeinstellungenâ€œ kÃ¶nnen zu falschen Schlussfolgerungen fÃ¼hren. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die folgenden Grafiken zeigen je nach Rand-Typ unterschiedliche Latenzen (Testtyp, Zeit, zusÃ¤tzliche Parameter und Anzahl der Threads sind Ã¼berall gleich). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Von Typ zu Typ sind die VerzÃ¶gerungen erheblich unterschiedlich: </font></font><br>
 <br>
<img src="https://habrastorage.org/webt/jy/fk/xi/jyfkxi1bbb16ljirvbablnmubtu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier habe ich gelesen und geschrieben, und die Daten wurden aus dem Leistungsschema (</font></font><code>sys.schema_table_statistics</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) Wie erwartet dauern Pareto und Special viel lÃ¤nger als andere, was dazu fÃ¼hrt, dass das System (MySQL-InnoDB) an einem â€Hot Spotâ€œ kÃ¼nstlich unter der Konkurrenz leidet. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Ã„ndern des Rand-Typs wirkt sich nicht nur auf die VerzÃ¶gerung aus, sondern auch auf die Anzahl der verarbeiteten Zeilen, wie im Leistungsschema angegeben. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zi/3s/6i/zi3s6iyv6xas2qusohmexwfb51q.png"><br>
<br>
<img src="https://habrastorage.org/webt/0s/rm/3v/0srm3vgqcdpcp3mxig49dsed5sq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In Anbetracht all dieser Punkte ist es wichtig zu verstehen, was wir zu bewerten und zu testen versuchen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn mein Ziel darin besteht, die Systemleistung auf allen Ebenen zu testen, bevorzuge ich mÃ¶glicherweise die Verwendung von Uniform, das den Datensatz / Datenbankserver / das System gleichermaÃŸen lÃ¤dt und das Lesen / Laden / Schreiben mit grÃ¶ÃŸerer Wahrscheinlichkeit gleichmÃ¤ÃŸig verteilt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn es meine Aufgabe ist, mit Hot Spots zu arbeiten, sind Pareto und Special wahrscheinlich die richtige Wahl.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Verwenden Sie die Standardwerte jedoch nicht blind. Sie mÃ¶gen zu Ihnen passen, sind aber oft fÃ¼r extreme FÃ¤lle gedacht. Nach meiner Erfahrung kÃ¶nnen Sie die Einstellungen hÃ¤ufig anpassen, um das gewÃ¼nschte Ergebnis zu erzielen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie mÃ¶chten beispielsweise die Werte in der Mitte verwenden, indem Sie das Intervall so erweitern, dass keine scharfe Spitze (standardmÃ¤ÃŸig Spezial) oder Glocke (GauÃŸ) angezeigt wird. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie kÃ¶nnen Special so konfigurieren, dass etwa Folgendes angezeigt wird: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/yh/t9/rm/yht9rmlcneu9z1crykuz_iu-9su.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In diesem Fall befinden sich die IDs noch in der NÃ¤he, und es besteht Konkurrenz. Der Einfluss eines â€Hot Spotsâ€œ ist jedoch geringer. Daher kÃ¶nnen jetzt Konflikte mit mehreren IDs auftreten, die sich je nach Anzahl der DatensÃ¤tze auf einer Seite auf mehreren Seiten befinden kÃ¶nnen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein weiteres Beispiel ist die Partitionierung. Wie kÃ¶nnen Sie beispielsweise Ã¼berprÃ¼fen, wie Ihr System mit Partitionen arbeitet, sich auf die neuesten Daten konzentrieren und die alten archivieren? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Einfach! Erinnern Sie sich an das Pareto-Verteilungsdiagramm? Sie kÃ¶nnen es nach Ihren WÃ¼nschen Ã¤ndern. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/h8/de/nw/h8denwi9z-xnnayni--stg3shrm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Durch Angabe des -rand-pareto-Werts kÃ¶nnen Sie genau das erreichen, was Sie mÃ¶chten, indem Sie sysbench zwingen, sich auf groÃŸe ID-Werte zu konzentrieren. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zipfian kann auch eingerichtet werden, und obwohl Sie keine Inversion erhalten kÃ¶nnen, wie dies bei Pareto der Fall ist, kÃ¶nnen Sie leicht von einem Peak auf einem Wert zu einer gleichmÃ¤ÃŸigeren Verteilung wechseln. Ein gutes Beispiel ist das Folgende:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/vt/sx/pq/vtsxpq5g4nx82lyo2j5os7qhnhc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Letzte, was Sie beachten sollten, und es scheint mir, dass dies offensichtliche Dinge sind, aber es ist besser zu sagen, als nicht zu sagen, dass sich die Leistung Ã¤ndert, wenn Sie die Parameter fÃ¼r die Zufallszahlengenerierung Ã¤ndern. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Latenz vergleichen: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/jm/9t/o5/jm9to5ipvyf15th5new6r78j9gy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier zeigt GrÃ¼n die geÃ¤nderten Werte im Vergleich zum ursprÃ¼nglichen Blau.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/rt/ls/tc/rtlstcuoiyy7xrqugbesgkrldhu.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ergebnisse</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zu diesem Zeitpunkt sollten Sie bereits verstehen, wie einfach es ist, die Zufallszahlengenerierung in sysbench einzurichten, und wie nÃ¼tzlich dies fÃ¼r Sie sein kann. </font><font style="vertical-align: inherit;">Beachten Sie, dass das oben Gesagte fÃ¼r alle Anrufe gilt, z. B </font></font><code>sysbench.rand.default</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.:</font></font><br>
<br>
<pre><code class="sql hljs">local function get_id()<font></font>
   return sysbench.rand.default(1, sysbench.opt.table_size)<font></font>
<span class="hljs-keyword">End</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kopieren Sie vor diesem Hintergrund nicht sinnlos den Code aus den Artikeln anderer Personen, sondern Ã¼berlegen Sie, was Sie benÃ¶tigen und wie Sie dies erreichen kÃ¶nnen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ÃœberprÃ¼fen Sie vor dem AusfÃ¼hren der Tests die Optionen zur Generierung von Zufallszahlen, um sicherzustellen, dass sie Ihren Anforderungen entsprechen. </font><font style="vertical-align: inherit;">Um mein Leben zu vereinfachen, benutze ich </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">diesen einfachen Test</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Dieser Test zeigt ziemlich klare Informationen zur ID-Verteilung an. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mein Rat ist, dass Sie Ihre BedÃ¼rfnisse verstehen und Tests / Benchmarking korrekt durchfÃ¼hren sollten.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verweise</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zuallererst ist dies </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sysbench</font></font></a> <font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> selbst </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">.</font></a></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Artikel Ã¼ber Zipfian:</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Neue Distribution des Zufallsgenerators fÃ¼r sysbench - Zipf</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en.wikipedia.org/wiki/Zipf%27s_law</font></font></a></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pareto:</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en.wikipedia.org/wiki/Pareto_distribution</font></font></a></li>
</ul><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Perconas Artikel zum Schreiben Ihrer Skripte in sysbench</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Alle fÃ¼r diesen Artikel verwendeten Materialien befinden sich </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">auf GitHub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
â†’ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erfahren Sie mehr Ã¼ber den Kurs</font></font></a><br>
<br>
<hr></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de497446/index.html">Alexander Iofa: â€Ein groÃŸes Team zu fÃ¼hren bedeutet, an der Messerkante entlang zu gehen.â€œ</a></li>
<li><a href="../de497450/index.html">Benutzerdefinierte Validierungsgrundlagen in Symfony 4/5 mit Beispielen</a></li>
<li><a href="../de497452/index.html">CLion News: 2020.1 Release, FÃ¼nfjahres-IDE und Online-Fragen und Antworten</a></li>
<li><a href="../de497456/index.html">FrÃ¼hlingsanimationen in Vue</a></li>
<li><a href="../de497460/index.html">Streetsview im Jahr 2000</a></li>
<li><a href="../de497468/index.html">[Meisterklasse] Praktische Angriffe auf die USB-Schnittstelle</a></li>
<li><a href="../de497470/index.html">So werfen Sie Viren im Corona SDK aus</a></li>
<li><a href="../de497476/index.html">Top 8 JavaScript-Datenstrukturen</a></li>
<li><a href="../de497478/index.html">Netzwerksimulator-Tutorial ns-3. Kapitel 4</a></li>
<li><a href="../de497480/index.html">VideovortrÃ¤ge: Unix-Weg</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>