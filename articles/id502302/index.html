<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🎬 🔘 📏 Menguji kode JavaScript dengan Jest untuk boneka. Bagian 1 🤙🏿 🧠 🧡</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Halo, Habr! Panduan ini adalah bagian pertama dari serangkaian artikel yang direncanakan tentang kerangka pengujian hebat seperti Jest. Materi akan be...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Menguji kode JavaScript dengan Jest untuk boneka. Bagian 1</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/502302/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Halo, Habr! </font><font style="vertical-align: inherit;">Panduan ini adalah bagian pertama dari serangkaian artikel yang direncanakan tentang kerangka pengujian hebat seperti Jest. </font><font style="vertical-align: inherit;">Materi akan berguna untuk pemula dan mereka yang baru saja berkenalan dengan pengujian, dan ingin mempelajari kerangka kerja ini. </font><font style="vertical-align: inherit;">Pada bagian pertama kita akan membahas: bagaimana memulai dengan lelucon, bagaimana menulis tes sederhana, dan metode apa yang ada untuk membandingkan nilai yang akan diperiksa dengan yang diharapkan. </font><font style="vertical-align: inherit;">Siapa yang peduli - selamat datang di kat!</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apa itu Jest?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seperti yang ditunjukkan pada halaman beranda proyek:</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jest adalah lingkungan pengujian JavaScript yang luar biasa dengan fokus pada kesederhanaan.</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dan memang, Jest sangat sederhana. </font><font style="vertical-align: inherit;">Tidak memerlukan pengaturan tambahan, mudah dimengerti dan digunakan, dan juga memiliki dokumentasi yang cukup bagus. </font><font style="vertical-align: inherit;">Bagus untuk proyek yang menggunakan Node, React, Angular, Vue, Babel, TypeScript dan banyak lagi. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ini juga open source dan didukung oleh Facebook.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Instalasi</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk menginstal Jest di proyek Anda, lakukan:</font></font><br>
<br>
<pre><code class="bash hljs">npm install --save-dev jest</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika Anda menggunakan benang:</font></font><br>
<br>
<pre><code class="bash hljs">yarn add --dev jest</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setelah instalasi, Anda dapat memperbarui bagian skrip dari package.json Anda:</font></font><br>
<br>
<pre><code class="json hljs">“scripts” : {<font></font>
     “test”: “jest”<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dengan panggilan sederhana ini, kita sudah dapat menjalankan tes kami (pada kenyataannya, bercanda akan membutuhkan setidaknya satu tes untuk ada). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anda juga dapat menginstal secara global (tetapi saya tidak akan merekomendasikan melakukan ini, karena bagi saya instalasi global modul adalah praktik buruk):</font></font><br>
<br>
<pre><code class="bash hljs">npm install jest --global</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan sesuai untuk benang:</font></font><br>
<br>
<pre><code class="bash hljs">yarn global add jest</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setelah itu, Anda dapat menggunakan lelucon langsung dari baris perintah. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dengan memanggil perintah jest --init di root proyek, setelah menjawab beberapa pertanyaan, Anda akan mendapatkan file pengaturan jest.config.js. </font><font style="vertical-align: inherit;">Atau Anda dapat menambahkan konfigurasi langsung ke package.json Anda. </font><font style="vertical-align: inherit;">Untuk melakukan ini, tambahkan kunci "lelucon" ke root json dan pada objek yang sesuai Anda dapat menambahkan pengaturan yang Anda butuhkan. </font><font style="vertical-align: inherit;">Kami akan menganalisis opsi sendiri nanti. </font><font style="vertical-align: inherit;">Ini tidak perlu pada tahap ini, karena bercanda dapat digunakan segera, tanpa konfigurasi tambahan.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tes pertama</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mari kita buat file first.test.js dan tulis tes pertama kami:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">//first.test.js</span>
test(<span class="hljs-string">'My first test'</span>, () =&gt; {<font></font>
    expect(<span class="hljs-built_in">Math</span>.max(<span class="hljs-number">1</span>, <span class="hljs-number">5</span>, <span class="hljs-number">10</span>)).toBe(<span class="hljs-number">10</span>);<font></font>
});<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan jalankan pengujian kami menggunakan npm run test atau langsung dengan perintah jest (jika dipasang secara global). </font><font style="vertical-align: inherit;">Setelah diluncurkan, kita akan melihat laporan tentang lulus tes.</font></font><br>
<br>
<pre><code class="plaintext hljs"> &lt;b&gt;PASS&lt;/b&gt;  ./first.test.js<font></font>
  ✓ My first test (1 ms)<font></font>
<font></font>
Test Suites: 1 passed, 1 total<font></font>
Tests:       1 passed, 1 total<font></font>
Snapshots:   0 total<font></font>
Time:        0.618 s, estimated 1 s<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mari kita selesaikan tes kita dan menjalankan lelucon lagi:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">//first.test.js</span>
test(<span class="hljs-string">'My first test'</span>, () =&gt; {<font></font>
    expect(<span class="hljs-built_in">Math</span>.max(<span class="hljs-number">1</span>, <span class="hljs-number">5</span>, <span class="hljs-number">10</span>)).toBe(<span class="hljs-number">5</span>);<font></font>
});<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seperti yang bisa kita lihat, sekarang ujian kita tidak lulus ujian. Jest menampilkan informasi terperinci tentang di mana masalah terjadi, apa hasil yang diharapkan, dan apa yang kami dapatkan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang mari kita menganalisis kode tes itu sendiri. Fungsi </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tes</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">digunakan untuk membuat tes baru. Dibutuhkan tiga argumen (dalam contoh kami menggunakan panggilan dengan dua argumen). Yang pertama adalah baris dengan nama tes, leluconnya akan ditampilkan dalam laporan. Yang kedua adalah fungsi yang berisi logika pengujian kami. Anda juga dapat menggunakan argumen ke-3 - batas waktu. Ini opsional, dan nilai standarnya adalah 5 detik. Sudah diatur dalam milidetik. Parameter ini diperlukan ketika kita bekerja dengan kode asinkron dan mengembalikan janji dari fungsi pengujian. Ini menunjukkan berapa lama lelucon harus menunggu janji untuk diselesaikan. Setelah waktu ini, jika janji itu tidak diizinkan - bercanda akan menganggap tes gagal. Informasi lebih lanjut tentang bekerja dengan panggilan asinkron akan di bagian berikut. Atau, </font><font style="vertical-align: inherit;">Anda dapat menggunakannya </font><i><font style="vertical-align: inherit;">()</font></i><font style="vertical-align: inherit;"> alih-alih </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tes </font></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">().</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Tidak ada perbedaan antara panggilan tersebut. </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">it ()</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> hanyalah alias pada fungsi </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">test ()</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di dalam fungsi tes, pertama-tama kita memanggil </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">harapkan ()</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Baginya kita memberikan nilai yang ingin kita periksa. Dalam kasus kami, ini adalah hasil dari memanggil </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Math.max (1, 5, 10)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ekspektasi </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">()</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mengembalikan objek pembungkus yang memiliki sejumlah metode untuk membandingkan nilai yang dihasilkan dengan yang diharapkan. Salah satu metode yang kami gunakan adalah </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">toBe</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mari kita lihat inti dari metode ini:</font></font><br>
<br>
<ul>
<li><b>toBe()</b> — ,                ,     .     <i>Object.is()</i>.    ===     0  -0,   NaN c NaN.</li>
<li><b>toEqual()</b> — ,        .        .    .       .<br>
<br>
<pre><code class="javascript hljs">test(<span class="hljs-string">'toEqual with objects'</span>, () =&gt; {<font></font>
    expect({ <span class="hljs-attr">foo</span>: <span class="hljs-string">'foo'</span>, <span class="hljs-attr">subObject</span>: { <span class="hljs-attr">baz</span>: <span class="hljs-string">'baz'</span> } })<font></font>
        .toEqual({ <span class="hljs-attr">foo</span>: <span class="hljs-string">'foo'</span>, <span class="hljs-attr">subObject</span>: { <span class="hljs-attr">baz</span>: <span class="hljs-string">'baz'</span> } });  <span class="hljs-comment">// </span>
    expect({ <span class="hljs-attr">foo</span>: <span class="hljs-string">'foo'</span>, <span class="hljs-attr">subObject</span>: { <span class="hljs-attr">num</span>: <span class="hljs-number">0</span> } })<font></font>
        .toEqual({ <span class="hljs-attr">foo</span>: <span class="hljs-string">'foo'</span>, <span class="hljs-attr">subObject</span>: { <span class="hljs-attr">baz</span>: <span class="hljs-string">'baz'</span> } });  <span class="hljs-comment">//    .</span><font></font>
});<font></font>
<font></font>
test(<span class="hljs-string">'toEqual with arrays'</span>, () =&gt; {<font></font>
    expect([<span class="hljs-number">11</span>, <span class="hljs-number">19</span>, <span class="hljs-number">5</span>]).toEqual([<span class="hljs-number">11</span>, <span class="hljs-number">19</span>, <span class="hljs-number">5</span>]); <span class="hljs-comment">// </span>
    expect([<span class="hljs-number">11</span>, <span class="hljs-number">19</span>, <span class="hljs-number">5</span>]).toEqual([<span class="hljs-number">11</span>, <span class="hljs-number">19</span>]); <span class="hljs-comment">// </span><font></font>
});<font></font>
</code></pre><br>
</li>
<li><b>toContain()</b> —       .     ===.<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> arr = [<span class="hljs-string">'apple'</span>, <span class="hljs-string">'orange'</span>, <span class="hljs-string">'banana'</span>];<font></font>
expect(arr).toContain(<span class="hljs-string">'banana'</span>);<font></font>
expect(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>(arr)).toContain(<span class="hljs-string">'banana'</span>);<font></font>
expect(<span class="hljs-string">'apple, orange, banana'</span>).toContain(<span class="hljs-string">'banana'</span>);
</code></pre><br>
</li>
<li><b>toContainEqual()</b> —        .<br>
<br>
<pre><code class="javascript hljs">expect([{<span class="hljs-attr">a</span>: <span class="hljs-number">1</span>}, {<span class="hljs-attr">b</span>: <span class="hljs-number">2</span>}]).toContainEqual({<span class="hljs-attr">a</span>: <span class="hljs-number">1</span>});
</code></pre><br>
</li>
<li><b>toHaveLength()</b> —    length    .<br>
<br>
<pre><code class="javascript hljs">expect([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]).toHaveLength(<span class="hljs-number">4</span>);<font></font>
expect(<span class="hljs-string">'foo'</span>).toHaveLength(<span class="hljs-number">3</span>);<font></font>
expect({ <span class="hljs-attr">length</span>: <span class="hljs-number">1</span> }).toHaveLength(<span class="hljs-number">1</span>);
</code></pre><br>
</li>
<li><b>toBeNull()</b> —     null.</li>
<li><b>toBeUndefined()</b> —     undefined.</li>
<li><b>toBeDefined()</b> — <i> toBeUndefined</i>.    !== undefined.</li>
<li><b>toBeTruthy()</b> —        true.     false, null, undefined, 0, NaN   .</li>
<li><b>toBeFalsy()</b> —  <i>toBeTruthy()</i>.        false.</li>
<li><b>toBeGreaterThan()</b>  <b>toBeGreaterThanOrEqual()</b> —        ,   &gt;,       &gt;=.</li>
<li><b>toBeLessThan()</b>  <b>toBeLessThanOrEqual()</b> —  <i>toBeGreaterThan()</i>  <i>toBeGreaterThanOrEqual()</i></li>
<li><b>toBeCloseTo()</b> —       ,         ,        .             .<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> num = <span class="hljs-number">0.1</span> + <span class="hljs-number">0.2</span>; <span class="hljs-comment">// 0.30000000000000004</span>
expect(num).toBeCloseTo(<span class="hljs-number">0.3</span>);<font></font>
expect(<span class="hljs-built_in">Math</span>.PI).toBeCloseTo(<span class="hljs-number">3.14</span>, <span class="hljs-number">2</span>);
</code></pre><br>
</li>
<li><b>toMatch()</b> —     .<br>
<br>
<pre><code class="javascript hljs">expect(<span class="hljs-string">'Banana'</span>).toMatch(<span class="hljs-regexp">/Ba/</span>);
</code></pre><br>
</li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">toThrow ()</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - digunakan saat diperlukan untuk memeriksa pengecualian. </font><font style="vertical-align: inherit;">Anda dapat memeriksa fakta kesalahan itu sendiri dan memeriksa untuk melempar pengecualian dari kelas tertentu, baik dengan pesan kesalahan atau dengan korespondensi pesan dengan ekspresi reguler.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">funcWithError</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'some error'</span>);<font></font>
}   <font></font>
expect(funcWithError).toThrow();<font></font>
expect(funcWithError).toThrow(<span class="hljs-built_in">Error</span>);<font></font>
expect(funcWithError).toThrow(<span class="hljs-string">'some error'</span>);<font></font>
expect(funcWithError).toThrow(<span class="hljs-regexp">/some/</span>);
</code></pre><br>
</li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tidak</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - properti ini memungkinkan Anda untuk memeriksa Ketimpangan. </font><font style="vertical-align: inherit;">Ini menyediakan objek yang memiliki semua metode yang tercantum di atas, tetapi mereka akan bekerja sebaliknya.</font></font><br>
<br>
<pre><code class="javascript hljs">expect(<span class="hljs-literal">true</span>).not.toBe(<span class="hljs-literal">false</span>);<font></font>
expect({ <span class="hljs-attr">foo</span>: <span class="hljs-string">'bar'</span> }).not.toEqual({});<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">funcWithoutError</span>(<span class="hljs-params"></span>) </span>{}<font></font>
expect(funcWithoutError).not.toThrow();<font></font>
</code></pre></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mari kita menulis beberapa tes sederhana. </font><font style="vertical-align: inherit;">Pertama, buat modul sederhana yang akan berisi beberapa metode untuk bekerja dengan lingkaran.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">// src/circle.js</span>
<span class="hljs-keyword">const</span> area = <span class="hljs-function">(<span class="hljs-params">radius</span>) =&gt;</span> <span class="hljs-built_in">Math</span>.PI * radius ** <span class="hljs-number">2</span>;
<span class="hljs-keyword">const</span> circumference = <span class="hljs-function">(<span class="hljs-params">radius</span>) =&gt;</span> <span class="hljs-number">2</span> * <span class="hljs-built_in">Math</span>.PI * radius;
<span class="hljs-built_in">module</span>.exports = { area, circumference };
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selanjutnya, tambahkan tes:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">// tests/circle.test.js</span>
<span class="hljs-keyword">const</span> circle = <span class="hljs-built_in">require</span>(<span class="hljs-string">'../src/circle'</span>);<font></font>
<font></font>
test(<span class="hljs-string">'Circle area'</span>, () =&gt; {<font></font>
    expect(circle.area(<span class="hljs-number">5</span>)).toBeCloseTo(<span class="hljs-number">78.54</span>);<font></font>
    expect(circle.area()).toBeNaN();<font></font>
});<font></font>
<font></font>
test(<span class="hljs-string">'Circumference'</span>, () =&gt; {<font></font>
    expect(circle.circumference(<span class="hljs-number">11</span>)).toBeCloseTo(<span class="hljs-number">69.1</span>, <span class="hljs-number">1</span>);<font></font>
    expect(circle.circumference()).toBeNaN();<font></font>
});<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam tes ini, kami memeriksa hasil 2 metode - </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">area</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">keliling</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Menggunakan metode </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">toBeCloseTo,</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> kami memeriksa hasil yang diharapkan. </font><font style="vertical-align: inherit;">Dalam kasus pertama, kami memeriksa atau area terhitung lingkaran dengan jari-jari 5 kira-kira sama dengan 78,54, sedangkan perbedaan dengan nilai yang diperoleh (itu akan menjadi 78,53981633974483) tidak besar dan tes akan dihitung. </font><font style="vertical-align: inherit;">Di yang kedua, kami mengindikasikan bahwa kami tertarik untuk memeriksa dalam 1 desimal. </font><font style="vertical-align: inherit;">Kami juga memanggil metode kami tanpa argumen dan memeriksa hasilnya menggunakan </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">toBeNaN</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Karena hasil eksekusi mereka adalah NaN, maka tes akan berhasil dilewati. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mari kita ambil contoh lain. </font><font style="vertical-align: inherit;">Mari kita membuat fungsi yang akan memfilter berbagai produk berdasarkan harga:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">// src/productFilter.js</span>
<span class="hljs-keyword">const</span> byPriceRange = <span class="hljs-function">(<span class="hljs-params">products, min, max</span>) =&gt;</span>
         products.filter(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.price &gt;= min &amp;&amp; item.price &lt;= max);
<span class="hljs-built_in">module</span>.exports = { byPriceRange };
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan tambahkan tes:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">// tests/product.test.js</span>
<span class="hljs-keyword">const</span> productFilter = <span class="hljs-built_in">require</span>(<span class="hljs-string">'../src/producFilter'</span>);<font></font>
<font></font>
<span class="hljs-keyword">const</span> products = [<font></font>
    { <span class="hljs-attr">name</span>: <span class="hljs-string">'onion'</span>, <span class="hljs-attr">price</span>: <span class="hljs-number">12</span> },<font></font>
    { <span class="hljs-attr">name</span>: <span class="hljs-string">'tomato'</span>, <span class="hljs-attr">price</span>: <span class="hljs-number">26</span> },<font></font>
    { <span class="hljs-attr">name</span>: <span class="hljs-string">'banana'</span>, <span class="hljs-attr">price</span>: <span class="hljs-number">29</span> },<font></font>
    { <span class="hljs-attr">name</span>: <span class="hljs-string">'orange'</span>, <span class="hljs-attr">price</span>: <span class="hljs-number">38</span> }<font></font>
];<font></font>
<font></font>
test(<span class="hljs-string">'Test product filter by range'</span>, () =&gt; {
    <span class="hljs-keyword">const</span> FROM = <span class="hljs-number">15</span>;
    <span class="hljs-keyword">const</span> TO = <span class="hljs-number">30</span>;
    <span class="hljs-keyword">const</span> filteredProducts = productFilter.byPriceRange(products, FROM, TO);<font></font>
<font></font>
    expect(filteredProducts).toHaveLength(<span class="hljs-number">2</span>);<font></font>
    expect(filteredProducts).toContainEqual({ <span class="hljs-attr">name</span>: <span class="hljs-string">'tomato'</span>, <span class="hljs-attr">price</span>: <span class="hljs-number">26</span> });<font></font>
    expect(filteredProducts).toEqual([{ <span class="hljs-attr">name</span>: <span class="hljs-string">'tomato'</span>, <span class="hljs-attr">price</span>: <span class="hljs-number">26</span> }, { <span class="hljs-attr">name</span>: <span class="hljs-string">'banana'</span>, <span class="hljs-attr">price</span>: <span class="hljs-number">29</span> }]);<font></font>
    expect(filteredProducts[<span class="hljs-number">0</span>].price).toBeGreaterThanOrEqual(FROM);<font></font>
    expect(filteredProducts[<span class="hljs-number">1</span>].price).toBeLessThanOrEqual(TO);<font></font>
    expect(filteredProducts).not.toContainEqual({ <span class="hljs-attr">name</span>: <span class="hljs-string">'orange'</span>, <span class="hljs-attr">price</span>: <span class="hljs-number">38</span> });<font></font>
});<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam tes ini, kita akan memeriksa hasil </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fungsi</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> byRangePrice </font><font style="vertical-align: inherit;">. Pertama, kami memeriksa korespondensi panjang array yang dihasilkan dengan yang diharapkan - 2. Pemeriksaan berikutnya mengharuskan elemen berisi elemen - {nama: 'tomat', harga: 26}. Objek dalam array dan objek yang diteruskan ke </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ContainEqual</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> adalah dua objek yang berbeda, bukan referensi yang sama. Tetapi </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">toContainEqual akan</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> membandingkan setiap properti. Karena kedua objek identik, verifikasi akan berhasil. Selanjutnya, kita menggunakan </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">toEqual</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> untuk memeriksa struktur seluruh array dan elemen-elemennya. Metode </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">toBeGreaterThanOrEqual</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">toBeLessThanOrEqual</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> akan membantu kami memeriksa harga elemen array pertama dan kedua. Dan akhirnya, menelepon </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">not. ToContainEqual</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">akan memeriksa apakah elemen tersebut terdapat dalam array - {name: 'orange', price: 38}, yang, dengan ketentuan, tidak boleh ada di sana. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam contoh ini, kami menulis beberapa tes sederhana menggunakan fungsi verifikasi yang dijelaskan di atas. </font><font style="vertical-align: inherit;">Pada bagian berikut, kita akan membahas pekerjaan dengan kode asinkron, fungsi lelucon yang tidak tercakup dalam bagian tutorial ini, kita akan berbicara tentang konfigurasinya, dan banyak lagi.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id502276/index.html">Metode Kanban: Contoh PNZ No. 2: Pelatihan dan Kursus</a></li>
<li><a href="../id502278/index.html">Cara tidak mengedit tes Python</a></li>
<li><a href="../id502286/index.html">Robot api</a></li>
<li><a href="../id502292/index.html">Kami menulis autotest menggunakan Selenium Webdriver, Java 8 dan pola Page Object</a></li>
<li><a href="../id502298/index.html">Cumulative Flow Chart (CFD) sebagai indikator kesehatan proyek Anda</a></li>
<li><a href="../id502306/index.html">Dari sejarah penyiaran satelit "non-standar"</a></li>
<li><a href="../id502308/index.html">Apa yang menjaga pasar saham dari kejatuhan skala besar dan apa yang harus dilakukan oleh perusahaan teknologi?</a></li>
<li><a href="../id502312/index.html">Aturan penerbangan visual dan instrumen</a></li>
<li><a href="../id502316/index.html">FCC membuka band 6 GHz untuk jaringan nirkabel - mengapa tidak semua orang berpikir itu ide yang baik</a></li>
<li><a href="../id502318/index.html">Payet pintar</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>