<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘¨ğŸ¼â€ğŸš’ ğŸ¤™ğŸ¾ ğŸŒ± ãƒ†ã‚£ãƒ¼ãƒãƒƒãƒˆã‹ã‚‰ã®Android Camera2 APIã€ãƒ‘ãƒ¼ãƒˆ2ã€ãƒ“ãƒ‡ã‚ªã®ä½œæˆ ğŸ’…ğŸ¼ â†ªï¸ ğŸ”</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ç§ãŸã¡ã¯å¼•ãç¶šãCAMERA2 Android APIã‚’æ‰±ã„ã¾ã™ã€‚
 å‰å›ã®è¨˜äº‹ã§ã¯ã€æ–°ã—ã„APIã‚’ä½¿ç”¨ã—ã¦å†™çœŸã‚’æ’®ã‚‹ãŸã‚ã«ã‚«ãƒ¡ãƒ©ã‚’ãƒã‚¹ã‚¿ãƒ¼ã—ã¾ã—ãŸã€‚ãã‚Œã§ã¯ãƒ“ãƒ‡ã‚ªã‚’æ’®ã‚Šã¾ã—ã‚‡ã†ã€‚ä¸€èˆ¬çš„ã«ã€æœ€åˆã®ç§ã®ç›®æ¨™ã¯ã€Media Codecã‚’ä½¿ç”¨ã—ã¦Androidã‚«ãƒ¡ãƒ©ã‹ã‚‰ãƒ©ã‚¤ãƒ–ãƒ“ãƒ‡ã‚ªã‚’ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ã™ã‚‹ã“ã¨...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>ãƒ†ã‚£ãƒ¼ãƒãƒƒãƒˆã‹ã‚‰ã®Android Camera2 APIã€ãƒ‘ãƒ¼ãƒˆ2ã€ãƒ“ãƒ‡ã‚ªã®ä½œæˆ</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/471774/"><img src="https://habrastorage.org/webt/kk/8_/gf/kk8_gf5d1vt1kyxcb_vkbjqwpnk.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç§ãŸã¡ã¯å¼•ãç¶šãCAMERA2 Android APIã‚’æ‰±ã„ã¾ã™ã€‚</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 å‰å›ã®è¨˜äº‹ã§ã¯ã€æ–°ã—ã„APIã‚’ä½¿ç”¨ã—ã¦å†™çœŸã‚’æ’®ã‚‹ãŸã‚ã«ã‚«ãƒ¡ãƒ©ã‚’ãƒã‚¹ã‚¿ãƒ¼ã—ã¾ã—ãŸã€‚ãã‚Œã§ã¯ãƒ“ãƒ‡ã‚ªã‚’æ’®ã‚Šã¾ã—ã‚‡ã†ã€‚ä¸€èˆ¬çš„ã«ã€æœ€åˆã®ç§ã®ç›®æ¨™ã¯ã€Media Codecã‚’ä½¿ç”¨ã—ã¦Androidã‚«ãƒ¡ãƒ©ã‹ã‚‰ãƒ©ã‚¤ãƒ–ãƒ“ãƒ‡ã‚ªã‚’ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ã™ã‚‹ã“ã¨ã§ã—ãŸãŒã€ãŸã¾ãŸã¾æœ€åˆã«Media RecorderãŒç™»å ´ã—ã€æœ€ã‚‚ç«‹æ´¾ãªè¦–è´è€…ã¨ã©ã‚Œã ã‘ã†ã¾ããƒ“ãƒ‡ã‚ªã‚¯ãƒªãƒƒãƒ—ã‚’è¨˜éŒ²ã§ãã‚‹ã‹ã‚’å…±æœ‰ã—ãŸã„ã¨æ€ã„ã¾ã—ãŸã€‚ã—ãŸãŒã£ã¦ã€æ¬¡å›ã¯ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ã‚’é–‹å§‹ã—ã¾ã™ãŒã€ã“ã“ã§ã¯æ–°ã—ã„APIã«ãƒ¡ãƒ‡ã‚£ã‚¢ãƒ¬ã‚³ãƒ¼ãƒ€ãƒ¼ã‚’è¿½åŠ ã™ã‚‹æ–¹æ³•ã‚’ç†è§£ã—ã¾ã™ã€‚å½¼ã«é–¢ã™ã‚‹æŠ•ç¨¿ã¯ã‹ãªã‚Šå¹³å‡¡ã§ã‚ã‚‹ã“ã¨ãŒåˆ¤æ˜ã—ãŸãŸã‚ã€åˆå¿ƒè€…ã¨å®Œç’§ãªãƒ†ã‚£ãƒ¼ãƒãƒƒãƒˆã ã‘ãŒçŒ«ã®ä¸‹ã‚’è¦‹ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</font></font><br>
<br>
<a name="habracut"></a><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã—ãŸãŒã£ã¦ã€ãƒ¡ãƒ‡ã‚£ã‚¢ãƒ¬ã‚³ãƒ¼ãƒ€ãƒ¼</font></font></b><br>
<br>
<img src="https://habrastorage.org/webt/18/jb/si/18jbsij8rxc6kpxef3xfr7h9uug.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ã‚¯ãƒ©ã‚¹ã®åå‰ã¨ä¸Šè¨˜ã®å†™çœŸã‹ã‚‰ã‚ã‹ã‚‹ã‚ˆã†ã«ã€ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªã¾ãŸã¯ãƒ“ãƒ‡ã‚ªã®ã‚½ãƒ¼ã‚¹ã¾ãŸã¯ã™ã¹ã¦ã‚’ã¾ã¨ã‚ã¦è¨˜éŒ²ã—ã€æœ€å¾Œã«ã™ã¹ã¦ã‚’è¨˜éŒ²ã™ã‚‹ãŸã‚ã«ã€å¿…è¦ãªãƒ•ã‚¡ã‚¤ãƒ«ã®æœ€ã‚‚é‡è¦ãªã‚¢ã‚¯ã‚»ã‚¹ãŒå¯èƒ½ãªãƒ¡ãƒ‡ã‚£ã‚¢ãƒ¬ã‚³ãƒ¼ãƒ€ãƒ¼ãŒå¿…è¦ã§ã™ã€‚ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç§ãŸã¡ã®å ´åˆã€ã‚¿ã‚¹ã‚¯ã¯ç°¡å˜ã§ã™ã€‚ã‚«ãƒ¡ãƒ©ã¨ãƒã‚¤ã‚¯ã‹ã‚‰ãƒ“ãƒ‡ã‚ªã¨ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªã‚’å–å¾—ã—ã€MPEG_4å½¢å¼ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«æ›¸ãè¾¼ã¿ã¾ã™ã€‚ä¸€éƒ¨ã®å¤‰è³ªè€…ã¯ã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯çµŒç”±ã§ãƒ“ãƒ‡ã‚ªã‚’ãƒ‰ãƒ©ã‚¤ãƒ–ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ãŸã‚ã«ã€Media Recorderã®ãƒ•ã‚¡ã‚¤ãƒ«ã®ä»£ã‚ã‚Šã«ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚½ã‚±ãƒƒãƒˆã‚’æŒæ¡ã—ã¦ã„ã¾ã—ãŸãŒã€å¹¸ã„ã«ã‚‚ã€ã“ã‚Œã‚‰ã®æ´çªŸã®æ™‚é–“ã¯ã™ã§ã«éå»ã«ã‚ã‚Šã¾ã™ã€‚æ¬¡ã®è¨˜äº‹ã§ã‚‚åŒã˜ã“ã¨ã‚’è¡Œã„ã¾ã™ãŒã€ã“ã‚Œã«ã¯ã™ã§ã«æ–‡æ˜åŒ–ã•ã‚ŒãŸãƒ¡ãƒ‡ã‚£ã‚¢ã‚³ãƒ¼ãƒ‡ãƒƒã‚¯ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 èª°ã‚‚ãŒ</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">2011å¹´ã¾ã§ã®</font></a><font style="vertical-align: inherit;">ä»¥å‰ã®Camera APIã‚’è¦šãˆã¦ã„ã‚‹ã‚ˆã†ã«</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€ãã‚Œã‹ã‚‰MediaRecorderã®æ¥ç¶šã¯é›£ã—ãã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚</font><font style="vertical-align: inherit;">ç¾åœ¨ã€å•é¡Œã¯ç™ºç”Ÿã—ã¦ã„ã¾ã›ã‚“ã€‚</font><font style="vertical-align: inherit;">ãã—ã¦ã€ã‚«ãƒ¡ãƒ©ã®å…¨ä½“çš„ãªã‚¹ã‚­ãƒ¼ãƒ ã®å†™çœŸã«æ€–ãŒã‚‰ãªã„ã§ãã ã•ã„ã€‚</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gu/c5/56/guc556ggwubf72480f69h-khi_q.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚«ãƒ¡ãƒ©ã‹ã‚‰ã®ç”»åƒãŒè¡¨ç¤ºã•ã‚Œã‚‹Surfaceã‚µãƒ¼ãƒ•ã‚§ã‚¹ã«Media Recorderã‚’å›ºå®šã™ã‚‹ã ã‘ã§ã€ã™ã¹ã¦ã‚’è‡ªåˆ†ã§è¡Œã„ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªã®å ´åˆã€å¿…è¦ãªãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’è¨­å®šã™ã‚‹ã ã‘ã§ã€ã•ã‚‰ã«ç°¡å˜ã«ãªã‚Šã¾ã™ã€‚ãƒ¡ãƒ‡ã‚£ã‚¢ãƒ¬ã‚³ãƒ¼ãƒ€ãƒ¼ã¯ã€ã‚ã‚‰ã‚†ã‚‹ç¨®é¡ã®ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã§ç…©ã‚ã•ã‚Œã‚‹ã“ã¨ãªãã€ç‹¬è‡ªã«ã‚µã‚¦ãƒ³ãƒ‰ã‚’å‡¦ç†ã—ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å‰å›ã®æŠ•ç¨¿ã§æ—¥æœ¬äººã®å‹äººãŒé©šã„ãŸã“ã¨ã‚’æ€ã„å‡ºã—ã¦ãã ã•ã„ï¼š</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Camera2ãŒå›°æƒ‘ã™ã‚‹ç†ç”±ã®1ã¤ã¯ã€1ã¤ã®ã‚·ãƒ§ãƒƒãƒˆã‚’æ’®ã‚‹ãŸã‚ã«ä½¿ç”¨ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã®æ•°ã§ã™ã€‚</font></font></blockquote><br>
 <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãã—ã¦ã“ã“ã§ã¯ã€é€†ã«ã€</font><font style="vertical-align: inherit;">ãƒ“ãƒ‡ã‚ªãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¨˜éŒ²ã™ã‚‹ãŸã‚ã«å¿…è¦ãª</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã®æ•°</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãŒé©šãã»ã©</font><b><font style="vertical-align: inherit;">å°‘ãªã„ã®</font></b><font style="vertical-align: inherit;">ã¯é©šãã¹ãã“ã¨</font><font style="vertical-align: inherit;">ã§ã™ã€‚ 2ã¤ã ã‘ã€‚ ZemfiraãŒæ­Œã†ã‚ˆã†ã«ï¼šã€Œç§ã¯ã‚ãªãŸã®ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ãŒæœ€ä½é™å¿…è¦ã§ã™ã€‚ã€</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãã—ã¦ã€ä»Šåº¦ã¯ãã‚Œã‚‰ã‚’</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ã‚½ãƒ¼ã‚¹ã¨ã—ã¦</font><b><font style="vertical-align: inherit;">è¨˜è¿°ã—ã¾ã™ã€‚</font></b><font style="vertical-align: inherit;">å‰ã®è¨˜äº‹ã®ã‚³ãƒ¼ãƒ‰ã‚’ä½¿ç”¨ã—ã¦ã€æ’®å½±ã«é–¢é€£ã™ã‚‹ã™ã¹ã¦ã®ã‚‚ã®ã‚’ç ´æ£„ã—ã€å®Ÿéš›ã«ã¯ã€ã‚«ãƒ¡ãƒ©ã®è§£åƒåº¦ã¨åˆæœŸåŒ–ã®ã¿ã‚’æ®‹ã—ã¾ã™ã€‚ã¾ãŸã€ã‚«ãƒ¡ãƒ©ã¯1ã¤ã ã‘æ®‹ã—ã¾ã™-æ­£é¢ã€‚</font></font><br>
<br>
<pre><code class="java hljs">    <span class="hljs-keyword">private</span> CameraManager mCameraManager = <span class="hljs-keyword">null</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> CAMERA1 = <span class="hljs-number">0</span>;<font></font>
<font></font>
<font></font>
  <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(Bundle savedInstanceState)</span> </span>{
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState);<font></font>
        setContentView(R.layout.activity_main);<font></font>
<font></font>
<font></font>
        Log.d(LOG_TAG, <span class="hljs-string">" "</span>);
        <span class="hljs-keyword">if</span> (checkSelfPermission(Manifest.permission.CAMERA) != PackageManager.PERMISSION_GRANTED<font></font>
                ||<font></font>
                (ContextCompat.checkSelfPermission(MainActivity.<span class="hljs-keyword">this</span>, Manifest.permission.WRITE_EXTERNAL_STORAGE) != PackageManager.PERMISSION_GRANTED)<font></font>
                ||<font></font>
                (ContextCompat.checkSelfPermission(MainActivity.<span class="hljs-keyword">this</span>, Manifest.permission.RECORD_AUDIO) != PackageManager.PERMISSION_GRANTED)<font></font>
        ) {<font></font>
            requestPermissions(<span class="hljs-keyword">new</span> String[]{Manifest.permission.CAMERA, Manifest.permission.WRITE_EXTERNAL_STORAGE, Manifest.permission.RECORD_AUDIO}, <span class="hljs-number">1</span>);<font></font>
        }<font></font>
<font></font>
<font></font>
  mCameraManager = (CameraManager) getSystemService(Context.CAMERA_SERVICE);<font></font>
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">//     </span><font></font>
<font></font>
            myCameras = <span class="hljs-keyword">new</span> CameraService[mCameraManager.getCameraIdList().length];<font></font>
<font></font>
<font></font>
            <span class="hljs-keyword">for</span> (String cameraID : mCameraManager.getCameraIdList()) {<font></font>
                Log.i(LOG_TAG, <span class="hljs-string">"cameraID: "</span> + cameraID);
                <span class="hljs-keyword">int</span> id = Integer.parseInt(cameraID);<font></font>
<font></font>
                <span class="hljs-comment">//    </span>
                myCameras[id] = <span class="hljs-keyword">new</span> CameraService(mCameraManager, cameraID);<font></font>
<font></font>
<font></font>
            }<font></font>
        } <span class="hljs-keyword">catch</span> (CameraAccessException e) {<font></font>
            Log.e(LOG_TAG, e.getMessage());<font></font>
            e.printStackTrace();<font></font>
        }<font></font>
<font></font>
<font></font>
   <span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CameraService</span> </span>{<font></font>
<font></font>
<font></font>
        <span class="hljs-keyword">private</span> String mCameraID;
        <span class="hljs-keyword">private</span> CameraDevice mCameraDevice = <span class="hljs-keyword">null</span>;
        <span class="hljs-keyword">private</span> CameraCaptureSession mSession;
        <span class="hljs-keyword">private</span> CaptureRequest.Builder mPreviewBuilder;<font></font>
<font></font>
<font></font>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">CameraService</span><span class="hljs-params">(CameraManager cameraManager, String cameraID)</span> </span>{<font></font>
<font></font>
            mCameraManager = cameraManager;<font></font>
            mCameraID = cameraID;<font></font>
<font></font>
        }<font></font>
<font></font>
<font></font>
        <span class="hljs-keyword">private</span> CameraDevice.StateCallback mCameraCallback = <span class="hljs-keyword">new</span> CameraDevice.StateCallback() {<font></font>
<font></font>
            <span class="hljs-meta">@Override</span>
            <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onOpened</span><span class="hljs-params">(CameraDevice camera)</span> </span>{<font></font>
                mCameraDevice = camera;<font></font>
                Log.i(LOG_TAG, <span class="hljs-string">"Open camera  with id:"</span> + mCameraDevice.getId());<font></font>
<font></font>
                <span class="hljs-comment">//startCameraPreviewSession();         Media Recorder</span><font></font>
            } <font></font>
<font></font>
            <span class="hljs-meta">@Override</span>
            <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onDisconnected</span><span class="hljs-params">(CameraDevice camera)</span> </span>{<font></font>
                mCameraDevice.close();<font></font>
<font></font>
                Log.i(LOG_TAG, <span class="hljs-string">"disconnect camera  with id:"</span> + mCameraDevice.getId());<font></font>
                mCameraDevice = <span class="hljs-keyword">null</span>;<font></font>
            }<font></font>
<font></font>
            <span class="hljs-meta">@Override</span>
            <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onError</span><span class="hljs-params">(CameraDevice camera, <span class="hljs-keyword">int</span> error)</span> </span>{<font></font>
                Log.i(LOG_TAG, <span class="hljs-string">"error! camera id:"</span> + camera.getId() + <span class="hljs-string">" error:"</span> + error);<font></font>
            }<font></font>
        };<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 ã”è¦§ã®ã¨ãŠã‚Šã€æ¨©é™ã«RECORD_AUDIOã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒè¿½åŠ ã•ã‚Œã¦ã„ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãƒ¡ãƒ‡ã‚£ã‚¢ãƒ¬ã‚³ãƒ¼ãƒ€ãƒ¼ãŒãªã‘ã‚Œã°ã€éŸ³å£°ãªã—ã§è£¸ã®ãƒ“ãƒ‡ã‚ªã®ã¿ã‚’è¨˜éŒ²ã§ãã¾ã™ã€‚</font><font style="vertical-align: inherit;">è¨±å¯ãªãã‚µã‚¦ãƒ³ãƒ‰å½¢å¼ã‚’æŒ‡å®šã—ã‚ˆã†ã¨ã™ã‚‹ã¨ã€ã¾ã£ãŸãé–‹å§‹ã•ã‚Œã¾ã›ã‚“ã€‚</font><font style="vertical-align: inherit;">ã—ãŸãŒã£ã¦ã€ã‚µã‚¦ãƒ³ãƒ‰ã®éŒ²éŸ³ãªã©ã‚’è¨±å¯ã—ã¾ã™ã€‚ã‚‚ã¡ã‚ã‚“ã€ãƒ¡ã‚¤ãƒ³ã‚¹ãƒˆãƒªãƒ¼ãƒ ã®å®Ÿéš›ã®ã‚³ãƒ¼ãƒ‰ã§ã¯ã€ãã®ã‚ˆã†ãªã“ã¨ã¯è‰¯ã„ã“ã¨ã§ã¯ãªãã€ãƒ‡ãƒ¢ã§ã®ã¿è‰¯ã„ã“ã¨ã‚’æ€ã„å‡ºã—ã¦ãã ã•ã„ã€‚</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ¬¡ã«ã€åˆ¥ã®ãƒ¡ã‚½ãƒƒãƒ‰ã§ãƒ¡ãƒ‡ã‚£ã‚¢ãƒ¬ã‚³ãƒ¼ãƒ€ãƒ¼è‡ªä½“ã‚’åˆæœŸåŒ–ã—ã¾ã™</font></font></b><br>
<br>
<pre><code class="java hljs"> <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setUpMediaRecorder</span><span class="hljs-params">()</span> </span>{<font></font>
<font></font>
        mMediaRecorder = <span class="hljs-keyword">new</span> MediaRecorder();<font></font>
<font></font>
        mMediaRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);<font></font>
        mMediaRecorder.setVideoSource(MediaRecorder.VideoSource.SURFACE);<font></font>
        mMediaRecorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);<font></font>
        mCurrentFile = <span class="hljs-keyword">new</span> File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DCIM), <span class="hljs-string">"test"</span>+count+<span class="hljs-string">".mp4"</span>);<font></font>
        mMediaRecorder.setOutputFile(mCurrentFile.getAbsolutePath());<font></font>
        CamcorderProfile profile = CamcorderProfile.get(CamcorderProfile.QUALITY_480P);<font></font>
        mMediaRecorder.setVideoFrameRate(profile.videoFrameRate);<font></font>
        mMediaRecorder.setVideoSize(profile.videoFrameWidth, profile.videoFrameHeight);<font></font>
        mMediaRecorder.setVideoEncodingBitRate(profile.videoBitRate);<font></font>
        mMediaRecorder.setVideoEncoder(MediaRecorder.VideoEncoder.H264);<font></font>
        mMediaRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AAC);<font></font>
        mMediaRecorder.setAudioEncodingBitRate(profile.audioBitRate);<font></font>
        mMediaRecorder.setAudioSamplingRate(profile.audioSampleRate);<font></font>
<font></font>
        <span class="hljs-keyword">try</span> {<font></font>
            mMediaRecorder.prepare();<font></font>
            Log.i(LOG_TAG, <span class="hljs-string">"   "</span>);<font></font>
<font></font>
        } <span class="hljs-keyword">catch</span> (Exception e) {<font></font>
            Log.i(LOG_TAG, <span class="hljs-string">"   "</span>);<font></font>
        }<font></font>
<font></font>
<font></font>
    }<font></font>
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã“ã§ã‚‚ã€ã™ã¹ã¦ãŒæ˜ç¢ºã§ç†è§£å¯èƒ½ã§ã‚ã‚Šã€èª¬æ˜ã¯å¿…è¦ã‚ã‚Šã¾ã›ã‚“ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ¬¡ã¯æœ€ã‚‚é‡è¦ãªæ®µéšã§ã™ã€‚Surfaceã«Media Recorderã‚’è¿½åŠ ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">æœ€å¾Œã®æŠ•ç¨¿ã§ã¯ã€ã‚«ãƒ¡ãƒ©ã‹ã‚‰ã®ç”»åƒã‚’Surfaceã«è¡¨ç¤ºã—ã€ã‚¤ãƒ¡ãƒ¼ã‚¸ãƒªãƒ¼ãƒ€ãƒ¼ã‚’ä½¿ç”¨ã—ã¦ãã“ã‹ã‚‰ãƒ•ãƒ¬ãƒ¼ãƒ ã‚’æ’®å½±ã—ã¾ã—ãŸã€‚</font><font style="vertical-align: inherit;">ã“ã‚Œã‚’è¡Œã†ã«ã¯ã€Surfaceãƒªã‚¹ãƒˆã§ä¸¡æ–¹ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’æŒ‡å®šã™ã‚‹ã ã‘ã§ã™ã€‚</font></font><br>
<br>
<pre><code class="java hljs">Arrays.asList(surface,mImageReader.getSurface())
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã“ã§ã‚‚åŒã˜ã“ã¨ã‚’ã€ImageReaderã®ä»£ã‚ã‚Šã«æŒ‡å®šã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="java hljs">(Arrays.asList(surface, mMediaRecorder.getSurface()).<font></font>
<font></font>
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãã“ã§ã¯ã€ä¸€èˆ¬çš„ã«ã€ã‚³ãƒ³ãƒã€ä½¿ç”¨ã™ã‚‹ã™ã¹ã¦ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã€ã•ã‚‰ã«ã¯ãƒ¡ãƒ‡ã‚£ã‚¢ã‚³ãƒ¼ãƒ‡ãƒƒã‚¯ã‚’ä½¿ç”¨ã—ã¦ã€ã‚ã‚‰ã‚†ã‚‹ã‚‚ã®ã‚’ã‚¹ã‚«ãƒ«ãƒ—ãƒˆã§ãã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã¤ã¾ã‚Šã€1ã¤ã®ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã§å†™çœŸã‚’æ’®ã‚Šã€ãƒ“ãƒ‡ã‚ªã‚’æ’®å½±ã—ã¦ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</font><font style="vertical-align: inherit;">è¡¨é¢ãŒè‰¯ã„-å¯èƒ½ã€‚</font><font style="vertical-align: inherit;">ç¢ºã‹ã«ã€ã™ã¹ã¦ã‚’åŒæ™‚ã«å®Ÿè¡Œã™ã‚‹ã“ã¨ã¯å¯èƒ½ã§ã™ã‹ï¼Ÿæ•™ãˆã¾ã›ã‚“ã€‚</font><font style="vertical-align: inherit;">ç†è«–çš„ã«ã¯ã€ã‚«ãƒ¡ãƒ©ã®ç”»åƒã§åˆ¤æ–­ã™ã‚‹ã¨-ã§ãã¾ã™ã€‚</font></font><br>
<br>
<img src="https://habrastorage.org/webt/yj/nu/5l/yjnu5lirz9x8dqlsknioakgtjys.jpeg"><br>
 <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åŒæ§˜ã«ã€ç•°ãªã‚‹ã‚¹ãƒˆãƒªãƒ¼ãƒ ã«åˆ†æ•£ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã ã‹ã‚‰å®Ÿé¨“ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒã‚ã‚Šã¾ã™ã€‚</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã—ã‹ã—</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ã€å®Ÿéš›ã«ã¯</font><b><font style="vertical-align: inherit;">Media Recorderã«æˆ»ã‚Š</font></b><font style="vertical-align: inherit;">ã¾ã™ã€‚</font><font style="vertical-align: inherit;">å†™çœŸæ’®å½±ã¨ã¯ç•°ãªã‚Šã€æ’®å½±ã®ãŸã‚ã®è¿½åŠ ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¯å¿…è¦ã‚ã‚Šã¾ã›ã‚“ã€‚ImageSaverã®é¡ä¼¼ç‰©ã¯å¿…è¦ã‚ã‚Šã¾ã›ã‚“ã€‚ç§ãŸã¡ã®ãƒãƒ¼ãƒ‰ãƒ¯ãƒ¼ã‚«ãƒ¼ãƒ¬ã‚³ãƒ¼ãƒ€ãƒ¼ã¯ã™ã¹ã¦ã‚’è‡ªåˆ†ã§è¡Œã„ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãã—ã¦ã€ãã‚Œã¯ç´ æ™´ã‚‰ã—ã„ã“ã¨ã§ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãã®çµæœã€ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¯å®Œå…¨ã«ãƒŸãƒ‹ãƒãƒªã‚¹ãƒˆãªå¤–è¦³ã«ãªã‚Šã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">package</span> com.example.mediarecorder1;
<span class="hljs-keyword">import</span> androidx.appcompat.app.AppCompatActivity;
<span class="hljs-keyword">import</span> androidx.core.content.ContextCompat;
<span class="hljs-keyword">import</span> android.Manifest;
<span class="hljs-keyword">import</span> android.content.Context;
<span class="hljs-keyword">import</span> android.content.pm.PackageManager;
<span class="hljs-keyword">import</span> android.graphics.SurfaceTexture;
<span class="hljs-keyword">import</span> android.hardware.camera2.CameraAccessException;
<span class="hljs-keyword">import</span> android.hardware.camera2.CameraCaptureSession;
<span class="hljs-keyword">import</span> android.hardware.camera2.CameraDevice;
<span class="hljs-keyword">import</span> android.hardware.camera2.CameraManager;
<span class="hljs-keyword">import</span> android.hardware.camera2.CaptureRequest;
<span class="hljs-keyword">import</span> android.media.CamcorderProfile;
<span class="hljs-keyword">import</span> android.os.Bundle;
<span class="hljs-keyword">import</span> android.media.MediaRecorder;
<span class="hljs-keyword">import</span> android.os.Environment;
<span class="hljs-keyword">import</span> android.os.Handler;
<span class="hljs-keyword">import</span> android.os.HandlerThread;
<span class="hljs-keyword">import</span> android.util.Log;
<span class="hljs-keyword">import</span> android.view.Surface;
<span class="hljs-keyword">import</span> android.view.TextureView;
<span class="hljs-keyword">import</span> android.view.View;
<span class="hljs-keyword">import</span> android.widget.Button;
<span class="hljs-keyword">import</span> java.io.File;
<span class="hljs-keyword">import</span> java.util.Arrays;<font></font>
<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MainActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AppCompatActivity</span> </span>{<font></font>
<font></font>
<font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String LOG_TAG = <span class="hljs-string">"myLogs"</span>;<font></font>
<font></font>
    CameraService[] myCameras = <span class="hljs-keyword">null</span>;<font></font>
<font></font>
    <span class="hljs-keyword">private</span> CameraManager mCameraManager = <span class="hljs-keyword">null</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> CAMERA1 = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> count =<span class="hljs-number">1</span>;<font></font>
<font></font>
    <span class="hljs-keyword">private</span> Button mButtonOpenCamera1 = <span class="hljs-keyword">null</span>;
    <span class="hljs-keyword">private</span> Button mButtonRecordVideo = <span class="hljs-keyword">null</span>;
    <span class="hljs-keyword">private</span> Button mButtonStopRecordVideo = <span class="hljs-keyword">null</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> TextureView mImageView = <span class="hljs-keyword">null</span>;
    <span class="hljs-keyword">private</span> HandlerThread mBackgroundThread;
    <span class="hljs-keyword">private</span> Handler mBackgroundHandler = <span class="hljs-keyword">null</span>;<font></font>
<font></font>
    <span class="hljs-keyword">private</span> File mCurrentFile;<font></font>
<font></font>
    <span class="hljs-keyword">private</span> MediaRecorder mMediaRecorder = <span class="hljs-keyword">null</span>;<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">startBackgroundThread</span><span class="hljs-params">()</span> </span>{<font></font>
        mBackgroundThread = <span class="hljs-keyword">new</span> HandlerThread(<span class="hljs-string">"CameraBackground"</span>);<font></font>
        mBackgroundThread.start();<font></font>
        mBackgroundHandler = <span class="hljs-keyword">new</span> Handler(mBackgroundThread.getLooper());<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">stopBackgroundThread</span><span class="hljs-params">()</span> </span>{<font></font>
        mBackgroundThread.quitSafely();<font></font>
        <span class="hljs-keyword">try</span> {<font></font>
            mBackgroundThread.join();<font></font>
            mBackgroundThread = <span class="hljs-keyword">null</span>;<font></font>
            mBackgroundHandler = <span class="hljs-keyword">null</span>;<font></font>
        } <span class="hljs-keyword">catch</span> (InterruptedException e) {<font></font>
            e.printStackTrace();<font></font>
        }<font></font>
    }<font></font>
<font></font>
<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(Bundle savedInstanceState)</span> </span>{
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState);<font></font>
        setContentView(R.layout.activity_main);<font></font>
<font></font>
<font></font>
        Log.d(LOG_TAG, <span class="hljs-string">" "</span>);
        <span class="hljs-keyword">if</span> (checkSelfPermission(Manifest.permission.CAMERA) != PackageManager.PERMISSION_GRANTED<font></font>
                ||<font></font>
                (ContextCompat.checkSelfPermission(MainActivity.<span class="hljs-keyword">this</span>, Manifest.permission.WRITE_EXTERNAL_STORAGE) != PackageManager.PERMISSION_GRANTED)<font></font>
                ||<font></font>
                (ContextCompat.checkSelfPermission(MainActivity.<span class="hljs-keyword">this</span>, Manifest.permission.RECORD_AUDIO) != PackageManager.PERMISSION_GRANTED)<font></font>
        ) {<font></font>
            requestPermissions(<span class="hljs-keyword">new</span> String[]{Manifest.permission.CAMERA, Manifest.permission.WRITE_EXTERNAL_STORAGE, Manifest.permission.RECORD_AUDIO}, <span class="hljs-number">1</span>);<font></font>
        }<font></font>
<font></font>
<font></font>
        mButtonOpenCamera1 = findViewById(R.id.button1);<font></font>
        mButtonRecordVideo = findViewById(R.id.button2);<font></font>
        mButtonStopRecordVideo = findViewById(R.id.button3);<font></font>
        mImageView = findViewById(R.id.textureView);<font></font>
<font></font>
        mButtonOpenCamera1.setOnClickListener(<span class="hljs-keyword">new</span> View.OnClickListener() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onClick</span><span class="hljs-params">(View v)</span> </span>{<font></font>
<font></font>
                <span class="hljs-keyword">if</span> (myCameras[CAMERA1] != <span class="hljs-keyword">null</span>) {
                    <span class="hljs-keyword">if</span> (!myCameras[CAMERA1].isOpen()) myCameras[CAMERA1].openCamera();<font></font>
                }<font></font>
            }<font></font>
        });<font></font>
<font></font>
        mButtonRecordVideo.setOnClickListener(<span class="hljs-keyword">new</span> View.OnClickListener() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onClick</span><span class="hljs-params">(View v)</span> </span>{<font></font>
<font></font>
                <span class="hljs-keyword">if</span> ((myCameras[CAMERA1] != <span class="hljs-keyword">null</span>) &amp; mMediaRecorder != <span class="hljs-keyword">null</span>) {<font></font>
<font></font>
                    mMediaRecorder.start();<font></font>
<font></font>
                }<font></font>
            }<font></font>
        });<font></font>
<font></font>
<font></font>
        mButtonStopRecordVideo.setOnClickListener(<span class="hljs-keyword">new</span> View.OnClickListener() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onClick</span><span class="hljs-params">(View v)</span> </span>{<font></font>
<font></font>
                <span class="hljs-keyword">if</span> ((myCameras[CAMERA1] != <span class="hljs-keyword">null</span>) &amp; (mMediaRecorder != <span class="hljs-keyword">null</span>)) {<font></font>
                    myCameras[CAMERA1].stopRecordingVideo();<font></font>
                }<font></font>
<font></font>
<font></font>
            }<font></font>
        });<font></font>
<font></font>
<font></font>
        mCameraManager = (CameraManager) getSystemService(Context.CAMERA_SERVICE);<font></font>
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">//     </span><font></font>
<font></font>
            myCameras = <span class="hljs-keyword">new</span> CameraService[mCameraManager.getCameraIdList().length];<font></font>
<font></font>
<font></font>
            <span class="hljs-keyword">for</span> (String cameraID : mCameraManager.getCameraIdList()) {<font></font>
                Log.i(LOG_TAG, <span class="hljs-string">"cameraID: "</span> + cameraID);
                <span class="hljs-keyword">int</span> id = Integer.parseInt(cameraID);<font></font>
<font></font>
                <span class="hljs-comment">//    </span>
                myCameras[id] = <span class="hljs-keyword">new</span> CameraService(mCameraManager, cameraID);<font></font>
<font></font>
<font></font>
            }<font></font>
        } <span class="hljs-keyword">catch</span> (CameraAccessException e) {<font></font>
            Log.e(LOG_TAG, e.getMessage());<font></font>
            e.printStackTrace();<font></font>
        }<font></font>
<font></font>
<font></font>
        setUpMediaRecorder();<font></font>
<font></font>
<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setUpMediaRecorder</span><span class="hljs-params">()</span> </span>{<font></font>
<font></font>
        mMediaRecorder = <span class="hljs-keyword">new</span> MediaRecorder();<font></font>
<font></font>
        mMediaRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);<font></font>
        mMediaRecorder.setVideoSource(MediaRecorder.VideoSource.SURFACE);<font></font>
        mMediaRecorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);<font></font>
        mCurrentFile = <span class="hljs-keyword">new</span> File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DCIM), <span class="hljs-string">"test"</span>+count+<span class="hljs-string">".mp4"</span>);<font></font>
        mMediaRecorder.setOutputFile(mCurrentFile.getAbsolutePath());<font></font>
        CamcorderProfile profile = CamcorderProfile.get(CamcorderProfile.QUALITY_480P);<font></font>
        mMediaRecorder.setVideoFrameRate(profile.videoFrameRate);<font></font>
        mMediaRecorder.setVideoSize(profile.videoFrameWidth, profile.videoFrameHeight);<font></font>
        mMediaRecorder.setVideoEncodingBitRate(profile.videoBitRate);<font></font>
        mMediaRecorder.setVideoEncoder(MediaRecorder.VideoEncoder.H264);<font></font>
        mMediaRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AAC);<font></font>
        mMediaRecorder.setAudioEncodingBitRate(profile.audioBitRate);<font></font>
        mMediaRecorder.setAudioSamplingRate(profile.audioSampleRate);<font></font>
<font></font>
        <span class="hljs-keyword">try</span> {<font></font>
            mMediaRecorder.prepare();<font></font>
            Log.i(LOG_TAG, <span class="hljs-string">"   "</span>);<font></font>
<font></font>
        } <span class="hljs-keyword">catch</span> (Exception e) {<font></font>
            Log.i(LOG_TAG, <span class="hljs-string">"   "</span>);<font></font>
        }<font></font>
<font></font>
<font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CameraService</span> </span>{<font></font>
<font></font>
<font></font>
        <span class="hljs-keyword">private</span> String mCameraID;
        <span class="hljs-keyword">private</span> CameraDevice mCameraDevice = <span class="hljs-keyword">null</span>;
        <span class="hljs-keyword">private</span> CameraCaptureSession mSession;
        <span class="hljs-keyword">private</span> CaptureRequest.Builder mPreviewBuilder;<font></font>
<font></font>
<font></font>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">CameraService</span><span class="hljs-params">(CameraManager cameraManager, String cameraID)</span> </span>{<font></font>
<font></font>
            mCameraManager = cameraManager;<font></font>
            mCameraID = cameraID;<font></font>
<font></font>
        }<font></font>
<font></font>
<font></font>
        <span class="hljs-keyword">private</span> CameraDevice.StateCallback mCameraCallback = <span class="hljs-keyword">new</span> CameraDevice.StateCallback() {<font></font>
<font></font>
            <span class="hljs-meta">@Override</span>
            <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onOpened</span><span class="hljs-params">(CameraDevice camera)</span> </span>{<font></font>
                mCameraDevice = camera;<font></font>
                Log.i(LOG_TAG, <span class="hljs-string">"Open camera  with id:"</span> + mCameraDevice.getId());<font></font>
<font></font>
                startCameraPreviewSession();<font></font>
            }<font></font>
<font></font>
            <span class="hljs-meta">@Override</span>
            <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onDisconnected</span><span class="hljs-params">(CameraDevice camera)</span> </span>{<font></font>
                mCameraDevice.close();<font></font>
<font></font>
                Log.i(LOG_TAG, <span class="hljs-string">"disconnect camera  with id:"</span> + mCameraDevice.getId());<font></font>
                mCameraDevice = <span class="hljs-keyword">null</span>;<font></font>
            }<font></font>
<font></font>
            <span class="hljs-meta">@Override</span>
            <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onError</span><span class="hljs-params">(CameraDevice camera, <span class="hljs-keyword">int</span> error)</span> </span>{<font></font>
                Log.i(LOG_TAG, <span class="hljs-string">"error! camera id:"</span> + camera.getId() + <span class="hljs-string">" error:"</span> + error);<font></font>
            }<font></font>
        };<font></font>
<font></font>
        <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">startCameraPreviewSession</span><span class="hljs-params">()</span> </span>{<font></font>
<font></font>
            SurfaceTexture texture = mImageView.getSurfaceTexture();<font></font>
            texture.setDefaultBufferSize(<span class="hljs-number">640</span>, <span class="hljs-number">480</span>);<font></font>
            Surface surface = <span class="hljs-keyword">new</span> Surface(texture);<font></font>
<font></font>
<font></font>
            <span class="hljs-keyword">try</span> {<font></font>
<font></font>
                mPreviewBuilder = mCameraDevice.createCaptureRequest(CameraDevice.TEMPLATE_RECORD);<font></font>
<font></font>
                <span class="hljs-comment">/**Surface for the camera preview set up*/</span><font></font>
<font></font>
                mPreviewBuilder.addTarget(surface);<font></font>
<font></font>
                <span class="hljs-comment">/**MediaRecorder setup for surface*/</span><font></font>
<font></font>
                Surface recorderSurface = mMediaRecorder.getSurface();<font></font>
<font></font>
                mPreviewBuilder.addTarget(recorderSurface);<font></font>
<font></font>
                mCameraDevice.createCaptureSession(Arrays.asList(surface, mMediaRecorder.getSurface()),<font></font>
                        <span class="hljs-keyword">new</span> CameraCaptureSession.StateCallback() {<font></font>
<font></font>
                            <span class="hljs-meta">@Override</span>
                            <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onConfigured</span><span class="hljs-params">(CameraCaptureSession session)</span> </span>{<font></font>
                                mSession = session;<font></font>
<font></font>
                                <span class="hljs-keyword">try</span> {<font></font>
                                    mSession.setRepeatingRequest(mPreviewBuilder.build(), <span class="hljs-keyword">null</span>, mBackgroundHandler);<font></font>
                                } <span class="hljs-keyword">catch</span> (CameraAccessException e) {<font></font>
                                    e.printStackTrace();<font></font>
                                }<font></font>
                            }<font></font>
<font></font>
                            <span class="hljs-meta">@Override</span>
                            <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onConfigureFailed</span><span class="hljs-params">(CameraCaptureSession session)</span> </span>{<font></font>
                            }<font></font>
                        }, mBackgroundHandler);<font></font>
            } <span class="hljs-keyword">catch</span> (CameraAccessException e) {<font></font>
                e.printStackTrace();<font></font>
            }<font></font>
<font></font>
        }<font></font>
<font></font>
<font></font>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">stopRecordingVideo</span><span class="hljs-params">()</span> </span>{<font></font>
<font></font>
            <span class="hljs-keyword">try</span> {<font></font>
                mSession.stopRepeating();<font></font>
                mSession.abortCaptures();<font></font>
                mSession.close();<font></font>
            } <span class="hljs-keyword">catch</span> (CameraAccessException e) {<font></font>
                e.printStackTrace();<font></font>
            }<font></font>
<font></font>
            mMediaRecorder.stop();<font></font>
            mMediaRecorder.release();<font></font>
            count++;<font></font>
            setUpMediaRecorder();<font></font>
            startCameraPreviewSession();<font></font>
        }<font></font>
<font></font>
<font></font>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">isOpen</span><span class="hljs-params">()</span> </span>{
            <span class="hljs-keyword">if</span> (mCameraDevice == <span class="hljs-keyword">null</span>) {
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;<font></font>
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;<font></font>
            }<font></font>
        }<font></font>
<font></font>
<font></font>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">openCamera</span><span class="hljs-params">()</span> </span>{
            <span class="hljs-keyword">try</span> {<font></font>
<font></font>
                <span class="hljs-keyword">if</span> (checkSelfPermission(Manifest.permission.CAMERA) == PackageManager.PERMISSION_GRANTED) {<font></font>
<font></font>
                    mCameraManager.openCamera(mCameraID, mCameraCallback, mBackgroundHandler);<font></font>
<font></font>
                }<font></font>
<font></font>
<font></font>
            } <span class="hljs-keyword">catch</span> (CameraAccessException e) {<font></font>
                Log.i(LOG_TAG, e.getMessage());<font></font>
<font></font>
            }<font></font>
        }<font></font>
<font></font>
    }<font></font>
<font></font>
<font></font>
<font></font>
<font></font>
<font></font>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onPause</span><span class="hljs-params">()</span> </span>{<font></font>
<font></font>
        stopBackgroundThread();<font></font>
        <span class="hljs-keyword">super</span>.onPause();<font></font>
    }<font></font>
<font></font>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onResume</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">super</span>.onResume();<font></font>
        startBackgroundThread();<font></font>
<font></font>
    }<font></font>
<font></font>
<font></font>
}<font></font>
</code></pre><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãã‚Œã«ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’è¿½åŠ </font></font></b><div class="spoiler_text"><pre><code class="java hljs">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"utf-8"</span>?&gt;<font></font>
&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=<span class="hljs-string">"http://schemas.android.com/apk/res/android"</span>
    xmlns:app=<span class="hljs-string">"http://schemas.android.com/apk/res-auto"</span>
    xmlns:tools=<span class="hljs-string">"http://schemas.android.com/tools"</span>
    android:layout_width=<span class="hljs-string">"match_parent"</span>
    android:layout_height=<span class="hljs-string">"match_parent"</span>
    tools:context=<span class="hljs-string">".MainActivity"</span>&gt;<font></font>
<font></font>
    &lt;TextureView<font></font>
        android:id=<span class="hljs-string">"@+id/textureView"</span>
        android:layout_width=<span class="hljs-string">"356dp"</span>
        android:layout_height=<span class="hljs-string">"410dp"</span>
        android:layout_marginTop=<span class="hljs-string">"32dp"</span>
        app:layout_constraintEnd_toEndOf=<span class="hljs-string">"parent"</span>
        app:layout_constraintHorizontal_bias=<span class="hljs-string">"0.49"</span>
        app:layout_constraintStart_toStartOf=<span class="hljs-string">"parent"</span>
        app:layout_constraintTop_toTopOf=<span class="hljs-string">"parent"</span> /&gt;<font></font>
<font></font>
    &lt;LinearLayout<font></font>
        android:layout_width=<span class="hljs-string">"292dp"</span>
        android:layout_height=<span class="hljs-string">"145dp"</span>
        android:layout_marginStart=<span class="hljs-string">"16dp"</span>
        android:orientation=<span class="hljs-string">"vertical"</span>
        app:layout_constraintBottom_toBottomOf=<span class="hljs-string">"parent"</span>
        app:layout_constraintEnd_toEndOf=<span class="hljs-string">"parent"</span>
        app:layout_constraintStart_toStartOf=<span class="hljs-string">"parent"</span>
        app:layout_constraintTop_toBottomOf=<span class="hljs-string">"@+id/textureView"</span>
        app:layout_constraintVertical_bias=<span class="hljs-string">"0.537"</span>&gt;<font></font>
<font></font>
        &lt;Button<font></font>
            android:id=<span class="hljs-string">"@+id/button1"</span>
            android:layout_width=<span class="hljs-string">"match_parent"</span>
            android:layout_height=<span class="hljs-string">"wrap_content"</span>
            android:text=<span class="hljs-string">" "</span> /&gt;<font></font>
<font></font>
        &lt;Button<font></font>
            android:id=<span class="hljs-string">"@+id/button2"</span>
            android:layout_width=<span class="hljs-string">"match_parent"</span>
            android:layout_height=<span class="hljs-string">"wrap_content"</span>
            android:text=<span class="hljs-string">" "</span> /&gt;<font></font>
<font></font>
        &lt;Button<font></font>
            android:id=<span class="hljs-string">"@+id/button3"</span>
            android:layout_width=<span class="hljs-string">"match_parent"</span>
            android:layout_height=<span class="hljs-string">"wrap_content"</span>
            android:text=<span class="hljs-string">" "</span> /&gt;<font></font>
    &lt;/LinearLayout&gt;<font></font>
<font></font>
<font></font>
&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;<font></font>
<font></font>
</code></pre><br>
<br>
</div></div><br>
<br>
<img src="https://habrastorage.org/webt/lw/fx/lc/lwfxlcrhoz15zhw5qcwwj5fssp0.png"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãã—ã¦ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã«å°‘ã—è¿½åŠ </font></font></b><br>
<br>
<pre><code class="java hljs">&lt;uses-permission android:name=<span class="hljs-string">"android.permission.RECORD_AUDIO"</span>/&gt;<font></font>
<font></font>
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã™ã¹ã¦ãŒæ©Ÿèƒ½ã—ã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ­£å¸¸ã«æ›¸ãè¾¼ã¿ã¾ã™ã€‚</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å”¯ä¸€ã®ã“ã¨ã¯ã€ã°ã‹ã‹ã‚‰ã®ä¿è­·ãŒãªã„ã¨ã„ã†ã“ã¨ã§ã™ã€‚ãã®ãŸã‚ã€ç”»é¢ä¸Šã®ãƒœã‚¿ãƒ³ã‚’ãƒ©ãƒ³ãƒ€ãƒ ãªé †åºã§çªãã®ãŒä¸åˆç†ã§ã‚ã‚Œã°ã€ã™ã¹ã¦ã‚’å£Šã™ã“ã¨ãŒã§ãã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PS </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æŠ•ç¨¿ã®å…¬é–‹å¾Œã€å¥½å¥‡å¿ƒæ—ºç››ãªèª­è€…ã¯ã€ã€Œè¨˜éŒ²ã‚’çµ‚äº†ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ãŸå¾Œã€æ–°ã—ã„è¨˜éŒ²ã‚’ä½œæˆã™ã‚‹å‰ã«ã€ã‚«ãƒ¡ãƒ©ç”»åƒã«é¡•è‘—ãªé…ã‚ŒãŒå­˜åœ¨ã™ã‚‹ã“ã¨ã«æ°—ä»˜ãã¾ã—ãŸã€‚</font><font style="vertical-align: inherit;">ä¸€æ–¹ã€æ¨™æº–ã®Androidã‚«ãƒ¡ãƒ©ã§åŒã˜ã“ã¨ã‚’è¡ŒãŠã†ã¨ã™ã‚‹ã¨ã€é…å»¶ã¯è¦‹ã‚‰ã‚Œãšã€ã™ã¹ã¦ãŒéå¸¸ã«ã‚¹ãƒ ãƒ¼ã‚ºã«ãªã‚Šã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åˆ¤æ˜ã—ãŸã‚ˆã†ã«ã€é…å»¶ã¯2ã¤ã®ç†ç”±ã§ç™ºç”Ÿã—ã¾ã™ã€‚</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1ã¤ç›®ã¯ã€mSessionã‚’å†ä½œæˆã™ã‚‹ã“ã¨ã§ã™ã€‚</font><font style="vertical-align: inherit;">ã”å­˜çŸ¥ã®ã‚ˆã†ã«ã€ã‚«ãƒ¡ãƒ©ã®æ–°ã—ã„åˆæœŸåŒ–ã«ã¯æ™‚é–“ãŒã‹ã‹ã‚Šã¾ã™ã€‚</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2ã¤ç›®-ãƒ¡ã‚¤ãƒ³ã®æ™‚é–“é…å»¶ã¯ã€ãƒ¡ãƒ‡ã‚£ã‚¢ãƒ¬ã‚³ãƒ¼ãƒ€ãƒ¼ã®mMediaRecorder.stopï¼ˆï¼‰ã®åœæ­¢ãŒéåŒæœŸã§å®Ÿè¡Œã•ã‚Œãªã‹ã£ãŸã“ã¨ãŒåŸå› ã§ã—ãŸã€‚ãã—ã¦ç†è«–çš„ã«ã¯ã€ãã‚Œã‚’èƒŒæ™¯ã«ã™ã¹ãã§ã™ã€‚ã—ã‹ã—å®Ÿéš›ã«ã¯ã€mSessionã‚’å†ä½œæˆã™ã‚‹ã«ã¯ã¾ã mMediaRecorderã®æ–°ã—ã„ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãŒå¿…è¦ã§ã‚ã‚Šã€å¤ã„ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’åœæ­¢ã™ã‚‹ã¾ã§å–å¾—ã§ããªã„ãŸã‚ã€èƒŒæ™¯ã‚‚ã“ã“ã§ã¯å½¹ã«ç«‹ã¡ã¾ã›ã‚“ã€‚ã‚‚ã¡ã‚ã‚“ã€mMediaRecorder1ã‚’é–‰ã˜ãªãŒã‚‰ã€ç‰¹å®šã®mMediaRecorder2ã‚’å®Ÿè¡Œã—ã‚ˆã†ã¨ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ãŒã€ã“ã‚Œã¯ãƒ’ãƒ³ãƒ‰ã‚¥ãƒ¼æ•™ã§ä¿¡é ¼æ€§ã®ä½ã„ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã§ã™ã€‚</font></font><br>
<br>
<blockquote>    MediaRecorder   afaik          .<br>
<br>
   ,    :<br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">developer.android.com/reference/android/media/MediaRecorder.html</a><br>
<br>
         .<br>
</blockquote><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¤šåˆ†ã“ã‚Œã¯ã¾ã äº‹å®Ÿã§ã‚ã‚‹ã‹ã€å¤šåˆ†ãã‚Œä»¥é™çŠ¶æ³ãŒå¤‰ã‚ã£ãŸã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€ã„ãšã‚Œã«ã›ã‚ˆè§£æ±ºç­–ãŒã‚ã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">ä¸€æ–¹ã€ãã†ã§ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ–°ã—ã„è¨˜éŒ²ãŒå¿…è¦ã«ãªã‚‹ãŸã³ã«CameraPreviewSessionï¼ˆï¼‰ã‚’é–‰ã˜ãªã„ã‚ˆã†ã«ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã—ã‹ã—ã€ã“ã®å ´åˆã€ãƒ¡ãƒ‡ã‚£ã‚¢ãƒ¬ã‚³ãƒ¼ãƒ€ãƒ¼ã‚’åœæ­¢ã™ã‚‹ã¨ã€ãƒ¡ãƒ‡ã‚£ã‚¢ãƒ¬ã‚³ãƒ¼ãƒ€ãƒ¼ã¯è‡ªå‹•çš„ã«é–‰ã˜ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¨å…±ã«ã€ã€Œãƒ¡ãƒ‡ã‚£ã‚¢ãƒ¬ã‚³ãƒ¼ãƒ€ãƒ¼ã®è¡¨é¢ãŒå¤±ã‚ã‚Œã¾ã—ãŸã€ã¨ã‚ã–ã‘ã£ã¦æ›¸ãè¾¼ã¿ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãã‚Œã¯è«–ç†çš„ã ã£ãŸã®ã§ã€ç§ãŸã¡è‡ªèº«ãŒåœæ­¢ã—ã¦é–‰ã˜ã¾ã—ãŸã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã—ãŸãŒã£ã¦ã€ã“ã“ã§ã¯åˆ¥ã®ã‚µãƒ¼ãƒ•ã‚§ã‚¹ã‚’ä½¿ç”¨ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™-ãƒ©ãƒ†ãƒ³èªã®PersistentInputSurfaceï¼ˆï¼‰ã¾ãŸã¯ã€Œ</font><font style="vertical-align: inherit;">æ°¸ç¶šçš„ãªé ‘å›ºãª</font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚µãƒ¼ãƒ•ã‚§ã‚¹</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€ã€‚</font><font style="vertical-align: inherit;">ãƒ¡ãƒ‡ã‚£ã‚¢ãƒ¬ã‚³ãƒ¼ãƒ€ãƒ¼ãŒåœæ­¢ã—ã¦ã‚‚é–‰ã˜ã¾ã›ã‚“ãŒã€å¼•ãç¶šãå‹•ä½œã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ç¢ºã‹ã«ã€ã‚ˆã‚Šå…·ä½“çš„ãªå‡¦ç†ãŒå¿…è¦ã§ã™ï¼ˆè¨˜äº‹ã®ã‚³ãƒ¡ãƒ³ãƒˆã‚’å‚ç…§ï¼‰ã€‚ãŸã ã—ã€é…å»¶ãªãå‹•ä½œã—ã¾ã™ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ©ã‚°ã®ãªã„ã‚³ãƒ¼ãƒ‰ãƒãƒªã‚¢ãƒ³ãƒˆ</font></font></b><div class="spoiler_text"><pre><code class="java hljs"><span class="hljs-keyword">package</span> com.example.mediarecorder1;
<span class="hljs-keyword">import</span> androidx.appcompat.app.AppCompatActivity;
<span class="hljs-keyword">import</span> androidx.core.content.ContextCompat;
<span class="hljs-keyword">import</span> android.Manifest;
<span class="hljs-keyword">import</span> android.content.Context;
<span class="hljs-keyword">import</span> android.content.pm.PackageManager;
<span class="hljs-keyword">import</span> android.graphics.SurfaceTexture;
<span class="hljs-keyword">import</span> android.hardware.camera2.CameraAccessException;
<span class="hljs-keyword">import</span> android.hardware.camera2.CameraCaptureSession;
<span class="hljs-keyword">import</span> android.hardware.camera2.CameraDevice;
<span class="hljs-keyword">import</span> android.hardware.camera2.CameraManager;
<span class="hljs-keyword">import</span> android.hardware.camera2.CaptureRequest;
<span class="hljs-keyword">import</span> android.media.CamcorderProfile;
<span class="hljs-keyword">import</span> android.media.MediaCodec;
<span class="hljs-keyword">import</span> android.os.AsyncTask;
<span class="hljs-keyword">import</span> android.os.Bundle;
<span class="hljs-keyword">import</span> android.media.MediaRecorder;
<span class="hljs-keyword">import</span> android.os.Environment;
<span class="hljs-keyword">import</span> android.os.Handler;
<span class="hljs-keyword">import</span> android.os.HandlerThread;
<span class="hljs-keyword">import</span> android.util.Log;
<span class="hljs-keyword">import</span> android.view.Surface;
<span class="hljs-keyword">import</span> android.view.TextureView;
<span class="hljs-keyword">import</span> android.view.View;
<span class="hljs-keyword">import</span> android.widget.Button;
<span class="hljs-keyword">import</span> java.io.File;
<span class="hljs-keyword">import</span> java.util.Arrays;<font></font>
<font></font>
<font></font>
<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MainActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AppCompatActivity</span> </span>{<font></font>
<font></font>
    Surface recorderSurface =<span class="hljs-keyword">null</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String LOG_TAG = <span class="hljs-string">"myLogs"</span>;<font></font>
<font></font>
    CameraService[] myCameras = <span class="hljs-keyword">null</span>;<font></font>
<font></font>
    <span class="hljs-keyword">private</span> CameraManager mCameraManager = <span class="hljs-keyword">null</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> CAMERA1 = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> count =<span class="hljs-number">1</span>;<font></font>
<font></font>
    <span class="hljs-keyword">private</span> Button mButtonOpenCamera1 = <span class="hljs-keyword">null</span>;
    <span class="hljs-keyword">private</span> Button mButtonRecordVideo = <span class="hljs-keyword">null</span>;
    <span class="hljs-keyword">private</span> Button mButtonStopRecordVideo = <span class="hljs-keyword">null</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> TextureView mImageView = <span class="hljs-keyword">null</span>;
    <span class="hljs-keyword">private</span> HandlerThread mBackgroundThread;
    <span class="hljs-keyword">private</span> Handler mBackgroundHandler = <span class="hljs-keyword">null</span>;<font></font>
<font></font>
    <span class="hljs-keyword">private</span> File mCurrentFile;<font></font>
<font></font>
    <span class="hljs-keyword">private</span> MediaRecorder mMediaRecorder = <span class="hljs-keyword">null</span>;<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">startBackgroundThread</span><span class="hljs-params">()</span> </span>{<font></font>
        mBackgroundThread = <span class="hljs-keyword">new</span> HandlerThread(<span class="hljs-string">"CameraBackground"</span>);<font></font>
        mBackgroundThread.start();<font></font>
        mBackgroundHandler = <span class="hljs-keyword">new</span> Handler(mBackgroundThread.getLooper());<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">stopBackgroundThread</span><span class="hljs-params">()</span> </span>{<font></font>
        mBackgroundThread.quitSafely();<font></font>
        <span class="hljs-keyword">try</span> {<font></font>
            mBackgroundThread.join();<font></font>
            mBackgroundThread = <span class="hljs-keyword">null</span>;<font></font>
            mBackgroundHandler = <span class="hljs-keyword">null</span>;<font></font>
        } <span class="hljs-keyword">catch</span> (InterruptedException e) {<font></font>
            e.printStackTrace();<font></font>
        }<font></font>
    }<font></font>
<font></font>
<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(Bundle savedInstanceState)</span> </span>{
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState);<font></font>
        setContentView(R.layout.activity_main);<font></font>
<font></font>
<font></font>
        Log.d(LOG_TAG, <span class="hljs-string">" "</span>);
        <span class="hljs-keyword">if</span> (checkSelfPermission(Manifest.permission.CAMERA) != PackageManager.PERMISSION_GRANTED<font></font>
                ||<font></font>
                (ContextCompat.checkSelfPermission(MainActivity.<span class="hljs-keyword">this</span>, Manifest.permission.WRITE_EXTERNAL_STORAGE) != PackageManager.PERMISSION_GRANTED)<font></font>
                ||<font></font>
                (ContextCompat.checkSelfPermission(MainActivity.<span class="hljs-keyword">this</span>, Manifest.permission.RECORD_AUDIO) != PackageManager.PERMISSION_GRANTED)<font></font>
        ) {<font></font>
            requestPermissions(<span class="hljs-keyword">new</span> String[]{Manifest.permission.CAMERA, Manifest.permission.WRITE_EXTERNAL_STORAGE, Manifest.permission.RECORD_AUDIO}, <span class="hljs-number">1</span>);<font></font>
        }<font></font>
<font></font>
<font></font>
        mButtonOpenCamera1 = findViewById(R.id.button1);<font></font>
        mButtonRecordVideo = findViewById(R.id.button2);<font></font>
        mButtonStopRecordVideo = findViewById(R.id.button3);<font></font>
        mImageView = findViewById(R.id.textureView);<font></font>
<font></font>
        mButtonOpenCamera1.setOnClickListener(<span class="hljs-keyword">new</span> View.OnClickListener() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onClick</span><span class="hljs-params">(View v)</span> </span>{<font></font>
<font></font>
                <span class="hljs-keyword">if</span> (myCameras[CAMERA1] != <span class="hljs-keyword">null</span>) {
                    <span class="hljs-keyword">if</span> (!myCameras[CAMERA1].isOpen()) myCameras[CAMERA1].openCamera();<font></font>
                }<font></font>
            }<font></font>
        });<font></font>
<font></font>
        mButtonRecordVideo.setOnClickListener(<span class="hljs-keyword">new</span> View.OnClickListener() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onClick</span><span class="hljs-params">(View v)</span> </span>{<font></font>
<font></font>
                <span class="hljs-keyword">if</span> ((myCameras[CAMERA1] != <span class="hljs-keyword">null</span>) &amp; mMediaRecorder != <span class="hljs-keyword">null</span>) {<font></font>
<font></font>
<font></font>
<font></font>
                    mMediaRecorder.start();<font></font>
                    Log.i(LOG_TAG, <span class="hljs-string">"START"</span>);<font></font>
<font></font>
                }<font></font>
            }<font></font>
        });<font></font>
<font></font>
<font></font>
        mButtonStopRecordVideo.setOnClickListener(<span class="hljs-keyword">new</span> View.OnClickListener() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onClick</span><span class="hljs-params">(View v)</span> </span>{<font></font>
<font></font>
                <span class="hljs-keyword">if</span> ((myCameras[CAMERA1] != <span class="hljs-keyword">null</span>) &amp; (mMediaRecorder != <span class="hljs-keyword">null</span>)) {<font></font>
                    myCameras[CAMERA1].stopRecordingVideo();<font></font>
                    Log.i(LOG_TAG, <span class="hljs-string">"STOP"</span>);<font></font>
                }<font></font>
<font></font>
<font></font>
            }<font></font>
        });<font></font>
<font></font>
<font></font>
        mCameraManager = (CameraManager) getSystemService(Context.CAMERA_SERVICE);<font></font>
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">//     </span><font></font>
<font></font>
            myCameras = <span class="hljs-keyword">new</span> CameraService[mCameraManager.getCameraIdList().length];<font></font>
<font></font>
<font></font>
            <span class="hljs-keyword">for</span> (String cameraID : mCameraManager.getCameraIdList()) {<font></font>
                Log.i(LOG_TAG, <span class="hljs-string">"cameraID: "</span> + cameraID);
                <span class="hljs-keyword">int</span> id = Integer.parseInt(cameraID);<font></font>
<font></font>
                <span class="hljs-comment">//    </span>
                myCameras[id] = <span class="hljs-keyword">new</span> CameraService(mCameraManager, cameraID);<font></font>
<font></font>
<font></font>
            }<font></font>
        } <span class="hljs-keyword">catch</span> (CameraAccessException e) {<font></font>
            Log.e(LOG_TAG, e.getMessage());<font></font>
            e.printStackTrace();<font></font>
        }<font></font>
<font></font>
<font></font>
        setUpMediaRecorder();<font></font>
<font></font>
<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setUpMediaRecorder</span><span class="hljs-params">()</span> </span>{<font></font>
<font></font>
        mMediaRecorder = <span class="hljs-keyword">new</span> MediaRecorder();<font></font>
<font></font>
        mMediaRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);<font></font>
        mMediaRecorder.setVideoSource(MediaRecorder.VideoSource.SURFACE);<font></font>
        mMediaRecorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);<font></font>
        mCurrentFile = <span class="hljs-keyword">new</span> File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DCIM), <span class="hljs-string">"test"</span>+count+<span class="hljs-string">".mp4"</span>);<font></font>
        mMediaRecorder.setOutputFile(mCurrentFile.getAbsolutePath());<font></font>
        CamcorderProfile profile = CamcorderProfile.get(CamcorderProfile.QUALITY_480P);<font></font>
        mMediaRecorder.setVideoSize(<span class="hljs-number">640</span>, <span class="hljs-number">480</span>);<font></font>
        mMediaRecorder.setVideoFrameRate(profile.videoFrameRate);<font></font>
        mMediaRecorder.setVideoSize(profile.videoFrameWidth, profile.videoFrameHeight);<font></font>
        mMediaRecorder.setVideoEncodingBitRate(profile.videoBitRate);<font></font>
        mMediaRecorder.setVideoEncoder(MediaRecorder.VideoEncoder.H264);<font></font>
        mMediaRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AAC);<font></font>
        mMediaRecorder.setAudioEncodingBitRate(profile.audioBitRate);<font></font>
        mMediaRecorder.setAudioSamplingRate(profile.audioSampleRate);<font></font>
<font></font>
<font></font>
<font></font>
<font></font>
<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setUpMediaRecorder2</span><span class="hljs-params">()</span> </span>{<font></font>
<font></font>
        mMediaRecorder = <span class="hljs-keyword">new</span> MediaRecorder();<font></font>
<font></font>
        mMediaRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);<font></font>
        mMediaRecorder.setVideoSource(MediaRecorder.VideoSource.SURFACE);<font></font>
<font></font>
        mMediaRecorder.setInputSurface(recorderSurface);<font></font>
<font></font>
<font></font>
        mMediaRecorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);<font></font>
        mCurrentFile = <span class="hljs-keyword">new</span> File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DCIM), <span class="hljs-string">"test"</span>+count+<span class="hljs-string">".mp4"</span>);<font></font>
        mMediaRecorder.setOutputFile(mCurrentFile.getAbsolutePath());<font></font>
        mMediaRecorder.setVideoSize(<span class="hljs-number">640</span>, <span class="hljs-number">480</span>);<font></font>
        CamcorderProfile profile = CamcorderProfile.get(CamcorderProfile.QUALITY_480P);<font></font>
        mMediaRecorder.setVideoFrameRate(profile.videoFrameRate);<font></font>
        mMediaRecorder.setVideoSize(profile.videoFrameWidth, profile.videoFrameHeight);<font></font>
        mMediaRecorder.setVideoEncodingBitRate(profile.videoBitRate);<font></font>
        mMediaRecorder.setVideoEncoder(MediaRecorder.VideoEncoder.H264);<font></font>
        mMediaRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AAC);<font></font>
        mMediaRecorder.setAudioEncodingBitRate(profile.audioBitRate);<font></font>
        mMediaRecorder.setAudioSamplingRate(profile.audioSampleRate);<font></font>
<font></font>
<font></font>
<font></font>
        <span class="hljs-keyword">try</span> {<font></font>
            mMediaRecorder.prepare();<font></font>
            Log.i(LOG_TAG, <span class="hljs-string">"   2"</span>);<font></font>
<font></font>
        } <span class="hljs-keyword">catch</span> (Exception e) {<font></font>
            Log.i(LOG_TAG, <span class="hljs-string">"   "</span>);<font></font>
        }<font></font>
<font></font>
<font></font>
    }<font></font>
<font></font>
<font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CameraService</span> </span>{<font></font>
<font></font>
<font></font>
        <span class="hljs-keyword">private</span> String mCameraID;
        <span class="hljs-keyword">private</span> CameraDevice mCameraDevice = <span class="hljs-keyword">null</span>;
        <span class="hljs-keyword">private</span> CameraCaptureSession mSession;
        <span class="hljs-keyword">private</span> CaptureRequest.Builder mPreviewBuilder;<font></font>
<font></font>
<font></font>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">CameraService</span><span class="hljs-params">(CameraManager cameraManager, String cameraID)</span> </span>{<font></font>
<font></font>
            mCameraManager = cameraManager;<font></font>
            mCameraID = cameraID;<font></font>
<font></font>
        }<font></font>
<font></font>
<font></font>
        <span class="hljs-keyword">private</span> CameraDevice.StateCallback mCameraCallback = <span class="hljs-keyword">new</span> CameraDevice.StateCallback() {<font></font>
<font></font>
            <span class="hljs-meta">@Override</span>
            <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onOpened</span><span class="hljs-params">(CameraDevice camera)</span> </span>{<font></font>
                mCameraDevice = camera;<font></font>
                Log.i(LOG_TAG, <span class="hljs-string">"Open camera  with id:"</span> + mCameraDevice.getId());<font></font>
<font></font>
                startCameraPreviewSession();<font></font>
            }<font></font>
<font></font>
            <span class="hljs-meta">@Override</span>
            <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onDisconnected</span><span class="hljs-params">(CameraDevice camera)</span> </span>{<font></font>
                mCameraDevice.close();<font></font>
<font></font>
                Log.i(LOG_TAG, <span class="hljs-string">"disconnect camera  with id:"</span> + mCameraDevice.getId());<font></font>
                mCameraDevice = <span class="hljs-keyword">null</span>;<font></font>
            }<font></font>
<font></font>
            <span class="hljs-meta">@Override</span>
            <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onError</span><span class="hljs-params">(CameraDevice camera, <span class="hljs-keyword">int</span> error)</span> </span>{<font></font>
                Log.i(LOG_TAG, <span class="hljs-string">"error! camera id:"</span> + camera.getId() + <span class="hljs-string">" error:"</span> + error);<font></font>
            }<font></font>
        };<font></font>
<font></font>
        <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">startCameraPreviewSession</span><span class="hljs-params">()</span> </span>{<font></font>
<font></font>
            SurfaceTexture texture = mImageView.getSurfaceTexture();<font></font>
            texture.setDefaultBufferSize(<span class="hljs-number">640</span>, <span class="hljs-number">480</span>);<font></font>
            Surface surface = <span class="hljs-keyword">new</span> Surface(texture);<font></font>
<font></font>
<font></font>
            <span class="hljs-keyword">try</span> {<font></font>
<font></font>
                mPreviewBuilder = mCameraDevice.createCaptureRequest(CameraDevice.TEMPLATE_PREVIEW);<font></font>
<font></font>
                <span class="hljs-comment">/**Surface for the camera preview set up*/</span><font></font>
<font></font>
                mPreviewBuilder.addTarget(surface);<font></font>
<font></font>
                <span class="hljs-comment">/**MediaRecorder setup for surface*/</span><font></font>
<font></font>
<font></font>
              <span class="hljs-comment">//  Surface recorderSurface = mMediaRecorder.getSurface();</span><font></font>
<font></font>
                recorderSurface=MediaCodec.createPersistentInputSurface();<font></font>
                mMediaRecorder.setInputSurface(recorderSurface);<font></font>
<font></font>
<font></font>
<font></font>
                <span class="hljs-keyword">try</span> {<font></font>
                    mMediaRecorder.prepare();<font></font>
                    Log.i(LOG_TAG, <span class="hljs-string">"   "</span>);<font></font>
<font></font>
                } <span class="hljs-keyword">catch</span> (Exception e) {<font></font>
                    Log.i(LOG_TAG, <span class="hljs-string">"   "</span>);<font></font>
                }<font></font>
                mPreviewBuilder.addTarget(recorderSurface);<font></font>
<font></font>
                mCameraDevice.createCaptureSession(Arrays.asList(surface,recorderSurface),<font></font>
                        <span class="hljs-keyword">new</span> CameraCaptureSession.StateCallback() {<font></font>
<font></font>
                            <span class="hljs-meta">@Override</span>
                            <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onConfigured</span><span class="hljs-params">(CameraCaptureSession session)</span> </span>{<font></font>
                                mSession = session;<font></font>
<font></font>
                                <span class="hljs-keyword">try</span> {<font></font>
                                    mSession.setRepeatingRequest(mPreviewBuilder.build(), <span class="hljs-keyword">null</span>, mBackgroundHandler);<font></font>
                                } <span class="hljs-keyword">catch</span> (CameraAccessException e) {<font></font>
                                    e.printStackTrace();<font></font>
                                }<font></font>
                            }<font></font>
<font></font>
                            <span class="hljs-meta">@Override</span>
                            <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onConfigureFailed</span><span class="hljs-params">(CameraCaptureSession session)</span> </span>{<font></font>
                            }<font></font>
                        }, mBackgroundHandler);<font></font>
            } <span class="hljs-keyword">catch</span> (CameraAccessException e) {<font></font>
                e.printStackTrace();<font></font>
            }<font></font>
<font></font>
        }<font></font>
<font></font>
<font></font>
<font></font>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">stopRecordingVideo</span><span class="hljs-params">()</span> </span>{<font></font>
<font></font>
<font></font>
<font></font>
<font></font>
            count++;<font></font>
            MyTask mt = <span class="hljs-keyword">new</span> MyTask();<font></font>
            mt.execute();<font></font>
<font></font>
<font></font>
        }<font></font>
<font></font>
<font></font>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">isOpen</span><span class="hljs-params">()</span> </span>{
            <span class="hljs-keyword">if</span> (mCameraDevice == <span class="hljs-keyword">null</span>) {
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;<font></font>
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;<font></font>
            }<font></font>
        }<font></font>
<font></font>
<font></font>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">openCamera</span><span class="hljs-params">()</span> </span>{
            <span class="hljs-keyword">try</span> {<font></font>
<font></font>
                <span class="hljs-keyword">if</span> (checkSelfPermission(Manifest.permission.CAMERA) == PackageManager.PERMISSION_GRANTED) {<font></font>
<font></font>
                    mCameraManager.openCamera(mCameraID, mCameraCallback, mBackgroundHandler);<font></font>
<font></font>
                }<font></font>
<font></font>
<font></font>
            } <span class="hljs-keyword">catch</span> (CameraAccessException e) {<font></font>
                Log.i(LOG_TAG, e.getMessage());<font></font>
<font></font>
            }<font></font>
        }<font></font>
<font></font>
    }<font></font>
<font></font>
<font></font>
<font></font>
<font></font>
<font></font>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onPause</span><span class="hljs-params">()</span> </span>{<font></font>
<font></font>
        stopBackgroundThread();<font></font>
        <span class="hljs-keyword">super</span>.onPause();<font></font>
    }<font></font>
<font></font>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onResume</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">super</span>.onResume();<font></font>
        startBackgroundThread();<font></font>
<font></font>
    }<font></font>
<font></font>
<font></font>
    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyTask</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AsyncTask</span>&lt;<span class="hljs-title">Void</span>, <span class="hljs-title">Void</span>, <span class="hljs-title">Void</span>&gt; </span>{<font></font>
<font></font>
        <span class="hljs-meta">@Override</span>
        <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onPreExecute</span><span class="hljs-params">()</span> </span>{<font></font>
<font></font>
        }<font></font>
<font></font>
        <span class="hljs-meta">@Override</span>
        <span class="hljs-function"><span class="hljs-keyword">protected</span> Void <span class="hljs-title">doInBackground</span><span class="hljs-params">(Void... params)</span> </span>{<font></font>
            mMediaRecorder.stop();<font></font>
            mMediaRecorder.release();<font></font>
            setUpMediaRecorder2();<font></font>
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;<font></font>
        }<font></font>
<font></font>
        <span class="hljs-meta">@Override</span>
        <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onPostExecute</span><span class="hljs-params">(Void result)</span> </span>{<font></font>
<font></font>
        }<font></font>
    }<font></font>
<font></font>
<font></font>
<font></font>
<font></font>
}<font></font>
<font></font>
<font></font>
</code></pre><br>
</div></div></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja471756/index.html">ã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•æ–¹æ³•</a></li>
<li><a href="../ja471760/index.html">ã‚¨ãƒ‰ãƒ¯ãƒ¼ãƒ‰ã‚¹ãƒãƒ¼ãƒ‡ãƒ³ï¼šæˆ¦å ´-æš—å·åŒ–</a></li>
<li><a href="../ja471766/index.html">Kotlin / Javaã‚¨ãƒ©ãƒ¼å‡¦ç†ï¼šãã‚Œã‚’æ­£ã—ãè¡Œã†æ–¹æ³•ï¼Ÿ</a></li>
<li><a href="../ja471770/index.html">ãƒ“ãƒƒã‚°ãƒ‡ãƒ¼ã‚¿ãƒ„ãƒ¼ãƒ«ã®ç´¹ä»‹ï¼šIntelliJ IDEAã§ã®SparkãŠã‚ˆã³Zeppelinãƒãƒ¼ãƒˆãƒ–ãƒƒã‚¯ã®ã‚µãƒãƒ¼ãƒˆ</a></li>
<li><a href="../ja471772/index.html">Javaã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®èµ·å‹•ã¨é–‹ç™ºã€JVMã§ã®ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã€å®Ÿè¡Œã®ãŸã‚ã®ãƒ„ãƒ¼ãƒ«</a></li>
<li><a href="../ja471776/index.html">Laravelï¼šåŸºæœ¬çš„ãªæ¦‚å¿µã‚’èª¬æ˜ã—ã¦ãã ã•ã„ã€‚ãƒ‘ãƒ¼ãƒˆ2ï¼šç·´ç¿’</a></li>
<li><a href="../ja471778/index.html">HackQuest 2019ã§Micosoft Lunixã‚’å£Šã™</a></li>
<li><a href="../ja471792/index.html">ã‚¦ã‚£ã‚¶ãƒ¼ãƒ‰ã¯ã€Œé€šå¸¸ã®å¥‡è·¡ã€ã®ã©ã“ã‹ã‚‰æ¥ãŸã®ã§ã™ã‹</a></li>
<li><a href="../ja471794/index.html">ãƒ•ãƒ©ãƒƒãƒˆã‚·ãƒ¼ãƒªãƒ³ã‚°ãƒã‚¤ã‚¯ã®æ™‚ä»£</a></li>
<li><a href="../ja471796/index.html">å°‘ã—ã®çµŒé¨“-å¤šãã®ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼ï¼šãƒãƒ¼ãƒ ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼ã®å®Ÿæ–½æ–¹æ³•</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>