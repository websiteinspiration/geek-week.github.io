<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🎋 🧒 🥑 DapはWeb用のもう1つのジェットエンジンです。全然違う 🤶🏾 👩🏾‍🤝‍👩🏽 🕺🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="特にWebフロントエンドを作成するための反応ルールの興味深い珍しい言語であるdapについてお話します。
 
 シードの簡単なタスク：特定のユーザーのリストを取得し（jsonplaceholder.typicode.comから提供されたテストデータを使用します）、それらの名前を通常のhtmlリストに表...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>DapはWeb用のもう1つのジェットエンジンです。全然違う</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/478330/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">特にWebフロントエンドを作成するための反応ルールの興味深い珍しい言語であるdapについてお話します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
シードの簡単なタスク：特定のユーザーのリストを取得し（</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jsonplaceholder.typicode.com</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">から提供されたテストデータを使用し</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">ます</font></a><font style="vertical-align: inherit;">）、それらの名前を通常のhtmlリストに表示します。ユーザー名をクリックすると、そのIDの付いたアラートが表示されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
もちろん、これはReact、Angular、Vueで簡単に実行できます。質問：</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">どのよう</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">やすいですか？ dapでは、これは次のように行われます。</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-string">'UL.users'</span>.d(<span class="hljs-string">"* :query`https://jsonplaceholder.typicode.com/users"</span>
 ,<span class="hljs-string">'LI'</span>.d(<span class="hljs-string">"! .name"</span>).ui(<span class="hljs-string">"? .id:alert"</span>)<font></font>
)<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
（*これ以降のdapの例は、サンドボックス</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dap.js.org/test.html</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">でインタラクティブにテストできます</font><font style="vertical-align: inherit;">）</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、最初に思いついた簡単な</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">タスク</font></a><font style="vertical-align: inherit;">であり、簡単な解決方法です。</font><font style="vertical-align: inherit;">クラス、コンポーネント、その他の儀式の小道具を大騒ぎせずに、「額」というdapに書くのが便利です。</font><font style="vertical-align: inherit;">私が見るもの、私は歌います。</font><font style="vertical-align: inherit;">しかし、私はJavaScriptやその派生語ではなく、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dapルール</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の言語で「歌っている」ので、</font><font style="vertical-align: inherit;">要素間の反応的な依存関係の単純で簡潔な説明に特化しています。</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ただし、上記の例では、まだ依存関係はありません。</font><font style="vertical-align: inherit;">しかし〜がある：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"></font><code>*</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">データを反復する</font><font style="vertical-align: inherit;">演算子</font></font></li>
<li><font style="vertical-align: inherit;"></font><code>:query</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">urlから受信したデータへの非同期「変換」のため</font><font style="vertical-align: inherit;">のコンバーター</font><font style="vertical-align: inherit;">、</font></font></li>
<li><font style="vertical-align: inherit;"></font><code>!</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">生成された要素に「印刷」するための</font><font style="vertical-align: inherit;">演算子</font></font></li>
<li><font style="vertical-align: inherit;"></font><code>alert</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">任意の値を魔法のように変換して警告する</font><font style="vertical-align: inherit;">コンバーター</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
HTMLに精通している場合は、ULとLIという言葉がおそらくあなたに知られています。</font><font style="vertical-align: inherit;">はい、これらはそれぞれ、順序付けられていないリストとリストアイテムのタグです。</font><font style="vertical-align: inherit;">また、CSSに慣れている場合は、UL.users表記の意味を理解する必要があります。これは「users」クラスを持つUL要素です。</font><font style="vertical-align: inherit;">これはHTML </font></font><code>&lt;UL class="users"&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">で</font><font style="vertical-align: inherit;">記述されますが</font><font style="vertical-align: inherit;">、属性や山かっこでのこれらの困難は必要ありません。dapはCSSとよく似た簡潔な表記を使用します。</font><font style="vertical-align: inherit;">この表記法では、必要に応じて属性を使用できますが、たとえば</font></font><code>'FORM action=send.php method=post'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ちなみに、この例はプレーンなJavaScriptで記述されており、DAPルール自体は単なる文字列であることに気付きましたか？また、要素の署名（「タグ」）も文字列で、単一引用符で囲みます。はい、dapアプリケーションのコードは異常に見えますが、使用する準備ができている純粋なjavascriptです：新しいファング言語のソースコードから変換する必要はありません（もちろん、必要に応じて、これらのファッショナブルな言語の使用を妨げることはありません）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
依存関係を追加してタスクを少し複雑にしてみましょう。ユーザー名をクリックすると、彼のIDと名前がH2要素に大きく表示され、それらを以下のメールと、から取得したすべての「投稿」にするとし</font></font><code>/posts?userId={id  }</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-string">'heroes'</span>.d(<span class="hljs-string">"$user="</span> <span class="hljs-comment">//  $user  </span><font></font>
<font></font>
 ,<span class="hljs-string">'UL.users'</span>.d(<span class="hljs-string">"* :query`https://jsonplaceholder.typicode.com/users"</span> <span class="hljs-comment">//     </span>
  ,<span class="hljs-string">'LI'</span> .d(<span class="hljs-string">"! .name"</span>) <span class="hljs-comment">//    .name</span>
   .ui(<span class="hljs-string">"$user=$"</span>) <span class="hljs-comment">//     </span><font></font>
 )<font></font>
 <font></font>
 ,<span class="hljs-string">'details'</span>.d(<span class="hljs-string">"*@ $user"</span> <span class="hljs-comment">//   $user  :</span>
  ,<span class="hljs-string">'H2'</span>.d(<span class="hljs-string">"! .id `: .name"</span>) <span class="hljs-comment">//   .id  .name,</span>
  ,<span class="hljs-string">'A'</span>.d(<span class="hljs-string">"!! .email@ (`mailto: .email)concat@href"</span>) <span class="hljs-comment">//     .email,</span><font></font>
  <font></font>
  ,<span class="hljs-string">'posts'</span>.d(<span class="hljs-string">"* (`https://jsonplaceholder.typicode.com/posts? .id@userId )uri:query"</span> <span class="hljs-comment">//    </span>
   ,<span class="hljs-string">'H3'</span>.d(<span class="hljs-string">"! .title"</span>)<font></font>
   ,<span class="hljs-string">'p'</span>.d(<span class="hljs-string">"! .body"</span>)<font></font>
  )<font></font>
 )<font></font>
)<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここでは、</font><font style="vertical-align: inherit;">ユーザーが選択されて</font><font style="vertical-align: inherit;">いる要素</font></font><code>'details'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（HTML変換では</font></font><code>&lt;DIV class="details"&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">のコンテンツに既に依存して</font><font style="vertical-align: inherit;">います。したがって、選択されたユーザーは状態変数です。 DAPルールのこのような変数は、プレフィックスによって示されます</font></font><code>$</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（「状態」のsなど）。 LI要素のいずれかをクリックすると、変数の内容が変わり</font></font><code>$user</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、要素が</font></font><code>'details'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">自動的に応答して更新されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
dapでは、プログラム構造により、状態モデルとユーザーインタラクションのモデル（表示と反応）の両方が即座に決定されます。これにより、美しく簡潔で理解しやすいコードを記述できますが、アプリケーションの階層構造を明確にする必要があります。個人的には、私はこの要件を有用な制限だと考えています。これは、アプリケーションロジックをより注意深く調査し、論理的な不整合を取り除くために役立ちます（そして役立つでしょう）。</font><font style="vertical-align: inherit;">アップグレードが必要であることを</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
どのようにして</font></font><code>'details'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">知るのですか？それは非常に単純です。その生成規則には変数への呼び出しが</font></font><code>$user</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">あり、LI要素の反応規則では、この変数が変更されるだけです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
生成ルール-メソッドを使用して指定されたもの</font></font><code>.d</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-は、エレメント構築フェーズで実行されます。反応ルールはメソッドによって設定されます</font></font><code>.ui</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ユーザーがアイテムを操作したときに実行されます。これらは、最も一般的に使用される2つのタイプのルールです。他にもいくつかのタイプがありますが、それらについては後で説明します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DAPルールの構文は非常に具体的です。おなじみのCライクな構文とは何の関係もないので、最初は奇妙で理解しにくいように見えるかもしれません。しかし、実際には、それは非常に単純で、この言葉を恐れていません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
言語にキーワードはありません。文字</font></font><code>.,$@:`(){}</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">とスペースは</font><font style="vertical-align: inherit;">予約されて</font><font style="vertical-align: inherit;">おり、その他はすべて自由に使用できます。特に、識別子は、たとえば、文字</font></font><code>!?*</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">などを</font><font style="vertical-align: inherit;">含むか、全体で構成できます</font><font style="vertical-align: inherit;">。これは誰かにはワイルドに見えるかもしれませんが、実際には非常に便利です。たとえば、最も一般的に使用されるDAPは演算子です（ちなみに、演算子の名前も識別子です）。</font></font><br>
<br>
<ul>
<li><code>!</code> —    , -  <i>print</i></li>
<li><code>!!</code> —   () , -  <i>setAttribute</i></li>
<li><code>?</code> —  , -  <i>if</i></li>
<li><code>*</code> — ,  , -  <i>for</i></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
通常の演算子の名前は、意図的に非言語として選択されます。第一に、彼らはただ短いです-ただ一つのキャラクター。第二に、それらは、例えば、定数や変数の名前とよく区別できます。そして最後に、それらはロケールに対して中立であり、少なくとも英語、少なくともロシア語、少なくとも中国語（どの言語でも使用可能）のすべての各国語のプログラムで同様に適切に見えます（良い、javascriptおよびunicodeはこれを許可します）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、あなたが座って愚かなときに、変数の名前を発明する状況に遭遇しなかったのは誰ですか？信じられないかもしれませんが、私のdap-codeでは、ほとんどすべての「ブール」（はい/いいえ）変数に名前が付けられています</font></font><code>$?</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（ここで</font></font><code>$</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-これは状態変数の接頭辞であり、名前自体は単に疑問符で構成されます）。私は彼らの名前を思いつくのが面倒なので、それらをいくつかの場所に印刷します。同時に、この変数がそれぞれの場所で何を意味するかを理解することは決して困難ではありません。DAPコードのコンパクトさと可視性により、そのような変数のスコープ全体は通常数行に収まり、何が何であるかは常に明確です。</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-string">'toggle'</span>.d(<span class="hljs-string">"$?="</span> <span class="hljs-comment">//  $?    '' (  false)</span>
 ,<span class="hljs-string">'BUTTON'</span>.d(<span class="hljs-string">"! `Toggle"</span>).ui(<span class="hljs-string">"$?=$?:!"</span>) <span class="hljs-comment">//   $?,   x=!x</span>
 ,<span class="hljs-string">'on'</span>.d(<span class="hljs-string">"? $?; ! `✓"</span>) <span class="hljs-comment">//    $?  </span><font></font>
)<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
もちろん、これは私の個人的なスタイルです。エンタープライズJavaの世界から来た場合でも、心配しないでください。任意の場所で長い識別子を使用することを誰も禁止しません。リテラルについて言えないこと。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DAPルールのリテラルは、プレフィックスによって示されます</font></font><code>`</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（バックティック、キーボードでは通常Escキーの下）。たとえば、上記の例のBUTTON要素は、リテラルで署名されてい</font></font><code>`Toggle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。他の「通常の」言語とは異なり、たとえば、文字列リテラルは引用符で囲まれ、適切な量のテキストを含めることができます。Dapルールでは、リテラルは片側のみでフレーム化されます（これにより接頭辞が</font></font><code>`</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）、スペースを含めることはできません。</font><font style="vertical-align: inherit;">スペースは、ルールのトークン（「引数」）の区切り文字として機能します。</font><font style="vertical-align: inherit;">どうしてですか？</font><font style="vertical-align: inherit;">しかし、このように。</font><font style="vertical-align: inherit;">dap内のリテラルは、終末論的なフラグメントを対象としたものではなく、さまざまな短いコード（番号、ラベル、ある種のデバッグスタブなど）を対象としています。</font><font style="vertical-align: inherit;">テキストデータ（ちなみに、他の任意のデータ）は、特殊なディクショナリのセクション</font></font><code>.DICT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（もちろん、「ディクショナリ」から）</font><font style="vertical-align: inherit;">に定数の形式で保存する必要があります</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-string">'whoami'</span>.d(<span class="hljs-string">"$fruit="</span>
 ,<span class="hljs-string">'H3'</span>.d(<span class="hljs-string">"! ($fruit msg.fruit-selected msg.please-select)?! $fruit"</span>)<font></font>
 ,<span class="hljs-string">'UL'</span>.d(<span class="hljs-string">"* fruit"</span>
  ,<span class="hljs-string">'LI'</span>.d(<span class="hljs-string">"! .fruit"</span>).ui(<span class="hljs-string">"$fruit=."</span>)<font></font>
 )<font></font>
)<font></font>
.DICT({<font></font>
 <span class="hljs-attr">msg</span> :{
  <span class="hljs-string">"please-select"</span>: <span class="hljs-string">" ?     ?"</span>,
  <span class="hljs-string">"fruit-selected"</span>: <span class="hljs-string">" — "</span><font></font>
 },<font></font>
 <span class="hljs-attr">fruit</span> :[<span class="hljs-string">",  "</span>, <span class="hljs-string">" ,  "</span>, <span class="hljs-string">"C , , "</span>, <span class="hljs-string">",   "</span>]<font></font>
})<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべてのテキストをディクショナリに保存することの明らかな利点は、たとえば、他の言語でのその後のローカライズが容易になることです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ただし、ディクショナリにはテキストデータだけでなく、一般に再利用されるエンティティも格納されます。</font><font style="vertical-align: inherit;">他のフレームワークで呼び出される、パラメーター化可能なテンプレートまたは「コンポーネント」を含みます。</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-string">'multiselect'</span>.d(<span class="hljs-string">"$color= $size="</span>
 ,<span class="hljs-string">'H3'</span>.d(<span class="hljs-string">"! (($color $size)? (selected $color $size)spaced not-selected)?!"</span>)<font></font>
 ,<span class="hljs-string">'size'</span>.d(<span class="hljs-string">"$!=select(sizes@options)"</span>).u(<span class="hljs-string">"$size=$!.value"</span>) <span class="hljs-comment">//   select    sizes</span>
 ,<span class="hljs-string">'color'</span>.d(<span class="hljs-string">"$!=select(colors@options)"</span>).u(<span class="hljs-string">"$color=$!.value"</span>) <span class="hljs-comment">//   select    colors</span><font></font>
)<font></font>
.DICT({<font></font>
 <span class="hljs-attr">select</span>: <span class="hljs-string">'SELECT'</span>.d(<span class="hljs-string">"* .options@value"</span> <span class="hljs-comment">//    </span>
   ,<span class="hljs-string">'OPTION'</span>.d(<span class="hljs-string">"! .value"</span>)<font></font>
  ).ui(<span class="hljs-string">".value=#:value"</span>),<font></font>
  <font></font>
 <span class="hljs-attr">sizes</span>: [<span class="hljs-string">"XS"</span>,<span class="hljs-string">"S"</span>,<span class="hljs-string">"M"</span>,<span class="hljs-string">"L"</span>,<span class="hljs-string">"XL"</span>],
 <span class="hljs-attr">colors</span>: <span class="hljs-string">"white black brown yellow pink"</span>.split(<span class="hljs-string">" "</span>), <span class="hljs-comment">//    </span><font></font>
 <font></font>
 <span class="hljs-string">"not-selected"</span>: <span class="hljs-string">"Select size and color please"</span>,
 <span class="hljs-attr">selected</span>: <span class="hljs-string">"Selected specs:"</span><font></font>
})<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
原則として、このスタイルが好きな場合、アプリケーション全体が「コンポーネント」に分解されて辞書に詰め込まれるのを妨げるものは何もありません。</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-string">'main'</span>.d(<span class="hljs-string">"! header content footer"</span>)<font></font>
.DICT({<font></font>
 <span class="hljs-attr">header</span> : <span class="hljs-string">'HEADER'</span>.d(...),
 <span class="hljs-attr">content</span> : <span class="hljs-string">'UL.menu'</span>.d(...),
 <span class="hljs-attr">footer</span> : <span class="hljs-string">'FOOTER'</span>.d(...)<font></font>
})<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
個人的にはあまり意味がなく、実際に繰り返し使われている破片だけを出します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ちなみに、これは通常のJavaScriptであり、辞書自体は、ご覧のように単なるオブジェクト（または連想配列とも呼ばれます）であるため、JavaScriptの正当な方法で作成することもできます。</font><font style="vertical-align: inherit;">たとえば、上記の例では、定数の値の配列は</font></font><code>colors</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">split</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メソッドを使用して文字列から生成されます</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">通常、外部スクリプトライブラリからディクショナリのオブジェクト全体を、少なくとも古い方法で、</font></font><code>&lt;script src="..."&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">またはXHR-&gt; eval（）を介し</font></font><code>import</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">てインポートできます（ただし、クライアントがこの新しい方法をサポートしていることを確認してください）。</font><font style="vertical-align: inherit;">セクションの</font></font><code>.DICT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 多分いくつか、それらすべてが1つの共通の辞書に組み合わされています。</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> lib1={
  <span class="hljs-attr">message</span>: <span class="hljs-string">"Hello from lib1"</span><font></font>
 },<font></font>
 lib2={<font></font>
  <span class="hljs-attr">message</span>: <span class="hljs-string">"Hi from lib2"</span><font></font>
 };<font></font>
 <font></font>
<font></font>
<span class="hljs-string">'my-app'</span>.d(<span class="hljs-string">"! message wrapped.message imported.message"</span>)<font></font>
<font></font>
.DICT(lib1)<font></font>
.DICT({<font></font>
 <span class="hljs-attr">wrapped</span>: lib2,
 <span class="hljs-attr">imported</span>: <span class="hljs-keyword">import</span> <span class="hljs-string">"extern.js"</span>;<font></font>
})<font></font>
<font></font>
<span class="hljs-comment">// extern.js</span><font></font>
({<font></font>
 <span class="hljs-attr">message</span>: <span class="hljs-string">"Bonjour de lib importé"</span><font></font>
})<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
標準のjavascriptツールに加えて、dapには外部ライブラリを接続するための独自のメカニズムがあります。その違いは、ライブラリが遅延して読み込まれることです-ライブラリから何かを本当に取得する必要がある場合のみです。このようなライブラリは、セクションに示されています。</font></font><code>.USES</code><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-string">'main'</span>.d(<span class="hljs-string">"$?="</span> <span class="hljs-comment">// unset $? </span>
 ,<span class="hljs-string">'BUTTON.toggle'</span>.ui(<span class="hljs-string">"$?=$?:!"</span>) <span class="hljs-comment">// toggle $?</span>
 ,<span class="hljs-string">'activated'</span>.d(<span class="hljs-string">"? $?"</span> <span class="hljs-comment">// only show when $? is set</span>
  ,<span class="hljs-string">'imported'</span>.d(<span class="hljs-string">"! delayed.message"</span>) <span class="hljs-comment">// now print the message from the lib</span><font></font>
 )<font></font>
)<font></font>
.USES({<font></font>
 <span class="hljs-attr">delayed</span>: <span class="hljs-string">"extern.js"</span><font></font>
})<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここで、extern.jsライブラリは、「インポートされた」要素を表示する必要がある場合に、ボタンをクリックした後にのみロードされます。この目的のために、外部ライブラリを参照するそのDAPルールを解析およびコンパイルします。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
はい、DAPルールは実行前に「コンパイル」されます。そして、遅延、要素テンプレートへの最初の実際の呼び出しでのみ。この遅延により、大きなアプリケーションのコンパイルを多くの小さなステージに「汚す」ことができ、ブラウザのリソースをコードの未使用セクションで占有する必要がなくなります。もちろん、リソースに対するこのような懸念は、一部の非常に大規模なアプリケーションまたは弱いデバイスにのみ関係します。一般に、コンパイルと実行の両方で、dapは（もちろんUIスケールで）非常に高速であると言えます。パフォーマンスはブラウザコンソールで制御できます。各反応の時間がそこに記録されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実際に発生する可能性がある唯一の顕著な遅延は、ネットワーク遅延です。しかし、これらの遅延はDAPアプリケーションをブロックしません。コンバーターによって実行されるWeb要求は</font></font><code>:query</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">非同期であり、残りの要素の表示と操作を遅延させません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ちなみに、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンバーターとは</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">？ dapのコンバーターは、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">value→value</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">という形式の関数</font><i><font style="vertical-align: inherit;">です</font></i><font style="vertical-align: inherit;">。つまり、1つの入力と1つの出力があります。この制限により、コンバーターからチェーンを構築できます（例えば、式の</font></font><code>$a:x,y,z</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一致）</font></font><code>z(y(x($a)))</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cのようなエントリ。コンバータに入力が1つしかないという事実は、「通常の」機能と比較してその機能を制限しているように思われます。しかし、これはそうではありません。コンバーターは、任意の量のデータを含む基本値とオブジェクト/配列（JavaScriptでは、これらの概念の違いは不鮮明です）の両方を受け入れて提供できます。したがって、dap内のコンバーターは「従来の」機能を完全に置き換えますが、追加の構文設計を必要とせずに、チェーンで組み立てて非同期にすることができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
必要に応じて、dapのパラメーターの固定リストをそれぞれ持つ従来の「関数」はありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アグリゲータ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はまだあり</font><i><font style="vertical-align: inherit;">ます</font></i><font style="vertical-align: inherit;"> -任意の数の引数の関数（通常はピアですが、常にではありません）。例えば、</font></font><code>()?</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">空でない最初の引数または最後の引数（JavaScriptの|| -chainのアナログ）を返し</font></font><code>()!</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、逆に最初の空の引数または最後の引数（JavaScriptの&amp;&amp; -chainのアナログ）を返します。または、たとえば、アグリゲーター</font></font><code>()uri</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-引数からパラメーター化されたURIを構築します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、DAPの最後のタイプの関数は</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">演算子</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。コンバーターとアグリゲーターがイデオロギー的に値を計算する「純粋な」関数に近い場合（これは常にそうであるとは限りませんが）、オペレーターのタスクはこれらの値を生成されたエレメントに適用することです（例えば、オペレーター</font></font><code>!</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はエレメントのコンテンツに引数値を追加し、オペレーター</font></font><code>!!</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は属性を設定します）要素）またはルールの進行を制御する（条件付きステートメントなど</font></font><code>?</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dapの標準コンバーター、アグリゲーター、オペレーターの武器は最小限ですが、問題ではありません。主なことは、自分で作成できることです！これは重要なポイントです。 dap-rulesの言語は、普遍的なプログラミング言語のふりをするのではなく、要素間の依存関係のみを記述することを明確に理解する必要があります。ハードコアと計算は環境のネイティブな手段（ブラウザーの場合、これはもちろんJavaScriptです）によって実装され、dapは純粋に「ロジスティック」の役割を果たします-何をいつ、どこから、何をするかを示す。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
独自の機能については、</font></font><code>.FUNC</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「機能」の</font><font style="vertical-align: inherit;">セクションで説明しています</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-string">'UL.users'</span>.d(<span class="hljs-string">"* :query`https://jsonplaceholder.typicode.com/users"</span>
 ,<span class="hljs-string">'LI'</span>.d(<span class="hljs-string">"! (.name .username:allcaps .address.city):aka,allcaps"</span>)<font></font>
  .ui(<span class="hljs-string">"(.address.street .address.suite .address.city .address.zipcode)lines:alert"</span>)<font></font>
)<font></font>
.DICT({<font></font>
 <span class="hljs-string">"no-contact"</span>: <span class="hljs-string">"No contacts available for this person"</span><font></font>
})<font></font>
.FUNC({<font></font>
 <span class="hljs-attr">convert</span>: {
  <span class="hljs-attr">allcaps</span>: <span class="hljs-function"><span class="hljs-params">o</span>=&gt;</span> o.toUpperCase(),
  <span class="hljs-attr">aka</span> : <span class="hljs-function"><span class="hljs-params">o</span> =&gt;</span> o.name + <span class="hljs-string">" also known as "</span>+o.username+<span class="hljs-string">" from the city of "</span>+o.city<font></font>
 },<font></font>
 <span class="hljs-attr">flatten</span>:{
  <span class="hljs-attr">lines</span> : <span class="hljs-function"><span class="hljs-params">values</span>=&gt;</span><span class="hljs-string">"Address:\n"</span> + values.reverse().join(<span class="hljs-string">"\n"</span>)<font></font>
 }<font></font>
})<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここでは、独自の機能は取るに足らないものであるため、直接「所定の場所」に記述されます。</font><font style="vertical-align: inherit;">もちろん、より複雑なものを独立したモジュールとして記述し</font></font><code>.FUNC</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、このモジュールとDAP間の対話のプロトコルのみ</font><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">規定</font><font style="vertical-align: inherit;">することは理にかなって</font><font style="vertical-align: inherit;">います。</font><font style="vertical-align: inherit;">たとえば、tic-tac-toe </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dap.js.org/samples/tictactoe.html（React</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">チュートリアルに基づく）</font><font style="vertical-align: inherit;">を再生する例で</font><font style="vertical-align: inherit;">は、ゲームのロジック全体が個別のクロージャーに記述されており、dapはこのロジックを画面上の画像に接続するだけです。</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">dapの</font></a></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
詳細については、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dap.js.orgをご覧ください</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
はい、ここにもう1つあります。</font><font style="vertical-align: inherit;">圧縮形式では、dapエンジン（</font></font><code>&lt;script src="https://cdn.jsdelivr.net/gh/jooher/dap/0.5.min.js"&gt;</code><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
）</font><font style="vertical-align: inherit;">全体の</font><font style="vertical-align: inherit;">重量</font><font style="vertical-align: inherit;">は</font><font style="vertical-align: inherit;">9 kB </font><font style="vertical-align: inherit;">以上</font><font style="vertical-align: inherit;">です。</font><font style="vertical-align: inherit;">9キロバイト。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja478320/index.html">プログラマーの作業をスピードアップするのに役立つVS Codeの10の機能</a></li>
<li><a href="../ja478322/index.html">実際のプロジェクトでのアプリケーションに関するReact NativeとFlutterの比較</a></li>
<li><a href="../ja478324/index.html">最小の違い</a></li>
<li><a href="../ja478326/index.html">思慮深いクエリ：PWAキャッシュ戦略</a></li>
<li><a href="../ja478328/index.html">データサイエンティストが車を購入した方法</a></li>
<li><a href="../ja478336/index.html">非同期、Swoole、ParallelによるTarantool PHPコネクタの高速化</a></li>
<li><a href="../ja478340/index.html">Tinkoffインターンシッププログラムはどのように機能しますか？</a></li>
<li><a href="../ja478342/index.html">ボットは私たちを助けます</a></li>
<li><a href="../ja478344/index.html">メールを開始してスパムに巻き込まれないようにするにはどうすればよいですか？</a></li>
<li><a href="../ja478346/index.html">2020年にMacBook Pro 2011を購入するとどうなりますか？</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>