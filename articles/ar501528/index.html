<!doctype html>
<html class="no-js" lang="ar">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ค ๐ฐ ๐จ๐ฝโ๐ป ูุชุงุจ "ุจุงุด ูุงูุฃูู ุงูุณูุจุฑุงูู: ุงููุฌูู ูุงูุฏูุงุน ูุงูุชุญููู ูู ุณุทุฑ ุฃูุงูุฑ ููููุณ" ๐ ๐ฆ ๐ธ๐ผ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูุฑุญุจุง ุ ูุงุจุฑูุฌูุชูู! ูููู ุฃู ูููู ุณุทุฑ ุงูุฃูุงูุฑ ุฃุฏุงุฉ ูุซุงููุฉ ููุฃูู ุงูุณูุจุฑุงูู. ูุฑููุฉ ูุฐููุฉ ูุชูุงูุฑ ูุทูู ูุญููุงู ูุงุฌูุฉ ุณุทุฑ ุงูุฃูุงูุฑ ุงูููุงุณูุฉ (CLI) ุฅูู ุญู ุฃุณุงุณู...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>ูุชุงุจ "ุจุงุด ูุงูุฃูู ุงูุณูุจุฑุงูู: ุงููุฌูู ูุงูุฏูุงุน ูุงูุชุญููู ูู ุณุทุฑ ุฃูุงูุฑ ููููุณ"</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/piter/blog/501528/"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><img src="https://habrastorage.org/webt/xx/ml/ir/xxmlirxciwbxahmteiy-9cslfxg.jpeg" align="left" alt="ุตูุฑุฉ"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฑุญุจุง ุ ูุงุจุฑูุฌูุชูู! </font><font style="vertical-align: inherit;">ูููู ุฃู ูููู ุณุทุฑ ุงูุฃูุงูุฑ ุฃุฏุงุฉ ูุซุงููุฉ ููุฃูู ุงูุณูุจุฑุงูู. </font><font style="vertical-align: inherit;">ูุฑููุฉ ูุฐููุฉ ูุชูุงูุฑ ูุทูู ูุญููุงู ูุงุฌูุฉ ุณุทุฑ ุงูุฃูุงูุฑ ุงูููุงุณูุฉ (CLI) ุฅูู ุญู ุฃุณุงุณู ุฅุฐุง ูุงูุช ูุฏูู ุงูุฎุจุฑุฉ ุงูููุงุณุจุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุชุญุฏุซ ุงููุคููุงู ุจูู ุชุฑููููู ููุงุฑู ุฃูุจููุบ ุนู ุฃุฏูุงุช ูุญูู ุณุทุฑ ุงูุฃูุงูุฑ ุงูุชู ุชุณุงุนุฏ ุนูู ุฌูุน ุงูุจูุงูุงุช ูุน ุญูุงูุฉ ุงุณุชุจุงููุฉ ุ ูุชุญููู ุงูุณุฌูุงุช ููุฑุงูุจุฉ ุญุงูุฉ ุงูุดุจูุฉ. </font><font style="vertical-align: inherit;">ุณูู ูุชุนูู Pentesters ููููุฉ ุชูููุฐ ุงููุฌูุงุช ุจุงุณุชุฎุฏุงู ูุธุงุฆู ูุงุฆูุฉ ูุฏูุฌุฉ ุชูุฑูุจูุง ูู ุฃู ุฅุตุฏุงุฑ ูู Linux.</font></font><br>
<a name="habracut"></a><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููู ูุฐุง ุงููุชุงุจุ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุชุงุจ "ุจุงุด ูุงูุฃูู ุงูุณูุจุฑุงูู" ูุฎุตุต ูุฃููุฆู ุงูุฐูู ูุฑุบุจูู ูู ุชุนูู ููููุฉ ุงูุนูู ูุน ุณุทุฑ ุงูุฃูุงูุฑ ูู ุณูุงู ุฃูู ุงูููุจููุชุฑ. </font><font style="vertical-align: inherit;">ูุง ูุชูุซู ูุฏููุง ูู ุงุณุชุจุฏุงู ุงูุฃุฏูุงุช ุงูููุฌูุฏุฉ ุจูุตูุต ุณุทุฑ ุงูุฃูุงูุฑ ุ ุจู ูุชุนูููู ููููุฉ ุงุณุชุฎุฏุงู ุณุทุฑ ุงูุฃูุงูุฑ ุจุดูู ูุนุงู ูุชุญุณูู ุงููุธุงุฆู ุงูุญุงููุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุทูุงู ุงููุชุงุจ ุ ููุฏู ุฃูุซูุฉ ุนูู ุทุฑู ุงูุฃูุงู ูุซู ุฌูุน ุงูุจูุงูุงุช ูุชุญููููุง ูุงุฎุชุจุงุฑ ุงูุงุฎุชุฑุงู. </font><font style="vertical-align: inherit;">ุงูุบุฑุถ ูู ูุฐู ุงูุฃูุซูุฉ ูู ุฅุธูุงุฑ ุฅููุงููุงุช ุณุทุฑ ุงูุฃูุงูุฑ ูุชุนุฑููู ุจุจุนุถ ุงูุทุฑู ุงูุฃุณุงุณูุฉ ุงููุณุชุฎุฏูุฉ ูู ุงูุฃุฏูุงุช ุนุงููุฉ ุงููุณุชูู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐุง ุงููุชุงุจ ููุณ ููุฏูุฉ ููุจุฑูุฌุฉ ุ ุนูู ุงูุฑุบู ูู ุฃู ุจุนุถ ุงูููุงููู ุงูุนุงูุฉ ุงูุชู ูุบุทููุง ุงูุฌุฒุก ุงูุฃูู.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฑุงูุจุฉ ุงูุณุฌู ูู ุงูููุช ุงูุญูููู</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชุนุฏ ุงููุฏุฑุฉ ุนูู ุชุญููู ูุฌูุฉ ุจุนุฏ ูููุน ุญุฏุซ ููุงุฑุฉ ูููุฉ. </font><font style="vertical-align: inherit;">ูููู ูู ุงูููู ุจููุณ ุงููุฏุฑ ุฃู ุชููู ูุงุฏุฑูุง ุนูู ุงุณุชุฎุฑุงุฌ ุงููุนูููุงุช ูู ููู ุงูุณุฌู ูู ุงูููุช ุงููุนูู ูู ุฃุฌู ุงูุชุดุงู ุงูุฅุฌุฑุงุกุงุช ุงูุฎุจูุซุฉ ุฃู ุงููุดุจููุฉ ูู ููุช ุญุฏูุซูุง. </font><font style="vertical-align: inherit;">ูู ูุฐุง ุงููุตู ุ ุณููุธุฑ ูู ุทุฑู ูุฑุงุกุฉ ุฅุฏุฎุงูุงุช ุฏูุชุฑ ุงูููููุฉ ุฃุซูุงุก ุฅูุดุงุฆูุง ูุชูุณูููุง ูุนุฑุถ ุงูุชุญูููุงุช ูุฅูุดุงุก ุชูุจููุงุช ุจูุงุกู ุนูู ูุคุดุฑุงุช ุงูุชูุฏูุฏ ุงููุนุฑููุฉ ูุชุดุบูู ุงููุธุงู ุฃู ุงูุดุจูุฉ (ูุคุดุฑุงุช ุงูุงุฎุชุฑุงู).</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฑุงูุจุฉ ุณุฌู ุงููุต</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅู ุฃุณูู ุทุฑููุฉ ููุฑุงูุจุฉ ุชุณุฌูู ุงูุฏุฎูู ูู ุงูููุช ุงูุญูููู ูู ุงุณุชุฎุฏุงู ุงูุฃูุฑ tail ูุน ุงููุนููุฉ โf - ููู ููุฑุฃ ุงูููู ุจุงุณุชูุฑุงุฑ ููุนุฑุถู ูู ูุถุน ุซุงุจุช ุนูุฏ ุฅุถุงูุฉ ุฎุทูุท ุฌุฏูุฏุฉ. ููุง ูู ุงูุญุงู ูู ุงููุตูู ุงูุณุงุจูุฉ ุ ุนูู ุณุจูู ุงููุซุงู ุ ุณูุณุชุฎุฏู ุณุฌู ุงููุตูู ุฅูู ุฎุงุฏู ุงูููุจ Apache ุ ูููู ุงูุทุฑู ุงูููุถุญุฉ ุฐุงุช ุตูุฉ ุจุฃู ุณุฌู ูุตู. ูุชุชุจุน ุณุฌู ุงููุตูู ุฅูู Apache ุจุงุณุชุฎุฏุงู ุงูุฃูุฑ tail ุ ุฃุฏุฎู ูุง ููู: </font></font><br>
<br>
<code>tail -f /var/logs/apache2/access.log</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููู ุชูุฑูุฑ ุงูุฅุฎุฑุงุฌ ูู ุงูุฃูุฑ tail ุฅูู ุงูุฃูุฑ grep ุ ูุฐูู ุณูุชู ุนุฑุถ ุงูุณุฌูุงุช ุงููุทุงุจูุฉ ููุนุงููุฑ ูุนููุฉ ููุท. ูุชุชุจุน ุงููุซุงู ุงูุชุงูู ุณุฌู ุงููุตูู ุฅูู Apache ููุนุฑุถ ุงูุฅุฏุฎุงูุงุช ุงูููุงุจูุฉ ูุนููุงู IP ูุนูู:</font></font><br>
<br>
<code>tail -f /var/logs/apache2/access.log | grep '10.0.0.152'<br>
</code><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููููู ุฃูุถูุง ุงุณุชุฎุฏุงู ุงูุชุนุจูุฑุงุช ุงูุนุงุฏูุฉ. ูู ูุฐุง ุงููุซุงู ุ ุณูุชู ุนุฑุถ ุงูุณุฌูุงุช ุงูุชู ุชุนุฑุถ ุฑูุฒ ุญุงูุฉ HTTP 404 "ูู ูุชู ุงูุนุซูุฑ ุนูู ุงูุตูุญุฉ" ุ ุชูุช ุฅุถุงูุฉ ุงูุฎูุงุฑ -i ูุชุฌุงูู ุญุงูุฉ ุงูุฃุญุฑู: </font></font><br>
<br>
<code>tail -f /var/logs/apache2/access.log | egrep -i 'HTTP/.*" 404'</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููุณุญ ูู ูุนูููุงุช ุบุฑูุจุฉ ุ ูุฌุจ ุชูุฑูุฑ ุงูุฅุฎุฑุงุฌ ุฅูู ุงูุฃูุฑ cut. ูุฑุงูุจ ูุฐุง ุงููุซุงู ุณุฌู ุงููุตูู ููุงุณุชุนูุงูุงุช ุงูุชู ุชุคุฏู ุฅูู ุฑูุฒ ุงูุญุงูุฉ 404 ุ ุซู ูุณุชุฎุฏู ุทุฑููุฉ ุงููุทุน ูุนุฑุถ ุงูุชุงุฑูุฎ / ุงูููุช ูุงูุตูุญุฉ ุงููุทููุจุฉ ููุท: </font><font style="vertical-align: inherit;">
ุจุนุฏ ุฐูู ุ ูุฅุฒุงูุฉ ุงูุฃููุงุณ ุงููุฑุจุนุฉ ูุนูุงูุงุช ุงูุงูุชุจุงุณ ุงููุฒุฏูุฌุฉ ุ ููููู ุชูุฌูู ุงูุฅุฎุฑุงุฌ ุฅูู tr -d ' [] "".</font></font><br>
<br>
<code>$ tail -f access.log | egrep --line-buffered 'HTTP/.*" 404' | cut -d' ' -f4-7<br>
[29/Jul/2018:13:10:05 -0400] "GET /test<br>
[29/Jul/2018:13:16:17 -0400] "GET /test.txt<br>
[29/Jul/2018:13:17:37 -0400] "GET /favicon.ico</code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุงุญุธุฉ: ููุณุชุฎุฏู ุฎูุงุฑ --line-buffering ููุฃูุฑ egrep ููุง. </font><font style="vertical-align: inherit;">ูุฐุง ูุฌุจุฑ egrep ุนูู ุงูุทุจุงุนุฉ ุฅูู stdout ูู ูู ูุฑุฉ ูุญุฏุซ ูููุง ุงููุทุงุน ููุฎุท. </font><font style="vertical-align: inherit;">ุจุฏูู ูุฐู ุงููุนููุฉ ุ ุณูุญุฏุซ ุงูุชุฎุฒูู ุงููุคูุช ููู ูุชู ุฅุฑุณุงู ุงูุฅุฎุฑุงุฌ ุฅูู ุงูุฃูุฑ cut ุญุชู ุชูุชูุฆ ุงููุฎุฒู ุงููุคูุช. </font><font style="vertical-align: inherit;">ูุง ูุฑูุฏ ุงูุงูุชุธุงุฑ ุทูููุง. </font><font style="vertical-align: inherit;">ูุณูุญ ูุฐุง ุงูุฎูุงุฑ ููุฃูุฑ egrep ุจูุชุงุจุฉ ูู ุณุทุฑ ููุง ูู ููุฌูุฏ.</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃูุงูุฑ ุณุทุฑ </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุฃูุงูุฑ ูุงุฐุง ูุญุฏุซ ุฃุซูุงุก ุงูุชุฎุฒูู ุงููุคูุชุ </font><font style="vertical-align: inherit;">ุชุฎูู egrep ุงูุนุซูุฑ ุนูู ุงููุซูุฑ ูู ุงูุณูุงุณู ุงููุทุงุจูุฉ ููููุท ุงููุญุฏุฏ. </font><font style="vertical-align: inherit;">ูู ูุฐู ุงูุญุงูุฉุ egrep ุณูููู ููุง ุงููุซูุฑ ูู ุงููุฎุฑุฌุงุช. </font><font style="vertical-align: inherit;">ููู ุงููุงุชุฌ (ูู ุงููุงูุน ุ ุฃู ุฅุฏุฎุงู ุฃู ุฅุฎุฑุงุฌ) ุฃุบูู ุจูุซูุฑ (ูุณุชุบุฑู ููุชูุง ุฃุทูู) ูู ูุนุงูุฌุฉ ุงูุจูุงูุงุช (ุงูุจุญุซ ุงููุตู). </font><font style="vertical-align: inherit;">ูุจุงูุชุงูู ุ ูููุง ูู ุนุฏุฏ ููุงููุงุช ุงูุฅุฏุฎุงู / ุงูุฅุฎุฑุงุฌ ุ ุฒุงุฏ ููุงุกุฉ ุงูุจุฑูุงูุฌ.</font></font><br>
<br>
     grep       ,  ,          .         .  grep       .   ,  grep   50    .   ,     50  ,     ,     .   50  !<br>
<br>
       egrep, ,             .  egrep       ,     ,     .    ,    ,   ,      ,      .      ,     .<br>
<br>
    ,    ,  tail -f        (    ),       . ,       ยซ ยป,      .     .          .<br>
<br>
   ,        egrep     ,     .        ,   .</blockquote><br>
<h3>    </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููููู ุงุณุชุฎุฏุงู ุฃูุงูุฑ ุงูุฐูู ู egrep ููุฑุงูุจุฉ ุงูุณุฌู ูุนุฑุถ ุฃู ุฅุฏุฎุงูุงุช ุชุชูุงูู ูุน ุงูุฃููุงุท ุงููุนุฑููุฉ ููุฃูุดุทุฉ ุงููุดุจููุฉ ุฃู ุงูุถุงุฑุฉ ุ ูุงูุชู ูุดุงุฑ ุฅูููุง ุบุงูุจูุง ุจุงุณู IOC. ููููู ุฅูุดุงุก ูุธุงู ูุดู ุงูุชุณูู ุงูุจุณูุท (IDS). ุฃููุงู ุ ูู ุจุฅูุดุงุก ููู ูุญุชูู ุนูู ุฃููุงุท ุงูุชุนุจูุฑ ุงูุนุงุฏู ูู IOC ุ ููุง ูู ููุถุญ ูู ุงููุซุงู 8.1. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุซุงู 8.1. ioc.txt </font><b><font style="vertical-align: inherit;">(1)</font></b><font style="vertical-align: inherit;"> ูุฐุง ุงููุงูุจ (../) ูู ูุคุดุฑ ุนูู ูุฌูู ุฏููู ุฏูุงุฑ: ูุญุงูู ููุงุฌู ุงูุฎุฑูุฌ ูู ุฏููู ุงูุนูู ุงูุญุงูู ูุงููุตูู ุฅูู ุงููููุงุช ุงูุชู ูุง ูููู ุงููุตูู ุฅููู. </font><b><font style="vertical-align: inherit;">(2)</font></b><font style="vertical-align: inherit;"> ุชูุณุชุฎุฏู ูููุงุช Linux etc / passwd ู etc / shadow ููุตุงุฏูุฉ ุงููุธุงู ููุฌุจ ุนุฏู ุงููุตูู ุฅูููุง ูุทูููุง ุนุจุฑ ุฎุงุฏู ุงูููุจ. </font><b><font style="vertical-align: inherit;">(3)</font></b></font><br>
<br>
<code>\.\./ <b>(1)</b><br>
etc/passwd <b>(2)</b><br>
etc/shadow<br>
cmd\.exe <b>(3)</b><br>
/bin/sh<br>
/bin/bash<br>
</code><br>
<b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br>
<b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br>
<b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅู ุนุฑุถ ูููุงุช cmd.exe ุฃู / bin / sh ุฃู / bin / bash ูู ูุคุดุฑ ุนูู ุงูุงุชุตุงู ุงูุนูุณู ุงูุฐู ุฃุฑุฌุนู ุฎุงุฏู ุงูููุจ. ุบุงูุจูุง ูุง ูุดูุฑ ุงูุงุชุตุงู ุงูุนูุณู ุฅูู ูุญุงููุฉ ุนูููุฉ ูุงุฌุญุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุงุญุธ ุฃูู ูุฌุจ ุฃู ุชููู IOCs ุจุชูุณูู regex ุ ุญูุซ ุณูุชู ุงุณุชุฎุฏุงููุง ูุงุญููุง ุจูุงุณุทุฉ ุงูุฃูุฑ egrep. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููู ุงุณุชุฎุฏุงู ููู ioc.txt ูุน ุฎูุงุฑ egrep -f. ุชุฎุจุฑ ูุฐู ุงููุนููุฉ egrep ุจุงูุจุญุซ ูู ุฃููุงุท ุงูุชุนุจูุฑ ุงูุนุงุฏูุฉ ูู ุงูููู ุงููุญุฏุฏ. ูุฐุง ูุณูุญ ูู ุจุงุณุชุฎุฏุงู ุงูุฃูุฑ tail ููุฑุงูุจุฉ ููู ุงูุณุฌู ุ ููููุง ุชูุช ุฅุถุงูุฉ ูู ุณุฌู ุ ุณูุชู ููุงุฑูุฉ ุณุทุฑ ุงููุฑุงุกุฉ ูุน ุฌููุน ุงูููุงูุจ ุงูููุฌูุฏุฉ ูู ููู IOC ุ ูุน ุนุฑุถ ุฃู ุณุฌู ููุงุธุฑ. ููุง ูุซุงู:</font></font><br>
<br>
<code>tail -f /var/logs/apache2/access.log | egrep -i -f ioc.txt</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูููู ุงุณุชุฎุฏุงู ุงูุฃูุฑ tee ูุนุฑุถ ุงูุชุญุฐูุฑุงุช ุนูู ุงูุดุงุดุฉ ูู ุขู ูุงุญุฏ ูุญูุธูุง ูููุนุงูุฌุฉ ุงููุงุญูุฉ ูู ููููุง ุงูุฎุงุต: </font><font style="vertical-align: inherit;">
ูุฑุฉ ุฃุฎุฑู ุ ููุงู ุญุงุฌุฉ ุฅูู ุงูุฎูุงุฑ - ุงููุฎุฒู ูุคูุชูุง ููุฎุท ูุถูุงู ุนุฏู ูุฌูุฏ ูุดุงูู ูุงุชุฌุฉ ุนู ุงูุชุฎุฒูู ุงููุคูุช ููุฎุฑุฌุงุช ุงูุฃูุฑ.</font></font><br>
<br>
<code>tail -f /var/logs/apache2/access.log | egrep --line-buffered -i -f ioc.txt |<br>
tee -a interesting.txt</code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฑุงูุจุฉ ุณุฌู ูููุฏูุฒ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุง ุฐูุฑูุง ูู ูุจู ุ ูุฌุจ ุนููู ุงุณุชุฎุฏุงู ุงูุฃูุฑ wevtutil ูููุตูู ุฅูู ุฃุญุฏุงุซ Windows. </font><font style="vertical-align: inherit;">ุนูู ุงูุฑุบู ูู ุฃู ูุฐุง ุงูุฃูุฑ ุนุงููู ุ ุฅูุง ุฃูู ูุง ูุญุชูู ุนูู ูุธุงุฆู ูุซู ุงูุฐูู ุ ูุงูุฐู ูููู ุงุณุชุฎุฏุงูู ูุงุณุชุฑุฏุงุฏ ุงูุณุฌูุงุช ุงููุงุฑุฏุฉ ุงูุฌุฏูุฏุฉ. </font><font style="vertical-align: inherit;">ูููู ููุงู ุทุฑููุฉ ููุฎุฑูุฌ - ุงุณุชุฎุฏู ูุต bash ุจุณูุทูุง ูููู ุฃู ูููุฑ ููุณ ุงููุธููุฉ (ูุซุงู 8.2). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุซุงู 8.2. </font><font style="vertical-align: inherit;">wintail.sh</font></font><br>
<br>
<pre><code class="java hljs">#!/bin/bash -<font></font>
#<font></font>
# Bash  <font></font>
# wintail.sh<font></font>
#<font></font>
# :<font></font>
#    tail   Windows<font></font>
#<font></font>
# : ./wintail.sh<font></font>
#<font></font>
<font></font>
WINLOG=<span class="hljs-string">"Application"</span> (<span class="hljs-number">1</span>)<font></font>
<font></font>
LASTLOG=$(wevtutil qe <span class="hljs-string">"$WINLOG"</span> <span class="hljs-comment">//c:1 //rd:true //f:text) (2)</span><font></font>
<font></font>
<span class="hljs-keyword">while</span> <span class="hljs-keyword">true</span>
<span class="hljs-keyword">do</span>
      CURRENTLOG=$(wevtutil qe <span class="hljs-string">"$WINLOG"</span> <span class="hljs-comment">//c:1 //rd:true //f:text) (3)</span>
      <span class="hljs-keyword">if</span> [[ <span class="hljs-string">"$CURRENTLOG"</span> != <span class="hljs-string">"$LASTLOG"</span> ]]<font></font>
      then<font></font>
            echo <span class="hljs-string">"$CURRENTLOG"</span>
            echo <span class="hljs-string">"----------------------------------"</span>
            LASTLOG=<span class="hljs-string">"$CURRENTLOG"</span><font></font>
      fi<font></font>
done</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(1)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุญุฏุฏ ูุฐุง ุงููุชุบูุฑ ุณุฌู Windows ุงูุฐู ุชุฑูุฏ ุชุชุจุนู. ููุญุตูู ุนูู ูุงุฆูุฉ ุจุงูุณุฌูุงุช ุงููุชุงุญุฉ ุญุงูููุง ุนูู ุงููุธุงู ุ ููููู ุงุณุชุฎุฏุงู ุงูุฃูุฑ wevtutil el. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(2)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุง ุ ูุชู ุชูููุฐ wevtutil ูุทูุจ ููู ุงูุณุฌู ุงููุญุฏุฏ. ุชูุฑุฌุน ุงููุนููุฉ c: 1 ุฅุฏุฎุงู ุณุฌู ูุงุญุฏ ููุท. ุชุณูุญ ุงููุนููุฉ rd: true ููุฃูุฑ ุจูุฑุงุกุฉ ุฃุญุฏุซ ุฅุฏุฎุงู ููุณุฌู. ุฃุฎูุฑูุง ุ f: text ูุนูุฏ ุงููุชูุฌุฉ ูู ูุต ุนุงุฏู ุ ูููุณ ุจุชูุณูู XML ุ ููุง ูุฌุนู ูู ุงูุณูู ูุฑุงุกุฉ ุงููุชูุฌุฉ ูู ุงูุดุงุดุฉ. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(3)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชููู ุงูุฃุณุทุฑ ุงูููููุฉ ุงูุชุงููุฉ ุจุชุดุบูู ุงูุฃูุฑ wevtutil ูุฑุฉ ุฃุฎุฑู ูุชุชู ููุงุฑูุฉ ุฅุฏุฎุงู ุงูุณุฌู ุงูุฐู ุชู ุชูููู ูุคุฎุฑูุง ุจุฃุฎุฑ ุณุทุฑ ูุทุจูุน ุนูู ุงูุดุงุดุฉ. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุงูุช ุชุฎุชูู ุนู ุจุนุถูุง ุงูุจุนุถ ุ ููุฐุง ูุนูู ุฃูู ูุงูุช ููุงู ุชุบููุฑุงุช ูู ุงูุณุฌู. </font><font style="vertical-align: inherit;">ูู ูุฐู ุงูุญุงูุฉ ุ ูุชู ุนุฑุถ ุฅุฏุฎุงู ุฌุฏูุฏ. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุงูุช ุงูุณุฌูุงุช ุงูุชู ุชุชู ููุงุฑูุชูุง ูู ููุณูุง ุ ููู ูุญุฏุซ ุดูุก ููุนูุฏ ุงูุฃูุฑ wevtutil ููุจุฏุฃ ุงูุจุญุซ ูุงูููุงุฑูุฉ ูุฑุฉ ุฃุฎุฑู.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅูุดุงุก ุงูุฑุณู ุงูุจูุงูู ูู ุงูููุช ุงูุญูููู</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููุฑ ุงูุฃูุฑ tail -f ุชุฏูู ุงูุจูุงูุงุช ุงูุญุงูู. </font><font style="vertical-align: inherit;">ูููู ูุงุฐุง ูู ููุช ุชุฑุบุจ ูู ุญุณุงุจ ุนุฏุฏ ุงูุฃุณุทุฑ ุงูุชู ุชูุช ุฅุถุงูุชูุง ุฅูู ุงูููู ููุชุฑุฉ ุฒูููุฉ ูุนููุฉุ </font><font style="vertical-align: inherit;">ููููู ูุฑุงูุจุฉ ุฏูู ุงูุจูุงูุงุช ูุฐุง ุ ูุจุฏุก ุฌูุงุฒ ุชูููุช ูุฅุฌุฑุงุก ุงูุนุฏ ุฎูุงู ูุชุฑุฉ ุฒูููุฉ ูุญุฏุฏุฉ ุ </font><font style="vertical-align: inherit;">ุซู ูุฌุจ ุฅููุงู ุงูุนุฏ ูุงูุฅุจูุงุบ ุนู ุงููุชุงุฆุฌ.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููู ุชูุณูู ูุฐุง ุงูุนูู ุฅูู ุนูููุชูู ููุจุฑุงูุฌ ุงููุตูุฉ: ุฃุญุฏููุง ููุฑุฃ ุงูุฃุณุทุฑ ุ ูุงูุขุฎุฑ ูุดุงูุฏ ุงูููุช. ูููู ุงููุคูุช ุจุฅุนูุงู ุนุฏุงุฏ ุงูุฎุท ุจุงุณุชุฎุฏุงู ุขููุฉ ุงุชุตุงู POSIX ุงููุนูุงุฑูุฉ ูุงููุนุงูุฌุฉ ุชุณูู ุฅุดุงุฑุฉ. ุงูุฅุดุงุฑุฉ ุนุจุงุฑุฉ ุนู ููุงุทุนุฉ ุจุฑูุฌูุฉ ุ ูููุงู ุฃููุงุน ูุฎุชููุฉ ูู ุงูุฅุดุงุฑุงุช. ุจุนุถูุง ูููุช - ูุคุฏู ุฅูู ููุงูุฉ ุงูุนูููุฉ (ุนูู ุณุจูู ุงููุซุงู ุ ุงุณุชุซูุงุก ูู ุนูููุฉ ุงููุงุตูุฉ ุงูุนุงุฆูุฉ). ูููู ุชุฌุงูู ูุนุธู ูุฐู ุงูุฅุดุงุฑุงุช ุฃู ุงูุชูุงุทูุง. ูุชู ุงุชุฎุงุฐ ุฅุฌุฑุงุก ุนูุฏ ุงูุชูุงุท ุฅุดุงุฑุฉ. ุงูุนุฏูุฏ ูู ูุฐู ุงูุฅุดุงุฑุงุช ููุง ุบุฑุถ ูุญุฏุฏ ูุณุจููุง ูู ูุธุงู ุงูุชุดุบูู. ุณูุณุชุฎุฏู ูุงุญุฏุฉ ูู ุงูุฅุดุงุฑุงุช ุงููุชุงุญุฉ ูููุณุชุฎุฏููู. ูุฐู ูู ุฅุดุงุฑุฉ SIGUSR1 (ูุงูุฃุฎุฑู ูู SIGUSR2).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููู ุฃู ุชููู ุจุฑุงูุฌ ูุตูุฉ Shell ุจุงูุชูุงุท ุงูููุงุทุนุงุช ุจุงุณุชุฎุฏุงู ุงูุฃูุฑ trap ุงููุฏูุฌ. ุจูุณุงุนุฏุชู ุ ููููู ุชุญุฏูุฏ ุฃูุฑ ูุญุฏุฏ ุงูุฅุฌุฑุงุก ุงูุฐู ุชุฑูุฏ ุงูููุงู ุจู ุนูุฏ ุชููู ุฅุดุงุฑุฉ ุ ููุงุฆูุฉ ูู ุงูุฅุดุงุฑุงุช ุงูุชู ุชุคุฏู ุฅูู ุงุณุชุฏุนุงุก ูุฐุง ุงูุฃูุฑ. ุนูู ุณุจูู ุงููุซุงู: </font></font><br>
<br>
<code>trap warnmsg SIGINT</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุคุฏู ูุฐุง ุฅูู ุงุณุชุฏุนุงุก ุงูุฃูุฑ warnmsg (ุงูุจุฑูุงูุฌ ุงููุตู ุฃู ุงููุธููุฉ ุงูุฎุงุตุฉ ุจูุง) ูููุง ุชููู ุงูุจุฑูุงูุฌ ุงููุตู shell ุฅุดุงุฑุฉ SIGINT ุ ุนูู ุณุจูู ุงููุซุงู ุ ุนูุฏ ุงูุถุบุท ุนูู Ctrl + C ูููุงุทุนุฉ ุนูููุฉ ููุฏ ุงูุชุดุบูู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุถุญ ุงููุซุงู 8.3 ุจุฑูุงูุฌ ูุตู ูููู ุจุฅุฌุฑุงุก ุญุณุงุจ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุซุงู 8.3 ูุจูุฑ. sh</font></font><br>
<br>
<pre><code class="java hljs">#!/bin/bash -<font></font>
#<font></font>
# Bash  <font></font>
# looper.sh<font></font>
#<font></font>
# :<font></font>
#    <font></font>
#<font></font>
# : ./looper.sh [filename]<font></font>
# filename โ  ,   ,<font></font>
#  : log.file<font></font>
#<font></font>
<font></font>
<span class="hljs-function">function <span class="hljs-title">interval</span> <span class="hljs-params">()</span>                                           <span class="hljs-params">(<span class="hljs-number">1</span>)</span>
</span>{<font></font>
      echo $(date <span class="hljs-string">'+%y%m%d %H%M%S'</span>) $cnt                       (<span class="hljs-number">2</span>)<font></font>
      cnt=<span class="hljs-number">0</span><font></font>
}<font></font>
<font></font>
declare -i cnt=<span class="hljs-number">0</span>
<span class="hljs-function">trap interval <span class="hljs-title">SIGUSR1</span>                                          <span class="hljs-params">(<span class="hljs-number">3</span>)</span>

shopt -s <span class="hljs-title">lastpipe</span>                                              <span class="hljs-params">(<span class="hljs-number">4</span>)</span>

tail -f --pid</span>=$$ ${<span class="hljs-number">1</span>:-log.file} | <span class="hljs-function"><span class="hljs-keyword">while</span> read <span class="hljs-title">aline</span>             <span class="hljs-params">(<span class="hljs-number">5</span>)</span>
<span class="hljs-keyword">do</span>
     let cnt++
done</span></code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(1)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุณูุชู ุงุณุชุฏุนุงุก ูุธููุฉ ุงููุงุตู ุงูุฒููู ุนูุฏ ุงุณุชูุงู ูู ุฅุดุงุฑุฉ. ุจุงูุทุจุน ุ ูุฌุจ ุชุญุฏูุฏ ุงููุงุตู ุงูุฒููู ูุจู ุฃู ูุชููู ูู ุชุณููุชู ูุงุณุชุฎุฏุงู ูุฎ ูู ุชุนุจูุฑูุง. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(2)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุชู ุงุณุชุฏุนุงุก ุฃูุฑ ุงูุชุงุฑูุฎ ูุชูููุฑ ุทุงุจุน ุฒููู ููููุฉ ุงููุชุบูุฑ cnt ุงูุฐู ูููู ุจุทุจุงุนุชู. ุจุนุฏ ุนุฑุถ ุงูุนุฏุงุฏ ุ ูุนูุฏ ุชุนููู ูุฐู ุงููููุฉ ุฅูู 0 ูุจุฏุก ุงูุนุฏ ุงูุชูุงุฒูู ูููุงุตู ุงูุฒููู ุงูุชุงูู. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(3)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุขู ุจุนุฏ ุฃู ุชู ุชุนุฑูู ุงููุงุตู ุงูุฒููู ุ ูููููุง ุงูุฅุดุงุฑุฉ ุฅูู ุฃู ุงููุธููุฉ ูุชู ุงุณุชุฏุนุงุคูุง ุนูุฏูุง ุชุชููู ุนูููุชูุง ุงูุฅุดุงุฑุฉ SIGUSR1. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(4)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฐู ุฎุทูุฉ ุบู ุบุงูุฉ ุงูุฃูููุฉ. ุนุงุฏุฉ ุ ุนูุฏูุง ูููู ููุงู ุฎุท ุฃูุงุจูุจ ุฃูุงูุฑ (ุนูู ุณุจูู ุงููุซุงู ุ ls-l | grep rwx | wc) ุ ูุชู ุชูููุฐ ุฃุฌุฒุงุก ูู ุฎุท ุงูุฃูุงุจูุจ (ูู ุฃูุฑ) ุนูู ุดุจูุงุช ูุฑุนูุฉ ูุชูุชูู ูู ุนูููุฉ ุจูุนุฑู ุงูุนูููุฉ ุงูุฎุงุต ุจูุง. ูุฏ ูููู ูุฐุง ูุดููุฉ ููุฐุง ุงูุณููุงุฑูู ุ ูุฃู ุญููุฉ while ุณุชููู ูู ูุดุฑุฉ ูุฑุนูุฉ ุจูุนุฑู ุนูููุฉ ูุฎุชูู. ูููุง ูุงูุช ุงูุนูููุฉ ุงูุชู ุชุจุฏุฃ ุ ูู ูุนุฑู ุงูุจุฑูุงูุฌ ุงููุตู looper.sh ูุนุฑู ุนูููุฉ ุญููุฉ ุงูููุช ูุฅุฑุณุงู ุฅุดุงุฑุฉ ุฅููู. ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุง ูุคุฏู ุชุบููุฑ ูููุฉ ุงููุชุบูุฑ cnt ูู ุงููุดุฑุฉ ุงููุฑุนูุฉ ุฅูู ุชุบููุฑ ูููุฉ cnt ูู ุงูุนูููุฉ ุงูุฑุฆูุณูุฉ ุ ูุฐุง ุณุชููู ุฅุดุงุฑุฉ ุงูุนูููุฉ ุงูุฑุฆูุณูุฉ ูู ูู ูุฑุฉ ุจุชุนููู ุงููููุฉ ุฅูู 0. ููููู ุญู ูุฐู ุงููุดููุฉ ุจุงุณุชุฎุฏุงู ุงูุฃูุฑ shopt ุ ุงูุฐู ูุถุจุท ุงููุนููุฉ (-s) ุนูู ุงูุฃูุจูุจ ุงูุฃุฎูุฑ. ูุฎุจุฑ ุงููุดุฑุฉ ุจุนุฏู ุฅูุดุงุก ูุดุฑุฉ ูุฑุนูุฉ ููุฃูุฑ ุงูุฃุฎูุฑ ูู ุฎุท ุงูุฃูุงุจูุจ ุูุชุดุบูู ูุฐุง ุงูุฃูุฑ ูู ููุณ ุนูููุฉ ุงูุจุฑูุงูุฌ ุงููุตู ููุณู. ูู ุญุงูุชูุง ุ ูุฐุง ูุนูู ุฃูู ุณูุชู ุชูููุฐ ุงูุฃูุฑ tail ูู ูุดุฑุฉ ูุฑุนูุฉ (ุฃู ูู ุนูููุฉ ุฃุฎุฑู) ุ ูุณุชุตุจุญ ุญููุฉ while ุฌุฒุกูุง ูู ุนูููุฉ ุงูุจุฑูุงูุฌ ุงููุตู ุงูุฑุฆูุณูุฉ. ููุงุญุธุฉ: ูุง ูุชููุฑ ุฎูุงุฑ shell ูุฐุง ุฅูุง ูู ุฅุตุฏุงุฑ bash 4.x ูุงูุฅุตุฏุงุฑุงุช ุงูุฃุญุฏุซ ูููุท ููุฃุบููุฉ ุบูุฑ ุงูุชูุงุนููุฉ (ูุซู ุงููุตูุต ุงูุจุฑูุฌูุฉ).</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(5)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฐุง ูู ุงูุฃูุฑ tail -f ุจูุนููุฉ --pid ุฃุฎุฑู. ูุดูุฑ ุฅูู ูุนุฑู ุงูุนูููุฉ ุ ูุงูุชู ุ ุนูุฏ ุงูุงูุชูุงุก ูู ูุฐู ุงูุนูููุฉ ุ ุณุชููู ุงูุฃูุฑ ุงูุฐูู. ูุญุฏุฏ ูุนุฑู ุงูุนูููุฉ ูููุต ุงูุจุฑูุฌู ุงูุญุงูู $$ ูุนุฑุถู. ูุณูุญ ูู ูุฐุง ุงูุฅุฌุฑุงุก ุจุชูุธูู ุงูุนูููุงุช ูุนุฏู ุชุฑู ุฃูุฑ ุงูุฐูู ุงูุฐู ุชู ุชูููุฐู ูู ุงูุฎูููุฉ (ุฅุฐุง ุ ุนูู ุณุจูู ุงููุซุงู ุ ูุนูู ูุฐุง ุงููุต ุงูุจุฑูุฌู ูู ุงูุฎูููุฉ ุ ูุซุงู 8.4). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุจุฏุฃ ุงููุต ุงูุจุฑูุฌู tailcount.sh ููููู ุงููุต ุงูุจุฑูุฌู ุจุงุณุชุฎุฏุงู ุณุงุนุฉ ุชูููุช (ูุคูุช) ููุญุณุจ ุงููุชุฑุงุช ุงูุฒูููุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุซุงู 8.4. tailcount.sh</font></font><br>
<br>
<pre><code class="java hljs">#!/bin/bash -<font></font>
#<font></font>
# Bash  <font></font>
# tailcount.sh<font></font>
#<font></font>
# :<font></font>
#    n <font></font>
#<font></font>
# : ./tailcount.sh [filename]<font></font>
#     filename:  looper.sh<font></font>
#<font></font>
<font></font>
#  โ    <font></font>
<span class="hljs-function">function <span class="hljs-title">cleanup</span> <span class="hljs-params">()</span>
</span>{<font></font>
      [[ -n $LOPID ]] &amp;&amp; kill $LOPID          (<span class="hljs-number">1</span>)<font></font>
}<font></font>
<font></font>
<span class="hljs-function">trap cleanup <span class="hljs-title">EXIT</span>                             <span class="hljs-params">(<span class="hljs-number">2</span>)</span>
bash looper.sh $1 &amp;                           <span class="hljs-params">(<span class="hljs-number">3</span>)</span>
LOPID</span>=$!                                      (<span class="hljs-number">4</span>)<font></font>
#   <font></font>
sleep <span class="hljs-number">3</span><font></font>
<font></font>
<span class="hljs-keyword">while</span> <span class="hljs-keyword">true</span>
<span class="hljs-keyword">do</span><font></font>
      kill -SIGUSR1 $LOPID<font></font>
      sleep <span class="hljs-number">5</span>
done &gt;&amp;<span class="hljs-number">2</span>                                      (<span class="hljs-number">5</span>)</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(1)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุธุฑูุง ูุฃู ูุฐุง ุงูุจุฑูุงูุฌ ุงููุตู ุณูุดุบู ูุตูุตูุง ุฃุฎุฑู ุ ููุฌุจ ุชูุธููู ุจุนุฏ ุงูุนูู. ุฅุฐุง ุชู ุชุฎุฒูู ูุนุฑู ุงูุนูููุฉ ูู LOPID ุ ูุณูุฎุฒู ุงููุชุบูุฑ ุงููููุฉ ุ ูุจุงูุชุงูู ุณุชุฑุณู ุงููุธููุฉ ุฅุดุงุฑุฉ ุฅูู ูุฐู ุงูุนูููุฉ ุจุงุณุชุฎุฏุงู ุงูุฃูุฑ kill. ุฅุฐุง ูู ุชุญุฏุฏ ุฅุดุงุฑุฉ ูุญุฏุฏุฉ ูู ุฃูุฑ ุงูุฅููุงู ุ ูุณูุชู ุฅุฑุณุงู ุฅุดุงุฑุฉ SIGTERM ุงูุชุฑุงุถููุง. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(2)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฃูุฑ EXIT ููุณ ุฅุดุงุฑุฉ. ูุฐู ุญุงูุฉ ุฎุงุตุฉ ุนูุฏูุง ุชุฎุจุฑ ุนุจุงุฑุฉ ุงูุงุนุชุฑุงุถ ุงูุตุฏูุฉ ุจุงุณุชุฏุนุงุก ูุฐู ุงููุธููุฉ (ูู ูุฐู ุงูุญุงูุฉ ุงูุชูุธูู) ุฅุฐุง ูุงูุช ุงูุตุฏูุฉ ุงูุชู ุชููุฐ ูุฐุง ุงูุจุฑูุงูุฌ ุงููุตู ุนูู ูุดู ุงูุฅุบูุงู. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(3)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ูุจุฏุฃ ุงูุนูู ุงูุญูููู. ูุชู ุชุดุบูู ุงูุจุฑูุงูุฌ ุงููุตู looper.sh ุ ูุงูุฐู ุณูุชู ุชุดุบููู ูู ุงูุฎูููุฉ: ููู ูุนูู ูุฐุง ุงูุจุฑูุงูุฌ ุงููุตู ุทูุงู ุงูุฏูุฑุฉ (ุจุฏูู ุงูุชุธุงุฑ ุงูุฃูุฑ ูุฅููุงู ุงูุนูู) ุ ูุชู ูุตูู ุนู ููุญุฉ ุงูููุงุชูุญ. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(4)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุง ุ ูุชู ุชุฎุฒูู ูุนุฑู ุนูููุฉ ุงูุจุฑูุงูุฌ ุงููุตู ุงูุฐู ุจุฏุฃูุงู ููุชู ูู ุงูุฎูููุฉ. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(5) ุนูููุฉ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅุนุงุฏุฉ ุงูุชูุฌูู ูุฐู ูู ูุฌุฑุฏ ุฅุฌุฑุงุก ุงุญุชุฑุงุฒู. ูุฌุจ ุฃูุง ูุชู ุฎูุท ุฌููุน ุงููุฎุฑุฌุงุช ุงููุงุฏูุฉ ูู ุญููุฉ ูู ุงูููุช ุฃู ูู ุนุจุงุฑุงุช ุงููุชู / ุงูููู (ุนูู ุงูุฑุบู ูู ุฃููุง ูุง ูุชููุนูุง) ูุน ุฃู ูุงุชุฌ ูู ูุธููุฉ looper.sh ุ ูุงูุชู ุ ุนูู ุงูุฑุบู ูู ุฃููุง ุชุนูู ูู ุงูุฎูููุฉ ุ ุชุฑุณููุง ุฅูู stdout ุนูู ุฃู ุญุงู. ูุฐูู ุ ูุนูุฏ ุชูุฌูู ุงูุจูุงูุงุช ูู stdout ุฅูู stderr.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุชูุฎูุต ุ ูุฑู ุฃูู ุนูู ุงูุฑุบู ูู ูุถุน ุฏุงูุฉ looper.sh ูู ุงูุฎูููุฉ ุ ูุชู ุชุฎุฒูู ูุนุฑู ุงูุนูููุฉ ุงูุฎุงุต ุจูุง ูู ูุชุบูุฑ shell. ูู ุฎูุณ ุซูุงูู ุ ูุฑุณู ุงูุจุฑูุงูุฌ ุงููุตู tailcount.sh ุฅุดุงุฑุฉ SIGUSR1 ุฅูู ูุฐู ุงูุนูููุฉ (ุงูุชู ูุชู ุชูููุฐูุง ูู ูุธููุฉ looper.sh) ุ ูุงูุชู ุจุฏูุฑูุง ุชุณุชุฏุนู ุงูุจุฑูุงูุฌ ุงููุตู looper.sh ูุทุจุงุนุฉ ุงูุนุฏุฏ ุงูุญุงูู ูู ุงูุฎุทูุท ุงูุซุงุจุชุฉ ููู ูุฅุนุงุฏุฉ ุชุดุบูู ุงูุนุฏ. ุจุนุฏ ุงูุฎุฑูุฌ ุ ุณูุชู ูุณุญ ุงูุจุฑูุงูุฌ ุงููุตู tailcount.sh ุนู ุทุฑูู ุฅุฑุณุงู ุฅุดุงุฑุฉ SIGTERM ุฅูู ูุธููุฉ looper.sh ูููุงุทุนุชู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจูุณุงุนุฏุฉ ูุตูู ูุชุงุจููู - ุจุฑูุงูุฌ ูุตู ูููู ุจุฅุฌุฑุงุก ุนุฏ ุงูุฃุณุทุฑ ุ ููุต ุจุฑูุฌู ูุน ุณุงุนุฉ ุชูููุช (ูุคูุช) ูุชุญูู ูู ุงูุจุฑูุงูุฌ ุงููุตู ุงูุฃูู - ููููู ุงูุญุตูู ุนูู ุงูุฅุฎุฑุงุฌ (ุนุฏุฏ ุงูุฃุณุทุฑ ููุชุฑุฉ ูุนููุฉ) ุ ุจูุงุกู ุนูู ุงูุจุฑูุงูุฌ ุงููุตู ุงูุชุงูู ุงูุฐู ุณูููู ุจุฅูุดุงุก ุฑุณู ุจูุงูู. ูุทูู ุนููู ูุซู ูุฐุง:</font></font><br>
<br>
<code>bash tailcount.sh | bash livebar.sh</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุฑุฃ ุงูุจุฑูุงูุฌ ุงููุตู livebar.sh ุงูุจูุงูุงุช ูู stdin ููุทุจุน ุงูุฅุฎุฑุงุฌ ุฅูู stdout ุ ุณุทุฑ ูุงุญุฏ ููู ุณุทุฑ ุฅุฏุฎุงู (ูุซุงู 8.5). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุซุงู 8.5 </font><font style="vertical-align: inherit;">livebar.sh</font></font><br>
<br>
<pre><code class="java hljs">#!/bin/bash -<font></font>
#<font></font>
# Bash  <font></font>
# livebar.sh<font></font>
#<font></font>
# :<font></font>
#    ยซยป <font></font>
#<font></font>
# :<font></font>
# &lt;output from other script or program&gt; | bash livebar.sh<font></font>
#<font></font>
<font></font>
<span class="hljs-function">function <span class="hljs-title">pr_bar</span> <span class="hljs-params">()</span>                                         <span class="hljs-params">(<span class="hljs-number">1</span>)</span>
</span>{<font></font>
      local raw maxraw scaled<font></font>
      raw=$<span class="hljs-number">1</span>
      maxraw=$<span class="hljs-number">2</span><font></font>
      ((scaled=(maxbar*raw)/maxraw))<font></font>
      ((scaled == <span class="hljs-number">0</span>)) &amp;&amp; scaled=<span class="hljs-number">1</span> #   
      <span class="hljs-keyword">for</span>((i=<span class="hljs-number">0</span>; i&lt;scaled; i++)) ; <span class="hljs-keyword">do</span> printf <span class="hljs-string">'#'</span> ; done<font></font>
      printf <span class="hljs-string">'\n'</span><font></font>
<font></font>
} # pr_bar<font></font>
<font></font>
maxbar=<span class="hljs-number">60</span>     #         (<span class="hljs-number">2</span>)<font></font>
MAX=<span class="hljs-number">60</span>
<span class="hljs-function"><span class="hljs-keyword">while</span> read dayst timst qty
<span class="hljs-keyword">do</span>
      <span class="hljs-title">if</span> <span class="hljs-params">(( qty &gt; MAX )</span>)                                   <span class="hljs-params">(<span class="hljs-number">3</span>)</span>
      then
           let MAX</span>=$qty+$qty/<span class="hljs-number">4</span>    #   <font></font>
           echo <span class="hljs-string">"                      **** rescaling: MAX=$MAX"</span><font></font>
      fi<font></font>
      printf <span class="hljs-string">'%6.6s %6.6s %4d:'</span> $dayst $timst $qty         (<span class="hljs-number">4</span>)<font></font>
      pr_bar $qty $MAX<font></font>
done<font></font>
</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(1)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุนุฑุถ ุงูุฏุงูุฉ pr_bar ุณูุณูุฉ ูู ุนูุงูุงุช ุงูุชุตููู ุงูุชู ุชู ููุงุณูุง ุงุณุชูุงุฏูุง ุฅูู ุงููุนููุงุช ุงูููุฏูุฉ ุฅูู ุงูุญุฌู ุงูุฃูุตู. </font><font style="vertical-align: inherit;">ูุฏ ุชุจุฏู ูุฐู ุงูููุฒุฉ ูุฃูููุฉ ุ ููุง ุงุณุชุฎุฏููุงูุง ุณุงุจููุง ูู ุงูุจุฑูุงูุฌ ุงููุตู histogram.sh. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(2)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฐุง ูู ุฃุทูู ุญุฌู ูุนูุงูุฉ ุงูุชุตููู ุงูุชู ูููููุง ุงูุณูุงุญ ุจูุง (ูุชู ุฐูู ุจุฏูู ุงูุชูุงู ุงูุณุทุฑ). </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(3)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุณูููู ุญุฌู ุงูููู ุงููุทููุจ ุนุฑุถูุงุ ุจุฏูู ูุนุฑูุฉ ุฐูู ูุณุจููุง (ุนูู ุงูุฑุบู ูู ุฃูู ูููู ุชูููุฑ ูุฐู ุงูุจูุงูุงุช ุฅูู ุงููุต ุงูุจุฑูุฌู ููุณูุทุฉ) ุ ูุฅู ุงููุต ุงูุจุฑูุฌู ุณูุชุชุจุน ุงูุญุฏ ุงูุฃูุตู. ุฅุฐุง ุชู ุชุฌุงูุฒ ูุฐุง ุงูุญุฏ ุงูุฃูุตู ุ ูุณุชุจุฏุฃ ุงููููุฉ ูู "ุงูุชุฏุฑุฌ" ูุงูุฎุทูุท ุงููุนุฑูุถุฉ ุงูุขู ุ ูุณูุชู ุฃูุถูุง ุชุบููุฑ ุญุฌู ุงูุฎุทูุท ุงููุณุชูุจููุฉ ุฅูู ุงูุญุฏ ุงูุฃูุตู ุงูุฌุฏูุฏ. ูุถูู ุงููุต ุงูุจุฑูุฌู 25ูช ุฅูู ุงูุญุฏ ุงูุฃูุตู ูููููุฉ ุ ูุฐูู ููุณ ูู ุงูุถุฑูุฑู ุชุบููุฑ ุงููููุฉ ุฅุฐุง ุฒุงุฏุช ุงููููุฉ ุงูุฌุฏูุฏุฉ ุงูุชุงููุฉ ูู ูู ูุฑุฉ ุจูุณุจุฉ 1-2ูช ููุท. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(4)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุญุฏุฏ printf ุงูุญุฏ ุงูุฃุฏูู ูุงูุฃูุตู ูุนุฑุถ ุฃูู ุญูููู ูุชู ุทุจุงุนุชููุง. </font><font style="vertical-align: inherit;">ูุฐู ูู ุทูุงุจุน ุงูุชุงุฑูุฎ ูุงูููุช ุงูุชู ุณูุชู ุงูุชุทุงุนูุง ุฅุฐุง ุชู ุชุฌุงูุฒ ููู ุงูุนุฑุถ. </font><font style="vertical-align: inherit;">ูุนุฑุถ ุงููููุฉ ุจุงููุงูู ุ ุญุฏุฏ ุนุฑุถูุง ุงููููู ูู ุฃุฑุจุนุฉ ุฃุญุฑู. </font><font style="vertical-align: inherit;">ูู ูุฐู ุงูุญุงูุฉ ุ ุนูู ุงูุฑุบู ูู ุงููููุฏ ุ ุณูุชู ุทุจุงุนุฉ ุฌููุน ุงูููู. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุงู ุนุฏุฏ ุงูุฃุญุฑู ูู ุงูููู ุฃูู ูู ุฃุฑุจุนุฉ ุ ูุณูุชู ุงุณุชููุงู ุงูุฃุญุฑู ุงูููููุฏุฉ ุจูุณุงูุงุช. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุธุฑูุง ูุฃูู ุชุชู ูุฑุงุกุฉ ูุฐุง ุงููุต ุงูุจุฑูุฌู ูู stdin ุ ููููู ุชุดุบููู ุจููุณู ูุชุฑู ููู ูุชุตุฑู. </font><font style="vertical-align: inherit;">ููุง ูุซุงู:</font></font><br>
<br>
<pre><code class="java hljs">$ bash  livebar.sh
<span class="hljs-number">201010</span> <span class="hljs-number">1020</span> <span class="hljs-number">20</span>
<span class="hljs-number">201010</span>     <span class="hljs-number">1020</span> <span class="hljs-number">20</span>:####################
<span class="hljs-number">201010</span> <span class="hljs-number">1020</span> <span class="hljs-number">70</span>
                       **** rescaling: MAX=<span class="hljs-number">87</span>
<span class="hljs-number">201010</span>     <span class="hljs-number">1020</span> <span class="hljs-number">70</span>:################################################
<span class="hljs-number">201010</span> <span class="hljs-number">1020</span> <span class="hljs-number">75</span>
<span class="hljs-number">201010</span> <span class="hljs-number">1020</span> <span class="hljs-number">75</span>:###################################################<font></font>
^C</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ูุฐุง ุงููุซุงู ุ ูุชู ุฎูุท ุงูุฅุฏุฎุงู ูุน ุงูุฅุฎุฑุงุฌ. </font><font style="vertical-align: inherit;">ููููู ุฃูุถูุง ูุถุน ุงูุฅุฏุฎุงู ูู ููู ูุฅุนุงุฏุฉ ุชูุฌููู ุฅูู ุจุฑูุงูุฌ ูุตู ูุฑุคูุฉ ุงูุฅุฎุฑุงุฌ ููุท:</font></font><br>
<br>
<pre><code class="java hljs">$ bash livebar.sh &lt; testdata.txt<font></font>
bash livebar.sh &lt; x.data<font></font>
<span class="hljs-number">201010</span> <span class="hljs-number">1020</span> <span class="hljs-number">20</span>:####################<font></font>
                 **** rescaling: MAX=<span class="hljs-number">87</span>
<span class="hljs-number">201010</span> <span class="hljs-number">1020</span> <span class="hljs-number">70</span>:################################################
<span class="hljs-number">201010</span> <span class="hljs-number">1020</span> <span class="hljs-number">75</span>:###################################################<font></font>
$</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ยปูููู ุงูุนุซูุฑ ุนูู ูุฒูุฏ ูู ุงููุนูููุงุช ุญูู ุงููุชุงุจ ุนูู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููุน ุงููุงุดุฑ ุนูู ุงูุฅูุชุฑูุช</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ยป </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุญุชููุงุช</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ยป </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุชุทูุงุช</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ูู Khabrozhiteley ุฎุตู 25 ูช ุนูู ุงููุณููุฉ - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bash</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ุนูุฏ ุฏูุน ุงููุณุฎุฉ ุงููุฑููุฉ ูู ุงููุชุงุจ ุ ูุชู ุฅุฑุณุงู ูุชุงุจ ุฅููุชุฑููู ุนุจุฑ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar501516/index.html">ุฏุนูุง ูุทูุฆ ุงููุฑุงุบ ุ! ุฃูููุณู ููุณููุณูู</a></li>
<li><a href="../ar501520/index.html">C # 8 ูุตูุงุญูุฉ ูุงุบูุฉ. ููู ูุนูุด ูุน ูุฐุง</a></li>
<li><a href="../ar501522/index.html">ูุฏูุงุช ูุฌุงููุฉ ุนูู Skillbox: ูุชุงุจุฉ ุงูุฃูุนุงุจ ูู PHP ู Unity ู Unreal Engine</a></li>
<li><a href="../ar501524/index.html">ุฃุณุฑุงุฑ ูุฒุงููุฉ ุงููุฌุงูุงุช ุงูููุฑููุบูุงุทูุณูุฉ ููุฃุฑุถ ูุงููุงุฆู ุงูุญู</a></li>
<li><a href="../ar501526/index.html">ููุงุฐุง ุชุนุชุจุฑ ุงููุบุฉ ุงูุฅูุฌููุฒูุฉ ุงูููุฏูุฉ "ูุฐุฑุฉ" ููุง ุนูุงูุฉ ูููู ุฑููุฒ ุจูุงุ</a></li>
<li><a href="../ar501534/index.html">ุงูุขู ูุน COVID-19 ููุงู ุฃูุถูุง ุทูุญ ุฌูุฏู</a></li>
<li><a href="../ar501536/index.html">ูุฎุตุต: ูุตุฉ ุญูู ููููุฉ ุชุญูู ุณุทุฑ ูู ุงูุฑูุฒ ุฅูู ููููุทู ูู ุงููุญู</a></li>
<li><a href="../ar501538/index.html">ุงููุณุงูุฉ ุงูุจุงุฏุฆุฉ ูู Python - ุฎูุงุฑ ุงูุญู</a></li>
<li><a href="../ar501544/index.html">ูุงุชู ุฐูู ูุซุงูู</a></li>
<li><a href="../ar501546/index.html">"ููุงุฐุง ุฃุฌุชุงุฒ ูุฐุงุ" - ูุดุฑุญ ุนููุงุก ุงูููุณ ููููุฉ ุฅูุฌุงุฏ ุงููุนูู ูู ุนุฒูุฉ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>