<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>♌️ 🧑🏼‍🤝‍🧑🏼 🖕🏽 自家製ライダー：OpenTOFLidar 👦🏾 👩🏽‍🚀 🏐</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="この記事では、私の脈のプロジェクト（TOF）オープンソースLIDARについて話したいと思います。それをどのように行ったのか、そしてどのようにして達成した結果についてです。
  
 理論のビット
 

動作原理によるレーザー距離計は、主に3つのタイプに分類できます。
 

1. 三角測量。このタイプの...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>自家製ライダー：OpenTOFLidar</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/485574/"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">この記事では、私の脈のプロジェクト（TOF）オープンソースLIDARについて話したいと思います。それをどのように行ったのか、そしてどのようにして達成した結果についてです。</font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><img src="https://habrastorage.org/getpro/habr/post_images/a18/123/970/a1812397041976e69c7d51911e5e547c.jpg" alt="トップ画像"></a></p><a name="habracut"></a> <br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">理論のビット</font></font></h3><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">動作原理によるレーザー距離計は、主に3つのタイプに分類できます。</font></font></p><br>
<ol>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">三角測量</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。このタイプの距離計は、ジオメトリの法則を使用して距離を決定します。距離計は、レーザービームと光検出器に入射する反射光ビームの間の角度を測定し、この角度の大きさとレーザーと光検出器の間の距離から、対象物までの現在の距離を計算します。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらの距離計には利点があります：</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 -他のすべての距離計の中で最も簡単です。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 ・近距離でも高精度な距離測定ができます。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 -彼らは十分に高速で距離を測定することができます-10 kHzまで。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、不利な点もあります。- </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 距離測定の精度は、距離が増加するにつれて大幅に低下します。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 -レーザーは長時間オンにしておく必要があるため（フォトディテクターの感度は限られています）、安全のためにパワーを制限する必要があります。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 -距離計の寸法が小さいほど、距離測定の精度が低下します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ロボット掃除機で使用されているのはこれらの距離計であり、アマチュアロボットで非常に人気のあるRPLIDAR距離計です。彼らは通常100〜400ドルかかります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
：私は私の記事で、このタイプの距離計について詳細に書いた</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">手製のスキャニングレーザー距離計</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">や</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">レーザー距離センサーのリバースエンジニアリング</font></font></a><br>
</li>
<li><b></b>.      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"></a>  .        «»           ,     ,     .<br>
    :<br>
 —     (   ).      /.<br>
 —    .<br>
   :<br>
 —   ,     .    ,         ,     .<br>
 —     .<br>
 —     .<br>
<br>
     , .            .      «Hokuyo URG-04LX»   .<br>
 3D- (range imaging camera)     .<br>
<br>
         : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">   </a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">   : -</a><br>
</li>
<li><b></b>.    «», Time-Of-Flight (TOF).   «»,       —    «»      .     , -       ,    .<br>
<br>
    :<br>
 —     ,       ( ).         (  ).<br>
 —    .   VL53L0X    .<br>
 —       — 100   .<br>
   :<br>
 —       (&lt; ±0.5 ).<br>
 —     .<br>
<br>
     ,    ,   , ,  ,     — ..   ,     .<br>
<br>
       -: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">-   Leuze RS4</a><br>
 -    ,      —  .<br>
</li>
</ol><br>
<h3>   </h3><br>
<p>       .    (2D/3D),       .</p><br>
<p>      :<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><img src="https://habrastorage.org/getpro/habr/post_images/efc/14a/17a/efc14a17a246447bc47024046ca63c5b.png" alt="構造"></a><br>
    :</p><br>
<ul>
<li>  .     ,  .      —           .    —    /  ,     —     .</li>
<li> .  ,     ;    ,    ,     .    —     ,              .</li>
<li>  .    «» —    «»  .  1         6.6  —   !    1 ,       66 . <br>
       —         «»,  ,     1     &gt; 15 ! ,     ,     ,  . <br>
           TDC (<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">Time-to-digital converter</a>).        ,    —   .     ,    TDC: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> Time-To-Digital (TDC):         FPGA</a><br>
</li>
<li> (MCU).          ,    TDC,    ,   ,     ,    .</li>
</ul><br>
<p>       —     .<br>
 ,   ,      (..     ,   ).  ,    ,       .</p><br>
<p>    ,      ,      —   .  ,       ,   .</p><br>
<h3></h3><br>
<p> ,       ,     ,          .<br>
  .</p><br>
<h4>  </h4><br>
<p>              OSRAM "<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">SPL PL90_3</a>".    :</p><br>
<img src="https://habrastorage.org/webt/nk/tp/sa/nktpsa50oyr5gudy-9xy_iwbzhw.jpeg"><br>
<p>    905 ,       75 .  ,           (CW).  ,    ,        — 30!<br>
       (  ):<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><img src="https://habrastorage.org/getpro/habr/post_images/7b3/1af/794/7b31af794cf8ca8ebac96f81b66e5354.png" alt="スケマティックレーザー"></a><br>
    D4.      .   Q2 ,   ,  17    R18   Vlaser. ,      ,      .       —   16    20        2,5 .<br>
      DA6  ,    ,  Q2       ,      .        .       ,             ,        .</p><br>
<p>    —             —        R18,      0.1 .        0.5 ,         .</p><br>
<p> R19      .       U.FL,          ,   .      Vlaser=15V<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><img src="https://habrastorage.org/getpro/habr/post_images/576/62d/cfb/57662dcfb91951ef5149f3fe5db94c49.png" alt="TEK00010"></a>:<br>
,      25 ,         .           15.<br>
    APD-       ,     ( 2,  ):<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><img src="https://habrastorage.org/getpro/habr/post_images/353/b9c/872/353b9c872b161cfebeda64d68592cc9c.png" alt="レーザー信号"></a><br>
,      —  10.</p><br>
<p>  Vlaser,     .        DA1   DC-DC ,       .</p><br>
<p> ,    TDC  ,   ,      DA5.   —  , ,       .</p><br>
<h4> </h4><br>
<p>            <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"> </a> (avalanche photodiode — APD).     ,     ,      .       ,             —      .   APD    (&gt; 100$)  ,    .<br>
 ,  Digikey  MTAPD-07-013    24$.        .  Aliexpress      AD500-8  10-15$.    ,    Mouser      100$.   ,         ,      .        0.5 .  aliexpress      AD230-8  24$,      0.2 .     ,    . </p><br>
<p>    —            .    ,   datasheet   AD500-8 TO:<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><img src="https://habrastorage.org/getpro/habr/post_images/f39/681/fdc/f39681fdc6de0eb69a3938e1bb44d685.png" alt="apd電圧"></a><br>
,       ,  70.    90       .        .<br>
   ,      —     ,     ,    .        (     ).</p><br>
<p> ,       ,      DC-DC ,      .       Q1, L5, D1, C10.        R8/R9.       .   — 100 .<br>
         ,   ,        ,          .   , RC- R10-C11      .</p><br>
<p>      .       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"> </a> (<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">TIA</a>).      ,       .             :</p><br>
<img src="https://habrastorage.org/getpro/habr/post_images/60d/949/903/60d949903d833f492046d8036ceeed61.png" alt="画像"><br>
<p>  TIA  , , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"></a>.</p><br>
<p>      TIA         .       ,    MAX3658, MAX40658, OPA858.      MAX3658.<br>
       ,   18000,    — 580MHz.  ,    ,    (DC Cancellation Circuit).<br>
  —      :<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><img src="https://habrastorage.org/getpro/habr/post_images/d5e/776/538/d5e77653838d04c4cd85317146aa15e5.png" alt="ティア"></a><br>
   Push-Pull ,  Open Collector +     ,   (<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">Current Mode Logic — CML</a>).<br>
 ,        ,   <i></i>   , ..       .        .</p><br>
<p>      —          .</p><br>
<blockquote>!  MAX3658     !     .            D6,        TIA.</blockquote><p> ,          4  ,   ,  -  .           .</p><br>
<p>        :<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><img src="https://habrastorage.org/getpro/habr/post_images/479/4f0/af7/4794f0af7f323ada88a8115eabd3b3c4.png" alt="回路図-APD-b"></a><br>
 J1   ,       TIA.<br>
 C12, C13     —   .</p><br>
<h4>  </h4><br>
<p>    TDC    .     .  TDC7200,  TDC-GP21/22,        .      TDC-GP21.</p><br>
<p>         ,       TOF .    (BIN)    ~90 .  TDC     SPI.<br>
TDC       ( STOP1/2),            —        TIA.   TDC      "FIRE"     ,      .       TDC              ( TDC "START"   TDC   "FIRE").          "START"  "STOP" — 3.5 ,         "START"         .         .</p><br>
<p>TDC-GP21        .   ,                  ( ,        ),       .      STOP2    ,        TIA.  ,        ,     .    ,     .</p><br>
<p> ,       ,    TDC . ,          (ALU),   , .. ""     .        TDC,     , ,     .<br>
  STOP2 — STOP1   " ",        ,    .         TDC.</p><br>
<p>  TIA       (&lt;200 ),  TDC   .        ,    DA4 — ADCMP600.     :<br>
Propagation Delay ( ): 3.5 <br>
Overdrive Dispersion: 1.2 <br>
Common-Mode Dispersion: 200 <br>
 ,    ,          .        TTL/CMOS ,  - LVPECL,      TDC.<br>
     TIA ,          ,    ,  :<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><img src="https://habrastorage.org/getpro/habr/post_images/9fb/a29/5da/9fba295dac4c1afb16910f4dcfde1a9f.png" alt="回路図-TDC"></a><br>
    ,      "COMP_DAC".         R15.      TIA,        .  ,      ,        ,     0   .      TIA,      C12, C13,   R15  ,       0    1.</p><br>
<h4> </h4><br>
<p><b> (MCU)</b>.       STM32F303CBT6.       :<br>
  ,   .<br>
  APD.<br>
  APD,      .<br>
    ,   .<br>
  TDC (,  ,  ).<br>
    .<br>
   (     — ).<br>
    —       ,    .<br>
  ,   TDC     .<br>
     Flash-.</p><br>
<p>     .      ,   ,      :             ,      :</p><br>
<img src="https://img-fotki.yandex.ru/get/198361/14557097.6/0_10da03_2cd9184c_orig.bmp" alt="画像"><br>
<p>   ,           .           .  ,  TIA      —             .  ,       TDC (    ),        .      .</p><br>
<p>       .    ,  ,      .       ""   1000 ,           .<br>
   — ,  2D  . </p><br>
<p><b>  </b>.         (<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">BLDC</a>),     .       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">DRV11873</a>,          .         ,      MCU.      datasheet      . , ,     +   —        .   ,      back-EMF  DRV11873.</p><br>
<p>       :<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><img src="https://habrastorage.org/getpro/habr/post_images/088/7f0/cf5/0887f0cf524329352d6a3c694374f33a.png" alt="Schematic-v4b1"></a></p><br>
<p>        ,   ,       15         .     ,          —              .    ,         —    (LGND),    (MGND),    (GND).      .<br>
              D4,  Q2, R19, C17 — ,    ,     .<br>
        TIA.<br>
,           .        ,     ,      .</p><br>
<p>     (   ):<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><img src="https://habrastorage.org/getpro/habr/post_images/b1c/e81/237/b1ce81237db5537150a1c0d2286d874e.jpg" alt="PCBボトム"></a></p><br>
<p>    (  ):<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><img src="https://habrastorage.org/getpro/habr/post_images/dcc/952/f43/dcc952f431202642c47cc9dc14663f23.jpg" alt="PCBトップ"></a></p><br>
<h4> </h4><br>
<p> ,    ,    ,      ,       .  ,     ,   ,   .        .</p><br>
<p>   ,     ,        .        ,    ,      ,     () :</p><br>
<img src="https://habrastorage.org/getpro/habr/post_images/a68/078/a3f/a68078a3f250cc891ddb71b22bb07b7e.gif" alt="画像"><br>
<p><i>    thorlabs.de</i><br>
        M12 —      .        ,     .</p><br>
<p>      ,    "SPL PL90_3"    200 X 10 μm.    ,        .  ,      ,    ,          . -         ,   . ,           (    ).</p><br>
<p>   ,         .    —    :<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><img src="https://habrastorage.org/getpro/habr/post_images/307/d0b/984/307d0b98404822d390ac1ff5a3157afc.png" alt="レーザービーム"></a><br>
      12 ,       1 ;      25     ~0.45 .     Aliexpress   :<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><img src="https://habrastorage.org/getpro/habr/post_images/391/810/3da/3918103dab0b86666c7f4d7af922cc9e.png" alt="レーザーレンズ"></a><br>
 : 25 ; M12*0,5; 1/3; F2.0.<br>
   ,    ,     ,     : - (M12 Extension Adapter).<br>
        1.8 ():<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><img src="https://habrastorage.org/getpro/habr/post_images/4ed/779/333/4ed7793330283f707d0d23c6c3f0bc87.jpg" alt="25mmとテープ2"></a><br>
   —       4 . ,       2.5 ,      10 .</p><br>
<p>,           .     ,           —      .       .          20 .</p><br>
<p>     ,    ,   ,     M12  web-:<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><img src="https://habrastorage.org/getpro/habr/post_images/8dc/61a/480/8dc61a4809ae558fe76d556ddb153287.jpg" alt="IMG-7400"></a><br>
    ,      ,  -    ( 13 )       .</p><br>
<p>     .         —  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"> </a>.     —             -.  ,       .           CS-mount.      ,   .<br>
         25mm; F1.2; CS 1/2.5". ,     ,         — 25 ,        .   ,        20 , ,   ,      14 .<br>
     ,    25      CS-.        (     ),       ,       .</p><br>
<p> ,          (  ),          ,     905 .    ,          .<br>
     —         .</p><br>
<p>,     ,           ,       .    APD     (0.5 )  -     .  ,        .</p><br>
<p>       :<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><img src="https://habrastorage.org/getpro/habr/post_images/120/c20/e43/120c20e43dc0d41ada95b6ed9ecd82bf.jpg" alt="距離計"></a></p><br>
<p>    - ,      —      .  ,      ,        ,   .         ,        .       :<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><img src="https://habrastorage.org/getpro/habr/post_images/8ad/bdd/b90/8adbddb90802dd1a50bee564a32ac706.gif" alt="GIF信号"></a><br>
       .          .</p><br>
<p>   ,     .</p><br>
<h3></h3><br>
<p>    (solid-state) ,      2D   —   ,    ,   ,   45     .<br>
  : </p><br>
<ul>
<li>    ,   </li>
<li>         </li>
<li>     ,      </li>
<li>      360 </li>
</ul><br>
<p>:</p><br>
<ul>
<li> -        .       ,  + </li>
<li>    </li>
<li>  ,    </li>
<li>   </li>
<li>   </li>
</ul><br>
<p>         PRLIDAR.</p><br>
<p>   :</p><br>
<ul>
<li>       ,          </li>
<li>        </li>
<li>  ,          </li>
</ul><br>
<p>:</p><br>
<ul>
<li>  -    ,      «».        -  ,           ,      </li>
<li>     </li>
<li>  </li>
</ul><br>
<p>           (  15 /),     .<br>
    —       (        ).<br>
      ,        —     .     — ,       .       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">   </a>.     ,        .      ,     - -      .      Aliexpress ,         15$.<br>
 ,     —      2 .   ,    ,    ,       .         0.7    905 ,       ~0.5   ,     .<br>
   905         ,     .       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"></a>.</p><br>
<p>  - .        —        .     —       .<br>
          (   ), ,  ,      .        ,            ,         .<br>
       (BLDC).     Aliexpress   Outrunner-,  ,      :<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><img src="https://habrastorage.org/getpro/habr/post_images/0fd/ebc/1ac/0fdebc1acbe243bde29018774f8d6ed4.jpg" alt="モーター"></a></p><br>
<p>    ,     —  .         ,       .    :<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><img src="https://habrastorage.org/getpro/habr/post_images/f32/172/9e3/f321729e368f7b4e17d64b2c9abb0da2.png" alt="ミラーホルダー"></a></p><br>
<p> ,    ,   ,        .        ,   65       .       —     ,     :<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><img src="https://habrastorage.org/getpro/habr/post_images/f5d/5d6/1be/f5d5d61be2f487e9fcf8284a61aa02cb.jpg" alt="エンコーダー"></a><br>
     .      ,   MCU.            :<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><img src="https://habrastorage.org/getpro/habr/post_images/484/ac2/5cf/484ac25cfc5d2be4e1e10779c28b980d.png" alt="DSOエンコーダー"></a></p><br>
<p> ,     :<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><img src="https://habrastorage.org/getpro/habr/post_images/094/511/836/09451183634bc97b751eb8c8874b8dfb.jpg" alt="ライダー写真"></a></p><br>
<p>      ,    .       .         ,       ,      ,  TDC.</p><br>
<h3></h3><br>
<p>       ,     905 .     ,    ,         .</p><br>
<blockquote>!        ,          1 ,      .             —   0.35  (     16).      ,     !            !</blockquote><p>   -          4.4 ,   ,    ,      .   MCU     ,    ,      .</p><br>
<h3> </h3><br>
<p>          .<br>
           .        ,   —    TDC:<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><img src="https://habrastorage.org/getpro/habr/post_images/47c/ac9/79b/47cac979b6ed1f0b6ad88dcd5be65fe5.png" alt="テストユーティリティ画面"></a><br>
        100 ,     MCU       .        ,  ,     ,       ( START).</p><br>
<p>  ,   ,            100   .      :</p><br>
<ol>
<li>  .</li>
<li>   ,      .  ,   ,      .         (WIDTH)</li>
<li>   ,   ,      (Calibration).     .    :<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><img src="https://habrastorage.org/getpro/habr/post_images/fb1/d56/077/fb1d560779893423d154ae0e22dafdfb.png" alt="Testing-Utility-calib2"></a><br>
      —     BIN,    —    .           .       .      ,   .      MCU.</li>
</ol><br>
<p> ,   ,     .</p><br>
<p>           — .   —    :<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><img src="https://habrastorage.org/getpro/habr/post_images/fc0/48c/7e2/fc048c7e2907c1f3d11dda89ebd5c74f.png" alt="スキャンユーティリティ画面"></a><br>
,    ( )  .     ,         .      .<br>
                 .          (    ):<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><img src="https://habrastorage.org/getpro/habr/post_images/b9b/781/a61/b9b781a6130cc2d7c4f6faf4c88f01dc.png" alt="A1-10m"></a><br>
    — .          .</p><br>
<h3></h3><br>
<p>    :</p><br>
<ul>
<li> : 15 /.      MCU (   ),   (    )    —    ,    ,     . </li>
<li> .  BIN TDC  ~13 .        ,  ,      .<br>
 ,  -    10      20   3  (0.3%),   20  — 13 ,  25  — 17 ,  30  — 30  (1%).<br>
         2   . </li>
<li>  : 5 ,  ~25 (  )</li>
<li> : 11 </li>
<li> : 0.5 </li>
<li>  : 230 .    ,    </li>
<li>: 0.1   5  (0.5 ).      0.8 </li>
<li>: 50x50x120 </li>
</ul><br>
<h4>       </h4><br>
<p>  ,         —      .     APD,          .     0-40        .       APD,      .          (NTC),         —   ,      APD     .</p><br>
<p>    —  TDC.   TDC        (BIN).  ,      .   TDC    ,         —   .   BIN     MCU.</p><br>
<p>-         (,  )   ,        .              .           .</p><br>
<p>  "PCB_project_v4",   APD MTAPD-07-13,        Wi-Fi .    ,     Wi-Fi      (    ).   ,      .      ,         .  ,     ,     .<br>
              -.<br>
   ,    APD AD500-8     .    ,         ,     ,    .</p><br>
<p> MCU  .       ,    TDC  SPI  ,   polling,    .     ,     .</p><br>
<p>   —    (  ).       -   .    ,        .</p><br>
<p>-          .</p><br>
<h3> </h3><br>
<div class="spoiler"><b class="spoiler_title">  BOM</b><div class="spoiler_text"><div class="scrollable-table"><table>
<thead>
<tr>
<th></th>
<th>, $</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>PCB</strong></td>
<td>13</td>
<td>  10 </td>
</tr>
<tr>
<td> </td>
<td>12</td>
<td>SPL PL90_3</td>
</tr>
<tr>
<td>APD</td>
<td>10/24</td>
<td>AD500-8/MTAPD-07-013</td>
</tr>
<tr>
<td></td>
<td>~30</td>
<td>  (TIA, TDC, MCU, Mosfet ...)</td>
</tr>
<tr>
<td> </td>
<td>~7</td>
<td></td>
</tr>
<tr>
<td><strong></strong></td>
<td></td>
<td></td>
</tr>
<tr>
<td> APD</td>
<td>9</td>
<td>CS mount, 25mm</td>
</tr>
<tr>
<td> </td>
<td>2</td>
<td>CS mount</td>
</tr>
<tr>
<td> </td>
<td>7</td>
<td>M12, 25mm</td>
</tr>
<tr>
<td>   </td>
<td>5</td>
<td>M12</td>
</tr>
<tr>
<td> </td>
<td>12</td>
<td>  4 </td>
</tr>
<tr>
<td><strong></strong></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td>3</td>
<td> ,   20 </td>
</tr>
<tr>
<td>BLDC </td>
<td>2</td>
<td></td>
</tr>
<tr>
<td> </td>
<td>2</td>
<td></td>
</tr>
<tr>
<td>-</td>
<td></td>
<td></td>
</tr>
<tr>
<td><strong></strong></td>
<td>114</td>
<td></td>
</tr>
</tbody>
</table></div><br>
<p><u>  BOM        Github.</u></p></div></div><br>
<p>   <strong> </strong>   114$ (  APD AD500-8).  ,    ( PCB  )     ,        .        — 23$.       ,  ,       .</p><br>
<h3>  </h3><br>
<p>     ,      Roomba (       2012 ).     Orange Pi PC,    ROS   SLAM.    :<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><img src="https://habrastorage.org/getpro/habr/post_images/5d8/b13/08b/5d8b1308b2113b904e3700952eedd891.jpg" alt="IMG-7432a"></a></p><br>
<p> ,    ROS   ,      <i></i>.  ,  :<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><img src="https://habrastorage.org/getpro/habr/post_images/636/01c/8ce/63601c8ce5bd2befc9f6443fd4107177.png" alt="ros-rviz-screen"></a><br>
    — 1 .     ""    .</p><br>
<p>   SLAM    :<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><img src="https://habrastorage.org/getpro/habr/post_images/b69/582/614/b695826149fdacd479549e2a934d6161.png" alt="room-map3a"></a><br>
     ;           ,     ,             .</p><br>
<p>   ,   SLAM    :<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><img src="https://habrastorage.org/getpro/habr/post_images/a4e/1d3/23e/a4e1d323e473b4958d3ffc1507c12e04.png" alt="hector-slam-map-c"></a><br>
           .</p><br>
<p>  :</p><br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/lTPH_Xa9yCk" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<h3> </h3><br>
<p>    .   ,    Open Source <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"> Unruly</a>.  ,         —     . ,       —       .   ,         .</p><br>
<p>    Reference Design  TI: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">TIDA-00663</a>.     ,      —          .           .  ,      PIN-,   APD.</p><br>
<p>    (..  ,   FPGA   ),  ,  .         ,          ,     / .        Geber-       .</p><br>
<p>   Github: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">https://github.com/iliasam/OpenTOFLidar</a><br>
     , Gerber-,  BOM  , BOM         ,     ,   ,       ,   ROS.</p></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja485562/index.html">ゲームパッドでインターネットをサーフィンする（Javascript）</a></li>
<li><a href="../ja485564/index.html">Ngrok v2プロトコルのリバースエンジニアリング</a></li>
<li><a href="../ja485568/index.html">オープンソースアドベンチャーサイバーエレクトロニクス</a></li>
<li><a href="../ja485570/index.html">ILVリストのルートの集約と、それが立派なサービスを脅かす方法</a></li>
<li><a href="../ja485572/index.html">Visual Studio for MacでBlazorサーバーアプリケーションを使い始める</a></li>
<li><a href="../ja485576/index.html">ピアツーピアネットワークゲームの参加者間の接続を確立する機能</a></li>
<li><a href="../ja485578/index.html">子供と麻雀：何のために、いつ、どのように</a></li>
<li><a href="../ja485582/index.html">ポール・グラハム：「動物の群れとしての投資家」（2013）</a></li>
<li><a href="../ja485584/index.html">先週のフロントエンドの世界からの新鮮な食材のダイジェストNo. 399（2020年1月20日〜26日）</a></li>
<li><a href="../ja485586/index.html">ポール・グラハム：スタートアップのアイデア（スタートアップのアイデア、2005）</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>