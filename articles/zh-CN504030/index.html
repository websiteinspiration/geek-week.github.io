<!doctype html>
<html class="no-js" lang="zh-CN">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ’¡ ğŸ‘¨â€ğŸš’ ğŸ’” æˆ‘å¦‚ä½•åœ¨Reactå’ŒReact Nativeç¬¬2éƒ¨åˆ†ä¸Šé…ç½®Azure AD B2Cçš„æ•…äº‹ï¼ˆæ•™ç¨‹ï¼‰ ğŸ‡ ğŸŒ– ğŸ‘©ğŸ»â€ğŸš€</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="å‰è¨€
 ç»§ç»­ä½¿ç”¨Azure B2Cè¿›è¡Œå·¥ä½œçš„å‘¨æœŸã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†è®¨è®ºæœ€å›°éš¾å’Œæœ€ä¸æ˜æ˜¾çš„ç‚¹ï¼Œå³èº«ä»½ä½“éªŒæ¡†æ¶ã€‚
 
 ä¸»è¦ç›®æ ‡æ˜¯ä¸ºé‚£äº›æ ¹æœ¬æ²¡æœ‰ç›¸å…³çŸ¥è¯†çš„äººæ•´ç†ä¸€å¼ ç…§ç‰‡ï¼Œå¹¶å¸®åŠ©ä»–ä»¬å»ºç«‹ä¸€äº›åŸºæœ¬åŠŸèƒ½ã€‚
 
 é“¾æ¥åˆ°ç›¸å…³æ–‡ç« 
 
 

- ç¬¬1éƒ¨åˆ†ï¼šåœ¨Azure AD B2Cä¸Šæ„å»ºå’Œé…ç½®åº”ç”¨ç¨‹åº
- ç¬¬2éƒ¨åˆ†...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>æˆ‘å¦‚ä½•åœ¨Reactå’ŒReact Nativeç¬¬2éƒ¨åˆ†ä¸Šé…ç½®Azure AD B2Cçš„æ•…äº‹ï¼ˆæ•™ç¨‹ï¼‰</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/504030/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/hd/t3/3_/hdt33_njadqtiqzzjijasdxhzfy.png" alt="å›¾ç‰‡"></div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å‰è¨€</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç»§ç»­ä½¿ç”¨Azure B2Cè¿›è¡Œå·¥ä½œçš„å‘¨æœŸã€‚</font><font style="vertical-align: inherit;">åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†è®¨è®ºæœ€å›°éš¾å’Œæœ€ä¸æ˜æ˜¾çš„ç‚¹ï¼Œå³èº«ä»½ä½“éªŒæ¡†æ¶ã€‚</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸»è¦ç›®æ ‡</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ˜¯ä¸ºé‚£äº›æ ¹æœ¬æ²¡æœ‰ç›¸å…³çŸ¥è¯†çš„äººæ•´ç†ä¸€å¼ ç…§ç‰‡ï¼Œå¹¶å¸®åŠ©ä»–ä»¬å»ºç«‹ä¸€äº›åŸºæœ¬åŠŸèƒ½ã€‚</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é“¾æ¥åˆ°ç›¸å…³æ–‡ç« </font></font></b><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç¬¬1éƒ¨åˆ†ï¼šåœ¨Azure AD B2Cä¸Šæ„å»ºå’Œé…ç½®åº”ç”¨ç¨‹åº</font></font></a></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç¬¬2éƒ¨åˆ†ï¼šä½¿ç”¨èº«ä»½æ¡†æ¶ç»éªŒ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç¬¬3éƒ¨åˆ†ï¼šReactåº”ç”¨ç¨‹åºè¿æ¥</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç¬¬4éƒ¨åˆ†ï¼šè¿æ¥React Native App</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç¬¬5éƒ¨åˆ†ï¼šåœ¨.NET Core 3ä¸Šè¿æ¥å’Œé…ç½®åç«¯</font></font></li>
</ul><a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åŸºæœ¬è®¾å®š</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨å¼€å§‹åŸºæœ¬è®¾ç½®ä¹‹å‰ï¼Œæˆ‘æƒ³å‘Šè¯‰æ‚¨åŠ è½½æ–°è§„åˆ™çš„è¿‡ç¨‹æ˜¯å¦‚ä½•å‘ç”Ÿçš„ï¼š</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è½¬åˆ°èº«ä»½ä½“éªŒæ¡†æ¶</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç‚¹å‡»å‘é€ç”¨æˆ·æ”¿ç­–</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é€‰æ‹©ä¸€ä¸ªæ–‡ä»¶ï¼ˆä¸è¦å¿˜è®°å•å‡»â€œè¦†ç›–è‡ªå®šä¹‰ç­–ç•¥ï¼Œå¦‚æœå·²ç»å­˜åœ¨â€ï¼‰</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ‘ä»¬å‘é€ </font></font></li>
</ol><br>
<img src="https://habrastorage.org/webt/ql/ot/yv/qlotyvy_zbgh037nxdzdf4xw6uc.png" alt="å›¾ç‰‡"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å®é™…ä¸Šï¼Œè‡ªä¸Šæ¬¡ä»¥æ¥ï¼Œæ²¡æœ‰ä»»ä½•å˜åŒ–ï¼Œä½†æ˜¯ï¼š</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¦‚æœæ›´æ”¹æ–‡ä»¶</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TrustFrameworkExtension.xml</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ–</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TrustFrameworkBase.xml-è¯·</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å®šæœŸä¸‹è½½å¼•ç”¨å®ƒä»¬çš„æ–‡ä»¶ã€‚</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 æœ‰æ—¶ï¼Œå½“æ‚¨å¯¹è¿™äº›æ–‡ä»¶ä¹‹ä¸€è¿›è¡Œæ›´æ”¹æ—¶ï¼Œæ‚¨è¿›è¡Œæµ‹è¯•æ—¶ï¼Œç¢°å·§æ‚¨çš„æ›´æ”¹æ²¡æœ‰å‡ºç°ã€‚</font><font style="vertical-align: inherit;">è¿™æ˜¯ç”±äº</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 æ‚¨æ›´æ”¹</font><font style="vertical-align: inherit;">äº†åŸºæœ¬æ–‡ä»¶ä¸­çš„æŸäº›å†…å®¹ï¼Œ</font><font style="vertical-align: inherit;">ä»¥ä¾¿åœ¨éªŒè¯è¿‡ç¨‹ä¸­å­æ–‡ä»¶å°†å¯¼è‡´é”™è¯¯ã€‚</font></font><br>
</blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬è§£å†³äº†æ·»åŠ ä»¥ä¸‹æ–‡ä»¶è¿™ä¸€äº‹å®ï¼š</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a.TrustFrameworkBase.xml </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
b.TrustFrameworkExtensions.xml </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
c.SignUpOrSigninã€‚</font><font style="vertical-align: inherit;">XML </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
d.ProfileEditã€‚</font><font style="vertical-align: inherit;">XML </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
e.PasswordResetã€‚</font><font style="vertical-align: inherit;">XMLæ ¼å¼</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç°åœ¨ï¼Œæˆ‘æƒ³è¯¦ç»†ä»‹ç»å®ƒä»¬ä¸­çš„æ¯ä¸€ä¸ªã€‚</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TrustFrameworkBase.xml</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
æ­¤æ–‡ä»¶åŒ…å«åŸºæœ¬è®¾ç½®ã€‚</font><font style="vertical-align: inherit;">å®é™…ä¸Šï¼Œè¿™æ˜¯åŸºç¡€çŸ¥è¯†çš„åŸºç¡€ï¼Œä½†æ˜¯åœ¨æ•™ç¨‹ä¸­ï¼Œä»–ä»¬å¤§å¤šè¯´â€œæœ€å¥½ä¸è¦è§¦æ‘¸æ­¤æ–‡ä»¶â€ã€‚</font><font style="vertical-align: inherit;">è¿™åœ¨ä¸€å®šç¨‹åº¦ä¸Šæ˜¯æ­£ç¡®çš„ï¼Œä½†æ˜¯æœ‰ä¸€äº›è¦ç‚¹å°šæœªè®¨è®ºï¼š</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ˜¯è¯´è¦æ›´æ”¹ä»»ä½•æ•™ç¨‹</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TrustFrameworkExtensions.xml</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åŸºæœ¬ä¸Šé‡å†™ä»è§„åˆ™</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TrustFrameworkBase.xml</font></font></b> </li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæ›´æ–¹ä¾¿åœ°æ›´æ”¹</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TrustFrameworkBase.xmlä¸­çš„</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æŸäº›</font><b><font style="vertical-align: inherit;">å†…å®¹</font></b><font style="vertical-align: inherit;">ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¦‚æœæ‚¨åœ¨å…¶ä»–æ–‡ä»¶ä¸­æ‰¾åˆ°äº†ä¸åœ¨è¿™äº›æ–‡ä»¶ä¸­çš„å¯¹è±¡çš„é“¾æ¥ï¼Œåˆ™è¯¥é“¾æ¥åœ¨</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TrustFrameworkBase.xmlä¸­</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸º100ï¼…</font><font style="vertical-align: inherit;">ï¼Œæ‚¨å¯ä»¥å°†å…¶æ‰“å¼€å¹¶æŸ¥çœ‹</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ ¹æ®æˆ‘çš„ç»éªŒï¼Œæˆ‘ä¼šè¯´-æˆ‘ä»…æ›´æ”¹äº†æ­¤æ–‡ä»¶ä¸­çš„ä¸¤ä»¶äº‹ï¼ˆæœ¬åœ°åŒ–å¹¶åˆ é™¤äº†ä¸€ä¸ªå­—æ®µï¼‰ã€‚</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TrustFrameworkExtension.xml</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ä½¿ç”¨æ­¤æ–‡ä»¶ï¼Œæ‚¨å°†èŠ±è´¹å¾ˆå¤šæ—¶é—´ã€‚</font><font style="vertical-align: inherit;">å®é™…ä¸Šï¼Œè¿™æ˜¯è®¾ç½®çš„ä¸»æ–‡ä»¶ã€‚</font><font style="vertical-align: inherit;">æ•™ç¨‹ä¸­ç»å¸¸æåˆ°ä»–ã€‚</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ³¨å†Œæˆ–ç™»å½•ã€‚</font><font style="vertical-align: inherit;">XMLï¼ŒProfileEditã€‚</font><font style="vertical-align: inherit;">XMLï¼ŒPasswordResetã€‚</font><font style="vertical-align: inherit;">XML</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
è¿™äº›æ–‡ä»¶æ˜¯å¶é¡µã€‚</font><font style="vertical-align: inherit;">æ‚¨å¯èƒ½æƒ³è¦æ·»åŠ æ‚¨çš„ã€‚</font><font style="vertical-align: inherit;">ä»–ä»¬çš„æ›´æ”¹é‡æœ€å°‘ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç°åœ¨è®©æˆ‘ä»¬è°ˆè°ˆ</font><font style="vertical-align: inherit;">æ–‡ä»¶</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç»“æ„</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">æ‰€æœ‰æ–‡ä»¶éƒ½å…·æœ‰ç±»ä¼¼çš„ç»“æ„ï¼Œå› æ­¤æˆ‘å°†åœ¨</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TrustFrameworkExtension.xml</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ–‡ä»¶çš„åŸºç¡€ä¸Šå¯¹å…¶è¿›è¡Œæè¿°</font><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¯¥æ–‡ä»¶åˆ†ä¸ºå‡ ä¸ªä¸»è¦å—</font></font><br>
<br>
<pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">TrustFrameworkPolicy</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">BasePolicy</span>&gt;</span> <span class="hljs-comment">&lt;!--     --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">TenantId</span>&gt;</span>customtenant.onmicrosoft.com<span class="hljs-tag">&lt;/<span class="hljs-name">TenantId</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">PolicyId</span>&gt;</span>B2C_1A_TrustFrameworkBase<span class="hljs-tag">&lt;/<span class="hljs-name">PolicyId</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">BasePolicy</span>&gt;</span><font></font>
<font></font>
  <span class="hljs-tag">&lt;<span class="hljs-name">BuildingBlocks</span>&gt;</span> <span class="hljs-comment">&lt;!--       UI --&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">BuildingBlocks</span>&gt;</span><font></font>
<font></font>
  <span class="hljs-tag">&lt;<span class="hljs-name">ClaimsProviders</span>&gt;</span> <span class="hljs-comment">&lt;!--        JWT token) --&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">ClaimsProviders</span>&gt;</span><font></font>
  <font></font>
  <span class="hljs-tag">&lt;<span class="hljs-name">UserJourneys</span>&gt;</span> <span class="hljs-comment">&lt;!--       --&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">UserJourneys</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">TrustFrameworkPolicy</span>&gt;</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç°åœ¨åˆ†åˆ«è®¨è®ºæ¯ä¸ªå—ã€‚</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å»ºç­‘æ¨¡å—</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨æ­¤å—ä¸­ï¼Œæˆ‘ä»¬æ·»åŠ äº†å¯ä»¥åœ¨ä»¥åçš„å·¥ä½œä¸­ä½¿ç”¨çš„â€œå·¥å…·â€ã€‚</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ClaimsSchema</font></font></b></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
å…ƒç´ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ClaimsSchema</font></font></b></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç¡®å®šå¯ä»¥åœ¨ç­–ç•¥ä¸­å¼•ç”¨çš„è¯­å¥ç±»å‹ã€‚</font></font><br>
<br>
<pre><code class="xml hljs">  <span class="hljs-tag">&lt;<span class="hljs-name">BuildingBlocks</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">ClaimsSchema</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ClaimType</span> <span class="hljs-attr">Id</span>=<span class="hljs-string">"picture"</span>&gt;</span><span class="hljs-comment">&lt;!--      UI     --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">DisplayName</span>&gt;</span>Picture<span class="hljs-tag">&lt;/<span class="hljs-name">DisplayName</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">DataType</span>&gt;</span>string<span class="hljs-tag">&lt;/<span class="hljs-name">DataType</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">ClaimType</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ClaimType</span> <span class="hljs-attr">Id</span>=<span class="hljs-string">"country"</span>&gt;</span><span class="hljs-comment">&lt;!--     --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">DisplayName</span>&gt;</span>Country<span class="hljs-tag">&lt;/<span class="hljs-name">DisplayName</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">DataType</span>&gt;</span>string<span class="hljs-tag">&lt;/<span class="hljs-name">DataType</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">UserInputType</span>&gt;</span>DropdownSingleSelect<span class="hljs-tag">&lt;/<span class="hljs-name">UserInputType</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Restriction</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">Enumeration</span> <span class="hljs-attr">Text</span>=<span class="hljs-string">"Russia"</span> <span class="hljs-attr">Value</span>=<span class="hljs-string">"russia"</span> <span class="hljs-attr">SelectByDefault</span>=<span class="hljs-string">"false"</span> /&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">Enumeration</span> <span class="hljs-attr">Text</span>=<span class="hljs-string">"Other"</span> <span class="hljs-attr">Value</span>=<span class="hljs-string">"other"</span> <span class="hljs-attr">SelectByDefault</span>=<span class="hljs-string">"false"</span> /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">Restriction</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">ClaimType</span>&gt;</span><font></font>
           ...<font></font>
    <span class="hljs-tag">&lt;/<span class="hljs-name">ClaimsSchema</span>&gt;</span>
  </code></pre><br>
 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è°“è¯</font></font></b></a><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è°“è¯</font></font></b></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å’Œè°“è¯éªŒè¯å…ƒç´ å…è®¸è¿›è¡ŒéªŒè¯ï¼Œä»¥ç¡®ä¿ä»…å°†æ­£ç¡®æ„æˆçš„æ•°æ®è¾“å…¥åˆ°Azure Active Directory B2Cå®¢æˆ·ç«¯ï¼ˆAzure AD B2Cï¼‰ä¸­ã€‚</font></font><br>
<br>
<pre><code class="xml hljs">    <span class="hljs-tag">&lt;<span class="hljs-name">Predicates</span>&gt;</span> <span class="hljs-comment">&lt;!--     ,       --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Predicate</span> <span class="hljs-attr">Id</span>=<span class="hljs-string">"LengthRange"</span> <span class="hljs-attr">Method</span>=<span class="hljs-string">"IsLengthRange"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">UserHelpText</span>&gt;</span>The password must be between 6 and 64 characters.<span class="hljs-tag">&lt;/<span class="hljs-name">UserHelpText</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Parameters</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">Parameter</span> <span class="hljs-attr">Id</span>=<span class="hljs-string">"Minimum"</span>&gt;</span>6<span class="hljs-tag">&lt;/<span class="hljs-name">Parameter</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">Parameter</span> <span class="hljs-attr">Id</span>=<span class="hljs-string">"Maximum"</span>&gt;</span>64<span class="hljs-tag">&lt;/<span class="hljs-name">Parameter</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">Parameters</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">Predicate</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Predicate</span> <span class="hljs-attr">Id</span>=<span class="hljs-string">"Lowercase"</span> <span class="hljs-attr">Method</span>=<span class="hljs-string">"IncludesCharacters"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">UserHelpText</span>&gt;</span>a lowercase letter<span class="hljs-tag">&lt;/<span class="hljs-name">UserHelpText</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Parameters</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">Parameter</span> <span class="hljs-attr">Id</span>=<span class="hljs-string">"CharacterSet"</span>&gt;</span>a-z<span class="hljs-tag">&lt;/<span class="hljs-name">Parameter</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">Parameters</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">Predicate</span>&gt;</span><font></font>
          ...<font></font>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Predicates</span>&gt;</span>
  </code></pre><br>
 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PredicateValidations</font></font></b></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
è°“è¯å®šä¹‰æ£€æŸ¥æ˜¯å¦ç¬¦åˆè¯­å¥ç±»å‹çš„æ–¹æ³•ï¼Œè€Œ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> PredicateValidations</font></font></b></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å°†ä¸€ç»„</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><b><font style="vertical-align: inherit;">è°“è¯</font></b></a><font style="vertical-align: inherit;">åˆ†ç»„ä»¥å½¢æˆä¸è¯­å¥ç±»å‹åŒ¹é…çš„ç”¨æˆ·è¾“å…¥æ£€æŸ¥ã€‚</font></font><br>
 <br>
 <pre><code class="xml hljs">    <span class="hljs-tag">&lt;<span class="hljs-name">PredicateValidations</span>&gt;</span> <span class="hljs-comment">&lt;!--       --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">PredicateValidation</span> <span class="hljs-attr">Id</span>=<span class="hljs-string">"CustomPassword"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">PredicateGroups</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">PredicateGroup</span> <span class="hljs-attr">Id</span>=<span class="hljs-string">"LengthGroup"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">PredicateReferences</span> <span class="hljs-attr">MatchAtLeast</span>=<span class="hljs-string">"1"</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">PredicateReference</span> <span class="hljs-attr">Id</span>=<span class="hljs-string">"LengthRange"</span> /&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">PredicateReferences</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">PredicateGroup</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">PredicateGroup</span> <span class="hljs-attr">Id</span>=<span class="hljs-string">"CharacterClasses"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">UserHelpText</span>&gt;</span>The password must have at least 1 of the following:<span class="hljs-tag">&lt;/<span class="hljs-name">UserHelpText</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">PredicateReferences</span> <span class="hljs-attr">MatchAtLeast</span>=<span class="hljs-string">"2"</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">PredicateReference</span> <span class="hljs-attr">Id</span>=<span class="hljs-string">"Lowercase"</span> /&gt;</span> <span class="hljs-comment">&lt;!--   ,    --&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">PredicateReference</span> <span class="hljs-attr">Id</span>=<span class="hljs-string">"Uppercase"</span> /&gt;</span><font></font>
                    ...<font></font>
            <span class="hljs-tag">&lt;/<span class="hljs-name">PredicateReferences</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">PredicateGroup</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">PredicateGroups</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">PredicateValidation</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">PredicateValidations</span>&gt;</span>
  </code></pre><br>
 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ClaimsTransformations</font></font></b></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
å…ƒç´ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ClaimsTransformations</font></font></b></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åŒ…å«ä¸€ä¸ªæ–­è¨€è½¬æ¢å‡½æ•°åˆ—è¡¨ï¼Œè¿™äº›å‡½æ•°å¯ä»¥ä½œä¸ºè‡ªå®šä¹‰ç­–ç•¥çš„ä¸€éƒ¨åˆ†ä»¥ç”¨æˆ·äº¤äº’çš„æ–¹å¼ä½¿ç”¨ã€‚</font></font><br>
<br>
<pre><code class="xml hljs">    <span class="hljs-tag">&lt;<span class="hljs-name">ClaimsTransformations</span>&gt;</span> <span class="hljs-comment">&lt;!--      --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ClaimsTransformation</span> <span class="hljs-attr">Id</span>=<span class="hljs-string">"GenerateSendGridRequestBody"</span> <span class="hljs-attr">TransformationMethod</span>=<span class="hljs-string">"GenerateJson"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">InputClaims</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">InputClaim</span> <span class="hljs-attr">ClaimTypeReferenceId</span>=<span class="hljs-string">"email"</span> <span class="hljs-attr">TransformationClaimType</span>=<span class="hljs-string">"personalizations.0.to.0.email"</span> /&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">InputClaim</span> <span class="hljs-attr">ClaimTypeReferenceId</span>=<span class="hljs-string">"otp"</span> <span class="hljs-attr">TransformationClaimType</span>=<span class="hljs-string">"personalizations.0.dynamic_template_data.otp"</span> /&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">InputClaim</span> <span class="hljs-attr">ClaimTypeReferenceId</span>=<span class="hljs-string">"email"</span> <span class="hljs-attr">TransformationClaimType</span>=<span class="hljs-string">"personalizations.0.dynamic_template_data.email"</span> /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">InputClaims</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">InputParameters</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">InputParameter</span> <span class="hljs-attr">Id</span>=<span class="hljs-string">"template_id"</span> <span class="hljs-attr">DataType</span>=<span class="hljs-string">"string"</span> <span class="hljs-attr">Value</span>=<span class="hljs-string">"d-b0000000000000000000000000000000"</span> /&gt;</span> <span class="hljs-comment">&lt;!-- Template ID SendGrid (    ) --&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">InputParameter</span> <span class="hljs-attr">Id</span>=<span class="hljs-string">"from.email"</span> <span class="hljs-attr">DataType</span>=<span class="hljs-string">"string"</span> <span class="hljs-attr">Value</span>=<span class="hljs-string">"custom@email.com"</span> /&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">InputParameter</span> <span class="hljs-attr">Id</span>=<span class="hljs-string">"personalizations.0.dynamic_template_data.subject"</span> <span class="hljs-attr">DataType</span>=<span class="hljs-string">"string"</span> <span class="hljs-attr">Value</span>=<span class="hljs-string">"Welcome to Habr!"</span>/&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">InputParameters</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">OutputClaims</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">OutputClaim</span> <span class="hljs-attr">ClaimTypeReferenceId</span>=<span class="hljs-string">"sendGridReqBody"</span> <span class="hljs-attr">TransformationClaimType</span>=<span class="hljs-string">"outputClaim"</span> /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">OutputClaims</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">ClaimsTransformation</span>&gt;</span><font></font>
            ...<font></font>
    <span class="hljs-tag">&lt;/<span class="hljs-name">ClaimsTransformations</span>&gt;</span>
  </code></pre><br>
 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ContentDefinitions</font></font></b></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
å…è®¸æ‚¨ä¸ºæ¯ä¸ªé¡µé¢å®šä¹‰æ¨¡æ¿ã€‚</font></font><br>
<br>
<pre><code class="xml hljs">    <span class="hljs-tag">&lt;<span class="hljs-name">ContentDefinitions</span>&gt;</span> <span class="hljs-comment">&lt;!--         --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ContentDefinition</span> <span class="hljs-attr">Id</span>=<span class="hljs-string">"api.signuporsignin"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">LoadUri</span>&gt;</span>https://azure.blob.core.windows.net/yourblobstorage/pagelayoutfile.html<span class="hljs-tag">&lt;/<span class="hljs-name">LoadUri</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">RecoveryUri</span>&gt;</span>~/common/default_page_error.html<span class="hljs-tag">&lt;/<span class="hljs-name">RecoveryUri</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">DataUri</span>&gt;</span>urn:com:microsoft:aad:b2c:elements:contract:unifiedssp:1.2.0<span class="hljs-tag">&lt;/<span class="hljs-name">DataUri</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">ContentDefinition</span>&gt;</span><font></font>
          ...<font></font>
    <span class="hljs-tag">&lt;/<span class="hljs-name">ContentDefinitions</span>&gt;</span>
  </code></pre><br>
 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DisplayControls </font></font></b></a><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Displayæ§ä»¶</font></font></b></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ˜¯ä¸€ä¸ªå…·æœ‰ç‰¹æ®ŠåŠŸèƒ½çš„ç”¨æˆ·ç•Œé¢å…ƒç´ ï¼Œå¹¶ä¸Azure Active Directory B2CæœåŠ¡å™¨æœåŠ¡ï¼ˆAzure AD B2Cï¼‰è¿›è¡Œäº¤äº’</font></font><br>
<br>
<pre><code class="xml hljs">    <span class="hljs-tag">&lt;<span class="hljs-name">DisplayControls</span>&gt;</span> <span class="hljs-comment">&lt;!--      --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">DisplayControl</span> <span class="hljs-attr">Id</span>=<span class="hljs-string">"emailVerificationControl"</span> <span class="hljs-attr">UserInterfaceControlType</span>=<span class="hljs-string">"VerificationControl"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">DisplayClaims</span>&gt;</span> <span class="hljs-comment">&lt;!--   --&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">DisplayClaim</span> <span class="hljs-attr">ClaimTypeReferenceId</span>=<span class="hljs-string">"email"</span> <span class="hljs-attr">Required</span>=<span class="hljs-string">"true"</span> /&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">DisplayClaim</span> <span class="hljs-attr">ClaimTypeReferenceId</span>=<span class="hljs-string">"verificationCode"</span> <span class="hljs-attr">ControlClaimType</span>=<span class="hljs-string">"VerificationCode"</span> <span class="hljs-attr">Required</span>=<span class="hljs-string">"true"</span> /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">DisplayClaims</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">OutputClaims</span>&gt;</span> <span class="hljs-comment">&lt;!--   (     ) --&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">OutputClaim</span> <span class="hljs-attr">ClaimTypeReferenceId</span>=<span class="hljs-string">"email"</span> /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">OutputClaims</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Actions</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">Action</span> <span class="hljs-attr">Id</span>=<span class="hljs-string">"SendCode"</span>&gt;</span> <span class="hljs-comment">&lt;!--        --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">ValidationClaimsExchange</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">ValidationClaimsExchangeTechnicalProfile</span> <span class="hljs-attr">TechnicalProfileReferenceId</span>=<span class="hljs-string">"GenerateOtp"</span> /&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">ValidationClaimsExchangeTechnicalProfile</span> <span class="hljs-attr">TechnicalProfileReferenceId</span>=<span class="hljs-string">"SendGrid"</span> /&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">ValidationClaimsExchange</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">Action</span>&gt;</span><font></font>
            ...<font></font>
        <span class="hljs-tag">&lt;/<span class="hljs-name">Actions</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">DisplayControl</span>&gt;</span><font></font>
          ...<font></font>
    <span class="hljs-tag">&lt;/<span class="hljs-name">DisplayControls</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">BuildingBlocks</span>&gt;</span>
</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç´¢èµ”æä¾›è€…</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨æ­¤å—ä¸­ï¼Œæˆ‘ä»¬å°†åˆ›å»ºé¡µé¢æœ¬èº«æˆ–é¡µé¢å†…å®¹ã€‚</font><font style="vertical-align: inherit;">åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°†æŒ‡ç¤ºé¡µé¢å…·æœ‰è¾“å…¥å’Œè¾“å‡ºæ•°æ®çš„å†…å®¹ã€‚</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ClaimsProvider</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å°†æŠ€æœ¯èµ„æ–™é“¾æ¥åˆ°ç´¢èµ”æä¾›è€…ã€‚</font></font><br>
<br>
<pre><code class="xml hljs">  <span class="hljs-tag">&lt;<span class="hljs-name">ClaimsProviders</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">ClaimsProvider</span>&gt;</span> <span class="hljs-comment">&lt;!--   -          --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">DisplayName</span>&gt;</span>Self Asserted<span class="hljs-tag">&lt;/<span class="hljs-name">DisplayName</span>&gt;</span>
    </code></pre><br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TechnicalProfiles</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
 å…ƒç´ </font><font style="vertical-align: inherit;">åŒ…å«ç´¢èµ”æä¾›è€…æ”¯æŒçš„ä¸€ç»„æŠ€æœ¯æ¦‚è¦ã€‚</font></font><br>
<br>
<pre><code class="xml hljs">      <span class="hljs-tag">&lt;<span class="hljs-name">TechnicalProfiles</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">TechnicalProfile</span> <span class="hljs-attr">Id</span>=<span class="hljs-string">"SelfAsserted-Social"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">DisplayName</span>&gt;</span>User ID signup<span class="hljs-tag">&lt;/<span class="hljs-name">DisplayName</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">Protocol</span> <span class="hljs-attr">Name</span>=<span class="hljs-string">"Proprietary"</span> <span class="hljs-attr">Handler</span>=<span class="hljs-string">"Web.TPEngine.Providers.SelfAssertedAttributeProvider, Web.TPEngine, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null"</span> /&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">Metadata</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">Item</span> <span class="hljs-attr">Key</span>=<span class="hljs-string">"ContentDefinitionReferenceId"</span>&gt;</span>api.selfasserted<span class="hljs-tag">&lt;/<span class="hljs-name">Item</span>&gt;</span> <span class="hljs-comment">&lt;!--  . (        ,   )--&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">Metadata</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">CryptographicKeys</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">Key</span> <span class="hljs-attr">Id</span>=<span class="hljs-string">"issuer_secret"</span> <span class="hljs-attr">StorageReferenceId</span>=<span class="hljs-string">"B2C_1A_TokenSigningKeyContainer"</span> /&gt;</span> <span class="hljs-comment">&lt;!--       --&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">CryptographicKeys</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">InputClaims</span>&gt;</span> <span class="hljs-comment">&lt;!--   ..          --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">InputClaim</span> <span class="hljs-attr">ClaimTypeReferenceId</span>=<span class="hljs-string">"givenName"</span> /&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">InputClaim</span> <span class="hljs-attr">ClaimTypeReferenceId</span>=<span class="hljs-string">"surname"</span> /&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">InputClaims</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">OutputClaims</span>&gt;</span> <span class="hljs-comment">&lt;!--  .       ,      (   ) --&gt;</span>
              <span class="hljs-comment">&lt;!-- These claims ensure that any values retrieved in the previous steps (e.g. from an external IDP) are prefilled. 
                 Note that some of these claims may not have any value, for example, if the external IDP did not provide any of
                 these values, or if the claim did not appear in the OutputClaims section of the IDP.
                 In addition, if a claim is not in the InputClaims section, but it is in the OutputClaims section, then its
                 value will not be prefilled, but the user will still be prompted for it (with an empty value). --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">OutputClaim</span> <span class="hljs-attr">ClaimTypeReferenceId</span>=<span class="hljs-string">"objectId"</span> /&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">OutputClaim</span> <span class="hljs-attr">ClaimTypeReferenceId</span>=<span class="hljs-string">"newUser"</span> /&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">OutputClaim</span> <span class="hljs-attr">ClaimTypeReferenceId</span>=<span class="hljs-string">"executed-SelfAsserted-Input"</span> <span class="hljs-attr">DefaultValue</span>=<span class="hljs-string">"true"</span> /&gt;</span><font></font>
<font></font>
            <span class="hljs-comment">&lt;!-- Optional claims. These claims are collected from the user and can be modified. If a claim is to be persisted in the directory after having been 
                 collected from the user, it needs to be added as a PersistedClaim in the ValidationTechnicalProfile referenced below, i.e. 
                 in AAD-UserWriteUsingAlternativeSecurityId. --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">OutputClaim</span> <span class="hljs-attr">ClaimTypeReferenceId</span>=<span class="hljs-string">"givenName"</span> <span class="hljs-attr">Required</span>=<span class="hljs-string">"true"</span>/&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">OutputClaim</span> <span class="hljs-attr">ClaimTypeReferenceId</span>=<span class="hljs-string">"surname"</span> <span class="hljs-attr">Required</span>=<span class="hljs-string">"true"</span>/&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">OutputClaim</span> <span class="hljs-attr">ClaimTypeReferenceId</span>=<span class="hljs-string">"country"</span> <span class="hljs-attr">Required</span>=<span class="hljs-string">"true"</span>/&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">OutputClaims</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">TechnicalProfile</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">ClaimsProvider</span>&gt;</span>
      </code></pre><br>
 <div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ·»åŠ Facebookèº«ä»½æä¾›å•†çš„ç¤ºä¾‹</font></font></b>
                        <div class="spoiler_text">    <br>
 <br>
 <pre><code class="xml hljs">    <span class="hljs-tag">&lt;<span class="hljs-name">ClaimsProvider</span>&gt;</span> <span class="hljs-comment">&lt;!--    .       --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">DisplayName</span>&gt;</span>Facebook<span class="hljs-tag">&lt;/<span class="hljs-name">DisplayName</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">TechnicalProfiles</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">TechnicalProfile</span> <span class="hljs-attr">Id</span>=<span class="hljs-string">"Facebook-OAUTH"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">Metadata</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">Item</span> <span class="hljs-attr">Key</span>=<span class="hljs-string">"client_id"</span>&gt;</span>FACEBOOK_ID<span class="hljs-tag">&lt;/<span class="hljs-name">Item</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">Item</span> <span class="hljs-attr">Key</span>=<span class="hljs-string">"scope"</span>&gt;</span>email public_profile<span class="hljs-tag">&lt;/<span class="hljs-name">Item</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">Item</span> <span class="hljs-attr">Key</span>=<span class="hljs-string">"ClaimsEndpoint"</span>&gt;</span>https://graph.facebook.com/me?fields=id,first_name,last_name,name,email,picture<span class="hljs-tag">&lt;/<span class="hljs-name">Item</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">Metadata</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">OutputClaims</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">OutputClaim</span> <span class="hljs-attr">ClaimTypeReferenceId</span>=<span class="hljs-string">"picture"</span> <span class="hljs-attr">PartnerClaimType</span>=<span class="hljs-string">"picture"</span> /&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">OutputClaims</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">TechnicalProfile</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">TechnicalProfiles</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">ClaimsProvider</span>&gt;</span>
  </code></pre><br>
    TrustFrameworkBase.xml<br>
 <br>
 <pre><code class="xml hljs">      <span class="hljs-tag">&lt;<span class="hljs-name">ClaimsProvider</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- The following Domain element allows this profile to be used if the request comes with domain_hint 
             query string parameter, e.g. domain_hint=facebook.com  --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Domain</span>&gt;</span>facebook.com<span class="hljs-tag">&lt;/<span class="hljs-name">Domain</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">DisplayName</span>&gt;</span>Facebook<span class="hljs-tag">&lt;/<span class="hljs-name">DisplayName</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">TechnicalProfiles</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">TechnicalProfile</span> <span class="hljs-attr">Id</span>=<span class="hljs-string">"Facebook-OAUTH"</span>&gt;</span>
            <span class="hljs-comment">&lt;!-- The text in the following DisplayName element is shown to the user on the claims provider 
                 selection screen. --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">DisplayName</span>&gt;</span>Facebook<span class="hljs-tag">&lt;/<span class="hljs-name">DisplayName</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">Protocol</span> <span class="hljs-attr">Name</span>=<span class="hljs-string">"OAuth2"</span> /&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">Metadata</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">Item</span> <span class="hljs-attr">Key</span>=<span class="hljs-string">"ProviderName"</span>&gt;</span>facebook<span class="hljs-tag">&lt;/<span class="hljs-name">Item</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">Item</span> <span class="hljs-attr">Key</span>=<span class="hljs-string">"authorization_endpoint"</span>&gt;</span>https://www.facebook.com/dialog/oauth<span class="hljs-tag">&lt;/<span class="hljs-name">Item</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">Item</span> <span class="hljs-attr">Key</span>=<span class="hljs-string">"AccessTokenEndpoint"</span>&gt;</span>https://graph.facebook.com/oauth/access_token<span class="hljs-tag">&lt;/<span class="hljs-name">Item</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">Item</span> <span class="hljs-attr">Key</span>=<span class="hljs-string">"HttpBinding"</span>&gt;</span>GET<span class="hljs-tag">&lt;/<span class="hljs-name">Item</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">Item</span> <span class="hljs-attr">Key</span>=<span class="hljs-string">"UsePolicyInRedirectUri"</span>&gt;</span>0<span class="hljs-tag">&lt;/<span class="hljs-name">Item</span>&gt;</span><font></font>
  <font></font>
              <span class="hljs-comment">&lt;!-- The Facebook required HTTP GET method, but the access token response is in JSON format from 3/27/2017 --&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">Item</span> <span class="hljs-attr">Key</span>=<span class="hljs-string">"AccessTokenResponseFormat"</span>&gt;</span>json<span class="hljs-tag">&lt;/<span class="hljs-name">Item</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">Metadata</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">CryptographicKeys</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">Key</span> <span class="hljs-attr">Id</span>=<span class="hljs-string">"client_secret"</span> <span class="hljs-attr">StorageReferenceId</span>=<span class="hljs-string">"B2C_1A_FacebookSecret"</span> /&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">CryptographicKeys</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">InputClaims</span> /&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">OutputClaims</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">OutputClaim</span> <span class="hljs-attr">ClaimTypeReferenceId</span>=<span class="hljs-string">"issuerUserId"</span> <span class="hljs-attr">PartnerClaimType</span>=<span class="hljs-string">"id"</span> /&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">OutputClaim</span> <span class="hljs-attr">ClaimTypeReferenceId</span>=<span class="hljs-string">"givenName"</span> <span class="hljs-attr">PartnerClaimType</span>=<span class="hljs-string">"first_name"</span> /&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">OutputClaim</span> <span class="hljs-attr">ClaimTypeReferenceId</span>=<span class="hljs-string">"surname"</span> <span class="hljs-attr">PartnerClaimType</span>=<span class="hljs-string">"last_name"</span> /&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">OutputClaim</span> <span class="hljs-attr">ClaimTypeReferenceId</span>=<span class="hljs-string">"displayName"</span> <span class="hljs-attr">PartnerClaimType</span>=<span class="hljs-string">"name"</span> /&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">OutputClaim</span> <span class="hljs-attr">ClaimTypeReferenceId</span>=<span class="hljs-string">"email"</span> <span class="hljs-attr">PartnerClaimType</span>=<span class="hljs-string">"email"</span> /&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">OutputClaim</span> <span class="hljs-attr">ClaimTypeReferenceId</span>=<span class="hljs-string">"identityProvider"</span> <span class="hljs-attr">DefaultValue</span>=<span class="hljs-string">"facebook.com"</span> <span class="hljs-attr">AlwaysUseDefaultValue</span>=<span class="hljs-string">"true"</span> /&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">OutputClaim</span> <span class="hljs-attr">ClaimTypeReferenceId</span>=<span class="hljs-string">"authenticationSource"</span> <span class="hljs-attr">DefaultValue</span>=<span class="hljs-string">"socialIdpAuthentication"</span> <span class="hljs-attr">AlwaysUseDefaultValue</span>=<span class="hljs-string">"true"</span> /&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">OutputClaims</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">OutputClaimsTransformations</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">OutputClaimsTransformation</span> <span class="hljs-attr">ReferenceId</span>=<span class="hljs-string">"CreateRandomUPNUserName"</span> /&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">OutputClaimsTransformation</span> <span class="hljs-attr">ReferenceId</span>=<span class="hljs-string">"CreateUserPrincipalName"</span> /&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">OutputClaimsTransformation</span> <span class="hljs-attr">ReferenceId</span>=<span class="hljs-string">"CreateAlternativeSecurityId"</span> /&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">OutputClaimsTransformations</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">UseTechnicalProfileForSessionManagement</span> <span class="hljs-attr">ReferenceId</span>=<span class="hljs-string">"SM-SocialLogin"</span> /&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">TechnicalProfile</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">TechnicalProfiles</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">ClaimsProvider</span>&gt;</span>
</code></pre><br>
</div>
                    </div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç”¨æˆ·æ—…ç¨‹</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¯¥</font><font style="vertical-align: inherit;">ç”¨æˆ·çš„</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UserJourneys</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¡¨æ˜æ˜ç¡®çš„è·¯å¾„ï¼Œé€šè¿‡è¯¥ç­–ç•¥å…è®¸åŸºäºå£°æ˜çš„åº”ç”¨æä¾›æ‰€éœ€çš„æƒåˆ©è¦æ±‚ç”¨æˆ·ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨ä¸‹é¢ï¼Œæˆ‘æ·»åŠ äº†ä¸€äº›ç®€å•çš„å†…å®¹ï¼Œå…¶ä½™çš„å†…å®¹å¾ˆå®¹æ˜“åœ¨æˆ‘å°†åœ¨ä¸‹é¢æ·»åŠ çš„æ•™ç¨‹ä¸­æ‰¾åˆ°ã€‚</font></font><br>
<br>
<pre><code class="xml hljs">  <span class="hljs-tag">&lt;<span class="hljs-name">UserJourneys</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">UserJourney</span> <span class="hljs-attr">Id</span>=<span class="hljs-string">"SignUp"</span>&gt;</span> <span class="hljs-comment">&lt;!--  ID UserJourney.       ,     TrustFrameworkExtension.xml--&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">OrchestrationSteps</span>&gt;</span><span class="hljs-comment">&lt;!--  .   --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">OrchestrationStep</span> <span class="hljs-attr">Order</span>=<span class="hljs-string">"1"</span> <span class="hljs-attr">Type</span>=<span class="hljs-string">"ClaimsExchange"</span> <span class="hljs-attr">ContentDefinitionReferenceId</span>=<span class="hljs-string">"api.localaccountsignup"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">ClaimsExchanges</span>&gt;</span> <span class="hljs-comment">&lt;!--       TechnicalProfileReferenceId. Id   ,       --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">ClaimsExchange</span> <span class="hljs-attr">Id</span>=<span class="hljs-string">"SignUpWithLogonEmailExchange"</span> <span class="hljs-attr">TechnicalProfileReferenceId</span>=<span class="hljs-string">"LocalAccountSignUpWithLogonEmail-2"</span> /&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">ClaimsExchanges</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">OrchestrationStep</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">OrchestrationStep</span> <span class="hljs-attr">Order</span>=<span class="hljs-string">"2"</span> <span class="hljs-attr">Type</span>=<span class="hljs-string">"SendClaims"</span> <span class="hljs-attr">CpimIssuerTechnicalProfileReferenceId</span>=<span class="hljs-string">"JwtIssuer"</span> /&gt;</span> <span class="hljs-comment">&lt;!--     --&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">OrchestrationSteps</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ClientDefinition</span> <span class="hljs-attr">ReferenceId</span>=<span class="hljs-string">"DefaultWeb"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">UserJourney</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">UserJourney</span> <span class="hljs-attr">Id</span>=<span class="hljs-string">"PasswordReset"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">OrchestrationSteps</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">OrchestrationStep</span> <span class="hljs-attr">Order</span>=<span class="hljs-string">"1"</span> <span class="hljs-attr">Type</span>=<span class="hljs-string">"ClaimsExchange"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">ClaimsExchanges</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">ClaimsExchange</span> <span class="hljs-attr">Id</span>=<span class="hljs-string">"PasswordResetUsingEmailAddressExchange"</span> <span class="hljs-attr">TechnicalProfileReferenceId</span>=<span class="hljs-string">"LocalAccountDiscoveryUsingEmailAddress"</span> /&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">ClaimsExchanges</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">OrchestrationStep</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">OrchestrationStep</span> <span class="hljs-attr">Order</span>=<span class="hljs-string">"2"</span> <span class="hljs-attr">Type</span>=<span class="hljs-string">"ClaimsExchange"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">ClaimsExchanges</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">ClaimsExchange</span> <span class="hljs-attr">Id</span>=<span class="hljs-string">"NewCredentials"</span> <span class="hljs-attr">TechnicalProfileReferenceId</span>=<span class="hljs-string">"LocalAccountWritePasswordUsingObjectId"</span> /&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">ClaimsExchanges</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">OrchestrationStep</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">OrchestrationStep</span> <span class="hljs-attr">Order</span>=<span class="hljs-string">"3"</span> <span class="hljs-attr">Type</span>=<span class="hljs-string">"SendClaims"</span> <span class="hljs-attr">CpimIssuerTechnicalProfileReferenceId</span>=<span class="hljs-string">"JwtIssuer"</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">OrchestrationSteps</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ClientDefinition</span> <span class="hljs-attr">ReferenceId</span>=<span class="hljs-string">"DefaultWeb"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">UserJourney</span>&gt;</span><font></font>
       ...<font></font>
  <span class="hljs-tag">&lt;/<span class="hljs-name">UserJourneys</span>&gt;</span>
</code></pre><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ClaimsExchangeäº¤æ¢ç¤ºä¾‹</font></font></b>
                        <div class="spoiler_text">    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">ClaimsExchanges</a>  .<br>
 <br>
 <pre><code class="xml hljs">    <span class="hljs-tag">&lt;<span class="hljs-name">ClaimsProviderSelections</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ClaimsProviderSelection</span> <span class="hljs-attr">TargetClaimsExchangeId</span>=<span class="hljs-string">"FacebookExchange"</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ClaimsProviderSelection</span> <span class="hljs-attr">TargetClaimsExchangeId</span>=<span class="hljs-string">"GoogleExchange"</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ClaimsProviderSelection</span> <span class="hljs-attr">ValidationClaimsExchangeId</span>=<span class="hljs-string">"LocalAccountSigninEmailExchange"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">ClaimsProviderSelections</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">ClaimsExchanges</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ClaimsExchange</span> <span class="hljs-attr">Id</span>=<span class="hljs-string">"LocalAccountSigninEmailExchange"</span> <span class="hljs-attr">TechnicalProfileReferenceId</span>=<span class="hljs-string">"SelfAsserted-LocalAccountSignin-Email"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">ClaimsExchanges</span>&gt;</span>
  </code></pre><br>
 </div>
                    </div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å…¸å‹ä»»åŠ¡</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç”±äºä¸Šè¿°åŸå› ï¼Œæ‚¨å°†æ›´å®¹æ˜“ç†è§£ä»¥ä¸‹æ•™ç¨‹ã€‚</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è®¾ç½®æ³¨å†Œå¹¶ä½¿ç”¨Facebookå¸æˆ·ç™»å½•</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è®¾ç½®æ³¨å†Œå¹¶ä½¿ç”¨Googleå¸æˆ·ç™»å½•</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è‡ªå®šä¹‰ç”µå­é‚®ä»¶éªŒè¯</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åœ¨è‡ªå®šä¹‰ç­–ç•¥ä¸­é…ç½®å¯†ç å¤æ‚åº¦</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç”¨æˆ·ç•Œé¢å®šåˆ¶</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¯­è¨€è®¾å®š</font></font></a></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SignUpOrSignin.XMLï¼ŒProfileEdit.XMLï¼ŒPasswordReset.XML</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¿™äº›æ˜¯æ‚¨å¯ä»¥è¦†ç›–\æ·»åŠ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BuildingBlocks</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">çš„æœ€ç»ˆæ–‡ä»¶ï¼Œ</font><font style="vertical-align: inherit;">æˆ‘ä»¬åœ¨å…¶ä¸­æŒ‡ç¤ºè¦æ·»åŠ åˆ°ä»¤ç‰Œçš„æ•°æ®ã€‚</font></font><br>
<br>
<pre><code class="xml hljs">  <span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">TrustFrameworkPolicy</span> <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span> 
  <span class="hljs-attr">xmlns:xsd</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema"</span> 
  <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://schemas.microsoft.com/online/cpim/schemas/2013/06"</span> <span class="hljs-attr">PolicySchemaVersion</span>=<span class="hljs-string">"0.3.0.0"</span> <span class="hljs-attr">TenantId</span>=<span class="hljs-string">"antekesd.onmicrosoft.com"</span> <span class="hljs-attr">PolicyId</span>=<span class="hljs-string">"B2C_1A_signup_signin"</span> <span class="hljs-attr">PublicPolicyUri</span>=<span class="hljs-string">"http://antekesd.onmicrosoft.com/B2C_1A_signup_signin"</span>&gt;</span><font></font>
<font></font>
  <span class="hljs-tag">&lt;<span class="hljs-name">BasePolicy</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">TenantId</span>&gt;</span>antekesd.onmicrosoft.com<span class="hljs-tag">&lt;/<span class="hljs-name">TenantId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">PolicyId</span>&gt;</span>B2C_1A_TrustFrameworkExtensions<span class="hljs-tag">&lt;/<span class="hljs-name">PolicyId</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">BasePolicy</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">BuildingBlocks</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">ContentDefinitions</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ContentDefinition</span> <span class="hljs-attr">Id</span>=<span class="hljs-string">"api.signuporsignin"</span>&gt;</span> <span class="hljs-comment">&lt;!--        --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">LoadUri</span>&gt;</span>https://some.blob.core.windows.net/some/some.html<span class="hljs-tag">&lt;/<span class="hljs-name">LoadUri</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">RecoveryUri</span>&gt;</span>~/common/default_page_error.html<span class="hljs-tag">&lt;/<span class="hljs-name">RecoveryUri</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">DataUri</span>&gt;</span>urn:com:microsoft:aad:b2c:elements:contract:unifiedssp:1.2.0<span class="hljs-tag">&lt;/<span class="hljs-name">DataUri</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">ContentDefinition</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">ContentDefinitions</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">BuildingBlocks</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">RelyingParty</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">DefaultUserJourney</span> <span class="hljs-attr">ReferenceId</span>=<span class="hljs-string">"SignUpOrSignIn"</span> /&gt;</span> <span class="hljs-comment">&lt;!--  ,     --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">TechnicalProfile</span> <span class="hljs-attr">Id</span>=<span class="hljs-string">"PolicyProfile"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">DisplayName</span>&gt;</span>PolicyProfile<span class="hljs-tag">&lt;/<span class="hljs-name">DisplayName</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Protocol</span> <span class="hljs-attr">Name</span>=<span class="hljs-string">"OpenIdConnect"</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">OutputClaims</span>&gt;</span> <span class="hljs-comment">&lt;!--    JWT Token.        --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">OutputClaim</span> <span class="hljs-attr">ClaimTypeReferenceId</span>=<span class="hljs-string">"signInName"</span> <span class="hljs-attr">PartnerClaimType</span>=<span class="hljs-string">"email"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">OutputClaim</span> <span class="hljs-attr">ClaimTypeReferenceId</span>=<span class="hljs-string">"givenName"</span> <span class="hljs-attr">Required</span>=<span class="hljs-string">"true"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">OutputClaim</span> <span class="hljs-attr">ClaimTypeReferenceId</span>=<span class="hljs-string">"surname"</span> <span class="hljs-attr">Required</span>=<span class="hljs-string">"true"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">OutputClaim</span> <span class="hljs-attr">ClaimTypeReferenceId</span>=<span class="hljs-string">"email"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">OutputClaim</span> <span class="hljs-attr">ClaimTypeReferenceId</span>=<span class="hljs-string">"objectId"</span> <span class="hljs-attr">PartnerClaimType</span>=<span class="hljs-string">"sub"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">OutputClaim</span> <span class="hljs-attr">ClaimTypeReferenceId</span>=<span class="hljs-string">"identityProvider"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">OutputClaim</span> <span class="hljs-attr">ClaimTypeReferenceId</span>=<span class="hljs-string">"tenantId"</span> <span class="hljs-attr">AlwaysUseDefaultValue</span>=<span class="hljs-string">"true"</span> <span class="hljs-attr">DefaultValue</span>=<span class="hljs-string">"{Policy:TenantObjectId}"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">OutputClaim</span> <span class="hljs-attr">ClaimTypeReferenceId</span>=<span class="hljs-string">"picture"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">OutputClaim</span> <span class="hljs-attr">ClaimTypeReferenceId</span>=<span class="hljs-string">"country"</span> <span class="hljs-attr">Required</span>=<span class="hljs-string">"true"</span>/&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">OutputClaims</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">SubjectNamingInfo</span> <span class="hljs-attr">ClaimType</span>=<span class="hljs-string">"sub"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">TechnicalProfile</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">RelyingParty</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">TrustFrameworkPolicy</span>&gt;</span>
</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æµ‹è¯•ä¸­</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸ºäº†æµ‹è¯•æœ€æ–°çš„æ›´æ”¹ï¼Œæ‚¨éœ€è¦ï¼š</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è½¬åˆ°èº«ä»½ä½“éªŒæ¡†æ¶</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é€‰æ‹©</font><font style="vertical-align: inherit;">è¦æµ‹è¯•</font><font style="vertical-align: inherit;">çš„</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç­–ç•¥</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç‚¹å‡»â€œç«‹å³è¿è¡Œâ€</font></font></li>
</ol><br>
<img src="https://habrastorage.org/webt/-d/bv/nb/-dbvnbzig1vatibisepcb9ekdxq.png" alt="å›¾ç‰‡"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç»“è®º</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å› æ­¤ï¼Œæ‚¨å°†æ”¶åˆ°ä¸€ä»½å®Œå…¨ï¼ˆæˆ–å‡ ä¹ï¼‰æ»¡è¶³æ‚¨/å®¢æˆ·è¦æ±‚çš„æˆæƒè¡¨æ ¼ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ„Ÿè°¢æ‚¨çš„å…³æ³¨ï¼</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN504012/index.html">åè½¬æ’åº</a></li>
<li><a href="../zh-CN504014/index.html">ç›æ ¼é²ä¸»ä¹‰æŠ“ä½äº†ä¿„è¯­ï¼šä¸ºä»€ä¹ˆä¼šè¿™æ ·</a></li>
<li><a href="../zh-CN504016/index.html">åšéŸ§ä¸æ‹”å¯¹å¯Œäººå’Œæœ‰å½±å“åŠ›çš„äººçš„å¸å¼•åŠ›</a></li>
<li><a href="../zh-CN504022/index.html">ä¿¡æ¯å®‰å…¨ä¸“å‘˜ã€‚å®ƒèƒ½èµšå¤šå°‘é’±</a></li>
<li><a href="../zh-CN504026/index.html">ä¸ºä»€ä¹ˆç¡…è°·å¦‚æ­¤ç—´è¿·äºç—›è‹¦ï¼Ÿ</a></li>
<li><a href="../zh-CN504032/index.html">5æœˆ27æ—¥è¿è¾“</a></li>
<li><a href="../zh-CN504034/index.html">ç”µçƒ­æ¯ã€‚æˆ‘ä»¬æ­£åœ¨å»ºé€ ä¸€è¾†ç–¯ç‹‚çš„ç”µåŠ¨è¸æ¿è½¦/ç”µåŠ¨è‡ªè¡Œè½¦ã€‚æ„Ÿè¨€</a></li>
<li><a href="../zh-CN504036/index.html">æ„å¤–çš„HTTPæ ‡å¤´</a></li>
<li><a href="../zh-CN504038/index.html">æˆ‘ä»¬å›¢é˜Ÿä¸­æœ‰5ç§è¯­è¨€ï¼Œé—ç•™çš„ç‹¬çŸ³ï¼Œè¿‡å¤šçš„AWSæˆæœ¬å’Œå¾ˆå°‘çš„é™æ€åˆ†æå·¥å…·</a></li>
<li><a href="../zh-CN504042/index.html">å…³äºè‡ªæ¥æ°´çš„è´¨é‡ï¼Œè¯·åŠ ä¸Šæ–‡å­—ï¼ˆè°ƒæŸ¥ï¼‰</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>