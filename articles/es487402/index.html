<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßúüèæ üì≤ üë®‚Äç‚úàÔ∏è Regulador de flujo de gas 5 veces m√°s barato que las soluciones comerciales üëèüèº üë®üèª‚Äçüé§ üè´</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Los controladores de flujo de gas (RRG) est√°n dise√±ados para mantener un caudal definido por el usuario. Los RWG se utilizan en laboratorios industria...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Regulador de flujo de gas 5 veces m√°s barato que las soluciones comerciales</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/487402/"><img src="https://habrastorage.org/webt/-h/ul/-l/-hul-lbhy5ca5cfsciofuph5xte.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los controladores de flujo de gas (RRG) est√°n dise√±ados para mantener un caudal definido por el usuario. Los RWG se utilizan en laboratorios industriales y de investigaci√≥n para organizar el suministro de gas desde cilindros y carreteras. Los dispositivos de Eltochpribor, MKS, Bronkhorst, etc. est√°n representados en el mercado y su costo es de 1000-2500 USD. El objetivo de este trabajo es crear un regulador de flujo de gas a partir de componentes m√°s accesibles. La idea es organizar un sistema de retroalimentaci√≥n que incluya una v√°lvula proporcional y un medidor de flujo. A continuaci√≥n se muestra una breve descripci√≥n del hardware y software del sistema, que permite reproducirlo a todos los que utilizan el RRG en sus actividades. Todos los c√≥digos fuente est√°n disponibles en </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Utilizamos productos SMC, v√°lvulas de la serie PVQ y medidores de flujo de la serie PFM5 sin indicaci√≥n. </font><font style="vertical-align: inherit;">Se ensamblaron dos RWG con rangos de flujo ajustables de 0.2-5 L / min (PVQ13 + PFM510) y 1-50 L / min (PVQ31 + PFM550), como se muestra en la figura. </font><font style="vertical-align: inherit;">El costo de un regulador de flujo puede estimarse desde arriba como 100 USD (v√°lvula PVQ31) + 80 USD (medidor PFM5) + 20 USD (microcontrolador Arduino Nano, fuente de alimentaci√≥n y componentes de radio) = 200 USD. </font><font style="vertical-align: inherit;">Todo lo que se describe a continuaci√≥n se aplica al RWG 1-50 l / min. </font><font style="vertical-align: inherit;">La creaci√≥n de un regulador de 0.2-5 l / min, as√≠ como cualquier otro regulador de componentes similares, sigue el mismo esquema, pero puede diferir en detalles menores.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hardware</font></font></h4><br>
<img src="https://habrastorage.org/webt/ij/he/sy/ijhesyjtgz47jzjpquizlets53e.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El hardware se muestra en la figura y consta de:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V√°lvula proporcional PVQ31 </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Medidor de flujo PFM550 </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Filtrar </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unidad de fuente de alimentaci√≥n (24V, 1A) </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Circuitos de control de corriente </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Microcontrolador Arduino Nano y sus esquemas de energ√≠a </font></font></li>
</ol><br>
<img src="https://habrastorage.org/webt/7t/3n/hc/7t3nhc2fexnzhtff08igsq7gw9q.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El diagrama de conexi√≥n el√©ctrica de los componentes se muestra en la figura. </font><font style="vertical-align: inherit;">Para alimentar el circuito, se usa una fuente de 24 V, 1 A CC, que es m√°s que suficiente, dado el consumo de la v√°lvula de menos de 200 mA y un medidor de menos de 35 mA. </font><font style="vertical-align: inherit;">Las v√°lvulas proporcionales de la serie PVQ est√°n controladas por corriente. </font><font style="vertical-align: inherit;">De acuerdo con la documentaci√≥n, no se recomienda controlarlos mediante control de voltaje. </font><font style="vertical-align: inherit;">El control de corriente se puede implementar usando el circuito discutido </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqu√≠</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqu√≠</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y con m√°s detalle </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqu√≠</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">El circuito de control de corriente se resalta en el circuito el√©ctrico general (Fig. 3) mediante un rect√°ngulo discontinuo. </font><font style="vertical-align: inherit;">Las v√°lvulas de la serie PVQ est√°n conectadas por dos cables de alimentaci√≥n: rojo - DC +, negro - DC-.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La intensidad actual se regula utilizando la se√±al PWM producida por el pin anal√≥gico del microcontrolador. Por defecto, los controladores basados ‚Äã‚Äãen ATmega328 (Arduino UNO / Nano / Pro Mini) generan una se√±al PWM de 8 bits (0-255) a una frecuencia de 488 o 976 Hz, dependiendo del pin. El bajo ancho de se√±al PWM reduce la precisi√≥n del control de la v√°lvula. La baja frecuencia conduce a su zumbido. Estos valores se pueden aumentar mediante programaci√≥n a 10 bits (0-1023) y 15,6 kHz, respectivamente. Utilizamos una frecuencia de 7.8 kHz. </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">Aqu√≠</font></a><font style="vertical-align: inherit;"> y </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">aqu√≠</font></a><font style="vertical-align: inherit;"> se </font></font><code>setup()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">proporciona </font><font style="vertical-align: inherit;">una descripci√≥n de los comandos que deben insertarse en la funci√≥n de </font><font style="vertical-align: inherit;">firmware de Arduino </font><font style="vertical-align: inherit;">.</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los medidores de flujo de la serie PFM5 tienen 2 cables de se√±al (negro - salida anal√≥gica, blanco - ajuste del tiempo de respuesta (no utilizado)) y dos cables de alimentaci√≥n (marr√≥n - DC +, azul - DC-). Alimentado por una fuente de CC de 24 V. El medidor de flujo emite una se√±al anal√≥gica en el rango de 1 a 5 V. Un valor de 1 V corresponde a un caudal de gas cero, 5 V, el m√°ximo para este medidor. Seg√∫n la documentaci√≥n, la relaci√≥n entre flujo y voltaje es lineal. Mientras tanto, parece que vale la pena calibrar regularmente el medidor de flujo. La se√±al anal√≥gica del medidor de flujo (cable negro) es recibida por un pin anal√≥gico Arduino de 10 bits (0-1023) para su procesamiento y visualizaci√≥n. El cable blanco est√° dise√±ado para establecer el tiempo de respuesta, no lo usamos. En este caso, el tiempo de respuesta es de 50 ms.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La placa Arduino debe alimentarse a trav√©s de un pin de 5 V, el voltaje de suministro no debe exceder los 5,5 V. Dicha energ√≠a puede proporcionarse desde la PSU de la v√°lvula y el medidor de flujo a trav√©s del estabilizador L7805, como se muestra en el diagrama (Fig. 3). Lo m√°s probable es que necesite un radiador en el estabilizador. La alimentaci√≥n del puerto USB de la computadora utilizada durante las pruebas (Fig. 2) no es deseable ya que en este caso el voltaje de referencia es inestable cuando se usa el ADC. Para obtener m√°s informaci√≥n sobre la alimentaci√≥n de la placa, consulte </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqu√≠</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Parte de</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
software La </font><b><font style="vertical-align: inherit;">parte de</font></b><font style="vertical-align: inherit;"> software consiste en el firmware del microcontrolador Arduino Nano y una interfaz gr√°fica de usuario que se ejecuta en una PC. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El programa descargado al microcontrolador realiza c√≠clicamente las siguientes acciones:</font></font><br>
<br>
<ol>
<li>       ,   </li>
<li> ,        </li>
<li>   ,               - </li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El sistema puede funcionar en modo manual y autom√°tico. Durante la operaci√≥n manual, el valor de la apertura deseada de la v√°lvula, expresada por una variable </font></font><code>valve</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(0 &lt;= </font></font><code>valve</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;1023), </font><font style="vertical-align: inherit;">debe enviarse al puerto serie </font><font style="vertical-align: inherit;">. El valor de esta variable determina la ocupaci√≥n de la se√±al PWM, que se env√≠a a trav√©s de la salida anal√≥gica del microcontrolador al circuito de control de corriente y al comando de v√°lvula proporcional </font></font><code>analogWrite(valvepin, valve)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Despu√©s de abrir, la v√°lvula permanece en la posici√≥n establecida hasta que se recibe un nuevo comando a trav√©s del puerto serie. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para cambiar a operaci√≥n autom√°tica, se debe enviar un n√∫mero negativo al puerto serie </font></font><code>-targetflow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Valor variable</font></font><code>targetflow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">se encuentra en el rango 0-1023 y determina la velocidad de flujo de gas que debe mantenerse. El caudal de gas real est√° determinado por las lecturas del medidor de flujo, que se leen desde la entrada anal√≥gica del microcontrolador con un comando </font></font><code>realflow = analogRead(fmpin)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(0 &lt;= </font></font><code>realflow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;1023). En modo autom√°tico, el sistema se esfuerza por mantener la igualdad entre </font></font><code>targetflow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y </font></font><code>realflow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">controlando la v√°lvula proporcional. El valor de apertura de la v√°lvula se calcula utilizando el controlador de diferenciaci√≥n proporcional integral (PID). Puede leer sobre el controlador PID </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqu√≠</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqu√≠</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqu√≠</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . La biblioteca </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">GyverPID</font></a><font style="vertical-align: inherit;"> se usa para implementar el controlador </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">con algunos cambios y adiciones. Como la biblioteca ha sido modificada, use la biblioteca adjunta a este c√≥digo y no la descargue del enlace de arriba. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para usar el controlador PID, es necesario seleccionar los coeficientes de los </font><font style="vertical-align: inherit;">componentes </font><font style="vertical-align: inherit;">proporcionales </font></font><code>Kp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, integrales </font></font><code>Ki</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y diferenciales </font></font><code>Kd</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, as√≠ como el tiempo de iteraci√≥n </font></font><code>dtpid</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. El valor de la variable </font></font><code>dtpid</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">debe seleccionarse en funci√≥n de la inercia del sistema. Cuanto m√°s inerte sea el sistema, m√°s deber√≠a ser </font></font><code>dtpid</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Seg√∫n las clasificaciones y los resultados de las pruebas para el dispositivo en cuesti√≥n, elegimos valores </font></font><code>dtpid</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= 100-330 ms. Los coeficientes </font></font><code>Kp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>Ki</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>Kd</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">se seleccionan en un valor fijo</font></font><code>dtpid</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y dependen significativamente del sistema. </font><font style="vertical-align: inherit;">Las recomendaciones sobre la selecci√≥n de coeficientes se pueden encontrar </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqu√≠</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqu√≠</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqu√≠</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces, el algoritmo ejecutado c√≠clicamente por el microcontrolador es el siguiente:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">if</span>(    )<font></font>
	   <span class="hljs-function">inp
	<span class="hljs-title">if</span><span class="hljs-params">(inp &gt;= <span class="hljs-number">0</span> &amp;&amp; inp &lt; <span class="hljs-number">1023</span>)</span>
		  
		    inp
	<span class="hljs-title">if</span><span class="hljs-params">(inp &lt;= <span class="hljs-number">0</span> &amp;&amp; inp &gt;= <span class="hljs-number">-1023</span>)</span>
		  
		     -inp 
<span class="hljs-title">if</span><span class="hljs-params">(  &amp;&amp;      dtpid )</span>
	      -
	    
<span class="hljs-title">if</span><span class="hljs-params">(     dt )</span>
	   
	   
	   
</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La interfaz gr√°fica de usuario est√° escrita en Python usando el marco gr√°fico PyQt. </font><font style="vertical-align: inherit;">El dise√±o se cre√≥ en Qt Designer, despu√©s de lo cual el c√≥digo del archivo .ui se convirti√≥ en un archivo Python. </font><font style="vertical-align: inherit;">Para obtener una introducci√≥n al desarrollo de GUI y el uso de PyQt, consulte </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqu√≠</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqu√≠</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La interfaz gr√°fica interact√∫a con el firmware Arduino a trav√©s del puerto serie utilizando la biblioteca </font></font><code>pyserial</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">El programa Python hace lo siguiente:</font></font><br>
<br>
<ol>
<li>      </li>
<li>          ,        ,     </li>
<li>     0-1023,   ,    </li>
<li>  .3     </li>
<li>    ,     ( 0-1023) </li>
<li>  .5            </li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El c√≥digo para conectarse al puerto serie se toma prestado </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">de aqu√≠</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El m√≥dulo est√° dise√±ado para transferir desde unidades de usuario al rango 0-1023 </font></font><code>units.py</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Este m√≥dulo facilita agregar nuevas unidades. </font><font style="vertical-align: inherit;">El usuario debe indicar el nombre de las unidades y la f√≥rmula de conversi√≥n de 0-1023 a las nuevas unidades. </font><font style="vertical-align: inherit;">El m√≥dulo se proporciona con comentarios detallados. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los datos recibidos del medidor de flujo y emitidos por el firmware del microcontrolador al puerto serie son le√≠dos desde el puerto por el programa Python y, despu√©s de que las unidades se han convertido, se muestran en texto y en forma gr√°fica. </font><font style="vertical-align: inherit;">Una biblioteca se utiliza para dibujar un gr√°fico del consumo actual </font></font><code>pyqtgraph</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">resultados</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para comenzar a trabajar con RRG, debe: flashear el microcontrolador, conectar la alimentaci√≥n, ejecutar el programa Python, establecer una conexi√≥n con el puerto serie. Despu√©s de eso, el usuario puede seleccionar el modo de operaci√≥n (manual o autom√°tico) y establecer el valor de apertura de la v√°lvula requerida en el modo de operaci√≥n manual o el valor de flujo admitido en el modo autom√°tico. El caudal de gas actual se muestra en el campo correspondiente y se muestra en el gr√°fico. El gr√°fico se actualiza c√≠clicamente, despu√©s de alcanzar el n√∫mero especificado de puntos, el gr√°fico se borra y el dibujo comienza nuevamente. El usuario puede seleccionar las unidades utilizadas.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/1s/kd/jf/1skdjfks-dwbv2_4bxv5lko9rso.png" alt="imagen"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La figura muestra la apariencia de la interfaz gr√°fica de usuario y un gr√°fico del caudal de gas obtenido en el modo autom√°tico y muestra la conmutaci√≥n del RGG entre diferentes valores del caudal soportado. </font><font style="vertical-align: inherit;">Los resultados se dan en unidades de 0-1023. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para demostrar las posibilidades de mantener una velocidad de flujo de gas constante, consideramos el caso cuando la velocidad de flujo cuando la v√°lvula proporcional se abre con un valor constante "flota", como se muestra en el lado izquierdo del gr√°fico (x &lt;950) en la figura a continuaci√≥n. </font><font style="vertical-align: inherit;">El resultado del funcionamiento del mantenimiento autom√°tico del caudal establecido se puede ver en el lado derecho del gr√°fico (x&gt; 1000). </font><font style="vertical-align: inherit;">Las pruebas mostraron que la desviaci√≥n del caudal establecido en el modo de retenci√≥n autom√°tica no es m√°s del 2%.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/cg/ni/5w/cgni5wyzma05n_8uxijteltnacu.png" alt="imagen"><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Observaciones</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El uso del microcontrolador Arduino Nano es innecesario ya que solo una peque√±a parte de sus pines est√° involucrado. </font><font style="vertical-align: inherit;">Por otro lado, ser√≠a mejor usar microcontroladores con una mayor capacidad de bits de entradas / salidas anal√≥gicas para aumentar la precisi√≥n de la medici√≥n y el ajuste. </font><font style="vertical-align: inherit;">Al cambiar el tipo de microcontrolador, puede ser necesario implementar su propio controlador PID; esto no deber√≠a causar dificultades ya que el algoritmo es simple. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En la etapa de desarrollo, el circuito el√©ctrico se ensambl√≥ en una placa de pruebas (ver Figura 2). </font><font style="vertical-align: inherit;">Para un uso posterior, es necesario soldar el circuito y colocarlo en la carcasa. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los autores del art√≠culo no son ingenieros electr√≥nicos ni programadores, por lo tanto, los consejos constructivos para mejorar son bienvenidos.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Materiales adicionales</font></font></h4> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los c√≥digos fuente para el firmware Arduino y los programas Python, as√≠ como la documentaci√≥n para los medidores de flujo y las v√°lvulas proporcionales utilizadas, est√°n disponibles en </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Expresiones de gratitud</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agradecemos a nuestros colegas la idea del sistema implementado en este trabajo. </font><font style="vertical-align: inherit;">AlexGyver y otros usuarios comparten generosamente sus experiencias por la informaci√≥n que utilizamos en nuestro trabajo.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">recomendaciones</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El uso de un sistema de retroalimentaci√≥n que consiste en una v√°lvula proporcional, un medidor de flujo y un microcontrolador le permite hacer RRG para mantener un flujo de gas dado. </font><font style="vertical-align: inherit;">Las pruebas mostraron una desviaci√≥n del caudal requerido en menos del 2%. </font><font style="vertical-align: inherit;">El costo del sistema fue inferior a 200 USD. </font><font style="vertical-align: inherit;">El prototipo ensamblado mostr√≥ operabilidad en una amplia gama de condiciones. </font><font style="vertical-align: inherit;">El uso adicional puede requerir refinamiento, incluido el cableado de los circuitos, la fabricaci√≥n de la carcasa, etc.</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es487402/">https://habr.com/ru/post/es487402/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es487388/index.html">Desarrollo natural: c√≥mo pasar del aprendizaje electr√≥nico a la gesti√≥n del conocimiento</a></li>
<li><a href="../es487390/index.html">Componentes web sin Shadow DOM</a></li>
<li><a href="../es487392/index.html">¬øQu√© quiere saber Magnet sobre sus clientes?</a></li>
<li><a href="../es487394/index.html">Traducci√≥n del libro de Andrew Un, Pasi√≥n por el aprendizaje autom√°tico, cap√≠tulos 34 y 35</a></li>
<li><a href="../es487400/index.html">Maestro SCADA 4D. ¬øHay vida en ARM?</a></li>
<li><a href="../es487404/index.html">GoLang y OpenCV (OpenVino && Cuda)</a></li>
<li><a href="../es487406/index.html">Ingenier√≠a inversa de un enrutador dom√©stico utilizando binwalk. ¬øConf√≠a en el software de su enrutador?</a></li>
<li><a href="../es487408/index.html">Creaci√≥n de infraestructura de TI tolerante a fallas. Parte 3. Organizaci√≥n del enrutamiento en enrutadores VyOS</a></li>
<li><a href="../es487412/index.html">Amigo ORDENADO con √≠ndices</a></li>
<li><a href="../es487414/index.html">Las misiones de computadora como una herramienta incre√≠ble para aprender palabras en ingl√©s</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>