<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸº ğŸš° ğŸ¤£ Bagaimana kami belajar merekomendasikan film dan mengapa Anda tidak harus hanya mengandalkan peringkat ğŸ‘¨ğŸ¿â€ğŸ“ â¬œï¸ ğŸ‘¨ğŸ½â€âš–ï¸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bayangkan Anda ingin menghabiskan malam menonton film, tetapi tidak tahu mana yang harus dipilih. Pengguna Yandex sering menemukan diri mereka dalam s...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Bagaimana kami belajar merekomendasikan film dan mengapa Anda tidak harus hanya mengandalkan peringkat</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/497390/"><img src="https://habrastorage.org/webt/vu/_4/oo/vu_4oolbpa8pde7nsycpg5vpokq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bayangkan Anda ingin menghabiskan malam menonton film, tetapi tidak tahu mana yang harus dipilih. Pengguna Yandex sering menemukan diri mereka dalam situasi yang sama, sehingga tim kami mengembangkan rekomendasi yang dapat ditemukan di Search and Air. Tampaknya ini rumit: kami mengambil peringkat pengguna, dengan bantuan mereka kami melatih mobil untuk menemukan film yang cenderung memberi 5 poin, kami mendapatkan daftar film yang sudah jadi. Tetapi pendekatan ini tidak berhasil. Mengapa? Itulah yang akan saya ceritakan hari ini.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sedikit sejarah. Kembali pada tahun 2006, Netflix meluncurkan kontes pembelajaran mesin Netflix Prize. Jika Anda tiba-tiba lupa, maka perusahaan belum streaming di Internet, tetapi menyewa film dalam DVD. Tetapi meskipun begitu, penting baginya untuk memprediksi peringkat pengguna untuk merekomendasikan sesuatu kepadanya. Jadi, inti dari kompetisi: untuk memprediksi peringkat pemirsa adalah 10% lebih baik (menurut metrik RMSE) daripada Cinematch, sistem rekomendasi Netflix. Ini adalah salah satu kompetisi massal pertama semacam ini. Bunga memanaskan dataset besar (lebih dari 100 juta peringkat), serta hadiah $ 1 juta.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kompetisi berakhir pada 2009. </font><font style="vertical-align: inherit;">Tim-tim Bellagor's Pragmatic Chaos dan The Ensemble mencapai garis finish dengan hasil yang sama (RMSE = 0,8567), tetapi Ensemble mengambil tempat kedua karena mereka mengirim solusi 20 menit lebih lambat daripada para pesaing. </font><font style="vertical-align: inherit;">Hasil dan pekerjaan dapat ditemukan di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sini</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Tetapi hal yang paling menarik adalah berbeda. </font><font style="vertical-align: inherit;">Jika Anda yakin cerita yang berulang di konferensi khusus, algoritma yang menang tidak muncul dalam produksi dalam layanan streaming video yang segera diluncurkan. </font><font style="vertical-align: inherit;">Saya tidak dapat berbicara tentang alasan keputusan orang lain, tetapi saya akan memberi tahu Anda mengapa kami melakukan hal yang sama.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Peringkat pribadi</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk beberapa waktu sekarang, pengguna Yandex dapat menilai film yang telah mereka tonton. Dan tidak hanya di KinoPoisk, tetapi juga di hasil pencarian. Seiring waktu, kami telah mengumpulkan ratusan juta perkiraan puluhan juta orang. Pada titik tertentu, kami memutuskan untuk menggunakan data ini untuk membantu pengguna memahami seberapa besar mereka menginginkan film. Faktanya, kami memecahkan masalah yang sama seperti pada kontes Netflix Prize, yaitu, kami memperkirakan peringkat apa yang akan diberikan pengguna pada film tersebut. Pada saat itu, peringkat KinoPoisk dan IMDB sudah ada, yang dibangun berdasarkan peringkat orang. Kami membangun peringkat pribadi, jadi kami memutuskan untuk menggunakan skala terpisah sebagai persentase untuk menghindari kesamaan visual dan kebingungan.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/dd/tk/h7/ddtkh7i3ud_9q5lmqtvw-4ambgc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ngomong-ngomong, kebutuhan untuk mengkorelasikan skala poin dan persentasenya adalah sakit kepala yang terpisah dan tidak terlihat, jadi saya akan membicarakannya sebentar. </font><font style="vertical-align: inherit;">Tampaknya untuk skala 10 poin, ambil 10% untuk setiap poin - dan intinya ada di topi. </font><font style="vertical-align: inherit;">Tapi tidak. </font><font style="vertical-align: inherit;">Alasannya adalah psikologi dan kebiasaan. </font><font style="vertical-align: inherit;">Misalnya, dari sudut pandang pengguna, peringkat 8/10 jauh lebih baik daripada 80%. </font><font style="vertical-align: inherit;">Bagaimana cara menghubungkan ini? </font><font style="vertical-align: inherit;">Dengan crowdsourcing! </font><font style="vertical-align: inherit;">Dan begitulah yang kami lakukan: kami meluncurkan tugas di Tolok, di mana para penembak menggambarkan harapan film dengan skor atau persentase tertentu dari peringkat pribadi. </font><font style="vertical-align: inherit;">Berdasarkan markup ini, kami memilih fungsi yang menerjemahkan prediksi skor dari titik ke persentase sehingga harapan pengguna tetap terjaga.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contoh pencarian di Tolok</font></font></b><div class="spoiler_text"><img src="https://habrastorage.org/webt/tw/fv/ux/twfvuxxkjd7rnkave0yuudmzs5q.png"><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Memprediksi harapan dari film itu berguna, tetapi akan menyenangkan untuk membangun rekomendasi juga. </font><font style="vertical-align: inherit;">Artinya, segera tunjukkan daftar film bagus kepada orang tersebut. </font><font style="vertical-align: inherit;">Pada saat itu, banyak dari Anda mungkin berpikir: "Dan mari kita urutkan film-film yang belum ditonton pengguna berdasarkan peringkat pribadi." </font><font style="vertical-align: inherit;">Awalnya kami juga berpikir begitu. </font><font style="vertical-align: inherit;">Tetapi kemudian saya harus menyelesaikan dua masalah.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Masalah alat</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ketika pengguna mencari film tertentu (atau ingin menyewa DVD tertentu), layanan harus memprediksi peringkat film tertentu ini. Persisnya masalah ini diselesaikan di kontes Netflix Prize, tempat metrik RMSE digunakan. Tetapi rekomendasinya memecahkan masalah yang berbeda: Anda tidak perlu menebak nilainya, tetapi untuk menemukan film yang pada akhirnya akan ditonton. Dan metrik RMSE melakukan pekerjaan yang buruk ini. Misalnya, penalti untuk memperkirakan peringkat 2 bukannya 1 sama persis dengan 5 bukannya 4. Tapi sistem kami seharusnya tidak pernah merekomendasikan film yang menempatkan pengguna 2! Metrik berbasis daftar jauh lebih cocok untuk tugas ini, seperti Precision @ K, Recall @ K, MRR, atau NDCG. Saya tidak bisa membantu tetapi memberi tahu Anda sedikit lebih banyak tentang mereka (tetapi jika Anda tidak tertarik dengan metrik, lewati saja paragraf berikutnya). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mari kita mulai dengan metrik.</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MRR</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (artinya peringkat timbal balik). Kami akan melihat posisi apa di peringkat yang akan menjadi film yang berinteraksi dengan pengguna (misalnya, menonton atau memuji) dalam periode pengujian. Metrik MRR adalah posisi terbalik rata-rata pengguna dari film semacam itu. Yaitu</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>M</mi><mi>R</mi><mi>R</mi><mo>=</mo><mfrac><mn>1</mn><mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow><mi>U</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow></mrow></mfrac><munderover><mo>&amp;#x2211;</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>u</mi><mo>=</mo><mn>1</mn></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow><mi>U</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow></mrow></munderover><mfrac><mn>1</mn><mrow><mi>r</mi><mi>a</mi><mi>n</mi><msub><mi>k</mi><mi>u</mi></msub></mrow></mfrac></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="23.7ex" height="4.259ex" viewBox="0 -1132.2 10204.2 1833.9" role="img" focusable="false" style="vertical-align: -1.63ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgq3g3CgUeGsWWVWtFT7Mm_MCas_g#MJMATHI-4D" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgq3g3CgUeGsWWVWtFT7Mm_MCas_g#MJMATHI-52" x="1051" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgq3g3CgUeGsWWVWtFT7Mm_MCas_g#MJMATHI-52" x="1811" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgq3g3CgUeGsWWVWtFT7Mm_MCas_g#MJMAIN-3D" x="2848" y="0"></use><g transform="translate(3626,0)"><g transform="translate(397,0)"><rect stroke="none" width="1056" height="60" x="0" y="220"></rect><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgq3g3CgUeGsWWVWtFT7Mm_MCas_g#MJMAIN-31" x="496" y="582"></use><g transform="translate(60,-442)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgq3g3CgUeGsWWVWtFT7Mm_MCas_g#MJMAIN-7C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgq3g3CgUeGsWWVWtFT7Mm_MCas_g#MJMATHI-55" x="278" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgq3g3CgUeGsWWVWtFT7Mm_MCas_g#MJMAIN-7C" x="1046" y="0"></use></g></g></g><g transform="translate(5367,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgq3g3CgUeGsWWVWtFT7Mm_MCas_g#MJSZ1-2211" x="0" y="0"></use><g transform="translate(1056,521)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgq3g3CgUeGsWWVWtFT7Mm_MCas_g#MJMAIN-7C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgq3g3CgUeGsWWVWtFT7Mm_MCas_g#MJMATHI-55" x="278" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgq3g3CgUeGsWWVWtFT7Mm_MCas_g#MJMAIN-7C" x="1046" y="0"></use></g><g transform="translate(1056,-308)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgq3g3CgUeGsWWVWtFT7Mm_MCas_g#MJMATHI-75" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgq3g3CgUeGsWWVWtFT7Mm_MCas_g#MJMAIN-3D" x="572" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgq3g3CgUeGsWWVWtFT7Mm_MCas_g#MJMAIN-31" x="1351" y="0"></use></g></g><g transform="translate(7833,0)"><g transform="translate(286,0)"><rect stroke="none" width="1964" height="60" x="0" y="220"></rect><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgq3g3CgUeGsWWVWtFT7Mm_MCas_g#MJMAIN-31" x="1138" y="582"></use><g transform="translate(60,-403)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgq3g3CgUeGsWWVWtFT7Mm_MCas_g#MJMATHI-72" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgq3g3CgUeGsWWVWtFT7Mm_MCas_g#MJMATHI-61" x="451" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgq3g3CgUeGsWWVWtFT7Mm_MCas_g#MJMATHI-6E" x="981" y="0"></use><g transform="translate(1118,0)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgq3g3CgUeGsWWVWtFT7Mm_MCas_g#MJMATHI-6B" x="0" y="0"></use><use transform="scale(0.5)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgq3g3CgUeGsWWVWtFT7Mm_MCas_g#MJMATHI-75" x="737" y="-213"></use></g></g></g></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>M</mi><mi>R</mi><mi>R</mi><mo>=</mo><mfrac><mn>1</mn><mrow><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mi>U</mi><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow></mrow></mfrac><munderover><mo>âˆ‘</mo><mrow class="MJX-TeXAtom-ORD"><mi>u</mi><mo>=</mo><mn>1</mn></mrow><mrow class="MJX-TeXAtom-ORD"><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mi>U</mi><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow></mrow></munderover><mfrac><mn>1</mn><mrow><mi>r</mi><mi>a</mi><mi>n</mi><msub><mi>k</mi><mi>u</mi></msub></mrow></mfrac></math></span></span><script type="math/tex" id="MathJax-Element-1">MRR = \frac{1}{|U|} \sum_{u=1}^{|U|} \frac{1}{rank_u}</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Metrik seperti itu, tidak seperti RMSE, mengevaluasi seluruh daftar, tetapi, sayangnya, hanya terlihat pada elemen tebakan pertama. Namun, mudah untuk memodifikasi metrik untuk menghilangkan kelemahan ini. Kami dapat menghitung jumlah posisi terbalik dari semua film yang berinteraksi dengan pengguna. Metrik ini disebut Peringkat Hit Rata-Rata Timbal Balik. Metrik ini memperhitungkan semua film yang ditebak dalam masalah ini. Perhatikan bahwa posisi k dalam pembayaran menerima bobot 1 / k untuk film yang ditebak dan 0 untuk film lain. Seringkali, 1 / log (k) digunakan alih-alih 1 / k: ini lebih cenderung sesuai dengan probabilitas bahwa pengguna akan menggulir ke posisi k. Hasilnya adalah metrik DCG (diskon keuntungan kumulatif)</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>D</mi><mi>C</mi><mi>G</mi><mo>=</mo><mfrac><mn>1</mn><mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow><mi>U</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow></mrow></mfrac><munderover><mo>&amp;#x2211;</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>u</mi><mo>=</mo><mn>1</mn></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow><mi>U</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow></mrow></munderover><munderover><mo>&amp;#x2211;</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>p</mi><mi>o</mi><mi>s</mi><mo>=</mo><mn>1</mn></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>N</mi></mrow></munderover><mfrac><mrow><mi>g</mi><mi>a</mi><mi>i</mi><msub><mi>n</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>p</mi><mi>o</mi><mi>s</mi></mrow></msub></mrow><mrow><mo movablelimits=&quot;true&quot; form=&quot;prefix&quot;>max</mo><mo stretchy=&quot;false&quot;>(</mo><mn>1</mn><mo>,</mo><mi>log</mi><mo>&amp;#x2061;</mo><mo stretchy=&quot;false&quot;>(</mo><mi>p</mi><mi>o</mi><mi>s</mi><mo stretchy=&quot;false&quot;>)</mo><mo stretchy=&quot;false&quot;>)</mo></mrow></mfrac></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="37.927ex" height="4.384ex" viewBox="0 -1186 16329.6 1887.7" role="img" focusable="false" style="vertical-align: -1.63ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgq3g3CgUeGsWWVWtFT7Mm_MCas_g#MJMATHI-44" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgq3g3CgUeGsWWVWtFT7Mm_MCas_g#MJMATHI-43" x="828" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgq3g3CgUeGsWWVWtFT7Mm_MCas_g#MJMATHI-47" x="1589" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgq3g3CgUeGsWWVWtFT7Mm_MCas_g#MJMAIN-3D" x="2653" y="0"></use><g transform="translate(3431,0)"><g transform="translate(397,0)"><rect stroke="none" width="1056" height="60" x="0" y="220"></rect><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgq3g3CgUeGsWWVWtFT7Mm_MCas_g#MJMAIN-31" x="496" y="582"></use><g transform="translate(60,-442)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgq3g3CgUeGsWWVWtFT7Mm_MCas_g#MJMAIN-7C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgq3g3CgUeGsWWVWtFT7Mm_MCas_g#MJMATHI-55" x="278" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgq3g3CgUeGsWWVWtFT7Mm_MCas_g#MJMAIN-7C" x="1046" y="0"></use></g></g></g><g transform="translate(5172,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgq3g3CgUeGsWWVWtFT7Mm_MCas_g#MJSZ1-2211" x="0" y="0"></use><g transform="translate(1056,521)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgq3g3CgUeGsWWVWtFT7Mm_MCas_g#MJMAIN-7C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgq3g3CgUeGsWWVWtFT7Mm_MCas_g#MJMATHI-55" x="278" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgq3g3CgUeGsWWVWtFT7Mm_MCas_g#MJMAIN-7C" x="1046" y="0"></use></g><g transform="translate(1056,-308)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgq3g3CgUeGsWWVWtFT7Mm_MCas_g#MJMATHI-75" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgq3g3CgUeGsWWVWtFT7Mm_MCas_g#MJMAIN-3D" x="572" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgq3g3CgUeGsWWVWtFT7Mm_MCas_g#MJMAIN-31" x="1351" y="0"></use></g></g><g transform="translate(7805,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgq3g3CgUeGsWWVWtFT7Mm_MCas_g#MJSZ1-2211" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgq3g3CgUeGsWWVWtFT7Mm_MCas_g#MJMATHI-4E" x="1494" y="675"></use><g transform="translate(1056,-287)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgq3g3CgUeGsWWVWtFT7Mm_MCas_g#MJMATHI-70" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgq3g3CgUeGsWWVWtFT7Mm_MCas_g#MJMATHI-6F" x="503" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgq3g3CgUeGsWWVWtFT7Mm_MCas_g#MJMATHI-73" x="989" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgq3g3CgUeGsWWVWtFT7Mm_MCas_g#MJMAIN-3D" x="1458" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgq3g3CgUeGsWWVWtFT7Mm_MCas_g#MJMAIN-31" x="2237" y="0"></use></g></g><g transform="translate(10897,0)"><g transform="translate(286,0)"><rect stroke="none" width="5025" height="60" x="0" y="220"></rect><g transform="translate(1421,614)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgq3g3CgUeGsWWVWtFT7Mm_MCas_g#MJMATHI-67" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgq3g3CgUeGsWWVWtFT7Mm_MCas_g#MJMATHI-61" x="480" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgq3g3CgUeGsWWVWtFT7Mm_MCas_g#MJMATHI-69" x="1010" y="0"></use><g transform="translate(958,0)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgq3g3CgUeGsWWVWtFT7Mm_MCas_g#MJMATHI-6E" x="0" y="0"></use><g transform="translate(424,-107)"><use transform="scale(0.5)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgq3g3CgUeGsWWVWtFT7Mm_MCas_g#MJMATHI-70" x="0" y="0"></use><use transform="scale(0.5)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgq3g3CgUeGsWWVWtFT7Mm_MCas_g#MJMATHI-6F" x="503" y="0"></use><use transform="scale(0.5)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgq3g3CgUeGsWWVWtFT7Mm_MCas_g#MJMATHI-73" x="989" y="0"></use></g></g></g><g transform="translate(60,-442)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgq3g3CgUeGsWWVWtFT7Mm_MCas_g#MJMAIN-6D"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgq3g3CgUeGsWWVWtFT7Mm_MCas_g#MJMAIN-61" x="833" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgq3g3CgUeGsWWVWtFT7Mm_MCas_g#MJMAIN-78" x="1334" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgq3g3CgUeGsWWVWtFT7Mm_MCas_g#MJMAIN-28" x="1862" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgq3g3CgUeGsWWVWtFT7Mm_MCas_g#MJMAIN-31" x="2252" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgq3g3CgUeGsWWVWtFT7Mm_MCas_g#MJMAIN-2C" x="2752" y="0"></use><g transform="translate(2143,0)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgq3g3CgUeGsWWVWtFT7Mm_MCas_g#MJMAIN-6C"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgq3g3CgUeGsWWVWtFT7Mm_MCas_g#MJMAIN-6F" x="278" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgq3g3CgUeGsWWVWtFT7Mm_MCas_g#MJMAIN-67" x="779" y="0"></use></g><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgq3g3CgUeGsWWVWtFT7Mm_MCas_g#MJMAIN-28" x="4310" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgq3g3CgUeGsWWVWtFT7Mm_MCas_g#MJMATHI-70" x="4700" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgq3g3CgUeGsWWVWtFT7Mm_MCas_g#MJMATHI-6F" x="5203" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgq3g3CgUeGsWWVWtFT7Mm_MCas_g#MJMATHI-73" x="5689" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgq3g3CgUeGsWWVWtFT7Mm_MCas_g#MJMAIN-29" x="6158" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhgq3g3CgUeGsWWVWtFT7Mm_MCas_g#MJMAIN-29" x="6548" y="0"></use></g></g></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>D</mi><mi>C</mi><mi>G</mi><mo>=</mo><mfrac><mn>1</mn><mrow><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mi>U</mi><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow></mrow></mfrac><munderover><mo>âˆ‘</mo><mrow class="MJX-TeXAtom-ORD"><mi>u</mi><mo>=</mo><mn>1</mn></mrow><mrow class="MJX-TeXAtom-ORD"><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mi>U</mi><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow></mrow></munderover><munderover><mo>âˆ‘</mo><mrow class="MJX-TeXAtom-ORD"><mi>p</mi><mi>o</mi><mi>s</mi><mo>=</mo><mn>1</mn></mrow><mrow class="MJX-TeXAtom-ORD"><mi>N</mi></mrow></munderover><mfrac><mrow><mi>g</mi><mi>a</mi><mi>i</mi><msub><mi>n</mi><mrow class="MJX-TeXAtom-ORD"><mi>p</mi><mi>o</mi><mi>s</mi></mrow></msub></mrow><mrow><mo movablelimits="true" form="prefix">max</mo><mo stretchy="false">(</mo><mn>1</mn><mo>,</mo><mi>log</mi><mo>â¡</mo><mo stretchy="false">(</mo><mi>p</mi><mi>o</mi><mi>s</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow></mfrac></math></span></span><script type="math/tex" id="MathJax-Element-2">DCG = \frac{1}{|U|} \sum_{u=1}^{|U|} \sum_{pos=1}^{N} \frac{gain_{pos}}{\max(1, \log(pos))}</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Tetapi kontribusi pengguna yang berbeda untuk metrik berbeda: untuk seseorang kami menebak semua film, untuk seseorang kami tidak menebak apa pun. </font><font style="vertical-align: inherit;">Karenanya, sebagai aturan, metrik ini dinormalisasi. </font><font style="vertical-align: inherit;">Bagi DCG setiap pengguna ke dalam DCG peringkat terbaik untuk pengguna itu. </font><font style="vertical-align: inherit;">Metrik yang dihasilkan disebut </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NDCG</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (gain kumulatif diskon yang dinormalisasi). </font><font style="vertical-align: inherit;">Ini banyak digunakan untuk menilai kualitas peringkat. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jadi, setiap tugas memiliki metrik sendiri. </font><font style="vertical-align: inherit;">Tetapi masalah selanjutnya tidak begitu jelas.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Masalah pilihan</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cukup sulit untuk dijelaskan, tetapi saya akan coba. Ternyata orang memberi nilai tinggi bukan pada film yang </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">biasanya</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mereka </font><font style="vertical-align: inherit;">tonton. Karya film langka, klasik, arthouse mendapatkan nilai tertinggi, tetapi ini tidak menghentikan orang di malam hari setelah bekerja dengan senang hati menonton komedi yang bagus, film aksi baru atau opera ruang angkasa yang spektakuler. Selain itu, pengguna di Yandex tidak menghargai semua film yang pernah mereka tonton dan pernah tonton di suatu tempat. Dan jika kita hanya fokus pada peringkat tertinggi, maka kita berisiko mendapat umpan film yang direkomendasikan yang akan terlihat logis, pengguna bahkan mungkin mengenali kualitasnya, tetapi pada akhirnya mereka tidak akan menonton apa pun.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Misalnya, beginilah tampilan umpan film saya jika kami mengukurnya berdasarkan peringkat pribadi dan tidak tahu apa-apa tentang pandangan saya di masa lalu. Film yang bagus. Tetapi saya tidak ingin memeriksanya hari ini.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/5y/gz/ot/5ygzotyougvrodtwyb_nlbp03va.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ternyata dalam kondisi peringkat yang tersebar dan kekurangan film dengan peringkat tinggi, ada baiknya tidak hanya melihat peringkatnya saja. Nah, kemudian kita latih mobil untuk memprediksi tampilan film yang direkomendasikan, dan bukan peringkatnya. Tampaknya logis, karena pengguna menginginkan ini. Apa yang bisa salah? Masalahnya adalah bahwa rekaman itu akan diisi dengan film, yang masing-masing cukup cocok untuk hiburan di malam hari, tetapi peringkat pribadi mereka akan rendah. Pengguna, tentu saja, akan memperhatikan fakta bahwa tidak ada "karya besar" dalam rekaman itu, yang berarti bahwa kredibilitas rekomendasi akan dirusak, mereka tidak akan menonton apa yang seharusnya mereka lihat. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sebagai hasilnya, kami sampai pada pemahaman bahwa keseimbangan antara dua ekstrem diperlukan. Penting untuk melatih mesin sehingga potensi untuk melihat dan persepsi rekomendasi oleh seseorang diperhitungkan.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bagaimana rekomendasi kami bekerja</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sistem kami adalah bagian dari Pencarian, jadi kami perlu membuat rekomendasi dengan sangat cepat: waktu respons layanan harus kurang dari 100 milidetik. </font><font style="vertical-align: inherit;">Oleh karena itu, kami mencoba untuk melakukan sebanyak mungkin operasi berat offline, pada tahap persiapan data. </font><font style="vertical-align: inherit;">Semua film dan pengguna dalam sistem rekomendasi diwakili oleh profil (penting untuk tidak bingung dengan akun), yang meliputi kunci objek, penghitung dan embedding (dengan kata lain, vektor di ruang tertentu). </font><font style="vertical-align: inherit;">Profil film disiapkan setiap hari di YT ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dibaca sebagai "Yt"</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) dan dimuat ke dalam RAM mesin yang menanggapi permintaan. </font><font style="vertical-align: inherit;">Tetapi dengan pengguna, semuanya sedikit lebih rumit.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setiap hari kami juga membuat profil pengguna utama di YT dan mengirimkannya ke toko Yandex, yang darinya Anda bisa mendapatkan profil dalam beberapa puluh milidetik. Tetapi data dengan cepat menjadi usang jika seseorang secara aktif menonton dan mengevaluasi video. Tidak baik jika rekomendasi mulai terlambat. Karenanya, kami membaca aliran acara pengguna dan membentuk bagian dinamis dari profil. Ketika seseorang memasukkan permintaan, kami menggabungkan profil dari repositori dengan profil dinamis dan mendapatkan satu profil, yang dapat tertinggal dari kenyataan hanya dalam beberapa detik.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ini terjadi offline (yaitu, di muka), dan sekarang kita langsung menuju ke runtime. Di sini sistem rekomendasi terdiri dari dua langkah. Pemeringkatan seluruh basis data film terlalu panjang, jadi pada langkah pertama kami cukup memilih beberapa ratus kandidat, yaitu, kami menemukan film yang mungkin menarik bagi pemirsa. Ini termasuk lukisan populer dan lukisan yang dekat dengan pengguna di beberapa hiasan. Ada beberapa algoritma untuk menemukan tetangga terdekat dengan cepat, kami menggunakan HNSW (Hierarchical Navigable Small World). Dengannya, kami menemukan film yang paling dekat dengan pengguna hanya dalam beberapa milidetik. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pada langkah kedua, kami mengekstrak fitur (kadang-kadang mereka juga disebut faktor) oleh film, pengguna dan pasangan pengguna / film dan peringkat kandidat menggunakan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CatBoost</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Biarkan saya mengingatkan Anda: kami sudah menyadari bahwa kami perlu fokus tidak hanya pada pandangan, tetapi juga pada karakteristik kualitas rekomendasi lainnya, jadi untuk pemeringkatan kami sampai pada kombinasi beberapa model CatBoost yang dilatih untuk berbagai target. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk menemukan kandidat, kami menggunakan embeddings dari beberapa dekomposisi matriks: dari versi klasik ALS, yang memprediksi penilaian, hingga variasi yang lebih kompleks berdasarkan SVD ++. </font><font style="vertical-align: inherit;">Sebagai fitur untuk peringkat, baik penghitung acara pengguna sederhana dan film, CTR untuk berbagai acara, serta model pra-pelatihan yang lebih kompleks digunakan. </font><font style="vertical-align: inherit;">Misalnya, prediksi ALS juga berfungsi sebagai fitur. </font><font style="vertical-align: inherit;">Salah satu model yang paling berguna adalah merekomendasikan jaringan syaraf DSSM, yang mungkin akan saya bicarakan sedikit lagi.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rekomendasi DSSM</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DSSM adalah jaringan saraf dua menara. Setiap menara membangun embedding sendiri, maka jarak cosinus dipertimbangkan antara embeddings, angka ini adalah output jaringan. Artinya, jaringan belajar untuk mengevaluasi kedekatan objek di menara kiri dan kanan. Jaringan saraf yang sama digunakan, misalnya, dalam </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pencarian web</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> untuk menemukan dokumen yang relevan dengan permintaan. Untuk tugas pencarian, permintaan dikirim ke salah satu menara, dan dokumen ke yang lain. Untuk jaringan kami, peran permintaan dimainkan oleh pengguna, dan film bertindak sebagai dokumen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Menara film ini dibangun berdasarkan data tentang film: ini adalah judul, deskripsi, genre, negara, aktor, dll. Bagian jaringan ini sangat mirip dengan pencarian. Namun, untuk pemirsa kami ingin menggunakan kisahnya. Untuk melakukan ini, kami menggabungkan penyisipan film dari cerita tersebut dengan waktu yang pudar sejak saat acara. Kemudian, di atas total embedding, kami menerapkan beberapa lapisan jaringan dan sebagai hasilnya kami mendapatkan embedding ukuran 400.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/lt/3k/v0/lt3kv0xtsbzqiyxq_333j3sgkua.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika Anda segera memperhitungkan seluruh riwayat pengguna dalam penyematan, ini akan sangat memperlambat pelatihan. </font><font style="vertical-align: inherit;">Karena itu, kita menuju trik dan mempelajari jaringan dalam dua tahap. </font><font style="vertical-align: inherit;">Pertama, pelajari InnerDSSM yang lebih sederhana. </font><font style="vertical-align: inherit;">Di pintu masuk, ia hanya menerima 50 acara terakhir dari riwayat pengguna tanpa membaginya menjadi beberapa jenis acara (tampilan, peringkat ...). </font><font style="vertical-align: inherit;">Kemudian kami melatih kembali InnerDSSM yang dihasilkan sepanjang sejarah pengguna, tetapi dengan pengelompokan ke dalam jenis acara. </font><font style="vertical-align: inherit;">Jadi kami mendapatkan OuterDSSM, yang digunakan dalam runtime. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Menggunakan jaringan runtime di dahi membutuhkan sumber daya komputasi yang cukup banyak. </font><font style="vertical-align: inherit;">Oleh karena itu, kami menyimpan embeddings dari menara film dalam database, dan embeddings menurut riwayat pengguna diperbarui dekat waktu nyata. </font><font style="vertical-align: inherit;">Jadi, selama pemrosesan permintaan, Anda hanya perlu menerapkan sebagian kecil OuterDSSM dan menghitung cosinus, ini tidak memakan banyak waktu.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kesimpulan</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang rekomendasi kami sudah tersedia dalam pencarian kami (misalnya, dengan permintaan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[apa yang harus dilihat]</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), di layanan Yandex.Air, dan versi yang disesuaikan dari teknologi ini juga digunakan di Yandex.Stations. </font><font style="vertical-align: inherit;">Tapi ini bukan berarti kita bisa santai. </font><font style="vertical-align: inherit;">Kami terus melatih model baru, menerapkan lebih banyak data, mencoba pendekatan baru untuk pelatihan dan metrik kualitas baru. </font><font style="vertical-align: inherit;">Menurut pendapat saya, semakin tua area, semakin sulit untuk dikembangkan. </font><font style="vertical-align: inherit;">Tapi ini adalah minat utama para spesialis.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id497376/index.html">Apa yang harus dilakukan dengan pipi merah agar hidung Anda tidak tumbuh</a></li>
<li><a href="../id497382/index.html">8 kesulitan tim Agile selama pandemi: â€œNdagwurugwu nke anya mmiriâ€, á»¥já», oke iwe, agá»nar, COVID-19</a></li>
<li><a href="../id497384/index.html">Cara membuat akses aman ke server dalam mode jauh</a></li>
<li><a href="../id497386/index.html">Fellowship VK Fellowship berbicara tentang masa depan pembelajaran jarak jauh, disiplin dan sosialisasi</a></li>
<li><a href="../id497388/index.html">Penembak sejuta dari awal: jalur pengembang indie</a></li>
<li><a href="../id497392/index.html">Bagaimana cara tumbuh dari seorang mahasiswa menjadi seorang insinyur perangkat lunak?</a></li>
<li><a href="../id497394/index.html">Sepuluh Sumber Daya dengan Program Ilmu Komputer Tersedia Gratis pada bulan April</a></li>
<li><a href="../id497396/index.html">Kolega: bukan teman atau musuh, tetapi bagaimana?</a></li>
<li><a href="../id497398/index.html">AMD EPYC Rome 7x32 Server Processors - Merekam Kinerja Core Tunggal</a></li>
<li><a href="../id497402/index.html">Bagaimana cara membuat bahasa pemrograman Python?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>