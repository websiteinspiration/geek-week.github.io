<!doctype html>
<html class="no-js" lang="zh-CN">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩‍👧‍👧 👨🏾‍🏫 👇🏽 一键开关的故事 ⛹🏼 🍯 🛥️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="在我们的LAN聚合中，有六对Arista DCS-7050CX3-32S交换机和一对Brocade VDX 6940-36Q交换机。并不是说该网络上的Brocade交换机对我们造成了很大的压力，它们无法正常工作并执行其功能，但是我们正在准备某些操作的完全自动化，并且这些交换机上没有这些功能。我还想从...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>一键开关的故事</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/selectel/blog/498368/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/y6/hn/ng/y6hnnglhd7cga9rdsoloimhiism.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在我们的LAN聚合中，有六对Arista DCS-7050CX3-32S交换机和一对Brocade VDX 6940-36Q交换机。</font><font style="vertical-align: inherit;">并不是说该网络上的Brocade交换机对我们造成了很大的压力，它们无法正常工作并执行其功能，但是我们正在准备某些操作的完全自动化，并且这些交换机上没有这些功能。</font><font style="vertical-align: inherit;">我还想从40GE接口切换到使用100GE预留未来2-3年的可能性。</font><font style="vertical-align: inherit;">因此，我们决定将Brocade换成Arista。</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
这些交换机是每个数据中心的LAN聚合交换机。</font><font style="vertical-align: inherit;">分布交换机（聚合的第二层）直接连接到它们，它们本身已经组装在服务器机架中的机架顶LAN交换机中。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/wr/_k/mn/wr_kmn_mxcbk5pzlszif5fwpmmy.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
每个服务器都包含在一个或两个访问交换机中。接入交换机连接到一对配电交换机（两个配电交换机和从接入交换机到不同配电交换机的两条物理链路用于冗余）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
每个服务器都可以由其客户端使用，因此为客户端分配了单独的VLAN。然后，将相同的VLAN分配给该客户机在任何机架中的另一台服务器。数据中心由几个这样的行（POD）组成，机架的每一行都有自己的分配开关。然后，将这些分布交换机连接到聚合交换机。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/oc/2p/r5/oc2pr5parnr_c3-m4s1fswgxlcm.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
客户端可以在任何行中订购服务器，无法预先预测将在任何特定机架中的任何特定行中分配或安装该服务器，因此，聚合交换机上每个数据中心大约有2500个VLAN。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DCI（数据中心互连）设备连接到聚合交换机。它可用于L2连接（一对形成到另一个数据中心的VXLAN隧道的交换机）和L3连接（两个MPLS路由器）。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/eh/2a/pg/eh2apgb0jx6excyolzu7hlqwwiy.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
正如我已经写过的，为了统一在一个数据中心中的设备上自动配置服务的过程，有必要替换中央聚合交换机。</font><font style="vertical-align: inherit;">我们在现有交换机旁边安装了新交换机，将它们组合成MLAG对，并开始准备工作。</font><font style="vertical-align: inherit;">它们立即连接到现有的聚合交换机，因此它们在所有客户端VLAN上都有一个公共的L2域。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">电路细节</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
为特定起见，我们将旧的聚合交换机</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">称为新的</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。想象一下，在</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">POD 1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">POD 4中</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有一个客户端</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C1的</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">服务器，客户端</font><font style="vertical-align: inherit;">的VLAN用蓝色表示。该客户端将L2连接服务与另一个数据中心一起使用，因此其VLAN在一对VXLAN交换机上提供服务。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
客户端</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将服务器放置在</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">POD 2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">POD 3中</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，我们将客户端的VLAN表示为深绿色。该客户端还将连接服务与另一个数据中心（L3）一起使用，因此其VLAN在一对L3VPN路由器上提供服务。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/pl/tx/8t/pltx8tm018xdgys6sbk08dng6_w.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们需要客户端VLAN来了解在替换工作的哪个阶段发生了什么，通信中断发生在哪里以及持续时间如何。</font><font style="vertical-align: inherit;">在这种方案中不使用STP协议，因为在这种情况下，它的树的宽度很大，并且协议的收敛从设备及其之间的链接数量成倍增长。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
通过双链路连接的所有设备形成一个堆栈，一个MLAG对或一个VCS-以太网工厂。</font><font style="vertical-align: inherit;">此类技术不用于一对L3VPN路由器，因为不需要L2冗余，因此它们通过聚合交换机彼此之间具有L2连接就足够了。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">实施方案</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在分析其他事件的选项时，我们意识到有几种方法可以进行这些工作。</font><font style="vertical-align: inherit;">从整个本地网络的全局中断到部分网络上的1-2秒的小中断。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">网络，站起来！</font><font style="vertical-align: inherit;">开关，更换！</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最简单的方法-当然是在所有POD和所有服务DCI中宣布全局中断连接，并</font><font style="vertical-align: inherit;">在</font><b><font style="vertical-align: inherit;">N</font></b><font style="vertical-align: inherit;">的交换机</font><b><font style="vertical-align: inherit;">中</font></b><font style="vertical-align: inherit;">交换来自交换机</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A的</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所有链路</font><font style="vertical-align: inherit;">。</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/oe/ru/gj/oerugjzsi4pdh1lqcnu5bxyzlra.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
除了中断，我们无法保证可以预测的时间（是的，我们知道链接的数量，但是我们不知道发生了多少次错误-从断线或连接器损坏到端口或收发器故障），我们仍然无法提前预测连接到旧交换机A的跳线DAC，AOC的长度是否足以够到它们，尽管它们位于新交换机N旁边，但仍略微分开，以及相同的收发器是否可以工作Arista交换机中Brocade交换机的/ DAC / AOC。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
而这一切都是在客户和技术支持的巨大压力下进行的（“ Natasha，站起来！Natasha，那里的一切都不起作用！Natasha，我们已经诚实地写了技术支持！Natasha，他们已经把那里的一切都放了！Natasha，但是有多少没有娜塔莎（Natasha），什么时候起作用？！”）。</font><font style="vertical-align: inherit;">即使预先宣布了休息时间并已向客户发出通知，也可以保证在此时间有大量电话涌入。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">等一下1-2-3-4</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如果不是宣布全局中断，而是宣布一系列有关POD和DCI服务的小中断。</font><font style="vertical-align: inherit;">在第一个中断中，</font><font style="vertical-align: inherit;">仅将</font><b><font style="vertical-align: inherit;">POD 1</font></b><font style="vertical-align: inherit;">切换</font><b><font style="vertical-align: inherit;">到</font></b></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">交换机</font><font style="vertical-align: inherit;">，在第二天-几天后</font><b><font style="vertical-align: inherit;">-POD 2</font></b><font style="vertical-align: inherit;">，然后几天</font><b><font style="vertical-align: inherit;">POD 3</font></b><font style="vertical-align: inherit;">，然后</font><b><font style="vertical-align: inherit;">POD 4 ... [N]</font></b><font style="vertical-align: inherit;">，然后VXLAN交换机，然后是L3VPN路由器。</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/dg/1n/8o/dg1n8oei0wx04clgnk2a0emzu-o.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
通过这样的交换工作组织，我们可以减少一次性工作的复杂性，并增加了解决突发问题的时间。与其他POD和DCI切换后，POD 1连接不会丢失。但是工作本身会延迟很长时间，对于在数据中心进行这项工作的时间来说，要求工程师进行物理上的切换，并且在工作期间（而且这种工作通常是在晚上，从凌晨2点到5点在早晨进行），在线网络工程师的出席率很高资格。但是，另一方面，我们的通讯中断时间很短，通常，工作可以在半小时的间隔内完成，最多可以中断2分钟（实际上，对于设备的预期行为，通常需要20-30秒）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在上面的示例中，客户端</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或客户端</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 您必须至少三遍警告通信中断的工作-第一次在其中一个服务器所在的POD上进行工作，第二次-在第二次和第三次-为DCI服务切换设备时。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">切换汇总的通讯渠道</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们为什么要谈论设备的预期性能，以及聚合通道如何在最小化通信中断的情况下进行切换。</font><font style="vertical-align: inherit;">想象一下下面的图片：</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/s0/g5/4b/s0g54bkj-ujiumk0egmyp7ookv0.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一方面，链接是分配开关POD- </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，它们形成MLAG对（堆栈，VCS工厂，vPC对），另一方面</font><font style="vertical-align: inherit;">，旧的MLAG对中包括</font><font style="vertical-align: inherit;">两个链接- </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">链接1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">链接2-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。聚合交换机</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">甲</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">在交换机</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的一侧</font><font style="vertical-align: inherit;">形成了称为</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Port-channel A的</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">聚合接口</font><font style="vertical-align: inherit;">，在聚合交换机</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的一侧形成了</font><font style="vertical-align: inherit;">称为</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Port D-channel的</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">聚合接口</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
聚合接口在工作中使用LACP，即两端的交换机定期在两条链路上交换LACPDU数据包，以确保链路：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">工人;</font></font></li>
<li>       .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在数据包中交换数据包时，将传输</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">system-id</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font><font style="vertical-align: inherit;">，该</font><font style="vertical-align: inherit;">值</font><font style="vertical-align: inherit;">指示其中包含这些链接的设备。对于MLAG对（堆栈，工厂等），构成聚合接口的设备的system-id值相同。交换机</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">发送</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Link 1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统id-D</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，而交换机</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">发送</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Link 2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统id-D</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
交换机</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">分析在同一Po D接口上收到的LACPDU数据包，并验证它们中的system-id是否匹配。如果某条链路接收到的system-id突然不同于</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当前工作值</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，然后从聚合接口中删除此链接，直到情况得到纠正。</font><font style="vertical-align: inherit;">现在我们</font><font style="vertical-align: inherit;">将系统ID LACP-partner- </font><b><font style="vertical-align: inherit;">A</font></b><font style="vertical-align: inherit;">的当前值</font><font style="vertical-align: inherit;">切换到</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">侧</font><font style="vertical-align: inherit;">，并在</font><b><font style="vertical-align: inherit;">A</font></b><font style="vertical-align: inherit;">侧</font><font style="vertical-align: inherit;">-LACP-partner- </font><b><font style="vertical-align: inherit;">D</font></b><font style="vertical-align: inherit;">的当前system-id值</font><font style="vertical-align: inherit;">切换到</font><b><font style="vertical-align: inherit;">D侧</font></b><font style="vertical-align: inherit;">。</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br>
<blockquote><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果需要切换聚合接口，我们可以采取两种不同的方式：</font></font></b></blockquote><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法1-简单</font></font></b>
                        <div class="spoiler_text"><b>     A</b>.      .<br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/4x/y3/1f/4xy31fons85dmc1xqmyoatx3cok.jpeg"></div></a><br>
       <b>N</b>,       LACP,   <b>Po D</b>   <b>N</b>      <b>system-id N</b>.<br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/9o/-x/d2/9o-xd2p6oyk3x_yxroz_tlh6hbc.jpeg"></div></a><br>
</div>
                    </div><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法2-最小化中断</font></font></b>
                        <div class="spoiler_text"><b>   2  Link 2</b>.     <b></b>  <b>D</b>       ,      .<br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/hw/u-/zy/hwu-zy2rypxofaqv9llskenulbm.jpeg"></div></a><br>
<b> Link 2   N2</b>.   <b>N</b>     <b>Po DN</b>,   <b>N2</b>    LACPDU <b>system-id N</b>.       ,   <b>N2</b>    ,   <b>Link 2</b>,       <b>Up</b>,     LACPDU      .<br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/cw/cy/st/cwcysth25wi_quoldhjghlysgx8.jpeg"></div></a><br>
  ,   <b>D2</b>    <b>Po A</b>   <b>Link 2   system-id N,      system-id A</b>,    <b>D</b>  <b>Link 2</b>     <b>Po A</b>.  <b>N</b>    <b>Link 2</b>  ,          LACP-  <b>D2</b>.     <b>Link 2</b>  .<br>
<br>
<b>    Link 1   A1</b>,     <b></b>  <b>D</b>   .  ,    <b>D</b>     system-id   <b>Po A</b>.<br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/me/uw/8u/meuw8uq0g5lglbxkt6qwbdiodtg.jpeg"></div></a><br>
   <b>D</b>  <b>N</b>    system-id <b>A-N</b>   <b>Po A</b>  <b>Po DN</b>,        <b>Link 2</b>.     ,  ,  2 .<br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/rj/zs/ai/rjzsai50lw8dbbxbk0ntlicofoa.jpeg"></div></a><br>
<b>     Link 1   N1</b>,       <b>Po A</b>  <b>Po DN</b>.           system-id    ,    .<br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/vd/8_/3c/vd8_3cszxwsxtwdcrewohql3arg.jpeg"></div></a><br>
</div>
                    </div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">其他连结</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
但是切换时可以在没有工程师在场的情况下进行切换。</font><font style="vertical-align: inherit;">为此，我们需要在</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">分布交换机</font><font style="vertical-align: inherit;">和新的</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">聚合交换机</font><font style="vertical-align: inherit;">之间预先铺设其他链路</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/du/sb/3h/dusb3hcwgnj_rt8kgkusiitltdk.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们正在</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N个</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">汇聚</font><font style="vertical-align: inherit;">交换机和所有POD分配交换机</font><font style="vertical-align: inherit;">之间建立新的链接</font><font style="vertical-align: inherit;">。这需要订购和铺设额外的跳线，并在</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">中都安装额外的收发器</font><font style="vertical-align: inherit;">。之所以可以这样做，是因为</font><font style="vertical-align: inherit;">每个POD </font><font style="vertical-align: inherit;">的</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">开关中</font><font style="vertical-align: inherit;">都有空闲端口（或者我们首先释放它们）。</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">结果，每个POD通过两条链路物理连接到旧交换机A和新交换机N。</font></font></b><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/32/wj/m-/32wjm-s5ehe6o1vlkvtrhcpn_mq.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">两个聚合接口形成</font><font style="vertical-align: inherit;">
于开关</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">蒲阿</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与链接</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">链路1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">链路2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">蒲Ñ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的链接</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">链接N1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">链接N2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。在此阶段，我们检查接口和链路的正确连接，链路两端的光信号水平（通过交换机的DDM信息），甚至可以检查链路在负载下的工作能力，或者监控光信号和收发器温度几天的状态。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
流量仍然通过</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Po A</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接口传输，而</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Po N</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接口</font><font style="vertical-align: inherit;">没有流量。接口上的设置大致如下：</font></font><br>
<br>
<pre><code class="plaintext hljs">Interface Port-channel A<font></font>
Switchport mode trunk<font></font>
Switchport allowed vlan C1, C2<font></font>
<font></font>
Interface Port-channel N<font></font>
Switchport mode trunk<font></font>
Switchport allowed vlan none</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
交换机D通常支持会话配置更改；使用具有此功能的此类交换机模型。因此，我们可以一次性更改Po A和Po N接口的设置：</font></font><br>
<br>
<pre><code class="plaintext hljs">Configure session<font></font>
Interface Port-channel A<font></font>
Switchport allowed vlan none<font></font>
Interface Port-channel N<font></font>
Switchport allowed vlan C1, C2<font></font>
Commit</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
然后，配置更改将足够快地发生，并且实际上中断时间不会超过5秒。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
这种方法使我们能够提前进行所有准备工作，进行所有必要的检查，与过程中的参与者进行协调，在没有任何创造性错误的情况下，在“一切都出错”的情况下详细预测生产工作的行动，并且手头有恢复到先前配置的计划。</font><font style="vertical-align: inherit;">该计划的工作由网络工程师执行，而物理上执行交换的工程师现场没有数据中心。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
使用此切换方法更重要的是-已预先设置了所有新链接以进行监视。</font><font style="vertical-align: inherit;">错误，单元中包含链接，链接加载-所有必需的信息已在监视系统中，并且已在地图上绘制。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D日</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">荚</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们为客户选择的痛苦最小，并且最不容易出现带有其他链接的“出问题”的切换路径。</font><font style="vertical-align: inherit;">因此，一连两晚，我们将所有POD切换到了新的聚合交换机。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/lm/c0/oa/lmc0oafevg5twt9amzd2thudqgm.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
但是交换提供DCI服务的设备仍然存在。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L2</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在设备提供L2连接的情况下，我们无法通过其他链接来进行类似的工作。</font><font style="vertical-align: inherit;">至少有两个原因：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VXLAN交换机上缺少所需速度的可用端口。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在VXLAN交换机上缺少会话配置更改的功能。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们没有在一次新的系统ID批准期间就“一次一次”地断开链接，因为我们没有100％的信心确定该程序可以正常工作，并且在实验室进行的测试表明，如果“出事了”，我们仍然会断开连接，最糟糕的情况不仅是与其他数据中心具有L2连接的客户，而且对于这个数据中心的所有客户而言。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们提前进行了从L2通道过渡的搅动工作，因此受VXLAN交换机操作影响的客户数量已经比一年前减少了几倍。</font><font style="vertical-align: inherit;">结果，我们决定中断L2连接服务上的通信，只要我们在一个数据中心内保持本地网络服务的正常运行即可。</font><font style="vertical-align: inherit;">此外，此服务的SLA还提供了有计划的休息时间的可能性。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L3</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
为什么我们在组织DCI服务时建议大家都改用L3VPN？原因之一是能够在提供此服务的其中一个路由器上工作的能力，只需将冗余级别降低到N + 0，而不会中断通信。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
更仔细地考虑服务提供方案。在此服务中，L2网段仅从客户端服务器转到L3VPN Selectel路由器。在路由器上，客户端网络已终止。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
每个客户端的服务器，例如，</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S3</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上面的图中，有它自己的私有IP地址- </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.0.0.2/24的S2服务器</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.0.0.3/24的S3服务器</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。地址</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.0.0.252/24</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.0.0.253/24</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由Selectel分别分配给路由器</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L3VPN-1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L3VPN-2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">IP地址</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.0.0.254/24是</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Selectel路由器上</font><b><font style="vertical-align: inherit;">的VRRP VIP地址</font></b><font style="vertical-align: inherit;">。</font></font><br>
<br>
<blockquote><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您可以</font><font style="vertical-align: inherit;">在我们的博客上</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">阅读</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有关L3VPN服务的更多信息</font><font style="vertical-align: inherit;">。</font></font></b></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在切换之前，所有内容看上去都大致与图中所示相同：</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/lu/z9/_l/luz9_l1950pk5r3vr5hrn-tdnss.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
两个路由器</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L3VPN-1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L3VPN-2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">分别连接到旧交换机聚合</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">甲</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L3VPN-1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">路由器是VRRP VIP地址10.0.0.254的主服务器</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">他将此地址的优先级设置为高于</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L3VPN-2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">路由器的优先级</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="plaintext hljs">unit 1006 {<font></font>
    description C2;<font></font>
    vlan-id 1006;<font></font>
    family inet {       <font></font>
        address 10.0.0.252/24 {<font></font>
            vrrp-group 1 {<font></font>
                priority 200;<font></font>
                virtual-address 10.100.0.254;<font></font>
                preempt {<font></font>
                    hold-time 120;<font></font>
                }<font></font>
                accept-data;<font></font>
            }<font></font>
        }<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
S2服务器使用10.0.0.254网关与其他位置的服务器进行通信。</font><font style="vertical-align: inherit;">因此，从网络断开L3VPN-2路由器的连接（当然，如果您首先从MPLS域断开连接）不会影响客户端服务器的连接。</font><font style="vertical-align: inherit;">在这一点上，电路的冗余水平简单地降低。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/gj/oi/sk/gjoiskqum4kmknfm8u36cf5v44w.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
之后，我们可以安全地将</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L3VPN-2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">路由器重新连接</font><font style="vertical-align: inherit;">到这对</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">交换机</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">布置链接，更换收发器。</font><font style="vertical-align: inherit;">客户端服务的工作所依赖的路由器的逻辑接口，直到确认所有功能均应正常工作之前，都已关闭。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在检查了链路，收发器，信号电平，接口上的错误级别之后，路由器开始运行，但已连接到新的一对交换机。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/jb/dh/cs/jbdhcsuakuma1fofufzc-pp0poy.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
接下来，我们降低L3VPN-1路由器的VRRP优先级，并将VIP地址10.0.0.254移至L3VPN-2路由器。</font><font style="vertical-align: inherit;">这些工作也可以在不中断通信的情况下进行。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/ix/uq/lq/ixuqlq5wx5veluojqgpwfy8yewu.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
将VIP地址传输到路由器10.0.0.254 </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L3VPN-2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">允许您在</font><font style="vertical-align: inherit;">不中断客户端联系的情况下</font><font style="vertical-align: inherit;">禁用路由器</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L3VPN-1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，并将其连接为一对新</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的N</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">汇聚交换机</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/lx/vo/jv/lxvojv_hiozuurqfsyonclwjez4.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
是否将VRRP VIP返还给L3VPN-1路由器是另一回事，并且如果您返还，则可以不中断地进行。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">总</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
完成所有这些步骤之后，我们真正地替换了我们其中一个数据中心的聚合交换机，同时最大程度地减少了对客户的影响。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/fw/d1/jx/fwd1jxarjvfl1agcko-4fhezx7s.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
剩下的就是拆除。</font><font style="vertical-align: inherit;">拆除旧交换机，拆除交换机A和D之间的旧链路，从这些链路拆除收发器，修复监控，修复文档和监控中的网络图。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在其他项目或其他类似的交换中，我们可以在交换后使用交换器，收发器，跳线，AOC，DAC。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
“娜塔莎，我们换了一切！”</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN498354/index.html">如何将“愿望清单”转换为“硬件”或半理想的半移动半桌面</a></li>
<li><a href="../zh-CN498358/index.html">学习法语或如何从PSA诊断扫描仪获取通用适配器</a></li>
<li><a href="../zh-CN498360/index.html">集成服务器负载指标评估</a></li>
<li><a href="../zh-CN498362/index.html">金士顿在固态硬盘出货量方面保持领先地位：我们如何做到这一点？</a></li>
<li><a href="../zh-CN498366/index.html">Yandex开发人员每天执行哪些算法</a></li>
<li><a href="../zh-CN498370/index.html">SAP UI5和确认窗口：关于上下文</a></li>
<li><a href="../zh-CN498372/index.html">网络模拟器教程ns-3。第五章</a></li>
<li><a href="../zh-CN498374/index.html">GPU计算-原因，时间和方式。加上一些测试</a></li>
<li><a href="../zh-CN498378/index.html">敏捷宣布Slurm的夜校</a></li>
<li><a href="../zh-CN498380/index.html">欧弗顿的行动之窗：如何利用大流行来限制我们的自由</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>