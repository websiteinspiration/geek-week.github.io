<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🌌 😐 🎵 コメントを開いてスパムに溺れない方法 ⛩️ 👂 🍥</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="あなたの仕事が美しいものを作ることであるとき、その結果はみんなの目の前にあるので、それについて特に話すことはできません。しかし、フェンスから碑文を消去しても、フェンスがきちんと見えるまで、または何か間違ったものを消去するまで、誰もあなたの仕事に気づきません。
 
 コメントを残したり、レビューしたり...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>コメントを開いてスパムに溺れない方法</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/490836/"><img src="https://habrastorage.org/webt/hj/yv/k9/hjyvk9j-z7efccbnuddl6ferhhy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
あなたの仕事が美しいものを作ることであるとき、その結果はみんなの目の前にあるので、それについて特に話すことはできません。しかし、フェンスから碑文を消去しても、フェンスがきちんと見えるまで、または何か間違ったものを消去するまで、誰もあなたの仕事に気づきません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コメントを残したり、レビューしたり、メッセージを送信したり、写真をアップロードしたりできるサービスは、遅かれ早かれスパム、詐欺、わいせつな言葉の問題に直面します。これは避けられないが、これは戦わなければならない。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私の名前はミハイルです。私はアンチスパムチームで働いており、Yandexサービスのユーザーをそのような問題から保護しています。私たちの仕事はめったに目立たない（そして良いです！）ので、今日はより詳細に話します。節度が役に立たないケースと、精度が有効性の唯一の指標ではない理由がわかります。また、猫と犬の例を使用して仲間について話し、なぜ「詐欺師のように考える」ことがなぜ役立つのかについても話します。</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Yandexでは、ユーザーがコンテンツを公開するサービスが増えています。 Yandex.Kewで質問したり、回答を書き込んだり、Yandex.Rayonでヤードのニュースについて話し合ったり、Yandex.Mapsで会話の中で交通状況を共有したりできます。しかし、サービスの利用者が増えると、詐欺師やスパマーにとって魅力的になります。彼らは来てコメントを記入します：彼らは簡単なお金を提供し、奇跡的な資金を宣伝し、社会的利益を約束します。スパマーのために、一部のユーザーはお金を失いますが、他のユーザーはだらしのない、スパムが繁殖したサービスに時間を費やしたいという欲求を失います。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、これが唯一の問題ではありません。</font><font style="vertical-align: inherit;">ユーザーを詐欺師から保護するだけでなく、コミュニケーションのための快適な雰囲気を作り出すことにも努めています。</font><font style="vertical-align: inherit;">コメントの人々がわいせつな言葉や侮辱に遭遇した場合、彼らは離れて帰ることはほとんどありません。</font><font style="vertical-align: inherit;">したがって、これも戦う必要があります。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">きれいなウェブ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
よくあることですが、最初の開発は検索で生まれました。検索結果のスパムと戦う部分です。 10年前、家族の検索や18歳以上のカテゴリからの回答を意味しないクエリに対してアダルトコンテンツをフィルタリングするタスクが登場しました。それで、手作業でタイプされたポルノとマットの最初の辞書が登場し、それらはアナリストによって補充されました。主なタスクは、アダルトコンテンツが受け入れられる場合と受け入れられない場合のリクエストを分類することでした。このタスクでは、マークアップが収集され、ヒューリスティックが構築され、モデルがトレーニングされました。したがって、不適切なコンテンツをフィルタリングするための最初の開発が登場しました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
時間の経過とともに、YandexはUGC（ユーザーが生成したコンテンツ）-ユーザー自身が作成したメッセージを表示し始め、Yandexのみが公開します。</font><font style="vertical-align: inherit;">上記の理由により、多くのメッセージは見ていなければ公開できませんでした-モデレートが必要でした。</font><font style="vertical-align: inherit;">次に、すべてのYandex UGC製品のスパムおよびサイバー犯罪者に対する保護を提供するサービスを作成することを決定し、検索で不適切なコンテンツをフィルタリングするためのベストプラクティスを使用しました。</font><font style="vertical-align: inherit;">このサービスはClean Webと呼ばれていました。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新しいタスクとヘルプトーカー</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初は、単純な自動化のみが機能しました。サービスからテキストが送信され、マット辞書、ポルノ辞書、および通常の辞書が実行されました-アナリストがすべてを手動で作成しました。しかし、時間の経過とともに、このサービスがYandex製品で使用されるようになり、新しい問題に取り組む方法を学ぶ必要がありました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
多くの場合、ユーザーは思い出す代わりに、意味のない手紙を発行し、業績を上げようと試みたり、競合会社のレビューで会社を宣伝したり、組織を混乱させたり、ペットショップに関するレビューを書き込んだりすることがあります：「完璧に調理された魚！」多分いつの日か人工知能はどんなテキストの意味も完全にとらえることを学ぶでしょう、しかし今や自動化は時々人間より悪いことを扱います。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
手動でのマーキングなしでは不可能であることが明らかになり、私たちは回路に2番目のステップを追加しました。それを人が手動で検査するために送信します。</font><font style="vertical-align: inherit;">分類子が問題を認識していないそれらの公開されたテキストがありました。</font><font style="vertical-align: inherit;">そのような作業の規模は容易に想像できるので、査定者に頼るだけでなく、「群衆の知恵」も利用しました。つまり、トロッカーに助けを求めました。</font><font style="vertical-align: inherit;">機械が何を逃したかを特定し、それによってそれを教えるのを助けるのは彼らです。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スマートキャッシングとLSHハッシュ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コメントを処理するときに遭遇したもう1つの問題は、スパム、つまり、その量と配信速度です。 Yandex.Ryonのオーディエンスが急速に拡大し始めると、スパマーがそこにやって来ました。彼らはテキストを少し変更することで常連を回避することを学びました。もちろん、スパムは依然として検出され、削除されていましたが、Yandexスケールで5分間でさえ、何百人もの人々が受け入れられないメッセージを見ることができました。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/cp/kk/us/cpkkusozgcahcmmttege412h16s.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
もちろん、これは私たちには適さなかったので、LSH（</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ローカリティに依存するハッシュ）に</font></a><font style="vertical-align: inherit;">基づいてテキストをスマートにキャッシュしました</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">これは次のように機能します。テキストを正規化し、リンクを破棄して、nグラム（n文字のシーケンス）に切り取りました。</font><font style="vertical-align: inherit;">さらに、n-gramからのハッシュが考慮され、ドキュメントのLSH-vectorはすでにそれらに基づいています。</font><font style="vertical-align: inherit;">重要なのは、似たようなテキストは、たとえ少し変わっても、似たようなベクトルになったことです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この決定により、分類子とトーカーの評決を同様のテキストに再利用できるようになりました。</font><font style="vertical-align: inherit;">スパム攻撃では、最初のメッセージがチェックを通過してスパムの判定でキャッシュに入るとすぐに、変更されたものも含めて、すべての新しい同様のメッセージが同じ判定を受け取り、自動的に削除されました。</font><font style="vertical-align: inherit;">その後、スパム分類子をトレーニングして自動的に再トレーニングする方法を学びましたが、この「スマートキャッシュ」は私たちに残っており、依然として多くのことを助けています。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">良いテキストの分類子</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
スパムとの戦いから抜け出す時間がないため、コンテンツの95％が手動で管理されていることに気付きました。分類子は違反にのみ対応し、ほとんどのテキストは適切です。私たちは、100人中95人のケースで「すべてが大丈夫」という格付けを与えたローカーを読み込みます。私は変わった仕事をしなければなりませんでした-良いコンテンツの分類子を作るために、今回のマークアップの利点は十分に蓄積されました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初の分類子は次のようになりました。テキストを見出し語化（単語を最初の形に減らします）、サービスの品詞をすべて破棄し、事前に用意された「良い見出し語の辞書」を使用します。テキスト内のすべての単語が「良い」場合、テキスト全体に違反はありません。さまざまなサービスで、このアプローチは25〜35％の手動マークアップ自動化をすぐにもたらしました。もちろん、このアプローチは理想的ではありません。いくつかの無垢な単語を組み合わせて非常に不快な発言をするのは簡単ですが、それにより、適切なレベルの自動化にすばやく到達し、より複雑なモデルをトレーニングする時間を与えることができました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次のバージョンの適切なテキストの分類子には、線形モデル、決定木、およびそれらの組み合わせがすでに含まれています。</font><font style="vertical-align: inherit;">たとえば、無礼と侮辱をマークするために、BERTニューラルネットワークを試します。</font><font style="vertical-align: inherit;">ここでは、文脈における単語の意味と、異なる文からの単語のつながりを把握することが重要であり、BERTはこれをうまく処理します。</font><font style="vertical-align: inherit;">（ちなみに、最近、ニュースの同僚</font><font style="vertical-align: inherit;">は、ヘッダーのエラーを検索するために、非標準的なタスクにテクノロジーをどのように使用するかを</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">話し</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ました。）その結果、サービスに応じてフローの最大90％を自動化することができました。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">正確性、完全性、スピード</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
開発するには、どのような種類の自動分類子がメリットと変更をもたらすか、また手動チェックの品質が低下しないかどうかを理解する必要があります。これには、正確性と完全性の指標を使用します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
精度とは、不適切なコンテンツのすべての評決における正しい評決の割合です。精度が高いほど、誤検知が少なくなります。正確さに従わない場合は、理論的にはすべてのスパムとわいせつを削除し、それらを使用して適切なメッセージの半分を削除できます。一方、精度のみに依存している場合、最高のテクノロジーは誰も捕まえないことです。したがって、完全性の指標もあります。つまり、不良コンテンツの総量に占める検出された不良コンテンツの割合です。これら2つのメトリックは、互いにバランスをとります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
測定では、各サービスの着信ストリーム全体をサンプリングし、専門家による評価と機械ソリューションとの比較のためにコンテンツのサンプルを評価者に提供します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、別の重要な指標があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
上で書いたように、何百人もの人が5分でも受け入れられないメッセージを見ることができます。</font><font style="vertical-align: inherit;">したがって、悪いコンテンツを非表示にする前に、何回ユーザーに表示したかを考慮します。</font><font style="vertical-align: inherit;">効率的に作業するには十分ではないため、これは重要です。すばやく作業する必要があります。</font><font style="vertical-align: inherit;">そして、マットに対する防御を構築したとき、それを完全に感じました。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子猫と犬の例に関するアンチマット</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
少し叙情的な余談。悪態や侮辱は悪意のあるリンクほど危険ではなく、スパムほど迷惑ではないと誰かが言うかもしれません。しかし、私たちは何百万ものユーザー間のコミュニケーションのために快適な環境を維持するよう努めており、人々は彼らが気分を害したところに戻ることを好まない。わいせつな言葉や侮辱の禁止が、ハブレを含む多くのコミュニティの規則に明記されているのも不思議ではありません。しかし、気が散っていました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
マタ語辞書は、ロシア語のすべての富に対応していません。主なわいせつなルーツは4つしかないという事実にもかかわらず、それらから、常連には聞き取れない無数の単語を作成できます。さらに、単語の音訳部分を書いたり、文字を同様の組み合わせで置き換えたり、文字を並べ替えたり、星を追加したりすることができます。コンテキストなしでは、ユーザーがわいせつな単語の意味を判別することが基本的に不可能である場合があります。私たちは、Habrのルールを尊重します。したがって、これを実際の例ではなく、アザラシや犬に示します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/am/2r/7e/am2r7eyo-zcy5ybpozqi-fqpeqe.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
「リアウ」と猫は言った。しかし、猫が別の言葉を言ったことを理解しています...</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちは語彙の「ファジーマッチング」のアルゴリズムと、よりインテリジェントな前処理について考え始めました：文字変換された接着スペースと句読点、パターンを検索し、それらに個別の正規表現を作成しました。このアプローチでは結果が得られましたが、望ましい完全性が得られずに精度が低下することがよくありました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それから、私たちは「罵り言葉のように考える」ことに決めました。私たち自身がデータにノイズを導入し始めました：文字の再配置、タイプミスの生成、文字の類似したスペルへの置換など。このための最初のマークアップは、大量のテキストの集団にマット辞書を適用することによって行われました。 1つの文をいくつかの方法で変形すると、すでに多くの文が作成されます。したがって、トレーニングサンプルを数十倍に増やすことができます。残ったのは、コンテキストを考慮した多かれ少なかれスマートモデルを受け取ったプールでトレーニングすることだけでした。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gl/xi/zf/glxizf1l6hii-b8rxzxzictbkgu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最終決定について話すのは時期尚早です。</font><font style="vertical-align: inherit;">この問題へのアプローチはまだ実験中ですが、数層の単純なシンボリック畳み込みネットワークが辞書や正規表現を大幅に上回っていることがわかります。精度と完全性の両方が向上することがわかりました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
もちろん、特に非常に無謀な場合、最も高度な自動化を回避する方法は常に存在することを理解しています。愚かなマシンが理解できないように書くことです。</font><font style="vertical-align: inherit;">ここでは、スパムとの戦いのように、わいせつなものを書く可能性を根絶することは目標としていません。私たちの仕事は、ゲームをろうそくに値しないものにすることです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
あなたの意見を共有し、コミュニケーションし、コメントする機会を開くのは簡単です。</font><font style="vertical-align: inherit;">安全で快適な環境を実現し、人々を尊重することは、はるかに困難です。</font><font style="vertical-align: inherit;">これがなければ、コミュニティの発展はありません。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja490824/index.html">Java開発者の目から見たPostgreSQLインデックスの状態</a></li>
<li><a href="../ja490826/index.html">生産効率の源泉</a></li>
<li><a href="../ja490828/index.html">Unityでローグライクをゼロから作成する</a></li>
<li><a href="../ja490830/index.html">Zimbra Collaboration Suite Open-Source Editionのパスワード管理</a></li>
<li><a href="../ja490832/index.html">靴のマーキング：200万のマーキングコード「1C」+「正直な​​サイン」を流通させたとき</a></li>
<li><a href="../ja490838/index.html">WiFi 6が登場：市場が提供するものと、なぜこのテクノロジーが必要なのか</a></li>
<li><a href="../ja490840/index.html">リソースプランニング。パート4.1。リソース計画を立てる前に</a></li>
<li><a href="../ja490842/index.html">写真内のGPT-2（Transformer言語モデルの視覚化）</a></li>
<li><a href="../ja490844/index.html">本「Kubernetesパターン：ネイティブクラウドアプリケーション開発パターン」</a></li>
<li><a href="../ja490846/index.html">カラシニコフアカデミーのウェブサイトをどのように開発し、2つのコンテストの受賞者になったか</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>