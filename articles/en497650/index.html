<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚òÉÔ∏è ü§ôüèΩ üë¥üèº TextRadar fuzzy search algorithm. Artifacts (Part 2) ü¶Å ‚õ∑Ô∏è üçú</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In a previous publication, the TextRadar Fuzzy Search Algorithm. The main approaches (Part 1) are considered the main approaches. When solving practic...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>TextRadar fuzzy search algorithm. Artifacts (Part 2)</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/497650/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In a previous publication, the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TextRadar Fuzzy Search Algorithm. </font><font style="vertical-align: inherit;">The main approaches (Part 1) are</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> considered the main approaches. </font><font style="vertical-align: inherit;">When solving practical problems, situations were identified where the use of only the basic methodology does not provide the required quality of the search. </font><font style="vertical-align: inherit;">As a result, add-ons (algorithm options) were created, which will be discussed.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fragments of one word of a search string are located in several words of a data string</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let the search string be ABCD and the data string be ABCE DFG. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/pc/xb/op/pcxbopxofnaolsxdfpqfudjntqa.png" alt="image"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Application of the basic algorithm will give the following result:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/d7/la/ot/d7laotga_lcqtjg3jfd8mzu-bg4.png" alt="image"><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
When such collisions occur, extra groups are deleted. </font><font style="vertical-align: inherit;">The choice of groups to delete is a separate, complex question. </font><font style="vertical-align: inherit;">As a result, the most significant groups should remain. </font><font style="vertical-align: inherit;">In the case of the above example, the answer is obvious - the smallest of the groups should be deleted.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/wl/-b/gc/wl-bgcgleiwpscd9dzotbtw4qyq.png" alt="image"><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The start fragment of the search string word is located inside the data string word</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Consider the example of finding the string ABC in the string XYZAB. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/wt/yo/hv/wtyohvos1ay6vyigojhkmslvdsu.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The basic algorithm will produce the following: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/nm/hl/r6/nmhlr6lskdhc8vhv0xgnlfay70u.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As a rule, such a result has no practical value and should be discarded.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Insufficient coverage of a word in a data row with fragments found</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If we search in the line ABCDEF for the word ABXYZ </font></font><br>
<br>
<img src="https://habrastorage.org/webt/qf/k8/ph/qfk8phnrjzhr_x2ivamgwrtrnps.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
we get: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/j_/gk/ev/j_gkevbukdbts9xwcebokuxcapw.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This result is also of no value and should be discarded.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Overgroups</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Given the search string ABCXEF and the data string ABCEF ABCDEF. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/or/kt/c-/orktc--g7pkpo8xcynkujfonf0g.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
From the point of view of the basic algorithm, both words of the data string are equivalent, but the first of them will have priority (if, ceteris paribus, the first word that is encountered is selected) and then the search result will be as follows:</font></font><br>
<cut></cut><br>
<img src="https://habrastorage.org/webt/zt/lh/vp/ztlhvpulane3vfcfrfmmfeae5hi.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If we introduce the concept of a supergroup as a union of word groups located on the same diagonal (or shift, see the previous publication, which discusses the basics of the algorithm) and increase the priority of the groups included in the supergroup through the parameter the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">size of the supergroup</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> calculated for each group and assume that if the group is not part of the supergroup, then the size of the supergroup for it will be equal to the size of the group itself - for our example, we get the following result:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/qu/nf/2m/qunf2mconxj2pd4jrof7ozydk74.png" alt="image"><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Overstated Long Words</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
When searching for a phrase containing a long and short word, found fragments of a long word can ‚Äúobscure‚Äù fragments of a short word. This is due to the use of a quadratic function in calculating the relevance coefficient. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/2y/qs/f7/2yqsf7w8fmub2mwspkatldro4sg.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Moreover, from the point of view of search quality, a longer word is not always more meaningful. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Consider an example. Suppose you need to find the string ABCDEFG XYZ in a text consisting of two pages: </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1. ABCDEFG ... QWE </font></font><br>
<br>
<img src="https://habrastorage.org/webt/j-/1p/bq/j-1pbqizdhr7jjzaltfvgagtpuq.png" alt="image"><br>
<br>
<img src="https://habrastorage.org/webt/x-/a_/ji/x-a_ji6pdcibm3hofwpducnwclk.png" alt="image"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2. ABCDEFO ... XYZ</font></font><br>
<br>
<img src="https://habrastorage.org/webt/r6/bl/6o/r6bl6ofb9ngdljygdi45ihzcgig.png" alt="image"><br>
<br>
<img src="https://habrastorage.org/webt/lh/xj/e_/lhxje_vhkyenvjswuufkp0-9tlc.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The numerator of the group composition coefficient (the denominator does not have a qualitative effect on the result, see the formula above) for the first page is 49, for the second - 36 + 9 = 45. That is, if we omit the influence on the length factor result, the search result on the first page will be of greater relevance, which does not meet expectations - in some cases, the search result on page 2 will be more valuable. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
One of the solutions can be to </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">introduce restrictions on the maximum length of groups</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . In our example, if the maximum group length is limited to 6, for example, we get 36 for the first page and 45 for the second, which will provide the result we expect - the relevance of the second page will be higher than the first.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Another way to solve the problem of the inconsistency of the significance of the words of the search phrase in the overall result of their length is to </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">calculate the relevance of the search phrase as the average of the relevance of the words included in it</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , calculated independently. </font><font style="vertical-align: inherit;">But here the opposite problem arises - the need to reduce the significance of short words, which can be solved in a similar way - by setting the threshold value to the length of the words involved in the formation of the general relevance, but already to the minimum value.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Repeated repetitions of the desired fragments</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As follows from the statement, the task is to search for the most relevant search string for a set of fragments, therefore the fact of repeated repetition of the desired fragments in the text does not affect the result - the first suitable fragment will be used as the search result, the rest will be discarded during processing. Consider an example of finding the string ABC in the string ABCD ABCE ABCF ABCG. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/d7/uv/s_/d7uvs_eopttebhllpqr4ygth1aq.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Application of the basic algorithm will give the following result:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/8g/7d/fe/8g7dfer9mmqeksb35tgxyrk62yi.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
From the point of view of the search for the most relevant page, this is correct, but when forming a detailed presentation of the search results, it is necessary to find and select all the suitable fragments. </font><font style="vertical-align: inherit;">To do this, you can use multiple repetition of the search procedure on the displayed page with a sequential shutdown of the fragments found in previous iterations. </font><font style="vertical-align: inherit;">In our example, this will allow us to find all suitable occurrences of the desired string.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/yh/sk/rk/yhskrkkpiq1hz34ckjpaqebdbd8.png" alt="image"><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Data processing speed</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
On-the-fly data processing has certain speed requirements - the search should not take too long. </font></font><br>
<br>
<b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Limiting the minimum size of processed groups, disabling search options</font></font></i></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
To increase the search speed, you can limit the minimum length of processed groups. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In practice, the following approach is applied - first the first ‚Äúrough‚Äù pass is made with a restriction on the minimum group size and disabling some options of the entire search data array and identifying the first data portion (the size of the optimal data portion is determined from the context of the problem being solved), and then the second, more thorough bypassing only the pages of this portion, already without limitation on the size of groups and with the inclusion of all the necessary options. </font></font><br>
<br>
<b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Parallel data processing</font></font></i></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Another way to increase the search speed is parallel data processing. </font><font style="vertical-align: inherit;">As a result, with a large search database, an acceptable total processing time can be achieved by increasing the number of parallel processes, which naturally will require increasing the capacity of the equipment.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">results</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The application of the described approaches allowed us to significantly improve the quality of the search, to reduce the dependence of its results on various types of typos - superfluous, missing characters, permutations, etc., and, more importantly, no matter where these typos are located - in the search bar itself or in the text, which is being searched. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The results of applying the described approaches can be seen on the demo stand deployed on the website </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">textradar.ru</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">On the example of a search in the text of the novel L.N. </font><font style="vertical-align: inherit;">Tolstoy's ‚ÄúWar and Peace‚Äù can compare search results using the basic and advanced versions of the algorithm. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/gi/7n/5e/gi7n5e7tbpqm0fcdrpwe0wq-cje.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Download or watch the demo project with advanced functionality (C # ASP.NET MVC) </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">here</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en497634/index.html">Rainbow Coloring Are Mathematicians' Best Friends</a></li>
<li><a href="../en497636/index.html">How the lack of computing power affected naval battles in world wars</a></li>
<li><a href="../en497638/index.html">Making a modem: transmit digital data over the air using OFDM and GNU Radio</a></li>
<li><a href="../en497642/index.html">Testing the GCC 10 Compiler with PVS-Studio</a></li>
<li><a href="../en497644/index.html">MANU game engine alpha released</a></li>
<li><a href="../en497652/index.html">Material Design Library Slider Component</a></li>
<li><a href="../en497654/index.html">Underwater Ultrasonic Rangefinder Module. Part three</a></li>
<li><a href="../en497656/index.html">The baby son came to his father and asked the baby: what is DDD? But so that I understand</a></li>
<li><a href="../en497658/index.html">Analysis of encrypted traffic without decryption</a></li>
<li><a href="../en497660/index.html">SpaceX Collects Starship Prototypes at Space Speed</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>