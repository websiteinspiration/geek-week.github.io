<!doctype html>
<html class="no-js" lang="ar">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ค ๐ฅ ๐จ๐ฟโ๐ค ูุบุงูุฑุงุช ูุญุฑุฑ ุงููุญุฏุฉ: Serialized Matryoshka ๐ฏ ๐ฅ ๐ฆ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ููุฏูุฉ ูุตูุฑุฉ
 ููุงุนุฏุฉ ุ ูู ุฃุฌู ุงููุตูู ุฅูู ูุฌุงู ุฎุงุตูุฉ ูุชุณูุณูุฉ ุชูููุง ุ ููุตุญูุง ุงูุนูุงุฌ ุงููุฏูู ุจุงุณุชุฎุฏุงู ุทุฑููุฉ FindPropertyRelative () ุ ุงูุชู ูุชู ูููุง ุทุฑุญ ุงุณู...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>ูุบุงูุฑุงุช ูุญุฑุฑ ุงููุญุฏุฉ: Serialized Matryoshka</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/502836/"><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฏูุฉ ูุตูุฑุฉ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุงุนุฏุฉ ุ ูู ุฃุฌู ุงููุตูู ุฅูู ูุฌุงู ุฎุงุตูุฉ ูุชุณูุณูุฉ ุชูููุง ุ ููุตุญูุง ุงูุนูุงุฌ ุงููุฏูู ุจุงุณุชุฎุฏุงู ุทุฑููุฉ FindPropertyRelative () ุ ุงูุชู ูุชู ูููุง ุทุฑุญ ุงุณู ุงููุชุบูุฑ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฃุณุจุงุจ ูุนููุฉ ุ ูุฐุง ุงูููุฌ ููุณ ููุงุณุจูุง ุฏุงุฆููุง. ูููู ุฃู ุชููู ุงูุฃุณุจุงุจ ูุชููุนุฉ ููุบุงูุฉ. ุนูู ุณุจูู ุงููุซุงู ุ ูููู ุฃู ูุชุบูุฑ ุงุณู ูุชุบูุฑ ุ ููุญู ุจุญุงุฌุฉ ุฅูู ุงููุตูู ุฅูู ูุฒูู ูู ุงูุฃูู ุฅูู ุฎุงุตูุฉ ุบูุฑ ูุชุณูุณูุฉ ุ ููุญุชุงุฌ ุฅูู ุงููุตูู ุฅูู ุงููุณุชูุทููู ุฃู ุญุชู ุทุฑู ูุงุฆู ูุชุณูุณู. ูู ูุณุฃู ุงูุฃุณุฆูุฉ "ููุงุฐุง ุชุญุชุงุฌ ุฅูู ูุฐุง ุนูู ุงูุฅุทูุงู" ู "ููุงุฐุง ูุง ููููู ุงูุงุณุชุบูุงุก ุนู ุงูุทุฑู ุงูุชูููุฏูุฉ". ูููุชุฑุถ ุฃููุง ูุญุชุงุฌ - ููุฐุง ูู ุดูุก.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐุง ุ ุฏุนูุง ููุชุดู ููููุฉ ุงูุญุตูู ุนูู ุงููุงุฆู ุงูุฐู ูุนูู ูุนู ุ ุจุงูุฅุถุงูุฉ ุฅูู ุฌููุน ุงููุงุฆูุงุช ุงูุชุงุจุนุฉ ูู ูู ุงูุฎุงุตูุฉ ุงููุชุณูุณูุฉ ุ ููุง ููุดุบู ูู ุทุฑูู ุงูุชุณูุณู ุงููููุก ุจุงูุนุซุฑุงุช. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุจุงู. </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุดูุฑ ูุฐู ุงูููุงูุฉ ุฅูู ุฃูู ุชุนุฑู ุจุงููุนู ููููุฉ ุงูุนูู ูุน UnityEditor ุ ููุฏ ูุชุจ ุนูู ุงูุฃูู ูุฑุฉ ูุงุญุฏุฉ PropertyDrawers ูุฎุตุตุฉ ุ ูุนูู ุงูุฃูู ุจุดูู ุนุงู ููู ููู ุชุฎุชูู ุงูุฎุงุตูุฉ ุงููุชุณูุณูุฉ ุนู ูุงุฆู ูุชุณูุณู.</font></font><br>
<br>
<a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณุงุฑ ุงูุชุณูุณู</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุงุฏุฆ ุฐู ุจุฏุก ุ ุถุน ูู ุงูููุงุท ููู O. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุงูุญุงูุฉ ุงูุฃูุซุฑ ุจุฏุงุฆูุฉ ุ ูุฏููุง ูุฆุฉ ูุฑูุซ ูุนููุฉ ูู MonoBehaviour ุ ูููุง ูุฌุงู ูุนูู ููุชูู ุฅูู ูุฆุฉ ูุชุณูุณูุฉ ุ ูู ุงููุงุถุญ ุฃูู ููุณ ูุฑูุซูุง ูู ุงูุจูุฑุฉ ุงููุญุฏููุฉ ุงูููุฏุณุฉ ูู A.K.A. </font><font style="vertical-align: inherit;">UnityEngine.Object.</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ExamplePulsar</span> : <span class="hljs-title">MonoBehaviour</span><font></font>
{<font></font>
...<font></font>
        [<span class="hljs-meta">Space</span>][Header(<span class="hljs-string">"Example Sandbox Inspector Field"</span>)]
        <span class="hljs-keyword">public</span> SandboxField sandboxField;<font></font>
...<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุงูููุฏ ุฃุนูุงู ุ ูุนุฏ SandboxField ูุฆุฉ ุฐุงุช ุณูุฉ Serializable. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงููุตูู ุฅูู MonoBehaviour ูููุงูู ููุณ ูุดููุฉ:</font></font><br>
<br>
<pre><code class="cs hljs">UnityEngine.Object serializationRoot = property.serializedObject.targetObject;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅุฐุง ููุช ุชุฑุบุจ ุ ููููู ุฃู ุชุฃุฎุฐู ููุง ูู ุ ููููุง ุงูุขู ูุณูุง ุจุญุงุฌุฉ ุฅููู. </font><font style="vertical-align: inherit;">ูุญู ููุชููู ุจุงูุญูู ุงููุชุณูุณู ููุณู ูู ุฃุฌู ุฑุณูู ุจูู ูุนุจุฉ ูุฑู ููุง ูู ููุถุญ ูู ุงูุดูู ุฃุฏูุงู.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/-w/3n/th/-w3nthkn0gmcdeuvpqlw2zctxhy.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููููุง ุฃู ูุฃุฎุฐ ูุณุงุฑ ุงูุชุณูุณู ุนูู ุงููุญู ุงูุชุงูู:</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">string</span> serializationPath = property.propertyPath;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุญุงูุชูุง ุ ุณูุชุฃูู ูุณุงุฑ ุงูุชุณูุณู ูู ุฃุญุฏ ุญููููุง ูุณูุนูุฏ "sandboxField" ุ ุงูุฐู ูุง ูุดุนุฑ ุจุงูุจุฑุฏ ุฃู ุงูุญุงุฑ ููู ุ ูุฃููุง ูู ุงููุณุชูู ุงูุฃูู ูู ุงูุชุนุดูุด ูุญุชุงุฌ ููุท ุฅูู ูุนุฑูุฉ ุงุณู ุงููุชุบูุฑ (ุงูุฐู ุ ุจุงูููุงุณุจุฉ ุ ุชู ุฅุฑุฌุงุนู ุฅูููุง). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฑุฌู ููุงุญุธุฉ ุฃูู ูุง ููุฌุฏ ุฃุญุฏ MonoBehaviour ูู ุงูุทุฑูู. </font><font style="vertical-align: inherit;">ุงูุขู ูุง ููู ุ ูููู ุณูุตุจุญ ููููุง ุนูุฏูุง ูุจุฏุฃ ูู ุชูููู ุฏููุฉ ุฑูุณูุฉ ุชุจุฏู ูุซู ูุฐุง:</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nestedClassVariable.exampleSandboxesList.Array.data [0] .evenMoreNested.Array.data [0]</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููู ูุง ูุชู ุงููุจุถ ุนููู ูู ููุช ูุงุญู ุ ุนูุฏูุง ูุชู ุฏูุฌ ุงูุฎุตุงุฆุต ุ ุณูููู ูุณุจููุง ุจูุง ููู:</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">string</span>[] path = property.propertyPath.Split(<span class="hljs-string">'.'</span>);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุขู ูุฏููุง ูู ุนูุฏ ูุณุงุฑ ุงูุชุณูุณู. </font><font style="vertical-align: inherit;">ูููู ูู ุงูุญุงูุฉ ุงูุฃูุซุฑ ุจุฏุงุฆูุฉ ุ ูุญุชุงุฌ ููุท ุฅูู ุงูุนูุฏุฉ ุงูุตูุฑูุฉ. </font><font style="vertical-align: inherit;">ุฎุฐูุง:</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">string</span> pathNode = path[<span class="hljs-number">0</span>];</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุจุชุดุบูู ุงูุนูุงุณ ุจุณูุท ูุงุญุตู ุนูู ุงููุฌุงู ูู ููุง:</font></font><br>
<br>
<pre><code class="cs hljs">Type objectType = serializationRoot.GetType();<font></font>
FieldInfo objectFieldInfo = objectType.GetField(pathNode);<font></font>
<span class="hljs-keyword">object</span> field = objectFieldInfo.GetValue(serializationRoot);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุชุฑู ูุฑุงุก ุงูููุงููุณ ูุณุฃูุฉ ุณุฑุนุฉ ูุฐุง ุงููุดุฑูุน. ุจุงููุณุจุฉ ูุนุฏุฏ ูููู ูู ูุฐู ุงูุญููู ูุชุนุดูุด ุตุบูุฑ ุ ุณุชููู ุชูููุฉ ุงูุงูุนูุงุณ ุฃูู ุจูุซูุฑ ูู ูู ูุง ูุญุฏุซ ุชุญุช ุบุทุงุก UnityEditor ุฃุซูุงุก ุงูุนุฑุถ. ุฅุฐุง ููุช ุชุฑูุฏ ุงูุจุฑุงููู - ุนูู github ุ ูุฅู ูุทูุฑู Unity ูุฏููู ุดูุก ูุซูุฑ ููุงูุชูุงู ุ UnityCsReference ุ ุงูุธุฑ ุฅูู ููุช ูุฑุงุบู ุ ูููู ูุชู ุชูููุฐ ุนุฑุถ ObjectField ุ ุนูู ุณุจูู ุงููุซุงู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุงููุงูุน ุ ูุฐุง </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุณ</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ุดูุก. ููุฏ ุญุตููุง ุนูู ุงููุฌุงู ุ ููุญู ุณุนุฏุงุก ุ ูููููุง ุฃู ููุนู ูุง ูุฑูุฏู ุจู ุ ูุญุชู ูุญุงูู ูุชุงุจุฉ UnityEvent ุงูุฎุงุต ุจูุง ูุน ุฌููุน ุงูุฃุฒุฑุงุฑ ูุงูุฅุฌุฑุงุกุงุช ุงููููุฉ ุงูุชู ุชุคุซุฑ ุนูู ูุฌุงููุง ููุท ุ ุจุบุถ ุงููุธุฑ ุนู ุงููุงุฆู ุงูุฐู ูุนูู ุนููู.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุนูู ุงูุฃูู ุ ุฃุซูุงุก ุชุนูููู ูู ุฌุฐุฑ ูุฐุง ุงููุงุฆู ุ ุณูููู ูู ุดูุก ุนูู ูุง ูุฑุงู ุ ูููู ุจุนุฏ ุฐูู ูู ูุนุฏ ูุซูุฑูุง. </font><font style="vertical-align: inherit;">ูู ูุณุงุฑ ุงูุชุณูุณู ุ ูุญู ูู ุงูุชุธุงุฑ ุงููุตูููุงุช ูุฌููุน ุฃููุงุน ุงูููุงุฆู ุ ุงูุชู ุชุชูุซู ุฑุบุจุชูุง ุงูุฑุฆูุณูุฉ ูู ูุถุนูุง ูู ุดุจุดุจ ุ ูุชุบููุฑ ุนุฏุฏ ุงูุนูุงุตุฑ ุตุนูุฏูุง ูู ุงูููุช ุงูููุงุณุจ. </font><font style="vertical-align: inherit;">ูููู ุงูุฌุญูู ุจูุฐุง ุ ุณูุญูุฑ ุฃููุงู ุชุญุช ุงูุตููู ููุณู.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฏููุง ูู ููุงููุฉ ูุฐู ุงูุฏูู</font></font></b>
                        <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/webt/l7/do/h3/l7doh3b9j_da24zsw9rc-7xefjs.png"></div></div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅุฐุง ูู ููู ูุฏููุง ุตูุงุฆู ูู ูุณุงุฑ ุงูุชุณูุณู ุ ูุณุชููู ุงููููุฉ ุชุงููุฉ: ุณูู ููุชูู ุนุจุฑ ุนูุฏ ุงูุชุณูุณู ุญุชู ูุตู ุฅูู ููุงูุฉ ุงูุณูุณูุฉ. </font><font style="vertical-align: inherit;">ุดูุก ูุซู ุงูุฑูุฒ ุงูุชุงูู:</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">object</span> currentObject = serializationRoot;
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; directSearchDepth; i++)<font></font>
{<font></font>
       <span class="hljs-keyword">string</span> pathNode = path[i];<font></font>
       Type objectType = currentObject.GetType();<font></font>
       FieldInfo objectFieldInfo = objectType.GetField(pathNode);<font></font>
       <span class="hljs-keyword">object</span> nextObject = objectFieldInfo.GetValue(currentObject);<font></font>
       currentObject = nextObject;<font></font>
}<font></font>
<span class="hljs-keyword">return</span> currentObject;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุญู ููุง ูู ุงูุชุธุงุฑ ุฎุจุฑูู ูุฒุนุฌูู ูู ุขู ูุงุญุฏ. </font><font style="vertical-align: inherit;">ุณุฃุจุฏุฃ ุจุงูุซุงูู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฏ ุชุคุฏู ุฎุทูุฉ ุฃุฎุฐ nextObject ูุฌุฃุฉ ุฅูู ุฅุฑุฌุงุน ูููุฉ ูุงุฑุบุฉ ุจุฏูุงู ูู ุงููุงุฆู ุงููุชููุน. </font><font style="vertical-align: inherit;">ุนุงุฏุฉ ูุง ูุญุฏุซ ูุฐุง ุนูุฏูุง ูููู ุฃููุงู ุจุฅูุดุงุก ุงููุงุฆู ุงูุฑุฆูุณู ูู ุงูููุชุด ุ ููุณุงุฑ ุงูุชุณูุณู ููุฌูุฏ ุจุงููุนู ุ ูููู ุงูุญูู ุงูููุงุจู ุบูุฑ ููุฌูุฏ (ููุฐุง ุณูุฌูุจ ููุง ุงููุฒูุฏ ูู ูุณุงุฆู ุงูุฑุงุญุฉ). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ูุฐู ุงูุญุงูุฉ ุ ุณูููู ูู ุงูุฌูุฏ ุฅุถุงูุฉ ุงููุฎุฑุฌ ูู ุงูุทุฑููุฉ ุนูู ุงูููุฑ ูุน ุงูุฅุฑุฌุงุน ูุงุฑุบูุง:</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">object</span> nextObject = objectFieldInfo.GetValue(currentObject);
<span class="hljs-keyword">if</span> (nextObject == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<font></font>
currentObject = nextObject;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
"ุงูุชุธุฑ ุฏูููุฉ! </font><font style="vertical-align: inherit;">- ููู ุงูุช. </font><font style="vertical-align: inherit;">"ููุงุฐุง ููุนู ุจุนุฏ ุฐูู ูู OnGUI ุฅุฐุง ุชู ุฅุฑุฌุงุน ุตูุฑ ุฅูููุงุ" </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุฌูุงุจ: ูุง ุดูุก. </font><font style="vertical-align: inherit;">ูุง ุดูุก ุญุฑูููุง. </font><font style="vertical-align: inherit;">ูุง ุนููู ุณูู ุงูุนูุฏุฉ ุ ูุจุงูุชุงูู ุชุฎุทู ุฎุทูุฉ ุงูุฑุณู ูุฐู ุ ูู ุงูุชุธุงุฑ ุฅูุดุงุก ุงูุญูู. </font><font style="vertical-align: inherit;">ูู ูุญุฏุซ ุดูุก ูุธูุน ูู ูุฐุง.</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnGUI</span>(<span class="hljs-params">Rect position, SerializedProperty property, GUIContent label</span>)</span><font></font>
{<font></font>
       SandboxField sandboxField = GetTarget&lt;T&gt;(property);<font></font>
       <span class="hljs-keyword">if</span> (sandboxField == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span>;<font></font>
โฆ<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุง GetTarget () ูู ุงููุธููุฉ ุงูููุงุจูุฉ ุ ูุน ุฃุฎุฐ ุงููุงุฆู ุงููุชุณูุณู ูู ุงูุฎุงุตูุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุงูููุงุณุจุฉ ุ ุฃูุตุญู ุจุฃุฎุฐ ูุฌุงู ุงูุงูุชูุงู ุฅูููุง ููุณ ููุง ุ ูููู ูู GetPropertyHeight. ุณูููู ูุฐุง ูุทููุจูุง ูู ุญุงูุฉ ูุชุงุจุฉ ุญููู ูุงุจูุฉ ููุชูุณูุน ูุงุจูุฉ ููุชูุณูุน ุจุฃุญุฌุงู ูุฎุชููุฉ ุงุนุชูุงุฏูุง ุนูู ุงููุญุชูู. ูุชู ุงุณุชุฏุนุงุก GetPropertyHeight () ูุจู OnGUI () ุ ูุฐูู ุฅุฐุง ุฃุฎุฐูุง ุงูุญูู ููุงู ููุชุจููุง ูู ุญูู PropertyDrawer ุงูุฎุงุต ุจูุง ุ ููู ูุถุทุฑ ุฅูู ูููู ูุฑุฉ ุฃุฎุฑู ุฅูู OnGUI.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฑุฌู ููุงุญุธุฉ ุฃูู ูุชู ุฅูุดุงุก ูุซูู ูู PropertyDrawer ุงููุฎุตุต ูุญุฏู ูุฑุณู ุฌููุน ุงูุฎุตุงุฆุต ุงููุชุณูุณูุฉ ุงููุฑุฆูุฉ ุญุงูููุง ุ ููุชู ุทุฑุญ ุงูุฎุตุงุฆุต ุงูุฌุฏูุฏุฉ ุนููู ูู ุฃุนูู ุฅูู ุฃุณูู. ูุฌุจ ุฃู ูุคุฎุฐ ูุฐุง ูู ุงูุงุนุชุจุงุฑ ุญุชู ูุง ุชุนุจุซ ูุน ุญุณุงุจ ุงุฑุชูุงุน ุงูุฎุงุตูุฉ ุงูุชุงููุฉ ุ ูุฅูุง ูุฏ ุชุญุตู ุนูู ูููู ุบูุฑ ุณุงุฑ ุนูุฏ ุงูููุฑ ุนูู ูุทููุฉ ููุชู ุชูุณูุน ุงูุญูู ุงูุฐู ุชุชููุนู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃูุถูุง ุ ูู ุงูุฒููุฉ ุงููุณุคููุฉ ุนู ุนุฑุถ ุงูุญูู ูู ุงููุญุฑุฑ ูุงูุฐู ุชุฑูุฏ ุฅุฌุฑุงุก ุชุณูุณู ูู ุ ูุฌุจ ุนููู ุฅุฌุฑุงุก ุชุณูุณู ุนูู ุฌุงูุจ ุงููุฆุฉ ุงููุงุจูุฉ ููุชุณูุณู ุ ูููุณ PropertyDrawer ุ ููู ุฃุฌู ุงูุฏูุฉ - ุฅุฑูุงู ุฃููุงุณ ุชุฌููุน ุดุฑุทูุฉ ุจุญูุซ ูุง ูุญุงูู ูู ูุฐุง ุงูุนุงุฑ ุงูุฅุณุจุงูู ุงูุฐูุงุจ ุฅูู ุงูุจูุงุก :</font></font><br>
<br>
<pre><code class="cs hljs">[<span class="hljs-meta">Serializable</span>]
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">SandboxField</span><font></font>
{<font></font>
โฆ<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">if</span> UNITY_EDITOR</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">bool</span> editorFoldout;
<span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span><font></font>
โฆ<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฃุฒู ุขุฎุฑ ููุชุธุฑูุง ููุง: ุฃุฑุงุฏุช ุฌููุน ุงูุญููู ุงูุชู ุชู ุฅูุดุงุคูุง ูู ุฎูุงู ุงููุญุฑุฑ ุฃู ุชุจุตู ุนูู ูููุดุฆ ุงููุฆุฉ ูุนูู ุงูููู ุงูุงูุชุฑุงุถูุฉ ุงููุญุฏุฏุฉ ูู ุงููุตู. </font><font style="vertical-align: inherit;">ุฅุฐุง ููุช ุจุฐูู ุ ุนูู ุณุจูู ุงููุซุงู ุ ูุซู ูุฐุง (ูุซุงู ูู ูุดุฑูุนู ุ ุญูุซ ูุงูุช ูููุฉ ุนูุฏ ุณุทุญ ุงููุงุก):</font></font><br>
<br>
<pre><code class="cs hljs">[<span class="hljs-meta">SerializeField</span>]<span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> m_nodesPerUnit = <span class="hljs-number">5</span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุณูุชู ุชุฌุงูู ูุฐู ุงููููุฉ ุชุณูุณู ูุงุฑุบ ููุทุฉ ุจูุฌุฑุฏ ุฅุถุงูุฉ ุนูุตุฑ ุฌุฏูุฏ ุฅูู ุงููุงุฆูุฉ. </font><font style="vertical-align: inherit;">ุงุณุชุฏุนุงุก ุงูููุดุฆ ููุญุตูู ุนูู ุงููุณุงุนุฏุฉ ููุณ ุฃูู ูุงุฆุฏุฉ: ุณูุชู ุชุฌุงูู ูู ูุง ูุชุจุชู ููุงู. </font><font style="vertical-align: inherit;">ุงููุงุฆู ุงูุฌุฏูุฏ ูู ูุฏู ูุซู ุงูุตูุฑ ุ ูุฌููุน ูููู ูู ุงูููู ุงูุงูุชุฑุงุถูุฉ ุญููุง ุ ููุฐุง ููุณ ููุท ุงูููู ุงูุชู ุชุฑูุฏ ุฑุคูุชูุง ููุงู ุ ูููู ุฌููุน ุฃููุงุน ุงูุฃุดูุงุก ุงูุฎุงููุฉ ูุงูุจุงุทูุฉ ู 0 ู Color.clear ูุบูุฑูุง ูู ุงูุฃุดูุงุก ุงููุงุญุดุฉ.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูุงุฒ ูู ุงููุญู</font></font></b>
                        <div class="spoiler_text">  .   NonUnitySerializableClass,       .      , DefaultEditorObject(),    . <br>
<br>
  - :<br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title">NonUnitySerializableClass</span><font></font>
{<font></font>
        <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">DefaultEditorObject</span>(<span class="hljs-params"></span>)</span><font></font>
        {<font></font>
            <span class="hljs-comment">// virtually do nothing</span><font></font>
        }<font></font>
<font></font>
        [<span class="hljs-meta">SerializeField</span>]<span class="hljs-keyword">private</span> <span class="hljs-keyword">bool</span> validated = <span class="hljs-literal">false</span>;
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">EditorCreated</span>(<span class="hljs-params"><span class="hljs-keyword">bool</span> force = <span class="hljs-literal">false</span></span>)</span><font></font>
        {<font></font>
            <span class="hljs-keyword">if</span> (validated &amp;&amp; !force) <span class="hljs-keyword">return</span>;<font></font>
            DefaultEditorObject();<font></font>
            validated = <span class="hljs-literal">true</span>;<font></font>
        }<font></font>
<font></font>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">NonUnitySerializableClass</span>(<span class="hljs-params"></span>)</span><font></font>
        {<font></font>
            EditorCreated(<span class="hljs-literal">true</span>);<font></font>
        }<font></font>
}</code></pre><br>
        DefaultEditorObject(),    ,   EditorCreated     .<br>
<br>
 :       .<br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/fg/dh/dr/fgdhdrfczfhhcki7dw6plxzj7vi.png"></div><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฏุนููุง ูุนูุฏ ุฅูู ุฎุฑุงููุง ุ ุฃู ุจุงูุฃุญุฑู ุฅูู ุงููุตูููุงุช. </font><font style="vertical-align: inherit;">ูุดููุฉ ุฃุฎุฑู ูุฏ ุชูุดุฃ ูู ูุฑุญูุฉ ุฃุจูุฑ ุชููู ูู ูุฐุง ุงูุณุทุฑ:</font></font><br>
<br>
<pre><code class="cs hljs">FieldInfo objectFieldInfo = objectType.GetField(pathNode);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููู ุฃู ูุนูุฏูุง ุงูุฌุงูุจ ุงูุฃููู ุตูุฑูุง ุฅุฐุง ูุงุฌู ุตููููุง ูู ูุณุงุฑ ุงูุชุณูุณู (ูุฃู ูุงุฆู "IList" ุณูููู ุตููู "Array"). </font><font style="vertical-align: inherit;">ุบูุฑ ุณุงุฑุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุงุฐุง ุฃูุนูุ </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุงูู ุฃูุง ุชูุน ูู ูุซู ูุฐู ุงูููุงูู ุนู ุทุฑูู</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุชุงุจุฉ ูุนุงูุฌ:</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; pathNode.Length; i++)<font></font>
{<font></font>
        <span class="hljs-keyword">string</span> pathNode = path[i];<font></font>
        Type objectType = currentObject.GetType();<font></font>
        FieldInfo objectFieldInfo = objectType.GetField(pathNode);<font></font>
<font></font>
        <span class="hljs-keyword">if</span> (objectFieldInfo == <span class="hljs-literal">null</span>)<font></font>
        {<font></font>
                <span class="hljs-keyword">if</span> (pathNode == <span class="hljs-string">"Array"</span>)<font></font>
                {<font></font>
                        i++;<font></font>
                        <span class="hljs-keyword">string</span> nextNode = path[i];
                        <span class="hljs-keyword">string</span> idxstr = nextNode.Substring(nextNode.IndexOf(<span class="hljs-string">"["</span>) + <span class="hljs-number">1</span>);<font></font>
                        idxstr = idxstr.Replace(<span class="hljs-string">"]"</span>, <span class="hljs-string">""</span>);
                        <span class="hljs-keyword">int</span> arrayNumber = Convert.ToInt32(idxstr);<font></font>
                        IList collection = currentObject <span class="hljs-keyword">as</span> IList;
                        <span class="hljs-keyword">if</span> (collection.Count &lt;= arrayNumber) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<font></font>
                        currentObject = collection[arrayNumber];<font></font>
                }<font></font>
                <span class="hljs-keyword">else</span><font></font>
                {<font></font>
                        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> NotImplementedException(<span class="hljs-string">"   "</span>);<font></font>
                }<font></font>
        }<font></font>
        <span class="hljs-keyword">else</span> <span class="hljs-comment">//  ,     </span><font></font>
        {<font></font>
                <span class="hljs-keyword">object</span> nextObject = objectFieldInfo.GetValue(currentObject);
                <span class="hljs-keyword">if</span> (nextObject == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<font></font>
                currentObject = nextObject;<font></font>
        }<font></font>
}<font></font>
<span class="hljs-keyword">return</span> currentObject;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุนู ุ ูููููุง ุญุชู ุงูุฏุฎูู ูู ูููู ุบูุฑ ุณุงุฑ ููุง ุ ุนูุฏูุง ูููู ูุณุงุฑ ุงูุชุณูุณู ุจุงููุนู ุ ุนูู ุณุจูู ุงููุซุงู ุ ุนูุตุฑ ุงูุจูุงูุงุช [0] ุฃู ุงูุจูุงูุงุช [1] ุ ููู ููู ุงูุตููู ุจุชูููุฐูุง ุจุนุฏ. </font><font style="vertical-align: inherit;">ุนูู ุณุจูู ุงููุซุงู ุ ุฃูุดุฃูุง ูุงุฆูุฉ ูุงุฑุบุฉ. </font><font style="vertical-align: inherit;">ูุณุฃูู ุนูุงุตุฑ N - ูุจุฏูู ูุฐุง ุงูุฎุท ุงูุฌููู:</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">if</span> (collection.Count &lt;= arrayNumber) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
... ูุญุตู ุนูู ูุฌููุนุฉ ูู ุงูุงุณุชุซูุงุกุงุช ูู ุงูุฎุฑุฎุฑุฉ. </font><font style="vertical-align: inherit;">ููู ูุง ูุงู ูุทููุจูุง ูู ุชุฎุทู ุฎุทูุฉ ุงูุชูุฏูู ุ ุจุนุฏ ุงูุงูุชุธุงุฑ ุญุชู ูุชู ุฅูุดุงุก ุงูุญููู ุงูุชู ุชูููุง. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุฃุฌุฏ ุจุนุฏ ุญุงูุงุช ุฃุฎุฑู ุนูุฏูุง ูููู objectFieldInfo == ูุงุฑุบูุง ุ ูููู ูู ููุณ ุงูููุช ูู ูุชู ุชุนููู ุนูุฏุฉ ุงูุชุณูุณู ุนูู ุฃููุง ุตููู ุ ูุฐุง ูุฅู ุทุฑุญ ุงุณุชุซูุงุก ุฑููุจ ูู ูุซู ูุฐู ุงูุญุงูุฉ ุงูุงุณุชุซูุงุฆูุฉ ุงูุงูุชุฑุงุถูุฉ ูู ูุณุฑูุง ูุงุญููุง. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุดูู ุนุงู ุ ุญุตููุง ุนูู ูุธููุฉ ุนูู ุฃูุซุฑ ุฃู ุฃูู ุชุณูุญ ููุง ุจุงุณุชุฎุฑุงุฌ ุญูู ูู ุฎูุงู ุฎุตุงุฆุตู ุงููุชุณูุณูุฉ. </font><font style="vertical-align: inherit;">ูู ุงููุณุชูุจู ุ ูููู ุชุนุฏูู ูุฐู ุงููุธููุฉ ูู ุฎูุงู ุฅุฌุจุงุฑูุง ุนูู ุงุณุชุฎุฑุงุฌ ุฌููุน ุงููุงุฆูุงุช ูู ูุณุงุฑ ุงูุชุณูุณู ุ ููุฐูู ุงูุจุญุซ ุนู ุฃูุฑุจ "ุฃุตู" ุ ุจูุง ูู ุฐูู ุฃู ุงุณุชุจุนุงุฏ ุงูุตูุงุฆู ุนูู ุทูู ุงููุณุงุฑ.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุฎุชุฑุงู ุงูุญูุงุฉ ูุฑุณู ุฎุตุงุฆุต ูุชุฏุงุฎูุฉ</font></font></b>
                        <div class="spoiler_text">      -  ,   Rect position  Rect indentedPosition = EditorGUI.IndentedRect(position).     ,         EditorGUI,      position ,       GUI โ    indentedPosition.   EditorGUILayout  OnGUI,       (   ,   ).<br>
<br>
    ,   MonoScript   (     -,   ),     static-,      AssetDatabase,        <i></i>         .<br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุดูุฑุง ููุงูุชุจุงู.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar502818/index.html">Y messenger: ุฑุณูู ูุงูุฑูุฒู ุนูู ุจูููุดูู *</a></li>
<li><a href="../ar502826/index.html">ูุธุฑุฉ ุนุงูุฉ ุนูู ุงููุงุณุญ ุงูุถูุฆู ุซูุงุซู ุงูุฃุจุนุงุฏ Creaform MetraSCAN</a></li>
<li><a href="../ar502830/index.html">Hackathon ุนูู ุงูุฅูุชุฑูุช "ุงููุงูุน ุงูุฌุฏูุฏ" VirusHack. ููู ูุงู</a></li>
<li><a href="../ar502832/index.html">ุฃุตุจุญุช ุดูุงุฏุฉ ISTQB ูุชุงุญุฉ ุนุจุฑ ุงูุฅูุชุฑูุช: ุชุฌุฑุจุฉ ุดุฎุตูุฉ</a></li>
<li><a href="../ar502834/index.html">ููู ุชุตุจุญ ูููุฏุณ DevOps ูู ุณุชุฉ ุฃุดูุฑ ุฃู ุญุชู ุฃุณุฑุน. ุงูุฌุฒุก 5. ุงููุดุฑ</a></li>
<li><a href="../ar502838/index.html">ูุง ุงููุฑู ุจูู ุชูููููุฌูุง ุงููุนูููุงุช ูุงูููู ุงูุฑูููุฉ: ุงูุชุญูู ุงูุฑููู ูุขุฑุงุก ุงูุฎุจุฑุงุก</a></li>
<li><a href="../ar502840/index.html">ุงุณุชุนุฑุงุถ ุงููุงุณุญ 3D EinScan Pro 2X Plus 3D Scanner</a></li>
<li><a href="../ar502842/index.html">ููููุฉ ุญูุงูุฉ ุจูุงูุงุช ุงููุณุชุฎุฏู ุงูุจูููุชุฑูุฉ ูู ุงูุงุณุชุฎุฏุงู ุงูุฅุฌุฑุงูู</a></li>
<li><a href="../ar502844/index.html">[ุงูุฌุฒุก 2/2] ุฏููู FFmpeg ู SDL ุฃู ููููุฉ ูุชุงุจุฉ ูุดุบู ููุฏูู ูู ุฃูู ูู 1000 ุณุทุฑ</a></li>
<li><a href="../ar502846/index.html">ุฃุทููุช ุฒููุฑุจูุฑุฌ ูุชุงุฌุฑ. ูุชุญูู Instagram ู Facebook ุชุฏุฑูุฌูุงู ุฅูู ูุชุงุฌุฑ.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>