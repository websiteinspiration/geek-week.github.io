<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘¨ğŸ»â€ğŸ”§ ğŸ‘¨ğŸ»â€ğŸ­ ğŸ˜‹ ã‚ªãƒ•ã‚£ã‚¹ã§ã®ãƒ©ãƒ³ãƒã®æ³¨æ–‡ã‚’æ”¹å–„ã—ãŸæ–¹æ³•ï¼ˆã‚µãƒ¼ãƒãƒ¼ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ããªã„å ´åˆï¼‰ ğŸ‘©ğŸ½â€ğŸŒ¾ â˜®ï¸ ğŸ‘¨ğŸ¾â€ğŸ”§</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ã¿ãªã•ã‚“ã€ã“ã‚“ã«ã¡ã¯ã€‚
 
 ç§ã¯ã‚ªãƒ•ã‚£ã‚¹ã§åƒãã¾ã™ã€‚ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢é–‹ç™ºè€…ã€‚ãã—ã¦æ™‚ã€…ç§ã¯é£Ÿã¹ã‚‹ã€‚ã¯ã„ã€æ¯æ—¥ã§ã™ã€‚é›‡ç”¨ä¸»ã¯ç§ãŸã¡ã«æ˜¼é£Ÿã‚’æä¾›ã—ã¾ã™-åŠ´åƒè€…ã¯æ˜æ—¥ã®æ˜¼é£Ÿã‚’æ³¨æ–‡ã—ã€æ˜æ—¥ã¯æ˜¼é£Ÿã®ä¾›çµ¦è€…ãŒåŠ´åƒè€…ãŒæ³¨æ–‡ã—ãŸã‚‚ã®ã‚’æŒã¡è¾¼ã¿ã¾ã™ã€‚æ³¨æ–‡ã—ãŸã‚‚ã®ã¨æŒã¡è¾¼ã¾ã‚ŒãŸã‚‚ã®ã¯å¿…ãšã—ã‚‚ä¸€è‡´ã—ã¾ã›ã‚“ãŒã€ãã†ã§ã¯ã‚ã‚Šã¾...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>ã‚ªãƒ•ã‚£ã‚¹ã§ã®ãƒ©ãƒ³ãƒã®æ³¨æ–‡ã‚’æ”¹å–„ã—ãŸæ–¹æ³•ï¼ˆã‚µãƒ¼ãƒãƒ¼ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ããªã„å ´åˆï¼‰</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/475892/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¿ãªã•ã‚“ã€ã“ã‚“ã«ã¡ã¯ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç§ã¯ã‚ªãƒ•ã‚£ã‚¹ã§åƒãã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢é–‹ç™ºè€…ã€‚</font><font style="vertical-align: inherit;">ãã—ã¦æ™‚ã€…ç§ã¯é£Ÿã¹ã‚‹ã€‚</font><font style="vertical-align: inherit;">ã¯ã„ã€æ¯æ—¥ã§ã™ã€‚</font><font style="vertical-align: inherit;">é›‡ç”¨ä¸»ã¯ç§ãŸã¡ã«æ˜¼é£Ÿã‚’æä¾›ã—ã¾ã™-åŠ´åƒè€…ã¯æ˜æ—¥ã®æ˜¼é£Ÿã‚’æ³¨æ–‡ã—ã€æ˜æ—¥ã¯æ˜¼é£Ÿã®ä¾›çµ¦è€…ãŒåŠ´åƒè€…ãŒæ³¨æ–‡ã—ãŸã‚‚ã®ã‚’æŒã¡è¾¼ã¿ã¾ã™ã€‚</font><font style="vertical-align: inherit;">æ³¨æ–‡ã—ãŸã‚‚ã®ã¨æŒã¡è¾¼ã¾ã‚ŒãŸã‚‚ã®ã¯å¿…ãšã—ã‚‚ä¸€è‡´ã—ã¾ã›ã‚“ãŒã€ãã†ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</font><font style="vertical-align: inherit;">ãƒ©ãƒ³ãƒã¯ãƒ©ãƒ³ãƒã‚ªãƒ¼ãƒ€ãƒ¼ãƒšãƒ¼ã‚¸ã§æ³¨æ–‡ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã ãŒâ€¦</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã—ã‹ã—ã€æœ€åˆã«ã€ãƒ©ãƒ³ãƒã‚ªãƒ¼ãƒ€ãƒ¼ãƒšãƒ¼ã‚¸ãŒã©ã®ã‚ˆã†ã«å½¢æˆã•ã‚Œã‚‹ã‹ã«ã¤ã„ã¦ã€ã‚µãƒ—ãƒ©ã‚¤ãƒ¤ã¯1é€±é–“ã®ä¾¡æ ¼ãƒªã‚¹ãƒˆã‚’å«ã‚€XLSãƒ•ã‚¡ã‚¤ãƒ«ã‚’é€ä¿¡ã—ã¾ã™ã€‚</font></font><br>
<br>
<img src="https://habrastorage.org/webt/8b/zj/sw/8bzjswumny4twmbde-z_qlxhlx8.png" alt="ç”»åƒ"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚µãƒ—ãƒ©ã‚¤ãƒ¤ãƒ¼ãŒé€ä¿¡ã™ã‚‹ä¾¡æ ¼ã®ä¾‹ã¯ã€</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ä¼šç¤¾ã®è…¸å†…ã®èª°ã‹ãŒé–‹ç™ºã—ãŸãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã‚’ä»‹ã—ã¦ãƒ©ãƒ³ãƒãƒ‘ãƒ¼ã‚¹ã‚’æ‹…å½“ã—ã€ä¼šç¤¾ã®ãƒãƒ¼ã‚¿ãƒ«ãŒè¡¨ç¤ºã§ãã‚‹å½¢å¼ã«å¤‰æ›ã™ã‚‹ã“ã¨ã§ã™ã€‚ãã—ã¦ã€å½¼ã¯ãã‚Œã‚’è¡¨ç¤ºã—ã¾ã™... </font></font><br>
<br>
<img src="https://habrastorage.org/webt/mj/xe/vm/mjxevmjk1xjpktpmhzsvfqv7-zu.png" alt="ç”»åƒ"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ³¨æ–‡ã•ã‚ŒãŸãƒ‡ã‚£ãƒŠãƒ¼ã®</font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/g_/gv/ur/g_gvurzwytojpckxlvm9ttpk3vu.png" alt="ç”»åƒ"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆãƒ©ãƒ³ãƒã®æ³¨æ–‡ãƒšãƒ¼ã‚¸</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ã®</font><i><font style="vertical-align: inherit;">ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ</font></i><font style="vertical-align: inherit;">ä½ç½®ã¯ä¸å¿«ã«ã‚«ãƒ†ã‚´ãƒªãƒ¼ã«åˆ†ã‘ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚åå‰ã¨æ§‹æˆã«é–¢ã™ã‚‹æƒ…å ±ã¯ãƒ•ãƒ«ãƒ†ã‚­ã‚¹ãƒˆã§ã‚ã‚Šã€ãƒŠãƒ“ã‚²ãƒ¼ãƒˆã™ã‚‹ã®ã¯å›°é›£ã§ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä»–ã®äººãŒæ°—ã«å…¥ã£ã¦ã„ã‚‹ã®ã§ã€æ³¨æ–‡ã—ãªã„æ–¹ãŒè‰¯ã„ã“ã¨ã¨ã€ä½•ã‚’è©¦ã™ã“ã¨ãŒã§ãã‚‹ã‹ã‚’ç†è§£ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚ã¤ã¾ã‚Šã€è©•ä¾¡ãŒå¿…è¦ã§ã™ã€‚ãƒ€ã‚¤ãƒ‹ãƒ³ã‚°ãƒ«ãƒ¼ãƒ ã§ä½•ã‚’æ³¨æ–‡ã—ãŸã‹æ€ã„å‡ºã›ãªã„ã‚ˆã†ã«ã€é›»å ±ã§ã‚‚æ³¨æ–‡ã‚’å—ã‘å–ã‚ŠãŸã„ã§ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã—ãŸãŒã£ã¦ã€ç›®æ¨™ã¯æ˜ç¢ºã§ã™ã€‚</font><font style="vertical-align: inherit;">ç§ã¯ã™ãã«è¨€ã£ã¦ãŠãå¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ç§ã®åŒåƒšã¨ç§ãŒå–ã£ãŸé“ã¯ã€æœ€ã‚‚æ­£ç¢ºã§åˆç†çš„ãªã‚‚ã®ã‹ã‚‰ã¯ã»ã©é ã„ã‚‚ã®ã§ã™ã€‚</font><font style="vertical-align: inherit;">ãã‚Œã§ã‚‚ã€ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã€ã‚µãƒãƒ¼ãƒˆã€ãƒ•ã‚©ãƒ¼ãƒ«ãƒˆãƒˆãƒ¬ãƒ©ãƒ³ã‚¹ã®ç‚¹ã§å®Œå…¨ãªã‚²ãƒ¼ãƒ ã§ã™ã€‚</font><font style="vertical-align: inherit;">ã—ã‹ã—ã€æˆé•·ã—ãŸã‚‚ã®ã¯æˆé•·ã—ã¾ã—ãŸã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚µãƒ¼ãƒãƒ¼ã«ã¯ã‚¢ã‚¯ã‚»ã‚¹ã§ããªã„ãŸã‚ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä½¿ç”¨ã—ã¦ã®ã¿ãƒšãƒ¼ã‚¸ã®å¤–è¦³ã‚’å¤‰æ›´ã§ãã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã—ã‹ã—ã€è©•ä¾¡ã¯ã©ã†ã§ã™ã‹ï¼Ÿ</font><font style="vertical-align: inherit;">ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚‚ã‚ã‚Šã¾ã›ã‚“ã€‚</font><font style="vertical-align: inherit;">æ³¨æ–‡å‡¦ç†ã€è©•ä¾¡ã€Telegramã¨ã®ã‚„ã‚Šå–ã‚Šã®ãŸã‚ã®ã‚µãƒ¼ãƒãƒ¼ãŒå¿…è¦ã§ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã®å½¹å‰²ã¯ã€NodeJSã‚µãƒ¼ãƒãƒ¼ã«ã‚ˆã£ã¦è¡Œã‚ã‚Œã¾ã—ãŸã€‚</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚µãƒ¼ãƒå´</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚µãƒ¼ãƒãƒ¼ã‚’æ‹…å½“ã—ã€åŒåƒšãŒãƒšãƒ¼ã‚¸ã«æ©Ÿèƒ½ã‚’è¿½åŠ ã™ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’æ‹…å½“ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">nodejsã‚µãƒ¼ãƒãƒ¼ã‚’å–å¾—ã—ã€ã‚¨ã‚¯ã‚¹ãƒ—ãƒ¬ã‚¹æ¥ç¶šã—ã€MySQLã‚’è¿½åŠ ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ä¸Šä½é…ç½®ã®</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sequelize</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">ãã—ã¦ã€</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">node-telegram-bot-apiã‚’</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä»‹ã—ã¦Telegramã¨å¯¾è©±ã—</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ã¾ã™</font></a><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">//   </span>
<span class="hljs-keyword">const</span> app = express();
<span class="hljs-comment">// ...</span>
<span class="hljs-comment">//  </span>
<span class="hljs-comment">//   </span>
app.get(<span class="hljs-string">"/dinners/user_menu"</span>, dinner.getUserMenu);
<span class="hljs-comment">//     </span>
app.get(<span class="hljs-string">"/dinners/r/:id"</span>, dinner.getPersonalRatings);
<span class="hljs-comment">//  </span>
app.post(<span class="hljs-string">"/dinners/r/:id"</span>, dinner.setRating);
<span class="hljs-comment">//      Telegram</span>
app.post(<span class="hljs-string">"/dinners/resend/:id"</span>, dinner.resendMessage);
<span class="hljs-comment">//     </span>
app.post(<span class="hljs-string">"/dinners/order"</span>, dinner.order);
<span class="hljs-comment">//  ,     </span>
app.post(<span class="hljs-string">"/dinners/days"</span>, dinner.setDinnerDays);
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ©Ÿèƒ½ã«ã¤ã„ã¦ç°¡å˜ã«èª¬æ˜ï¼š</font><i><font style="vertical-align: inherit;">/ãƒ‡ã‚£ãƒŠãƒ¼/ user_menuãƒ‘ã‚¹ã¯ã€</font></i><font style="vertical-align: inherit;">ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’è¿”ã—ã¾ã™ã€‚</font></font><br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="javascript hljs">res.sendFile(__dirname + <span class="hljs-string">'/public_html/user_script.js'</span>);
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã‚Œã¯ã€æ–°ã—ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã“ã¨ã«ã‚ˆã‚Šã€ãã‚Œã‚’ä½¿ç”¨ã™ã‚‹åŒåƒšã®æ³¨æ„ã‚’ãã‚‰ã•ãªã„ã‚ˆã†ã«ã™ã‚‹ãŸã‚ã§ã™ã€‚</font><font style="vertical-align: inherit;">ä¿®æ­£-ã‚µãƒ¼ãƒãƒ¼ã«æŠ•ã’ãŸ-å…¨å“¡æ›´æ–°ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã¯ã„ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã®è¦³ç‚¹ã‹ã‚‰ã¯ã“ã‚Œã¯æ‚ªã„ã“ã¨ã§ã™ãŒã€æ©Ÿèƒ½è‡ªä½“ã¯é‡è¦ã§ã¯ãªãã€ã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒæ ¼ç´ã•ã‚Œã¦ã„ã‚‹ã‚µãƒ¼ãƒãƒ¼ã¯éå¸¸ã«å®‰å…¨ã§ã‚ã‚‹ã¨è€ƒãˆã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã•ã‚‰ã«ã€ãƒ‘ã‚¹</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ãƒ‡ã‚£ãƒŠãƒ¼/ r /ï¼šid</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã«æ²¿ã£ã¦ã€</font><font style="vertical-align: inherit;">ã™ã¹ã¦ã®ãƒã‚¸ã‚·ãƒ§ãƒ³ã®è©•ä¾¡ã‚’å–å¾—ã—ã€è©•ä¾¡ã‚’ä¿å­˜ã§ãã¾ã™ã€‚ã¤ã¾ã‚Šã€æ–™ç†ã«æŠ•ç¥¨ã§ãã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ‘ã‚¹</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ãƒ‡ã‚£ãƒŠãƒ¼/å†é€ä¿¡/ï¼šid</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¯ã€Telegramã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ä¿¡ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ãƒ†ã‚­ã‚¹ãƒˆã¯ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã§ç”Ÿæˆã•ã‚Œã€ãƒ†ãƒ¬ã‚°ãƒ©ãƒ ã¨ã®å¯¾è©±ã®ã¿ãŒã‚µãƒ¼ãƒãƒ¼ã§è¡Œã‚ã‚Œã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> parseMode: TelegramBot.SendMessageOptions = {<span class="hljs-attr">parse_mode</span>: <span class="hljs-string">"HTML"</span>};
<span class="hljs-keyword">await</span> <span class="hljs-keyword">this</span>.bot.sendMessage(telegramId, htmlMessage, {...options, ...parseMode});
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãã®å¾Œã€ãƒœãƒƒãƒˆã¯æ³¨æ–‡ã‚’å«ã‚€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ä¿¡ã—ã¾ã™ã€‚</font></font><br>
<br>
<img src="https://habrastorage.org/webt/wx/rb/uv/wxrbuv4-_nexpcmsavuenefuvwa.png" alt="ç”»åƒ"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ¬¡ã«ã€ãƒ‘ã‚¹</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ãƒ‡ã‚£ãƒŠãƒ¼/æ³¨æ–‡</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã«æ²¿ã£ã¦</font><font style="vertical-align: inherit;">ã€</font><i><font style="vertical-align: inherit;">æ³¨æ–‡</font></i><font style="vertical-align: inherit;">ãŒä¿å­˜ã•ã‚Œã¾ã™ã€‚å…ƒã®æ³¨æ–‡ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ç‰¹å®šã™ã‚‹ã®ã¯é›£ã—ã„ãŸã‚ï¼ˆ[ä¿å­˜]ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã€æ³¨æ–‡ç¢ºèªãƒœã‚¿ãƒ³ã§ã‚¢ãƒ©ãƒ¼ãƒˆãŒè¡¨ç¤ºã•ã‚Œã¾ã™ï¼‰ã€æ³¨æ–‡ãƒšãƒ¼ã‚¸ãŒèª­ã¿è¾¼ã¾ã‚Œã‚‹ã¨ã€æ³¨æ–‡ã‚’å«ã‚€ã‚µãƒ¼ãƒãƒ¼ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒé€ä¿¡ã•ã‚Œã¾ã™ï¼ˆã‚µã‚¤ãƒˆã®æ³¨æ–‡ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ãŒ2ã¤ã®ãƒšãƒ¼ã‚¸ï¼ˆæ³¨æ–‡ãƒšãƒ¼ã‚¸ã¨ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒšãƒ¼ã‚¸ï¼‰ã«åˆ†å‰²ã•ã‚Œã¾ã™ï¼‰ -ç‰¹å®šã®æ—¥ã®æ–™ç†ã®é¸æŠ-ã¤ã¾ã‚Šã€æ³¨æ–‡ã®å½¢æˆï¼‰ã€‚æ³¨æ–‡ãƒšãƒ¼ã‚¸ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãŸã³ã«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡ã™ã‚‹ã®ã¯ã‹ãªã‚Šåˆç†çš„ã§ã¯ã‚ã‚Šã¾ã›ã‚“ãŒã€ç°¡å˜ãªæ–¹æ³•ã¯ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æœ€å¾Œã«ã€ãƒ‘ã‚¹</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ãƒ‡ã‚£ãƒŠãƒ¼/æ—¥</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ©ãƒ³ãƒã‚’æ³¨æ–‡ã™ã‚‹æ—¥ã‚’è¨­å®šã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">æ©Ÿèƒ½ã®ã“ã®éƒ¨åˆ†ã¯ã€æœªå®Œäº†ã®æ³¨æ–‡ã«é–¢ã™ã‚‹ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ã‚’æ­£ã—ãæ“ä½œã™ã‚‹ãŸã‚ã«è¡¨ç¤ºã•ã‚Œã¦ã„ã¾ã™-æ³¨æ–‡ã®ç¿Œæ—¥ãŒä½•ã§ã‚ã‚‹ã‹ã‚’çŸ¥ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼ˆçµå±€ã€é€±æœ«ã¯é€±æœ«ã§ã‚ã‚Šã€é€±ã®é€”ä¸­ãŒä¼‘æ—¥ã§ã™ï¼‰ã€‚</font><font style="vertical-align: inherit;">ç”Ÿç”£ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚’å®Ÿè£…ã™ã‚‹ä»£ã‚ã‚Šã«ã€æ³¨æ–‡ãƒšãƒ¼ã‚¸ã§æ—¥ä»˜ã‚’è§£æã—ã¾ã™ã€‚ã“ã“ã§ã¯ã€ç¨¼åƒæ—¥ã¨éç¨¼åƒæ—¥ãŒã™ã§ã«ãƒãƒ¼ã‚¯ã•ã‚Œã¦ã„ã¾ã™ï¼ˆéç¨¼åƒæ—¥ã®æ³¨æ–‡ã¯ã§ãã¾ã›ã‚“ï¼‰ã€‚</font><font style="vertical-align: inherit;">éç¨¼åƒæ—¥ã¯ã€isHolidayã‚¯ãƒ©ã‚¹ã‚’ä½¿ç”¨ã—ã¦ãƒãƒ¼ã‚¿ãƒ«ã§ãƒãƒ¼ã‚¯ã•ã‚Œã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">//    </span>
<span class="hljs-keyword">const</span> trToday = $(<span class="hljs-string">".dinner_today"</span>)[<span class="hljs-number">0</span>];
<span class="hljs-keyword">const</span> tbodyAllDays = $(trToday).parent();
<span class="hljs-keyword">const</span> dinnerDays = [];<font></font>
$(tbodyAllDays).children().each(<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">if</span> ($(<span class="hljs-keyword">this</span>).hasClass(<span class="hljs-string">"isHoliday"</span>)) {
        <span class="hljs-keyword">return</span>;<font></font>
    }<font></font>
    <span class="hljs-keyword">const</span> itemMenuDate = $(<span class="hljs-keyword">this</span>).find(<span class="hljs-string">"&gt; td:first-child"</span>).text().substring(<span class="hljs-number">0</span>, <span class="hljs-number">10</span>);<font></font>
    dinnerDays.push(itemMenuDate);<font></font>
    <span class="hljs-comment">// ...</span><font></font>
});<font></font>
<span class="hljs-keyword">await</span> sendRequest(<span class="hljs-string">"POST"</span>, <span class="hljs-string">`https://****/dinners/days/`</span>, {<span class="hljs-attr">days</span>: dinnerDays});
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚ã‚ãã†ã€ãƒ”ãƒƒã‚­ãƒ³ã‚°ã«jqueryã‚’ä½¿ç”¨ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãƒšãƒ¼ã‚¸ãƒ„ãƒªãƒ¼ã‚’æ˜ã‚Šä¸‹ã’ã‚‹ã®ã¯ã¨ã¦ã‚‚ä¾¿åˆ©ã§ã™ã€‚</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é›»å ±ãƒœãƒƒãƒˆ</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚¢ãƒ‰ã‚ªãƒ³å…¨ä½“ã®ã‚‚ã†1ã¤ã®éƒ¨åˆ†ã¯é›»å ±ãƒœãƒƒãƒˆã§ã™ã€‚</font></font><br>
<br>
<img src="https://habrastorage.org/webt/24/wf/ek/24wfekdwtsuscjixrrguvl55nam.png" alt="ç”»åƒ"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã“ã®ã‚ˆã†ãªæ©Ÿèƒ½ã‚’å‚™ãˆãŸ</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Get IDã¯ã€ãã®ã‚ˆã†ãªè­˜åˆ¥ã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚ç‰¹å®šã®ãƒ–ãƒ©ã‚¦ã‚¶ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’é›»å ±ã®userIdã«é–¢é€£ä»˜ã‘ã‚‹ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä»Šæ—¥ã®æ³¨æ–‡ã‚’è¡¨ç¤ºã—ã€æ³¨æ–‡ã®ãƒªã‚¹ãƒˆï¼ˆæœ€å¾Œã®5ï¼‰ã‚’è¡¨ç¤ºã—ã€ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ã‚’è¨­å®šã—ã¾ã™ã€‚</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ©ãƒ³ãƒã¯æ¯æ—¥åŒã˜æ™‚åˆ»ã«è‡ªå‹•çš„ã«ã‚µãƒ—ãƒ©ã‚¤ãƒ¤ãƒ¼ã«é€ä¿¡ã•ã‚Œã‚‹ãŸã‚ã€ç‰¹å®šã®æ™‚é–“ã€ãŸã¨ãˆã°13:00ã®å‰ã«æ³¨æ–‡ã™ã‚‹ã“ã¨ãŒé‡è¦ã§ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãã®å¾Œã€æ³¨æ–‡ã™ã‚‹æ©Ÿèƒ½ã¯ãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ï¼š</font></font><br>
<br>
<img src="https://habrastorage.org/webt/hr/v2/v5/hrv2v5mfkmx7v8ia6aff9ko9jvc.png" alt="ç”»åƒ"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒœãƒƒãƒˆã¯ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ã®æ™‚é–“ã‚’é¸æŠã™ã‚‹æ©Ÿèƒ½ã‚’æä¾›ã—ã¾ã™ï¼š9ã€10ã¾ãŸã¯11æ™‚é–“ã€‚</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã•ã‚‰ã«ã€ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ã®å¾Œã§æ³¨æ–‡ã‚’ã—ãªã‹ã£ãŸå ´åˆã€æ³¨æ–‡ã™ã‚‹ã¾ã§ã€ã¾ãŸã¯æ³¨æ–‡ãŒãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã‚‹ã¾ã§ã€æ¬¡ã®10åˆ†ã”ã¨ã«ãƒœãƒƒãƒˆãŒæ³¨æ–‡ã‚’é€šçŸ¥ã—ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã‚Œã¯cronã‚¿ã‚¹ã‚¯ã«ã‚ˆã£ã¦è¡Œã‚ã‚Œã¾ã™ï¼ˆ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">node-scheduleã‚’</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä½¿ç”¨</font><font style="vertical-align: inherit;">ï¼‰ã€‚</font></font><br>
<br>
<pre><code class="javascript hljs">schedule.scheduleJob(<span class="hljs-string">'*/10 9-13 * * 1-5'</span>, <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-comment">// ...</span><font></font>
});<font></font>
</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆéƒ¨åˆ†ã€‚</font><font style="vertical-align: inherit;">ãƒ¡ãƒ‹ãƒ¥ãƒ¼</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç¹°ã‚Šè¿”ã—ã«ãªã‚Šã¾ã™ãŒã€ã‚µãƒ—ãƒ©ã‚¤ãƒ¤ãŒé€ä¿¡ã™ã‚‹ãƒ¡ãƒ‹ãƒ¥ãƒ¼é …ç›®ã®ãƒ†ã‚­ã‚¹ãƒˆã¨çµ„ã¿åˆã‚ã›ãŸç¾åœ¨ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã¯ã²ã©ã„ã‚‚ã®ã§ã™ï¼ˆç”»é¢2ã‚’å‚ç…§ï¼‰ã€‚ãã—ã¦ã€ã‚ã‚‹æ™‚ç‚¹ã§ã€ä½•ãƒˆãƒ³ã‚‚ã®å˜èª¿ã§å …å›ºãªãƒ†ã‚­ã‚¹ãƒˆã‚„æœ‰ç”¨ãªãƒ†ã‚­ã‚¹ãƒˆãŒã»ã¨ã‚“ã©è¡¨ç¤ºã•ã‚Œãªããªã‚Šã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç§ãŸã¡ã‚’åŠ©ã‘ã‚‹ã“ã¨ãŒã§ãã‚‹ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã‚’æ¤œç´¢ã—ãŸå¾Œã€ã‚«ã‚¹ã‚¿ãƒ Greasemonkeyã‚¹ã‚¯ãƒªãƒ—ãƒˆç”¨ã®ã‹ãªã‚Šè‰¯ã„ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’è¦‹ã¤ã‘ã€å½¼ã‚‰ã¯ãã‚Œã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã¾ãšã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä½œæˆã—ã€è©•ä¾¡ã¨ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®é€ä¿¡æ©Ÿèƒ½ãŒçµ„ã¿è¾¼ã¾ã‚Œã¦ã„ã‚‹ä¼æ¥­ãƒãƒ¼ã‚¿ãƒ«ãŠã‚ˆã³ã‚µãƒ¼ãƒãƒ¼ã¨é€šä¿¡ã™ã‚‹æ¨©åˆ©ã‚’ä¸ãˆã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">// @include  http://****.int/*</span>
<span class="hljs-comment">// @include  http://****/*</span>
<span class="hljs-comment">// @grant GM.xmlHttpRequest</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã¾ãŸã€ãƒ©ãƒ³ãƒãƒšãƒ¼ã‚¸è‡ªä½“ã‚’å¤‰æ›´ã™ã‚‹ãŸã‚ã«ã€jQueryã‚’ä½¿ç”¨ã—ã€</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// @require</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚’ä½¿ç”¨ã—ã¦æ¥ç¶šã—</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã¾ã™ã€‚æ¬¡ã«</font><i><font style="vertical-align: inherit;">ã€</font></i><font style="vertical-align: inherit;">ãƒ©ãƒ³ãƒãƒšãƒ¼ã‚¸ã®</font><i><font style="vertical-align: inherit;">ã‚·ãƒ£ãƒ™ãƒ«ã®ä½œæˆ</font></i><font style="vertical-align: inherit;">ã‚’é–‹å§‹ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãƒšãƒ¼ã‚¸ã®htmlã‚³ãƒ¼ãƒ‰ã‚’è¦‹ã¦ã€ãƒ©ãƒ³ãƒãƒ†ãƒ¼ãƒ–ãƒ«ã®è­˜åˆ¥å­ã‚’è¦‹ã¤ã‘ã€ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’å–å¾—ã—ã¦å¤‰æ›´ã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> table = $(<span class="hljs-string">".dinner__innerData"</span>);
<span class="hljs-keyword">const</span> categoryList = [];
<span class="hljs-comment">//     </span>
$(table).find(â€œtbody tr td:nth-child(<span class="hljs-number">2</span>})â€).each(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">const</span> text = $(<span class="hljs-keyword">this</span>).text();
    <span class="hljs-comment">//          </span>
    <span class="hljs-keyword">if</span> (!categoryList.find(<span class="hljs-function"><span class="hljs-params">name</span> =&gt;</span> name === text)) {<font></font>
        $(<span class="hljs-keyword">this</span>).parent().before(<span class="hljs-string">"&lt;tr&gt;&lt;th colspan='6'&gt;"</span> + text + <span class="hljs-string">"&lt;/th&gt;&lt;th style='display:none'&gt;&lt;/th&gt;&lt;th style='display:none'&gt;&lt;/th&gt;&lt;th style='display:none'&gt;0&lt;/th&gt;&lt;th style='display:none'&gt;&lt;span class='dish__amount'&gt;0&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;"</span>);<font></font>
        categoryList.push(text);<font></font>
    }<font></font>
});<font></font>
<span class="hljs-comment">//     </span>
$(table).find(â€œthead th:nth-child(<span class="hljs-number">2</span>)â€).remove();<font></font>
$(table).find(<span class="hljs-string">"tbody tr td:nth-child(2)â€).remove();
//    
$(table).find(â€œtbody tr td:nth-child(2)â€).after("</span>&lt;td&gt;&lt;/td&gt;<span class="hljs-string">");
$(table).find(â€œthead th:nth-child(2)â€).after("</span>&lt;th <span class="hljs-class"><span class="hljs-keyword">class</span></span>=<span class="hljs-string">'ui-state-default'</span>&gt;&lt;/th&gt;<span class="hljs-string">");
</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ©ãƒ³ãƒãƒ•ã‚©ãƒ¼ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãƒšãƒ¼ã‚¸ã§ã¯ã€æ³¨æ–‡é‡‘é¡ã‚’è¨ˆç®—ã™ã‚‹ã¨ãã«ã€ãƒ†ãƒ¼ãƒ–ãƒ«ã®ã™ã¹ã¦ã®è¡Œã§è€ƒæ…®ã•ã‚Œã€æ³¨æ–‡ã•ã‚ŒãŸã‚¢ã‚¤ãƒ†ãƒ ã®æ•°ã«ä¾¡æ ¼ã‚’æ›ã‘ãŸã‚‚ã®ã«ãªã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã‚Œã‚‰ã®ç†ç”±ã«ã‚ˆã‚Šã€ã‚«ãƒ†ã‚´ãƒªã®åå‰ã§è¡Œã‚’è¿½åŠ ã™ã‚‹ã¨ã€ã™ã¹ã¦ãŒå£Šã‚Œã¾ã™...ã“ã®è¡Œã®æ•°é‡ã¨é‡‘é¡ãŒã‚¼ãƒ­ã®éè¡¨ç¤ºã®åˆ—ã‚’å…¥åŠ›ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã—ãŸã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ¬¡ã«ã€ãƒ†ã‚­ã‚¹ãƒˆã®ã‚¯ãƒªãƒ¼ãƒ‹ãƒ³ã‚°ã¨æ–™ç†ã®è©•ä¾¡ã«é–¢ã™ã‚‹æƒ…å ±ã®è¿½åŠ ã«ç§»ã‚Šã¾ã—ã‚‡ã†ã€‚</font><font style="vertical-align: inherit;">ã¾ãšã€ã„ãã¤ã‹ã®ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ã€‚</font><font style="vertical-align: inherit;">æ ¼ä»˜ã‘ã®æ–™ç†ã¯ã€ã‚°ãƒ©ãƒ ã®å½¢ã®ã‚´ãƒŸã€å¥èª­ç‚¹ã€ã‚¹ãƒšãƒ¼ã‚¹ã®ãªã„åå‰ã§è­˜åˆ¥ã•ã‚Œã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã¤ã¾ã‚Šã€ã€Œãƒã‚­ãƒ³ãƒ–ãƒ­ã‚¹ã‚¦ã‚£ã‚ºã‚¨ãƒƒã‚°ï¼ˆãƒã‚­ãƒ³ãƒ–ãƒ­ã‚¹ã€ãƒ‹ãƒ³ã‚¸ãƒ³ã€ã‚¿ãƒãƒã‚®ã€åµã€ã‚°ãƒªãƒ¼ãƒ³ï¼‰ã€ã¨å‘¼ã°ã‚Œã‚‹æ–™ç†ã§ã™ã€‚</font><font style="vertical-align: inherit;">100gã§ï¼šã‚¿ãƒ³ãƒ‘ã‚¯è³ª-3.43; </font><font style="vertical-align: inherit;">fats-2.86; </font><font style="vertical-align: inherit;">ç‚­æ°´åŒ–ç‰©-1.0; </font><font style="vertical-align: inherit;">en.value-43.39kcalï¼ˆ200grï¼‰ã¯ã€ã€Œãƒ–ã‚¤ãƒ¨ãƒ³ã‚«ãƒ¼ãƒ‰ã€ã¨ã—ã¦è­˜åˆ¥ã•ã‚Œã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã‚Œã¯ã€ã‚µãƒ—ãƒ©ã‚¤ãƒ¤ãƒ¼ãŒä½™åˆ†ãªã‚¹ãƒšãƒ¼ã‚¹ã€çœ‹æ¿ãªã©ã«å¿ã³è¾¼ã‚€å¯èƒ½æ€§ãŒã‚ã‚‹ãŸã‚ã§ã™ã€‚</font><font style="vertical-align: inherit;">æ…£ä¾‹ãŒç¤ºã™ã‚ˆã†ã«ã€ã“ã‚Œã¯90ï¼…ã®ã‚±ãƒ¼ã‚¹ã§æ–™ç†ã‚’æ­£ç¢ºã«ç‰¹å®šã™ã‚‹ã®ã«ååˆ†ã§ã‚ã‚Šã€ç§ãŸã¡ã¯ã‚ã–ã‚ã–å…¨æ–‡æ¤œç´¢ã‚’è¡Œã‚ãªã„ã“ã¨ã«ã—ã¾ã—ãŸã€‚</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">/**
 *        
 * <span class="hljs-doctag">@param </span>items   
 * <span class="hljs-doctag">@param </span>tdText   
 * <span class="hljs-doctag">@return </span> 
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">findByName</span>(<span class="hljs-params">items, tdText</span>) </span>{<font></font>
    tdText = clearTrash(tdText, <span class="hljs-literal">true</span>, <span class="hljs-literal">true</span>, <span class="hljs-literal">true</span>);
    <span class="hljs-keyword">return</span> items.find(<span class="hljs-function">(<span class="hljs-params">{clear_name}</span>) =&gt;</span> {
        <span class="hljs-keyword">return</span> clear_name.trim().toLowerCase() === tdText;<font></font>
    });<font></font>
}<font></font>
<font></font>
<span class="hljs-comment">/**
 *    
 * <span class="hljs-doctag">@param </span>text       
 * <span class="hljs-doctag">@param </span>clearDescr      
 * <span class="hljs-doctag">@param </span>clearGrams   
 * <span class="hljs-doctag">@return </span>  
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">clearTrash</span>(<span class="hljs-params">text, clearDescr, clearGrams, clearSymbols</span>) </span>{
    <span class="hljs-comment">//   ,      </span><font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãã—ã¦ã“ã‚Œã¯è©•ä¾¡ã®å½¢æˆã§ã™ï¼š</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> table = $(<span class="hljs-string">".dinner__innerData"</span>);
<span class="hljs-keyword">const</span> nameTd = $(table).find(â€œtr td:nth-child(<span class="hljs-number">2</span>)â€);
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> index = <span class="hljs-number">0</span>; index &lt;= nameTd.length; index++) {
    <span class="hljs-keyword">const</span> tdText = $(nameTd[index]).text();
    <span class="hljs-comment">//    </span>
    <span class="hljs-keyword">const</span> item = findByName(items, tdText);<font></font>
<font></font>
    <span class="hljs-keyword">if</span> (item) {
        <span class="hljs-keyword">let</span> ratingTd = $(nameTd[index]).parent().find(â€œtd:nth-child(<span class="hljs-number">2</span>)â€)[<span class="hljs-number">0</span>];
        <span class="hljs-comment">//          </span>
        <span class="hljs-keyword">let</span> ratingText = <span class="hljs-string">"&lt;i&gt;&lt;/i&gt; "</span> + <span class="hljs-built_in">parseFloat</span>(item.avgrating).toFixed(<span class="hljs-number">1</span>) + <span class="hljs-string">" (: "</span> + item.orders + <span class="hljs-string">", : "</span> + item.ratingsCount + <span class="hljs-string">")"</span>;<font></font>
        ratingText = item.persrating ? <span class="hljs-string">`&lt;b&gt;&lt;i&gt;&lt;/i&gt; <span class="hljs-subst">${<span class="hljs-built_in">parseFloat</span>(item.persrating).toFixed(<span class="hljs-number">1</span>)}</span> (: <span class="hljs-subst">${item.perscount}</span>)&lt;/b&gt;&lt;br&gt;`</span> + ratingText : ratingText;
       <span class="hljs-comment">//  </span><font></font>
       $(ratingTd).css({<font></font>
	<span class="hljs-comment">// getColorRating      </span>
            <span class="hljs-attr">background</span>: getColorRating(item.avgrating)<font></font>
      }).html(ratingText);<font></font>
    }<font></font>
    <span class="hljs-comment">//          </span>
    <span class="hljs-comment">//   ,     </span>
    <span class="hljs-keyword">const</span> grams = getGrams(tdText);
    <span class="hljs-comment">//    </span>
    $(nameTd[index]).html(clearTrash(tdText, <span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>));
    <span class="hljs-comment">//      ,      </span>
    $(nameTd[index]).append(<span class="hljs-string">"&lt;br/&gt;&lt;span&gt;&lt;/span&gt;"</span>)<font></font>
                                .find(<span class="hljs-string">"span"</span>)<font></font>
                                .append(grams)<font></font>
                                .css({<span class="hljs-string">"font-size"</span>: <span class="hljs-number">10</span>});<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãã—ã¦ã€ãã‚ŒãŒèµ·ã“ã£ãŸã®ã§ã™ã€‚</font></font><br>
<br>
<img src="https://habrastorage.org/webt/2p/hh/i5/2phhi5w3iumlfgvezwl7uqvb-2k.png" alt="ç”»åƒ"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åŒæ„ã—ã¾ã™ãŒã€ã¯ã‚‹ã‹ã«ä¾¿åˆ©ã§ä¾¿åˆ©ã§ã™ã‹ï¼Ÿ</font></font></i><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆéƒ¨åˆ†ã€‚</font><font style="vertical-align: inherit;">æŠ•ç¥¨</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ¬¡ã«ã€æ³¨æ–‡ã—ãŸæ–™ç†ã«æŠ•ç¥¨ã™ã‚‹æ©Ÿèƒ½ã‚’è¿½åŠ ã—ã€æ³¨æ–‡ã‚’é›»æ–‡ã§é€ä¿¡ã™ã‚‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ä¿¡ã—ã¾ã™ã€‚</font></font><br>
<br>
<img src="https://habrastorage.org/webt/mj/xe/vm/mjxevmjk1xjpktpmhzsvfqv7-zu.png" alt="ç”»åƒ"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¹ã‚¯ãƒªãƒ—ãƒˆãªã—ã®æ³¨æ–‡ã®</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ã‚ã‚‹ãƒšãƒ¼ã‚¸æ³¨æ–‡ã—ãŸæ–™ç†ã®ãƒšãƒ¼ã‚¸ã§ã€è©•ä¾¡ã‚’è¿½åŠ ã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addRatingForm</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">const</span> table = $(<span class="hljs-string">".dinner__innerData"</span>);
    <span class="hljs-keyword">const</span> nameTd = $(table).find(<span class="hljs-string">"tr td:nth-child(1)"</span>);
    <span class="hljs-comment">//  </span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> index = <span class="hljs-number">0</span>; index &lt;= nameTd.length; index++) {
        <span class="hljs-keyword">const</span> tdText = $(nameTd[index]).text();<font></font>
        $(nameTd[index]).html(clearTrash(tdText, <span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>));<font></font>
    }<font></font>
    <span class="hljs-comment">//       Telegram</span>
    $(table).append(<span class="hljs-string">"&lt;tfoot&gt;&lt;tr&gt;&lt;th colspan='6' class='rating-buttons btn-group margT0' style='display: table-cell;'&gt;&lt;/tr&gt;&lt;/tfoot&gt;"</span>);<font></font>
    $(<span class="hljs-string">".rating-buttons"</span>).prepend(<span class="hljs-string">`&lt;input type="submit" value="" class="btn_primary rating-button"&gt;`</span>);<font></font>
    $(<span class="hljs-string">".rating-buttons"</span>).prepend(<span class="hljs-string">`&lt;input type="submit" value=" Telegram" class="btn_primary send-button"&gt;`</span>);
    <span class="hljs-comment">//     </span>
    <span class="hljs-keyword">await</span> diableButtonByDate();
    <span class="hljs-comment">//     </span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> index = <span class="hljs-number">0</span>; index &lt;= table.length; index++) {<font></font>
        $(table[index]).find(<span class="hljs-string">"tbody tr td:nth-child(4)"</span>).after(<span class="hljs-string">"&lt;td class='ratingInputTd'&gt;&lt;input id='horizontal-spinner' class='ui-spinner-input' style='width:20px;'&gt;&lt;/td&gt;"</span>);<font></font>
        $(table[index]).find(<span class="hljs-string">"thead th:nth-child(4)"</span>).after(<span class="hljs-string">"&lt;th class='ui-state-default'&gt;&lt;/th&gt;"</span>);<font></font>
    }<font></font>
    $(<span class="hljs-string">".ui-spinner-input"</span>).spinner({
         <span class="hljs-attr">max</span>: <span class="hljs-number">10</span>,
         <span class="hljs-attr">min</span>: <span class="hljs-number">1</span><font></font>
    });<font></font>
    <span class="hljs-comment">//  </span>
    $(<span class="hljs-string">".rating-button"</span>).click(sendRating);<font></font>
    $(<span class="hljs-string">".send-button"</span>).click(sendTelegram);<font></font>
}<font></font>
<font></font>
<span class="hljs-comment">/**
 *      ,   
 */</span>
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">diableButtonByDate</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-comment">//             .</span>
    <span class="hljs-comment">//             </span>
    <span class="hljs-keyword">const</span> buttons  = $(<span class="hljs-string">".rating-button"</span>);
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> index = <span class="hljs-number">0</span>; index &lt;= buttons.length; index++) {
        <span class="hljs-keyword">const</span> button = $(buttons[index]);
        <span class="hljs-keyword">const</span> date = button.parent().parent().parent().parent().parent().parent().find(<span class="hljs-string">"&gt; td:nth-child(1)"</span>).text().substring(<span class="hljs-number">0</span>, <span class="hljs-number">10</span>);
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">await</span> GM.getValue(date)) {<font></font>
            button.attr({<span class="hljs-attr">disabled</span>: <span class="hljs-string">"disabled"</span>});<font></font>
        }<font></font>
    }<font></font>
}<font></font>
<font></font>
<span class="hljs-comment">/**
 * 
 */</span>
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sendRating</span>(<span class="hljs-params">event</span>) </span>{<font></font>
    event.preventDefault();<font></font>
    <span class="hljs-keyword">const</span> items = [];
    <span class="hljs-comment">//        </span>
    $(<span class="hljs-keyword">this</span>).parent().parent().parent().parent().find(<span class="hljs-string">"tr"</span>).each(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">const</span> tdList = $(<span class="hljs-keyword">this</span>).find(<span class="hljs-string">"td"</span>);
        <span class="hljs-keyword">const</span> ratingInput = $(tdList[<span class="hljs-number">4</span>]).find(<span class="hljs-string">"input"</span>);
        <span class="hljs-keyword">if</span> (!ratingInput.length) {
            <span class="hljs-keyword">return</span>;<font></font>
        }<font></font>
        items.push({<font></font>
             <span class="hljs-attr">count</span>: $(tdList[<span class="hljs-number">2</span>]).text(),
             <span class="hljs-attr">price</span>: $(tdList[<span class="hljs-number">1</span>]).text(),
             <span class="hljs-attr">name</span>: $(tdList[<span class="hljs-number">0</span>]).text(),
             <span class="hljs-attr">rating</span>: ratingInput.val(),<font></font>
        });<font></font>
     });<font></font>
    <span class="hljs-keyword">await</span> sendRequest(<span class="hljs-string">"POST"</span>, <span class="hljs-string">`https://****/dinners/r/<span class="hljs-subst">${telegramId}</span>`</span>, items);
    <span class="hljs-keyword">const</span> menuDate = $(<span class="hljs-keyword">this</span>).parent().parent().parent().parent().parent().parent().find(<span class="hljs-string">"&gt; td:nth-child(1)"</span>).text().substring(<span class="hljs-number">0</span>, <span class="hljs-number">10</span>);
    <span class="hljs-keyword">await</span> GM.setValue(menuDate, <span class="hljs-literal">true</span>);<font></font>
    location.reload();<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãã—ã¦ã€ã“ã‚ŒãŒå‡ºåŠ›ã§å¾—ã‚‰ã‚ŒãŸã‚‚ã®ã§ã™ï¼š</font></font><br>
<br>
<img src="https://habrastorage.org/webt/1k/uq/ef/1kuqefnumbp3k_qu3ugottb5sd0.png" alt="ç”»åƒ"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã¯ã„-ã‚³ãƒ¼ãƒ‰ã¯ã²ã©ã„ã§ã™ã€‚</font><font style="vertical-align: inherit;">ã¯ã„-æœ€é©åŒ–ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚</font><font style="vertical-align: inherit;">ãã—ã¦ã€ã¯ã„-ä¸€éƒ¨ã®å ´æ‰€ã§ã¯éè«–ç†çš„ã§ã™ã€‚</font><font style="vertical-align: inherit;">ã—ã‹ã—ã€è²»ã‚„ã™æ™‚é–“ã¯æœ€å°é™ã§ã‚ã‚Šã€æ©Ÿèƒ½æ€§ã¨åˆ©ä¾¿æ€§ã¯å¤§å¹…ã«å‘ä¸Šã—ã¾ã—ãŸã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç›®çš„ã¯ã€ç§ã¨ç§ã®åŒå¿—ã®ãŸã‚ã«å¤•é£Ÿã‚’æ³¨æ–‡ã™ã‚‹ã“ã¨ã‚’ã‚ˆã‚Šæ¥½ã—ã„ã‚‚ã®ã«ã™ã‚‹ã“ã¨ã§ã—ãŸã€ãã—ã¦ç§ã®è€ƒãˆã§ã¯ã€ã“ã®ç›®æ¨™ã¯é”æˆã•ã‚Œã¾ã—ãŸã€‚</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja475880/index.html">ãƒã‚¤ã‚¯ãƒ­ã‚½ãƒ•ãƒˆã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒˆå‘ã‘ã®7ã¤ã®ç„¡æ–™ã‚³ãƒ¼ã‚¹</a></li>
<li><a href="../ja475882/index.html">JavaFXãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ï¼šåŸºæœ¬çš„ãªãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ</a></li>
<li><a href="../ja475884/index.html">ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚®ã‚¶ã‚®ã‚¶ç·šã®å•é¡Œã‚’è§£æ±ºã™ã‚‹</a></li>
<li><a href="../ja475886/index.html">Amazon AIã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã‚ã„ã›ã¤ãªã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¸ã®å–ã‚Šçµ„ã¿ã‚’å®¹æ˜“ã«ã—ã¾ã™</a></li>
<li><a href="../ja475888/index.html">ã‚¯ãƒ©ã‚¦ãƒ‰ã®é¡”èªè­˜ã®åˆ©ç‚¹</a></li>
<li><a href="../ja475894/index.html">3ãƒ‘ã‚¹ãƒ—ãƒ­ãƒˆã‚³ãƒ«</a></li>
<li><a href="../ja475896/index.html">ãƒ•ãƒ«æ©Ÿèƒ½ã®ãƒ™ã‚¢ãƒ¡ã‚¿ãƒ«I / Oãƒªã‚¢ã‚¯ã‚¿ãƒ¼</a></li>
<li><a href="../ja475900/index.html">æœ€æ–°ã®6ã¤ã®Azureã‚³ãƒ¼ã‚¹</a></li>
<li><a href="../ja475902/index.html">ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚³ã‚¢-.Net Coreã®ãƒ“ã‚¸ãƒã‚¹ãƒ—ãƒ­ã‚»ã‚¹ã‚¨ãƒ³ã‚¸ãƒ³</a></li>
<li><a href="../ja475904/index.html">æ–°ã—ã„ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã®ãŸã‚ã®5ã¤ã®ãƒ¡ãƒ¢</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>