<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üê† üë©üèø‚Äçü§ù‚Äçüë©üèæ üö∂üèø Arquitectura para principiantes o por qu√© no necesita insertar una bandera en el hombre espada üßúüèº üññ üßóüèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Anotaci√≥n:
 
 

1. Un ejemplo de la implementaci√≥n de una nueva funcionalidad en la clase agregando una "bandera".
2. Efectos.
3. Enfoque alternativo ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Arquitectura para principiantes o por qu√© no necesita insertar una bandera en el hombre espada</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/493480/"><img src="https://habrastorage.org/webt/9s/96/tv/9s96tvz6feehvgoiz_gmwdoktl8.png"><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anotaci√≥n:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un ejemplo de la implementaci√≥n de una nueva funcionalidad en la clase agregando una "bandera".</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Efectos.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Enfoque alternativo y comparaci√≥n de resultados.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬øC√≥mo evitar la situaci√≥n: "exceso arquitect√≥nico"?</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El momento en que llega el momento de cambiarlo todo.</font></font></li>
</ol></blockquote><br>
<a name="habracut"></a><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Antes de comenzar, un par de notas:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Esta es una historia sobre arquitectura de software, en el sentido que usa el t√≠o Bob. </font><font style="vertical-align: inherit;">Si, ese.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Todos los personajes, sus nombres y c√≥digos en el art√≠culo son ficticios, cualquier coincidencia con la realidad es aleatoria.</font></font></li>
</ul></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Supongamos que soy un programador-programador ordinario en un proyecto. </font><font style="vertical-align: inherit;">El proyecto es un juego en el que un solo H√©roe (tambi√©n conocido como H√©roe) va a lo largo de una l√≠nea perfectamente horizontal de izquierda a derecha. </font><font style="vertical-align: inherit;">Los monstruos interfieren con este maravilloso viaje. </font><font style="vertical-align: inherit;">A la orden del usuario, el h√©roe los corta </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">con una espada</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en la col y no sopla el bigote. </font><font style="vertical-align: inherit;">El proyecto ya tiene 100K l√≠neas, y "¬°necesitas m√°s </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">l√≠neas de</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> caracter√≠sticas!" </font><font style="vertical-align: inherit;">Miremos a nuestro h√©roe:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Hero</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">strike</span><span class="hljs-params">()</span></span> {
        <span class="hljs-comment">//   1</span><font></font>
    }<font></font>
    <span class="hljs-comment">//   </span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Supongamos tambi√©n que el l√≠der de mi equipo personal, Vasily, tambi√©n puede irse de vacaciones. </font><font style="vertical-align: inherit;">Repentinamente. </font><font style="vertical-align: inherit;">¬øQuien lo hubiera pensado? </font><font style="vertical-align: inherit;">Adem√°s, la situaci√≥n se desarrolla de manera est√°ndar: un B√∫ho vuela y necesita urgentemente, justo ayer, para poder elegir antes del comienzo del juego: jugar para el H√©roe con un palo o una espada. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Debe ser muy r√°pido. </font><font style="vertical-align: inherit;">Y s√≠, por supuesto, √©l mismo fue un programador durante m√°s de a√±os de lo que puedo caminar, por lo que sabe que la tarea es de cinco minutos. </font><font style="vertical-align: inherit;">Pero que as√≠ sea, estimar por 2 horas. </font><font style="vertical-align: inherit;">Solo necesita agregar una casilla de verificaci√≥n y if-chik. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nota: if-chik en el valor @! ^% $ # @ ^% &amp; @! 11 $ its # $% @ ^% &amp;! @ !!! </font><font style="vertical-align: inherit;">en &amp;! ^% # $ ^%! 1 if-chic! </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mis pensamientos: ‚Äú¬°Ja! </font><font style="vertical-align: inherit;">¬°Dos horas! </font><font style="vertical-align: inherit;">¬°Hecho! ":</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Hero</span> </span>{
    <span class="hljs-class"><span class="hljs-keyword">enum</span> <span class="hljs-title">WeaponTypes</span> </span>{
        <span class="hljs-keyword">case</span> sword:
        <span class="hljs-keyword">case</span> club:<font></font>
    }<font></font>
	<font></font>
    <span class="hljs-keyword">var</span> weaponType: <span class="hljs-type">WeaponTypes?</span><font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">strike</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> weaponType = weaponType <span class="hljs-keyword">else</span> {
            <span class="hljs-built_in">assertionFailure</span>()
            <span class="hljs-keyword">return</span>	<font></font>
        }<font></font>
        <span class="hljs-comment">//  : switch  Swift  if- -    !</span>
        <span class="hljs-keyword">switch</span> (weaponType) {
            <span class="hljs-keyword">case</span> .sword: <span class="hljs-comment">//     </span>
            <span class="hljs-keyword">case</span> .club:  <span class="hljs-comment">//     </span><font></font>
        }<font></font>
    }<font></font>
    <span class="hljs-comment">//  </span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si te enteraste de mi decisi√≥n, entonces, por desgracia: tengo dos noticias para ti:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como si fuera bueno: los dos cumplimos. </font><font style="vertical-align: inherit;">Entregamos: desde la palabra entregar valor o desde la palabra c√≥digo divertido (a trav√©s de las l√°grimas).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Y el malo: sin Vasily, el proyecto de kapets.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øEntonces qu√© pas√≥? </font><font style="vertical-align: inherit;">Parece que hasta ahora nada. </font><font style="vertical-align: inherit;">Pero veamos qu√© sucede despu√©s (mientras hacemos todo lo posible para mantener a Vasily de vacaciones). </font><font style="vertical-align: inherit;">Y luego habr√° esto: el departamento de control de calidad prestar√° atenci√≥n al peso de nuestro h√©roe. </font><font style="vertical-align: inherit;">Y no, esto no se debe a que el H√©roe tenga que ponerse a dieta, sino por qu√©:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">var</span> weight: <span class="hljs-type">Stone</span> {
    <span class="hljs-keyword">return</span> meatbagWeight + pantsWeight + helmetWeight + swordWeight<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Olvid√© arreglar el c√°lculo del peso. </font><font style="vertical-align: inherit;">Bueno, piensas, error, ¬øcon qui√©n no sucede? </font><font style="vertical-align: inherit;">Slap-bloop, fuck-tibidoch, listo:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">var</span> weight: <span class="hljs-type">Stone</span> {
    <span class="hljs-comment">//   guard let weaponType</span>
    <span class="hljs-keyword">let</span> weightWithoutWeapon = meatbagWeight + pantsWeight + helmetWeight
    <span class="hljs-keyword">switch</span> (weaponType) {
        <span class="hljs-keyword">case</span> .sword: <span class="hljs-keyword">return</span> weightWithoutWeapon + swordWeight
        <span class="hljs-keyword">case</span> .club:  <span class="hljs-keyword">return</span> weightWithoutWeapon + clubWeight<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero r√°pidamente lo arregl√≥! </font><font style="vertical-align: inherit;">El h√©roe ahora est√° saltando, teniendo en cuenta el peso, pero. </font><font style="vertical-align: inherit;">Trabajo orientado a resultados! </font><font style="vertical-align: inherit;">Esto no es para que usted mire los ombligos, los astronautas arquitect√≥nicos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bueno, de verdad, luego corrigi√≥ un poco m√°s. </font><font style="vertical-align: inherit;">En la lista de hechizos, tuve que hacer esto:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">var</span> spells: [<span class="hljs-type">Spells</span>] {
    <span class="hljs-comment">//   guard let weaponType </span>
    <span class="hljs-comment">// ,   let spellsWithoutWeapon: [Spells]</span>
    <span class="hljs-keyword">switch</span> (weaponType) {
        <span class="hljs-keyword">case</span> .sword:
            <span class="hljs-comment">//  let swordSpells: [Spells]</span>
            <span class="hljs-keyword">return</span> spellsWithoutWeapon + swordSpells
	<span class="hljs-keyword">case</span> .club:
            <span class="hljs-comment">//  let clubSpells: [Spells]</span>
            <span class="hljs-keyword">return</span> spellsWithoutWeapon + clubSpells<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y luego vino Petia y rompi√≥ todo. </font><font style="vertical-align: inherit;">Bueno, la verdad es que tenemos un junio en el proyecto. </font><font style="vertical-align: inherit;">Inatento. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Solo necesitaba agregar el concepto de "Nivel de Arma" a las f√≥rmulas para calcular la fuerza del golpe y el peso del H√©roe. </font><font style="vertical-align: inherit;">Y Petya se perdi√≥ uno de los cuatro casos. </font><font style="vertical-align: inherit;">¬°Pero nada! </font><font style="vertical-align: inherit;">Lo correg√≠ todo:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">strike</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">//guard let weaponType</span>
    <span class="hljs-keyword">switch</span> (weaponType) {
        <span class="hljs-keyword">case</span> .sword: <span class="hljs-comment">//        weaponGrade</span>
        <span class="hljs-keyword">case</span> .club:  <span class="hljs-comment">//        weaponGrade</span><font></font>
    }<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">var</span> weight: <span class="hljs-type">Stone</span> {
    <span class="hljs-comment">// guard let weaponType</span>
    <span class="hljs-keyword">let</span> weightWithoutWeapon = meatbagWeight + pantsWeight + helmetWeight
    <span class="hljs-keyword">switch</span> (weaponType) {
        <span class="hljs-keyword">case</span> .sword: <span class="hljs-keyword">return</span> weightWithoutWeapon + swordWeight / grade
	<span class="hljs-keyword">case</span> .club:  <span class="hljs-keyword">return</span> weightWithoutWeapon + pow(clubWeight, <span class="hljs-number">1</span> / grade)<font></font>
    }<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">var</span> spells: [<span class="hljs-type">Spells</span>] {
    <span class="hljs-comment">//     , ! </span>
    <span class="hljs-comment">// ,     .    ,    ,   .   !</span>
}</code></pre><br>
<img src="https://habrastorage.org/webt/aw/ev/fo/awevfo6jjlysv_8l9wq-dl9npkw.png" height="80" width="80" align="right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No hace falta decir que cuando (¬°de repente!) Fue necesario agregar f√≥rmulas de actualizaci√≥n / arco, nuevamente hubo casos olvidados, errores y eso fue todo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øQu√© sali√≥ mal? </font><font style="vertical-align: inherit;">¬øD√≥nde me equivoqu√© y qu√© (excepto los compa√±eros) dijo Vasily cuando regres√≥ de vacaciones? </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aqu√≠ no puedes seguir leyendo la historia, pero, por ejemplo, piensa en lo eterno, en la arquitectura. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y con aquellos que a√∫n decidieron leer, continuamos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces, echemos un vistazo a los cl√°sicos:</font></font><blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬°La optimizaci√≥n temprana es la ra√≠z de todo mal!</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Y ... eh ... eso no es todo. </font><font style="vertical-align: inherit;">Aqu√≠ est√° la cosa: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
en los lenguajes OOP (como Swift, por ejemplo), hay tres formas principales de extender las capacidades de una clase:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La primera forma es "ingenua". </font><font style="vertical-align: inherit;">Acabamos de verlo. </font><font style="vertical-align: inherit;">Agregar una casilla de verificaci√≥n. </font><font style="vertical-align: inherit;">Agregar responsabilidad. </font><font style="vertical-align: inherit;">Clase de hinchaz√≥n</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La segunda forma es la herencia. </font><font style="vertical-align: inherit;">Todos conocen un mecanismo poderoso para reutilizar el c√≥digo. </font><font style="vertical-align: inherit;">Uno podr√≠a, por ejemplo:</font></font><br>
 <ul>
<li><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Heredar el nuevo H√©roe con el Arco y el H√©roe de Dubina del H√©roe (que sostiene una espada, pero esto no se refleja en el nombre de la clase H√©roe ahora). </font><font style="vertical-align: inherit;">Y luego, en los herederos, anule los m√©todos modificados. </font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Este camino es muy malo (solo conf√≠a en m√≠).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Convierta a la clase base (o protocolo) en un H√©roe, y elimine todas las caracter√≠sticas asociadas con un tipo espec√≠fico de arma como herederos </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
: H√©roe con </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
espada: H√©roe, </font><font style="vertical-align: inherit;">H√©roe con </font><font style="vertical-align: inherit;">arco: H√©roe, H√©roe con </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dubina: H√©roe. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esto es mejor, pero los nombres de estas clases nos miran de alguna manera disgustados, feroces y al mismo tiempo tristes y perplejos. </font><font style="vertical-align: inherit;">Si no miran a alguien as√≠, entonces intentar√© escribir otro art√≠culo, donde adem√°s del aburrido h√©roe masculino ser√°n ...</font></font><img src="https://habrastorage.org/webt/7i/7w/l7/7i7wl7kxg1ol1mmtplsfv-h7i4w.png" height="80" width="80"></li>
</ul></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La tercera forma es la separaci√≥n de responsabilidades a trav√©s de la inyecci√≥n de dependencia. </font><font style="vertical-align: inherit;">Puede ser una dependencia cerrada por un protocolo o un cierre (como si estuviera cerrado por una firma), lo que sea. </font><font style="vertical-align: inherit;">Lo principal es que la implementaci√≥n de nuevas responsabilidades debe abandonar la clase principal.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øC√≥mo puede verse esto en nuestro caso? </font><font style="vertical-align: inherit;">Por ejemplo, as√≠ (decisi√≥n de Vasily):</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Hero</span> </span>{
    <span class="hljs-keyword">let</span> weapon: <span class="hljs-type">Weapon</span> <span class="hljs-comment">//   , ..    </span><font></font>
<font></font>
    <span class="hljs-keyword">init</span> (<span class="hljs-number">_</span> weapon: <span class="hljs-type">Weapon</span>) { <span class="hljs-comment">//     </span>
        <span class="hljs-keyword">self</span>.weapon = weapon<font></font>
    }<font></font>
	<font></font>
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">strike</span><span class="hljs-params">()</span></span> {<font></font>
        weapon.strike()<font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">var</span> weight: <span class="hljs-type">Stone</span> {
        <span class="hljs-keyword">return</span> meatbagWeight + pantsWeight + helmetWeight + weapon.weight<font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">var</span> spells: [<span class="hljs-type">Spells</span>] {
        <span class="hljs-comment">//   </span>
        <span class="hljs-keyword">return</span> spellsWithoutWeapon + weapon.spells<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øQu√© necesitas para ser as√≠? </font><font style="vertical-align: inherit;">Ninjutsu - protocolo:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">protocol</span> <span class="hljs-title">Weapon</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">strike</span><span class="hljs-params">()</span></span>
    <span class="hljs-keyword">var</span> weight: <span class="hljs-type">Stone</span> {<span class="hljs-keyword">get</span>}
    <span class="hljs-keyword">var</span> spells: [<span class="hljs-type">Spells</span>] {<span class="hljs-keyword">get</span>}<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ejemplo de implementaci√≥n de protocolo:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Sword</span>: <span class="hljs-title">Weapon</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">strike</span><span class="hljs-params">()</span></span> {
        <span class="hljs-comment">// ,     Hero  switch   .sword</span><font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">var</span> weight: <span class="hljs-type">Stone</span> {
        <span class="hljs-comment">// ,     Hero  switch   .sword</span><font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">var</span> spells: [<span class="hljs-type">Spells</span>] {
        <span class="hljs-comment">// ,     Hero  switch   .sword</span><font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Del mismo modo, las clases de espada est√°n escritas para: Club, Bow, Pike, etc. </font><font style="vertical-align: inherit;">"Es f√°cil ver" (c) que en la nueva arquitectura todo el c√≥digo que se aplica a cada tipo espec√≠fico de arma se agrupa en la clase correspondiente y no se distribuye de acuerdo con el H√©roe junto con los otros tipos de armas. </font><font style="vertical-align: inherit;">Esto facilita la lectura y comprensi√≥n del H√©roe y cualquier arma en particular. </font><font style="vertical-align: inherit;">Adem√°s, debido a los requisitos del protocolo impuesto, es mucho m√°s f√°cil rastrear todos los m√©todos que deben implementarse al agregar un nuevo tipo de arma o al agregar una nueva caracter√≠stica a un arma (por ejemplo, un arma puede tener un m√©todo de c√°lculo de precio). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqu√≠ puede ver que la inyecci√≥n de dependencia ha complicado la creaci√≥n de objetos de clase Hero. </font><font style="vertical-align: inherit;">Lo que sol√≠a hacerse simplemente:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">let</span> lastHero = <span class="hljs-type">Hero</span>()</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora se ha convertido en un conjunto de instrucciones que se duplicar√°n siempre que sea necesario para crear un h√©roe. </font><font style="vertical-align: inherit;">Sin embargo, Vasily se encarg√≥ de esto:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HeroFactory</span> </span>{
    <span class="hljs-keyword">static</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">makeSwordsman</span><span class="hljs-params">()</span></span> -&gt; <span class="hljs-type">Hero</span> { <span class="hljs-comment">// ,  static -  </span>
        <span class="hljs-keyword">let</span> weapon = <span class="hljs-type">Sword</span>(<span class="hljs-comment">/*  */</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-type">Hero</span>(weapon)<font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">static</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">makeClubman</span><span class="hljs-params">()</span></span> -&gt; <span class="hljs-type">Hero</span> {
        <span class="hljs-keyword">let</span> weapon = <span class="hljs-type">Club</span>(<span class="hljs-comment">/*  */</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-type">Hero</span>(weapon)<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Est√° claro que Vasily tuvo que sudar para dispersar la pila que se </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">amonton√≥</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dise√±ada por Petya (y yo). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por supuesto, mirando la √∫ltima soluci√≥n, puede surgir el siguiente pensamiento:</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ok, result√≥, normas. </font><font style="vertical-align: inherit;">Es conveniente leer y expandir, pero ¬øson todas estas f√°bricas / protocolos / dependencias un mont√≥n de gastos generales? </font><font style="vertical-align: inherit;">Un c√≥digo que no da nada en t√©rminos de caracter√≠sticas, pero existe solo para organizar el c√≥digo. </font><font style="vertical-align: inherit;">"C√≥digo para organizar el c√≥digo", mgm. </font><font style="vertical-align: inherit;">¬øEs realmente necesario cercar este jard√≠n siempre y en todas partes?</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Una respuesta honesta a la primera pregunta ser√≠a:</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S√≠, esta es una sobrecarga para las caracter√≠sticas que a las empresas les encantan. </font></font><br>
</blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Y a la pregunta "¬øcu√°ndo?" </font><font style="vertical-align: inherit;">secci√≥n de respuestas:</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La filosof√≠a del hombre espada o "¬øcu√°ndo tuviste que gobernar?"</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al principio era un hombre espada. </font><font style="vertical-align: inherit;">En el sistema de sentido del antiguo c√≥digo, esto era bastante normal. </font><font style="vertical-align: inherit;">Mientras hubiera un h√©roe y un arma, no hab√≠a necesidad de distinguir entre ellos; de todos modos, no hab√≠a nada m√°s para el h√©roe. </font><font style="vertical-align: inherit;">Y el c√≥digo monol√≠tico confirm√≥ este hecho con su texto. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Swordman: ni siquiera suena tan mal. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øY a qu√© condujeron las primeras ediciones "ingenuas"? </font><font style="vertical-align: inherit;">¬øA qu√© condujo la adici√≥n del if-chik? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agregar un if-chic condujo a ... ¬°un mutante! </font><font style="vertical-align: inherit;">Mutante, es decir </font><font style="vertical-align: inherit;">objeto mutable que puede mutar entre un "humano" y un "humano Dubin". </font><font style="vertical-align: inherit;">Al mismo tiempo, si comete un peque√±o error en la implementaci√≥n del mutante, entonces surge el estado de "medulina humana". </font><font style="vertical-align: inherit;">¬°No hagas as√≠! </font><font style="vertical-align: inherit;">No hay necesidad de "Dubin humano" en absoluto. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es necesario:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hombre + adicci√≥n a la espada (necesidad de una espada);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hombre + adicci√≥n a un club (necesidad de un club).</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬°No todas las adicciones son malas! </font><font style="vertical-align: inherit;">Esta adicci√≥n al alcohol es malvada, y el </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">protocolo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> es bueno. </font><font style="vertical-align: inherit;">¬°S√≠, incluso la dependencia del objeto es mejor que la "Dubin humana"! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øCu√°ndo ocurri√≥ la mutaci√≥n? </font><font style="vertical-align: inherit;">La transformaci√≥n en un mutante ocurri√≥ cuando se agreg√≥ la bandera: el c√≥digo monol√≠tico permaneci√≥ monol√≠tico, pero cuando la bandera se cambi√≥ (mut√≥), el comportamiento del mismo objeto comenz√≥ a cambiar significativamente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vasily destacar√≠a dos etapas de mutaci√≥n:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Agregar una bandera y el primer "si" (o "interruptor" u otro mecanismo de ramificaci√≥n) a la bandera. </font><font style="vertical-align: inherit;">La situaci√≥n es amenazante, pero soportable: el h√©roe se vierte con desechos radiactivos, pero lo supera.</font></font></li>
<li>     ¬´if¬ª   ,     . .    ‚Äî   . ,    -  - .</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por lo tanto, en la situaci√≥n considerada, para evitar la aparici√≥n de deudas t√©cnicas, tiene sentido construir la arquitectura antes de pasar por la primera etapa, en el peor de los casos, a la segunda. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øQu√© hizo exactamente Vasily para tratar a un mutante? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Desde un punto de vista t√©cnico: se utiliza el protocolo cerrado de dependencia de inyecci√≥n. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De filos√≥fico - responsabilidad compartida. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todas las caracter√≠sticas del trabajo de la clase, que pueden intercambiarse entre s√≠ (lo que significa que son alternativas entre s√≠), se eliminaron del H√©roe dependiendo. </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Una nueva </font><font style="vertical-align: inherit;">funcionalidad </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">alternativa</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , la implementaci√≥n del trabajo de la espada, la implementaci√≥n del trabajo del club, a su aparici√≥n se volvi√≥ diferente entre s√≠ y </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">es diferente</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> del resto como antes.</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sin</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> c√≥digo de h√©roe </font><i><font style="vertical-align: inherit;">alternativo</font></i><font style="vertical-align: inherit;"> . </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Entonces, ya en el c√≥digo "ingenuo" apareci√≥</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> algo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nuevo</font><i><font style="vertical-align: inherit;"> que era</font></i><font style="vertical-align: inherit;"> diferente en su comportamiento alternativo de la parte incontestada del H√©roe. </font><font style="vertical-align: inherit;">Entonces, en el c√≥digo "ingenuo" apareci√≥ una descripci√≥n impl√≠cita de nuevas</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> entidades comerciales</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : una espada y un garrote</font><font style="vertical-align: inherit;">, distribuidos seg√∫n el H√©roe</font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Para que sea conveniente operar con nuevas</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> entidades comerciales</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , se hizo necesario distinguirlas como</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> entidades de c√≥digo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> separadas</font><font style="vertical-align: inherit;">con sus propios</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nombres</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Entonces hubo una divisi√≥n de responsabilidad. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PS TL; DR;</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬øVes la bandera?</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬°S√© un hombre, maldita sea! </font><font style="vertical-align: inherit;">¬°B√≥rralo!</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Inyecci√≥n de adicci√≥n</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">...</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Beneficio! 11</font></font></li>
</ol></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es493458/index.html">Libera tu Android - Alaverdi</a></li>
<li><a href="../es493462/index.html">Ba√±o ultras√≥nico. Parte 2</a></li>
<li><a href="../es493468/index.html">No tengas miedo de respirar profundamente</a></li>
<li><a href="../es493470/index.html">Los cient√≠ficos encuentran nuevos planetas menores fuera de Neptuno</a></li>
<li><a href="../es493478/index.html">Hack The Box - Tutorial del bosque. AS-REP Asado, DCSync y ataques Pass-The-Hash</a></li>
<li><a href="../es493482/index.html">Conoce a la tortuga cibern√©tica, la predecesora de Roomba</a></li>
<li><a href="../es493484/index.html">Su C # ya es "funcional", solo d√©jelo.</a></li>
<li><a href="../es493486/index.html">Las startups automotrices m√°s interesantes 2019-2020</a></li>
<li><a href="../es493488/index.html">Unidad + git = amistad: parte 1 conjunto de caballeros</a></li>
<li><a href="../es493496/index.html">Reaccionar JS. Advertencia: no se puede realizar una actualizaci√≥n del estado Reaccionar en un componente desmontado. Esto es un no-op, pero indica un memo.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>