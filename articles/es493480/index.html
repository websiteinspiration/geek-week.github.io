<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🐠 👩🏿‍🤝‍👩🏾 🚶🏿 Arquitectura para principiantes o por qué no necesita insertar una bandera en el hombre espada 🧜🏼 🖖 🧗🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Anotación:
 
 

1. Un ejemplo de la implementación de una nueva funcionalidad en la clase agregando una "bandera".
2. Efectos.
3. Enfoque alternativo ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Arquitectura para principiantes o por qué no necesita insertar una bandera en el hombre espada</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/493480/"><img src="https://habrastorage.org/webt/9s/96/tv/9s96tvz6feehvgoiz_gmwdoktl8.png"><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anotación:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un ejemplo de la implementación de una nueva funcionalidad en la clase agregando una "bandera".</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Efectos.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Enfoque alternativo y comparación de resultados.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¿Cómo evitar la situación: "exceso arquitectónico"?</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El momento en que llega el momento de cambiarlo todo.</font></font></li>
</ol></blockquote><br>
<a name="habracut"></a><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Antes de comenzar, un par de notas:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Esta es una historia sobre arquitectura de software, en el sentido que usa el tío Bob. </font><font style="vertical-align: inherit;">Si, ese.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Todos los personajes, sus nombres y códigos en el artículo son ficticios, cualquier coincidencia con la realidad es aleatoria.</font></font></li>
</ul></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Supongamos que soy un programador-programador ordinario en un proyecto. </font><font style="vertical-align: inherit;">El proyecto es un juego en el que un solo Héroe (también conocido como Héroe) va a lo largo de una línea perfectamente horizontal de izquierda a derecha. </font><font style="vertical-align: inherit;">Los monstruos interfieren con este maravilloso viaje. </font><font style="vertical-align: inherit;">A la orden del usuario, el héroe los corta </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">con una espada</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en la col y no sopla el bigote. </font><font style="vertical-align: inherit;">El proyecto ya tiene 100K líneas, y "¡necesitas más </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">líneas de</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> características!" </font><font style="vertical-align: inherit;">Miremos a nuestro héroe:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Hero</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">strike</span><span class="hljs-params">()</span></span> {
        <span class="hljs-comment">//   1</span><font></font>
    }<font></font>
    <span class="hljs-comment">//   </span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Supongamos también que el líder de mi equipo personal, Vasily, también puede irse de vacaciones. </font><font style="vertical-align: inherit;">Repentinamente. </font><font style="vertical-align: inherit;">¿Quien lo hubiera pensado? </font><font style="vertical-align: inherit;">Además, la situación se desarrolla de manera estándar: un Búho vuela y necesita urgentemente, justo ayer, para poder elegir antes del comienzo del juego: jugar para el Héroe con un palo o una espada. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Debe ser muy rápido. </font><font style="vertical-align: inherit;">Y sí, por supuesto, él mismo fue un programador durante más de años de lo que puedo caminar, por lo que sabe que la tarea es de cinco minutos. </font><font style="vertical-align: inherit;">Pero que así sea, estimar por 2 horas. </font><font style="vertical-align: inherit;">Solo necesita agregar una casilla de verificación y if-chik. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nota: if-chik en el valor @! ^% $ # @ ^% &amp; @! 11 $ its # $% @ ^% &amp;! @ !!! </font><font style="vertical-align: inherit;">en &amp;! ^% # $ ^%! 1 if-chic! </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mis pensamientos: “¡Ja! </font><font style="vertical-align: inherit;">¡Dos horas! </font><font style="vertical-align: inherit;">¡Hecho! ":</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Hero</span> </span>{
    <span class="hljs-class"><span class="hljs-keyword">enum</span> <span class="hljs-title">WeaponTypes</span> </span>{
        <span class="hljs-keyword">case</span> sword:
        <span class="hljs-keyword">case</span> club:<font></font>
    }<font></font>
	<font></font>
    <span class="hljs-keyword">var</span> weaponType: <span class="hljs-type">WeaponTypes?</span><font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">strike</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> weaponType = weaponType <span class="hljs-keyword">else</span> {
            <span class="hljs-built_in">assertionFailure</span>()
            <span class="hljs-keyword">return</span>	<font></font>
        }<font></font>
        <span class="hljs-comment">//  : switch  Swift  if- -    !</span>
        <span class="hljs-keyword">switch</span> (weaponType) {
            <span class="hljs-keyword">case</span> .sword: <span class="hljs-comment">//     </span>
            <span class="hljs-keyword">case</span> .club:  <span class="hljs-comment">//     </span><font></font>
        }<font></font>
    }<font></font>
    <span class="hljs-comment">//  </span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si te enteraste de mi decisión, entonces, por desgracia: tengo dos noticias para ti:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como si fuera bueno: los dos cumplimos. </font><font style="vertical-align: inherit;">Entregamos: desde la palabra entregar valor o desde la palabra código divertido (a través de las lágrimas).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Y el malo: sin Vasily, el proyecto de kapets.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¿Entonces qué pasó? </font><font style="vertical-align: inherit;">Parece que hasta ahora nada. </font><font style="vertical-align: inherit;">Pero veamos qué sucede después (mientras hacemos todo lo posible para mantener a Vasily de vacaciones). </font><font style="vertical-align: inherit;">Y luego habrá esto: el departamento de control de calidad prestará atención al peso de nuestro héroe. </font><font style="vertical-align: inherit;">Y no, esto no se debe a que el Héroe tenga que ponerse a dieta, sino por qué:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">var</span> weight: <span class="hljs-type">Stone</span> {
    <span class="hljs-keyword">return</span> meatbagWeight + pantsWeight + helmetWeight + swordWeight<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Olvidé arreglar el cálculo del peso. </font><font style="vertical-align: inherit;">Bueno, piensas, error, ¿con quién no sucede? </font><font style="vertical-align: inherit;">Slap-bloop, fuck-tibidoch, listo:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">var</span> weight: <span class="hljs-type">Stone</span> {
    <span class="hljs-comment">//   guard let weaponType</span>
    <span class="hljs-keyword">let</span> weightWithoutWeapon = meatbagWeight + pantsWeight + helmetWeight
    <span class="hljs-keyword">switch</span> (weaponType) {
        <span class="hljs-keyword">case</span> .sword: <span class="hljs-keyword">return</span> weightWithoutWeapon + swordWeight
        <span class="hljs-keyword">case</span> .club:  <span class="hljs-keyword">return</span> weightWithoutWeapon + clubWeight<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero rápidamente lo arregló! </font><font style="vertical-align: inherit;">El héroe ahora está saltando, teniendo en cuenta el peso, pero. </font><font style="vertical-align: inherit;">Trabajo orientado a resultados! </font><font style="vertical-align: inherit;">Esto no es para que usted mire los ombligos, los astronautas arquitectónicos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bueno, de verdad, luego corrigió un poco más. </font><font style="vertical-align: inherit;">En la lista de hechizos, tuve que hacer esto:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">var</span> spells: [<span class="hljs-type">Spells</span>] {
    <span class="hljs-comment">//   guard let weaponType </span>
    <span class="hljs-comment">// ,   let spellsWithoutWeapon: [Spells]</span>
    <span class="hljs-keyword">switch</span> (weaponType) {
        <span class="hljs-keyword">case</span> .sword:
            <span class="hljs-comment">//  let swordSpells: [Spells]</span>
            <span class="hljs-keyword">return</span> spellsWithoutWeapon + swordSpells
	<span class="hljs-keyword">case</span> .club:
            <span class="hljs-comment">//  let clubSpells: [Spells]</span>
            <span class="hljs-keyword">return</span> spellsWithoutWeapon + clubSpells<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y luego vino Petia y rompió todo. </font><font style="vertical-align: inherit;">Bueno, la verdad es que tenemos un junio en el proyecto. </font><font style="vertical-align: inherit;">Inatento. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Solo necesitaba agregar el concepto de "Nivel de Arma" a las fórmulas para calcular la fuerza del golpe y el peso del Héroe. </font><font style="vertical-align: inherit;">Y Petya se perdió uno de los cuatro casos. </font><font style="vertical-align: inherit;">¡Pero nada! </font><font style="vertical-align: inherit;">Lo corregí todo:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">strike</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">//guard let weaponType</span>
    <span class="hljs-keyword">switch</span> (weaponType) {
        <span class="hljs-keyword">case</span> .sword: <span class="hljs-comment">//        weaponGrade</span>
        <span class="hljs-keyword">case</span> .club:  <span class="hljs-comment">//        weaponGrade</span><font></font>
    }<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">var</span> weight: <span class="hljs-type">Stone</span> {
    <span class="hljs-comment">// guard let weaponType</span>
    <span class="hljs-keyword">let</span> weightWithoutWeapon = meatbagWeight + pantsWeight + helmetWeight
    <span class="hljs-keyword">switch</span> (weaponType) {
        <span class="hljs-keyword">case</span> .sword: <span class="hljs-keyword">return</span> weightWithoutWeapon + swordWeight / grade
	<span class="hljs-keyword">case</span> .club:  <span class="hljs-keyword">return</span> weightWithoutWeapon + pow(clubWeight, <span class="hljs-number">1</span> / grade)<font></font>
    }<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">var</span> spells: [<span class="hljs-type">Spells</span>] {
    <span class="hljs-comment">//     , ! </span>
    <span class="hljs-comment">// ,     .    ,    ,   .   !</span>
}</code></pre><br>
<img src="https://habrastorage.org/webt/aw/ev/fo/awevfo6jjlysv_8l9wq-dl9npkw.png" height="80" width="80" align="right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No hace falta decir que cuando (¡de repente!) Fue necesario agregar fórmulas de actualización / arco, nuevamente hubo casos olvidados, errores y eso fue todo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¿Qué salió mal? </font><font style="vertical-align: inherit;">¿Dónde me equivoqué y qué (excepto los compañeros) dijo Vasily cuando regresó de vacaciones? </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aquí no puedes seguir leyendo la historia, pero, por ejemplo, piensa en lo eterno, en la arquitectura. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y con aquellos que aún decidieron leer, continuamos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces, echemos un vistazo a los clásicos:</font></font><blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¡La optimización temprana es la raíz de todo mal!</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Y ... eh ... eso no es todo. </font><font style="vertical-align: inherit;">Aquí está la cosa: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
en los lenguajes OOP (como Swift, por ejemplo), hay tres formas principales de extender las capacidades de una clase:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La primera forma es "ingenua". </font><font style="vertical-align: inherit;">Acabamos de verlo. </font><font style="vertical-align: inherit;">Agregar una casilla de verificación. </font><font style="vertical-align: inherit;">Agregar responsabilidad. </font><font style="vertical-align: inherit;">Clase de hinchazón</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La segunda forma es la herencia. </font><font style="vertical-align: inherit;">Todos conocen un mecanismo poderoso para reutilizar el código. </font><font style="vertical-align: inherit;">Uno podría, por ejemplo:</font></font><br>
 <ul>
<li><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Heredar el nuevo Héroe con el Arco y el Héroe de Dubina del Héroe (que sostiene una espada, pero esto no se refleja en el nombre de la clase Héroe ahora). </font><font style="vertical-align: inherit;">Y luego, en los herederos, anule los métodos modificados. </font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Este camino es muy malo (solo confía en mí).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Convierta a la clase base (o protocolo) en un Héroe, y elimine todas las características asociadas con un tipo específico de arma como herederos </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
: Héroe con </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
espada: Héroe, </font><font style="vertical-align: inherit;">Héroe con </font><font style="vertical-align: inherit;">arco: Héroe, Héroe con </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dubina: Héroe. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esto es mejor, pero los nombres de estas clases nos miran de alguna manera disgustados, feroces y al mismo tiempo tristes y perplejos. </font><font style="vertical-align: inherit;">Si no miran a alguien así, entonces intentaré escribir otro artículo, donde además del aburrido héroe masculino serán ...</font></font><img src="https://habrastorage.org/webt/7i/7w/l7/7i7wl7kxg1ol1mmtplsfv-h7i4w.png" height="80" width="80"></li>
</ul></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La tercera forma es la separación de responsabilidades a través de la inyección de dependencia. </font><font style="vertical-align: inherit;">Puede ser una dependencia cerrada por un protocolo o un cierre (como si estuviera cerrado por una firma), lo que sea. </font><font style="vertical-align: inherit;">Lo principal es que la implementación de nuevas responsabilidades debe abandonar la clase principal.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¿Cómo puede verse esto en nuestro caso? </font><font style="vertical-align: inherit;">Por ejemplo, así (decisión de Vasily):</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Hero</span> </span>{
    <span class="hljs-keyword">let</span> weapon: <span class="hljs-type">Weapon</span> <span class="hljs-comment">//   , ..    </span><font></font>
<font></font>
    <span class="hljs-keyword">init</span> (<span class="hljs-number">_</span> weapon: <span class="hljs-type">Weapon</span>) { <span class="hljs-comment">//     </span>
        <span class="hljs-keyword">self</span>.weapon = weapon<font></font>
    }<font></font>
	<font></font>
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">strike</span><span class="hljs-params">()</span></span> {<font></font>
        weapon.strike()<font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">var</span> weight: <span class="hljs-type">Stone</span> {
        <span class="hljs-keyword">return</span> meatbagWeight + pantsWeight + helmetWeight + weapon.weight<font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">var</span> spells: [<span class="hljs-type">Spells</span>] {
        <span class="hljs-comment">//   </span>
        <span class="hljs-keyword">return</span> spellsWithoutWeapon + weapon.spells<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¿Qué necesitas para ser así? </font><font style="vertical-align: inherit;">Ninjutsu - protocolo:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">protocol</span> <span class="hljs-title">Weapon</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">strike</span><span class="hljs-params">()</span></span>
    <span class="hljs-keyword">var</span> weight: <span class="hljs-type">Stone</span> {<span class="hljs-keyword">get</span>}
    <span class="hljs-keyword">var</span> spells: [<span class="hljs-type">Spells</span>] {<span class="hljs-keyword">get</span>}<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ejemplo de implementación de protocolo:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Sword</span>: <span class="hljs-title">Weapon</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">strike</span><span class="hljs-params">()</span></span> {
        <span class="hljs-comment">// ,     Hero  switch   .sword</span><font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">var</span> weight: <span class="hljs-type">Stone</span> {
        <span class="hljs-comment">// ,     Hero  switch   .sword</span><font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">var</span> spells: [<span class="hljs-type">Spells</span>] {
        <span class="hljs-comment">// ,     Hero  switch   .sword</span><font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Del mismo modo, las clases de espada están escritas para: Club, Bow, Pike, etc. </font><font style="vertical-align: inherit;">"Es fácil ver" (c) que en la nueva arquitectura todo el código que se aplica a cada tipo específico de arma se agrupa en la clase correspondiente y no se distribuye de acuerdo con el Héroe junto con los otros tipos de armas. </font><font style="vertical-align: inherit;">Esto facilita la lectura y comprensión del Héroe y cualquier arma en particular. </font><font style="vertical-align: inherit;">Además, debido a los requisitos del protocolo impuesto, es mucho más fácil rastrear todos los métodos que deben implementarse al agregar un nuevo tipo de arma o al agregar una nueva característica a un arma (por ejemplo, un arma puede tener un método de cálculo de precio). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aquí puede ver que la inyección de dependencia ha complicado la creación de objetos de clase Hero. </font><font style="vertical-align: inherit;">Lo que solía hacerse simplemente:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">let</span> lastHero = <span class="hljs-type">Hero</span>()</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora se ha convertido en un conjunto de instrucciones que se duplicarán siempre que sea necesario para crear un héroe. </font><font style="vertical-align: inherit;">Sin embargo, Vasily se encargó de esto:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HeroFactory</span> </span>{
    <span class="hljs-keyword">static</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">makeSwordsman</span><span class="hljs-params">()</span></span> -&gt; <span class="hljs-type">Hero</span> { <span class="hljs-comment">// ,  static -  </span>
        <span class="hljs-keyword">let</span> weapon = <span class="hljs-type">Sword</span>(<span class="hljs-comment">/*  */</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-type">Hero</span>(weapon)<font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">static</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">makeClubman</span><span class="hljs-params">()</span></span> -&gt; <span class="hljs-type">Hero</span> {
        <span class="hljs-keyword">let</span> weapon = <span class="hljs-type">Club</span>(<span class="hljs-comment">/*  */</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-type">Hero</span>(weapon)<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Está claro que Vasily tuvo que sudar para dispersar la pila que se </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">amontonó</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> diseñada por Petya (y yo). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por supuesto, mirando la última solución, puede surgir el siguiente pensamiento:</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ok, resultó, normas. </font><font style="vertical-align: inherit;">Es conveniente leer y expandir, pero ¿son todas estas fábricas / protocolos / dependencias un montón de gastos generales? </font><font style="vertical-align: inherit;">Un código que no da nada en términos de características, pero existe solo para organizar el código. </font><font style="vertical-align: inherit;">"Código para organizar el código", mgm. </font><font style="vertical-align: inherit;">¿Es realmente necesario cercar este jardín siempre y en todas partes?</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Una respuesta honesta a la primera pregunta sería:</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sí, esta es una sobrecarga para las características que a las empresas les encantan. </font></font><br>
</blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Y a la pregunta "¿cuándo?" </font><font style="vertical-align: inherit;">sección de respuestas:</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La filosofía del hombre espada o "¿cuándo tuviste que gobernar?"</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al principio era un hombre espada. </font><font style="vertical-align: inherit;">En el sistema de sentido del antiguo código, esto era bastante normal. </font><font style="vertical-align: inherit;">Mientras hubiera un héroe y un arma, no había necesidad de distinguir entre ellos; de todos modos, no había nada más para el héroe. </font><font style="vertical-align: inherit;">Y el código monolítico confirmó este hecho con su texto. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Swordman: ni siquiera suena tan mal. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¿Y a qué condujeron las primeras ediciones "ingenuas"? </font><font style="vertical-align: inherit;">¿A qué condujo la adición del if-chik? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agregar un if-chic condujo a ... ¡un mutante! </font><font style="vertical-align: inherit;">Mutante, es decir </font><font style="vertical-align: inherit;">objeto mutable que puede mutar entre un "humano" y un "humano Dubin". </font><font style="vertical-align: inherit;">Al mismo tiempo, si comete un pequeño error en la implementación del mutante, entonces surge el estado de "medulina humana". </font><font style="vertical-align: inherit;">¡No hagas así! </font><font style="vertical-align: inherit;">No hay necesidad de "Dubin humano" en absoluto. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es necesario:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hombre + adicción a la espada (necesidad de una espada);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hombre + adicción a un club (necesidad de un club).</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¡No todas las adicciones son malas! </font><font style="vertical-align: inherit;">Esta adicción al alcohol es malvada, y el </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">protocolo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> es bueno. </font><font style="vertical-align: inherit;">¡Sí, incluso la dependencia del objeto es mejor que la "Dubin humana"! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¿Cuándo ocurrió la mutación? </font><font style="vertical-align: inherit;">La transformación en un mutante ocurrió cuando se agregó la bandera: el código monolítico permaneció monolítico, pero cuando la bandera se cambió (mutó), el comportamiento del mismo objeto comenzó a cambiar significativamente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vasily destacaría dos etapas de mutación:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Agregar una bandera y el primer "si" (o "interruptor" u otro mecanismo de ramificación) a la bandera. </font><font style="vertical-align: inherit;">La situación es amenazante, pero soportable: el héroe se vierte con desechos radiactivos, pero lo supera.</font></font></li>
<li>     «if»   ,     . .    —   . ,    -  - .</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por lo tanto, en la situación considerada, para evitar la aparición de deudas técnicas, tiene sentido construir la arquitectura antes de pasar por la primera etapa, en el peor de los casos, a la segunda. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¿Qué hizo exactamente Vasily para tratar a un mutante? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Desde un punto de vista técnico: se utiliza el protocolo cerrado de dependencia de inyección. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De filosófico - responsabilidad compartida. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todas las características del trabajo de la clase, que pueden intercambiarse entre sí (lo que significa que son alternativas entre sí), se eliminaron del Héroe dependiendo. </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Una nueva </font><font style="vertical-align: inherit;">funcionalidad </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">alternativa</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , la implementación del trabajo de la espada, la implementación del trabajo del club, a su aparición se volvió diferente entre sí y </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">es diferente</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> del resto como antes.</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sin</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> código de héroe </font><i><font style="vertical-align: inherit;">alternativo</font></i><font style="vertical-align: inherit;"> . </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Entonces, ya en el código "ingenuo" apareció</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> algo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nuevo</font><i><font style="vertical-align: inherit;"> que era</font></i><font style="vertical-align: inherit;"> diferente en su comportamiento alternativo de la parte incontestada del Héroe. </font><font style="vertical-align: inherit;">Entonces, en el código "ingenuo" apareció una descripción implícita de nuevas</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> entidades comerciales</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : una espada y un garrote</font><font style="vertical-align: inherit;">, distribuidos según el Héroe</font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Para que sea conveniente operar con nuevas</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> entidades comerciales</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , se hizo necesario distinguirlas como</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> entidades de código</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> separadas</font><font style="vertical-align: inherit;">con sus propios</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nombres</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Entonces hubo una división de responsabilidad. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PS TL; DR;</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¿Ves la bandera?</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¡Sé un hombre, maldita sea! </font><font style="vertical-align: inherit;">¡Bórralo!</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Inyección de adicción</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">...</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Beneficio! 11</font></font></li>
</ol></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es493458/index.html">Libera tu Android - Alaverdi</a></li>
<li><a href="../es493462/index.html">Baño ultrasónico. Parte 2</a></li>
<li><a href="../es493468/index.html">No tengas miedo de respirar profundamente</a></li>
<li><a href="../es493470/index.html">Los científicos encuentran nuevos planetas menores fuera de Neptuno</a></li>
<li><a href="../es493478/index.html">Hack The Box - Tutorial del bosque. AS-REP Asado, DCSync y ataques Pass-The-Hash</a></li>
<li><a href="../es493482/index.html">Conoce a la tortuga cibernética, la predecesora de Roomba</a></li>
<li><a href="../es493484/index.html">Su C # ya es "funcional", solo déjelo.</a></li>
<li><a href="../es493486/index.html">Las startups automotrices más interesantes 2019-2020</a></li>
<li><a href="../es493488/index.html">Unidad + git = amistad: parte 1 conjunto de caballeros</a></li>
<li><a href="../es493496/index.html">Reaccionar JS. Advertencia: no se puede realizar una actualización del estado Reaccionar en un componente desmontado. Esto es un no-op, pero indica un memo.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>