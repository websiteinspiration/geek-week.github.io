<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨‍👨‍👧‍👦 👆🏿 🌔 Facebookサービスの信頼性の内部 🧚🏾 ☃️ 🦇</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Facebookが「嘘をついている」とき、人々はそれがハッカーまたはDDoS攻撃のせいだと考えますが、そうではありません。過去数年間のすべての「低下」は、内部の変化または故障によって引き起こされました。例を挙げてFacebookを壊さないように新入社員に教えるために、すべての主要なインシデントには、...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Facebookサービスの信頼性の内部</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/oleg-bunin/blog/489204/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Facebookが「嘘をついている」とき、人々はそれがハッカーまたはDDoS攻撃のせいだと考えますが、そうではありません。過去数年間のすべての「低下」は、内部の変化または故障によって引き起こされました。例を挙げてFacebookを壊さないように新入社員に教えるために、すべての主要なインシデントには、「警察に電話する」や「CAPSLOCK」などの名前が付けられています。最初の名前が付けられたのは、ある日ソーシャルネットワークが落ちたときに、ユーザーがロサンゼルスの警察に電話してそれを修正するように求め、Twitterで絶望した保安官がこれについて気にしないように求めたためです。キャッシュマシンでの2回目のインシデントの間に、ネットワークインターフェイスがダウンして上昇しなくなり、すべてのマシンが手動で再起動しました。</font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">エリナ・ロバノバ</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は過去4年間Web FoundationチームでFacebookに取り組んできました。チームメンバーはプロダクションエンジニアと呼ばれ、バックエンド全体の信頼性とパフォーマンスを監視し、オンになったらFacebookを公開し、監視と自動化を記述して、自分や他の人の生活を楽にします。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jf/9x/nj/jf9xnjbzmqg3ufk-km_bqmgkrya.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Elinaの</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HighLoad ++ 2019</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に関するレポートに基づく記事</font><font style="vertical-align: inherit;">では、制作エンジニアがFacebookバックエンドを監視する方法、それらが使用するツール、主要なクラッシュの原因となる対処方法について説明します。</font></font><br>
<a name="habracut"></a><br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/wuV5DLiUuaI" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私の名前はエリナです。ほぼ5年前、Facebookで普通の開発者として呼び出されました。初めて、非常に負荷の高いシステムに初めて遭遇しました。これは研究所では教えられていません。</font><font style="vertical-align: inherit;">会社はチームではなくオフィスを雇っていたため、私はロンドンに到着し、facebook.comの作業を監視するチームを選び、制作エンジニアの1人でした。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">生産エンジニア</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まず、私たちが何をしているのか、なぜGoogleのようなSREではなく、生産エンジニアと呼ばれるのかを説明します。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2009. SRE</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
多くの企業で現在も使用されている標準モデルは、「開発者-テスター-操作」です。</font><font style="vertical-align: inherit;">多くの場合、彼らは分かれています：彼らは異なるフロアに、時には異なる国にさえ座っており、互いにコミュニケーションをとっていません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2009年、FacebookにはすでにSREがありました。</font><font style="vertical-align: inherit;">GoogleでSREは以前に開始し、DevOpsを達成する方法を知っており、彼らの著書「</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サイト信頼性エンジニアリング</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">」に</font><font style="vertical-align: inherit;">それを書いてい</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/6h/o6/1l/6ho61luejwigg_bb6v_7441tlty.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2009年のFacebookでは、このようなものはありませんでした。</font><font style="vertical-align: inherit;">私たちはSREと呼ばれていましたが、それ以外の世界ではOpsと同じ作業を行いました：手作業、自動化なし、すべてのサービスを手で展開、何らかの形で監視、すべての呼び出し、シェルスクリプトのセット。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2010. SROとAppOps</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
当時のユーザー数は年に3回増加し、それに応じてサービスの数も増加したため、これはすべてスケーリングしませんでした。</font><font style="vertical-align: inherit;">2010年、強い意志を持つ意思決定Opsは2つのグループに分けられました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初のグループは</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SRO</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">で、「O」は「運用」であり、サイトの開発、自動化、監視に従事しています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2番目のグループは</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AppOpsで</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、大規模なサービスごとにチームに統合されました。</font><font style="vertical-align: inherit;">AppOpsはすでにDevOpsのアイデアに近づいています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しばらくの分離は皆を救った。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2012.生産エンジニア</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2012年、AppOpsは単に</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プロダクションエンジニアの</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名前を変更し</font><strong><font style="vertical-align: inherit;">ました</font></strong><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">名前に加えて、何も変更されていませんが、より快適になりました。</font><font style="vertical-align: inherit;">ヨットを呼ぶと、ヨットは航海しますが、Opsのように航海したくありませんでした。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SROはまだ存在し、Facebookは成長しており、すべてのサービスを一度に監視することは困難でした。</font><font style="vertical-align: inherit;">オンコール中の人はトイレに行くことさえ許されなかった。彼は常に火をつけていたので、誰かに彼を置き換えるように頼んだ。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2014.クロージングSRO</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ある時点で、当局は全員をオンコールに移しました。</font><font style="vertical-align: inherit;">「全員」とは開発者も意味します。コードを書いて、ここにいるとこのコードに答えてください！</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プロダクションエンジニアは既に最も重要なチームに支援を求めて統合されており、残りは運が悪い。</font><font style="vertical-align: inherit;">私たちは大きなチームから始め、数年後にFacebookの全員をオンコールに転送しました。</font><font style="vertical-align: inherit;">開発者の間で大きな興奮がありました：誰かがやめた、誰かが悪い投稿を書いた。</font><font style="vertical-align: inherit;">しかし、すべてが落ち着き、2014年、SROは不要になったため閉鎖されました。</font><font style="vertical-align: inherit;">だから私たちは今日まで生きています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
会社の「SRE」という言葉は悪名高いですが、GoogleではSREのように見えます。</font><font style="vertical-align: inherit;">違いがあります。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">私たちは</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">常にチームに組み込まれています。</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Googleのように、一般的にSRE検索はありません。検索サービスごとに個別に検索されます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">私たち</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は製品</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ではなく、製品がそれ自体を管理するインフラストラクチャーにいます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">私たちは</font><font style="vertical-align: inherit;">開発者と一緒に</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">電話</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">をかけています。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">システムとネットワークにはもう少し経験があるので、</font><font style="vertical-align: inherit;">サービスが明るく燃えたときにサービスの</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">監視</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と消火に</font><strong><font style="vertical-align: inherit;">重点</font></strong><font style="vertical-align: inherit;">を</font><strong><font style="vertical-align: inherit;">置いてい</font></strong><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">クラッシュにつながり、新しいサービスのアーキテクチャに最初から影響を与える可能性のあるエラーを事前に修正し、後で本番環境でスムーズに機能するようにします。</font></font></li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">モニタリング</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それが最も重要です。</font><font style="vertical-align: inherit;">これどうやってやるの？</font><font style="vertical-align: inherit;">みんなのように：黒魔術なしで、自分の家に。</font><font style="vertical-align: inherit;">しかし、悪魔はいつものように、それらについて詳しく教えてくれます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ATOP</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
下から始めましょう。 LinuxのTOPは誰もが知っているものであり、システムパフォーマンスモニターであるATOPを使用しています。 ATOPの主な利点は、履歴を保存することです。スナップショットをディスクに保存するように構成できます。 ATOPは5秒ごとにすべてのマシンで実行されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以下は、facebook.comのPHPバックエンドを実行するサーバーの例です。 PHPコードを実行する仮想マシンを作成しました。これは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HHVM</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（HipHop Virtual Machine）</font><font style="vertical-align: inherit;">と呼ばれ</font><font style="vertical-align: inherit;">ます。エクスポートされたメトリックによると、複数のマシンが1分間でほとんど1つのリクエストを処理しなかったことがわかりました。理由を見てみましょう。ATOPがハングする30秒前に開きます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/p2/vt/wf/p2vtwfqsucdo-shyennmf64opy8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プロセッサの問題により、負荷が高すぎることがわかります。</font><font style="vertical-align: inherit;">メモリにも問題があり、キャッシュに残っているのは1.5 GBだけで、5秒後には800 MBしか残りません。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/dz/q-/_x/dzq-_x7xjizrcgynj3gdayuh8u0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに5秒後、CPUは解放され、何も実行されません。</font><font style="vertical-align: inherit;">ATOPは、一番下の行を見て、ディスクに書き込むと言っていますが、何ですか？</font><font style="vertical-align: inherit;">スワップを書いていることがわかりました。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/4z/-j/v1/4z-jv12mgthgjnezqlvbznu6ync.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
誰がこれをやってるの？</font><font style="vertical-align: inherit;">メモリ0.5 GBから取得され、スワップされたプロセス。</font><font style="vertical-align: inherit;">その代わりに、疑わしい2つのPythonプロセスがありました。これらは、コマンドラインとして表示できます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/8y/ej/uk/8yejuk2y3eeswlw7astqbiaaste.jpeg"><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ATOPは美しいです、私たちはそれを常に使用しています。</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">お持ちでない方は是非ご利用ください。</font><font style="vertical-align: inherit;">ドライブを恐れないでください。ATOPは、5秒ごとに1日あたり200〜300 MBしか消費しません。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">malloc HTTP</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
バハマと大きな事件には、名前を付けます。 MTOP HTTPと呼ばれるATOPに関連する1つの楽しいバグがあります。 ATOPとstraceでデビューしました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちはどこでもRPCとしてThriftを使用しています。パーサーの初期のバージョンでは、次のように機能する驚くべきバグがありました。最初の4バイトがデータのサイズであるメッセージが到着し、次にデータ自体、および最初のバイトが次のメッセージに追加されました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、Thriftサービスに移動するのではなく、プログラムの1つにアクセスした後、HTTPにアクセスし、「HTTP Bad the Request」という応答を受け取りました</font></font><code>HTTP/1.1 400</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
HTTPを取得し、malloc HTTPを使用してバイト数を割り当てた後。</font></font><br>
<br>
<pre><code class="bash hljs">Thrift message<font></font>
HTTP/1.1 400<font></font>
<span class="hljs-string">"HTTP"</span> == 0x48545450</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
大丈夫です、オーバーコミットしました。より多くのメモリを割り当てましょう！</font><font style="vertical-align: inherit;">mallocを使用して割り当てました。そこで書き込みと読み取りを行うまで、実際のメモリは提供されません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、それはありませんでした！</font><font style="vertical-align: inherit;">フォークしたい場合、フォークはエラーを返します-十分なメモリがありません。</font></font><br>
<br>
<pre><code class="bash hljs">malloc(<span class="hljs-string">"HTTP"</span>)<font></font>
pid = fork(); // errno = ENOMEM</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、なぜ、記憶がありますか？</font><font style="vertical-align: inherit;">マニュアルを理解すると、すべてが非常にシンプルであることがわかりました。現在のオーバーコミット構成は、それが魔法のヒューリスティックであり、カーネル自体が多くの場合とそうでない場合を決定します。</font></font><br>
<br>
<pre><code class="bash hljs">malloc(<span class="hljs-string">"HTTP"</span>)<font></font>
pid = fork(); // errno = ENOMEM<font></font>
<font></font>
// 0: heuristic overcommit<font></font>
vm.overcommit_memory = 0</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
正常に機能するプロセスの場合、これは正常です。TBまでのmallocを選択できますが、新しいプロセスの場合-いいえ。</font><font style="vertical-align: inherit;">そして、私たちの監視の一部は、メインプロセスがデータ収集用の小さなスクリプトを分岐したという事実に関連しています。</font><font style="vertical-align: inherit;">その結果、フォークできなくなったため、監視部分が故障しました。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FB303</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
FB303は私たちの基本的な監視システムです。</font><font style="vertical-align: inherit;">それは1982年の標準的なバスシンセサイザーにちなんで名付けられました。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/t2/x3/f4/t2x3f4of3j794hnfskzti5lk3va.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
原理は単純なので、それでも機能します。各サービスはThrift getCountersインターフェースを実装します。</font></font><br>
<br>
<pre><code class="php hljs">Service FacebookService {<font></font>
    map&lt;<span class="hljs-keyword">string</span>, i64&gt; getCounters()<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実際、彼はそれを実装していません。ライブラリはすでに作成されているため、すべてがコード</font></font><code>increment</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">またはで</font><font style="vertical-align: inherit;">行われます</font></font><code>set</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="php hljs">incrementCounter(<span class="hljs-keyword">string</span>&amp; key);<font></font>
<font></font>
setCounter(<span class="hljs-keyword">string</span>&amp; key, int64_t value);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その結果、各サービスは、Service Discoveryに登録されているポートのカウンターをエクスポートします。以下は、ニュースフィードを生成し、約5.5千のペア（文字列、数値）をエクスポートするマシンの例です。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/sl/sb/fj/slsbfj9kapkaqsi3quo_do4q64a.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
各マシンは、すべてのサービスを通過するバイナリプロセスを実行し、これらのカウンターを収集してストレージに配置します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ストレージGUIの</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">外観です</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/sh/lt/li/shltlimradfvsovwo1vp1xzudmu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プロメテウスとグラファナに非常に似ていますが、違います。 GitHubでの最初のFB303エントリは2009年、Prometheusは2012年でした。これはFacebookのすべての「日曜大工」の説明です。オープンソースに通常のものがなかったときに行ったものです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
たとえば、カウンターの名前の検索があります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/vb/b3/ya/vbb3yabg-lhlypl1y7_zwf9dolw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
グラフ自体は次のようになります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/b7/td/lj/b7tdljhxpmw6d5rt1fpguoon3ru.jpeg"><br>
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">美しいグラフィックを投稿しているインナーグループの写真。</font></font></em><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
監視スタックとPrometheusおよびGrafanaの重要な違いは、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">データを永久に保存することです</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">私たちの監視はデータを再サンプリングし、2週間後は5分ごとに1ポイント、1年後は1時間ごとにポイントを取得します。</font><font style="vertical-align: inherit;">したがって、それらは多くを保存することができます。</font><font style="vertical-align: inherit;">これは自動的にはどこにも設定されません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、Facebookの監視機能について話す場合は、「</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">観察可能性」</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">という1つの英語の単語で説明し</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可観測性</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
「ブラックボックス」、「ホワイトボックス」、ガラス透明の「ボックス」があります。</font><font style="vertical-align: inherit;">これは、コードを作成するときに、選択的にではなく、ログで可能なすべてのものを書き込むことを意味します。</font><font style="vertical-align: inherit;">サンプリングはあらゆる場所で十分に調整されているため、ストレージ、カウンター、その他すべてのバックエンドは正常に機能します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同時に、すでに既存のカウンターにダッシュボードを構築できます。</font><font style="vertical-align: inherit;">これらのダッシュボードを検討する場合、これは10個のグラフのエンドポイントではなく、UIに移動してそこから可能なすべてのものを見つける最初のグラフです。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スキューバ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、可観測性の考え方のクライマックスです。これがELKスタックです。原則は同じです。特定のスキームなしでJSONで記述し、次に、</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、データの時系列、または10以上の視覚化オプション</font><font style="vertical-align: inherit;">の形式で要求し</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
スキューバは、毎秒数百ギガバイトのオーダーでログインします。 Elasticsearchではないため、すべてが非常に迅速に要求され、すべてが強力なマシンのメモリにあります。はい、お金は使われますが、それはなんと素晴らしいことでしょう。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
たとえば、Scuba UIの下では、最も人気のあるテーブルの1つが開かれ、すべてのThriftサービスのすべてのクライアントがログを書き込みます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/dj/ah/ad/djahadigvrtru4luney67766slw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
グラフは、最終的に、サービスで問題が発生したことを示しています。遅延を確認するには、カウンターのリストに移動し、遅延を選択して集計し、[Dive]をクリックします。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/m2/c-/y8/m2c-y8pfnqyrz4hivxhxyszwvnw.jpeg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
答えは2秒で届きます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/j6/ac/kg/j6ackggq0o7xk93vejg0yfbyrhi.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その瞬間に何かが起こり、遅延が大幅に増加したことがわかります。</font><font style="vertical-align: inherit;">詳細については、さまざまなパラメーターでグループ化できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そのようなテーブルは何百もあります。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">バイナリファイル、パッケージのバージョン、何百万台ものマシンで消費されるメモリの量を示す表。</font><font style="vertical-align: inherit;">各ホストで、1時間に1回PSが作成され、Scubaに送信されます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">すべてのdmesg、すべてのメモリダンプは他のテーブルに送信されます。</font><font style="vertical-align: inherit;">各マシンで10分ごとに1回Perfを実行しているため、カーネルにあるスタックトレースとグローバルCPUがロードできるものを把握しています。</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PHPデバッグ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Scubaは、コアPHPデバッグツールのバックエンドも提供します。何千人ものエンジニアがPHPコードを書いています。どういうわけか、悪いことからグローバルリポジトリを保存する必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
どのように機能しますか？ PHPは、各ログにスタックトレースも書き込みます。 Scuba（Elasticsearch）は、すべてのマシンのすべてのログからのスタックトレースに対応できません。ログをScubaに入れる前に、スタックトレースをハッシュに変換し、ハッシュでサンプリングして、それらのみを保存します。スタックトレース自体はMemcachedに送信されます。次に、内部ツールで、Memcachedから特定のスタックトレースを十分にすばやくプルできます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ch/w_/im/chw_im8wjuue2nolmyzgcfappnq.jpeg"><br>
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ログとスタックトレースからのハッシュグループによる視覚化。</font></font></em><font style="vertical-align: inherit;"><strong><font style="vertical-align: inherit;">パターンマッチング</font></strong></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
メソッドを使用してコードをデバッグします</font><font style="vertical-align: inherit;">。Scubaを開き、エラーグラフがどのように表示されるかを確認します。</font></font><strong><font style="vertical-align: inherit;"></font></strong><font style="vertical-align: inherit;"></font><br>
<br>
<img src="https://habrastorage.org/webt/nd/op/nx/ndopnxibxeidsb8cmyy0rokasjm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
LogViewに移動します。エラーは既にスタックトレースによってグループ化されています。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/yx/0f/t3/yx0ft3lf_mnoskzxba7oqw3wtai.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
スタックトレースがMemcachedから読み込まれ、同じ時刻に投稿された差分（PHPリポジトリでコミット）をすでに見つけてロールバックできます。</font><font style="vertical-align: inherit;">誰でもロールバックして私たちと一緒にコミットできます。これには権限は必要ありません。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/kh/eu/ck/kheuck1w2losbdhiyasysemlvnk.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ダッシュボード</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ダッシュボードで監視トピックを終了します。それらのいくつかはありません-3つのインジケーターのうち2つだけです。ダッシュボード自体はかなり珍しいです。彼についてもっとお話ししたいと思います。以下は、一連のグラフを含む標準的なダッシュボードです。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/kh/eu/ck/kheuck1w2losbdhiyasysemlvnk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
残念ながら、それは彼にとってそれほど単純ではありません。事実は、1つのグラフの紫色の線が、青い線が他のグラフの対応するサービスと同じサービスであり、別のグラフが1日と1か月にある場合があります。</font><font style="vertical-align: inherit;">オープンソースのJSライブラリ</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
である</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cubismに</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">基づくダッシュボードを使用します</font><font style="vertical-align: inherit;">。それはSquareで書かれ、Apacheライセンスの下でリリースされました。それらには、グラファイトとキューブのサポートが組み込まれています。しかし、拡張は簡単です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以下のダッシュボードは、1分あたり1ピクセルで1日を示しています。</font><font style="vertical-align: inherit;">各線は地域です：近くにあるデータセンター。</font><font style="vertical-align: inherit;">Facebookバックエンドが1秒あたりのバイト数で書き込むログの数を表示します。</font><font style="vertical-align: inherit;">以下は、アメリカのチームが日中に起こったことからすでに修正済みのものを確認するための注釈です。</font><font style="vertical-align: inherit;">この図で相関を探すのは簡単です。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/fx/3u/8f/fx3u8f42urcs2ernp8cu_gvxj6q.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以下はエラー数500です。左側の問題はユーザーにとって重要ではなく、明らかに中央の濃い緑色のストライプが好きではありませんでした。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jy/dp/g1/jydpg1dmhrcxiirkeba3dhmtxcs.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次は、99パーセンタイルレイテンシです。</font><font style="vertical-align: inherit;">同時に、上の図のように、レイテンシが低下していることがわかります。</font><font style="vertical-align: inherit;">エラーを返すために、多くの時間を費やす必要はありません。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/og/4w/it/og4witypnhr2n091yaiwzjqctsg.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使い方</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
120pxグラフでは、すべてが表示されます。ただし、これらの多くは1つのダッシュボードに配置できないため、30に絞り込みます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/48/-t/-2/48-t-2gfcbcmotwnkifz2tln_9u.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
残念ながら、ある種のボアコンストリクターを取得します。戻って、キュービズムがそれで何をするか見てみましょう。彼はチャートを4つの部分に分割します：高い、暗い、そして崩壊します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/zg/s-/48/zgs-48iqemvyyyyxuh1g949aoji.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これで前と同じスケジュールになりますが、すべてがはっきりと見えます。緑が濃いほど悪くなります。現在、何が起こっているかがより明確になっています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
左は波が上がったところを見ることができ、中央は濃い緑色で、すべてが非常に悪いです。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ql/0f/xu/ql0fxubdkifq0ax-mwhbn00ndxi.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
キュービズムはほんの始まりにすぎません。現在すべてが悪いかどうかを理解するために、視覚化に必要です。各テーブルには、すでに詳細なグラフを備えたダッシュボードがあります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/_p/zx/u-/_pzxu-sbu9xc5p2gpoyrekvbybc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
監視自体は、システムの状態を理解し、壊れた場合に応答するのに役立ちます。</font><font style="vertical-align: inherit;">Facebookでは、すべてのオンコールスタッフがすべてを修復できる必要があります。</font><font style="vertical-align: inherit;">それが明るく燃えれば、すべてがオンになりますが、特にシステム管理者の経験を持つ生産エンジニアは、問題をすばやく解決する方法を知っているためです。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Facebookが横たわっていたとき</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
時々事件が起こり、フェイスブックは嘘をつく。通常、人々はDDoSやハッカーの攻撃が原因でFacebookが嘘をついていると考えていますが、5年間でそれが起こったことはありません。その理由は常に私たちのエンジニアでした。それらは意図的ではありません。システムは非常に複雑で、待機しないと故障する可能性があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちはすべての主要なインシデントに名前を付け、将来間違いを繰り返さないように、それらについて言及し、それらを新参者に知らせるのが便利です。おかしな名前のチャンピオンは</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コール・コップス</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">事件</font><font style="vertical-align: inherit;">です。人々はロサンゼルスの警察に電話し、嘘をついていたのでFacebookを修復するように求めました。ロサンゼルス保安官はとてもうんざりしていて、「電話しないでください！」とつぶやきました。私たちはこれについて責任を負いません！」</font></font><br>
<br>
<img src="https://habrastorage.org/webt/4p/tl/nv/4ptlnvj0sppjmmmdt3zjowumd-u.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私が参加した私のお気に入りの事件は</font><strong><font style="vertical-align: inherit;">CAPSLOCK</font></strong><font style="vertical-align: inherit;">と呼ばれてい</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ました。</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。何かが起こり得ることを示しているという点で興味深いです。そして、これが起こったことです。それはobychnyyIPアドレスです</font></font><code>fd3b:5679:92eb:9ce4::1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
FacebookはChefを使用してOSをカスタマイズします。 Service Inventoryはホスト構成をデータベースに保存し、Chefはサービスから構成ファイルを受け取ります。サービスのバージョンが変更されると、データベースからIPアドレスをすぐにMySQL形式で読み取り、それらをファイルに入れ始めました。新しい住所は大文字で書かれています</font></font><code>FD3B:5679:92EB:9CE4::1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Shefは新しいファイルを見て、バイナリ形式ではなく文字列と比較するため、IPアドレスが「変更された」ことを確認します。 IPアドレスは「新規」です。つまり、インターフェースを下げて、インターフェースを上げる必要があります。 15分間で数百万台の車すべてで、インターフェースが上下しました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それは大丈夫だと思われるでしょう-ネットワークがいくつかのマシン上にある間に容量が減少しました。</font><font style="vertical-align: inherit;">しかし、カスタムネットワークカードのネットワークドライバーに突然バグが発生しました。起動時に、0.5 GBの順次物理メモリが必要でした。</font><font style="vertical-align: inherit;">キャッシュマシンでは、インターフェイスを下げたり上げたりしたときに、これらの0.5 GBが消えました。</font><font style="vertical-align: inherit;">したがって、キャッシュマシンでは、ネットワークインターフェイスがダウンして上昇しなくなり、キャッシュなしでは何も機能しません。</font><font style="vertical-align: inherit;">これらのマシンを手で座って再起動しました。</font><font style="vertical-align: inherit;">楽しかった。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">インシデントマネージャーポータル</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Facebookが「燃える」とき、「消防隊」の仕事を整理する必要があります。最も重要なのは、燃やす場所を理解することです。巨大な会社では、ある場所で「燃える臭い」がすることがありますが、問題は別の場所にあります。</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Incident Manager Portal</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と呼ばれるUIツールは、これを支援します</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">制作エンジニアが作成し、誰でも利用できます。</font><font style="vertical-align: inherit;">何かが発生するとすぐに、名前、冒頭、説明などのインシデントが発生します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/hj/px/sm/hjpxsmys_lbno7lkm9r9osacq7o.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
特別に訓練された人物、インシデントマネージャーオンコール（IMOC）がいます。</font><font style="vertical-align: inherit;">これは恒久的な地位ではなく、マネージャーは定期的に交代します。</font><font style="vertical-align: inherit;">大規模な火災が発生した場合、IMOCは修理のために人を組織し調整しますが、自分で修理する必要はありません。</font><font style="vertical-align: inherit;">危険度の高いインシデントが作成されるとすぐに、IMOCはSMSを受信し、すべての整理を支援し始めます。</font><font style="vertical-align: inherit;">大規模なシステムでは、そのような人々を排除することはできません。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">防止</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Facebookはそれほど一般的ではありません。</font><font style="vertical-align: inherit;">ほとんどの場合、火を消したり、キャッシュマシンを再起動したりすることはありませんが、事前にバグを修正し、可能であれば全員に一度に修正します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
「キューの問題」を見つけて修正したら。</font><font style="vertical-align: inherit;">特に小規模なサービスでは、事前にスロットルが実装されていないため、リクエスト数は50％増加し、エラーは100％増加します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
いくつかのサービスの例を見つけ、おおまかに動作モデルを定義しました。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通常の負荷では、要求が到着し、処理されてクライアントに返されます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">負荷が高い場合、要求を処理するためのすべてのスレッドがビジーであるため、要求はキューで待機しています。</font><font style="vertical-align: inherit;">遅延は増加していますが、これまでのところすべてが順調です。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ラインが成長し、負荷が増加しています。</font><font style="vertical-align: inherit;">ある時点で、サーバーがクライアントで実行するすべての処理は応答タイムアウトで終了し、クライアントはエラーでフォールアウトします。</font><font style="vertical-align: inherit;">この時点で、サーバーの結果は単純に破棄できます。</font></font></li>
</ul><br>
<img src="https://habrastorage.org/webt/0b/c1/b1/0bc1b11xgg49wz266m-tvoximls.jpeg"><br>
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クライアントのタイムアウトは赤で強調表示されます。</font></font></em><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そしてクライアントは再び繰り返す！</font><font style="vertical-align: inherit;">私たちが実行するすべてのリクエストはゴミ箱に捨てられ、誰もそれを必要としないことがわかりました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
誰もが一度にこの問題を解決する方法は？</font><font style="vertical-align: inherit;">キューのタイムアウト制限を導入します。</font><font style="vertical-align: inherit;">リクエストが予想以上にキューにある場合は、それを破棄してサーバーで処理しないため、CPUを浪費しません。</font><font style="vertical-align: inherit;">正直なゲームです。処理できないものはすべて捨て、処理できるものはすべて捨てます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この制限により、負荷を最大値より50％増加させながら、要求の66％を処理し、エラーの33％のみを受け取ることが可能になりました。</font><font style="vertical-align: inherit;">Dispatchのフレームワークの開発者はこれをサーバー側に実装し、私たち、生産エンジニアはすべての人のキューに100ミリ秒のタイムアウトを穏やかに設定しました。</font><font style="vertical-align: inherit;">そのため、すべてのサービスはすぐに基本的なスロットルを安くしました。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ツール</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SREのイデオロギーによれば、大量の車、多数のサービスがあり、自分の手では何もできない場合は、自動化する必要があります。</font><font style="vertical-align: inherit;">したがって、半分の時間でコードを記述してツールを構築できます。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">システムに</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">キュービズム</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">統合</font><font style="vertical-align: inherit;">しました。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FBARは来て修理する「働き者」なので、壊れた車1台を心配する必要はありません。</font><font style="vertical-align: inherit;">これはFBARの主要なタスクですが、現在はさらに多くのタスクがあります。</font></font></li>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Coredumper。2</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">人の同僚と共同で作成しました</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">すべてのマシンのコアダンプを監視し、すべてのホスト情報（それがどこにあるか、どのサイズを見つけるかなど）を含むスタックトレースとともに1か所にドロップします。</font><font style="vertical-align: inherit;">ただし、最も重要なのは、BPFプログラムを使用してGDBを起動しなくても、スタックトレースが無料で利用できることです。</font></font></li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">世論調査</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちがする最後のことは人々と話し、彼らにインタビューすることです。</font><font style="vertical-align: inherit;">これは非常に重要なことのようです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
有用な投票の1つは信頼性についてです。</font><font style="vertical-align: inherit;">すでに実行中のサービスについて、アンケートの主要な引用文で尋ねます。</font></font><br>
<blockquote><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「システムソフトウェアの主な責任は、実行を継続することです。</font><font style="vertical-align: inherit;">サービスの提供は、継続的な運用の有益な副作用と見なす必要があります»</font></font></em></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これは、システムの主な義務が継続して機能することであり、何らかのサービスを提供するという事実は追加のボーナスであることを意味します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
調査は中規模のサービスのみを対象としており、大規模なサービス自体は理解しています。</font><font style="vertical-align: inherit;">たとえば、アーキテクチャ、SLO、テストなどの基本的なことを尋ねるアンケートを行います。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「システムの負荷が10％になるとどうなりますか？」</font><font style="vertical-align: inherit;">人々が考えるとき、「しかし、本当に、何ですか？</font><font style="vertical-align: inherit;">-洞察が現れ、多くの人が彼らのシステムを支配しています。</font><font style="vertical-align: inherit;">以前は彼らはそれについて考えていませんでしたが、質問の後には理由があります。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「通常、サービスの問題に最初に気づくのは誰ですか-あなたまたはユーザーですか？」</font><font style="vertical-align: inherit;">開発者は、これがいつ起こったかを思い出し始め、「おそらくアラートを追加する必要があるかもしれません。」</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「あなたの最大のオンコールの痛みは何ですか？」</font><font style="vertical-align: inherit;">これは、開発者、特に新しい開発者にとっては珍しいことです。</font><font style="vertical-align: inherit;">彼らはすぐにこう言います。</font><font style="vertical-align: inherit;">それらをきれいにして、そうでないものを削除しましょう。」</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「リリースの頻度はどれくらいですか？」</font><font style="vertical-align: inherit;">最初に彼らは自分の手でそれをリリースしていることを思い出し、それから彼らは独自のカスタム展開を持っています。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アンケートにはコーディングがなく、標準化されており、6か月ごとに変更されます。</font><font style="vertical-align: inherit;">これは、2〜3週間で記入できる2ページのドキュメントです。</font><font style="vertical-align: inherit;">その後、2時間の集会を開催し、多くの苦痛に対する解決策を見つけます。</font><font style="vertical-align: inherit;">このシンプルなツールは私たちとうまく連携し、あなたを助けます。</font></font><br>
<br>
<blockquote>6-7         <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">Saint HighLoad++</a>,          .      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> </a>       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> </a>   (,   ,  ). <br>
   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a>       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">telegram-</a>  .   !</blockquote></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja489192/index.html">スマートエンジンは、FizTechの基本的な組織の中でFWCIランキングのトップ3に入りました</a></li>
<li><a href="../ja489194/index.html">OpenShiftがIT組織の組織構造をどのように変えるか。PaaSへの移行時の組織モデルの進化</a></li>
<li><a href="../ja489196/index.html">Magic Smoke：マイクロコントローラーとリニアレギュレータ</a></li>
<li><a href="../ja489198/index.html">Liquibaseを使って足を撃たない方法</a></li>
<li><a href="../ja489200/index.html">2020年にY Combinatorを探しているスタートアップ</a></li>
<li><a href="../ja489206/index.html">Patroniによるクラッシュストーリー、またはPostgreSQLクラスターを削除する方法</a></li>
<li><a href="../ja489208/index.html">オンライン取引のための仮想サーバー</a></li>
<li><a href="../ja489210/index.html">Linuxコードのパフォーマンステストと例</a></li>
<li><a href="../ja489212/index.html">1C-Bitrixは、個人データの送信を要求することにより、ニュースレターの配信停止を防ぎます</a></li>
<li><a href="../ja489214/index.html">iOSでローカリゼーションをテストするための最新のアプローチ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>