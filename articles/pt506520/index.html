<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>📫 🎿 ☝🏿 Conferência DEVOXX UK. Escolha uma estrutura: Docker Swarm, Kubernetes ou Mesos. Parte 1 🌏 🤟🏾 🐐</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Docker Swarm, Kubernetes e Mesos são as estruturas de orquestração de contêineres mais populares. Em seu discurso, Arun Gupta compara os seguintes asp...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Conferência DEVOXX UK. Escolha uma estrutura: Docker Swarm, Kubernetes ou Mesos. Parte 1</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/506520/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Docker Swarm, Kubernetes e Mesos são as estruturas de orquestração de contêineres mais populares. </font><font style="vertical-align: inherit;">Em seu discurso, Arun Gupta compara os seguintes aspectos do trabalho de Docker, Swarm e Kubernetes:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Desenvolvimento local.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Recursos de implantação</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aplicativos multicontainer.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Descoberta de serviço descoberta de serviço.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Serviço de dimensionamento.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Atribuições executadas uma vez.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Integração com o Maven.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Uma atualização "contínua".</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Criando um cluster de banco de dados do Couchbase.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como resultado, você terá uma idéia clara do que cada instrumento de orquestração tem a oferecer e aprenderá como usar essas plataformas de maneira eficaz. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Arun Gupta é o principal tecnólogo de produtos de código aberto da Amazon Web Services que desenvolve as comunidades de desenvolvedores Sun, Oracle, Red Hat e Couchbase há mais de 10 anos. Ele tem uma vasta experiência trabalhando em liderar equipes multifuncionais envolvidas no desenvolvimento e implementação de campanhas e programas de marketing. Ele liderou a equipe de engenharia da Sun, é um dos fundadores da equipe Java EE e criador da filial americana do Devoxx4Kids. Arun Gupta é autor de mais de 2 mil posts em blogs de TI e fez apresentações em mais de 40 países.</font></font><a name="habracut"></a><br>
<br>
<img src="https://habrastorage.org/webt/uu/h0/ce/uuh0ceuils4gahmm6ajpuwvqhr0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Boa tarde, eu sei que esta é a última apresentação antes do jantar, mas espero que você tenha um pouco mais de energia do café da manhã para me ouvir. Meu nome é Arun Gupta, trabalho para a AWS, sobre a qual falaremos agora, além de Docker e Kubernetes, para que você possa escolher a estrutura mais adequada para si. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eu sou o capitão da Docker, da qual tenho muito orgulho; existem apenas 70 pessoas em todo o mundo reconhecidas pela Docker nesse status. Começamos com a versão mais antiga do sistema 0.3, escrevi um livro sobre o Docker, por isso sei algo sobre essa tecnologia. Além disso, sou estrela do rock do JavaOne há 4 anos seguidos, por isso entendo o assunto. Eu sempre aprendo com meu público e troco dicas úteis com ela, então obrigado por participar.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Começamos nossa análise do problema do mais alto nível. Este não é o Docker 1.01, portanto, não espere que eu ensine o básico. Levante as mãos, quem está usando o Docker de qualquer forma hoje?</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gg/yu/pf/ggyupfn4lcwxr_apfsttjzi_afs.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Excelente, quase 90% dos presentes. Portanto, globalmente, o fluxo de trabalho do Docker consiste em 3 componentes principais: a parte do cliente, o host do Docker e o registro do Docker. Suponha que você queira executar um contêiner para uma imagem específica. Você diz ao cliente: "Faça o download desta imagem e inicie os contêineres!". Para se comunicar com o host, o cliente usa os comandos builder build, docker pull e docker run. Ele dá um comando ao host e diz: "Sim, não tenho essa imagem!". Por padrão, ele acessa o registro do hub do Docker em hubdocker.com, baixa a imagem desejada, a salva e a executa em contêineres. Nesse sentido, o cliente não tem absolutamente nenhum estado fora do local de trabalho, simplesmente envia um comando como CLI por cabo, vai para o host como uma API REST e o host, entendendo os requisitos da API,baixa uma imagem de um hub ou de um registro automatizado de contêineres do Amazon ECR Docker e inicia os contêineres com base nessa imagem. Este é um estado completamente estático, gerenciado apenas no host. Nesse caso, temos um host, mas é fácil o suficiente usar uma solução de vários hosts.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
É exatamente para isso que serve a estrutura de orquestração - você não deseja criar um sistema de aplicativos distribuídos em um único host, porque esse é o ponto mais fraco que, em caso de falha, derrubará todo o sistema. Você deseja distribuir a tarefa entre vários hosts para evitar uma falha global. Por exemplo, você deseja executar um aplicativo Java que usa um servidor de aplicativos, servidor de banco de dados, armazenamento em cache, muitos componentes diferentes. Além disso, muitas vezes requer a operação simultânea de várias instâncias desse aplicativo, pois um aplicativo Java típico é um aplicativo com vários contêineres que usa contêineres em vários hosts. Portanto, você precisa de uma estrutura de orquestração, não apenas para planejar a conteinerização, mas também para criar a capacidade de gerenciar seu cluster,ciclos de vida e outras operações necessárias.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nesta apresentação, mostrarei como as duas principais ferramentas de orquestração de aplicativos diferem - Docker e Kubernetes, seus recursos, os prós e os contras de usá-lo. Considerarei essas questões do ponto de vista de um desenvolvedor que começa a criar qualquer aplicativo com um conceito fundamental e chave. Esse conceito inclui componentes como um cluster, um único contêiner, muitos contêineres, sua interação entre si, descoberta de serviços (ou catalogação de serviços que lhes permitem conhecer um ao outro), balanceamento de carga, armazenamento persistente destinado a contêineres com estado , bem como o conhecimento de como o desenvolvimento local será realizado.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/zf/zs/wd/zfzswdthfine382s9vbnihugv8a.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Da perspectiva do desenvolvedor, passaremos para a perspectiva de operações, para o lado arquitetural do sistema: como multiplicar o nó principal, como o algoritmo do planejador deve funcionar ao trabalhar em vários hosts, quais são as regras e restrições com as quais eu posso executar o contêiner em um host específico, como posso executar atualizações de monitoramento e rolagem, como usar o suporte à nuvem. Hoje vamos falar sobre tudo isso.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vamos começar com o Docker Swarm - esse é um dos recursos do Docker Engine, começando com a versão 1.2, uma ferramenta de cluster padrão. Ele converte um conjunto de hosts do Docker em um único cluster sequencial do Swarm. Se você acessar o docker.com, poderá fazer o download de uma das duas edições: Community Edition ou Enterprise Edition (hoje essas versões são denominadas Stable e Edge). A primeira versão é o que eu uso, é estável e atualizada a cada 3 meses, ao contrário da versão mais recente do Edge, que é atualizada a cada mês. Estou usando a versão do Docker CE para Mac. Portanto, ao fazer o download do Docker CE no meu computador, durante a instalação, marquei o Swarm contido nele e, depois disso, posso começar imediatamente a criar clusters, orquestrar e planejar contêineres.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Observe que o módulo Docker Swarm requer conexão com o host; portanto, ao usar uma placa de rede com um sistema com vários hosts, você precisa ouvir um endereço específico do host do Docker usando o comando docker swarm unit - - listen-addr: 2377. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um ícone amarelo indica um único nó mestre por padrão. O assistente me fornece um token de controle de token de trabalhador, eu o pego e o uso para conectar um novo nó de trabalho, uma máquina física ou virtual, não importa.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/2s/ul/zh/2sulzhylgnuqbsym4avabufpyss.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este token indica que este nó deve ingressar no mestre original. Usando o token de trabalho, posso formar meu próprio cluster do Docker. Portanto, usando o Docker, é muito fácil criar um cluster de vários nós. O próximo slide mostra um cluster de um nó principal e 5 nós de trabalho. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ul/pl/df/ulpldfpatcvyh1r_ielat4fsycg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Com a mesma facilidade, é possível criar clusters com vários nós principais - o nó principal primário e o nó principal secundário, vinculando-os aos nós de trabalho.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/0t/nv/sx/0tnvsxqge_pm8lwagqikx2at8cg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No lado do cliente, quando você envia uma solicitação ao mestre secundário, ele é redirecionado como proxy para o mestre primário e esse já executa a solicitação, distribuindo a carga entre os nós de trabalho. Por padrão, seu contêiner também pode funcionar em um nó do gerenciador, mas ao criar um cluster, os contêineres devem ser colocados apenas em nós de trabalho, e o gerente administrará apenas o cluster. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O conceito básico a seguir, um cluster, significa uma arquitetura de vários nós principais e vários nós de trabalho nos quais os contêineres estão em execução. Este é um esquema estritamente consistente, replicado com base no algoritmo de consenso Raft, com a velocidade mais alta devido à leitura da RAM.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/fe/9m/7t/fe9m7tme58vndrflduiu7al5aba.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eu recomendo o uso de um modelo com o protocolo Raft, porque se você dividir as redes, o sistema não precisará pensar em quem agora desempenha o papel de assistente, porque com o Raft, a seleção será feita automaticamente. No nível inferior, existem nós de trabalho do Swarm que se comunicam através do protocolo Gossip. Você vê que os contêineres vermelhos funcionam em 3 nós e os contêineres verdes em dois nós - isso sugere que o Swarm Worker permite iniciar e executar várias tarefas diferentes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como o conceito de Serviço Replicado do Docker funciona? Como sou desenvolvedor Java, nesse caso, uso o contêiner WildFly.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/sh/pa/ve/shpave-t3ap10-irlpc0lclp1ss.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para fazer isso, na linha de comando do Docker, insiro o serviço docker de comandos create - - replicas 3 - - web jboss / wildfly, indicando o número de réplicas necessárias, o nome do serviço é web e adiciono uma imagem de wildfly. Esta imagem será carregada nos 3 hosts do Docker e inicie o contêiner. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Outro conceito importante é a falha do nó Node Failure. O que acontece?</font></font><br>
<br>
<img src="https://habrastorage.org/webt/cb/li/ez/cbliezm9xg3zuwwjdw0ps8-o6ok.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O Docker vê que o estado atual do sistema não corresponde ao desejado, um nó caiu do cluster, o que significa que é necessário transferir contêineres desse nó para outro host. </font><font style="vertical-align: inherit;">Ou seja, se você declarou a necessidade de três réplicas funcionarem, o Docker garantirá que essas três réplicas existam sob quaisquer condições. </font><font style="vertical-align: inherit;">Uma situação pode ocorrer quando um contêiner falha em um nó de trabalho. </font><font style="vertical-align: inherit;">Semelhante ao caso anterior, o Docker controla o número especificado de contêineres e, se diminuir, é ativado um agendador que restaura imediatamente o contêiner, levando o estado atual do cluster ao estado desejado. </font><font style="vertical-align: inherit;">Ou seja, se você anunciou três réplicas, todas essas réplicas deverão funcionar a qualquer momento. </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conferência DEVOXX UK. </font><font style="vertical-align: inherit;">Escolha uma estrutura: Docker Swarm, Kubernetes ou Mesos. </font><font style="vertical-align: inherit;">Parte 2</font></font></a><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/1dgUXNVQS5o" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um pouco de publicidade :)</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Obrigado por ficar com a gente. Você gosta dos nossos artigos? Deseja ver materiais mais interessantes? Ajude-nos fazendo um pedido ou recomendando aos seus amigos o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VPS na nuvem para desenvolvedores a partir de US $ 4,99</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , um </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">analógico exclusivo de servidores </font></font></b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">básicos </font></font></a><font style="vertical-align: inherit;"><b><font style="vertical-align: inherit;">que foi inventado por nós para você: </font></b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">Toda a verdade sobre o VPS (KVM) E5-2697 v3 (6 núcleos) 10GB DDR4 480GB SSD 1Gbps de 10GB de US $ 19 ou como dividir o servidor?</font></a><font style="vertical-align: inherit;"> (as opções estão disponíveis com RAID1 e RAID10, até 24 núcleos e até 40GB DDR4). </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dell R730xd 2 vezes mais barato no data center Equinix Tier IV em Amsterdã?</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Somente nós temos </font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 TVs Intel TetraDeca-Core Xeon 2x E5-2697v3 2.6GHz 14C 64GB DDR4 4x960GB SSD 1Gbps 100 TV a partir de US $ 199</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> na Holanda!</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dell R420 - 2x E5-2430 2.2Ghz 6C 128GB DDR3 2x960GB SSD 1Gbps 100TB - de US $ 99! </font></font></b></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Leia sobre</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Como criar um prédio de infraestrutura. </font><font style="vertical-align: inherit;">classe c usando servidores Dell R730xd E5-2650 v4 que custam 9.000 euros por um centavo?</font></font></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt506498/index.html">Recursos para estudar finanças em inglês (EUA) ou Como avaliar uma empresa</a></li>
<li><a href="../pt506506/index.html">Mapeando dados json para uma estrutura C ++</a></li>
<li><a href="../pt506508/index.html">Desenvolvimento orientado por redes: "O sono é uma parte importante do trabalho de um programador"</a></li>
<li><a href="../pt506510/index.html">Burnout [% state employee%] = fator (talvez <mercado_economia>)</a></li>
<li><a href="../pt506516/index.html">Salve a senha: uma implementação fabulosa do esquema de compartilhamento secreto de Shamir em Python</a></li>
<li><a href="../pt506524/index.html">HackTheBox. Passo a passo Monteverde. SMB bruto e LPE por meio de administradores do Azure</a></li>
<li><a href="../pt506530/index.html">Como escolher um no-break</a></li>
<li><a href="../pt506532/index.html">Através dos espinhos para as estrelas: crie um dispositivo para apontar um ponteiro laser para qualquer objeto celeste</a></li>
<li><a href="../pt506538/index.html">Como a Wikipedia pode revelar seus dados pessoais e como eles realmente os usam</a></li>
<li><a href="../pt506542/index.html">Gravação de vídeo DIY na nuvem</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>