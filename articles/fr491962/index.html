<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üòâ üìß ‚öõÔ∏è VPN killer. Acc√®s √† distance appropri√© aux serveurs de combat üëçüèø ü•´ ‚ôäÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="L'opinion exprim√©e dans cet article est l'opinion personnelle de l'auteur. Il souligne que cela peut ne pas co√Øncider avec l'avis de son employeur, de...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>VPN killer. Acc√®s √† distance appropri√© aux serveurs de combat</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/vdsina/blog/491962/"><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'opinion exprim√©e dans cet article est l'opinion personnelle de l'auteur. </font><font style="vertical-align: inherit;">Il souligne que cela peut ne pas co√Øncider avec l'avis de son employeur, de ses sup√©rieurs et du service de s√©curit√©. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'une des choses les plus cool de notre entreprise en termes d'infrastructure est la fa√ßon dont nous mettons en ≈ìuvre l'acc√®s √† distance. </font><font style="vertical-align: inherit;">C'est juste une magie super-m√©ga-prot√©g√©e. </font><font style="vertical-align: inherit;">J'ai parl√© avec beaucoup de mes coll√®gues agents de s√©curit√© et auditeurs, et il semble que nous ayons accidentellement invent√© une toute nouvelle histoire en m√©langeant des solutions commerciales et nos logiciels. </font><font style="vertical-align: inherit;">Et donc, j'ai pens√©, il serait int√©ressant de plonger profond√©ment dans les d√©tails techniques de la fa√ßon dont l'industrie fonctionne avec des solutions d'acc√®s √† distance obsol√®tes et comment nous les mettons en ≈ìuvre.</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bon VPN personne ne conseillera pas</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je vais commencer par une d√©claration forte: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tous les VPN sont des ordures</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le VPN, comme d'autres technologies num√©riques, peut √™tre configur√© de sorte que s'il est pirat√©, le monde ne s'arr√™tera pas. </font><font style="vertical-align: inherit;">Cependant, personne ne fait √ßa ... mais th√©oriquement ils peuvent! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans 99,95% des cas, le VPN est configur√© pour:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cr√©ation d'un pont r√©seau entre l'appareil (ordinateur portable ou autre serveur)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">... et un plus grand r√©seau de serveurs (par exemple, dans le cloud ou </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sur site</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">... et Internet, prot√©g√©s par une couche suppl√©mentaire de cryptage</font></font></li>
</ol><br>
<img src="https://habrastorage.org/webt/jx/nd/df/jxnddfmvj_3nujlmacixtdz3nbq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ce n'est pas une bonne id√©e. Imaginez si un virus s'est install√© sur votre ordinateur portable et que vous vous connectez via VPN √† un r√©seau de serveurs de combat? Ta Dam! Le virus dispose d√©sormais d'un acc√®s LAN √† votre production. Qu'y a-t-il √† l'√©chappement? Tristesse. Beaucoup de tristesse. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
D'accord, disons que le cas du virus est tir√© par les cheveux. Mais qu'en est-il du fait qu'un pirate peut infiltrer le VPN lui-m√™me, par exemple, en utilisant une vuln√©rabilit√© √† l'int√©rieur de l'appareil ou du logiciel sur lequel le VPN fonctionne? Donc, apr√®s avoir p√©n√©tr√© directement dans le r√©seau cible? C'est une affaire s√©rieuse et loin d'√™tre th√©oris√©e. Vous pouvez en savoir plus dans l'article sur la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fa√ßon dont Heartbleed a √©t√© utilis√© pour capturer un VPN</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √† l'aide du vecteur d'attaque, dont j'ai averti directement </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dans mon blog</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il n'y a pas si longtemps, une vague de vuln√©rabilit√©s VPN a balay√© le monde entier, qui ont √©t√© imm√©diatement </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">utilis√©es par les cybercriminels</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pour acc√©der aux r√©seaux cibles. </font><font style="vertical-align: inherit;">Mais ce n'est pas surprenant, non? </font><font style="vertical-align: inherit;">Ces syst√®mes ¬´regardent¬ª directement dans le r√©seau, sans aucun autre m√©canisme de protection devant eux. </font><font style="vertical-align: inherit;">Les correctifs et les correctifs ne sont g√©n√©ralement pas appliqu√©s automatiquement et impliquent des m√©canismes propri√©taires contr√¥l√©s par des logiciels propri√©taires fonctionnant sur un syst√®me d'exploitation propri√©taire. </font><font style="vertical-align: inherit;">Eh bien, bonne chance l√†-bas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Est-il difficile de trouver ces appareils VPN? </font><font style="vertical-align: inherit;">Avant d'√©crire cet article, je n'avais jamais essay√©, donc je ne savais pas avec certitude. </font><font style="vertical-align: inherit;">Environ une demi-heure dans </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Shodan.io</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et s'il vous pla√Æt - quelques r√©sultats majeurs de la sortie:</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Thomson Reuters</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est une entreprise de 41 milliards de dollars avec 26 000 employ√©s, dont la moiti√© provient des services financiers.</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SAP Concur</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est un service de gestion de voyages, le casser donnerait un tas de donn√©es personnelles et de paiement de toutes sortes.</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Assurance progressive</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - donn√©es personnelles et informations m√©dicales personnelles, associ√©es √† certaines donn√©es de paiement.</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chevron Phillips Chemical</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - le nom parle de lui-m√™me.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eh bien, ce n'est probablement pas tr√®s bon. </font><font style="vertical-align: inherit;">Si ces choses sont si faciles √† trouver, cela ne semble pas √™tre la solution parfaite pour les mettre en ligne. </font><font style="vertical-align: inherit;">Avons-nous un autre choix?</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Z√©ro confiance</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zero Trust [litt√©ralement: ¬´zero trust¬ª] - cela signifie essentiellement que vous autorisez chaque connexion, et ne supposez pas que certaines d'entre elles sont fiables car elles sont d√©j√† √† l'int√©rieur de votre r√©seau. </font><font style="vertical-align: inherit;">Si vous voulez mieux comprendre ce terme et repenser votre approche des affaires, lisez </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cet article sur Network World</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (d√©sol√© pour un autre auto-RP √©hont√©). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons achet√© la </font><font style="vertical-align: inherit;">solution </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Okta Advanced Server Access</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (OASA) pour introduire l'autorisation Zero-Trust sur les serveurs de combat. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OASA est</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> cool pour trois raisons:</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. Ceci est juste un aper√ßu de la configuration d'OpenSSH sur les st√©ro√Ødes</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sous le capot, la plateforme OASA est un d√©ploiement bien g√©r√© d'OpenSSH (la m√™me commande ssh dans votre console). </font><font style="vertical-align: inherit;">Et OpenSSH est une solution d'administration √† distance extr√™mement bien test√©e et s√©curis√©e. </font><font style="vertical-align: inherit;">Soit dit en passant, depuis 2003, OpenSSH n'a pas eu une seule vuln√©rabilit√© qui pourrait conduire √† un acc√®s √† distance non autoris√© dans la configuration standard. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les points d'entr√©e dans ce sch√©ma sont des instances r√©guli√®res d'Amazon Linux 2. EC2. Ainsi, la zone d'attaque est extr√™mement petite. </font><font style="vertical-align: inherit;">N'oubliez pas: l'un des principaux probl√®mes li√©s √† l'utilisation d'un VPN est la configuration logicielle / OS propri√©taire qui emp√™che les correctifs automatiques. </font><font style="vertical-align: inherit;">La possibilit√© de mettre √† jour nos points d'entr√©e r√©seau avec le reste de l'infrastructure est une grande victoire.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. Il n'y a pas de ponts r√©seau</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme je l'ai mentionn√© ci-dessus, la plupart des VPN sont configur√©s pour cr√©er un pont r√©seau entre un p√©riph√©rique r√©seau, tel qu'un ordinateur portable, et un r√©seau de serveurs sur Internet. Un de mes points les plus douloureux dans les VPN est qu'ils interceptent tout votre trafic r√©seau. Vous pouvez, bien s√ªr, reconfigurer pour un comportement diff√©rent, mais nos clients et les protocoles de s√©curit√© </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NIST 800-53 SC-7 (7) en ont</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> g√©n√©ralement besoin. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C'est un bon exemple de la fa√ßon dont certaines mesures de s√©curit√© sont loin derri√®re le d√©veloppement de l'industrie. Dans le monde de la vieille √©cole, le VPN pourrait √™tre la seule couche pour crypter le trafic. Les auditeurs pensent parfois que sans protection VPN, vous enverrez vos donn√©es via des canaux non crypt√©s.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Heureusement, il y a une meilleure fa√ßon. Dans le mod√®le OASA, une connexion est √©tablie individuellement entre vous et le serveur. Par exemple, en r√©ponse √† la demande ¬´Je souhaite acc√©der √† l'instance EC2 i-028d62efa6f0b36b5¬ª, votre syst√®me se connecte au point d'entr√©e du r√©seau, puis au serveur cible. OASA prot√®ge √©galement ces connexions en √©mettant des certificats clients de dix minutes apr√®s la premi√®re v√©rification de vos donn√©es via l' </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">authentification unique</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , puis en v√©rifiant que vous √™tes sur l'appareil de confiance pr√©vu (et v√©rifi√©).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il y a peu de libert√© pour parcourir le net. </font><font style="vertical-align: inherit;">Un administrateur peut entrer un point d'entr√©e r√©seau et transf√©rer des ports vers une autre destination, mais cette fonction est d√©sactiv√©e par d√©faut et doit √™tre explicitement demand√©e lors de l'√©tablissement d'une connexion. </font><font style="vertical-align: inherit;">Et la meilleure partie est que personne ne m'oblige √† transporter tout le trafic via le cloud priv√© virtuel, car cela ne s'appelle pas un ¬´VPN¬ª.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. Acc√®s r√©seau d√©di√© et IP al√©atoire</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ces points d'entr√©e r√©seau sont d√©ploy√©s s√©par√©ment pour chaque cloud priv√© virtuel (par exemple, un pour la production, un pour le transfert, un pour le d√©veloppement, etc.). De plus, chacun d'eux est √©troitement surveill√© par notre solution de s√©curit√©, qui enregistre toutes les activit√©s et filtre le trafic. Si le cracker est √† l'int√©rieur de l'un des points d'entr√©e, quelque chose ne fonctionnera pas non plus. Dans toutes les situations, notre syst√®me de s√©curit√© ne permet pas d'acc√©der aux ressources prot√©g√©es simplement parce que vous √™tes d√©j√† dans le cloud priv√© virtuel.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un de mes m√©canismes de d√©fense pr√©f√©r√©s est apparu par accident. </font><font style="vertical-align: inherit;">Lorsque nous avons commenc√© √† configurer les points d'entr√©e, chacun √©tait configur√© pour une adresse IP statique √† partir d'AWS. </font><font style="vertical-align: inherit;">Assez rapidement, nous avons constat√© que ces adresses IP n'√©taient parfois pas li√©es aux instances EC2 au bon moment, ce qui pouvait conduire √† une auto-configuration OASA incorrecte. </font><font style="vertical-align: inherit;">Ayant connu les d√©lices d'une douzaine de correctifs diff√©rents en production, je ne pouvais pas le supporter et j'ai simplement supprim√© toute l'histoire des adresses IP statiques - et cela a fonctionn√©. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/8b/jb/bj/8bjbbj8qux60kjwmdjyqjihqgiw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
OASA a juste besoin d'une adresse IP accessible sur Internet; elle n'a pas besoin d'√™tre connue √† l'avance. </font><font style="vertical-align: inherit;">Lorsque le client est pr√™t √† √©tablir une connexion, un GUID unique est demand√©, √† l'aide duquel l'IP est d√©termin√©e:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Utilisateur: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">je veux me connecter pour me connecter √† vpc-99f2acff</font></font></i></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Application client OASA: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">J'ai d√©fini vpc-99f2acff comme serveur connu avec le GUID 25af5d4f-e657-4583-b0bd-beb1ca4f0c1f</font></font></i></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Serveur OASA: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">K 25af5d4f-e657-4583-b0bd-beb1ca4f0c1f accessible au 3.22.198.24, voici les certificats</font></font></i></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Application client OASA: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">certificats install√©s, connexion √† 3.22.198.24 via SSH ...</font></font></i></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cela signifie que chaque instance de notre infrastructure de point d'entr√©e (un article </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s√©par√©</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √† ce sujet √† votre attention) est livr√©e avec un tout nouvel ensemble d'adresses IP. </font><font style="vertical-align: inherit;">Ainsi, les pirates al√©atoires devront rechercher une adresse IP parmi des dizaines de millions, et leur nombre augmente chaque jour. </font><font style="vertical-align: inherit;">Malheureusement pour eux, cette recherche est compl√®tement vaine, gr√¢ce √† ...</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Frappe de port d'entreprise</font></font></h2><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Port knocking</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> [litt√©ralement: frapper sur les ports] est une chose que, en principe, personne n'utilise dans le monde r√©el, mais qui est tr√®s amusant √† configurer. En bref, le d√©tournement de port est une s√©quence de ¬´bosses¬ª vers divers ports de r√©seau ferm√©s, et si la s√©quence se r√©p√®te correctement, le ¬´vrai¬ª port s'ouvre sur votre IP. √âl√©gant, mais peu pratique dans de vrais grands projets. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai √©t√© inspir√© par l'id√©e et j'ai pens√© comment am√©liorer l'id√©e. La solution que j'appelle </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Enterprise Port Knocking √©tait donc</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> n√©e </font><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je voulais cr√©er un m√©canisme qui garantirait la proximit√© de nos points d'entr√©e sur Internet, jusqu'√† ce que quelqu'un puisse y acc√©der. Ce m√©canisme √©tait cens√© √™tre facile √† utiliser, fiable et authentifi√© d'une mani√®re existante.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai esquiss√© l'architecture du m√©canisme et je l'ai accompagn√©e dans notre √©quipe d'ing√©nieurs incroyablement talentueuse. </font><font style="vertical-align: inherit;">Quelques semaines plus tard, nous avons commenc√©. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le service est assez simple et se d√©ploie en tant que fonction AWS Lambda, avec un acc√®s via l'AWS API Gateway (la joie d'une architecture sans serveur!) Pour une utilisation facile et fiable. </font><font style="vertical-align: inherit;">Le m√©canisme fonctionne comme ceci:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'utilisateur est authentifi√© avec succ√®s via SSO.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'application contourne les comptes AWS configur√©s √† la recherche d'un groupe de s√©curit√© sp√©cialement marqu√© (concept AWS pour les r√®gles de pare-feu)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'application met √† jour le groupe de s√©curit√©, permettant l'acc√®s √† l'adresse IP du demandeur. </font><font style="vertical-align: inherit;">Une r√®gle du groupe de s√©curit√© stocke √©galement l'horodatage d'ajout.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La t√¢che cron efface la liste des adresses IP autoris√©es √† chaque p√©riode de temps sp√©cifi√©e.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gr√¢ce √† cette situation, nous proposons d√©sormais une solution d'acc√®s √† distance totalement ferm√©e √† Internet et n√©cessitant une authentification √† deux facteurs via notre base de donn√©es utilisateurs </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">avant d'ouvrir le port dans le pare-feu</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Et c'est facile!</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je n'ai pas encore √©voqu√© la simplicit√© de fonctionnement de ces m√©canismes. </font><font style="vertical-align: inherit;">Je sais qu'il existe de nombreux composants, mais ensemble, ils cr√©ent une autorisation tr√®s simple:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Connectez-vous via SSO.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cliquez sur le lancement d'Enterprise Port Knocking dans le portail SSO.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans le terminal, √† l'aide de la commande SSH, sp√©cifiez la destination comme ID de l'instance EC2 cible. </font><font style="vertical-align: inherit;">Le syst√®me OASA est suffisamment intelligent pour d√©terminer le point d'entr√©e √† utiliser et tout le reste se produit automatiquement!</font></font></li>
</ol><br>
<img src="https://habrastorage.org/webt/p4/ho/t0/p4hot0sae_e-5bywuqqbwsc2juo.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'ensemble de ce syst√®me est une grande victoire pour notre infrastructure, pour notre respect de tous les accords de s√©curit√© et pour la s√©curit√© de nos clients. </font><font style="vertical-align: inherit;">Les utilisateurs appr√©cient vraiment la facilit√© de connexion √† nos serveurs, car vous n'avez pas besoin de passer par une authentification suppl√©mentaire ou de vous souvenir du VPN √† utiliser. </font><font style="vertical-align: inherit;">Et j'aime vraiment mon sommeil calme. </font><font style="vertical-align: inherit;">Tout le monde a gagn√© avec le nouveau mod√®le! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eh bien, sauf pour les pirates, bien s√ªr.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/9fa/cf4/a34/9facf4a348ef01048b4eb5e16ae66daa.png"></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr491946/index.html">Lois de programmation</a></li>
<li><a href="../fr491948/index.html">Les jetons de conception peuvent faire plus: cr√©er une source unique d'informations sur les composants de l'interface utilisateur</a></li>
<li><a href="../fr491956/index.html">Version Rust 1.42.0: mod√®les de tranche et messages de panique plus pratiques</a></li>
<li><a href="../fr491958/index.html">Guide de compression d'animation squelette</a></li>
<li><a href="../fr491960/index.html">Era quand il est difficile de se perdre</a></li>
<li><a href="../fr491964/index.html">Ex√©cution de code √† distance dans SMB v3: CVE-2020-0796</a></li>
<li><a href="../fr491974/index.html">Coronavirus: pourquoi vous devez agir d√®s maintenant</a></li>
<li><a href="../fr491976/index.html">Nous transformons l'√©conomie UNITAIRE pour une boutique ou une production en ligne</a></li>
<li><a href="../fr491980/index.html">Les avantages des entretiens. Option d√©veloppeur Flutter</a></li>
<li><a href="../fr491984/index.html">Airport Automation chez HEL</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>