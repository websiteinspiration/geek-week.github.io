<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üòå üßë‚Äçü§ù‚Äçüßë üéöÔ∏è No√ß√µes b√°sicas sobre diretivas de rede com o Calico üß¶ üòÄ üîñ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="O Calico Network Plugin fornece uma ampla variedade de pol√≠ticas de rede com uma sintaxe unificada para proteger hosts em hardware, m√°quinas virtuais ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>No√ß√µes b√°sicas sobre diretivas de rede com o Calico</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/nixys/blog/493282/"><img src="https://habrastorage.org/webt/ui/yk/5t/uiyk5t_l9nxqernjewtrtln6kaa.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O Calico Network Plugin fornece uma ampla variedade de pol√≠ticas de rede com uma sintaxe unificada para proteger hosts em hardware, m√°quinas virtuais e pods. Essas pol√≠ticas podem ser aplicadas no espa√ßo de nomes ou pol√≠ticas globais de rede aplic√°veis ‚Äã‚Äãao </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">terminal de host</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (para proteger aplicativos em execu√ß√£o diretamente no host - o servidor ou a m√°quina virtual pode ser o host diretamente) ou para o </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">terminal de carga</font></a><font style="vertical-align: inherit;"> de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">trabalho</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(para proteger aplicativos em execu√ß√£o em cont√™ineres ou m√°quinas virtuais hospedadas). As pol√≠ticas do Calico permitem aplicar medidas de seguran√ßa a v√°rios pontos no caminho do pacote usando par√¢metros como preDNAT, n√£o rastreados e applyOnForward. Compreender como essas op√ß√µes funcionam pode ajudar a melhorar a seguran√ßa e o desempenho do sistema como um todo. Este artigo explica a ess√™ncia dessas configura√ß√µes de pol√≠tica do Calico (preDNAT, unraracked e applyOnForward) aplicadas aos pontos de extremidade do host, com √™nfase no que acontece nos caminhos de processamento de pacotes (cadeias de iptabels).</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este artigo pressup√µe que voc√™ entenda como as pol√≠ticas de rede Kubernetes e Calico funcionam. Caso contr√°rio, recomendamos que voc√™ tente o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tutorial b√°sico de diretiva de rede</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o tutorial de prote√ß√£o de host</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> usando o Calico antes de ler este artigo. Tamb√©m esperamos que voc√™ tenha um entendimento b√°sico de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">iptables</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> no Linux. </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">Pol√≠tica de rede global da</font></a></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
chita</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">permite aplicar um conjunto de regras de acesso a r√≥tulos (para grupos de hosts e cargas de trabalho / pods). Isso √© muito √∫til se voc√™ usar sistemas heterog√™neos juntos - m√°quinas virtuais, um sistema diretamente no hardware ou na infraestrutura do kubernetes. Al√©m disso, voc√™ pode proteger seu cluster (n√≥s) usando um conjunto de pol√≠ticas declarativas e aplicar pol√≠ticas de rede ao tr√°fego de entrada (por exemplo, atrav√©s do servi√ßo NodePorts ou IPs externos).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em um n√≠vel fundamental, quando o Calico conecta um pod a uma rede (veja o diagrama abaixo), ele o conecta a um host usando uma interface Ethernet (veth) virtual. O tr√°fego enviado pelo pod chega ao host dessa interface virtual e √© processado como se viesse de uma interface de rede f√≠sica. Por padr√£o, o Calico chama essas interfaces de caliXXX. Como o tr√°fego chega pela interface virtual, ele passa pelo iptables, como se o pod estivesse √† dist√¢ncia de um salto. Portanto, quando o tr√°fego vem / sai do pod, ele √© encaminhado do ponto de vista do host.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No n√≥ Kubernetes em que o Calico est√° em execu√ß√£o, √© poss√≠vel mapear a interface virtual (veth) para a carga de trabalho da seguinte maneira. No exemplo abaixo, voc√™ pode ver que o veth # 10 (calic1cbf1ca0f8) est√° conectado ao cnx-manager- * no espa√ßo de nome de monitoramento de chita.</font></font><br>
<br>
<pre><code class="plaintext hljs">[centos@ip-172-31-31-46 K8S]$ sudo ip a<font></font>
...<font></font>
10: calic1cbf1ca0f8@if4: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1440 qdisc noqueue state UP group default<font></font>
    link/ether ee:ee:ee:ee:ee:ee brd ff:ff:ff:ff:ff:ff link-netnsid 5<font></font>
    inet6 fe80::ecee:eeff:feee:eeee/64 scope link<font></font>
       valid_lft forever preferred_lft forever<font></font>
...<font></font>
<font></font>
[centos@ip-172-31-31-46 K8S]$ calicoctl get wep --all-namespaces<font></font>
...<font></font>
calico-monitoring cnx-manager-8f778bd66-lz45m                            ip-172-31-31-46.ec2.internal 192.168.103.134/32<font></font>
calic1cbf1ca0f8<font></font>
...</code></pre><br>
<img src="https://habrastorage.org/webt/j4/sz/k4/j4szk45ps1af4itowiylazzg-mm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como o Calico cria uma interface veth para cada carga de trabalho, como ele aplica pol√≠ticas? </font><font style="vertical-align: inherit;">Para fazer isso, o Calico cria ganchos em v√°rias cadeias do caminho de processamento de pacotes usando o iptables. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O diagrama abaixo mostra as cadeias envolvidas no processamento de pacotes no iptables (ou no subsistema netfilter). </font><font style="vertical-align: inherit;">Quando um pacote chega atrav√©s de uma interface de rede, ele primeiro passa pela cadeia PREROUTING. </font><font style="vertical-align: inherit;">Em seguida, √© tomada uma decis√£o de roteamento e, com base nisso, o pacote passa pelo INPUT (direcionado aos processos do host) ou FORWARD (direcionado ao pod ou outro n√≥ na rede). </font><font style="vertical-align: inherit;">No processo local, o pacote passa pela cadeia OUTPUT e depois POSTROUTING antes de envi√°-lo pelo cabo.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Observe que o pod tamb√©m √© um objeto externo (conectado ao veth) em termos de manipula√ß√£o de iptables. </font><font style="vertical-align: inherit;">Para resumir:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O tr√°fego encaminhado (nat, roteado para / do pod) passa pelas cadeias PREROUTING - FORWARD - POSTROUTING.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O tr√°fego para o processo do host local passa pela cadeia PREROUTING - INPUT.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O tr√°fego do processo host local passa pela cadeia OUTPUT - POSTROUTING.</font></font></li>
</ul><br>
<img src="https://habrastorage.org/webt/vo/8v/pj/vo8vpjpwprnf9w3wo4rc1rio9is.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O Calico fornece op√ß√µes de pol√≠tica para aplicar pol√≠ticas a todas as cadeias. </font><font style="vertical-align: inherit;">Com isso em mente, vejamos as v√°rias configura√ß√µes de pol√≠tica dispon√≠veis no Calico. </font><font style="vertical-align: inherit;">Os n√∫meros na lista de op√ß√µes abaixo correspondem aos n√∫meros no diagrama acima.</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pol√≠tica de terminal de carga de trabalho (pod)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pol√≠tica de terminal do host</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Op√ß√£o ApplyOnForward</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pol√≠tica PreDNAT</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pol√≠tica n√£o rastreada</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vamos come√ßar examinando como as pol√≠ticas se aplicam aos pontos de extremidade de carga de trabalho (pods de VMs Kubernetes ou OpenStack) e, em seguida, examinamos as op√ß√µes de pol√≠tica para pontos de extremidade do host.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pontos de extremidade de carga de trabalho</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pol√≠tica de Terminal de Carga de Trabalho (1)</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esta √© uma op√ß√£o para proteger seus pods do kubernetes. </font><font style="vertical-align: inherit;">O Calico suporta o trabalho com o Kubernetes NetworkPolicy, mas tamb√©m fornece pol√≠ticas adicionais - Calico NetworkPolicy e GlobalNetworkPolicy. </font><font style="vertical-align: inherit;">O Calico cria uma corrente para cada pod (carga de trabalho) e se conecta √†s cadeias INPUT e OUTPUT para carga de trabalho na tabela de filtros da cadeia FORWARD.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pontos de extremidade do host</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pol√≠tica de ponto final de host (2)</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al√©m da CNI (interface de rede de cont√™iner), as pol√≠ticas do Calico oferecem a capacidade de proteger diretamente o host. No Calico, voc√™ pode criar um terminal de host especificando uma combina√ß√£o da interface do host e, se necess√°rio, n√∫meros de porta. A aplica√ß√£o de pol√≠ticas para essa entidade √© alcan√ßada usando a tabela de filtros nas cadeias INPUT e OUTPUT. Como pode ser visto no diagrama, (2) eles s√£o aplicados aos processos locais no n√≥ / host. Ou seja, se voc√™ criou uma pol√≠tica que se aplica ao ponto de extremidade do host, ela n√£o afetar√° o tr√°fego de / para seus pods. Mas fornece uma interface / sintaxe √∫nica para bloquear o tr√°fego para seu host e pods usando pol√≠ticas do Calico. Isso simplifica bastante o processo de gerenciamento de pol√≠ticas para uma rede heterog√™nea. A configura√ß√£o de pol√≠ticas de terminal do host para aprimorar a prote√ß√£o de cluster √© outro caso de uso importante.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pol√≠tica ApplyOnForward (3)</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A op√ß√£o ApplyOnForward est√° dispon√≠vel na pol√≠tica de rede global Calico para permitir que as pol√≠ticas se apliquem a todo o tr√°fego que passa pelo terminal do host, incluindo o tr√°fego que ser√° encaminhado pelo host. </font><font style="vertical-align: inherit;">Esse tr√°fego inclui o envio a um pod local ou a qualquer outro lugar da rede. </font><font style="vertical-align: inherit;">O Calico exige que essa configura√ß√£o seja ativada para pol√≠ticas que usam PreDNAT e n√£o rastreadas, consulte as se√ß√µes a seguir. </font><font style="vertical-align: inherit;">Al√©m disso, o ApplyOnForward pode ser usado para rastrear o tr√°fego do host ao usar um roteador virtual ou NAT de software.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Observe que, se voc√™ precisar aplicar a mesma pol√≠tica de rede aos processos e pods do host, n√£o precisar√° usar a op√ß√£o ApplyOnForward. </font><font style="vertical-align: inherit;">Voc√™ s√≥ precisa criar um r√≥tulo para o ponto de host e o ponto de extremidade de carga de trabalho (pod) desejados. </font><font style="vertical-align: inherit;">O Calico √© inteligente o suficiente para aplicar pol√≠ticas baseadas em r√≥tulos, independentemente do tipo de terminal (terminal de host ou carga de trabalho).</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pol√≠tica PreDNAT (4)</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No Kubernetes, as portas da entidade de servi√ßo podem ser lan√ßadas para fora usando a op√ß√£o NodePorts ou, opcionalmente (ao usar o Calico), declarando-as pelas op√ß√µes IPs de cluster ou IPs externos. O proxy Kube equilibra o tr√°fego recebido vinculado ao servi√ßo para os pods do servi√ßo correspondente usando DNAT. Diante disso, como voc√™ aplica pol√≠ticas ao tr√°fego proveniente dos NodePorts? Para que essas pol√≠ticas sejam aplicadas antes do processamento do tr√°fego pelo DNAT (que √© um mapeamento entre host: porta e servi√ßo correspondente), o Calico fornece um par√¢metro para globalNetworkPolicy chamado "preDNAT: true".</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quando o pr√©-DNAT √© ativado, essas pol√≠ticas s√£o implementadas em (4) no diagrama - na tabela mangle da cadeia PREROUTING - imediatamente antes do DNAT. A pol√≠tica de pedidos usual n√£o √© respeitada aqui, pois a aplica√ß√£o dessas pol√≠ticas ocorre muito antes no caminho do processamento do tr√°fego. No entanto, as pol√≠ticas preDNAT respeitam a ordem de aplica√ß√£o entre si. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ao criar pol√≠ticas com pr√©-DNAT, √© importante estar atento ao tr√°fego que voc√™ deseja processar e permitir que a maioria seja rejeitada. O tr√°fego marcado como 'allow' na pol√≠tica pr√©-DNAT n√£o ser√° mais verificado pela pol√≠tica de ponto de extremidade, enquanto o tr√°fego quando a pol√≠tica pr√©-DNAT falhar continuar√° a fluir pelo restante das cadeias.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O Calico tornou obrigat√≥rio ativar a op√ß√£o applyOnForward ao usar o preDNAT, porque, por defini√ß√£o, o destino do tr√°fego ainda n√£o foi selecionado. </font><font style="vertical-align: inherit;">O tr√°fego pode ser direcionado para o processo host ou pode ser redirecionado para um pod ou para outro n√≥.</font></font><br>
 <br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pol√≠tica n√£o rastreada (5)</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Redes e aplicativos podem ter grandes diferen√ßas de comportamento. Em alguns casos extremos, os aplicativos podem gerar muitas conex√µes de curto prazo. Isso pode levar √† falta de mem√≥ria para o conntrack (o principal componente da pilha de rede Linux). Tradicionalmente, para executar esse tipo de aplicativo no Linux, voc√™ precisa configurar ou desativar manualmente o conntrack ou escrever regras do iptables para ignorar o conntrack. A pol√≠tica n√£o acompanhada no Calico √© uma op√ß√£o mais simples e mais eficiente se voc√™ deseja processar as conex√µes o mais r√°pido poss√≠vel. Por exemplo, se voc√™ usar o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">memcache</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> maci√ßo </font><font style="vertical-align: inherit;">ou como uma medida adicional de prote√ß√£o contra o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DDOS</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Leia esta </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">postagem do blog</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (ou </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nossa tradu√ß√£o</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) para obter mais informa√ß√µes, incluindo testes de desempenho usando a pol√≠tica n√£o rastreada. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quando voc√™ define a op√ß√£o ‚ÄúdoNotTrack: true‚Äù como Calico globalNetworkPolicy, ela se torna uma pol√≠tica ** n√£o rastreada ** e √© aplicada no est√°gio inicial do pipeline de processamento de pacotes do Linux. </font><font style="vertical-align: inherit;">Se voc√™ observar o diagrama acima, as pol√≠ticas n√£o rastreadas ser√£o aplicadas nas cadeias PREROUTING e OUTPUT na tabela bruta antes de o rastreamento de conex√£o (conntrack) ser iniciado. </font><font style="vertical-align: inherit;">Quando um pacote √© permitido por uma pol√≠tica n√£o rastreada, √© sinalizado para desativar o rastreamento de conex√£o para este pacote. </font><font style="vertical-align: inherit;">Isso significa:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Uma pol√≠tica n√£o rastreada √© aplicada para cada pacote. </font><font style="vertical-align: inherit;">N√£o h√° conceito de conex√£o (ou fluxo). </font><font style="vertical-align: inherit;">A falta de conex√µes acarreta v√°rias consequ√™ncias importantes:</font></font></li>
<li>      ,    ,      ,     ( Calico   conntrack,      ).</li>
<li>  untracked    workload Kubernetes (pod‚Äô),            pod‚Äô.</li>
<li> NAT      (  ‚Äã‚Äã  NAT  conntrack).</li>
<li>    ¬´ ¬ª  untracked-      .     ,   ,         untracked- (         ).</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">As pol√≠ticas n√£o rastreadas s√£o aplicadas no in√≠cio do pipeline de processamento de pacotes. </font><font style="vertical-align: inherit;">Isso √© muito importante para entender ao criar pol√≠ticas do Calico. </font><font style="vertical-align: inherit;">Voc√™ pode ter uma pol√≠tica para um pod com o pedido: 1 e uma pol√≠tica n√£o rastreada com o pedido: 1000. </font><font style="vertical-align: inherit;">Isso n√£o importa. </font><font style="vertical-align: inherit;">A pol√≠tica n√£o rastreada ser√° aplicada antes da pol√≠tica para o pod. </font><font style="vertical-align: inherit;">Pol√≠ticas n√£o rastreadas respeitam a ordem de execu√ß√£o apenas entre si.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como um dos objetivos da pol√≠tica doNotTrack √© impor a pol√≠tica no est√°gio inicial do pipeline de processamento de pacotes do Linux, o Calico torna obrigat√≥rio especificar a op√ß√£o applyOnForward ao usar doNotTrack. </font><font style="vertical-align: inherit;">Referindo-se ao diagrama de processamento de pacotes, observe que a pol√≠tica n√£o rastreada (5) √© aplicada antes de qualquer decis√£o de roteamento. </font><font style="vertical-align: inherit;">O tr√°fego pode ser direcionado para o processo host ou pode ser redirecionado para um pod ou para outro n√≥.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sum√°rio</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Examinamos as v√°rias op√ß√µes de pol√≠tica (ponto de extremidade do host, ApplyOnForward, preDNAT e Untracked) no Calico e como elas se aplicam ao processamento de pacotes. </font><font style="vertical-align: inherit;">Compreender a ess√™ncia de seu trabalho ajuda no desenvolvimento de pol√≠ticas eficazes e seguras. </font><font style="vertical-align: inherit;">Com o Calico, voc√™ pode usar a pol√≠tica de rede global, que se aplica ao r√≥tulo (um grupo de n√≥s e pods) e aplicar pol√≠ticas com v√°rios par√¢metros. </font><font style="vertical-align: inherit;">Isso permite que os especialistas em seguran√ßa e design de rede protejam convenientemente imediatamente "tudo" (tipos de terminais) usando o mesmo idioma de pol√≠tica das pol√≠ticas do Calico. </font></font><br>
<br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Agradecimento: Gostaria de agradecer a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sean Crampton</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alex Pollitt</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pela revis√£o e pelas informa√ß√µes valiosas.</font></font></i></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt493266/index.html">45 canais do youtube em ingl√™s para profissionais de TI</a></li>
<li><a href="../pt493268/index.html">Pentester Aplicado</a></li>
<li><a href="../pt493272/index.html">Como habilitar os documentos do Google offline no novo Microsoft Edge</a></li>
<li><a href="../pt493274/index.html">Mais de 30 recomenda√ß√µes profissionais concisas para desenvolvedores Android</a></li>
<li><a href="../pt493278/index.html">–ù—É–∂–Ω–æ –ª–∏ –∫—É—Ä–∏—Ç—å –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç SARS-CoV-2</a></li>
<li><a href="../pt493284/index.html">Kubernetes 1.18: Vis√£o geral das principais inova√ß√µes</a></li>
<li><a href="../pt493288/index.html">Cinco cita√ß√µes de programa√ß√£o explicadas famosas</a></li>
<li><a href="../pt493292/index.html">Responsivo ou responsivo? An√°lise da estrutura do componente React</a></li>
<li><a href="../pt493294/index.html">Observamos o interior do circuito integrado sovi√©tico com TTL</a></li>
<li><a href="../pt493298/index.html">Registros C ++, metaprograma√ß√£o e microcontrolador</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>