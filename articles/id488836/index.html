<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏽‍🏫 👸🏼 🧢 Beberapa aspek bekerja dengan Kamus saat mengembangkan aplikasi yang dimuat 🥒 👰🏾 🐑</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Untuk menulis catatan singkat ini, saya diminta oleh beberapa wawancara baru-baru ini untuk posisi pengembang utama di perusahaan kami. Beberapa pelam...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Beberapa aspek bekerja dengan Kamus saat mengembangkan aplikasi yang dimuat</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/488836/"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Untuk menulis catatan singkat ini, saya diminta oleh beberapa wawancara baru-baru ini untuk posisi pengembang utama di perusahaan kami. Beberapa pelamar, ternyata, tidak berpengalaman dalam mekanisme seperti apa ini, Kamus, dan bagaimana seharusnya digunakan. Saya bahkan menemukan pendapat yang sangat radikal: mereka mengatakan bahwa kamus bekerja sangat lambat, dan karena fakta bahwa ketika ditempatkan langsung di tumpukan objek besar (LOH), itu tidak dapat digunakan dalam kode dan lebih baik untuk menerapkan kueri ke koleksi reguler menggunakan filter LINQ !</font></font></p><a name="habracut"></a><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tentu saja, ini bukan pernyataan yang sepenuhnya benar. </font><font style="vertical-align: inherit;">Kamus sebagai mekanisme sangat sering dibutuhkan baik dalam membangun kode yang sangat dimuat maupun dalam mengimplementasikan logika bisnis. </font><font style="vertical-align: inherit;">Pengembang harus membayangkan bagaimana kamus disusun, bagaimana kerjanya dengan memori, berapa mahal itu, berapa banyak "jejak" yang akan ditinggalkan secara turun-temurun dan LOH, menyebabkan beban yang tidak perlu pada pengumpul sampah; </font><font style="vertical-align: inherit;">bagaimana menginisialisasi dengan lebih baik, dalam hal ini lebih baik menggunakan koleksi pasangan nilai kunci, di mana koleksi diurutkan, dll.</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pada artikel ini kami akan mencoba menangani beberapa masalah ini. </font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Implementasi kamus dari Microsoft didasarkan, seperti yang diketahui semua orang, pada mekanisme tabel hash. </font><font style="vertical-align: inherit;">Ini memberikan dalam beberapa skenario yang tidak dapat dicapai untuk algoritma lain kompleksitas konstan ideal O (1) untuk memasukkan, mencari, dan menghapus operasi. </font><font style="vertical-align: inherit;">Dalam beberapa skenario, penolakan untuk menggunakan mekanisme ini dipenuhi dengan masalah yang signifikan dengan kinerja dan konsumsi memori.</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fitur penting dari arsitektur adalah penyimpanan data diatur menggunakan dua array dengan ukuran yang sama:</font></font></p><br>
<pre><code class="cs hljs">    <span class="hljs-keyword">int</span>[] _buckets = <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[size];<font></font>
    Entry[] _entries = <span class="hljs-keyword">new</span> Entry[size];</code></pre><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Array ini menyimpan data dan elemen layanan yang berguna untuk akses cepat ke mereka. </font><font style="vertical-align: inherit;">Array dibuat dengan margin, artinya hampir selalu kosong.</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Entitas pembantu entri yang membungkus setiap pasangan nilai kunci adalah tipe signifikan:</font></font></p><br>
<pre><code class="cs hljs">    <span class="hljs-keyword">private</span> <span class="hljs-keyword">struct</span> Entry<font></font>
    {<font></font>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">uint</span> hashCode;
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> next;
        <span class="hljs-keyword">public</span> TKey key;
        <span class="hljs-keyword">public</span> TValue <span class="hljs-keyword">value</span>;<font></font>
    }</code></pre><br>
<p>           ,     ,        ,   _entries.   ,    ConcurrentDictionary,      .       (      64     16      8    )    ,              . </p><br>
<p>     _entries     Dictionary    85000        LOH (,       ,   64      3372  ,       1932).  ,        ,        .</p><br>
<p>  Microsoft   _entries   ,   Entry?       LOH        (,  ,   ). , ,     .</p><br>
<p>      ,      .         12   (4    _buckets   4    hashCode  next  Entry).        , ,  ,     12  .      ? .</p><br>
<p> Dictionary          .            .          Dictionary&lt;int, int&gt;    ( ).   ,      –     ( ).     500 .  13 .      500 .</p><br>
<img src="https://habrastorage.org/webt/lc/y0/bt/lcy0btcer22ad_y0fkmorjaob34.png"><br>
<p> ,           .      ,       ,       ,         .</p><br>
<p>        ,      _buckets  _entries             ,      «»,     .              LOH,      .<br>
,            746   3     .</p><br>
<p>   ,     Dictionary             .           ,     , ,    .NET Core     TrimExcess,           .</p><br>
<p>            :</p><br>
<ul>
<li>     ,               EnsureCapacity.        .</li>
<li>  ,          400    10.  (80  ).        new Dictionary&lt;int, int&gt;(10001000),          190.        ,             ,      .</li>
<li>     ,      Dictionary        EnsureCapacity(capacity*),     .  ,         _buckets  _entries        .       .    ,  EnsureCapacity(0).</li>
<li>         ,   ( ) ,   ,        Dictionary:    .    ,                  .    ,          (       ).</li>
<li>      TrimExcess.             LOH           .              .</li>
</ul><br>
<p>                 Dictionary.    ,      Dictionary&lt;Key, Value&gt;, :</p><br>
<pre><code class="cs hljs">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Key</span><font></font>
    {<font></font>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> Item { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Key</span>(<span class="hljs-params"><span class="hljs-keyword">int</span> item</span>)</span><font></font>
        {<font></font>
            Item = item;<font></font>
        }<font></font>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">bool</span> <span class="hljs-title">Equals</span>(<span class="hljs-params"><span class="hljs-keyword">object</span> obj</span>)</span><font></font>
        {<font></font>
            <span class="hljs-keyword">return</span> Item.Equals(obj);<font></font>
        }<font></font>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">int</span> <span class="hljs-title">GetHashCode</span>(<span class="hljs-params"></span>)</span><font></font>
        {<font></font>
            <span class="hljs-keyword">return</span> Item.GetHashCode();<font></font>
        }<font></font>
    }<font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Value</span><font></font>
    {<font></font>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> Item { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Value</span>(<span class="hljs-params"><span class="hljs-keyword">int</span> item</span>)</span><font></font>
        {<font></font>
            Item = item;<font></font>
        }<font></font>
    }</code></pre><br>
<p>  .</p><br>
<img src="https://habrastorage.org/webt/cg/aj/6u/cgaj6ulgpefgivt8q_kjgwklfpu.png"><br>
<p>      ? </p><br>
<p>  :</p><br>
<ul>
<li>    64        (8 )      (8 ). </li>
<li>,    ,  8   «» .</li>
<li> Item   Key  Value  8 ,    ,    Item     4 .</li>
</ul><br>
<p>         20  76 .</p><br>
<p>      :</p><br>
<ul>
<li>           (      ),            .</li>
<li>     ,    .      . </li>
</ul><br>
<p> ,         .      ?     ,           ( 10-20-30 ) .    ?</p><br>
<p>   . ,      Dictionary&lt;int, int&gt;(int count)      :</p><br>
<pre><code class="cs hljs">    <span class="hljs-keyword">struct</span> Entry&lt;TValue&gt;<font></font>
    {<font></font>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span>[] Keys;
        <span class="hljs-keyword">public</span> TValue[] Values;
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Entry</span>(<span class="hljs-params"><span class="hljs-keyword">int</span> count</span>)</span><font></font>
        {<font></font>
            Keys = <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[count];<font></font>
            Values = <span class="hljs-keyword">new</span> TValue[count];<font></font>
        }<font></font>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">bool</span> <span class="hljs-title">TryGetValue</span>(<span class="hljs-params"><span class="hljs-keyword">int</span> key, <span class="hljs-keyword">out</span> TValue <span class="hljs-keyword">value</span></span>)</span><font></font>
        {<font></font>
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; Keys.Length; ++j)<font></font>
            {<font></font>
                <span class="hljs-keyword">if</span> (Keys[j] == key)<font></font>
                {<font></font>
                    <span class="hljs-keyword">value</span> = Values[j];
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<font></font>
                }<font></font>
            }<font></font>
            <span class="hljs-keyword">value</span> = <span class="hljs-keyword">default</span>(TValue);
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<font></font>
        }<font></font>
    }</code></pre><br>
<p> count –   -,    .<br>
   .</p><br>
<img src="https://habrastorage.org/webt/b3/qb/2b/b3qb2bpspnpxd8dvivge8i52jz0.png"><br>
<p> ,          18   count=10  134   count=190 (   50 .   ).            (  –  29 ),      (     150)   ,           (,       ). </p><br>
<p>         ,        (,   ,       Entry     ,   ).<br>
       ,      (callvirt  GetHashCode  Equals).   –   . ,   ,       ,           (generic)     .               .</p><br>
<p>         SortedList&lt;int, int&gt;.<br>
       .</p><br>
<img src="https://habrastorage.org/webt/vi/wv/9e/viwv9et5uwjt7mdwh3wyv4lrbxk.png"><br>
<p> ,            . </p><br>
<p>     :             ,                   .         .</p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dalam semua contoh yang disajikan, harus diingat bahwa data kecil digunakan dalam konfigurasi pengujian, oleh karena itu, overhead untuk informasi layanan relatif tinggi. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Proyek uji dapat ditemukan di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sini</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></p></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id488826/index.html">Kenali peningkatan privilege di ABBYY FineReader</a></li>
<li><a href="../id488828/index.html">Spam, spam, spam ...</a></li>
<li><a href="../id488830/index.html">Internet di Turkmenistan: harga, ketersediaan, dan pembatasan</a></li>
<li><a href="../id488832/index.html">Anehnya, tahun lalu, HDD perusahaan lebih populer daripada SSD dan penjualan mereka meningkat</a></li>
<li><a href="../id488834/index.html">Bagaimana kesalahan dari 2009 menyebabkan konflik antara Docker untuk Windows dan Razer Synapse</a></li>
<li><a href="../id488842/index.html">Tangkap satu elektron: amati proses yang membutuhkan seperempat miliar detik</a></li>
<li><a href="../id488844/index.html">Perbatasan untuk penjaga perbatasan: Pengadilan AS telah menetapkan aturan untuk memeriksa perangkat - membahas situasinya</a></li>
<li><a href="../id488846/index.html">Postgresso 19</a></li>
<li><a href="../id488848/index.html">CTO semua startup</a></li>
<li><a href="../id488850/index.html">Menggunakan RabbitMQ dengan MonsterMQ Bagian 1</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>