<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>◻️ 🥠 😕 効率を犠牲にすることなくC ++のレジスタフィールドに安全にアクセス（例としてCortexMを使用） 🥇 👩‍🏭 🚶🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="図。サイトから取得www.extremetech.com/wp-content/uploads/2016/07/MegaProcessor-Feature.jpg 
 
 すべての人に健康を！
 
 前回の記事では、C ++のCortexMコアを備えたマイクロコントローラーのレジスターへのアクセスの...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>効率を犠牲にすることなくC ++のレジスタフィールドに安全にアクセス（例としてCortexMを使用）</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/459642/"><img src="https://habrastorage.org/webt/et/ni/fl/etnifl3hcinjjsqt8skfvv6km5q.png" alt="画像"><br>
<sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図。</font><font style="vertical-align: inherit;">サイトから</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">取得www.extremetech.com/wp-content/uploads/2016/07/MegaProcessor-Feature.jpg</font></font></a> </sub><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
すべての人に健康を！</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">前回の記事で</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、C ++のCortexMコアを備えたマイクロコントローラーのレジスターへのアクセスの問題を検討し、いくつかの問題に対する簡単な解決策を示しました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
今日、SVDファイルから生成されたC ++クラスを使用して、効率を犠牲にすることなく、レジスタとそのフィールドへのアクセスを安全にする方法のアイデアを示したいと思います。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
興味のある方、猫へようこそ。</font><font style="vertical-align: inherit;">たくさんのコードがあります。</font></font><br>
<a name="habracut"></a> <br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">前書き</font></font></h3><br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C ++ Hardware Register Access Reduxの</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
記事で</font><font style="vertical-align: inherit;">、Ken Smithはレジスタを安全かつ効率的に操作する方法を示し、例として</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github.com/kensmith/cppmmioで</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">それを</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">示し</font></a><font style="vertical-align: inherit;">ました</font><font style="vertical-align: inherit;">。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、いくつかの人々がこのアイデアを開発しました。たとえば、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Niklas Hauserは素晴らしいレビュー</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">行い、</font></a><font style="vertical-align: inherit;">レジスタに安全にアクセスするいくつかの方法を提案しました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらのアイデアのいくつかはすでにさまざまなライブラリ、特に</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">modmに</font></a><font style="vertical-align: inherit;">実装されています</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。これらすべての文を実際に使用できます。しかし、これらのライブラリの開発時には、ペリフェラルとレジスタの記述は標準化され始めたばかりであり、したがって、レジスタの記述に関する主な作業がプログラマにあることを目的としていくつかのことが行われました。また、一部のソリューションは、コードやマイクロコントローラーのリソースの点で効果的ではありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
現在、ARMマイクロコントローラのすべてのメーカーが、すべてのレジスタの説明をSVD形式で提供しています。これらの記述からヘッダーファイルを生成できるため、レジスターの単純な記述だけでなく、より複雑な記述を作成することも可能です。これにより、コードの信頼性が向上します。そして、出力ファイルが任意の言語、C、C ++、または</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">Dで</font></a><font style="vertical-align: inherit;">あってもよいのは素晴らしいことです</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、レジスタへの一般的に安全なアクセスとは何か、そしてなぜそれが必要なのかを順番に見ていきましょう。</font><font style="vertical-align: inherit;">説明は単純な合成で示すことができますが、ほとんどありそうもありませんが、考えられる例は次のとおりです。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span>
</span>{
  <span class="hljs-comment">//      GPIOA   </span>
  <span class="hljs-comment">//,    AHB1ENR </span><font></font>
   RCC-&gt;APB1ENR |= RCC_AHB1ENR_GPIOAEN ; <font></font>
<font></font>
  <span class="hljs-comment">//    ,      </span><font></font>
  RCC-&gt;AHB1ENR = RCC_AHB1ENR_GPIOAEN; <font></font>
<font></font>
  <span class="hljs-comment">//,  TIM1    APB2 </span><font></font>
  RCC-&gt;APB1ENR  |=  RCC_APB1ENR_TIM2EN | RCC_APB2ENR_TIM1EN;<font></font>
 <font></font>
  <span class="hljs-comment">// - ,        .      </span>
  <span class="hljs-keyword">auto</span> result = GPIOA-&gt;BSRR ; 
  <span class="hljs-keyword">if</span> (result &amp; GPIO_BSRR_BS1)  <font></font>
  {<font></font>
     <span class="hljs-comment">//do something</span><font></font>
  }<font></font>
 <font></font>
  <span class="hljs-comment">//-     .   ...</span><font></font>
  GPIOA-&gt;IDR = GPIO_IDR_ID5 ;   <font></font>
}<font></font>
</code></pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらすべてのケースは実際に可能であり、私は間違いなく私の学生からこのようなものを見ました。</font><font style="vertical-align: inherit;">あなたがそのような過ちを犯すことを禁じることができれば素晴らしいでしょう。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、コードがきれいに見え、コメントを必要としない方がはるかに快適だと私には思われます。</font><font style="vertical-align: inherit;">たとえば、STM32F411マイクロコントローラをよく知っていても、このコードで何が起こっているのかを常に理解できるとは限りません。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{<font></font>
  uint32 temp = GPIOA-&gt;OSPEEDR ;<font></font>
  temp &amp;=~ GPIO_OSPEEDR_OSPEED0_Msk ; <font></font>
  temp = (GPIO_OSPEEDR_OSPEED0_0 | GPIO_OSPEEDR_OSPEED0_1) ;<font></font>
  GPIOA-&gt;OSPEEDR =  temp;<font></font>
}<font></font>
</code></pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここでのコメントは必須です。</font><font style="vertical-align: inherit;">コードは、GPIOA.0ポートの周波数を最大に設定します（</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mctMaks</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：実際、このパラメーターはフロントの立ち上がり時間（つまり、その急勾配）に影響し、ポートは通常、特定の周波数（VeryLow \ Low \ Medium \ High）でデジタル信号を処理できることを意味します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらの欠点を取り除こうとしましょう。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">抽象化の登録</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まず、プログラマーとプログラムの観点から、レジスターが何であるかを理解する必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
レジスタには、アドレス、長さ、サイズ、アクセスモードがあります。一部のレジスタは書き込み可能、​​一部は読み取り専用、ほとんどは読み取りと書き込みが可能です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに、レジスターはフィールドのセットとして表すことができます。フィールドは1ビットまたは複数のビットで構成され、レジスタの任意の場所に配置されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、次のフィールド特性は重要です：長さまたはサイズ（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">幅</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">または</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サイズ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）、レジスターの先頭からの</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オフセット</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（</font><b><font style="vertical-align: inherit;">オフセット</font></b><font style="vertical-align: inherit;">）、および値。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
フィールド値は、フィールドが取り得るすべての可能な量のスペースであり、フィールドの長さに依存します。</font><font style="vertical-align: inherit;">それら。</font><font style="vertical-align: inherit;">フィールドの長さが2の場合、可能なフィールド値は4つ（0,1,2,3）です。</font><font style="vertical-align: inherit;">レジスターと同様に、フィールドとフィールド値にはアクセスモード（読み取り、書き込み、読み取り、書き込み）</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
があります。より明確にするために、STM32F411マイクロコントローラーからTIM1タイマーレジスタCR1を取得します。</font><font style="vertical-align: inherit;">概略的には、次のようになります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/sr/da/i4/srdai4a4hmphkmhrulcvdcx9r3u.png" alt="画像"><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ビット0 CEN：</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 カウンターを有効にする0：カウンターを有効にする：</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">無効にする</font></font></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
 1：カウンターを有効にする：</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有効にする</font></font></b><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ビット1 UDIS：UEVイベントを有効/無効にする</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 0：UEVイベントを有効：</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有効</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
 1：UEVイベントを有効：</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">無効</font></font></b><br>
</li>
<li> 2 URS:     UEV<br>
 0: UEV        UG: <b>Any</b><br>
 1: UEV    : <b>Overflow</b><br>
</li>
<li> 3 OPM:   <br>
 0:       UEV: <b>ContinueAfterUEV</b><br>
 1:     UEV: <b>StopAfterUEV</b><br>
</li>
<li> 4 DIR:  <br>
 0:  : <b>Upcounter</b><br>
 1:  : <b>Downcounter</b><br>
</li>
<li> 6:5 CMS:  <br>
 0:   0: <b>CenterAlignedMode0</b><br>
 1:   1: <b>CenterAlignedMode1</b><br>
 2:   2: <b>CenterAlignedMode2</b><br>
 3:   3: <b>CenterAlignedMode3</b><br>
</li>
<li> 7 APRE:     ARR<br>
 0:  TIMx_ARR  : <b>ARRNotBuffered</b><br>
 1:  TIMx_ARR  : <b>ARRBuffered</b><br>
</li>
<li> 8:9 CKD:    <br>
 0: tDTS=tCK_INT: <b>ClockDevidedBy1</b><br>
 1: tDTS=2*tCK_INT: <b>ClockDevidedBy2</b><br>
 2: tDTS=4*tCK_INT: <b>ClockDevidedBy4</b><br>
 3: Reserved: <b>Reserved</b><br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここでは、たとえば、CENはレジスタの先頭からのオフセットが0の1ビットフィールドです。そして、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有効</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（1）と</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">無効</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（0）が可能な値です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このレジスターの各フィールドが特に責任を負うことに集中することはしません。各フィールドとフィールド値に意味的負荷を運ぶ名前があり、それから原則的にそれが何をするかを理解できることが重要です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
レジスタとフィールドおよびその値の両方にアクセスできる必要があります。したがって、非常に近似した形式で、レジスタの抽象化は次のクラスで表すことができます。クラスに</font></font><br>
<br>
<img src="https://habrastorage.org/webt/pi/kr/-s/pikr-sq7lnpo9c6uilrmghdzd5a.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
加えて、レジスタと個々のフィールドに特定のプロパティがあり、レジスタにアドレス、サイズ、アクセスモード（読み取り専用、書き込み専用、またはその両方）があることも重要です。 。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
フィールドには、サイズ、オフセット、およびアクセスモードがあります。</font><font style="vertical-align: inherit;">さらに、フィールドには、それが属するレジスタへのリンクが含まれている必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
フィールド値には、フィールドへのリンクと追加の属性（値）が必要です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、より詳細なバージョンでは、抽象化は次のように</font></font><br>
<br>
<img src="https://habrastorage.org/webt/m4/3u/mb/m43umbc8vceiuila8_komovib38.png"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
なります。属性に加えて、抽象化には変更とアクセスのメソッドが必要です。</font><font style="vertical-align: inherit;">簡単にするために、インストール、書き込み、読み取りの方法に限定します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/uy/d7/sb/uyd7sb-z-tggllnj4knjf_rfhi4.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ケースの抽象化を決定したら、この抽象化がSVDファイルに記述されている内容にどのように対応するかを確認する必要があります。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">システムビュー記述（SVD）ファイル</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CMSISシステムプレゼンテーション記述形式（CMSIS-SVD）は、ARM Cortex-Mプロセッサに基づくマイクロコントローラーレジスタの正式な記述です。システム表現の説明に含まれる情報は、実際にはデバイスのリファレンスマニュアルのデータに対応しています。そのようなファイル内のレジスターの記述には、高水準の情報と、レジスター内のフィールドの個々のビットの目的の両方を含めることができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
概略的に、そのようなファイルの情報の詳細レベルは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、KeilのWebサイト</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">で</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">とら</font></a><font style="vertical-align: inherit;">れた次のスキームで説明できます</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/1s/oq/6d/1soq6disxizzaj8hvyaovxs9_pm.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
説明SVDファイルは製造元から提供され、デバッグ中にマイクロコントローラーとレジスターに関する情報を表示するために使用されます。たとえば、IARはそれらを使用して[表示]→[レジスタ]パネルに情報を表示します。ファイル自体は、Program Files（x86）\ IAR Systems \ Embedded Workbench 8.3 \ arm \ config \ debuggerフォルダーにあります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
JetBrainsのClionもsvdファイルを使用して、デバッグ中にレジスタ情報を表示します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
説明はメーカーのサイトからいつでもダウンロードできます。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ここでは、STM32F411マイクロコントローラーのSVDファイルを取得できます。</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
一般に、SVD形式は、メーカーがサポートする標準です。 SVDの記述レベルを見てみましょう。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
合計で、デバイスレベル、マイクロコントローラーレベル、レジスターレベル、フィールドレベル、列挙値のレベルの5つのレベルが区別されます。 </font></font><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">デバイスレベル</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：システムビューの最上位の説明はデバイスです。</font><font style="vertical-align: inherit;">このレベルでは、デバイス全体に関連するプロパティが記述されます。</font><font style="vertical-align: inherit;">たとえば、デバイス名、説明、バージョンなどです。</font><font style="vertical-align: inherit;">アドレス可能な最小単位、およびデータバスのビット深度。</font><font style="vertical-align: inherit;">レジスターサイズ、リセット値、アクセス許可などのレジスター属性のデフォルト値は、このレベルでデバイス全体に設定でき、より低いレベルの記述によって暗黙的に継承されます。</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">マイクロコントローラレベル：</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> CPUセクションでは、マイクロコントローラのコアとその機能について説明します。</font><font style="vertical-align: inherit;">このセクションは、SVDファイルを使用してデバイスヘッダーファイルを作成する場合に必要です。</font></font></li>
<li><b>  </b>:  -   .           . </li>
<li><b> </b>:  —    ,   .         .      .       (/).</li>
<li><b> </b>:    ,          — .     ,      ,  ,    ,    . </li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列挙されたフィールド値のレベル</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：実際、これらは名前付きのフィールド値であり、C、C ++、Dなどで便宜上使用できます。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実際、SVDファイルは、システムの完全な説明を含む通常のxmlファイルです。</font><font style="vertical-align: inherit;">たとえば、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ここでは</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font><font style="vertical-align: inherit;">Cコードへのsvdファイルコンバーターがあり</font><font style="vertical-align: inherit;">、各ペリフェラルとレジスターに対してCフレンドリーなヘッダーと構造を生成します。</font><font style="vertical-align: inherit;">Phytonで記述され</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
た</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cmsis-svd</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> SVDパーサーもあり</font><font style="vertical-align: inherit;">、ファイルからPhythonクラスオブジェクトにデータを逆シリアル化するような処理を行い、コード生成プログラムで便利に使用されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
STM32F411マイクロコントローラーのレジスターの説明の例は、スポイラーの下に表示されます。</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">レジスタCR1タイマーTIM1の例</font></font></b><div class="spoiler_text"><pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">peripheral</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>TIM1<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">description</span>&gt;</span>Advanced-timers<span class="hljs-tag">&lt;/<span class="hljs-name">description</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">groupName</span>&gt;</span>TIM<span class="hljs-tag">&lt;/<span class="hljs-name">groupName</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">baseAddress</span>&gt;</span>0x40010000<span class="hljs-tag">&lt;/<span class="hljs-name">baseAddress</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">addressBlock</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">offset</span>&gt;</span>0x0<span class="hljs-tag">&lt;/<span class="hljs-name">offset</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">size</span>&gt;</span>0x400<span class="hljs-tag">&lt;/<span class="hljs-name">size</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">usage</span>&gt;</span>registers<span class="hljs-tag">&lt;/<span class="hljs-name">usage</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">addressBlock</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">registers</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">register</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>CR1<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">displayName</span>&gt;</span>CR1<span class="hljs-tag">&lt;/<span class="hljs-name">displayName</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">description</span>&gt;</span>control register 1<span class="hljs-tag">&lt;/<span class="hljs-name">description</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">addressOffset</span>&gt;</span>0x0<span class="hljs-tag">&lt;/<span class="hljs-name">addressOffset</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">size</span>&gt;</span>0x20<span class="hljs-tag">&lt;/<span class="hljs-name">size</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">access</span>&gt;</span>read-write<span class="hljs-tag">&lt;/<span class="hljs-name">access</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">resetValue</span>&gt;</span>0x0000<span class="hljs-tag">&lt;/<span class="hljs-name">resetValue</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">fields</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">field</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>CKD<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">description</span>&gt;</span>Clock division<span class="hljs-tag">&lt;/<span class="hljs-name">description</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">bitOffset</span>&gt;</span>8<span class="hljs-tag">&lt;/<span class="hljs-name">bitOffset</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">bitWidth</span>&gt;</span>2<span class="hljs-tag">&lt;/<span class="hljs-name">bitWidth</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">field</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">field</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>ARPE<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">description</span>&gt;</span>Auto-reload preload enable<span class="hljs-tag">&lt;/<span class="hljs-name">description</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">bitOffset</span>&gt;</span>7<span class="hljs-tag">&lt;/<span class="hljs-name">bitOffset</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">bitWidth</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">bitWidth</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">field</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">field</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>CMS<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">description</span>&gt;</span>Center-aligned mode<font></font>
              selection<span class="hljs-tag">&lt;/<span class="hljs-name">description</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">bitOffset</span>&gt;</span>5<span class="hljs-tag">&lt;/<span class="hljs-name">bitOffset</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">bitWidth</span>&gt;</span>2<span class="hljs-tag">&lt;/<span class="hljs-name">bitWidth</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">field</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">field</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>DIR<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">description</span>&gt;</span>Direction<span class="hljs-tag">&lt;/<span class="hljs-name">description</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">bitOffset</span>&gt;</span>4<span class="hljs-tag">&lt;/<span class="hljs-name">bitOffset</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">bitWidth</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">bitWidth</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">field</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">field</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>OPM<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">description</span>&gt;</span>One-pulse mode<span class="hljs-tag">&lt;/<span class="hljs-name">description</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">bitOffset</span>&gt;</span>3<span class="hljs-tag">&lt;/<span class="hljs-name">bitOffset</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">bitWidth</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">bitWidth</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">field</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">field</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>URS<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">description</span>&gt;</span>Update request source<span class="hljs-tag">&lt;/<span class="hljs-name">description</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">bitOffset</span>&gt;</span>2<span class="hljs-tag">&lt;/<span class="hljs-name">bitOffset</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">bitWidth</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">bitWidth</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">field</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">field</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>UDIS<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">description</span>&gt;</span>Update disable<span class="hljs-tag">&lt;/<span class="hljs-name">description</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">bitOffset</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">bitOffset</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">bitWidth</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">bitWidth</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">field</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">field</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>CEN<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">description</span>&gt;</span>Counter enable<span class="hljs-tag">&lt;/<span class="hljs-name">description</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">bitOffset</span>&gt;</span>0<span class="hljs-tag">&lt;/<span class="hljs-name">bitOffset</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">bitWidth</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">bitWidth</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">field</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">fields</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">register</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">register</span>&gt;</span>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ご覧のとおり、フィールドの特定のビットの値の説明を除いて、抽象化に必要なすべての情報があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべてのメーカーがシステムの完全な説明に時間を費やすことを望んでいるわけではないため、ご覧のように、STはフィールド値を説明したくなく、この負担を顧客のプログラマーに転送しました。</font><font style="vertical-align: inherit;">ただし、TIは顧客を管理し、フィールド値の説明を含め、システムを完全に説明します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
上記は、記述のSVD形式がケースの抽象化と非常に一貫していることを示しています。</font><font style="vertical-align: inherit;">このファイルには、レジスターを完全に記述するために必要なすべての情報が含まれています。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">実装</font></font></h3><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">登録</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これでレジスターの抽象化が完了し、この抽象化に最適なメーカーからのsvd形式のレジスターの説明ができたので、直接実装に進むことができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちの実装は、Cコードと同じくらい効果的で、ユーザーフレンドリーでなければなりません。</font><font style="vertical-align: inherit;">たとえば、次のように、レジスタへのアクセスを可能な限り明確にする必要があります。</font></font><br>
<br>
<pre><code class="cpp hljs">  <span class="hljs-keyword">if</span> (TIM1::CR1::CKD::DividedBy2::IsSet())<font></font>
  {<font></font>
     TIM1::ARR::Set(<span class="hljs-number">10</span>_ms) ;<font></font>
     TIM1::CR1::CEN::Enable::Set() ;<font></font>
  }<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
整数レジスタアドレスにアクセスするには、reinterpret_castを使用する必要があることを思い出してください。</font></font><br>
<br>
<pre><code class="cpp hljs">*<span class="hljs-keyword">reinterpret_cast</span>&lt;<span class="hljs-keyword">volatile</span> <span class="hljs-keyword">uint32_t</span> *&gt;(<span class="hljs-number">0x40010000</span>) = (<span class="hljs-number">1U</span> &lt;&lt; <span class="hljs-number">5U</span>) ;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
レジスタークラスはすでに上記で説明されており、アドレス、サイズ、アクセスモード、</font></font><code>Get() </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">および</font><font style="vertical-align: inherit;">2つのメソッド</font><font style="vertical-align: inherit;">とが必要</font></font><code>Set()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-comment">//     </span>
<span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">uint32_t</span> address, <span class="hljs-keyword">size_t</span> size, <span class="hljs-keyword">typename</span> AccessMode&gt;
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">RegisterBase</span>
{</span>
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">constexpr</span> <span class="hljs-keyword">auto</span> Addr = address ;
  <span class="hljs-keyword">using</span> Type = <span class="hljs-keyword">typename</span> RegisterType&lt;size&gt;::Type ;<font></font>
  <font></font>
  <span class="hljs-comment">// Set     , </span>
  <span class="hljs-comment">//    </span>
  __forceinline <span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T = AccessMode,<font></font>
     class = <span class="hljs-keyword">typename</span> <span class="hljs-built_in">std</span>::<span class="hljs-keyword">enable_if_t</span>&lt;<span class="hljs-built_in">std</span>::is_base_of&lt;WriteMode, T&gt;::value&gt;&gt;
  <span class="hljs-keyword">inline</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> Set(Type value)<font></font>
  {<font></font>
    *<span class="hljs-keyword">reinterpret_cast</span>&lt;<span class="hljs-keyword">volatile</span> Type *&gt;(address) = value ;<font></font>
  }<font></font>
  <font></font>
  <span class="hljs-comment">// Get    , </span>
  <span class="hljs-comment">//    ,   </span>
  __forceinline <span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T = AccessMode,<font></font>
     class = <span class="hljs-keyword">typename</span> <span class="hljs-built_in">std</span>::<span class="hljs-keyword">enable_if_t</span>&lt;<span class="hljs-built_in">std</span>::is_base_of&lt;ReadMode, T&gt;::value&gt;&gt;
  <span class="hljs-keyword">inline</span> <span class="hljs-keyword">static</span> Type Get()<font></font>
  {<font></font>
    <span class="hljs-keyword">return</span> *<span class="hljs-keyword">reinterpret_cast</span>&lt;<span class="hljs-keyword">volatile</span> Type *&gt;(address) ;<font></font>
  }<font></font>
} ;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アドレス、レジスタ長、アクセスモードをテンプレートパラメータに渡します（これもクラスです）。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SFINAE</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メカニズム</font><font style="vertical-align: inherit;">、つまりメタ</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ファンクション</font></a><font style="vertical-align: inherit;">を使用して、</font></font><code>enable_if</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アクセス関数</font></font><code>Set()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">または</font></font><code>Get()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">それらをサポートしてはいけないレジスターを</font><font style="vertical-align: inherit;">「</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">破棄</font></a><font style="vertical-align: inherit;">」します</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">たとえば、レジ​​スターが読み取り専用の場合は、型をテンプレートパラメーター</font></font><code>ReadMode</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に</font><font style="vertical-align: inherit;">渡し、</font></font><code>enable_if</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アクセスが後続操作であるかどうかを確認し</font><font style="vertical-align: inherit;">ます</font><font style="vertical-align: inherit;">。</font></font><code>ReadMode </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">そうでない場合は、制御されたエラー（タイプTは表示できません）を作成し、コンパイラーは</font></font><code>Set()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">そのようなレジスターの</font><font style="vertical-align: inherit;">メソッド</font><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">含めません</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">同じことは、書き込み専用のレジスタにも当てはまります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アクセス制御には、クラスを使用します。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-comment">//   </span>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">WriteMode</span> {</span>}; 
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">ReadMode</span> {</span>}; 
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">ReadWriteMode</span>:</span> <span class="hljs-keyword">public</span> WriteMode, <span class="hljs-keyword">public</span> ReadMode {};</code></pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
レジスタには、8、16、32、64ビットのさまざまなサイズがあり、それぞれにタイプを設定します。</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サイズに応じたレジスタのタイプ</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">uint32_t</span> size&gt;
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">RegisterType</span> {</span>} ;<font></font>
<font></font>
<span class="hljs-keyword">template</span>&lt;&gt;
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">RegisterType</span>&lt;8&gt;
{</span>
  <span class="hljs-keyword">using</span> Type = <span class="hljs-keyword">uint8_t</span> ;<font></font>
} ;<font></font>
<font></font>
<span class="hljs-keyword">template</span>&lt;&gt;
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">RegisterType</span>&lt;16&gt;
{</span>
  <span class="hljs-keyword">using</span> Type = <span class="hljs-keyword">uint16_t</span> ;<font></font>
} ;<font></font>
<font></font>
<span class="hljs-keyword">template</span>&lt;&gt;
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">RegisterType</span>&lt;32&gt;
{</span>
  <span class="hljs-keyword">using</span> Type = <span class="hljs-keyword">uint32_t</span> ;<font></font>
} ;<font></font>
<font></font>
<span class="hljs-keyword">template</span>&lt;&gt;
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">RegisterType</span>&lt;64&gt;
{</span>
  <span class="hljs-keyword">using</span> Type = <span class="hljs-keyword">uint64_t</span> ;<font></font>
} ;</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その後、TIM1タイマーに対して、CR1レジスタと、たとえばEGRレジスタを次のように定義できます。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">TIM1</span>
{</span>
   <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">CR1</span> :</span> <span class="hljs-keyword">public</span> RegisterBase&lt;<span class="hljs-number">0x40010000</span>, <span class="hljs-number">32</span>, ReadWriteMode&gt;<font></font>
   {<font></font>
   }<font></font>
   <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">EGR</span> :</span> <span class="hljs-keyword">public</span> RegisterBase&lt;<span class="hljs-number">0x40010014</span>, <span class="hljs-number">32</span>, WriteMode&gt;<font></font>
   {<font></font>
   }<font></font>
}<font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{<font></font>
  TIM1::CR1::Set(<span class="hljs-number">10</span>) ;
  <span class="hljs-keyword">auto</span> reg = TIM1::CR1::Get() ;<font></font>
<font></font>
 <span class="hljs-comment">// ,    </span><font></font>
  reg = TIM1::EGR::Get() <font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コンパイラは、メソッドを出力して以来</font></font><code>Get()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">のみアクセスモードがから継承されているレジスタのため</font></font><code>ReadMode</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、およびメソッド</font></font><code>Set()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">のアクセスモードがから継承されているレジスタの</font></font><code>WriteMode</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アクセス方法を誤って使用する場合には、コンパイル段階でエラーが発生します。</font><font style="vertical-align: inherit;">そして、Clionなどの最新の開発ツールを使用すると、コーディング段階でもコードアナライザーからの警告が表示されます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/vc/we/gu/vcwegu6a0vulgfcvzjkaum9ac4a.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
レジスタへのアクセスが安全になりました。このコードでは、このレジスタに受け入れられないことを行うことはできませんが、さらに進めたいと思います。レジスタ全体ではなく、フィールドを参照してください。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">田畑</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アドレスではなくフィールドには、レジスタの先頭を基準としたシフト値があります。</font><font style="vertical-align: inherit;">さらに、フィールドの値をもたらす必要があるアドレスまたはタイプを知るためには、レジスタリンクが必要です。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-comment">//       </span>
<span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> Reg, <span class="hljs-keyword">size_t</span> offset, <span class="hljs-keyword">size_t</span> size, <span class="hljs-keyword">typename</span> AccessMode&gt;
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">RegisterField</span>
{</span>
  <span class="hljs-keyword">using</span> RegType = <span class="hljs-keyword">typename</span> Reg::Type ;
  <span class="hljs-keyword">using</span> Register = Reg ;
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">constexpr</span> RegType Offset = offset ;
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">constexpr</span> RegType Size = size ;
  <span class="hljs-keyword">using</span> Access = AccessMode ;<font></font>
<font></font>
  <span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T = AccessMode,<font></font>
        class = <span class="hljs-keyword">typename</span> <span class="hljs-built_in">std</span>::<span class="hljs-keyword">enable_if_t</span>&lt;<span class="hljs-built_in">std</span>::is_base_of&lt;WriteMode, T&gt;::value&gt;&gt;
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> Set(RegType value)<font></font>
  {<font></font>
    assert(value &lt; (<span class="hljs-number">1U</span> &lt;&lt; size)) ;
    <span class="hljs-comment">//CriticalSection cs ; </span><font></font>
<font></font>
    <span class="hljs-comment">//   </span>
    RegType newRegValue = *<span class="hljs-keyword">reinterpret_cast</span>&lt;RegType *&gt;(Register::Address) ; <font></font>
<font></font>
    <span class="hljs-comment">//      </span>
    newRegValue &amp;= ~ (((<span class="hljs-number">1U</span> &lt;&lt; size) - <span class="hljs-number">1U</span>) &lt;&lt; offset); <font></font>
<font></font>
    <span class="hljs-comment">//   </span><font></font>
    newRegValue |= (value &lt;&lt; offset) ; <font></font>
    <font></font>
    <span class="hljs-comment">//     </span>
    *<span class="hljs-keyword">reinterpret_cast</span>&lt;RegType *&gt;(Reg::Address) = newRegValue ; <font></font>
  }<font></font>
  <font></font>
  __forceinline <span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T = AccessMode,<font></font>
        class = <span class="hljs-keyword">typename</span> <span class="hljs-built_in">std</span>::<span class="hljs-keyword">enable_if_t</span>&lt;<span class="hljs-built_in">std</span>::is_base_of&lt;ReadMode, T&gt;::value&gt;&gt;
  <span class="hljs-keyword">inline</span> <span class="hljs-keyword">static</span> RegType Get()<font></font>
  {<font></font>
    <font></font>
    <span class="hljs-keyword">return</span> ((*<span class="hljs-keyword">reinterpret_cast</span>&lt;RegType *&gt;(Reg::Address)) &amp;  <font></font>
            (((<span class="hljs-number">1U</span> &lt;&lt; size) - <span class="hljs-number">1U</span>) &lt;&lt; offset)) &gt;&gt; offset ; <font></font>
  }<font></font>
};</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その後、すでに次のことを実行できます。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">TIM1</span>
{</span>
   <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">CR1</span> :</span> <span class="hljs-keyword">public</span> RegisterBase&lt;<span class="hljs-number">0x40010000</span>, <span class="hljs-number">32</span>, ReadWriteMode&gt;<font></font>
   {<font></font>
     <span class="hljs-keyword">using</span> CKD = RegisterField&lt;TIM1::CR1, <span class="hljs-number">8</span>, <span class="hljs-number">2</span>, ReadWriteMode&gt; ;
     <span class="hljs-keyword">using</span> ARPE = RegisterField&lt;TIM1::CR1, <span class="hljs-number">7</span>, <span class="hljs-number">1</span>, ReadWriteMode&gt; ;
     <span class="hljs-keyword">using</span> CMS = RegisterField&lt;TIM1::CR1, <span class="hljs-number">5</span>, <span class="hljs-number">2</span>, ReadWriteMode&gt; ;
     <span class="hljs-keyword">using</span> DIR = RegisterField&lt;TIM1::CR1, <span class="hljs-number">4</span>, <span class="hljs-number">1</span>, ReadWriteMode&gt; ;
     <span class="hljs-keyword">using</span> OPM = RegisterField&lt;TIM1::CR1, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>, ReadWriteMode&gt; ;
     <span class="hljs-keyword">using</span> URS = RegisterField&lt;TIM1::CR1, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>, ReadWriteMode&gt; ;
     <span class="hljs-keyword">using</span> UDIS = RegisterField&lt;TIM1::CR1, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, ReadWriteMode&gt; ;
     <span class="hljs-keyword">using</span> CEN = RegisterField&lt;TIM1::CR1, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, ReadWriteMode&gt; ;<font></font>
   }<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{
  <span class="hljs-comment">//   CR1  9   1,  8  0</span>
  TIM1::CR1::CKD::Set(<span class="hljs-number">2U</span>) ; 
  <span class="hljs-keyword">auto</span> reg = TIM1::CR1::CEN::Get() ;<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一般的にすべてが良いように見えますが、それでも完全に明確ではありませんが、それはどういう</font></font><code>TIM1::CR1::CKD::Set(2)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">意味</font></font><code>Set()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ですか</font><font style="vertical-align: inherit;">、関数に渡された魔法の2つは何を意味し</font><font style="vertical-align: inherit;">ますか？</font><font style="vertical-align: inherit;">そして、メソッドが返す数は何を意味し</font></font><code>TIM1::CR1::CEN::Get()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ますか？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
シームレスにフィールド値に進みます。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">フィールド値</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
フィールド値の抽象化は本質的にフィールドでもありますが、1つの状態のみを受け入れることができます。</font><font style="vertical-align: inherit;">属性がフィールドの抽象化に追加されます-実際の値とフィールドへのリンク。</font><font style="vertical-align: inherit;">方法</font></font><code>Set()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">フィールドの値を設定するには、方法と同じである</font></font><code>Set()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">値自体は、それだけで設定する必要があり、事前に知られており、メソッドに渡す必要がないことを除いて、フィールドを設定します。</font><font style="vertical-align: inherit;">ただし、このメソッド</font></font><code>Get()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は意味がありません。この値が設定されているかどうかを確認するのではなく、このメソッドをメソッドに置き換え</font></font><code>IsSet()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-comment">//       </span>
<span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> Field, <span class="hljs-keyword">typename</span> Field::Register::Type value&gt;
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">FieldValueBase</span>
{</span>
  <span class="hljs-keyword">using</span> RegType = <span class="hljs-keyword">typename</span> Field::Register::Type ;<font></font>
<font></font>
  <span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T = <span class="hljs-keyword">typename</span> Field::Access,<font></font>
        class = <span class="hljs-keyword">typename</span> <span class="hljs-built_in">std</span>::<span class="hljs-keyword">enable_if_t</span>&lt;<span class="hljs-built_in">std</span>::is_base_of&lt;WriteMode, T&gt;::value&gt;&gt;
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> Set()<font></font>
  {<font></font>
    RegType newRegValue = *<span class="hljs-keyword">reinterpret_cast</span>&lt;RegType *&gt;(Field::Register::Address) ; <font></font>
    newRegValue &amp;= ~ (((<span class="hljs-number">1U</span> &lt;&lt; Field::Size) - <span class="hljs-number">1U</span>) &lt;&lt; Field::Offset); <font></font>
    newRegValue |= (value &lt;&lt; Field::Offset) ; <font></font>
    *<span class="hljs-keyword">reinterpret_cast</span>&lt;RegType *&gt;(Field::Register::Address) = newRegValue ; <font></font>
  }<font></font>
<font></font>
  __forceinline <span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T = <span class="hljs-keyword">typename</span> Field::Access,<font></font>
        class = <span class="hljs-keyword">typename</span> <span class="hljs-built_in">std</span>::<span class="hljs-keyword">enable_if_t</span>&lt;<span class="hljs-built_in">std</span>::is_base_of&lt;ReadMode, T&gt;::value&gt;&gt;
  <span class="hljs-keyword">inline</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">bool</span> IsSet()<font></font>
  {<font></font>
    <span class="hljs-keyword">return</span> ((*<span class="hljs-keyword">reinterpret_cast</span>&lt;RegType *&gt;(Field::Register::Address)) &amp;
           <span class="hljs-keyword">static_cast</span>&lt;RegType&gt;(((<span class="hljs-number">1U</span> &lt;&lt; Field::Size) - <span class="hljs-number">1U</span>) &lt;&lt; Field::Offset)) ==<font></font>
           (value &lt;&lt; Field::Offset) ;<font></font>
  }<font></font>
};</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
レジスタフィールドは、その値のセットで記述できます。</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タイマーTIM1のCR1レジスタフィールドの値</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> Reg, <span class="hljs-keyword">size_t</span> offset, <span class="hljs-keyword">size_t</span> size, <span class="hljs-keyword">typename</span> AccessMode&gt; 
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">TIM_CR_CKD_Values</span>:</span> <span class="hljs-keyword">public</span> RegisterField&lt;Reg, offset, size, AccessMode&gt; <font></font>
{<font></font>
  <span class="hljs-keyword">using</span> DividedBy1 = FieldValue&lt;TIM_CR_CKD_Values, <span class="hljs-number">0U</span>&gt; ;
  <span class="hljs-keyword">using</span> DividedBy2 = FieldValue&lt;TIM_CR_CKD_Values, <span class="hljs-number">1U</span>&gt; ;
  <span class="hljs-keyword">using</span> DividedBy4 = FieldValue&lt;TIM_CR_CKD_Values, <span class="hljs-number">2U</span>&gt; ;
  <span class="hljs-keyword">using</span> Reserved = FieldValue&lt;TIM_CR_CKD_Values, <span class="hljs-number">3U</span>&gt; ;<font></font>
} ;<font></font>
<font></font>
<span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> Reg, <span class="hljs-keyword">size_t</span> offset, <span class="hljs-keyword">size_t</span> size, <span class="hljs-keyword">typename</span> AccessMode&gt; 
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">TIM_CR_ARPE_Values</span>:</span> <span class="hljs-keyword">public</span> RegisterField&lt;Reg, offset, size, AccessMode&gt; <font></font>
{<font></font>
  <span class="hljs-keyword">using</span> ARRNotBuffered = FieldValue&lt;TIM_CR_ARPE_Values, <span class="hljs-number">0U</span>&gt; ;
  <span class="hljs-keyword">using</span> ARRBuffered = FieldValue&lt;TIM_CR_ARPE_Values, <span class="hljs-number">1U</span>&gt; ;<font></font>
} ;<font></font>
<font></font>
<span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> Reg, <span class="hljs-keyword">size_t</span> offset, <span class="hljs-keyword">size_t</span> size, <span class="hljs-keyword">typename</span> AccessMode&gt; 
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">TIM_CR_CMS_Values</span>:</span> <span class="hljs-keyword">public</span> RegisterField&lt;Reg, offset, size, AccessMode&gt; <font></font>
{<font></font>
  <span class="hljs-keyword">using</span> CenterAlignedMode0 = FieldValue&lt;TIM_CR_CMS_Values, <span class="hljs-number">0U</span>&gt; ;
  <span class="hljs-keyword">using</span> CenterAlignedMode1 = FieldValue&lt;TIM_CR_CMS_Values, <span class="hljs-number">1U</span>&gt; ;
  <span class="hljs-keyword">using</span> CenterAlignedMode2 = FieldValue&lt;TIM_CR_CMS_Values, <span class="hljs-number">2U</span>&gt; ;
  <span class="hljs-keyword">using</span> CenterAlignedMode3 = FieldValue&lt;TIM_CR_CMS_Values, <span class="hljs-number">3U</span>&gt; ;<font></font>
} ;<font></font>
<font></font>
<span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> Reg, <span class="hljs-keyword">size_t</span> offset, <span class="hljs-keyword">size_t</span> size, <span class="hljs-keyword">typename</span> AccessMode&gt; 
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">TIM_CR_DIR_Values</span>:</span> <span class="hljs-keyword">public</span> RegisterField&lt;Reg, offset, size, AccessMode&gt; <font></font>
{<font></font>
  <span class="hljs-keyword">using</span> Upcounter = FieldValue&lt;TIM_CR_DIR_Values, <span class="hljs-number">0U</span>&gt; ;
  <span class="hljs-keyword">using</span> Downcounter = FieldValue&lt;TIM_CR_DIR_Values, <span class="hljs-number">1U</span>&gt; ;<font></font>
} ;<font></font>
<font></font>
<span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> Reg, <span class="hljs-keyword">size_t</span> offset, <span class="hljs-keyword">size_t</span> size, <span class="hljs-keyword">typename</span> AccessMode&gt; 
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">TIM_CR_OPM_Values</span>:</span> <span class="hljs-keyword">public</span> RegisterField&lt;Reg, offset, size, AccessMode&gt; <font></font>
{<font></font>
  <span class="hljs-keyword">using</span> ContinueAfterUEV = FieldValue&lt;TIM_CR_OPM_Values, <span class="hljs-number">0U</span>&gt; ;
  <span class="hljs-keyword">using</span> StopAfterUEV = FieldValue&lt;TIM_CR_OPM_Values, <span class="hljs-number">1U</span>&gt; ;<font></font>
} ;<font></font>
<font></font>
<span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> Reg, <span class="hljs-keyword">size_t</span> offset, <span class="hljs-keyword">size_t</span> size, <span class="hljs-keyword">typename</span> AccessMode&gt; 
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">TIM_CR_URS_Values</span>:</span> <span class="hljs-keyword">public</span> RegisterField&lt;Reg, offset, size, AccessMode&gt; <font></font>
{<font></font>
  <span class="hljs-keyword">using</span> Any = FieldValue&lt;TIM_CR_URS_Values, <span class="hljs-number">0U</span>&gt; ;
  <span class="hljs-keyword">using</span> Overflow = FieldValue&lt;TIM_CR_URS_Values, <span class="hljs-number">1U</span>&gt; ;<font></font>
} ;<font></font>
<font></font>
<span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> Reg, <span class="hljs-keyword">size_t</span> offset, <span class="hljs-keyword">size_t</span> size, <span class="hljs-keyword">typename</span> AccessMode&gt; 
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">TIM_CR_UDIS_Values</span>:</span> <span class="hljs-keyword">public</span> RegisterField&lt;Reg, offset, size, AccessMode&gt; <font></font>
{<font></font>
  <span class="hljs-keyword">using</span> Enable  = FieldValue&lt;TIM_CR_UDIS_Values, <span class="hljs-number">0U</span>&gt; ;
  <span class="hljs-keyword">using</span> Disable = FieldValue&lt;TIM_CR_UDIS_Values, <span class="hljs-number">1U</span>&gt; ;<font></font>
} ;<font></font>
<font></font>
<span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> Reg, <span class="hljs-keyword">size_t</span> offset, <span class="hljs-keyword">size_t</span> size, <span class="hljs-keyword">typename</span> AccessMode&gt; 
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">TIM_CR_CEN_Values</span>:</span> <span class="hljs-keyword">public</span> RegisterField&lt;Reg, offset, size, AccessMode&gt; <font></font>
{<font></font>
  <span class="hljs-keyword">using</span> Disable = FieldValue&lt;TIM_CR_CEN_Values, <span class="hljs-number">0U</span>&gt; ;
  <span class="hljs-keyword">using</span> Enable = FieldValue&lt;TIM_CR_CEN_Values, <span class="hljs-number">1U</span>&gt; ;<font></font>
} ;<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、レジスタCR1自体はすでに次のように記述されています。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">TIM1</span>
{</span>
  <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">CR1</span> :</span> <span class="hljs-keyword">public</span> RegisterBase&lt;<span class="hljs-number">0x40010000</span>, <span class="hljs-number">32</span>, ReadWriteMode&gt;<font></font>
  {<font></font>
    <span class="hljs-keyword">using</span> CKD = TIM_CR1_CKD_Values&lt;TIM1::CR1, <span class="hljs-number">8</span>, <span class="hljs-number">2</span>, ReadWriteMode&gt; ;
    <span class="hljs-keyword">using</span> ARPE = TIM_CR1_ARPE_Values&lt;TIM1::CR1, <span class="hljs-number">7</span>, <span class="hljs-number">1</span>, ReadWriteMode&gt; ;
    <span class="hljs-keyword">using</span> CMS = TIM_CR1_CMS_Values&lt;TIM1::CR1, <span class="hljs-number">5</span>, <span class="hljs-number">2</span>, ReadWriteMode&gt; ;
    <span class="hljs-keyword">using</span> DIR = TIM_CR1_DIR_Values&lt;TIM1::CR1, <span class="hljs-number">4</span>, <span class="hljs-number">1</span>, ReadWriteMode&gt; ;
    <span class="hljs-keyword">using</span> OPM = TIM_CR1_OPM_Values&lt;TIM1::CR1, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>, ReadWriteMode&gt; ;
    <span class="hljs-keyword">using</span> URS = TIM_CR1_URS_Values&lt;TIM1::CR1, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>, ReadWriteMode&gt; ;
    <span class="hljs-keyword">using</span> UDIS = TIM_CR1_UDIS_Values&lt;TIM1::CR1, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, ReadWriteMode&gt; ;
    <span class="hljs-keyword">using</span> CEN = TIM_CR1_CEN_Values&lt;TIM1::CR1, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, ReadWriteMode&gt; ;<font></font>
  } ;<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これで、レジスタフィールド値を直接設定して読み取ることができます。たとえば、</font><font style="vertical-align: inherit;">CR1 CENタイマーTIM1 </font></font><code>Set()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の値</font></font><code>Enable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">フィールドで</font><font style="vertical-align: inherit;">メソッドを呼び出すのに十分なタイマーアカウントを開始する必要がある場合</font></font><code>TIM1::CR1::CEN::Enable::Set() ;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">コードでは、次のようになります。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{
  <span class="hljs-keyword">if</span> (TIM1::CR1::CKD::DividedBy2::IsSet())<font></font>
  {<font></font>
    TIM1::ARR::Set(<span class="hljs-number">100U</span>) ;<font></font>
    TIM1::CR1::CEN::Enable::Set() ;<font></font>
  }<font></font>
}<font></font>
</code></pre><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">比較のために、Cヘッダーを使用した同じこと：</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{
  <span class="hljs-keyword">if</span>((TIM1-&gt;CR1 &amp; TIM_CR1_CKD_Msk) == TIM_CR1_CKD_0)<font></font>
  {<font></font>
     TIM1-&gt;ARR = <span class="hljs-number">100U</span> ;<font></font>
     regValue = TIM1-&gt;CR1 ;<font></font>
     regValue &amp;=~(TIM_CR1_CEN_Msk) ;<font></font>
     regValue |= TIM_CR1_CEN ;<font></font>
     TIM1-&gt;CR1 = regValue ;<font></font>
  }<font></font>
}<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、主な改善が行われ、レジスタ、そのフィールド、および値へのシンプルで理解可能なアクセスが可能になります。</font><font style="vertical-align: inherit;">アクセスはコンパイルレベルで制御され、レジスタ、フィールド、または値が書き込みまたは読み取りを許可しない場合、コードがマイクロコントローラにフラッシュされる前でも、これは明らかです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ただし、まだ1つの欠点があります。同時に複数のフィールド値をレジスターに入れることは不可能です。</font><font style="vertical-align: inherit;">これを行うために必要なことを想像してみてください。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{
   <span class="hljs-keyword">uint32_t</span> regValue = TIM1-&gt;CR1 ;<font></font>
   regValue &amp;=~(TIM_CR1_CKD_Msk | TIM_CR1_DIR) ;<font></font>
   regValue |= (TIM_CR1_CEN | TIM_CR1_CKD_0 | TIM_CR1_CKD_0) ;<font></font>
   TIM1-&gt;CR1 = regValue ;<font></font>
}<font></font>
</code></pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 これを行うには</font></font><code>Set(...)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、可変数の引数を使用</font><font style="vertical-align: inherit;">してレジスター</font><font style="vertical-align: inherit;">で</font><font style="vertical-align: inherit;">メソッドを作成するか</font><font style="vertical-align: inherit;">、テンプレートで設定する必要があるフィールドの値を指定する必要があります。</font><font style="vertical-align: inherit;">それら。</font><font style="vertical-align: inherit;">次のオプションのいずれかを実装します。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{
  <span class="hljs-comment">// 1,      Set()</span><font></font>
  TIM1::CR1::Set(TIM1::CR1::DIR::Upcounter, <font></font>
                TIM1::CR1::CKD::DividedBy4, <font></font>
                TIM1::CR1::CEN::Enable) ;<font></font>
<font></font>
   <span class="hljs-comment">// 2,    </span><font></font>
   TIM1::CR1&lt;TIM1::CR1::DIR::Upcounter, <font></font>
                TIM1::CR1::CKD::DividedBy4, <font></font>
                TIM1::CR1::CEN::Enable&gt;::Set() ;<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
関数への引数の数が可変のオプションは、コンパイラーによって常に最適化されるわけではなく、実際にはすべてのパラメーターがレジスターとスタックを介して転送され、RAMの速度と費用に影響する可能性があるため、設定するビットのマスクの計算がステージで発生する2番目のアプローチを選択しましたコンパイル。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
可変数の引数を持つテンプレートを使用します。</font><font style="vertical-align: inherit;">値のリストは、タイプのリストとして渡されます。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-comment">//    ,         </span>
<span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">uint32_t</span> address, <span class="hljs-keyword">size_t</span> size, <span class="hljs-keyword">typename</span> AccessMode, 
    <span class="hljs-keyword">typename</span> ...Args&gt;
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Register</span>
{</span>
  <span class="hljs-keyword">private</span>:<font></font>
 ...<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
レジスタに目的の値を設定するには、次のものが必要です。 </font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">値のセット全体から1つのマスクを形成し、レジスタの目的のビットをリセットします。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">値のセット全体から1つの値を生成して、目的のビットを設定します。</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらは、コンパイル段階で必要なすべてのアクションを実行するconstexprメソッドである必要があります。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-comment">//    ,         </span>
<span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">uint32_t</span> address, <span class="hljs-keyword">size_t</span> size, <span class="hljs-keyword">typename</span> AccessMode, 
    <span class="hljs-keyword">typename</span> ...Args&gt;
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Register</span>
{</span>
<span class="hljs-keyword">private</span>:
  <span class="hljs-comment">// ,    </span>
  <span class="hljs-comment">//     .</span>
  <span class="hljs-function">__forceinline <span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">constexpr</span> <span class="hljs-keyword">auto</span> <span class="hljs-title">GetIndividualMask</span><span class="hljs-params">()</span>
  </span>{<font></font>
    Type result = T::Mask &lt;&lt; T::Offset ;<font></font>
    <span class="hljs-keyword">return</span> result ;<font></font>
  }<font></font>
  <font></font>
  <span class="hljs-comment">// ,    </span>
  <span class="hljs-comment">//       .</span>
  <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">constexpr</span> <span class="hljs-keyword">auto</span> <span class="hljs-title">GetMask</span><span class="hljs-params">()</span>
  </span>{
    <span class="hljs-comment">//      </span>
    <span class="hljs-keyword">const</span> <span class="hljs-keyword">auto</span> values = {GetIndividualMask&lt;Args&gt;()...} ;  <font></font>
    Type result = <span class="hljs-number">0U</span>L;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> <span class="hljs-keyword">const</span> v: values)<font></font>
    {<font></font>
      <span class="hljs-comment">//      </span><font></font>
      result |= v ;  <font></font>
    }<font></font>
    <span class="hljs-keyword">return</span> result ;<font></font>
  }<font></font>
<font></font>
  <span class="hljs-comment">//     </span>
  <span class="hljs-function">__forceinline <span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">constexpr</span> <span class="hljs-keyword">auto</span> <span class="hljs-title">GetIndividualValue</span><span class="hljs-params">()</span>
  </span>{<font></font>
    Type result = T::Value &lt;&lt; T::Offset ;<font></font>
    <span class="hljs-keyword">return</span> result ;<font></font>
  }<font></font>
  <font></font>
  <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">constexpr</span> <span class="hljs-keyword">auto</span> <span class="hljs-title">GetValue</span><span class="hljs-params">()</span>
  </span>{
    <span class="hljs-keyword">const</span> <span class="hljs-keyword">auto</span> values = {GetIndividualValue&lt;Args&gt;()...};<font></font>
    Type result = <span class="hljs-number">0U</span>L;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> <span class="hljs-keyword">auto</span> v: values)<font></font>
    {<font></font>
      result |= v ;<font></font>
    }<font></font>
    <span class="hljs-keyword">return</span> result ;<font></font>
  }<font></font>
};<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
パブリックメソッドのみを定義し</font></font><code>Set()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code>IsSet()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-comment">//    ,         </span>
<span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">uint32_t</span> address, <span class="hljs-keyword">size_t</span> size, <span class="hljs-keyword">typename</span> AccessMode,  <span class="hljs-keyword">typename</span> ...Args&gt;
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Register</span>
{</span>
<span class="hljs-keyword">public</span>:
  <span class="hljs-keyword">using</span> Type = <span class="hljs-keyword">typename</span> RegisterType&lt;size&gt;::Type;<font></font>
<font></font>
  <span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T = AccessMode,<font></font>
          class = <span class="hljs-keyword">typename</span> <span class="hljs-built_in">std</span>::<span class="hljs-keyword">enable_if_t</span>&lt;<span class="hljs-built_in">std</span>::is_base_of&lt;WriteMode, T&gt;::value&gt;&gt;
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> Set()<font></font>
  {<font></font>
    Type newRegValue = *<span class="hljs-keyword">reinterpret_cast</span>&lt;Type *&gt;(address) ; <font></font>
<font></font>
    <span class="hljs-comment">//GetMask()    ,    </span><font></font>
    newRegValue &amp;= ~GetMask() ; <font></font>
<font></font>
    <span class="hljs-comment">//GetValue()    ,    </span><font></font>
    newRegValue |= GetValue() ; <font></font>
<font></font>
    <span class="hljs-comment">//    </span>
    *<span class="hljs-keyword">reinterpret_cast</span>&lt;Type *&gt;(address) = newRegValue ; <font></font>
  }<font></font>
  <font></font>
  <span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T = AccessMode,<font></font>
          class = <span class="hljs-keyword">typename</span> <span class="hljs-built_in">std</span>::<span class="hljs-keyword">enable_if_t</span>&lt;<span class="hljs-built_in">std</span>::is_base_of&lt;ReadMode, T&gt;::value&gt;&gt;
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">bool</span> IsSet()<font></font>
  {<font></font>
    Type newRegValue = *<span class="hljs-keyword">reinterpret_cast</span>&lt;Type *&gt;(address) ;
    <span class="hljs-keyword">return</span> ((newRegValue &amp; GetMask()) == GetValue()) ;<font></font>
  }<font></font>
<span class="hljs-keyword">private</span>:<font></font>
...<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ほとんどすべて、1つの小さな問題が残っています。そのような愚かさを実行できます。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{
  <span class="hljs-comment">// ,     TIM1::CR1 </span><font></font>
  TIM1::CR1&lt;TIM2::CR1::Enabled, <font></font>
           TIM1::CR2::OIS1::OC1OutputIs0&gt;::Set() ;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
明らかに、値のセットで大文字と小文字が区別されることをどういうわけか確認する必要があります。これを行うのは非常に簡単</font></font><code>FieldValueBaseType</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。</font><font style="vertical-align: inherit;">テンプレートパラメーターに追加の型を追加し、それを呼び出しましょう</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">これで、レジスタとこのレジスタに設定できるフィールドの値の両方が同じ</font></font><code>FieldValueBaseType</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タイプに</font><font style="vertical-align: inherit;">なるはずです</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">このレジスタにフィールド値の所有権のチェックを追加します</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">uint32_t</span> address, <span class="hljs-keyword">size_t</span> size, <span class="hljs-keyword">typename</span> AccessMode, 
        <span class="hljs-keyword">typename</span> FieldValueBaseType,  <span class="hljs-keyword">typename</span> ...Args&gt;
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Register</span>
{</span>
<span class="hljs-keyword">private</span>:
    <span class="hljs-comment">//     BaseType     FieldValueBaseType,    .</span>
  __forceinline <span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T,
          <span class="hljs-class"><span class="hljs-keyword">class</span> = <span class="hljs-title">typename</span> <span class="hljs-title">std</span>:</span>:<span class="hljs-keyword">enable_if_t</span>&lt;<span class="hljs-built_in">std</span>::is_same&lt;FieldValueBaseType, 
          <span class="hljs-keyword">typename</span> T::BaseType&gt;::value&gt;&gt;
  <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">constexpr</span> <span class="hljs-keyword">auto</span> <span class="hljs-title">GetIndividualMask</span><span class="hljs-params">()</span>
  </span>{<font></font>
    Type result = T::Mask &lt;&lt; T::Offset ;<font></font>
    <span class="hljs-keyword">return</span> result ;<font></font>
  }<font></font>
  <font></font>
  <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">constexpr</span> <span class="hljs-keyword">auto</span> <span class="hljs-title">GetMask</span><span class="hljs-params">()</span>
  </span>{
    <span class="hljs-keyword">const</span> <span class="hljs-keyword">auto</span> values = {GetIndividualMask&lt;Args&gt;()...} ;  <font></font>
    Type result = <span class="hljs-number">0U</span>L;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> <span class="hljs-keyword">const</span> v: values)<font></font>
    {<font></font>
      result |= v ;  <font></font>
    }<font></font>
    <span class="hljs-keyword">return</span> result ;<font></font>
  }<font></font>
<font></font>
  <span class="hljs-comment">//     BaseType     FieldValueBaseType,    .   </span>
  __forceinline <span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T,
          <span class="hljs-class"><span class="hljs-keyword">class</span> = <span class="hljs-title">typename</span> <span class="hljs-title">std</span>:</span>:<span class="hljs-keyword">enable_if_t</span>&lt;<span class="hljs-built_in">std</span>::is_same&lt;FieldValueBaseType, 
       <span class="hljs-keyword">typename</span> T::BaseType&gt;::value&gt;&gt;
  <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">constexpr</span> <span class="hljs-keyword">auto</span> <span class="hljs-title">GetIndividualValue</span><span class="hljs-params">()</span>
  </span>{<font></font>
    Type result = T::Value &lt;&lt; T::Offset ;<font></font>
    <span class="hljs-keyword">return</span> result ;<font></font>
  }<font></font>
  <font></font>
  <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">constexpr</span> <span class="hljs-keyword">auto</span> <span class="hljs-title">GetValue</span><span class="hljs-params">()</span>
  </span>{
    <span class="hljs-keyword">const</span> <span class="hljs-keyword">auto</span> values = {GetIndividualValue&lt;Args&gt;()...};<font></font>
    Type result = <span class="hljs-number">0U</span>L;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> <span class="hljs-keyword">auto</span> v: values)<font></font>
    {<font></font>
      result |= v ;<font></font>
    }<font></font>
    <span class="hljs-keyword">return</span> result ;<font></font>
  }<font></font>
};<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
複数のフィールド値を設定する場合、SFINAEメカニズムは、この値がレジスターフィールドに許可されているタイプと同じタイプかどうかを再度チェックします。そうである場合、メソッドはコンパイラーによって表示されます。そうでない場合、コンパイル時にエラーが発生します。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
TIM1 CR1レジスタの完全な説明は次のようになります。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">TIM1</span>
{</span>
  <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">TIM1CR1Base</span> {</span>} ;<font></font>
<font></font>
  <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">CR1</span> :</span> <span class="hljs-keyword">public</span> RegisterBase&lt;<span class="hljs-number">0x40010000</span>, <span class="hljs-number">32</span>, ReadWriteMode&gt;<font></font>
  {<font></font>
    <span class="hljs-keyword">using</span> CKD = TIM_CR_CKD_Values&lt;TIM1::CR1, <span class="hljs-number">8</span>, <span class="hljs-number">2</span>, ReadWriteMode, TIM1CR1Base&gt; ;
    <span class="hljs-keyword">using</span> ARPE = TIM_CR_ARPE_Values&lt;TIM1::CR1, <span class="hljs-number">7</span>, <span class="hljs-number">1</span>, ReadWriteMode, TIM1CR1Base&gt; ;
    <span class="hljs-keyword">using</span> CMS = TIM_CR_CMS_Values&lt;TIM1::CR1, <span class="hljs-number">5</span>, <span class="hljs-number">2</span>, ReadWriteMode, TIM1CR1Base&gt; ;
    <span class="hljs-keyword">using</span> DIR = TIM_CR_DIR_Values&lt;TIM1::CR1, <span class="hljs-number">4</span>, <span class="hljs-number">1</span>, ReadWriteMode, TIM1CR1Base&gt; ;
    <span class="hljs-keyword">using</span> OPM = TIM_CR_OPM_Values&lt;TIM1::CR1, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>, ReadWriteMode, TIM1CR1Base&gt; ;
    <span class="hljs-keyword">using</span> URS = TIM_CR_URS_Values&lt;TIM1::CR1, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>, ReadWriteMode, TIM1CR1Base&gt; ;
    <span class="hljs-keyword">using</span> UDIS = TIM_CR_UDIS_Values&lt;TIM1::CR1, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, ReadWriteMode, TIM1CR1Base&gt; ;
    <span class="hljs-keyword">using</span> CEN = TIM_CR_CEN_Values&lt;TIM1::CR1, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, ReadWriteMode, TIM1CR1Base&gt; ;<font></font>
  } ;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そのため、レジスタフィールドの任意の値を個別に変更して確認できるようになり、複数のフィールド値を一度に設定して確認できるようになりました。</font><font style="vertical-align: inherit;">フィールドの値を変更して取得するか、登録することができます。同時に、何も混乱させず、無効な操作を実行したり、レジスタフィールドに間違ったビットを書き込んだりしないようにしてください。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、Cで元のバージョンに戻りましょう。</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">初期オプション</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span>
</span>{
  <span class="hljs-comment">//     GPIOA</span><font></font>
   <font></font>
  <span class="hljs-comment">//,    AHB1ENR </span><font></font>
   RCC-&gt;APB1ENR |= RCC_AHB1ENR_GPIOAEN ; <font></font>
<font></font>
  <span class="hljs-comment">//    ,      </span><font></font>
  RCC-&gt;AHB1ENR = RCC_AHB1ENR_GPIOAEN; <font></font>
<font></font>
  <span class="hljs-comment">//,  TIM1    APB2 </span><font></font>
  RCC-&gt;APB1ENR  |=  RCC_APB1ENR_TIM2EN | RCC_APB2ENR_TIM1EN;<font></font>
 <font></font>
  <span class="hljs-comment">// - ,        .      </span>
  <span class="hljs-keyword">auto</span> result = GPIOA-&gt;BSRR ; 
  <span class="hljs-keyword">if</span> (result &amp; GPIO_BSRR_BS1)  <font></font>
  {<font></font>
     <span class="hljs-comment">//do something</span><font></font>
  }<font></font>
 <font></font>
  <span class="hljs-comment">//-     .   ...</span><font></font>
  GPIOA-&gt;IDR = GPIO_IDR_ID5 ;<font></font>
</code></pre></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、新しいアプローチで同じことをしてみてください：</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span>
</span>{
   <span class="hljs-comment">//     GPIOA</span>
   <span class="hljs-comment">// ,   APB1ENR   GPIOAEN</span><font></font>
   RCC::APB1ENR::GPIOAEN::Enable::Set() ; <font></font>
  <font></font>
   <span class="hljs-comment">// ,     GPIOA</span><font></font>
   RCC::AHB1ENR::GPIOAEN::Enable::Set() ; <font></font>
<font></font>
   <span class="hljs-comment">// , RCC::APB2ENR::TIM1EN::Enable  </span>
   <span class="hljs-comment">//   APB1ENR</span><font></font>
   RCC::APB1ENRPack&lt;RCC::APB1ENR::TIM2EN::Enable,<font></font>
                    RCC::APB2ENR::TIM1EN::Enable&gt;::Set();<font></font>
<font></font>
   <span class="hljs-comment">// ,  BSRR        </span>
   <span class="hljs-keyword">auto</span> result = GPIOA::BSRR::Get() ; <font></font>
<font></font>
   <span class="hljs-comment">// ,  Reset   </span>
   <span class="hljs-keyword">if</span> (GPIOA::BSRR::BS1::Reset::IsSet())  <font></font>
   {<font></font>
      <span class="hljs-comment">//do something</span><font></font>
   }<font></font>
   <font></font>
   <span class="hljs-comment">// ,      </span><font></font>
   GPIOA::IDR::IDR5::On::Set() <font></font>
}<font></font>
</code></pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらのいずれの場合でも、コンパイル段階でエラーが発生します。これは、まさに達成したことです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さて、レジスタとそのフィールドへの美しく安全なアクセスを提供しましたが、速度はどうですか？</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パフォーマンス</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
比較のために、私たちのアプローチがいかに最適であるか、クロックをポートAに供給し、3つのポートを出力モードに設定し、これら3つのポート1に出力ポートを設定するCおよびC ++コードを使用します。</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cコード：</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{  
  <span class="hljs-keyword">uint32_t</span> res = RCC-&gt;AHB2ENR;<font></font>
  res &amp;=~ RCC_AHB1ENR_GPIOAEN_Msk ;<font></font>
  res |= RCC_AHB1ENR_GPIOAEN ;<font></font>
  RCC-&gt;AHB2ENR = res ; <font></font>
  <font></font>
  res = GPIOA-&gt;MODER ;<font></font>
  res &amp;=~ (GPIO_MODER_MODER5 | <font></font>
           GPIO_MODER_MODER4 | <font></font>
           GPIO_MODER_MODER1) ;<font></font>
  res |= (GPIO_MODER_MODER5_0 | <font></font>
          GPIO_MODER_MODER4_0 |<font></font>
          GPIO_MODER_MODER1_0) ;<font></font>
  GPIOA-&gt;MODER = res ;<font></font>
  <font></font>
  GPIOA-&gt;BSRR = (GPIO_BSRR_BS5 | GPIO_BSRR_BS4 | GPIO_BSRR_BS1) ; <font></font>
  <font></font>
  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span> ;<font></font>
}<font></font>
</code></pre><br>
</div></div><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C ++コード：</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{<font></font>
  <font></font>
  RCC::AHB1ENR::GPIOAEN::Enable::Set() ;<font></font>
  <font></font>
  GPIOA::MODERPack&lt;<font></font>
         GPIOA::MODER::MODER5::Output,<font></font>
         GPIOA::MODER::MODER4::Output,<font></font>
         GPIOA::MODER::MODER1::Output&gt;::Set() ;<font></font>
   <font></font>
  GPIOA::BSRRPack&lt;<font></font>
         GPIOA::BSRR::BS5::Set,<font></font>
         GPIOA::BSRR::BS4::Set,<font></font>
         GPIOA::BSRR::BS1::Set&gt;::Write() ;<font></font>
<font></font>
  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span> ;<font></font>
}<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
IARコンパイラを使用しています。</font><font style="vertical-align: inherit;">2つの最適化モードを見てみましょう：最適化なしと中程度の最適化：最適化なしの</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cコードとアセンブラー表現：最適化なしの</font></font><br>
<br>
<img src="https://habrastorage.org/webt/w-/wu/ln/w-wulnrmu5wg5pdby7qzzkxfdl8.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C ++コードとアセンブラー表現：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/wz/da/sf/wzdasflo3-fmkqsiq4lbtsbgf6g.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
どちらの場合も18行のアセンブラーとコードはほとんど同じですが、実際にはこれは驚くべきことではありません。これが私たちが達成したことです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
平均的な最適化、Cのコードを確認し</font></font><br>
<br>
<img src="https://habrastorage.org/webt/xm/m2/ac/xmm2actwv_1w6m_hqnbhsccg6xe.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ます。予想どおり、アセンブラ行は13行しかありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、C ++コードは平均的に最適化されています。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/qa/ic/a-/qaica-alj0danc4ffbmhyc2livs.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
繰り返しますが、状況は同じです。オーバーヘッドがなく、コードの読みやすさに明らかな利点があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さて、すべてのタスクが解決されました、最後の質問が発生します。</font><font style="vertical-align: inherit;">このフォームですべてのレジスターを説明するには、どれくらいの時間と労力が必要ですか？</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">すべてのレジスターを記述する方法</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
信頼性が高く、便利で迅速な登録へのアクセスを得ました。</font><font style="vertical-align: inherit;">1つの質問が残っています。</font><font style="vertical-align: inherit;">すべてのレジスターの記述方法は、マイクロコントローラーの場合は100未満です。</font><font style="vertical-align: inherit;">これは、すべてのレジスターを記述するのにかかる時間です。これは、そのような日常の作業で多くの間違いをする可能性があるためです。</font><font style="vertical-align: inherit;">はい、手動で行う必要はありません。</font><font style="vertical-align: inherit;">代わりに、SVDファイルのコードジェネレーターを使用します。これは、記事の冒頭で前述したように、私が受け入れたレジスターの抽象化を完全にカバーしています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私は同僚のスクリプトを完成させました。このアイデアに基づいて、スクリプトはほぼ同じでしたが、フィールド値のクラスの代わりに列挙型を使用する方が簡単です。</font><font style="vertical-align: inherit;">このスクリプトはアイデアのテストとチェックのためにのみ作成されているため、最適ではありませんが、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">このような</font></font></a> <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ものを生成できます</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">。</font></a></font><br>
<img src="https://habrastorage.org/webt/jq/0h/kj/jq0hkj-s5u4jyou1-luv7bhlasy.png" alt="画像"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
スクリプトを気にする人は</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ここにいます</font></font></a><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">合計</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その結果、プログラマの仕事は、生成されたファイルを適切に接続することだけです。</font><font style="vertical-align: inherit;">gpioaまたはrccモジュールなどのレジスターを使用する必要がある場合は、必要なヘッダーファイルを含めるだけです。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"gpioaregisters.hpp"</span> <span class="hljs-comment">//for GPIOA</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"rccregisters.hpp"</span>   <span class="hljs-comment">//for RCC</span></span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{<font></font>
  RCC::AHB1ENR::GPIOAEN::Enable::Set() ;<font></font>
  GPIOA::MODER::MODER15::Output::Set() ;  <font></font>
  GPIOA::MODERPack&lt;<font></font>
          GPIOA::MODER::MODER12::Output,<font></font>
          GPIOA::MODER::MODER14::Analog<font></font>
  &gt;::Set() ;<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
繰り返しますが、SVDファイルは製造元のWebサイトからダウンロードでき、開発環境から引き出して、スクリプト入力に送信するだけで済みます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、上で述べたように、すべての製造元が消費者を気にするわけではないため、SVDファイルにすべての転送があるわけではありません。このため、生成後のSTマイクロコントローラーのすべての転送は次のようになります。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> Reg, <span class="hljs-keyword">size_t</span> offset, <span class="hljs-keyword">size_t</span> size, <span class="hljs-keyword">typename</span> AccessMode, <span class="hljs-keyword">typename</span> BaseType&gt; 
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">GPIOA_MODER_MODER_Values</span>:</span> <span class="hljs-keyword">public</span> RegisterField&lt;Reg, offset, size, AccessMode&gt; <font></font>
{<font></font>
  <span class="hljs-keyword">using</span> Value0 = FieldValue&lt;GPIOA_MODER_MODER_Values, BaseType, <span class="hljs-number">0U</span>&gt; ;
  <span class="hljs-keyword">using</span> Value1 = FieldValue&lt;GPIOA_MODER_MODER_Values, BaseType, <span class="hljs-number">1U</span>&gt; ;
  <span class="hljs-keyword">using</span> Value2 = FieldValue&lt;GPIOA_MODER_MODER_Values, BaseType, <span class="hljs-number">2U</span>&gt; ;
  <span class="hljs-keyword">using</span> Value3 = FieldValue&lt;GPIOA_MODER_MODER_Values, BaseType, <span class="hljs-number">3U</span>&gt; ;<font></font>
} ;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それらを使用する必要があるその瞬間に、ドキュメントを見て、Valueという単語を変更して、よりわかりやすいものにすることができます。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> Reg, <span class="hljs-keyword">size_t</span> offset, <span class="hljs-keyword">size_t</span> size, <span class="hljs-keyword">typename</span> AccessMode, <span class="hljs-keyword">typename</span> BaseType&gt; 
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">GPIOA_MODER_MODER_Values</span>:</span> <span class="hljs-keyword">public</span> RegisterField&lt;Reg, offset, size, AccessMode&gt; <font></font>
{<font></font>
  <span class="hljs-keyword">using</span> Input = FieldValue&lt;GPIOA_MODER_MODER_Values, BaseType, <span class="hljs-number">0U</span>&gt; ;
  <span class="hljs-keyword">using</span> Output = FieldValue&lt;GPIOA_MODER_MODER_Values, BaseType, <span class="hljs-number">1U</span>&gt; ;
  <span class="hljs-keyword">using</span> Alternate = FieldValue&lt;GPIOA_MODER_MODER_Values, BaseType, <span class="hljs-number">2U</span>&gt; ;
  <span class="hljs-keyword">using</span> Analog = FieldValue&lt;GPIOA_MODER_MODER_Values, BaseType, <span class="hljs-number">3U</span>&gt; ;<font></font>
} ;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その後、すべてのフィールド値にはすでに明確な名前が付いています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
STが今後もすべてのフィールド値を説明するように設計し、手動作業が一般的に0になることを願っています</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
。公平に言えば、ほとんどの場合、プログラマーは、より多くの理解のために列挙型列挙を手動で作成することは言うに値します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実際にはすべて、提案やコメントは大歓迎です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
IAR 8.40.1の下のプロジェクトは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ここに</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">あり</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ます。</font></a></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ソースコード自体は</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ここにあります</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
コード</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「オンラインGDB用」</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
PS：ありがとう</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プチャフカ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メソッドで見つかったバグ</font></font><code>RegisterField::Get()</code><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
と</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リプカ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 見つかったバグのアサート。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">記事で使用されているリンクと記事</font></font></h3><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C ++での</font></font></a><font style="vertical-align: inherit;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">タイプセーフ</font></a><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">レジスタアクセス</font></a><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">C ++ </font></a><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">SVD記述（* .svd）形式で</font></a><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ハードウェアレジスタを使用する1つの方法</font></a></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja459626/index.html">Windows通知機能：最も文書化されていない攻撃面</a></li>
<li><a href="../ja459628/index.html">オープンインベンションネットワークには、3,000を超えるライセンシーがいます-オープンソースソフトウェアにとってそれは何を意味しますか</a></li>
<li><a href="../ja459630/index.html">Tic Tac Toeパート2：ステートレスの取り消し/やり直し</a></li>
<li><a href="../ja459638/index.html">バッテリーに関するグローバルな知識ベースを作成する</a></li>
<li><a href="../ja459640/index.html">コードとしてのドキュメント。パート1：更新を自動化する</a></li>
<li><a href="../ja459644/index.html">LED調光器</a></li>
<li><a href="../ja459648/index.html">アナライザーはすべて正常である必要があります。機能とインターフェースの両方...新しいSolar appScreener 3.1インターフェースを調査しています</a></li>
<li><a href="../ja459650/index.html">ブラックボックスでお金を無駄にしない方法：課金テスト方法</a></li>
<li><a href="../ja459652/index.html">自動回帰テストアプローチ</a></li>
<li><a href="../ja459656/index.html">コードを書かないODataサービス</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>