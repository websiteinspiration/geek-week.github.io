<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>📹 👨🏻‍🔧 🛀🏻 Messung des UVA UVB 🚜 🐰 🌛</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Wir alle lieben die Sonne und wissen natürlich um die Gefahren ultravioletter Strahlung für die menschliche Haut. Natürlich kann man sich nicht lange ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Messung des UVA UVB</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/499966/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir alle lieben die Sonne und wissen natürlich um die Gefahren ultravioletter Strahlung für die menschliche Haut. </font><font style="vertical-align: inherit;">Natürlich kann man sich nicht lange am Strand sonnen. </font><font style="vertical-align: inherit;">Aber es ist überhaupt nicht offensichtlich, ist es möglich, im T-Shirt unter der Sonne zu laufen und zu schwimmen, in den Bergen zu laufen? </font><font style="vertical-align: inherit;">Nach einem weiteren „Brennen“ der Sonne in den Bergen in Krasnaya Polyana stellte sich die Frage, wie man den sofortigen Index der ultravioletten Strahlung misst und weiß, wann es Zeit ist, sich im Schatten zu verstecken. </font><font style="vertical-align: inherit;">Als Ergebnis wurde dieses kleine Gerät geboren - ein UV-Strahlungssensor mit einer Reihe zusätzlicher Funktionen.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/lp/o8/0g/lpo80gvoszy35k9hzmltwzls640.png"></div><a name="habracut"></a><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Was soll das Gerät können</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Hauptfunktion besteht darin, den UV-Strahlungsindex zu messen. </font><font style="vertical-align: inherit;">Außerdem wollte ich die Lufttemperatur und die Wassertemperatur mit einer Genauigkeit von mindestens 0,5 Grad messen (insbesondere, als ich mit Eiswasser in den Pool eintauchte und ein chinesisches Thermometer betrachtete, das dort schwamm - 28 Grad und nicht in der Nähe). </font><font style="vertical-align: inherit;">Und natürlich Batteriestrom.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hauptkomponenten: VEML6075 + MCP3421 + STM8</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gibt nicht viele Sensoren zur Messung des UV-Index. </font><font style="vertical-align: inherit;">Eine häufig verwendete UV-Sonde ist ein Fototransistor. </font><font style="vertical-align: inherit;">Es stellte sich jedoch als ziemlich schwierig heraus, zu kalibrieren. </font><font style="vertical-align: inherit;">Die Wahl fiel auf den digitalen Sensor - VEML6075. </font><font style="vertical-align: inherit;">Er erwies sich als sehr gut. </font><font style="vertical-align: inherit;">Der einzige Nachteil ist, dass es schwierig zu kaufen ist. Die Lieferung musste über offizielle Kanäle etwa einen Monat warten - "The Fifth Element" (China hat dies nicht berücksichtigt - es ist unangenehm, die Qualität eines einmaligen Geräts zu erraten). </font><font style="vertical-align: inherit;">Sensor Vorteile:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">einfache Kalibrierung zu Hause</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kosinusantwort der Sensoroberfläche - Berücksichtigung des Einfalls von Strahlen</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">genaue Indexwerte in zwei Bereichen - UVA UVB</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">geringer Konsum</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I2C-Kommunikation - volldigitaler Sensor</font></font></li>
</ul><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anfangs war die Sensorgröße unheimlich 2x2 mm, es gab keine Heißluftpistole, ich dachte, es wäre schwierig, eine solche Kleinigkeit mit einem gewöhnlichen Lötkolben zu löten - aber es stellte sich als gut heraus.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/2g/rf/34/2grf34roitfitmtsmw0fbuwirkw.jpeg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die zweite Frage - die Messung der Wassertemperatur, entschieden mit einem Thermoelement. Verwenden Sie zum genauen Lesen der Daten von diesem Sensor einen sehr genauen ADC mit integrierter Referenzspannungsquelle - MCP3421. 18-Bit-Auflösung + 8-fache Signalverstärkung für ein K-Thermoelement ergeben eine Temperaturauflösung von 0,01 Grad - mehr als genug. Angesichts der Notwendigkeit, die Temperatur der Verbindung zu messen, lag die Genauigkeit im Bereich von 0,2 Grad. Überprüfung durch Messen von kochendem Wasser und Eis. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als Mikrocontroller - die einfachste und billigste Option - STM8S003F3. Alles ist an Bord - Timer, I2C - für den Sensor usw. erforderlich. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Da das Gerät in der Sonne arbeiten sollte, wird ein LCD-Bildschirm als Anzeige verwendet. Ich wollte Kompaktheit - ich entschied mich für diese:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/hq/xp/mm/hqxpmmnlgkhbuyw75ngmqkkemag.jpeg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mit dem Management musste gequält werden. </font><font style="vertical-align: inherit;">Das Multiplexen der LCD-Pins auf einem herkömmlichen Mikrocontroller ist immer noch diese Aufgabe, aber im Allgemeinen ist alles gut gelaufen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Fall wählte ein kleines, kompaktes Modell der Firma Sanhe "20-31". </font><font style="vertical-align: inherit;">Außengröße - 35x45x18 mm. </font><font style="vertical-align: inherit;">Alles passt - das Board, die Anzeige und die Batterie. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich werde die Schaltung und die Platine nicht geben, alles ist auf </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Github</font></font></a><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UV-Sensorkalibrierung</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nachdem sie Messwerte vom Sensor erhalten hatten, waren sie nicht sehr zufrieden, sie waren den Messwerten des "Hydro-Centers" nicht ähnlich. Ich musste lernen, wie man den Sensor richtig kalibriert. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um den UV-Strahlungsindex anhand der Sensorwerte korrekt zu berechnen, müssen mehrere Konstanten verwendet werden. Wie berechnet man sie ohne spezielle Ausrüstung? Hier ist die vollständige Formel zur Berechnung des Index: Die </font></font><br>
<img src="https://habrastorage.org/webt/kn/l0/45/knl045dun5ltafhqfxurbbhbhhu.jpeg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Konstanten k1 und k2 können ohne Ausrüstung nicht berechnet werden. Sie sind jedoch für die genaueste Berechnung erforderlich, damit sie als Einheit betrachtet werden können. Die Empfindlichkeitskonstanten des Sensors können der Tabelle entnommen werden:</font></font><br>
<img src="https://habrastorage.org/webt/m-/qw/gz/m-qwgzn9s3emcnggn5mwlivxpum.jpeg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir brauchen die Konstanten aus der ersten Zeile, da der Sensor nicht von Teflon abgedeckt wird (wir konnten kein optisches Teflon kaufen, daher ist der Sensor endlich geöffnet). UVAresp und UVBresp. Aber die Konstanten a, b, c, d müssen berechnet werden. Ich habe das mit einem Debugger gemacht. Es ist notwendig, die Daten uva, uvb, uvcomp1, uvcomp2 abzurufen und die Konstanten in Excel zu berechnen. Es ist unpraktisch, sie auf dem Display anzuzeigen - es gibt zu wenige Ziffern. Hier wird der Debugger benötigt. Setzen Sie nach dem Empfang der Daten einen Haltepunkt und sehen Sie sich die berechneten Werte an. Sie können auch die Möglichkeit nutzen, ST-Link während des Debuggens und der umgekehrten Verbindung von STM8 zu trennen. In diesem Fall wird die Debugging-Sitzung nicht unterbrochen! Eine weitere Option ist die Verwendung von STM8 STUDIO. Mit diesem speziellen Programm können Sie jederzeit Variablen abrufen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Verwenden Sie dies, um die Konstanten ohne spezielle Ausrüstung zu berechnen (dies wird im Anwendungshinweis zum Sensor beschrieben). Sonnenlicht in seinem Spektrum hat UV-Strahlung, IR-Strahlung und sichtbare Strahlung. Um die Intensität der UV-Strahlung zu berechnen, müssen die überschüssigen Daten über IR-Strahlung und sichtbare Strahlung subtrahiert werden. Verwenden Sie dazu die Daten uvcomp1 (verantwortlich für sichtbare Strahlung) und uvcomp2 (verantwortlich für IR-Strahlung). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zur Berechnung der Konstanten in der verwendeten Formel werden zwei künstliche Lichtquellen benötigt: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 • eine gewöhnliche Glühlampe - sie emittiert im IR-Spektrum und sichtbare Strahlung, es gibt keine UV-Strahlung </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 • LED-Lampe - sie emittiert nur in sichtbarer Strahlung, es gibt keine UV- und IR-Strahlung</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir beginnen mit der LED-Lampe. Da keine UV-Strahlung vorhanden ist, ist der entsprechende Index Null. </font></font><br>
<img src="https://habrastorage.org/webt/bq/z5/5w/bqz55wsnzk-wkzmntjp6uhyi-ou.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die LED-Lampe hat keine IR-Strahlung, daher ist UVcomp2 0. In diesem Fall können Sie die Koeffizienten finden. </font></font><br>
<img src="https://habrastorage.org/webt/ka/-7/vn/ka-7vnca8jipxdomakrheh53_ok.gif"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mit diesen Koeffizienten ist es nicht schwierig, die Koeffizienten b und d zu finden, wenn eine herkömmliche Lampe verwendet wird, wenn UVcomp2 nicht gleich Null ist. </font></font><br>
<img src="https://habrastorage.org/webt/hk/s-/0-/hks-0-eysabxkag42fy15lz8b2c.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mit dieser einfachen Methode können Sie die erforderlichen Konstanten erhalten. Eine solche Kalibrierung sollte abends durchgeführt werden, wenn kein Sonnenlicht und keine anderen Lichtquellen vorhanden sind. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein korrekt kalibrierter Sensor ist sehr einfach zu überprüfen. An einem sonnigen Tag, mittags, wenn keine Wolken am Himmel sind, müssen Sie die Intensität messen, indem Sie den Sensor genau auf die Sonne richten. Die Messwerte müssen mit den auf den Wetterstandorten übertragenen Daten übereinstimmen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um die Strahlung genau zu messen, muss der Sensor beim Bräunen parallel zur Körperoberfläche gehalten werden. </font><font style="vertical-align: inherit;">Um den maximalen Stromindex zu erhalten, muss der Sensor auf die Sonne gerichtet sein. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Sensor zeigte die besten Ergebnisse mit der maximalen Datenmittelungszeit (der Sensor kann diesen Parameter einstellen - die Zeit, in der er selbst die Indikatoren mittelt) - 800 ms. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um die Messwerte absolut perfekt zu machen, mussten wir auch den Empfehlungen des Entwicklers folgen - die Platine schwarz zu streichen, damit sie den Sensor nicht reflektiert und mit einem schwarzen Trichter umgibt.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erfahrung nutzen</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich sage gleich zum Verbrauch - er ist extrem klein, etwa 2 mA, wenn alle Sensoren und der Mikrocontroller funktionieren. Bei seltener Verwendung hält der Akku mit einer einzigen Ladung etwa 3 Monate lang. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich halte die Genauigkeit der Messwerte für sehr hoch. Ich habe in mehreren Regionen (Moskau, Sotschi, Krim) eingecheckt - die Messwerte stimmen mittags mit den Wetterstandorten überein. Daher glaube ich, dass man ihm bei bewölktem Wetter auch vertrauen kann. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bei der Herstellung des Sensors musste ich untersuchen, was UV-Strahlung ist und wie sie immer noch schädlich ist. Was für Arten davon sind. Wie wirkt es sich auf die Haut aus? Wie ist der Sonnenstand am Horizont und ob UV-Strahlung schädlich für die Augen ist?</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Persönlich habe ich alle Artikel über das „Brennen“ an mir selbst überprüft. Der Sensor erwies sich als ausgezeichnet. Nachdem ich nun Index 13 auf dem Sensor in den Bergen gesehen habe, ziehe ich ein enges Hemd an und bedecke alle Körperteile. Und abends, wenn Index 5 - gehe ich ruhig und sonne mich unter den warmen Sonnenstrahlen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich habe gelernt, dass man an einem sonnigen Tag in Moskau einen guten Sonnenbrand bekommen kann - der Index erreicht mittags 9. Und auch, dass sich beim Schwimmen die Zeit in der Sonne verdoppelt. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Für mich war dieses Gerät sehr nützlich, ich benutze es immer noch, die ganze Familie vertraut dem Zeugnis.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Moment fügte er einen sehr genauen Feuchtigkeitssensor hinzu - HTS221. </font><font style="vertical-align: inherit;">Es funktioniert auch auf I2C, also habe ich einfach ein Mini-Board erstellt und es eingefügt. </font><font style="vertical-align: inherit;">Gelötet mit einem lackierten Draht 0,15 mm. </font><font style="vertical-align: inherit;">Jetzt zeigt es auch die Luftfeuchtigkeit an, viel genauer als die auf dem Markt verkauften chinesischen Messgeräte. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich werde ein wenig über das große Fett-Minus schreiben - gemäß den Empfehlungen des Entwicklers ist es besser, den Sensor mit optischem Teflon zu schließen, um den Sensor vor Staub und Schmutz zu schützen. </font><font style="vertical-align: inherit;">Es hat nicht funktioniert, ein solches Teflon in der Schiene zu finden, daher wird der Sensor staubig und manchmal wische ich ihn mit einem Wattestäbchen ab.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de499954/index.html">Storacle - dezentrale Dateispeicherung</a></li>
<li><a href="../de499958/index.html">Erstellen Sie in etwas mehr als drei Stunden eine Online-Demo zum Ersten Mai</a></li>
<li><a href="../de499960/index.html">JanusGraph Graph DBMS-Experiment zur Lösung des Problems der Suche nach geeigneten Pfaden</a></li>
<li><a href="../de499962/index.html">Einige Fakten über kaskadierende Klassifikatoren, die in wissenschaftlichen Artikeln selten ernsthaft berücksichtigt werden.</a></li>
<li><a href="../de499964/index.html">Die NASA hat drei Firmen ausgewählt, die an dem Programm teilnehmen werden, um ein Schiff für die Landung auf dem Mond zu schaffen</a></li>
<li><a href="../de499968/index.html">Liste der beständigsten Online-Mitaps, die auch im Mai stattfinden</a></li>
<li><a href="../de499970/index.html">Wir untersuchen die Mediastreamer2 VoIP-Engine. Teil 12</a></li>
<li><a href="../de499972/index.html">Mögen Online-Events verdauen</a></li>
<li><a href="../de499974/index.html">3D-Spiele auf Instagram Javascript oder Wurstflugbahn</a></li>
<li><a href="../de499978/index.html">Übersetzung von Andrew Un's Buch, Leidenschaft für maschinelles Lernen, Kapitel 36 und 37</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>