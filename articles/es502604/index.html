<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚òùüèø ü§∂üèΩ üë©üèΩ‚Äç‚öïÔ∏è Una introducci√≥n a TLS para Patrik Patrick (Parte 1) üëü ü§™ üôåüèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Como ya sabr√°s, este es Patrick. Es una estrella de mar, lo que significa que es posible, sin insultarlo, decir que sus manos est√°n creciendo desde un...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Una introducci√≥n a TLS para Patrik Patrick (Parte 1)</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/plesk/blog/502604/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como ya sabr√°s, este es Patrick. Es una estrella de mar, lo que significa que es posible, sin insultarlo, decir que sus manos est√°n creciendo desde un solo lugar. Patrick tambi√©n es muy pr√°ctico e inmediatamente olvida todo lo que no necesita, pero si necesita algo, quiere saberlo (¬°porque lo necesita!). Spoiler: aqu√≠ Patrick est√° tratando de hacer un apret√≥n de manos TLS. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/di/aa/64/diaa64cwcj8dktjvcv-4ba6wtbg.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este art√≠culo est√° escrito para Patrick y personas como √©l. Naci√≥ de una presentaci√≥n que se mostr√≥ por primera vez en nuestra Plesk TechTalk educativa interna, donde los empleados de forma accesible comparten informaci√≥n entre ellos sobre tecnolog√≠as, procesos y soluciones interesantes. Por lo tanto, las im√°genes de este art√≠culo se ver√°n como diapositivas :) El autor del texto original del informe es el administrador del programa Plesk </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ruslan Kosolapov</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por lo general, todo el material TLS cubre algunos aspectos peque√±os, pero no el panorama general. </font><font style="vertical-align: inherit;">Esto no es muy pr√°ctico y Patrick tiene dolor de cabeza por esto. </font><font style="vertical-align: inherit;">Aqu√≠ todo ser√° diferente: brevemente, aplicable "en la vida cotidiana" y de la forma m√°s exhaustiva posible.</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬øQu√© es TLS y por qu√© es para Patrick?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
TLS (Transport Layer Security) es un protocolo de protecci√≥n de la capa de transporte. Es necesario para que nadie pueda "escucharlo" y encontrar informaci√≥n importante (con mayor frecuencia contrase√±as, si hablamos de trabajar en la red). Y tambi√©n para protegerse de la falsificaci√≥n y modificaci√≥n del tr√°fico durante la transmisi√≥n. Es en estas dos cosas que radica el prop√≥sito de TLS. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para mayor claridad, consideremos el apret√≥n de manos TLS como una llamada a Patrick SpongeBob. Durante una llamada, alguien puede espiar la conversaci√≥n (pararse al lado de Patrick o encenderla en el medio de la l√≠nea), y generalmente Bob Esponja puede no estar en el otro extremo; todos estos problemas son relevantes. Y para resolverlos, Patrick quiere usar TLS. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En resumen, el apret√≥n de manos de nivel superior se ve as√≠: </font></font></b><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Patrick:</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Quiero usar TLS, las versiones de cifrado son tal y tal.</font></font><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bob Esponja:</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ok, usemos versiones cifradas tal y tal. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Despu√©s de eso, Bob Esponja env√≠a el certificado, Patrick lo verifica, dice que todo est√° bien, la clave de sesi√≥n est√° lista (en realidad hay dos de ellos, pero no importa). ¬øPor qu√© usar una clave de sesi√≥n en lugar del cifrado asim√©trico? Porque es m√°s r√°pido. Despu√©s de eso, comienzan a hablar un idioma incomprensible para el descifrado. Por lo tanto, todo est√° protegido. </font></font><br>
<img src="https://habrastorage.org/webt/na/xj/yu/naxjyufzfjvlcazi16qsmlf5muq.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todo parece ser simple. C√≥mo funciona en hardware no es tan importante para nosotros. Pero si comienzas a pensar, ¬°y Patrick comienza a pensar! - Eso plantea la pregunta de c√≥mo generalmente estamos de acuerdo en que usaremos TLS? Despu√©s de todo, una vez no hab√≠a TLS, pero solo hab√≠a protocolos ordinarios: SMTP, HTTP. ¬øC√≥mo decir lo que se necesita en TLS? Y aqu√≠, en nuestra industria, todo es como siempre: ¬°hay muchas maneras!</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al principio, quer√≠an usar un puerto espec√≠fico, lo que implicar√≠a el uso de TLS en √©l. </font><font style="vertical-align: inherit;">¬øCu√°les son las desventajas de esto? </font><font style="vertical-align: inherit;">¬øY por qu√© entonces apareci√≥ el m√©todo expl√≠cito (expl√≠cito) para comenzar una sesi√≥n TLS? </font><font style="vertical-align: inherit;">Hay varias razones:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Necesita muchos puertos, y los puertos son algo que no desea gastar. </font><font style="vertical-align: inherit;">Porque cuanto m√°s hay, m√°s dif√≠cil es configurar el firewall.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> El servidor puede ignorar esto: se ha conectado al puerto 443 y no hay TLS all√≠, solo HTTP sin ning√∫n HTTPS.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Antes de establecer la conexi√≥n, no puede averiguar si el servidor TLS es compatible o no.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todo esto condujo a la aparici√≥n de un m√©todo expl√≠cito: cuando nos conectamos a un puerto normal y luego actualizamos nuestra sesi√≥n a TLS. </font><font style="vertical-align: inherit;">Para diferentes servicios, el protocolo tiene diferentes comandos, por ejemplo, para SMTP hay un comando separado a nivel del protocolo SMTP: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">STARTTLS</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">HTTP tambi√©n tiene ese chiste, se llama </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Upgrade: TLS / 1.0</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">A nivel de protocolo, es m√°s f√°cil entender si un servidor TLS es compatible o no. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Deteng√°monos un poco m√°s en los diferentes tipos de conexiones y c√≥mo est√°n las cosas con TLS para ellos.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conectar: ‚Äã‚ÄãHTTP</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todo ser√≠a f√°cil si, como siempre, no hubiera matices. En el caso de HTTP, los crecientes requisitos de seguridad proporcionan una evoluci√≥n constante del proceso de trabajo con TLS. Al principio hubo una redirecci√≥n a HTTPS, y esto se hizo simplemente en el encabezado. Esto dej√≥ un vac√≠o para las vulnerabilidades, por lo que a Google se le ocurri√≥ HSTS (HTTP Strict Transport Security). Este es un encabezado en la respuesta HTTP que le dice al navegador: "recuerde que cuando venga a este dominio, vaya directamente a HTTPS, incluso si la persona le dijo que vaya a HTTP". Por lo tanto, no hay redirecci√≥n y todo sucede mucho m√°s seguro. Adem√°s, Google tiene otra iniciativa: puede dejar una solicitud para que su sitio se agregue a la lista de Google Chrome "Siempre use HTTPS", independientemente de los encabezados. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Brevemente:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> HSTS resuelve la redirecci√≥n de vulnerabilidades HTTP a HTTPS, por lo que casi todos los navegadores admiten HSTS, lo cual es bueno.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Connect: ex√≥tico (nuevas versiones de HTTP y no solo)</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En HTTP / 2, las cosas son buenas con TLS: siempre se usa (ya que ahora se hacen los navegadores). </font><font style="vertical-align: inherit;">Adem√°s, TLS en HTTP / 2 debe ser nuevo, es decir, tener la versi√≥n 1.2+. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Muy probablemente, muy pronto Google vender√° el uso generalizado de HTTP / 3, ahora es adoptado por el est√°ndar IANA. </font><font style="vertical-align: inherit;">La historia de su aparici√≥n y desarrollo es bastante confusa; </font><font style="vertical-align: inherit;">Lo principal para recordar a Patrick:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> HTTP / 3 siempre es TLS 1.3+.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HTTP / 3 se basa en QUIC: es un protocolo sobre UDP que, seg√∫n Google, es mejor que TCP. </font><font style="vertical-align: inherit;">En realidad, antes de que finalmente se aprobara el nombre HTTP / 3, el protocolo se llamaba HTTP-over-QUIC.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todav√≠a hay un protocolo SCTP interesante, que se utiliza principalmente en telecomunicaciones. </font><font style="vertical-align: inherit;">Por encima, se utilizan tanto TLS como DTLS (este es TLS para UDP). </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Brevemente:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en 2 a√±os, QUIC (es decir, HTTP / 3) se usar√° en todas partes, pero ahora ya deber√≠a haber HTTP / 2 en todas partes, pero en realidad no est√° en todas partes.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conectar: ‚Äã‚Äãcorreo</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Muchos clientes creen que deber√≠a haber TLS en el puerto 587, pero tambi√©n hay matices aqu√≠: alguien espera TLS de forma predeterminada y alguien espera una solicitud </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">STARTTLS</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> expl√≠cita </font><font style="vertical-align: inherit;">del cliente. Debido a esto, varias combinaciones de servidor de correo y cliente de correo a veces causan efectos no deseados. Por ejemplo, un cliente ingresa al puerto 587, esperando que haya TLS, mientras el servidor espera a que el cliente solicite expl√≠citamente </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">STARTTLS</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Al no haber recibido nada, el cliente regresa al puerto 25. El resultado es un cambio silencioso a una conexi√≥n SMTP insegura. Al probar y desarrollar, vale la pena recordar sobre tales efectos de las combinaciones cliente-servidor. Autodiscaver tiene varias opciones para especificar TLS: c√≥mo deber√≠a ser, qu√© se espera y qu√© hacer. Muchos clientes de correo entienden estas cosas. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Brevemente:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> con el soporte TLS en servidores de correo y clientes de correo, todo est√° bien en general, pero en casos especiales puede haber problemas y las extensiones TLS no son muy compatibles.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conectar: ‚Äã‚ÄãFTP</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Poco se puede decir aqu√≠. </font><font style="vertical-align: inherit;">El principal problema es SNI (esto es cuando diferentes dominios est√°n en la misma IP). </font><font style="vertical-align: inherit;">En el nivel FTP, el nombre de dominio no se transfiere. </font><font style="vertical-align: inherit;">En una versi√≥n expl√≠cita, no puede funcionar, porque no hay ning√∫n lugar para escribirlo. </font><font style="vertical-align: inherit;">Hay varias opciones de soluci√≥n: algunas ofrecen, por lo tanto, otras, a√∫n no se ha adoptado una soluci√≥n general, no hay un est√°ndar. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Brevemente: hay</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> alg√∫n tipo de soporte TLS para FTP (FTPS, SFTP, un an√°logo de FTP implementado a trav√©s de SSH), pero algunos aspectos no est√°n cubiertos debido a las limitaciones t√©cnicas del propio FTP.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apret√≥n de manos TLS</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces, ahora sabemos c√≥mo iniciar la comunicaci√≥n usando TLS en diferentes conexiones, y Patrick pudo comunicar su deseo a Bob Esponja. </font><font style="vertical-align: inherit;">Una vez que han acordado que usar√°n TLS, se produce TLS Handshake. </font><font style="vertical-align: inherit;">Su resultado deber√≠a ser un acuerdo entre el cliente y el servidor sobre c√≥mo lo cifran todo. </font><font style="vertical-align: inherit;">Adem√°s, el cliente debe asegurarse de que el servidor es el que se necesita. </font><font style="vertical-align: inherit;">A veces, el servidor tambi√©n verifica al cliente (pero con mucha menos frecuencia).</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cifrados y versiones</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como ya se mencion√≥, el primer paso es elegir qu√© versi√≥n de TLS y qu√© cifrados se utilizar√°n para el cifrado. </font><font style="vertical-align: inherit;">Por lo general, el cifrado se ve as√≠: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/7j/bc/ne/7jbcnel13ieehyi6h6ibu9gi7r4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
el conjunto de cifrado est√° en el registro de la IANA, y en el protocolo TLS en forma binaria es solo su ID. </font><font style="vertical-align: inherit;">Como puede ver en la figura, aqu√≠ no solo est√° (y no solo) el cifrado, sino tambi√©n su modo de funcionamiento y otros detalles necesarios para el apret√≥n de manos TLS. </font><font style="vertical-align: inherit;">Patrick no necesita entrar en detalles. </font><font style="vertical-align: inherit;">Todo lo que es importante en esta etapa es recordar que estas letras son buenas (y el resto son malas):</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> DHE</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ECDhe</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> AES128</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> AES256</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> RSA</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ecdsa</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Cbc</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Gcm</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> SHA256</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> SHA383</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> CHACHA20</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> POLY1308</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Imagen para recordar buenas cifras: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/5o/oz/us/5oozuswdmgo1dmropfliew8ee3w.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
si es dif√≠cil de recordar, hay buenos servicios que pueden informarle al respecto, por ejemplo, un servicio de Mozilla </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ssl-config.mozilla.org</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<img src="https://habrastorage.org/webt/im/06/g0/im06g0jqgsdkw3kbie0c3lzfjcq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Puede ver de inmediato d√≥nde y c√≥mo se admite: esto es lo que los chicos de Mozilla est√°n tratando de seguir. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un detalle interesante: el cliente transfiere los cifrados en orden de prioridad seg√∫n sus preferencias, pero el servidor se queda con la decisi√≥n: selecciona el cifrado que parece ser el mejor de la lista de clientes admitidos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ambas partes tambi√©n indican la versi√≥n m√°xima admitida del protocolo; en este caso, Patrick es m√°s avanzado que SpongeBob.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En realidad certificado</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Junto con la respuesta "Hag√°moslo as√≠", el servidor env√≠a su certificado o certificados, puede haber muchos de ellos. </font></font><br>
<img src="https://habrastorage.org/webt/ay/9m/p-/ay9mp-c7akdltxlnomatwwq1zdq.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øQu√© es un certificado? Esta es una relaci√≥n de informaci√≥n (tema), la mayor√≠a de las veces es el nombre de un dominio u organizaci√≥n, y una clave p√∫blica (clave p√∫blica). Es decir, el certificado dice: "Amigo, mi clave p√∫blica es as√≠. Ahora, con su ayuda, acordaremos las claves de sesi√≥n ". Adem√°s, con su ayuda, puede verificar la firma de los certificados u otra cosa. Es decir, en principio, ser√≠a posible utilizar no certificados, sino registros donde se indica esta relaci√≥n. Y, de hecho, los pasos en esta direcci√≥n contin√∫an, porque el mecanismo de la Autoridad de Certificaci√≥n se considera no muy bueno, simplemente no hay nada m√°s.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por lo tanto, el certificado es la estructura de 'Asunto: clave p√∫blica' m√°s la firma de ese ishyuer (el emisor en transliteraci√≥n al ruso se ve horrible, pero el sin√≥nimo m√°s cercano aqu√≠ no est√° muy cerca en contexto al "emisor") que este certificado fue emitido. Ish√ºyer tambi√©n tiene un certificado y la conexi√≥n de alguien con algo. Puede verificar que el certificado sea correcto tomando la clave p√∫blica del ishyuere y verificando la firma. Como resultado, nada puede ser falsificado aqu√≠. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Repasemos el certificado y veamos qu√© problemas puede tener. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/14/gt/ox/14gtoxx4czgwthkckj2vjyjfnbi.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En primer lugar, el n√∫mero de serie implica unicidad solo dentro de los l√≠mites del ishyuere, aunque algunos softwares consideran que es √∫nico en todo el universo. Afortunadamente, la mayor√≠a de las veces, es realmente completamente √∫nico.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El certificado tambi√©n indica qu√© algoritmos se usan para el cifrado y la firma: RSA o ECDSA, es decir, qu√© criptograf√≠a usar para trabajar con esta clave p√∫blica. La principal diferencia entre RSA y ECDSA es que el principio matem√°tico de ECDSA se basa en curvas el√≠pticas, y RSA es simplemente n√∫meros naturales, por lo que es m√°s lento y se usan claves enormes (3-4 mil) para evitar que se rompa. . Y para ECDSA, una clave de 300 bits es suficiente y funciona m√°s r√°pido. Por lo tanto, muchos est√°n cambiando a ECDSA: el apret√≥n de manos en s√≠ es pesado y quiero reducirlo. Se puede solicitar ECDSA al emitir un certificado, y si el buscador lo respalda, lo har√° por usted. Pero la firma del certificado depende de la clave privada que tenga actualmente ishuiur y no de si solicit√≥ ECDSA o RSA.Por lo tanto, los navegadores pueden mostrar que uno est√° en la firma y el otro en la clave p√∫blica, y no hay que tener miedo si la firma no es ECDSA.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬øC√≥mo obtener un certificado?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En resumen, as√≠: </font></font><br>
<img src="https://habrastorage.org/webt/th/7f/f1/th7ff1g-1g54v0t-_genzf3rc3u.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Patrick le dice a la Autoridad de Certificaci√≥n: Necesito un certificado. </font><font style="vertical-align: inherit;">Esta persona (u organizaci√≥n) verifica si es Patrick. </font><font style="vertical-align: inherit;">Los cheques pueden ser muy diferentes. </font><font style="vertical-align: inherit;">Por supuesto, Patrick como cliente puede no tener un certificado, pero si el servidor no tiene un certificado, entonces no habr√° TLS. </font><font style="vertical-align: inherit;">Se verifica si todo est√° indicado correctamente en la solicitud del certificado, si Patrick realmente posee el tema para el que est√° solicitando un certificado. </font><font style="vertical-align: inherit;">Esto lo hacen los centros superiores de la Autoridad de Certificaci√≥n: personas condicionales en las que todos creen. </font><font style="vertical-align: inherit;">Para emitir un certificado, debe elaborar una CSR (solicitud de firma de certificado, una solicitud de certificado).</font></font><br>
<br>
<img src="https://habrastorage.org/webt/z1/mi/dk/z1midktpy8soeqqaz_xah-w0sn8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esta es tambi√©n una estructura, con la cual es bastante dif√≠cil trabajar, porque hay pocos servicios que le permiten configurar, especificar, verificar y ver todo. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Total, generamos un par de clave p√∫blica: clave privada, pero solo damos lo p√∫blico y ocultamos lo privado. </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Luego generamos una Solicitud de firma de certificado y la firmamos con nuestra clave privada. </font><font style="vertical-align: inherit;">Enviamos todo esto a la autoridad de certificaci√≥n, y comienza la verificaci√≥n. </font><font style="vertical-align: inherit;">Puede ser diferente, para los certificados especialmente interesantes existen procedimientos dif√≠ciles especiales, pero nos detendremos en el caso general.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RR CAA</font></font></h2><br>
<img src="https://habrastorage.org/webt/pg/rh/lw/pgrhlwwd8la4_perxzg4zawlyjy.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Existe un problema tal que las personas que todos creen que a veces no son muy buenas. Una de las razones por las que Symantec se ha convertido en parte de DigiCert es porque (Symantec) emiti√≥ certificados sin preguntar a los propietarios del dominio. No puede hacer esto, fue insultante para todos, pero sobre todo para Symantec, porque ten√≠a que vender su negocio. Para hacer que el servidor sea menos dependiente de camaradas tan inescrupulosos, existe algo como CAA RR, un registro en DNS que dice a qui√©n le permite el propietario emitir certificados para su dominio. Esta caracter√≠stica tambi√©n est√° en Plesk, se usa poco hasta ahora, aproximadamente como DNSSec, pero no obstante. Todas las autoridades de certificaci√≥n acordaron verificar esta entrada y si dice que esta autoridad de certificaci√≥n no se puede emitir, dir√°: "no aprob√≥ la validaci√≥n, est√° escrita en CAA RR,que no puedo escribir un certificado para usted ", y no lo escribir√©. Si no hay entrada, entonces puedes. Ahora Google est√° impulsando la iniciativa para que los clientes verifiquen el certificado que recibieron para cumplir con los registros de CAA RR. El debate a√∫n est√° en curso.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adem√°s, CAA RR desde el momento en que ampliamos su soporte en Plesk al indicar los m√©todos de validaci√≥n (es decir, tambi√©n puede indicar aqu√≠ por qu√© m√©todo valida que este dominio es suyo) y el URI de la cuenta (Identificador uniforme de recursos). </font><font style="vertical-align: inherit;">Popular entre los usuarios, Plesk Let's Encrypt ya es compatible con todo esto (¬°bien hecho!). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todo esto funciona para cualquier tipo de certificado, y dado que hablaremos de las diferencias m√°s adelante, es hora de hablar sobre los tipos con m√°s detalle.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tipos de certificado</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hay tres de ellos:</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Validaci√≥n de dominio</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El tema es un dominio, es decir, aqu√≠ solo lo verificamos. </font><font style="vertical-align: inherit;">Anteriormente, cuando no hab√≠a validadores autom√°ticos, la validaci√≥n se realizaba principalmente por correo electr√≥nico a trav√©s del servicio Whois. </font><font style="vertical-align: inherit;">Esto se consider√≥ raz√≥n suficiente para creer que usted es el propietario de este dominio. </font><font style="vertical-align: inherit;">Luego pensaron en revisar el DNS: le escribieron por correo electr√≥nico: "y agreguen tal y tal registro al DNS". </font><font style="vertical-align: inherit;">Posteriormente aparecieron los m√©todos autom√°ticos (hablaremos un poco m√°s sobre ACME).</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Validaci√≥n de la organizaci√≥n</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En el campo "asunto", adem√°s del nombre de dominio, tambi√©n se indica el nombre de la organizaci√≥n. </font><font style="vertical-align: inherit;">La verificaci√≥n consiste en validar si el dominio pertenece a esta organizaci√≥n y si la persona que recibi√≥ el certificado trabaja all√≠. </font><font style="vertical-align: inherit;">C√≥mo se hace esto: buscan organizaciones en los registros, llaman, piden que se haga algo (el tel√©fono result√≥ correcto, la persona correcta respondi√≥, lo que significa que lo m√°s probable es que todo est√© bien).</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Validaci√≥n extendida</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Igual que OV, solo que m√°s fr√≠o. Aqu√≠ todo est√° muy regulado: un documento de 40 p√°ginas en el esp√≠ritu de "en el p√°rrafo 5.6.8 deber√≠a ser el siguiente: ...", etc. Se controlan muchas cosas: el pa√≠s, el departamento (si se indica en la solicitud) y, a veces, una persona especial incluso se va a ver con los ojos. ¬øCu√°l es la diferencia pr√°ctica? Casi todos los navegadores han dejado de distinguir entre OV y DV, y esto es malo, porque en este caso no se muestra el nombre de la organizaci√≥n. Como resultado, nadie se molesta en crear un dominio aliepxress.ru, dibujar la misma p√°gina y robar tarjetas de cr√©dito. Y ser√° absolutamente leg√≠timo crear dicho dominio y obtener un certificado DV en √©l.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ejemplo con EV: el nombre de la organizaci√≥n es visible aqu√≠, por lo que si alguien roba algo, el usuario sabr√° que se trata de la corporaci√≥n Valve Corp, y registrar la corporaci√≥n es algo m√°s dif√≠cil que el dominio (m√°s controles). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/6p/kp/kc/6pkpkccn848gjwl1osfx_yc0gjy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sin embargo, todo llega al punto en que EV dejar√° de ser diferente, en dispositivos m√≥viles ya no es visible y debe presionar un bot√≥n separado, y tambi√©n en Safari. </font><font style="vertical-align: inherit;">Google Chrome todav√≠a se mantiene (UPD - ¬°ya no! Tuve que hacer una pantalla desde IE). </font><font style="vertical-align: inherit;">La argumentaci√≥n de aquellos que no muestran: "si est√°s preocupado, haz clic y mira", pero nadie presiona naturalmente.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Obtenci√≥n de un certificado: automatizaci√≥n</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora hablemos sobre la recepci√≥n autom√°tica de certificados DV. </font><font style="vertical-align: inherit;">Para mayor claridad, veamos c√≥mo lo hace nuestro Let's Encrypt favorito. </font><font style="vertical-align: inherit;">Generalmente tiene buena documentaci√≥n, si alguien est√° interesado, e incluso en ruso.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CUMBRE</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ACME (Automatic Certificate Management Environment) es un protocolo dise√±ado para automatizar y estandarizar el proceso de obtenci√≥n de un certificado. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øC√≥mo prueba ACME que eres propietario de un dominio? </font><font style="vertical-align: inherit;">Usted dice: Quiero un certificado e indicar el tipo de validaci√≥n autom√°tica, por ejemplo, ACME HTTP-01. </font><font style="vertical-align: inherit;">Let's Encrypt le pide que coloque los datos en un archivo, y si pudiera poner los archivos en su dominio (y Let's Encrypt podr√≠a recogerlos desde all√≠ a trav√©s de HTTP), probablemente sea su propietario. </font><font style="vertical-align: inherit;">Ahora este enfoque es criticado, incluso de Google, porque no protege contra el phishing. </font><font style="vertical-align: inherit;">Es decir, con la validaci√≥n manual, es probable que el dominio aliepxress.ru suscite sospechas, pero Let's Encrypt hasta ahora no sabe c√≥mo (o puede, pero mal).</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Desaf√≠o DNS</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adem√°s de ACME, tambi√©n hay un desaf√≠o de DNS. </font><font style="vertical-align: inherit;">Por ejemplo, le dicen: ingrese un registro txt en su zona DNS, coloque los datos en √©l. </font><font style="vertical-align: inherit;">Hay otras formas, pero no comunes, y una se cancel√≥ por completo, porque result√≥ ser vulnerable. </font><font style="vertical-align: inherit;">Lo que tenemos en Plesk: los certificados comod√≠n (que solo se pueden escribir utilizando el desaf√≠o DNS) no funcionan para muchas personas, porque muy a menudo Plesk no administra las zonas DNS y la extensi√≥n del dominio </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's Encrypt</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> no puede automatizar la creaci√≥n de un registro en la zona DNS .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dos palabras m√°s sobre Let's Encrypt</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un aspecto importante al trabajar con los certificados Let's Encrypt son los l√≠mites. </font><font style="vertical-align: inherit;">En caso de duda (o sospecha de que se han logrado), es mejor seguir el enlace: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">letsencrypt.org/docs/rate-limits</font></font></a><br>
<img src="https://habrastorage.org/webt/c0/lx/5g/c0lx5gabymsjx5fzdqfvn1lk-ku.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A veces se actualizan. </font><font style="vertical-align: inherit;">Hay l√≠mites obvios que las personas olvidan: la mayor√≠a de las veces, a juzgar por las solicitudes de soporte, se enfrentan a un l√≠mite de 100 nombres de dominio en el certificado. </font><font style="vertical-align: inherit;">Let's Encrypt tambi√©n tiene un servidor provisional y hay m√°s l√≠mites, pero dichos certificados se consideran no confiables y para el navegador son similares a los autofirmados. </font><font style="vertical-align: inherit;">En la pr√°ctica, con un l√≠mite de 100 nombres, rara vez llegan a nosotros (a pesar de que los sitios en Plesk tienen un total de 1,300,000 certificados Let's Encrypt). </font><font style="vertical-align: inherit;">La mediana, seg√∫n nuestras estad√≠sticas, es de 20 nombres por certificado. </font><font style="vertical-align: inherit;">Entonces, si algo no funciona, mira, tal vez se haya alcanzado el l√≠mite. </font><font style="vertical-align: inherit;">Let's Encrypt tiene buenos informes de errores y, por lo general, puedes entender lo que sucedi√≥.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬øQue sigue?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces, despu√©s de recibir el certificado, el servidor transmite los datos clave de la sesi√≥n; esto es lo que se utilizar√° para el cifrado. </font><font style="vertical-align: inherit;">Si el servidor considera que es necesario autenticar al cliente (por ejemplo, el acceso est√° abierto solo a un cierto c√≠rculo de personas), puede preguntar: el cliente, ¬øqui√©n es usted? </font><font style="vertical-align: inherit;">Y luego el cliente deber√° enviar su certificado. </font><font style="vertical-align: inherit;">Despu√©s de recibir el mensaje </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ServerHelloDone, el</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> cliente se da cuenta de que es hora de verificar los certificados y trabajar con las claves. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todo lo que hablamos antes de que TLS 1.3 pase por un canal abierto, y cualquiera puede ver todas estas cosas. </font><font style="vertical-align: inherit;">Hay varios ataques interesantes que puedes leer sobre ti. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En la segunda </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">serie</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> del art√≠culo, aprenderemos c√≥mo el cliente verifica el certificado.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es502588/index.html">La incre√≠ble historia de PowerPoint</a></li>
<li><a href="../es502592/index.html">Neomorfismo usando SwiftUI. Parte 1</a></li>
<li><a href="../es502594/index.html">7 razones por las cuales los proyectos web no se terminan y c√≥mo lidiar con ellos</a></li>
<li><a href="../es502596/index.html">Cursos educativos gratuitos de cuarentena: dise√±o</a></li>
<li><a href="../es502598/index.html">Semana de la seguridad 21: Vulnerabilidad del servicio de impresi√≥n de Windows</a></li>
<li><a href="../es502608/index.html">C√≥mo comenzamos el mercado de aplicaciones en el servicio SaaS</a></li>
<li><a href="../es502614/index.html">Mejores pr√°cticas de Kubernetes. Establecer consultas y l√≠mites de recursos</a></li>
<li><a href="../es502620/index.html">Contabilidad de dinero</a></li>
<li><a href="../es502624/index.html">¬øC√≥mo funcionan en Facebook? Valores y contrataci√≥n en una empresa.</a></li>
<li><a href="../es502626/index.html">Capturas de pantalla autom√°ticas de iOS con XCTestplan y Xcode 11</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>