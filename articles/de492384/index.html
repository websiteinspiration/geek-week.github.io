<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👵🏽 🃏 🎂 Hack The Box - Postbote Walkthrough Redis und WebMin 💓 🔗 🚒</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ich veröffentliche weiterhin Lösungen, die zur weiteren Verarbeitung von der HackTheBox- Site gesendet wurden . Ich hoffe, dass dies zumindest jemande...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Hack The Box - Postbote Walkthrough Redis und WebMin</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/492384/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/wh/sv/nf/whsvnf--j9jflusba-yolyagtqk.png" alt="Bild"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich veröffentliche weiterhin Lösungen, die zur </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">weiteren Verarbeitung</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> von der </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">HackTheBox-</font></a><font style="vertical-align: inherit;"> Site </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">gesendet</font></a><font style="vertical-align: inherit;"> wurden </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Ich hoffe, dass dies zumindest jemandem hilft, sich im Bereich der Informationssicherheit zu entwickeln. </font><font style="vertical-align: inherit;">In diesem Artikel müssen wir Schwachstellen in Redis und WebMin ausnutzen und das Kennwort für den verschlüsselten RSA-Schlüssel abrufen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Verbindung zum Labor erfolgt über VPN. </font><font style="vertical-align: inherit;">Es wird empfohlen, keine Verbindung von einem Arbeitscomputer oder von einem Host aus herzustellen, auf dem die für Sie wichtigen Daten verfügbar sind, da Sie in einem privaten Netzwerk mit Personen landen, die sich mit Informationssicherheit auskennen :)</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Organisationsinformationen</font></font></b><div class="spoiler_text">  ,    -           ,        :<br>
<br>
<ul>
<li>PWN;</li>
<li> (Crypto);</li>
<li>c  (Network);</li>
<li> (Reverse Engineering);</li>
<li> (Stegano);</li>
<li>   WEB-.</li>
</ul><br>
         ,    ,        ,     .<br>
<a name="habracut"></a><br>
      ,     ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">  Telegram</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">    </a>   .    , ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">    </a>.<br>
<br>
      .          ,  -      ,      .<br>
</div></div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aufklärung</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dieser Computer hat eine IP-Adresse von 10.10.10.160, die ich zu / etc / hosts hinzufüge.</font></font><br>
<br>
<pre><code class="plaintext hljs">10.10.10.160    postman.htb</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zuerst scannen wir offene Ports. </font><font style="vertical-align: inherit;">Da das Scannen aller Ports mit nmap sehr lange dauert, werde ich dies zunächst mit masscan tun. </font><font style="vertical-align: inherit;">Wir scannen alle TCP- und UDP-Ports von der tun0-Schnittstelle mit einer Geschwindigkeit von 500 Paketen pro Sekunde.</font></font><br>
<br>
<pre><code class="plaintext hljs">masscan -e tun0 -p1-65535,U:1-65535 10.10.10.160 --rate=500</code></pre><br>
<img src="https://habrastorage.org/webt/uc/zl/im/uczlim6qzyp6lgtrgjhmbemdnsy.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als Nächstes müssen Sie weitere Informationen zu bekannten Ports sammeln. </font><font style="vertical-align: inherit;">Verwenden Sie dazu nmap mit der Option -A.</font></font><br>
<br>
<pre><code class="bash hljs">nmap -A postman.htb -p22,80,6379,10000</code></pre><br>
<img src="https://habrastorage.org/webt/lx/5q/oc/lx5qocr3ppfakapjdzsvv_nexho.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie aus dem nmap-Bericht hervorgeht, werden SSH und ein Webserver auf dem Host ausgeführt. </font><font style="vertical-align: inherit;">Redis funktioniert auch auf Port 6379. </font><font style="vertical-align: inherit;">Redis ist eine leistungsstarke Open Source-Datenbank, die Daten im Speicher speichert, auf die mit einem Zugriffsschlüssel zugegriffen wird. </font><font style="vertical-align: inherit;">Und Port 10000 ist für Webmin reserviert - es ist ein Softwarepaket, mit dem Sie das Betriebssystem über eine Webschnittstelle verwalten können. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als nächstes suchen wir nach Informationen zu redis 4.0.9 und MiniServ 1.910. </font><font style="vertical-align: inherit;">Es wurde </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ein Exploit gefunden</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , mit dem Sie sich beim Host authentifizieren können und Ihren Benutzernamen kennen. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/jt/uc/8l/jtuc8llwcdggg6kyos9s5kboaw4.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Fall von WebMin können wir RCE erhalten. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/wl/3x/gk/wl3xgkndyd6oy4ia51umgqutxuk.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Da wir jedoch Authentifizierungsdaten für WebMin benötigen, beginnen wir mit Redis.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Einstiegspunkt</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nach dem Herunterladen und Ausführen des Exploits sehen wir, dass eine Hostadresse und ein Benutzername erforderlich sind. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vh/wy/rt/vhwyrtwdvowkbc_2-zpfujce3oe.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Da redis ein Dienst ist, wird er als Benutzer des redis-Dienstes ausgeführt. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/bs/r7/ny/bsr7nystpygov4t-yrw9lz3afgk.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aber der Exploit schlägt fehl. </font><font style="vertical-align: inherit;">Lass es uns herausfinden. </font><font style="vertical-align: inherit;">Kurz gesagt, dieser Exploit generiert SSH-Schlüssel und legt den öffentlichen im Home-Verzeichnis des Benutzers ab. </font><font style="vertical-align: inherit;">Dann wird es über SSH mit einem privaten Schlüssel verbunden. </font><font style="vertical-align: inherit;">Aber hier ist die Sache, wenn er kontaktiert, sucht er nach dem Benutzer im Standard-Home-Verzeichnis home, und wir arbeiten mit dem Benutzer des Dienstes zusammen, dessen Home-Verzeichnis sich in / var / lib befindet. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/de/ct/r5/dectr5iaq7nxsvexlisa8wk7vcu.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ändern Sie den Befehl cmd4 in unser korrektes Ausgangsverzeichnis und führen Sie den Exploit aus. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/lv/_s/u8/lv_su8k2uqch7qcr8gnexp_eby0.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und wir kamen zum Gastgeber.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BENUTZER</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Da wir nicht wissen, wohin wir als nächstes gehen sollen, müssen wir die maximalen Informationen vom Host sammeln und analysieren. Aufzählungsskripte, zum Beispiel </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LinEnum</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , helfen dabei </font><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich habe es einfach auf den Host kopiert, die Rechte zum Ausführen zugewiesen und ausgeführt. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/re/2p/yp/re2pypcl_jiy-f11j0evpudpyp8.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als nächstes müssen wir uns eine Reihe von Informationen ansehen und herausfinden, was nicht der Norm entspricht. Und wir finden. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/pm/hf/cs/pmhfcshxm8w-sergrakiuwhk1fc.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bei der Suche nach Backups wurde ein privater SSH-Schlüssel gefunden. Darüber hinaus ist sein Eigentümer der Benutzer Matt, und die Rechte an der Datei ermöglichen es uns, sie zu lesen. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ih/fe/eh/ihfeeh_uvodjdg7iyadnh7sohxy.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kopieren Sie den Schlüssel auf Ihre Arbeitsmaschine. Wie Sie sehen können, ist der Schlüssel verschlüsselt. Wenn eine Verbindung hergestellt wird, werden Sie nach einem Kennwort gefragt. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/cc/d6/ok/ccd6okhydioruaylidw2tu9j__k.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir müssen das Passwort kennen. Sie können dies tun, indem Sie die Taste mit demselben John scrollen. Lassen Sie es uns zunächst mit ssh2john im gewünschten Format überschreiben.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/xe/iq/9m/xeiq9mohnkilt2a-eyzsaiqv95w.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Diese Ausgabe muss in einer Datei gespeichert und an Bust gesendet werden. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ty/go/d4/tygod4a6yo8tpkzojbdgodjchuy.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und sehr schnell finden wir das Passwort. </font><font style="vertical-align: inherit;">Die Verbindung über ssh weder per Schlüssel noch per Passwort ist jedoch fehlgeschlagen. </font><font style="vertical-align: inherit;">Wir erinnern uns an Redis und den Befehl su und melden uns als Matt an.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/fl/bq/hr/flbqhrdglubvran6edjdb5al0m0.png" alt="Bild"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WURZEL</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie nach etwas Interessantem suchen, denken Sie erneut an MiniServ, für das Authentifizierungsdaten erforderlich sind. </font><font style="vertical-align: inherit;">Eine weitere gute Sache ist, dass dieser Exploit in Metasploit vorhanden ist. </font><font style="vertical-align: inherit;">Sie können detaillierte Informationen über ihn sehen. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/a6/tb/jt/a6tbjt2dssc9pigav2_ncbrp7qm.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wählen Sie nun den zu verwendenden Exploit aus und legen Sie die Grundoptionen fest. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/6d/pq/q2/6dpqq2remi8fzwclizdj3a5cif8.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir befinden uns in einem System mit vollen Rechten. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie können sich uns </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">per Telegramm anschließen</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Stellen wir eine Community zusammen, in der es Menschen gibt, die sich in vielen Bereichen der IT auskennen. Dann können wir uns in Fragen der IT und der Informationssicherheit immer gegenseitig helfen.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de492364/index.html">Allgemeine Finanzanalyse in Python (Teil 1)</a></li>
<li><a href="../de492366/index.html">Verwendung der JavaScript-Konsole: Über console.log () hinaus</a></li>
<li><a href="../de492374/index.html">Experiment: Redux aus der OOP-Welt</a></li>
<li><a href="../de492376/index.html">So machen Sie Ihren Artikel oder Ihre Dokumentation schnell und genau verständlich</a></li>
<li><a href="../de492378/index.html">Reactjs, Material-UI mit JSS. Kurzanleitung</a></li>
<li><a href="../de492386/index.html">Wie der IT-Sektor der Welt hilft, weniger Lebensmittel zu werfen</a></li>
<li><a href="../de492390/index.html">Krieg auf den Bremsen. Optimieren der Anzahl der Komponenten-Renderings in React Native</a></li>
<li><a href="../de492398/index.html">Wir konfigurieren unsere Geräte für Remote-Arbeit, Podcasting, Video und Streaming</a></li>
<li><a href="../de492404/index.html">Flattern + Arduino Nano 33 BLE sense = sehr einfacher BLE Sensor</a></li>
<li><a href="../de492406/index.html">Podcasts für den Geek: einige bewährte Programme zu Projektmanagement, Technologieanalyse und GTD</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>