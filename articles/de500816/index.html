<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘©â€â¤ï¸â€ğŸ’‹â€ğŸ‘© ğŸ´ ğŸœï¸ Mikrosha. Kapitel eins. SD-Karten-Controller â­•ï¸ ğŸ§–ğŸ» ğŸŒ¥ï¸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Viele Menschen erinnern sich an diesen wunderbaren PC. Ich habe das mit 11 bekommen. Es hat 28 Jahre gedauert und jetzt habe ich beschlossen, Erweiter...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Mikrosha. Kapitel eins. SD-Karten-Controller</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/500816/"><img src="https://habrastorage.org/getpro/habr/post_images/4e4/843/62d/4e484362df0eacd9d8d9a7444c4a6c64.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Viele Menschen erinnern sich an diesen wunderbaren PC. </font><font style="vertical-align: inherit;">Ich habe das mit 11 bekommen. Es hat 28 Jahre gedauert und jetzt habe ich beschlossen, ErweiterungsgerÃ¤te, die mir damals wirklich fehlten, als Hobby herzustellen.</font></font><br>
<a name="habracut"></a><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Idee</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Netzwerk sah ich verschiedene Optionen fÃ¼r SD-Downloader fÃ¼r solche PCs. Ich mochte das Vorhandensein von Mikrocontrollern in ihnen nicht. Ich wollte eine "Vintage, Warm DIP" -Schaltung verwenden, weshalb ich mich entschied, "KR1533" fÃ¼r die Haushaltslogik zu verwenden. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als ErgÃ¤nzung. </font><font style="vertical-align: inherit;">RAM Ich habe UT62256 angewendet. </font><font style="vertical-align: inherit;">Dies ist der einzige importierte Chip im Projekt. </font><font style="vertical-align: inherit;">NatÃ¼rlich war es mÃ¶glich, KP537RU10 oder KP537RU25A zu installieren, aber erstens mussten nicht nur ein, sondern zwei installiert werden (ich plante 4 KB zusÃ¤tzlichen RAM), und zweitens hatte ich UT62256, aber ich hatte keinen KR537 und ich musste nicht bestellen Ich wollte. </font><font style="vertical-align: inherit;">Daher erlaubte ich mir die Freiheit zu importieren, und dann kam die Idee auf, alle 32 KB zusÃ¤tzlichen RAM mit Seitenwechsel zu nutzen. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/bs/hq/ho/bshqhoyuqbckntjlxyd73v88gb8.jpeg"> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
FÃ¼r das ROM habe ich KR573RF5 gewÃ¤hlt, es gab nur zwei saubere.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Flussdiagramm</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nachdem ich bei einer Tasse Tee gesessen hatte, zeichnete ich ein solches Blockdiagramm. </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/e40/650/c2d/e40650c2d607251445e4774ab7f524ed.jpg"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier ist der RAM-Chip, der ROM-Chip und der PORT-Block. Der PORT-Block verfÃ¼gt Ã¼ber eine parallele Schnittstelle mit 8 EingÃ¤ngen und 8 AusgÃ¤ngen. Beim Schreiben in die EFFF-Adresse wird der geschriebene Code an den AusgÃ¤ngen eingestellt, und beim Lesen von derselben Adresse entspricht der Lesewert dem Status der EingÃ¤nge. Drei der AusgÃ¤nge und einer der EingÃ¤nge sind Ã¼ber einen Pegelwandler mit der SD-Karte verbunden.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der RAM wird durch den UT62256-Chip dargestellt und verfÃ¼gt Ã¼ber 32 KB Speicher. Da der Bereich der E000-EFFE-Adressen fast 4 kB (4095 Byte) betrÃ¤gt, erhalten wir 8 Seiten, die vom PORT-Block ausgewÃ¤hlt werden, Bits 1, 2 und 3. Das heiÃŸt, das Schreiben in die EFFF-Adresse setzt die Seite gemÃ¤ÃŸ diesen drei Bits. Das Lesen von diesem Port zeigt auch, welche Seite gerade ausgewÃ¤hlt ist (in denselben Bits). Insgesamt haben wir 32760 Bytes zusÃ¤tzlichen RAM (4095x8str). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der ROM-Chip ist KR573RF5. Es ist mit dem Adressraum F000-F7FF verbunden und enthÃ¤lt den BSVV-Code (BIOS). Die Aufgabe dieses Codes besteht darin, die SD-Karte zu initialisieren, das Betriebssystem von ihr zu laden und die Steuerung darauf zu Ã¼bertragen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dementsprechend geben wir nach dem Einschalten des PCs den GF000-Systemmonitor ein und drÃ¼cken VK.</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 In Zukunft besteht die Idee, das native ROM des Systemmonitors so zu Ã¤ndern, dass das Betriebssystem automatisch von der SD-Karte gestartet wird. Der PC wechselt dann zur Standard-Monitor-Eingabeaufforderung, wenn der Download fehlgeschlagen ist oder beispielsweise durch DrÃ¼cken einer Taste unterbrochen wurde. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich werde noch einmal darÃ¼ber nachdenken.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Planen</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
UngefÃ¤hr 2-3 Stunden am Computer, und ich habe das folgende Diagramm in EAGLE gezeichnet. </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/457/20c/399/45720c3997d2e7861a69285379e0d26f.jpg"><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zoom habe</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ich basierend auf den Mikroschaltungen gezeichnet, die ich hatte. </font><font style="vertical-align: inherit;">Es ist mÃ¶glich, dass die Anzahl der Logikchips reduziert werden kann, wenn andere Gatter verwendet werden, aber ich hatte nur eines. </font><font style="vertical-align: inherit;">Und in Zukunft werde ich hÃ¶chstwahrscheinlich die Schaltung optimieren. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Low Level Circuit Parsing ...</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">... unter dem Spoiler entfernt, ich denke, nur wenige Menschen interessieren sich fÃ¼r diesen Dschungel.</font></font></b>
                        <div class="spoiler_text">     V3/1,     A14  A15  ,    N3   ,        .1.   V1/2      G,     IC2.    A  B,    A12  A13 . , ,        A14  A15,        A12  A13.      â€” 1110, <br>
  A15-1; A14-1; A13-1; A12-0.       N2.    ,        5  11,  - ,         ,            .  1   5,   2   11.   ,   1C ,   2C ,    .1     5,   .0 â€”  11.<br>
<br>
:       Exxx  =1,   Â«PORTÂ»,        Exxx  C=0,   Â«RAMÂ».<br>
<br>
 Â«CÂ»      ,     (A0-A11).      xFFF,  =1,   =0. :  Â«PORTÂ»   EFFF,   Â«RAMÂ»  E000-EFFE.<br>
<br>
 Â«RAMÂ»    CS  IC3,   ,  ,     E000-EFFE      .     E000-EFFE      .     EFFF      IC4,     .      Â«PORTÂ»  Â«WRÂ» c   V1/5, V1/6  V3/4.<br>
<br>
   EFFF       IC5,    <br>
   B0-B7. <br>
<br>
           .     Â« Â»   CS3      CS  . </div>
                    </div><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Layout-Montage</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt habe ich keine Gelegenheit mehr, die Platine zu Hause zu vergiften, und habe mit einem StÃ¼ck folienbeschichteter doppelseitiger Leiterplatte das erforderliche Rechteck herausgesÃ¤gt. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dieses Rechteck wurde fest in den Steckplatz fÃ¼r die interne Schnittstelle des PCs eingesetzt, hing nicht heraus und bewegte sich nicht. Als nÃ¤chstes kratzte ich die Pads hinten und vorne. Es ist ziemlich gut geworden. Dann die grobe Anordnung der Mikrokreise und die AufklÃ¤rung der LÃ¶cher. Auf der Vorderseite habe ich es mit einem groÃŸen Bohrer gebohrt, damit die AnschlÃ¼sse der Mikrokreise nicht mit der Frontfolie in Kontakt kommen. Auf der RÃ¼ckseite habe ich den Umfang jeder Kontaktreihe zerkratzt und in KontaktflÃ¤chen unterteilt.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im nÃ¤chsten Schritt steckte ich alle Mikroschaltungen (und die Steckdose) ein und verschwand von hinten. Die Installation, die ich mit einem dÃ¼nnen MGTF durchgefÃ¼hrt habe, hat viel Zeit in Anspruch genommen. Er fÃ¼hrte die Verkabelung auf beiden Seiten, von vorne lÃ¶te er direkt an die Beine der Mikrokreise, von hinten zu den Stellen. </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/2a3/6b0/811/2a36b081191f9121d1c009aa800343d7.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als der LÃ¶tvorgang beendet war, beschloss ich, auf den Signalpegelwandler zu achten. Tatsache ist, dass die SD-Karte mit einer Spannung von 3,3 V arbeitet und die Chips KR1533AP6 und KR1533IR22 TTL 5V. Deshalb musste ich einen kleinen Adapterschal herstellen, bei dem die Pegel auf Zenerdioden beschrÃ¤nkt waren. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Signal, das von der SD-Karte zum Controller kommt, habe ich gerade an die Quelle 3.3v gezogen. 10k Widerstand. Wie die Praxis gezeigt hat, muss dieses Signal nicht konvertiert werden. </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/1a9/b60/a51/1a9b60a514daff10804816ab02db91f9.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Obwohl ich in der endgÃ¼ltigen Version wahrscheinlich einen Wechselrichter machen werde, der auf einem Komparator basiert.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich habe einen microSD-zu-SD-Adapter als Kartenhalter verwendet. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Allgemeinen gab es keine besonderen Probleme beim Zusammenbau des Layouts, obwohl ich befÃ¼rchtete, dass einige der Mikroschaltungen fehlerhaft funktionieren kÃ¶nnten.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Layout-Tests</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zuerst Ã¼berprÃ¼fte ich die RAM-Operation, schrieb mit der Systemmonitor-Direktive â€Fâ€œ Muster â€AAâ€œ, â€55â€œ, â€F0â€œ und â€0Fâ€œ in den E000-EFFE-Bereich und Ã¼berprÃ¼fte sie mit der Direktive â€Dâ€œ. </font><font style="vertical-align: inherit;">Alles stellte sich als normal heraus. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dann begann ich mit der Anweisung â€Mâ€œ, verschiedene Werte in die EFFF-Adresse zu schreiben und die Ã„nderungen an den Beinen des Registers 153322 mit einem Multimeter zu beobachten. Die ZustÃ¤nde entsprachen den aufgezeichneten Codes. </font><font style="vertical-align: inherit;">Beim Lesen von diesem Port enthielt der Code die ausgewÃ¤hlte Seite gemÃ¤ÃŸ dem Plan, und selbst wenn das MISO-Signal im Low-Bit gegen Masse geschlossen war, stellte sich heraus, dass es 0 war und beim Ã–ffnen 1. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es war sogar irgendwie verdÃ¤chtig, dass alle Mikrokreise funktionierten und die Installation erfolgreich war keine Fehler.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BSVV</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 NatÃ¼rlich hatte ich keine speziellen Tools zum Schreiben von Programmen fÃ¼r "580" 80 ". </font><font style="vertical-align: inherit;">Ich musste ein Programm in ein Notizbuch (Notepad) schreiben und es dann manuell in Codes Ã¼bersetzen. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Erstellte eine Datei im Editor unter DOS â€HIEWâ€œ und begann, sie mit Codes zu fÃ¼llen. </font><font style="vertical-align: inherit;">FÃ¼r die Grundlagen habe ich mein Projekt unter AVR aufgenommen, bei dem die SD-Karte standardmÃ¤ÃŸig initialisiert wurde. </font><font style="vertical-align: inherit;">Das Projekt war alt und verwendete kein Dateisystem, nur einen Logger. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zuerst schrieb ich eine Low-Level-Funktion der SPI-Programmierschnittstelle und dann eine High-Level-SD-Karteninitialisierungsroutine. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es stellte sich heraus, dass so etwas wie dieser Algorithmus ...</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">... was unter den Spoiler gestellt wird, denke ich, ist es schon allen bekannt.</font></font></b>
                        <div class="spoiler_text">1.    ()  90;<br>
2.  CS  .1   10  FF;<br>
3.  CS  .0;<br>
4.  CMD0;<br>
5.   01,    7;<br>
6.  .  =0,    ,    2;<br>
7.  CMD8;<br>
8.  ACMD41;<br>
9.   00,   11<br>
10.  .  =0,    ,    8;<br>
11.  CMD58.<br>
12.  2       EFFE.<br>
13.  .<br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Das OCR-Kartenregister wurde auch in der Initialisierungsroutine gelesen, und das zweite Byte darin wurde in die EFFE-Adresse geschrieben. </font><font style="vertical-align: inherit;">Dies war notwendig, um den Kartentyp zu bestimmen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Fall von SDSC - 80h und im Fall von SDHC - C0h. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Wenn die Initialisierung nicht bestanden wurde, wurde die Meldung â€SD CARD ERRORâ€œ angezeigt und der Monitor ging ohne ZurÃ¼cksetzen aus. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich konvertierte dieses BSVV in WAV und lud es Ã¼ber den Bandeingang auf den PC herunter, debuggte es dann, korrigierte den Quellcode und lud es erneut herunter.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BrÃ¼cken</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt habe ich zusÃ¤tzlichen RAM, 32.760 Bytes groÃŸ, aufgeteilt in 8 Seiten. Aber wie navigiere ich zwischen den Seiten? Wie kann ein Programm, das auf der ersten Seite ausgefÃ¼hrt wird, eine Routine auf der vierten Seite aufrufen? </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um dieses Problem zu lÃ¶sen, habe ich Software-Bridges bereitgestellt. Eine BrÃ¼cke ist ein kleiner Bereich im ROM, der die SteuerÃ¼bertragung vermittelt.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zum Beispiel muss das AusfÃ¼hren von Code die Kontrolle auf Seite 3 Ã¼bertragen, um E4B5 zu adressieren. Dann setzt der AusfÃ¼hrungscode die unteren 12 Bits (4B5) in das Registerpaar des Prozessors HL und setzt in die oberen vier Bits den Wert 3 - die Seitenzahl. In das Registerpaar HL wird nun der Wert 34B5 geschrieben. Und der Code springt (JMP) in den ROM-Bereich, der als JMP-Bridge bezeichnet wird. Er wird nur an eine feste Adresse im ROM gesendet. Der Code in diesem Bereich extrahiert die Seitenzahl aus den hohen Bits des HL-Registerpaars und schreibt sie an der EFFF-Adresse in das Register des PORT-Blocks. Die dritte Seite des RAM wird jetzt im Bereich E000-EFFE angezeigt. Das JMP-Bridge-Programm setzt die vier hohen Bits des HL-Registerpaars zurÃ¼ck und schreibt dort "E". Jetzt gibt es im HL-Registerpaar bereits eine physikalische Adresse E4B5, und hier Ã¼bertrÃ¤gt das JMP-Bridge-Programm die Steuerung an diese.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dies Ã¼bertrÃ¤gt die Kontrolle zwischen den Seiten. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gibt eine CALL-Bridge, die zum Aufrufen einer Subroutine mit einer RÃ¼ckgabe erforderlich ist. Sie unterscheidet sich von JMP-Bridge durch das Speichern der aktuellen Seite auf dem Stapel und das umgekehrte Verfahren fÃ¼r die RÃ¼ckgabe. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die nÃ¤chsten beiden BrÃ¼cken sind STA-Bridge und LDA-Bridge. </font><font style="vertical-align: inherit;">Wie die Namen andeuten, schreibt der erste das Batterieregister in eine logische Adresse (in HL) und der zweite liest Daten von der logischen Adresse in dieses Register. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dank dieser beiden BrÃ¼cken kann ein Programm, das von einer Seite ausgefÃ¼hrt wird, Daten auf einer anderen speichern.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Laden des Betriebssystems</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie sich den Bootsektor der SD-Karte ansehen, sehen Sie, dass sich der Text â€Festplattenfehler, drÃ¼cken Sie eine beliebige Taste zum Neustartâ€œ an den Adressen 1AC-1D4 befindet. </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/a56/a5a/a9b/a56a5aa9bd2e2f2a81499a567ad2da25.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ja, es ist so seltsam, wie es auf dem Foto aussieht, weil die Zeichenkodierung von Mikroshi nicht mit ASCII Ã¼bereinstimmt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich habe mich entschieden, diesen Bereich zu verwenden, um die Daten dort zum Herunterladen des PCs zu platzieren. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zuerst habe ich den Code 00 in Position 1BA gesetzt und damit den Datensatz abgeschnitten. Jetzt sollte nur noch "Festplattenfehler" angezeigt werden und fertig. Die restlichen Bytes gehÃ¶ren mir. Das Prinzip ist einfach: 6 Byte MicrOS-Signatur und 4 Byte Adresse auf der SD-Karte am Anfang der Datei mit Betriebssystem. In BSVV habe ich geschrieben, dass nach dem Empfang des Bootsektors von der SD-Karte die Signatur Ã¼berprÃ¼ft wird. Wenn es eine gibt, nehmen Sie die nÃ¤chsten 4 Bytes und verwenden Sie sie als Sektoradresse zum Laden des Betriebssystems.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn keine Signatur vorhanden ist, wird die Meldung â€OS DOWNLOAD ERRORâ€œ angezeigt und der Systemmonitor erlischt ohne ZurÃ¼cksetzen.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gesamt</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und jetzt endlich funktioniert alles. </font><font style="vertical-align: inherit;">BSVV ist geschrieben, aber ich muss es noch in ROM schreiben. </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/49a/cb4/d36/49acb4d36b5b9709eba320cca18b1b39.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und dafÃ¼r muss ich alle Adressen von Unterprogrammaufrufen und -sprÃ¼ngen bearbeiten, da dieser Prozessor eine absolute Adressierung hat. </font><font style="vertical-align: inherit;">Und ich habe BSVV fÃ¼r die Region 6000-67FF geschrieben, um sie in den RAM zu laden. </font><font style="vertical-align: inherit;">Aber jetzt mÃ¼ssen wir alle 6xxx in Fxxx Ã¤ndern. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AuÃŸerdem bin ich in den "Popanetsky" -Bedingungen. </font><font style="vertical-align: inherit;">Ich habe einen ROM-Programmierer, aber es ist ein alter unter einem LPT-Port. </font><font style="vertical-align: inherit;">Und es gibt keinen einzigen Computer mit LPT. </font><font style="vertical-align: inherit;">Aber es gibt ein Paar Atmega32A im PDIP40-Paket und ein Steckbrett. </font><font style="vertical-align: inherit;">MÃ¶glicherweise mÃ¼ssen Sie LPT mit AVR emulieren. </font><font style="vertical-align: inherit;">Aber vielleicht klappt alles ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das ist alles fÃ¼r jetzt. </font><font style="vertical-align: inherit;">Vielen Dank fÃ¼r Ihre Aufmerksamkeit! </font><font style="vertical-align: inherit;">Fortsetzung folgtâ€¦</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de500796/index.html">Was zu analysieren ist, bevor eine Schnittstelle entworfen wird</a></li>
<li><a href="../de500798/index.html">Jetzt weiÃŸ ich, dass mein Kollege Python hat oder wie unser Team wÃ¤hrend der Distanz Beziehungen auf Distanz unterhÃ¤lt</a></li>
<li><a href="../de500800/index.html">Warum Software nicht immer eine Ware ist und wo die IT davon profitiert</a></li>
<li><a href="../de500804/index.html">Nachbesprechung des Audi A8</a></li>
<li><a href="../de500806/index.html">Begleiten</a></li>
<li><a href="../de500818/index.html">Neurocomputer-Schnittstellen fÃ¼r Spiele: Was heute bekannt ist</a></li>
<li><a href="../de500822/index.html">Wer wird das moderne Web begraben?</a></li>
<li><a href="../de500840/index.html">Mortal Kombat 11-Rahmenanalyse</a></li>
<li><a href="../de500844/index.html">Optimierungen in VictoriaMetrics durchfÃ¼hren. Alexander Valyalkin</a></li>
<li><a href="../de500848/index.html">MVP von einem einzelnen Entwickler</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>