<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üññüèº üññ üë®üèº‚Äçüî¨ CGI √† la maison avec Unreal Engine et iPhone üë©‚Äçüè≠ üë®‚Äçüë®‚Äçüëß‚Äçüë¶ üèÇüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour √† tous! Je m'appelle Vasily Mazalov, je travaille comme monteur vid√©o senior chez Pixonic. Notre d√©partement cr√©e des cr√©ations vid√©o pour le ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>CGI √† la maison avec Unreal Engine et iPhone</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pixonic/blog/494942/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bonjour √† tous! </font><font style="vertical-align: inherit;">Je m'appelle Vasily Mazalov, je travaille comme monteur vid√©o senior chez Pixonic. </font><font style="vertical-align: inherit;">Notre d√©partement cr√©e des cr√©ations vid√©o pour le marketing et la communaut√©: vid√©os pour pages en pages, revoir des vid√©os d'innovations de jeux et autres contenus. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lorsque je ne cr√©e pas de cr√©ativit√©, je surveille Internet pour de nouveaux formats et fa√ßons de pr√©senter du mat√©riel afin de rendre notre propre contenu plus diversifi√©, int√©ressant et attrayant pour les nouveaux joueurs. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il y a un an, je suis tomb√© sur la vid√©o suivante:</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Voir la vid√©o</font></font></b><div class="spoiler_text"><iframe width="560" height="315" src="https://www.youtube.com/embed/i51CizUXd7A" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Que voyons-nous ici? </font><font style="vertical-align: inherit;">Le gars a mis un costume pour capturer le mouvement du corps (jusqu'√† pr√©sent, rien d'inhabituel), a accroch√© un iPhone devant lui (mais c'est int√©ressant) et diffuse ainsi l'animation du visage et du corps du personnage directement en temps r√©el dans Unreal Engine, et le r√©sultat recherche une impl√©mentation si simple assez haute qualit√©. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Id√©e sympa, je pensais. </font><font style="vertical-align: inherit;">Puis ferm√© la vid√©o. </font><font style="vertical-align: inherit;">Et il a continu√© √† travailler davantage. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Six mois plus tard, le mat√©riel de formation sur la fa√ßon de capturer des animations faciales dans Unreal Engine √† l'aide d'une application sur l'iPhone s'est r√©v√©l√© √™tre du domaine public. </font><font style="vertical-align: inherit;">En m√™me temps, j'ai d√©couvert qu'un costume pour capturer le mouvement avait √©t√© achet√© dans notre d√©partement d'art. </font><font style="vertical-align: inherit;">Vu sa compatibilit√© avec UE: tout s'est bien pass√©. </font><font style="vertical-align: inherit;">Il ne restait plus qu'√† trouver un iPhone pour continuer √† travailler, mais de nos jours il y a encore moins de probl√®mes avec cela.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Voir la vid√©o</font></font></b><div class="spoiler_text"><iframe width="560" height="315" src="https://www.youtube.com/embed/AIHoDo7Y4_g" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il y avait beaucoup de questions. </font><font style="vertical-align: inherit;">Avant moi, il y avait un champ inculte d'animation inexplor√©e, l'Unreal Engine, la mod√©lisation du visage et du corps humain, et d'autres choses compl√®tement √©loign√©es du montage vid√©o, mais en m√™me temps, un grand d√©sir de r√©aliser ce qui √©tait pr√©vu. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le long processus d'√©tude de divers documents a commenc√©. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lisez ce qui s'est pass√© et comment nous y sommes parvenus.</font></font><br>
<a name="habracut"></a><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Animation de visage</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour r√©aliser notre id√©e, il n'√©tait pas rentable pour nous d'utiliser et de sculpter le personnage √† partir de z√©ro: cela prendrait beaucoup de temps et n√©cessiterait des am√©liorations complexes et le plus souvent injustifi√©es. Par cons√©quent, nous avons d√©cid√© d'utiliser DAZ Studio: les os du visage y √©taient initialement pos√©s, vous permettant de cr√©er rapidement les contractions et les √©motions faciales n√©cessaires, sur lesquelles le sculpteur passerait beaucoup plus de temps. Oui, les mod√®les cr√©√©s dans DAZ sont loin d'√™tre une image photor√©aliste, mais ils √©taient parfaitement adapt√©s √† nos objectifs. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour enregistrer des animations faciales, nous n'avions besoin que d'un iPhone avec une cam√©ra frontale TrueDepth - c'est-√†-dire de l'iPhone X et sup√©rieur. C'est cette technologie qui a lu la topologie du visage et transf√©r√© les valeurs n√©cessaires dans Unreal d√©j√† √† notre mod√®le.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/hu/yo/11/huyo11io_r0xlfw8nzzdzhawcvc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les formes de fusion sont responsables de diff√©rentes expressions faciales - des mod√®les 3D de la m√™me topologie, c'est-√†-dire avec le m√™me nombre de sommets, mais de formes diff√©rentes. </font><font style="vertical-align: inherit;">Face AR utilise 51 m√©langes, et gr√¢ce √† la documentation d√©taill√©e d'Apple qui d√©crit les m√©langes sp√©cifiques utilis√©s dans DAZ, nous avons pu les faire assez rapidement. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'ensemble des √©motions et des m√©langes dans un mod√®le 3D ressemble √† ceci: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/be/rx/ep/berxephpsuciz3wxd7vcachheo0.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M√©langer des formes √† partir d'Internet </font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/jo/9q/p2/jo9qp2iqqqyo1vyp514j-7xacpu.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nos m√©langes</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Donc, nous obtenons d'abord notre visage Unreal Engine pour les tests, puis construisons l'application et retournons √† Unreal pour obtenir le r√©sultat.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/fh/x1/ui/fhx1uimpcjayhq0ybay3ifq8rdq.png"><br>
<br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Animation corporelle</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour cr√©er un corps, il fallait prendre en compte les sp√©cificit√©s du logiciel pour travailler avec une combinaison. Nous avons travaill√© avec la combinaison de capture de mouvement du syst√®me de capture de mouvement Perception Neuron 2.0 de Noitom. Il en co√ªte environ 2500 dollars. C'est le costume le moins cher du march√© et pas le meilleur repr√©sentant parmi les analogues: il est tr√®s sensible au rayonnement √©lectromagn√©tique, ce qui fait bouger les coordonn√©es des capteurs s'il se trouve dans le rayon du rayonnement actif, et il sera encore plus difficile de nettoyer l'animation. Heureusement, nous venons de d√©m√©nager √† un autre √©tage, et dans un nouvel endroit, il √©tait assez d√©sert, ce qui signifie que le rayonnement √©lectromagn√©tique a √©t√© r√©duit au minimum - c'est-√†-dire qu'il √©tait id√©al pour nous.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jv/df/qt/jvdfqtdhz19xnag1w_4_lrtg1bw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pourquoi un costume? Les animations toutes faites de diverses biblioth√®ques ne nous convenaient pas, car notre personnage devrait avoir un caract√®re et un comportement uniques, et le visage et le corps devraient les refl√©ter avec pr√©cision. Si nous faisions l'animation √† partir de z√©ro, cela prendrait un mois, voire deux. L'utilisation d'√©quipement de capture de mouvement a permis de gagner du temps. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Contrairement au visage, les artistes eux-m√™mes ont peint le mod√®le du corps √† partir de z√©ro. Ensuite, il a fallu la faire gr√©er et √©corcher √† Maya. Apr√®s avoir assembl√© le corps, nous le d√©marrons dans Unreal, nous collectons tout pour la mocap, enregistrons l'animation, apr√®s quoi le r√©sultat ne reste plus qu'√† p√©trir.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/1c/na/r0/1cnar0oe7evduomjsu9v_q-gyx0.png"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour que l'animation soit transmise avec pr√©cision, les am√©liorations √©taient minimes ou pour les √©viter du tout, et afin de diffuser l'animation du costume directement sur l'Unreal Engine, il √©tait n√©cessaire de d√©finir correctement les os et de supprimer les valeurs inutiles de notre mod√®le. Noitom a un mod√®le 3D approximatif pour l'Unreal Engine, en utilisant lequel, comme r√©f√©rence, nous devions affiner notre propre mod√®le: le mettre dans la pose en T, placer les paumes et les doigts dans des positions de mod√©lisation non standard et remettre toutes les valeurs √† z√©ro. Il √©tait tr√®s important que tous les os soient sans virages inutiles, sinon le programme les multiplierait, ce qui fausserait consid√©rablement le mouvement.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Au total, il a fallu environ deux heures pour calibrer la combinaison et enregistrer les premi√®res vid√©os. </font><font style="vertical-align: inherit;">Nous avons d√©fini les param√®tres dans l'Unreal Engine, enregistr√© l'animation du corps avec toutes les pauses n√©cessaires en fonction du script, puis enregistr√© l'animation du visage en fonction des mouvements du corps et du m√™me script et obtenu le r√©sultat, que vous verrez dans l'illustration suivante.</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/E77DXw-zSu4" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apr√®s l'enregistrement, l'animation devait √™tre am√©lior√©e, nous avons donc confi√© √† l'animateur la t√¢che de le nettoyer. </font><font style="vertical-align: inherit;">Il lui a fallu trois jours pour nettoyer deux minutes d'animation.</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/h1KUncMcTCw" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, il nous a fallu environ trois semaines pour arriver √† la version finale, et si nous excluons le raffinement de certains facteurs √† la fois dans le mod√®le du visage et dans le corps, cette p√©riode peut √™tre r√©duite d'une autre semaine. </font></font><br>
<br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pourquoi l'utilisons-nous?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Prenons une pause dans le processus CGI et parlons des objectifs du projet. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√Ä ce moment, quand j'ai explor√© ce sujet et collect√© les informations n√©cessaires au travail, des pilotes sont apparus dans notre jeu. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Habituellement, lorsqu'un nouveau contenu sort, soit une voix hors √©cran en parle, soit les d√©veloppeurs eux-m√™mes, ou les informations arrivent simplement d'une mani√®re ou d'une autre √† travers le gameplay. Nous avons maintenant la possibilit√© de cr√©er un personnage, de bien le pr√©parer, d'assembler √† partir de ressources de haute qualit√© les emplacements dans lesquels il sera situ√© et, √† travers ce h√©ros, de communiquer avec les joueurs: de l'histoire et des vid√©os de r√©vision aux √©missions en direct.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour la premi√®re fois dans un jeu sur les robots, des personnages vivants sont apparus, et apr√®s eux des histoires qu'ils peuvent raconter sur eux-m√™mes et sur le monde. Et je pensais que ce serait cool s'il √©tait possible de collecter des cin√©matiques de gameplay avec des personnages qui plongeraient les joueurs dans le monde du jeu aussi vite que nous faisons des vid√©os sur le moteur. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vu/3j/lf/vu3jlfs_gtgsym1a0slfy_otmg0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En collaboration avec le d√©partement communautaire, nous avons commenc√© √† proposer une image du personnage, √† quoi il pourrait ressembler et quelle serait son histoire. Notre gestionnaire de communaut√© senior a √©crit le script, que nous avons ensuite d√©velopp√© en termes de gain de temps et de simplification de la production.</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/RQ6y8dRT2x8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans cette vid√©o, vous voyez presque tous les tests que nous avons faits avec l'animation faciale et l'animation corporelle. </font><font style="vertical-align: inherit;">Puisqu'ils ont des sp√©cifications diff√©rentes, ils ont d√ª √™tre test√©s tour √† tour et seulement m√©lang√©s √† la fin. </font><font style="vertical-align: inherit;">Pour les tests d'animation corporelle, un mod√®le de costume a √©t√© tir√© de la bande-annonce de CGI pour la nouvelle version:</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/sl-P_8CSahg" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eh bien, montrons maintenant ce que nous avons obtenu:</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/3WMqrO1-6ww" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Total</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Avec une combinaison de capture de mouvement, un iPhone, un mod√®le 3D et Unreal Marketplace avec une vaste s√©lection d'actifs gratuits de qualit√©, nous pouvons collecter des histoires int√©ressantes pour nos joueurs en seulement quelques semaines. </font><font style="vertical-align: inherit;">Nous avons √©galement acquis une exp√©rience et une compr√©hension de la fa√ßon de cr√©er rapidement un nouveau personnage et, au stade de sa cr√©ation, de prendre en compte toutes les caract√©ristiques de la production afin d'obtenir le meilleur r√©sultat en peu de temps. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pourquoi n'avons-nous pas cherch√© √† obtenir la qualit√© de cin√©matiques sympas comme Blizzard? </font><font style="vertical-align: inherit;">Pour le contenu communautaire et marketing, la qualit√© actuelle est suffisante pour donner √† nos utilisateurs une nouvelle perspective sur le monde du jeu. </font><font style="vertical-align: inherit;">Cependant, bien qu'il ne soit toujours pas n√©cessaire d'am√©liorer la qualit√© des clips, nous sommes toujours √† la recherche de nouvelles solutions.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr494920/index.html">Mauvais conseil au d√©veloppeur: que faire pour ¬´faire plaisir¬ª √† la direction</a></li>
<li><a href="../fr494922/index.html">Nizhny Novgorod pour un informaticien: perspectives de travail et opportunit√©s de vie</a></li>
<li><a href="../fr494924/index.html">La mise en ≈ìuvre de l'effet aquarelle dans les jeux</a></li>
<li><a href="../fr494938/index.html">Bonne journ√©e de sauvegarde! Ne l'oublie pas</a></li>
<li><a href="../fr494940/index.html">DevOps - qu'est-ce que c'est, pourquoi et combien est-il demand√©?</a></li>
<li><a href="../fr494950/index.html">Quelques tendances de stockage √† surveiller</a></li>
<li><a href="../fr494956/index.html">Dur√©e de vie des octets de donn√©es</a></li>
<li><a href="../fr494964/index.html">R√©seaux de neurones et trading. Mise en ≈ìuvre pratique</a></li>
<li><a href="../fr494966/index.html">SCRUM: un po√®me sur l'amour et la douleur</a></li>
<li><a href="../fr494968/index.html">C√¢bles Internet sous-marins: qui les achemine</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>