<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëÜüèΩ ü•û üå¥ Criando intera√ß√µes simples de IA com objetos do ambiente üìç üôèüèº üêã</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ao criar intelig√™ncia artificial para videogames, um dos aspectos mais importantes √© a sua localiza√ß√£o. A posi√ß√£o do personagem da IA ‚Äã‚Äãpode mudar com...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Criando intera√ß√µes simples de IA com objetos do ambiente</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/496080/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6b5/840/cec/6b5840cec8e3b42adad879472c47930d.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ao criar intelig√™ncia artificial para videogames, um dos aspectos mais importantes √© a sua localiza√ß√£o. A posi√ß√£o do personagem da IA ‚Äã‚Äãpode mudar completamente seus tipos de comportamento e decis√µes futuras. Neste tutorial, entenderemos como o ambiente do jogo pode afetar a IA e como us√°-lo corretamente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este artigo foi retirado do livro </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Practical Game AI Programming</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , escrito por Michael Dagrack e publicado pela Packt Publishing. Este livro permite que voc√™ aprenda como criar uma IA de jogo e, do zero, implemente os algoritmos de IA mais avan√ßados.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As intera√ß√µes visuais s√£o b√°sicas, elas n√£o afetam diretamente a jogabilidade, mas permitem melhorar o videogame e seus personagens, tornando-os parte do ambiente que criamos, o que afeta bastante a imers√£o do jogador no jogo. </font><font style="vertical-align: inherit;">Isso prova a import√¢ncia do ambiente fazer parte do jogo, e n√£o apenas ajudar a preencher o espa√ßo na tela. </font><font style="vertical-align: inherit;">Intera√ß√µes semelhantes s√£o cada vez mais encontradas nos jogos, e os jogadores esperam v√™-las. </font><font style="vertical-align: inherit;">Se houver um objeto no jogo, ele deve cumprir alguma fun√ß√£o, embora n√£o a mais importante.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um dos primeiros exemplos de intera√ß√£o com os ambientes pode ser encontrado no primeiro Castlevania, lan√ßado em 1986 para o Nintendo Entertainment System. </font><font style="vertical-align: inherit;">Desde o in√≠cio, o jogador pode usar o chicote para destruir velas e fogos, que originalmente faziam parte do plano de fundo.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/90c/a93/19c/90ca9319cffa8e665c51bc56297876a5.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este e alguns jogos da √©poca abriram muitas portas e oportunidades em termos da percep√ß√£o moderna dos antecedentes e ambientes dos personagens no jogo. </font><font style="vertical-align: inherit;">Obviamente, devido √†s limita√ß√µes de hardware dessa gera√ß√£o de consoles, era muito mais dif√≠cil criar coisas simples que geralmente s√£o aceitas pelos padr√µes atuais. </font><font style="vertical-align: inherit;">Mas cada gera√ß√£o de consoles trouxe novos recursos e os desenvolvedores os usaram para criar jogos incr√≠veis.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Portanto, nosso primeiro exemplo de intera√ß√£o visual √© um objeto em segundo plano que pode ser destru√≠do sem afetar diretamente a jogabilidade. </font><font style="vertical-align: inherit;">Esse tipo de intera√ß√£o √© encontrado em muitos jogos. </font><font style="vertical-align: inherit;">Implement√°-lo √© simples, basta animar o objeto quando for atacado. </font><font style="vertical-align: inherit;">Depois disso, podemos decidir se algum ponto ou objeto deve ser descartado do objeto que recompensa o jogador por explorar o jogo.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora podemos seguir para o pr√≥ximo exemplo - objetos no jogo que s√£o animados ou se movem quando os personagens passam por eles. O princ√≠pio aqui √© o mesmo que com objetos destrut√≠veis, mas desta vez a intera√ß√£o √© mais sutil - requer que o personagem se mova para o ponto em que o objeto est√°. Isso pode ser aplicado a v√°rios elementos do jogo, desde o movimento da grama, poeira ou √°gua, at√© p√°ssaros voando ou pessoas fazendo gestos engra√ßados; as possibilidades s√£o infinitas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ao analisar essas intera√ß√µes, podemos facilmente determinar que elas n√£o usam necessariamente a IA e, na maioria dos casos, √© apenas uma fun√ß√£o booleana que √© ativada de acordo com alguma a√ß√£o especificada. Mas eles fazem parte do ambiente e, portanto, devem ser levados em considera√ß√£o ao implementar uma intera√ß√£o de alta qualidade entre o ambiente e a IA.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Crie intera√ß√µes simples com o ambiente</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como j√° vimos, o ambiente j√° se tornou parte da jogabilidade, e isso deu origem a muitos novos conceitos e id√©ias para jogos futuros. </font><font style="vertical-align: inherit;">O pr√≥ximo passo foi a integra√ß√£o dessas pequenas mudan√ßas na jogabilidade e seu uso para alterar o comportamento do jogador no jogo. </font><font style="vertical-align: inherit;">Isso definitivamente afetou positivamente a hist√≥ria dos videogames, porque todos os elementos da cena come√ßaram a ganhar vida gradualmente e o jogador come√ßou a perceber o qu√£o rico era o ambiente. </font><font style="vertical-align: inherit;">Usar ambientes para alcan√ßar objetivos no jogo se tornou parte da jogabilidade.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ad2/0c6/39f/ad20c639fd190d338f6e2e72847338b1.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para demonstrar um exemplo de ambiente que afeta diretamente a jogabilidade, daremos um excelente exemplo - a franquia Tomb Raider. Neste exemplo, nossa personagem, Lara Croft, deve empurrar o cubo at√© que ele caia na √°rea marcada. Isso mudar√° o ambiente e abrir√° um novo caminho, permitindo que o jogador avance mais de n√≠vel. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esses quebra-cabe√ßas podem ser encontrados em muitos jogos: voc√™ deve executar uma a√ß√£o em um determinado ponto do mapa para que algo aconte√ßa em outra parte dele, e isso pode ser usado para atingir algum objetivo no jogo. Normalmente, precisamos alterar o pr√≥prio ambiente para avan√ßar ainda mais em n√≠vel. Portanto, quando os desenvolvedores planejam um mapa ou n√≠vel, eles levam isso em considera√ß√£o e criam todas as regras relacionadas a cada intera√ß√£o. Por exemplo:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">if</span>(cube.transform.position == mark.transform.position)<font></font>
{<font></font>
  openDoor = <span class="hljs-literal">true</span>;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora imagine por um momento que Lara Croft tem um personagem aliado cuja principal tarefa √© ajud√°-la a colocar esta caixa em seu lugar. </font><font style="vertical-align: inherit;">E neste cap√≠tulo, consideraremos exatamente esse tipo de intera√ß√£o: o personagem da IA ‚Äã‚Äãentende como o ambiente funciona e como us√°-lo.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ambiente em movimento no Tomb Raider</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vamos direto a esse cen√°rio e tentamos recriar uma situa√ß√£o em que haja um personagem de IA que possa ajudar o jogador a atingir seu objetivo. </font><font style="vertical-align: inherit;">Neste exemplo, imaginaremos que um jogador est√° preso do qual n√£o pode obter acesso a um objeto interativo que pode libert√°-lo. </font><font style="vertical-align: inherit;">O personagem que criamos deve ser capaz de encontrar o cubo e empurr√°-lo na dire√ß√£o certa.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6b5/840/cec/6b5840cec8e3b42adad879472c47930d.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ent√£o agora temos todos os personagens e objetos. Vamos planejar como o personagem da IA ‚Äã‚Äãdeve se comportar nessa situa√ß√£o. Primeiro, ele deve ver que o jogador est√° perto, para que ele possa come√ßar a procurar e mover o cubo para a posi√ß√£o desejada. Suponha que, se o cubo estiver na marca, um novo bloco aparecer√° na areia, permitindo que o jogador avance ainda mais no n√≠vel. Um personagem de IA pode empurrar um cubo em quatro dire√ß√µes: esquerda, direita, frente e tr√°s, para que ele se encaixe perfeitamente com a marca de posi√ß√£o.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/804/463/982/8044639827005d84bcf50014f095b46e.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O personagem do AI deve verificar e validar todas as a√ß√µes mostradas nesta √°rvore de comportamento. A primeira e mais importante coisa para continuar a tarefa √© que o personagem tenha certeza de que o jogador est√° localizado em sua marca. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se o jogador ainda n√£o chegou l√°, nosso personagem deve esperar e permanecer no lugar. Se o jogador j√° chegou √† marca, o personagem da IA ‚Äã‚Äãcontinua a execu√ß√£o e se pergunta a que dist√¢ncia ele est√° do objeto do cubo. Caso contr√°rio, o personagem deve se mover em dire√ß√£o ao cubo e, uma vez confirmada essa a√ß√£o, ele deve fazer a mesma pergunta. Quando a resposta se torna positiva e o personagem est√° ao lado do cubo, ele precisa descobrir de que maneira voc√™ deve primeiro empurr√°-lo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ent√£o ele come√ßa a empurrar o cubo ao longo do eixo Y ou X at√© que ele corresponda √† posi√ß√£o de marca√ß√£o e a tarefa seja conclu√≠da.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">public</span> GameObject playerMesh;
<span class="hljs-keyword">public</span> Transform playerMark;
<span class="hljs-keyword">public</span> Transform cubeMark;
<span class="hljs-keyword">public</span> Transform currentPlayerPosition;
<span class="hljs-keyword">public</span> Transform currentCubePosition;<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">float</span> proximityValueX;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">float</span> proximityValueY;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">float</span> nearValue;<font></font>
<font></font>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">bool</span> playerOnMark;<font></font>
<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Start</span> <span class="hljs-params">()</span> </span>{<font></font>
<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Update</span> <span class="hljs-params">()</span> </span>{<font></font>
<font></font>
  <span class="hljs-comment">// Calculates the current position of the player</span><font></font>
  currentPlayerPosition.transform.position = playerMesh.transform.position;<font></font>
<font></font>
  <span class="hljs-comment">// Calculates the distance between the player and the player mark of the X axis</span><font></font>
  proximityValueX = playerMark.transform.position.x - currentPlayerPosition.transform.position.x;<font></font>
<font></font>
  <span class="hljs-comment">// Calculates the distance between the player and the player mark of the Y axis</span><font></font>
  proximityValueYplayerMark.transform.position.y - currentPlayerPosition.transform.position.y;<font></font>
<font></font>
  <span class="hljs-comment">// Calculates if the player is near of his MARK POSITION</span>
  <span class="hljs-keyword">if</span>((proximityValueX + proximityValueY) &lt; nearValue)<font></font>
  {<font></font>
     playerOnMark = <span class="hljs-literal">true</span>;<font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Estamos come√ßando a adicionar informa√ß√µes ao c√≥digo que permite ao personagem verificar se o jogador est√° pr√≥ximo √† sua posi√ß√£o marcada. Para isso, criamos todas as vari√°veis ‚Äã‚Äãnecess√°rias para calcular as dist√¢ncias entre o jogador e a posi√ß√£o em que ele deve estar. </font></font><code>playerMesh</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">refere-se ao modelo 3D do jogador, do qual extra√≠mos sua posi√ß√£o e a usamos como </font></font><code>currentPlayerPosition</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para saber se est√° perto da marca, precisamos de uma vari√°vel que represente a posi√ß√£o da marca e, em nosso exemplo, criamos uma vari√°vel </font></font><code>playerMark</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">na qual podemos escrever a posi√ß√£o em que o jogador deve estar. Em seguida, adicionamos tr√™s vari√°veis ‚Äã‚Äãque nos informam se o jogador est√° por perto. </font></font><code>proximityValueX</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">calcular√° a dist√¢ncia entre o jogador e a marca do eixo X. </font></font><code>proximityValueY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">calcula a dist√¢ncia entre o jogador e a marca do eixo Y.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em seguida, temos </font></font><code>nearValue</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, em que podemos determinar a que dist√¢ncia o jogador pode estar da posi√ß√£o da marca, quando o personagem de IA pode come√ßar a trabalhar para alcan√ßar o objetivo. Assim que o player estiver pr√≥ximo da marca, a vari√°vel booleana </font></font><code>playerOnMark</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">altera o valor para </font></font><code>true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para calcular a dist√¢ncia entre o jogador e a marca, usamos o seguinte: a dist√¢ncia entre o jogador e sua marca, semelhante </font></font><code>(mark.position - player.position)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora, para determinar se o caractere AI est√° pr√≥ximo ao cubo, calculamos a mesma equa√ß√£o calculando a dist√¢ncia entre o AI e o cubo. Al√©m disso, complementamos o c√≥digo com posi√ß√µes nas duas marcas (jogador e cubo):</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">public</span> GameObject playerMesh;
<span class="hljs-keyword">public</span> Transform playerMark;
<span class="hljs-keyword">public</span> Transform cubeMark;
<span class="hljs-keyword">public</span> Transform currentPlayerPosition;
<span class="hljs-keyword">public</span> Transform currentCubePosition;<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">float</span> proximityValueX;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">float</span> proximityValueY;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">float</span> nearValue;<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">float</span> cubeProximityX;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">float</span> cubeProximityY;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">float</span> nearCube;<font></font>
<font></font>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">bool</span> playerOnMark;
<span class="hljs-keyword">private</span> <span class="hljs-keyword">bool</span> cubeIsNear;<font></font>
<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Start</span> <span class="hljs-params">()</span> </span>{<font></font>
<font></font>
   Vector3 playerMark = <span class="hljs-keyword">new</span> Vector3(<span class="hljs-number">81.2f</span>, <span class="hljs-number">32.6f</span>, <span class="hljs-number">-31.3f</span>);<font></font>
   Vector3 cubeMark = <span class="hljs-keyword">new</span> Vector3(<span class="hljs-number">81.9f</span>, <span class="hljs-number">-8.3f</span>, <span class="hljs-number">-2.94f</span>);<font></font>
   nearValue = <span class="hljs-number">0.5f</span>;<font></font>
   nearCube = <span class="hljs-number">0.5f</span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Update</span> <span class="hljs-params">()</span> </span>{<font></font>
<font></font>
  <span class="hljs-comment">// Calculates the current position of the player</span><font></font>
  currentPlayerPosition.transform.position = playerMesh.transform.position;<font></font>
<font></font>
  <span class="hljs-comment">// Calculates the distance between the player and the player mark of the X axis</span><font></font>
  proximityValueX = playerMark.transform.position.x - currentPlayerPosition.transform.position.x;<font></font>
<font></font>
  <span class="hljs-comment">// Calculates the distance between the player and the player mark of the Y axis</span><font></font>
  proximityValueY = playerMark.transform.position.y - currentPlayerPosition.transform.position.y;<font></font>
<font></font>
  <span class="hljs-comment">// Calculates if the player is near of his MARK POSITION</span>
  <span class="hljs-keyword">if</span>((proximityValueX + proximityValueY) &lt; nearValue)<font></font>
  {<font></font>
     playerOnMark = <span class="hljs-literal">true</span>;<font></font>
  }<font></font>
<font></font>
  cubeProximityX = currentCubePosition.transform.position.x - <span class="hljs-keyword">this</span>.transform.position.x;<font></font>
  cubeProximityY = currentCubePosition.transform.position.y - <span class="hljs-keyword">this</span>.transform.position.y;<font></font>
<font></font>
  <span class="hljs-keyword">if</span>((cubeProximityX + cubeProximityY) &lt; nearCube)<font></font>
  {<font></font>
     cubeIsNear = <span class="hljs-literal">true</span>;<font></font>
  }<font></font>
<font></font>
  <span class="hljs-keyword">else</span><font></font>
  {<font></font>
     cubeIsNear = <span class="hljs-literal">false</span>;<font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora que nosso personagem de IA sabe se ele est√° pr√≥ximo ao cubo, isso nos permite responder √† pergunta e determinar se ele pode passar para o pr√≥ximo ramo que planejamos. </font><font style="vertical-align: inherit;">Mas o que acontece quando o personagem n√£o est√° pr√≥ximo ao cubo? </font><font style="vertical-align: inherit;">Ele precisar√° se aproximar do cubo. </font><font style="vertical-align: inherit;">Portanto, adicionaremos isso ao c√≥digo:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">public</span> GameObject playerMesh;
<span class="hljs-keyword">public</span> Transform playerMark;
<span class="hljs-keyword">public</span> Transform cubeMark;
<span class="hljs-keyword">public</span> Transform cubeMesh;
<span class="hljs-keyword">public</span> Transform currentPlayerPosition;
<span class="hljs-keyword">public</span> Transform currentCubePosition;<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">float</span> proximityValueX;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">float</span> proximityValueY;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">float</span> nearValue;<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">float</span> cubeProximityX;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">float</span> cubeProximityY;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">float</span> nearCube;<font></font>
<font></font>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">bool</span> playerOnMark;
<span class="hljs-keyword">private</span> <span class="hljs-keyword">bool</span> cubeIsNear;<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">float</span> speed;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">bool</span> Finding;<font></font>
<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Start</span> <span class="hljs-params">()</span> </span>{<font></font>
<font></font>
   Vector3 playerMark = <span class="hljs-keyword">new</span> Vector3(<span class="hljs-number">81.2f</span>, <span class="hljs-number">32.6f</span>, <span class="hljs-number">-31.3f</span>);<font></font>
   Vector3 cubeMark = <span class="hljs-keyword">new</span> Vector3(<span class="hljs-number">81.9f</span>, <span class="hljs-number">-8.3f</span>, <span class="hljs-number">-2.94f</span>);<font></font>
   nearValue = <span class="hljs-number">0.5f</span>;<font></font>
   nearCube = <span class="hljs-number">0.5f</span>;<font></font>
   speed = <span class="hljs-number">1.3f</span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Update</span> <span class="hljs-params">()</span> </span>{<font></font>
<font></font>
  <span class="hljs-comment">// Calculates the current position of the player</span><font></font>
  currentPlayerPosition.transform.position = playerMesh.transform.position;<font></font>
<font></font>
  <span class="hljs-comment">// Calculates the distance between the player and the player mark of the X axis</span><font></font>
  proximityValueX = playerMark.transform.position.x - currentPlayerPosition.transform.position.x;<font></font>
<font></font>
  <span class="hljs-comment">// Calculates the distance between the player and the player mark of the Y axis</span><font></font>
  proximityValueY = playerMark.transform.position.y - currentPlayerPosition.transform.position.y;<font></font>
<font></font>
  <span class="hljs-comment">// Calculates if the player is near of his MARK POSITION</span>
  <span class="hljs-keyword">if</span>((proximityValueX + proximityValueY) &lt; nearValue)<font></font>
  { <font></font>
      playerOnMark = <span class="hljs-literal">true</span>;<font></font>
  }<font></font>
<font></font>
  cubeProximityX = currentCubePosition.transform.position.x - <span class="hljs-keyword">this</span>.transform.position.x;<font></font>
  cubeProximityY = currentCubePosition.transform.position.y - <span class="hljs-keyword">this</span>.transform.position.y;<font></font>
<font></font>
  <span class="hljs-keyword">if</span>((cubeProximityX + cubeProximityY) &lt; nearCube)<font></font>
  {<font></font>
      cubeIsNear = <span class="hljs-literal">true</span>;<font></font>
  }<font></font>
<font></font>
  <span class="hljs-keyword">else</span><font></font>
  {<font></font>
      cubeIsNear = <span class="hljs-literal">false</span>;<font></font>
  }<font></font>
<font></font>
  <span class="hljs-keyword">if</span>(playerOnMark == <span class="hljs-literal">true</span> &amp;&amp; cubeIsNear == <span class="hljs-literal">false</span> &amp;&amp; Finding == <span class="hljs-literal">false</span>)<font></font>
  {<font></font>
     PositionChanging();<font></font>
  }<font></font>
<font></font>
  <span class="hljs-keyword">if</span>(playerOnMark == <span class="hljs-literal">true</span> &amp;&amp; cubeIsNear == <span class="hljs-literal">true</span>)<font></font>
  {<font></font>
     Finding = <span class="hljs-literal">false</span>;<font></font>
  }<font></font>
<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">PositionChanging</span> <span class="hljs-params">()</span> </span>{<font></font>
<font></font>
  Finding = <span class="hljs-literal">true</span>;<font></font>
  Vector3 positionA = <span class="hljs-keyword">this</span>.transform.position;<font></font>
  Vector3 positionB = cubeMesh.transform.position;<font></font>
  <span class="hljs-keyword">this</span>.transform.position = Vector3.Lerp(positionA, positionB, Time.deltaTime * speed);<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
At√© agora, nosso personagem de IA √© capaz de calcular a dist√¢ncia entre ele e o cubo; </font><font style="vertical-align: inherit;">se estiverem muito distantes, ele ir√° para o cubo. </font><font style="vertical-align: inherit;">Depois de concluir esta tarefa, ele pode prosseguir para a pr√≥xima fase e come√ßar a empurrar o cubo. </font><font style="vertical-align: inherit;">A √∫ltima coisa que ele precisa calcular √© a que dist√¢ncia o cubo est√° da posi√ß√£o da marca, ap√≥s o que decide qual caminho empurrar, levando em considera√ß√£o de que lado do cubo a marca est√° mais pr√≥xima.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/de1/be5/bf7/de1be5bf7e65540dfaeb6ab186a8e3c8.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O cubo s√≥ pode ser empurrado ao longo dos eixos X e Z, e sua rota√ß√£o ainda n√£o √© importante para n√≥s, porque o bot√£o √© ativado quando o cubo √© instalado nele. Dado tudo isso, o caractere AI deve calcular a que dist√¢ncia o cubo est√° da posi√ß√£o da marca em X e da posi√ß√£o da marca em Z. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em seguida, ele compara os dois valores em dois eixos e seleciona qual deles est√° mais distante da posi√ß√£o desejada, e ent√£o come√ßa a empurr√°-lo. eixo. O personagem continuar√° empurrando nessa dire√ß√£o at√© que o cubo esteja alinhado com a posi√ß√£o da marca e, em seguida, mude para o outro lado e o empurrar√° at√© que esteja completamente acima da posi√ß√£o da marca:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">public</span> GameObject playerMesh;
<span class="hljs-keyword">public</span> Transform playerMark;
<span class="hljs-keyword">public</span> Transform cubeMark;
<span class="hljs-keyword">public</span> Transform cubeMesh;
<span class="hljs-keyword">public</span> Transform currentPlayerPosition;
<span class="hljs-keyword">public</span> Transform currentCubePosition;<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">float</span> proximityValueX;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">float</span> proximityValueY;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">float</span> nearValue;<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">float</span> cubeProximityX;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">float</span> cubeProximityY;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">float</span> nearCube;<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">float</span> cubeMarkProximityX;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">float</span> cubeMarkProximityZ;<font></font>
<font></font>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">bool</span> playerOnMark;
<span class="hljs-keyword">private</span> <span class="hljs-keyword">bool</span> cubeIsNear;<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">float</span> speed;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">bool</span> Finding;<font></font>
<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Start</span> <span class="hljs-params">()</span> </span>{<font></font>
<font></font>
        Vector3 playerMark = <span class="hljs-keyword">new</span> Vector3(<span class="hljs-number">81.2f</span>, <span class="hljs-number">32.6f</span>, <span class="hljs-number">-31.3f</span>);<font></font>
        Vector3 cubeMark = <span class="hljs-keyword">new</span> Vector3(<span class="hljs-number">81.9f</span>, <span class="hljs-number">-8.3f</span>, <span class="hljs-number">-2.94f</span>);<font></font>
        nearValue = <span class="hljs-number">0.5f</span>;<font></font>
        nearCube = <span class="hljs-number">0.5f</span>;<font></font>
        speed = <span class="hljs-number">1.3f</span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Update</span> <span class="hljs-params">()</span> </span>{<font></font>
<font></font>
  <span class="hljs-comment">// Calculates the current position of the player</span><font></font>
  currentPlayerPosition.transform.position = playerMesh.transform.position;<font></font>
<font></font>
  <span class="hljs-comment">// Calculates the distance between the player and the player mark of the X axis</span><font></font>
  proximityValueX = playerMark.transform.position.x - currentPlayerPosition.transform.position.x;<font></font>
<font></font>
  <span class="hljs-comment">// Calculates the distance between the player and the player mark of the Y axis</span><font></font>
  proximityValueY = playerMark.transform.position.y - currentPlayerPosition.transform.position.y;<font></font>
<font></font>
  <span class="hljs-comment">// Calculates if the player is near of his MARK POSITION</span>
  <span class="hljs-keyword">if</span>((proximityValueX + proximityValueY) &lt; nearValue)<font></font>
  {<font></font>
     playerOnMark = <span class="hljs-literal">true</span>;<font></font>
  }<font></font>
<font></font>
  cubeProximityX = currentCubePosition.transform.position.x - <span class="hljs-keyword">this</span>.transform.position.x;<font></font>
  cubeProximityY = currentCubePosition.transform.position.y - <span class="hljs-keyword">this</span>.transform.position.y;<font></font>
<font></font>
  <span class="hljs-keyword">if</span>((cubeProximityX + cubeProximityY) &lt; nearCube)<font></font>
  {<font></font>
     cubeIsNear = <span class="hljs-literal">true</span>;<font></font>
  }<font></font>
<font></font>
  <span class="hljs-keyword">else</span><font></font>
  {<font></font>
     cubeIsNear = <span class="hljs-literal">false</span>;<font></font>
  }<font></font>
<font></font>
  <span class="hljs-keyword">if</span>(playerOnMark == <span class="hljs-literal">true</span> &amp;&amp; cubeIsNear == <span class="hljs-literal">false</span> &amp;&amp; Finding == <span class="hljs-literal">false</span>)<font></font>
  {<font></font>
      PositionChanging();<font></font>
  }<font></font>
<font></font>
  <span class="hljs-keyword">if</span>(playerOnMark == <span class="hljs-literal">true</span> &amp;&amp; cubeIsNear == <span class="hljs-literal">true</span>)<font></font>
  {<font></font>
      Finding = <span class="hljs-literal">false</span>;<font></font>
    }<font></font>
<font></font>
   cubeMarkProximityX = cubeMark.transform.position.x - currentCubePosition.transform.position.x;<font></font>
   cubeMarkProximityZ = cubeMark.transform.position.z - currentCubePosition.transform.position.z;<font></font>
<font></font>
   <span class="hljs-keyword">if</span>(cubeMarkProximityX &gt; cubeMarkProximityZ)<font></font>
   {<font></font>
     PushX();<font></font>
   }<font></font>
<font></font>
   <span class="hljs-keyword">if</span>(cubeMarkProximityX &lt; cubeMarkProximityZ)<font></font>
   {<font></font>
     PushZ();<font></font>
   }<font></font>
<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">PositionChanging</span> <span class="hljs-params">()</span> </span>{<font></font>
<font></font>
  Finding = <span class="hljs-literal">true</span>;<font></font>
  Vector3 positionA = <span class="hljs-keyword">this</span>.transform.position;<font></font>
  Vector3 positionB = cubeMesh.transform.position;<font></font>
  <span class="hljs-keyword">this</span>.transform.position = Vector3.Lerp(positionA, positionB, Time.deltaTime * speed);<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Depois de adicionar as √∫ltimas a√ß√µes ao c√≥digo, o personagem deve aprender a determinar seu objetivo, encontrar e empurrar o cubo para a posi√ß√£o desejada, para que o jogador possa passar e terminar o n√≠vel. </font><font style="vertical-align: inherit;">Neste exemplo, focamos em como calcular dist√¢ncias entre objetos de cena e personagens. </font><font style="vertical-align: inherit;">Isso nos ajudar√° a criar tipos semelhantes de intera√ß√µes nas quais precisamos colocar o objeto do jogo em uma determinada posi√ß√£o. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O exemplo demonstra um personagem AI amig√°vel que ajuda o jogador, mas os mesmos princ√≠pios podem ser aplicados se precisarmos do efeito oposto (se o personagem for um inimigo), no qual o personagem precisa encontrar o cubo o mais r√°pido poss√≠vel para parar o jogador.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Objetos de obst√°culo em ambientes usando o exemplo do Age of Empires</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como vimos anteriormente, voc√™ pode usar ou mover objetos no jogo para atingir objetivos, mas o que acontece se algum objeto obstruir o caminho do personagem? O objeto pode ser colocado pelo jogador ou simplesmente localizado pelo designer nesta posi√ß√£o do mapa. De qualquer forma, o personagem da IA ‚Äã‚Äãdeve ser capaz de determinar o que precisa ser feito nessa situa√ß√£o. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Podemos observar esse comportamento, por exemplo, em uma estrat√©gia chamada Age of Empires II, desenvolvida pela Ensemble Studios. Cada vez que um personagem do jogo n√£o pode alcan√ßar o territ√≥rio inimigo devido ao fato de estar cercado por muros fortificados, a IA passa a destruir parte do muro para seguir em frente.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esse tipo de intera√ß√£o tamb√©m √© muito inteligente e importante, porque, caso contr√°rio, os personagens apenas perambulariam pela parede em busca de uma entrada, e isso n√£o pareceria um comportamento razo√°vel. </font><font style="vertical-align: inherit;">Como a parede refor√ßada √© criada pelo jogador, ela pode ser colocada em qualquer lugar e com qualquer forma. </font><font style="vertical-align: inherit;">Portanto, voc√™ precisa pensar sobre isso ao desenvolver uma IA inimiga.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f44/137/655/f44137655e3220988033bcb97db85b96.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este exemplo tamb√©m se refere ao t√≥pico do nosso artigo, porque, na fase de planejamento, quando criamos √°rvores de comportamento, precisamos pensar no que acontecer√° se algo atrapalhar o personagem e ele n√£o conseguir cumprir seus objetivos. </font><font style="vertical-align: inherit;">Vamos considerar esse aspecto em detalhes nos pr√≥ximos cap√≠tulos do livro, mas por enquanto simplificamos a situa√ß√£o e analisamos como o personagem da IA ‚Äã‚Äãdeve se comportar se o objeto do ambiente o impedir de cumprir seu objetivo.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/dfb/464/89b/dfb46489b482f383bc95662246308536.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No nosso exemplo, o personagem da IA ‚Äã‚Äãdeve entrar na casa, mas quando ele se aproxima, ele percebe que est√° cercado por uma cerca de madeira, pela qual voc√™ n√£o pode passar. Queremos que o personagem escolha um alvo nesta fase e comece a atacar at√© que essa parte da cerca seja destru√≠da e ele possa entrar na casa. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Neste exemplo, precisamos calcular a cerca que o personagem deve atacar, dada a dist√¢ncia e o status de sa√∫de atual da cerca. Uma cerca com baixo HP deve ter uma prioridade mais alta para ataque do que uma cerca com HP total; portanto, levaremos isso em considera√ß√£o em nossos c√°lculos.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/223/23f/ac4/22323fac4373a3556b58383bfb6b36fe.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Queremos definir a vizinhan√ßa em torno do personagem, dentro da qual as cercas mais pr√≥ximas transmitem suas informa√ß√µes √† intelig√™ncia artificial, para que ele possa decidir qual √© mais f√°cil de destruir. Isso pode ser implementado de v√°rias maneiras, usando o reconhecimento de colis√µes de cercas com o jogador ou for√ßando-os a calcular a dist√¢ncia entre cercas / objetos e o jogador; definimos o valor da dist√¢ncia em que o jogador come√ßa a perceber o estado da cerca. Em nosso exemplo, calcularemos a dist√¢ncia e a usaremos para notificar o personagem sobre cercas HP. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vamos come√ßar criando o c√≥digo que ser√° aplicado ao objeto fence; todos eles ter√£o o mesmo script:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">float</span> HP;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">float</span> distanceValue;
<span class="hljs-keyword">private</span> Transform characterPosition;
<span class="hljs-keyword">private</span> GameObject characterMesh;<font></font>
<font></font>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">float</span> proximityValueX;
<span class="hljs-keyword">private</span> <span class="hljs-keyword">float</span> proximityValueY;
<span class="hljs-keyword">private</span> <span class="hljs-keyword">float</span> nearValue;<font></font>
<font></font>
<span class="hljs-comment">// Use this for initialization</span>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Start</span> <span class="hljs-params">()</span> </span>{<font></font>
<font></font>
  HP = <span class="hljs-number">100f</span>;<font></font>
  distanceValue = <span class="hljs-number">1.5f</span>;<font></font>
<font></font>
  <span class="hljs-comment">// Find the Character Mesh</span>
  characterMesh = GameObject.Find(<span class="hljs-string">"AICharacter"</span>);<font></font>
}<font></font>
<font></font>
<span class="hljs-comment">// Update is called once per frame</span>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Update</span> <span class="hljs-params">()</span> </span>{<font></font>
<font></font>
  <span class="hljs-comment">// Obtain the Character Mesh Position</span><font></font>
  characterPosition = characterMesh.transform;<font></font>
<font></font>
  <span class="hljs-comment">//Calculate the distance between this object and the AI Character</span>
  proximityValueX = characterPosition.transform.position.x - <span class="hljs-keyword">this</span>.transform.position.x;<font></font>
  proximityValueY = characterPosition.transform.position.y - <span class="hljs-keyword">this</span>.transform.position.y;<font></font>
<font></font>
  nearValue = proximityValueX + proximityValueY;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Neste script, adicionamos informa√ß√µes b√°sicas sobre HP e dist√¢ncias, que ser√£o usadas para conectar-se ao caractere AI. Desta vez, adicionamos o script de c√°lculo da dist√¢ncia n√£o ao personagem, mas aos objetos do ambiente; isso d√° ao objeto mais dinamismo e nos permite criar mais oportunidades. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por exemplo, se os personagens do jogo tamb√©m est√£o envolvidos na cria√ß√£o de cercas, eles ter√£o estados diferentes, por exemplo, "em constru√ß√£o", "conclu√≠do" ou "danificado"; ent√£o o personagem poder√° receber essas informa√ß√µes e us√°-las para seus pr√≥prios prop√≥sitos.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vamos definir o personagem interagindo com o objeto do ambiente. Seu principal objetivo ser√° obter acesso √† casa, mas quando ele se aproxima dela, ele percebe que n√£o pode entrar, devido ao fato de estar cercado por cercas de madeira. Queremos que, analisando a situa√ß√£o, nosso personagem destrua a cerca para cumprir seu objetivo e entrar na casa. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No script do personagem, adicionaremos uma fun√ß√£o est√°tica, cuja entrada ser√° capaz de transmitir informa√ß√µes sobre sua "sa√∫de" atual; isso ajudar√° o personagem a escolher a cerca mais adequada para a destrui√ß√£o.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">float</span> fenceHP;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">float</span> lowerFenceHP;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">float</span> fencesAnalyzed;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> GameObject bestFence;<font></font>
<font></font>
<span class="hljs-keyword">private</span> Transform House;<font></font>
<font></font>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">float</span> timeWasted;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">float</span> speed;<font></font>
<font></font>
<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Start</span> <span class="hljs-params">()</span> </span>{<font></font>
<font></font>
        fenceHP = <span class="hljs-number">100f</span>;<font></font>
        lowerFenceHP = fenceHP;<font></font>
        fencesAnalyzed = <span class="hljs-number">0</span>;<font></font>
        speed = <span class="hljs-number">0.8</span>;<font></font>
<font></font>
        Vector3 House = <span class="hljs-keyword">new</span> Vector3(<span class="hljs-number">300.2f</span>, <span class="hljs-number">83.3f</span>, <span class="hljs-number">-13.3f</span>);<font></font>
<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Update</span> <span class="hljs-params">()</span> </span>{<font></font>
<font></font>
        timeWasted += Time.deltaTime;<font></font>
<font></font>
        <span class="hljs-keyword">if</span>(fenceHP &gt; lowerFenceHP)<font></font>
        {<font></font>
            lowerFenceHP = fenceHP;<font></font>
        }<font></font>
<font></font>
        <span class="hljs-keyword">if</span>(timeWasted &gt; <span class="hljs-number">30f</span>)<font></font>
        {<font></font>
            GoToFence();  <font></font>
        }<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">GoToFence</span><span class="hljs-params">()</span> </span>{<font></font>
<font></font>
        Vector3 positionA = <span class="hljs-keyword">this</span>.transform.position;<font></font>
        Vector3 positionB = bestFence.transform.position;<font></font>
        <span class="hljs-keyword">this</span>.transform.position = Vector3.Lerp(positionA, positionB, Time.deltaTime * speed);<font></font>
}</code></pre><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7a8/970/af0/7a8970af0c9b5aa303ba32d6dc021ec8.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J√° adicionamos as informa√ß√µes mais b√°sicas ao personagem. </font></font><code>fenceHP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ser√° uma vari√°vel est√°tica na qual cada cerca que cai dentro do raio da vizinhan√ßa do personagem registrar√° informa√ß√µes sobre o HP atual. Em seguida, o personagem AI analisa as informa√ß√µes recebidas e as compara com a cerca com o m√≠nimo de HP apresentado </font></font><code>lowerFenceHP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O personagem tem uma vari√°vel que </font></font><code>timeWasted</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">representa o n√∫mero de segundos que ele j√° passou procurando uma cerca adequada para destruir. </font></font><code>fencesAnalyzed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ser√° usado para descobrir se j√° existe uma cerca no c√≥digo e, se n√£o, a primeira cerca encontrada pelo personagem √© adicionada; caso as cercas tenham o mesmo valor de HP, o personagem as ataca primeiro. Agora vamos adicionar o c√≥digo das cercas para que eles possam acessar o script do personagem e inserir informa√ß√µes √∫teis.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">float</span> HP;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">float</span> distanceValue;
<span class="hljs-keyword">private</span> Transform characterPosition;
<span class="hljs-keyword">private</span> GameObject characterMesh;<font></font>
<font></font>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">float</span> proximityValueX;
<span class="hljs-keyword">private</span> <span class="hljs-keyword">float</span> proximityValueY;
<span class="hljs-keyword">private</span> <span class="hljs-keyword">float</span> nearValue;
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Start</span> <span class="hljs-params">()</span> </span>{<font></font>
<font></font>
        HP = <span class="hljs-number">100f</span>;<font></font>
        distanceValue = <span class="hljs-number">1.5f</span>;<font></font>
<font></font>
        <span class="hljs-comment">// Find the Character Mesh</span>
        characterMesh = GameObject.Find(<span class="hljs-string">"AICharacter"</span>);<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Update</span> <span class="hljs-params">()</span> </span>{<font></font>
<font></font>
        <span class="hljs-comment">// Obtain the Character Mesh Position</span><font></font>
        characterPosition = characterMesh.transform;<font></font>
<font></font>
        <span class="hljs-comment">//Calculate the distance between this object and the AI Character</span>
        proximityValueX = characterPosition.transform.position.x - <span class="hljs-keyword">this</span>.transform.position.x;<font></font>
        proximityValueY = characterPosition.transform.position.y - <span class="hljs-keyword">this</span>.transform.position.y;<font></font>
<font></font>
        nearValue = proximityValueX + proximityValueY;<font></font>
<font></font>
        <span class="hljs-keyword">if</span>(nearValue &lt;= distanceValue){
            <span class="hljs-keyword">if</span>(AICharacter.fencesAnalyzed == <span class="hljs-number">0</span>){<font></font>
                AICharacter.fencesAnalyzed = <span class="hljs-number">1</span>;<font></font>
                AICharacter.bestFence = <span class="hljs-keyword">this</span>.gameObject;<font></font>
            }<font></font>
<font></font>
            AICharacter.fenceHP = HP;<font></font>
<font></font>
            <span class="hljs-keyword">if</span>(HP &lt; AICharacter.lowerFenceHP){<font></font>
                AICharacter.bestFence = <span class="hljs-keyword">this</span>.gameObject;<font></font>
            }<font></font>
        }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Finalmente conclu√≠mos este exemplo. </font><font style="vertical-align: inherit;">Agora a cerca compara seu HP atual com os dados do personagem ( </font></font><code>lowerFenceHP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) e, se o HP for menor que o valor mais baixo que o personagem possui, essa cerca ser√° considerada </font></font><code>bestFence</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este exemplo demonstra como adaptar um personagem de IA a v√°rios objetos din√¢micos no jogo; </font><font style="vertical-align: inherit;">o mesmo princ√≠pio pode ser estendido e usado para interagir com quase qualquer objeto. </font><font style="vertical-align: inherit;">Tamb√©m √© aplic√°vel e √∫til ao usar objetos para interagir com um personagem, vinculando informa√ß√µes entre eles. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Neste post, exploramos v√°rias maneiras de interagir com o meio ambiente. </font><font style="vertical-align: inherit;">As t√©cnicas demonstradas neste cap√≠tulo podem ser estendidas a muitos g√™neros diferentes de jogos e usadas para executar intera√ß√µes simples e complexas entre os personagens de IA e o ambiente.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt496046/index.html">Gr√°ficos 3D na STM32F103</a></li>
<li><a href="../pt496050/index.html">Tigres e le√µes recebem coronav√≠rus em Nova York</a></li>
<li><a href="../pt496052/index.html">Como uma empresa de servi√ßos pode evitar multas de um cliente? Algumas vantagens √≥bvias da automa√ß√£o de processos</a></li>
<li><a href="../pt496056/index.html">Digital: como n√∫meros e termos nos enganam</a></li>
<li><a href="../pt496058/index.html">Por que √© necess√°rio combinar rob√¥s agr√≠colas, quais s√£o as dificuldades e como fizemos isso em dois anos</a></li>
<li><a href="../pt496082/index.html">Engenheiro de dados e cientista de dados: qual a diferen√ßa?</a></li>
<li><a href="../pt496084/index.html">Loja online Blazor Client Side: Parte 6 - Criando um pedido e trabalhando com a√ß√µes compensat√≥rias</a></li>
<li><a href="../pt496086/index.html">Organiza√ß√£o do trabalho remoto com trabalhos digitais da Zextras</a></li>
<li><a href="../pt496088/index.html">21 de abril ao vivo! Meetup de localiza√ß√£o do Badoo</a></li>
<li><a href="../pt496090/index.html">Exclu√≠do com Zyxel</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>