<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë∞üèº üçà üôé Assassino de VPN. Acesso remoto adequado a servidores de batalha üë©üèø‚Äçü§ù‚Äçüë®üèΩ ü§ûüèª üéæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A opini√£o expressa neste artigo √© a opini√£o pessoal do autor. Ele enfatiza que isso pode n√£o coincidir com a opini√£o de seu empregador, superiores e d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Assassino de VPN. Acesso remoto adequado a servidores de batalha</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/vdsina/blog/491962/"><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A opini√£o expressa neste artigo √© a opini√£o pessoal do autor. </font><font style="vertical-align: inherit;">Ele enfatiza que isso pode n√£o coincidir com a opini√£o de seu empregador, superiores e do departamento de seguran√ßa. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Uma das coisas mais legais da nossa empresa em termos de infraestrutura √© como implementamos o acesso remoto. </font><font style="vertical-align: inherit;">Isso √© apenas m√°gica superprotegida. </font><font style="vertical-align: inherit;">Conversei com muitos de meus colegas guardas de seguran√ßa e auditores, e parece que inventamos acidentalmente uma hist√≥ria totalmente nova misturando solu√ß√µes comerciais e nosso software. </font><font style="vertical-align: inherit;">E assim, pensei, seria interessante aprofundar os detalhes t√©cnicos de como o setor trabalha com solu√ß√µes de acesso remoto desatualizadas e como as implementamos.</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VPN de boa pessoa n√£o aconselha</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vou come√ßar com uma declara√ß√£o forte: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">todas as VPNs s√£o lixo</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A VPN, como outras tecnologias digitais, pode ser configurada para que, se for invadida, o mundo n√£o acabe. </font><font style="vertical-align: inherit;">No entanto, ningu√©m faz isso ... mas teoricamente eles podem! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em 99,95% dos casos, a VPN est√° configurada para:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Criando uma ponte de rede entre o dispositivo (laptop ou outro servidor)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">... e uma rede maior de servidores (por exemplo, na nuvem ou </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">no local</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">... e a Internet, protegida por uma camada adicional de criptografia</font></font></li>
</ol><br>
<img src="https://habrastorage.org/webt/jx/nd/df/jxnddfmvj_3nujlmacixtdz3nbq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Isso n√£o √© uma boa ideia. Imagine se um v√≠rus se instalou no seu laptop e voc√™ est√° se conectando via VPN a uma rede de servidores de batalha? Ta Dam! O v√≠rus agora tem acesso LAN √† sua produ√ß√£o. O que h√° no escapamento? Tristeza. Muita tristeza. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ok, digamos que o caso do v√≠rus seja exagerado. Mas e o fato de um hacker poder se infiltrar na pr√≥pria VPN, por exemplo, usando uma vulnerabilidade dentro do dispositivo ou software no qual a VPN trabalha? Ent√£o, tendo entrado direto na rede de destino? Este √© um assunto s√©rio e longe de ser teorizado. Voc√™ pode ler mais no artigo sobre </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">como o Heartbleed foi usado para capturar VPN</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> usando o vetor de ataque, sobre o qual eu avisei diretamente </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">no meu blog</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
H√° pouco tempo, uma onda de vulnerabilidades de VPN varreu o mundo, que foram imediatamente </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">usadas por criminosos cibern√©ticos</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para obter acesso √†s redes de destino. </font><font style="vertical-align: inherit;">Mas isso n√£o √© surpreendente, certo? </font><font style="vertical-align: inherit;">Esses sistemas "olham" diretamente para a rede, sem nenhum outro mecanismo de prote√ß√£o √† sua frente. </font><font style="vertical-align: inherit;">As corre√ß√µes e patches geralmente n√£o s√£o aplicados automaticamente e envolvem mecanismos propriet√°rios controlados por software propriet√°rio em execu√ß√£o no SO propriet√°rio. </font><font style="vertical-align: inherit;">Bem, boa sorte l√°. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√â dif√≠cil encontrar esses dispositivos VPN? </font><font style="vertical-align: inherit;">Antes de escrever este artigo, eu nunca tentei, ent√£o n√£o tinha certeza. </font><font style="vertical-align: inherit;">Cerca de meia hora no </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Shodan.io</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e por favor - alguns dos principais resultados da sa√≠da:</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A Thomson Reuters</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √© uma empresa de US $ 41 bilh√µes, com 26.000 funcion√°rios, metade dos quais proveniente de servi√ßos financeiros.</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O SAP Concur</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √© um servi√ßo de gerenciamento de viagens, quebr√°-lo daria um monte de dados pessoais e de pagamento de todos os tipos.</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Seguro Progressivo</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - dados pessoais e informa√ß√µes m√©dicas pessoais, juntamente com alguns dados de pagamento.</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chevron Phillips Chemical</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - o nome fala por si.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bem, isso provavelmente n√£o √© muito bom. </font><font style="vertical-align: inherit;">Se √© f√°cil encontrar essas coisas, n√£o parece a solu√ß√£o perfeita para coloc√°-las online. </font><font style="vertical-align: inherit;">Temos outra escolha?</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zero confian√ßa</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zero Trust [literalmente: ‚Äúzero trust‚Äù] - em ess√™ncia, significa que voc√™ autoriza cada conex√£o e n√£o assume que alguns deles s√£o confi√°veis ‚Äã‚Äãporque j√° est√£o dentro da sua rede. </font><font style="vertical-align: inherit;">Se voc√™ deseja entender melhor esse termo e repensar sua abordagem para os neg√≥cios, leia </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">este artigo no Network World</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (desculpe-me por outra vergonha de auto-rela√ß√µes p√∫blicas). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Compramos a </font><font style="vertical-align: inherit;">solu√ß√£o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Okta Advanced Server Access</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (OASA) para introduzir a autoriza√ß√£o Zero-Trust em servidores de batalha. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A OASA √©</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> legal por tr√™s raz√µes:</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. Este √© apenas um inv√≥lucro em torno da configura√ß√£o do OpenSSH em ester√≥ides</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sob o cap√¥, a plataforma da OASA √© uma implanta√ß√£o bem gerenciada do OpenSSH (o mesmo comando ssh no seu console). </font><font style="vertical-align: inherit;">E o OpenSSH √© uma solu√ß√£o de administra√ß√£o remota extremamente bem testada e segura. </font><font style="vertical-align: inherit;">A prop√≥sito, desde 2003, o OpenSSH n√£o possui uma √∫nica vulnerabilidade que pode levar ao acesso remoto n√£o autorizado na configura√ß√£o padr√£o. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os pontos de entrada nesse esquema s√£o inst√¢ncias regulares do Amazon Linux 2. EC2, portanto, a √°rea de ataque √© extremamente pequena. </font><font style="vertical-align: inherit;">Lembre-se: um dos principais problemas com o uso de uma VPN s√£o as configura√ß√µes propriet√°rias de software / SO que impedem corre√ß√µes autom√°ticas. </font><font style="vertical-align: inherit;">A capacidade de atualizar nossos pontos de entrada na rede junto com o restante da infraestrutura √© uma grande vit√≥ria.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. N√£o h√° pontes de rede</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como mencionei acima, a maioria das VPNs √© configurada para criar uma ponte de rede entre um dispositivo de rede, como um laptop e uma rede de servidores na Internet. Um dos meus pontos mais dolorosos nas VPNs √© que elas interceptam todo o tr√°fego da sua rede. √â claro que voc√™ pode reconfigurar para um comportamento diferente, mas nossos clientes e os protocolos de seguran√ßa </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NIST 800-53 SC-7 (7)</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> geralmente exigem exatamente isso. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este √© um bom exemplo de como algumas medidas de seguran√ßa est√£o muito atrasadas no desenvolvimento da ind√∫stria. No mundo da velha escola, a VPN poderia ser a √∫nica camada para criptografar o tr√°fego. √Äs vezes, os auditores acreditam que, sem a prote√ß√£o da VPN, voc√™ enviar√° seus dados atrav√©s de canais n√£o criptografados.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Felizmente, existe uma maneira melhor. No modelo da OASA, uma conex√£o √© estabelecida individualmente entre voc√™ e o servidor. Por exemplo, em resposta √† solicita√ß√£o "Desejo efetuar logon na inst√¢ncia do EC2 i-028d62efa6f0b36b5", seu sistema se conecta ao ponto de entrada da rede e depois ao servidor de destino. A OASA tamb√©m protege essas conex√µes emitindo certificados de cliente de dez minutos ap√≥s a primeira verifica√ß√£o de seus dados atrav√©s do </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SSO</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e, em seguida, verificando se voc√™ est√° no dispositivo confi√°vel pretendido (e confirmado).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
H√° pouca liberdade para percorrer a rede. </font><font style="vertical-align: inherit;">Um administrador pode inserir um ponto de entrada na rede e encaminhar portas para outro destino, mas esse recurso √© desativado por padr√£o e deve ser explicitamente solicitado ao estabelecer uma conex√£o. </font><font style="vertical-align: inherit;">E a melhor parte √© que ningu√©m exige que eu carregue todo o tr√°fego atrav√©s da nuvem privada virtual, porque isso n√£o √© chamado de "VPN".</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. Acesso √† rede dedicado e IP aleat√≥rio</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esses pontos de entrada de rede s√£o implantados separadamente para cada nuvem privada virtual (por exemplo, um para prod, um para teste, um para dev, etc.). Al√©m disso, cada um deles √© monitorado de perto por nossa solu√ß√£o de seguran√ßa, que registra todas as atividades e filtra o tr√°fego. Se o cracker estiver dentro de um dos pontos de entrada, algo tamb√©m n√£o funcionar√°. Em qualquer situa√ß√£o, nosso esquema de seguran√ßa n√£o permite o acesso a recursos protegidos simplesmente porque voc√™ j√° est√° dentro da Virtual Private Cloud.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um dos meus mecanismos de defesa favoritos apareceu por acidente. </font><font style="vertical-align: inherit;">Quando come√ßamos a configurar os pontos de entrada, cada um deles foi configurado para um endere√ßo IP est√°tico da AWS. </font><font style="vertical-align: inherit;">Muito rapidamente, descobrimos que esses endere√ßos IP √†s vezes n√£o estavam vinculados √†s inst√¢ncias do EC2 no momento certo, o que poderia levar √† autoconfigura√ß√£o incorreta da OASA. </font><font style="vertical-align: inherit;">Tendo experimentado as del√≠cias de uma d√∫zia de corre√ß√µes diferentes na produ√ß√£o, eu n√£o aguentava e simplesmente exclu√≠ toda a hist√≥ria sobre IPs est√°ticos - e funcionou. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/8b/jb/bj/8bjbbj8qux60kjwmdjyqjihqgiw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A OEA precisa apenas de um IP voltado para a Internet e n√£o precisa ser conhecido com anteced√™ncia. </font><font style="vertical-align: inherit;">Quando o cliente est√° pronto para estabelecer uma conex√£o, √© solicitado um GUID exclusivo, com a ajuda da qual o IP √© determinado:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Usu√°rio: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quero fazer login para conectar-me ao vpc-99f2acff</font></font></i></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aplicativo cliente OASA: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">defini vpc-99f2acff como um servidor conhecido com GUID 25af5d4f-e657-4583-b0bd-beb1ca4f0c1f</font></font></i></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Servidor OASA: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">K 25af5d4f-e657-4583-b0bd-beb1ca4f0c1f pode ser acessado em 3.22.198.24, eis os certificados</font></font></i></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aplicativo cliente da OASA: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Certificados instalados, conectando a 3.22.198.24 via SSH ...</font></font></i></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Isso significa que cada inst√¢ncia de nossa infra-estrutura de ponto de entrada (uma </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">publica√ß√£o separada</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sobre isso √† sua aten√ß√£o) vem com um conjunto completamente novo de endere√ßos IP. </font><font style="vertical-align: inherit;">Assim, hackers aleat√≥rios ter√£o que procurar um IP entre dezenas de milh√µes, e seu n√∫mero est√° crescendo todos os dias. </font><font style="vertical-align: inherit;">Infelizmente para eles, esta pesquisa √© completamente em v√£o, gra√ßas a ...</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Porta corporativa batendo</font></font></h2><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bater √† porta</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> [literalmente: bater nas portas] √© algo que, em princ√≠pio, ningu√©m usa no mundo real, mas que √© muito divertido de configurar. Em resumo, a batida na porta √© uma sequ√™ncia de "bumps" para v√°rias portas de rede fechadas e, se a sequ√™ncia for repetida corretamente, a porta "real" ser√° aberta no seu IP. Elegante, mas impratic√°vel em grandes projetos reais. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fui inspirado pela ideia e pensei em como melhor√°-la. Assim, nasceu a solu√ß√£o que chamo de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Enterprise Port Knocking</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eu queria criar um mecanismo que garantisse a proximidade de nossos pontos de entrada com a Internet, at√© que algu√©m pudesse acess√°-los. Esse mecanismo deveria ser f√°cil de usar, confi√°vel e autenticado de uma maneira existente.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esbocei a arquitetura do mecanismo e fui com ela para a nossa incrivelmente talentosa equipe de engenheiros. </font><font style="vertical-align: inherit;">Algumas semanas depois, come√ßamos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O servi√ßo √© bastante simples e √© implantado como uma fun√ß√£o do AWS Lambda, com acesso a ele atrav√©s do AWS API Gateway (a alegria da arquitetura sem servidor!) Para uso f√°cil e confi√°vel. </font><font style="vertical-align: inherit;">O mecanismo funciona assim:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O usu√°rio √© autenticado com sucesso atrav√©s do SSO.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O aplicativo ignora as contas configuradas da AWS em busca de um grupo de seguran√ßa especialmente marcado (conceito da AWS para regras de firewall)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O aplicativo atualiza o grupo de seguran√ßa, permitindo o acesso ao endere√ßo IP do solicitante. </font><font style="vertical-align: inherit;">Uma regra no grupo de seguran√ßa tamb√©m armazena o carimbo de data / hora de adi√ß√£o.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A tarefa cron limpa a lista de IPs permitidos a cada per√≠odo especificado.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gra√ßas a essa situa√ß√£o, agora estamos apresentando uma solu√ß√£o de acesso remoto completamente fechada √† Internet e requer autentica√ß√£o de dois fatores por meio do banco de dados do usu√°rio </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">antes de abrir a porta no firewall</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">E √© f√°cil!</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ainda n√£o toquei em como esses mecanismos s√£o simples. </font><font style="vertical-align: inherit;">Eu sei que existem muitos componentes, mas juntos eles criam uma autoriza√ß√£o muito simples:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Efetue login atrav√©s do SSO.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Clique no lan√ßamento do Enterprise Port Knocking no portal SSO.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No terminal, usando o comando SSH, especifique o destino como o ID da inst√¢ncia do EC2 de destino. </font><font style="vertical-align: inherit;">O sistema da OASA √© inteligente o suficiente para descobrir qual ponto de entrada usar e tudo o mais acontece automaticamente!</font></font></li>
</ol><br>
<img src="https://habrastorage.org/webt/p4/ho/t0/p4hot0sae_e-5bywuqqbwsc2juo.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todo esse sistema √© uma grande vit√≥ria para nossa infraestrutura, para nosso cumprimento de todos os acordos de seguran√ßa e para a seguran√ßa de nossos clientes. </font><font style="vertical-align: inherit;">Os usu√°rios realmente gostam de como √© f√°cil se conectar aos nossos servidores, porque voc√™ n√£o precisa passar por autentica√ß√£o adicional ou lembrar qual VPN usar. </font><font style="vertical-align: inherit;">E eu realmente gosto do meu sono calmo. </font><font style="vertical-align: inherit;">Todos ganharam com o novo modelo! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bem, exceto os hackers, √© claro.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/9fa/cf4/a34/9facf4a348ef01048b4eb5e16ae66daa.png"></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt491946/index.html">Leis de programa√ß√£o</a></li>
<li><a href="../pt491948/index.html">Os tokens de design podem fazer mais: criar uma √∫nica fonte de informa√ß√µes sobre os componentes da interface do usu√°rio</a></li>
<li><a href="../pt491956/index.html">Lan√ßamento do Rust 1.42.0: modelos de fatia e mensagens de p√¢nico mais convenientes</a></li>
<li><a href="../pt491958/index.html">Guia de compress√£o de anima√ß√£o de esqueleto</a></li>
<li><a href="../pt491960/index.html">Era quando √© dif√≠cil se perder</a></li>
<li><a href="../pt491964/index.html">Execu√ß√£o remota de c√≥digo no SMB v3: CVE-2020-0796</a></li>
<li><a href="../pt491974/index.html">Coronav√≠rus: por que voc√™ precisa agir agora</a></li>
<li><a href="../pt491976/index.html">Transformamos a economia da UNIT em uma loja ou produ√ß√£o on-line</a></li>
<li><a href="../pt491980/index.html">Os benef√≠cios das entrevistas. Op√ß√£o Developer Flutter</a></li>
<li><a href="../pt491984/index.html">Automa√ß√£o de aeroportos na HEL</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>