<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèæ‚Äçüç≥ üö± üßóüèº PuppetConf 2016. Kubernetes para administradores de sistemas. Parte 1 ü•â üñêüèΩ üëÉüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Soy administrador de sistemas, trato con computadoras, y hoy hablaremos de Kubernetes. Tratar√© de profundizar en el tema, considerando los problemas q...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>PuppetConf 2016. Kubernetes para administradores de sistemas. Parte 1</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/503970/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Soy administrador de sistemas, trato con computadoras, y hoy hablaremos de Kubernetes. Tratar√© de profundizar en el tema, considerando los problemas que el administrador del sistema puede resolver con esta aplicaci√≥n, y tambi√©n tocar√© algunos aspectos de la operaci√≥n de Puppet, que parecen encajar en este mundo con la ayuda de un nuevo conjunto de abstracciones para que la aplicaci√≥n funcione. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hace cinco o seis a√±os, Luis Andre Barroso y Urs Hoesl en el art√≠culo "Centro de datos como computadora" sugirieron que deber√≠amos percibir el centro de datos como una computadora masiva. Es necesario abstraerse del hecho de que el centro de datos consta de m√°quinas separadas y considerarlo como una entidad l√≥gica. Tan pronto como intente utilizar esta idea en la pr√°ctica, puede aplicar los principios de creaci√≥n de sistemas distribuidos y computaci√≥n distribuida a los centros de datos.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/w9/q7/sg/w9q7sgxchzl3fuuhlrymsv4xcsa.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para tratar el centro de datos como una computadora, necesita un sistema operativo. Se ve muy similar al que usa en una computadora separada, pero debe tener una interfaz diferente, ya que no necesita acceso a una m√°quina separada y no necesita acceso al n√∫cleo. Entonces, pensemos en el centro de datos como una gran computadora. Hoy te dir√© qu√© hacer si pareces estar privado de la capacidad de controlar cualquier m√°quina que use SSH. No podr√° iniciar sesi√≥n, y aunque algunas personas creen que sin esto es imposible controlar el sistema, le dir√© cu√°nto se puede hacer con Kubernetes. Primero, debe pensar en Kubernetes como un marco para construir plataformas distribuidas.</font></font><a name="habracut"></a><br>
<br>
<img src="https://habrastorage.org/webt/wf/d2/5c/wfd25cjupilzhtu1ndkpci11cfs.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esto no significa que despu√©s de descargar Kubernetes, obtendr√° una interfaz de usuario que le proporcionar√° todo lo que desea hacer con el sistema. No, esta es solo la base para crear las herramientas que necesita para ejecutar su infraestructura. Le mostrar√© c√≥mo crear integraci√≥n usando Let's Encrypt Certificate Authority para automatizar el proceso de certificaci√≥n para mi aplicaci√≥n usando Kubernetes como marco.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ol/ty/g3/oltyg3s-gtbgticzc-omgefrq04.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mucha gente pregunta exactamente para qu√© sirve Kubernetes. Trabaj√© con Puppet Labs durante muchos a√±os y vi que esta cosa se instal√≥ en computadoras para proporcionar al sistema una API que no exist√≠a hasta ahora. En lugar de Bash, scripts YAML y cosas similares, Puppet proporcion√≥ un usuario DSL que le permiti√≥ interactuar con las m√°quinas mediante programaci√≥n sin scripts de shell. La diferencia entre Kubernetes es que se encuentra por encima del nivel de "hierro". Centr√©monos no tanto en la automatizaci√≥n y abstracci√≥n de este sistema como en las relaciones, o en el contrato, entre nuestra infraestructura y aplicaciones que vamos a extraer de cualquier nodo. En Kubernetes, no asignamos ninguna aplicaci√≥n a las m√°quinas, no existe un "manifiesto de nodo", el planificador considera los nodos individuales simplemente como recursos del centro de datos,representando una gran computadora.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Preguntas: "¬øKubernetes se ejecuta en OpenStack, en VMware, en Bare Metal, en la nube?" no tiene sentido La pregunta correcta es: "¬øPuedo ejecutar el agente Kubernetes para recuperar estos recursos?" Y la respuesta ser√° "s√≠". Porque el funcionamiento de esta aplicaci√≥n es completamente independiente de la plataforma que elija. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/an/km/hl/ankmhlzzmnaitmix8t0hppm8idi.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kubernetes es una plataforma independiente. Kubernetes es declarativo de la misma manera que Puppet. Por lo tanto, est√° informando para qu√© aplicaci√≥n la va a usar; en este ejemplo, es nginx. Este es un contrato entre usted, el desarrollador y Kubernetes como un medio para crear im√°genes de contenedor.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Me gusta usar la analog√≠a con la empresa de mensajer√≠a FedEx: no puede arrastrarles un carro completo de cosas y esperar hasta que lo resuelvan y lo env√≠en a donde deber√≠a estar. Tienen una regla: empaca tus cosas en una caja. Una vez que lo haga, le enviar√°n su caja y podr√°n saber cu√°ndo llegar√° a su destino. "Si no tiene una caja, entonces no podr√° trabajar con nuestro sistema".</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por lo tanto, cuando trabaje con contenedores, es in√∫til discutir lo que tiene (Python, Java y / o algo m√°s, no importa), simplemente tome todas sus dependencias y col√≥quelas en el contenedor. Muchas personas dicen acerca de los contenedores que parecen resolver los problemas de toda la infraestructura. Sin embargo, el problema es que las personas no perciben los contenedores como dos cosas diferentes de lo que realmente son. Lo primero es la idea de un formato de empaquetado, lo segundo es la idea de un tiempo de ejecuci√≥n de contenedor. Estas son dos cosas diferentes que no requieren necesariamente las mismas herramientas.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øCu√°l de los presentes cre√≥ los contenedores? ¬øY qui√©n usa Puppet para construir contenedores? As√≠ es, ¬°tampoco estoy de acuerdo con esto! Puedes decir: ‚Äú¬øC√≥mo es eso? ¬°Est√°s en la conferencia de T√≠teres, tienes que estar de acuerdo! La raz√≥n por la que no estoy de acuerdo con la idea de construir contenedores en Puppet es esta: no s√© si la necesitamos, porque las cosas que necesitamos para crear una imagen son diferentes de las que necesitamos para iniciar el proceso de producci√≥n. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pensemos en ello como la construcci√≥n de una tuber√≠a de software y echemos un vistazo a este Dockerfile. Cierra los ojos a aquellos que nunca han visto estos archivos, porque para ti pueden parecer intimidantes. Este archivo muestra c√≥mo crear una aplicaci√≥n Ruby on Rails, una aplicaci√≥n Ruby con un marco Rails.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/f3/ra/3r/f3ra3rkhngjp08t7beuyoeihc7i.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dice "FROM ruby ‚Äã‚Äã2.3.1", que probablemente insertar√° todo el sistema operativo en el contenedor, en este caso, la imagen b√°sica de alpine-linux Ruby. ¬øAlguien sabe por qu√© incorporamos im√°genes de Ubuntu o Red Hat en estos contenedores? La mayor√≠a de las personas no saben qu√© son las dependencias, y utilizan un enfoque casual, simplemente llenando todo el sistema operativo en un contenedor para asegurarse de que tienen sus dependencias en alg√∫n lugar dentro. Entonces, despu√©s de haber creado esta cosa, debe ejecutarla solo una vez. De aqu√≠ proviene el malentendido: si esto no funciona, cambie la l√≠nea de c√≥digo hasta que funcione. ¬°S√≥lo revisa! No necesita ser demasiado inteligente con estos archivos, su objetivo es crear una representaci√≥n fuera de l√≠nea de su aplicaci√≥n con todas las dependencias. Esto es solo una muleta que usamos desde Ubuntu como punto de partida.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si acaba de crear la aplicaci√≥n y la lanz√≥, usar√≠a algo as√≠ como un enlace est√°tico. Sin dependencias del host, en su contenedor solo tendr√≠a un archivo binario de un archivo Docker de una sola l√≠nea y sin im√°genes b√°sicas. De hecho, es solo una transferencia de cosas a las que estamos acostumbrados. Vea c√≥mo se ver√° esta asamblea. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/jf/pr/uq/jfpruqpgtrrrwwchkadl34kxn_y.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anteriormente cre√© este archivo, pero generalmente parece un intento de construir todo Internet. Tengo un poco de miedo de esta asamblea, porque no estoy seguro de que Internet local pueda manejar a Ruby. Mira lo que pas√≥.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jo/1i/a6/jo1ia6qqo37wr63tazkn-yco38e.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øQu√© le parece este volumen de 1 concierto? Adem√°s, el archivo fuente, es decir, su propia aplicaci√≥n, puede ocupar, digamos, solo 100 kB. Entonces, ¬øc√≥mo conseguimos un gigabyte completo? Esto se debe a que utilizamos herramientas ineficientes para crear aplicaciones independientes. Todos ellos est√°n dise√±ados para ejecutarse en computadoras y usar bibliotecas din√°micas cargadas desde el entorno externo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora intentaremos hacer lo que hacemos en un tel√©fono m√≥vil: versiones port√°tiles de aplicaciones para las cuales existe un contrato entre usted y la infraestructura. Tan pronto como tengamos dicho contrato, podremos decirle al sistema exactamente lo que debe hacer, y no le importar√° qu√© hacer.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No tiene ninguna aplicaci√≥n especial, especialmente creada. Encontr√© compa√±√≠as que dicen: "¬°tenemos una aplicaci√≥n especial!". Digo: "Supongamos lo que hace: comienza, se une al puerto, recibe tr√°fico, hace algo con los datos", y ellos son: "Wow, ¬øc√≥mo lo sabes?" Lo s√©, porque no hay nada especial aqu√≠.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces, tomamos la muestra que colocamos en el contenedor y la enviamos al servidor API. A continuaci√≥n, debemos convertir esto en algo que funcione en nuestra m√°quina. Sin embargo, para recopilar recursos de la m√°quina, necesitamos instalar varias cosas: un tiempo de ejecuci√≥n del contenedor para el archivo Docker, un agente que entiende c√≥mo comunicarse con el asistente para ejecutar todo lo necesario, cu√°l deber√≠a ser la respuesta del sistema para que la aplicaci√≥n comience a funcionar . Este agente simplemente est√° observando: no hay intervalos de 30 segundos, verificaciones repetidas, nada de eso. Simplemente observa, diciendo: "si hay trabajo para m√≠, h√°gamelo saber y comenzar√© y le informar√© constantemente sobre el estado del proceso", para que sepa que funciona.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/2q/s1/dq/2qs1dq2ks5exprh4iljfwyiyydu.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tan pronto como lo hagamos en autom√≥vil, necesitamos un programador. ¬øCu√°ntas personas usan el planificador? ¬°Todos tienen que levantar la mano! Es lo mismo que la respuesta a la pregunta: "¬øcu√°l de ustedes tiene una computadora port√°til con m√°s de un procesador de un solo n√∫cleo?". De hecho, cuando hago una pregunta sobre el planificador, la mayor√≠a no levanta la mano. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cuando comienzas tu proceso en una m√°quina, algo debe elegir qu√© procesador usar. ¬øA qui√©n funciona esto? As√≠ es, el n√∫cleo. Ahora les explicar√© lo que es un planificador. La forma m√°s r√°pida de hacerlo es jugar Tetris. Lo primero que discutiremos es la implementaci√≥n autom√°tica.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/on/qu/bb/onqubbexwsv2hscesmqhfvanli4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øCu√°ntos de ustedes han usado una implementaci√≥n completamente autom√°tica? Claramente, creo que es por eso que estamos todos aqu√≠. Entonces, presiono el bot√≥n, los bloques comienzan a caer desde arriba, y ahora puedes ir a tomar una cerveza. Pero observe lo que sucede a la izquierda y a la derecha: su procesador y su memoria se convierten en basura. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/9c/gc/nd/9cgcndnl9ybdbg7t5fdhjei0930.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esto sucede porque la mayor√≠a de las personas no usan m√°s del 5% de los recursos inform√°ticos. Automatiza procesos, pero pierde una tonelada de dinero. Trabajo como proveedor de servicios en la nube, tengo grandes reservas de recursos, pero es horrible cuando las personas gastan dinero de manera similar.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cuando use el programador, por analog√≠a con Tetris, controle el campo de juego y controle cada bloque, dirigi√©ndolo al lugar correcto, es decir, use los recursos de la m√°quina de la manera m√°s √≥ptima. Kubernetes usa un par de algoritmos para esto. El algoritmo principal se llama Bin Packing; el mismo "Tetris" ayudar√° a comprenderlo. Kubernetes recibe una carga de trabajo de varias formas y tama√±os, y nuestra tarea es empacarlo en m√°quinas de manera √≥ptima.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nuestro objetivo es reutilizar todos los recursos disponibles a medida que avanza el trabajo. No todas las cargas de trabajo son iguales, por lo que es dif√≠cil colocarlas en la misma caja. Pero en Kubernetes, cuando aparece una "parte" de la carga de trabajo (o el bloque Tetris, si continuamos con nuestra analog√≠a), siempre existe el cl√∫ster correcto donde puede colocarlo y ejecutarlo. Y como con cualquier procesamiento por lotes, una vez completada la tarea, recuperamos todos los recursos ocupados anteriormente para que podamos usarlos en futuras tareas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como vivimos no en el juego, sino en el mundo real, tienes soluciones desarrolladas hace muchos a√±os. Luego se convierte en administrador del sistema, los empleadores le muestran su producci√≥n y observa que su implementaci√≥n no es lo suficientemente buena.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/2u/h_/hs/2uh_hsyrdmkfnkg5pnes9jlopr4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Puede instalar administradores de cl√∫ster en partes de sus m√°quinas y dejar que administren ciertos recursos. En este caso particular, puede usar Kubernetes, que comenzar√° a llenar los espacios vac√≠os de su Tetris a medida que avanza. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Deje que quienes trabajan en la industria levanten la mano. S√≠, este es un cl√°sico llamado salario. Suponga que tiene varios problemas en su empresa. La primera es que todo est√° escrito en Java o incluso en COBOL, generalmente nadie est√° listo para esto.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El segundo problema que se encuentra a menudo en las empresas es el DBMS de Oracle. Esto es as√≠, que se encuentra en la parte posterior del software y dice: "¬°No intentes automatizar nada!". Si automatiza el software, su costo aumentar√°. Por lo tanto, no hay automatizaci√≥n: ¬°estamos promoviendo nuestro ecosistema de consultor√≠a! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por lo general, en tales circunstancias, las personas preguntan si Kubernetes simplemente puede usarse para resolver estos problemas. Respondo: "no", porque en una situaci√≥n similar a perder en Tetris, nada te ayudar√°. Debe hacer otra cosa, a saber, usar el planificador. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora que tenemos un programador que comprende con √©xito las cargas de trabajo, simplemente puede poner todo en cuadros y el programador comenzar√° su trabajo.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/rg/yz/ei/rgyzeivhzivkgknoock70b7rcym.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hablemos de las entidades clave de Kubernetes. En primer lugar, se trata de vainas Pods, que son una colecci√≥n de contenedores. En la mayor√≠a de los casos, una aplicaci√≥n consta de m√°s de un componente. Puede adjuntarse una aplicaci√≥n escrita sin scripts Java, pero es posible que desee usar nginx para completar TLS y solo un proxy en el fondo de la aplicaci√≥n, y luego estas cosas deben conectarse entre s√≠, ya que son dependencias codificadas. Una dependencia poco acoplada es una base de datos que usted escala independientemente. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/e4/ca/zh/e4cazhfmbeim5egpejksnv42ce8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La segunda cosa importante es el Controlador de replicaci√≥n, que es un administrador de los procesos que ocurren en el cl√∫ster de Kubernetes. Le permite crear m√∫ltiples instancias de hogares y controlar su estado.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cuando dice que desea iniciar alg√∫n proceso, significa que funcionar√° todo el tiempo en alg√∫n lugar del cl√∫ster. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El tercer elemento importante es el Servicio, un conjunto de hogares colaborativos. Su implementaci√≥n se basa en la determinaci√≥n din√°mica del estado deseado: d√≥nde deber√≠an funcionar las aplicaciones, con qu√© direcci√≥n IP, etc., por lo que necesita alg√∫n tipo de servicio.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El cuarto elemento son los repositorios de Vol√∫menes, que pueden verse como directorios disponibles para contenedores en el hogar. Kubernetes tiene diferentes tipos de vol√∫menes que determinan c√≥mo se crea esta tienda y qu√© contiene. El concepto de Volumen tambi√©n estaba presente en Docker, pero el problema era que el almacenamiento all√≠ estaba limitado a un hogar espec√≠fico. Tan pronto como Under dej√≥ de existir, Volume desapareci√≥ con √©l. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El almacenamiento que crea Kubernetes no se limita a ning√∫n contenedor. Admite cualquiera o todos los contenedores desplegados dentro del hogar. Una ventaja clave de Kubernetes Volume es su soporte para varios tipos de almacenamiento que Pod puede usar simult√°neamente.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Veamos qu√© es un contenedor. Este es el formato de imagen en el que se empaqueta nuestra aplicaci√≥n con todas las dependencias, y la configuraci√≥n principal del entorno de tiempo de ejecuci√≥n, que muestra c√≥mo deber√≠a funcionar esta aplicaci√≥n. Estos son dos elementos diferentes, aunque puede incluir todo lo que desee en este elemento, en particular, el Sistema de archivos ra√≠z como un archivo tar comprimido Tarball que contiene muchos archivos de configuraci√≥n para un sistema espec√≠fico. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ed/lg/9w/edlg9wz2ttlinfb3udleerb0id0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces podemos realizar la distribuci√≥n, un proceso que es familiar para todos: aqu√≠ se usa RPM u otro sistema de repositorio. Tomas todas estas cosas y las pones en el repositorio. Este proceso es muy similar a lo que hacemos con los paquetes del sistema operativo, solo para contenedores que se crean a partir de im√°genes.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/pe/4p/dg/pe4pdggvudbe3l5ufp5l6gei6pc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pod le permite componer todo lo que nuestra aplicaci√≥n l√≥gica necesita. Una aplicaci√≥n l√≥gica es una herramienta para administrar m√∫ltiples aplicaciones dentro del mismo perfil del sistema. Un sub es un paquete de recursos que incluye uno o m√°s contenedores y almacenamientos, un espacio de nombres com√∫n y una direcci√≥n IP por sub. Las b√≥vedas se pueden distribuir entre contenedores.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ht/rw/cf/htrwcfvuetyk6vhgqjh6zgsjeoe.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En general, el dise√±o del hogar se asemeja a una m√°quina virtual. Asegura que la aplicaci√≥n se iniciar√° y se detendr√° como una unidad at√≥mica. La siguiente diapositiva muestra c√≥mo se ve el controlador de replicaci√≥n. Si env√≠o esta declaraci√≥n al servidor y digo: "¬°Hola, quiero que funcione una r√©plica de la aplicaci√≥n Foo!", El controlador la crear√° a partir de la plantilla y la enviar√° al planificador, que colocar√° la aplicaci√≥n en el Nodo 1. No especificamos en qu√© m√°quina deber√≠a ejecutarse, aunque podemos hacerlo. Ahora aumente el n√∫mero de r√©plicas a 3. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ta/qe/ld/taqeldbd6scvq7oyst2ff3dooyu.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øQu√© acciones espera del sistema si falla una de las m√°quinas? En este caso, el controlador de replicaci√≥n llevar√° el estado actual del sistema al estado deseado, movi√©ndolo debajo del contenedor desde la tercera m√°quina que no funciona a la segunda.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/oy/d7/_i/oyd7_i1a1dvfpllkj_s7hek_37e.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No es necesario profundizar en este proceso y dirigirlo; confiando el trabajo al controlador, puede estar seguro de que la aplicaci√≥n estar√° asegurada adecuadamente al monitorear constantemente los cambios en el estado actual de la infraestructura y tomar decisiones que garanticen que el sistema est√© funcionando. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Estas cosas se adelantan a su tiempo: simplemente le dice al sistema: "¬°Quiero que estas tres m√°quinas funcionen!", Y aqu√≠ es donde termina su control. Este enfoque es muy diferente de los scripts y la automatizaci√≥n pura, cuando realmente necesita administrar lo que est√° sucediendo en este momento para influir en la decisi√≥n futura. No puede codificar todo esto sin la capacidad de recibir informaci√≥n entrante para responder a la situaci√≥n correctamente. El enfoque descrito anteriormente le brinda esta oportunidad.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øC√≥mo imagina la configuraci√≥n, el concepto de archivos de configuraci√≥n para servicios? Mucha gente no dice nada sobre este tema cuando se trata de contenedores, pero a√∫n necesitamos configuraci√≥n, ¬°no desaparece en ning√∫n lado! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kubernetes tambi√©n usa el concepto Secretos, que se usa para almacenar y transferir datos cifrados entre gerentes y nodos Nods. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nunca ejecutamos Puppet en un contenedor porque no hay raz√≥n para hacerlo. Puede usar Puppet para generar un archivo de configuraci√≥n, pero a√∫n as√≠ desea almacenarlo en Kubernetis porque le permite distribuirlo usando el tiempo de ejecuci√≥n. Veamos como se ve.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/vv/i3/f3/vvi3f3c-8dhftpdedfe23me1xbg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En este ejemplo, creamos un secreto a partir de un archivo y lo guardamos en el servidor API de Kubernetes. Puede imaginar que reemplaz√≥ esta parte con algo como Puppet, que utiliza la plantilla eRB y los datos ocultos para completar el contenido del secreto; no importa qui√©n lo haga, pero puede hacerlo de todos modos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Una vez que el secreto est√° en su lugar, puede servir como un enlace para crear una implementaci√≥n que diga: "¬°Quiero usar este secreto!" En este caso, Kubernetes hace lo siguiente.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/cm/um/nu/cmumnufkw4ffxmhcggn2ppulcva.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Crea un pod, toma datos del secreto, lo coloca en un sistema de archivos temporal y lo presenta como un contenedor, al igual que Puppet crea una copia en una m√°quina. Esto sigue el ciclo de vida de la aplicaci√≥n, y cuando la aplicaci√≥n muere, la configuraci√≥n desaparece con ella. Si necesita 10,000 instancias de aplicaci√≥n, deber√° crear e inyectar en menos de 10,000 sistemas de archivos temporales. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los servicios le permiten ejecutar todos estos elementos en un cl√∫ster y sincronizarlos con otro punto final. De hecho, un servicio es un grupo de hogares que funcionan como un solo hogar. Contiene una direcci√≥n IP y un puerto permanentes, proporciona integraci√≥n en DNS, utiliza el equilibrio de carga y se actualiza cuando cambia el firmware.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/8t/cr/co/8tcrcolf5hrgnqfcrdf3nzkdr2a.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora veamos la colaboraci√≥n de los componentes conceptuales de Kubernetes. Tenemos ladrillos y configuraciones de Lego que deben interactuar entre s√≠. Si tiene la intenci√≥n de ejecutar una base de datos en un cl√∫ster, entonces realmente puede hacerlo en Kubernetes. Muchos dicen que no podr√° ejecutar aplicaciones con estado en contenedores, pero esto es completamente incorrecto. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si piensa en c√≥mo funcionan los hipervisores, puede comprender que hacen casi lo mismo que usted: crea una m√°quina virtual, el programador la traslada al hipervisor y conecta el almacenamiento. A veces trabaja con almacenamiento local que proviene del hipervisor, y no hay razones por las cuales los contenedores no puedan hacer lo mismo.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sin embargo, el problema con los contenedores es que la mayor√≠a de las personas no est√°n acostumbradas a tener una lista expl√≠cita de rutas de archivos que deben proporcionar a la aplicaci√≥n. La mayor√≠a de las personas no podr√°n decirle exactamente los dispositivos y archivos que necesita el almac√©n de datos. Empacan todo en contenedores y, como resultado, no sale nada bueno. Por lo tanto, no crea que los contenedores no son capaces de ejecutar aplicaciones de ahorro de estado; puede hacerlo muy bien. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/bj/hm/ve/bjhmvetwbvkbjbqirup-xb_ya-0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En la diapositiva, ver√° un ejemplo de Ruby-on-Rails, y antes de que podamos usar nuestra aplicaci√≥n, necesitamos migrar la base de datos. Vayamos a la demostraci√≥n en vivo del programa. Para llevar a cabo la implementaci√≥n, utilizo MY_SQL, y se ven muchos datos en la pantalla.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/dp/ai/or/dpaioryaowiq9c4yevmvd9uqkqg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Te estoy mostrando todo esto porque, como administrador del sistema, tienes que entender muchas cosas. En esta implementaci√≥n, refino algunos de los metadatos de mi aplicaci√≥n, pero lo principal que resaltar√© en gris: quiero iniciar 1 copia de la aplicaci√≥n mysql y usar el contenedor mysql versi√≥n 5.6.32. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/qv/kr/ev/qvkrev67_otmvqqvdhtiha07mec.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tenga en cuenta que aqu√≠ selecciono algunos secretos de Kubernetes como enlaces, que en este caso voy a inyectar como variables de entorno. M√°s tarde le mostrar√© otro caso cuando los insertemos en el sistema de archivos. Por lo tanto, no necesito "hornear" secretos en mi configuraci√≥n. La siguiente l√≠nea importante es el bloque de recursos.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/hm/b4/jt/hmb4jtgyd1dupdt4dfoapzcppli.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No puedes jugar Tetris hasta que sepas el tama√±o de los bloques. </font><font style="vertical-align: inherit;">Muchas personas comienzan a implementar sin usar l√≠mites de recursos para este proceso. </font><font style="vertical-align: inherit;">Como resultado, la RAM est√° completamente obstruida y usted "apila" todo el servidor. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
22:09 min </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Continuar√° muy pronto ...</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/HlAXp0-M6SY" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un poco de publicidad :)</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gracias por estar con nosotros. ¬øTe gustan nuestros art√≠culos? ¬øQuieres ver m√°s materiales interesantes? Ap√≥yenos haciendo un pedido o recomendando a sus amigos </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VPS basado en la nube para desarrolladores desde $ 4.99</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , un </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">an√°logo √∫nico de servidores de nivel b√°sico que inventamos para usted: </font></font></b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">toda la verdad sobre VPS (KVM) E5-2697 v3 (6 n√∫cleos) 10GB DDR4 480GB SSD 1Gbps desde $ 19 o c√≥mo dividir el servidor?</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (las opciones est√°n disponibles con RAID1 y RAID10, hasta 24 n√∫cleos y hasta 40GB DDR4). </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dell R730xd 2 veces m√°s barato en el centro de datos Equinix Tier IV en Amsterdam?</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ¬°Solo tenemos </font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 x Intel TetraDeca-Core Xeon 2x E5-2697v3 2.6GHz 14C 64GB DDR4 4x960GB SSD 1Gbps 100 TV desde $ 199</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en los Pa√≠ses Bajos!</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dell R420 - 2x E5-2430 2.2Ghz 6C 128GB DDR3 2x960GB SSD 1Gbps 100TB - ¬°desde $ 99! </font></font></b></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lea sobre</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> C√≥mo construir un edificio de infraestructura. </font><font style="vertical-align: inherit;">clase c con servidores Dell R730xd E5-2650 v4 que cuestan 9,000 euros por un centavo?</font></font></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es503960/index.html">C√≥mo ordena Linux las cadenas</a></li>
<li><a href="../es503962/index.html">Conducci√≥n aut√≥noma: exageraci√≥n en los autom√≥viles, pero la necesidad de servicios de red del centro de datos</a></li>
<li><a href="../es503964/index.html">DataStore - CRUD (Crear actualizaci√≥n de lectura Eliminar)</a></li>
<li><a href="../es503966/index.html">La aplicaci√≥n de Monitoreo Social se hizo desde un rastreador de camiones de basura</a></li>
<li><a href="../es503968/index.html">¬øC√≥mo hacer que el robot se mueva con precisi√≥n? Descripci√≥n y caracter√≠sticas de Studuino Platform Robotics</a></li>
<li><a href="../es503972/index.html">Prueba de streaming en 4 redes sociales y elegir la mejor opci√≥n</a></li>
<li><a href="../es503980/index.html">Monitorear la temperatura en un sitio remoto por medios "improvisados"</a></li>
<li><a href="../es503982/index.html">Sobre orcos y frameworks</a></li>
<li><a href="../es503988/index.html">C√≥mo la "luz giratoria" entr√≥ en las redes √≥pticas</a></li>
<li><a href="../es503990/index.html">Estoy cansado del hecho de que los programadores comunes se hacen pasar por desarrolladores y deshonran a la industria. Empeoran el mundo</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>