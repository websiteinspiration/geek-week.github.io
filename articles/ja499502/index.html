<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>📸 🗄️ 📊 OceanStor Dorado V6が最も高速で信頼性の高いストレージである理由 📬 🧛🏾 🤺</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ヘッダーがあるので、急いで結論を出さないでください。それを支持する重要な議論があり、それらを可能な限りコンパクトにパックしました。2020年1月にリリースされた新しいデータストレージシステムの概念と動作原理に関する投稿をご紹介します。
 
 
 
 
 私たちの意見では、Dorado V6ストレージ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>OceanStor Dorado V6が最も高速で信頼性の高いストレージである理由</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/huawei/blog/499502/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ヘッダーがあるので、急いで結論を出さないでください。</font><font style="vertical-align: inherit;">それを支持する重要な議論があり、それらを可能な限りコンパクトにパックしました。</font><font style="vertical-align: inherit;">2020年1月にリリースされた新しいデータストレージシステムの概念と動作原理に関する投稿をご紹介します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gm/jm/gy/gmjmgygu6blyuruew5mcs3aqbjy.jpeg"><br>
<a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちの意見では、Dorado V6ストレージファミリの主な競争上の利点は、ヘッダーに記載されているパフォーマンスと信頼性によってもたらされます。</font><font style="vertical-align: inherit;">はい、とてもシンプルですが、トリッキーでそれほどトリッキーではない決定があったため、この「ジャスト」を達成することができたため、本日お話しします。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
新世代システムの可能性をより明確に示すために、モデル範囲（モデル8000、18000）の上級代表についてお話します。</font><font style="vertical-align: inherit;">特に明記しない限り、それらは暗示されます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/fw/oc/tl/fwoctl2wdueuf_ua9f0qk0sn_c0.jpeg"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">市場について一言</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Huaweiソリューションの市場での位置をよりよく理解するために</font><font style="vertical-align: inherit;">、Gartnerの</font><font style="vertical-align: inherit;">「</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">魔法の象限</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">」</font><font style="vertical-align: inherit;">という実証済みの測定に目を向け</font><font style="vertical-align: inherit;">ます。 2年前、当社は汎用ディスクアレイセクターで、NetAppとHewlett Packard Enterpriseに次ぐ2番目のグループに自信を持って参入しました。 2018年、ソリッドステートストレージ市場におけるHuaweiの地位は「申請者」ステータスによって特徴付けられましたが、リーダーシップの地位を獲得するために欠けていたものがあります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2019年、ガートナーは彼の研究で、上記の両方のセクターを1つの「メインストレージ」に結合しました。その結果、Huaweiは再びIBM、Hitachi Vantara、Infinidatなどのサプライヤに次いで、リーダーの4分の1に身を置きました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
全体像を説明するために、ガートナーは米国市場での分析のためにデータの80％を収集していることに注意してください。これは、米国でよく代表されている企業を支持する顕著なバイアスにつながります。</font><font style="vertical-align: inherit;">その間、ヨーロッパやアジアの市場をターゲットとするサプライヤーは、それほど有利ではない立場にいます。</font><font style="vertical-align: inherit;">そして、それにもかかわらず、昨年、Huawei製品は右上の象限で正当な位置を占め、ガートナーの評決によれば、「使用を推奨できます」。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/wo/jy/aq/wojyaqxgxloltozqspxrezxl02i.jpeg"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ドラドV6の新機能</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
特に、Dorado V6製品ラインは3000シリーズのエントリーレベルのシステムで表されます。元々は2つのコントローラーが搭載されていましたが、横に拡張して16コントローラー、1200ディスク、192 GBのキャッシュに拡張できます。また、システムには外部ポートのファイバーチャネル（8/16/32ギガビット/秒）とイーサネット（1/10/25/40/100ギガビット/秒）が装備されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
商業的に成功していないプロトコルの使用は段階的に廃止されていることに注意してください。そのため、最初は、Fibre Channel over Ethernet（FCoE）とInfiniband（IB）のサポートを放棄することにしました。新しいファームウェアバージョンで追加される予定です。 NVMe over Fabric（NVMe-oF）のサポートは、ファイバーチャネル上でそのまま使用できます。 6月にリリース予定の次のファームウェアは、NVMe over Ethernetモードをサポートする予定です。私たちの意見では、上記のセットはほとんどのファーウェイ顧客のニーズをカバーする以上のものです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
現在のファームウェアバージョンにはファイルアクセスがなく、年末に近い次のアップデートのいずれかに表示されます。イーサネットポートを備えたコントローラー自体によって、追加の機器を使用せずにネイティブレベルでの実装が期待されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dorado V6 3000シリーズと古いモデルの主な違いは、バックエンドで1つのプロトコル（SAS 3.0）をサポートすることです。したがって、そこにあるドライブは、指定されたインターフェースでのみ使用できます。私たちの観点から見ると、提供されるパフォーマンスは、このタイプのデバイスには十分です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dorado V6 5000および6000シリーズシステムはミッドレンジソリューションです。また、2Uフォームファクターで製造され、2つのコントローラーが装備されています。これらは、パフォーマンス、プロセッサ数、ディスクの最大数、およびキャッシュサイズが互いに異なります。ただし、建築およびエンジニアリングの用語では、Dorado V6 5000と6000は同一であり、外観は同じです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ハイエンドクラスには、8000および18000シリーズのDorado V6システムが含まれます。フレームサイズ4Uで設計されており、デフォルトで、コントローラーとドライブが分離された別個のアーキテクチャーを備えています。最小構成では、2つのコントローラーのみを装備することもできますが、原則として、お客様は4つ以上のインストールを要求されます。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dorado V6 8000は水平方向に16コントローラー、Dorado V6 18000-32にスケーリングされます。これらのシステムには、異なるコア数とキャッシュサイズの異なるプロセッサーがあります。これらすべてについて、ミッドエンドモデルと同様に、エンジニアリングソリューションのIDが保持されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ドライブ付きの2Uシェルフは、帯域幅100 Gb /秒のRDMAを介して接続されます。</font><font style="vertical-align: inherit;">古いDorado V6バックエンドもSAS 3.0をサポートしていますが、そのようなインターフェースのSSDの場合は価格が下がります。</font><font style="vertical-align: inherit;">次に、生産性の低下を考慮に入れても、それらの使用の経済的実現可能性があります。</font><font style="vertical-align: inherit;">現時点では、SASとNVMeインターフェースを備えたSSD間のコストの差は非常に小さいため、そのようなソリューションを推奨する準備ができていません。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/to/yi/gr/toyigrvocm6fdvmapyswlqk_k5i.jpeg"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コントローラー内部</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dorado V6コントローラーは、独自のエレメントベースで作成されています。</font><font style="vertical-align: inherit;">Intelプロセッサ、Broadcom ASICはありません。</font><font style="vertical-align: inherit;">したがって、マザーボードのすべてのコンポーネントとそれ自体が、米国企業からの制裁圧力に関連するリスクの影響から完全に排除されます。</font><font style="vertical-align: inherit;">私たちの機器を私たちの目で見た人は、ロゴの下に赤い縞がある盾に気づいたはずです。</font><font style="vertical-align: inherit;">それは、製品がアメリカのコンポーネントを欠いていることを意味します。</font><font style="vertical-align: inherit;">これはHuaweiの公式コースです。独自の生産のコンポーネントへの移行、またはいずれにしても、米国のポリシーに従わない国で製造されたものです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、コントローラボード自体に表示されるものです。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ファイバーチャネルまたはイーサネットへの接続を担当するユニバーサルネットワークインターフェイス（Hisilicon 1822チップ）。</font></font></li>
<li>    BMC-,   Hisilicon 1710,       .          .</li>
<li> ,        ARM  Kunpeng 920  Huawei.      ,               ,     . .           . ,    Dorado V6     .</li>
<li> SSD ( Hisilicon 1812e),     SAS-,   NVMe-. , Huawei   SSD,      NAND,             . ,      Huawei  ,        .</li>
<li>   — Ascend 310.           ,     ,    .       ,       .          ,        .</li>
</ul><br>
<img src="https://habrastorage.org/webt/ef/qf/qc/efqfqcjue5oaufiyfsw-4leydtw.jpeg"><br>
<br>
<h2>   Kunpeng</h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kunpengプロセッサはシステムオンチップ（SoC）であり、コンピューティングユニットに加えて、チェックサムの計算や「消失符号化」の実行など、さまざまなプロセスを加速するハードウェアモジュールがあります。</font><font style="vertical-align: inherit;">SAS、イーサネット、DDR4（6から8チャネル）などのハードウェアサポートも実装しています。これらすべてにより、Huaweiは、従来のIntelソリューションよりもパフォーマンスが劣らないストレージコントローラーを作成できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに、ARMアーキテクチャに基づく独自のソリューションは、Huaweiに本格的なサーバーソリューションを作成し、x86の代替として顧客に提供する機会を提供します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/m9/sw/2t/m9sw2trly1xkjyvuefek2ueacbo.jpeg"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ドラドV6の新しいアーキテクチャ...</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
古いDorado V6ストレージシステムの内部アーキテクチャは、4つのメインサブドメイン（工場）で表されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初のファクトリは一般的なフロントエンド（SANファクトリまたはホストとの通信を担当するネットワークインターフェイス）です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2つ目は、RDMAプロトコルを使用して、フロントエンドネットワークカードと隣接するエンジン（4つのコントローラーとそれらに共通の電源ユニットと冷却ユニットを備えたボックス）にそれぞれ到達できる一連のコントローラーです。現在、Dorado V6ハイエンドモデルには、このような「エンジン」を2つ（それぞれ、8つのコントローラー）搭載できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3番目のファクトリはバックエンドを担当し、RDMA 100Gネットワ​​ークカードで構成されています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最後に、「鉄製」の4番目の工場は、ドライブを備えたプラグイン式インテリジェントシェルフによって表されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このような対称構造は、NVMeテクノロジーの可能性を最大限に引き出し、高いパフォーマンスと信頼性を保証します。</font><font style="vertical-align: inherit;">I / Oプロセスは、プロセッサーとコア間で最大限に並列化され、複数のスレッドに対して同時の読み取りと書き込みを提供します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ug/qb/qj/ugqbqj_nbohudbltl0frnroc0lw.jpeg"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">...そして彼女が私たちにくれたもの</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dorado V6ソリューションの最大パフォーマンスは、（同じクラスの）前世代のシステムのパフォーマンスの約3倍で、2,000万IOPSに達する可能性があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、前世代のデバイスでは、NVMeサポートがドライブのあるシェルフにのみ拡張されていたためです。現在では、ホストからSSDまで、すべての段階で存在しています。バックエンドネットワークにも変更が加えられています。SAS/ PCIeは、帯域幅が100 Gb /秒のRoCEv2に変わりました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SSDフォームファクタも変更されました。以前は2Uシェルフに25台のドライブがあった場合、現在は最大36台の手のひらサイズの物理ディスクになっています。さらに、棚は「賢く」なります。それぞれに、中央コントローラーにインストールされているものと同様の、ARMチップに基づく2つのコントローラーのフォールトトレラントシステムがあります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/it/he/jw/ithejwh2y2-cqwxvedytjugaina.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これまでのところ、データの再編成のみを行っていますが、新しいファームウェアのリリースに伴い、圧縮と消去のコーディングが追加され、メインコントローラーの負荷が15から5％に減少します。タスクの一部をシェルフに同時に転送すると、内部ネットワークの帯域幅が解放されます。そして、これらすべてにより、システムのスケーラビリティの可能性が大幅に向上します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
前世代のストレージシステムの圧縮と重複排除は、固定長のブロックで実行されました。現在、可変長ブロックを操作するモードが追加されています。これは、これまで強制的に有効にする必要がありました。後続のファームウェアはこの事実を変更する可能性があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、耐障害性についても簡単に説明します。</font><font style="vertical-align: inherit;">Dorado V3は、2つのうち1つが故障した場合でも動作し続けました。</font><font style="vertical-align: inherit;">Dorado V6は、8つのコントローラーのうち7つまたは1つの「エンジン」のうち4つが連続して故障した場合でも、データの可用性を保証します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/n3/gg/ek/n3ggekdjpfwcronqvtppxsrej6g.jpeg"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">経済的信頼性</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最近、Huaweiの顧客の間で、会社が許容できると考えるITインフラストラクチャの単純な要素の種類について調査が行われました。ほとんどの場合、回答者は、アプリケーションが数百秒間応答しないという架空の状況に寛容でした。オペレーティングシステムまたはホストバスアダプターの場合、重大なダウンタイムは数十秒（実際には再起動時間）でした。顧客はネットワークに対してさらに高い要求を出します。その帯域幅は10〜20秒以上消えないはずです。ご想像のとおり、回答者はストレージ障害が最も重大であると考えています。ビジネス担当者の観点から見ると、シンプルなストレージシステムは...年に数秒を超えてはなりません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
言い換えると、銀行のクライアントアプリケーションが100秒間応答しない場合、これは壊滅的な結果を引き起こす可能性はほとんどありません。</font><font style="vertical-align: inherit;">しかし、同じ数のストレージシステムが機能しない場合、ビジネスの停止と大きな経済的損失が発生する可能性があります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/zp/wb/he/zpwbhehuqzmc56u8jcprlrtcyik.jpeg"><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上のグラフは、10大銀行の1時間の作業コストを示しています（2017年のForbesデータ）。</font><font style="vertical-align: inherit;">もしあなたの会社が中国の銀行の規模に近づいているなら、数百万ドルでストレージを購入する必要性を正当化することはそれほど難しくはないでしょう。</font><font style="vertical-align: inherit;">その逆も当てはまります。ビジネスがダウンタイム中に大きな損失を被らない場合、ハイエンドのストレージシステムを購入することはまずありません。</font><font style="vertical-align: inherit;">いずれの場合でも、システム管理者が動作を拒否したデータストレージシステムを処理している間、ウォレットに穴が形成される恐れのあるサイズを把握することが重要です。</font></font></blockquote><br>
<br>
<img src="https://habrastorage.org/webt/ua/pv/zw/uapvzwvu-bniunuc_erursgxxts.jpeg"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">フェイルオーバー秒</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
上の図のソリューションAでは、前世代のDorado V3システムを認識できます。</font><font style="vertical-align: inherit;">4つのコントローラーはペアで動作し、2つのコントローラーのみがキャッシュのコピーを含みます。</font><font style="vertical-align: inherit;">ペア内のコントローラーは、負荷を再分散できます。</font><font style="vertical-align: inherit;">同時に、ご覧のとおり、フロントエンドとバックエンドの「ファクトリー」はないため、ドライブを備えた各シェルフは特定のコントローラーペアに接続されています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ソリューションBの図は、別のベンダーから現在市場で入手可能なソリューションを示しています（ご存知ですか？）。</font><font style="vertical-align: inherit;">すでにフロントエンドとバックエンドの工場があり、ドライブは4つのコントローラーに直接接続されています。</font><font style="vertical-align: inherit;">確かに、内部システムアルゴリズムの作業では、最初の近似では明らかではないニュアンスがあります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
右側は、すべての内部要素を備えた現在のDorado V6ストレージアーキテクチャです。これらのシステムがどのようにして典型的な状況（1つのコントローラーの障害）に耐えられるかを検討してください。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dorado V3を含む従来のシステムでは、障害発生時に負荷を再分散するのに必要な期間は4秒に達します。このとき、I / Oは完全に止まります。ソリューションBでは、最新のアーキテクチャにもかかわらず、私たちの同僚から、障害時のダウンタイムはさらに長く、6秒です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dorado V6ストレージは、障害発生後わずか1秒で動作を回復します。この結果は、同種の内部RDMA環境によって達成され、コントローラーが「外部」メモリーにアクセスできるようにします。 2番目の重要な状況は、ホストのパスが変更されないフロントエンドファクトリの存在です。ポートは同じままで、負荷はマルチパスドライバーによってサービス可能なコントローラーに送信されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dorado V6の2番目のコントローラーの障害は、同じスキームに従って1秒で解決されます。 Dorado V3には約6秒かかりますが、別のベンダーのソリューションには9秒かかります。多くのDBMSの場合、この間、システムはスタンバイモードになり、動作を停止するため、このような間隔は許容範囲と見なされなくなります。これは、多くのセクションで構成されるDBMSに関する最初の問題です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3番目のソリューションAの障害は、コントローラーが生き残ることができません。</font><font style="vertical-align: inherit;">データディスクの一部へのアクセスが失われたという事実だけのため。</font><font style="vertical-align: inherit;">次に、このような状況でのソリューションBは、前のケースと同様に9秒を必要とする操作性を復元します。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ドラドV6には何がありますか？</font><font style="vertical-align: inherit;">一秒。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/48/ty/eb/48tyebpvigm0nh0ybdzolr7yfei.jpeg"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一瞬でできること</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ほとんど何もありませんが、これは必要ありません。</font><font style="vertical-align: inherit;">再び、Dorado V6ハイエンドクラスでは、フロントエンドファクトリーがコントローラーファクトリーからアンタイドされます。</font><font style="vertical-align: inherit;">つまり、特定のコントローラーに属するハードコードされたポートはありません。</font><font style="vertical-align: inherit;">フェイルオーバーの再構築は、代替パスの検出やマルチパスの再初期化を意味するものではありません。</font><font style="vertical-align: inherit;">システムは機能したまま機能し続けます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/j_/1t/os/j_1tos7de0oav_ndiy6pgwbeg1m.jpeg"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">多重故障耐性</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
問題のない古いDorado V6モデルは、「エンジン」からの2つ（！）のコントローラーの同時故障に耐えます。これは、ソリューションがキャッシュの3つのコピーを格納するために可能になりました。したがって、二重障害が発生しても、常に完全なコピーが1つ存在します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
「エンジン」の1つで4つすべてのコントローラーが同時に故障しても、「エンジン」間でキャッシュの3つのコピーすべてが分散されるため、致命的な結果は発生しません。このような作業ロジックの遵守は、システム自体によって監視されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最後に、非常にまれなシナリオは、8つのコントローラーのうち7つのコントローラーが連続して失敗することです。</font><font style="vertical-align: inherit;">さらに、個々の障害間の操作性を維持するための最小許容間隔は15分です。</font><font style="vertical-align: inherit;">この間、ストレージシステムは、キャッシュの移行に必要な操作を実行します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最後に残ったコントローラーは、データウェアハウスの操作を提供し、5日間キャッシュを維持します（デフォルト値で、設定で簡単に変更できます）。</font><font style="vertical-align: inherit;">その後、キャッシュは無効になりますが、ストレージは続行されます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ht/u2/08/htu208rwp-belahni-u6zebwqey.jpeg"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アップデートを邪魔しない</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
新しいDorado V6 OSでは、コントローラーを再起動せずにストレージシステムのストレージを更新できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以前のソリューションの場合と同様に、OSはLinuxに基づいていますが、多くのオペレーティングプロセスがカーネルからユーザーモードに転送されます。重複排除や圧縮を担当する機能など、ほとんどの機能がバックグラウンドで実行される通常のデーモンになりました。このため、個々のモジュールを更新するために、オペレーティングシステム全体を変更する必要はありません。新しいプロトコルのサポートを追加するには、対応するソフトウェアモジュールをオフにして、新しいモジュールを開始するだけでよいとします。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
システム全体の更新の問題がまだ残っていることは明らかです。結局のところ、更新が必要な要素がカーネルにある可能性があります。</font><font style="vertical-align: inherit;">しかし、そのように、私たちの観察によれば、全体の6％未満です。</font><font style="vertical-align: inherit;">これにより、以前よりも数十倍少ない時間でコントローラーを再起動できます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ox/uc/oq/oxucoqctjppey9wxpvsyua9ymms.jpeg"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">壊滅的およびHAソリューション（HA / DR）</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dorado V6は、「そのまま」、地理的に分散したソリューション、都市レベルのクラスター（メトロ）、および「トリプル」データセンターに統合する準備ができています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
上の図の左側は、すでに多くの人が使い慣れているメトロクラスタです。 2つのストレージシステムは、互いに最大100 kmの距離でアクティブ/アクティブモードで動作します。 1つ以上のクォーラムサーバーを備えた同様のインフラストラクチャは、クラウドベースのオペレーティングシステムFusionSphereを含むさまざまな企業のソリューションでサポートできます。そのようなプロジェクトで特に重要なのは、サイト間のチャネルの特性です。この場合、他のすべてのタスクは、そのまま使用できるHyperMetro機能によって引き継がれます。必要に応じて、ファイバーチャネルの統合や、IPネットワークでのiSCSIの統合が可能です。システムは既存のチャネルを介して通信できるため、専用の「暗い」光学系は必要ありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このようなシステムを構築する場合、ストレージのハードウェア要件は、レプリケーション用のポート割り当てのみです。</font><font style="vertical-align: inherit;">ライセンスを取得し、クォーラムサーバー（物理または仮想）を実行し、コントローラーへのIP接続（10 Mbps、50ミリ秒）を提供するだけで十分です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このアーキテクチャは、3つのデータセンターを持つシステムに簡単に転送できます（図の右側を参照）。</font><font style="vertical-align: inherit;">たとえば、2つのデータセンターがメトロクラスターモードで動作し、100 kmを超える距離にある3番目のサイトが非同期レプリケーションを使用する場合。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このシステムは、大規模な超過が発生した場合に実装されるさまざまなビジネスシナリオを技術的にサポートします。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/pk/au/ha/pkauhavrmru0ujfmbhllubnmp20.jpeg"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">複数の障害が発生したメトロクラスタの存続</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
上記と以下は、2つのストレージシステムとクォーラムサーバーで構成される従来のメトロクラスターも示しています。</font><font style="vertical-align: inherit;">ご覧のとおり、複数の障害が発生する可能性のある9つのシナリオのうちの6つでは、インフラストラクチャは引き続き機能します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
たとえば、2番目のシナリオでは、クォーラムサーバーに障害が発生し、サイト間の同期が発生した場合、2番目のサイトが機能を停止するため、システムは生産性を維持します。</font><font style="vertical-align: inherit;">同様の動作は、組み込みアルゴリズムにすでに組み込まれています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3回失敗した場合でも、15秒以上の間隔があれば情報へのアクセスを維持できます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ut/om/_4/utom_4rdeq3gwrmqwao3uaib3hc.jpeg"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スリーブからの通常の切り札</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Huaweiはストレージシステムだけでなく、あらゆる種類のネットワーク機器も生産していることを思い出してください。</font><font style="vertical-align: inherit;">どちらのストレージプロバイダーを選択しても、サイト間でWDMネットワークが使用されている場合、90％のケースでは、当社のソリューションに基づいて構築されます。</font><font style="vertical-align: inherit;">論理的な問題が発生します。相互に互換性のあるすべての保証されたハードウェアを1つのベンダーから入手できるのに、なぜシステムの動物園を組み立てるのでしょうか。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/wb/y3/wx/wby3wxmvfqzwbyivrtai4a6-uui.jpeg"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パフォーマンスの問題へ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべての日常的な操作が何倍も速く実行されるため、オールフラッシュストレージへの移行によりインフラストラクチャのメンテナンスコストを大幅に削減できることを誰も確信する必要はないでしょう。</font><font style="vertical-align: inherit;">これは、そのような機器のすべてのサプライヤーによって証明されています。</font><font style="vertical-align: inherit;">その間、多くのベンダーは、さまざまなストレージモードをオンにしたときにパフォーマンスが低下するようになると、混乱し始めます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
当業界では、1〜2日間の試運転用ストレージシステムの発行が広く行われています。プロバイダーは空のシステムで20分のテストを実行し、スペースベースのパフォーマンスインジケーターを受け取ります。そして実際の運用では「水中熊手」がすぐに出てきます。 1日後、美しいIOPS値は半分または3倍になり、ストレージシステムが80％使用されている場合は、さらに少なくなります。 RAID 10の代わりにRAID 5をオンにすると、さらに10〜15％が失われ、メトロクラスターモードでは、パフォーマンスがさらに半分になります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
上記のすべては、Dorado V6に関するものではありません。お客様には、週末または少なくとも夜間にパフォーマンステストを実行する機会があります。次に、ガベージコレクションが発生し、スナップショットやレプリケーションなどのさまざまなオプションのアクティブ化が、達成されるIOPSの量にどのように影響するかも明らかになります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dorado V6では、スナップショットとパリティ付きRAIDは、実質的にパフォーマンスに影響を与えません（10-15％ではなく3-5％）。</font><font style="vertical-align: inherit;">80％使用されているストレージシステムでのガベージコレクション（ドライブセルをゼロで埋める）、圧縮、重複排除は、常に要求処理の全体的な速度に影響します。</font><font style="vertical-align: inherit;">しかし、Dorado V6が興味深いのは、アクティブ化する機能と保護メカニズムの組み合わせに関係なく、ストレージシステムの総パフォーマンスが、負荷なしで得られる数値の80％を下回らないことです。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/al/ql/tf/alqltf2odmskrrwkumqpftokhho.jpeg"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">負荷分散</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
高性能のドラドV6は、すべての段階でバランスをとることによって実現されます。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">マルチパス;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1つのホストからの複数の接続の使用。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">フロントエンド工場の存在;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ストレージコントローラーの操作を並列化します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RAID 2.0+でのすべてのドライブ間での負荷分散。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
原則として、これは一般的な方法です。</font><font style="vertical-align: inherit;">今日では、1つのLUNにすべてのデータを保持する人はほとんどいません。誰もが、8つ、さらには40以上のデータを保持しようとしています。</font><font style="vertical-align: inherit;">これは、私たちが共有する明白で正しいアプローチです。</font><font style="vertical-align: inherit;">しかし、タスクが1つのLUNのみを必要とする場合、これは維持が容易です。複数のLUNを使用する場合、アーキテクチャソリューションは80％のパフォーマンスを達成できます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/wm/rr/dh/wmrrdhkiap1jrxpfxgqkj9cs4vu.jpeg"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">動的プロセッサー負荷スケジューリング</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1つのLUNを使用する場合のプロセッサの負荷分散は次のように実装されます。LUNレベルのタスクは、個別の小さな「シャード」に分割され、それぞれが「エンジン」の特定のコントローラーに厳密に割り当てられます。これは、さまざまなコントローラーでこのデータの一部を「ジャンプ」しているときにシステムがパフォーマンスを失わないようにするためです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ハイパフォーマンスを維持するためのもう1つのメカニズムは、動的コア分割です。この場合、プロセッサコアを異なるタスクプールに割り当てることができます。たとえば、システムが重複排除と圧縮のレベルでアイドル状態の場合、一部のコアがI / Oの処理プロセスに含まれる可能性があります。またはその逆。これはすべて、ユーザーに対して自動的かつ透過的に行われます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
各Dorado V6コアの現在の負荷に関するデータは、グラフィカルインターフェイスには表示されませんが、コマンドラインを介してコントローラーOSにアクセスし、通常のLinux </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">top</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コマンドを使用できます</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/4c/wl/a-/4cwla-nn1zh7bgwggnbto3_w4sq.jpeg"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NVMeおよびRoCEのサポート</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すでに述べたように、現時点では、Dorado V6はそのままでファイバーチャネル上のNVMeを完全にサポートしており、ライセンスは必要ありません。</font><font style="vertical-align: inherit;">中間年のNVMe over Ethernetのサポート。</font><font style="vertical-align: inherit;">完全に使用するには、ストレージシステム自体から、およびスイッチとネットワークアダプターの側面の両方から、ダイレクトメモリアクセス（DMA）バージョンv2.0のイーサネットサポートが必要です。</font><font style="vertical-align: inherit;">たとえば、Mellanox ConnectX-4またはConnectX-5など。</font><font style="vertical-align: inherit;">私たちのマイクロサーキットに基づいて作られたネットワークカードを使用できます。</font><font style="vertical-align: inherit;">RoCEサポートは、オペレーティングシステムレベルでも実装する必要があります。</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一般に、Dorado V6はNVMe指向のシステムと見なされます。</font><font style="vertical-align: inherit;">ファイバーチャネルとiSCSIの既存のサポートにもかかわらず、将来的にはRDMAを備えた高速イーサネットに切り替える予定です。</font></font></blockquote><br>
<br>
<img src="https://habrastorage.org/webt/cr/zo/mw/crzomwjifeshb951eje2sn3tbwe.jpeg"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">マーケティングのピンチ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dorado V6システムは障害に対して非常に耐性があり、拡張が容易で、さまざまな移行テクノロジをサポートしているなどの事実により、ストレージシステムの集中的な運用の開始とともに、その買収の経済的効果が現れています。</font><font style="vertical-align: inherit;">たとえ最初の段階では目立たなくても、システムの所有権をできる限り収益性の高いものにするように努力し続けます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
特に、ストレージライフサイクルの延長に関連するFLASH EVERプログラムを作成し、アップグレード中に可能な限りお客様をアンロードするように設計しました。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/nz/nk/q6/nznkq6nq3lzjw9c4e99hvr7wqew.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このプログラムには、いくつかの対策が含まれています。</font></font><br>
<br>
<ul>
<li>               (  Dorado V6  hi-end);</li>
<li>   (   Dorado      );</li>
<li>  (        Dorado).</li>
</ul><br>
<img src="https://habrastorage.org/webt/z8/mb/h4/z8mbh4j2ndpjsqnlhrcspsfpxfm.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
世界の困難な状況が新しいシステムの商業的見通しにほとんど影響を与えなかったことは注目に値します。</font><font style="vertical-align: inherit;">Dorado V6の公式リリースが1月にのみ行われたという事実にもかかわらず、私たちはそれが中国で大きな需要があること、および金融セクターや政府機関からのロシアおよび国際的なパートナーからの大きな関心が見られます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
とりわけ、パンデミックに関連して、彼らがどれほど長く続いたとしても、リモートの従業員に仮想デスクトップを提供するという問題は特に深刻です。</font><font style="vertical-align: inherit;">このプロセスで、Dorado V6は多くの質問を削除することもできました。</font><font style="vertical-align: inherit;">これを行うために、VMware互換性リストに新しいシステムを含めることに同意するなど、必要なすべての努力を行っています。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">***</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ちなみに、ロシア語だけでなく、グローバルレベルで開催される多くのウェビナーもお忘れなく。</font><font style="vertical-align: inherit;">4月のWebセミナーのリストは、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">こちらから</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">入手でき</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ます</font></a><font style="vertical-align: inherit;">。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja499476/index.html">登録およびSMSなしのターンキーWebアプリケーションの自動化テスト</a></li>
<li><a href="../ja499482/index.html">投資家が危機の中で財政を節約する方法：分散化へのアプローチ、低リスク資産の選択およびコスト最適化</a></li>
<li><a href="../ja499486/index.html">安全ツールとしてのレトリック</a></li>
<li><a href="../ja499490/index.html">ランダムアルゴリズム</a></li>
<li><a href="../ja499492/index.html">シリコンバレーの開発者が億万長者になることは可能ですか？Lyftで解析するスタッフエンジニア</a></li>
<li><a href="../ja499504/index.html">AppleおよびGoogle Bluetooth連絡先追跡プロトコル</a></li>
<li><a href="../ja499506/index.html">結果または給与について、時間ごとの支払いですか？</a></li>
<li><a href="../ja499508/index.html">Laravelキューに対応できるように製品を準備する</a></li>
<li><a href="../ja499512/index.html">最低でもAHK。バインダー</a></li>
<li><a href="../ja499516/index.html">Linux / macOS用のRiderおよびPVS-Studio C＃のプラグインのベータテストの開始</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>