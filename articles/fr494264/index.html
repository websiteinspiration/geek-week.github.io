<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§µüèæ üßò ‚õ©Ô∏è Cluster √† deux n≈ìuds - le diable en d√©tail üí† ü•† üßôüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour, Habr! Je vous pr√©sente la traduction de l'article "Deux n≈ìuds - Le diable est dans les d√©tails" par Andrew Beekhof. 
 
 Beaucoup de gens pr√©f...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Cluster √† deux n≈ìuds - le diable en d√©tail</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/494264/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bonjour, Habr! Je vous pr√©sente la traduction de l'article </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Deux n≈ìuds - Le diable est dans les d√©tails"</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> par Andrew Beekhof. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beaucoup de gens pr√©f√®rent les clusters √† deux n≈ìuds car ils semblent conceptuellement plus simples et √©galement 33% moins chers que leurs homologues √† trois n≈ìuds. Bien qu'il soit tout √† fait possible d'assembler un bon cluster de deux n≈ìuds, dans la plupart des cas, en raison de sc√©narios non pris en compte, une telle configuration cr√©era de nombreux probl√®mes non √©vidents.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La premi√®re √©tape de la cr√©ation d'un syst√®me √† haute disponibilit√© consiste √† rechercher et √† tenter d'√©liminer les points de d√©faillance individuels, souvent abr√©g√©s en </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SPoF</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (point de d√©faillance unique). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il convient de garder √† l'esprit que dans tout syst√®me, il est impossible d'√©liminer tous les risques possibles de temps d'arr√™t. Cela d√©coule m√™me du fait qu'une protection contre les risques typique est l'introduction d'une certaine redondance, ce qui conduit √† une augmentation de la complexit√© du syst√®me et √† l'√©mergence de nouveaux points de d√©faillance. Par cons√©quent, nous faisons d'abord des compromis et nous nous concentrons sur les √©v√©nements li√©s √† des points de d√©faillance individuels, plut√¥t que sur des cha√Ænes d'√©v√©nements li√©s et, par cons√©quent, de moins en moins probables.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Compte tenu des compromis, nous recherchons non seulement le SPoF, mais √©galement l'√©quilibre des risques et des cons√©quences.En cons√©quence, la conclusion est ce qui est essentiel et ce qui ne peut pas √™tre diff√©rent pour chaque d√©ploiement.</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tout le monde n'a pas besoin de fournisseurs d'√©lectricit√© alternatifs avec des lignes √©lectriques ind√©pendantes. </font><font style="vertical-align: inherit;">Bien que la parano√Øa ait pay√© pour au moins un client lorsque sa surveillance a d√©tect√© un transformateur d√©fectueux. </font><font style="vertical-align: inherit;">Le client a appel√© par t√©l√©phone, essayant d'avertir la compagnie d'√©nergie, jusqu'√† ce qu'un transformateur d√©fectueux explose.</font></font></blockquote> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le point de d√©part naturel est la pr√©sence de plusieurs n≈ìuds dans le syst√®me. </font><font style="vertical-align: inherit;">Cependant, avant que le syst√®me ne puisse d√©placer les services vers le n≈ìud survivant apr√®s l'√©chec, en g√©n√©ral, vous devez vous assurer que les services d√©plac√©s ne sont actifs √† aucun autre endroit. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un cluster √† deux n≈ìuds n'a aucun inconv√©nient si, √† la suite d'une d√©faillance, les deux n≈ìuds desservent le m√™me site Web statique. </font><font style="vertical-align: inherit;">Cependant, tout change si, par cons√©quent, les deux parties g√®rent ind√©pendamment la file d'attente de travaux partag√©e ou fournissent un acc√®s en √©criture non coordonn√© √† la base de donn√©es r√©pliqu√©e ou au syst√®me de fichiers partag√©. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par cons√©quent, pour √©viter la corruption des donn√©es due √† la d√©faillance d'un n≈ìud - nous nous appuyons sur ce qu'on appelle la </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬´dissociation¬ª</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (cl√¥ture).</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Principe de s√©paration</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le principe de s√©paration repose sur la question: un n≈ìud concurrent peut-il provoquer une corruption des donn√©es? Dans le cas o√π la corruption des donn√©es est un sc√©nario probable, isoler le n≈ìud des demandes entrantes et du stockage persistant est une bonne solution. L'approche la plus courante de d√©sengagement consiste √† d√©sactiver les n≈ìuds d√©fectueux. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il y a deux cat√©gories de m√©thodes de s√©paration que j'appellerai </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">directes</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">indirectes</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , mais elles peuvent √©galement √™tre appel√©es </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">actives</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">passives</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Les m√©thodes directes incluent les actions des pairs survivants, telles que l'interaction avec un p√©riph√©rique IPMI (Intelligent Platform Management Interface - une interface pour surveiller et g√©rer √† distance l'√©tat physique d'un serveur) ou iLO (un m√©canisme de gestion de serveur en l'absence d'acc√®s physique √† ceux-ci), tandis que les m√©thodes indirectes s'appuient sur le n≈ìud d√©faillant pour reconna√Ætre d'une mani√®re ou d'une autre qu'il est dans un √©tat malsain (ou du moins emp√™cher le reste des membres de r√©cup√©rer) et pour signaler au </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chien</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">garde mat√©riel</font></a><font style="vertical-align: inherit;"> la n√©cessit√© de d√©connecter le n≈ìud d√©faillant. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un quorum est utile dans le cas de l'utilisation de m√©thodes directes et indirectes.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dissociation directe</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En cas de dissociation directe, nous pouvons utiliser un quorum pour √©viter les courses d'exclusion en cas de panne du r√©seau. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ayant le concept de quorum, le syst√®me dispose de suffisamment d'informations (m√™me sans connexion √† ses partenaires) pour que les n≈ìuds sachent automatiquement s'ils doivent initier la s√©paration et / ou la r√©cup√©ration. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sans quorum, les deux c√¥t√©s du partage de r√©seau supposent √† juste titre que l'autre c√¥t√© est mort et chercheront √† dissocier l'autre. Dans le pire des cas, les deux parties parviennent √† d√©connecter l'ensemble du cluster. Un sc√©nario alternatif est deathmatch, une boucle sans fin de n≈ìuds apparaissant, ne voyant pas leurs homologues, les rechargeant et initiant la r√©cup√©ration uniquement pour un red√©marrage lorsque leur homologue suit la m√™me logique.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le probl√®me de l'exclusion est que les appareils les plus fr√©quemment utilis√©s deviennent inaccessibles en raison des m√™mes √©v√©nements de d√©faillance sur lesquels nous voulons nous concentrer pour la r√©cup√©ration. </font><font style="vertical-align: inherit;">La plupart des cartes IPMI et iLO sont install√©es sur les h√¥tes qu'elles contr√¥lent et, par d√©faut, utilisent le m√™me r√©seau, √† cause duquel les n≈ìuds cibles supposent que les autres n≈ìuds sont hors ligne. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Malheureusement, les caract√©ristiques de fonctionnement des appareils IPMI et iLo sont rarement prises en compte au moment de l'achat de l'√©quipement.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S√©paration indirecte</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un quorum est √©galement important pour g√©rer l'exclusion indirecte; si tout est fait correctement, le quorum peut permettre aux survivants de supposer que les n≈ìuds perdus entreront dans un √©tat s√ªr apr√®s une certaine p√©riode de temps. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Avec ce param√®tre, le temporisateur de surveillance du mat√©riel se r√©initialise toutes les N secondes si le quorum n'est pas perdu. Si la minuterie (g√©n√©ralement un multiple de N) expire, l'appareil effectue un arr√™t disgracieux de l'alimentation (pas un arr√™t). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cette approche est tr√®s efficace, mais sans quorum, il n'y a pas suffisamment d'informations √† l'int√©rieur du cluster pour le g√©rer. Il n'est pas facile de d√©terminer la diff√©rence entre une panne de r√©seau et une panne d'h√¥te partenaire. La raison pour laquelle cela est important est que sans la possibilit√© de distinguer deux cas, vous √™tes oblig√© de choisir le m√™me comportement dans les deux cas.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le probl√®me avec le choix d'un mode est qu'il n'y a aucun moyen d'action qui maximiserait l'accessibilit√© et emp√™cherait la perte de donn√©es.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si vous d√©cidez de supposer que le n≈ìud partenaire est actif, mais qu'il y a en fait eu un √©chec, le cluster arr√™tera inutilement les services qui devraient fonctionner pour compenser la perte de services du n≈ìud partenaire tomb√© en panne.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si vous d√©cidez de supposer que le n≈ìud ne fonctionne pas, mais qu'il s'agissait simplement d'une panne de r√©seau et que le n≈ìud distant fonctionne r√©ellement, alors, au mieux, vous vous abonnez √† une future r√©conciliation manuelle des ensembles de donn√©es r√©sultants.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quelle que soit l'heuristique que vous utilisez, il est trivial de cr√©er une d√©faillance qui oblige les deux parties √† travailler ou force le cluster √† d√©connecter les n≈ìuds survivants. </font><font style="vertical-align: inherit;">Ne pas utiliser le quorum prive vraiment le cluster de l'un des outils les plus puissants de son arsenal. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
S'il n'y a pas d'autre alternative, la meilleure approche serait de sacrifier l'accessibilit√© (ici, l'auteur se r√©f√®re au th√©or√®me CAP). </font><font style="vertical-align: inherit;">La haute disponibilit√© des donn√©es corrompues n'aide personne, et la r√©conciliation manuelle de divers ensembles de donn√©es n'est pas non plus un plaisir.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quorum</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le quorum sonne bien, non? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le seul inconv√©nient est que pour l'avoir dans un cluster avec N membres, vous devez conserver la connexion entre N / 2 + 1 de vos n≈ìuds. Ce qui est impossible dans un cluster √† deux n≈ìuds apr√®s la d√©faillance d'un n≈ìud. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ce qui nous conduit finalement √† un probl√®me fondamental avec deux n≈ìuds: un </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
quorum n'a pas de sens dans deux grappes de n≈ìuds, et sans cela, il est impossible de d√©terminer de mani√®re fiable le plan d'action qui maximise l'accessibilit√© et emp√™che la perte de donn√©es</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
M√™me dans un syst√®me de deux n≈ìuds connect√©s par un c√¢ble crois√©, il est impossible de distinguer enfin entre la d√©connexion du r√©seau et la d√©faillance d'un autre n≈ìud. </font><font style="vertical-align: inherit;">La d√©connexion d'une extr√©mit√© (dont la probabilit√© est, bien entendu, proportionnelle √† la distance entre les n≈ìuds) sera suffisante pour r√©futer toute hypoth√®se selon laquelle le canal fonctionne de mani√®re √©gale √† la sant√© du n≈ìud partenaire.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Faire fonctionner le cluster de deux n≈ìuds</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Parfois, le client ne peut pas ou ne veut pas acheter un troisi√®me n≈ìud, et nous sommes oblig√©s de chercher une alternative.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Option 1 - M√©thode de s√©paration en double</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le p√©riph√©rique iLO ou IPMI du n≈ìud est un point de d√©faillance car, en cas de d√©faillance, les survivants ne peuvent pas l'utiliser pour mettre le n≈ìud dans un √©tat s√ªr. Dans un cluster de 3 n≈ìuds ou plus, nous pouvons att√©nuer cela en calculant le quorum et en utilisant le chien de garde mat√©riel (un m√©canisme de d√©sengagement indirect, comme expliqu√© pr√©c√©demment). Dans le cas de deux n≈ìuds, nous devrions plut√¥t utiliser des commutateurs d'alimentation r√©seau (unit√©s de distribution d'alimentation ou PDU). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apr√®s l'√©chec, le survivant essaie d'abord de contacter le p√©riph√©rique de s√©paration principal (iLO ou IPMI int√©gr√©). Si cela r√©ussit, la reprise se poursuit comme d'habitude. Ce n'est qu'en cas de d√©faillance d'un p√©riph√©rique iLO / IPMI que l'appel √† la PDU se produit, si l'appel r√©ussit, la r√©cup√©ration peut continuer.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Veillez √† placer la PDU sur un r√©seau autre que le trafic de cluster, sinon une seule d√©faillance du r√©seau bloquera l'acc√®s aux p√©riph√©riques d'isolement et bloquera la r√©cup√©ration du service. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ici, vous pouvez vous demander - la PDU n'est-elle pas un point de d√©faillance unique? </font><font style="vertical-align: inherit;">√Ä laquelle la r√©ponse est bien s√ªr. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si ce risque est important pour vous, vous n'√™tes pas seul: connectez les deux n≈ìuds √† deux PDU et demandez au logiciel du cluster de les utiliser lors de l'activation et de la d√©sactivation des n≈ìuds. </font><font style="vertical-align: inherit;">D√©sormais, le cluster reste actif si une PDU meurt et qu'une deuxi√®me d√©faillance d'un autre PDU ou p√©riph√©rique IPMI est n√©cessaire pour bloquer la r√©cup√©ration.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Option 2 - Ajout d'un arbitre</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans certains sc√©narios, bien que la m√©thode de s√©paration en double soit techniquement possible, elle est politiquement complexe. De nombreuses entreprises aiment avoir une certaine s√©paration entre les administrateurs et les propri√©taires d'applications, et les administrateurs r√©seau soucieux de la s√©curit√© ne sont pas toujours enthousiastes √† l'id√©e de transmettre les param√®tres d'acc√®s aux PDU √† quiconque. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans ce cas, l'alternative recommand√©e consiste √† cr√©er un tiers neutre pouvant compl√©ter le calcul du quorum. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En cas de panne, le n≈ìud devrait pouvoir voir la diffusion de son partenaire ou arbitre afin de restaurer les services. L'arbitre comprend √©galement la fonction de rupture de la connexion, si les deux n≈ìuds peuvent voir l'arbitre, mais ne se voient pas.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cette option doit √™tre utilis√©e conjointement avec une m√©thode indirecte de dissociation, telle qu'une horloge de surveillance mat√©rielle, qui est configur√©e pour √©teindre la machine si elle perd la connexion avec son n≈ìud partenaire et l'arbitre. </font><font style="vertical-align: inherit;">Ainsi, le survivant peut supposer en toute confiance que son n≈ìud partenaire sera dans un √©tat s√ªr apr√®s l'expiration du temporisateur de surveillance du mat√©riel. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La diff√©rence pratique entre l'arbitre et le troisi√®me n≈ìud est que l'arbitre n√©cessite beaucoup moins de ressources pour son travail et, potentiellement, peut servir plus d'un cluster.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Option 3 - Le facteur humain</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La derni√®re approche consiste pour les survivants √† continuer d'ex√©cuter tous les services qu'ils ont d√©j√† effectu√©s, mais pas √† en commencer de nouveaux, jusqu'√† ce que le probl√®me soit r√©solu lui-m√™me (restauration du r√©seau, red√©marrage du n≈ìud) ou que la personne n'assume pas la responsabilit√© de confirmer manuellement que l'autre c√¥t√© est mort.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Option bonus</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ai-je mentionn√© que vous pouvez ajouter un troisi√®me n≈ìud?</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Deux racks</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour les besoins de l'argument, imaginons que je vous ai convaincu des m√©rites du troisi√®me n≈ìud, maintenant nous devons consid√©rer l'emplacement physique des n≈ìuds. S'ils sont plac√©s (et aliment√©s) dans le m√™me rack, cela repr√©sente √©galement SPoF, et celui qui ne peut pas √™tre r√©solu en ajoutant un deuxi√®me rack. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si cela est surprenant, r√©fl√©chissez √† ce qui se passera si le rack √† deux n≈ìuds tombe en panne et comment le n≈ìud survivant fera la distinction entre ce cas et la d√©faillance du r√©seau. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
R√©ponse courte: ce n'est pas possible, et l√† encore nous traitons tous les probl√®mes dans le cas de deux n≈ìuds. Ou survivant:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ignore le quorum et tente de mani√®re incorrecte de lancer la r√©cup√©ration pendant les pannes de r√©seau (la possibilit√© de terminer la s√©paration est une histoire distincte et d√©pend si les PDU sont impliqu√©es et si elles partagent la puissance de l'un des racks), ou</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">respecte le quorum et se d√©connecte pr√©matur√©ment lorsque son n≈ìud partenaire tombe en panne</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans tous les cas, deux racks ne valent pas mieux qu'un, et les n≈ìuds doivent soit recevoir des alimentations ind√©pendantes, soit √™tre r√©partis sur trois (ou plus, selon le nombre de n≈ìuds que vous poss√©dez).</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Deux centres de donn√©es</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√Ä ce stade, les lecteurs qui ne sont plus oppos√©s au risque peuvent envisager de se remettre d'un accident. Que se passe-t-il lorsqu'un ast√©ro√Øde entre dans un centre de donn√©es unique avec nos trois n≈ìuds r√©partis sur trois racks diff√©rents? √âvidemment, Bad Things, mais selon vos besoins, l'ajout d'un deuxi√®me centre de donn√©es peut ne pas suffire.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si tout est fait correctement, le deuxi√®me centre de donn√©es vous fournit (et cela est raisonnable) une copie √† jour et coh√©rente de vos services et de leurs donn√©es. Cependant, comme dans les sc√©narios avec deux n≈ìuds et deux racks, le syst√®me ne dispose pas de suffisamment d'informations pour garantir une disponibilit√© maximale et √©viter les dommages (ou la divergence des ensembles de donn√©es). M√™me s'il y a trois n≈ìuds (ou racks), leur distribution uniquement dans deux centres de donn√©es laisse le syst√®me incapable de prendre de mani√®re fiable la bonne d√©cision en cas (maintenant beaucoup plus probable) d'un √©v√©nement que les deux parties ne peuvent pas se connecter.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cela ne signifie pas qu'une solution avec deux centres de donn√©es ne convient jamais. </font><font style="vertical-align: inherit;">Les entreprises veulent souvent que les gens soient au courant avant de prendre une mesure exceptionnelle lors du passage √† un centre de donn√©es de sauvegarde. </font><font style="vertical-align: inherit;">Gardez √† l'esprit que si vous souhaitez automatiser l'√©chec, vous aurez besoin d'un troisi√®me centre de donn√©es pour que le quorum soit logique (directement ou via un arbitre), ou vous trouverez un moyen de d√©sactiver de mani√®re fiable l'ensemble du centre de donn√©es.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr494252/index.html">Impression 3D: trois maisons et demie en quatre jours</a></li>
<li><a href="../fr494254/index.html">OpenShift en tant que version d'entreprise de Kubernetes</a></li>
<li><a href="../fr494256/index.html">Qui d'autre a besoin de s√©l√©nium? Quelqu'un utilise-t-il BDD en 2020? Apprentissage automatique chez Selenium</a></li>
<li><a href="../fr494258/index.html">Mat√©riaux ouverts du Centre des sciences informatiques, partie 1</a></li>
<li><a href="../fr494260/index.html">200 To Elasticsearch Cluster +</a></li>
<li><a href="../fr494266/index.html">√Ä propos d'Udalenka, du RDP non prot√©g√© et de l'augmentation du nombre de serveurs disponibles sur Internet</a></li>
<li><a href="../fr494270/index.html">Antiquit√©s: travail √† distance sur des appareils de 1998</a></li>
<li><a href="../fr494272/index.html">Cr√©ation d'un plan d'affaires de d√©marrage informatique: structure d√©taill√©e √©tape par √©tape</a></li>
<li><a href="../fr494274/index.html">Syst√®me d'autotest e-commerce</a></li>
<li><a href="../fr494278/index.html">EF Core + Oracle: comment rendre les migrations idempotentes</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>