<!doctype html>
<html class="no-js" lang="ar">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐จ๐ฟโ๐ซ ๐๏ธ ๐คด๐ผ ุฎูุงุฑุฒููุงุช ุงููุนุงูุฌุฉ ุงูุณุฑูุนุฉ ูุณูุณูุฉ HTTP ๐ฐ๐พ ๐ง๐ฟ ๐ด</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ุธูุฑ ุถุบุท ุงูุฑุคูุณ ุงูููุงุณูุฉ ูู HTTP / 2 ุ ููู ูุต URI ู Cookie ู User-Agent ูููู ุฃู ูุธู ุนุดุฑุงุช ุงูููููุจุงูุชุงุช ููุชุทูุจ ุงูุชุฑููุฒ ูุงูุจุญุซ ูููุงุฑูุฉ ุงูุณูุงุณู ุงููุฑุนูุฉ. ุช...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>ุฎูุงุฑุฒููุงุช ุงููุนุงูุฌุฉ ุงูุณุฑูุนุฉ ูุณูุณูุฉ HTTP</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/oleg-bunin/blog/493242/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุธูุฑ ุถุบุท ุงูุฑุคูุณ ุงูููุงุณูุฉ ูู HTTP / 2 ุ ููู ูุต URI ู Cookie ู User-Agent ูููู ุฃู ูุธู ุนุดุฑุงุช ุงูููููุจุงูุชุงุช ููุชุทูุจ ุงูุชุฑููุฒ ูุงูุจุญุซ ูููุงุฑูุฉ ุงูุณูุงุณู ุงููุฑุนูุฉ. </font><font style="vertical-align: inherit;">ุชุตุจุญ ุงููููุฉ ุญุงุณูุฉ ุฅุฐุง ูุงู ูุญูู HTTP ูุญุชุงุฌ ุฅูู ูุนุงูุฌุฉ ุญุฑูุฉ ุงููุฑูุฑ ุงูุถุงุฑุฉ ุงูุถุฎูุฉ. </font><font style="vertical-align: inherit;">ุชููุฑ ุงูููุชุจุงุช ุงูููุงุณูุฉ ุฃุฏูุงุช ูุนุงูุฌุฉ ุณูุณูุฉ ูุงุณุนุฉ ุงููุทุงู ุ ููู ุณูุงุณู HTTP ููุง ุชูุงุตูููุง ุงูุฎุงุตุฉ. </font><font style="vertical-align: inherit;">ููุฐู ุงูุฎุตูุตูุฉ ุชู ุชุทููุฑ ูุญูู Tempesta FW HTTP. </font><font style="vertical-align: inherit;">ุฃุฏุงุคูุง ุฃุนูู ุจุนุฏุฉ ูุฑุงุช ููุงุฑูุฉ ุจุงูุญููู ุงูุญุฏูุซุฉ ููุชูุญุฉ ุงููุตุฏุฑ ููุชุฌุงูุฒ ุฃุณุฑุนูุง.</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/GcAJF4648JI" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃููุณูุฏุฑ ูุฑูุฒุงูููุณูู</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฑูุฒุงูููุณูู</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) ูุคุณุณ ููููุฏุณ ุงููุธุงู Tempesta Technologies ุ ุฎุจูุฑ ูู ุงูุญูุณุจุฉ ุนุงููุฉ ุงูุฃุฏุงุก ูู Linux / x86-64. ุณูุชุญุฏุซ ุฃููุณูุฏุฑ ุนู ุฎุตุงุฆุต ูููู ุณูุงุณู HTTP ุ ููุดุฑุญ ุณุจุจ ุนุฏู ููุงุกูุฉ ุงูููุชุจุงุช ุงูููุงุณูุฉ ููุนุงูุฌุชูุง ุ ูุชูุฏูู ุญู Tempesta FW. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชุญุช ุงููุทุน: ููู ูุญูู HTTP Flood ูุญูู HTTP ุงูุฎุงุต ุจู ุฅูู ุนูู ุงูุฒุฌุงุฌุฉ ุ ูุดุงูู x86-64 ูุน ุงูุฃุฎุทุงุก ูู ุงููุฑูุน ุ ุงูุชุฎุฒูู ุงููุคูุช ูููุงุฏ ุงูุฐุงูุฑุฉ ูู ููุงู ูุญูู HTTP ุงููููุฐุฌู ุ ููุงุฑูุฉ FSM ูุน ุงูููุฒุงุช ุงููุจุงุดุฑุฉ ุ ุงูุชุญุณูู ูู ุฏูู ูุฌูุณ ุงูุชุนุงูู ุงูุฎููุฌู ุ ุงูุชุฌูู ุงูุชููุงุฆู ุ strspn () - ู strcasecmp () - ูุซู ุงูุฎูุงุฑุฒููุงุช ูุณูุงุณู HTTP ู SSE ู AVX2 ููุฌูุงุช ุญูู ุงูุชุตููุฉ ุจุงุณุชุฎุฏุงู AVX2.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู Tempesta Technologies ูููู ุจุชุทููุฑ ุจุฑุงูุฌ ูุฎุตุตุฉ: ูุญู ูุชุฎุตุตูู ูู ุงููุฌุงูุงุช ุงููุนูุฏุฉ ุงููุชุนููุฉ ุจุงูุฃุฏุงุก ุงูุนุงูู. </font><font style="vertical-align: inherit;">ูุญู ูุฎูุฑูู ุจุดูู ุฎุงุต ุจุชุทููุฑ ุฌููุฑ ุงูุฅุตุฏุงุฑ ุงูุฃูู ูู WAF. </font><font style="vertical-align: inherit;">ุฌุฏุงุฑ ุญูุงูุฉ ุชุทุจูู ุงูููุจ (WAF) ูู ูููู HTTP: ููู ูุชุนุงูู ูุน ุชุญููู ุนููู ููุบุงูุฉ ูุญุฑูุฉ ูุฑูุฑ HTTP ูููุฌูุงุช (ุงูููุจ ู DDoS). </font><font style="vertical-align: inherit;">ูุชุจูุง ุงูุฌููุฑ ุงูุฃูู ูุฐูู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุงูุฅุถุงูุฉ ุฅูู ุงูุงุณุชุดุงุฑุงุช ุ ูููู ุจุชุทููุฑ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tempesta FW</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - ูุฐุง ูู ูุฑุงูุจ ุชุณููู ุงูุชุทุจููุงุช (ADC). </font><font style="vertical-align: inherit;">ุณูุชุญุฏุซ ุนูู.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฑุงูุจ ุชุณููู ุงูุชุทุจููุงุช</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฑุงูุจ ุชุณููู ุงูุชุทุจููุงุช ูู ูููู HTTP ูุน ูุธุงุฆู ูุญุณูุฉ. </font><font style="vertical-align: inherit;">ููู ุณุฃุชุญุฏุซ ุนู ููุฒุฉ ุชุชุนูู ุจุงูุฃูุงู - ุญูู ุชุตููุฉ DDoS ููุฌูุงุช ุงูููุจ. </font><font style="vertical-align: inherit;">ุณุฃุฐูุฑ ุฃูุถูุง ุงููููุฏ ุ ูุณุฃุนุฑุถ ุงูุนูู ูุงููุธุงุฆู ูุน ุฃูุซูุฉ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/mg/gf/tw/mggftw9mux_ycaxzjbfqe6hpdc0.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุฏุงุก</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชู ุจูุงุก Tempesta FW ูู ููุงุฉ Linux TCP / IP Stack. </font><font style="vertical-align: inherit;">ุจูุถู ูุฐุง ูุนุฏุฏ ูู ุงูุชุญุณููุงุช ุงูุฃุฎุฑู ุ ููู ุณุฑูุนุฉ ุฌุฏูุง - ูููููุง ูุนุงูุฌุฉ 1.8 ููููู ุทูุจ ูู ุงูุซุงููุฉ ุนูู ุฃุฌูุฒุฉ ุฑุฎูุตุฉ. </font><font style="vertical-align: inherit;">ูุฐุง ุฃุณุฑุน 3 ูุฑุงุช ูู Nginx ูู ุงูุญูู ุงูุนููู ููู ุณุฑูุน ุฃูุถูุง ุนูุฏ ููุงุฑูุชู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจููุฌ ุชุฌุงูุฒ ุงูููุงุฉ. </font></font></strong><br>
<br>
<img src="https://habrastorage.org/webt/te/md/pe/temdpec1gcgnm98ktgwr4gewn-8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุนูู ุนุฏุฏ ุตุบูุฑ ูู ุงูููู ุ ูุธูุฑ ุฃุฏุงุก ูุดุงุจููุง ููุดุฑูุน Seastar ุ ูุงูุฐู ูุณุชุฎุฏู ูู ScyllaDB (ุงูููุชูุจ ูู DPDK).</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุดููุฉ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุฏ ุงููุดุฑูุน ุนูุฏูุง ุจุฏุฃูุง ุงูุนูู ุนูู PT AF - ูู ุนุงู 2013. </font><font style="vertical-align: inherit;">ุงุณุชูุฏ WAF ูุฐุง ุฅูู ุฃุญุฏ ุจุฑุงูุฌ ุชุณุฑูุน HTTP ููุชูุญุฉ ุงููุตุฏุฑ ุงูุดุงุฆุนุฉ. </font><font style="vertical-align: inherit;">ุชุนุฏ Nginx ุฃู HAProxy ุฃู Varnish ุฃู Apache Traffic ูุณุฑุนุงุช HTTP ุฌูุฏุฉ: ููู ุชูุฏู ูุญุชูู ุฌูุฏูุง ูุฐุงูุฑุฉ ุชุฎุฒูู ูุคูุช ูุชุนุฏูููุง ุ ูููู ูู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชู ุชุตููู</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฃู ูููุง </font><strong><font style="vertical-align: inherit;">ููุนุงูุฌุฉ ุญุฑูุฉ ุงููุฑูุฑ ุงูุถุฎูุฉ ูุงูุชุตููุฉ</font></strong><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐูู ุ ุงุนุชูุฏูุง ุฃูู ุฅุฐุง ูุงู ููุงู ุฌุฏุงุฑ ุญูุงูุฉ ุนูู ูุณุชูู ุงูุดุจูุฉ ุ ูููุงุฐุง ูุง ุชุณุชูุฑ ูุฐู ุงูููุฑุฉ ูุชูุฏูุฌ ูู ููุฏุณ TCP / IP ูุฌุฏุงุฑ ุญูุงูุฉ ุนูู ูุณุชูู ุงูุชุทุจููุ </font><font style="vertical-align: inherit;">ูู ุงููุงูุน ุ ุชุจูู ุฃู Tempesta FW - </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฒูุฌ ูู ูุณุฑุน HTTP ูุฌุฏุงุฑ ุงูุญูุงูุฉ</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงุญุธุฉ: ุณูุชู ุงุณุชุฎุฏุงู Nginx ููุซุงู ูู ุงูุชูุฑูุฑ ูุฃูู ุฎุงุฏู ููุจ ุจุณูุท ูุดุงุฆุน. </font><font style="vertical-align: inherit;">ุจุฏูุงู ูู ุฐูู ุ ูุฏ ูููู ููุงู ุฃู ุฎุงุฏู HTTP ููุชูุญ ุงููุตุฏุฑ ุขุฎุฑ.</font></font></em><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HTTP</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููู ูุธุฑุฉ ุนูู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุทูุจ HTTP ุงูุฎุงุต</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจูุง </font><font style="vertical-align: inherit;">(HTTP / (1ุ ~ 2)) </font></font><br>
<br>
<img src="https://habrastorage.org/webt/_o/3z/tq/_o3ztqvtwrv-7epdryhdztg8wsq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููููุง ุงูุญุตูู ุนูู URI ูุจูุฑ ุฌุฏูุง. </font><font style="vertical-align: inherit;">ูุชู ุชูููุฒ </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููุงุตู</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงููููุฉ ูู ููุช ุชุญููู HTTP </font><font style="vertical-align: inherit;">ุจุงูุฎุท ุงูุนุฑูุถ ุงูุฃุญูุฑ </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุณุฃุณูุท ุงูุถูุก ุนูู ุงูููุฒุงุช: ุณูุงุณู ูุจูุฑุฉ ูู ุนุฏุฉ ููููุจุงูุช ุ ุจุงูุฅุถุงูุฉ ุฅูู ูุญุฏุฏุงุช ูุฎุชููุฉ ุ ุนูู ุณุจูู ุงููุซุงู ุ "ููุงุตู ููููุทุฉ" ุฅุถุงููุฉ ูุญุชุงุฌ ุฅูู ุชุญููููุง ุ ุฃู ุงูุชุณูุณู "\ r \ n". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุง ูุฌุจ ุฃู ููุงู ุงููููู ุนู HTTP / 2.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฒุงุช HTTP / 2</font></font></h3><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HTTP / 2 ุนุจุงุฑุฉ ุนู ูุฒูุฌ ูู ุงูุณูุงุณู ูุงูุจูุงูุงุช ุงูุซูุงุฆูุฉ</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ูุชุนูู ูุฐุง ุงููุฒูุฌ ุจุชุญุณูู ุนุฑุถ ุงููุทุงู ุงูุชุฑุฏุฏู ููุงุชุตุงู ุจุฏูุงู ูู ุชูููุฑ ููุงุฑุฏ ุงูุฎุงุฏู. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณุชุฎุฏู HTTP / 2 ูู HPACK ุฌุฏููุงู ุฏููุงูููููุง</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ูู ูุชู ุชุญุณูู ุงูุทูุจ ุงูุฃูู ูู ุงูุนููู ุ ููู ููุณ ูู ุงูุฌุฏูู. ูุฌุจ ุนููู ุชุญููููุง ุญุชู ูุชู ุฅุถุงูุชูุง ุฅูู ุงูุฌุฏูู. ุฅุฐุง ูุตู ุฅููู HTTP / 2 DDoS ุ ูุณุชููู ูุฐู ูู ุงูุญุงูุฉ. ูู ุงูุญุงูุฉ ุงูุนุงุฏูุฉ ุ ูุนุฏ HTTP / 2 ุจุฑูุชูููููุง ุซูุงุฆููุง ุ ููููู ูุง ุฒูุช ุจุญุงุฌุฉ ุฅูู ุชุญููู ุงููุต: ุฃุณูุงุก ุฑุคูุณ ุงููุตูุต ูุงูุจูุงูุงุช. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุฑููุฒ ููููุงู</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูุฐุง ุชุฑููุฒ ุจุณูุท ุ ููู Huffman ูุตุนุจ ุจุฑูุฌุชู ุจุณุฑุนุฉ ููุถุบุท: ุชุฑููุฒ Huffman ูุชุฎุทู ุญุฏูุฏ ุงูุจุงูุช ุ ูุง ููููู ุงุณุชุฎุฏุงู ููุญูุงุช ุงููุชุฌู ูุชุญุชุงุฌ ุฅูู ุชุฌุงูุฒ ูุญุฏุงุช ุงูุจุงูุช. </font><font style="vertical-align: inherit;">ูู ุชุชููู ูู ูุนุงูุฌุฉ ุงูุจูุงูุงุช ุจุณุฑุนุฉ ูู 32 ุฃู 16 ุจุงูุช. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู ุฃู ุชููู ูููุงุช ุชุนุฑูู ุงูุงุฑุชุจุงุท ุ ูููู ุงููุณุชุฎุฏู ุ ุงูููุญูู ุ ุนูุงููู URI ูุจูุฑุฉ ุฌุฏูุง</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ุฃููุงู ุ ูู ุจุฅุฒุงูุฉ Huffman ุ ุซู ุฃุฑุณูู ุฅูู ูุญูู HTTP ุงูุนุงุฏู ุ ููุง ูู ุงูุญุงู ูู HTTP / 1. </font><font style="vertical-align: inherit;">ุนูู ุงูุฑุบู ูู ุฃู RFC ูุณูุญ ุจู ุ ุฅูุง ุฃูู ูุง ููุตู ุจุถุบุท ูููุงุช ุชุนุฑูู ุงูุงุฑุชุจุงุท ุ ูุฃู ูุฐู ุจูุงูุงุช ุณุฑูุฉ - ูุง ูุฌุจ ุนููู ุฅุนุทุงุก ุงูููุงุฌู ูุนูููุงุช ุญูู ุญุฌููุง. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุนุงูุฌุฉ HTTP ุจุทูุฆุฉ</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ุชููู ูุงูุฉ ุฎูุงุฏู HTTP ุฃููุงู ุจูู ุชุดููุฑ HTTP / 2 ุซู ุฅุฑุณุงู ูุฐู ุงูุฃุณุทุฑ ุฅูู ูุญูู HTTP / 1 ุงูุฐู ูุณุชุฎุฏูู HTTP / 1 ุจุงููุนู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุง ูู ุงููุดููุฉ ูู ุชุญููู HTTP / 1ุ</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุญุชุงุฌ ุฅูู ุจุฑูุฌุฉ ุฌูุงุฒ ุงูุฏููุฉ ุจุณุฑุนุฉ.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุญุชุงุฌ ุฅูู ูุนุงูุฌุฉ ุงูุฎุทูุท ุงููุชุชุงููุฉ ุจุณุฑุนุฉ.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชุณุชูุฏู ุญุฑูุฉ ุงููุฑูุฑ ุงูุถุงุฑุฉ ุงูุฌุฒุก ุงูุฃุจุทุฃ (ุงูุฃุถุนู) ูู ุงูุนูููุฉ. </font><font style="vertical-align: inherit;">ูุฐูู ุ ุฅุฐุง ุฃุฑุฏูุง ุนูู ูุฑุดุญ ุ ูุฌุจ ุนูููุง ุงูุงูุชุจุงู ุฅูู ุงูุฃุฌุฒุงุก ุงูุจุทูุฆุฉ ุญุชู ุชุนูู ุฃูุถูุง ุจุณุฑุนุฉ.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููู Nginx ุงูุดุฎุตู</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฏุนููุง ูููู ูุธุฑุฉ ุนูู ููู ุชุนุฑูู nginx ุชุญุช ุชุฏูู HTTP. </font><font style="vertical-align: inherit;">ูู ุจุชุนุทูู ุณุฌู ุงููุตูู ุจุญูุซ ูุง ูุชุจุงุทุฃ ูุธุงู ุงููููุงุช. </font><font style="vertical-align: inherit;">ุนูุฏ ุทูุจ ุตูุญุฉ ููุฑุณ ุนุงุฏูุฉ ุ ูุฑุชูุน ุงููุญูู ูู ุงูุฃุนูู.</font></font><br>
<div class="scrollable-table"><table>
<tbody>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูช</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุณู ุงูุฑูุฒ</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1ุ5719</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ngx_http_parse_header_line</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1ุ0303</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ngx_vslprintf</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0.6401</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">memcpy</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0.5807</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">recv</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0.5156</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ngx_linux_sendfile_chain</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0.4990</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ngx_http_limit_req_handler</font></font></td>
</tr>
</tbody>
</table></div><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุณุงุฑ - "ููู ุชุนุฑูู ูุณุทุญ". </font><font style="vertical-align: inherit;">ููู ุงููุซูุฑ ููุงูุชูุงู ุฃู ุงูููุงู ุงูุฃูุซุฑ ุณุฎููุฉ ููู ููุณ ุฃุซูู ุจูุซูุฑ ูู ุงูุชุงูู ุ ูุจุนุฏ ุฐูู ููุญุฏุฑ ุงูููู ุงูุดุฎุตู ุจุณูุงุณุฉ. </font><font style="vertical-align: inherit;">ูุฐุง ูุนูู ุ ุนูู ุณุจูู ุงููุซุงู ุ ุฃู ุชุญุณูู ุงููุธููุฉ ุงูุฃููู ูุฑุชูู ูู ูุณุงุนุฏ ุนูู ุชุญุณูู ุงูุฃุฏุงุก ุจุดูู ูุจูุฑ. </font><font style="vertical-align: inherit;">ูุฐุง ูู ุงูุณุจุจ ูู ุฃููุง ูู ูุญุณู ููุณ Nginx ุ ููููุง ูููุง ุจูุดุฑูุน ุฌุฏูุฏ ุณูุญุณู ุฃุฏุงุก ุงูุฐูู ุงููุงูู ููููู ุงูุดุฎุตู.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููู ูุชู ุชุฑููุฒ ููุฒุนู HTTP ุงูุนุงุฏููู</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุนุงุฏุฉ ูุฏููุง ุญููุฉ ( </font></font><code>while</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) ุชุนูู ุนูู ุทูู ุงูุฎุท ุ ููุชุบูุฑูู: ุงูุญุงูุฉ ( </font></font><code>state</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) ูุงูุจูุงูุงุช ุงูุญุงููุฉ ( </font></font><code>str_ptr</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฏุฎู ุงูุฏูุฑุฉ (1) ููููู ูุธุฑุฉ ุนูู ุงูุญุงูุฉ ุงูุญุงููุฉ (ุงูุชุญูู ูู ุงูุญุงูุฉ). ููุฑ ุฅูู ุงูุจูุงูุงุช ุงููุณุชููุฉ (ุงูุฑูุฒ </font></font><code><em>'b'</em></code><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููููุฐ ุจุนุถ ุงูููุทู. ููุชูู ุฅูู ุงูุญุงูุฉ ุงูุซุงููุฉ (2). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/hi/z7/s2/hiz7s2e3yw5bpqqz-qbir5hbteq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุชูู ุฅูู ุงูููุงูุฉ </font></font><code>switch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(3) - ููุฐุง ูู ุงูุงูุชูุงู ุงูุซุงูู ุจุงููุณุจุฉ ูุจุฏุงูุฉ ุงูููุฏ ุงูุฎุงุต ุจูุง ุ ูุฑุจูุง ุงููุดู ุงูุซุงูู ูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ููุฅุฑุดุงุฏุงุช. ุซู ูุฐูุจ ุฅูู ุงูุจุฏุงูุฉ </font></font><code>while</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(4) ุ ูุฃูู ุงูุญุฑู ุงูุชุงูู ...... </font></font><br>
<br>
<img src="https://habrastorage.org/webt/gk/zs/17/gkzs17hdxtyfcaife8j1pms7wbi.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุจุญุซ ูุฑุฉ ุฃุฎุฑู ุนู ุงูุญุงูุฉ ูู ุงูุชุนูููุงุช ุจุงูุฏุงุฎู </font></font><code>case 2:</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุนูุฏูุง ุชู ุชุนููู </font></font><code>state</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููุฉ </font><font style="vertical-align: inherit;">ูููุชุบูุฑ ุจุงููุนู</font></font><code>2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูููููุง ููุท ุงูุฐูุงุจ ุฅูู ุงูุชุนูููุงุช ุงูุชุงููุฉ. </font><font style="vertical-align: inherit;">ูููู ุจุฏูุงู ูู ุฐูู ุ ุตุนุฏูุง ูุฑุฉ ุฃุฎุฑู ููุฒููุง ูุฑุฉ ุฃุฎุฑู. </font><font style="vertical-align: inherit;">ูุญู "ููุทุน ุงูุฏูุงุฆุฑ" ุจุงูููุฏ ุจุฏูุงู ูู ุงููุฒูู. </font><font style="vertical-align: inherit;">ูุง ูููู ุงููุญูููู ุงูุนุงุฏููู ุ ุนูู ุณุจูู ุงููุซุงู ุ Ragel ุจุฅูุดุงุก ูุญูู ุจุชุญููุงุช ูุจุงุดุฑุฉ.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/mc/ba/3w/mcba3wgxqkflqjvq1mxytcy_kwo.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nginx HTTP Parser</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุถุน ูููุงุช ุญูู ูุญูู nginx ูุจูุฆุชู. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุนูู Nginx ูุน ูุงุฌูุฉ ุจุฑูุฌุฉ ุชุทุจููุงุช ุงูููุจุณ ุงูุนุงุฏูุฉ</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - ูุชู ูุณุฎ ุงูุจูุงูุงุช ุงูุชู ุชูุชูู ุฅูู ุงููุญูู ุฅูู ูุณุงุญุฉ ุงููุณุชุฎุฏู. </font><font style="vertical-align: inherit;">ููุชูุฌุฉ ูุฐูู ุ ูุฏููุง ุฌุฒุก ูุจูุฑ ูู ุงูุจูุงูุงุช ุงูุชู ูุจุญุซ ูููุง ุนูุง ูุญุชุงุฌ ุฅููู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุณุชุฎุฏู Nginx ุฎูุงุฑุฒููุฉ ุชุนูู ูู ูุณุงุฑูู: ุฃููุงู ูุจุญุซ ุนู ุงูุทูู ุ ุซู ูุชุญูู. </font><font style="vertical-align: inherit;">ูู ุงูุฎุทูุฉ ุงูุฃููู ุ ููุณุญ ุงูุณูุณูุฉ ุจุญุซูุง ุนู ุงูุฑููุฒ ุงููููุฒุฉ ุ ููุจุญุซ ุนู ุงูุฑูุฒ ุงูุฃูู ("ุงูุชุฌุฑุจุฉ"). </font><font style="vertical-align: inherit;">ูู ุงูุซุงููุฉ ุ ูุชู ุงูุชุญูู ูู ููุงูุฉ ุงูุทูุจ ( </font></font><code>Get</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) ููุจุฏุฃ </font></font><code>switch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ููููุง ูุญุฌู ุงูุฑูุฒ ุงููููุฒ.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">for</span> (p = b-&gt;pos; p &lt; b-&gt;last; p++) {<font></font>
    ...<font></font>
    <span class="hljs-keyword">switch</span> (state) {<font></font>
    ...<font></font>
    <span class="hljs-keyword">case</span> sw_method:
        <span class="hljs-keyword">if</span> (ch == <span class="hljs-string">' '</span>) {<font></font>
            m = r-&gt;request_start;<font></font>
            <span class="hljs-keyword">switch</span> (p - m) {         <span class="hljs-comment">// switch on token length!</span>
            <span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:
                <span class="hljs-keyword">if</span> (ngx_str3_cmp(m, <span class="hljs-string">'G'</span>, <span class="hljs-string">'E'</span>, <span class="hljs-string">'T'</span>, <span class="hljs-string">' '</span>)) {<font></font>
                ...<font></font>
            }<font></font>
            <span class="hljs-keyword">if</span> ((ch &lt; <span class="hljs-string">'A'</span> || ch &gt; <span class="hljs-string">'Z'</span>) &amp;&amp; ch != <span class="hljs-string">'_'</span> &amp;&amp; ch != <span class="hljs-string">'-'</span>)
                <span class="hljs-keyword">return</span> NGX_HTTP_PARSE_INVALID_METHOD;
            <span class="hljs-keyword">break</span>;<font></font>
    ...</code></pre><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Get" ููุฌูุฏ ุฏุงุฆููุง ูู ููุณ ูุฌููุนุฉ ุงูุจูุงูุงุช</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ูุนูู Tempesta FW ูุน ูุณุฎุฉ ุตูุฑูุฉ. </font><font style="vertical-align: inherit;">ูุฐุง ูุนูู ุฃู ุงูุจูุงูุงุช ูููู ุฃู ุชุฃุชู ุจุญุฌู ุนุดูุงุฆู ุชูุงููุง: 1 โโุจุงูุช ุฃู 1000 ุจุงูุช ููู ููููุง. </font><font style="vertical-align: inherit;">ูุฐู "ุงูุขููุฉ" ูุง ุชูุงุณุจูุง. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฏุนููุง ูุฑู ููู ูุนูู </font></font><code>switch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุฏูู ูุฌูุณ ุงูุชุนุงูู ุงูุฎููุฌู.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฌูุณ ุงูุชุนุงูู ุงูุฎููุฌู</font></font></h2><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฌุฏูู ุงูุจุญุซ</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ุนูู ุงููุณุงุฑ ูุซุงู ูููุฐุฌู ุนูู ุงูุชุนุฏุงุฏ: ุงุจุฏุฃ ุจู 0 ุ ุซู ุงูุชุณููุงุช ุงููุชุชุงููุฉ ุ ู 26 ุซูุงุจุช ุ ุซู ุจุนุถ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงูุชู ุชุนุงูุฌูุง ูููุง. ุนูู ุงููููู ูู ุงูุฑูุฒ ุงูุฐู ูููุฏู ุงููุชุฑุฌู. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ac/1n/hh/ac1nhhz9jqe87hdqb6bxfv541vu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃููุงู ุ ูุงุฑู ุงููุชุบูุฑ </font></font><code>state</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุณุฌู EAX ุจุงูุซุงุจุช. ุจุนุฏ ุฐูู ุ ููุฏู ุฌููุน ุงูุชุณููุงุช ูู ุดูู ุตููู ูุชุณูุณู ูู ูุคุดุฑุงุช 8 ุจุงูุช (ุฌุฏูู ุงูุจุญุซ). ูู ูุฐู ุงูุชุนูููุงุช ูููู ุจุชูุฑูุฑ ุงูุฅุฒุงุญุฉ ูู ูุฐุง ุงููุตูููุฉ - ููู ุนุจุงุฑุฉ ุนู ุนูููุฉ ูุฒุฏูุฌุฉ ููุฅุดุงุฑุฉ ูู ุงููุคุดุฑุงุช. ุฃุณูู ุงููููู ูู ุงูุฑูุฒ ุงูุฐู ุจุฏูููุง ุฅููู ูู ูุฐุง ุงูุฌุฏูู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงุชุถุญ ุฃู ุงูุฅุดุงุฑุฉ ุงููุฒุฏูุฌุฉ ููุฐุงูุฑุฉ: ุฅุฐุง ุชููููุง ุจูุงูุงุช ุณุฑูุฉ ุ ูุนูุฏุฆุฐู ุจุงูุจุงูุช ูุฌุฏ ุงูุนููุงู ูู ุงููุตูููุฉ ูููุชูู ุฅูู ูุฐุง ุงููุคุดุฑ. ูู ุงูููู ุฃู ุชุนุฑู ุฃูู ูู ุงูุญูุงุฉ ูุง ูุฒุงู ุฃุณูุฃ ููุง ูู ุนููู ูู ุงููุซุงู - ุจุงููุณุจุฉ ูุฌุฏูู ุงูุจุญุซ ุงูุฐู </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;">ูููุฏู</font></a><font style="vertical-align: inherit;"> ุงููุชุฑุฌู</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู ุงูุฑูุฒ ุฃูุซุฑ ุชุนููุฏูุง ูู ุญุงูุฉ ูุฌูุฏ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุต ุจุฑูุฌู</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุฌูู Spectre. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุญุซ ุซูุงุฆู</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ุงูุญุงูุฉ ุงูุชุงููุฉ </font></font><code>switch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุณุช ูุน ุงูุซูุงุจุช ุงููุชุณูุณูุฉ ุ ูููู ูุน ุงูุซูุงุจุช ุงูุชุนุณููุฉ. ุงูุฑูุฒ ูู ููุณู ุ ูููู ุงูุขู ูุง ูููู ูุฏูู ูุฌูุณ ุงูุชุนุงูู ุงูุฎููุฌู ุชุฌููุน ูุซู ูุฐุง ุงูุตููู ุงููุจูุฑ ูุงุณุชุฎุฏุงู ุงูุซูุงุจุช ูุซู ููุฑุณ ุงูุตููู. ููุชูู ุฅูู ุงูุจุญุซ ุงูุซูุงุฆู. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/as/mo/7p/asmo7pb4lxsv7pchnafv-qjz7u4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุนูู ุงููููู ูุฑู ููุงุฑูุฉ ุชุณูุณููุฉ ุ ูุงูุงูุชูุงู ุฅูู ุงูุนููุงู ูุงุณุชูุฑุงุฑ ุงูููุงุฑูุฉ - ุงูุจุญุซ ุงูุซูุงุฆู ุนู ุทุฑูู ุงูููุฏ. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nginx HTTP ูุญูู.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฏุนููุง ูุฑู ูุง ูู nginx ุขูุฉ ุงูุฏููุฉ. ูุญุชูู ุนูู 9 ููููุจุงูุช ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ - ููุฐุง ุฃูู ุจุซูุงุซ ูุฑุงุช ูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ูููุณุชูู ุงูุฃูู ุนูู ุงูุฌูุงุฒ ุงูุฐู ุชู ุฅุทูุงู ุงููุนุงููุฑ ุนููู (ููุง ูู ุงูุญุงู ูู ูุนุธู ูุนุงูุฌุงุช x86-64).</font></font><br>
<br>
<pre><code class="bash hljs">$ nm -S /opt/nginx-1.11.5/sbin/nginx<font></font>
| grep http_parse | cut -d<span class="hljs-string">' '</span> -f 2<font></font>
| perl -le <span class="hljs-string">'$a += hex($_) while (&lt;&gt;); print $a'</span><font></font>
9220<font></font>
<font></font>
$ getconf LEVEL1_ICACHE_SIZE<font></font>
32768<font></font>
<font></font>
$ grep -c <span class="hljs-string">'case sw_'</span> src/http/ngx_http_parse.c<font></font>
84</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุญูู ุฑุฃุณ nginx </font></font><code>ngx_http_parse_header_line ()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุฑูุฒ ูููุฒ ุจุณูุท. </font><font style="vertical-align: inherit;">ูุง ุชูุนู ุดูุฆูุง ูุน ููู ุงูุฑุคูุณ ูุฃุณูุงุฆูุง ุ ูููููุง ุจุจุณุงุทุฉ ุชุถุน ุงูุฑููุฒ ุงููููุฒุฉ ูุฑุคูุณ HTTP ูู ุงูุชุฌุฒุฆุฉ. </font><font style="vertical-align: inherit;">ุฅุฐุง ููุช ุจุญุงุฌุฉ ุฅูู ุฃู ูููุฉ ุฑุฃุณ ุ ูุงูุญุต ุฌุฏูู ุงูุฑุฃุณ ููุฑุฑ ุงูุชุญููู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฌุจ ุนูููุง </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุญูู ุจุฏูุฉ ูู ุฃุณูุงุก ูููู ุงูุฑุคูุณ</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฃุณุจุงุจ ุฃูููุฉ </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></strong><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tempesta FW: ุงูุชุญูู ูู ุตุญุฉ ุณูุณูุฉ ุณูุงุณู HTTP</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅู ุฌูุงุฒ ุงูุญุงูุฉ ุงูุฎุงุต ุจูุง ุนุจุงุฑุฉ ุนู ุชุฑุชูุจ ุจุญุฌู ุฃูุจุฑ: ูููู ุจุงูุชุญูู ูู ุตุญุฉ ุฑุฃุณ RFC ูุนูู ุงูููุฑ ุ ูู ุงููุญูู ุ ูุนุงูุฌ ูู ุดูุก ุชูุฑูุจูุง. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุงู nginx ูุญุชูู ุนูู 80 ููุงูุฉ ุ ููุฏููุง 520 ุ ูููุงู ุงููุฒูุฏ ูููุง. </font><font style="vertical-align: inherit;">ุฅุฐุง ุณุงูุฑูุง </font></font><code>switch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูุณูููู ุฐูู ุฃูุจุฑ ุจุนุดุฑ ูุฑุงุช. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฏููุง </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณุฎุฉ ุฎุงููุฉ ูู ุงูุฅุฏุฎุงู / ุงูุฅุฎุฑุงุฌ</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - ูููู ุฃู ุชุคุฏู ูุทุน ูู ุฃุญุฌุงู ูุฎุชููุฉ ุฅูู ูุทุน ุงูุจูุงูุงุช ูู ุฃูุงูู ูุฎุชููุฉ. </font><font style="vertical-align: inherit;">ูุทุน ูุฎุชููุฉ ูููู ุฃู ุชูุทุน ุจูุงูุงุชูุง. </font><font style="vertical-align: inherit;">ูู I / O ูุณุฎุฉ ุงูุตูุฑ ุ ุนูู ุณุจูู ุงููุซุงู ุ ูููู ุฃู ูุญุฏุซ "GET" (ูุงุฏุฑูุง) ูุซู "GET" ู "GE" ู "T" ุฃู "G" ู "E" ู "T" ุ ูุฐูู ุชุญุชุงุฌ ุฅูู ุชุฎุฒูู ุงูุญุงูุฉ ุจูู ุฃุฌุฒุงุก ุงูุจูุงูุงุช . </font><font style="vertical-align: inherit;">ูุฒูู ุนูููุง ุชูุงููู I / O ุ ูููู ูู ุงูููู ุงูุดุฎุตู ูุทูุฑ - ูู ุดูุก ุณูุฆ. </font><font style="vertical-align: inherit;">ูุญูู HTTP ุงููุจูุฑ ูู ูุงุญุฏ ูู ุฃูุซุฑ ุงูุฃูุงูู ุฃูููุฉ ูู ุงููุดุฑูุน.</font></font><br>
<br>
<pre><code class="bash hljs">$ grep -c <span class="hljs-string">'__FSM_STATE\|__FSM_TX\|__FSM_METH_MOVE\|__TFW_HTTP_PARSE_'</span> http_parser.c<font></font>
520<font></font>
    7.64% [tempesta_fw]     [k] tfw_http_parse_req<font></font>
    2.79% [e1000]           [k] e1000_xmit_frame<font></font>
    2.32% [tempesta_fw]     [k] __tfw_strspn_simd<font></font>
    2.31% [tempesta_fw]     [k] __tfw_http_msg_add_str_data<font></font>
    1.60% [tempesta_fw]     [k] __new_pgfrag<font></font>
    1.58% [kernel]          [k] skb_release_data<font></font>
    1.55% [tempesta_fw]     [k] __str_grow_tree<font></font>
    1.41% [kernel]          [k] __inet_lookup_established<font></font>
    1.35% [tempesta_fw]     [k] tfw_cache_do_action<font></font>
    1.35% [tempesta_fw]     [k] __tfw_strcmpspn</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุงุฐุง ุชูุนู ูุชุญุณูู ูุฐุง ุงููุถุนุ</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฅุญุงูุงุช ุงููุจุงุดุฑุฉ FSM</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃูู ุดูุก ูููู ุจู ูู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนุฏู ุงุณุชุฎุฏุงู ุญููุฉ ุ ูููู ุงูุงูุชูุงูุงุช ุงููุจุงุดุฑุฉ ุจูุงุณุทุฉ ุงูุชุณููุงุช ( </font></font></strong><code>go to</code><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ูููุฏุงุช ูุญูู ุนุงุฏู ูุซู ุฑุงุฌู ุชูุนู ุฐูู. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/bq/di/pr/bqdipr9bt6au4ifisfpvjli2p_e.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููู ุจุชุดููุฑ ูู ููุงูุฉ ูู ุฏูููุง ูุน ุชุณููุฉ ูู </font></font><code>switch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงุณู ูู C </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจููุณ ุงูุงุณู</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ูู ูู ูุฑุฉ ูุฑูุฏ ุงูุฐูุงุจ ุ ูุฌุฏ ููุตููุง </font></font><code>switch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃู </font><font style="vertical-align: inherit;">ูุตู </font><font style="vertical-align: inherit;">ุฅูู ููุณ ุงูุญุงูุฉ ูุจุงุดุฑุฉ ูู ุงูุฑูุฒ. ูู ุงููุฑุฉ ุงูุฃููู ุงูุชู ููุฑ ูููุง </font></font><code>switch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูุจุนุฏ ุฐูู ููุชูู ูุจุงุดุฑุฉ ุฅูู ุงูููุตู ุงููุทููุจ. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุนูุจ</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุนูุฏูุง ูุฑูุฏ ุงูุชุจุฏูู ุฅูู ุงูุญุงูุฉ ุงูุชุงููุฉ ุ ูุฌุจ ุฃู ูููู ุนูู ุงูููุฑ ูุง ุฅุฐุง ูุงู ูุง ูุฒุงู ูุฏููุง ุจูุงูุงุช ูุชุงุญุฉ (ูุฃู ูุณุฎุฉ ุงูุฅุฏุฎุงู / ุงูุฅุฎุฑุงุฌ ุตูุฑ). ุญุงูุฉ ุงูุฌุณู</font></font><code>for</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชู ูุณุฎู ุฅูู ูู ููุงูุฉ: ุจุฏูุงู ูู ุดุฑุท ูุงุญุฏ ูู FSM ุนุงุฏู ูุฏููุน ุจุงูุชุจุฏูู ุ ูุฏููุง 500 ูููู ููููุง ูุนุฏุฏ ุงูุญุงูุงุช. ุฅูุดุงุก ุฑูุฒ ููู ููุงูุฉ ููุณุช ูุจูุฑุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุญุงูุฉ ุขูุงุช ุงูุญุงูุฉ ุงููุจูุฑุฉ ุ ุจุงููุณุจุฉ </font><font style="vertical-align: inherit;">ููุฏุงุฎู </font></font><code>for</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุจูุฑ </font></font><code>switch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ุชูุฑุฑ GTC ุฃูุถูุง ุงูุดุฑุท </font></font><code>for</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนุฏุฉ ูุฑุงุช ุฏุงุฎู ุงูููุฏ. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุณุชุจุฏููุง ุจุงูุชูุงูุงุช </font></font></strong><code><strong>switch</strong></code><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุจุงุดุฑุฉ.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุชุญุณูู ุงูุชุงูู ูู ุฃููุง ูุง ูุณุชุฎุฏูู </font></font><code>switch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููุชูู ุฅูู ุงูุงูุชูุงู ุงูุณุฑูุน ุฅูู ุงูุนูุงููู ุงููุตููุฉ ุงููุญููุธุฉ. ูุฑูุฏ ุงูุงูุชูุงู ููุฑูุง ุฅูู ุงูููุทุฉ ุงููุทููุจุฉ ุจูุฌุฑุฏ ุฅุฏุฎุงู ุงููุธููุฉ. ูุชูุญ ูู ุฏูู ูุฌูุณ ุงูุชุนุงูู ุงูุฎููุฌู ุงูููุงู ุจุฐูู. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/i3/x5/7m/i3x57mb0tahhz99szccnfdbxde0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฏูู ูุฌูุณ ุงูุชุนุงูู ุงูุฎููุฌู ูุฏููุง ุงูุชุฏุงุฏ ููุงุณู ูุฏ ูุณุงุนุฏ. ูุฃุฎุฐ ุงุณู ุงูุชุตููู (ููุง ูู </font></font><code>from</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) ููุนูู ุนููุงูู ูุจุนุถ ุงููุชุบูุฑุงุช C ุนุจุฑ ุนูุงูุฉ ุงูุนุทู ุงููุฒุฏูุฌุฉ (&amp;&amp;). ุงูุขู ูููููุง ุฃู ูุฌุนู ุชุนูููุงุช ุงูููุฒ ุงููุจุงุดุฑ</font></font><code>jmp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅูู ุนููุงู ูุฐุง ุงูุชุตููู ูุน </font></font><code>goto</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฏุนูุง ูุฑู ูุง ูุฃุชู ููู.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุฏุงุก ุงูุชุญููู ุงููุจุงุดุฑ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุนุฏุฏ ูููู ูู ุงูุญุงูุงุช ุ ูููู ูููุฏ ุฑูุฒ ุงูุงูุชูุงู ุงููุจุงุดุฑ ุฃุจุทุฃ ููููุงู ูู ุงููุนุชุงุฏ </font></font><code>switch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูููู ุจุงููุณุจุฉ ููุขูุงุช ุงููุจูุฑุฉ ุ ุชุชุถุงุนู ุงูุฅูุชุงุฌูุฉ. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุงูุช ุขูุฉ ุงูุญุงูุฉ ุตุบูุฑุฉ ุ ููู ุงูุฃูุถู ุงุณุชุฎุฏุงู ุงูุขูุฉ ุงููุนุชุงุฏุฉ </font></font><code>switch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<pre><code class="bash hljs">$ grep -m 2 <span class="hljs-string">'model name\|bugs'</span> /proc/cpuinfo<font></font>
model name : Intel(R) Core(TM) i7-6500U CPU @ 2.50GHz<font></font>
bugs       : cpu_meltdown spectre_v1 spectre_v2 spec_store_bypass l1tf<font></font>
<font></font>
$ gcc --version|head -1<font></font>
gcc (GCC) 8.2.1 20181105 (Red Hat 8.2.1-5)<font></font>
<font></font>
States     Switch-driven automaton     Goto-driven automaton<font></font>
     7     header_line:      139ms     header_line:          156ms<font></font>
    27     request_line:     210ms     request_line:         186ms<font></font>
   406     big_header_line: 1406ms     goto_big_header_line: 727ms</code></pre><br>
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงุญุธุฉ: ููุฏ Tempesta ุฃูุซุฑ ุชุนููุฏูุง ูู ุงูุฃูุซูุฉ. </font><font style="vertical-align: inherit;">ูุญุชูู GitHub ุนูู ุฌููุน </font></font></em><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://github.com/tempesta-tech/blog/tree/master/"><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุนุงููุฑ</font></font></em></a><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุญุชู ุชุชููู ูู ุฑุคูุฉ ูู ุดูุก ุจุงูุชูุตูู. </font><font style="vertical-align: inherit;">ุฑูุฒ ุงููุญูู ุงูุฃุตูู ูุชุงุญ </font></font></em><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://github.com/tempesta-tech/tempesta/blob/master/tempesta_fw/"><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูู ุงูุฑุงุจุท</font></font></em></a><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (ูุญูู HTTP ุงูุฑุฆูุณู). </font><font style="vertical-align: inherit;">ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูู Tempesta FW ููุงู </font></font></em><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญููุงุช ุฃุตุบุฑ</font></font></em></a><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุณุชุฎุฏู FSM ุจุดูู ุฃุณูู.</font></font></em><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงุฐุง ูุฏ ุชููู ุงูุชุญููุงุช ุงููุจุงุดุฑุฉ ุฃุจุทุฃ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุฌูุงุฒ ุงูุฏููุฉ ุ ููุฑ ุจุงููุซูุฑ ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุ ูุฐูู (ุงููุชููุน) ุณูููู ููุงู ุงููุซูุฑ ูู ุงูุฃุฎุทุงุก ุงููุงุฏุญุฉ. </font><font style="vertical-align: inherit;">ุฏุนููุง ูุฌุฑู "ุงูุชูููุท" ููููุง ูุชูุจุคุงุช ุฃุฎุทุงุก ุงููุฑูุน:</font></font><br>
<br>
<pre><code class="bash hljs">perf record -e branch-misses -g ./http_benchmark<font></font>
406 states:    switch       - 38% on switch(),<font></font>
               direct jumps - 13% on header value parsing<font></font>
			   <font></font>
7,27 states:   switch       - &lt;18% switch(), up to 40% <span class="hljs-keyword">for</span>()<font></font>
               direct jumps โ up to 46% on header &amp; URI parsing</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุนูู ุฌูุงุฒ ูุจูุฑ ูุน 406 ุญุงูุฉ ุ ููุถู 38ูช ูู ููุช ูุนุงูุฌุฉ ุงูุชุญููุงุช ูู </font></font><code>switch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุนูู ุฌูุงุฒ ุงูุฏููุฉ ูุน ุงูุชุญููุงุช ุงููุจุงุดุฑุฉ ุ ูุชู ุชุญููู ุงูููุงุท ุงูุณุงุฎูุฉ. </font><font style="vertical-align: inherit;">ูุชุถูู ุชุญููู ุณูุณูุฉ ูู ูู ุญุงูุฉ ุงูุชุญูู ูู ุญุงูุฉ ููุงูุฉ ุงูุณูุณูุฉ: ุงูุญุงูุฉ </font></font><code>for</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุฌูุงุฒ ุงูุญุงูุฉ ููุฏ ุงูุชุดุบูู </font></font><code>switch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<pre><code class="bash hljs">perf <span class="hljs-built_in">stat</span> -e L1-icache-load-misses ./http_benchmark<font></font>
<font></font>
                       Switch-driven automaton  Goto-driven automaton<font></font>
big FSM code size:                       29156                  49202<font></font>
L1-icache-load-misses:                      4M                     2M</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุนุฏ ุฐูู ุ ูููู ูุธุฑุฉ ุนูู ููู ุชุนุฑูู ููุนู ุขูุฉ ุงูุญุงูุฉ ูู ุฎูุงู ุฃุญุฏุงุซ ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ููุชุนูููุงุช L1 ุงูููููุฏุฉ - ูุง ููุฑุจ ูู 30 ูููู ุจุงูุช </font></font><code>switch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ู 50 ูููู ุจุงูุช ููููุฒุงุช ุงููุจุงุดุฑุฉ (ุฃูุซุฑ ูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ูุฅุฑุดุงุฏุงุช ุงููุณุชูู ุงูุฃูู). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุจุฏู ุฃูู ูู ุญุงูุฉ ุนุฏู ุงุญุชูุงุก ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ุ ููุฌุจ ุฃู ูููู ููุงู ุงููุซูุฑ ูู ุฃุฎุทุงุก ุงูุชุฎุฒูู ุงููุคูุช ูุฌูุงุฒ ูุซู ูุฐู. </font><font style="vertical-align: inherit;">ูููู ูุง ุ ูู ุฃูู ูุฑุชูู. </font><font style="vertical-align: inherit;">ุฐูู ูุฃู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ุชุนูู ุจุดูู ุฃูุถู: ูุญู ูุนูู ูุน ุงูุฑูุฒ ุจุดูู ุชุณูุณูู ููุณุชุทูุน ุณุญุจ ุงูุจูุงูุงุช ูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ุงููุฏููุฉ.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุชุฑุฌู ูุบูุฑ ุชุฑุชูุจ ุงูููุฏ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุนูุฏูุง ูููู ุจุจุฑูุฌุฉ ููุฏ ุฌูุงุฒ ุงูุญุงูุฉ </font></font><code>go to</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูุฏููุง ุฃููุงู ุงูุญุงูุงุช ุงูุชู ุณูุชู ุงุณุชุฏุนุงุคูุง ุฃููุงู ุนูุฏ ุงุณุชูุงู ุงูุจูุงูุงุช: ุทุฑููุฉ HTTP ุ ู URI ุ ุซู ุฑุคูุณ HTTP. ูุจุฏู ููุทูููุง ุฃูู ุณูุชู ุชุญููู ุงูููุฏ ูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ูููุนุงูุฌ ุจุงูุชุณูุณู ุ ูู ุงูุฃุนูู ุฅูู ุงูุฃุณูู ุ ุชูุงููุง ุฃุซูุงุก ุงุณุชุนุฑุงุถ ุงูุจูุงูุงุช. ููู ูุฐุง ุฎุทุฃ ุชูุงูุง. ุฅุฐุง ูุธุฑุช ุฅูู ุฑูุฒ ุงููุฌูุน ุ ุณุชุฑู ุฃุดูุงุก ูุฐููุฉ. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/tg/uf/zr/tgufzrnfusabmvn1gg9ulzjgvgo.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุนูู ุงููุณุงุฑ ูู ูุง ูุญู ุงููุจุฑูุฌ: ุนูููุง ุฃููุง ุชุญููู ุงูุฃุณุงููุจ </font></font><code>GET</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ู </font></font><code>POST</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุซู ุฃุฏูุงู ูู ููุงู ูุง ุญุชู ุงูุขู ุทุฑููุฉ ุงููุญุชูู </font></font><code>UNLOCK</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ูุฐูู ุ ูุชููุน ุฑุคูุฉ ุงูุชุญููู </font></font><code> GET</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููู </font><font style="vertical-align: inherit;">ุจุฏุงูุฉ ุงููุฌูุน </font></font><code>POST</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ุซู </font></font><code>UNLOCK</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ููู ูู ุดูุก ูู ุนูุณ ุฐูู ุชูุงููุง: </font></font><code>GET</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุงูููุชุตู </font></font><code>POST</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููู ุงูููุงูุฉ ููุง </font></font><code>UNLOCK</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููู.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐุง ูุฃู ุงููุชุฑุฌู ูุง ูููู ููู ุชุฃุชู ุงูุจูุงูุงุช ุฅูููุง. </font><font style="vertical-align: inherit;">ูููู ุจุชูุฒูุน ุงูููุฏ ุญุณุจ ุตูุฑุชู ููููุฏ ุงูุฌููู. </font><font style="vertical-align: inherit;">ุญุชู ูุชููู ูู ุชุฑุชูุจ ุงูููุฏ ุจุงูุชุฑุชูุจ ุงูุตุญูุญ ุ ูุฌุจ ุนูููุง ุงุณุชุฎุฏุงู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุงุฌุฒ ุงููุชุฑุฌู</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุญุงุฌุฒ ุงููุชุฑุฌู ุนุจุงุฑุฉ ุนู ุฏููุฉ ุชุฌููุน ูู ูุชู ูู ุฎูุงููุง ุฅุนุงุฏุฉ ุชุฑุชูุจ ุงููุชุฑุฌู. </font><font style="vertical-align: inherit;">ุจุจุณุงุทุฉ ุนู ุทุฑูู ูุถุน ูุซู ูุฐู ุงูุญูุงุฌุฒ ุ ูููุง </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุชุญุณูู ุงูุฅูุชุงุฌูุฉ ุจูุณุจุฉ 4ูช</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<pre><code class="cpp hljs">STATE(sw_method) {<font></font>
    ... <span class="hljs-comment">// the most frequent states</span>
    MATCH(NGX_HTTP_GET, <span class="hljs-string">"GET "</span>);<font></font>
    MATCH(NGX_HTTP_POST, <span class="hljs-string">"POST"</span>);<font></font>
    <font></font>
    __asm__ __volatile__(<span class="hljs-string">""</span>: : :<span class="hljs-string">"memory"</span>);<font></font>
    ... <span class="hljs-comment">// many other states</span><font></font>
    <font></font>
    <span class="hljs-comment">// Improbable states</span>
    METH_MOVE(Req_MethU, <span class="hljs-string">'N'</span>, Req_MethUn);<font></font>
    METH_MOVE(Req_MethUn, <span class="hljs-string">'L'</span>, Req_MethUnl);<font></font>
    METH_MOVE(Req_MethUnl, <span class="hljs-string">'O'</span>, Req_MethUnlo);<font></font>
    METH_MOVE(Req_MethUnlo, <span class="hljs-string">'C'</span>, Req_MethUnloc);<font></font>
    METH_MOVE_finish(Req_MethUnloc, <span class="hljs-string">'K'</span>, NGX_HTTP_UNLOCK)</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุจ ุงูุฑูุฒ ุจุทุฑููุชู ุงูุฎุงุตุฉ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุธุฑูุง ูุฃู ุงููุชุฑุฌู ูุง ูููู ุจุชุฑุชูุจ ุงูุจูุงูุงุช ููุง ูุฑูุฏ ุ ูุณูู ูููู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุงูุชุญุณูู ุงูููุฌู ูููู ุงูุชุนุฑูู</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (ุงูุชุญุณูู ุชุญุช ุณูุทุฑุฉ ุงููุญูู). </font><font style="vertical-align: inherit;">ุงูุชุญุณูู ุงูููุฌูู ููููู ุงูุดุฎุตู (PGO) ูู ุฅุฌูุงูู ุนุฏุฏ ุงูุนููุงุช ุ ูููุณ ุณูุณูุฉ ูู ุงูููุงููุงุช. </font><font style="vertical-align: inherit;">ุนูู ุณุจูู ุงููุซุงู ุ ูุชููู ูุนุฑูู ุงูููุงุฑุฏ ุงูููุชุธู (URI) ุนููุงุช ุฃูุซุฑ ูู ุชุญููู ุงูุทุฑููุฉ ุ ูุฐูู ุณูุถุน ุฑูุฒ ูุนุงูุฌุฉ ูุนุฑูู ุงูููุงุฑุฏ ุงูููุชุธู ูุจู ูุนุงูุฌุฉ ุงูุทุฑููุฉ.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููู ุชุนููุ </font><font style="vertical-align: inherit;">ุณูููู ุจูุชุงุจุฉ ุงูููุฏ ุ ูุชุดุบูู ุงููุนุงููุฑ ุนููู ุ ูุฅุนุทุงุก ูุชูุฌุฉ ุงูุชูููุท ูููุชุฑุฌู ุ ูุณูู ูููุฏ ุงูููุฏ ุงูุฃูุซู ูุฃุญูุงููุง. </font><font style="vertical-align: inherit;">ููู ุงููุดููุฉ ุชููู ูู ุฃููุง ุชููู ุจุจุณุงุทุฉ ุจุชุฌููุน ุงูุฃุฌุฒุงุก ุงูุฃูุซุฑ ุณุฎููุฉ ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุ ูููููุง ูุง ุชุชุจุน ุชุจุนูุฉ ุงูููุช. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุงู ุฃูุจุฑ URI ูู ุงูุชุญููู ุ ูุณูููู ูุฐุง ูู ุงูููุงู ุงูุฃูุซุฑ ุณุฎููุฉ. </font><font style="vertical-align: inherit;">ุณูุฑุชูุน URI ุฅูู ุฃุนูู ุงููุธููุฉ ุ ููู ูุธูุฑ PGO ุฃู ุงุณู ุงูุทุฑููุฉ ููุฌูุฏ ุฏุงุฆููุง ูุจู URI. </font><font style="vertical-align: inherit;">ูููุง ูุฐูู ุ ูุง ูุนูู PGO.</font></font><br>
<br>
<pre><code class="cpp hljs">Req_Method: {
    <span class="hljs-keyword">if</span> (likely(PI(p) == CHAR4_INT(<span class="hljs-string">'G'</span>, <span class="hljs-string">'E'</span>, <span class="hljs-string">'T'</span>, <span class="hljs-string">' '</span>))) {<font></font>
        ...<font></font>
        <span class="hljs-keyword">goto</span> Req_Uri;<font></font>
    }<font></font>
    <span class="hljs-keyword">if</span> (likely(PI(p) == CHAR4_INT(<span class="hljs-string">'P'</span>, <span class="hljs-string">'O'</span>, <span class="hljs-string">'S'</span>, <span class="hljs-string">'T'</span>))) {<font></font>
        ...<font></font>
        <span class="hljs-keyword">goto</span> Req_UriSpace;<font></font>
    }<font></font>
    <span class="hljs-keyword">goto</span> Req_Meth_SlowPath;<font></font>
}<font></font>
... <span class="hljs-comment">// other methods: POST, PUT etc.</span><font></font>
Req_Uri:<font></font>
    ... <span class="hljs-comment">// URI processing</span><font></font>
Req_Meth_SlowPath:<font></font>
...</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุงุฐุง ูุนููุ </font></font><br>
<br>
<code><strong>likely</strong></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ </font></font><code><strong>unlikely</strong></code> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญุฏุงุช ุงููุงูุฑู</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (ูุฑูุฒ kernel Linux ุ ุชุชููุฑ ุงูุฌููุฑ ุงูุฎููุฌู ูู ูุณุงุญุฉ ุงููุณุชุฎุฏู </font></font><code>__builtin_expect()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">). ูููููู ุฃู ุฑูุฒ ููุถุน ุฃูุฑุจ. ุนูู ุณุจูู ุงููุซุงู ุ ุชุดูุฑ ุงูุชูุงุฑูุฑ ุงููุญุชููุฉ ุฅูู ุฃู ููุฆุฉ ุงูุทูุจ ูุฌุจ ุฃู ุชููู ูุชุฃุฎุฑุฉ ูุจุงุดุฑุฉ </font></font><code>if</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ุซู ุงูุฌูุจ ุงููุณุจู ููุฑูุฒ (ุงูุฌูุจ ุงููุณุจู ูููุนุงูุฌ) ุณูุญุฏุฏ ูุฐุง ุงูุฑูุฒ ููู ุดูุก ุณูููู ุณุฑูุนูุง. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/7x/4u/05/7x4u057of2wmtq310wflcuyvlei.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชุธูุฑ ุงูุตูุฑุฉ ุจุฏุงูุฉ ุทุฑููุฉ ุงูุชุญููู ูุงูููุงูุฉ ูุงูุญุงุฌุฒ. ูู ูุชููุน ุฑุคูุฉ ุงูุฑูุฒ ุฎูู ุงูุญุงุฌุฒ. ูุจุฏู ุฃู ูุฐุง ูุง ููุจุบู ุฃู ูููู - ููุฏ ูุถุนูุง ุญุงุฌุฒูุง. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููู ูุงุฐุง ูุญุฏุซ ูู ุงููุงูุนุ ูุฑู ุงููุชุฑุฌู </font></font><code>likely</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุดุฑุท - ูู ุงููุฑุฌุญ ุฃู ูุฏุฎู ูุต ุงูุดุฑุท ูููุงู ุณููุชูู ุฅูู ููุฒุฉ ุบูุฑ ูุดุฑูุทุฉ ุฅูู ุงูููุตู</font></font><code>Req_Uri</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุงุชุถุญ ุฃู ุงูููุฏ ุงูููุฌูุฏ ุจุนุฏ ุญุงูุชูุง ูุง ูุชู ูุนุงูุฌุชู ูู "ุงููุณุงุฑ ุงูุณุงุฎู". </font><font style="vertical-align: inherit;">ูููู ุงููุชุฑุฌู ุจููู ุงูููุฏ ุชุญุช ุงูููุตู </font></font><code>if</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ุนูู ุงูุฑุบู ูู ุงูุญุงุฌุฒ ุ ูุฃูู ุชู ุงุณุชููุงุก ุดุฑุท ุงูููุฏ ุงูุณุงุฎู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุฐุง ูู ูููุ ุฏูู ูุฌูุณ ุงูุชุนุงูู ุงูุฎููุฌู ูู ููุญู: ุณูุงุช </font></font><code>hot</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ู </font></font><code>cold</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุชุณููุงุช. </font><font style="vertical-align: inherit;">ูููููู ุฃู ููุตู ุณุงุฎู (ุนูู ุงูุฃุฑุฌุญ) ูุฃูููุง ุจุงุฑุฏ (ุฃูู ุงุญุชูุงููุง). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/bw/ra/uh/bwrauhxesqvk_ke22cw67cqwuja.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุง ูุชูู ุนูู ูุง ูู </font></font><code>GET</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃูุซุฑ ุงุญุชูุงูุง </font></font><code>POST</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุชุฑูู ูู </font></font><code>likely</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุชุญุช ูุฐู ุงูุญุงูุฉ ุ ุชุฑุชูุน ูุนุงูุฌุฉ URI ุ </font></font><code>POST</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชุฐูุจ ุฃุฏูุงู. </font><font style="vertical-align: inherit;">ุชุจูู ุฌููุน ุงูุฑููุฒ ุงูุฃุฎุฑู ููุฌูุงุฒ ุงูุฃูู ุงุญุชูุงููุง ุฃุฏูุงู ูุฃู ุงูููุตู ุจุงุฑุฏ.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุบุงูุถ -O3</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฏุนููุง ููุธุฑ ุฅูู ุชุญุณูู ุงููุชุฑุฌู. </font><font style="vertical-align: inherit;">ุฃูู ุดูุก ูุชุจุงุฏุฑ ุฅูู ุงูุฐูู ูู ุนุฏู ุงุณุชุฎุฏุงู O2 ุ ูููู O3 - ูุฌุจ ุฃู ูููู ุฃุณุฑุน. </font><font style="vertical-align: inherit;">ููู ุงูุฃูุฑ ููุณ ูุฐูู - ูู ุจุนุถ ุงูุฃุญูุงู ูููุฏ O3 ุฑูุฒูุง ุฃุณูุฃ. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vc/-p/q8/vc-pq8a078kyofsx7cj1ukorbta.png"><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O3 ุนุจุงุฑุฉ ุนู ูุฌููุนุฉ ูู ุจุนุถ ุงูุชุญุณููุงุช</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ุฅุฐุง ุฃุถููุงูุง ุฅูู O2 ุจุดูู ูููุตู ุ ูุญุตู ุนูู ุฎูุงุฑุงุช ูุฎุชููุฉ: ุจุนุถ ุงูุชุญุณููุงุช ุชุณุงุนุฏ ุ ูุจุนุถ ุงูุชุฏุฎู. </font><font style="vertical-align: inherit;">ุจุงููุณุจุฉ ุฅูู ุฑูุฒูุง ุงููุญุฏุฏ ุ ูุฎุชุงุฑ ููุท ุงูุชุญุณููุงุช ุงูุชู ุชูุดุฆ ุงูุดูุฑุฉ ุจุดูู ุฃูุถู. </font><font style="vertical-align: inherit;">ูุชุฑู ุฃูุถู ูุชูุฌุฉ - ููุง 1ุ820 ุซุงููุฉ ุจุงููุณุจุฉ ูู 1ุ838 ู 1ุ858. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุชู ุชูููุฒ ุจุนุถ ุงูุฎูุงุฑุงุช ุจุงูููู ุงูุฃุฎุถุฑ - ููุฐุง ูู ุงูุชุตูุฑ ุงูุชููุงุฆู.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุทุจูุจ ุงูุฐุงุชู</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุซุงู ุนูู ุฏูุฑุฉ ูู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฏููู ุฏูู ูุฌูุณ ุงูุชุนุงูู ุงูุฎููุฌู</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">int</span> a[<span class="hljs-number">256</span>], b[<span class="hljs-number">256</span>], c[<span class="hljs-number">256</span>];
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">foo</span> <span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">256</span>; i++)<font></font>
        a[i] = b[i] + c[i];<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅุฐุง ูุงู ูุฏููุง ุตููู ูุชุบูุฑ ูุชูุฑุฑ ุ ูููููุง ุชุญุณูู ุงูุฏูุฑุฉ - ุชุชุญูู ุฅูู ูุชุฌูุงุช. </font><font style="vertical-align: inherit;">ุจุดูู ุงูุชุฑุงุถู ุ </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชู</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชูููู ุงูุชุฎุตูุต ุงูุชููุงุฆู ุนูุฏ ุงููุณุชูู ุงูุซุงูุซ ูู ุงูุชุญุณูู -O3 </font><font style="vertical-align: inherit;">: ูููู GCC ุจุฅูุดุงุก ุฑูุฒ ูุชุฌู ุญูุซ ููููู. </font><font style="vertical-align: inherit;">ูููู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูููู ุชูุฌูู </font><strong><font style="vertical-align: inherit;">ุฌููุน ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ</font></strong><font style="vertical-align: inherit;"> ุชููุงุฆููุง (ุญุชู ูู ูุงูุช ูุชุฌูุฉ ูู ุญูุซ ุงููุจุฏุฃ). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููููุง ุชูููู ุฎูุงุฑ ุฏูู ูุฌูุณ ุงูุชุนุงูู ุงูุฎููุฌู </font></font><code>-fopt-info-vec-all</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูุงูุฐู ููุถุญ ูุง ุชู ูููู ููุง ูู ููุณ ูุฐูู. </font><font style="vertical-align: inherit;">ูุญุตู ุนูู ุฃูู ุจุงููุณุจุฉ ููุนูุงุฑูุง ูุง ููุฌุฏ ุดูุก ูุชุฌู ุ ูููู ูุง ูุฒุงู ุงูุฑูุฒ ูุณูุก. </font><font style="vertical-align: inherit;">ูุฐูู ุ ูุง ูุนูู ูุงูู ุงูุจูุงูุงุช ุฏุงุฆููุง: ูู ุจุนุถ ุงูุฃุญูุงู ูุจุทุฆ ุงูุฑูุฒ. </font><font style="vertical-align: inherit;">ูููู ูููููุง ุฏุงุฆููุง ุฑุคูุฉ ูุง ุชู ูููู ููุง ูุง ูุชู ุฅููุงูู ุ ูุฅููุงู ุชุดุบูู ุงูุชุญููู ุ ุฅุฐุง ูุฒู ุงูุฃูุฑ.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุญุงุฐุงุฉ: ููููุฉ ููุงุฑูุฉ ุงูุณูุงุณู ูุน GETุ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููู ุจุงุฎุชุฑุงู ุตุบูุฑ ุ ููุง ูู ุงูุญุงู ูู nginx: ูุญู ูุง ูููู ุจุชุญููู ุงูุฎุทูุท ุจุงูุจุงูุช ุ ูููููุง ูุญุณุจ </font></font><code>int</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููุงุฑู ุงูุฎุทูุท ูุนูู.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> CHAR4_INT(a, b, c, d)    ((d &lt;&lt; 24) | (c &lt;&lt; 16) | (b &lt;&lt; 8) | a)</span>
<span class="hljs-keyword">if</span> (p == CHAR4_INT(<span class="hljs-string">'G'</span>, <span class="hljs-string">'E'</span>, <span class="hljs-string">'T'</span>, <span class="hljs-string">' '</span>)))
    <span class="hljs-comment">// we have GET as method</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุญู ูุนูู ุฃูู ุฅุฐุง </font></font><code>int</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู </font><font style="vertical-align: inherit;">ูุชู </font><font style="vertical-align: inherit;">ูุญุงุฐุงุฉ ุ ูุฅูู ูุชุจุงุทุฃ 2-3 ูุฑุงุช. </font><font style="vertical-align: inherit;">ูุชุจูุง </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุนูุงุฑูุง</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุตุบูุฑูุง </font><font style="vertical-align: inherit;">ูุซุจุช ุฐูู.</font></font><br>
<br>
<pre><code class="cpp hljs">$ ./int_align<font></font>
Unaligned access = <span class="hljs-number">6.20482</span>
Aligned access = <span class="hljs-number">2.87012</span>
Read four bytes = <span class="hljs-number">2.45249</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุซู ุญุงูู ุงููุญุงุฐุงุฉ </font></font><code>int</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุณููุธุฑ ุฅุฐุง ุชูุช </font></font><code>int</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญุงุฐุงุฉ </font><font style="vertical-align: inherit;">ุงูุนููุงู </font></font><code>int</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูุณููุงุฑูู ุจุงูุจุงูุช ุฅู ูู ููู.</font></font><br>
<br>
<pre><code class="cpp hljs"> (((<span class="hljs-keyword">long</span>)(p) &amp; <span class="hljs-number">3</span>)<font></font>
  ? ((<span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">int</span>)((p)[<span class="hljs-number">0</span>]) | ((<span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">int</span>)((p)[<span class="hljs-number">1</span>]) &lt;&lt; <span class="hljs-number">8</span>)<font></font>
  | ((<span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">int</span>)((p)[<span class="hljs-number">2</span>]) &lt;&lt; <span class="hljs-number">16</span>) | ((<span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">int</span>)((p)[<span class="hljs-number">3</span>]) &lt;&lt; <span class="hljs-number">24</span>))<font></font>
  : *(<span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">int</span> *)(p));</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููู ุงุชุถุญ ุฃู ูุฐุง ุงูููุฌ ูุนูู ุจุดูู ุฃุณูุฃ:</font></font><br>
<br>
<pre><code class="bash hljs">full request line:     no difference<font></font>
method only:           unaligned      - 214ms<font></font>
                       aligned        - 231ms<font></font>
                       bytes          - 216ms</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุงุฎุชุตุงุฑ: ููุงู ูุฑู ุจูู ุงูุฑูุฒ ุงูููุงุณู ุงููุนุฒูู ูุบูุฑ ุงููุงุจู ููุชุญุณูู ูุฑูุฒ ุงููุญูู ุงููุบูู ุงููุถูู ุ ูุงูุฐู ูููุฏ ุงูุชุญุณูู ุจุณุจุจ ุงููููุฉ ุงููุจูุฑุฉ ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ. </font><font style="vertical-align: inherit;">ูู ููู ููุงู ุนููุจุฉ ูู ุงูุชูููุท. </font></font><br>
<br>
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงุญุธุฉ: ูููู </font></font></em><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฑุงุกุฉ</font></font></em></a><font style="vertical-align: inherit;"><em><font style="vertical-align: inherit;"> ููุงูุดุฉ ุชูุตูููุฉ ุญูู ุณุจุจ ุญุฏูุซ ุฐูู ูู ูููุชูุง </font></em><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><em><font style="vertical-align: inherit;">ุนูู GitHub</font></em></a></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></em><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงุฐุง ุชุนุชุจุฑ ุณูุงุณู HTTP ูููุฉ ุจุงููุณุจุฉ ููุงุ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุนูู ุณุจูู ุงููุซุงู ุ ูุนุฏ ูุฐุง ุนููุงู URI ุนุงุฏู: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/pw/_d/tw/pw_dtwjndt-xro47gvj3qehvpm4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅุฐุง ููุช ุตุนุจ ุงูุฅุฑุถุงุก ุจูุง ููู ุงูููุงูุฉ ุญูู ุงูููุฏู ุ ูุงูุชูู ุฅูู ุงูุญุฌุฒ ููู ุจุชุนููู ุจุนุถ ุงูููุงุชุฑ ุ ูุงุญุตู ุนูู URI ุจุฃูุซุฑ ูู ููููุจุงูุช. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅูุฌู ุฅูุณ ูุฏูู ุขูุฉ ุชูุฒูุน ูุงุณุนุฉ ุงููุทุงู ุฅูู ุญุฏ ูุง ุนูู </font></font><code>switch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ </font></font><code>case</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูุง ูุนูู ุจุณุฑุนุฉ ูุจูุฑุฉ. </font><font style="vertical-align: inherit;">ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูู ุญุงูุฉ Tempesta FW ุ ูุง ูุญุชุงุฌ ุฅูู ุชุญููู URI ูุญุณุจ ุ ุจู ุฃูุถูุง ูุญุตู ููุญูู.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">case</span> sw_check_uri:
    <span class="hljs-keyword">if</span> (usual[ch &gt;&gt; <span class="hljs-number">5</span>] &amp; (<span class="hljs-number">1U</span> &lt;&lt; (ch &amp; <span class="hljs-number">0x1f</span>)))
        <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">switch</span> (ch) {
    <span class="hljs-keyword">case</span> <span class="hljs-string">'/'</span>:<font></font>
        r-&gt;uri_ext = <span class="hljs-literal">NULL</span>;<font></font>
        state = sw_after_slash_in_uri;<font></font>
        <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">'.'</span>:<font></font>
        r-&gt;uri_ext = p + <span class="hljs-number">1</span>;
        <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">' '</span>:<font></font>
        r-&gt;uri_end = p;<font></font>
        state = sw_check_uri_http_09;<font></font>
        <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> CR:<font></font>
        r-&gt;uri_end = p;<font></font>
        r-&gt;http_minor = <span class="hljs-number">9</span>;<font></font>
        state = sw_almost_done;<font></font>
        <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> LF:<font></font>
        r-&gt;uri_end = p;<font></font>
        r-&gt;http_minor = <span class="hljs-number">9</span>;
        <span class="hljs-keyword">goto</span> done;
    <span class="hljs-keyword">case</span> <span class="hljs-string">'%'</span>:<font></font>
    r-&gt;quoted_uri = <span class="hljs-number">1</span>;<font></font>
    ...</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
URI ุขุฎุฑ: /redir_lang.jspุlang=foobarูช0dูช0aContent-Length:ูช200ูช0dูช </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
0aูช 0dูช 0aHTTP / 1.1ูช 20200ูช 20OKูช 0dูช 0aContent-Type:ูช 20text / </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
htmlูช 0dูช 0aContent -ุงูุทูู:ูช 2019ูช 0dูช 0aูช 0dูช 0aShazam &lt;/ </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
html&gt;. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุจุฏู ุฃู ุงูุฃูู ุ ูููู ูุฏูู ุญููุฉ. ุณูููู ุนููู ุฃู ุชุญูุฑ ุจุนูู ูุงูู ูููู ุฐูู. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฏุนูุง ูุฌุฑู ุงุฎุชุจุงุฑูุง</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : ุฎุฐ URI ุงูุฃูู ุ ุงุทุนู wrk ุ ุงุถุจุทู ุนูู nginx ูุดุงูุฏ ุฃู ุชุญููู nginx ูุตุจุญ ุณุงุฎููุง ุฌุฏูุง. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/m-/y1/id/m-y1idxtawyq5rjayodyb_r2tgq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅุฐุง ูุงู ูู ุงููุงุถุญ ูู ุงุณุชุนูุงู ุงูููุฑุณ ุงูุนุงุฏู ุงูุณุงุจู ุฃู ุงููุญูู ุงููุบูู ููุฌูุฏ ุจุงููุนู ูู ุงูุฌุฒุก ุงูุนููู ุ ูุฅูู ููุง ูุตุจุญ ุฃูุซุฑ ุณุฎููุฉ.</font></font><br>
<br>
<pre><code class="bash hljs">8.62%  nginx         [.] ngx_http_parse_request_line<font></font>
2.52%  nginx         [.] ngx_http_parse_header_line<font></font>
1.42%  nginx         [.] ngx_palloc<font></font>
0.90%  [kernel]      [k] copy_user_enhanced_fast_string<font></font>
0.85%  nginx         [.] ngx_strstrn<font></font>
0.78%  libc-2.24.so  [.] _int_malloc<font></font>
0.69%  nginx         [.] ngx_hash_find<font></font>
0.66%  [kernel]      [k] tcp_recvmsg</code></pre><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง ุงููููุฒ ูู ุณูุงุณู HTTPุ </font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงู ููุงุตู ูุฎุชููุฉ </font></font><code>' : '</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ู </font></font><code>' , '</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูุญุชู ููุงูุฉ ุงูุณุทูุฑุ ุงูุชู ูููู ุฃู ุชููู ุฅูุง ูุฒุฏูุฌุฉ ุงูุจุงูุช </font></font><code>\r\n</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃู ุจุงูุช ูุงุญุฏ </font></font><code>\n</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูุงูุชู ูููุดุช ูู ุงูุจุฏุงูุฉ. </font><font style="vertical-align: inherit;">ูุง ููุฌุฏ ุฅููุงุก 0 ูุฎุทูุท C - ูุฃุณุจุงุจ ุฃูููุฉ ูุฑูุฏ ุฃู ูุชุญูู ุจุฏูุฉ ุฃูุจุฑ ููุง ูุฃุชู ุฅูููุง. </font><font style="vertical-align: inherit;">ูุฏููุง ูุธููุชุงู ููุงุณูุชุงู ุชุณุงุนุฏุงู ูู ุงููุญูู ุงููุบูู.</font></font><br>
<br>
<ul>
<li><code>strspn</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: ูุชุญูู ูู ุงูุฃุจุฌุฏูุฉ ุ ูุงูุฃุญุฑู ุงููุชุงุญุฉ ูู ุณูุณูุฉ ุ ููุฌูุน ุฏููุงูููููุง ุฃุจุฌุฏูุฉ ุตุงูุญุฉ ุ ุนูู ุงูุฑุบู ูู ุฃูู ูุนุฑูู ูู ูุฑุญูุฉ ุชุฌููุน ุงูุจุฑูุงูุฌ.</font></font></li>
<li><code>strcasecmp()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ููุณุช ููุงู ุญุงุฌุฉ ุฅูู ุญุงูุฉ ุชุญููู ููุงุฑูุฉ </font></font><code>x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุน </font></font><code>Foo:</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูู ูุนุธู ุงูุญุงูุงุช </font></font><code>strcasecmp()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ููุทูุจ ููุท ุงูุงูุชุซุงู / ุนุฏู ุงูุงูุชุซุงู ุ ููุง ุชุญุชุงุฌ ุฅูู ูุนุฑูุฉ ุงูููุถุน ูู ุงูุณุทุฑ.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุนูููู ุจุจุทุก. </font><font style="vertical-align: inherit;">ุฏุนููุง ูุฑู ุงููุนุงููุฑ ููููู ูุง ูู ุงูุฎุทุฃ ูููุง.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญููุงุช ุณุฑูุนุฉ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุงู ุงูุนุฏูุฏ ูู ุงููุญูููู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅู Nginx ูู ุฃุจุณุท ูุญูู ููุญูู. ููู ูุชุญูู ุจุฏูุฉ ูู ุชูุงูู RFC. ููุงู ุฃูุถูุง ูุญููุงุช PicoHTTPParser (H2O) ู Cloudflare. ูุนุงูุฌูู ุงูุจูุงูุงุช ุจุดูู ุฃุณุฑุน ุ ููููู ูุฏ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://blog.cloudflare.com/improving-pico"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชุฎุทูู ุงูุฃุญุฑู</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุชู ูุง ูุณูุญ ุจูุง RFC. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PCMESTRI.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุณุชุฎุฏู ุงููุญูููู ุนุฏุฉ ุทุฑู ูุฎุชููุฉ. ุงูุฃูู ูู ุชุนูููุฉ PCMESTRI ุงููุณุชุฎุฏูุฉ ูู ูุญูู Pico. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุถุน ูุทุงูุงุช ูู ุงูุชุนูููุงุช. ููุฃุณู ุ ูููููุง ุชุญููู 16 ุญุฑููุง ุฃู 8 ูุทุงูุงุช. ุฅุฐุง ูุงู ุงููุทุงู ูุชููู ูู ุญุฑู ูุงุญุฏ ููุท - ูุฑุฑ ููุท. ุจุณุจุจ ูุฐุง ุงูููุฏ ุ ูุง ูุณุชุทูุน ุงููุญูู ุงููุบูู Pico ุงูุชุญูู ุจุดูู ูุงูู ูู ุชูุงูู RFC ุ ูุฃู RFC ูุฏูู ุฃูุซุฑ ูู 8 ูุทุงูุงุช ูู ูุฐุง ุงููููุน.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ks/x8/m_/ksx8m_ixc0oy3kzucdwzumppaus.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููู ุจุชุญููู ุงูุฃุจุฌุฏูุฉ ูู ุงูุณุฌู ุ ูุชุญููู ุงูุณูุณูุฉ ูุชูููุฐ ุงูุชุนูููุงุช. ุนูุฏ ุงูุฎุฑูุฌ ุ ูุฑู ุจุณุฑุนุฉ ูุง ุฅุฐุง ูุงูุช ููุงู ูุตุงุฏูุฉ ุฃู ูุง. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AVX2 - ูููุฌ CloudFlare.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงููุญูู CloudFlare ุ ุจุงุณุชุฎุฏุงู AVX2 ุ ูุนุงูุฌ 32 ุจุงูุช ูู ุณูุณูุฉ ูู ููุช ูุงุญุฏ ุ ุจุฏูุงู ูู 16 ุจุงูุช ูุน ูุญูู Pico. ุงูุชุญููู ุฃูุถู ูู CloudFlare ูุฃูู ุชู ูููู ุฅูู AVX2. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/b8/3j/g1/b83jg1epzz6ec6dllxv1j4a-0lo.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุชุญูู ูู ุฌููุน ุงูุฃุญุฑู ูู ูุณุงูุฉ ูู ุฌุฏูู ASCII ุ ูุฌููุน ุงูุฃุญุฑู ุฃูุจุฑ ูู 128 ููุฃุฎุฐ ุงููุทุงู ุจูููุง. ููุฏ ุจุณูุท ุณุฑูุน. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงุฑู ุจูู PCMESTRI ู AVX2.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจุงููุณุจุฉ ููุง ุ ุงูุญุฏ ุงูุญุงูู ูู 1500. ูุฐุง ูู ุงูุญุฏ ุงูุฃูุตู ูุญุฌู ุงูุญุฒูุฉ ุงูุชู ุชุฃุชู ุฅูููุง. ูุฑู ุฃู ููุฏ AVX2 ุนูู ุงูุจูุงูุงุช ุงูุถุฎูุฉ ุฃุณุฑุน ุจูุซูุฑ ูู ูุญูู Pico. ูููู ูุนูู ุจุดูู ุฃุจุทุฃ ุนูู ุงูุจูุงูุงุช ุงูุตุบูุฑุฉ ุ ูุฃู ุงูุชุนูููุงุช ุฃุซูู ูู AVX2. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/se/5t/c2/se5tc2npli1yed8ypqkdkk3z-pm.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุงุจูุฉ ููููุงุฑูุฉ</font></font><code><strong>strspn</strong></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุฑุฑูุง ุงูุงุณุชุฎุฏุงู </font></font><code>strspn</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูุฅู ุงูุฃููุฑ ุชุฒุฏุงุฏ ุณูุกูุง ุ ุฎุงุตุฉ ุนูู ุงูุจูุงูุงุช ุงูุถุฎูุฉ. </font><font style="vertical-align: inherit;">ูู ุงููุญูู "ุงููุชุงููุฉ" ูุง ูููู ุงุณุชุฎุฏุงููุง </font></font><code>strspn</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/bf/08/vq/bf08vqlzni3dcjzxgiuj73zgszo.png"><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุทุงุจู Tempesta ุฃุณุฑุน ูุฃูุซุฑ ุฏูุฉ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุญูู ุงูุณุฑุนุฉ ูุฏููุง ูู ูุซู ูุฐูู. ุนูู ุงูุจูุงูุงุช ุงูุตุบูุฑุฉ ุ ุฅูู ุณุฑูุน ูุซู ูุญูู Pico ุ ุนูู CloudFlare ุงูุดุจูู. ููุน ุฐูู ุ ูุฅูู ูุง ูุชุฎุทู ุงูุฃุญุฑู ุบูุฑ ุงูุตุงูุญุฉ. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/5t/ns/lw/5tnslwsd-ywmrv1d4xaj5_ypwbw.png"><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููู ูุชู ุชุฑุชูุจ ุงููุญููุ</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุญุฏุฏ ุ ุจุตูุชูุง nginx ุ ุตููููุง ูู ูุญุฏุงุช ุงูุจุงูุช ููุชุญูู ูู ุจูุงูุงุช ุงูุฅุฏุฎุงู ุจูุงุณุทุชูุง - ููุฐุง ูู ููุฏูุฉ ุงููุธููุฉ. ููุง ูุนูู ููุท ูุน ูุชุฑุงุช ูุตูุฑุฉ ุ ูุณุชุฎุฏูู </font></font><code>likely</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฃู ุณูุก ุชูุฏูุฑ ุงููุฑูุน ูููู ุฃูุซุฑ ุฅููุงููุง ููุฎุทูุท ุงููุตูุฑุฉ ููู ููุฎุทูุท ุงูุทูููุฉ. ูุญู ูุฃุฎุฐ ูุฐุง ุงูููุฏ. ูุฏููุง ุญุฏ 4 ุจุณุจุจ ุงูุณุทุฑ ุงูุฃุฎูุฑ - ูุฌุจ ุฃู ููุชุจ ุดุฑุทูุง ููููุง ุฅูู ุญุฏ ูุง. ุฅุฐุง ูููุง ุจูุนุงูุฌุฉ ุฃูุซุฑ ูู 4 ุจุงูุช ุ ูุณูููู ุงูุดุฑุท ุฃูุซุฑ ุตุนูุจุฉ ูุงูุฑูุฒ ุฃุจุทุฃ.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">static</span> <span class="hljs-keyword">const</span> <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">char</span> uri_a[] __attribute__((aligned(<span class="hljs-number">64</span>))) = {
        <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>,
        <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>,
        <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>,<font></font>
        ...<font></font>
        <span class="hljs-comment">// Branch misprediction is more crucial for short strings</span>
        <span class="hljs-keyword">if</span> (likely(len &lt;= <span class="hljs-number">4</span>)) {
                <span class="hljs-keyword">switch</span> (len) {
                <span class="hljs-keyword">case</span> <span class="hljs-number">0</span>:
                    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
                <span class="hljs-keyword">case</span> <span class="hljs-number">4</span>:<font></font>
                    c3 = uri_a[s[<span class="hljs-number">3</span>]];
                    <span class="hljs-comment">// fall through to process other chars</span>
                <span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:<font></font>
                    c2 = uri_a[s[<span class="hljs-number">2</span>]];
                <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:<font></font>
                    c1 = uri_a[s[<span class="hljs-number">1</span>]];
                <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:<font></font>
                    c0 = uri_a[s[<span class="hljs-number">0</span>]];<font></font>
                }<font></font>
                <span class="hljs-keyword">return</span> (c0 &amp; c1) == <span class="hljs-number">0</span> ? c0 : <span class="hljs-number">2</span> + (c2 ? c2 + c3 : <span class="hljs-number">0</span>);<font></font>
        }</code></pre><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญููุฉ ุฑุฆูุณูุฉ ูุฐูู ูุจูุฑ. </font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุฏูุฑุฉ ุงููุนุงูุฌุฉ ุงูุฑุฆูุณูุฉ ุ ููุณู ุงูุจูุงูุงุช: ุฅุฐุง ูุงูุช ุทูููุฉ ุจูุง ููู ุงูููุงูุฉ ุ ูููู ุจูุนุงูุฌุฉ 128 ุฃู 64 ุฃู 32 ุฃู 16 ุจุงูุช ููู ูููุง. </font><font style="vertical-align: inherit;">ูู ุงูููุทูู ูุนุงูุฌุฉ 128 ููู ูููุง: ูู ููุงุฒุงุฉ ุฐูู ุ ูุณุชุฎุฏู ุงูุนุฏูุฏ ูู ูููุงุช ุงููุนุงูุฌ (ุงูุนุฏูุฏ ูู ุฎุทูุท ุงูุฃูุงุจูุจ) ูุงููุนุงูุฌ ุงููุงุฆู.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">for</span> ( ; unlikely(s + <span class="hljs-number">128</span> &lt;= end); s += <span class="hljs-number">128</span>) {<font></font>
        n = match_symbols_mask128_c(__C.URI_BM, s);<font></font>
        <span class="hljs-keyword">if</span> (n &lt; <span class="hljs-number">128</span>)
                <span class="hljs-keyword">return</span> s - (<span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">char</span> *)str + n;<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">if</span> (unlikely(s + <span class="hljs-number">64</span> &lt;= end)) {<font></font>
        n = match_symbols_mask64_c(__C.URI_BM, s);<font></font>
        <span class="hljs-keyword">if</span> (n &lt; <span class="hljs-number">64</span>)
                <span class="hljs-keyword">return</span> s - (<span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">char</span> *)str + n;<font></font>
        s += <span class="hljs-number">64</span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">if</span> (unlikely(s + <span class="hljs-number">32</span> &lt;= end)) {<font></font>
        n = match_symbols_mask32_c(__C.URI_BM, s);<font></font>
        <span class="hljs-keyword">if</span> (n &lt; <span class="hljs-number">32</span>)
                <span class="hljs-keyword">return</span> s - (<span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">char</span> *)str + n;<font></font>
        s += <span class="hljs-number">32</span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">if</span> (unlikely(s + <span class="hljs-number">16</span> &lt;= end)) {<font></font>
        n = match_symbols_mask16_c(__C.URI_BM128, s);<font></font>
        <span class="hljs-keyword">if</span> (n &lt; <span class="hljs-number">16</span>)
                <span class="hljs-keyword">return</span> s - (<span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">char</span> *)str + n;<font></font>
        s += <span class="hljs-number">16</span>;<font></font>
}</code></pre><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฐูู. </font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุดุจู ููุงูุฉ ุงููุธููุฉ ุงูุจุฏุงูุฉ. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุงู ูุฏููุง ุฃูู ูู 16 ุจุงูุช ุ ูุฅููุง ูุนุงูุฌ 4 ุจุงูุช ูู ุญููุฉ ุ ุซู ูุง ูุฒูุฏ ุนู 3 ุจุงูุช ูู ุงูููุงูุฉ.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">while</span> (s + <span class="hljs-number">4</span> &lt;= end) {<font></font>
        c0 = uri_a[s[<span class="hljs-number">0</span>]];<font></font>
        c1 = uri_a[s[<span class="hljs-number">1</span>]];<font></font>
        c2 = uri_a[s[<span class="hljs-number">2</span>]];<font></font>
        c3 = uri_a[s[<span class="hljs-number">3</span>]];
        <span class="hljs-keyword">if</span> (!(c0 &amp; c1 &amp; c2 &amp; c3)) {<font></font>
                n = s - (<span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">char</span> *)str;
                <span class="hljs-keyword">return</span> !(c0 &amp; c1) ? n + c0 : n + <span class="hljs-number">2</span> + (c2 ? c2 + c3 : <span class="hljs-number">0</span>);<font></font>
        }<font></font>
        s += <span class="hljs-number">4</span>;<font></font>
}<font></font>
<font></font>
c0 = c1 = c2 = <span class="hljs-number">0</span>;
<span class="hljs-keyword">switch</span> (end - s) {
        <span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:<font></font>
                c2 = uri_a[s[<span class="hljs-number">2</span>]];
        <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:<font></font>
                c1 = uri_a[s[<span class="hljs-number">1</span>]];
        <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:<font></font>
                c0 = uri_a[s[<span class="hljs-number">0</span>]];<font></font>
}<font></font>
<font></font>
n = s - (<span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">char</span> *)str;
<span class="hljs-keyword">return</span> !(c0 &amp; c1) ? n + c0 : n + <span class="hljs-number">2</span> + c2;</code></pre><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู ุจุชุญููู ุฃููุนุฉ ูุจูุงูุงุช ุงูุจุช -</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฐู ูู ุงูุฎูุงุฑุฒููุฉ ุงูุฑุฆูุณูุฉ ูููููู ุงูุฑุฆูุณู ูููุธููุฉ. ููุฏู ุฌุฏูู ASCII (ููุง ูู ุงูุตูุฑุฉ) ูุน 16 ุตููุง ู 8 ุฃุนูุฏุฉ. ุฃููุงู ุ ูููู ุจุชุดููุฑ ุตููู ุงูุฌุฏูู ูู ุงูุณุฌู ุงูุฃูู ูู BM URI: ุงูุตู ุงูุฃูู ูุงูุซุงูู. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/9l/cv/k2/9lcvk2_wg7qs6svdibpx9m1b09c.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุฑููุฒ ุงููุนููุฉ ุงูุชู ูุณูุญ ุจูุง ูู </font></font><code>0 @ P p</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ู </font></font><code>2 B R q R</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ูุชู ุชุฑููุฒ ุนูู ุงููุญู ุงูุชุงูู: </font></font><code>b8 = inv(1011 1000) = 0 @ P p</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ </font></font><code>f8 = inv(1111 1000) = 2 B R q R</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููู ุจุงูุชุฑููุฒ ุจุงูุชุฑุชูุจ ุงูุนูุณู: ูุจุฏุฃ ุนูุฏ 0 ุ ููุง ููุณูุญ ุจุดุฎุตูุฉ ุงูุฎุฏูุฉ ุงูุฃููู ุ ุซู ุงููุญุฏุงุช ูู ุงููุณููุญ ุจูุง. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุนููู ุฃููุนุฉ ุจุช ASCII.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุนูู ุณุจูู ุงููุซุงู ุ ูุฃุชู ุงูุณุทุฑ </font></font><code>"pr"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: ุงูุญุฑู ุงูุฃูู ูู ุงูุณุทุฑ ุงูุฃูู ูู ASCII ุ ูุงูุซุงูู ูู ุงูุณุทุฑ ุงูุซุงูู. ูููู ุจุชุดุบูู ุนุจุงุฑุฉ ุชุจุฏูู ุนุดูุงุฆู ุ ูุงูุชู ุชููู ุจุฎูุท ุตููู ุงูุฌุฏูู ุงููุดูุฑุฉ ููููุง ูุชุฑุชูุจ ูุฐู ุงูุฃุญุฑู ูู ุงูุฅุฏุฎุงู.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/_i/zr/ol/_izrolii19qo5olblx0zzjgq_iu.jpeg"><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุนุฑูู ุงูุนููุฏ ููุฅุฏุฎุงู.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจุนุฏ ุฐูู ุ ูุถุน ุฃุนูุฏุฉ ุฌุฏูู ASCII ูู ุณุฌู ูุฎุชูู. ุซู "ูุนุจุฑ" ุณุฌูุงุช ุงูุฃุนูุฏุฉ ูุงูุตููู ุ ููุญุตู ุนูู ูุฑุงุณูุงุช: ุดุฎุตูุชูุง ุฃู ูุง. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุธุฑูุง ูุฃู ุงูุฃุนูุฏุฉ ูู ุฃูู 4 ุจุช ูู ุงูุจุงูุช ุ ูุฅููุง ููุชูู ุฅูู ุงููุณุงุฑ. ูุญุชูู AVX ุนูู ุฅุฒุงุญุฉ 2 ุจุงูุช ููุท ุ ูุฐุง ูู ุฃููุงู ุจุชุญููู ุงูุจุงูุช ุ ุซู n ูุน ุงูููุงุน ุงูุฎุงุต ุจูุง ููุญุตูู ุนูู ูุญุฏุงุช ุงูุจุช ุงููุงูุฉ ููุท. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/d9/xy/xr/d9xyxrmjyplbnhkpwrxbqblians.png"><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุฑุชูุจ ุฃุนูุฏุฉ ASCII</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ุจุชุดุบูู ุงูุชุฑุชูุจ ุงูุนุดูุงุฆู ุงูุซุงูู ุ ุงููู ุงูุนููุฏ ุฅูู ุงูููุงุถุน ุงููุทููุจุฉ. ูู ููุชุง ุงูุญุงูุชูู ุ ุงูุจุงูุช ุงููุฏุฎู ูู ุงูุนููุฏ ุงูุฃุฎูุฑ ุ ูุฐูู ูู ุงูููุถุน ุงูุฃูู ูุงูุซุงูู ูุญุตู ุนูู ููุณ ุงูุนููุฏ. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/hx/g1/2s/hxg12sn4xw-qlt7miq97k0pnwgy.png"><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชูุงุทุน ุงูุฃุนูุฏุฉ ูุตููู ุงูุฃููุนุฉ</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ูููู </font></font><code>and</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">("ุจุชูุงุทุน" ุงูุฃุนูุฏุฉ ูุน ุงูุฃุนูุฏุฉ) ููุญุตู ุนูู ุฃู ุจูุงูุงุช ุงูุฅุฏุฎุงู ุตุงูุญุฉ - ุงููุชูุฌุฉ</font></font><code>and</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุชูุงุทุน ุงูุฃุนูุฏุฉ ูุงูุตููู ููุณ ุตูุฑูุง. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/cd/oa/kw/cdoakwgjf-oipltg_xeyyglobn8.png"><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุญุณุจ ุนุฏุฏ ุงูุฃุตูุงุฑ ูู ุงูููุงูุฉ. </font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฌูุนูุง ูููุง ูู ุงููุชุฌู ููุนูุฏูุง </font></font><code>int</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅูู ุงููุฎุฑุฌุงุช - ุจูู ุจุณุงุทุฉ. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/f9/ci/tl/f9citlkgsjvtxifi9qe3pdxu7su.png"><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุฎุตูุต ุงูุญุฑูู ุงููุฌุงุฆูุฉ. </font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุฎูุงู ุงูุนูู ูุน ุฌุฏูู ASCII ุ ูุญุตู ุนูู ููุฒุฉ ุฑุฎูุตุฉ: ูุณุชุฎุฏู ุฌุฏุงูู ุซุงุจุชุฉ ุ ูููู ูุง ุดูุก ูููุน ูู ุณุคุงู ุงููุณุชุฎุฏู ุนู ุงูุฃุจุฌุฏูุฉ ุงููุชุงุญุฉ ูุนูุงููู URL ูุฃุณูุงุก ูููู ุงูุฑุคูุณ ุงููุฎุชููุฉ. </font><font style="vertical-align: inherit;">ูุณุชุฎุฏู ุทูุจ HTTP URI ูุงูุฑุฃุณ 8 ุฃุญุฑู ุฃุจุฌุฏูุฉ (ุฒุงุฆุฏ ุฃู ูุงูุต) ูุชุญููู ุทูุจ HTTP ูุงุญุฏ. </font><font style="vertical-align: inherit;">ูููู ุชุญููู ูุฐู ุงูุฌุฏุงูู ูู ููุณ ุงูุฑูุฒ </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููุงุฑูุชูุง ูู ุฃุจุฌุฏูุฉ ูุงุญุฏุฉ ูุญุฏุฏุฉ ูู ูุจู ุงููุณุชุฎุฏู ุ</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุนุฑู URI ุตุงูุญ. </font><font style="vertical-align: inherit;">ุฅุฐุง ูู ููู ุงูุฃูุฑ ูุฐูู ุ ููู ูุฎุชูู.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุฌูุงุช</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุนุถ ุงูุญุงูุงุช ุงูุชู ูุฏ ูููู ูููุง ูุฐุง ูููุฏูุง. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฌูู SSRF ูุน BlackHat'17</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ("ุนุตุฑ ุฌุฏูุฏ ูู SSRF"): </font></font><code><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">http://foo@evil.com:80@google.com/</a></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- ุฑูุฒ ุนูุงูุฉ ุบูุฑ ูุฑุฌุญ. </font><font style="vertical-align: inherit;">ูู ุจุนุถ ุงูุชุทุจููุงุช ูุชู ุงุณุชุฎุฏุงูู ุ ูู ุงูุจุนุถ ุงูุขุฎุฑ ูุง. </font><font style="vertical-align: inherit;">ูููู ุฅุฐุง ููุช ูุง ุชุณุชุฎุฏูู ุ ูููููู ุงุณุชุจุนุงุฏู ูู ุงูุฃุจุฌุฏูุฉ ุงูุตุงูุญุฉ ูุณูุชู ุญุธุฑ ุงููุฌูู. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RCE ุงููุฌูู:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ยซุงููุนูู ูู ุฅุฌุฑุงุก ูุฌูุงุช ุญูู ุฃูุฑ ูุซูยปุ BSides'16: </font></font><code>User-Agent: ...;echo NAELBD$((26+58))$echo(echo NAELBD)NAELBD...</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูุนุฏ User-Agent ุฑุฃุณูุง ุซุงุจุชูุง ุ ูููู ููุงู ุญุงูุงุช ูุฌูู RCE ุนูุฏูุง ูุฃุชู ุงูุจุนุถ </font></font><code>shell</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุดุฎุตูุงุช ุบูุฑ ููุทูุฉ ูู User-Agent. </font><font style="vertical-align: inherit;">ูุญู ูุญูู ุฃููุณูุง ุจุงุณุชุซูุงุก ุนูุงูุฉ ุงูุฏููุงุฑ. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุชุงุจุฉ ููู ุงููุณุงุฑ ุงููุณุจู</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ุงูุญุงูุฉ ุงูุฃุฎูุฑุฉ ูู ูุง ูุงู ูุฏู Google ูู ุนุงู 2016. </font><font style="vertical-align: inherit;">ุฌุงุกุช ุงูุฃููุงุณ ุงููุชุนุฑุฌุฉ ุ ุงูููุทุชูู ุ ุฅูู URI </font></font><code>.../gallery?q=%0a{}*{background:red}/..//apis/howto_guide.html</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูุฐู ุฃุญุฑู ุบูุฑ ูุญุชููุฉ ูููู ุงุณุชุจุนุงุฏูุง ูู ุงูุฃุจุฌุฏูุฉ.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strcasecmp ()</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐุง ุฑูุฒ ุชุงูู ุฅูู ุญุฏ ูุง. </font><font style="vertical-align: inherit;">ูุงุฑูุง ุฃูุถูุง ุณูุงุณู ูู 32 ุจุงูุช ุ ุตููู ููู ููููุง.</font></font><br>
<br>
<pre><code class="cpp hljs">__m256i CASE = _mm256_set1_epi8(<span class="hljs-number">0x20</span>);<font></font>
<font></font>
<span class="hljs-comment">// Hackerโs Delight for signed comparison: -0x80 for both operands</span>
__m256i A = _mm256_set1_epi8(<span class="hljs-string">'A'</span> โ <span class="hljs-number">0x80</span>);<font></font>
__m256i D = _mm256_set1_epi8(<span class="hljs-string">'Z'</span> - <span class="hljs-string">'A'</span> + <span class="hljs-number">1</span> โ <span class="hljs-number">0x80</span>);<font></font>
<font></font>
<span class="hljs-comment">// Hackerโs Delight: 'a' &lt;= v &lt;= 'z' to</span>
<span class="hljs-comment">// v - ('a' โ 0x80) &lt; 'z' - 'a' + 1 - 0x80</span><font></font>
__m256i sub = _mm256_sub_epi8(str1, A);<font></font>
__m256i cmp_r = _mm256_cmpgt_epi8(D, sub);<font></font>
__m256i lc = _mm256_and_si256(cmp_r, CASE);<font></font>
__m256i vl = _mm256_or_si256(str1, lc);<font></font>
__m256i eq = _mm256_cmpeq_epi8(vl, str2);<font></font>
<span class="hljs-keyword">return</span> ~_mm256_movemask_epi8(eq);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุนุทู ุงูุชุณุฌูู ุณุทุฑ ูุงุญุฏ ููุท ุ ูุฃูู ูู ุงูุซุงููุฉ ูููุง ุจุจุฑูุฌุฉ ุงูุซูุงุจุช ูู ุงููุญูู ุงููุบูู ูุฏููุง ูู ุงูุญุงูุฉ ุงูุตุบูุฑุฉ. </font><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃู ูุฏููุง ููุงุฑูุงุช ูููุฉ ุ ูุฅููุง ูุทุฑุญ 128 ูู ูู ุจุงูุช (ุฎุฏุนุฉ ูู Hacker's Delight). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุงุฑู ุฃูุถูุง ูุทุงู ุญุฑู ุตุงูุญ: ุณูุงุก ูุงู ุจุฅููุงููุง ุงูุชุณุฌูู ูู ูุฐู ุงูุณูุณูุฉ ุฃู ูุง ุ ูู ูู ุญุฑู ุฃู ูุง. </font><font style="vertical-align: inherit;">ูู ููุช ุงูุชุญูู ูู ุฐูู ุ ุจุฏูุงู ูู ููุงุฑูุชูู ูู a ุฅูู z ุ ูููููุง ุงุณุชุฎุฏุงู ููุงุฑูุฉ ูุงุญุฏุฉ ููุท (ุฎุฏุนุฉ ูู Hacker's Delight) ูุงูุงูุชูุงู ุฅูู ุซุงุจุช.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strcasecmp ุงูุฃุฏุงุก ()</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tempesta ุฃุณุฑุน ุจูุซูุฑ ูู GLIBC ุ ุญุชู ุงูุฅุตุฏุงุฑ ุงูุฌุฏูุฏ (18 ุฃู 19). </font></font><code>strcasecmp()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณุชุฎุฏู </font><font style="vertical-align: inherit;">ุงูุฑูุฒ </font><font style="vertical-align: inherit;">ุฃูุถูุง AVX ุ ูููู ููุณ ุงูุฅุตุฏุงุฑ ุงูุซุงูู. </font><font style="vertical-align: inherit;">AVX2 ุฃุณุฑุน ุ ูุฐูู Tempesta ูุฏูู ุฑูุฒ ุฃุณุฑุน.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/wx/zi/pb/wxzipbzdsbvge8u_abhsnok-gfa.png"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงุฉ ููููุณ FPU</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุณุชุฎุฏู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุญูุงุช ูุนุงูุฌ ุงููุชุฌู</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - ููู ูุชููุฑุฉ ูู ุงูููุงุฉ. ุชุชู ูุนุงูุฌุฉ ุชุนูููุงุช ุงููุชุฌู ุจูุงุณุทุฉ ูุญุฏุฉ ูุนุงูุฌ FPU. ูุฐู ููุณุช ูุญุฏุฉ ุงููุนุงูุฌ ุงูุฑุฆูุณูุฉ ุ ูููุณุช ุงูุณุฌูุงุช ุงูุฑุฆูุณูุฉ ุ ูููููุง ูุจูุฑุฉ ุฌุฏูุง. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐูู ุ ููุงู ุชุญุณูู ูู Linux. ุฅุฐุง ุงูุชูููุง ูู ุงูููุงุฉ ุฅูู ูุณุงุญุฉ ุงููุณุชุฎุฏู ูุงูุนูุฏุฉ ุ ููู ูุญูุธ ุณูุงู ุณุฌูุงุช FPU (XMM ุ YMM ุ ZMM): ูุบูุฑ ุณูุงู ุณุฌูุงุช ูุญุฏุฉ ุงููุนุงูุฌ ุงูุฑุฆูุณูุฉ ููุท. ูู ุงูููุชุฑุถ ุฃู ููุงุฉ ูุธุงู ุงูุชุดุบูู ูุง ุชุนูู ูุน ุงูุงูุชุฏุงุฏ ุงููุชุฌู ูููุนุงูุฌ. ูููู ุฅุฐุง ููุช ูู ุญุงุฌุฉ ุฅูููุงุ ุนูู ุณุจูู ุงููุซุงูุ ูููู ุชุดููุฑ ููุนู ุฐููุ ูููู ุงูุญุงุฌุฉ ุฅูู ุงุณุชุฎุฏุงู </font></font><code>fpu_begin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ู </font></font><code>fpu_end</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญูุธ ูุงุณุชุนุงุฏุฉ ุณูุงู ุงูุณุฌู FPU:</font></font><br>
<br>
<pre><code class="cpp hljs">__kernel_fpu_begin_bh();<font></font>
memcpy_avx(dst, src, n);<font></font>
__kernel_fpu_end_bh();<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐู ูุญุฏุงุช ูุงูุฑู ุฃุตููุฉ ุชููู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุญูุธ ูุงุณุชุนุงุฏุฉ ุญุงูุฉ ูุญุฏุฉ ุงููุนุงูุฌ</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ููู ุงููุณุคููุฉ ุนู ุชุณุฌููุงุช ุงููุชุฌูุงุช. </font><font style="vertical-align: inherit;">ูุฐู ููุงุฑุฏ ุจุทูุฆุฉ ุฅูู ุญุฏ ูุง.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AVX ู SSE</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุจู ูุนุงููุฑ ุญูุธ ุณูุงู FPU ูุงุณุชุนุงุฏุชู ุ ููุงู ุจุถุน ูููุงุช ุญูู ุนูููุงุช ูุงููุงุช ุงูุฃูุฑุงุถ. </font><font style="vertical-align: inherit;">ููุงุฐุง ูููู ูู ุงูููุทูู ูู ุจุนุถ ุงูุฃุญูุงู ุงูุนูู ูุน ุงููุฌูุนุ </font><font style="vertical-align: inherit;">ูู ุจุนุถ ุงูุฃุญูุงู ุ ูููุดุฆ GCC ุฑูุฒูุง ุฏูู ุงููุณุชูู ุงูุฃูุซู. </font><font style="vertical-align: inherit;">ุงููุดููุฉ ูู ุฃูู ูู ุทุฑุงุฒุงุช ุงููุนุงูุฌุงุช ุงููุฏููุฉ ุ ููุงู ุนููุจุฉ ูุจูุฑุฉ ูู ุงูุงูุชูุงู ูู SSE ุฅูู AVX. </font><font style="vertical-align: inherit;">ูุญุชูู ุฏูู ูุฌูุณ ุงูุชุนุงูู ุงูุฎููุฌู ุนูู ููุชุงุญ ุฌุฏูุฏ </font></font><code>vzeroupper</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- ุงุณุชุฎุฏูู ุญุชู ูุง ูููุฏ ูุฐู ุงูุชุนูููุงุช </font></font><code>vzeroupper</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ููุง ููุณุญ ุงูุณุฌูุงุช ููุฒูู ูุฐู ุงูุนููุจุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุง ุชุญุชุงุฌ ุฅูู ุงุณุชุฎุฏุงู ูุฐู ุงูุชุนูููุงุช ุฅูุง ุฅุฐุง ููุช ุชุนูู ูุน ุฑูุฒ ูุฏูู ุชู ุชุฌููุนู ูู SSE ูู ูุจู ุทุฑู ุซุงูุซ. </font><font style="vertical-align: inherit;">ูุฐู ููุณุช ูุถูุชูุง ููููููุง ุงูุชุฎูุต ูู ูุฐู ุงูุชุนูููุงุช ุจุฃูุงู.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FPU</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฏููุง </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงูู ุชููุงุฆู</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ุงููุนุงูุฌ. ูุฐุง ูุนูู ุฃูู ูู ุฃู ุฑูุฒ ูุณุงุญุฉ ูุณุชุฎุฏู ุณุชููู ููุงู ุนูููุงุช ูุชุฌู. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/n9/vy/0w/n9vy0wal4alh1eelo1rbdjabavc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชุณุชุฎุฏู ุฃู ุนูููุชูู ูู ุงููุธุงู ููุญูุงุช ูุนุงูุฌ ุงููุชุฌู. ุนูุฏูุง ุชูุชูู ุงูุนูููุฉ ุฅูู ุงูููุงุฉ ูุงูุนูุฏุฉ ุ ูุง ุชุถูุน ููุชู ูู ุชูููุฑ ูุงุณุชุนุงุฏุฉ ุญุงูุฉ ูุงูู ุงููุนุงูุฌ. ูููู ุฅุฐุง ููุช ุจุงูุชุจุฏูู ูู ูุณุงุญุฉ ูุณุชุฎุฏู ุฅูู ุฃุฎุฑู (ุชุจุฏูู ุงูุณูุงู) ุ ูุจุงูุฅุถุงูุฉ ุฅูู ุญูููุฉ ุฃู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ูู ุงููุณุชูู ุงูุฃูู ูุนุทูุฉ ููุงู ุ ูุฅู ูุญุฏุฉ ุชุจุฏูู ุงูุณูุงู ูู FPU ุชุจุฏุฃ / ุชูุชูู ุฃูุถูุง ุจุดูู ุณูุฆ. ุงูุนูููุฉ ููููุฉ ููุบุงูุฉ - ุนูุงูุฉ ููุงุณ ูุตุบุฑุฉ.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุงูููุงููุณ ุงูุฏูููุฉ ุ ูู ุดูุก ุฏุงุฆููุง ูุง ูููู ูุซูุฑูุง ุ ููู ุงูุนูููุฉ ููููุฉ ููุบุงูุฉ. </font><font style="vertical-align: inherit;">ูุฐูู ุ ูู ูุณุงุญุฉ ุงููุณุชุฎุฏู ุ ูู ุจุชุจุฏูู ุงูุณูุงู ููุชุฑุฉ ุทูููุฉ. </font><font style="vertical-align: inherit;">ูู ุงูููุงุฉ ุ ููุณ ูุฏููุง ุชุจุฏูู ุงูุณูุงู ุ ูุฐูู ูู ุดูุก ุณุฑูุน. </font><font style="vertical-align: inherit;">ูููู ุจุญูุธ ูุงุณุชุนุงุฏุฉ ูุนุงูุฌ ุงููุชุฌู ูุฑุฉ ูุงุญุฏุฉ ููุท ููุฌููุนุฉ ูุจูุฑุฉ ุจูุง ููู ุงูููุงูุฉ ูู ุงูุญุฒู.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅูุชุจููุงููุจุณ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุงูุจุฏุงูุฉ ุ ุนุฑุถุช ุฎูุงุฑ ุฌุฏูู ุจุญุซ ูุชุญุณูู ุฑูุฒ ุงูุชุจุฏูู: ุนูููุฉ ุทูููุฉ ุ ุชุนุฏุงุฏ ุ ุชุฌููุน ุฌุฏูู ุงูุชุจุฏูู ูู ุตููู ูุงุชุจุน ุงูุฅุดุงุฑุฉ ุงููุฒุฏูุฌุฉ ูููุคุดุฑ ุงูุฐู ูููุฒ ููู ูุฐุง ุงูุตููู. ูุฐุง ุณููุงุฑูู ููุฌูู ุดุจุญ ูุณุชุบู ุชูููุฐ ุงููุถุงุฑุจุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฏู Google </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงู</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฌูุฏ </font><font style="vertical-align: inherit;">ุญูู ููููุฉ ุชุฑุชูุจ ุนูููุฉ ุฅุนุงุฏุฉ ุงูุฅุดุงุฑุฉ ุงููุฒุฏูุฌุฉ ูููุคุดุฑุงุช ูู ุงููุฌูุนุงุช ุงูุญุฏูุซุฉ ูู ุงูููุช ุงูุญุงูู (ููุฐ ุจุฏุงูุฉ 2018). ูุง ูุนูู ุจุดูู ุฌูุฏ ููุบุงูุฉ. ุฅุฐุง ุชู ุชุฎุฒูู ุจุนุถ ุงูุนูุงููู ุณุงุจููุง ูู ุงูุณุฌู ูุฐูุจูุง ุฅูู ูุฐุง ุงูุนููุงู ุ ููุฏููุง ุงูุขู ุฑูุฒ ูุฎุชูู.</font></font><br>
<br>
<pre><code class="cpp hljs">jmp *%r11 <font></font>
    call l1<font></font>
l0: pause<font></font>
    lfence<font></font>
    jmp l0<font></font>
l1: mov %r11, (%rsp)<font></font>
    ret</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููู ูุนููุ ูููู "ุจุงุณุชุฏุนุงุก" ุงููุธููุฉ ุนูู l1 ุ ูุชุฐูุจ ุงูุนูููุฉ ุฅูู ูุฐุง ุงูุชุตููู ููููู ุจุงุฎุชุฑุงู: ููุง ูู ุฃููุง ูุนูุฏ ูู ูุธููุฉ (ููู ููุณุช ูุฐูู) ุ ููููุง ูุนูุฏ ูุชุงุจุฉ ุนููุงู ุงูุฅุฑุฌุงุน. ุนูุฏูุง ูููู ุจุงูุชุนูููุงุช </font></font><code>call</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ </font><font style="vertical-align: inherit;">ูุถุน </font><font style="vertical-align: inherit;">ุนููุงู ุงูุฅุฑุฌุงุน ุ ูุงูุนููุงู ุงูุญุงูู ุนูู ุงูููุฏุณ ุ ููุนูุฏ ูุชุงุจุชู ุจุงููุญุชููุงุช ุงูุถุฑูุฑูุฉ ููุชุณุฌูู ูููุชูู ุฅูู l1. ููู ุงููุนุงูุฌ ุ ุนูุฏูุง ูุนูู ุงูุฌุงูุจ ุงููุณุจู ุ ูุฑู ุฃู ููุงู ูุธููุฉ ุ ุซู ุญุงุฌุฒูุง. ููููุง ูุฐูู ุ ุณูููู ูู ุดูุก ุจุทูุฆูุง - ููู ูุฑูู ุงูุฌูุจ ุงููุณุจู ููุชุฎูุต ูู ุถุนู Spectre. ุงูุฑูุฒ ุจุทูุก ุ ููุฎูุถ โโุงูุฃุฏุงุก ุจูุณุจุฉ 15ูช. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงููุฌูู ุงูุชุงูู ูุณุจููุง ูู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Meltdown.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ููู ูุฎุตุตุฉ ูุนูููุงุช ูุณุงุญุฉ ุงููุณุชุฎุฏู ููุท. </font><font style="vertical-align: inherit;">ูู ุงููุคูู ุฌุฏูุง ูุฑุงุกุฉ ุฐุงูุฑุฉ kernel ูู ูุณุงุญุฉ ุงููุณุชุฎุฏู. </font><font style="vertical-align: inherit;">ูุชู ููุน ุงููุฌูู ูู ุฎูุงู Kernel Pate Table Isolation (KPTI) ุ ูุงูุฐู ูุชู ุชุฌููุนู ูู ููุงุฉ ุฌุฏูุฏุฉ ุจุดูู ุงูุชุฑุงุถู. </font><font style="vertical-align: inherit;">ููู KPTI ุจุงูุธ ุงูุซูู ููุบุงูุฉ ุ ูุตู ุฅูู ุชุฏููุฑ ุฃุฏุงุก 30-40ูช ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุง ููุงุณ ุจูุงุณุทุฉ MariaDB</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุฑุฌุน ุฐูู ุฅูู ุญูููุฉ ุฃูู ูู ูุนุฏ ูุฏูู ุชุญุณูู TLB ูุณูู: ูุชู ูุตู ูุณุงุญุฉ ุนููุงู kernel ูุงููุนุงูุฌ ุชูุงููุง ูู ุฌุฏุงูู ุตูุญุงุช ูุฎุชููุฉ (ูุจู ุฐูู ุ ุธู TLB ุงููุณูู ูุฑุณู ูุณุงุญุฉ kernel ุฅูู ุฌุฏูู ุงูุตูุญุงุช ููู ุนูููุฉ). </font><font style="vertical-align: inherit;">ูุฐุง ูุคูู ููุณุงุญุฉ ุงููุณุชุฎุฏู ุ ูููู ููุณ ูู Tempesta FW ุ ุงูุฐู ูุนูู ุชูุงููุง ูู ุงูููุงุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุนุถ ุงูุฑูุงุจุท ุงููููุฏุฉ:</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=http://natsys-lab.blogspot.com/2014/11/the-fast-finite-state-machine-for-"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุขูุฉ ุงูุญุงูุฉ ุงููุญุฏูุฏุฉ ุงูุณุฑูุนุฉ ูุชุญููู HTTP</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=http://natsys-lab.blogspot.com/2016/10/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุนุงูุฌุฉ ุณูุงุณู HTTP ุจุงุณุชุฎุฏุงู C ู SSE4.2 ู AVX2</font></font></a></li>
</ul><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฑุญุฉ ุงููุงูุฑ</font></font></a></li>
</ul><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงุฌู ุงูุงูููุงุฑ ูุณุจูุชุฑ ุงููุณุชูุฏุงุช</font></font></a></li>
</ul><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Intelpocalypse: goodbye fast system calls</a></li>
</ul><br>
<blockquote>     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Saint HighLoad++</a>        .       , 6   -- (  ,      Saint HighLoad++)  ,       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="> web </a>. <br>
<br>
     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">PHP Russia</a>: 13   ,  .       โ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">KnowledgeConf</a>, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">++</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">TechLead Conf</a> โ     .     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="></a>  , ,    .<br>
</blockquote></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar493226/index.html">ููููุฉ ูุฑุงุกุฉ ูุฅุตูุงุญ 100000 ุณุทุฑ ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุฃุณุจูุนููุง</a></li>
<li><a href="../ar493230/index.html">ุฅุตุฏุงุฑ ุฌุฏูุฏ ูู PageSpeed โโInsights ูู Google ูุฏุนูู ูู Lighthouse 6 (ุชุฌุฑูุจู): ุชุญูู ูู ุฃุฏุงุก ูููุนู</a></li>
<li><a href="../ar493232/index.html">ุชุงุฑูุฎ ุนููู ูู Open Product LLC</a></li>
<li><a href="../ar493234/index.html">ING ุชุทูู Lion: ููุชุจุฉ ููููุงุช ููุจ ููุชุฌุฉ ููุนูููุฉ ุงูุชูููุฉ ููุฑูุฉ</a></li>
<li><a href="../ar493236/index.html">ุงูุนูุงูุฉ ุงููุฌููุฉ: ุฌุฐูุน ุฎุงุฑุฌูุฉ ูู ุญุงูุฉ ุฅุฑุณุงู ุงูุทูุจ</a></li>
<li><a href="../ar493244/index.html">ูุงุฐุง ูููู ููุญุงุณูุจ ุงููู</a></li>
<li><a href="../ar493248/index.html">ูุฏูุฉ ุนุจุฑ ุงูุฅูุชุฑูุช "ูุฑุต Winnum ููุชุญูููุงุช ุงูุตูุงุนูุฉ"</a></li>
<li><a href="../ar493250/index.html">ูุง ูุญุฏุซ ูุน ุงูุณูุฑ ุงูุขู - ูููู ุชุญูู ููุณู ุฃุซูุงุก ุงูููู</a></li>
<li><a href="../ar493252/index.html">ุฎุจุฑุฉ ุงูุชุฏุฑูุณ ูู ูุฏุฑุณุฉ ุงูุชูููุฉ ุ ุฃู ููุงุฐุง ุชุญุชุงุฌ ุฅูู ุงูุฐูุงุจ ุฅูู ุงููุฏุฑุณุฉ ุจุนุฏ ุงูุฌุงูุนุฉ</a></li>
<li><a href="../ar493254/index.html">ูุงู ูุธุงู ุงูุชูุตุช ุงูุฌูุงุนู ุนูู ุงูุณูุงู ุนูููุง ุนุฏูู ุงููุงุฆุฏุฉ ุจุงููุณุจุฉ ูููุชุจ ุงูุชุญูููุงุช ุงููุฏุฑุงูู</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>