<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🍉 🍋 👲🏽 Bisakah saya menulis skrip dalam C ++? 👲🏻 🚝 👩‍🚒</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Baru-baru ini saya harus terjun lagi / lagi ke dunia pemrograman skrip Linux yang indah. Pada prinsipnya, masalahnya tidak terlalu rumit, tetapi karen...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Bisakah saya menulis skrip dalam C ++?</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/488962/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/-7/xg/my/-7xgmyrtvd5lv6l5kws9xiaulvg.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Baru-baru ini saya harus terjun lagi / lagi ke dunia pemrograman skrip Linux yang indah. Pada prinsipnya, masalahnya tidak terlalu rumit, tetapi karena saya tidak sering menemukan tugas seperti itu, saya mempelajarinya lagi setiap waktu. Saya tahu pasti bahwa besok saya akan lupa banyak dan dalam sebulan saya akan google lagi bagaimana melakukan ini atau itu. Masalahnya ternyata masih sering Anda tidak menulis skrip lagi, tetapi Anda memodifikasi yang sudah ada yang ditulis oleh seseorang. Dan itu mungkin bukan bash, tetapi sh atau sesuatu yang lain ... Ada perbedaan dalam sintaksnya, apa yang bekerja di sh harus bekerja di bash, tetapi tidak selalu sebaliknya. Dan jika ada tanda hubung atau abu? Saya tidak tahu ... Masih ada perbedaan dalam bahasa skrip ini, dan mereka membingungkan. Dan tentu saja, bagi saya pribadi, ceri pada kue adalah ketika skrip memanggil beberapa sed atau awk dan ada parameter seperti pada baris perintah yang Anda lihat dan heran.Jelas bahwa ini semua tergantung pada kualifikasi programmer, tetapi tidak semuanya cocok di kepala saya. Dan sekarang kesabaran saya hilang dan saya berpikir bahwa mulai sekarang saya ingin mencoba menulis skrip dalam c ++ ...</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya mengerti bahwa untuk administrator sistem yang sebenarnya, pemikiran saya mungkin tampak ambisius. </font><font style="vertical-align: inherit;">Namun mengapa tidak?</font></font><a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jadi idenya sangat sederhana. </font><font style="vertical-align: inherit;">Saya ingin menulis skrip c ++ dengan cara yang sama seperti skrip biasa ditulis, yaitu, baris pertama skrip harus berisi shebang dan indikasi path ke "interpreter":</font></font><br>
<br>
<pre><code class="plaintext hljs">#!/bin/c++</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Baris-baris selanjutnya dari skrip hanya akan menjadi program c ++ reguler. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya harus menyiapkan "juru bahasa" dari skrip c ++. </font><font style="vertical-align: inherit;">Anda dapat menulisnya pada apa saja, setidaknya pada bash (ini adalah yang terakhir, meskipun tidak persis) </font><font style="vertical-align: inherit;">Tentu saja, itu tidak akan menjadi juru bahasa, tetapi seorang penyusun. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Itu yang saya lakukan:</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-meta">#!/bin/bash
</span><font></font>
msg_file=/dev/null<font></font>
<span class="hljs-comment">#msg_file=/dev/stdout</span><font></font>
<font></font>
tmp_path=<span class="hljs-variable">$HOME</span><span class="hljs-string">"/.cache/c++/"</span>
mkdir -p <span class="hljs-variable">$tmp_path</span>
tmp_file=<span class="hljs-variable">$1</span><span class="hljs-string">".c++"</span>
exe_file=<span class="hljs-variable">$1</span><span class="hljs-string">".bin"</span>
<span class="hljs-keyword">if</span> <span class="hljs-built_in">test</span> <span class="hljs-variable">$1</span> -nt  <span class="hljs-variable">$tmp_path</span><span class="hljs-variable">$exe_file</span>; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Need to recompile.."</span> &gt; <span class="hljs-variable">$msg_file</span>
    tail -n +2 <span class="hljs-variable">$1</span> &gt; <span class="hljs-variable">$tmp_path</span><span class="hljs-variable">$tmp_file</span>
    <span class="hljs-built_in">eval</span> <span class="hljs-string">"g++ -o <span class="hljs-variable">$tmp_path</span><span class="hljs-variable">$exe_file</span> <span class="hljs-variable">$tmp_path</span><span class="hljs-variable">$tmp_file</span> &gt; /dev/null 2&gt;&amp;1"</span>
    <span class="hljs-keyword">if</span> [ $? -eq 0 ]
    <span class="hljs-keyword">then</span>
	<span class="hljs-built_in">echo</span> <span class="hljs-string">"Compiled ok"</span> &gt; <span class="hljs-variable">$msg_file</span>
    <span class="hljs-keyword">else</span>
	<span class="hljs-built_in">echo</span> <span class="hljs-string">"Compile error"</span> &gt; <span class="hljs-variable">$msg_file</span>
	<span class="hljs-built_in">exit</span> 255
    <span class="hljs-keyword">fi</span>
<span class="hljs-keyword">fi</span>
<span class="hljs-built_in">eval</span> <span class="hljs-string">"<span class="hljs-variable">$tmp_path</span><span class="hljs-variable">$exe_file</span> <span class="hljs-variable">$@1</span>"</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Script ini melakukan semua yang Anda butuhkan. Sebagai folder sementara, saya memilih folder ~ / .cache / c ++. Script asli akan disalin ke folder ini, tetapi tanpa baris pertama dengan shebang. Ini dilakukan oleh perintah ekor. Nama file baru akan seperti skrip asli, tetapi dengan ekstensi c ++. Biner dengan ekstensi .bin akan dikumpulkan di folder yang sama. Tapi pertama-tama, tentu saja, pemeriksaan "jika tes" dilakukan pada saat biner dibuat. Kompilasi hanya terjadi jika biner yang ada sudah usang dalam waktu sehubungan dengan "skrip" asli. Biner diluncurkan dengan perintah eval dan semua parameter awal diteruskan ke sana. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
File c ++ ini perlu disalin ke folder / bin dan membuatnya dapat dieksekusi (chmod a + x). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya akan mencoba menulis "sk ++ c" pertama saya:</font></font><br>
<br>
<pre><code class="cpp hljs">#!/bin/c++<font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><font></font>
<font></font>
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">( <span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> *argv[] )</span>
</span>{
    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"hello world!\n"</span>;
    <span class="hljs-keyword">for</span>( <span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;argc; i++)<font></font>
    {<font></font>
	<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Param"</span> &lt;&lt; i &lt;&lt;  <span class="hljs-string">" is "</span> &lt;&lt; argv[i] &lt;&lt; <span class="hljs-string">"\n"</span>;<font></font>
    }<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-number">60</span>+argc;<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Program ini hanya mencetak daftar parameter input dan mengembalikan nomor mereka + 60. Saya </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
menjalankan "skrip": </font></font><br>
<br>
<img src="https://habrastorage.org/webt/1y/0c/ks/1y0cksrwf2niluhqf-adbf2cfwy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Berhasil !!! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika Anda membuat kesalahan dalam kode c ++, program tidak akan memulai, karena tidak akan dikompilasi, tetapi echo $? akan mengembalikan 255. Tapi itulah yang dimaksudkan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Menggunakan c ++ memberikan peluang luar biasa. Pertama, sintaksis yang sudah dikenal. Kedua, kelas standar seperti std :: vector, std :: map atau std :: string dan lainnya adalah hal-hal yang tidak tergantikan. Baris yang sama - apa pun yang ingin Anda lakukan dengannya, lihat di baris itu, pisahkan menjadi substring, lepaskan dan taklukkan, dapatkan array. Dan saya tidak perlu sed atau awk. Ketiga, debugger - God! sungguh suatu berkat! Saya memiliki debugger gdb untuk skrip! Selanjutnya, Anda dapat menggunakan std :: filesystem (jika kompiler memungkinkan). Anda bisa terus ...</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sayangnya, sering terjadi pada saya bahwa saya akan melakukannya terlebih dahulu, dan kemudian saya akan berpikir: "bagaimana jika seseorang telah melakukan ini?" </font><font style="vertical-align: inherit;">Dan faktanya, saya bukan orang pertama yang memiliki ide untuk melakukan hal yang sama. </font><font style="vertical-align: inherit;">Berikut ini sebuah contoh: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://github.com/dimgel/cpp-linux-scripts</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> idenya sama, implementasinya berbeda. </font><font style="vertical-align: inherit;">Kemudian ternyata ada </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">implementasi lain</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Secara umum, saya mengalami sedikit kekecewaan terhadap non-eksklusivitas saya sendiri. </font><font style="vertical-align: inherit;">Namun, saya mencari Habr - saya tidak menemukan yang serupa. </font><font style="vertical-align: inherit;">Mungkin seseorang tampaknya setidaknya penasaran?</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id488950/index.html">Waktu dalam mesin seluler</a></li>
<li><a href="../id488952/index.html">Analisis sentimen frase menggunakan jaringan saraf</a></li>
<li><a href="../id488956/index.html">Organisasi dokumentasi dan terjemahan, misalnya, iondv. kerangka</a></li>
<li><a href="../id488958/index.html">Transkrip wawancara saya dengan penulis Ruby</a></li>
<li><a href="../id488960/index.html">Pemrograman, Kekebalan dan Tentara</a></li>
<li><a href="../id488964/index.html">Tugas mendesak. Semoga Juruselamat datang</a></li>
<li><a href="../id488982/index.html">Ikhtisar keamanan perangkat lunak prosesor S905X (boot aman)</a></li>
<li><a href="../id488990/index.html">Tinjauan umum masker wajah penuh UNIX 5100, filter untuk itu, perbandingan dengan model UNIX 5000, 6100 dan topeng PPM-88</a></li>
<li><a href="../id488994/index.html">DDR5? Ya, kami jarang bertemu DDR4</a></li>
<li><a href="../id488998/index.html">Mengapa persyaratan AI hanya dapat memperburuk masalah</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>