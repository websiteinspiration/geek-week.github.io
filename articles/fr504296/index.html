<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèº‚Äçüé® üèÆ üë©üèª‚Äçü§ù‚Äçüë®üèΩ G√©n√©ration de branches al√©atoires en Python ‚úåüèΩ üë∂üèø ü§ôüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Rappelant Dawkins, l'id√©e principale peut √™tre exprim√©e comme suit: si vous gardez la tornade sur la poubelle pendant longtemps , alors un Boeing 747 ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>G√©n√©ration de branches al√©atoires en Python</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/504296/"><img src="https://habrastorage.org/webt/fy/vd/nr/fyvdnr83rzvq1tow9chyg7e0kry.gif" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Rappelant Dawkins, l'id√©e principale peut √™tre exprim√©e comme suit: si vous </font><font style="vertical-align: inherit;">gardez la tornade sur la poubelle pendant </font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">longtemps</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , alors un Boeing 747 peut s'assembler. L'√©mergence d'une structure du chaos par un durik: triant et recombinant tout d'affil√©e, de tous les processus d√©nu√©s de sens et d√©sordonn√©s, on peut en voir des assez significatifs et ordonn√©s. Si de tels processus sont fixes et r√©p√©t√©s d'une mani√®re ou d'une autre, alors le syst√®me, qui √©tait hier un mouvement brownien, commence aujourd'hui √† ressembler √† un comportement mis en place par une main invisible et √† effectuer des actions significatives de notre point de vue. En m√™me temps, il n'y a aucune main. Elle s'est install√©e.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour m'en assurer √† nouveau, je m'efforce d'√©crire une sorte de vie num√©rique qui, hors du chaos et sans instructions inutiles d'une personne, pourra g√©n√©rer de fa√ßon al√©atoire une logique pour elle-m√™me et exister sur elle dans son habitat naturel - le syst√®me d'exploitation. Oui, en cela, il y a probablement une diff√©rence avec de nombreux programmes de la direction de la ¬´vie artificielle¬ª, qui ¬´vivent¬ª dans les corrals, produisent des ¬´pr√©dateurs¬ª et des ¬´herbivores¬ª et coexistent dans des domaines artificiels avec la ¬´nourriture¬ª et entre eux. Aucun de ces programmes n'interagit avec les objets syst√®me (processus, fichiers, etc.), ce qui signifie que le code ne vit pas vraiment. De plus, ce code, d'une mani√®re ou d'une autre, effectue toujours une sorte de t√¢che dont une personne a besoin et dont la port√©e est tr√®s limit√©e √† cause de cela.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour impl√©menter du code avec une grande libert√© d'action dans le syst√®me d'exploitation, qui en m√™me temps ne serait pas simplement un ensemble chaotique d'instructions ex√©cutables, un mod√®le est apparu qui se compose de 3 modules. </font></font><br>
<a name="habracut"></a><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le module de g√©n√©ration al√©atoire du code ex√©cutable principal</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Module d'√©ducation al√©atoire</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le module "vision par ordinateur" des objets OS</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans cet article, nous parlerons du premier module, qui jusqu'√† pr√©sent n'est que la g√©n√©ration de branchements al√©atoires, c'est-√†-dire constructions comme "if-elif-else". Pourquoi se ramifier? Parce que, dans l'ensemble, la vie de tout organisme vivant se compose de r√©actions conditionn√©es: tout ce que nous faisons est une r√©ponse √† une information per√ßue. Les cellules se divisent si certaines conditions se produisent, la victime tente de s'√©chapper s'il voit un pr√©dateur plus fort, et s'il est plus faible, il peut essayer de l'attaquer, les cafards se dispersent si la lumi√®re s'allume, une personne va manger, s'il a faim, etc. etc. - cette rang√©e est sans fin. Il n'y a pas d'actions ind√©pendantes et s√©par√©es qui ne soient conditionn√©es par rien. Par cons√©quent, le comportement des organismes vivants en particulier est d√©crit comme une r√©action √† la condition: SI [quelque chose] ALORS [quelque chose]. Nous essayons de g√©n√©rer ce comportement.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pourquoi au hasard? Afin de laisser le code l'opportunit√© maximale d'agir ind√©pendamment et d'√©loigner autant que possible la personne (programmeur) de ce processus (id√©alement compl√®tement exclue). Ce dernier est le plus difficile pour le programmeur, car la programmation standard, √† laquelle tout le monde est habitu√©, ressemble √† un dur entra√Ænement des animaux, qui doit effectuer exactement ce que le programmeur indique, exactement comme il l'indique quand il l'indique. Ici, la situation est inverse: le code g√©n√©r√© final doit agir de mani√®re √† √™tre aussi impr√©visible pour le cr√©ateur de son g√©n√©rateur. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Avant de passer aux diagrammes et au code du g√©n√©rateur, il est n√©cessaire de s'attarder sur la fonction de prise de d√©cision, qui sert de conducteur, permettant d'ex√©cuter l'une ou l'autre partie du code. J'ai √©crit √† son sujet plus t√¥t</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . J'ai ensuite √©t√© invit√© √† d√©crire l'id√©e de l'apprentissage par renforcement et le jeu de John Conway, intitul√© ¬´Life¬ª. Il se pourrait bien que je n'ai rien contre l'utilisation de ce qui a d√©j√† √©t√© d√©velopp√© ou ouvertement. Au final, tout ce qui est nouveau est une synth√®se du d√©j√† connu, et j'ai moi-m√™me admis avoir adopt√© l'id√©e de prioriser les flux, qui est utilis√©e dans Windows. Ici, elle est tr√®s appropri√©e. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Actuellement, la fonction mentionn√©e a √©t√© l√©g√®rement transform√©e:</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">make_solution</span>(<span class="hljs-params">p_random, p_deter</span>):</span>                       
    deter_flag = <span class="hljs-number">0</span>
    random_flag = <span class="hljs-number">0</span>
    <span class="hljs-keyword">if</span> p_random &gt;= random.random():<font></font>
            p_random-=<span class="hljs-number">0.01</span>                                  <span class="hljs-comment">#  </span>
            p_deter+=<span class="hljs-number">0.01</span>
            random_flag = <span class="hljs-number">1</span>
    <span class="hljs-keyword">if</span> p_deter &gt;= random.random():<font></font>
            p_deter-=<span class="hljs-number">0.01</span>                                   <span class="hljs-comment">#  </span>
            p_random+=<span class="hljs-number">0.01</span>
            deter_flag = <span class="hljs-number">1</span>
    <span class="hljs-keyword">if</span> random_flag == <span class="hljs-number">1</span> <span class="hljs-keyword">and</span> deter_flag == <span class="hljs-number">0</span>:
        <span class="hljs-keyword">return</span>(p_random, p_deter, <span class="hljs-number">1</span>)
    <span class="hljs-keyword">elif</span> deter_flag == <span class="hljs-number">1</span> <span class="hljs-keyword">and</span> random_flag == <span class="hljs-number">0</span>:
        <span class="hljs-keyword">return</span>(p_random, p_deter, <span class="hljs-number">-1</span>)
    <span class="hljs-keyword">else</span>:
        <span class="hljs-keyword">return</span> (p_random, p_deter,<span class="hljs-number">0</span>)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En entr√©e, il prend 2 probabilit√©s (par d√©faut au d√©part elles sont toutes deux √©gales √† 0,5), apr√®s quoi il v√©rifie leur fonctionnement un par un. La probabilit√© d√©clench√©e diminue d'elle-m√™me de 1% et en m√™me temps augmente l'autre de 1%. Par cons√©quent, chaque fois que la probabilit√© fonctionne, elle diminue et l'autre augmente. En cons√©quence, aucune probabilit√© n'obtient trop d'avantage sur une autre, et ils s'auto-√©quilibrent, formant une distribution normale centr√©e sur 0,5 et avec un quartier de travail ne d√©passant pas + -10%, ce qui distingue cette fonction du hasard standard, o√π la probabilit√© dans notre cas Il serait toujours √©gal √† 0,5 et ne d√©pendrait pas des calculs pr√©c√©dents.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Au sens figur√©, il s'agit d'un pendule de probabilit√© de faible amplitude. Si la premi√®re probabilit√© a fonctionn√© et la seconde n'a pas fonctionn√©, elle renvoie 1, sinon -1 est renvoy√©e, et si les deux ont fonctionn√© ou n'ont pas fonctionn√©, 0. Ainsi, la fonction </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">make_solution</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pour 2 probabilit√©s entrantes renvoie l'une des 3 actions possibles, donnant un √©quilibre solution fourchue avec 3 options de continuation possibles. √Ä l'avenir, cette fonction est susceptible d'√™tre universelle et pourra prendre un nombre ind√©fini de probabilit√©s, car la variation au niveau des fourches peut √™tre sup√©rieure √† 3, mais dans le cas du g√©n√©rateur if-elif-else, trois options de poursuite suffisent largement.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il convient √©galement de noter ici que dans le code, il existe diff√©rentes, pour ainsi dire, des fourches typiques. Par exemple, comme on le verra ci-dessous, dans la fonction principale du g√©n√©rateur, il y a une fourchette dans laquelle il y a un choix de sch√©ma pour construire une branche, dont il n'y en a que 3, mais d'autres cas sont √©galement pr√©sents dans le code: ins√©rer un bloc d'action ou d√©marrer une r√©cursivit√©, combien de lignes d'action doivent √™tre g√©n√©r√©es, combien compliqu√© cela devrait √™tre ligne avec la condition, mettre ou ou et, elif ou autre. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je crois que le pendule probabiliste, dont nous avons parl√© ci-dessus, devrait √™tre d√©fini pour chaque type d'action: alors la fourche n'est √©quilibr√©e que sur la base de ce qui s'est pass√© plus t√¥t sur cette fourchette, et pas dans d'autres parties du code. Ceux. lors du choix de la structure g√©n√©rale de branchement, nous avons notre propre paire de probabilit√©s, et √† l'int√©rieur, lorsque ses √©l√©ments sont construits, une autre.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bien s√ªr, vous pouvez √©quilibrer toutes les actions avec une seule paire, mais la probabilit√© √† chaque fourche sera alors tr√®s difficile et d√©pendra de toutes les actions pr√©c√©dentes √† d'autres jonctions. Le caract√®re al√©atoire d'un tel design sera encore plus √©lev√©, mais pour l'instant je suis personnellement enclin au premier sch√©ma, car j'aime le design o√π d'autres petits se balancent dans le cadre d'un grand pendule oscillant, c'est-√†-dire des soldes plus petits naissent dans un seul grand √©quilibre. De plus, dans le deuxi√®me sch√©ma, le caract√®re al√©atoire est √©galement plus que suffisant. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lors de l'√©criture du g√©n√©rateur de branche, il √©tait n√©cessaire de cr√©er non seulement un code exploitable qui produit des g√©n√©rations sans erreur, mais aussi un code qui </font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pourrait</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">g√©n√©rer le maximum de constructions possibles de if-elif-else, mais il n'y a pas 2 ou 3 de ces options possibles. Consid√©rons, par exemple, les sch√©mas possibles suivants. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/qu/oj/i3/quoji3ppc2arksk-xwafu3lfiqm.jpeg" width="350" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par l'ic√¥ne </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[..]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dans les sch√©mas, j'entends un ensemble d'expressions pour une condition ou un bloc d'actions al√©atoires. Le sch√©ma le plus √©l√©mentaire est 1, o√π la condition va simplement, et ensuite le bloc d'action. 2a et 2b sont si des variations avec un elif ou un autre. Dans l'option 2c, si vient d√©j√† en combinaison avec plusieurs elif sans autre. Et enfin, dans l'option 2d, le sch√©ma le plus g√©n√©ral est pr√©sent√©, o√π if contient plusieurs elif et 1 else.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout serait simple sans la n√©cessit√© de construire des succursales illimit√©es. Apr√®s chaque if, elif ou else, la r√©cursivit√© peut √™tre appel√©e, qui √† son tour peut √©galement r√©curser davantage et produire de nouveaux blocs elif-else vers la ¬´droite¬ª. Regardons le sch√©ma des options possibles. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/y0/0z/vr/y00zvr1zkcwxuceu28olrpfabpo.jpeg" width="400" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les modes de r√©alisation 2e et 2f montrent des cas sp√©ciaux simples d'une telle ramification r√©cursive lorsque la r√©cursivit√© est appel√©e soit apr√®s un seul elif, soit apr√®s un seul autre. L'option 2g d√©crit le cas le plus complexe et le plus g√©n√©ral d'une telle r√©cursivit√©, quand apr√®s chaque elif il peut y avoir un bloc d'action + r√©cursion (ou imm√©diatement r√©cursivit√©), et la m√™me chose peut se produire apr√®s autre chose. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il existe encore des variations lorsque la r√©cursivit√© se produit imm√©diatement apr√®s if ou apr√®s if et un bloc d'action.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/hx/dv/ye/hxdvyem6hl667rv0v-e-mjhpiv8.jpeg" width="400" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cela se voit dans les options 3a et 3b. L'option 3c pr√©sente un tel sch√©ma sous sa forme la plus g√©n√©rale. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cela ne veut pas dire que les sch√©mas ci-dessus couvrent toutes les options possibles pour la construction de branches, mais m√™me sous cette forme, le code final donne facilement naissance √† des branches de 150 lignes, allant ¬´√† droite¬ª en 10 √† 15 √©tapes. Dans tous les cas, compliquer le sch√©ma si n√©cessaire n'est pas difficile. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pouvez regarder un exemple d' </font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">une</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> telle g√©n√©ration pour vous assurer que les branches peuvent √™tre tr√®s diverses.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/zs/8j/gd/zs8jgd-5efc6vzg0thgjztgfyq0.jpeg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous n'avez pas besoin de pr√™ter attention √† la composition des expressions conditionnelles et des blocs d'action - pour la simplicit√© visuelle, ils sont g√©n√©r√©s √† partir uniquement de combinaisons de deux variables, 3 expressions et un petit nombre de signes arithm√©tiques et logiques. Une discussion sur la v√©ritable ¬´viande¬ª pour la recombinaison est au-del√† de la port√©e de cet article (cela sera discut√© dans la discussion de 3 modules). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Avant de proc√©der √† un examen direct du code du g√©n√©rateur, il est n√©cessaire de se rappeler que les blocs g√©n√©r√©s doivent √™tre d√©cal√©s horizontalement vers la droite, s'il est elif, sinon, si des blocs de r√©cursivit√© ou d'action, et aussi "revenir" vers la gauche apr√®s la fin de la branche. De plus, √©tant donn√© que Python est tr√®s pointilleux sur les retraits horizontaux, il est souhaitable de rendre l'√©tape identique (dans notre cas, l'√©tape est 3).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le diagramme suivant illustre comment les d√©placements sont d√©cal√©s. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/mu/p8/ue/mup8uegwtzj-fydzcdcsswbsutw.jpeg" width="500" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La chose la plus importante ici est que les d√©placements avec l'approfondissement des branches se d√©placent toujours vers la droite. Cependant, si nous avons, par exemple, un bloc elif-else dans lequel il y a plusieurs elif ou une seule paire elif-else, alors il est n√©cessaire de "retourner" le chariot qui flottait vers la droite, de sorte que le prochain elif (ou bien) commence par m√™mes d√©calages que le pr√©c√©dent du bloc. Pour ce faire, vous devez enregistrer le d√©calage d'origine ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wall_offset</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) et apr√®s la fin de la g√©n√©ration de branche (par exemple, ramification compl√®te d'un elif), restaurez-la. Cela garantit que les √©l√©ments elif, else dans le bloc sont ¬´les uns sur les autres¬ª uniform√©ment. De plus, chaque nouveau bloc a son propre d√©placement. La m√™me astuce fournit l'harmonie dans la construction globale if-elif-else (y compris les r√©cursions). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Passons maintenant au code. Le code avec un volume total d'environ 200 lignes se compose de 8 fonctions, dont une que nous avons examin√©e ci-dessus. En raison de la r√©cursivit√© et d'un grand nombre de param√®tres transmis aux fonctions, il peut √™tre mal lisible par endroits. Pour commencer, je citerai la ¬´viande¬ª tr√®s utilis√©e pour g√©n√©rer des expressions conditionnelles et des blocs d'action.</font></font><br>
<br>
<pre><code class="python hljs">var_list = [<span class="hljs-string">'a'</span>,<span class="hljs-string">'b'</span>]<font></font>
exp_list = [<span class="hljs-string">'a+b'</span>,<span class="hljs-string">'b-a'</span>, <span class="hljs-string">'b//a'</span>]<font></font>
sign = [<span class="hljs-string">'+'</span>,<span class="hljs-string">'-'</span>,<span class="hljs-string">'/'</span>,<span class="hljs-string">'*'</span>,<span class="hljs-string">'//'</span>]<font></font>
sign2 = [<span class="hljs-string">'&gt;'</span>,<span class="hljs-string">'&lt;'</span>,<span class="hljs-string">'=='</span>,<span class="hljs-string">'&gt;='</span>,<span class="hljs-string">'&lt;='</span>,<span class="hljs-string">'!='</span>]<font></font>
a = <span class="hljs-number">3</span>
b = <span class="hljs-number">2</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme vous pouvez le voir, deux variables sont utilis√©es: a et b ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">var_list</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), qui sont initialis√©es, 3 expressions arithm√©tiques ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">exp_list</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), et √©galement deux feuilles avec des signes ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sign, sign2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). Comme mentionn√© pr√©c√©demment, la composition des expressions r√©sultantes n'a plus d'importance maintenant et n'est pas consid√©r√©e dans cet article - elles sont principalement n√©cessaires pour illustrer le code. Une particularit√© suppl√©mentaire doit √™tre not√©e: lors de la g√©n√©ration du bloc elif-else, vous devez suivre l'apparence de else et arr√™ter la g√©n√©ration, sinon d'autres peuvent appara√Ætre avant elif, ce qui naturellement provoquera une erreur. Le drapeau </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fin_else_flag</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est utilis√© √† cet effet </font><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous commen√ßons notre examen par la fonction de g√©n√©ration principale.</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">if_gen</span>(<span class="hljs-params">exp_list, var_list, if_str, offset_koeff, fin_else_flag, prob_list</span>):</span>             <font></font>
    choice_list = [exp_list, var_list]<font></font>
    base_offset = <span class="hljs-string">' '</span>
    <span class="hljs-comment">#   </span>
    prob_list[<span class="hljs-number">0</span>],prob_list[<span class="hljs-number">1</span>],sol = make_solution(prob_list[<span class="hljs-number">0</span>],prob_list[<span class="hljs-number">1</span>])       
    <span class="hljs-comment"># if +   (1   )        </span>
    <span class="hljs-keyword">if</span> sol == <span class="hljs-number">0</span>: 
        <span class="hljs-comment">#     +3                                                                   </span>
        action_str = action_str_gen(choice_list, offset_koeff+<span class="hljs-number">3</span>, prob_list)                 
        <span class="hljs-keyword">return</span>(base_offset*offset_koeff+<span class="hljs-string">'if '</span>+ if_sub(exp_list,var_list, sign, prob_list) +<span class="hljs-string">':\n'</span> + action_str, offset_koeff, fin_else_flag, prob_list) 
    <span class="hljs-comment"># if + elif/else (2   )           </span>
    <span class="hljs-keyword">elif</span> sol == <span class="hljs-number">-1</span>:                                                                         <font></font>
        if_str= base_offset*offset_koeff+<span class="hljs-string">'if '</span>+ if_sub(exp_list,var_list, sign, prob_list) +<span class="hljs-string">':\n'</span> + action_str_gen(choice_list, offset_koeff+<span class="hljs-number">3</span>, prob_list) <span class="hljs-comment"># if [..]:</span>
        <span class="hljs-comment">#  elif/else</span>
        prob_list[<span class="hljs-number">2</span>],prob_list[<span class="hljs-number">3</span>],sol2=make_solution(prob_list[<span class="hljs-number">2</span>],prob_list[<span class="hljs-number">3</span>])             
        <span class="hljs-keyword">if</span> sol2!=<span class="hljs-number">0</span>:<font></font>
            ee_string=<span class="hljs-string">'elif'</span>
        <span class="hljs-keyword">else</span>:<font></font>
             ee_string=<span class="hljs-string">'else'</span>
        <span class="hljs-comment">#   elif/else</span><font></font>
        if_str, offset_koeff, fin_else_flag, prob_list = elif_else_block(ee_string, offset_koeff, exp_list, var_list, sign, if_str, choice_list, fin_else_flag, prob_list)<font></font>
        <span class="hljs-keyword">return</span>(if_str, offset_koeff, fin_else_flag, prob_list)
    <span class="hljs-comment"># if + if() (3   )</span>
    <span class="hljs-keyword">else</span>:                                                                                   <font></font>
            if_str= base_offset*offset_koeff+<span class="hljs-string">'if '</span>+ if_sub(exp_list,var_list, sign, prob_list) +<span class="hljs-string">':\n'</span> <span class="hljs-comment"># if [..]:</span>
            <span class="hljs-comment">#  if/if+ </span>
            prob_list[<span class="hljs-number">4</span>],prob_list[<span class="hljs-number">5</span>],sol = make_solution(prob_list[<span class="hljs-number">4</span>],prob_list[<span class="hljs-number">5</span>])        
            <span class="hljs-keyword">if</span> sol==<span class="hljs-number">0</span>:
                <span class="hljs-comment">#     +3</span>
                if_str+=action_str_gen(choice_list, offset_koeff+<span class="hljs-number">3</span>, prob_list)      
            <span class="hljs-comment">#          </span><font></font>
            wall_offset = offset_koeff                                                      <font></font>
            if_rek, offset_koeff, fin_else_flag, prob_list = if_gen(exp_list, var_list, if_str, offset_koeff+<span class="hljs-number">3</span>, fin_else_flag, prob_list) <span class="hljs-comment">#  if+if</span>
            <span class="hljs-comment">#    </span><font></font>
            if_str+=if_rek   <font></font>
            <span class="hljs-comment">#   elif-else/                                                                </span>
            prob_list[<span class="hljs-number">4</span>],prob_list[<span class="hljs-number">5</span>],sol2=make_solution(prob_list[<span class="hljs-number">4</span>],prob_list[<span class="hljs-number">5</span>])         
            <span class="hljs-keyword">if</span> sol2!=<span class="hljs-number">0</span>:<font></font>
                prob_list[<span class="hljs-number">2</span>],prob_list[<span class="hljs-number">3</span>],sol3=make_solution(prob_list[<span class="hljs-number">2</span>],prob_list[<span class="hljs-number">3</span>])
                <span class="hljs-keyword">if</span> sol3!=<span class="hljs-number">0</span>:<font></font>
                    ee_string=<span class="hljs-string">'elif'</span>
                <span class="hljs-keyword">else</span>:<font></font>
                    ee_string=<span class="hljs-string">'else'</span><font></font>
                if_str, offset_koeff, fin_else_flag, prob_list = elif_else_block(ee_string, wall_offset, exp_list, var_list, sign, if_str, choice_list, fin_else_flag, prob_list)  <font></font>
            <span class="hljs-keyword">else</span>:
                <span class="hljs-comment">#     +3</span>
                if_str+=action_str_gen(choice_list, offset_koeff+<span class="hljs-number">3</span>, prob_list)              
            <span class="hljs-keyword">return</span>(if_str, offset_koeff,fin_else_flag, prob_list)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En plus des listes avec ¬´viande¬ª pour la g√©n√©ration (exp_list, var_list), la fonction </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">accepte</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √©galement </font><b><font style="vertical-align: inherit;">if_str</font></b><font style="vertical-align: inherit;"> - c'est la ligne o√π le code g√©n√©r√© est collect√© √† son tour. Elle est accept√©e ici parce que la fonction </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">if_gen elle-m√™me</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> peut √™tre appel√©e r√©cursivement, et il serait conseill√© de ne pas perdre le morceau de code g√©n√©r√© pr√©c√©demment. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le param√®tre </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">offset_koeff</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est le coefficient de d√©calage, qui est un facteur pour une ligne avec un espace ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">base_offset</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) et, par cons√©quent, il est responsable des d√©placements horizontaux des blocs de code. </font><font style="vertical-align: inherit;">Nous avons parl√© </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fin_else_flag</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ci-dessus, ici il est simplement pass√© √† une fonction qui est responsable de g√©n√©rer if + elif / else (voir ci-dessous). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eh bien, il y a un autre param√®tre -</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">prob_list</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , qui est une feuille avec 10 probabilit√©s (5 paires de probabilit√©s)</font></font><pre><code class="python hljs">prob_list = [<span class="hljs-number">0.5</span> <span class="hljs-keyword">for</span> y <span class="hljs-keyword">in</span> range(<span class="hljs-number">0</span>,<span class="hljs-number">10</span>)] </code></pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et est utilis√© par la fonction </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">make_solution</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> comme nous l'avons vu plus haut: telle ou telle paire de probabilit√©s correspondant au type de fork lui est pass√©e (par exemple, la fork structurelle principale utilise les 2 premi√®res probabilit√©s de la feuille: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">prob_list [0]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">prob_list [1]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). Les r√©sultats des changements de probabilit√© dans cette feuille, √† titre d'exemple, peuvent √™tre vus dans la figure suivante. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/tw/_o/qc/tw_oqckdotydpm1m5djcmdc3rgw.jpeg" width="550" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les probabilit√©s de cette liste changent de g√©n√©ration en g√©n√©ration si, au cours de la g√©n√©ration suivante, le morceau de code correspondant est ex√©cut√©. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans la fonction elle-m√™me, la liste imbriqu√©e choice_list est initialis√©e au d√©but - elle est n√©cessaire pour la g√©n√©ration al√©atoire pratique d'expressions √† partir de "meat", et la base offset </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">base_offset = ''</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dans un espace.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apr√®s cela vient le fork principal, qui, via la fonction make_solution, obtient la solution dans la variable sol. Sol prend l'une des trois valeurs (0, -1,1) et d√©termine, par cons√©quent, selon le sch√©ma de construction de la structure. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La premi√®re option impl√©mente l'option la plus simple si + [..]. La r√©ponse est form√©e comme une cha√Æne avec le d√©calage actuel (il n'est pas n√©cessairement √©gal √† 0!), Une cha√Æne ¬´if¬ª, une condition al√©atoire qui est g√©n√©r√©e par la fonction </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">if_sub</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (qui sera discut√©e plus tard), le retour chariot et la g√©n√©ration d'un bloc d'action √† l'aide de la fonction </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">action_str</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (voir ci-dessous) . En cons√©quence, nous obtenons quelque chose comme:</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-keyword">if</span> ((a+b)==(b)):<font></font>
   b=b<font></font>
   a=b-a<font></font>
   a=a</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La deuxi√®me option est responsable de la g√©n√©ration de ce type: if [..] + elif / else-block (option 2 dans les sch√©mas). </font><font style="vertical-align: inherit;">Tout d'abord, une ligne if + [..] y est form√©e, puis un fork elif / else se produit, qui d√©cide si le bloc elif-else sera g√©n√©r√©, juste si-elif ou if-else (fonction e </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lif_else_block</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - voir ci-dessous). </font><font style="vertical-align: inherit;">Les r√©sultats peuvent varier. </font><font style="vertical-align: inherit;">Par exemple:</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-keyword">if</span> ((a+b)==(a)):<font></font>
   b=a+b<font></font>
<span class="hljs-keyword">elif</span> ((b//a)==(a)):
   <span class="hljs-literal">None</span>
<span class="hljs-keyword">elif</span> ((a+b)&lt;=(a)):<font></font>
   a=b//a<font></font>
<span class="hljs-keyword">else</span>:
   <span class="hljs-keyword">if</span> ((b)&lt;=(a)):<font></font>
      a=b-a<font></font>
      b=a</code></pre><br>
<pre><code class="python hljs"><span class="hljs-keyword">if</span> ((a)==(b-a)):<font></font>
   b=b-a<font></font>
   b=b<font></font>
   a=b<font></font>
   a=b-a<font></font>
<span class="hljs-keyword">elif</span> ((b)&gt;(b-a))<span class="hljs-keyword">and</span>((a)&lt;(b-a)):
   <span class="hljs-keyword">if</span> ((b//a)&lt;(a)):<font></font>
      b=b-a<font></font>
   <span class="hljs-keyword">elif</span> ((a+b)&lt;(b-a))<span class="hljs-keyword">and</span>((b)&lt;(a+b))<span class="hljs-keyword">or</span>((a+b)==(a+b)):<font></font>
      b=b<font></font>
      a=b-a<font></font>
   <span class="hljs-keyword">elif</span> ((a)&gt;(b-a)):
      <span class="hljs-literal">None</span></code></pre><br>
<pre><code class="python hljs"><span class="hljs-keyword">if</span> ((b)&lt;=(b-a))<span class="hljs-keyword">or</span>((a+b)&gt;=(b)):<font></font>
   a=a<font></font>
   b=b<font></font>
<span class="hljs-keyword">elif</span> ((b)&lt;=(b)):
   <span class="hljs-keyword">if</span> ((a)&gt;=(b)):<font></font>
      a=a+b<font></font>
      a=b<font></font>
<span class="hljs-keyword">elif</span> ((b)&gt;=(a)):<font></font>
   a=b-a<font></font>
   a=a<font></font>
   <span class="hljs-keyword">if</span> ((a)&gt;=(b))<span class="hljs-keyword">and</span>((b//a)==(a))<span class="hljs-keyword">and</span>((b//a)!=(b)):<font></font>
      b=b-a<font></font>
<span class="hljs-keyword">else</span>:<font></font>
   a=b//a<font></font>
   <span class="hljs-keyword">if</span> ((b//a)&lt;(b-a)):<font></font>
      a=b<font></font>
      a=b-a<font></font>
   <span class="hljs-keyword">else</span>:
      <span class="hljs-keyword">if</span> ((a)==(b)):<font></font>
         a=a<font></font>
         a=b//a<font></font>
         b=b<font></font>
         b=a+b<font></font>
         b=a<font></font>
      <span class="hljs-keyword">else</span>:
         <span class="hljs-literal">None</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La troisi√®me option impl√©mente la r√©cursion depuis le tout d√©but (option 3 dans les sch√©mas), c'est-√†-dire </font><font style="vertical-align: inherit;">donne naissance √† une branche de la forme:</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-keyword">if</span> ((a)==(a)):
   <span class="hljs-keyword">if</span> ((a+b)&lt;(b)):</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ou </font></font><pre><code class="python hljs"><span class="hljs-keyword">if</span> ((b-a)&lt;=(a)):<font></font>
   a=a<font></font>
   <span class="hljs-keyword">if</span> ((b-a)==(b)):<font></font>
      a=a<font></font>
      a=a</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout d'abord, la ligne if est form√©e (de mani√®re similaire), puis une fourchette appara√Æt, qui d√©cide d'ins√©rer ou non le bloc d'action, apr√®s quoi le d√©calage est enregistr√© et la r√©cursivit√© est appel√©e. L'offset doit √™tre sauvegard√© pour qu'apr√®s la r√©cursivit√© et le retour du morceau de code, il soit possible d'ajouter un autre bloc elif-else au m√™me offset que la ligne d'origine avec if. Ici, vous pouvez voir comment elif et autre dans la branche se trouvent au m√™me d√©calage avec leur "natif" if.</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-keyword">if</span> ((b-a)==(b)):<font></font>
<font></font>
   <span class="hljs-keyword">if</span> ((a)&gt;(a+b)):
      <span class="hljs-keyword">if</span> ((b)==(b-a)):<font></font>
         b=b<font></font>
         a=a<font></font>
      <span class="hljs-keyword">elif</span> ((b)&gt;(b)):
         <span class="hljs-literal">None</span>
      <span class="hljs-keyword">else</span>:
         <span class="hljs-literal">None</span><font></font>
         b=a<font></font>
         b=b</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vient ensuite une fourchette dans le bloc elif-else-block / action, qui d√©cide s'il faut ajouter un bloc d'action ou un bloc elif-else apr√®s r√©cursivit√©. Si vous d√©cidez d'ajouter un bloc elif-else, alors l√†, comme dans le cas d√©crit ci-dessus, dans le sch√©ma 2, elif ou else est s√©lectionn√©. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ici, il est n√©cessaire de faire attention au fait que la r√©cursivit√© est appel√©e avec un d√©calage de + 3 pour d√©caler le code g√©n√©r√© vers la droite d'un pas, et le bloc elif-else est appel√© avec un d√©calage de wall_offset afin que ce bloc n'aille pas √† droite apr√®s la r√©cursivit√©, mais reste avec le "natif" le d√©calage de l'original si. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les r√©sultats peuvent √™tre tr√®s diff√©rents: du simple au complexe, mais l'apparition de la r√©cursivit√© produit imm√©diatement les branches les plus orn√©es.</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-keyword">if</span> ((b-a)&gt;(a+b))<span class="hljs-keyword">and</span>((b)&lt;(a+b)):
   <span class="hljs-keyword">if</span> ((b-a)&lt;=(a+b)):<font></font>
      b=b//a<font></font>
   <span class="hljs-keyword">elif</span> ((b)!=(a)):<font></font>
      a=b-a<font></font>
<span class="hljs-keyword">else</span>:
   <span class="hljs-keyword">if</span> ((a+b)!=(b-a)):<font></font>
      a=a</code></pre><br>
<pre><code class="python hljs"><span class="hljs-keyword">if</span> ((b)&lt;(b-a)):
   <span class="hljs-keyword">if</span> ((a+b)==(b-a))<span class="hljs-keyword">and</span>((b-a)&lt;(a+b))<span class="hljs-keyword">and</span>((b-a)==(a))<span class="hljs-keyword">and</span>((a)&gt;(b//a))<span class="hljs-keyword">or</span>((a+b)&gt;(b//a)):
      <span class="hljs-keyword">if</span> ((b)&gt;=(b-a)):<font></font>
         a=b<font></font>
         b=b<font></font>
         <span class="hljs-keyword">if</span> ((b)&gt;(b)):<font></font>
            a=a+b<font></font>
            b=a+b<font></font>
            a=a<font></font>
            b=a+b<font></font>
            b=b//a<font></font>
            b=a<font></font>
      <span class="hljs-keyword">else</span>:<font></font>
         b=a+b<font></font>
         a=b<font></font>
         a=b<font></font>
   <span class="hljs-keyword">elif</span> ((a)&lt;(b-a)):<font></font>
      a=b//a<font></font>
      a=b-a</code></pre><br>
<pre><code class="python hljs"><span class="hljs-keyword">if</span> ((a)&gt;=(b-a))<span class="hljs-keyword">or</span>((a)&gt;=(a))<span class="hljs-keyword">or</span>((b)&lt;=(b)):<font></font>
   a=a<font></font>
   a=a<font></font>
<span class="hljs-keyword">elif</span> ((a)==(a))<span class="hljs-keyword">and</span>((b)&gt;(b-a)):<font></font>
   a=b//a<font></font>
   <span class="hljs-keyword">if</span> ((a)&lt;(b)):
      <span class="hljs-keyword">if</span> ((a+b)==(b-a)):<font></font>
         a=a<font></font>
         <span class="hljs-keyword">if</span> ((a)!=(b//a)):
            <span class="hljs-keyword">if</span> ((b//a)!=(a))<span class="hljs-keyword">and</span>((b-a)&gt;=(b)):<font></font>
               a=b<font></font>
            <span class="hljs-keyword">else</span>:
               <span class="hljs-literal">None</span><font></font>
               a=b//a<font></font>
      <span class="hljs-keyword">else</span>:<font></font>
         b=b<font></font>
         b=a+b<font></font>
         <span class="hljs-keyword">if</span> ((b-a)&lt;=(b//a)):<font></font>
            a=b<font></font>
            a=b<font></font>
            a=a+b<font></font>
<span class="hljs-keyword">else</span>:<font></font>
   a=a+b<font></font>
   <span class="hljs-keyword">if</span> ((b-a)&gt;=(a)):<font></font>
      a=b<font></font>
      <span class="hljs-keyword">if</span> ((b-a)==(a))<span class="hljs-keyword">or</span>((b)!=(b//a)):<font></font>
         a=b-a<font></font>
         a=a<font></font>
         a=a<font></font>
         a=b//a<font></font>
         a=a+b<font></font>
         b=a</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Examinons maintenant la fonction </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">elif_else_block</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , qui est responsable de la formation du bloc elif-else et est appel√©e √† partir de la fonction </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">if_gen</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> principale </font><font style="vertical-align: inherit;">.</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">elif_else_block</span>(<span class="hljs-params">ee_string, offset_koeff, exp_list, var_list, sign, if_str, choice_list,  fin_else_flag, prob_list</span>):</span>
    <span class="hljs-keyword">if</span> ee_string==<span class="hljs-string">'elif'</span>:<font></font>
        sol3 = <span class="hljs-number">9</span>
        <span class="hljs-comment">#  </span><font></font>
        wall_offset = offset_koeff<font></font>
        <span class="hljs-comment">#  elif  </span>
        <span class="hljs-keyword">while</span> sol3!=<span class="hljs-number">0</span> <span class="hljs-keyword">and</span> fin_else_flag!=<span class="hljs-number">1</span>:<font></font>
            temp_str, offset_koeff, fin_else_flag, prob_list=elif_else(<span class="hljs-string">'elif'</span>, wall_offset, exp_list, var_list, sign, if_str, choice_list, fin_else_flag, prob_list)<font></font>
            if_str+=temp_str<font></font>
            prob_list[<span class="hljs-number">6</span>],prob_list[<span class="hljs-number">7</span>],sol3 = make_solution(prob_list[<span class="hljs-number">6</span>],prob_list[<span class="hljs-number">7</span>])
        <span class="hljs-comment">#  -   else   elif?</span>
        prob_list[<span class="hljs-number">2</span>],prob_list[<span class="hljs-number">3</span>],sol = make_solution(prob_list[<span class="hljs-number">2</span>],prob_list[<span class="hljs-number">3</span>])
        <span class="hljs-keyword">if</span> sol!=<span class="hljs-number">0</span>:
            <span class="hljs-comment">#  else,   </span>
            fin_else_flag=<span class="hljs-number">1</span>
            temp_str,offset_koeff, fin_else_flag, prob_list=elif_else(<span class="hljs-string">'else'</span>, wall_offset, exp_list, var_list, sign, if_str, choice_list, fin_else_flag, prob_list)<font></font>
            if_str+=temp_str<font></font>
        <span class="hljs-keyword">return</span>(if_str,offset_koeff, fin_else_flag, prob_list)
    <span class="hljs-comment">#  else</span>
    <span class="hljs-keyword">else</span>: <font></font>
          temp_str,offset_koeff, fin_else_flag, prob_list=elif_else(<span class="hljs-string">'else'</span>, offset_koeff, exp_list, var_list, sign, if_str, choice_list, fin_else_flag, prob_list)<font></font>
          if_str+=temp_str<font></font>
          <span class="hljs-keyword">return</span>(if_str, offset_koeff, fin_else_flag, prob_list)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cette fonction d√©cide d'ajouter un bloc elif ou elif / else au code. Elle ne d√©cide pas s'il faut simplement mettre autre chose, mais d√©pend de la valeur d'entr√©e e </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e_string</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , qu'elle re√ßoit de la fonction principale </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">if_gen</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Tout d'abord, le bloc elif est g√©n√©r√© dans la </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">boucle while</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , o√π 2 conditions sont v√©rifi√©es: probabiliste - le nombre d'elif dans le bloc et le drapeau </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fin_else_flag en d√©pendent</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , et s'il s'allume soudainement, cela signifie que d'autre √©tait connect√© avant cela, et donc vous devez quitter la boucle . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La d√©cision d'attacher else et else au bloc elif est d√©cid√©e par un fork utilisant la m√™me fonction </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">make_solution</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , et si else est attach√©, le drapeau </font><b><font style="vertical-align: inherit;">fin_else_flag</font></b><font style="vertical-align: inherit;"> est </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">activ√© imm√©diatement</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ce qui arr√™te la g√©n√©ration de blocs. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La jonction directe d'elif et d'autre est effectu√©e par la fonction </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">elif_else</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (voir ci-dessous). Ici, il est n√©cessaire de faire attention √† ce que lors de la g√©n√©ration du bloc elif (et √©galement lors de l'attachement √† un autre </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√©l√©ment</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), l'offset </font><b><font style="vertical-align: inherit;">wall_offset</font></b><font style="vertical-align: inherit;"> soit utilis√© pour construire en douceur le bloc dans son ensemble. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Consid√©rons maintenant la fonction </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">elif_else</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<pre><code class="python hljs">&lt;b&gt;<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">elif_else</span>(<span class="hljs-params">ee_string, offset_koeff, exp_list, var_list, sign, if_str, choice_list, fin_else_flag, prob_list</span>):</span>
    ee_str = <span class="hljs-string">''</span>
    <span class="hljs-comment">#   else:  elif [..]:</span>
    <span class="hljs-keyword">if</span> ee_string==<span class="hljs-string">'else'</span>:<font></font>
        ee_str += <span class="hljs-string">' '</span>*offset_koeff+ee_string + <span class="hljs-string">':\n'</span>
    <span class="hljs-keyword">elif</span> ee_string==<span class="hljs-string">'elif'</span>:<font></font>
        ee_str += <span class="hljs-string">' '</span>*offset_koeff+ee_string+<span class="hljs-string">' '</span>+if_sub(exp_list, var_list, sign, prob_list) + <span class="hljs-string">':\n'</span>
    <span class="hljs-comment">#   -None /  +</span>
    prob_list[<span class="hljs-number">2</span>],prob_list[<span class="hljs-number">3</span>],sol = make_solution(prob_list[<span class="hljs-number">2</span>],prob_list[<span class="hljs-number">3</span>])
    <span class="hljs-keyword">if</span> sol!=<span class="hljs-number">0</span>:<font></font>
        prob_list[<span class="hljs-number">6</span>],prob_list[<span class="hljs-number">7</span>],sol2 = make_solution(prob_list[<span class="hljs-number">6</span>],prob_list[<span class="hljs-number">7</span>])
        <span class="hljs-keyword">if</span> sol2!=<span class="hljs-number">0</span>:
            <span class="hljs-comment">#  </span>
            ee_str+=action_str_gen(choice_list,offset_koeff+<span class="hljs-number">3</span>, prob_list)
        <span class="hljs-keyword">else</span>:
            <span class="hljs-comment"># None</span>
            ee_str+=<span class="hljs-string">' '</span>*(offset_koeff+<span class="hljs-number">3</span>)+<span class="hljs-string">'None\n'</span>
        <span class="hljs-keyword">return</span>(ee_str, offset_koeff, fin_else_flag, prob_list)
    <span class="hljs-keyword">else</span>:
        <span class="hljs-comment">#   </span>
        prob_list[<span class="hljs-number">6</span>],prob_list[<span class="hljs-number">7</span>],sol2 = make_solution(prob_list[<span class="hljs-number">6</span>],prob_list[<span class="hljs-number">7</span>])
        <span class="hljs-keyword">if</span> sol2==<span class="hljs-number">0</span>:
            <span class="hljs-comment">#  </span>
            ee_str+=action_str_gen(choice_list,offset_koeff+<span class="hljs-number">3</span>, prob_list)
        <span class="hljs-comment">#  if_gen</span>
        if_str, offset_koeff,  fin_else_flag, prob_list = if_gen(exp_list, var_list, if_str, offset_koeff+<span class="hljs-number">3</span>, fin_else_flag, prob_list)                 <font></font>
        ee_str+=if_str<font></font>
        <span class="hljs-keyword">return</span>(ee_str, offset_koeff, fin_else_flag, prob_list)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La fonction est responsable de la formation de la ligne elif ou bien elle-m√™me, ainsi que de la g√©n√©ration ult√©rieure de blocs d'action ou de r√©cursivit√© apr√®s ces lignes. Il prend √©galement une variable </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ee_string</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , qui contient soit elif, soit else, et forme la cha√Æne correspondante. Ensuite, il y a un fork, o√π il est d√©termin√© ce qui se passera ensuite: (bloc d'action ou Aucun), ou (bloc d'action ou bloc d'action + r√©cursivit√©). √Ä l'int√©rieur de cette fourchette, il y a une division, respectivement, en deux sous-fourches, et dans chaque cas, la fonction </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">make_solution</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est </font><b><font style="vertical-align: inherit;">appel√©e</font></b><font style="vertical-align: inherit;"> avec les param√®tres appropri√©s pour prendre une d√©cision. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il convient de noter que lorsqu'il se produit dans le code</font></font><code>if sol!=0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, cela signifie que nous donnons intentionnellement un avantage √† une partie du code par rapport √† une autre, car si sol! = 0, alors il est √©gal √† -1 ou 1, et donc un autre morceau de code sera ex√©cut√© moins souvent (uniquement lorsque sol == 0). Ceci est utilis√©, en particulier, dans la fonction </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">elif_else_block</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , o√π il est plus rentable pour nous de laisser plus d' </font><b><font style="vertical-align: inherit;">elifs se</font></b><font style="vertical-align: inherit;"> former dans le bloc, plut√¥t que de donner une probabilit√© √©gale √† elif et autre. Ou, par exemple, dans la fonction </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">elif_else,</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nous donnons un avantage √† l'option quand un bloc d'action ou None est form√© plut√¥t que ce que la r√©cursion vise - sinon les branches peuvent atteindre des tailles compl√®tement ind√©centes.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il suffit de consid√©rer les fonctions responsables de la g√©n√©ration al√©atoire d'expressions dans des conditions et des blocs d'actions. Comme je l'ai dit ci-dessus, √† ce stade, ils ne jouent pas un r√¥le d√©cisif et sont pr√©sent√©s ici pour montrer g√©n√©ralement √† quoi ressemblera le code g√©n√©r√© final. Mais puisqu'ils sont utilis√©s dans le g√©n√©rateur, nous les examinerons bri√®vement. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La fonction responsable de la g√©n√©ration du </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bloc d'</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> action </font><b><font style="vertical-align: inherit;">action_str</font></b><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">action_str_gen</span>(<span class="hljs-params">choice_list, offset_koeff, prob_list</span>):</span>
    sol = <span class="hljs-number">9</span>
    curr_offset = <span class="hljs-string">' '</span>*offset_koeff<font></font>
    act_str = <span class="hljs-string">''</span>
    <span class="hljs-keyword">while</span> sol!=<span class="hljs-number">0</span>:<font></font>
        act_str+= curr_offset+rand(rand(choice_list[<span class="hljs-number">1</span>]))+<span class="hljs-string">'='</span>+rand(rand(choice_list))+<span class="hljs-string">'\n'</span>
        prob_list[<span class="hljs-number">6</span>],prob_list[<span class="hljs-number">7</span>],sol = make_solution(prob_list[<span class="hljs-number">6</span>],prob_list[<span class="hljs-number">7</span>])
    <span class="hljs-keyword">return</span>(act_str)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout est assez simple ici: √† partir de la liste imbriqu√©e choise_list, qui, rappelons-le, se compose de v </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ar_list</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (liste de variables) et </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">exp_list</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (liste d'expressions), cette fonction se compose d'une ou plusieurs lignes de cette forme: a = a + b ou b = b . </font><font style="vertical-align: inherit;">Ceux. </font><font style="vertical-align: inherit;">soit une expression est affect√©e √† la variable, soit une autre variable (y compris elle-m√™me). </font><font style="vertical-align: inherit;">La fonction rand s√©lectionne au hasard un √©l√©ment de la liste et n'est n√©cessaire ici que pour ne pas produire de cha√Ænes monstrueuses.</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">rand</span>(<span class="hljs-params">t_list</span>):</span>
    <span class="hljs-keyword">return</span>(t_list[random.randint(<span class="hljs-number">0</span>,len(t_list)<span class="hljs-number">-1</span>)])</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La fonction de g√©n√©ration d'expression </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">if_sub</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pour les conditions semble plus grande.</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">if_sub</span>(<span class="hljs-params">exp_list, var_list, sign, prob_list</span>):</span>
    sub_str = <span class="hljs-string">''</span>
    sol = <span class="hljs-number">9</span><font></font>
    choice_list = [exp_list, var_list]<font></font>
    flag = <span class="hljs-number">0</span>
    <span class="hljs-keyword">while</span> sol!=<span class="hljs-number">0</span>:<font></font>
        prob_list[<span class="hljs-number">6</span>],prob_list[<span class="hljs-number">7</span>],sol = make_solution(prob_list[<span class="hljs-number">6</span>],prob_list[<span class="hljs-number">7</span>])<font></font>
        sub_str+=<span class="hljs-string">'(('</span>+rand(rand(choice_list))+<span class="hljs-string">')'</span>+rand(sign2)+<span class="hljs-string">'('</span>+rand(rand(choice_list))+<span class="hljs-string">'))'</span>
        <span class="hljs-keyword">if</span> flag == <span class="hljs-number">1</span> <span class="hljs-keyword">and</span> sol==<span class="hljs-number">1</span>:<font></font>
            sub_str+=<span class="hljs-string">')'</span>
            flag=<span class="hljs-number">0</span><font></font>
        or_and_exp = or_and(prob_list)<font></font>
        <span class="hljs-keyword">if</span> len(or_and_exp):<font></font>
            sub_str+=or_and_exp<font></font>
        <span class="hljs-keyword">else</span>:
            <span class="hljs-keyword">break</span>
        prob_list[<span class="hljs-number">6</span>],prob_list[<span class="hljs-number">7</span>],sol2 = make_solution(prob_list[<span class="hljs-number">6</span>],prob_list[<span class="hljs-number">7</span>])
        <span class="hljs-keyword">if</span> sol2 == <span class="hljs-number">1</span> <span class="hljs-keyword">and</span> (sub_str[<span class="hljs-number">-1</span>]==<span class="hljs-string">'D'</span> <span class="hljs-keyword">or</span> sub_str[<span class="hljs-number">-1</span>]==<span class="hljs-string">'R'</span>) <span class="hljs-keyword">and</span> flag == <span class="hljs-number">0</span>:<font></font>
            sub_str+=<span class="hljs-string">'('</span>
            flag = <span class="hljs-number">1</span><font></font>
    <font></font>
    <span class="hljs-keyword">if</span> sub_str[<span class="hljs-number">-1</span>] == <span class="hljs-string">'('</span>:
        <span class="hljs-keyword">if</span> sub_str[<span class="hljs-number">-2</span>]==<span class="hljs-string">'d'</span>:<font></font>
           sub_str=sub_str[<span class="hljs-number">0</span>:<span class="hljs-number">-4</span>]
        <span class="hljs-keyword">elif</span> sub_str[<span class="hljs-number">-2</span>]==<span class="hljs-string">'r'</span>:<font></font>
             sub_str=sub_str[<span class="hljs-number">0</span>:<span class="hljs-number">-3</span>]
        <span class="hljs-keyword">else</span>:<font></font>
            sub_str=sub_str[<span class="hljs-number">0</span>:<span class="hljs-number">-1</span>]
    <span class="hljs-keyword">elif</span> sub_str[<span class="hljs-number">-1</span>]==<span class="hljs-string">'d'</span>:<font></font>
         sub_str=sub_str[<span class="hljs-number">0</span>:<span class="hljs-number">-3</span>]
    <span class="hljs-keyword">elif</span> sub_str[<span class="hljs-number">-1</span>]==<span class="hljs-string">'r'</span>:<font></font>
         sub_str=sub_str[<span class="hljs-number">0</span>:<span class="hljs-number">-2</span>]
    <span class="hljs-keyword">else</span>:
         <span class="hljs-literal">None</span>
    <span class="hljs-keyword">if</span> flag == <span class="hljs-number">1</span>:<font></font>
        sub_str+=<span class="hljs-string">')'</span>
        <span class="hljs-keyword">return</span>(sub_str)
    <span class="hljs-keyword">else</span>:
        <span class="hljs-keyword">return</span>(sub_str)
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il g√©n√®re des expressions par type: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">((a)&gt; = (ba)) ou ((a)&gt; = (a)) ou ((b) &lt;= (b))</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Dans le m√™me temps, les c√¥t√©s gauche et droit peuvent avoir diff√©rentes options et se pr√©senter comme des variables distinctes, ainsi que des expressions ou leurs groupes. </font><font style="vertical-align: inherit;">Les op√©rateurs logiques </font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ou</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et </font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sont √©galement utilis√©s ici </font><font style="vertical-align: inherit;">, qui sont s√©lectionn√©s par commodit√© √† l'aide de la fonction </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">or_and_exp</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">or_and</span>(<span class="hljs-params">prob_list</span>):</span>
    prob_list[<span class="hljs-number">8</span>],prob_list[<span class="hljs-number">9</span>],sol = make_solution(prob_list[<span class="hljs-number">8</span>],prob_list[<span class="hljs-number">9</span>])
    <span class="hljs-keyword">if</span> sol==<span class="hljs-number">-1</span>:
        <span class="hljs-keyword">return</span>(<span class="hljs-string">'and'</span>)
    <span class="hljs-keyword">elif</span> sol==<span class="hljs-number">1</span>:
        <span class="hljs-keyword">return</span>(<span class="hljs-string">'or'</span>)
    <span class="hljs-keyword">else</span>:
        <span class="hljs-keyword">return</span>(<span class="hljs-string">''</span>)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le reste de la fonction </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">if_sub</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> coupe les queues suppl√©mentaires des expressions et ajoute, si n√©cessaire, des crochets de fermeture - pour consid√©rer ces danses avec des tambourins ici, je pense, est inopportun. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eh bien voil√† tout. </font><font style="vertical-align: inherit;">Vous pouvez d√©marrer le g√©n√©rateur, par exemple, comme ceci:</font></font><br>
<br>
<pre><code class="python hljs">var_list = [<span class="hljs-string">'a'</span>,<span class="hljs-string">'b'</span>]<font></font>
exp_list = [<span class="hljs-string">'a+b'</span>,<span class="hljs-string">'b-a'</span>, <span class="hljs-string">'b//a'</span>]<font></font>
sign = [<span class="hljs-string">'+'</span>,<span class="hljs-string">'-'</span>,<span class="hljs-string">'/'</span>,<span class="hljs-string">'*'</span>,<span class="hljs-string">'//'</span>]<font></font>
sign2 = [<span class="hljs-string">'&gt;'</span>,<span class="hljs-string">'&lt;'</span>,<span class="hljs-string">'=='</span>,<span class="hljs-string">'&gt;='</span>,<span class="hljs-string">'&lt;='</span>,<span class="hljs-string">'!='</span>]<font></font>
a = <span class="hljs-number">3</span>
b = <span class="hljs-number">2</span>       
prob_list = [<span class="hljs-number">0.5</span> <span class="hljs-keyword">for</span> y <span class="hljs-keyword">in</span> range(<span class="hljs-number">0</span>,<span class="hljs-number">10</span>)]      
<span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<font></font>
     if_str = <span class="hljs-string">''</span>
     if_str, offset_koeff, fin_else_flag, prob_list = if_gen(exp_list, var_list, if_str, <span class="hljs-number">0</span>,<span class="hljs-number">0</span>, prob_list)
     <span class="hljs-keyword">try</span>:<font></font>
         exec(compile(if_str,<span class="hljs-string">'gen'</span>,<span class="hljs-string">'exec'</span>))<font></font>
         print(if_str)<font></font>
         input()<font></font>
         <font></font>
     <span class="hljs-keyword">except</span> ZeroDivisionError:
         <span class="hljs-literal">None</span>
     <span class="hljs-keyword">except</span>:<font></font>
         print(<span class="hljs-string">'error'</span>)<font></font>
         print(if_str)<font></font>
         input()</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
D'abord, l'entr√©e, y compris une </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">prob_list</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> avec probabilit√©s </font><font style="vertical-align: inherit;">, puis dans une boucle infinie, appelant la fonction principale </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">if_gen</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et d√©marrant la cha√Æne g√©n√©r√©e g√©n√©r√©e pour ex√©cution. Il vaut la peine de traiter s√©par√©ment ZeroDivisionError, car la division par z√©ro avec une telle construction al√©atoire des expressions est tr√®s courante. Apr√®s le lancement, appuyez simplement sur Entr√©e pour voir une autre g√©n√©ration. Le plus souvent, ils seront assez simples, mais souvent ramifi√©s et m√™me tr√®s ramifi√©s. Eh bien, l' </font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">import al√©atoire</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> au d√©but serait √©galement bien √† ins√©rer;) Pour ceux qui ne veulent pas tout voir √† la main, vous pouvez t√©l√©charger le fichier depuis </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Github</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (fichier if_gen.py).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En conclusion, je tiens √† dire que le code que j'ai pr√©sent√© a √©t√© test√© sur des centaines de milliers de g√©n√©rations sans erreur, alors qu'il d√©montrait toute la palette des sch√©mas if-elif-else que je voulais enfin voir. Une fois, par erreur, j'ai donn√© dans une partie du code une probabilit√© de r√©cursivit√© trop √©lev√©e et j'ai obtenu 52 000 (!) Lignes de g√©n√©ration et en m√™me temps √ßa fonctionnait (bien que la maquette ait √©t√© suspendue pendant 30 secondes). Cela indique √©galement la fiabilit√© de l'algorithme. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Probablement, il √©tait possible d'√©crire de mani√®re plus concise quelque part, d'optimiser quelque part, d'organiser la fonction principale d'une autre mani√®re, mais l'essentiel est que ce code fonctionne et g√©n√®re environ 250 g√©n√©rations par seconde, ce qui, √† mon avis, est tout √† fait acceptable.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je n'ai jamais consid√©r√© ce code comme autosuffisant - ce n'est qu'un module du futur organisme num√©rique et a √©t√© √©crit √† des fins de recherche, il n'a donc pratiquement aucune application pratique. </font><font style="vertical-align: inherit;">En m√™me temps, je ne suis pas responsable des cons√©quences pour quiconque utilise le code ci-dessus, et j'exhorte tout le monde √† couper du pain avec un couteau pour couper le pain, et pas autre chose. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans le prochain article, nous consid√©rerons le deuxi√®me module, qui sera responsable de la formation al√©atoire de l'exp√©rience. </font><font style="vertical-align: inherit;">Ce sujet promet d'√™tre beaucoup plus int√©ressant que le g√©n√©rateur if, et je posterai certainement les r√©sultats d√®s que je les aurai.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr504270/index.html">Svelte est-il un bon choix pour la mise en ≈ìuvre de widgets?</a></li>
<li><a href="../fr504276/index.html">Top 10 des livres pour d√©veloppeurs</a></li>
<li><a href="../fr504282/index.html">Cr√©ation d'architecture d'entreprise dans NSPK</a></li>
<li><a href="../fr504284/index.html">Le livre ¬´Pure Agile. Les bases de la flexibilit√©</a></li>
<li><a href="../fr504290/index.html">Test de charge en tant que service CI pour les d√©veloppeurs</a></li>
<li><a href="../fr504306/index.html">Comment le mat√©riel russe est-il con√ßu pour le stockage Aerodisk Vostok sur Elbrus</a></li>
<li><a href="../fr504310/index.html">Dichotomie des donn√©es: repenser la relation avec les donn√©es et les services</a></li>
<li><a href="../fr504312/index.html">Registre unifi√© des programmes russes et de la GPL. Mes cinq cents</a></li>
<li><a href="../fr504314/index.html">Impl√©mentation des commandes Docker Pull et Docker Push sans client Docker via des requ√™tes HTTP</a></li>
<li><a href="../fr504320/index.html">Code de ligne unique ou validation Nethermind √† l'aide de PVS-Studio C # pour Linux</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>