<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤢 🛃 👈 光HDMIエクステンダー。300メートル 💂🏼 🐚 🤴🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="こんにちは、ハブル！
 
 
 
 300メートル用のHDMI光ファイバー延長ケーブルの開発。リターンチャネルの拒否（1本の光ファイバーケーブルでのデータ伝送）。モニターからのEDIDの複製。
 
 HDMI規格は、画面への画像出力が必要な多くの領域で広く使用されています。個人的には、HDMIケーブ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>光HDMIエクステンダー。300メートル</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/473796/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">こんにちは、ハブル！</font></font><br>
<br>
<img src="https://habrastorage.org/webt/mn/v0/c1/mnv0c1yzdk47cytsckizxbgnvxk.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
300メートル用のHDMI光ファイバー延長ケーブルの開発。</font><font style="vertical-align: inherit;">リターンチャネルの拒否（1本の光ファイバーケーブルでのデータ伝送）。</font><font style="vertical-align: inherit;">モニターからのEDIDの複製。</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
HDMI規格は、画面への画像出力が必要な多くの領域で広く使用されています。個人的には、HDMIケーブル経由で10メートルの距離に信号を送信することができました（これはもはや必要なくなりました）。画質を損なうことなく、30〜40mの距離まで画像を転送できると思います。このようなケーブルをブローチングする場合の主な欠点は、コネクタ自体の直径とサイズです。ケーブルを除外する最も簡単な方法は、無線延長コードを使用することです。100〜150メートルに到達することは可能だと思いますが、確実には言えません。残念ながら、すべてのオブジェクトが何らかの理由でワイヤレスネットワークの使用を許可しているわけではありません。そしてさらに必要な場合は？</font></font><br>
<br>
<img src="https://habrastorage.org/webt/a0/bl/n5/a0bln5vodfqydql1puhfo7gwdjw.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図1。 HDMIケーブルと光学系（LC）</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
もちろん、光学系はおそらくビデオを送信するための最良のオプションではありませんが、据え置き型のPCやモニターを使用する場合は、何もありません。</font><font style="vertical-align: inherit;">最初の論文は、光ケーブルの直径（私の場合は2〜3mm）と光ファイバーケーブルのコネクタの直径です。</font><font style="vertical-align: inherit;">2番目は、もちろん、距離です。</font><font style="vertical-align: inherit;">今後のテストでは、300mのケーブル、直径（外部）-3mmでテストが行​​われたと言います。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">エレメンタルベース</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
エレメントベースを検討する際、予想外に、この種の機器を専門とする中国企業のSiFotonicsが選択を下しました。</font><font style="vertical-align: inherit;">まず、製品を調べて2つのデバッグを取得し、300メートルの光ケーブルで接続して、すべてが問題なく動作することを確認しました。</font><font style="vertical-align: inherit;">また、SFP光レシーバー/トランスミッター（ROSA / TOSA）、シリアライザー/デシリアライザー、ドライバーなども備えています。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">動作原理</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
デバイスを接続して操作するには、2本の光ケーブルを接続して電源を供給する必要があります（microUSBケーブル）。 EDIDテーブルを交換するためのI2Cが存在する従来のHDMIケーブルに例えると、すべてが同じです。1つはデータ転送用、もう1つはモニターからビデオカードにEDIDを転送するためのものです。データは10Gbpsの速度で送信されます。戻りチャネルのケーブルを引き裂くと、画像は必ず消えます。この時点で、いくつかの疑問が潜んでおり、リターンチャネルのサービスデータまたは同期マークが送信されているかどうか、またはデバイスが相互の接続を監視している可能性があります</font></font><br>
<br>
<img src="https://habrastorage.org/webt/kr/zc/jj/krzcjjntpkohogy_33h8uf0nksk.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。モジュールの構成</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ボードの最初のイテレーションはレイアウトでもあり、サイズは20X45mmです。 「サイド」電源コネクタを使用すると、埋立地での電源バスの分配が容易になります。合計4つの層が判明しました。なぜこのPCB構成が悪いのか、後で書きます。トリッキーなデバッグ開発者は0201パッシブを使用しましたが、これは絶対にしたくないので、チップの下に0402とコンデンサーポリッジを使用しました。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/qj/90/cf/qj90cfepirzf-imyui0ouuutqu8.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図3。ソースモジュールボードレイアウトの3Dモデル</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
上で書いたように、私の仕事は300メートルの作動距離でカップルを作ることだけでなく、光学系のリターンチャンネルを取り除くことでもありました。開発段階でも、中国のソフトウェアの完成に関与しないことを決定しました（すべてのソースは提供されましたが）。これは、最初に、これは理解できないコンパイラーの理解できないコードの行の束であり、次に、SiFotonicsはフラッシュされたチップを提供できるためです。製品の一部としてデバイスをフラッシュするのは非常に難しいので、非常に便利です。読者が難しさについて話すときに私が誇張していると思わないように、私はプログラミングスタンドの写真を提供します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/n_/nm/fn/n_nmfnhsezuqt1q-ly4tg3kewms.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図4。プログラミングと診断用のスタンド</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
はい、はい。おそらくご想像のとおり、プログラミング用のJTAG接点は、microUSB接点、およびGNDであった一部のHDMI接点に出力されます。これが仕事の質に影響を及ぼさなかったことをすぐに予約してください。だから、立って。チップをプログラミングするには、まずスタンドの回路図を1つ収集し、専用のソフトウェアを使用してチップをプログラミングモードにする必要があります。次に、別の回路を組み立て、他のソフトウェアを使用してボードをフラッシュする必要があります。その後、自動的に作業モードになります。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一般的に、1000個でも実用的ではないようです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
リバースチャネルに戻りましょう。 EDIDテーブルを保存するには、EEPROMが必要であり、その場でアドレスを変更する必要があります。彼は小型のUS-8パッケージでN24C02UDTGを受け取りました。プログラミングには、STM32F031G4U6マイクロコントローラーを使用します。これも、パブリックドメインにある最小のパッケージであるUFQFPN-28に含まれています。 TPS27081ADDCRの電源スイッチも使用しました。そして、ここに私が得たものがあります：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/h4/kb/gj/h4kbgj-h9ntrucsztkaiurs06do.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図5。 EDIDクローニングの実装スキーム</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アイデアは以下の通りです。この回路は、送信モジュール（PCに接続するモジュール）に実装されています。 EDIDモニターのクローンを作成するには、デバイスをモニターに接続します。デフォルトでは、モジュールのEEPROMアドレスは（読み取り中）モニターのEEPROMアドレスと一致しない必要があります。つまり、他のアドレスである可能性があります。たとえば、A0レッグを管理可能にしました。モニターへの接続時に、EEPROMに電力が供給され、レッグA0が論理「0」抵抗にプルアップされます。同じアドレスを持つ2つのEEPROMがi2cバスにぶら下がっていますが、まだそれらを操作していないため、これは重要ではありません。私の回路には、電源/ファームウェアEDID /エラーを示すボタンとLEDもあります。ボタンを短く押すとアドレスが変更され、マイクロコントローラーがEDIDの読み取り/書き込みを開始できるようになります。ボタンからの信号を受信すると、EEPROMを電源にリセットします（念のため）。モニターのEDIDを読み取り、すぐにチップに書き込みます。 LEDで3回点滅し、EEPROMの電源を切ります。読み取り/書き込みは瞬時に行われるため、点滅が強制的に遅延されるため、ユーザーは何かが発生していることを理解できます。つまり、すでに手放すことが可能なときに点滅し始めます。何か問題がある場合は、LEDを点灯しないでください。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、モジュールをPCに接続し、すぐに設定で新しいモニターを確認します。</font><font style="vertical-align: inherit;">問題は解決された。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
マイクロコントローラーをプログラミングするために、SWDバスが導入されました。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/oe/xl/ba/oexlbaajt8temn8aq4sdthg29dy.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図6。</font><font style="vertical-align: inherit;">モジュール基板の裏側</font></font></i><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">特徴</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
EDIDクローニングですべての作業を行った後、逆光チャネルを削除し、すべてが問題なく動作しました。これらの実験では、USB PCから電力が供給されました。起動時に、コンピューター（いずれにせよ）が一瞬USB電源をオフにし、モニターにBIOSの画像が点滅します。これは重要ではありません。次に、リバースチャネルモジュールをデバイスから取り外し、この点滅の後、画像が回復しなくなりました。そして、これはまさにモニターデバイスにTOSAモジュールがないためでした。レーザーの存在をエミュレートしようとしましたが、まったく役に立ちませんでした。この問題はファームウェアで解決できると私はほぼ確信しているが、私たちはそれには触れないことにした。奇跡は、両方のデバイス（受信機と送信機）を電源に接続したときに発生しました（ちなみに、それは作業明細書に示されていました）。画像が点滅を停止し、それに応じて消えます。動作中にデバイスの電力を歪めた場合、画像は問題なく復元されます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/fz/00/35/fz0035l-7lplz-hgibwwnnkma8m.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図7。送信モジュール（レーザー）のスイッチング回路次</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
に、プリント基板と電源コネクタの構成を「横向き」に戻します。この実装は当初は不便であり、レイアウトにのみ適していました。リリースデバイスでは、ボードの幅を16.3 mmに減らし、リバースチャネルの光モジュールの代わりに電源コネクタを配置しました。これにより、1つのビデオカードに複数のデバイスを含めることができます。そうしないと、電源コネクタが邪魔になり、ボードが非常に広くなりました。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/9l/jd/_4/9ljd_4un4tsnidmubcxb2pjgiz4.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図8。狭い受信機および送信機ボード</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここではもちろん、コンポーネントの再配線や再配置が数多く行われていました。</font><font style="vertical-align: inherit;">これらのサイズに最適化し、microUSBコネクタを転送するために、供給範囲は完全にやり直されました。</font><font style="vertical-align: inherit;">ご想像のとおり、両方のデバイスのケースは同じであるため、ボード構成、コネクタ、および光モジュールは同じ場所にあります。</font><font style="vertical-align: inherit;">本体はアルミニウムから削り出されており、プロセッサとドライバのヒートシンクです。</font><font style="vertical-align: inherit;">これらのコンポーネントの突起は内側にフライス加工されているため、同じように配置されています。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">結論 </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
現在、4組のデバイスがはんだ付けされており、テストはさまざまなモニターやテレビの長いケーブルで実行されます。</font><font style="vertical-align: inherit;">仕事についての不満はありません。</font><font style="vertical-align: inherit;">fullHD以下でのみ確認します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ありがとう、また会いましょう！</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja473784/index.html">オントロジーネットワークでWebAssemblyのスマートコントラクトを作成する方法 パート2：C ++</a></li>
<li><a href="../ja473786/index.html">リガでのハッカソンの登録は終了しています。賞-PhysTechでの短期トレーニング</a></li>
<li><a href="../ja473788/index.html">マイクロタンパク質が現代生物学の未知の側面を発見</a></li>
<li><a href="../ja473790/index.html">3Dグラフィックのスプライン、最も自動化されたオプション</a></li>
<li><a href="../ja473794/index.html">モバイルフィッシング-無限の脅威</a></li>
<li><a href="../ja473798/index.html">プロトコル指向プログラミング。パート1</a></li>
<li><a href="../ja473800/index.html">バイオレーダー、段ボールドローン、空飛ぶソーセージ-良い検索技術と悪い検索技術についてのNikita Kalinovsky</a></li>
<li><a href="../ja473802/index.html">アランボンバー-勝利後の落下</a></li>
<li><a href="../ja473804/index.html">ジュニアQAの給与はいくらですか？</a></li>
<li><a href="../ja473806/index.html">これは私たちが望む種類のインターネットです：ソーシャルメディアがどのように致命的な武器になったか</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>