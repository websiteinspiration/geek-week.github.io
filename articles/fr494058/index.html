<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üì¥ üëãüèª ü§ûüèº Minuterie de brossage des dents üëçüèΩ üíØ üö∂üèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour, Habr! 
 
 
 
 Cet article s'adresse √† ceux qui n'ont pas toutes les brosses dans la salle de bain avec une minuterie, et qui ne veulent pas u...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Minuterie de brossage des dents</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/494058/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bonjour, Habr! </font></font><br>
<br>
<img src="https://habrastorage.org/webt/kf/9-/jw/kf9-jwevd_sekilnlp_-ervkxgw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cet article s'adresse √† ceux qui n'ont pas toutes les brosses dans la salle de bain avec une minuterie, et qui ne veulent pas utiliser de sablier.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons deux filles. Chaque fois qu'ils entrent dans la salle de bain pour se brosser les dents, ils demandent √† √™tre rep√©r√©s pendant deux minutes (sur quatre brosses pour enfants, une seule a une minuterie pour se brosser les dents). Pour rendre le processus plus int√©ressant, et nous n'avons pas eu √† rappeler aux enfants de quitter la salle de bain quatre fois par jour, j'ai d√©cid√© de trouver une minuterie. Le sablier est tomb√© imm√©diatement - ce n'est en quelque sorte pas sportif. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/yn/z0/di/ynz0dieaj7n70tdbqwmqspauruu.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. 1. Circuit de minuterie</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le circuit de minuterie est tr√®s simple et est illustr√© sur la figure 1. Les boutons m√©caniques ne sont pas tr√®s adapt√©s √† la salle de bain, car en appuyant avec les mains mouill√©es, ils peuvent √©chouer (je vais vernir la planche), il a donc √©t√© d√©cid√© de faire toucher le bouton. Auparavant, j'utilisais la puce TTP223 et je l'ai install√©e en cons√©quence, mais maintenant elle fonctionnera comme une r√©initialisation pour le microcontr√¥leur. Je pensais que puisque la minuterie est d√©sactiv√©e presque tout le temps (si vous ne tenez pas compte du fait que les enfants vont constamment la fouiller, vont se laver les mains), vous pouvez utiliser le mode veille et, lorsque vous appuyez sur le bouton, r√©initialisez simplement le MK. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le microcontr√¥leur a utilis√© celui qui √©tait disponible - STM32F031G4. Le petit UFQFPN-28 est tr√®s pratique pour les m√©tiers miniatures. Surtout n'a pas ajout√© de tweeter (pour √©conomiser la batterie) et buck-boost, de sorte que les dimensions √©taient minimes.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/hz/0c/qm/hz0cqmbl3qxqpn2rqakpknmddu8.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig.2. Haut de la carte de circuit imprim√©</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Sur la carte de circuit imprim√©, je n'ai fait que dix vias et, pour ne pas √™tre une horreur, huit d'entre eux √©taient situ√©s sur les plates-formes LED. Je voulais aussi vraiment coller une photo d'empreinte digitale quelque part. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/mu/uu/t7/muuut7av1aj7acl9fly_vypjub8.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig.3. Fond de carte de circuit imprim√© J'ai</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
essay√© de rendre la </font><i><font style="vertical-align: inherit;">carte de circuit imprim√©</font></i><font style="vertical-align: inherit;"> aussi petite que possible, car je ne sais pas encore si je vais imprimer le bo√Ætier ou simplement coller le ruban adh√©sif double face sur la tuile ou le miroir sur le compartiment de la batterie. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/1o/u3/ir/1ou3irruebs43lawnqmwx4hqc0u.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig.4. La carte avec les composants du bas Le</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
firmware est √©galement assez simple (g√©n√©r√© dans CubeMX pour IAR). Clignote les diodes au d√©marrage et s'√©teint, puis s'allume √† des intervalles de 30 secondes une √† la fois, et clignote √† nouveau avant le coucher. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En veille, seules quelques lignes sont utilis√©es:</font></font><br>
<br>
<pre><code class="cpp hljs">DBGMCU-&gt;CR |= DBGMCU_CR_DBG_STANDBY;  </code></pre><br>
<pre><code class="cpp hljs">HAL_PWR_EnterSTANDBYMode();</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apr√®s s'√™tre endormi, le SWD tombe, mais comme j'ai un capteur sur la r√©initialisation, il suffit d'appuyer sur le toucher et de le faire clignoter. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les LED utilisent le chinois avec ali. </font><font style="vertical-align: inherit;">Avec un multim√®tre (UNI-T UT70A), il s'est av√©r√© mesurer quelque chose comme ceci:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1 LED - 3,2mA;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 LED - 3,4mA;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3 LED - 3,6mA;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4 LED - 3,8mA;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En mode veille 8uA.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je pense jouer avec la fr√©quence de la STM, et dans le mode de fonctionnement pour la rendre minimale. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'esp√®re que les enfants seront ravis) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PS: Les </font></font><br>
<img src="https://habrastorage.org/webt/5a/ei/mi/5aeimimvj-trwjxe4pvxzswduiy.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
enfants sont ravis! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Merci pour l'attention!</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr494048/index.html">Les meilleurs mat√©riaux pour la fabrication ind√©pendante de masques m√©dicaux</a></li>
<li><a href="../fr494050/index.html">"Udalenka". Notes du d√©veloppeur de bureau d'hier</a></li>
<li><a href="../fr494052/index.html">Quel est le probl√®me avec les collections en Java et pourquoi Guava n'aidera pas</a></li>
<li><a href="../fr494054/index.html">Num√©ro 33: Formation informatique - probl√®mes et d√©fis actuels des grandes entreprises</a></li>
<li><a href="../fr494056/index.html">Lab X - Usine de projets top secrets de Google</a></li>
<li><a href="../fr494062/index.html">Histoire d'Internet: l'√®re de la fragmentation; partie 1: facteur de charge</a></li>
<li><a href="../fr494064/index.html">Jouez avec le chat, achetez un peignoir: Linus Torvalds pense √† travailler √† domicile</a></li>
<li><a href="../fr494072/index.html">L'avenir est l√†: comment fonctionnent les robots vocaux et ce qu'ils peuvent faire</a></li>
<li><a href="../fr494074/index.html">Comment garder l'attention du joueur dans le jeu</a></li>
<li><a href="../fr494076/index.html">Analyse: strat√©gies de comportement des investisseurs lors des krachs boursiers</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>