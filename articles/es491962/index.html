<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßíüèø üßôüèº üöí VPN asesino. Acceso remoto adecuado a servidores de batalla ‚òùüèΩ üòª üçâ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="La opini√≥n expresada en este art√≠culo es la opini√≥n personal del autor. √âl enfatiza que puede no coincidir con la opini√≥n de su empleador, sus superio...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>VPN asesino. Acceso remoto adecuado a servidores de batalla</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/vdsina/blog/491962/"><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La opini√≥n expresada en este art√≠culo es la opini√≥n personal del autor. </font><font style="vertical-align: inherit;">√âl enfatiza que puede no coincidir con la opini√≥n de su empleador, sus superiores y el departamento de seguridad. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Una de las mejores cosas de nuestra empresa en t√©rminos de infraestructura es c√≥mo implementamos el acceso remoto. </font><font style="vertical-align: inherit;">Esto es solo magia s√∫per mega protegida. </font><font style="vertical-align: inherit;">Habl√© con muchos de mis compa√±eros guardias de seguridad y auditores, y parece que accidentalmente inventamos una historia completamente nueva al mezclar soluciones comerciales y nuestro software. </font><font style="vertical-align: inherit;">Entonces, pens√©, ser√≠a interesante profundizar en los detalles t√©cnicos de c√≥mo funciona la industria con soluciones de acceso remoto obsoletas y c√≥mo la implementamos.</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Buena persona VPN no aconsejar√°</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comenzar√© con una declaraci√≥n fuerte: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">todas las VPN son basura</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La VPN, como otras tecnolog√≠as digitales, se puede configurar para que si se piratea, el mundo no se acabar√°. </font><font style="vertical-align: inherit;">Sin embargo, nadie hace esto ... ¬°pero en teor√≠a s√≠ pueden! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En el 99.95% de los casos, la VPN est√° configurada para:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Crear un puente de red entre el dispositivo (computadora port√°til u otro servidor)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">... y una red m√°s grande de servidores (por ejemplo, en la nube o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en las instalaciones</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">... e Internet, protegidos por una capa adicional de encriptaci√≥n</font></font></li>
</ol><br>
<img src="https://habrastorage.org/webt/jx/nd/df/jxnddfmvj_3nujlmacixtdz3nbq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esta no es una buena idea. ¬øImagina si un virus se ha asentado en su computadora port√°til y se est√° conectando a trav√©s de VPN a una red de servidores de batalla? Ta Dam! El virus ahora tiene acceso LAN a su producci√≥n. ¬øQu√© hay en el escape? Tristeza. Mucha tristeza </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bien, digamos que el caso del virus es descabellado. Pero, ¬øqu√© pasa con el hecho de que un pirata inform√°tico puede infiltrarse en la propia VPN, por ejemplo, utilizando una vulnerabilidad dentro del dispositivo o software en el que funciona la VPN? Entonces, ¬øhabiendo llegado directamente a la red de destino? Este es un asunto serio y lejos de teorizar. Puede leer m√°s en el art√≠culo sobre </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c√≥mo se us√≥ Heartbleed para capturar VPN</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> utilizando el vector de ataque, del cual advert√≠ directamente </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en mi blog</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No hace mucho tiempo, una ola de vulnerabilidades de VPN se extendi√≥ por todo el mundo, que los </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ciberdelincuentes utilizaron de</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> inmediato </font><font style="vertical-align: inherit;">para obtener acceso a las redes objetivo. </font><font style="vertical-align: inherit;">Pero esto no es sorprendente, ¬øverdad? </font><font style="vertical-align: inherit;">Estos sistemas "miran" directamente en la Red, sin ning√∫n otro mecanismo de protecci√≥n frente a ellos. </font><font style="vertical-align: inherit;">Por lo general, las correcciones y parches no se aplican autom√°ticamente e implican mecanismos propietarios controlados por software propietario que se ejecuta en un sistema operativo propietario. </font><font style="vertical-align: inherit;">Bueno, buena suerte ah√≠. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øEs dif√≠cil encontrar estos dispositivos VPN? </font><font style="vertical-align: inherit;">Antes de escribir este art√≠culo, nunca lo intent√©, as√≠ que no estaba seguro. </font><font style="vertical-align: inherit;">Aproximadamente media hora en </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Shodan.io</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y por favor, algunos resultados importantes de la salida:</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Thomson Reuters</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> es una compa√±√≠a de $ 41 mil millones con 26,000 empleados, la mitad de los cuales proviene de servicios financieros.</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SAP Concur</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> es un servicio de gesti√≥n de viajes, romperlo dar√≠a un mont√≥n de datos personales y de pago de todo tipo.</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Seguro progresivo</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : datos personales e informaci√≥n m√©dica personal, junto con algunos datos de pago.</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chevron Phillips Chemical</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : el nombre habla por s√≠ mismo.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bueno, esto probablemente no sea muy bueno. </font><font style="vertical-align: inherit;">Si estas cosas son tan f√°ciles de encontrar, no parece ser la soluci√≥n perfecta para ponerlas en l√≠nea. </font><font style="vertical-align: inherit;">¬øTenemos alguna otra opci√≥n?</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cero confianza</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Confianza cero [literalmente: ‚Äúconfianza cero‚Äù]: en esencia, significa que autoriza cada conexi√≥n y no asume que algunas de ellas son confiables porque ya est√°n dentro de su red. </font><font style="vertical-align: inherit;">Si desea comprender mejor este t√©rmino y repensar su enfoque hacia los negocios, lea </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">este art√≠culo en Network World</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (perd√≥n por otro autovergonzoso descarado). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Compramos la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">soluci√≥n Okta Advanced Server Access</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (OASA) para introducir la autorizaci√≥n Zero-Trust en los servidores de batalla. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OASA es</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> genial por tres razones:</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. Esto es solo una envoltura alrededor de la configuraci√≥n de OpenSSH en esteroides</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bajo el cap√≥, la plataforma OASA es una implementaci√≥n bien administrada de OpenSSH (el mismo comando ssh en su consola). </font><font style="vertical-align: inherit;">Y OpenSSH es una soluci√≥n de administraci√≥n remota extremadamente probada y segura. </font><font style="vertical-align: inherit;">Por cierto, desde 2003, OpenSSH no ha tenido una sola vulnerabilidad que podr√≠a conducir a un acceso remoto no autorizado en la configuraci√≥n est√°ndar. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los puntos de entrada en este esquema son instancias regulares de Amazon Linux 2 EC2. Por lo tanto, el √°rea de ataque es extremadamente peque√±a. </font><font style="vertical-align: inherit;">Recuerde: uno de los principales problemas con el uso de una VPN son las configuraciones de software / SO patentadas que evitan los parches autom√°ticos. </font><font style="vertical-align: inherit;">La capacidad de actualizar nuestros puntos de entrada de red junto con el resto de la infraestructura es una gran victoria.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. No hay puentes de red</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como mencion√© anteriormente, la mayor√≠a de las VPN est√°n configuradas para crear un puente de red entre un dispositivo de red, como una computadora port√°til, y una red de servidores en Internet. Uno de mis puntos m√°s dolorosos en las VPN es que interceptan todo el tr√°fico de su red. Por supuesto, puede reconfigurar a un comportamiento diferente, pero nuestros clientes y los protocolos de seguridad </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NIST 800-53 SC-7 (7)</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> generalmente requieren eso. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este es un buen ejemplo de c√≥mo algunas medidas de seguridad est√°n muy por detr√°s del desarrollo de la industria. En el mundo de la vieja escuela, VPN podr√≠a ser la √∫nica capa para cifrar el tr√°fico. Los auditores a veces creen que sin la protecci√≥n de VPN enviar√°n sus datos a trav√©s de canales no cifrados.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Afortunadamente, hay una mejor manera. En el modelo OASA, se establece una conexi√≥n individualmente entre usted y el servidor. Por ejemplo, en respuesta a la solicitud "Quiero iniciar sesi√≥n en la instancia de EC2 i-028d62efa6f0b36b5", su sistema se conecta al punto de entrada de la red y luego al servidor de destino. OASA tambi√©n protege estas conexiones mediante la emisi√≥n de certificados de cliente de diez minutos despu√©s de la primera verificaci√≥n de sus datos a trav√©s de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SSO</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , y luego verificando que est√° en el dispositivo de confianza previsto (y confirmado).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hay poca libertad para recorrer la red. </font><font style="vertical-align: inherit;">Un administrador puede ingresar un punto de entrada de red y reenviar puertos a otro destino, pero esta funci√≥n est√° deshabilitada de manera predeterminada y debe solicitarse expl√≠citamente al establecer una conexi√≥n. </font><font style="vertical-align: inherit;">Y la mejor parte es que nadie me exige que lleve todo el tr√°fico a trav√©s de la Nube privada virtual, porque esto no se llama una "VPN".</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. Acceso a la red dedicado e IP aleatoria</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Estos puntos de entrada de red se implementan por separado para cada Nube privada virtual (por ejemplo, uno para producci√≥n, uno para puesta en escena, uno para desarrollo, etc.). Adem√°s, cada uno de ellos es monitoreado de cerca por nuestra soluci√≥n de seguridad, que registra toda la actividad y filtra el tr√°fico. Si la galleta est√° dentro de uno de los puntos de entrada, algo tampoco funcionar√°. En cualquier situaci√≥n, nuestro esquema de seguridad no permite el acceso a recursos protegidos simplemente porque ya est√° dentro de la Nube privada virtual.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Uno de mis mecanismos de defensa favoritos apareci√≥ por accidente. </font><font style="vertical-align: inherit;">Cuando comenzamos a configurar los puntos de entrada, cada uno estaba configurado para una direcci√≥n IP est√°tica de AWS. </font><font style="vertical-align: inherit;">Muy r√°pidamente, descubrimos que estas direcciones IP a veces no estaban vinculadas a instancias EC2 en el momento adecuado, lo que podr√≠a conducir a una autoconfiguraci√≥n incorrecta de OASA. </font><font style="vertical-align: inherit;">Despu√©s de experimentar las delicias de una docena de soluciones diferentes en la producci√≥n, no pude soportarlo y simplemente elimin√© toda la historia sobre IP est√°ticas, y funcion√≥. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/8b/jb/bj/8bjbbj8qux60kjwmdjyqjihqgiw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
OASA solo necesita una IP con conexi√≥n a Internet; no tiene que ser conocida de antemano. </font><font style="vertical-align: inherit;">Cuando el cliente est√° listo para establecer una conexi√≥n, se solicita un GUID √∫nico, con la ayuda de la cual se determina la IP:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Usuario: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quiero iniciar sesi√≥n para conectarme a vpc-99f2acff</font></font></i></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aplicaci√≥n de cliente OASA: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">he definido vpc-99f2acff como un servidor conocido con GUID 25af5d4f-e657-4583-b0bd-beb1ca4f0c1f</font></font></i></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Servidor OASA: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">K 25af5d4f-e657-4583-b0bd-beb1ca4f0c1f se puede acceder en 3.22.198.24, aqu√≠ est√°n los certificados</font></font></i></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aplicaci√≥n cliente OASA: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">certificados instalados, conexi√≥n a 3.22.198.24 a trav√©s de SSH ...</font></font></i></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esto significa que cada instancia de nuestra infraestructura de punto de entrada (una </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">publicaci√≥n separada al</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> respecto para su atenci√≥n) viene con un conjunto completamente nuevo de direcciones IP. </font><font style="vertical-align: inherit;">Por lo tanto, los piratas inform√°ticos aleatorios tendr√°n que buscar una IP entre decenas de millones, y su n√∫mero aumenta cada d√≠a. </font><font style="vertical-align: inherit;">Desafortunadamente para ellos, esta b√∫squeda es completamente en vano, gracias a ...</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Puerto de empresa golpeando</font></font></h2><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La anulaci√≥n de puertos</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> [literalmente: anulaci√≥n de puertos] es algo que, en principio, nadie usa en el mundo real, pero que es muy divertido de configurar. En resumen, la interrupci√≥n de puertos es una secuencia de "golpes" a varios puertos de red cerrados, y si la secuencia se repite correctamente, el puerto "real" se abre a su IP. Elegante, pero poco pr√°ctico en grandes proyectos reales. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Me inspir√≥ la idea y pens√© en c√≥mo mejorarla. As√≠ naci√≥ la soluci√≥n que llamo </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Enterprise Port Knocking</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quer√≠a crear un mecanismo que garantizara la cercan√≠a de nuestros puntos de entrada a Internet, hasta que alguien pudiera acceder a ellos. Se supon√≠a que este mecanismo era f√°cil de usar, confiable y autenticado de una manera existente.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dibuj√© la arquitectura del mecanismo y fui con ella a nuestro incre√≠blemente talentoso equipo de ingenieros. </font><font style="vertical-align: inherit;">Unas semanas despu√©s comenzamos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El servicio es bastante simple y se implementa como una funci√≥n AWS Lambda, con acceso a trav√©s de AWS API Gateway (¬°la alegr√≠a de la arquitectura sin servidor!) Para un uso f√°cil y confiable. </font><font style="vertical-align: inherit;">El mecanismo funciona as√≠:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El usuario se autentica correctamente a trav√©s de SSO.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La aplicaci√≥n omite las cuentas de AWS configuradas en busca de un grupo de seguridad especialmente marcado (concepto de AWS para reglas de firewall)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La aplicaci√≥n actualiza el Grupo de seguridad, lo que permite el acceso a la direcci√≥n IP del solicitante. </font><font style="vertical-align: inherit;">Una regla en el Grupo de seguridad tambi√©n almacena la marca de tiempo de agregar.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La tarea cron borra la lista de direcciones IP permitidas cada per√≠odo de tiempo especificado.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gracias a esta situaci√≥n, ahora contamos con una soluci√≥n de acceso remoto que est√° completamente cerrada a Internet y requiere autenticaci√≥n de dos factores a trav√©s de nuestra base de datos de usuarios </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">antes de abrir el puerto en el firewall</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬°Y es f√°cil!</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todav√≠a no he tocado lo simples que son estos mecanismos en funcionamiento. </font><font style="vertical-align: inherit;">S√© que hay muchos componentes, pero juntos crean una autorizaci√≥n muy simple:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Inicie sesi√≥n a trav√©s de SSO.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Haga clic en el lanzamiento de Enterprise Port Knocking en el portal SSO.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En el terminal, utilizando el comando SSH, especifique el destino como ID de la instancia EC2 de destino. </font><font style="vertical-align: inherit;">¬°El sistema OASA es lo suficientemente inteligente como para determinar qu√© punto de entrada usar y todo lo dem√°s sucede autom√°ticamente!</font></font></li>
</ol><br>
<img src="https://habrastorage.org/webt/p4/ho/t0/p4hot0sae_e-5bywuqqbwsc2juo.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todo este sistema es una gran victoria para nuestra infraestructura, para nuestro cumplimiento de todos los acuerdos de seguridad y para la seguridad de nuestros clientes. </font><font style="vertical-align: inherit;">A los usuarios realmente les gusta lo f√°cil que es conectarse a nuestros servidores, porque no necesita pasar por una autenticaci√≥n adicional o recordar qu√© VPN usar. </font><font style="vertical-align: inherit;">Y realmente me gusta mi sue√±o tranquilo. </font><font style="vertical-align: inherit;">¬°Todos ganaron con el nuevo modelo! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bueno, excepto por los hackers, por supuesto.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/9fa/cf4/a34/9facf4a348ef01048b4eb5e16ae66daa.png"></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es491946/index.html">Leyes de programaci√≥n</a></li>
<li><a href="../es491948/index.html">Los tokens de dise√±o pueden hacer m√°s: crear una √∫nica fuente de informaci√≥n sobre los componentes de la interfaz de usuario</a></li>
<li><a href="../es491956/index.html">Versi√≥n Rust 1.42.0: plantillas de corte y mensajes de p√°nico m√°s convenientes</a></li>
<li><a href="../es491958/index.html">Gu√≠a de compresi√≥n de animaci√≥n esqueleto</a></li>
<li><a href="../es491960/index.html">Era cuando es dif√≠cil perderse</a></li>
<li><a href="../es491964/index.html">Ejecuci√≥n remota de c√≥digo en SMB v3: CVE-2020-0796</a></li>
<li><a href="../es491974/index.html">Coronavirus: por qu√© necesitas actuar ahora</a></li>
<li><a href="../es491976/index.html">Convertimos la econom√≠a de UNIT para una tienda o producci√≥n en l√≠nea</a></li>
<li><a href="../es491980/index.html">Los beneficios de las entrevistas. Opci√≥n de desarrollador de Flutter</a></li>
<li><a href="../es491984/index.html">Automatizaci√≥n de aeropuertos en HEL</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>