<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üê£ üçã üè≥Ô∏è‚Äçüåà Rel√¢chez le train. Rapport Yandex üêÑ üì≤ ü§úüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Les processus de publication dans diff√©rentes √©quipes Yandex (et dans toutes les grandes soci√©t√©s informatiques) sont organis√©s de mani√®re similaire, ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Rel√¢chez le train. Rapport Yandex</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/504752/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les processus de publication dans diff√©rentes √©quipes Yandex (et dans toutes les grandes soci√©t√©s informatiques) sont organis√©s de mani√®re similaire, mais diff√®rent dans de nombreux d√©tails. </font><font style="vertical-align: inherit;">Les d√©veloppeurs mobiles ont leurs propres sp√©cificit√©s: leurs versions sont affect√©es par l'ordre de mise en page dans l'App Store et Google Play. </font><font style="vertical-align: inherit;">D√©veloppeur Android Dmitry Polyakov</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dmpolyakov</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Il a parl√© des processus autour de lui - comment son √©quipe envoie un train de versions selon un calendrier, comment lancer des versions non planifi√©es, ajouter des voitures √† une version d√©j√† sortie et que faire pour rester sur la bonne voie.</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/8iwkFkkV9es" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Bonjour √† tous, je suis Dmitry Polyakov, d√©veloppeur Android de l'application mobile que je prends. </font></font><br>
<a name="habracut"></a><br>
<img src="https://habrastorage.org/webt/3_/7m/vo/3_7mvon1ympone-ubzvk7pydfhm.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, en deux √©quipes - d√©veloppement Android et iOS, je prends - 13 personnes chacune. </font><font style="vertical-align: inherit;">Cela nous permet d'effectuer de nombreuses t√¢ches int√©ressantes en parall√®le et de les transf√©rer rapidement aux utilisateurs. </font><font style="vertical-align: inherit;">Dans le rapport, je dirai comment nous avons appris √† travailler avec git et √† vivre dans un r√©f√©rentiel. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, je vais vous expliquer comment fonctionne notre cycle de publication. </font><font style="vertical-align: inherit;">Les gestionnaires viennent nous voir et disent que nous voulons d√©ployer cette fonctionnalit√© d√®s que possible. </font><font style="vertical-align: inherit;">Donc, probablement, tout gestionnaire le souhaite, nous avons donc mis en place le processus de publication afin de nous rendre sur l'App Store et Google Play chaque semaine. </font><font style="vertical-align: inherit;">Je vais √©galement parler des outils dont nous disposons et que je vous recommande d'essayer, ils sont sympas.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Git flow</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Commen√ßons par Git Flow. Comme base, nous avons pris le Git Flow classique, cependant, il a beaucoup chang√© dans nos conditions, sous notre √©quipe. Vous regardez aussi, et peut-√™tre que quelque chose de cela vous conviendra, mais pas quelque chose. Chaque √©quipe a sa propre approche pour travailler avec git. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comment √ßa marche avec nous? Epic est la branche racine de votre fonctionnalit√©, pour de grandes fonctionnalit√©s. Pour le rendre plus clair, regardons imm√©diatement l'exemple de produit. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vl/zg/jh/vlzgjhr8izes6bz2kkun7dbhjos.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le gestionnaire vient et dit - le d√©veloppeur, faites-nous la fonctionnalit√© de la liste de souhaits avec les produits s√©lectionn√©s dans l'application. Le d√©veloppeur d√©marre une nouvelle √©pop√©e de branche et l'appelle wishlist.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/xw/bc/do/xwbcdo9gxegl7irkcec5nza2ley.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De plus, il le d√©compose en t√¢ches plus petites, qui commencent dans le tracker. Peut-√™tre que cela fonctionne avec le r√©seau, le rendu de l'interface utilisateur, l'√©criture de tests. Pour chacune de ces fonctionnalit√©s, il d√©marre une t√¢che dans le tracker. Et d√®s qu'il commence √† terminer la t√¢che, il d√©marre la branche de fonctionnalit√© correspondante. La fait sortir de la m√™me √©pop√©e. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
D√®s qu'il a fini de travailler sur une de ces fonctionnalit√©s, il la verse dans l'√©pop√©e √† travers la demande de pool. La demande de pool est un tel m√©canisme lorsque d'autres d√©veloppeurs de votre √©quipe v√©rifient votre code. S'ils n'aiment pas quelque chose, alors votre code risque de ne pas atteindre votre √©pop√©e, ce qui signifie que vous ne serez pas lib√©r√© avant d'avoir trouv√© un accord avec eux.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il y a deux de ces examinateurs dans notre √©quipe. Ils sont attribu√©s au hasard. Il s'agit d'un processus automatis√©, il s√©lectionne parmi les d√©veloppeurs qui ont r√©cemment travaill√© avec les m√™mes fichiers que vous avez modifi√©s dans votre demande de pool. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/_p/97/-5/_p97-5ma6jzwytu4lvygspvutf8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ainsi, il s'av√®re que plusieurs √©pop√©es avec leur propre ensemble de fonctionnalit√©s vivent en parall√®le dans le projet. Une √©pop√©e ne peut avoir qu'une seule fonctionnalit√©. Cela peut se produire si nous voulons t√©l√©charger cette fonctionnalit√© via la demande de pool vers epic.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/sz/_v/99/sz_v99dwik4myh-0kzscs3mwu-i.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
D√®s que le travail sur toutes les fonctionnalit√©s d'une √©pop√©e est termin√©, la t√¢che quitte d'abord l'√©quipe de test, l'√©quipe QA, et ils testent fonctionnellement la branche. Une fois qu'ils ont trouv√© des bugs, vous les √©ditez dans le cadre de cette √©pop√©e. Une fois tous les bugs corrig√©s, vous remplissez cette √©pop√©e en d√©veloppement. Ici, aucune r√©vision de code suppl√©mentaire n'est d√©j√† effectu√©e par votre √©quipe, car tout le code a d√©j√† √©t√© examin√© lors de l'√©tape des fonctionnalit√©s dans Epic. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Notre d√©veloppement est une telle branche dans laquelle le code d√©j√† test√© visite, car au stade √©pique, il est test√© et le code est pass√© par la demande de pool.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/p8/z-/lh/p8z-lhg3e1_lcihf28mfwvb16hw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cela nous permet de cr√©er en toute s√©curit√© une nouvelle branche de publication au d√©but du cycle de publication. Sans crainte qu'il y aura de nombreux bugs qui n'ont pas encore √©t√© test√©s. Par cons√©quent, nous cr√©ons une nouvelle branche de publication √† partir de develop, elle est en cours de test. D√®s que la version est test√©e et que nous sommes pr√™ts √† partir plus loin vers la porte, cette branche fusionne en master. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Parfois, nous avons un correctif et il existe un type de branche distinct pour celui-ci. Il s'agit d'une version tr√®s courte qui doit √™tre d√©ploy√©e rapidement. Nous n'avons pas le temps d'attendre trois ou quatre jours avant le d√©but du prochain cycle de publication. C'est g√©n√©ralement quelque chose de petit.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par exemple, si une sorte de bogue est entr√© en production et est tr√®s critique, nous devons le corriger de toute urgence. Par cons√©quent, nous arr√™tons la version actuelle, ex√©cutons le correctif sur ce bogue et mettons √† jour notre version. Mais le correctif n'est pas toujours une histoire de bugs. Parfois, nous avons besoin d'un produit. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/dr/wk/fn/drwkfn5ae8zg_hkfs2bmvxldwri.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par exemple, d√®s que le mode d'auto-isolation a √©t√© introduit √† Moscou, nous avons eu un besoin en produits pour que les utilisateurs puissent commander des produits sans contact. D√©sormais, lors de la passation d'une commande dans notre application, l'utilisateur peut s√©lectionner la fonction ¬´Laisser √† la porte¬ª. Le courrier arrive, laisse le colis sous la porte et vous le remet sans contact.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Avec cette t√¢che dans le correctif, nous avons √©galement inclus des widgets diff√©rents qui vous invitent √† rester √† la maison et √† commander des marchandises par courrier. N'allez pas aux points de ramassage maintenant. Nous avons d√©ploy√© ces t√¢ches via le correctif afin de pouvoir les transmettre √† l'utilisateur d√®s que possible, car nous les consid√©rons comme importantes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lorsque nous avons un correctif, nous le brunchons de master. De d√©velopper, il ne peut pas √™tre brunch, car √† ce moment, de nouveaux pourraient se d√©velopper √©pique, qui n'avait pas encore √©t√© publi√©. Mais nous ne voulons pas emporter ces √©pop√©es avec nous dans le correctif, afin qu'elles ne nous affectent pas au hasard et ne bloquent pas notre correctif. Une fois le correctif termin√©, nous l'injectons dans master et l'ajoutons √©galement √† develop, car ce code n'existait pas encore dans develop.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/xr/4z/p8/xr4zp8zfnt0vywy-cgeryfkama8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Master est une base de code correspondant √† la derni√®re version de l'application, qui est maintenant dans la boutique de l'utilisateur. C'est propre, sans bugs, car les tests fonctionnels et de r√©gression y sont d√©j√† pass√©s, c'est une branche de sauvegarde. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lorsque notre version est termin√©e, nous la r√©injectons √©galement dans develop. Parce que dans le cadre de la version, des bogues qui n'ont pas √©t√© trouv√©s dans les tests fonctionnels peuvent √™tre trouv√©s et diff√©rentes √©pop√©es peuvent entrer en conflit les unes avec les autres. Par cons√©quent, nous injectons √©galement la version dans develop afin que nous ayons √©galement ces correctifs dans develop. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/xd/sa/wo/xdsawo_6ouutgmlx8esvcebwr-q.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beaucoup de travail peut √™tre fait sur l'√©pop√©e, et afin de suivre le code en d√©veloppement, le d√©veloppeur l'ajoute parfois √† son √©pop√©e, afin qu'il y ait moins de blocages. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/2g/2k/ix/2g2kixqf1i9odyxvwcxllmdpqik.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Puisque nous avons ajout√© develop √† epic, epic pour les m√™mes raisons doit √™tre ajout√© √† votre fonctionnalit√©.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/dh/so/uz/dhsouzjdxm1ppp4xpq3vhdwqipq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Au nom des branches √©piques et des fonctionnalit√©s, nous avons un num√©ro de ticket dans le traqueur de t√¢ches. C'est cool, car c'est pr√©cis√©ment par le num√©ro de ticket que nous pouvons d√©couvrir compl√®tement √† partir de n'importe quelle partie de notre application, dans quels tickets il a chang√©, qui a √©crit ce code et dans quel but il a √©t√© √©crit. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/v9/f4/qz/v9f4qz3xdclxbb8nztrkl_js4ls.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La branche de version et de correctif a dans son nom le num√©ro de version de version actuelle de l'application. Certaines √©quipes combinent le num√©ro de correctif avec le num√©ro de version, le justifiant en disant que le correctif est quelque chose de petit et peut-√™tre pas tr√®s important pour l'utilisateur. Par cons√©quent, ils n'augmentent pas la version de l'application. Nous n'utilisons pas cette approche, car divers rapports de plantage des fabricants nous parviennent, et nous voulons savoir exactement si ce rapport √©tait en correctif ou dans la version, afin de savoir o√π chercher le probl√®me.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/co/_s/rt/co_srt1thzsqf8beocnd-4sys44.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ma√Ætriser et d√©velopper sont des branches qui vivent en permanence dans notre r√©f√©rentiel. </font><font style="vertical-align: inherit;">Une fois cr√©√© et vivant. </font><font style="vertical-align: inherit;">Par cons√©quent, ils sont nomm√©s si succinctement. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C'est ainsi que nous vivons. </font><font style="vertical-align: inherit;">Maintenant, nous sommes confortables, pratiques.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Train de sortie</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous passons √† nos processus de publication. Mais avant de parler des versions et de la fa√ßon dont nous les construisons, je vais parler des r√¥les que nous avons pour soutenir la version. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons un d√©veloppeur en service qui, dans le cadre d'une semaine de travail, cesse de traiter les t√¢ches du produit et corrige les bogues de la version actuelle. S'il n'a aucune t√¢che pour la version actuelle, il corrigera certaines dettes techniques que nous avons accumul√©es, prendra des t√¢ches dans l'arri√©r√© et les corrigera. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il y a aussi un testeur en service. Il arr√™te √©galement de tester les t√¢ches du produit dans une semaine de travail et v√©rifie la version actuelle. S'il n'a pas de t√¢ches pour la version actuelle, il teste ce qui a √©t√© corrig√© dans le cadre de la dette technique.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/fu/fi/0j/fufi0j3ome4h8i9wp3nheqxojte.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La sortie commence vendredi. C'est ce jour-l√† que nous avons une date butoir. √Ä 18 heures du soir, le testeur en service clique sur le bouton ¬´Start Release¬ª. Apr√®s ce moment, tout ce qui sera vers√© dans develop ne tombera plus dans la version actuelle, car apr√®s avoir cliqu√© sur le bouton, une branche de release a √©t√© cr√©√©e, develop a fusionn√© et plus n'y sera vers√©. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un autre processus important a lieu vendredi, un autre √©l√©ment de la version actuelle, dont je parlerai plus tard.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/xa/nf/j9/xanfj95wvggoa9ae3ex8qqqulo4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous nous reposons le week-end, donc le deuxi√®me jour de sortie est lundi. Le d√©veloppeur en service commence la journ√©e par une analyse. Il examine ce qui a √©t√© chang√© dans la version actuelle en termes de code. Prend git diff entre la branche de publication actuelle et le master. Et par ce diff il regarde quels composants ont √©t√© affect√©s. Cela peut affecter le processus de paiement ou le panier, et le travail avec les pi√©destaux n'est pas affect√©. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ainsi, il forme une liste de diff√©rents cas qui seront test√©s lors des tests. Cela nous aide √† acc√©l√©rer notre r√©gression, ne v√©rifiez pas la totalit√© de l'application. Lorsque la liste est compil√©e, l'√©quipe de test v√©rifie l'application et le d√©veloppeur de service corrige les bogues. S'il a beaucoup de bogues, il peut d√©l√©guer une partie √† d'autres d√©veloppeurs qui ont r√©cemment travaill√© avec ces morceaux de code.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/sj/hx/qu/sjhxquzyhfutqbccdiimluahi4s.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mardi, nous continuons de tester notre version et de corriger les bogues de version. Vers l'apr√®s-midi, nos tests de r√©gression se terminent et nous sommes pr√™ts √† partir pour la porte. Nous lan√ßons notre train de versions - en fait, m√™me plusieurs trains de versions, parce que nous avons r√©cemment p√©n√©tr√© un nouveau march√© pour nous. Je vous recommande √©galement d'essayer de publier non seulement sur Google Play, mais aussi dans d'autres. Le plus n'est pas seulement que vous obtenez un nouveau public fid√®le. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
D'une mani√®re ou d'une autre, nous avons publi√© notre version et apr√®s quelques heures, nous avons constat√© que le nombre de bogues parmi les utilisateurs avait consid√©rablement augment√©. Nous avons examin√© ces bogues, les avons analys√©s et avons constat√© qu'ils ne se produisent que sur les appareils Huawei. Nous n'avons pas imm√©diatement compris ce qui se passait, mais nous avions Huawei, nous les avons test√©s, trouv√© un bug, corrig√© et sommes all√©s mettre √† jour.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
D√®s que nous sommes arriv√©s avec la mise √† jour sur Google Play, nous avons vu une grande banni√®re qui disait qu'en raison de la situation actuelle dans le monde, Google Play a une tr√®s grande charge et ils n'ont pas le temps de v√©rifier les applications aussi rapidement que d'habitude. Il s'est av√©r√© que nous n'avions pas encore le temps de v√©rifier notre application, nous n'avons pas atteint les utilisateurs de Google Play, mais avons √©t√© publi√©s uniquement dans la Huawei AppGallery. Et c'√©tait la raison pour laquelle nous n'avions des bugs que sur Huawei. Ainsi, il √©tait possible de d√©tecter et de corriger un bogue critique avant m√™me de publier sur Google Play. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, je vais vous expliquer comment les publications sont organis√©es via Google Play, car nous avons une tr√®s grande proportion d'utilisateurs. Et chez Huawei AppGallery, nous sommes r√©cemment partis et essayons toujours de comprendre comment tout y est organis√©.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous ne publions pas imm√©diatement √† tous les utilisateurs sur Google Play, de sorte qu'une sorte de bogue al√©atoire n'affecte pas l'ensemble de notre public. Nous publions uniquement √† tous les testeurs qui souscrivent au fait qu'ils peuvent avoir un bogue, mais ils seront les premiers √† recevoir nos modifications et versions. De plus, nous ne publions que 5% de l'audience. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/v9/oz/2l/v9oz2ljeaekmx8usvcjuiuznspa.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mercredi, le d√©veloppeur en service regarde une nouvelle version sans plantage. Il est important pour nous qu'il n'y ait pas de nouveau crash et qu'il n'y en ait pas beaucoup d'anciens. Si tout est normal, il v√©rifie toujours les m√©triques du produit. Par exemple, pour que le nombre de commandes ne baisse pas par rapport √† la m√™me p√©riode. Si nos mesures de produits et sans crash sont bonnes, nous d√©ployons encore 5%, un total de 10%.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/lv/hu/n5/lvhun5qsl1n5hbgwaqd9jkqx3wg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jeudi, le d√©veloppeur de garde v√©rifie les avis dans le magasin. En fait, il les regarde mercredi. Certes, mercredi, nous avons encore un petit public, une ou deux critiques. Mais jeudi, il y a plus de critiques pour juger de la sortie. Il peut y avoir 10 √† 15 pi√®ces. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pourquoi regarde-t-il m√™me les critiques si nous avons beaucoup de m√©triques et de graphiques? L'application peut ne pas se bloquer, m√™me les mesures peuvent √™tre correctes. Mais il est possible que l'utilisateur ait des polices ou qu'un filtre ne fonctionne pas pour lui. Nous essayons de rendre l'utilisation de l'application aussi pratique que possible pour l'utilisateur et analysons les critiques, les bugs ou les probl√®mes rencontr√©s par l'utilisateur. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si les critiques sont en ordre, sans crash est √©galement normal et les mesures de produit ne se sont pas affaiss√©es, nous d√©ployons d√©j√† de 20%.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/rv/iu/yc/rviuycqo7k6fyj19lbyp0fiiios.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et cela commence donc vendredi, le jour du lancement de notre version. Le troisi√®me point dont je voulais parler est que vendredi nous terminerons la version actuelle. Nous passons imm√©diatement de 20% √† 100%. Cela semble √™tre un tr√®s grand saut et tr√®s risqu√©. Mais cela d√©pend de l'√©quipe et de votre public. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
20% de notre audience nous permet avec une forte probabilit√© de juger de la stabilit√© de la sortie. Et si tout va bien de 20%, et vendredi nous n'avons pas vu de probl√®me, alors nous irons directement au centi√®me.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je connais les √©quipes qui utilisent le piratage de la vie sur Google Play - peut-√™tre qu'il vous aidera aussi. Vous pouvez d√©ployer non pas √† 100%, mais √† 99,9%. Cela vous laissera un bouton sur Google Play pour arr√™ter de toute urgence la sortie. Et si vous d√©ployez √† 100%, ce bouton dispara√Æt. Mais, comme je l'ai dit, par vingt pour cent de notre public, nous pouvons juger avec pr√©cision de la stabilit√© de la sortie. Par cons√©quent, nous d√©ployons calmement √† 100%, cela nous √©vite des √©tapes suppl√©mentaires. Et puis vous devez rouler un autre 0,01%. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C'est notre processus, donc nous roulons chaque semaine et essayons de ne pas nous perdre. </font></font><br>
<img src="https://habrastorage.org/webt/iz/by/t0/izbyt0vtnuby5e8waeul0z6q1-i.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quels autres outils avons-nous pour soutenir la bonne vie de l'utilisateur de son c√¥t√©? Il s'agit de Force Update, Soft Update et Feature Toggle.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/zf/le/gy/zflegyxge_qjtp2ofwyn3yao5sk.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Forcer la mise √† jour - un m√©canisme qui bloque l'utilisation de l'application si sa version est tr√®s obsol√®te. La version consid√©r√©e comme obsol√®te est d√©finie dans le panneau d'administration du serveur. Et d√®s que le num√©ro y aura chang√©, certaines applications auront une telle bo√Æte qui ne vous laissera pas partir. Il n'y aura qu'un bouton Actualiser, l'utilisateur sera oblig√© de mettre √† niveau. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous essayons d'utiliser ce m√©canisme le moins possible, mais parfois c'est tr√®s important. Par exemple, si nous avons rompu la compatibilit√© descendante, d√©ploy√© une nouvelle fonctionnalit√© qui n'est pas prise en charge dans l'ancien code. Ensuite, l'utilisateur de la version obsol√®te de l'application peut se retrouver dans un √©tat incoh√©rent. Il ira au panier, et par exemple, il n'aura pas de commande. Il ne comprendra pas pourquoi, bien que dans la nouvelle version toutes les erreurs soient enregistr√©es et il sera clair pourquoi il n'est pas possible de passer une commande.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/qr/06/lv/qr06lv9bomtqej9pqnd03yql0_u.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour aider √† forcer la mise √† jour, il existe une mise √† jour logicielle. Il s'agit d'une chose native de Google, qui est simplement int√©gr√©e √† votre application et ne bloque pas l'utilisation. Mais elle dit - il y a une mise √† jour sur Google Play, installez-la et vous aurez de nouveaux trucs sympas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Initialement, il est mis en ≈ìuvre par un tel dialogue. Il s'agit d'un design natif d'Android. Et puis, il peut √™tre int√©gr√© √† votre application. Par exemple, nous l'avons impl√©ment√© dans notre widget ¬´Mettre √† jour l'application¬ª dans notre jeu de couleurs. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La mise √† jour logicielle nous a permis de r√©duire consid√©rablement la queue des versions, et elle est impl√©ment√©e simplement selon la documentation. Essayez-le si vous avez plusieurs versions.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/wv/op/cb/wvopcbrb6hqumkxhzcd4zhhvl9k.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un autre outil important est la fonction Toggle. Il vous permet d'ajuster une partie des fonctionnalit√©s c√¥t√© utilisateur, en la modifiant dans le panneau d'administration. Il existe un ensemble de fonctionnalit√©s que nous pouvons activer et d√©sactiver √† partir de notre serveur sans mises √† jour d'application suppl√©mentaires. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Parlons de la fa√ßon dont Feature Toggle fonctionne sur l'exemple d'une application tierce - un v√©hicule. Au d√©part, les d√©veloppeurs ont juste un tel v√©lo, qui a d√©j√† deux fonctionnalit√©s: un moteur et une grande taille. Les clients utilisent le v√©lo, puis l'√©quipe de test dit: nous avons test√© le moteur, il fonctionne, roule, refroidit, allumons-le pour l'utilisateur.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/hz/vy/rw/hzvyrwbzofbnvnvf1j72twawoxk.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous allons dans le panneau d'administration, allumons la fonction Toggle et le v√©lo sans mettre √† jour l'utilisateur, sur le pouce il se transforme en cyclomoteur. L'utilisateur est √† l'aise, cela lui permet de se d√©placer plus rapidement et plus confortablement. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le produit se d√©veloppe, le public grandit, il ne tient plus sur un cyclomoteur. Les utilisateurs veulent emporter une famille avec eux, rouler ensemble. Les d√©veloppeurs et les gestionnaires ont fourni un basculement de fonctionnalit√© suppl√©mentaire - une grande taille. Nous l'activons dans le panneau d'administration et le v√©hicule de l'utilisateur s'agrandit en d√©placement.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/y0/xo/kn/y0xokniygytexgqv_i1cuitr_6c.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cela semble cool: la fonction Toggle nous aide. C'est vrai, mais vous pouvez rencontrer des probl√®mes. Par exemple, vous devez surveiller la compatibilit√© descendante et la compatibilit√© de basculement des fonctionnalit√©s. Supposons qu'√† un moment donn√©, l'application casse le moteur, qu'un crash ou un bug se produise. Ou ce moteur consommera beaucoup de nos ressources, et nous ne pourrons pas supporter trop d'utilisateurs avec le moteur. Ensuite, nous devons le d√©sactiver. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais nous ne voulons pas que l'application de l'utilisateur disparaisse. Nous voulons lui donner la possibilit√© d'utiliser l'application, malgr√© le fait qu'il dispose toujours d'un Toggle de grande taille. Par cons√©quent, lorsque nous √©teignons le moteur, nous devons avoir un m√©canisme de secours pour contr√¥ler le v√©hicule. Dans ce cas, c'est un tel hybride.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/_9/ns/ap/_9nsapmvw-dnclz9t_7h-z-w_3m.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Peut-√™tre valait-il la peine de consid√©rer que le toit s'incline. Le conducteur sera peut-√™tre mal √† l'aise de s'asseoir sur un tel si√®ge. Mais il pourra toujours conduire un v√©hicule, utiliser l'application et ne pas marcher. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sinon, comment utiliser la fonction bascule de fonction Supposons que les backends sont toujours en cours de d√©veloppement et ne sont pas pr√™ts √† √™tre publi√©s. Ensuite, nous pouvons d√©velopper une partie de la fonctionnalit√©, prendre en charge le contrat API pour toutes les communications avec le backend, prendre en charge l'interface utilisateur et d√©ployer avec le basculement de fonctionnalit√© d√©sactiv√©. D√®s que les backends seront pr√™ts, nous testerons que tout fonctionne bien, et si c'est le cas, activez la fonction Toggle. Ensuite, l'utilisateur n'aura pas besoin d'√™tre mis √† jour pour obtenir de nouvelles fonctionnalit√©s. Autrement dit, nous aurons d√©j√† un public, nous appara√Ætrons imm√©diatement dans ce public. Tellement g√©nial aussi.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/qz/yx/wy/qzyxwywpq1bupbynspyx8bfdtbi.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, comme je l'ai d√©j√† dit, nous avons 13 personnes dans chacune des √©quipes de d√©veloppement Android et iOS. </font><font style="vertical-align: inherit;">Nous travaillons sur un Git Flow, dans un r√©f√©rentiel, configurons notre processus de sortie pr√©vu, r√©duisons le temps de mise sur le march√© et roulons chaque semaine. </font><font style="vertical-align: inherit;">Nous avons r√©cemment publi√© Huawei AppGallery et regardons d'autres magasins. </font><font style="vertical-align: inherit;">Nous avons appris √† modifier les applications utilisateur sans mises √† jour en raison du basculement des fonctionnalit√©s. </font><font style="vertical-align: inherit;">Merci pour l'attention.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr504736/index.html">Trouver des d√©fauts de radiateur en utilisant la vision industrielle</a></li>
<li><a href="../fr504740/index.html">L'√©volution d'une application monolithique en microservices</a></li>
<li><a href="../fr504742/index.html">Comparaison des spectrogrammes des donn√©es disponibles gratuitement des satellites hyperspectraux et multispectraux</a></li>
<li><a href="../fr504744/index.html">Classification des documents: 7 approches pratiques pour les petits ensembles de donn√©es</a></li>
<li><a href="../fr504748/index.html">Reconnaissance faciale simple √† la vol√©e √† Django</a></li>
<li><a href="../fr504754/index.html">Metastocle - entrep√¥t de donn√©es d√©centralis√©</a></li>
<li><a href="../fr504756/index.html">Pas besoin d'apprendre le Machine Learning</a></li>
<li><a href="../fr504758/index.html">Microsoft met en garde contre les dangers des nouvelles attaques avec le ran√ßongiciel PonyFinal</a></li>
<li><a href="../fr504760/index.html">Joel Spolsky: Comment poser correctement des questions aux programmeurs plus exp√©riment√©s</a></li>
<li><a href="../fr504762/index.html">Ce √† quoi nous avons d√ª faire face lors de l'utilisation de l'utilitaire Csync2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>