<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏿‍🚀 🧖🏼 👨🏼‍🎤 13 Shell-basierte Textverarbeitungswerkzeuge 👨🏽‍🎤 🖐🏻 🛌</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hier ist ein Fragment eines zukünftigen Buches, Grundlegende Tools und Praktiken für einen unerfahrenen Softwareentwickler, von Balthazar Ruberol und ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>13 Shell-basierte Textverarbeitungswerkzeuge</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/itsumma/blog/492932/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hier ist ein Fragment eines zukünftigen Buches, Grundlegende Tools und Praktiken für einen unerfahrenen Softwareentwickler, von Balthazar Ruberol und </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Etienne Broad</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Das Buch soll dazu beitragen, die jüngere Generation von Entwicklern zu erziehen. </font><font style="vertical-align: inherit;">Es werden Themen wie die Konsole zu </font><font style="vertical-align: inherit;">meistern, Einrichten und effizient in der Kommando - </font><font style="vertical-align: inherit;">Shell arbeiten, Versionierung Code mit </font></font><code>git</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SQL - </font><font style="vertical-align: inherit;">Grundlagen, Werkzeuge wie </font></font><code>Make</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>jq</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und reguläre Ausdrücke, Grundlagen der Vernetzung sowie Best Practices für die </font><font style="vertical-align: inherit;">Software - </font><font style="vertical-align: inherit;">Entwicklung und Zusammenarbeit. </font><font style="vertical-align: inherit;">Die Autoren arbeiten derzeit intensiv an diesem Projekt und laden alle ein, an </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">der Mailingliste</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> teilzunehmen </font><font style="vertical-align: inherit;">.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Inhalt</font></font></h1><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Katze</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kopf</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schwanz</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Toilette</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">grep</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schnitt</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Einfügen</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sortieren</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">uniq</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">awk</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tr</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">falten</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sed</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Echte Beispiele</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vertiefung: for- und xargs-Schleifen</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zusammenfassung</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Was weiter</font></font></a></li>
</ul><a name="habracut"></a><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Shell-Textverarbeitung</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Einer der Gründe, die die Befehlsshell zu einem unschätzbaren Werkzeug machen, ist die große Anzahl von Textverarbeitungsbefehlen und die Möglichkeit, sie einfach in der Pipeline zu kombinieren und komplexe Verarbeitungsvorlagen zu erstellen. </font><font style="vertical-align: inherit;">Diese Befehle machen viele Aufgaben zum Analysieren von Text und Daten, Konvertieren von Daten zwischen verschiedenen Formaten, Filtern von Zeichenfolgen usw. trivial. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bei der Arbeit mit Textdaten besteht das Hauptprinzip darin, jedes komplexe Problem in viele kleinere zu unterteilen - und jedes zu lösen von ihnen mit einem speziellen Werkzeug.</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lassen Sie jedes Programm eines gut machen - </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Grundlagen der Unix-Philosophie</font></font></a></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Beispiele in diesem Kapitel mögen auf den ersten Blick etwas weit hergeholt erscheinen, aber dies geschieht absichtlich. </font><font style="vertical-align: inherit;">Jedes der Tools wurde entwickelt, um ein kleines Problem zu lösen. </font><font style="vertical-align: inherit;">In Kombination werden sie jedoch extrem leistungsfähig. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir werden uns einige der häufigsten und nützlichsten Textverarbeitungsbefehle in der Befehlsshell ansehen und echte Workflows demonstrieren, die sie miteinander verbinden. </font><font style="vertical-align: inherit;">Ich schlage vor, das Mana dieser Teams zu betrachten, um die volle Bandbreite der Möglichkeiten zu sehen, die Ihnen zur Verfügung stehen.</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eine Beispiel-CSV-Datei </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ist online verfügbar</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Sie können es herunterladen, um das Material zu überprüfen.</font></font></blockquote><br>
<a name="1"></a><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Katze</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mit dem Befehl wird </font></font><code>cat</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">eine Liste mit einer oder mehreren Dateien erstellt und deren Inhalt auf dem Bildschirm angezeigt.</font></font><br>
<br>
<pre><code class="plaintext hljs">$ cat Documents/readme<font></font>
Thanks again for reading this book!<font></font>
I hope you're following so far!<font></font>
<font></font>
$ cat Documents/computers<font></font>
Computers are not intelligent<font></font>
They're just fast at making dumb things.<font></font>
<font></font>
$ cat Documents/readme Documents/computers<font></font>
Thanks again for reading this book!<font></font>
I hope you are following so far!<font></font>
<font></font>
Computers are not intelligent<font></font>
They're just fast at making dumb things.</code></pre><br>
<a name="2"></a><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kopf</font></font></h1><br>
<code>head</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">druckt die ersten n Zeilen in der Datei. </font><font style="vertical-align: inherit;">Dies kann sehr nützlich sein, um eine Datei mit unbekannter Struktur und unbekanntem Format zu untersuchen, ohne die gesamte Konsole mit einer Menge Text zu füllen.</font></font><br>
<br>
<pre><code class="bash hljs">$ head -n 2 metadata.csv<font></font>
metric_name,metric_type,interval,unit_name,per_unit_name,description,orientation,integration,short_name<font></font>
mysql.galera.wsrep_cluster_size,gauge,,node,,The current number of nodes <span class="hljs-keyword">in</span> the Galera cluster.,0,mysql,galera cluster size</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn </font></font><code>-n</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nicht angegeben, werden </font></font><code>head</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">die ersten zehn Zeilen der angegebenen Datei oder des angegebenen Eingabestreams gedruckt.</font></font><br>
<br>
<a name="3"></a><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schwanz</font></font></h1><br>
<code>tail</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- ein Analogon </font></font><code>head</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, nur die letzten n Zeilen in der Datei werden angezeigt.</font></font><br>
<br>
<pre><code class="bash hljs">$ tail -n 1 metadata.csv<font></font>
mysql.performance.queries,gauge,,query,second,The rate of queries.,0,mysql,queries</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie alle Zeilen drucken möchten, die sich nach der n-ten Zeile befinden (einschließlich dieser), können Sie das Argument verwenden </font></font><code>-n +n</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<pre><code class="bash hljs">$ tail -n +42 metadata.csv<font></font>
mysql.replication.slaves_connected,gauge,,,,Number of slaves connected to a replication master.,0,mysql,slaves connected<font></font>
mysql.performance.queries,gauge,,query,second,The rate of queries.,0,mysql,queries</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unsere Datei enthält 43 Zeilen, daher werden </font></font><code>tail -n +42</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nur die 42. und 43. Zeile ausgegeben. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn der Parameter </font></font><code>-n</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nicht angegeben wird, </font></font><code>tail</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">werden die letzten zehn Zeilen in der angegebenen Datei oder im angegebenen Eingabestream ausgegeben. </font></font><br>
<br>
<code>tail -f</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">oder </font></font><code>tail --follow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zeigen Sie die letzten Zeilen in der Datei und jede neue Zeile an, während sie in die Datei geschrieben werden. </font><font style="vertical-align: inherit;">Dies ist sehr nützlich, um Aktivitäten in Echtzeit anzuzeigen, z. B. was in den Webserver-Protokollen aufgezeichnet ist usw.</font></font><br>
<br>
<a name="4"></a><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Toilette</font></font></h1><br>
<code>wc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(Wortanzahl) zeigt die Anzahl der Zeichen ( </font></font><code>-c</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">), Wörter ( </font></font><code>-w</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) oder Zeilen ( </font></font><code>-l</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) in der angegebenen Datei oder dem angegebenen Stream an.</font></font><br>
<br>
<pre><code class="bash hljs">$ wc -l metadata.csv<font></font>
43  metadata.csv<font></font>
$ wc -w metadata.csv<font></font>
405 metadata.csv<font></font>
$ wc -c metadata.csv<font></font>
5094 metadata.csv</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Standardmäßig werden alle oben genannten Elemente angezeigt.</font></font><br>
<br>
<pre><code class="bash hljs">$ wc metadata.csv<font></font>
43     405    5094 metadata.csv</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Textdaten weitergeleitet oder umgeleitet werden, </font></font><code>stdin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wird nur der Zähler angezeigt.</font></font><br>
<br>
<pre><code class="bash hljs">$ cat metadata.csv | wc<font></font>
43     405    5094<font></font>
$ cat metadata.csv | wc -l<font></font>
43<font></font>
$ wc -w &lt; metadata.csv<font></font>
405</code></pre><br>
<a name="5"></a><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">grep</font></font></h1><br>
<code>grep</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Dies ist ein Schweizer Messer, das Saiten nach einem bestimmten Muster filtert. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zum Beispiel können wir alle Vorkommen des Wortes </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mutex</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> in einer Datei finden.</font></font><br>
<br>
<pre><code class="bash hljs">$ grep mutex metadata.csv<font></font>
mysql.innodb.mutex_os_waits,gauge,,event,second,The rate of mutex OS waits.,0,mysql,mutex os waits<font></font>
mysql.innodb.mutex_spin_rounds,gauge,,event,second,The rate of mutex spin rounds.,0,mysql,mutex spin rounds<font></font>
mysql.innodb.mutex_spin_waits,gauge,,event,second,The rate of mutex spin waits.,0,mysql,mutex spin waits</code></pre><br>
<code>grep</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kann entweder als Argumente angegebene Dateien oder einen an sie übergebenen Textstrom verarbeiten </font></font><code>stdin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Somit können wir mehrere Befehle verketten </font></font><code>grep</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, um den Text weiter zu filtern. </font><font style="vertical-align: inherit;">Im folgenden Beispiel filtern wir die Zeilen in unserer Datei </font></font><code>metadata.csv</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, um Zeilen zu finden, die sowohl </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mutex</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> als auch </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Betriebssystem enthalten</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<pre><code class="bash hljs">$ grep mutex metadata.csv | grep OS<font></font>
mysql.innodb.mutex_os_waits,gauge,,event,second,The rate of mutex OS waits.,0,mysql,mutex os waits</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Betrachten wir einige Optionen </font></font><code>grep</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und ihr Verhalten. </font></font><br>
<br>
<code>grep -v</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Führt einen inversen Abgleich durch: Filtert Zeichenfolgen, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">die nicht</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mit dem Argumentmuster übereinstimmen.</font></font><br>
<br>
<pre><code class="bash hljs">$ grep -v gauge metadata.csv<font></font>
metric_name,metric_type,interval,unit_name,per_unit_name,description,orientation,integration,short_name</code></pre><br>
<code> grep -i</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Führt einen Matching ohne Berücksichtigung der Groß- und Kleinschreibung durch. </font><font style="vertical-align: inherit;">Das folgende Beispiel </font></font><code>grep -i os</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">findet sowohl </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OS</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OS</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<pre><code class="bash hljs">$ grep -i os metadata.csv<font></font>
mysql.innodb.mutex_os_waits,gauge,,event,second,The rate of mutex OS waits.,0,mysql,mutex os waits<font></font>
mysql.innodb.os_log_fsyncs,gauge,,write,second,The rate of fsync writes to the <span class="hljs-built_in">log</span> file.,0,mysql,<span class="hljs-built_in">log</span> fsyncs</code></pre><br>
<code>grep -l</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Listet Dateien auf, die eine Übereinstimmung enthalten.</font></font><br>
<br>
<pre><code class="bash hljs">$ grep -l mysql metadata.csv<font></font>
metadata.csv</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Team </font></font><code>grep -c</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zählt, wie oft eine Probe gefunden wurde.</font></font><br>
<br>
<pre><code class="bash hljs">$ grep -c select metadata.csv<font></font>
3</code></pre><br>
<code>grep -r</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Sucht rekursiv nach Dateien im aktuellen Arbeitsverzeichnis und allen seinen Unterverzeichnissen.</font></font><br>
<br>
<pre><code class="bash hljs">$ grep -r are ~/Documents<font></font>
/home/br/Documents/computers:Computers are not intelligent<font></font>
/home/br/Documents/readme:I hope you are following so far!</code></pre><br>
<code>grep -w</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> zeigt nur übereinstimmende ganze Wörter.</font></font><br>
<br>
<pre><code class="bash hljs">$ grep follow ~/Documents/readme<font></font>
I hope you are following so far!<font></font>
$ grep -w follow ~/Documents/readme<font></font>
$</code></pre><br>
<a name="6"></a><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schnitt</font></font></h1><br>
<code>cut</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">extrahiert einen Teil der Datei (oder wie üblich den Eingabestream). </font><font style="vertical-align: inherit;">Der Befehl definiert das Feldtrennzeichen (das die Spalten trennt) mithilfe der Option </font></font><code>-d</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und die Spaltennummern, die mithilfe der Option abgerufen werden sollen </font></font><code>-f</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mit dem folgenden Befehl wird beispielsweise die erste Spalte aus den letzten fünf Zeilen unserer CSV-Datei abgerufen.</font></font><br>
<br>
<pre><code class="bash hljs">$ tail -n 5 metadata.csv | cut -d , -f 1<font></font>
mysql.performance.user_time<font></font>
mysql.replication.seconds_behind_master<font></font>
mysql.replication.slave_running<font></font>
mysql.replication.slaves_connected<font></font>
mysql.performance.queries</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Da es sich um CSV handelt, werden die Spalten durch ein Komma getrennt, und die Option ist für das Abrufen der ersten Spalte verantwortlich </font></font><code>-f 1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mit der Option können Sie sowohl die erste als auch die zweite Spalte auswählen </font></font><code>-f 1,2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<pre><code class="bash hljs">$ tail -n 5 metadata.csv | cut -d , -f 1,2<font></font>
mysql.performance.user_time,gauge<font></font>
mysql.replication.seconds_behind_master,gauge<font></font>
mysql.replication.slave_running,gauge<font></font>
mysql.replication.slaves_connected,gauge<font></font>
mysql.performance.queries,gauge</code></pre><br>
<a name="7"></a><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Einfügen</font></font></h1><br>
<code>paste</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> führt zwei verschiedene Dateien zu einer mehrspaltigen Datei zusammen.</font></font><br>
<br>
<pre><code class="bash hljs">$ cat ingredients<font></font>
eggs<font></font>
milk<font></font>
butter<font></font>
tomatoes<font></font>
$ cat prices<font></font>
1$<font></font>
1.99$<font></font>
1.50$<font></font>
2$/kg<font></font>
$ paste ingredients prices<font></font>
eggs    1$<font></font>
milk    1.99$<font></font>
butter  1.50$<font></font>
tomatoes    2$/kg</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Standardmäßig </font></font><code>paste</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wird ein Tabulatortrennzeichen verwendet, das jedoch über den Parameter geändert werden kann </font></font><code>-d</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<pre><code class="bash hljs">$ paste ingredients prices -d:<font></font>
eggs:1$<font></font>
milk:1.99$<font></font>
butter:1.50$<font></font>
tomatoes:2$/kg</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein weiterer häufiger Anwendungsfall </font></font><code>paste</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;besteht darin, alle Zeilen in einem Stream oder einer Datei mit dem angegebenen Trennzeichen und einer Kombination aus </font></font><code>-s</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und zu </font><font style="vertical-align: inherit;">kombinieren </font></font><code>-d</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<pre><code class="bash hljs">$ paste -s -d, ingredients<font></font>
eggs,milk,butter,tomatoes</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn ein Parameter als Eingabedatei angegeben </font></font><code>-</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wird, wird er stattdessen gelesen </font></font><code>stdin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<pre><code class="bash hljs">$ cat ingredients | paste -s -d, -<font></font>
eggs,milk,butter,tomatoes</code></pre><br>
<a name="8"></a><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sortieren</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Befehl </font></font><code>sort</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sortiert die Daten tatsächlich (in der angegebenen Datei oder im angegebenen Eingabestream).</font></font><br>
<br>
<pre><code class="bash hljs">$ cat ingredients<font></font>
eggs<font></font>
milk<font></font>
butter<font></font>
tomatoes<font></font>
salt<font></font>
$ sort ingredients<font></font>
butter<font></font>
eggs<font></font>
milk<font></font>
salt<font></font>
tomatoes</code></pre><br>
<code>sort -r</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> führt eine umgekehrte Sortierung durch.</font></font><br>
<br>
<pre><code class="bash hljs">$ sort -r ingredients<font></font>
tomatoes<font></font>
salt<font></font>
milk<font></font>
eggs<font></font>
butter</code></pre><br>
<code>sort -n</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Sortiert Felder nach ihrem arithmetischen Wert.</font></font><br>
<br>
<pre><code class="bash hljs">$ cat numbers<font></font>
0<font></font>
2<font></font>
1<font></font>
10<font></font>
3<font></font>
$ sort numbers<font></font>
0<font></font>
1<font></font>
10<font></font>
2<font></font>
3<font></font>
$ sort -n numbers<font></font>
0<font></font>
1<font></font>
2<font></font>
3<font></font>
10</code></pre><br>
<a name="9"></a><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">uniq</font></font></h1><br>
<code>uniq</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Erkennt und filtert benachbarte identische Zeilen in der angegebenen Datei oder im angegebenen Eingabestream.</font></font><br>
<br>
<pre><code class="bash hljs">$ cat duplicates<font></font>
and one<font></font>
and one<font></font>
and two<font></font>
and one<font></font>
and two<font></font>
and one, two, three<font></font>
$ uniq duplicates<font></font>
and one<font></font>
and two<font></font>
and one<font></font>
and two<font></font>
and one, two, three</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Da </font></font><code>uniq</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nur </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">benachbarte</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Zeilen herausgefiltert werden, verbleiben möglicherweise noch Duplikate in unseren Daten. </font><font style="vertical-align: inherit;">Um dieselben Zeilen aus einer Datei zu filtern, müssen Sie zuerst deren Inhalt sortieren.</font></font><br>
<br>
<pre><code class="bash hljs">$ sort duplicates | uniq<font></font>
and one<font></font>
and one, two, three<font></font>
and two</code></pre><br>
<code>uniq -c</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Am Anfang jeder Zeile wird die Anzahl ihrer Vorkommen eingefügt.</font></font><br>
<br>
<pre><code class="bash hljs">$ sort duplicates | uniq -c<font></font>
   3 and one<font></font>
   1 and one, two, three<font></font>
   2 and two</code></pre><br>
<code>uniq -u</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Zeigt nur eindeutige Zeichenfolgen an.</font></font><br>
<br>
<pre><code class="bash hljs">$ sort duplicates | uniq -u<font></font>
and one, two, three</code></pre><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hinweis. </font></font><code>uniq</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dies ist besonders in Kombination mit dem Sortieren nützlich, da Sie mit der Pipeline </font></font><code>| sort | uniq</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">alle doppelten Zeilen in einer Datei oder einem Stream löschen können.</font></font></blockquote><br>
<a name="10"></a><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">awk</font></font></h1><br>
<code>awk</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Dies ist etwas mehr als nur ein Textverarbeitungswerkzeug: Tatsächlich verfügt es über </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">eine ganze Programmiersprache</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Was </font></font><code>awk</code> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wirklich</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> gut ist, ist das Aufteilen von Dateien in Spalten, und dies mit besonderer Brillanz, wenn Leerzeichen und Tabulatoren in Dateien gemischt werden.</font></font><br>
<br>
<pre><code class="bash hljs">$ cat -t multi-columns<font></font>
John Smith    Doctor^ITardis<font></font>
Sarah-James Smith^I    Companion^ILondon<font></font>
Rose Tyler   Companion^ILondon</code></pre><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hinweis. </font></font><code>cat -t</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zeigt Registerkarten als an </font></font><code>^I</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie Sie sehen können, sind die Spalten entweder durch Leerzeichen oder Tabulatoren getrennt und nicht immer durch die gleiche Anzahl von Leerzeichen. </font></font><code>cut</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">es ist hier nutzlos, weil es nur mit einem Trennzeichen funktioniert. </font><font style="vertical-align: inherit;">Es ist </font></font><code>awk</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jedoch einfach, mit einer solchen Datei umzugehen. </font></font><br>
<br>
<code>awk '{ print $n }'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zeigt die n-te Spalte im Text an.</font></font><br>
<br>
<pre><code class="bash hljs">$ cat multi-columns | awk <span class="hljs-string">'{ print $1 }'</span><font></font>
John<font></font>
Sarah-James<font></font>
Rose<font></font>
$ cat multi-columns | awk <span class="hljs-string">'{ print $3 }'</span><font></font>
Doctor<font></font>
Companion<font></font>
Companion<font></font>
$ cat multi-columns | awk <span class="hljs-string">'{ print $1,$2 }'</span><font></font>
John Smith<font></font>
Sarah-James Smith<font></font>
Rose Tyler</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Obwohl </font></font><code>awk</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zu viel mehr fähig, ist die Ausgabe der Lautsprecher wahrscheinlich 99% der Anwendungsfälle in meinem persönlichen Fall.</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hinweis. </font></font><code>{ print $NF }</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zeigt die letzte Spalte in einer Zeile an.</font></font></blockquote><br>
<a name="11"></a><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tr</font></font></h1><br>
<code>tr</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">steht für </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">übersetzen</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Dieser Befehl ersetzt ein Zeichen durch ein anderes. </font><font style="vertical-align: inherit;">Es arbeitet entweder mit Zeichen oder </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zeichenklassen</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> wie Kleinbuchstaben eingegeben, Leerzeichen, alphanumerische, usw. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Auf der </font><font style="vertical-align: inherit;">Standardeingabe, es </font></font><code>tr &lt;char1&gt; &lt;char2&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ersetzt alle Vorkommen von &lt;char1&gt; mit &lt;char2&gt;.</font></font><br>
<br>
<pre><code class="bash hljs">$ <span class="hljs-built_in">echo</span> <span class="hljs-string">"Computers are fast"</span> | tr a A<font></font>
computers Are fAst</code></pre><br>
<code>tr</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kann Zeichenklassen mit Notation übersetzen </font></font><code>[:class:]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Eine vollständige Liste der verfügbaren Klassen ist auf der Manpage beschrieben </font></font><code>tr</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, einige werden hier gezeigt. </font></font><br>
<br>
<code>[:space:]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">repräsentiert alle Arten von Leerzeichen, von einfachen Leerzeichen bis zu Tabulatoren oder Zeilenumbrüchen.</font></font><br>
<br>
<pre><code class="bash hljs">$ <span class="hljs-built_in">echo</span> <span class="hljs-string">"computers are fast"</span> | tr <span class="hljs-string">'[:space:]'</span> <span class="hljs-string">','</span>
computers,are,fast,%</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alle Zeichen sind wie Leerzeichen durch Kommas getrennt. </font><font style="vertical-align: inherit;">Bitte beachten Sie, dass das Zeichen </font></font><code>%</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">am Ende der Ausgabe das Fehlen einer abschließenden neuen Zeile anzeigt. </font><font style="vertical-align: inherit;">In der Tat wird dieses Zeichen auch in ein Komma umgewandelt. </font></font><br>
<br>
<code>[:lower:]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">repräsentiert alle Kleinbuchstaben und </font></font><code>[:upper:]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;alle Großbuchstaben. </font><font style="vertical-align: inherit;">Somit wird die Transformation zwischen ihnen trivial.</font></font><br>
<br>
<pre><code class="bash hljs">$ <span class="hljs-built_in">echo</span> <span class="hljs-string">"computers are fast"</span> | tr <span class="hljs-string">'[:lower:]'</span> <span class="hljs-string">'[:upper:]'</span><font></font>
COMPUTERS ARE FAST<font></font>
$ <span class="hljs-built_in">echo</span> <span class="hljs-string">"COMPUTERS ARE FAST"</span> | tr <span class="hljs-string">'[:upper:]'</span> <span class="hljs-string">'[:lower:]'</span>
computers are fast</code></pre><br>
<code>tr -c SET1 SET2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">konvertiert alle Zeichen, die </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nicht</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> in SET1 enthalten sind, in Zeichen in SET2. </font><font style="vertical-align: inherit;">Im folgenden Beispiel werden alle Zeichen außer den angegebenen Vokalen durch Leerzeichen ersetzt.</font></font><br>
<br>
<pre><code class="bash hljs">$ <span class="hljs-built_in">echo</span> <span class="hljs-string">"computers are fast"</span> | tr -c <span class="hljs-string">'[aeiouy]'</span> <span class="hljs-string">' '</span>
 o  u e   a e  a</code></pre><br>
<code>tr -d</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Löscht die angegebenen Zeichen, ersetzt sie jedoch nicht. </font><font style="vertical-align: inherit;">Dies ist das Äquivalent </font></font><code>tr &lt;char&gt; ''</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<pre><code class="bash hljs">$ <span class="hljs-built_in">echo</span> <span class="hljs-string">"Computers Are Fast"</span> | tr -d <span class="hljs-string">'[:lower:]'</span>
C A F</code></pre><br>
<code>tr</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kann auch Zeichenbereiche ersetzen, z. B. alle Buchstaben zwischen </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> oder alle Zahlen zwischen 1 und 8 unter Verwendung der Notation </font></font><code>s-e</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, wobei </font></font><code>s</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;das Startzeichen und </font></font><code>e</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;das Ende ist.</font></font><br>
<br>
<pre><code class="bash hljs">$ <span class="hljs-built_in">echo</span> <span class="hljs-string">"computers are fast"</span> | tr <span class="hljs-string">'a-e'</span> <span class="hljs-string">'x'</span><font></font>
xomputxrs xrx fxst<font></font>
$ <span class="hljs-built_in">echo</span> <span class="hljs-string">"5uch l337 5p34k"</span> | tr <span class="hljs-string">'1-4'</span> <span class="hljs-string">'x'</span>
5uch lxx7 5pxxk</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Befehl </font></font><code>tr -s string1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">komprimiert alle mehrfachen Vorkommen von Zeichen </font></font><code>string1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in einem einzigen. </font><font style="vertical-align: inherit;">Eine der nützlichsten Anwendungen </font></font><code>tr -s</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">besteht darin, mehrere aufeinanderfolgende Leerzeichen durch ein Leerzeichen zu ersetzen.</font></font><br>
<br>
<pre><code class="bash hljs">$ <span class="hljs-built_in">echo</span> <span class="hljs-string">"Computers         are       fast"</span> | tr -s <span class="hljs-string">' '</span>
Computers are fast</code></pre><br>
<a name="12"></a><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">falten</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Befehl </font></font><code>fold</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">reduziert alle Eingabezeilen auf die angegebene Breite. </font><font style="vertical-align: inherit;">Beispielsweise kann es hilfreich sein, sicherzustellen, dass der Text auf kleine Displays passt. </font><font style="vertical-align: inherit;">So </font></font><code>fold -w n</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">stapelt Saiten Breite n Zeichen.</font></font><br>
<br>
<pre><code class="bash hljs">$ cat ~/Documents/readme | fold -w 16<font></font>
Thanks again <span class="hljs-keyword">for</span><font></font>
 reading this bo<font></font>
ok!<font></font>
I hope you<span class="hljs-string">'re fo
llowing so far!</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Befehl </font></font><code>fold -s</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">unterbricht Zeilen nur bei Leerzeichen. </font><font style="vertical-align: inherit;">Es kann mit dem vorherigen kombiniert werden, um die Zeichenfolge auf die angegebene Anzahl von Zeichen zu beschränken.</font></font><br>
<br>
<pre><code class="bash hljs">Thanks again
<span class="hljs-keyword">for</span> reading<font></font>
this book!<font></font>
I hope you<span class="hljs-string">'re
following so
far!</span></code></pre><br>
<a name="13"></a><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sed</font></font></h1><br>
<code>sed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ist ein nicht interaktiver Stream-Editor, mit dem Text im Eingabestream zeilenweise konvertiert wird. </font><font style="vertical-align: inherit;">Als Eingabe entweder eine Datei oder oder </font></font><code>stdin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bei der Ausgabe entweder eine Datei oder </font></font><code>stdout</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Editorbefehle können eine oder mehrere </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Adressen</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , eine </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Funktion</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Parameter enthalten</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Somit sind die Befehle wie folgt:</font></font><br>
<br>
<pre><code class="bash hljs">[address[,address]]<span class="hljs-keyword">function</span>[arguments]</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Obwohl es </font></font><code>sed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">viele Funktionen ausführt, werden wir nur das Ersetzen von Text als einen der häufigsten Anwendungsfälle betrachten.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Textersetzung</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Ersetzungsbefehl lautet </font></font><code>sed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wie folgt:</font></font><br>
<br>
<pre><code class="bash hljs">s/PATTERN/REPLACEMENT/[options]</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Beispiel</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : Ersetzen der ersten Instanz eines Wortes in jeder Zeile einer Datei:</font></font><br>
<br>
<pre><code class="bash hljs">$ cat hello<font></font>
hello hello<font></font>
hello world!<font></font>
hi<font></font>
$ cat hello | sed <span class="hljs-string">'s/hello/Hey I just met you/'</span><font></font>
Hey I just met you hello<font></font>
Hey I just met you world<font></font>
hi</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir sehen, dass in der ersten Zeile nur die erste Instanz ersetzt wird </font></font><code>hello</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Um </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">alle</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Vorkommen </font></font><code>hello</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in allen Zeilen </font><font style="vertical-align: inherit;">zu ersetzen </font><font style="vertical-align: inherit;">, können Sie die Option </font></font><code>g</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(bedeutet </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">global</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) verwenden.</font></font><br>
<br>
<pre><code class="bash hljs">$ cat hello | sed <span class="hljs-string">'s/hello/Hey I just met you/g'</span><font></font>
Hey I just met you Hey I just met you<font></font>
Hey I just met you world<font></font>
hi</code></pre><br>
<code>sed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ermöglicht die Verwendung von Trennzeichen außer </font></font><code>/</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, was insbesondere die Lesbarkeit verbessert, wenn die Befehlsargumente selbst Schrägstriche enthalten.</font></font><br>
<br>
<pre><code class="bash hljs">$ cat hello | sed <span class="hljs-string">'s@hello@Hey I just met you@g'</span><font></font>
Hey I just met you Hey I just met you<font></font>
Hey I just met you world<font></font>
hi</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Adresse teilt dem Editor mit, in welcher Zeile oder in welchem ​​Zeilenbereich die Ersetzung durchgeführt werden soll.</font></font><br>
<br>
<pre><code class="bash hljs">$ cat hello | sed <span class="hljs-string">'1s/hello/Hey I just met you/g'</span><font></font>
Hey I just met you hello<font></font>
hello world<font></font>
hi<font></font>
$ cat hello | sed <span class="hljs-string">'2s/hello/Hey I just met you/g'</span><font></font>
hello hello<font></font>
Hey I just met you  world<font></font>
hi</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Adresse </font></font><code>1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gibt </font><font style="vertical-align: inherit;">in der ersten Zeile </font><font style="vertical-align: inherit;">Ersetzen </font></font><code>hello</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">an </font></font><code>Hey I just met you</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Wir können den Adressbereich in der Notation angeben </font></font><code>&lt;start&gt;,&lt;end&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, wobei es </font></font><code>&lt;end&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sich entweder um die Zeilennummer oder </font></font><code>$</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">die letzte Zeile in der Datei handeln kann.</font></font><br>
<br>
<pre><code class="bash hljs">$ cat hello | sed <span class="hljs-string">'1,2s/hello/Hey I just met you/g'</span><font></font>
Hey I just met you Hey I just met you<font></font>
Hey I just met you world<font></font>
hi<font></font>
$ cat hello | sed <span class="hljs-string">'2,3s/hello/Hey I just met you/g'</span><font></font>
hello hello<font></font>
Hey I just met you world<font></font>
hi<font></font>
$ cat hello | sed <span class="hljs-string">'2,$s/hello/Hey I just met you/g'</span><font></font>
hello hello<font></font>
Hey I just met you world<font></font>
hi</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Standardmäßig </font></font><code>sed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wird das Ergebnis selbst erstellt </font></font><code>stdout</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, es kann jedoch auch die Originaldatei mit der Option bearbeitet werden </font></font><code>-i</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<pre><code class="bash hljs">$ sed -i <span class="hljs-string">''</span> <span class="hljs-string">'s/hello/Bonjour/'</span> sed-data<font></font>
$ cat sed-data<font></font>
Bonjour hello<font></font>
Bonjour world<font></font>
hi</code></pre><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hinweis. </font><font style="vertical-align: inherit;">Unter Linux gerade genug </font></font><code>-i</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Unter macOS unterscheidet sich das Verhalten des Befehls jedoch geringfügig, sodass </font></font><code>-i</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sie ihn </font><font style="vertical-align: inherit;">direkt danach </font><font style="vertical-align: inherit;">hinzufügen müssen </font></font><code>''</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></blockquote><br>
<a name="14"></a><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Echte Beispiele</font></font></h1><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CSV-Filterung mit grep und awk</font></font></h3><br>
<pre><code class="bash hljs">$ grep -w gauge metadata.csv | awk -F, <span class="hljs-string">'{ if ($4 == "query") { print $1, "per", $5 } }'</span><font></font>
mysql.performance.com_delete per second<font></font>
mysql.performance.com_delete_multi per second<font></font>
mysql.performance.com_insert per second<font></font>
mysql.performance.com_insert_select per second<font></font>
mysql.performance.com_replace_select per second<font></font>
mysql.performance.com_select per second<font></font>
mysql.performance.com_update per second<font></font>
mysql.performance.com_update_multi per second<font></font>
mysql.performance.questions per second<font></font>
mysql.performance.slow_queries per second<font></font>
mysql.performance.queries per second</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In diesem Beispiel </font><font style="vertical-align: inherit;">filtert </font></font><code>grep</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">die Datei </font></font><code>metadata.csv</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zuerst die Zeilen, die das Wort enthalten </font></font><code>gauge</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, dann </font><font style="vertical-align: inherit;">die Zeilen </font><font style="vertical-align: inherit;">mit der </font></font><code>query</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vierten Spalte und zeigt den Metriknamen (1. Spalte) mit dem entsprechenden Wert </font></font><code>per_unit_name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(5. Spalte) an.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zeigt die IPv4-Adresse an, die der Netzwerkschnittstelle zugeordnet ist</font></font></h3><br>
<pre><code class="bash hljs">$ ifconfig en0 | grep inet | grep -v inet6 | awk <span class="hljs-string">'{ print $2 }'</span>
192.168.0.38</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Befehl </font></font><code>ifconfig &lt;interface name&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zeigt Informationen zur angegebenen Netzwerkschnittstelle an. </font><font style="vertical-align: inherit;">Zum Beispiel:</font></font><br>
<br>
<pre><code class="bash hljs">en0: flags=8863&lt;UP,BROADCAST,SMART,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500<font></font>
    ether 19:64:92:de:20:ba<font></font>
    inet6 fe80::8a3:a1cb:56ae:7c7c%en0 prefixlen 64 secured scopeid 0x7<font></font>
    inet 192.168.0.38 netmask 0xffffff00 broadcast 192.168.0.255<font></font>
    nd6 options=201&lt;PERFORMNUD,DAD&gt;<font></font>
    media: autoselect<font></font>
    status: active</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dann laufen Sie </font></font><code>grep</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">für </font></font><code>inet</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, das ergibt zwei Korrespondenzzeilen.</font></font><br>
<br>
<pre><code class="bash hljs">$ ifconfig en0 | grep inet<font></font>
    inet6 fe80::8a3:a1cb:56ae:7c7c%en0 prefixlen 64 secured scopeid 0x7<font></font>
    inet 192.168.0.38 netmask 0xffffff00 broadcast 192.168.0.255</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Verwenden Sie dann </font></font><code>grep -v</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ausschließen der Zeile mit </font></font><code>ipv6</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<pre><code class="bash hljs">$ ifconfig en0 | grep inet | grep -v inet6<font></font>
inet 192.168.0.38 netmask 0xffffff00 broadcast 192.168.0.255</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Schließlich </font></font><code>awk</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fordern </font><font style="vertical-align: inherit;">wir mit Hilfe </font><font style="vertical-align: inherit;">die zweite Spalte in dieser Zeile an: Dies ist die IPv4-Adresse, die unserer Netzwerkschnittstelle zugeordnet ist </font></font><code>en0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<pre><code class="bash hljs">$ ifconfig en0 | grep inet | grep -v inet6 | awk <span class="hljs-string">'{ print $2 }'</span>
192.168.0.38</code></pre><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hinweis. </font><font style="vertical-align: inherit;">Mir wurde </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">angeboten</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , durch </font></font><code>grep inet | grep -v inet6</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ein so zuverlässiges Team </font><font style="vertical-align: inherit;">zu ersetzen </font></font><code>awk</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="bash hljs">$ ifconfig en0 | awk <span class="hljs-string">' $1 == "inet" { print $2 }'</span>
192.168.0.38</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es ist kürzer und speziell auf IPv4 mit der Bedingung ausgerichtet </font></font><code>$1 == "inet"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></blockquote><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Abrufen eines Werts aus einer Konfigurationsdatei</font></font></h3><br>
<pre><code class="bash hljs">$ grep <span class="hljs-string">'editor ='</span> ~/.gitconfig  | cut -d = -f2 | sed <span class="hljs-string">'s/ //g'</span>
/usr/bin/vim</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Suchen Sie in der Git-Konfigurationsdatei des aktuellen Benutzers nach dem Wert </font></font><code>editor =</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, schneiden Sie das Zeichen zu </font></font><code>=</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, extrahieren Sie die zweite Spalte und löschen Sie alle Leerzeichen.</font></font><br>
<br>
<pre><code class="bash hljs">$ grep <span class="hljs-string">'editor ='</span> ~/.gitconfig<font></font>
     editor = /usr/bin/vim<font></font>
$ grep <span class="hljs-string">'editor ='</span> ~/.gitconfig  | cut -d<span class="hljs-string">'='</span> -f2<font></font>
 /usr/bin/vim<font></font>
$ grep <span class="hljs-string">'editor ='</span> ~/.gitconfig  | cut -d<span class="hljs-string">'='</span> -f2 | sed <span class="hljs-string">'s/ //'</span>
/usr/bin/vim</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Extrahieren Sie IPs aus einer Protokolldatei</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der folgende echte Code sucht im Datenbankprotokoll nach einer Nachricht </font></font><code>Too many connections from</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(gefolgt von einer IP-Adresse) und zeigt die zehn wichtigsten Eindringlinge an.</font></font><br>
<br>
<pre><code class="bash hljs">$ grep <span class="hljs-string">'Too many connections from'</span> db.log | \<font></font>
  awk <span class="hljs-string">'{ print $12 }'</span> | \<font></font>
  sed <span class="hljs-string">'s@/@@'</span> | \<font></font>
  sort | \<font></font>
  uniq -c | \<font></font>
  sort -rn | \<font></font>
  head -n 10 | \<font></font>
  awk <span class="hljs-string">'{ print $2 }'</span><font></font>
   10.11.112.108<font></font>
   10.11.111.70<font></font>
   10.11.97.57<font></font>
   10.11.109.72<font></font>
   10.11.116.156<font></font>
   10.11.100.221<font></font>
   10.11.96.242<font></font>
   10.11.81.68<font></font>
   10.11.99.112<font></font>
   10.11.107.120</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mal sehen, was diese Pipeline macht. </font><font style="vertical-align: inherit;">Wie sieht die Zeile im Protokoll aus?</font></font><br>
<br>
<pre><code class="bash hljs">$ grep <span class="hljs-string">"Too many connections from"</span> db.log | head -n 1<font></font>
2020-01-01 08:02:37,617 [myid:1] - WARN  [NIOServerCxn.Factory:1.2.3.4/1.2.3.4:2181:NIOServerCnxnFactory@193] - Too many connections from /10.11.112.108 - max is 60</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anschließend wird </font></font><code>awk '{ print $12 }'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">die IP-Adresse aus der Zeichenfolge extrahiert.</font></font><br>
<br>
<pre><code class="bash hljs">$ grep <span class="hljs-string">"Too many connections from"</span> db.log | awk <span class="hljs-string">'{ print $12 }'</span><font></font>
/10.11.112.108<font></font>
...</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Befehl </font></font><code>sed 's@/@@'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">löscht den anfänglichen Schrägstrich.</font></font><br>
<br>
<pre><code class="bash hljs">$ grep <span class="hljs-string">"Too many connections from"</span> db.log | awk <span class="hljs-string">'{ print $12 }'</span> | sed <span class="hljs-string">'s@/@@'</span><font></font>
10.11.112.108<font></font>
...</code></pre><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hinweis. </font><font style="vertical-align: inherit;">Wie wir bereits gesehen haben, können </font></font><code>sed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sie in jedem Trennzeichen verwenden. </font><font style="vertical-align: inherit;">Obwohl es normalerweise als Trennzeichen verwendet wird </font></font><code>/</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, ersetzen wir hier dieses spezielle Zeichen, was die Lesbarkeit des Substitutionsausdrucks geringfügig beeinträchtigt.</font></font><br>
<br>
<pre><code class="bash hljs">sed <span class="hljs-string">'s/\///'</span></code></pre></blockquote><br>
<code>sort | uniq -c</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sortiert IP-Adressen in lexikografischer Reihenfolge und entfernt dann Duplikate, wobei die Anzahl der Einträge vor jeder IP-Adresse hinzugefügt wird.</font></font><br>
<br>
<pre><code class="bash hljs">$ grep <span class="hljs-string">'Too many connections from'</span> db.log | \<font></font>
  awk <span class="hljs-string">'{ print $12 }'</span> | \<font></font>
  sed <span class="hljs-string">'s@/@@'</span> | \<font></font>
  sort | \<font></font>
  uniq -c<font></font>
   1379 10.11.100.221<font></font>
   1213 10.11.103.168<font></font>
   1138 10.11.105.177<font></font>
    946 10.11.106.213<font></font>
   1211 10.11.106.4<font></font>
   1326 10.11.107.120<font></font>
   ...</code></pre><br>
<code>sort -rn | head -n 10</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sortiert die Zeilen nach der Anzahl der Vorkommen, numerisch und in umgekehrter Reihenfolge, sodass zuerst die Hauptverletzer angezeigt werden, von denen 10 Zeilen angezeigt werden. </font><font style="vertical-align: inherit;">Der letzte Befehl </font></font><code>awk { print $2 }</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ruft die IP-Adressen selbst ab.</font></font><br>
<br>
<pre><code class="bash hljs">$ grep <span class="hljs-string">'Too many connections from'</span> db.log | \<font></font>
  awk <span class="hljs-string">'{ print $12 }'</span> | \<font></font>
  sed <span class="hljs-string">'s@/@@'</span> | \<font></font>
  sort | \<font></font>
  uniq -c | \<font></font>
  sort -rn | \<font></font>
  head -n 10 | \<font></font>
  awk <span class="hljs-string">'{ print $2 }'</span><font></font>
  10.11.112.108<font></font>
  10.11.111.70<font></font>
  10.11.97.57<font></font>
  10.11.109.72<font></font>
  10.11.116.156<font></font>
  10.11.100.221<font></font>
  10.11.96.242<font></font>
  10.11.81.68<font></font>
  10.11.99.112<font></font>
  10.11.107.120</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Umbenennen einer Funktion in der Quelldatei</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Stellen Sie sich vor, wir arbeiten an einem Projekt und möchten die unterbenannte Funktion (oder Klasse, Variable usw.) in der Quelldatei umbenennen. </font><font style="vertical-align: inherit;">Sie können dies mit einem Befehl tun </font></font><code>sed -i</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, der direkt in der Originaldatei ersetzt wird.</font></font><br>
<br>
<pre><code class="bash hljs">$ cat izk/utils.py<font></font>
def bool_from_str(s):<font></font>
    <span class="hljs-keyword">if</span> s.isdigit():
        <span class="hljs-built_in">return</span> int(s) == 1
    <span class="hljs-built_in">return</span> s.lower() <span class="hljs-keyword">in</span> [<span class="hljs-string">'yes'</span>, <span class="hljs-string">'true'</span>, <span class="hljs-string">'y'</span>]</code></pre><br>
<pre><code class="bash hljs">$ sed -i <span class="hljs-string">'s/def bool_from_str/def is_affirmative/'</span> izk/utils.py<font></font>
$ cat izk/utils.py<font></font>
def is_affirmative(s):<font></font>
    <span class="hljs-keyword">if</span> s.isdigit():
        <span class="hljs-built_in">return</span> int(s) == 1
    <span class="hljs-built_in">return</span> s.lower() <span class="hljs-keyword">in</span> [<span class="hljs-string">'yes'</span>, <span class="hljs-string">'true'</span>, <span class="hljs-string">'y'</span>]</code></pre><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hinweis. </font></font><code>sed -i</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verwenden Sie </font><font style="vertical-align: inherit;">stattdessen unter macOS </font></font><code>sed -i ''</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir haben die Funktion jedoch nur in der Originaldatei umbenannt. </font><font style="vertical-align: inherit;">Dadurch wird der Import </font></font><code>bool_from_str</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in eine andere Datei unterbrochen, da diese Funktion nicht mehr definiert ist. </font><font style="vertical-align: inherit;">Wir müssen einen Weg finden, um </font></font><code>bool_from_str</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">während unseres Projekts </font><font style="vertical-align: inherit;">umzubenennen </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Dies kann erreicht werden unter Verwendung von </font><font style="vertical-align: inherit;">Befehlen </font></font><code>grep</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>sed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sowie Schleifen </font></font><code>for</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">oder Verwendung </font></font><code>xargs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<a name="15"></a><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vertiefung: Zyklen </font></font><code>for</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und</font></font><code>xargs</code></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um alle Vorkommen in unserem Projekt zu ersetzen </font></font><code>bool_from_str</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, müssen Sie sie zuerst rekursiv mit finden </font></font><code>grep -r</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<pre><code class="bash hljs">$ grep -r bool_from_str .<font></font>
./tests/test_utils.py:from izk.utils import bool_from_str<font></font>
./tests/test_utils.py:def test_bool_from_str(s, expected):<font></font>
./tests/test_utils.py:    assert bool_from_str(s) == expected<font></font>
./izk/utils.py:def bool_from_str(s):<font></font>
./izk/prompt.py:from .utils import bool_from_str<font></font>
./izk/prompt.py:                    default = bool_from_str(os.environ[envvar])</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Da wir nur an Dateien mit Übereinstimmungen interessiert sind, müssen Sie auch die Option verwenden </font></font><code>-l/--files-with-matches</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="bash hljs">-l, --files-with-matches<font></font>
        Only the names of files containing selected lines are written to standard out-<font></font>
        put.  grep will only search a file until a match has been found, making<font></font>
        searches potentially less expensive.  Pathnames are listed once per file<font></font>
        searched.  If the standard input is searched, the string ``(standard input)<span class="hljs-string">''</span>
        is written.</code></pre><br>
<pre><code class="bash hljs">$ grep -r --files-with-matches bool_from_str .<font></font>
./tests/test_utils.py<font></font>
./izk/utils.py<font></font>
./izk/prompt.py</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dann können wir den Befehl verwenden </font></font><code>xargs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, um Aktionen aus jeder Zeile der Ausgabe auszuführen (dh aus allen Dateien, die die Zeile enthalten </font></font><code>bool_from_str</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">).</font></font><br>
<br>
<pre><code class="bash hljs">$ grep -r --files-with-matches bool_from_str . | \<font></font>
  xargs -n 1 sed -i <span class="hljs-string">'s/bool_from_str/is_affirmative/'</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Option </font></font><code>-n 1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gibt an, dass jede Zeile in der Ausgabe einen separaten Befehl ausführen soll </font></font><code>sed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dann werden die folgenden Befehle ausgeführt:</font></font><br>
<br>
<pre><code class="bash hljs">$ sed -i <span class="hljs-string">'s/bool_from_str/is_affirmative/'</span> ./tests/test_utils.py<font></font>
$ sed -i <span class="hljs-string">'s/bool_from_str/is_affirmative/'</span> ./izk/utils.py<font></font>
$ sed -i <span class="hljs-string">'s/bool_from_str/is_affirmative/'</span> ./izk/prompt.py</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn der Befehl, mit dem Sie </font></font><code>xargs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(in unserem Fall </font></font><code>sed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font><font style="vertical-align: inherit;">aufrufen, </font><font style="vertical-align: inherit;">mehrere Argumente unterstützt, sollten Sie das Argument </font></font><code>-n 1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">für die Leistung </font><font style="vertical-align: inherit;">verwerfen </font><font style="vertical-align: inherit;">.</font></font><br>
<br>
<pre><code class="bash hljs">grep -r --files-with-matches bool_from_str . | xargs sed -i <span class="hljs-string">'s/bool_from_str/is_affirmative/'</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dieser Befehl wird dann ausgeführt</font></font><br>
<br>
<pre><code class="bash hljs">$ sed -i <span class="hljs-string">'s/bool_from_str/is_affirmative/'</span> ./tests/test_utils.py ./izk/utils.py ./izk/prompt.py</code></pre><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hinweis. </font><font style="vertical-align: inherit;">Aus der Zusammenfassung </font></font><code>sed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">auf der Manpage geht hervor, dass das Team mehrere Argumente annehmen kann.</font></font><br>
<br>
<pre><code class="bash hljs">SYNOPSIS<font></font>
     sed [-Ealn] <span class="hljs-built_in">command</span> [file ...]<font></font>
     sed [-Ealn] [-e <span class="hljs-built_in">command</span>] [-f command_file] [-i extension] [file ...]</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie wir im vorherigen Kapitel gesehen haben, </font></font><code>file ...</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bedeutet dies, dass mehrere Argumente akzeptiert werden, bei denen es sich um Dateinamen handelt.</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir sehen, dass für alle Vorkommen Ersetzungen vorgenommen werden </font></font><code>bool_from_str</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<pre><code class="bash hljs">$ grep -r is_affirmative .<font></font>
./tests/test_utils.py:from izk.utils import is_affirmative<font></font>
./tests/test_utils.py:def test_is_affirmative(s, expected):<font></font>
./tests/test_utils.py:    assert is_affirmative(s) == expected<font></font>
./izk/utils.py:def is_affirmative(s):<font></font>
./izk/prompt.py:from .utils import is_affirmative<font></font>
./izk/prompt.py:                    default = is_affirmative(os.environ[envvar])</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie so oft gibt es verschiedene Möglichkeiten, um das gleiche Ergebnis zu erzielen. </font><font style="vertical-align: inherit;">Stattdessen </font></font><code>xargs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">könnten wir Schleifen verwenden </font></font><code>for</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, um über die Zeilen in der Liste zu iterieren und für jedes Element Maßnahmen zu ergreifen. </font><font style="vertical-align: inherit;">Diese Schleifen haben die folgende Syntax:</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> list; <span class="hljs-keyword">do</span>
    <span class="hljs-built_in">command</span> <span class="hljs-variable">$item</span>
<span class="hljs-keyword">done</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn wir uns Befehl wickeln </font></font><code>grep</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in </font></font><code>$()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, dann wird die Schale in einem ausführen </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Subshell</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , wobei </font><font style="vertical-align: inherit;">das Ergebnis davon wird dann in einer Schleife wiederholt werden </font></font><code>for</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<pre><code class="bash hljs">$ <span class="hljs-keyword">for</span> file <span class="hljs-keyword">in</span> $(grep -r --files-with-matches bool_from_str .); <span class="hljs-keyword">do</span>
  sed -i <span class="hljs-string">'s/bool_from_str/is_affirmative/'</span> <span class="hljs-variable">$file</span>
<span class="hljs-keyword">done</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dieser Befehl wird ausgeführt</font></font><br>
<br>
<pre><code class="bash hljs">$ sed -i <span class="hljs-string">'s/bool_from_str/is_affirmative/'</span> ./tests/test_utils.py<font></font>
$ sed -i <span class="hljs-string">'s/bool_from_str/is_affirmative/'</span> ./izk/utils.py<font></font>
$ sed -i <span class="hljs-string">'s/bool_from_str/is_affirmative/'</span> ./izk/prompt.py</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Schleifensyntax </font></font><code>for</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">scheint mir klarer zu sein </font></font><code>xargs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, aber letztere kann Befehle parallel mithilfe von Parametern ausführen </font></font><code>-P n</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, wobei </font></font><code>n</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">die maximale Anzahl parallel ausgeführter Befehle gleichzeitig ausgeführt wird, was zu einem Leistungsgewinn führen kann.</font></font><br>
<br>
<a name="16"></a><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zusammenfassung</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
All diese Tools eröffnen eine ganze Welt von Möglichkeiten, da Sie damit Daten extrahieren und transformieren können und ganze Pipelines von Teams erstellen können, die möglicherweise nie zusammenarbeiten wollten. Jeder von ihnen führt eine relativ kleine Funktion aus (Sortieren </font></font><code>sort</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, Kombinieren </font></font><code>cat</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, Filtern </font></font><code>grep</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, Bearbeiten </font></font><code>sed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, Schneiden </font></font><code>cut</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">usw.). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jede Aufgabe, die Text enthält, kann auf eine Pipeline kleinerer Aufgaben reduziert werden, von denen jede eine einfache Aktion ausführt und ihre Ausgabe an die nächste Aufgabe überträgt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn wir beispielsweise wissen möchten, wie viele eindeutige IP-Adressen in der Protokolldatei enthalten sind und diese IP-Adressen immer in derselben Spalte angezeigt werden, können wir die folgende Befehlsfolge ausführen:</font></font><br>
<br>
<ul>
<li><code>grep</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Zeichenfolgen, die dem Muster von Zeichenfolgen mit IP-Adressen entsprechen</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Suchen Sie die Spalte mit der IP-Adresse und extrahieren Sie sie mit </font></font><code>awk</code><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sortieren Sie die Liste der IP-Adressen mit </font></font><code>sort</code><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">benachbarte Duplikate mit entfernen </font></font><code>uniq</code><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zählen Sie die Anzahl der Zeilen (d. h. eindeutige IP-Adressen) mit </font></font><code>wc -l</code></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Da es viele native Textverarbeitungswerkzeuge von Drittanbietern gibt, gibt es auch viele Möglichkeiten, Probleme zu lösen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Beispiele in diesem Artikel waren weit hergeholt, aber ich schlage vor, Sie lesen den erstaunlichen Artikel </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„Befehlszeilentools können 235-mal schneller sein als Ihr Hadoop-Cluster“</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , um eine Vorstellung davon zu bekommen, wie nützlich und leistungsfähig diese Befehle wirklich sind und welche wirklichen Probleme auftreten sie können entscheiden.</font></font><br>
<br>
<a name="17"></a><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Was weiter</font></font></h1><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zählen Sie die Anzahl der Dateien und Verzeichnisse in Ihrem Home-Verzeichnis.</font></font><br>
</li>
<li>     .<br>
</li>
<li>,       .<br>
</li>
<li>    .         .</li>
</ol><br>
<hr><br>
<i>  «        » (Essential Tools and Practices for the Aspiring Software Developer)    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="> </a>            ,     .    ,    ,   ,       ,      <code>git</code>,  SQL,   <code>Make</code>, <code>jq</code>   ,   ,          .<br>
<br>
    ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="> </a>!</i></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de492910/index.html">Schrittmotorsteuerung über Canny-Controller</a></li>
<li><a href="../de492914/index.html">So schützen Sie Remote-Mitarbeiter oder Home Office-Sicherheit</a></li>
<li><a href="../de492918/index.html">Papst: Ethik für KI und unbemannte Fahrzeuge</a></li>
<li><a href="../de492920/index.html">Quarantäne in der Tschechischen Republik: ein Einblick</a></li>
<li><a href="../de492924/index.html">Visualisieren und Animieren von (geophysikalischen) Modellen. Informativität der Visualisierung</a></li>
<li><a href="../de492934/index.html">Schwierigkeiten beim Anheben eines Sprachassistenten. Das Aussehen eines Linguisten und Entwicklers</a></li>
<li><a href="../de492938/index.html">Portal für Testumgebungen oder Speichern Sie unsere Entwickler</a></li>
<li><a href="../de492940/index.html">Tauchen Sie ein in Charles Proxy</a></li>
<li><a href="../de492942/index.html">Ontol (= am nützlichsten) über Fernarbeit [Zusammenstellung von mehr als 100 Artikeln]</a></li>
<li><a href="../de492946/index.html">Coronavirus: Wie wir uns selbst täuschen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>