<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🏕️ 🕺🏻 🙇 ベアリングの振動診断中に振動センサーの信号から高周波ノイズを除去 👩🏾‍🎨 👩🏽‍🔬 ♑️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="出版物から撮影した写真
 
 前書き
 デジタル信号処理の最も差し迫ったタスクの1つは、ノイズから信号を除去するタスクです。実際の信号には、有用な情報だけでなく、干渉やノイズの無関係な影響の痕跡も含まれています。さらに、振動診断中、振動センサーからの信号には非定常周波数スペクトルがあり、フィルタリン...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>ベアリングの振動診断中に振動センサーの信号から高周波ノイズを除去</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/459922/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/59/zj/kb/59zjkb8gnd_phkp1allrzocs6by.png"></div><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">出版物から撮影した写真</font></font></a><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">前書き</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
デジタル信号処理の最も差し迫ったタスクの1つは、ノイズから信号を除去するタスクです。実際の信号には、有用な情報だけでなく、干渉やノイズの無関係な影響の痕跡も含まれています。さらに、振動診断中、振動センサーからの信号には非定常周波数スペクトルがあり、フィルタリングタスクが複雑になります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
信号から高周波ノイズを除去するには、さまざまな方法があります。たとえば、Scipyライブラリには、さまざまなフィルタリング方法に基づくフィルターが含まれています。時間軸に沿って平均化するなどして信号を平滑化します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ただし、離散ウェーブレット変換（DWT）メソッドの利点は、さまざまなウェーブレット形状です。</font><font style="vertical-align: inherit;">予想される現象に特徴的なフォームを持つウェーブレットを選択できます。</font><font style="vertical-align: inherit;">たとえば、特定の周波数範囲の信号を選択できます。その形状は、欠陥の出現に関与します。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">この出版物の目的は、</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> DWT信号変換、カルマンフィルター、および移動平均法を使用して、振動センサーの信号をフィルター処理する方法を分析することです。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">分析用のソースデータ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この出版物では、さまざまなフィルタリング方法に基づくフィルターの操作が</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、NASAデータセット</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用し</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">て</font></a><font style="vertical-align: inherit;">分析</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">され</font></a><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">PRONOSTIA実験プラットフォームで取得</font></font><br>
<br>
<img src="https://habrastorage.org/webt/yt/bz/9l/ytbz9lrxw2h8roaaokvclm7qqgc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
されたデータ</font><font style="vertical-align: inherit;">：この</font><font style="vertical-align: inherit;">セットには、さまざまなタイプのベアリングの摩耗に関する振動センサー信号に関するデータが含まれています。</font><font style="vertical-align: inherit;">信号ファイルを含むフォルダーの目的を</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表に示します</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/2w/ap/wr/2wapwr4x6xe5r-a2y2_nwc_oski.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ベアリングの状態の監視は、振動センサー（水平および垂直加速度計）、力、および温度の信号によって提供されます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/wl/o1/a0/wlo1a0i6430fko-l5lijoa5tu4c.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3つの異なる負荷で受信した信号：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最初の作業条件：1800 rpmおよび4000 N;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2番目の作業条件：1650 rpmおよび4200 N;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3番目の動作条件：1500 rpmおよび5000N。</font></font></li>
</ul><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらの条件では、連続ウェーブレット信号変換を使用</font><font style="vertical-align: inherit;">して、テストセットからのデータの</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">分光パワースカログラム</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を作成します-['Test_set / Bearing1_3 / acc_00001.csv'、 'Test_set / Bearing2_3 / acc_00001。 csv '、' Test_set / Bearing3_3 / acc_00001.csv ']（表1を参照）。</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スケールグラム一覧</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-keyword">import</span> scaleogram <span class="hljs-keyword">as</span> scg
<span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
<span class="hljs-keyword">from</span>  pylab <span class="hljs-keyword">import</span> *
<span class="hljs-keyword">import</span> pywt<font></font>
filename_n = [<span class="hljs-string">'Test_set/Bearing1_3/acc_00001.csv'</span>, <span class="hljs-string">'Test_set/Bearing2_3/acc_00001.csv'</span>,
<span class="hljs-string">'Test_set/Bearing3_3/acc_00001.csv'</span>]
<span class="hljs-keyword">for</span> filename <span class="hljs-keyword">in</span> filename_n:<font></font>
    df = pd.read_csv(filename, header=<span class="hljs-literal">None</span>)<font></font>
    signal = df[<span class="hljs-number">4</span>].values   <font></font>
    wavelet = <span class="hljs-string">'cmor1-0.5'</span> 
    ax = scg.cws(signal, scales=arange(<span class="hljs-number">1</span>, <span class="hljs-number">40</span>), wavelet=wavelet, figsize=(<span class="hljs-number">8</span>, <span class="hljs-number">4</span>), cmap=<span class="hljs-string">"jet"</span>, cbar=<span class="hljs-literal">None</span>, ylabel=<span class="hljs-string">' '</span>, xlabel=<span class="hljs-string">" "</span>, yscale=<span class="hljs-string">"log"</span>,<font></font>
    title=<span class="hljs-string">'-   %s \n( )'</span>%filename)<font></font>
show()</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/zb/k4/v7/zbk4v74jffmfkopfqkhecmjjelu.png"><br>
<img src="https://habrastorage.org/webt/hz/nh/nh/hznhnhcpyg3thjqs4deu4dleq0s.png"><br>
<img src="https://habrastorage.org/webt/n2/ii/jv/n2iijvml8h0tq-bq38rcabkz8ny.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
与えられたスケールグラムから、スペクトルのパワーが増加する瞬間が早い時期に発生し、動作条件の周期性を示すことがわかります。1650rpmと4200 Nは、力の減少に対するこの周波数帯域のベアリングの劣化の加速を示します。</font><font style="vertical-align: inherit;">この信号（ 'Test_set / Bearing2_3 / acc_00001.csv'）を使用して、ノイズ除去方法を分析します。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DWTを使用した信号分解</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">出版物で</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、信号をその周波数サブバンドに分解できるDWTにフィルターバンクがどのように実装されているかを見てきました。</font><font style="vertical-align: inherit;">近似係数（cA）は、信号（平均化フィルター）の低周波数部分を表します。</font><font style="vertical-align: inherit;">詳細係数（cD）は、信号の高周波部分を表します。</font><font style="vertical-align: inherit;">次に、DWTを使用して信号をその周波数サブバンドに分解し、元の信号を復元する方法を検討します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PyWaveletsツールを使用して信号分解問題を解決するには、2つの方法があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初の方法は、信号にpywt.dwt（）を適用して、近似係数と詳細係数（cA1、cD1）を抽出することです。</font><font style="vertical-align: inherit;">次に、信号を復元するために、pywt.idwt（）を使用します。</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上場</font></font></b><div class="spoiler_text"><pre><code class="python hljs">
<span class="hljs-keyword">import</span> pywt
<span class="hljs-keyword">from</span> scipy <span class="hljs-keyword">import</span> *
<span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd   
<span class="hljs-keyword">from</span> pylab <span class="hljs-keyword">import</span> *<font></font>
filename = <span class="hljs-string">'Test_set/Bearing2_3/acc_00001.csv'</span>
df = pd.read_csv(filename, header=<span class="hljs-literal">None</span>)<font></font>
signal = df[<span class="hljs-number">4</span>].values<font></font>
(cA1,  cD1)  =  pywt .dwt (signal,  <span class="hljs-string">'db2'</span>, <span class="hljs-string">'smooth'</span>)<font></font>
r_signal = pywt.idwt (cA1,  cD1,  <span class="hljs-string">'db2'</span>, <span class="hljs-string">'smooth'</span>)<font></font>
fig, ax =subplots(figsize=(<span class="hljs-number">8</span>,<span class="hljs-number">4</span>))<font></font>
ax.plot(signal, <span class="hljs-string">'b'</span>,label=<span class="hljs-string">' '</span>)<font></font>
ax.plot(r_signal, <span class="hljs-string">'r'</span>, label=<span class="hljs-string">'  '</span>, linestyle=<span class="hljs-string">'--'</span>)<font></font>
ax.legend(loc=<span class="hljs-string">'upper left'</span>)<font></font>
ax.set_ylabel(<span class="hljs-string">' '</span>, fontsize=<span class="hljs-number">12</span>)<font></font>
ax.set_xlabel(<span class="hljs-string">''</span>, fontsize=<span class="hljs-number">12</span>)<font></font>
ax.set_title(<span class="hljs-string">'   ( pywt.dwt()) \n   (  pywt.idwt()) '</span>)<font></font>
show()<font></font>
</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/iv/fm/pi/ivfmpiij21temoybrrrdqkflkxw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
pywt.wavedec（）関数を信号に適用する2番目の方法は、すべての近似係数と詳細係数を特定のレベルに復元することです。</font><font style="vertical-align: inherit;">この関数は、入力信号とレベルを入力として受け取り、1セットの近似係数（n番目のレベル）とnセットの詳細係数（1からn番目のレベル）を返します。</font><font style="vertical-align: inherit;">分解するには、pywt.waverec（）を適用します。</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上場</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-keyword">import</span> pywt
<span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd   
<span class="hljs-keyword">from</span> pylab <span class="hljs-keyword">import</span> *<font></font>
filename = <span class="hljs-string">'Test_set/Bearing3_3/acc_00026.csv'</span>
df = pd.read_csv(filename, header=<span class="hljs-literal">None</span>)<font></font>
signal = df[<span class="hljs-number">4</span>].values<font></font>
coeffs = pywt.wavedec(signal, <span class="hljs-string">'db2'</span>, level=<span class="hljs-number">8</span>)<font></font>
r_signal = pywt.waverec(coeffs, <span class="hljs-string">'db2'</span>) <font></font>
fig, ax = plt.subplots(figsize=(<span class="hljs-number">8</span>,<span class="hljs-number">4</span>))<font></font>
ax.plot(signal, <span class="hljs-string">'b'</span>,label=<span class="hljs-string">' '</span>)<font></font>
ax.plot(r_signal, <span class="hljs-string">'r '</span>,label= <span class="hljs-string">' '</span>, linestyle=<span class="hljs-string">'--'</span>)<font></font>
ax.legend(loc=<span class="hljs-string">'upper left'</span>)<font></font>
ax.set_ylabel(<span class="hljs-string">' '</span>, fontsize=<span class="hljs-number">12</span>)<font></font>
ax.set_xlabel(<span class="hljs-string">''</span>, fontsize=<span class="hljs-number">12</span>)<font></font>
ax.set_title(<span class="hljs-string">'    - level.\n   ( pywt.wavedec()) '</span>)<font></font>
show()<font></font>
</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/qq/ao/bn/qqaobnxdnlkrjllymvd3aqxti44.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
信号を分解して復元する2番目の方法はより便利です。これにより、必要な分解レベルをすぐに設定できます。 </font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">信号分解中に一部の詳細係数を除去して高周波ノイズを除去</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
詳細係数の一部を削除して信号を復元します。詳細係数は信号の高周波部分を表すので、単純に周波数スペクトルのこの部分を除外します。信号に高周波ノイズがある場合、これはそれをフィルタリングする1つの方法です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PyWaveletsライブラリでは、これはしきい値処理関数pywt.threshol（）を使用して行うことができます：</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
pywt.threshold（データ、値、モード= 'ソフト'、置換= 0）</font><font style="vertical-align: inherit;">¶data </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> array_like </font></font><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数値データ。</font></font></i><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">値：</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スカラー</font></font><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">しきい値。</font></font></i><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">モード：</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> {'soft'、 'hard'、 'garrote'、 'greater'、 'less'} </font></font><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">入力に適用されるしきい値のタイプを定義します。デフォルトは「ソフト」です。</font></font></i><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代替：</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> float、オプション</font></font><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">置換値（デフォルト：0）。</font></font></i><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">出力：</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">配列</font></font><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">しきい値配列。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
特定のしきい値に対するしきい値処理関数の適用は、次の例を使用して検討するのが最適です。</font></font><br>
<br>
<pre><code class="python hljs">&gt;&gt;&gt;&gt; <span class="hljs-keyword">from</span> scipy <span class="hljs-keyword">import</span>*
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">import</span> pywt
<span class="hljs-meta">&gt;&gt;&gt; </span>data =linspace(<span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">7</span>)
<span class="hljs-meta">&gt;&gt;&gt; </span>data<font></font>
array([<span class="hljs-number">1.</span> , <span class="hljs-number">1.5</span>, <span class="hljs-number">2.</span> , <span class="hljs-number">2.5</span>, <span class="hljs-number">3.</span> , <span class="hljs-number">3.5</span>, <span class="hljs-number">4.</span> ])
<span class="hljs-meta">&gt;&gt;&gt; </span>pywt.threshold(data, <span class="hljs-number">2</span>, <span class="hljs-string">'soft'</span>)<font></font>
array([<span class="hljs-number">0.</span> , <span class="hljs-number">0.</span> , <span class="hljs-number">0.</span> , <span class="hljs-number">0.5</span>, <span class="hljs-number">1.</span> , <span class="hljs-number">1.5</span>, <span class="hljs-number">2.</span> ])
<span class="hljs-meta">&gt;&gt;&gt; </span>pywt.threshold(data, <span class="hljs-number">2</span>, <span class="hljs-string">'hard'</span>)<font></font>
array([<span class="hljs-number">0.</span> , <span class="hljs-number">0.</span> , <span class="hljs-number">2.</span> , <span class="hljs-number">2.5</span>, <span class="hljs-number">3.</span> , <span class="hljs-number">3.5</span>, <span class="hljs-number">4.</span> ])
<span class="hljs-meta">&gt;&gt;&gt; </span>pywt.threshold(data, <span class="hljs-number">2</span>, <span class="hljs-string">'garrote'</span>)<font></font>
array([<span class="hljs-number">0.</span> , <span class="hljs-number">0.</span> , <span class="hljs-number">0.</span>, <span class="hljs-number">0.9</span>,<span class="hljs-number">1.66666667</span>, <span class="hljs-number">2.35714286</span>, <span class="hljs-number">3.</span>])
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次のリストを使用して、しきい値関数のグラフをプロットします。</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上場</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-keyword">from</span> scipy <span class="hljs-keyword">import</span>*
<span class="hljs-keyword">from</span> pylab <span class="hljs-keyword">import</span>*
<span class="hljs-keyword">import</span> pywt<font></font>
s = linspace(<span class="hljs-number">-4</span>, <span class="hljs-number">4</span>, <span class="hljs-number">1000</span>)<font></font>
s_soft = pywt.threshold(s, value=<span class="hljs-number">0.5</span>, mode=<span class="hljs-string">'soft'</span>)<font></font>
s_hard = pywt.threshold(s, value=<span class="hljs-number">0.5</span>, mode=<span class="hljs-string">'hard'</span>)<font></font>
s_garrote = pywt.threshold(s, value=<span class="hljs-number">0.5</span>, mode=<span class="hljs-string">'garrote'</span>)<font></font>
figsize=(<span class="hljs-number">10</span>, <span class="hljs-number">4</span>)<font></font>
plot(s, s_soft)<font></font>
plot(s, s_hard)<font></font>
plot(s, s_garrote)<font></font>
legend([<span class="hljs-string">'soft (0.5)'</span>, <span class="hljs-string">'hard (0.5)'</span>, <span class="hljs-string">'non-neg. garrote (0.5)'</span>])<font></font>
xlabel(<span class="hljs-string">'   '</span>)<font></font>
ylabel(<span class="hljs-string">'  '</span>)<font></font>
show()</code></pre></div></div><br>
<img src="https://habrastorage.org/webt/gd/lp/oo/gdlpoowyfgb1iv0kd-wm1vpb8vg.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
グラフは、負でないガロットしきい値がソフトしきい値とハードしきい値の中間であることを示しています。</font><font style="vertical-align: inherit;">遷移領域の幅を定義する一対のしきい値が必要です。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">フィルター特性に対するしきい値関数の影響</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
上記のグラフからわかるように、2つのしきい値関数「soft」と「garrote」だけが適しています。フィルター特性への影響を調べるために、リストを書き留めます。</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上場</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
<span class="hljs-keyword">from</span>  pylab <span class="hljs-keyword">import</span> *
<span class="hljs-keyword">import</span> pywt<font></font>
filename = <span class="hljs-string">'Test_set/Bearing2_3/acc_00001.csv'</span>
df = pd.read_csv(filename, header=<span class="hljs-literal">None</span>)<font></font>
signal = df[<span class="hljs-number">4</span>].values<font></font>
v=<span class="hljs-string">'bior4.4'</span>
thres=[<span class="hljs-string">'soft'</span> ,<span class="hljs-string">'garrote'</span>]
<span class="hljs-keyword">for</span> w <span class="hljs-keyword">in</span> thres:
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">lowpassfilter</span>(<span class="hljs-params">signal, thresh, wavelet=v</span>):</span><font></font>
        thresh = thresh*nanmax(signal)<font></font>
        coeff = pywt.wavedec(signal, wavelet, level=<span class="hljs-number">8</span>,mode=<span class="hljs-string">"per"</span> )<font></font>
        coeff[<span class="hljs-number">1</span>:] = (pywt.threshold(i, value=thresh, mode=w ) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> coeff[<span class="hljs-number">1</span>:])<font></font>
        reconstructed_signal = pywt.waverec(coeff, wavelet, mode=<span class="hljs-string">"per"</span> )
        <span class="hljs-keyword">return</span> reconstructed_signal     <font></font>
    fig, ax = subplots(figsize=(<span class="hljs-number">8</span>,<span class="hljs-number">4</span>))  <font></font>
    ax.plot(signal, color=<span class="hljs-string">"b"</span>, alpha=<span class="hljs-number">0.5</span>, label=<span class="hljs-string">' '</span>)<font></font>
    rec = lowpassfilter(signal, <span class="hljs-number">0.4</span>)<font></font>
    ax.plot(rec, <span class="hljs-string">'r'</span>, label=<span class="hljs-string">'DWT  '</span>, linewidth=<span class="hljs-number">2</span>)<font></font>
    ax.legend()<font></font>
    ax.set_title(<span class="hljs-string">'      :%s\n   :%s'</span>%(v,w), fontsize=<span class="hljs-number">12</span>)<font></font>
    ax.set_ylabel(<span class="hljs-string">' '</span>, fontsize=<span class="hljs-number">12</span>)<font></font>
    ax.set_xlabel(<span class="hljs-string">''</span>, fontsize=<span class="hljs-number">12</span>)     <font></font>
show()</code></pre> </div></div><br>
<img src="https://habrastorage.org/webt/yx/th/g8/yxthg8ew_lkh-koeq6bnfvw6tla.png"><br>
<img src="https://habrastorage.org/webt/8q/nn/35/8qnn353spuea5_mtc6jb_t1tmty.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
グラフからわかるように、soft関数は「garrote」関数よりもスムージングが優れているため、将来はsoft関数を使用します。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">フィルター特性に対する詳細しきい値の影響</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
検討中のフィルタータイプの場合、詳細係数を変更するためのしきい値は重要な特性であるため、次のリストを使用してその効果を調べます。</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上場</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
<span class="hljs-keyword">from</span>  pylab <span class="hljs-keyword">import</span> *
<span class="hljs-keyword">import</span> pywt<font></font>
filename = <span class="hljs-string">'Test_set/Bearing2_3/acc_00001.csv'</span>
df = pd.read_csv(filename, header=<span class="hljs-literal">None</span>)<font></font>
signal = df[<span class="hljs-number">4</span>].values<font></font>
v=<span class="hljs-string">'bior4.4'</span>
thres=[<span class="hljs-number">0.1</span>,<span class="hljs-number">0.4</span>,<span class="hljs-number">0.6</span>]
<span class="hljs-keyword">for</span> w <span class="hljs-keyword">in</span> thres:
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">lowpassfilter</span>(<span class="hljs-params">signal, thresh, wavelet=v</span>):</span><font></font>
        thresh = thresh*nanmax(signal)<font></font>
        coeff = pywt.wavedec(signal, wavelet, level=<span class="hljs-number">8</span>,mode=<span class="hljs-string">"per"</span> )<font></font>
        coeff[<span class="hljs-number">1</span>:] = (pywt.threshold(i, value=thresh, mode=<span class="hljs-string">'soft'</span> ) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> coeff[<span class="hljs-number">1</span>:])<font></font>
        reconstructed_signal = pywt.waverec(coeff, wavelet, mode=<span class="hljs-string">"per"</span> )
        <span class="hljs-keyword">return</span> reconstructed_signal<font></font>
     <font></font>
    fig, ax = subplots(figsize=(<span class="hljs-number">8</span>,<span class="hljs-number">4</span>))  <font></font>
    ax.plot(signal, color=<span class="hljs-string">"b"</span>, alpha=<span class="hljs-number">0.5</span>, label=<span class="hljs-string">' '</span>)<font></font>
    rec = lowpassfilter(signal,w)<font></font>
    ax.plot(rec, <span class="hljs-string">'r'</span>, label=<span class="hljs-string">'DWT  '</span>, linewidth=<span class="hljs-number">2</span>)<font></font>
    ax.legend()<font></font>
    ax.set_title(<span class="hljs-string">'      :%s\n    %s'</span>%(v,w), fontsize=<span class="hljs-number">12</span>)<font></font>
    ax.set_ylabel(<span class="hljs-string">' '</span>, fontsize=<span class="hljs-number">12</span>)<font></font>
    ax.set_xlabel(<span class="hljs-string">''</span>, fontsize=<span class="hljs-number">12</span>)     <font></font>
show()<font></font>
</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/nu/vp/te/nuvptehfyqvcheixzbsqac506ci.png"><br>
<img src="https://habrastorage.org/webt/2o/vg/nn/2ovgnnncwq4b4yc0odhhj_bteae.png"><br>
<img src="https://habrastorage.org/webt/sk/ep/_r/skep_rwbarrrdfhmnxbobzlxiyc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
得られたグラフからわかるように、詳細レベルのしきい値は、スクリーニングされた部品のスケールに影響します。</font><font style="vertical-align: inherit;">しきい値の増加に伴い、詳細スケールが過度に拡大され、変換によって元の信号の形状が歪むまで、ウェーブレットはレベルが増加し続けるノイズを差し引きます。この信号では、しきい値は0.63以下である必要があります。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">フィルター特性に対するウェーブレットの影響</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PyWaveletsライブラリには、DWT変換に十分な数のウェーブレットがあり、次のようにして取得できます。</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">import</span> pywt
<span class="hljs-meta">&gt;&gt;&gt; </span>print(pywt.wavelist(kind= <span class="hljs-string">'discrete'</span>))<font></font>
[<span class="hljs-string">'bior1.1'</span>, <span class="hljs-string">'bior1.3'</span>, <span class="hljs-string">'bior1.5'</span>, <span class="hljs-string">'bior2.2'</span>, <span class="hljs-string">'bior2.4'</span>, <span class="hljs-string">'bior2.6'</span>, <span class="hljs-string">'bior2.8'</span>, <span class="hljs-string">'bior3.1'</span>, <span class="hljs-string">'bior3.3'</span>, <span class="hljs-string">'bior3.5'</span>, <span class="hljs-string">'bior3.7'</span>, <span class="hljs-string">'bior3.9'</span>, <span class="hljs-string">'bior4.4'</span>, <span class="hljs-string">'bior5.5'</span>, <span class="hljs-string">'bior6.8'</span>, <span class="hljs-string">'coif1'</span>, <span class="hljs-string">'coif2'</span>, <span class="hljs-string">'coif3'</span>, <span class="hljs-string">'coif4'</span>, <span class="hljs-string">'coif5'</span>, <span class="hljs-string">'coif6'</span>, <span class="hljs-string">'coif7'</span>, <span class="hljs-string">'coif8'</span>, <span class="hljs-string">'coif9'</span>, <span class="hljs-string">'coif10'</span>, <span class="hljs-string">'coif11'</span>, <span class="hljs-string">'coif12'</span>, <span class="hljs-string">'coif13'</span>, <span class="hljs-string">'coif14'</span>, <span class="hljs-string">'coif15'</span>, <span class="hljs-string">'coif16'</span>, <span class="hljs-string">'coif17'</span>, <span class="hljs-string">'db1'</span>, <span class="hljs-string">'db2'</span>, <span class="hljs-string">'db3'</span>, <span class="hljs-string">'db4'</span>, <span class="hljs-string">'db5'</span>, <span class="hljs-string">'db6'</span>, <span class="hljs-string">'db7'</span>, <span class="hljs-string">'db8'</span>, <span class="hljs-string">'db9'</span>, <span class="hljs-string">'db10'</span>, <span class="hljs-string">'db11'</span>, <span class="hljs-string">'db12'</span>, <span class="hljs-string">'db13'</span>, <span class="hljs-string">'db14'</span>, <span class="hljs-string">'db15'</span>, <span class="hljs-string">'db16'</span>, <span class="hljs-string">'db17'</span>, <span class="hljs-string">'db18'</span>, <span class="hljs-string">'db19'</span>, <span class="hljs-string">'db20'</span>, <span class="hljs-string">'db21'</span>, <span class="hljs-string">'db22'</span>, <span class="hljs-string">'db23'</span>, <span class="hljs-string">'db24'</span>, <span class="hljs-string">'db25'</span>, <span class="hljs-string">'db26'</span>, <span class="hljs-string">'db27'</span>, <span class="hljs-string">'db28'</span>, <span class="hljs-string">'db29'</span>, <span class="hljs-string">'db30'</span>, <span class="hljs-string">'db31'</span>, <span class="hljs-string">'db32'</span>, <span class="hljs-string">'db33'</span>, <span class="hljs-string">'db34'</span>, <span class="hljs-string">'db35'</span>, <span class="hljs-string">'db36'</span>, <span class="hljs-string">'db37'</span>, <span class="hljs-string">'db38'</span>, <span class="hljs-string">'dmey'</span>, <span class="hljs-string">'haar'</span>, <span class="hljs-string">'rbio1.1'</span>, <span class="hljs-string">'rbio1.3'</span>, <span class="hljs-string">'rbio1.5'</span>, <span class="hljs-string">'rbio2.2'</span>, <span class="hljs-string">'rbio2.4'</span>, <span class="hljs-string">'rbio2.6'</span>, <span class="hljs-string">'rbio2.8'</span>, <span class="hljs-string">'rbio3.1'</span>, <span class="hljs-string">'rbio3.3'</span>, <span class="hljs-string">'rbio3.5'</span>, <span class="hljs-string">'rbio3.7'</span>, <span class="hljs-string">'rbio3.9'</span>, <span class="hljs-string">'rbio4.4'</span>, <span class="hljs-string">'rbio5.5'</span>, <span class="hljs-string">'rbio6.8'</span>, <span class="hljs-string">'sym2'</span>, <span class="hljs-string">'sym3'</span>, <span class="hljs-string">'sym4'</span>, <span class="hljs-string">'sym5'</span>, <span class="hljs-string">'sym6'</span>, <span class="hljs-string">'sym7'</span>, <span class="hljs-string">'sym8'</span>, <span class="hljs-string">'sym9'</span>, <span class="hljs-string">'sym10'</span>, <span class="hljs-string">'sym11'</span>, <span class="hljs-string">'sym12'</span>, <span class="hljs-string">'sym13'</span>, <span class="hljs-string">'sym14'</span>, <span class="hljs-string">'sym15'</span>, <span class="hljs-string">'sym16'</span>, <span class="hljs-string">'sym17'</span>, <span class="hljs-string">'sym18'</span>, <span class="hljs-string">'sym19'</span>, <span class="hljs-string">'sym20'</span>]</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
フィルター特性に対するウェーブレットの影響は、そのプリミティブ関数に依存します。</font><font style="vertical-align: inherit;">この依存関係を示すために、Dobeshiファミリーから2つのウェーブレット（db1とdb38）を選択し、これらのファミリーを検討します。</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上場</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-keyword">import</span> pywt
<span class="hljs-keyword">from</span> pylab <span class="hljs-keyword">import</span>*<font></font>
db_wavelets =  [<span class="hljs-string">'db1'</span>, <span class="hljs-string">'db38'</span>]<font></font>
fig, axarr = subplots(ncols=<span class="hljs-number">2</span>, nrows=<span class="hljs-number">5</span>, figsize=(<span class="hljs-number">14</span>,<span class="hljs-number">8</span>))<font></font>
fig.suptitle(<span class="hljs-string">'  : db1,db38'</span>, fontsize=<span class="hljs-number">14</span>)
<span class="hljs-keyword">for</span> col_no, waveletname <span class="hljs-keyword">in</span> enumerate(db_wavelets):<font></font>
    wavelet = pywt.Wavelet(waveletname)<font></font>
    no_moments = wavelet.vanishing_moments_psi<font></font>
    family_name = wavelet.family_name<font></font>
    <span class="hljs-keyword">for</span> row_no, level <span class="hljs-keyword">in</span> enumerate(range(<span class="hljs-number">1</span>,<span class="hljs-number">6</span>)):<font></font>
        wavelet_function, scaling_function, x_values = wavelet.wavefun(level = level)<font></font>
        axarr[row_no, col_no].set_title(<span class="hljs-string">"{} : {}.   : {}. :: {}  "</span>.format(<font></font>
            waveletname, level, no_moments, len(x_values)), loc=<span class="hljs-string">'left'</span>)<font></font>
        axarr[row_no, col_no].plot(x_values, wavelet_function, <span class="hljs-string">'b--'</span>)<font></font>
        axarr[row_no, col_no].set_yticks([])<font></font>
        axarr[row_no, col_no].set_yticklabels([])<font></font>
tight_layout()<font></font>
subplots_adjust(top=<span class="hljs-number">0.9</span>)<font></font>
show()<font></font>
</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/fs/0m/sq/fs0msqniw-dcixmdhfbrxrwpwfg.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初の列には、1次のDaubeshiウェーブレット（db1）、38次の2番目の列（db38）があります。</font><font style="vertical-align: inherit;">したがって、db1には1つの瞬間の消滅があり、db38には38の瞬間の消滅があります。</font><font style="vertical-align: inherit;">消える瞬間の数は、ウェーブレットの近似次数と滑らかさに関係しています。</font><font style="vertical-align: inherit;">ウェーブレットにP個の消失点がある場合、それは次数P-1の多項式を近似できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
より滑らかなウェーブレットはより滑らかな信号近似を作成し、逆もまた同様です。「短い」ウェーブレットは近似関数のピークをよりよく追跡します。</font><font style="vertical-align: inherit;">ウェーブレットを選択するときに、分解のレベルを指定することもできます。</font><font style="vertical-align: inherit;">デフォルトでは、PyWaveletsは入力信号に可能な最大分解レベルを選択します。</font><font style="vertical-align: inherit;">最大分解レベルは、入力信号とウェーブレットの長さに依存します。</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上場</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
<span class="hljs-keyword">import</span> pywt<font></font>
filename = <span class="hljs-string">'Test_set/Bearing2_3/acc_00001.csv'</span>
df = pd.read_csv(filename, header=<span class="hljs-literal">None</span>)<font></font>
data = df[<span class="hljs-number">4</span>].values<font></font>
w=[<span class="hljs-string">'db1'</span>, <span class="hljs-string">'db38'</span>]
<span class="hljs-keyword">for</span> v <span class="hljs-keyword">in</span> w:<font></font>
    n_level=pywt.dwt_max_level(len(data),v)<font></font>
    print(<span class="hljs-string">'  %s   : %s '</span> %(v,n_level))</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
db1ウェーブレットの場合、最大分解レベル：11 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
db38ウェーブレットの場合、最大分解レベル：5 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ウェーブレット分解の最大レベルの取得値について、高周波ノイズを除去するフィルターの動作を検討します。</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上場</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
<span class="hljs-keyword">import</span> scaleogram <span class="hljs-keyword">as</span> scg
<span class="hljs-keyword">from</span>  pylab <span class="hljs-keyword">import</span> *
<span class="hljs-keyword">import</span> pywt<font></font>
filename = <span class="hljs-string">'Test_set/Bearing2_3/acc_00001.csv'</span>
df = pd.read_csv(filename, header=<span class="hljs-literal">None</span>)<font></font>
signal = df[<span class="hljs-number">4</span>].values<font></font>
discrete_wavelets =[(<span class="hljs-string">'db38'</span>, <span class="hljs-number">5</span>),(<span class="hljs-string">'db1'</span>,<span class="hljs-number">11</span>)]
<span class="hljs-keyword">for</span> v <span class="hljs-keyword">in</span> discrete_wavelets:    
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">lowpassfilter</span>(<span class="hljs-params">signal, thresh = <span class="hljs-number">0.63</span>, wavelet=v[<span class="hljs-number">0</span>]</span>):</span><font></font>
        thresh = thresh*nanmax(signal)<font></font>
        coeff = pywt.wavedec(signal, wavelet, mode=<span class="hljs-string">"per"</span> )      <font></font>
        coeff[<span class="hljs-number">1</span>:] = (pywt.threshold(i, value=thresh, mode=<span class="hljs-string">'soft'</span> ) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> coeff[<span class="hljs-number">1</span>:])<font></font>
        reconstructed_signal = pywt.waverec(coeff, wavelet, mode=<span class="hljs-string">"per"</span> )
        <span class="hljs-keyword">return</span> reconstructed_signal<font></font>
    wavelet = pywt.DiscreteContinuousWavelet(v[<span class="hljs-number">0</span>])<font></font>
    phi, psi, x = wavelet.wavefun(level=v[<span class="hljs-number">1</span>])<font></font>
    fig, ax = subplots(figsize=(<span class="hljs-number">8</span>,<span class="hljs-number">4</span>))  <font></font>
    ax.set_title(<span class="hljs-string">"   : %s,level=%s"</span>%(v[<span class="hljs-number">0</span>],v[<span class="hljs-number">1</span>]), fontsize=<span class="hljs-number">12</span>)  <font></font>
    ax.plot(x,phi,linewidth=<span class="hljs-number">2</span>)   <font></font>
<font></font>
    fig, ax = subplots(figsize=(<span class="hljs-number">8</span>,<span class="hljs-number">4</span>))  <font></font>
    ax.plot(signal, color=<span class="hljs-string">"b"</span>, alpha=<span class="hljs-number">0.5</span>, label=<span class="hljs-string">'   '</span>)<font></font>
    rec = lowpassfilter(signal, <span class="hljs-number">0.4</span>)<font></font>
    ax.plot(rec, <span class="hljs-string">'r'</span>, label=<span class="hljs-string">'DWT  '</span>, linewidth=<span class="hljs-number">2</span>)<font></font>
    ax.legend()<font></font>
    ax.set_title(<span class="hljs-string">'   \n   :%s,level=%s'</span>%(v[<span class="hljs-number">0</span>],v[<span class="hljs-number">1</span>]),fontsize=<span class="hljs-number">12</span>)<font></font>
    ax.set_ylabel(<span class="hljs-string">' '</span>, fontsize=<span class="hljs-number">12</span>)<font></font>
    ax.set_xlabel(<span class="hljs-string">''</span>, fontsize=<span class="hljs-number">12</span>)<font></font>
    wavelet = <span class="hljs-string">'cmor1-0.5'</span> 
    ax = ax = scg.cws(rec, scales=arange(<span class="hljs-number">1</span>,<span class="hljs-number">128</span>), wavelet=wavelet,figsize=(<span class="hljs-number">8</span>, <span class="hljs-number">4</span>), cmap=<span class="hljs-string">"jet"</span>, ylabel=<span class="hljs-string">' '</span>, xlabel=<span class="hljs-string">" "</span>, yscale=<span class="hljs-string">"log"</span>,<font></font>
title=<span class="hljs-string">'CWT  \n(   DWT  )'</span>)<font></font>
show()<font></font>
</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/ox/ye/ly/oxyelyqw4xi75vxu8sgn57jy2ek.png"><br>
<img src="https://habrastorage.org/webt/iv/-s/sy/iv-ssyb2yau4ym95tk7ks37hddo.png"><br>
<img src="https://habrastorage.org/webt/1f/vm/4t/1fvm4trkcng-igaafvxppvadkvo.png"><br>
<img src="https://habrastorage.org/webt/w1/zm/ls/w1zmlsmgqnlnbj2ww5v6nijdmyo.png"><br>
<img src="https://habrastorage.org/webt/js/wc/l3/jswcl3-b_tcy_cth70tlktwc6ka.png"><br>
<img src="https://habrastorage.org/webt/z8/c-/83/z8c-83mpmq8p5ewenjbkudpjh5s.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、フィルター出力で引用した信号の波形から、db38ウェーブレットの場合、スペクトルのピークパワーの後にローカライズされた領域が続き、db1ウェーブレットの場合、これらの領域は消えます。逆微分関数が、予想される現象の形状特性を持つウェーブレットを選択できます。</font><font style="vertical-align: inherit;">たとえば、db38ウェーブレットは37次多項式の信号を近似できることに注意してください。</font><font style="vertical-align: inherit;">これにより、信号の分類が拡張され、たとえば、振動センサーの信号に基づいて機器の誤動作を特定できます。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Daubechiesウェーブレットを使用したフィルター後の信号は、系列の特性として近似係数と分解係数を使用して時系列を形成するため、そのような系列の近接度を決定することが可能で、検索と分類が大幅に簡略化されます。</font></font></b><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">高周波ノイズを除去するカルマンフィルター</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
カルマンフィルターは、さまざまな動的システムでノイズをフィルター処理するために広く使用されています。状態ベクトルxを持つ動的システムを考えます。</font></font><br>
<br>
<math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>x</mi><mo>=</mo><mi>F</mi><mo>&amp;#x22C5;</mo><mi>x</mi><mo>+</mo><mi>w</mi><mo stretchy=&quot;false&quot;>(</mo><mi>Q</mi><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="17.33ex" height="2.634ex" viewBox="0 -809.3 7461.4 1134.2" role="img" focusable="false" style="vertical-align: -0.755ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMATHI-78" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMAIN-3D" x="850" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMATHI-46" x="1906" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMAIN-22C5" x="2878" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMATHI-78" x="3379" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMAIN-2B" x="4173" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMATHI-77" x="5174" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMAIN-28" x="5890" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMATHI-51" x="6280" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMAIN-29" x="7071" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>x</mi><mo>=</mo><mi>F</mi><mo>⋅</mo><mi>x</mi><mo>+</mo><mi>w</mi><mo stretchy="false">(</mo><mi>Q</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-1">x=F\cdot x+w(Q) </script><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここで、Fは遷移行列、</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
w（Q）は数学的な期待値がゼロのランダムプロセス（ノイズ）と共分散行列Q </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
です。各瞬間に既知の測定誤差があるシステムの状態遷移を観察します。カルマン法を使用したノイズの除去は、外挿と補正の2つのステップで構成されます。これは次のようになります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
システムパラメータを定義します。Q- </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
行列ノイズ共分散（プロセスノイズ共分散）。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
H-観測行列（測定）。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
R-観測ノイズの共分散（測定ノイズ共分散）。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
P = Qは、状態ベクトルの共分散行列の初期値です。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
z（t）は、システムの観測状態です。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
x = z（0）は、システムの状態を評価するための初期値です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
各観測値zについて、フィルター処理された状態xを計算し、</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これについて次の手順を実行します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
•ステップ1：外挿</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1.システムの状態の外挿（予測）</font></font><br>
<math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>x</mi><mo>=</mo><mi>F</mi><mo>&amp;#x22C5;</mo><mi>x</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="9.178ex" height="2.009ex" viewBox="0 -755.5 3951.5 865.1" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMATHI-78" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMAIN-3D" x="850" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMATHI-46" x="1906" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMAIN-22C5" x="2878" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMATHI-78" x="3379" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>x</mi><mo>=</mo><mi>F</mi><mo>⋅</mo><mi>x</mi></math></span></span><script type="math/tex" id="MathJax-Element-2">x=F\cdot x</script><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2.外挿された状態ベクトルの共分散行列を計算する</font></font><br>
<math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>F</mi><mo>=</mo><mi>F</mi><mo>&amp;#x22C5;</mo><mi>P</mi><mo>&amp;#x22C5;</mo><msup><mi>F</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>T</mi></mrow></msup><mo>+</mo><mi>Q</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="19.566ex" height="2.759ex" viewBox="0 -916.9 8424.4 1188" role="img" focusable="false" style="vertical-align: -0.63ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMATHI-46" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMAIN-3D" x="1027" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMATHI-46" x="2083" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMAIN-22C5" x="3055" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMATHI-50" x="3556" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMAIN-22C5" x="4529" y="0"></use><g transform="translate(5030,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMATHI-46" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMATHI-54" x="1104" y="513"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMAIN-2B" x="6632" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMATHI-51" x="7632" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>F</mi><mo>=</mo><mi>F</mi><mo>⋅</mo><mi>P</mi><mo>⋅</mo><msup><mi>F</mi><mrow class="MJX-TeXAtom-ORD"><mi>T</mi></mrow></msup><mo>+</mo><mi>Q</mi></math></span></span><script type="math/tex" id="MathJax-Element-3">F=F\cdot P\cdot F^{T}+Q</script><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
•ステップ2：修正</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1.予想される状態からの観測値の偏差であるエラーベクトルを計算し</font><font style="vertical-align: inherit;">ます</font><font style="vertical-align: inherit;">。</font></font><br>
<math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>y</mi><mo>=</mo><mi>z</mi><mo>&amp;#x2212;</mo><mi>H</mi><mo>&amp;#x22C5;</mo><mi>x</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="13.255ex" height="2.384ex" viewBox="0 -755.5 5706.9 1026.6" role="img" focusable="false" style="vertical-align: -0.63ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMATHI-79" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMAIN-3D" x="775" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMATHI-7A" x="1831" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMAIN-2212" x="2522" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMATHI-48" x="3523" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMAIN-22C5" x="4633" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMATHI-78" x="5134" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>y</mi><mo>=</mo><mi>z</mi><mo>−</mo><mi>H</mi><mo>⋅</mo><mi>x</mi></math></span></span><script type="math/tex" id="MathJax-Element-4">y=z-H\cdot x</script><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2.偏差ベクトル（誤差ベクトル）の共分散行列を計算する</font></font><br>
<math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>S</mi><mo>=</mo><mi>H</mi><mo>&amp;#x22C5;</mo><mi>P</mi><mo>&amp;#x22C5;</mo><msup><mi>H</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>T</mi></mrow></msup><mo>+</mo><mi>R</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="19.862ex" height="2.509ex" viewBox="0 -916.9 8551.7 1080.4" role="img" focusable="false" style="vertical-align: -0.38ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMATHI-53" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMAIN-3D" x="923" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMATHI-48" x="1979" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMAIN-22C5" x="3090" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMATHI-50" x="3591" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMAIN-22C5" x="4564" y="0"></use><g transform="translate(5065,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMATHI-48" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMATHI-54" x="1280" y="513"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMAIN-2B" x="6791" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMATHI-52" x="7792" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>S</mi><mo>=</mo><mi>H</mi><mo>⋅</mo><mi>P</mi><mo>⋅</mo><msup><mi>H</mi><mrow class="MJX-TeXAtom-ORD"><mi>T</mi></mrow></msup><mo>+</mo><mi>R</mi></math></span></span><script type="math/tex" id="MathJax-Element-5">S=H\cdot P\cdot H^{T}+R</script><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3.カルマンゲインを計算する</font></font><br>
<math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-6-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>K</mi><mo>=</mo><mi>P</mi><mo>&amp;#x22C5;</mo><mi>H</mi><mo>&amp;#x22C5;</mo><msup><mi>H</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>T</mi></mrow></msup><mo>&amp;#x22C5;</mo><msup><mi>S</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x2212;</mo><mn>1</mn></mrow></msup></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="21.358ex" height="2.384ex" viewBox="0 -916.9 9195.7 1026.6" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMATHI-4B" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMAIN-3D" x="1167" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMATHI-50" x="2223" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMAIN-22C5" x="3197" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMATHI-48" x="3698" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMAIN-22C5" x="4808" y="0"></use><g transform="translate(5309,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMATHI-48" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMATHI-54" x="1280" y="513"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMAIN-22C5" x="7035" y="0"></use><g transform="translate(7536,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMATHI-53" x="0" y="0"></use><g transform="translate(655,362)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMAIN-2212" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMAIN-31" x="778" y="0"></use></g></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>K</mi><mo>=</mo><mi>P</mi><mo>⋅</mo><mi>H</mi><mo>⋅</mo><msup><mi>H</mi><mrow class="MJX-TeXAtom-ORD"><mi>T</mi></mrow></msup><mo>⋅</mo><msup><mi>S</mi><mrow class="MJX-TeXAtom-ORD"><mo>−</mo><mn>1</mn></mrow></msup></math></span></span><script type="math/tex" id="MathJax-Element-6">K=P\cdot H\cdot H^{T}\cdot S^{-1}</script><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
4.状態ベクトル推定の修正</font></font><br>
<math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-7-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>x</mi><mo>=</mo><mi>x</mi><mo>+</mo><mi>K</mi><mo>&amp;#x22C5;</mo><mi>y</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="13.499ex" height="2.384ex" viewBox="0 -755.5 5811.9 1026.6" role="img" focusable="false" style="vertical-align: -0.63ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMATHI-78" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMAIN-3D" x="850" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMATHI-78" x="1906" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMAIN-2B" x="2701" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMATHI-4B" x="3702" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMAIN-22C5" x="4813" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMATHI-79" x="5314" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>x</mi><mo>=</mo><mi>x</mi><mo>+</mo><mi>K</mi><mo>⋅</mo><mi>y</mi></math></span></span><script type="math/tex" id="MathJax-Element-7">x=x+K\cdot y</script><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
5.システムの状態ベクトルを推定するために共分散行列を修正する</font></font><br>
<math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-8-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>P</mi><mo>=</mo><mo stretchy=&quot;false&quot;>(</mo><mi>I</mi><mo>&amp;#x2212;</mo><mi>K</mi><mo>&amp;#x22C5;</mo><mi>H</mi><mo stretchy=&quot;false&quot;>)</mo><mo>&amp;#x22C5;</mo><mi>P</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="19.899ex" height="2.634ex" viewBox="0 -809.3 8567.4 1134.2" role="img" focusable="false" style="vertical-align: -0.755ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMATHI-50" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMAIN-3D" x="1029" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMAIN-28" x="2085" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMATHI-49" x="2475" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMAIN-2212" x="3201" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMATHI-4B" x="4202" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMAIN-22C5" x="5314" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMATHI-48" x="5814" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMAIN-29" x="6703" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMAIN-22C5" x="7315" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMATHI-50" x="7815" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>P</mi><mo>=</mo><mo stretchy="false">(</mo><mi>I</mi><mo>−</mo><mi>K</mi><mo>⋅</mo><mi>H</mi><mo stretchy="false">)</mo><mo>⋅</mo><mi>P</mi></math></span></span><script type="math/tex" id="MathJax-Element-8">P=(I-K\cdot H)\cdot P</script><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アルゴリズムの実装のリスト</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-keyword">from</span> scipy <span class="hljs-keyword">import</span>*
<span class="hljs-keyword">from</span> pylab <span class="hljs-keyword">import</span>*
<span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd   
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">kalman_filter</span>(<span class="hljs-params"> z, 
    F = eye(<span class="hljs-params"><span class="hljs-number">2</span></span>), <span class="hljs-comment">#     (transitionMatrix)</span>
    Q = eye(<span class="hljs-params"><span class="hljs-number">2</span></span>)*<span class="hljs-number">3e-3</span>, <span class="hljs-comment">#   (processNoiseCov)</span>
    H = eye(<span class="hljs-params"><span class="hljs-number">2</span></span>), <span class="hljs-comment">#   (measurement)</span>
    R = eye(<span class="hljs-params"><span class="hljs-number">2</span></span>)*<span class="hljs-number">3e-1</span> <span class="hljs-comment">#    (measurementNoiseCov)</span>
            </span>):</span>
    n = z.shape[<span class="hljs-number">0</span>] <span class="hljs-comment">#  </span>
    <span class="hljs-comment">#m = z.shape[1] #  </span>
    x = z[<span class="hljs-number">0</span>,:].transpose() <span class="hljs-comment">#     </span>
    P = Q <span class="hljs-comment">#      </span>
    r = [ x ] <span class="hljs-comment"># </span>
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(<span class="hljs-number">1</span>,n):
        <span class="hljs-comment"># :</span>
        x = F.dot( x ) <span class="hljs-comment">#  ()  </span>
        P = F.dot(P).dot( F.transpose() ) + Q <span class="hljs-comment">#      </span>
        <span class="hljs-comment"># :</span>
        y = z[i] - H.dot(x) <span class="hljs-comment">#  ,      ()  </span>
        S = H.dot(P).dot(H.transpose()) + R <span class="hljs-comment">#      ( )</span>
        K = P.dot(H.transpose()).dot(linalg.inv(S)) <span class="hljs-comment">#     </span>
        x = x + K.dot(y) <span class="hljs-comment">#     </span>
        P = ( eye(z.shape[<span class="hljs-number">1</span>]) - K.dot(H) ).dot(P) <span class="hljs-comment">#      </span><font></font>
        r.append( x.transpose())<font></font>
    <span class="hljs-keyword">return</span> array(r)<font></font>
filename = <span class="hljs-string">'Test_set/Bearing2_3/acc_00001.csv'</span>
df = pd.read_csv(filename, header=<span class="hljs-literal">None</span>)<font></font>
signal = df[<span class="hljs-number">4</span>].values<font></font>
N=  signal .shape[<span class="hljs-number">0</span>] <span class="hljs-comment">#  </span>
<span class="hljs-comment"># 2 dimensions</span>
y0 =linspace(<span class="hljs-number">0.0</span>,<span class="hljs-number">2500.0</span>,N) <font></font>
y1 =signal <font></font>
d  = array(list(zip(y0,y1)))<font></font>
dn = d <font></font>
r =  kalman_filter(dn)<font></font>
fig, ax = subplots(figsize=(<span class="hljs-number">8</span>,<span class="hljs-number">4</span>))<font></font>
ax.plot( d[:,<span class="hljs-number">0</span>], d[:,<span class="hljs-number">1</span>],<span class="hljs-string">'b'</span>, label=<span class="hljs-string">' '</span> ) <font></font>
ax.plot( r[:,<span class="hljs-number">0</span>], r[:,<span class="hljs-number">1</span>],<span class="hljs-string">'r'</span>, label=<span class="hljs-string">'kalman'</span> )<font></font>
ax.legend(loc=<span class="hljs-string">'upper left'</span>)<font></font>
ax.set_title(<span class="hljs-string">'        \n (  )'</span>, fontsize=<span class="hljs-number">12</span>)                                            <font></font>
ax.set_ylabel(<span class="hljs-string">' '</span>, fontsize=<span class="hljs-number">12</span>)<font></font>
ax.set_xlabel(<span class="hljs-string">''</span>, fontsize=<span class="hljs-number">12</span>)                   <font></font>
show()<font></font>
</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/zp/ql/ln/zpqllnxdxf-fgpt2gyhxg4xekwm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
指定された動的モデルでは、pyKalmanライブラリを使用できます。</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上場</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-keyword">from</span> pykalman <span class="hljs-keyword">import</span> KalmanFilter
<span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
<span class="hljs-keyword">from</span>  pylab <span class="hljs-keyword">import</span> *
<span class="hljs-keyword">import</span> scaleogram <span class="hljs-keyword">as</span> scg<font></font>
filename = <span class="hljs-string">'Test_set/Bearing2_3/acc_00001.csv'</span>
df = pd.read_csv(filename, header=<span class="hljs-literal">None</span>)<font></font>
signal = df[<span class="hljs-number">4</span>].values<font></font>
measurements =signal <font></font>
kf = KalmanFilter(transition_matrices=[<span class="hljs-number">1</span>] ,<span class="hljs-comment"># A      t  t+1 </span>
                  observation_matrices=[<span class="hljs-number">1</span>],<span class="hljs-comment"># C  </span>
                  initial_state_mean=measurements[<span class="hljs-number">0</span>],<span class="hljs-comment">#  </span>
                  initial_state_covariance=[<span class="hljs-number">1</span>],<span class="hljs-comment">#   </span>
                  observation_covariance=[<span class="hljs-number">1</span>],<span class="hljs-comment"># R    </span>
                  transition_covariance= <span class="hljs-number">0.01</span>) <span class="hljs-comment"># Q     </span>
state_means, state_covariances = kf.filter(measurements)<span class="hljs-comment">#  ,  </span>
state_means=[w[<span class="hljs-number">0</span>] <span class="hljs-keyword">for</span> w <span class="hljs-keyword">in</span> state_means]<font></font>
state_std = sqrt(state_covariances[:,<span class="hljs-number">0</span>])<font></font>
fig, ax = subplots(figsize=(<span class="hljs-number">8</span>,<span class="hljs-number">4</span>))<font></font>
ax.plot(measurements ,<span class="hljs-string">'b'</span>, label=<span class="hljs-string">' '</span>)<font></font>
ax.plot(state_means ,<span class="hljs-string">'r'</span>, label=<span class="hljs-string">'kalman- '</span>)<font></font>
ax.legend()<font></font>
ax.set_title(<span class="hljs-string">'       \n ( pyKalman)'</span>, fontsize=<span class="hljs-number">14</span>)                                          <font></font>
ax.set_ylabel(<span class="hljs-string">' '</span>, fontsize=<span class="hljs-number">12</span>)<font></font>
ax.set_xlabel(<span class="hljs-string">''</span>, fontsize=<span class="hljs-number">12</span>)<font></font>
wavelet = <span class="hljs-string">'cmor1-0.5'</span> 
ax = ax = scg.cws(signal, scales=arange(<span class="hljs-number">1</span>,<span class="hljs-number">40</span>), wavelet=wavelet, figsize=(<span class="hljs-number">8</span>, <span class="hljs-number">4</span>),cmap=<span class="hljs-string">"jet"</span>, ylabel=<span class="hljs-string">' '</span>, xlabel=<span class="hljs-string">" "</span>, yscale=<span class="hljs-string">"log"</span>,<font></font>
title=<span class="hljs-string">'CWT    \n( )'</span>)   <font></font>
ax = ax = scg.cws(state_means, scales=arange(<span class="hljs-number">1</span>,<span class="hljs-number">40</span>), wavelet=wavelet, figsize=(<span class="hljs-number">8</span>, <span class="hljs-number">4</span>), cmap=<span class="hljs-string">"jet"</span>, ylabel=<span class="hljs-string">' '</span>, xlabel=<span class="hljs-string">" "</span>, yscale=<span class="hljs-string">"log"</span>,<font></font>
title=<span class="hljs-string">'CWT      \n(  )'</span>)<font></font>
show()<font></font>
</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/z8/uh/p-/z8uhp-7gzngp1uzvix5bxhjadd0.png"><br>
<img src="https://habrastorage.org/webt/ti/qd/gy/tiqdgyoia3_ilxnbcqq8pmwoyi8.png"><br>
<img src="https://habrastorage.org/webt/ws/ws/il/wswsilmi0tqwgrtwp-ezkdkdvy4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
カルマンフィルターは高周波ノイズを適切に除去しますが、出力信号の形状を変更することはできません。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">移動平均法</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
強く振動するシーケンスの変化の主な方向を決定する際に、移動平均法を使用してそれを平滑化するという問題が発生します。</font><font style="vertical-align: inherit;">これは、車内の燃料レベルセンサーの読み取り値、または私たちの場合のように、ベアリングの劣化の加速に関する高周波センサーのデータです。</font><font style="vertical-align: inherit;">問題は、ノイズが重畳されたいくつかのシーケンスrの復元と考えることができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
略して単純移動平均-SMA（単純移動平均）。</font><font style="vertical-align: inherit;">現在のフィルター値を計算するには</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-9-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>r</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>i</mi></mrow></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.848ex" height="1.759ex" viewBox="0 -540.2 795.8 757.5" role="img" focusable="false" style="vertical-align: -0.505ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMATHI-72" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMATHI-69" x="638" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>r</mi><mrow class="MJX-TeXAtom-ORD"><mi>i</mi></mrow></msub></math></span></span><script type="math/tex" id="MathJax-Element-9">r_{i}</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> シーケンスの前のn個の要素を平均化するだけなので、フィルターはシーケンスnの要素を処理し始めます。</font></font><br>
<br>
<math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-10-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>r</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>i</mi></mrow></msub><mo>=</mo><mfrac><mn>1</mn><mi>n</mi></mfrac><mo>&amp;#x22C5;</mo><munderover><mo>&amp;#x2211;</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>n</mi></mrow></munderover><msub><mi>y</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>(</mo><mi>i</mi><mo>&amp;#x2212;</mo><mi>j</mi><mo stretchy=&quot;false&quot;>)</mo></mrow></msub><mo>;</mo><mi>i</mi><mo>&amp;gt;</mo><mi>n</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="25.803ex" height="3.509ex" viewBox="0 -970.7 11109.7 1510.9" role="img" focusable="false" style="vertical-align: -1.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMATHI-72" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMATHI-69" x="638" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMAIN-3D" x="1073" y="0"></use><g transform="translate(1852,0)"><g transform="translate(397,0)"><rect stroke="none" width="544" height="60" x="0" y="220"></rect><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMAIN-31" x="134" y="582"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMATHI-6E" x="84" y="-488"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMAIN-22C5" x="3136" y="0"></use><g transform="translate(3637,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJSZ1-2211" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMATHI-6E" x="1494" y="675"></use><g transform="translate(1056,-287)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMATHI-6A" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMAIN-3D" x="412" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMAIN-31" x="1191" y="0"></use></g></g><g transform="translate(6156,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMATHI-79" x="0" y="0"></use><g transform="translate(490,-187)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMAIN-28" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMATHI-69" x="389" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMAIN-2212" x="734" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMATHI-6A" x="1513" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMAIN-29" x="1926" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMAIN-3B" x="8384" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMATHI-69" x="8829" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMAIN-3E" x="9452" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://habr.com/ru/post/459922/&amp;usg=ALkJrhjFq6oP8fZWlTiRSrjZ9daRMxeclw#MJMATHI-6E" x="10509" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>r</mi><mrow class="MJX-TeXAtom-ORD"><mi>i</mi></mrow></msub><mo>=</mo><mfrac><mn>1</mn><mi>n</mi></mfrac><mo>⋅</mo><munderover><mo>∑</mo><mrow class="MJX-TeXAtom-ORD"><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mrow class="MJX-TeXAtom-ORD"><mi>n</mi></mrow></munderover><msub><mi>y</mi><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">(</mo><mi>i</mi><mo>−</mo><mi>j</mi><mo stretchy="false">)</mo></mrow></msub><mo>;</mo><mi>i</mi><mo>&gt;</mo><mi>n</mi></math></span></span><script type="math/tex" id="MathJax-Element-10">r_{i}=\frac{1}{n}\cdot \sum_{j=1}^{n}y_{(i-j)};i>n</script><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上場</font></font></b><div class="spoiler_text"><pre><code class="python hljs">&lt;source lang=<span class="hljs-string">"python"</span>&gt;<span class="hljs-keyword">from</span> scipy <span class="hljs-keyword">import</span> *
<span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
<span class="hljs-keyword">from</span> pylab <span class="hljs-keyword">import</span> *
<span class="hljs-keyword">import</span> pywt
<span class="hljs-keyword">import</span> scaleogram <span class="hljs-keyword">as</span> scg
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_ave_values</span>(<span class="hljs-params">xvalues, yvalues, n = <span class="hljs-number">6</span></span>):</span><font></font>
    signal_length = len(xvalues)<font></font>
    <span class="hljs-keyword">if</span> signal_length % n == <span class="hljs-number">0</span>:<font></font>
        padding_length = <span class="hljs-number">0</span>
    <span class="hljs-keyword">else</span>:<font></font>
        padding_length = n - signal_length//n % n<font></font>
    xarr = array(xvalues)<font></font>
    yarr = array(yvalues)<font></font>
    xarr.resize(signal_length//n, n)<font></font>
    yarr.resize(signal_length//n, n)<font></font>
    xarr_reshaped = xarr.reshape((<span class="hljs-number">-1</span>,n))<font></font>
    yarr_reshaped = yarr.reshape((<span class="hljs-number">-1</span>,n))<font></font>
    x_ave = xarr_reshaped[:,<span class="hljs-number">0</span>]<font></font>
    y_ave = nanmean(yarr_reshaped, axis=<span class="hljs-number">1</span>)
    <span class="hljs-keyword">return</span> x_ave, y_ave
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">plot_signal_plus_average</span>(<span class="hljs-params">time, signal, average_over = <span class="hljs-number">5</span></span>):</span>
    fig, ax = subplots(figsize=(<span class="hljs-number">8</span>, <span class="hljs-number">4</span>))<font></font>
    time_ave, signal_ave = get_ave_values(time, signal, average_over)    <font></font>
    ax.plot(time_ave, signal_ave,<span class="hljs-string">"b"</span>, label = <span class="hljs-string">'   (n={})'</span>.format(<span class="hljs-number">5</span>))<font></font>
    ax.set_xlim([time[<span class="hljs-number">0</span>], time[<span class="hljs-number">-1</span>]])<font></font>
    ax.set_ylabel(<span class="hljs-string">' '</span>, fontsize=<span class="hljs-number">12</span>)<font></font>
    ax.set_title(<span class="hljs-string">'     SMA'</span>, fontsize=<span class="hljs-number">14</span>)<font></font>
    ax.set_xlabel(<span class="hljs-string">''</span>, fontsize=<span class="hljs-number">12</span>)<font></font>
    ax.legend()<font></font>
    <span class="hljs-keyword">return</span> signal_ave<font></font>
filename = <span class="hljs-string">'Test_set/Bearing2_3/acc_00001.csv'</span>
df = pd.read_csv(filename, header=<span class="hljs-literal">None</span>)<font></font>
df_nino = df[<span class="hljs-number">4</span>].values<font></font>
N = df_nino.shape[<span class="hljs-number">0</span>]<font></font>
time = arange(<span class="hljs-number">0</span>, N) <font></font>
signal = df_nino<font></font>
signal_ave=plot_signal_plus_average(time, signal)<font></font>
<font></font>
wavelet = <span class="hljs-string">'cmor1-0.5'</span> 
ax = ax = scg.cws(signal, scales=arange(<span class="hljs-number">1</span>,<span class="hljs-number">40</span>), wavelet=wavelet, figsize=(<span class="hljs-number">8</span>, <span class="hljs-number">4</span>),cmap=<span class="hljs-string">"jet"</span>, ylabel=<span class="hljs-string">' '</span>, xlabel=<span class="hljs-string">" "</span>, yscale=<span class="hljs-string">"log"</span>,<font></font>
title=<span class="hljs-string">'CWT   %s \n(     )'</span>%filename)<font></font>
ax = ax = scg.cws(signal_ave, scales=arange(<span class="hljs-number">1</span>,<span class="hljs-number">40</span>), wavelet=wavelet, figsize=(<span class="hljs-number">8</span>, <span class="hljs-number">4</span>), cmap=<span class="hljs-string">"jet"</span>, ylabel=<span class="hljs-string">' '</span>, xlabel=<span class="hljs-string">" "</span>, yscale=<span class="hljs-string">"log"</span>,<font></font>
title=<span class="hljs-string">'CWT   %s \n(    )'</span>%filename)<font></font>
show()<font></font>
</code></pre><br>
</div></div><br>
<img src="https://habrastorage.org/webt/dj/r1/jy/djr1jyeyltohdhpij257vpmsk0u.png"><br>
<img src="https://habrastorage.org/webt/hd/4n/dy/hd4ndykwienlrz68dnh4ijw7l-8.png"><br>
<img src="https://habrastorage.org/webt/0n/xd/d4/0nxdd44imz5dmgwlvpfmbpf8o2i.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
スカログラムからわかるように、SMA法は高周波ノイズから信号を十分にクリーンアップせず</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
、前述のように平滑化に使用されます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">調査結果： </font></font></h3><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スケールグラムモジュールを使用して、3つのテスト振動センサー信号のCWTウェーブレットスカログラムが、同じタイプのベアリングの異なるテスト条件で取得されました。</font><font style="vertical-align: inherit;">スカログラムデータによると、後期分解の顕著な兆候を示す信号が選択されました。</font><font style="vertical-align: inherit;">この信号は、与えられたすべての例でフィルターの動作を示すために使用されました。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与えられたウェーブレットレベルのモジュールpywt.dwt（）、pywt.idwt（）およびモジュールpywt.wavedec（）を使用して、振動センサー信号をDWT分解および復元するためのPyWaveletsライブラリのメソッドが検討されます。</font></font></li>
<li>      pywt.threshol()   DWT ,             .</li>
<li>   DWT    ,   .</li>
<li>      ,      .       ,     pyKalman.     .</li>
<li>         .</li>
</ol></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja459906/index.html">Tic Tac Toeパート3：コマンドストレージを使用した元に戻す/やり直し</a></li>
<li><a href="../ja459910/index.html">状況：企業は音声アシスタント向けのサービスの開発を急いでいません-リスクは何ですか</a></li>
<li><a href="../ja459914/index.html">SQLインデックスマネージャー-インデックスを最適化および維持するための無料ツール</a></li>
<li><a href="../ja459918/index.html">pwnable.kr 03による問題解決-bof。スタックでのバッファオーバーフロー</a></li>
<li><a href="../ja459920/index.html">「非通信定理」を回避する方法は？時空を超えた情報伝達</a></li>
<li><a href="../ja459924/index.html">Reactアプリケーションのテストの全サイクル。Auto.ruを報告する</a></li>
<li><a href="../ja459928/index.html">学生のモバイルアプリ開発への道のり</a></li>
<li><a href="../ja459930/index.html">Pythonインポートの自動化</a></li>
<li><a href="../ja459934/index.html">モバイル＃306開発者向けの興味深い資料のダイジェスト（7月8〜14日）</a></li>
<li><a href="../ja459936/index.html">Visual Studioを操作するための9つのトリック</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>