<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üôÖ üîß üëª Escalando um aplicativo Redux com patos üëäüèº üôéüèø üë®‚Äçüë®‚Äçüëß‚Äçüë¶</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Antecipando o in√≠cio do curso, o "desenvolvedor React.js." preparou uma tradu√ß√£o de material √∫til.
 
 
 
 
 Como o front-end do seu aplicativo √© escal...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Escalando um aplicativo Redux com patos</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/492638/"><b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Antecipando o in√≠cio do curso, o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"desenvolvedor React.js."</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> preparou uma tradu√ß√£o de material √∫til.</font></font><br>
</i></b><br>
<br>
<img src="https://habrastorage.org/webt/v4/na/xg/v4naxgyec9pamduy0s1qf7gjqyc.png"><br>
<hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como o front-end do seu aplicativo √© escalado? Como fazer seu c√≥digo suportar seis meses depois? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em 2015, o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Redux</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> invadiu o mundo do desenvolvimento front-end e se estabeleceu como um padr√£o al√©m do React. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A empresa em que trabalho recentemente terminou de refatorar uma grande base de c√≥digo no React, onde implementamos o redux em vez do </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">reflux</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tivemos que dar esse passo, porque seguir em frente n√£o era poss√≠vel sem um aplicativo bem estruturado e um conjunto claro de regras. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A base de c√≥digo existe h√° mais de dois anos e o refluxo est√° presente desde o in√≠cio. Tivemos que mudar o c√≥digo, fortemente vinculado aos componentes React, que ningu√©m tocou por mais de um ano.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Com base na experi√™ncia do trabalho realizado, criei este </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">reposit√≥rio</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que ajudar√° a explicar nossa abordagem para organizar o c√≥digo no redux.</font></font><a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quando voc√™ aprende mais sobre redux, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a√ß√µes</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">redutores</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , come√ßa com exemplos simples. </font><font style="vertical-align: inherit;">Muitos tutoriais dispon√≠veis hoje n√£o v√£o al√©m deles. </font><font style="vertical-align: inherit;">No entanto, se voc√™ estiver criando algo mais complicado no Redux do que uma lista de tarefas, precisar√° de uma maneira razo√°vel de escalar sua base de c√≥digo ao longo do tempo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Algu√©m disse uma vez que na ci√™ncia da computa√ß√£o n√£o h√° tarefa mais dif√≠cil do que dar nomes a coisas diferentes. </font><font style="vertical-align: inherit;">Eu n√£o poderia discordar. </font><font style="vertical-align: inherit;">Nesse caso, a estrutura de pastas e a organiza√ß√£o de arquivos estar√£o em segundo lugar. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vamos ver como costum√°vamos abordar a organiza√ß√£o do c√≥digo.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fun√ß√£o vs Recurso</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Existem duas abordagens geralmente aceitas para organizar aplicativos: fun√ß√£o primeiro e recurso primeiro. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Na captura de tela √† esquerda, a estrutura da pasta √© organizada de acordo com o princ√≠pio da fun√ß√£o primeiro, e √† direita - recurso primeiro. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ur/le/wb/urlewbt5etkrntpbqzlygb0yzlo.png"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Fun√ß√£o primeiro significa que os diret√≥rios de n√≠vel superior s√£o nomeados de acordo com os arquivos contidos. Ent√£o voc√™ tem: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cont√™ineres, componentes, a√ß√µes, redutores</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , etc. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Isso n√£o √© escal√°vel. √Ä medida que o aplicativo cresce e novas funcionalidades aparecem, voc√™ adiciona arquivos √†s mesmas pastas. Como resultado, voc√™ precisar√° rolar o conte√∫do de uma das pastas por um longo tempo para encontrar o arquivo desejado. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Outro problema √© combinar pastas. Um dos threads do seu aplicativo provavelmente exigir√° acesso aos arquivos de todas as pastas.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Uma das vantagens dessa abordagem √© que ela pode isolar, no nosso caso, o React do Redux. Portanto, se voc√™ quiser alterar a biblioteca de gerenciamento de estado, saber√° quais pastas ser√£o necess√°rias. Se voc√™ precisar alterar a biblioteca de exibi√ß√£o, poder√° deixar as pastas com o redux intacto. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O recurso primeiro significa que os diret√≥rios de n√≠vel superior ser√£o nomeados de acordo com a principal funcionalidade do aplicativo: produto, carrinho, sess√£o. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Essa abordagem √© muito melhor, pois cada novo recurso est√° em uma nova pasta. No entanto, voc√™ n√£o tem uma separa√ß√£o entre os componentes Redux e React. Alterar um deles a longo prazo n√£o √© uma tarefa f√°cil.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al√©m disso, voc√™ ter√° arquivos que n√£o pertencer√£o a nenhuma fun√ß√£o. </font><font style="vertical-align: inherit;">Como resultado, tudo se resume √† pasta comum ou compartilhada, porque voc√™ tamb√©m deseja usar seu c√≥digo em diferentes recursos do seu aplicativo.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Combinando o melhor dos dois mundos</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Embora este n√£o seja o t√≥pico do artigo, quero dizer que os arquivos de gerenciamento de estado dos arquivos da interface do usu√°rio precisam ser armazenados separadamente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pense no seu aplicativo a longo prazo. Imagine o que acontece com o seu c√≥digo se voc√™ mudar de React para outra coisa. Ou pense em como sua base de c√≥digo usar√° o ReactNative em paralelo com a vers√£o da web. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No centro </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">de nossa abordagem</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est√° o princ√≠pio do isolamento React code em uma pasta chamada </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">views</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e code redux em outra pasta chamada redux. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Essa separa√ß√£o no n√≠vel inicial nos d√° a flexibilidade de organizar as partes individuais do aplicativo de maneiras completamente diferentes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dentro da pasta </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">views</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">apoiamos a organiza√ß√£o de arquivos com fun√ß√£o primeiro. </font><font style="vertical-align: inherit;">No contexto do React, isso parece natural: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p√°ginas, layouts, componentes, aprimoradores</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> etc. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para n√£o enlouquecer com o n√∫mero de arquivos em uma pasta, voc√™ pode usar a abordagem do recurso primeiro nessas pastas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Enquanto isso, na pasta </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">redux</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ...</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apresentando re-patos</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Cada fun√ß√£o de aplicativo deve corresponder a a√ß√µes e redutores separados, para que fa√ßa sentido aplicar a abordagem do primeiro recurso. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A abordagem modular originais </font></font><i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">patos</font></font></a></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> torna f√°cil trabalhar com redux e oferece uma maneira estruturada para adicionar novas funcionalidades para a sua aplica√ß√£o. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No entanto, voc√™ queria entender o que acontece quando voc√™ dimensiona o aplicativo. </font><font style="vertical-align: inherit;">Percebemos que a maneira de organizar um arquivo por recurso atrapalha o aplicativo e torna seu suporte problem√°tico. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ent√£o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">re-patos apareceu</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">A solu√ß√£o foi dividir a funcionalidade em pastas de patos.</font></font><br>
<br>
<pre><code class="javascript hljs">duck/<font></font>
‚îú‚îÄ‚îÄ actions.js<font></font>
‚îú‚îÄ‚îÄ index.js<font></font>
‚îú‚îÄ‚îÄ operations.js<font></font>
‚îú‚îÄ‚îÄ reducers.js<font></font>
‚îú‚îÄ‚îÄ selectors.js<font></font>
‚îú‚îÄ‚îÄ tests.js<font></font>
‚îú‚îÄ‚îÄ types.js<font></font>
‚îú‚îÄ‚îÄ utils.js</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 A pasta duck deve:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contenha toda a l√≥gica do processamento de apenas UM conceito do seu aplicativo, por exemplo: produto, carrinho, sess√£o, etc.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contenha o arquivo index.js, que √© exportado de acordo com as regras do duck.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Armazene o c√≥digo em um √∫nico arquivo que fa√ßa um trabalho semelhante, como redutores, seletores e a√ß√µes.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contenha testes relacionados ao pato.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por exemplo, neste exemplo, n√£o usamos abstra√ß√µes criadas sobre o redux. </font><font style="vertical-align: inherit;">Ao criar software, √© importante come√ßar com o m√≠nimo de abstra√ß√£o. </font><font style="vertical-align: inherit;">Assim, voc√™ ver√° que o valor de suas abstra√ß√µes n√£o excede os benef√≠cios delas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se voc√™ quiser garantir que a abstra√ß√£o seja ruim, assista a este v√≠deo de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cheng Lou</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vamos ver o conte√∫do de cada arquivo.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tipos</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 O arquivo de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tipos</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> cont√©m os nomes das </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a√ß√µes</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> que voc√™ executa no seu aplicativo. </font><font style="vertical-align: inherit;">Como boa pr√°tica, voc√™ deve tentar cobrir o espa√ßo para nome correspondente √† fun√ß√£o √† qual eles pertencem. </font><font style="vertical-align: inherit;">Essa abordagem ajudar√° na depura√ß√£o de aplicativos complexos.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> QUACK = <span class="hljs-string">"app/duck/QUACK"</span>;
<span class="hljs-keyword">const</span> SWIM = <span class="hljs-string">"app/duck/SWIM"</span>;<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {<font></font>
    QUACK,<font></font>
    SWIM<font></font>
};</code></pre><br>
 <h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A√ß√µes</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Este arquivo cont√©m todas as fun√ß√µes do </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">criador</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> da </font><i><font style="vertical-align: inherit;">a√ß√£o</font></i><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span> types <span class="hljs-keyword">from</span> <span class="hljs-string">"./types"</span>;<font></font>
<font></font>
<span class="hljs-keyword">const</span> quack = <span class="hljs-function"><span class="hljs-params">( )</span> =&gt;</span> ( {
    <span class="hljs-attr">type</span>: types.QUACK<font></font>
} );<font></font>
<font></font>
<span class="hljs-keyword">const</span> swim = <span class="hljs-function">(<span class="hljs-params"> distance </span>) =&gt;</span> ( {
    <span class="hljs-attr">type</span>: types.SWIM,
    <span class="hljs-attr">payload</span>: {<font></font>
        distance<font></font>
    }<font></font>
} );<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {<font></font>
    swim,<font></font>
    quack<font></font>
};</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Observe que todas as </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a√ß√µes s√£o</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> representadas por fun√ß√µes, mesmo que n√£o sejam parametrizadas. </font><font style="vertical-align: inherit;">Uma abordagem consistente √© a maior prioridade para uma grande base de c√≥digo.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Opera√ß√µes</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Para representar a cadeia de opera√ß√µes ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">as Opera√ß√µes</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), voc√™ precisar√° do </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">middleware</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> redux </font><font style="vertical-align: inherit;">, para melhorar a fun√ß√£o do </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">envio</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Exemplos populares s√£o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">redux-thunk</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">redux-saga</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ou </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">redux-observable</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No nosso caso, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">redux-thunk √© usado</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Precisamos separar </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">thunks</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dos </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">criadores de a√ß√£o,</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mesmo com o custo de escrever c√≥digo extra. Portanto, definiremos a opera√ß√£o como um inv√≥lucro sobre as </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a√ß√µes</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se a opera√ß√£o envia apenas uma </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a√ß√£o</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , ou seja, na verdade n√£o usa </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">redux-thunk</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , enviamos a fun√ß√£o </font><i><font style="vertical-align: inherit;">criador</font></i><font style="vertical-align: inherit;"> da </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a√ß√£o</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Se a opera√ß√£o usar </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">thunk</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , poder√° enviar v√°rias </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a√ß√µes</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e vincul√°-las usando </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">promessas</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span> actions <span class="hljs-keyword">from</span> <span class="hljs-string">"./actions"</span>;<font></font>
<font></font>
<span class="hljs-comment">// This is a link to an action defined in actions.js.</span>
<span class="hljs-keyword">const</span> simpleQuack = actions.quack;<font></font>
<font></font>
<span class="hljs-comment">// This is a thunk which dispatches multiple actions from actions.js</span>
<span class="hljs-keyword">const</span> complexQuack = <span class="hljs-function">(<span class="hljs-params"> distance </span>) =&gt;</span> <span class="hljs-function">(<span class="hljs-params"> dispatch </span>) =&gt;</span> {<font></font>
    dispatch( actions.quack( ) ).then( <span class="hljs-function"><span class="hljs-params">( )</span> =&gt;</span> {<font></font>
        dispatch( actions.swim( distance ) );<font></font>
        dispatch( <span class="hljs-comment">/* any action */</span> );<font></font>
    } );<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {<font></font>
    simpleQuack,<font></font>
    complexQuack<font></font>
};</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Chame-os de opera√ß√µes, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">troncos</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , sagas, √©picos, como quiser. </font><font style="vertical-align: inherit;">Basta identificar os princ√≠pios de nomea√ß√£o e cumpri-los. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No final, falaremos sobre o √≠ndice e veremos que as opera√ß√µes fazem parte da interface p√∫blica do duck. </font><font style="vertical-align: inherit;">As a√ß√µes s√£o encapsuladas, as opera√ß√µes tornam-se acess√≠veis a partir do exterior.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Redutores</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Se voc√™ tem uma fun√ß√£o mais multifacetada, definitivamente deve usar v√°rios </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">redutores</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para lidar com estruturas de estado complexas. Al√©m disso, n√£o tenha medo de usar quantos </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">combineReducers forem</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> necess√°rios. Isso permitir√° trabalhar com estruturas de objetos de estado mais livremente.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span> { combineReducers } <span class="hljs-keyword">from</span> <span class="hljs-string">"redux"</span>;
<span class="hljs-keyword">import</span> types <span class="hljs-keyword">from</span> <span class="hljs-string">"./types"</span>;<font></font>
<font></font>
<span class="hljs-comment">/* State Shape
{
    quacking: bool,
    distance: number
}
*/</span><font></font>
<font></font>
<span class="hljs-keyword">const</span> quackReducer = <span class="hljs-function">(<span class="hljs-params"> state = <span class="hljs-literal">false</span>, action </span>) =&gt;</span> {
    <span class="hljs-keyword">switch</span>( action.type ) {
        <span class="hljs-keyword">case</span> types.QUACK: <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        <span class="hljs-comment">/* ... */</span>
        <span class="hljs-keyword">default</span>: <span class="hljs-keyword">return</span> state;<font></font>
    }<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">const</span> distanceReducer = <span class="hljs-function">(<span class="hljs-params"> state = <span class="hljs-number">0</span>, action </span>) =&gt;</span> {
    <span class="hljs-keyword">switch</span>( action.type ) {
        <span class="hljs-keyword">case</span> types.SWIM: <span class="hljs-keyword">return</span> state + action.payload.distance;
        <span class="hljs-comment">/* ... */</span>
        <span class="hljs-keyword">default</span>: <span class="hljs-keyword">return</span> state;<font></font>
    }<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">const</span> reducer = combineReducers( {
    <span class="hljs-attr">quacking</span>: quackReducer,
    <span class="hljs-attr">distance</span>: distanceReducer<font></font>
} );<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> reducer;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Em um aplicativo grande, a √°rvore de estados consistir√° em pelo menos tr√™s n√≠veis. </font><font style="vertical-align: inherit;">As fun√ß√µes do </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">redutor</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> devem ser as menores poss√≠veis e manipular apenas constru√ß√µes de dados simples. </font><font style="vertical-align: inherit;">A fun√ß√£o </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">combineReducers</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √© tudo o que voc√™ precisa para criar uma estrutura de estado flex√≠vel e sustent√°vel. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Confira o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">exemplo</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> completo do </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">projeto</font></a><font style="vertical-align: inherit;"> e veja como usar o </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">combineReducers corretamente</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , especialmente em arquivos </font></font><code>reducers.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e </font></font><code>store.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">onde estamos </font><i><font style="vertical-align: inherit;">construindo a</font></i><font style="vertical-align: inherit;"> √°rvore de estados.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Seletores</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Junto com o seletor de opera√ß√µes ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">seletor</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) fazem parte do duck da interface p√∫blica. </font><font style="vertical-align: inherit;">A diferen√ßa entre opera√ß√µes e seletores √© semelhante ao padr√£o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CQRS</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As fun√ß√µes do seletor pegam uma fatia do estado do aplicativo e retornam alguns dados com base nele. </font><font style="vertical-align: inherit;">Eles nunca fazem altera√ß√µes no estado do aplicativo.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">checkIfDuckIsInRange</span>(<span class="hljs-params"> duck </span>) </span>{
    <span class="hljs-keyword">return</span> duck.distance &gt; <span class="hljs-number">1000</span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {<font></font>
    checkIfDuckIsInRange<font></font>
};</code></pre><br>
 <h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√çndice</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Este arquivo indica o que ser√° exportado da pasta duck. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√â ele:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exporta a fun√ß√£o </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">redutora</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> do duck por padr√£o.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exporta seletores e opera√ß√µes como exporta√ß√µes registradas.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exporta tipos, se necess√°rio, em outros patos.</font></font></li>
</ul><br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span> reducer <span class="hljs-keyword">from</span> <span class="hljs-string">"./reducers"</span>;<font></font>
<font></font>
<span class="hljs-keyword">export</span> { <span class="hljs-keyword">default</span> <span class="hljs-keyword">as</span> duckSelectors } <span class="hljs-keyword">from</span> <span class="hljs-string">"./selectors"</span>;
<span class="hljs-keyword">export</span> { <span class="hljs-keyword">default</span> <span class="hljs-keyword">as</span> duckOperations } <span class="hljs-keyword">from</span> <span class="hljs-string">"./operations"</span>;
<span class="hljs-keyword">export</span> { <span class="hljs-keyword">default</span> <span class="hljs-keyword">as</span> duckTypes } <span class="hljs-keyword">from</span> <span class="hljs-string">"./types"</span>;<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> reducer;</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Testes</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A vantagem de usar o Redux com a estrutura de patos √© que voc√™ pode escrever testes logo ap√≥s o c√≥digo que deseja testar. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Testar seu c√≥digo no Redux √© bem simples:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span> expect <span class="hljs-keyword">from</span> <span class="hljs-string">"expect.js"</span>;
<span class="hljs-keyword">import</span> reducer <span class="hljs-keyword">from</span> <span class="hljs-string">"./reducers"</span>;
<span class="hljs-keyword">import</span> actions <span class="hljs-keyword">from</span> <span class="hljs-string">"./actions"</span>;<font></font>
<font></font>
describe( <span class="hljs-string">"duck reducer"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> </span>) </span>{<font></font>
    describe( <span class="hljs-string">"quack"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> </span>) </span>{
        <span class="hljs-keyword">const</span> quack = actions.quack( );
        <span class="hljs-keyword">const</span> initialState = <span class="hljs-literal">false</span>;<font></font>
<font></font>
        <span class="hljs-keyword">const</span> result = reducer( initialState, quack );<font></font>
<font></font>
        it( <span class="hljs-string">"should quack"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> </span>) </span>{<font></font>
            expect( result ).to.be( <span class="hljs-literal">true</span> ) ;<font></font>
        } );<font></font>
    } );<font></font>
} );</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dentro deste arquivo, voc√™ pode escrever testes para </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">redutores</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , opera√ß√µes, seletores etc. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eu poderia escrever um artigo inteiro sobre os benef√≠cios do teste de c√≥digo, mas eles j√° s√£o suficientes, ent√£o apenas teste seu c√≥digo!</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Isso √© tudo</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A boa not√≠cia sobre re-ducks √© que voc√™ pode usar o mesmo modelo para todo o seu c√≥digo redux. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">em funcionalidades</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> abordagem de particionamento baseada </font><font style="vertical-align: inherit;">em seu c√≥digo redux ajuda a sua estadia aplica√ß√£o flex√≠vel e escal√°vel √† medida que cresce. </font><font style="vertical-align: inherit;">Uma abordagem de separa√ß√£o baseada em </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fun√ß√µes</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> funcionar√° bem ao criar pequenos componentes comuns a diferentes partes do aplicativo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voc√™ pode dar uma olhada na base de c√≥digo completa do </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">exemplo react-redux- </font></font></i> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqui</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Lembre-se de que o reposit√≥rio est√° funcionando ativamente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como voc√™ organiza seus aplicativos redux? </font><font style="vertical-align: inherit;">Aguardo ansiosamente coment√°rios sobre a abordagem descrita. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vejo voc√™ no </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">curso</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt492612/index.html">Plafon decorativo Leek Celebrity</a></li>
<li><a href="../pt492616/index.html">Packer, Terraform e Ansible: implanta√ß√£o do cluster Kubernetes em uma hora</a></li>
<li><a href="../pt492628/index.html">Intervalo de confian√ßa para o n√∫mero de pacientes com coronav√≠rus (c√°lculo da mortalidade)</a></li>
<li><a href="../pt492632/index.html">Pequenas empresas em quarentena: o p√¢nico √© o inimigo da raz√£o</a></li>
<li><a href="../pt492636/index.html">O que significa ser eficaz?</a></li>
<li><a href="../pt492642/index.html">Crie uma arquitetura escal√°vel e resiliente com microsservi√ßos din√¢micos</a></li>
<li><a href="../pt492652/index.html">Jogo de cartas "Tolo" em dois M5Stack</a></li>
<li><a href="../pt492658/index.html">Eu fui a um controle remoto - lancei um podcast: o que ler para iniciantes - 5 livros comprovados</a></li>
<li><a href="../pt492660/index.html">O mundo inteiro contra o coronav√≠rus. Hist√≥rias da Intel</a></li>
<li><a href="../pt492662/index.html">Como eu transmiti pela primeira vez uma palestra universit√°ria</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>