<!doctype html>
<html class="no-js" lang="zh-CN">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>â™¨ï¸ ğŸ¼ â›“ï¸ æ•™ä¹‰ResultSetMappingä¸ç¤ºä¾‹ ğŸ‘¨ ğŸ˜… â¬‡ï¸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Doctrine ORMä¸ºå¼€å‘äººå‘˜æä¾›äº†è·å–æ•°æ®çš„ä¾¿æ·æ–¹æ³•ã€‚è¿™æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„DQLï¼Œå¯ä»¥ä»¥é¢å‘å¯¹è±¡çš„æ–¹å¼å·¥ä½œï¼Œå®ƒæ˜¯ä¸€ä¸ªæ–¹ä¾¿çš„Query Builderï¼Œä½¿ç”¨èµ·æ¥ç®€å•ç›´è§‚ã€‚å®ƒä»¬æ»¡è¶³äº†å¤§å¤šæ•°éœ€æ±‚ï¼Œä½†æ˜¯æœ‰æ—¶æœ‰å¿…è¦ä½¿ç”¨é’ˆå¯¹ç‰¹å®šDBMSè¿›è¡Œäº†ä¼˜åŒ–æˆ–ç‰¹å®šçš„SQLæŸ¥è¯¢ã€‚è¦ä½¿ç”¨ä»£ç ä¸­çš„æŸ¥è¯¢ç»“æœï¼Œäº†è§£Doctrin...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>æ•™ä¹‰ResultSetMappingä¸ç¤ºä¾‹</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/496166/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Doctrine ORMä¸ºå¼€å‘äººå‘˜æä¾›äº†è·å–æ•°æ®çš„ä¾¿æ·æ–¹æ³•ã€‚</font><font style="vertical-align: inherit;">è¿™æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DQL</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œå¯ä»¥ä»¥é¢å‘å¯¹è±¡çš„æ–¹å¼å·¥ä½œï¼Œå®ƒæ˜¯ä¸€ä¸ªæ–¹ä¾¿çš„</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Query Builder</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œä½¿ç”¨èµ·æ¥ç®€å•ç›´è§‚ã€‚</font><font style="vertical-align: inherit;">å®ƒä»¬æ»¡è¶³äº†å¤§å¤šæ•°éœ€æ±‚ï¼Œä½†æ˜¯æœ‰æ—¶æœ‰å¿…è¦ä½¿ç”¨é’ˆå¯¹ç‰¹å®šDBMSè¿›è¡Œäº†ä¼˜åŒ–æˆ–ç‰¹å®šçš„SQLæŸ¥è¯¢ã€‚</font><font style="vertical-align: inherit;">è¦ä½¿ç”¨ä»£ç ä¸­çš„æŸ¥è¯¢ç»“æœï¼Œäº†è§£Doctrineä¸­çš„æ˜ å°„å¦‚ä½•å·¥ä½œéå¸¸é‡è¦ã€‚</font></font><br>
<br>
<img src="https://habrastorage.org/webt/6v/jr/gx/6vjrgxkxjkih5otk5mussb5_cma.png"><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åŸåˆ™ORMåŸºäº</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ•°æ®æ˜ å°„å™¨</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ¨¡å¼</font><font style="vertical-align: inherit;">ï¼Œè¯¥</font><font style="vertical-align: inherit;">æ¨¡å¼</font><font style="vertical-align: inherit;">å°†å…³ç³»è¡¨ç¤ºä¸å¯¹è±¡éš”ç¦»ï¼Œå¹¶åœ¨å¯¹è±¡ä¹‹é—´è½¬æ¢æ•°æ®ã€‚</font><font style="vertical-align: inherit;">æ­¤è¿‡ç¨‹çš„å…³é”®ç»„æˆéƒ¨åˆ†ä¹‹ä¸€æ˜¯</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ResultSetMapping</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¯¹è±¡</font><font style="vertical-align: inherit;">ï¼Œè¯¥</font><font style="vertical-align: inherit;">å¯¹è±¡</font><font style="vertical-align: inherit;">æè¿°äº†å¦‚ä½•å°†æŸ¥è¯¢ç»“æœä»å…³ç³»æ¨¡å‹è½¬æ¢ä¸ºå¯¹è±¡ã€‚</font><font style="vertical-align: inherit;">Doctrineå§‹ç»ˆä½¿ç”¨ResultSetMappingè¡¨ç¤ºæŸ¥è¯¢ç»“æœï¼Œä½†æ˜¯é€šå¸¸è¯¥å¯¹è±¡æ˜¯åŸºäºæ³¨é‡Šæˆ–yamlï¼Œxmlé…ç½®åˆ›å»ºçš„ï¼Œå®ƒå¯¹å¼€å‘äººå‘˜è€Œè¨€æ˜¯éšè—çš„ï¼Œå› æ­¤å¹¶ä¸æ˜¯æ¯ä¸ªäººéƒ½çŸ¥é“å…¶åŠŸèƒ½ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¯¹äºä½¿ç”¨ResultSetMappingçš„ç¤ºä¾‹ï¼Œæˆ‘å°†ä½¿ç”¨MySQLå’Œ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">employeeç¤ºä¾‹æ•°æ®åº“</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ•°æ®åº“ç»“æ„</font></font></b><div class="spoiler_text"><img src="https://habrastorage.org/webt/oc/qf/zy/ocqfzydztc0ia9euzhyalw8cksa.png"><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è®©æˆ‘ä»¬æè¿°å®ä½“éƒ¨é—¨ï¼Œé›‡å‘˜ï¼Œè–ªæ°´ï¼Œæˆ‘ä»¬å°†ç»§ç»­ä¸ä¹‹åˆä½œã€‚ </font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å•ä½</font></font></b><div class="spoiler_text"><pre><code class="php hljs"><span class="hljs-meta">&lt;?php</span><font></font>
<font></font>
<span class="hljs-keyword">namespace</span> <span class="hljs-title">App</span>\<span class="hljs-title">Entity</span>;<font></font>
<font></font>
<span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">ORM</span>\<span class="hljs-title">Mapping</span> <span class="hljs-title">as</span> <span class="hljs-title">ORM</span>;<font></font>
<font></font>
<span class="hljs-comment">/**
 * Departments
 *
 * <span class="hljs-doctag">@ORM</span>\Table(name="departments", uniqueConstraints={<span class="hljs-doctag">@ORM</span>\UniqueConstraint(name="dept_name", columns={"dept_name"})})
 * <span class="hljs-doctag">@ORM</span>\Entity
 */</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Department</span>
</span>{
    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@var</span> string
     *
     * <span class="hljs-doctag">@ORM</span>\Column(name="dept_no", type="string", length=4, nullable=false, options={"fixed"=true})
     * <span class="hljs-doctag">@ORM</span>\Id
     * <span class="hljs-doctag">@ORM</span>\GeneratedValue(strategy="IDENTITY")
     */</span>
    <span class="hljs-keyword">private</span> $deptNo;<font></font>
<font></font>
    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@var</span> string
     *
     * <span class="hljs-doctag">@ORM</span>\Column(name="dept_name", type="string", length=40, nullable=false)
     */</span>
    <span class="hljs-keyword">private</span> $deptName;<font></font>
<font></font>
    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@var</span> \Doctrine\Common\Collections\Collection
     *
     * <span class="hljs-doctag">@ORM</span>\ManyToMany(targetEntity="Employee", mappedBy="deptNo")
     */</span>
    <span class="hljs-keyword">private</span> $empNo;<font></font>
<font></font>
    <span class="hljs-comment">/**
     * Constructor
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span>(<span class="hljs-params"></span>)
    </span>{
        <span class="hljs-keyword">$this</span>-&gt;empNo = <span class="hljs-keyword">new</span> \Doctrine\Common\Collections\ArrayCollection();<font></font>
    }<font></font>
}<font></font>
<font></font>
</code></pre><br>
</div></div><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é›‡å‘˜</font></font></b><div class="spoiler_text"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&lt;ï¼Ÿphp </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åç§°ç©ºé—´App \ Entity; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä½¿ç”¨Doctrine \ ORM \ Mappingä½œä¸ºORMï¼›</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
/ ** </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 *å‘˜å·¥</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 * </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 *</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ORM</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">\è¡¨ï¼ˆåç§°=â€œå‘˜å·¥â€ï¼‰</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 *</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ORM</font></font></a>\Entity<br>
 */<br>
class Employee<br>
{<br>
 /**<br>
 * <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">var</a> int<br>
 *<br>
 * <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">ORM</a>\Column(name=Â«emp_noÂ», type=Â«integerÂ», nullable=false)<br>
 * <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">ORM</a>\Id<br>
 * <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">ORM</a>\GeneratedValue(strategy=Â«IDENTITYÂ»)<br>
 */<br>
 private $empNo;<br>
<br>
/**<br>
 * <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">var</a> \DateTime<br>
 *<br>
 * <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">ORM</a>\Column(name=Â«birth_dateÂ», type=Â«dateÂ», nullable=false)<br>
 */<br>
 private $birthDate;<br>
<br>
/**<br>
 * <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">var</a> string<br>
 *<br>
 * <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">ORM</a>\Column(name=Â«first_nameÂ», type=Â«stringÂ», length=14, nullable=false)<br>
 */<br>
 private $firstName;<br>
<br>
/**<br>
 * <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">var</a> string<br>
 *<br>
 * <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">ORM</a>\Column(name=Â«last_nameÂ», type=Â«stringÂ», length=16, nullable=false)<br>
 */<br>
 private $lastName;<br>
<br>
/**<br>
 * <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">var</a> string<br>
 *<br>
 * <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">ORM</a>\Column(name=Â«genderÂ», type=Â«stringÂ», length=0, nullable=false)<br>
 */<br>
 private $gender;<br>
<br>
/**<br>
 * <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">var</a> \DateTime<br>
 *<br>
 * <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">ORM</a>\Column(name=Â«hire_dateÂ», type=Â«dateÂ», nullable=false)<br>
 */<br>
 private $hireDate;<br>
<br>
/**<br>
 * <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">var</a> \Doctrine\Common\Collections\Collection<br>
 *<br>
 * <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">ORM</a>\ManyToMany(targetEntity=Â«DepartmentÂ», inversedBy=Â«empNoÂ»)<br>
 * <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">ORM</a>\JoinTable(name=Â«dept_managerÂ»,<br>
 * joinColumns={<br>
 * <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">ORM</a>\JoinColumn(name=Â«emp_noÂ», referencedColumnName=Â«emp_noÂ»)<br>
 * },<br>
 * inverseJoinColumns={<br>
 * <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">ORM</a>\JoinColumn(name=Â«dept_noÂ», referencedColumnName=Â«dept_noÂ»)<br>
 * }<br>
 * )<br>
 */<br>
 private $deptNo;<br>
<br>
/**<br>
 * Constructor<br>
 */<br>
 public function __construct()<br>
 {<br>
 $this-&gt;deptNo = new \Doctrine\Common\Collections\ArrayCollection();<br>
 }<br>
<br>
}<br>
<br>
</div></div><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è–ªæ°´</font></font></b><div class="spoiler_text">&lt;?php<br>
<br>
namespace App\Entity;<br>
<br>
use Doctrine\ORM\Mapping as ORM;<br>
<br>
/**<br>
 * Salaries<br>
 *<br>
 * <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">ORM</a>\Table(name=Â«salariesÂ», indexes={@ORM\Index(name=Â«IDX_E6EEB84BA2F57F47Â», columns={Â«emp_noÂ»})})<br>
 * <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">ORM</a>\Entity<br>
 */<br>
class Salary<br>
{<br>
 /**<br>
 * <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">var</a> \DateTime<br>
 *<br>
 * <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">ORM</a>\Column(name=Â«from_dateÂ», type=Â«dateÂ», nullable=false)<br>
 * <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">ORM</a>\Id<br>
 * <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">ORM</a>\GeneratedValue(strategy=Â«NONEÂ»)<br>
 */<br>
 private $fromDate;<br>
<br>
/**<br>
 * <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">var</a> int<br>
 *<br>
 * <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">ORM</a>\Column(name=Â«salaryÂ», type=Â«integerÂ», nullable=false)<br>
 */<br>
 private $salary;<br>
<br>
/**<br>
 * <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">var</a> \DateTime<br>
 *<br>
 * <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">ORM</a>\Column(name=Â«to_dateÂ», type=Â«dateÂ», nullable=false)<br>
 */<br>
 private $toDate;<br>
<br>
/**<br>
 * <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">var</a> Employee<br>
 *<br>
 * <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">ORM</a>\Id<br>
 * <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">ORM</a>\OneToOne(targetEntity=Â«EmployeeÂ»)<br>
 * <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">ORM</a>\JoinColumns({<br>
 * <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">ORM</a>\JoinColumn(name=Â«emp_noÂ», referencedColumnName=Â«emp_noÂ»)<br>
 * })<br>
 */<br>
 private $empNo;<br>
<br>
/**<br>
 * <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">var</a> Employee<br>
 *<br>
 */<br>
 private $employee;<br>
<br>
}<br>
<br>
</div></div><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å®ä½“ç»“æœ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è®©æˆ‘ä»¬ä»ä¸€ä¸ªç®€å•çš„å¼€å§‹ï¼Œä»åŸºç¡€ä¸­é€‰æ‹©æ‰€æœ‰éƒ¨é—¨å¹¶å°†å®ƒä»¬æŠ•å½±åˆ°éƒ¨é—¨ä¸Šï¼š</font></font><br>
<br>
<pre><code class="php hljs">        $rsm = <span class="hljs-keyword">new</span> Query\ResultSetMapping();<font></font>
        $rsm-&gt;addEntityResult(Department::class, <span class="hljs-string">'d'</span>);<font></font>
        $rsm-&gt;addFieldResult(<span class="hljs-string">'d'</span>, <span class="hljs-string">'dept_no'</span>, <span class="hljs-string">'deptNo'</span>);<font></font>
        $rsm-&gt;addFieldResult(<span class="hljs-string">'d'</span>, <span class="hljs-string">'dept_name'</span>, <span class="hljs-string">'deptName'</span>);<font></font>
<font></font>
        $sql = <span class="hljs-string">'SELECT * FROM departments'</span>;<font></font>
<font></font>
        $query = <span class="hljs-keyword">$this</span>-&gt;entityManager-&gt;createNativeQuery($sql, $rsm);<font></font>
<font></font>
        $result = $query-&gt;getResult();<font></font>
</code></pre><br>
<br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">addEntityResult</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
æ–¹æ³•</font><font style="vertical-align: inherit;">æŒ‡ç¤ºå°†æ ·æœ¬æŠ•å½±åˆ°å“ªä¸ªç±»ä¸Šï¼Œè€Œ</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">addFieldResult</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ–¹æ³•</font><font style="vertical-align: inherit;">æŒ‡ç¤ºæ ·æœ¬åˆ—ä¸å¯¹è±¡å­—æ®µä¹‹é—´çš„æ˜ å°„ã€‚</font><font style="vertical-align: inherit;">ä¼ é€’ç»™</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">createNativeQuery</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ–¹æ³•çš„SQLæŸ¥è¯¢</font><font style="vertical-align: inherit;">å°†ä»¥è¿™ç§å½¢å¼ä¼ è¾“åˆ°æ•°æ®åº“ï¼ŒDoctrineä¸ä¼šä»¥ä»»ä½•æ–¹å¼å¯¹å…¶è¿›è¡Œä¿®æ”¹ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å€¼å¾—è®°ä½çš„æ˜¯ï¼ŒEntityå¿…é¡»å…·æœ‰å”¯ä¸€çš„æ ‡è¯†ç¬¦ï¼Œè¯¥æ ‡è¯†ç¬¦å¿…é¡»åŒ…å«åœ¨fieldResultä¸­ã€‚</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åˆå¹¶å®ä½“ç»“æœ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘ä»¬é€‰æ‹©2000å¹´åˆä»¥åé›‡ç”¨å‘˜å·¥çš„éƒ¨é—¨ä»¥åŠè¿™äº›å‘˜å·¥ã€‚</font></font><br>
<br>
<pre><code class="php hljs">        $rsm = <span class="hljs-keyword">new</span> Query\ResultSetMapping();<font></font>
        $rsm-&gt;addEntityResult(Department::class, <span class="hljs-string">'d'</span>);<font></font>
        $rsm-&gt;addFieldResult(<span class="hljs-string">'d'</span>, <span class="hljs-string">'dept_no'</span>, <span class="hljs-string">'deptNo'</span>);<font></font>
        $rsm-&gt;addFieldResult(<span class="hljs-string">'d'</span>, <span class="hljs-string">'dept_name'</span>, <span class="hljs-string">'deptName'</span>);<font></font>
<font></font>
        $rsm-&gt;addJoinedEntityResult(Employee::class, <span class="hljs-string">'e'</span>, <span class="hljs-string">'d'</span>, <span class="hljs-string">'empNo'</span>);<font></font>
        $rsm-&gt;addFieldResult(<span class="hljs-string">'e'</span>, <span class="hljs-string">'first_name'</span>, <span class="hljs-string">'firstName'</span>);<font></font>
        $rsm-&gt;addFieldResult(<span class="hljs-string">'e'</span>, <span class="hljs-string">'last_name'</span>, <span class="hljs-string">'lastName'</span>);<font></font>
        $rsm-&gt;addFieldResult(<span class="hljs-string">'e'</span>, <span class="hljs-string">'birth_date'</span>, <span class="hljs-string">'birthDate'</span>);<font></font>
        $rsm-&gt;addFieldResult(<span class="hljs-string">'e'</span>, <span class="hljs-string">'gender'</span>, <span class="hljs-string">'gender'</span>);<font></font>
        $rsm-&gt;addFieldResult(<span class="hljs-string">'e'</span>, <span class="hljs-string">'hire_date'</span>, <span class="hljs-string">'hireDate'</span>);<font></font>
<font></font>
        $sql = <span class="hljs-string">"
        SELECT *
            FROM departments d
            JOIN dept_emp ON d.dept_no = dept_emp.dept_no
            JOIN employees e on dept_emp.emp_no = e.emp_no
        WHERE e.hire_date &gt; DATE ('1999-12-31')
       "</span>;<font></font>
<font></font>
        $query = <span class="hljs-keyword">$this</span>-&gt;entityManager-&gt;createNativeQuery($sql, $rsm);<font></font>
<font></font>
        $result = $query-&gt;getResult();<font></font>
</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ResultSetMappingBuilder</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¦‚æ‚¨æ‰€è§ï¼Œç›´æ¥ä½¿ç”¨ResultSetMappingå¯¹è±¡æœ‰ç‚¹å¤æ‚ï¼Œå¹¶ä¸”å®ƒéå¸¸è¯¦ç»†åœ°æè¿°äº†é€‰æ‹©å¯¹è±¡ä¸å¯¹è±¡çš„æ¯”è¾ƒã€‚æ­¤å¤–ï¼ŒDoctrineæä¾›äº†æ›´æ–¹ä¾¿çš„å·¥å…·</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ResultSetMappingBuilder</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œå®ƒæ˜¯RSMçš„åŒ…è£…ï¼Œå¹¶å¢åŠ äº†ç”¨äºæ˜ å°„çš„æ›´æ–¹ä¾¿çš„æ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œ</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">generateSelectClause</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ–¹æ³•</font><font style="vertical-align: inherit;">ï¼Œå®ƒå…è®¸æ‚¨ä¸ºæŸ¥è¯¢çš„SELECTéƒ¨åˆ†â€‹â€‹åˆ›å»ºä¸€ä¸ªå‚æ•°ï¼Œå…¶ä¸­åŒ…å«é€‰æ‹©æ‰€éœ€å­—æ®µçš„æè¿°ã€‚å¯ä»¥ä»¥æ›´ç®€å•çš„å½¢å¼é‡å†™å…ˆå‰çš„è¯·æ±‚ã€‚</font></font><br>
<br>
<pre><code class="php hljs">        $sql = <span class="hljs-string">"
        SELECT {$rsm-&gt;generateSelectClause()}
            FROM departments d
            JOIN dept_emp ON d.dept_no = dept_emp.dept_no
            JOIN employees e on dept_emp.emp_no = e.emp_no
        WHERE e.hire_date &gt; DATE ('1999-12-31')
       "</span>;
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœä¸æŒ‡å®šåˆ›å»ºå¯¹è±¡çš„æ‰€æœ‰å­—æ®µï¼ŒDoctrineå°†è¿”å›</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">éƒ¨åˆ†å¯¹è±¡</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹å¯ä»¥åˆç†ä½¿ç”¨å®ƒï¼Œä½†æ˜¯</font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å®ƒä»¬çš„è¡Œä¸ºå¾ˆå±é™©ï¼Œå› æ­¤ä¸å»ºè®®è¿™æ ·åš</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">ç›¸åï¼Œä½¿ç”¨ResultSetMappingBuilderï¼Œæ‚¨æ— éœ€æŒ‡å®šæœ€ç»ˆç±»çš„æ¯ä¸ªå­—æ®µï¼Œè€Œå¯ä»¥ä½¿ç”¨é€šè¿‡æ³¨é‡Šï¼ˆyamlï¼Œxmlé…ç½®ï¼‰æè¿°çš„å®ä½“ã€‚</font><font style="vertical-align: inherit;">è€ƒè™‘åˆ°ä»¥ä¸‹æ–¹æ³•ï¼Œæˆ‘ä»¬ä»ä¸Šä¸€ä¸ªè¯·æ±‚é‡å†™äº†æˆ‘ä»¬çš„RSMï¼š</font></font><br>
<br>
<pre><code class="php hljs">        $rsm = <span class="hljs-keyword">new</span> Query\ResultSetMappingBuilder(<span class="hljs-keyword">$this</span>-&gt;entityManager);<font></font>
        $rsm-&gt;addRootEntityFromClassMetadata(Department::class, <span class="hljs-string">'d'</span>);<font></font>
        $rsm-&gt;addJoinedEntityFromClassMetadata(Employee::class, <span class="hljs-string">'e'</span>, <span class="hljs-string">'d'</span>, <span class="hljs-string">'empNo'</span>);
</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ ‡é‡ç»“æœ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ‰€æè¿°çš„å®ä½“çš„å¹¿æ³›ä½¿ç”¨æ˜¯ä¸åˆç†çš„ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´æ€§èƒ½é—®é¢˜ï¼Œå› ä¸ºDoctrineéœ€è¦åˆ›å»ºè®¸å¤šå°†æ¥å°†æ— æ³•å®Œå…¨ä½¿ç”¨çš„å¯¹è±¡ã€‚</font><font style="vertical-align: inherit;">å¯¹äºæ­¤ç±»æƒ…å†µï¼Œæä¾›äº†æ ‡é‡ç»“æœæ˜ å°„å·¥å…·</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">addScalarResult</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é€‰æ‹©æ¯ä¸ªéƒ¨é—¨çš„å¹³å‡å·¥èµ„ï¼š</font></font><br>
<br>
<pre><code class="php hljs">        $rsm = <span class="hljs-keyword">new</span> ResultSetMappingBuilder(<span class="hljs-keyword">$this</span>-&gt;entityManager);<font></font>
<font></font>
        $rsm-&gt;addScalarResult(<span class="hljs-string">'dept_name'</span>, <span class="hljs-string">'department'</span>, <span class="hljs-string">'string'</span>);<font></font>
        $rsm-&gt;addScalarResult(<span class="hljs-string">'avg_salary'</span>, <span class="hljs-string">'salary'</span>, <span class="hljs-string">'integer'</span>);<font></font>
<font></font>
        $sql = <span class="hljs-string">"
            SELECT d.dept_name, AVG(s.salary) AS avg_salary
            FROM departments d
            JOIN dept_emp de on d.dept_no = de.dept_no
            JOIN employees e on de.emp_no = e.emp_no
            JOIN salaries s on e.emp_no = s.emp_no
            GROUP BY d.dept_name
        "</span>;<font></font>
<font></font>
        $query = <span class="hljs-keyword">$this</span>-&gt;entityManager-&gt;createNativeQuery($sql, $rsm);<font></font>
<font></font>
        $result = $query-&gt;getResult();<font></font>
</code></pre><br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">addScalarResult</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°</font><font style="vertical-align: inherit;">æ˜¯ç»“æœé›†ä¸­åˆ—çš„åç§°ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯Doctrineå°†è¿”å›çš„ç»“æœæ•°ç»„çš„é”®ã€‚</font><font style="vertical-align: inherit;">ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯ç»“æœå€¼çš„ç±»å‹ã€‚</font><font style="vertical-align: inherit;">è¿”å›å€¼å°†å§‹ç»ˆæ˜¯ä¸€ä¸ªæ•°ç»„æ•°ç»„ã€‚</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DTOæ˜ å°„</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä½†æ˜¯ä½¿ç”¨æ•°ç»„ï¼Œç‰¹åˆ«æ˜¯å½“å®ƒä»¬å…·æœ‰å¤æ‚çš„ç»“æ„æ—¶ï¼Œå¹¶ä¸æ˜¯å¾ˆæ–¹ä¾¿ã€‚</font><font style="vertical-align: inherit;">æ‚¨éœ€è¦ç‰¢è®°é”®çš„åç§°ï¼Œå­—æ®µç±»å‹ã€‚</font><font style="vertical-align: inherit;">æ•™ä¹‰DQLå¯ä»¥åœ¨é€‰æ‹©ç»“æœä¸­ä½¿ç”¨ç®€å•çš„DTOï¼Œä¾‹å¦‚ï¼š</font></font><br>
<br>
<pre><code class="php hljs">    SELECT <span class="hljs-keyword">NEW</span> DepartmentSalary(d.dept_no, avg_salary) <span class="hljs-keyword">FROM</span> â€¦</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åŸç”ŸæŸ¥è¯¢å’ŒRSMå‘¢ï¼Ÿ</font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Doctrineæ²¡æœ‰æä¾›ç”¨äºåˆ›å»ºæ–°DTOçš„æ–‡æ¡£åŒ–åŠŸèƒ½</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œä½†æ˜¯é€šè¿‡ä½¿ç”¨</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">newObjectMappings</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å±æ€§</font><i><font style="vertical-align: inherit;">ï¼Œ</font></i><font style="vertical-align: inherit;">æˆ‘ä»¬å¯ä»¥æŒ‡å®šè¦å°†é€‰æ‹©ç»“æœæ˜ å°„åˆ°çš„å¯¹è±¡ã€‚</font><font style="vertical-align: inherit;">ä¸Entityä¸åŒï¼Œè¿™äº›å¯¹è±¡å°†ä¸å—UnitOfWorkçš„æ§åˆ¶ï¼Œå¹¶ä¸”ä¸éœ€è¦ä½äºé…ç½®ä¸­æŒ‡å®šçš„åç§°ç©ºé—´ä¸­ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¡¥å……ä¸Šä¸€ä¸ªç¤ºä¾‹ä¸­çš„RSMï¼š</font></font><br>
<br>
<pre><code class="php hljs">        $rsm-&gt;newObjectMappings[<span class="hljs-string">'dept_name'</span>] = [
            <span class="hljs-string">'className'</span> =&gt; DepartmentSalary::class,
            <span class="hljs-string">'argIndex'</span> =&gt; <span class="hljs-number">0</span>,
            <span class="hljs-string">'objIndex'</span> =&gt; <span class="hljs-number">0</span>,<font></font>
        ];<font></font>
<font></font>
        $rsm-&gt;newObjectMappings[<span class="hljs-string">'avg_salary'</span>] = [
            <span class="hljs-string">'className'</span> =&gt; DepartmentSalary::class,
            <span class="hljs-string">'argIndex'</span> =&gt; <span class="hljs-number">1</span>,
            <span class="hljs-string">'objIndex'</span> =&gt; <span class="hljs-number">0</span>,<font></font>
        ];<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
newObjectMappingså­—æ®µçš„æ•°ç»„ä¸­çš„é”®æŒ‡å‘ç»“æœåˆ—ï¼Œä½†å…¶å€¼æ˜¯å¦ä¸€ä¸ªæ•°ç»„ï¼Œè¯¥æ•°ç»„æè¿°äº†è¦åˆ›å»ºçš„å¯¹è±¡ã€‚</font><font style="vertical-align: inherit;">å¦‚æœè¦ä»é€‰æ‹©çš„æ¯ä¸€è¡Œä¸­è·å–å¤šä¸ªå¯¹è±¡ï¼Œåˆ™</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">className</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é”®</font><font style="vertical-align: inherit;">å®šä¹‰æ–°å¯¹è±¡çš„ç±»åï¼Œ</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">argIndex-</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¯¹è±¡</font><font style="vertical-align: inherit;">çš„æ„é€ å‡½æ•°ä¸­å‚æ•°çš„é¡ºåºï¼Œ</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">objIndex-</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¯¹è±¡</font><font style="vertical-align: inherit;">çš„é¡ºåºã€‚</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å…ƒç»“æœ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å…ƒç»“æœç”¨äºè·å–åˆ—çš„å…ƒæ•°æ®ï¼Œä¾‹å¦‚å¤–é”®æˆ–é‰´åˆ«ç¬¦åˆ—ã€‚</font><font style="vertical-align: inherit;">ä¸å¹¸çš„æ˜¯ï¼Œæˆ‘æ— æ³•åŸºäºemployeesæ•°æ®åº“æä¾›ä¸€ä¸ªç¤ºä¾‹ï¼Œå› æ­¤æˆ‘ä¸å¾—ä¸å°†è‡ªå·±å±€é™äº</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ–‡æ¡£ä¸­</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">çš„æè¿°å’Œç¤ºä¾‹</font><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<pre><code class="php hljs">        $rsm = <span class="hljs-keyword">new</span> ResultSetMapping;<font></font>
        $rsm-&gt;addEntityResult(<span class="hljs-string">'User'</span>, <span class="hljs-string">'u'</span>);<font></font>
        $rsm-&gt;addFieldResult(<span class="hljs-string">'u'</span>, <span class="hljs-string">'id'</span>, <span class="hljs-string">'id'</span>);<font></font>
        $rsm-&gt;addFieldResult(<span class="hljs-string">'u'</span>, <span class="hljs-string">'name'</span>, <span class="hljs-string">'name'</span>);<font></font>
        $rsm-&gt;addMetaResult(<span class="hljs-string">'u'</span>, <span class="hljs-string">'address_id'</span>, <span class="hljs-string">'address_id'</span>);<font></font>
<font></font>
        $query = <span class="hljs-keyword">$this</span>-&gt;_em-&gt;createNativeQuery(<span class="hljs-string">'SELECT id, name, address_id FROM users WHERE name = ?'</span>, $rsm);
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½¿ç”¨</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">addMetaResult</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ–¹æ³•</font><i><font style="vertical-align: inherit;">ï¼Œ</font></i><font style="vertical-align: inherit;">æˆ‘ä»¬å‘Šè¯‰</font><i><font style="vertical-align: inherit;">Doctine</font></i><font style="vertical-align: inherit;">ç”¨æˆ·è¡¨åœ¨åœ°å€ä¸Šæœ‰ä¸€ä¸ªå¤–é”®ï¼Œä½†æ˜¯æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªä»£ç†å¯¹è±¡æ¥å­˜å‚¨å®ä½“æ ‡è¯†ç¬¦ï¼Œå¹¶åœ¨è®¿é—®æ—¶åŠ è½½ï¼Œè€Œä¸æ˜¯å°†å…³è”åŠ è½½åˆ°å†…å­˜ä¸­ï¼ˆæ€¥äºåŠ è½½ï¼‰ã€‚å¥¹ä»æ•°æ®åº“ä¸­ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç»å…¸çš„å…³ç³»æ•°æ®åº“ä¸æä¾›è¡¨ç»§æ‰¿æœºåˆ¶ï¼Œè€Œç»§æ‰¿åœ¨å¯¹è±¡æ¨¡å‹ä¸­å´å¾ˆæ™®éã€‚</font><font style="vertical-align: inherit;">æ ¹æ®æŸäº›å±æ€§ï¼Œæˆ‘ä»¬çš„é€‰æ‹©ç»“æœå¯ä»¥æŠ•å½±åˆ°ç±»çš„å±‚æ¬¡ç»“æ„ä¸Šï¼Œè¯¥å±æ€§æ˜¯ç»“æœé€‰æ‹©ä¸­åˆ—&lt;discriminator_column&gt;çš„å€¼ã€‚</font><font style="vertical-align: inherit;">åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">setDiscriminatorColumn</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ–¹æ³•å‘Šè¯‰RSM Doctrineå“ªä¸ªåˆ—åº”â€‹â€‹ç¡®å®šå®ä¾‹åŒ–çš„ç±»</font><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç»“è®º</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Doctrineå…·æœ‰éå¸¸ä¸°å¯Œçš„å„ç§åŠŸèƒ½ï¼ŒåŒ…æ‹¬å¹¶éæ‰€æœ‰å¼€å‘äººå‘˜éƒ½çŸ¥é“çš„åŠŸèƒ½ã€‚</font><font style="vertical-align: inherit;">åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘è¯•å›¾ä»‹ç»å¯¹ORMå…³é”®ç»„ä»¶ä¹‹ä¸€çš„æ“ä½œ-ResultSetMappingä¸æœ¬æœºæŸ¥è¯¢çš„ç»“åˆçš„ç†è§£ã€‚</font><font style="vertical-align: inherit;">åœ¨ä¿æŒç¤ºä¾‹çš„å¯ç”¨æ€§å’Œå¯ç†è§£æ€§çš„åŒæ—¶ï¼Œä½¿ç”¨çœŸæ­£å¤æ‚ä¸”ç‰¹å®šäºå¹³å°çš„æŸ¥è¯¢å°†æ˜¯ä¸€é¡¹è‰°å·¨çš„ä»»åŠ¡ï¼Œå› ä¸ºé‡ç‚¹åœ¨äºç†è§£ResultSetMappingçš„å·¥ä½œã€‚</font><font style="vertical-align: inherit;">ä¹‹åï¼Œæ‚¨å¯ä»¥åœ¨éå¸¸å¤æ‚çš„æ•°æ®åº“æŸ¥è¯¢ä¸­ä½¿ç”¨å®ƒã€‚</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN496154/index.html">å®¢æˆ·æœåŠ¡è‡ªåŠ¨åŒ–ï¼šDeepPavlovçš„ç«¯åˆ°ç«¯è§£å†³æ–¹æ¡ˆ</a></li>
<li><a href="../zh-CN496156/index.html">æµé‡åˆ†æç³»ç»Ÿå¦‚ä½•é€šè¿‡MITER ATTï¼†CKæ£€æµ‹é»‘å®¢ç­–ç•¥</a></li>
<li><a href="../zh-CN496160/index.html">æˆ‘ä»¬ç ”ç©¶äº†Mediastreamer2 VoIPå¼•æ“ã€‚ç¬¬5éƒ¨åˆ†</a></li>
<li><a href="../zh-CN496162/index.html">Terraformï¼ŒMonoå­˜å‚¨åº“å’Œåˆè§„æ€§ä½œä¸ºä»£ç </a></li>
<li><a href="../zh-CN496164/index.html">åœ¨å±æœºæœŸé—´ï¼Œæˆ‘å¤±ä¸šäº†ï¼Œç°åœ¨æˆ‘æ‹…å¿ƒç¼–å†™èªæ˜çš„ä»£ç ï¼Œä»¥å…å“åˆ°æœ€æ–°çš„èŒä½ç©ºç¼º</a></li>
<li><a href="../zh-CN496170/index.html">æˆ‘ä»¬æ³¨å®šäº†ç¬¬ä¸€å// // Udalenkaé™·å…¥å±æœºå’Œç‹¬åˆ›æ€§çš„æ­»äº¡</a></li>
<li><a href="../zh-CN496174/index.html">å¯¹åˆ†æï¼Œäº§å“å›¢é˜Ÿï¼Œäºšé©¬é€Šï¼Œä»¥è‰²åˆ—ï¼Œæ–°åŠ å¡ï¼Œè¿œç¨‹å·¥ä½œç­‰çš„éœ€æ±‚å¢åŠ -è®¨è®ºäº†å¾ˆå¤šã€‚</a></li>
<li><a href="../zh-CN496176/index.html">å¤§å‹è™šæ‹Ÿä¼šè®®ï¼šä¿æŠ¤ç°ä»£æ•°å­—å…¬å¸çš„æ•°æ®çš„çœŸå®ç»éªŒ</a></li>
<li><a href="../zh-CN496178/index.html">æ–¯å¨å¤«ç‰¹5.2ã€‚æ‰€æœ‰å˜æ›´æ¦‚è¿°</a></li>
<li><a href="../zh-CN496180/index.html">ç…§é¡¾é’æ˜¥çš„é˜´å½±</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>