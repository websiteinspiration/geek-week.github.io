<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üé∂ ü¶Ö ‚òÆÔ∏è Vanya goes to grandmother or dynamic JavaScript adaptive üìú üëî ü§õüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="While working on the adaptive, we now and then have to change the appearance of objects. Usually it‚Äôs enough for us to register several media queries ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Vanya goes to grandmother or dynamic JavaScript adaptive</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/502028/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">While working on the adaptive, we now and then have to change the appearance of objects. </font><font style="vertical-align: inherit;">Usually it‚Äôs enough for us to register several media queries and we can do it. </font><font style="vertical-align: inherit;">In some cases, we need to change the order of the elements, and here, for example, the order property from Flexbox or Grid technology comes to the rescue. </font><font style="vertical-align: inherit;">But there are times when this does not help us. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The idea of ‚Äã‚Äãdynamic adaptive is designed to simplify the life of a layout designer and quickly adapt complex layout elements.</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/QKuMr575vlQ" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For example, look at this case. Here we have the following structure: heading and some text. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/jd/hs/i8/jdhsi8bq-3u7lszevxzxd9mmgxq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But with a certain permission, the designer indicated that the text that was under the heading should now be in a completely different place in the structure. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/cy/e4/u6/cye4u6m9mmoop_qysyp4mzfxinq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Typically, layout designers solved this problem in one of two ways. I‚Äôll quickly remind you of them. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I will show it as an example of a life situation when the city boy Vanya really wanted to come to his grandmother for the summer. But not because he missed his grandmother, but because he wanted to go to the river with the girl Olya. And he wanted to do this at a resolution below 992px. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/x9/ev/nj/x9evnjtlgrzdje2vpbxvajitcw8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
How will we solve the problem of Vani?</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We can do the following: Hide Vanya in the city at this permission, and show Vanya on the river with Olya. But for this we need to make a clone of Vani. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Here is the city (original) Vanya. But Vanya, in fact, on the river already with Olya. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/cq/34/hu/cq34hu8vfdlpqmc5nqsniftrdxw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But initially this river Vanya is hidden in CSS. We write a media query with the parameters we need, in which we show the new Vanya and hide the old Vanya (city). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/2t/i0/id/2ti0idhaphwbdm9kelpifg0ndec.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Everything worked out for us - at the permission we need, Vanya finds himself under Olya. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vv/hz/i6/vvhzi6fnhiti6hed2t5ojkq42wg.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Accordingly, when the resolution is greater than 992px, Vanya immediately returns to the city. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vd/s1/q7/vds1q743_a221midfog7xtlodtq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And everything seems to be okay, Vanya with Olya when it is needed. You can disperse ...</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But not so simple. In fact, some customers are very opposed to duplicate content. This is caused by some problems with SEO, and, in principle, the creation of unnecessary blocks. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now we are lucky, in our situation Vanya is kind of small, and Vanya happens to be very large, massive, pumped up guys, which respectively require a lot of lines of code. And in this situation, including customers, they ask you to move the DOM object using JavaScript. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This can be done approximately as follows. To begin with, I have to remove Vanya, who is a clone, in HTML and leave Vanya original. In CSS, comment out all the lines that we originally had for another wrapping option. And add here such a simple JS code.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">// </span>
<span class="hljs-keyword">const</span> parent_original = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.content__blocks_city'</span>);
<span class="hljs-keyword">const</span> parent = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.content__column_river'</span>);
<span class="hljs-keyword">const</span> item = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.content__block_item'</span>);<font></font>
<font></font>
<span class="hljs-comment">//   </span>
<span class="hljs-built_in">window</span>.addEventListener(<span class="hljs-string">'resize'</span>, move);<font></font>
<font></font>
<span class="hljs-comment">//</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">move</span>(<span class="hljs-params"></span>)</span>{
	<span class="hljs-keyword">const</span> viewport_width = <span class="hljs-built_in">Math</span>.max(<span class="hljs-built_in">document</span>.documentElement.clientWidth, <span class="hljs-built_in">window</span>.innerWidth || <span class="hljs-number">0</span>);
	<span class="hljs-keyword">if</span> (viewport_width &lt;= <span class="hljs-number">992</span>) {
		<span class="hljs-keyword">if</span> (!item.classList.contains(<span class="hljs-string">'done'</span>)) {<font></font>
			parent.insertBefore(item, parent.children[<span class="hljs-number">2</span>]);<font></font>
			item.classList.add(<span class="hljs-string">'done'</span>);<font></font>
		}<font></font>
	} <span class="hljs-keyword">else</span> {
		<span class="hljs-keyword">if</span> (item.classList.contains(<span class="hljs-string">'done'</span>)) {<font></font>
			parent_original.insertBefore(item, parent_original.children[<span class="hljs-number">2</span>]);<font></font>
			item.classList.remove(<span class="hljs-string">'done'</span>);<font></font>
		}<font></font>
	}<font></font>
}<font></font>
<font></font>
<span class="hljs-comment">// </span><font></font>
move();<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
First, we declare the variables where we ‚Äúdial‚Äù to the city, river and original Vani. Next, we begin to ‚Äúlisten‚Äù to the width of the screen in order to catch the moment when we need to move Vanya. After we get the width and set the condition in which we check that the width is less than or equal to 992px. When moving Vanya, we assign a class to him, so we check for the presence of a class so that this movement does not happen all the time (Vanya moved once and that‚Äôs it, you don‚Äôt need to constantly transfer it). And we perform the transfer itself inside the parent (to the river), here we indicate the position in the DOM tree where we need to move Vanya (under Olya, above Olya). And when we have a resolution greater than 992px, we must return Vanya to the place. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We try and see that our Vanya again moved under Olya.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And everything is OK: we don‚Äôt have any duplicate content, everything works well, the customer is satisfied, everyone is happy. But this method has a number of problems that are associated with the writing of js-code itself. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We understand that for a single case this is normal - we wrote well. But I got the idea to automate this process. Suppose I need to throw 5-6 completely different elements on the page. For this task, writing a js code using this method is quite laborious and time consuming. And the second point, which, naturally, has strained many of you, is the load on the user's PC, because here we are constantly ‚Äúlistening‚Äù to the width of the screen. I also wanted to optimize this moment. It can be optimized in this code as well, but since I wrote an automation </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tool</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> that I called </font><b><font style="vertical-align: inherit;">‚Äúdynamic adaptive‚Äù</font></b><font style="vertical-align: inherit;"> , I optimized there.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now I will show you how it all works. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Having connected my dynamic adaptive, I only need to work with the HTML file and there is no need to access JavaScript. To do this, I need to write the data-da attribute (da is short for dynamic adaptive) and specify three parameters in quotation marks, separated by commas. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The first parameter is where. I take a unique class of the object where I want to move Vanya. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The second parameter is which (in a row). My object has two elements: zero and the first (we know that in JavaScript everything starts from scratch). I need to insert Vanya after the ‚Äú1‚Äù object, so I am writing the ‚Äú2‚Äù parameter. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The third parameter is when. In the third parameter, I write ‚Äú992‚Äù, this is the resolution below which Vanya really wants to get to Olya.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The second and third parameters are optional. By default, the object will be moved to the end of the block at a resolution below 768px. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/s6/aw/an/s6awan4diwfqltbtcyvt7nkkg-k.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We check. Everything works the same as in previous versions, but without content duplication and everything is automated. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Consider amenities. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now, in order to move Vanya over Olya, I just need to change the serial number in the second attribute parameter. And Vanya will already be over Olya. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/cl/w1/it/clw1it_jfjybuy4wewk8bwxdbio.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Convenient, right? I can do the same with the third breakpoint parameter. I can specify, for example, 1280px. (data-da = "content__column_river, 1,1280"). So Vanya will go to Olya a little earlier, precisely when this value is reached. And the coolest thing is that Vanya will return to his place absolutely automatically.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For added comfort, instead of the serial number in the second parameter of the attribute, you can specify one of two values ‚Äã‚Äã- first or last. When I write first, Vanya will move over the heading "I am a river." It will be located the very first inside the object where we send it. Accordingly, if you specify last, then our Vanya will be at the very bottom of the object. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/hx/kb/l4/hxkbl42bvvf9aqvsnffcqhpkq0w.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let's look at a couple more examples. Suppose we can send Kolya to the lota‚Äôs garden, and send Anya to the river to Van and Ola too, it will be more fun. We write for Kolya an attribute with parameters </font></font><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">data-da = "content__column_garden, 2,992"</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . And for Ani we write </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">data-da = ‚Äúcontent__column_river, 1.1280‚Äù</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
We look: Anya, Olya and Vanya on the river. Kolya goes to Lota a little later. Upon return, all the guys are in their places. Everything is great.</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Play around in CodePen: </font></font></b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">codepen.io/FreelancerLifeStyle/project/full/ZmWOPm</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Of course, you may have a question: what about the event that could be hung on relocatable objects? For example, initially, when clicking on Anya, we get a window with the inscription: "Everything is OK." Let's see what happens when she moves with the guys to the river. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Move, make a click - everything works fine, the window is also displayed. The event remains with the object when it is moved. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/pn/yp/9w/pnyp9wq5kdlt6nl5ypa-rgx3uhw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And the second exciting question is the load, which I tried to minimize. Now I will show this by telling a little about the code that is hidden under the hood of the dynamic adaptive.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
First of all, I declare some variables, including creating arrays, which I fill out below. I get the attribute, separate it, turning it into an array to get individual elements. Next, I fill out the original position of the objects so that then they can be returned to their parents' place (in the city). After that, I fill in the array of the elements themselves, so that I can then sort it for correct operation.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">let</span> originalPositions = [];
<span class="hljs-keyword">let</span> daElements = <span class="hljs-built_in">document</span>.querySelectorAll(<span class="hljs-string">'[data-da]'</span>);
<span class="hljs-keyword">let</span> daElementsArray = [];
<span class="hljs-keyword">let</span> daMatchMedia = [];
<span class="hljs-comment">// </span>
<span class="hljs-keyword">if</span> (daElements.length &gt; <span class="hljs-number">0</span>) {
	<span class="hljs-keyword">let</span> number = <span class="hljs-number">0</span>;
	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> index = <span class="hljs-number">0</span>; index &lt; daElements.length; index++) {
		<span class="hljs-keyword">const</span> daElement = daElements[index];
		<span class="hljs-keyword">const</span> daMove = daElement.getAttribute(<span class="hljs-string">'data-da'</span>);
		<span class="hljs-keyword">if</span> (daMove != <span class="hljs-string">''</span>) {
			<span class="hljs-keyword">const</span> daArray = daMove.split(<span class="hljs-string">','</span>);
			<span class="hljs-keyword">const</span> daPlace = daArray[<span class="hljs-number">1</span>] ? daArray[<span class="hljs-number">1</span>].trim() : <span class="hljs-string">'last'</span>;
			<span class="hljs-keyword">const</span> daBreakpoint = daArray[<span class="hljs-number">2</span>] ? daArray[<span class="hljs-number">2</span>].trim() : <span class="hljs-string">'767'</span>;
			<span class="hljs-keyword">const</span> daDestination = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.'</span> + daArray[<span class="hljs-number">0</span>].trim())
			<span class="hljs-keyword">if</span> (daArray.length &gt; <span class="hljs-number">0</span> &amp;&amp; daDestination) {<font></font>
				daElement.setAttribute(<span class="hljs-string">'data-da-index'</span>, number);
				<span class="hljs-comment">//   </span><font></font>
				originalPositions[number] = {<font></font>
					<span class="hljs-string">"parent"</span>: daElement.parentNode,
					<span class="hljs-string">"index"</span>: indexInParent(daElement)<font></font>
				};<font></font>
				<span class="hljs-comment">//   </span><font></font>
				daElementsArray[number] = {<font></font>
					<span class="hljs-string">"element"</span>: daElement,
					<span class="hljs-string">"destination"</span>: <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.'</span> + daArray[<span class="hljs-number">0</span>].trim()),
					<span class="hljs-string">"place"</span>: daPlace,
					<span class="hljs-string">"breakpoint"</span>: daBreakpoint<font></font>
				}<font></font>
				number++;<font></font>
			}<font></font>
		}<font></font>
	}<font></font>
	dynamicAdaptSort(daElementsArray);<font></font>
<font></font>
	<span class="hljs-comment">//    </span>
	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> index = <span class="hljs-number">0</span>; index &lt; daElementsArray.length; index++) {
		<span class="hljs-keyword">const</span> el = daElementsArray[index];
		<span class="hljs-keyword">const</span> daBreakpoint = el.breakpoint;
		<span class="hljs-keyword">const</span> daType = <span class="hljs-string">"max"</span>; <span class="hljs-comment">// MobileFirst   min</span><font></font>
<font></font>
		daMatchMedia.push(<span class="hljs-built_in">window</span>.matchMedia(<span class="hljs-string">"("</span> + daType + <span class="hljs-string">"-width: "</span> + daBreakpoint + <span class="hljs-string">"px)"</span>));<font></font>
		daMatchMedia[index].addListener(dynamicAdapt);<font></font>
	}<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And in the end, the optimization that I talked about is implemented: instead of window resize (listen to every window change), we will only listen to changes at the breakpoint using window matchMedia. </font><font style="vertical-align: inherit;">This way we get the browser response only at some points: those that we indicated in the attributes of our objects. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Next, I collect an array of these breakpoints and hang an event for each breakpoint. </font><font style="vertical-align: inherit;">In the main dynamic_adapt function, I expand all this inside the array that we collected and sorted, check for the presence of a breakpoint, move the elements, or return them to their place.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">// </span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">dynamicAdapt</span>(<span class="hljs-params">e</span>) </span>{
	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> index = <span class="hljs-number">0</span>; index &lt; daElementsArray.length; index++) {
		<span class="hljs-keyword">const</span> el = daElementsArray[index];
		<span class="hljs-keyword">const</span> daElement = el.element;
		<span class="hljs-keyword">const</span> daDestination = el.destination;
		<span class="hljs-keyword">const</span> daPlace = el.place;
		<span class="hljs-keyword">const</span> daBreakpoint = el.breakpoint;
		<span class="hljs-keyword">const</span> daClassname = <span class="hljs-string">"_dynamic_adapt_"</span> + daBreakpoint;<font></font>
<font></font>
		<span class="hljs-keyword">if</span> (daMatchMedia[index].matches) {
			<span class="hljs-comment">// </span>
			<span class="hljs-keyword">if</span> (!daElement.classList.contains(daClassname)) {
				<span class="hljs-keyword">let</span> actualIndex = indexOfElements(daDestination)[daPlace];
				<span class="hljs-keyword">if</span> (daPlace === <span class="hljs-string">'first'</span>) {<font></font>
					actualIndex = indexOfElements(daDestination)[<span class="hljs-number">0</span>];<font></font>
				} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (daPlace === <span class="hljs-string">'last'</span>) {<font></font>
					actualIndex = indexOfElements(daDestination)[indexOfElements(daDestination).length];<font></font>
				}<font></font>
				daDestination.insertBefore(daElement, daDestination.children[actualIndex]);<font></font>
				daElement.classList.add(daClassname);<font></font>
			}<font></font>
		} <span class="hljs-keyword">else</span> {
			<span class="hljs-comment">//  </span>
			<span class="hljs-keyword">if</span> (daElement.classList.contains(daClassname)) {<font></font>
				dynamicAdaptBack(daElement);<font></font>
				daElement.classList.remove(daClassname);<font></font>
			}<font></font>
		}<font></font>
	}<font></font>
	customAdapt();<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Return to home position function:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">//   </span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">dynamicAdaptBack</span>(<span class="hljs-params">el</span>) </span>{
	<span class="hljs-keyword">const</span> daIndex = el.getAttribute(<span class="hljs-string">'data-da-index'</span>);
	<span class="hljs-keyword">const</span> originalPlace = originalPositions[daIndex];
	<span class="hljs-keyword">const</span> parentPlace = originalPlace[<span class="hljs-string">'parent'</span>];
	<span class="hljs-keyword">const</span> indexPlace = originalPlace[<span class="hljs-string">'index'</span>];
	<span class="hljs-keyword">const</span> actualIndex = indexOfElements(parentPlace, <span class="hljs-literal">true</span>)[indexPlace];<font></font>
	parentPlace.insertBefore(el, parentPlace.children[actualIndex]);<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Naturally, many have a question about Mobile First. </font><font style="vertical-align: inherit;">There are no problems - we need to change only some variables in the code (removing this setting in HTML is already working):</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">When I collect an array of breakpoints, we need to change "max" to "min" here. </font><font style="vertical-align: inherit;">And the event will be ‚Äúlistened‚Äù not by max-width, but by min-width.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">You also need to change the sorting so that the objects in the array are aligned in a different order when we sort them by breakpoint. </font></font></li>
</ol><br>
<pre><code class="javascript hljs">	<span class="hljs-comment">// </span>
	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">dynamicAdaptSort</span>(<span class="hljs-params">arr</span>) </span>{<font></font>
		arr.sort(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">a, b</span>) </span>{
			<span class="hljs-keyword">if</span> (a.breakpoint &gt; b.breakpoint) { <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span> } <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> <span class="hljs-number">1</span> } <span class="hljs-comment">// MobileFirst </span><font></font>
		});<font></font>
		arr.sort(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">a, b</span>) </span>{
			<span class="hljs-keyword">if</span> (a.place &gt; b.place) { <span class="hljs-keyword">return</span> <span class="hljs-number">1</span> } <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span> }<font></font>
		});<font></font>
	}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Also in dynamic adaptive, I use a certain method of obtaining the index when the object is thrown. </font><font style="vertical-align: inherit;">And here are the first flaws - I have to exclude the transferred object. </font><font style="vertical-align: inherit;">Those. </font><font style="vertical-align: inherit;">when I transfer objects to the same place, so that everything is adequate and the objects line up in the order we want, when transferring, I need to exclude the previously transferred object to the same point.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">//       </span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">indexOfElements</span>(<span class="hljs-params">parent, back</span>) </span>{
	<span class="hljs-keyword">const</span> children = parent.children;
	<span class="hljs-keyword">const</span> childrenArray = [];
	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; children.length; i++) {
		<span class="hljs-keyword">const</span> childrenElement = children[i];
		<span class="hljs-keyword">if</span> (back) {<font></font>
			childrenArray.push(i);<font></font>
		} <span class="hljs-keyword">else</span> {
			<span class="hljs-comment">//  </span>
			<span class="hljs-keyword">if</span> (childrenElement.getAttribute(<span class="hljs-string">'data-da'</span>) == <span class="hljs-literal">null</span>) {<font></font>
				childrenArray.push(i);<font></font>
			}<font></font>
		}<font></font>
	}<font></font>
	<span class="hljs-keyword">return</span> childrenArray;<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But entails another sorting problem. For example, if I transfer the guys at the same time to the same position, I will not be able to control their order. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
One of the ways to develop this dynamic adaptive can be, for example, the creation of several breakpoints. Example, we need to move Vanya to Ola at 1280px, and at 992px Vanya to move to the garden, or return to the place. This functionality is not available now, so there is still work to do. In general, to cover 95% of everyday tasks in the adaptive, the functionality that is now is enough for me. To solve the problem of moving items to another place, I need to spend now a few seconds writing an attribute. And I will get the result I need.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Naturally, I urge absolutely everyone who liked the dynamic adaptive to take part in its testing, development and improvement of both the functional and the optimization of the code itself. </font><font style="vertical-align: inherit;">And all so that our Kohl, Ani, Vani and Olya would be together when they want it. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Repository on GitHub</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github.com/FreelancerLifeStyle/dynamic_adapt</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Based on the video " </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dynamic Adaptive // ‚Äã‚ÄãFast Adaptation of Complex Objects in JavaScript</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> " on the youtube channel " </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Freelancer for Life</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> "</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en502000/index.html">12 Data Engineering Online Courses</a></li>
<li><a href="../en502004/index.html">Kanban Method: Understanding Your Process as a Collective Knowledge Process - Part 1 (recipes)</a></li>
<li><a href="../en502008/index.html">Programming to the masses</a></li>
<li><a href="../en502012/index.html">Azure for Everyone: Introductory Course</a></li>
<li><a href="../en502018/index.html">Podcast on the security of mobile devices and the development of protective solutions for them</a></li>
<li><a href="../en502030/index.html">Web Services in Oracle</a></li>
<li><a href="../en502034/index.html">Controlled and uncontrolled components in React don't have to be complicated</a></li>
<li><a href="../en502038/index.html">Raising an atom, approach 2.0.1</a></li>
<li><a href="../en502040/index.html">About Phrasal Verbs-5 (up / down)</a></li>
<li><a href="../en502042/index.html">Interview with Analyst - Alexander Sibrikov, Product Manager at AppMetrica</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>