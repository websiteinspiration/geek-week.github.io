<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧤 🙆🏿 🐏 ROOTコード分析-研究データ分析フレームワーク 👵🏻 🌻 🤚🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="第118回ノーベルウィークがストックホルムで開催されている間、ビッグデータの処理に科学的研究で使用されたROOTプロジェクトコードのレビューがPVS-Studio静的コードアナライザー開発オフィスで準備されていました。もちろん、そのようなコードにボーナスを与えることはありませんが、開発者は興味深いコ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>ROOTコード分析-研究データ分析フレームワーク</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pvs-studio/blog/472494/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/df2/7f4/bcd/df27f4bcd139790b322570ee2f48e1ab.png" alt="写真3"></div><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第118回ノーベルウィークがストックホルムで開催されている間、ビッグデータの処理に科学的研究で使用されたROOTプロジェクトコードのレビューがPVS-Studio静的コードアナライザー開発オフィスで準備されていました。</font><font style="vertical-align: inherit;">もちろん、そのようなコードにボーナスを与えることはありませんが、開発者は興味深いコードの欠陥の詳細なレビューとプロジェクトの完全な検証のためのライセンスを受け取ります。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">前書き</font></font></h2><br>
<p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a89/187/f04/a89187f045bbcb2b5b8d5ab7c9dc7da1.png" alt="写真1"></div><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ROOT-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">科学研究データを扱うためのユーティリティのセット。</font><font style="vertical-align: inherit;">ビッグデータ処理、統計分析、視覚化、およびストレージに必要なすべての機能を提供します。</font><font style="vertical-align: inherit;">主にC ++で書かれています。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CERN</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（欧州核研究機構）で高エネルギー物理学の研究</font><font style="vertical-align: inherit;">開発が始まりました</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">毎日、何千人もの物理学者がROOTアプリケーションを使用して、データを分析したりシミュレーションしたりしています。</font></font><br>
<a name="habracut"></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PVS-Studio</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、C、C ++、C＃、およびJavaで記述されたプログラムのソースコードのエラーおよび潜在的な脆弱性を検出するためのツールです。</font><font style="vertical-align: inherit;">Windows、Linux、macOSの64ビットシステムで動作し、32ビット、64ビット、および組み込みARMプラットフォーム用に設計されたコードを分析できます。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新しい診断のデビュー</font></font></h2><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V1046</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> bool 'and' int 'types in the operations in the operation'＆= 'の安全でない使用法です。</font><font style="vertical-align: inherit;">GSLMultiRootFinder.h 175</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">AddFunction</span><span class="hljs-params">(<span class="hljs-keyword">const</span> ROOT::Math::IMultiGenFunction &amp; func)</span> </span>{<font></font>
  ROOT::Math::IMultiGenFunction * f = func.Clone();<font></font>
  <span class="hljs-keyword">if</span> (!f) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<font></font>
  fFunctions.push_back(f);<font></font>
  <span class="hljs-keyword">return</span> fFunctions.size();<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">template</span>&lt;class FuncIterator&gt;
<span class="hljs-keyword">bool</span> <span class="hljs-title">SetFunctionList</span><span class="hljs-params">( FuncIterator begin, FuncIterator end)</span> </span>{
  <span class="hljs-keyword">bool</span> ret = <span class="hljs-literal">true</span>;
  <span class="hljs-keyword">for</span> (FuncIterator itr = begin; itr != end; ++itr) {
    <span class="hljs-keyword">const</span> ROOT::Math::IMultiGenFunction * f = *itr;<font></font>
    ret &amp;= AddFunction(*f);<font></font>
  }<font></font>
  <span class="hljs-keyword">return</span> ret;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
検証中に使用されたアナライザーのベータ版は、そのような素晴らしいエラーを発見しました。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">期待。</font></font></b><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SetFunctionList</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">関数</font><font style="vertical-align: inherit;">は、イテレータのリストを走査します。</font><font style="vertical-align: inherit;">それらの少なくとも1つが無効な場合、戻り値は</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">falseになり</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、それ以外の場合は</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">trueになります</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">現実。</font></font></b><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SetFunctionList</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">関数</font><font style="vertical-align: inherit;">は</font><font style="vertical-align: inherit;">、有効なイテレータであっても</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">falseを返す</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ことがあります。</font><font style="vertical-align: inherit;">状況を</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">見てみ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ましょう</font><i><font style="vertical-align: inherit;">。AddFunction関数</font></i><font style="vertical-align: inherit;">は、</font><i><font style="vertical-align: inherit;">fFunctions</font></i><font style="vertical-align: inherit;">リスト内の有効なイテレータの数を返します</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">それら。</font><font style="vertical-align: inherit;">ゼロ以外のイテレータを追加すると、このリストのサイズは1、2、3、4などのように順次増加します。</font><font style="vertical-align: inherit;">ここで、コード内のエラーが発生し始めます。</font></font><br>
<br>
<pre><code class="cpp hljs">ret &amp;= AddFunction(*f);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
なぜなら </font><font style="vertical-align: inherit;">この</font><font style="vertical-align: inherit;">関数は</font><i><font style="vertical-align: inherit;">bool</font></i><font style="vertical-align: inherit;">では</font><font style="vertical-align: inherit;">なく</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">型の結果を返す</font><font style="vertical-align: inherit;">ため、偶数の '＆='演算は値</font><i><font style="vertical-align: inherit;">falseを</font></i><font style="vertical-align: inherit;">返します</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">結局のところ、偶数の最下位ビットは常にゼロになります。</font><font style="vertical-align: inherit;">したがって、このような明らかでないエラーは</font><font style="vertical-align: inherit;">、有効な引数であっても</font><i><font style="vertical-align: inherit;">SetFunctionsList</font></i><font style="vertical-align: inherit;">関数の結果を台無しにし</font><font style="vertical-align: inherit;">ます。</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br>
<br>
<p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/aa4/c23/64f/aa4c2364f5205b526db1625aeebd32ff.png" alt="写真2"></div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条件式のエラー</font></font></h2><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V501</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> '&amp;&amp;'演算子の左側と右側に同じサブ式があります：module &amp;&amp; module rootcling_impl.cxx 3650</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">HandleDiagnostic</span><span class="hljs-params">(....)</span> <span class="hljs-keyword">override</span>
</span>{<font></font>
  ....<font></font>
  <span class="hljs-keyword">bool</span> isROOTSystemModuleDiag = <span class="hljs-keyword">module</span> &amp;&amp; ....;
  <span class="hljs-keyword">bool</span> isSystemModuleDiag = <span class="hljs-keyword">module</span> &amp;&amp; <span class="hljs-keyword">module</span> &amp;&amp; <span class="hljs-keyword">module</span>-&gt;IsSystem;
  <span class="hljs-keyword">if</span> (!isROOTSystemModuleDiag &amp;&amp; !isSystemModuleDiag)<font></font>
    fChild-&gt;HandleDiagnostic(DiagLevel, Info);<font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最も無害な例から始めましょう。</font><font style="vertical-align: inherit;">モジュールポインタは2回チェックされます。</font><font style="vertical-align: inherit;">ほとんどの場合、1つのチェックは不要です。</font><font style="vertical-align: inherit;">ただし、不要な質問がないようにコードを修正することをお勧めします。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V501</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> '||'の左側と右側に同じサブ式 'strchr（fHostAuth-&gt; GetHost（）、' * '）'があります </font><font style="vertical-align: inherit;">オペレーター。</font><font style="vertical-align: inherit;">TAuthenticate.cxx 300</font></font><br>
<br>
<pre><code class="cpp hljs">TAuthenticate::TAuthenticate(TSocket *sock, <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span> *remote,
                             <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span> *proto, <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span> *user)<font></font>
{<font></font>
  ....<font></font>
  <span class="hljs-comment">// If generic THostAuth (i.e. with wild card or user == any)</span>
  <span class="hljs-comment">// make a personalized memory copy of this THostAuth</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">strchr</span>(fHostAuth-&gt;GetHost(),<span class="hljs-string">'*'</span>) || <span class="hljs-built_in">strchr</span>(fHostAuth-&gt;GetHost(),<span class="hljs-string">'*'</span>) ||<font></font>
     fHostAuth-&gt;GetServer() == <span class="hljs-number">-1</span> ) {<font></font>
    fHostAuth = <span class="hljs-keyword">new</span> THostAuth(*fHostAuth);<font></font>
    fHostAuth-&gt;SetHost(fqdn);<font></font>
    fHostAuth-&gt;SetUser(checkUser);<font></font>
    fHostAuth-&gt;SetServer(servtype);<font></font>
  }<font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここで</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fHostAuth-&gt; GetHost（）</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">という行で</font><font style="vertical-align: inherit;">、同じ文字が検索されます-'*'。</font><font style="vertical-align: inherit;">おそらく、そのうちの1つは「？」のシンボルであるべきです。</font><font style="vertical-align: inherit;">通常、これらは異なるマスクを設定するために使用されます。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V517</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 'if（A）{...} else if（A）{...}'パターンの使用が検出されました。</font><font style="vertical-align: inherit;">論理エラーが存在する可能性があります。</font><font style="vertical-align: inherit;">チェック行：163、165。TProofMonSenderML.cxx 163</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function">Int_t <span class="hljs-title">TProofMonSenderML::SendSummary</span><span class="hljs-params">(TList *recs, <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span> *id)</span>
</span>{<font></font>
  ....<font></font>
  <span class="hljs-keyword">if</span> (fSummaryVrs == <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">if</span> ((dsn = recs-&gt;FindObject(<span class="hljs-string">"dataset"</span>))) recs-&gt;Remove(dsn);<font></font>
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (fSummaryVrs == <span class="hljs-number">0</span>) {
    <span class="hljs-comment">// Only the first records</span>
    xrecs = <span class="hljs-keyword">new</span> TList;<font></font>
    xrecs-&gt;SetOwner(kFALSE);<font></font>
    <span class="hljs-function">TIter <span class="hljs-title">nxr</span><span class="hljs-params">(recs)</span></span>;<font></font>
    TObject *o = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">while</span> ((o = nxr())) {
       <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">strcmp</span>(o-&gt;GetName(), <span class="hljs-string">"vmemmxw"</span>)) <span class="hljs-keyword">break</span>;<font></font>
       xrecs-&gt;Add(o);<font></font>
    }<font></font>
  }<font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
変数</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fSummaryVrsは</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 2回ゼロと比較されます。</font><font style="vertical-align: inherit;">これにより、else-ifブランチのコードが実行されなくなります。</font><font style="vertical-align: inherit;">そして、たくさんのコードがそこに書かれています... </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V523</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 'then'ステートメントは 'else'ステートメントと同等です。</font><font style="vertical-align: inherit;">TKDTree.cxx 805</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span>  Index, <span class="hljs-keyword">typename</span> Value&gt;
<span class="hljs-keyword">void</span> TKDTree&lt;Index, Value&gt;::UpdateRange(....)<font></font>
{<font></font>
  ....<font></font>
  <span class="hljs-keyword">if</span> (point[fAxis[inode]]&lt;=fValue[inode]){
    <span class="hljs-comment">//first examine the node that contains the point</span><font></font>
    UpdateRange(GetLeft(inode),point, range, res);<font></font>
    UpdateRange(GetRight(inode),point, range, res);<font></font>
  } <span class="hljs-keyword">else</span> {<font></font>
    UpdateRange(GetLeft(inode),point, range, res);<font></font>
    UpdateRange(GetRight(inode),point, range, res);<font></font>
  }<font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
どのような状況でも同じコピーと貼り付けのコードが実行されます。</font><font style="vertical-align: inherit;">おそらく、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">left</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rightの</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">単語にタイプミスがあります</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プロジェクトには多くの同様の疑わしいコードがあります。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V523 'then'ステートメントは、 'else'ステートメントと同等です。</font><font style="vertical-align: inherit;">TContainerConverters.cxx 51</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V523 'then'ステートメントは、 'else'ステートメントと同等です。</font><font style="vertical-align: inherit;">TWebFile.cxx 1310</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V523 'then'ステートメントは、 'else'ステートメントと同等です。</font><font style="vertical-align: inherit;">MethodMLP.cxx 423</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V523 'then'ステートメントは、 'else'ステートメントと同等です。</font><font style="vertical-align: inherit;">RooAbsCategory.cxx 394</font></font></li>
</ul><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V547</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">式 '！File_name_value.empty（）'は常にfalseです。</font><font style="vertical-align: inherit;">SelectionRules.cxx 1423</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">SelectionRules::AreAllSelectionRulesUsed</span><span class="hljs-params">()</span> <span class="hljs-keyword">const</span> </span>{
  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">auto</span>&amp;&amp; rule : fClassSelectionRules){<font></font>
    ....<font></font>
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span> file_name_value;
    <span class="hljs-keyword">if</span> (!rule.GetAttributeValue(<span class="hljs-string">"file_name"</span>, file_name_value))<font></font>
     file_name_value.clear();<font></font>
<font></font>
    <span class="hljs-keyword">if</span> (!file_name_value.empty()) {                  <span class="hljs-comment">// &lt;=</span>
      <span class="hljs-comment">// don't complain about defined_in rules</span>
      <span class="hljs-keyword">continue</span>;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* attrName = <span class="hljs-literal">nullptr</span>;
    <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* attrVal = <span class="hljs-literal">nullptr</span>;
    <span class="hljs-keyword">if</span> (!file_name_value.empty()) {                  <span class="hljs-comment">// &lt;=</span>
      attrName = <span class="hljs-string">"file name"</span>;<font></font>
      attrVal = file_name_value.c_str();<font></font>
    } <span class="hljs-keyword">else</span> {<font></font>
      attrName = <span class="hljs-string">"class"</span>;
      <span class="hljs-keyword">if</span> (!name.empty()) attrVal = name.c_str();<font></font>
    }<font></font>
    ROOT::TMetaUtils::Warning(<span class="hljs-number">0</span>,<span class="hljs-string">"Unused %s rule: %s\n"</span>, attrName, attrVal);<font></font>
  }<font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ほとんどの場合、間違いはありません。</font><font style="vertical-align: inherit;">アナライザーは、短縮可能なコードを検出しました。</font><font style="vertical-align: inherit;">なぜなら </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">file_name_value.empty（）の</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">値は</font><font style="vertical-align: inherit;">ループの最初にチェックされ、次にコードの下部でチェックされるため、このチェックを削除して、不要なコードの量を大幅に削減できます。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V590</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> '！File1 ||の検査を検討してください </font><font style="vertical-align: inherit;">c &lt;= 0 || </font><font style="vertical-align: inherit;">c == '*' || </font><font style="vertical-align: inherit;">c！= '（' '式。式が過剰であるか、誤植が含まれています。TTabCom.cxx840</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function">TString <span class="hljs-title">TTabCom::DetermineClass</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span> varName[])</span>
</span>{<font></font>
  ....<font></font>
  c = file1.get();<font></font>
  <span class="hljs-keyword">if</span> (!file1 || c &lt;= <span class="hljs-number">0</span> || c == <span class="hljs-string">'*'</span> || c != <span class="hljs-string">'('</span>) {<font></font>
    Error(<span class="hljs-string">"TTabCom::DetermineClass"</span>, <span class="hljs-string">"variable \"%s\" not defined?"</span>,<font></font>
        varName);<font></font>
    <span class="hljs-keyword">goto</span> cleanup;<font></font>
  }<font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アナライザーによって指摘された条件式の省略部分を考えてみます。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">if</span> (.... || c == <span class="hljs-string">'*'</span> || c != <span class="hljs-string">'('</span>) {<font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
条件は、記号「アスタリスク」が等しいかどうかに依存しません。</font><font style="vertical-align: inherit;">条件式のこの部分は、 '（'以外のすべての文字に対して常にtrueになります。これは、真理値表を作成すると簡単に確認できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
条件式に奇妙なロジックがある2つの場所：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V590この式を調べることを検討してください。</font><font style="vertical-align: inherit;">表現が過剰であるか、誤植が含まれています。</font><font style="vertical-align: inherit;">TFile.cxx 3963</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V590この式を調べることを検討してください。</font><font style="vertical-align: inherit;">式が過剰であるか、誤植が含まれています。</font><font style="vertical-align: inherit;">TStreamerInfoActions.cxx 3084</font></font></li>
</ul><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V593</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「A = B &lt;C」の種類の表現を</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">確認する</font></a><font style="vertical-align: inherit;">ことを検討してください。</font><font style="vertical-align: inherit;">式は次のように計算されます： 'A =（B &lt;C）'。</font><font style="vertical-align: inherit;">TProofServ.cxx 1903</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function">Int_t <span class="hljs-title">TProofServ::HandleSocketInput</span><span class="hljs-params">(TMessage *mess, Bool_t all)</span>
</span>{<font></font>
  ....<font></font>
  <span class="hljs-keyword">if</span> (Int_t ret = fProof-&gt;AddWorkers(workerList) &lt; <span class="hljs-number">0</span>) {<font></font>
    Error(<span class="hljs-string">"HandleSocketInput:kPROOF_GETSLAVEINFO"</span>,
          <span class="hljs-string">"adding a list of worker nodes returned: %d"</span>, ret);<font></font>
  }<font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アナライザーによって検出されたエラーは、プログラムが正しく機能しない場合にのみ現れます。</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ret</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">変数</font><font style="vertical-align: inherit;">は</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AddWorkers</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">関数の戻りコード</font><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">格納し、</font><font style="vertical-align: inherit;">緊急時にこの値をログに表示する必要があります。</font><font style="vertical-align: inherit;">しかし、コードはそのように機能しません。</font><font style="vertical-align: inherit;">条件には、操作の優先順位を指定する追加の括弧がありません。</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ret</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">変数に</font><font style="vertical-align: inherit;">格納されるのは戻りコードではなく、論理比較の結果です。</font><font style="vertical-align: inherit;">0または1のみ。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同様の欠陥がある別の場所があり</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V593「A = B &lt;C」の種類の表現を確認することを検討してください。</font><font style="vertical-align: inherit;">式は次のように計算されます： 'A =（B &lt;C）'。</font><font style="vertical-align: inherit;">TProofServ.cxx 3897</font></font></li>
</ul><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V768</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列挙型定数 'kCostComplexityPruning'がブール型の変数として使用されています。</font><font style="vertical-align: inherit;">MethodDT.cxx 283</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">enum</span> EPruneMethod {kExpectedErrorPruning=<span class="hljs-number">0</span>, kCostComplexityPruning, kNoPruning};<font></font>
<font></font>
<span class="hljs-keyword">void</span> TMVA::MethodDT::ProcessOptions()<font></font>
{<font></font>
  ....<font></font>
  <span class="hljs-keyword">if</span> (fPruneStrength &lt; <span class="hljs-number">0</span>) fAutomatic = kTRUE;
  <span class="hljs-keyword">else</span> fAutomatic = kFALSE;
  <span class="hljs-keyword">if</span> (fAutomatic &amp;&amp; fPruneMethod==!DecisionTree::kCostComplexityPruning){<font></font>
    Log() &lt;&lt; kFATAL<font></font>
          &lt;&lt;  <span class="hljs-string">"Sorry automatic pruning strength determination is ...."</span> &lt;&lt; Endl;<font></font>
  }<font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
うーん... </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kCostComplexityPruningの</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">定数値の否定はなぜ</font><font style="vertical-align: inherit;">ですか？</font><font style="vertical-align: inherit;">ほとんどの場合、否定記号が誤って追加され、コード実行のロジックが正しくなくなります。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ポインタ付きの無効なコード</font></font></h2><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V522</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nullポインター 'pre'の</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">逆</font></a><font style="vertical-align: inherit;">参照が行われる可能性があります。</font><font style="vertical-align: inherit;">TSynapse.cxx 61</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">TSynapse::SetPre</span><span class="hljs-params">(TNeuron * pre)</span>
</span>{
  <span class="hljs-keyword">if</span> (pre) {<font></font>
    Error(<span class="hljs-string">"SetPre"</span>,<span class="hljs-string">"this synapse is already assigned to a pre-neuron."</span>);
    <span class="hljs-keyword">return</span>;<font></font>
  }<font></font>
  fpre = pre;<font></font>
  pre-&gt;AddPost(<span class="hljs-keyword">this</span>);<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私はこの奇妙なコードを理解しようとしました。</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fpre</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">フィールドに新しい値を設定するのではないよう</font><font style="vertical-align: inherit;">です。</font><font style="vertical-align: inherit;">それから彼らはポインターを混乱させてミスをしました、それはコンディションでチェックされるべきです。</font><font style="vertical-align: inherit;">現在の実装では、</font><font style="vertical-align: inherit;">関数</font><i><font style="vertical-align: inherit;">SetPre</font></i><font style="vertical-align: inherit;">で</font><font style="vertical-align: inherit;">値</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nullptr</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を渡す</font><font style="vertical-align: inherit;">と、nullポインター逆参照が発生します。</font><font style="vertical-align: inherit;">
ほとんどの場合、以下が正しいです：</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">TSynapse::SetPre</span><span class="hljs-params">(TNeuron * pre)</span>
</span>{
  <span class="hljs-keyword">if</span> (fpre) {<font></font>
    Error(<span class="hljs-string">"SetPre"</span>,<span class="hljs-string">"this synapse is already assigned to a pre-neuron."</span>);
    <span class="hljs-keyword">return</span>;<font></font>
  }<font></font>
  fpre = pre;<font></font>
  pre-&gt;AddPost(<span class="hljs-keyword">this</span>);<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
確かに、これは関数がnullポインターを渡すことを保存しません。</font><font style="vertical-align: inherit;">しかし、少なくともこのコードは元のバージョンよりも論理的に見えます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここに、いくつかの変更を加えてここからコピーした別の場所があります。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V522ヌルポインター 'post'の逆参照が行われる可能性があります。</font><font style="vertical-align: inherit;">TSynapse.cxx 74</font></font></li>
</ul><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V595</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nullptrに対して検証される前に、「N」ポインターが使用されました。</font><font style="vertical-align: inherit;">チェック行：484、488。Scanner.cxx 484</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">RScanner::shouldVisitDecl</span><span class="hljs-params">(clang::NamedDecl *D)</span>
</span>{
   <span class="hljs-keyword">if</span> (<span class="hljs-keyword">auto</span> M = D-&gt;getOwningModule()) {                      <span class="hljs-comment">// &lt;= 2</span>
      <span class="hljs-keyword">return</span> fInterpreter.getSema().isModuleVisible(M);<font></font>
   }<font></font>
   <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">RScanner::VisitNamespaceDecl</span><span class="hljs-params">(clang::NamespaceDecl* N)</span>
</span>{
 <span class="hljs-keyword">if</span> (fScanType == EScanType::kOnePCM)
  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<font></font>
<font></font>
 <span class="hljs-keyword">if</span> (!shouldVisitDecl(N))                                    <span class="hljs-comment">// &lt;= 1</span>
  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<font></font>
<font></font>
 <span class="hljs-keyword">if</span>((N &amp;&amp; N-&gt;isImplicit()) || !N){                           <span class="hljs-comment">// &lt;= 3</span>
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<font></font>
 }<font></font>
 ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アナライザーは非常に危険なコードを検出しました！</font><font style="vertical-align: inherit;">最初のケース</font><font style="vertical-align: inherit;">のポインター</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、ゼロ値をチェックせずに逆参照されます。</font><font style="vertical-align: inherit;">さらに、検証されていないポインタの呼び出しも確認できません。</font><font style="vertical-align: inherit;">これは</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">shouldVisitDecl</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">関数内で</font><i><font style="vertical-align: inherit;">発生し</font></i><font style="vertical-align: inherit;">ます</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
従来、この診断ルールは多くの有用な警告を生成します。</font><font style="vertical-align: inherit;">それらの一部を次に示します。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V595 nullptrに対して検証される前に、「ファイル」ポインタが使用されました。</font><font style="vertical-align: inherit;">チェック行：141、153。TFileCacheRead.cxx 141</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V595 nullptrに対して検証される前に、「fFree」ポインタが使用されました。</font><font style="vertical-align: inherit;">チェック行：2029、2038。TFile.cxx 2029</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V595 nullptrに対して検証される前に、 'tbuf'ポインターが使用されました。</font><font style="vertical-align: inherit;">チェック行：586、591。TGText.cxx 586</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V595 nullptrに対して検証される前に、「fPlayer」ポインタが使用されました。</font><font style="vertical-align: inherit;">チェック行：3425、3430。TProof.cxx 3425</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V595 nullptrに対して検証される前に、「gProofServ」ポインタが使用されました。</font><font style="vertical-align: inherit;">チェック行：1192、1194。TProofPlayer.cxx 1192</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V595 nullptrに対して検証される前に、「projDataTmp」ポインタが使用されました。</font><font style="vertical-align: inherit;">チェック行：791、804。RooSimultaneous.cxx 791</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次の例はエラーではありませんが、マクロが</font><font style="vertical-align: inherit;">誤ったコードや冗長なコードの記述を</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">促す</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ことを</font><font style="vertical-align: inherit;">再度示しています</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V571</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">定期チェック。</font><font style="vertical-align: inherit;">「if（fCanvasImp）」条件は799行ですでに確認されています。TCanvas.cxx800</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> SafeDelete(p) { <span class="hljs-meta-keyword">if</span> (p) { delete p; p = 0; } }</span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">TCanvas::Close</span><span class="hljs-params">(Option_t *option)</span>
</span>{<font></font>
  ....<font></font>
  <span class="hljs-keyword">if</span> (fCanvasImp)<font></font>
    SafeDelete(fCanvasImp);<font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fCanvasImp</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ポインタ</font><i><font style="vertical-align: inherit;">は</font></i><font style="vertical-align: inherit;"> 2回チェックされます。</font><font style="vertical-align: inherit;">チェックの1つは</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SafeDelete</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">マクロにすでに実装されています</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">マクロの問題の1つは、コードからナビゲートするのが難しいことが多いため、多くの人が使用する前に内容を調べないということです。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">配列を操作するときのエラー</font></font></h2><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V519</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「Line [Cursor]」変数には、2回続けて値が割り当てられます。</font><font style="vertical-align: inherit;">おそらくこれは間違いです。</font><font style="vertical-align: inherit;">チェック行：352、353。Editor.cpp 353</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">size_t</span> <span class="hljs-title">find_last_non_alnum</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span> &amp;str,
                             <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span>::size_type index = <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span>::npos)</span> </span>{<font></font>
  ....<font></font>
  <span class="hljs-keyword">char</span> tmp = Line.GetText()[Cursor];<font></font>
  Line[Cursor] = Line[Cursor - <span class="hljs-number">1</span>];<font></font>
  Line[Cursor] = tmp;<font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Line [Cursor]</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
要素の新しい値は</font><font style="vertical-align: inherit;">すぐに上書きされます。</font><font style="vertical-align: inherit;">ここで何か問題があります... </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V557</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アレイのオーバーランが可能です。</font><font style="vertical-align: inherit;">'ivar'インデックスは配列の境界を超えています。</font><font style="vertical-align: inherit;">BasicMinimizer.cxx 130</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">BasicMinimizer::SetVariableValue</span><span class="hljs-params">(<span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">int</span> ivar, <span class="hljs-keyword">double</span> val)</span> </span>{
  <span class="hljs-keyword">if</span> (ivar &gt; fValues.size() ) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<font></font>
  fValues[ivar] = val;<font></font>
  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、配列のインデックスのチェックで間違いを犯すことは、最近の大きな問題にすぎません。</font><font style="vertical-align: inherit;">ほとんどすべての3番目のプロジェクトが見つかります。</font><font style="vertical-align: inherit;">ループで配列のインデックスを作成するときにすべてが単純である場合、 '&lt;'演算子はほとんどの場合、インデックスを配列のサイズと比較するために使用され、このようなチェックでは、 '&gt;'ではなく '&gt; ='演算子を使用する必要があります。</font><font style="vertical-align: inherit;">それ以外の場合は、配列の境界を1つの要素だけ超えることができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このエラーは、ファイルを介して数回伝搬されました。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V557アレイのオーバーランが発生する可能性があります。</font><font style="vertical-align: inherit;">'ivar'インデックスは配列の境界を超えています。</font><font style="vertical-align: inherit;">BasicMinimizer.cxx 186</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V557アレイのオーバーランが発生する可能性があります。</font><font style="vertical-align: inherit;">'ivar'インデックスは配列の境界を超えています。</font><font style="vertical-align: inherit;">BasicMinimizer.cxx 194</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V557アレイのオーバーランが発生する可能性があります。</font><font style="vertical-align: inherit;">'ivar'インデックスは配列の境界を超えています。</font><font style="vertical-align: inherit;">BasicMinimizer.cxx 209</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V557アレイのオーバーランが発生する可能性があります。</font><font style="vertical-align: inherit;">'ivar'インデックスは配列の境界を超えています。</font><font style="vertical-align: inherit;">BasicMinimizer.cxx 215</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V557アレイのオーバーランが発生する可能性があります。</font><font style="vertical-align: inherit;">'ivar'インデックスは配列の境界を超えています。</font><font style="vertical-align: inherit;">BasicMinimizer.cxx 230</font></font></li>
</ul><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V621</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「for」演算子の検査を検討してください。</font><font style="vertical-align: inherit;">ループが正しく実行されないか、まったく実行されない可能性があります。</font><font style="vertical-align: inherit;">TDataMember.cxx 554</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function">Int_t <span class="hljs-title">TDataMember::GetArrayDim</span><span class="hljs-params">()</span> <span class="hljs-keyword">const</span>
</span>{
 <span class="hljs-keyword">if</span> (fArrayDim&lt;<span class="hljs-number">0</span> &amp;&amp; fInfo) {<font></font>
    R__LOCKGUARD(gInterpreterMutex);<font></font>
    TDataMember *dm = <span class="hljs-keyword">const_cast</span>&lt;TDataMember*&gt;(<span class="hljs-keyword">this</span>);<font></font>
    dm-&gt;fArrayDim = gCling-&gt;DataMemberInfo_ArrayDim(fInfo);<font></font>
    <span class="hljs-comment">// fArrayMaxIndex should be zero</span>
    <span class="hljs-keyword">if</span> (dm-&gt;fArrayDim) {<font></font>
       dm-&gt;fArrayMaxIndex = <span class="hljs-keyword">new</span> Int_t[fArrayDim];
       <span class="hljs-keyword">for</span>(Int_t dim = <span class="hljs-number">0</span>; dim &lt; fArrayDim; ++dim) {<font></font>
          dm-&gt;fArrayMaxIndex[dim] = gCling-&gt;DataMemberInfo_MaxIndex(fInfo,dim);<font></font>
       }<font></font>
    }<font></font>
 }<font></font>
 <span class="hljs-keyword">return</span> fArrayDim;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
おそらく、forループでは、変数</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dim</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fArrayDim</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ではなく</font><i><font style="vertical-align: inherit;">dm-&gt; fArrayDim</font></i><font style="vertical-align: inherit;">と</font><font style="vertical-align: inherit;">比較したかったの</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">関数の先頭の条件により、使用されている変数の値は負です。</font><font style="vertical-align: inherit;">このようなサイクルは決して実行されません。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V767</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ループ内の定数インデックスによる「現在の」配列の要素への不審なアクセス。</font><font style="vertical-align: inherit;">TClingUtils.cxx 3082</font></font><br>
<br>
<pre><code class="cpp hljs">llvm::StringRef ROOT::TMetaUtils::DataMemberInfo__ValidArrayIndex(....)<font></font>
{<font></font>
  ....<font></font>
  <span class="hljs-keyword">while</span> (current!=<span class="hljs-number">0</span>) {
    <span class="hljs-comment">// Check the token</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">isdigit</span>(current[<span class="hljs-number">0</span>])) {
       <span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-built_in">strlen</span>(current);i++) {
          <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">isdigit</span>(current[<span class="hljs-number">0</span>])) {
             <span class="hljs-keyword">if</span> (errstr) *errstr = current;
             <span class="hljs-keyword">if</span> (errnum) *errnum = NOT_INT;
             <span class="hljs-keyword">return</span> llvm::StringRef();<font></font>
          }<font></font>
       }<font></font>
    } <span class="hljs-keyword">else</span> { <span class="hljs-comment">// current token is not a digit</span><font></font>
      ....<font></font>
    }<font></font>
    ....<font></font>
  }<font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このコードフラグメントは、特定の行を解析し、その正確性をチェックします。</font><font style="vertical-align: inherit;">文字列</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">current</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">のnull文字が</font><font style="vertical-align: inherit;">数値として定義された</font><font style="vertical-align: inherit;">後、</font><font style="vertical-align: inherit;">他のすべての文字がトラバースされ、すべての文字が文字列の末尾までの数字であることを確認します。</font><font style="vertical-align: inherit;">さて、それはどのように行われます...ループカウンターループ</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">で</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は使用されません。</font><font style="vertical-align: inherit;">条件に</font><i><font style="vertical-align: inherit;">current [0]</font></i><font style="vertical-align: inherit;">では</font><font style="vertical-align: inherit;">なく、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">current [i]</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を書き込む必要があり</font><font style="vertical-align: inherit;">ました。</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br>
<br>
<p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/16e/c09/97a/16ec0997a4c29ce4a257d4124cf63ce2.png" alt="写真4"></div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メモリーリーク</font></font></h2><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V773</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「optionlist」ポインタを解放せずに関数が終了しました。</font><font style="vertical-align: inherit;">メモリリークの可能性があります。</font><font style="vertical-align: inherit;">TDataMember.cxx 355</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">TDataMember::Init</span><span class="hljs-params">(<span class="hljs-keyword">bool</span> afterReading)</span>
</span>{<font></font>
  ....<font></font>
  TList *optionlist = <span class="hljs-keyword">new</span> TList();       <span class="hljs-comment">//storage for options strings</span><font></font>
<font></font>
  <span class="hljs-keyword">for</span> (i=<span class="hljs-number">0</span>;i&lt;token_cnt;i++) {
     <span class="hljs-keyword">if</span> (<span class="hljs-built_in">strstr</span>(tokens[i],<span class="hljs-string">"Items"</span>)) {<font></font>
        ptr1 = R__STRTOK_R(tokens[i], <span class="hljs-string">"()"</span>, &amp;rest);
        <span class="hljs-keyword">if</span> (ptr1 == <span class="hljs-number">0</span>) {<font></font>
           Fatal(<span class="hljs-string">"TDataMember"</span>,<span class="hljs-string">"Internal error, found \"Items...."</span>,GetTitle());
           <span class="hljs-keyword">return</span>;<font></font>
        }<font></font>
        ptr1 = R__STRTOK_R(<span class="hljs-literal">nullptr</span>, <span class="hljs-string">"()"</span>, &amp;rest);
        <span class="hljs-keyword">if</span> (ptr1 == <span class="hljs-number">0</span>) {<font></font>
           Fatal(<span class="hljs-string">"TDataMember"</span>,<span class="hljs-string">"Internal error, found \"Items...."</span>,GetTitle());
           <span class="hljs-keyword">return</span>;<font></font>
        }<font></font>
        ....<font></font>
     }<font></font>
     ....<font></font>
  }<font></font>
  ....<font></font>
  <span class="hljs-comment">// dispose of temporary option list...</span>
  <span class="hljs-keyword">delete</span> optionlist;<font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
関数を終了するとき、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">optionList</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ポインタを使用するためのメモリは提供されません</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">この特定のケースでこれが必要かどうかは、私には言えません。</font><font style="vertical-align: inherit;">ただし、通常、このようなエラーはPVS-Studioレポートに基づくプロジェクトで修正されます。</font><font style="vertical-align: inherit;">それはすべて、プログラムが緊急時に作業を続けようとするべきかどうかにかかっています。</font><font style="vertical-align: inherit;">プロジェクトにはそのような警告が多数あります。開発者が自分でプロジェクトを再確認し、完全なアナライザーレポートを表示することをお勧めします。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">再びmemset関数について</font></font></h2><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V597</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンパイラーは、「x」バッファーをフラッシュするために使用される「memset」関数呼び出しを削除できます。</font><font style="vertical-align: inherit;">memset_s（）関数を使用して、プライベートデータを消去する必要があります。</font><font style="vertical-align: inherit;">TMD5.cxx 366</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">TMD5::Transform</span><span class="hljs-params">(UInt_t buf[<span class="hljs-number">4</span>], <span class="hljs-keyword">const</span> UChar_t in[<span class="hljs-number">64</span>])</span>
</span>{<font></font>
  UInt_t a, b, c, d, x[<span class="hljs-number">16</span>];<font></font>
  ....<font></font>
  <span class="hljs-comment">// Zero out sensitive information</span>
  <span class="hljs-built_in">memset</span>(x, <span class="hljs-number">0</span>, <span class="hljs-keyword">sizeof</span>(x));<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
多くの人は、コードがコンパイルされると、このコメントはバイナリファイルに入らず、正しいと思います。D。</font><font style="vertical-align: inherit;">しかし、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">memset</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">関数</font><font style="vertical-align: inherit;">もコンパイラーによって削除され、誰もが推測するわけではありません。</font><font style="vertical-align: inherit;">そして、それは起こります。</font><font style="vertical-align: inherit;">フラッシュされたバッファーがコードで使用されなくなると、コンパイラーはコードを最適化し、関数呼び出しを削除します。</font><font style="vertical-align: inherit;">技術的には彼は正しいですが、バッファに秘密のデータがあった場合、それらはそこに残ります。</font><font style="vertical-align: inherit;">これは古典的な</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CWE-14の</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">セキュリティ上の欠陥</font><font style="vertical-align: inherit;">です。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">その他の警告</font></font></h2><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V591</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">非void関数は値を返す必要があります。</font><font style="vertical-align: inherit;">LogLikelihoodFCN.h 108</font></font><br>
<br>
<pre><code class="cpp hljs">LogLikelihoodFCN &amp; <span class="hljs-keyword">operator</span> = (<span class="hljs-keyword">const</span> LogLikelihoodFCN &amp; rhs) {<font></font>
  SetData(rhs.DataPtr() );<font></font>
  SetModelFunction(rhs.ModelFunctionPtr() );<font></font>
  fNEffPoints = rhs.fNEffPoints;<font></font>
  fGrad = rhs.fGrad;<font></font>
  fIsExtended = rhs.fIsExtended;<font></font>
  fWeight = rhs.fWeight;<font></font>
  fExecutionPolicy = rhs.fExecutionPolicy;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
オーバーロードされたステートメントには戻り値がありません。</font><font style="vertical-align: inherit;">また、最近非常に一般的な問題です。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V596</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オブジェクトは作成されましたが、使用されていません。</font><font style="vertical-align: inherit;">'throw'キーワードが欠落している可能性があります：throw runtime_error（FOO）; </font><font style="vertical-align: inherit;">RTensor.hxx 363</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> Value_t, <span class="hljs-keyword">typename</span> Container_t&gt;
<span class="hljs-keyword">inline</span> RTensor&lt;Value_t, Container_t&gt; RTensor&lt;Value_t, Container_t&gt;::Transpose()<font></font>
{<font></font>
  <span class="hljs-keyword">if</span> (fLayout == MemoryLayout::RowMajor) {<font></font>
    fLayout = MemoryLayout::ColumnMajor;<font></font>
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (fLayout == MemoryLayout::ColumnMajor) {<font></font>
    fLayout = MemoryLayout::RowMajor;<font></font>
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-built_in">std</span>::runtime_error(<span class="hljs-string">"Memory layout is not known."</span>);<font></font>
  }<font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
エラーは、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">throw</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">キーワードが誤って忘れられていること</font><font style="vertical-align: inherit;">です。</font><font style="vertical-align: inherit;">その結果、このコードはエラーの場合に例外をスローしません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
合計で、そのような場所は2つありました。</font><font style="vertical-align: inherit;">二番目：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V596オブジェクトは作成されましたが、使用されていません。</font><font style="vertical-align: inherit;">'throw'キーワードが欠落している可能性があります：throw runtime_error（FOO）; </font><font style="vertical-align: inherit;">Forest.hxx 137</font></font></li>
</ul><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V609</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ゼロで除算します。</font><font style="vertical-align: inherit;">分母の範囲[0..100]。</font><font style="vertical-align: inherit;">TGHtmlImage.cxx 340</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span> *<span class="hljs-title">TGHtml::GetPctWidth</span><span class="hljs-params">(TGHtmlElement *p, <span class="hljs-keyword">char</span> *opt, <span class="hljs-keyword">char</span> *ret)</span>
</span>{
  <span class="hljs-keyword">int</span> n, m, val;<font></font>
  ....<font></font>
  <span class="hljs-keyword">if</span> (n &lt; <span class="hljs-number">0</span> || n &gt; <span class="hljs-number">100</span>) <span class="hljs-keyword">return</span> z;
  <span class="hljs-keyword">if</span> (opt[<span class="hljs-number">0</span>] == <span class="hljs-string">'h'</span>) {<font></font>
    val = fCanvas-&gt;GetHeight() * <span class="hljs-number">100</span>;<font></font>
  } <span class="hljs-keyword">else</span> {<font></font>
    val = fCanvas-&gt;GetWidth() * <span class="hljs-number">100</span>;<font></font>
  }<font></font>
  <span class="hljs-keyword">if</span> (!fInTd) {
    <span class="hljs-built_in">snprintf</span>(ret, <span class="hljs-number">15</span>, <span class="hljs-string">"%d"</span>, val / n);  <span class="hljs-comment">// &lt;=</span>
  } <span class="hljs-keyword">else</span> {<font></font>
    ....<font></font>
  }<font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
配列について前述したのと同様のケース。</font><font style="vertical-align: inherit;">ここでは、変数</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nは</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 0から100までの値の範囲に制限されています。この場合、値0の変数nによる除算が発生するコード分岐があります。最も可能性が高いのは、nの値の制限を次のように書き換える必要があることです。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">if</span> (n &lt;= <span class="hljs-number">0</span> || n &gt; <span class="hljs-number">100</span>) <span class="hljs-keyword">return</span> z;</code></pre><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V646</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アプリケーションのロジックの検査を検討してください。</font><font style="vertical-align: inherit;">「else」キーワードが欠落している可能性があります。</font><font style="vertical-align: inherit;">TProofServ.cxx 729</font></font><br>
<br>
<pre><code class="cpp hljs">TProofServ::TProofServ(Int_t *argc, <span class="hljs-keyword">char</span> **argv, FILE *flog)<font></font>
       : TApplication(<span class="hljs-string">"proofserv"</span>, argc, argv, <span class="hljs-number">0</span>, <span class="hljs-number">-1</span>)<font></font>
{<font></font>
  ....<font></font>
  <span class="hljs-keyword">if</span> (!logmx.IsDigit()) {
    <span class="hljs-keyword">if</span> (logmx.EndsWith(<span class="hljs-string">"K"</span>)) {<font></font>
      xf = <span class="hljs-number">1024</span>;<font></font>
      logmx.Remove(TString::kTrailing, <span class="hljs-string">'K'</span>);<font></font>
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (logmx.EndsWith(<span class="hljs-string">"M"</span>)) {<font></font>
      xf = <span class="hljs-number">1024</span>*<span class="hljs-number">1024</span>;<font></font>
      logmx.Remove(TString::kTrailing, <span class="hljs-string">'M'</span>);<font></font>
    } <span class="hljs-keyword">if</span> (logmx.EndsWith(<span class="hljs-string">"G"</span>)) {<font></font>
      xf = <span class="hljs-number">1024</span>*<span class="hljs-number">1024</span>*<span class="hljs-number">1024</span>;<font></font>
      logmx.Remove(TString::kTrailing, <span class="hljs-string">'G'</span>);<font></font>
    }<font></font>
  }<font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アナライザーが奇妙なフォーマットを検出しました。</font><font style="vertical-align: inherit;">1つの場所で、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">else</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">キーワードがありません</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">コードによると、コードは本当に修正する価値があると想定できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同時に修正するいくつかの場所：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V646アプリケーションのロジックの検査を検討してください。</font><font style="vertical-align: inherit;">「else」キーワードが欠落している可能性があります。</font><font style="vertical-align: inherit;">TFormula_v5.cxx 3702</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V646アプリケーションのロジックの検査を検討してください。</font><font style="vertical-align: inherit;">「else」キーワードが欠落している可能性があります。</font><font style="vertical-align: inherit;">RooAbsCategory.cxx 604</font></font></li>
</ul><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V663</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">無限ループが可能です。</font><font style="vertical-align: inherit;">'cin.eof（）'条件はループから抜け出すには不十分です。</font><font style="vertical-align: inherit;">条件式に 'cin.fail（）'関数呼び出しを追加することを検討してください。</font><font style="vertical-align: inherit;">メソッドKNN.cxx 602</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">void</span> TMVA::MethodKNN::ReadWeightsFromStream(<span class="hljs-built_in">std</span>::istream&amp; is)<font></font>
{<font></font>
  ....<font></font>
  <span class="hljs-keyword">while</span> (!is.eof()) {
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span> line;
    <span class="hljs-built_in">std</span>::getline(is, line);<font></font>
<font></font>
    <span class="hljs-keyword">if</span> (line.empty() || line.find(<span class="hljs-string">"#"</span>) != <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span>::npos) {
       <span class="hljs-keyword">continue</span>;<font></font>
    }<font></font>
    ....<font></font>
  }<font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">std :: istream</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
クラス</font><font style="vertical-align: inherit;">を使用する場合、ループを完了するに</font><font style="vertical-align: inherit;">は</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">eof（）</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">関数を呼び出すだけでは不十分</font><font style="vertical-align: inherit;">です。</font><font style="vertical-align: inherit;">データの読み取り中にエラーが発生した場合、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">eof（）</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">関数</font><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">呼び出す</font><font style="vertical-align: inherit;">と常に</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">false</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が返さ</font><font style="vertical-align: inherit;">れ、このコードにはループの他の出口点はありません。</font><font style="vertical-align: inherit;">この場合にループを完了するには、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fail（）</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">関数によって返された値の追加チェックが必要です</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">while</span> (!is.eof() &amp;&amp; !is.fail())<font></font>
{ <font></font>
....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
または単に書く：</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">while</span> (is)<font></font>
{ <font></font>
....<font></font>
}</code></pre><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V678</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オブジェクトはそれ自身のメソッドへの引数として使用されます。</font><font style="vertical-align: inherit;">「コピー」関数の最初の実引数を確認することを検討してください。</font><font style="vertical-align: inherit;">TFormLeafInfo.cxx 2414</font></font><br>
<br>
<pre><code class="cpp hljs">TFormLeafInfoMultiVarDim::TFormLeafInfoMultiVarDim(
  <span class="hljs-keyword">const</span> TFormLeafInfoMultiVarDim&amp; orig) : TFormLeafInfo(orig)<font></font>
{<font></font>
   fNsize = orig.fNsize;<font></font>
   fSizes.Copy(fSizes);   <span class="hljs-comment">// &lt;=</span>
   fCounter2 = orig.fCounter2?orig.fCounter2-&gt;DeepCopy():<span class="hljs-number">0</span>;<font></font>
   fSumOfSizes = orig.fSumOfSizes;<font></font>
   fDim = orig.fDim;<font></font>
   fVirtDim = orig.fVirtDim;<font></font>
   fPrimaryIndex = orig.fPrimaryIndex;<font></font>
   fSecondaryIndex = orig.fSecondaryIndex;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最後に、そのようなエラーがあります。</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fSizesの</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代わりに、</font><i><font style="vertical-align: inherit;">orig.fSizesを</font></i><i><font style="vertical-align: inherit;">Copy</font></i><font style="vertical-align: inherit;">関数</font><font style="vertical-align: inherit;">に渡す</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">必要があり</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ました</font><font style="vertical-align: inherit;">。</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">結論</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1年ほど前に、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NCBI Genome Workbench</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プロジェクトコードの概要が</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">提供されました</font></a><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">このプロジェクトは科学研究でも使用されていますが、ゲノムでも使用されています。</font><font style="vertical-align: inherit;">私が主導するところでは、この領域のソフトウェアは非常に重要ですが、その品質には十分な注意が払われていません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ちなみに、先日macOS 10.15 Catalinaが出て、32ビットアプリケーションのサポートを拒否しました。</font><font style="vertical-align: inherit;">また、PVS-Studioには、プログラムを64ビットシステムに移植するときに問題を特定するための多数のルールがあります。</font><font style="vertical-align: inherit;">詳しくは、</font><font style="vertical-align: inherit;">アナライザーのブログ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">投稿を</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ご覧ください</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/c78/30f/70c/c7830f70c5577c3d6704f254d7cad6a3.png" align="left"></a></p><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この記事を英語を話す視聴者と共有したい場合は、翻訳へのリンクを使用してください：Svyatoslav Razmyslov。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ROOTコードの分析、科学データ分析フレームワーク</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja472482/index.html">放射能事故：プルトニウムの固体安定相の発見</a></li>
<li><a href="../ja472484/index.html">Kubernetesクラスターの穴を閉じる。DevOpsConfによるレポートと筆記録</a></li>
<li><a href="../ja472486/index.html">長期データストレージ。（記事-ディスカッション）</a></li>
<li><a href="../ja472488/index.html">DevOops 2019の30のレポート：Tim Lister、Hadi Hariri、Roman Shaposhnik、その他の国際的なDevOpsのスター</a></li>
<li><a href="../ja472490/index.html">自然言語処理を使用して美容標準を検索した方法（およびそれが見つからなかった方法）</a></li>
<li><a href="../ja472496/index.html">CSSグリッドでのスクラップブックレイアウトの作成</a></li>
<li><a href="../ja472502/index.html">SOC is people：サイバー攻撃の監視と対応のためのセンターのサービスマネージャーの過酷な日常生活</a></li>
<li><a href="../ja472506/index.html">間違いはどこですか、ビリー？私たちは間違いが必要です...</a></li>
<li><a href="../ja472508/index.html">フラッシュの信頼性：予想と予想外。パート3。XIVUSENIX協会会議。ファイルストレージテクノロジー</a></li>
<li><a href="../ja472514/index.html">アイデアの発見から完成したアプリケーションまで</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>