<!doctype html>
<html class="no-js" lang="zh-CN">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👞 👂🏼 🖐🏽 ASCII游戏-真实性和便利性的折衷 🎢 ⏬ 🧕</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="大家好！在开发风格化为文本模式的游戏时，我遇到了预期的矛盾。一方面，游戏应该充满文字模式的精神，因为为此我喜欢它，并且我希望复古游戏的迷们会喜欢它。另一方面，我希望游戏玩法尽可能愉快和现代。在本文中，我将描述偏离真实文本模式的五个要点。我是否设法在游戏中保持电子管字母数字的心情？我要求发表意见！
 ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>ASCII游戏-真实性和便利性的折衷</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/493192/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">大家好！</font><font style="vertical-align: inherit;">在开发风格化为文本模式的游戏时，我遇到了预期的矛盾。</font><font style="vertical-align: inherit;">一方面，游戏应该充满文字模式的精神，因为为此我喜欢它，并且我希望复古游戏的迷们会喜欢它。</font><font style="vertical-align: inherit;">另一方面，我希望游戏玩法尽可能愉快和现代。</font><font style="vertical-align: inherit;">在本文中，我将描述偏离真实文本模式的五个要点。</font><font style="vertical-align: inherit;">我是否设法在游戏中保持电子管字母数字的心情？</font><font style="vertical-align: inherit;">我要求发表意见！</font></font><br>
<br>
<img src="https://habrastorage.org/webt/3m/au/i_/3maui_cqcqdkfsxpfwj-us8x0e4.jpeg"><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.字符集</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
绝对游戏中的所有图形都是使用在键盘上键入的字符制作的。</font><font style="vertical-align: inherit;">更准确地说，使用了ASCII表中从第32个字符到第126个字符的字符。</font></font><br>
 <br>
<img src="https://habrastorage.org/webt/11/7_/e7/117_e79lbv7xxuzovttn1i3e7hy.png"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
但是，游戏中的文本以几种语言本地化。</font><font style="vertical-align: inherit;">现在，我同时支持俄语和英语，但是我想添加更多内容，包括中文。</font><font style="vertical-align: inherit;">ASCII表中的字符，甚至扩展表中的字符，显然也不足以满足这些目的。</font></font><br>
 <br>
<img src="https://habrastorage.org/webt/du/cl/oa/ducloab5-3du4oldzbmxptnvvja.jpeg"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
游戏中的对话框中可能包含不是真实范围内的字符。</font><font style="vertical-align: inherit;">但是，这些字符不参与设计。</font><font style="vertical-align: inherit;">图形仅是ASCII。</font></font><br>
 <br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.子字符精度</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
与文本模式不同，ASCIIDENT使用像素精度来移动文本层和移动精灵。</font></font><br>
 <br>
<img src="https://habrastorage.org/webt/0o/l0/op/0ol0ophebaebco715pyi0kic2e4.gif"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在文本模式下，精灵移动一个位置看起来像是一个明显的跳跃。对于像ASCIIDENT这样的动态游戏-从现代游戏体验的角度来看，这是不可接受的。因此，对于稍后将要讨论的各个精灵和文本层，我进行了平滑的移动。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
为了保持真实性，我遵守以下规则。在一个文本层内，所有静态对象在字符网格上均清晰对齐。而且，每个精灵都由字符组成，这些字符也对齐在字符网格上。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
相对于彼此，层和移动物体可以位于亚符号距离处。</font><font style="vertical-align: inherit;">这样可确保动作平稳，并因此带来舒适的游戏体验。</font><font style="vertical-align: inherit;">这是一个妥协。</font></font><br>
 <br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.视差</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
该游戏具有多个以不同速度移动的文本层，从而实现了视差效果。</font><font style="vertical-align: inherit;">上层的符号与下层的符号重叠。</font><font style="vertical-align: inherit;">对于子字符精度，重叠条件是文本单元格的宽度和/或高度的50％以上的覆盖。</font><font style="vertical-align: inherit;">使用简单的z缓冲区，这种重叠很容易实现。</font></font><br>
 <br>
<img src="https://habrastorage.org/webt/tx/6f/sf/tx6fsfikvf90-erih8upoha3ssi.gif"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
视差与层的平滑移动是一种非常有表现力的图形技术。</font><font style="vertical-align: inherit;">是的，它可能会严重违反文本模式的真实性。</font><font style="vertical-align: inherit;">但是，我决定使用视差。</font><font style="vertical-align: inherit;">结果非常漂亮。</font></font><br>
 <br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.动画</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
严格按照文本模式制作的“诚实”游戏中的各个精灵动画。每个字符的位置在文本网格上对齐。通过替换单元格中的字符来获得动画。</font></font><br>
 <br>
<img src="https://habrastorage.org/webt/rq/-n/bt/rq-nbtwibvurx8nqe48jrl928fw.gif"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我发现保持Sprite动画的完整性非常重要。这可能是使游戏具有复古吸引力的主要原因。此外，使用这种动画类型，创建和编辑动画ASCII精灵在技术上变得非常简单。我无法抗拒，并在游戏中制作了内置的ASCII编辑器。任何时候都可以将任何图形元素加载到其中并进行更改。例如，您可以通过添加动画帧来编辑箱子，将所有箱子保存在游戏后的所有位置后，它将变成新的箱子。任何玩家都可以做到这一点，从而创建自己的游戏模式。</font></font><br>
 <br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/AZw6BZaF250" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
但是，有时您需要平滑的动画！</font><font style="vertical-align: inherit;">例如，在游戏中，存在生长生物光纤的地方。</font><font style="vertical-align: inherit;">无人机在病床上空飞来，用有毒液体冲洗光纤。</font><font style="vertical-align: inherit;">液体应平稳滴落，否则难看。</font><font style="vertical-align: inherit;">为了实现这种效果，我制作了精灵生成器并将其绑定到游戏世界中的任何其他精灵。</font><font style="vertical-align: inherit;">从技术上讲，每个液滴都是一个可以以亚像素精度移动的单独的精灵。</font><font style="vertical-align: inherit;">再次合理折衷。</font></font><br>
 <br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.浅色，颜色和字体</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
向我展示游戏的许多人都说我的游戏中的颜色太多。在文本模式下，没有如此丰富的阴影。事实是，我实现了可计算任意数量光源的全屏光照贴图。同时，每个字符的颜色为24位（16,777,216种不同的颜色）。有时图片看起来很彩色。</font></font><br>
 <br>
<img src="https://habrastorage.org/webt/ta/5h/2i/ta5h2i1ijypt1yhav7kwmikgn1w.gif"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
为了模拟复古色彩模式，我提供了七个附加选项：三个单色模式，两个16色模式（DOS / Mac），2位和Game Boy模式。 LED字体模式也可用。在这种模式下，每个字符的每个像素都与相邻像素分开。以下视频显示了所有模式-它们如何影响图片。</font></font><br>
 <br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/Xnl4sGhA0m0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
用于单色模式的颜色转换算法可以做到这一点。首先，我计算色彩亮度（R，G，B）：</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
V = 0.3 * R + 0.59 * G + 0.11 * B </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
单色复古显示器针对不同的符号亮度具有不同的色调。因此，阴影也必须改变。我使用这样的线性插值：</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
RR = sqrt（V）*（monoR1 *（1-V）+ monoR2 * V）</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
GG = sqrt（V）*（monoG1 *（1-V）+ monoG2 * V）</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
BB = sqrt（V ）*（monoB1 *（1-V）+ monoB2 * V）</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最终颜色（RR，GG，BB）</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
对于16色模式，我使用了不同的算法。对于每种颜色（R，G，B），我正在寻找调色板中最接近的颜色。就这样。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2位和Game Boy模式在调色板中只有四种颜色。</font><font style="vertical-align: inherit;">简单搜索最接近的颜色会得到非常暗的图像。</font><font style="vertical-align: inherit;">因此，在调色板中寻找颜色之前，我先进行归一化：</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
d = 1 / max（R，G，B）</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
normR = d * R，normG = d * G，normB = d * B </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
公式是示意性的。</font><font style="vertical-align: inherit;">除以零的检查没有提及。</font><font style="vertical-align: inherit;">我希望每个决定玩ASCIIDENT的人都能为自己选择一种配色方案，以最大程度地温暖他或她的复古灵魂。</font></font><br>
 <br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.具有诚实文本模式的控制台</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在创建游戏的过程中，出现了将具有真实文本模式的计算机终端引入游戏世界的想法。您可以接近他们，建立联系并进行工作/娱乐。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如果将游戏本身设置为80x25文本模式，并具有平滑滚动和文本层视差的功能，则内置终端屏幕的分辨率为72x20字符，不可能超出此网格。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
嵌入式终端（包括引导加载程序）的所有应用程序均以DUHASM编程语言编写。该语言类似于汇编程序，但是具有动态变量和数组。例如，这里是Pi-astre Hanter游戏代码的一部分：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/yu/fh/gi/yufhgigy6d6il1scdqgmgaaen4q.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一个有趣的功能-循环是作为条件构造的一部分实现的，条件构造中放置LOOP而不是END。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在启动时，游戏会从* .duhasm文件加载应用程序，并将其编译为字节码。当玩家激活控制台时，将启动一个诚实的解释器。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
目前，我已经在DUHASM上编写了两个游戏，这些游戏在当前版本中已经可用。有计划编写一个代码编辑器（当然也在DUHASM上），以便每个玩家都可以尝试创建所有其他玩家都可以看到的应用程序/游戏。</font></font><br>
 <br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/xlJWOktA9k0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我希望我没有白费力气和时间来实现此功能，并且会有人喜欢它。</font><font style="vertical-align: inherit;">DUHASM语言当然需要进行一些改进。</font><font style="vertical-align: inherit;">我真的不喜欢如何用参数调用函数。</font><font style="vertical-align: inherit;">根据游戏的历史，DUHASM语言由一个半敏感的电子人产生，他逃离了太空海盗实验室。</font><font style="vertical-align: inherit;">令人惊讶的是，这种编程语言已扎根于宇宙居住区域的郊区。</font></font><br>
 <br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">结论</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
好吧，这里有很多折衷方案-一组字符，子字符精度，动画，颜色。</font><font style="vertical-align: inherit;">但是，为了保持对文本模式的真实感，在过去的两年多的时间里，我已经做了很多工作。</font><font style="vertical-align: inherit;">为了获得更多反馈并了解我的前进方向是否正确，我决定从</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Steam的抢先体验</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">开始游戏</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">在文本模式下，有一些神奇的吸引力。</font><font style="vertical-align: inherit;">当可以使用键盘上的字符键入任何图片时，有时很难抗拒并且无法使用内置的ASCII编辑器启动游戏，甚至无法绘制新的迷你游戏的原型，然后将其以DUHASM语言实现。</font></font><br>
 <br>
<img src="https://habrastorage.org/webt/0y/i7/se/0yi7sedgucpkb-nstvzouepmo2s.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
谢谢大家！</font><font style="vertical-align: inherit;">直到！</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN493172/index.html">越大，越差或游戏循环为何重要</a></li>
<li><a href="../zh-CN493178/index.html">一切在软件中都很棒，但每个人都不满意</a></li>
<li><a href="../zh-CN493184/index.html">电子合同开发。项目计算</a></li>
<li><a href="../zh-CN493186/index.html">适用于Habré开发人员的与汽车相关的最佳文章[170+]</a></li>
<li><a href="../zh-CN493190/index.html">我们如何创建神经网络艺术画廊，以及为什么不提供图片复制</a></li>
<li><a href="../zh-CN493196/index.html">在不离开家的情况下为ShAD做准备</a></li>
<li><a href="../zh-CN493198/index.html">如何可视化和动画化（地球物理）模型。体素模型和网格表面</a></li>
<li><a href="../zh-CN493200/index.html">球形马在真空中分布在整个俄罗斯联邦</a></li>
<li><a href="../zh-CN493202/index.html">RBK.money发布了世界上第一个开源支付处理程序-共同创造未来</a></li>
<li><a href="../zh-CN493204/index.html">Alexey Komissarov关于2020年数字突破</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>