<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🕺🏽 🤳🏻 ❔ Die Geschichte eines Schalters 🧒🏾 🎅🏽 #⃣</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In unserer LAN-Aggregation gab es sechs Paare von Arista DCS-7050CX3-32S-Switches und ein Paar Brocade VDX 6940-36Q-Switches. Es ist nicht so, dass Br...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Die Geschichte eines Schalters</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/selectel/blog/498368/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/y6/hn/ng/y6hnnglhd7cga9rdsoloimhiism.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In unserer LAN-Aggregation gab es sechs Paare von Arista DCS-7050CX3-32S-Switches und ein Paar Brocade VDX 6940-36Q-Switches. </font><font style="vertical-align: inherit;">Es ist nicht so, dass Brocade-Switches in diesem Netzwerk uns stark belastet haben, sie arbeiten und führen ihre Funktionen aus, aber wir haben die vollständige Automatisierung einiger Aktionen vorbereitet, und wir hatten diese Funktionen für diese Switches nicht. </font><font style="vertical-align: inherit;">Ich wollte auch von 40GE-Schnittstellen auf die Möglichkeit umsteigen, mit 100GE eine Reserve für die nächsten 2-3 Jahre zu bilden. </font><font style="vertical-align: inherit;">Also beschlossen wir, Brocade gegen Arista auszutauschen.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Diese Switches sind LAN-Aggregations-Switches für jedes Rechenzentrum. </font><font style="vertical-align: inherit;">Verteilungs-Switches (die zweite Aggregationsebene) sind direkt mit ihnen verbunden, die bereits in sich zusammengebaut sind. Top-of-Rack-LAN-Switches in Server-Racks.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/wr/_k/mn/wr_kmn_mxcbk5pzlszif5fwpmmy.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jeder Server ist in einem oder zwei Zugriffsschaltern enthalten. Zugriffsschalter sind mit einem Paar von Verteilungsschaltern verbunden (zwei Verteilungsschalter und zwei physische Verbindungen vom Zugriffsschalter zu verschiedenen Verteilungsschaltern werden aus Redundanzgründen verwendet). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jeder Server kann von seinem Client verwendet werden, sodass dem Client ein separates VLAN zugewiesen wird. Das gleiche VLAN wird dann einem anderen Server dieses Clients in einem beliebigen Rack zugewiesen. Das Rechenzentrum besteht aus mehreren solchen Reihen (PODs). Jede Reihe von Racks verfügt über eigene Verteilungsschalter. Diese Verteilungsschalter werden dann mit den Aggregationsschaltern verbunden.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/oc/2p/r5/oc2pr5parnr_c3-m4s1fswgxlcm.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Clients können einen Server in einer beliebigen Zeile bestellen. Es ist nicht vorhersehbar, dass der Server in einer bestimmten Zeile in einem bestimmten Rack zugewiesen oder installiert wird. Daher befinden sich in jedem Rechenzentrum etwa 2500 VLANs auf Aggregations-Switches. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Geräte für DCI (Data-Center Interconnect) werden mit den Aggregationsschaltern verbunden. Es kann für die L2-Konnektivität (zwei Switches, die einen VXLAN-Tunnel zu einem anderen Rechenzentrum bilden) und für die L3-Konnektivität (zwei MPLS-Router) verwendet werden.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/eh/2a/pg/eh2apgb0jx6excyolzu7hlqwwiy.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie ich bereits schrieb, war es notwendig, zentrale Aggregationsschalter zu ersetzen, um die Prozesse zur Automatisierung der Konfiguration von Diensten auf Geräten in einem Rechenzentrum zu vereinheitlichen. </font><font style="vertical-align: inherit;">Wir installierten neue Schalter neben den vorhandenen, kombinierten sie zu einem MLAG-Paar und bereiteten uns auf die Arbeit vor. </font><font style="vertical-align: inherit;">Sie wurden sofort mit vorhandenen Aggregations-Switches verbunden, sodass sie über alle Client-VLANs hinweg eine gemeinsame L2-Domäne hatten.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schaltungsdetails</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aus Gründen der Spezifität werden wir die alten Aggregationsschalter </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , die neuen </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N2 nennen</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Stellen Sie sich vor, dass in </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">POD 1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">POD 4</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Server eines Clients </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C1 vorhanden sind</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und das VLAN des Clients blau angezeigt wird. Dieser Client verwendet den L2-Konnektivitätsdienst mit einem anderen Rechenzentrum, sodass sein VLAN auf zwei VXLAN-Switches bereitgestellt wird. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Client </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> platziert die Server in </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">POD 2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">POD 3</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , wir bezeichnen das VLAN des Clients als dunkelgrün. Dieser Client verwendet den Konnektivitätsdienst auch mit einem anderen Rechenzentrum, jedoch mit L3, sodass sein VLAN auf einem Paar von L3VPN-Routern bereitgestellt wird.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/pl/tx/8t/pltx8tm018xdgys6sbk08dng6_w.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir benötigen Client-VLANs, um zu verstehen, in welchen Phasen der Austauscharbeiten was passiert, wo die Kommunikationsunterbrechung auftritt und wie lange sie dauern kann. </font><font style="vertical-align: inherit;">Das STP-Protokoll wird in diesem Schema nicht verwendet, da die Breite des Baums in diesem Fall groß ist und die Konvergenz des Protokolls exponentiell von der Anzahl der Geräte und Verbindungen zwischen ihnen zunimmt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alle über Doppelverbindungen verbundenen Geräte bilden einen Stack, ein MLAG-Paar oder eine VCS-Ethernet-Factory. </font><font style="vertical-align: inherit;">Solche Technologien werden nicht für ein Paar L3VPN-Router verwendet, da keine L2-Redundanz erforderlich ist. Es reicht aus, wenn sie über Aggregations-Switches über eine L2-Konnektivität verfügen.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Implementierungsoptionen</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bei der Analyse der Optionen für weitere Ereignisse haben wir festgestellt, dass es verschiedene Möglichkeiten gibt, diese Arbeiten auszuführen. </font><font style="vertical-align: inherit;">Von einer globalen Unterbrechung im gesamten lokalen Netzwerk bis hin zu kleinen Unterbrechungen von buchstäblich 1-2 Sekunden in Teilen des Netzwerks.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Netzwerk, steh! </font><font style="vertical-align: inherit;">Schalter ersetzen!</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der einfachste Weg - ist natürlich, eine globale Unterbrechung in allen POD- und allen Dienst-DCI anzukündigen und alle Verbindungen von dem Schalter </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> in den Schaltern </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">von N zu</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> schalten </font><font style="vertical-align: inherit;">.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/oe/ru/gj/oerugjzsi4pdh1lqcnu5bxyzlra.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zusätzlich zu der Unterbrechung, deren Vorhersage wir nicht garantieren können (ja, wir kennen die Anzahl der Verbindungen, aber wir wissen nicht, wie oft etwas schief gehen wird - von einem defekten Patchkabel oder einem beschädigten Stecker bis zu einer Fehlfunktion eines Anschlusses oder Transceivers), können wir dies immer noch nicht Um im Voraus vorherzusagen, ob die Länge der Patchkabel DAC, AOC, die an die alten Schalter A angeschlossen sind, ausreicht, um sie zu erreichen, obwohl sie neben ihnen stehen, aber immer noch leicht voneinander entfernt sind, funktionieren die neuen Schalter N und ob dieselben Transceiver funktionieren / DAC / AOC von Brocade-Switches in Arista-Switches.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und das alles unter Bedingungen des starken Drucks von Kunden und technischem Support ("Natasha, steh auf! Natasha, dort funktioniert nicht alles! Natasha, wir haben bereits technischen Support geschrieben, ehrlich, ehrlich! Natasha, sie haben bereits alles dort abgelegt! Natasha, aber wie viel nicht wird es funktionieren? Natasha, und wenn es funktioniert ?! ”). </font><font style="vertical-align: inherit;">Trotz einer vorab angekündigten Unterbrechung und Benachrichtigung der Kunden ist ein Zufluss von Anrufen zu einem solchen Zeitpunkt garantiert.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Warten Sie, 1-2-3-4!</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und wenn nicht, um eine globale Unterbrechung zu erklären, sondern um eine Reihe kleiner Unterbrechungen in der Kommunikation über POD- und DCI-Dienste anzukündigen. </font><font style="vertical-align: inherit;">In der ersten Pause schalten Sie </font><font style="vertical-align: inherit;">nur </font><b><font style="vertical-align: inherit;">POD 1 auf </font></b></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Schalter um </font><font style="vertical-align: inherit;">, in der zweiten - nach ein paar Tagen - </font><b><font style="vertical-align: inherit;">POD 2</font></b><font style="vertical-align: inherit;"> , dann nach ein paar Tagen </font><b><font style="vertical-align: inherit;">POD 3</font></b><font style="vertical-align: inherit;"> , dann </font><b><font style="vertical-align: inherit;">POD 4 ... [N]</font></b><font style="vertical-align: inherit;"> , dann VXLAN-Schalter und dann L3VPN-Router.</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/dg/1n/8o/dg1n8oei0wx04clgnk2a0emzu-o.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mit einer solchen Organisation der Wechselarbeit reduzieren wir die Komplexität der einmaligen Arbeit und erhöhen unsere Zeit für die Lösung von Problemen, wenn plötzlich etwas schief geht. Die POD 1-Konnektivität nach dem Umschalten mit einem anderen POD und DCI geht nicht verloren. Die Arbeit selbst verzögert sich jedoch um eine lange Zeit. Für die Zeit dieser Arbeit im Rechenzentrum muss ein Techniker die Umschaltung physisch durchführen, und während der Arbeit (und diese Arbeit wird normalerweise nachts von 2 bis 5 Uhr morgens ausgeführt) ist die Anwesenheit eines Online-Netzwerktechnikers recht hoch Qualifikationen. Wir erhalten jedoch kurze Kommunikationspausen. In der Regel können Arbeiten im Halbstundenintervall mit einer Pause von bis zu 2 Minuten ausgeführt werden (in der Praxis häufig 20 bis 30 Sekunden mit dem erwarteten Verhalten der Geräte). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im obigen Beispiel Client </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> oder Client </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Sie müssen mindestens dreimal vor Arbeiten mit Kommunikationsunterbrechungen warnen - das erste Mal, wenn Arbeiten an einem POD ausgeführt werden, auf dem sich einer seiner Server befindet, das zweite Mal - beim zweiten und dritten Mal -, wenn Geräte für DCI-Dienste gewechselt werden.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aggregierte Kommunikationskanäle wechseln</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Warum sprechen wir über das erwartete Verhalten der Geräte und wie können aggregierte Kanäle bei Minimierung von Kommunikationsunterbrechungen umgeschaltet werden? </font><font style="vertical-align: inherit;">Stellen Sie sich folgendes Bild vor:</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/s0/g5/4b/s0g54bkj-ujiumk0egmyp7ookv0.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Einerseits bilden die Link-POD-Verteilungsschalter </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ein MLAG-Paar (Stack, VCS-Factory, vPC-Paar), andererseits sind zwei Links - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Link 1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Link 2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - im alten MLAG-Paar enthalten Aggregationsschalter </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Auf der Seite </font><font style="vertical-align: inherit;">bildeten </font><font style="vertical-align: inherit;">die Schalter </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> eine Aggregatschnittstelle, die als </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Port-Kanal A bezeichnet wurde</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , auf der Seite der Aggregationsschalter </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - eine Aggregatschnittstelle, die als </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Port D-Kanal bezeichnet wurde</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aggregierte Schnittstellen verwenden LACP in ihrer Arbeit, dh die Switches auf beiden Seiten tauschen regelmäßig LACPDU-Pakete auf beiden Links aus, um sicherzustellen, dass die Links:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arbeitskräfte;</font></font></li>
<li>       .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beim Austausch von Paketen in einem Paket wird der </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">System-ID-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Wert übertragen </font><font style="vertical-align: inherit;">, der das Gerät angibt, auf dem diese Verbindungen enthalten sind. Für ein MLAG-Paar (Stack, Factory usw.) ist der Wert der System-ID für die Geräte, die die aggregierte Schnittstelle bilden, der gleiche. Der Schalter </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sendet eine </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Link 1-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Wertesystem </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-ID-D</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , und der Schalter </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sendet eine </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Link 2-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Wertesystem </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-ID-D</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Switches </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> analysieren die auf derselben Po D-Schnittstelle empfangenen LACPDU-Pakete und überprüfen, ob die darin enthaltene System-ID übereinstimmt. Wenn die von einer Verbindung empfangene System-ID plötzlich </font><b><font style="vertical-align: inherit;">vom aktuellen Arbeitswert</font></b><font style="vertical-align: inherit;"> abweicht</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dann wird dieser Link von der aggregierten Schnittstelle entfernt, bis die Situation korrigiert ist. </font><font style="vertical-align: inherit;">Jetzt wechseln wir zur Seite </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> den aktuellen Wert der System-ID LACP-Partner - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und schalten auf Seite </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - den aktuellen System-ID-Wert des LACP-Partners - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D um</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<blockquote><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn Sie die aggregierte Schnittstelle wechseln müssen, haben wir zwei verschiedene Möglichkeiten:</font></font></b></blockquote><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Methode 1 - Einfach</font></font></b>
                        <div class="spoiler_text"><b>     A</b>.      .<br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/4x/y3/1f/4xy31fons85dmc1xqmyoatx3cok.jpeg"></div></a><br>
       <b>N</b>,       LACP,   <b>Po D</b>   <b>N</b>      <b>system-id N</b>.<br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/9o/-x/d2/9o-xd2p6oyk3x_yxroz_tlh6hbc.jpeg"></div></a><br>
</div>
                    </div><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Methode 2 - Pause minimieren</font></font></b>
                        <div class="spoiler_text"><b>   2  Link 2</b>.     <b></b>  <b>D</b>       ,      .<br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/hw/u-/zy/hwu-zy2rypxofaqv9llskenulbm.jpeg"></div></a><br>
<b> Link 2   N2</b>.   <b>N</b>     <b>Po DN</b>,   <b>N2</b>    LACPDU <b>system-id N</b>.       ,   <b>N2</b>    ,   <b>Link 2</b>,       <b>Up</b>,     LACPDU      .<br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/cw/cy/st/cwcysth25wi_quoldhjghlysgx8.jpeg"></div></a><br>
  ,   <b>D2</b>    <b>Po A</b>   <b>Link 2   system-id N,      system-id A</b>,    <b>D</b>  <b>Link 2</b>     <b>Po A</b>.  <b>N</b>    <b>Link 2</b>  ,          LACP-  <b>D2</b>.     <b>Link 2</b>  .<br>
<br>
<b>    Link 1   A1</b>,     <b></b>  <b>D</b>   .  ,    <b>D</b>     system-id   <b>Po A</b>.<br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/me/uw/8u/meuw8uq0g5lglbxkt6qwbdiodtg.jpeg"></div></a><br>
   <b>D</b>  <b>N</b>    system-id <b>A-N</b>   <b>Po A</b>  <b>Po DN</b>,        <b>Link 2</b>.     ,  ,  2 .<br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/rj/zs/ai/rjzsai50lw8dbbxbk0ntlicofoa.jpeg"></div></a><br>
<b>     Link 1   N1</b>,       <b>Po A</b>  <b>Po DN</b>.           system-id    ,    .<br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/vd/8_/3c/vd8_3cszxwsxtwdcrewohql3arg.jpeg"></div></a><br>
</div>
                    </div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zusätzliche Links</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Umschalten kann jedoch ohne die Anwesenheit eines Ingenieurs zum Zeitpunkt des Umschaltens erfolgen. </font><font style="vertical-align: inherit;">Dazu müssen wir zusätzliche Verknüpfungen zwischen den </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Verteilungsschaltern </font><font style="vertical-align: inherit;">und den neuen </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Aggregationsschaltern </font><font style="vertical-align: inherit;">vorab herstellen </font><font style="vertical-align: inherit;">.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/du/sb/3h/dusb3hcwgnj_rt8kgkusiitltdk.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir stellen neue Verbindungen zwischen </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Aggregationsschaltern </font><font style="vertical-align: inherit;">und allen POD-Verteilungsschaltern her. Dies erfordert Ordnung und Verlegung zusätzlicher Patchkabel und zusätzliche Transceiver in beide installieren </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">von N</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , und in </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Wir können dies tun, weil wir </font><font style="vertical-align: inherit;">freie Ports </font><font style="vertical-align: inherit;">in den </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Schaltern </font><font style="vertical-align: inherit;">jedes POD haben (oder wir geben sie zuerst frei). </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Infolgedessen ist jeder POD physisch durch zwei Verbindungen mit den alten Schaltern A und den neuen Schaltern N verbunden.</font></font></b><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/32/wj/m-/32wjm-s5ehe6o1vlkvtrhcpn_mq.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zwei aggregierte Schnittstellen werden </font><font style="vertical-align: inherit;">
auf dem Schalter </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Po A</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mit den Verbindungen </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Link 1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Link 2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Po N</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mit den Verbindungen </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Link N1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Link N2 gebildet</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . In dieser Phase überprüfen wir die korrekte Verbindung von Schnittstellen und Verbindungen, die Pegel der optischen Signale an beiden Enden der Verbindungen (über DDM-Informationen von den Switches), können sogar die Arbeitskapazität der Verbindung unter Last überprüfen oder den Status der optischen Signale und der Transceiver-Temperaturen für einige Tage überwachen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Verkehr wird weiterhin über die </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Po A-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Schnittstelle übertragen, während die </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Po N-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Schnittstelle </font><font style="vertical-align: inherit;">frei von Verkehr ist. Die Einstellungen an den Schnittstellen sind ungefähr wie folgt:</font></font><br>
<br>
<pre><code class="plaintext hljs">Interface Port-channel A<font></font>
Switchport mode trunk<font></font>
Switchport allowed vlan C1, C2<font></font>
<font></font>
Interface Port-channel N<font></font>
Switchport mode trunk<font></font>
Switchport allowed vlan none</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Switches D unterstützen in der Regel Änderungen der Sitzungskonfiguration. Solche Switch-Modelle mit dieser Funktionalität werden verwendet. So können wir die Einstellungen der Po A- und Po N-Schnittstellen auf einmal ändern:</font></font><br>
<br>
<pre><code class="plaintext hljs">Configure session<font></font>
Interface Port-channel A<font></font>
Switchport allowed vlan none<font></font>
Interface Port-channel N<font></font>
Switchport allowed vlan C1, C2<font></font>
Commit</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dann erfolgt die Konfigurationsänderung schnell genug, und die Pause beträgt in der Praxis nicht mehr als 5 Sekunden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Diese Methode ermöglicht es uns, alle vorbereitenden Arbeiten im Voraus durchzuführen, alle erforderlichen Überprüfungen durchzuführen, die Arbeit mit den Teilnehmern des Prozesses zu koordinieren, die Maßnahmen für die Produktion von Arbeiten ohne kreative Arbeit detailliert vorherzusagen, wenn „alles schief gelaufen ist“, und einen Plan zur Rückkehr zur vorherigen Konfiguration zur Hand zu haben. </font><font style="vertical-align: inherit;">Die Arbeiten an diesem Plan werden von einem Netzwerktechniker durchgeführt, ohne dass ein Rechenzentrum vor Ort des Ingenieurs vorhanden ist, der die Umschaltung physisch durchführt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Was bei dieser Schaltmethode wichtiger ist - alle neuen Links sind bereits für die Überwachung voreingestellt. </font><font style="vertical-align: inherit;">Fehler, Aufnahme von Links in das Gerät, Laden von Links - alle notwendigen Informationen befinden sich bereits im Überwachungssystem und sind bereits auf den Karten verzeichnet.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D-Tag</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pod</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir haben den für Kunden am wenigsten schmerzhaften und am wenigsten anfälligen Schaltpfad "Etwas ist schief gelaufen" mit zusätzlichen Links ausgewählt. </font><font style="vertical-align: inherit;">Für ein paar Nächte haben wir alle PODs auf die neuen Aggregationsschalter umgestellt.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/lm/c0/oa/lmc0oafevg5twt9amzd2thudqgm.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es bleibt jedoch, Geräte zu wechseln, die DCI-Dienste bereitstellen.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L2</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bei Geräten mit L2-Konnektivität konnten wir keine ähnlichen Arbeiten mit zusätzlichen Verbindungen ausführen. </font><font style="vertical-align: inherit;">Dafür gibt es mindestens zwei Gründe:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fehlende freie Ports mit der erforderlichen Geschwindigkeit für VXLAN-Switches.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fehlende Funktionalität für Änderungen der Sitzungskonfiguration auf VXLAN-Switches.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir haben die Links nicht "einzeln" mit einer Unterbrechung nur für die Dauer der Genehmigung eines neuen Paares von System-IDs gewechselt, da wir nicht 100% ig sicher waren, dass das Verfahren korrekt ist, und ein Test im Labor hat dies in diesem Fall gezeigt Wenn „etwas schief geht“, kommt es immer noch zu einer Verbindungsunterbrechung. Das Schlimmste ist nicht nur für Kunden, die über eine L2-Konnektivität mit anderen Rechenzentren verfügen, sondern für alle Kunden dieses Rechenzentrums im Allgemeinen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir haben vorab Propagandaarbeiten zum Umschalten von L2-Kanälen durchgeführt, sodass die Anzahl der Kunden, die von Operationen auf VXLAN-Switches betroffen waren, bereits vor einem Jahr um ein Vielfaches geringer war. </font><font style="vertical-align: inherit;">Aus diesem Grund haben wir beschlossen, die Kommunikation mit dem L2-Konnektivitätsdienst zu unterbrechen, sofern wir den normalen Betrieb lokaler Netzwerkdienste in einem Rechenzentrum aufrechterhalten. </font><font style="vertical-align: inherit;">Darüber hinaus bietet das SLA für diesen Dienst die Möglichkeit einer geplanten Arbeit mit einer Pause.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L3</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Warum haben wir jedem empfohlen, bei der Organisation von DCI-Diensten auf L3VPN umzusteigen? Einer der Gründe ist die Möglichkeit, auf einem der Router, die diesen Dienst bereitstellen, einfach mit einer Reduzierung des Redundanzniveaus auf N + 0 ohne Unterbrechung der Kommunikation zu arbeiten. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Betrachten Sie das Schema der Leistungserbringung genauer. In diesem Dienst geht das L2-Segment nur von Client-Servern zu L3VPN Selectel-Routern. Auf Routern wird das Client-Netzwerk beendet. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jeder Client-Server, z. B. </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S3</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> im obigen Diagramm, hat seine eigenen privaten IP-Adressen - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.0.0.2/24 für den S2-Server</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.0.0.3/24 für den S3-Server</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Adressen </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.0.0.252/24</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.0.0.253/24</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">von Selectel den Routern </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L3VPN-1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> bzw. </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L3VPN-2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> zugewiesen </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Die IP-Adresse </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.0.0.254/24 ist eine VRRP-VIP-Adresse</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> auf Selectel-Routern.</font></font><br>
<br>
<blockquote><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sie können </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lesen</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Sie mehr über den L3VPN Service </font><font style="vertical-align: inherit;">in unserem Blog.</font></font></b></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bis zum Zeitpunkt des Wechsels sah alles ungefähr so ​​aus wie in der Abbildung:</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/lu/z9/_l/luz9_l1950pk5r3vr5hrn-tdnss.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zwei Router </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L3VPN-1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L3VPN-2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> wurden an die alte Switch-Aggregation </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A angeschlossen</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Der Master für VRRP VIP-Adressen 10.0.0.254 ist der </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L3VPN-1-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Router </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Diese Adresse hat eine höhere Priorität als die des </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L3VPN-2-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Routers </font><font style="vertical-align: inherit;">.</font></font><br>
<br>
<pre><code class="plaintext hljs">unit 1006 {<font></font>
    description C2;<font></font>
    vlan-id 1006;<font></font>
    family inet {       <font></font>
        address 10.0.0.252/24 {<font></font>
            vrrp-group 1 {<font></font>
                priority 200;<font></font>
                virtual-address 10.100.0.254;<font></font>
                preempt {<font></font>
                    hold-time 120;<font></font>
                }<font></font>
                accept-data;<font></font>
            }<font></font>
        }<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der S2-Server verwendet das 10.0.0.254-Gateway, um mit Servern an anderen Standorten zu kommunizieren. </font><font style="vertical-align: inherit;">Das Trennen des L3VPN-2-Routers vom Netzwerk (natürlich, wenn Sie ihn zuerst von der MPLS-Domäne trennen) wirkt sich daher nicht auf die Konnektivität der Client-Server aus. </font><font style="vertical-align: inherit;">Zu diesem Zeitpunkt nimmt der Redundanzpegel der Schaltung einfach ab.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/gj/oi/sk/gjoiskqum4kmknfm8u36cf5v44w.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Danach können wir den </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L3VPN-2-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Router sicher wieder </font><font style="vertical-align: inherit;">mit dem Paar </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Switches verbinden </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Layouts auslegen, Transceiver wechseln. </font><font style="vertical-align: inherit;">Die logischen Schnittstellen des Routers, von denen die Arbeit der Clientdienste abhängt, werden deaktiviert, bis bestätigt wird, dass alles ordnungsgemäß funktioniert. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nach Überprüfung der Verbindungen, Transceiver, Signalpegel und Fehlerpegel an den Schnittstellen wird der Router in Betrieb genommen, ist jedoch bereits mit einem neuen Switch-Paar verbunden.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/jb/dh/cs/jbdhcsuakuma1fofufzc-pp0poy.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als nächstes senken wir die VRRP-Priorität des L3VPN-1-Routers und die VIP-Adresse 10.0.0.254 wird auf den L3VPN-2-Router verschoben. </font><font style="vertical-align: inherit;">Diese Arbeiten werden auch ohne Unterbrechung der Kommunikation durchgeführt.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/ix/uq/lq/ixuqlq5wx5veluojqgpwfy8yewu.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
VIP-Adresse an Router übertragen 10.0.0.254 Mit </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L3VPN-2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> können Sie den Router </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L3VPN-1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ohne Unterbrechung des Kontakts für den Client </font><font style="vertical-align: inherit;">deaktivieren </font><font style="vertical-align: inherit;">und mit einem neuen Paar von Aggregationsschaltern </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">von N verbinden</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/lx/vo/jv/lxvojv_hiozuurqfsyonclwjez4.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es ist eine andere Frage, ob VRRP VIP an den L3VPN-1-Router zurückgegeben werden soll oder nicht. Wenn Sie zurückkehren, erfolgt dies ohne Unterbrechung.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gesamt</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nach all diesen Schritten haben wir die Aggregationsschalter in einem unserer Rechenzentren wirklich ersetzt und gleichzeitig die Pausen für unsere Kunden minimiert.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/fw/d1/jx/fwd1jxarjvfl1agcko-4fhezx7s.jpeg"></div></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alles was bleibt ist der Abbau. </font><font style="vertical-align: inherit;">Demontage alter Switches, Demontage alter Verbindungen zwischen Switches A und D, Demontage von Transceivern von diesen Verbindungen, Fixing Monitoring, Fixing Netzwerkdiagramme in Dokumentation und Überwachung. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir können Switches, Transceiver, Patchkabel, AOC, DAC nach dem Switching in anderen Projekten oder ähnlichen Switches verwenden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
"Natasha, wir haben alles gewechselt!"</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de498354/index.html">Wie man "Wunschliste" in "Hardware" oder halbidealen halbmobilen Semi-Desktop übersetzt</a></li>
<li><a href="../de498358/index.html">Lernen Sie Französisch oder wie Sie einen Universaladapter von einem PSA-Diagnosescanner erhalten</a></li>
<li><a href="../de498360/index.html">Auswertung der integrierten Serverlastmetriken</a></li>
<li><a href="../de498362/index.html">Kingston ist weiterhin führend bei SSD-Sendungen: Wie machen wir das?</a></li>
<li><a href="../de498366/index.html">Welche Algorithmen implementieren Yandex-Entwickler täglich?</a></li>
<li><a href="../de498370/index.html">SAP UI5 und Bestätigungsfenster: Nochmals zum Kontext</a></li>
<li><a href="../de498372/index.html">Netzwerksimulator-Tutorial ns-3. Kapitel 5</a></li>
<li><a href="../de498374/index.html">GPU Computing - Warum, wann und wie. Plus einige Tests</a></li>
<li><a href="../de498378/index.html">Ankündigung von Slurms Abendschule durch Agile</a></li>
<li><a href="../de498380/index.html">Overtons Fenster in Aktion: Wie eine Pandemie eingesetzt wird, um unsere Freiheit einzuschränken</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>