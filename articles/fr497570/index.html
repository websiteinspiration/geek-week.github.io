<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤰🏽 👩‍🔬 👛 Bases de données dans la plate-forme IIoT: comment Mail.ru Cloud Solutions fonctionne avec des pétaoctets de données provenant de plusieurs appareils 🚅 🧑🏿‍🤝‍🧑🏾 ⏲️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour, je suis Andrey Sergeev, chef du groupe de développement de solutions IoT chez Mail.ru Cloud Solutions . Il est connu qu'il n'existe pas de ba...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Bases de données dans la plate-forme IIoT: comment Mail.ru Cloud Solutions fonctionne avec des pétaoctets de données provenant de plusieurs appareils</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/497570/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/cq/9y/ln/cq9yln3qusppabwqddmvvyftzdk.jpeg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bonjour, je suis Andrey Sergeev, chef du groupe de développement de solutions IoT chez </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mail.ru Cloud Solutions</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Il est connu qu'il n'existe pas de base de données universelle. </font><font style="vertical-align: inherit;">Surtout lorsque vous avez besoin de construire une plate-forme Internet des objets capable de traiter des millions d'événements à partir de capteurs par seconde en mode quasi-temps réel. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Notre produit </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mail.ru IoT Platform a</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> commencé avec un prototype basé sur Tarantool. </font><font style="vertical-align: inherit;">Je vais vous dire dans quelle direction nous sommes allés, quels problèmes nous avons rencontrés et comment nous les avons résolus. </font><font style="vertical-align: inherit;">Et aussi montrer l'architecture actuelle de la plate-forme moderne de l'Internet des objets industriel. </font><font style="vertical-align: inherit;">Dans l'article, nous parlerons:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sur nos exigences de base de données, solution universelle et théorème CAP;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">si la base de données + le serveur d'applications dans une approche est une solution miracle;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sur l'évolution de la plateforme et des bases de données qui y sont utilisées;</font></font></li>
<li> ,     Tarantool’       .</li>
</ul><a name="habracut"></a><br>
<i>  ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">@Databases Meetup</a> by Mail.ru Cloud Solutions.    ,  :</i><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/wigSv2_zWBU" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<br>
<h2>Mail.ru IoT Platform   </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Notre produit, Mail.ru IoT Platform, est une plateforme évolutive et indépendante du matériel pour créer des solutions pour l'Internet des objets industriel. </font><font style="vertical-align: inherit;">Il vous permet de collecter des données de centaines de milliers d'appareils simultanément et de traiter ce flux en mode presque en temps réel (c'est-à-dire en quasi-temps réel), y compris en utilisant des règles personnalisées - des scripts en Python ou Lua. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La plateforme peut stocker une quantité illimitée de données brutes provenant de sources, il existe un ensemble de composants prêts à l'emploi pour visualiser et analyser les données, des outils intégrés pour l'analyse prédictive et la création d'applications basées sur la plateforme.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/kz/eq/lx/kzeqlxssqhyx4fop4gl2ifrnxwe.jpeg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Voici à quoi ressemble</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
la plate-forme </font><i><font style="vertical-align: inherit;">Mail.ru IoT Platform. Pour</font></i><font style="vertical-align: inherit;"> le moment, la plate-forme est disponible pour l'installation selon le modèle sur site dans les installations du client, cette année, il est prévu de publier la plate-forme en tant que service dans le cloud public.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Prototype Tarantool: comment tout a commencé</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Notre plate-forme a commencé comme un projet pilote - un prototype avec une seule instance de Tarantool, dont la fonction principale était de recevoir le flux de données d'un serveur OPC, de traiter les événements reçus à l'aide de scripts Lua en temps réel, de surveiller les indicateurs clés en fonction d'eux et de générer des événements et des alertes dans systèmes supérieurs.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/258/2a5/f8c/2582a5f8c1d12d5717365bb82081efa4.jpg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schéma prototype de Tarantool</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Ce prototype a même fonctionné en conditions de combat pendant plusieurs mois sur un site de cluster, c'est une plateforme de production de pétrole en haute mer, en Irak, dans le golfe Persique. </font><font style="vertical-align: inherit;">Il a surveillé les indicateurs clés et fourni des données pour le système de visualisation et le journal des événements. </font><font style="vertical-align: inherit;">Le pilote a été reconnu comme un succès, mais comme c'est souvent le cas avec les prototypes - il n'a pas dépassé le pilote et le prototype a été mis en attente pendant longtemps jusqu'à ce qu'il tombe entre nos mains.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nos objectifs dans le développement d'une plateforme IoT</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Avec le prototype, nous avons eu la tâche de créer une plate-forme IoT à part entière, évolutive et tolérante aux pannes, qui pourrait plus tard être lancée en tant que service dans un cloud public. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avions besoin de construire une plate-forme avec l'introduction suivante:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Connectez des centaines de milliers d'appareils simultanément.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Recevez des millions d'événements par seconde.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Traitement de flux en mode quasi-temps réel.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Stockage des données brutes pendant plusieurs années.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Outils pour l'analyse en continu et l'analyse historique.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Prise en charge du déploiement dans plusieurs centres de données pour une reprise après sinistre maximale.</font></font></li>
</ol><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Avantages et inconvénients du prototype de plateforme</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Au moment du début du développement actif, le prototype se présentait comme suit:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tarantool, qui est utilisé comme base de données + serveur d'applications (Application Server);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">toutes les données sont stockées dans la mémoire Tarantool;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">une application sur Lua dans le même Tarantool, qui remplit les fonctions de réception des données, de traitement et d'appel de scripts utilisateur sur les données entrantes.</font></font></li>
</ul><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cette approche de la construction d'applications a ses avantages</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le code et les données sont au même endroit, ce qui vous permet d’opérer sur les données directement dans la mémoire de l’application et supprime les frais généraux des visites réseau typiques des applications traditionnelles.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tarantool utilise JIT (Just in Time Compiler) pour Lua, qui lors de la compilation compile le code Lua en code machine, ce qui permet aux scripts Lua simples de s'exécuter à une vitesse comparable au code C (40000 RPS à partir d'un cœur - et ce n'est pas la limite !).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tarantool est basé sur le multitâche coopératif, c'est-à-dire que chaque appel à la procédure stockée est lancé dans sa propre fibre, un analogue de coroutine, ce qui améliore encore plus les performances dans les tâches avec des opérations d'E / S, par exemple, les visites de réseau.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Utilisation efficace des ressources - peu d'outils peuvent gérer 40 000 requêtes par seconde à partir d'un seul cœur de processeur.</font></font></li>
</ol><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mais il y a des inconvénients importants</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous devons stocker les données brutes des appareils pendant plusieurs années, mais nous n'avons pas des centaines de pétaoctets de mémoire pour Tarantool.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conséquence directe du premier plus: tout le code de notre plateforme est des procédures stockées dans la base de données, ce qui signifie que toute mise à jour de la base de code de la plateforme est une mise à jour de la base de données, ce qui est très douloureux.</font></font></li>
<li>  ,           .  ,        Tarantool       24-32   (Tarantool       )    .          —        Tarantool,    .</li>
<li>        .    - ,  Tarantool   Lua    ,   - ,  LuaJIT           .</li>
</ol><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusion:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Tarantool est un bon choix pour créer MVP, mais pour une plate-forme IoT à part entière, évolutive, facilement prise en charge et tolérante aux pannes qui peut recevoir, traiter et stocker des données à partir de centaines de milliers d'appareils, elle ne convient pas.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les principales douleurs du prototype dont nous voulions nous débarrasser</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout d'abord, nous voulions guérir deux douleurs de notre prototype:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Éloignez-vous du concept de base de données + service d'application. </font><font style="vertical-align: inherit;">Nous voulions mettre à jour le code d'application indépendamment du magasin de données.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Simplifiez la mise à l'échelle dynamique sous charge. </font><font style="vertical-align: inherit;">Je voulais obtenir une mise à l'échelle horizontale indépendante facile du plus grand nombre de fonctions possible.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour résoudre ces problèmes, nous avons choisi une approche innovante et non encore testée: architecture de microservices et séparation des services en base de données Stateless - applications et Stateful -. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour faciliter davantage le fonctionnement et la mise à l'échelle horizontale des services sans état, nous les avons conteneurisés et adopté Kubernetes.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0db/687/017/0db687017d254d99d9502d5b4362a4f2.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons compris les services sans état, il reste à décider quoi faire avec les données.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exigences de base de base de données pour la plate-forme IoT</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Au départ, nous ne voulions pas clôturer le jardin et voulions stocker toutes les données de la plateforme dans une seule base de données universelle. </font><font style="vertical-align: inherit;">Après avoir analysé les objectifs, nous sommes arrivés à la liste suivante des exigences pour une base de données universelle:</font></font><br>
<br>
<ol>
<li><strong>ACID-</strong> —        ,          .</li>
<li><strong> </strong> —         .</li>
<li><strong>     </strong> —      ,         near real-time.</li>
<li><strong></strong> —        -    .</li>
<li><strong></strong> —      ,          .</li>
<li><strong> </strong> <strong>  </strong> —          (  !),     .</li>
<li><strong> </strong>—           ,       (      !).</li>
<li><strong>SQL</strong> —         .</li>
</ol><br>
<h2>      CAP-</h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Avant de commencer à trier toutes les bases de données qui sont sur le marché pour la conformité à nos exigences, nous avons décidé de valider nos exigences en matière de santé mentale à l'aide d'un outil assez bien connu - les théorèmes CAP. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le théorème CAP dit qu'un système distribué peut avoir au maximum deux des trois propriétés suivantes:</font></font><br>
<br>
<ol>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cohérence (cohérence des données)</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - dans tous les nœuds de calcul à un moment donné, les données ne se contredisent pas.</font></font></li>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Disponibilité</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - toute demande adressée à un système distribué se termine par une réponse correcte, mais sans garantie que les réponses de tous les nœuds du système correspondent.</font></font></li>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tolérance de partition</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - même s'il n'y a pas de connexion entre les nœuds, ils continuent de fonctionner indépendamment les uns des autres.</font></font></li>
</ol><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/_p/8i/0o/_p8i0olwyxcps5ymii2x6j1diow.jpeg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par exemple, le système CA classique est un cluster maître-esclave PostgreSQL avec réplication synchrone, et le système AP classique est Cassandra. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Revenons à nos exigences et classons-les à l'aide du théorème CAP:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les transactions ACID et la cohérence stricte (ou du moins pas la cohérence éventuelle) sont C.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La mise à l'échelle horizontale pour l'écriture et la lecture ainsi que la haute disponibilité est A (multi-maître).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La tolérance aux pannes est P, lorsqu'un centre de données tombe en panne, la plate-forme ne doit pas mourir.</font></font></li>
</ol><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/xv/fr/ju/xvfrjubabyxcsbepcrhpr_fuht0.jpeg"></div><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusion</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : la base de données universelle dont nous avons besoin doit avoir les trois propriétés du théorème CAP, ce qui signifie qu'il n'y a pas de base de données universelle pour toutes nos exigences.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Choisir une base de données pour les données avec lesquelles la plateforme IoT fonctionne</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous ne pouvez pas choisir une base de données universelle, nous avons décidé de sélectionner les types de données avec lesquels la plateforme fonctionnera et de sélectionner une base de données pour chaque type. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En première approximation, nous avons divisé les données en deux types:</font></font><br>
<br>
<ol>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les méta</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font><strong><font style="vertical-align: inherit;">informations</font></strong><font style="vertical-align: inherit;"> sont un modèle du monde, des appareils, des paramètres, des règles, de presque toutes les données, à l'exception de celles qui transmettent les appareils finaux.</font></font></li>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Données brutes des appareils</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - lectures des capteurs, télémétrie et informations de service des appareils. </font><font style="vertical-align: inherit;">En fait, ce sont des séries chronologiques, où chaque message individuel contient une valeur et un horodatage.</font></font></li>
</ol><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Choix d'une base de données pour les métadonnées</font></font></h3><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exigences de base de données pour les métadonnées</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Les métadonnées sont intrinsèquement relationnelles. Ils sont caractérisés par une petite quantité, ils sont rarement modifiés, mais ce sont des données importantes, ils ne peuvent pas être perdus, donc la cohérence est importante même dans le cadre de la réplication asynchrone, ainsi que des transactions ACID et de l'échelle de lecture horizontale. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il existe relativement peu de telles données et elles seront relativement rarement modifiées, vous pouvez donc sacrifier la mise à l'échelle horizontale à l'enregistrement, ainsi que l'inaccessibilité possible de la base de données d'enregistrement en cas d'accident. Autrement dit, en termes de théorème CAP, nous avons besoin d'un système CA. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ce qui convient dans le cas habituel</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Avec une telle déclaration du problème, toute base de données relationnelle classique prenant en charge les clusters avec réplication asynchrone comme PostgreSQL ou MySQL nous conviendrait parfaitement.</font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Caractéristiques de notre plateforme</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Nous avions également besoin d'un support pour les arbres ayant des exigences spécifiques. Dans le cadre du prototype, il y avait une fonctionnalité des systèmes de la classe BDVV (bases de données en temps réel) - la modélisation du monde à l'aide d'un arbre de balises. Ils vous permettent de combiner tous les appareils clients dans une arborescence, ce qui facilite la gestion d'un grand nombre d'appareils et leur affichage.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b7c/58e/f7e/b7c58ef7ef64fc742bcbd0f3190d5510.jpg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Voici à quoi ressemble l'affichage des appareils sous forme d'arborescence.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Une telle arborescence vous permet de relier les appareils finaux à l'environnement, par exemple, vous pouvez placer des appareils qui sont physiquement situés dans une pièce dans un sous-arbre, ce qui facilite grandement le travail avec eux à l'avenir. </font><font style="vertical-align: inherit;">Il s'agit d'une fonction pratique, en outre, nous voulions en outre travailler dans le créneau du système de détonateur aéroporté, et la présence d'une telle fonctionnalité est en fait la norme de l'industrie. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour l'implémentation complète des arbres de balises, une base de données potentielle doit répondre aux exigences suivantes:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Prise en charge d'arbres de largeur et de profondeur arbitraires.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Modification des éléments d'arbre dans les transactions ACID.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Haute performance lors de la traversée d'un arbre.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les bases de données relationnelles classiques peuvent très bien gérer les petits arbres, mais elles ne fonctionnent pas aussi bien avec les arbres arbitraires. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Solution possible. </font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Utilisez deux bases de données - une base de données graphique pour stocker un arbre et une base de données relationnelle pour stocker le reste des méta-informations. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cette approche présente plusieurs gros inconvénients à la fois:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour garantir la cohérence entre deux bases de données, vous devez ajouter un coordinateur de transactions externe.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cette conception est difficile à entretenir et peu fiable.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En sortie, nous obtenons deux bases de données au lieu d'une, tandis que la base de données graphique n'est nécessaire que pour prendre en charge des fonctionnalités limitées.</font></font></li>
</ol><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5db/00d/e2d/5db00de2daec50d59dded73a98bc932c.jpg"></div><br>
<h4><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Une solution possible mais pas très bonne avec deux bases de données</font></font></i></h4><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Notre solution pour stocker des métadonnées</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Nous avons également pensé et retenu qu'initialement cette fonctionnalité a été implémentée dans un prototype basé sur Tarantool et elle s'est très bien déroulée. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Avant de continuer, je voudrais donner une définition non standard de Tarantool: </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tarantool n'est pas une base de données, mais un ensemble de primitives pour construire une base de données pour votre cas spécifique. </font></font></strong><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Primitives disponibles prêtes à l'emploi:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Espace - un analogue des tables de la base de données pour le stockage des données.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Transactions ACID à part entière.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La réplication est asynchrone à l'aide des journaux WAL.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un outil de sharding qui prend en charge le resharding automatique.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LuaJIT ultra-rapide pour les procédures stockées.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Grande bibliothèque standard.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gestionnaire de paquets LuaRocks avec encore plus de paquets.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Notre solution CA était une base de données relationnelle + graphique basée sur Tarantool. </font><font style="vertical-align: inherit;">Nous avons collecté le référentiel de méta-informations de rêve basé sur les primitives Tarantool:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Espace pour le stockage des données.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Transactions ACID - étaient disponibles.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Réplication asynchrone - était disponible.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Relations - effectuées sur des procédures stockées.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arbres - également créés sur les procédures stockées.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'installation en cluster que nous avons est classique pour de tels systèmes - un maître pour l'écriture et plusieurs Slive avec réplication asynchrone pour la mise à l'échelle pour la lecture. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le résultat: un hybride rapide et évolutif d'une base de données relationnelle et graphique. </font><font style="vertical-align: inherit;">Une seule instance de Tarantool est capable de gérer des milliers de demandes de lecture, y compris celles avec une traversée d'arbre active.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Choisir une base de données pour les données des appareils</font></font></h3><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exigences de base de données pour les données des appareils</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Ces données se caractérisent par un enregistrement fréquent et une grande quantité de données: des millions d'appareils, plusieurs années de stockage, des pétaoctets d'informations à la fois des messages entrants et des données stockées. Leur haute disponibilité est importante, car ce sont les lectures des capteurs qui fonctionnent principalement à la fois sur les règles d'utilisation et sur nos services internes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour une base de données, la mise à l'échelle horizontale pour la lecture et l'écriture, la disponibilité et la tolérance aux pannes, ainsi que la disponibilité d'outils d'analyse prêts à l'emploi pour travailler avec ce tableau de données, de préférence basés sur SQL, sont importants. Dans le même temps, nous pouvons sacrifier la cohérence et les transactions ACID. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Autrement dit, dans le cadre du théorème de la PAC, nous avons besoin d'un système AP. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exigences supplémentaires</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Nous avions quelques exigences supplémentaires pour décider où les quantités gigantesques de données seraient stockées:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Séries chronologiques - les données des capteurs sont des séries chronologiques, je voulais obtenir une base spécialisée.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Open source - les avantages du code open source n'ont pas besoin de commentaires.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un cluster gratuit est un fléau courant parmi les bases de données nouvelles.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bonne compression - étant donné la quantité de données et en général leur uniformité, je voulais compresser efficacement les données stockées.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Opération réussie - nous voulions commencer sur une base de données que quelqu'un exploite déjà activement à proximité de nos charges afin de minimiser les risques.</font></font></li>
</ol><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Notre décision</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ClickHouse répondait exclusivement à nos besoins - une base de données sur colonne de séries chronologiques avec réplication, multimaître, partitionnement, prise en charge SQL et un cluster gratuit. </font><font style="vertical-align: inherit;">De plus, Mail.ru possède de nombreuses années d'expérience réussie dans l'exploitation d'un des plus grands clusters ClickHouse en volume de stockage. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais peu importe la qualité de ClickHouse, nous avons des problèmes avec.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Problèmes de base de données pour ces appareils et leur solution</font></font></h3><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le problème avec les performances d'écriture.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Immédiatement, il y a eu un problème avec les performances d'écriture d'un flux de données volumineux. Ils doivent être introduits dans la base de données analytiques le plus rapidement possible afin que les règles qui analysent le flux des événements en temps réel puissent consulter l'historique d'un appareil particulier et décider de déclencher ou non une alerte. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Solution au problème</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ClickHouse ne tolère pas plusieurs insertions uniques (insertions), mais fonctionne bien avec de gros paquets (lots) de données - il peut facilement gérer l'écriture de lots sur des millions de lignes. Nous avons décidé de mettre en mémoire tampon le flux de données entrant, puis de coller ces données par lots.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/66f/85b/77d/66f85b77dfb1fe8788658f7455bbb56b.jpg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous avons donc dû faire face à des performances d'enregistrement médiocres. Le</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
problème d' </font><i><font style="vertical-align: inherit;">enregistrement a</font></i><font style="vertical-align: inherit;"> été résolu, mais cela nous a coûté un délai important de plusieurs secondes entre les données entrant dans le système et leur apparition dans notre base de données. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et cela est essentiel pour divers algorithmes qui répondent aux données des capteurs en temps réel. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lire le problème de performances.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> L'analyse de flux pour le traitement des données en temps réel a constamment besoin d'informations de la base de données - ce sont des dizaines de milliers de petites requêtes. En moyenne, un nœud ClickHouse contient une centaine de requêtes analytiques en même temps; il a été créé pour des requêtes analytiques lourdes peu fréquentes pour le traitement de grandes quantités de données. Bien sûr, cela ne convient pas pour calculer les tendances dans le flux de données provenant de centaines de milliers de capteurs.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/20a/34a/2a9/20a34a2a9469b6a0276c8437a7dd6ec8.jpg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ClickHouse ne fonctionne pas bien avec un grand nombre de demandes</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Solution</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Nous avons décidé de mettre un cache devant ClickHouse, qui contiendra les données chaudes les plus demandées pour les dernières 24 heures. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les données des 24 dernières heures ne sont pas des données d'un an, mais également une quantité assez importante de données, par conséquent, nous avons également besoin d'un système AP avec une mise à l'échelle horizontale pour la lecture et l'écriture, mais en mettant l'accent sur les performances à la fois pour l'enregistrement d'événements uniques et pour plusieurs événements. en train de lire. Il nécessite également une haute disponibilité, des analyses de séries chronologiques, de la persistance et un TTL intégré.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En fin de compte, nous avions besoin d'un ClickHouse rapide, qui peut même tout stocker en mémoire pour plus de vitesse. </font><font style="vertical-align: inherit;">Nous n'avons trouvé aucune solution adaptée sur le marché, nous avons donc décidé de la construire sur la base des primitives Tarantool:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Persistance - est (journaux WAL + instantanés).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Performance - il y a toutes les données en mémoire.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mise à l'échelle - il y a réplication + partitionnement.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Haute disponibilité - il y en a.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Outils d'analyse de séries temporelles (regroupement, agrégation, etc.) - réalisés sur des procédures stockées.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TTL - réalisé sur des procédures stockées avec une fibre de fond (coroutine).</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il s'est avéré être une solution pratique et productive - une instance contient 10 000 RPC pour la lecture, y compris des requêtes analytiques pouvant aller jusqu'à des dizaines de milliers de requêtes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voici l'architecture résultante:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fb3/ef4/260/fb3ef426007f70be5c2a737b75cea80b.jpg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Architecture finale: ClickHouse en tant que base de données analytique et cache Tarantool qui stocke les données en 24 heures</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nouveau type de données - état et son stockage</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons sélectionné des bases de données spécialisées pour toutes les données, mais la plateforme s'est développée et un nouveau type de données est apparu - l'état. </font><font style="vertical-align: inherit;">L'état contient l'état actuel des appareils et des capteurs, ainsi que diverses variables globales pour les règles d'analyse de flux. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par exemple, il y a une ampoule dans la pièce. </font><font style="vertical-align: inherit;">Il peut être à la fois désactivé et activé, et vous devez toujours avoir accès à son état actuel, y compris dans les règles. </font><font style="vertical-align: inherit;">Un autre exemple est une variable dans les règles de flux, par exemple, une sorte de compteur. </font><font style="vertical-align: inherit;">Ce type de données se caractérise par la nécessité d'un enregistrement fréquent et d'un accès rapide, mais en même temps, les données elles-mêmes occupent une quantité relativement faible.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le référentiel de méta-informations est mal adapté à ces types de données, car l'état peut changer souvent, et dans notre cas le plafond d'enregistrement est limité à un maître. </font><font style="vertical-align: inherit;">Les stockages à long terme et opérationnels sont également mal adaptés, puisque notre état a changé pour la dernière fois il y a trois ans, et il est important pour nous d'avoir un accès en lecture rapide. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Autrement dit, pour la base de données dans laquelle l'état est stocké, la mise à l'échelle horizontale pour la lecture et l'écriture, la haute disponibilité et la tolérance aux pannes sont importantes, tandis qu'une cohérence est nécessaire au niveau des valeurs / documents. </font><font style="vertical-align: inherit;">Vous pouvez tirer parti de la cohérence globale et des transactions ACID. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une solution appropriée pourrait être n'importe quelle valeur clé ou une base de données de documents: un cluster Redis ombré, MongoDB ou encore Tarantool. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tarantool Pros:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C'est la façon la plus populaire d'utiliser Tarantool.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mise à l'échelle horizontale - il y a réplication asynchrone + partitionnement.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La cohérence au niveau du document - est.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En conséquence, nous avons maintenant trois Tarantools, que nous utilisons pour des cas complètement différents: le stockage des méta-informations, un cache pour lire rapidement les données des appareils et le stockage des données d'état.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comment choisir une base de données pour la plateforme IoT</font></font></h2><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Il n'existe pas de base de données universelle.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chaque type de données possède sa propre base de données qui lui convient le mieux.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Parfois, la base de données dont vous avez besoin peut ne pas être disponible sur le marché.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tarantool convient comme base pour une base de données spécialisée.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cette conférence a été faite pour la première fois au </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@Databases Meetup</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> par Mail.ru Cloud Solutions. </font><font style="vertical-align: inherit;">Regardez une </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vidéo d'</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> autres performances et inscrivez-vous aux annonces d'événements Telegram </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Autour de Kubernetes chez Mail.ru Group</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quoi d'autre à lire</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quelle base de données choisir pour le projet, afin de ne pas choisir à nouveau</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Plus que Ceph: bloquer le stockage dans le cloud MCS</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
</ol><br>
</div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr497560/index.html">Comment la quarantaine affecte le marché du travail dans les TI</a></li>
<li><a href="../fr497562/index.html">Mitap: restez à la maison et GOnline</a></li>
<li><a href="../fr497564/index.html">Local Hack Day - Hackathon en ligne</a></li>
<li><a href="../fr497566/index.html">Algorithme de compression de Huffman</a></li>
<li><a href="../fr497568/index.html">Comment les employés de LANIT travaillent dans des sites éloignés en Italie et en Biélorussie</a></li>
<li><a href="../fr497572/index.html">Gestion de l'état orientée service avec Lamp-Luwak</a></li>
<li><a href="../fr497574/index.html">L'oncologie dans le contexte de la pandémie de COVID-19: comment sauver un maximum de vies</a></li>
<li><a href="../fr497578/index.html">AMD s'engage à gagner une part significative du marché des datacenters</a></li>
<li><a href="../fr497580/index.html">La quarantaine dure est très très mauvaise</a></li>
<li><a href="../fr497582/index.html">Habr prend la première place dans le classement des droits numériques des utilisateurs</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>