<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üòç üïé üì§ Child ReactJS with 135 lines of code ü§õ üè¶ üèÇüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="There are already a lot of articles about ReactJS. But in order to start studying a novice programmer, you need to find the very beginning where the f...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Child ReactJS with 135 lines of code</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/486122/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">There are already a lot of articles about ReactJS. </font><font style="vertical-align: inherit;">But in order to start studying a novice programmer, you need to find the very beginning where the foundations of its creation are. </font><font style="vertical-align: inherit;">I wanted to show that there is nothing complicated in understanding the principles of developing a frontend on this framework.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/36f/0bc/623/36f0bc62395c00f1675250ce19584361.jpg" alt="JavaScript for Babies"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
One method of study allowed me to understand the structure of many complex software systems and it comes down to the fact that you need to rewrite the project you are studying so that you get some kind of unknown beast that at least moves a little and is somewhat similar to its prototype. </font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I need to admit that I am a back-end and I don‚Äôt even know what motivated me to write a microframework in JavaScript. But frankly, this is a desire to learn JS. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In fact, there is a good motivation to create projects in the form of modules / components. In the view of backend programmers, data at best looks like JSON objects, they should be formed into the desired structure and sent where necessary, and then do whatever you want with them. At the front end, in the most primitive version, you have to select the necessary HTML elements by ID and update their attributes, as well as change the text nodes. Make life easier for JavaScript frameworks.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Once I wrote my PHP-Slim-framework, which is far from the original, but it really helps me in PHP projects. </font><font style="vertical-align: inherit;">Today I want to talk about how I presented the origins of ReactJS development. </font><font style="vertical-align: inherit;">I wrote one file in 135 lines of code called it bots.js and if you connect it and write a component like in React, you can even see something in the browser. </font><font style="vertical-align: inherit;">I called him ReactKids. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The idea is to break the project under development into components, add components using javascript and make sure that there are no dependencies between the components. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
HTML standard structure:</font></font><br>
<br>
<pre><code class="xml hljs"><span class="hljs-meta">&lt;!doctype <span class="hljs-meta-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
	<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
		<span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"utf-8"</span>&gt;</span>
		<span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1, shrink-to-fit=no"</span>&gt;</span>
		<span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>HelloReactKids<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
		<span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"style.css"</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span>&gt;</span>
	<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
	<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
		<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"root"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
		<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"js/bots.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
		<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"js/pict.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
		<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"js/navbar.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
		<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"js/label.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
		<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"js/button.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
		<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"js/app.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
	<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For the application, specify id = root and connect bots.js, then connect the components (or write them yourself) and run it in app.js. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The component in ReactKids looks like this:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Button</span>(<span class="hljs-params">attr</span>) </span>{
	<span class="hljs-comment">// attribute components default values</span>
	<span class="hljs-keyword">if</span>(!attr.labelButton) attr.labelButton = <span class="hljs-string">"Click Me"</span><font></font>
	<font></font>
	<span class="hljs-keyword">return</span> elem(
		<span class="hljs-string">"button"</span>,<font></font>
		{<font></font>
			<span class="hljs-attr">padding</span>: <span class="hljs-string">"0.65rem"</span>,
			<span class="hljs-attr">marginTop</span>: <span class="hljs-string">"0.4rem"</span>,
			<span class="hljs-attr">color</span>: <span class="hljs-string">"gray"</span>,
			<span class="hljs-attr">border</span>: <span class="hljs-string">"1px solid gray"</span>,
			<span class="hljs-attr">borderRadius</span>: <span class="hljs-string">"0.5rem"</span>,
			<span class="hljs-attr">background</span>: <span class="hljs-string">"#fff"</span>,
			<span class="hljs-attr">fontSize</span>: <span class="hljs-string">"large"</span>,
			<span class="hljs-attr">cursor</span>: <span class="hljs-string">"pointer"</span>,<font></font>
		},<font></font>
		{<font></font>
			<span class="hljs-attr">id</span>: <span class="hljs-string">"btn1"</span>,
			<span class="hljs-attr">click</span>: btn1Click,<font></font>
		}, <font></font>
		attr.labelButton<font></font>
	)<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">btn1Click</span>(<span class="hljs-params">e</span>) </span>{
	<span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Clicked!"</span>)<font></font>
	setAttr(Label({<span class="hljs-attr">labelContent</span>: <span class="hljs-string">"i-i-i!!!"</span>}), <span class="hljs-number">0.6</span>)<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The component in our case can only be a function in which params is called attr. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Here you should pay attention to why this attr may come in handy. Well, firstly, those who are familiar with the reaction know that it is possible to "lower" the data to the daughter components. That is, a component returns a component that returns a component, and so on until a component that has no children. However, they are also used as packages for data coming from the server. Backend requests are for the most part sent from functions that handle events related to interaction with the user interface. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
When the server sends back JSON (usually in text), it needs to be turned into a JS object and done somewhere. This is what params in React and attr in our child implementation are for.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In attr, you can cram the entire JSON object received from the server, or you can only get the </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">best</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> data you need and, possibly, supplemented with other necessary data. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Next, we follow the logic of the adult React - at the beginning of the function, we process the attr object and perform other business affairs. </font><font style="vertical-align: inherit;">After that you need to return the result of calling the elem () function, the implementation of which is in bots.js. </font><font style="vertical-align: inherit;">The call parameters are passed:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The name of the tag.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Object with styles (in JS format)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Attributes for the tag.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Text, another tag or component (child) or nothing is passed.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Take a look at app.js:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">var</span> attr = {
	<span class="hljs-attr">labelContent</span>: <span class="hljs-string">"Hello React Kids"</span>,
	<span class="hljs-attr">labelButton</span>: <span class="hljs-string">"This button"</span>,<font></font>
}<font></font>
<font></font>
rend(<span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">"root"</span>), App(attr))<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">App</span>(<span class="hljs-params">attr</span>) </span>{
	<span class="hljs-keyword">return</span> elem(
		<span class="hljs-string">"div"</span>, <font></font>
		{<font></font>
			<span class="hljs-attr">fontFamily</span>: <span class="hljs-string">"segoe ui"</span>,
			<span class="hljs-attr">color</span>: <span class="hljs-string">"gray"</span>,
			<span class="hljs-attr">textAlign</span>: <span class="hljs-string">"center"</span>,<font></font>
		},<font></font>
		{<font></font>
			<span class="hljs-attr">id</span>: <span class="hljs-string">"app"</span>,<font></font>
		},<font></font>
		[<font></font>
			Navbar(attr),<font></font>
			Pict(attr),<font></font>
			Label(attr),<font></font>
			Button(attr),<font></font>
		]<font></font>
	)<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nothing unusual here either. </font><font style="vertical-align: inherit;">Here is the same more complicated:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">App</span>(<span class="hljs-params">attr</span>) </span>{
	<span class="hljs-keyword">var</span> cpic1 = CirclePict({<span class="hljs-attr">id</span>: <span class="hljs-string">"img1"</span>, <span class="hljs-attr">src</span>: <span class="hljs-string">"./img/img1.jpg"</span>, <span class="hljs-attr">height</span>: <span class="hljs-string">"200px"</span>})
	<span class="hljs-keyword">var</span> cpic2 = CirclePict({<span class="hljs-attr">id</span>: <span class="hljs-string">"img1"</span>, <span class="hljs-attr">src</span>: <span class="hljs-string">"./img/img2.jpg"</span>, <span class="hljs-attr">height</span>: <span class="hljs-string">"200px"</span>})
	<span class="hljs-keyword">var</span> cpic3 = CirclePict({<span class="hljs-attr">id</span>: <span class="hljs-string">"img1"</span>, <span class="hljs-attr">src</span>: <span class="hljs-string">"./img/img3.jpg"</span>, <span class="hljs-attr">height</span>: <span class="hljs-string">"200px"</span>})<font></font>
	<font></font>
	<span class="hljs-keyword">var</span> txt1 = <span class="hljs-string">"   .          ."</span>;
	<span class="hljs-keyword">var</span> txt2 = <span class="hljs-string">"   ,          ."</span>;<font></font>
	<font></font>
	<span class="hljs-keyword">return</span> elem(
		<span class="hljs-string">"div"</span>, <font></font>
		{<font></font>
			<span class="hljs-attr">fontFamily</span>: <span class="hljs-string">"segoe ui"</span>,
			<span class="hljs-attr">color</span>: <span class="hljs-string">"gray"</span>,<font></font>
		},<font></font>
		{<font></font>
			<span class="hljs-attr">id</span>: <span class="hljs-string">"app"</span>,<font></font>
		},<font></font>
		[<font></font>
			Pict({<span class="hljs-attr">id</span>: <span class="hljs-string">"logo"</span>, <span class="hljs-attr">src</span>: <span class="hljs-string">"./img/logo.png"</span>, <span class="hljs-attr">height</span>: <span class="hljs-string">"90%"</span>}),<font></font>
			Text({<span class="hljs-attr">id</span>: <span class="hljs-string">"info"</span>, <span class="hljs-attr">text</span>: <span class="hljs-string">"you number"</span>, <span class="hljs-attr">direction</span>: <span class="hljs-string">"right"</span>}),<font></font>
			Label(attr),<font></font>
			Outer({<span class="hljs-attr">id</span>: <span class="hljs-string">"outer1"</span>, <span class="hljs-attr">content</span>: [cpic1, cpic2, cpic3]}),<font></font>
			Text({<span class="hljs-attr">id</span>: <span class="hljs-string">"txt1"</span>, <span class="hljs-attr">text</span>: txt1, <span class="hljs-attr">width</span>: <span class="hljs-string">"450px"</span>}),<font></font>
			Button(attr),<font></font>
			Label({<span class="hljs-attr">id</span>: <span class="hljs-string">"lbl2"</span>, <span class="hljs-attr">labelContent</span>: <span class="hljs-string">"   "</span>}),<font></font>
			Text({<span class="hljs-attr">id</span>: <span class="hljs-string">"txt2"</span>, <span class="hljs-attr">text</span>: txt2, <span class="hljs-attr">width</span>: <span class="hljs-string">"650px"</span>, <span class="hljs-attr">direction</span>: <span class="hljs-string">"center"</span>}),<font></font>
			RoundPict({<span class="hljs-attr">id</span>: <span class="hljs-string">"well"</span>, <span class="hljs-attr">src</span>: <span class="hljs-string">"./img/well.jpg"</span>, <span class="hljs-attr">height</span>: <span class="hljs-string">"280px"</span>, <span class="hljs-attr">width</span>: <span class="hljs-string">"550"</span>})<font></font>
		]<font></font>
	)<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As you can see, we have embedded the CirclePict component in the Outer 3 component. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Children, of course, noticed the lack of JSX. </font><font style="vertical-align: inherit;">In fact, it was invented by lazy programmers and simply facilitates what we write. </font><font style="vertical-align: inherit;">As a result, JSX tags still turn into JavaScript. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now you need to see how this is now implemented in bots.js. </font><font style="vertical-align: inherit;">The framework consists of 3 whole functions, in fact elem () and setAttr (), the first to create, the second to update the state of the component and rend () to display in app.js.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">elem</span>(<span class="hljs-params">elt, style, attr, item</span>) </span>{
	<span class="hljs-comment">/*element */</span>
	<span class="hljs-keyword">if</span>(elt) {
		<span class="hljs-comment">//  ,      </span>
		<span class="hljs-keyword">var</span> el = <span class="hljs-built_in">document</span>.createElement(elt);<font></font>
	} <span class="hljs-keyword">else</span> {
		<span class="hljs-built_in">console</span>.log(<span class="hljs-string">"elt fail"</span>)
		<span class="hljs-keyword">return</span> <font></font>
	}<font></font>
	<span class="hljs-comment">/* style */</span>
	<span class="hljs-keyword">if</span>(style) {
		<span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span>(style) == <span class="hljs-string">"object"</span>) {
			<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> itm <span class="hljs-keyword">in</span> style) {<font></font>
				el.style[itm] = style[itm]<font></font>
			}<font></font>
		} <span class="hljs-keyword">else</span> {
			<span class="hljs-built_in">console</span>.log(<span class="hljs-string">"style is not object type"</span>)<font></font>
		}<font></font>
	} <span class="hljs-keyword">else</span> {
		<span class="hljs-built_in">console</span>.log(<span class="hljs-string">"style fail"</span>)<font></font>
	}<font></font>
	<span class="hljs-comment">/* attr */</span>
	<span class="hljs-keyword">if</span>(attr) {
		<span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span>(attr) == <span class="hljs-string">"object"</span>) {
			<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> itm <span class="hljs-keyword">in</span> attr) {
				<span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span>(attr[itm]) == <span class="hljs-string">"function"</span>) {<font></font>
					el.addEventListener(itm, attr[itm])<font></font>
				} <span class="hljs-keyword">else</span> {
					<span class="hljs-comment">// standart</span><font></font>
					el[itm] = attr[itm]<font></font>
				}<font></font>
			}<font></font>
		} <span class="hljs-keyword">else</span> {
			<span class="hljs-built_in">console</span>.log(<span class="hljs-string">"attr is not object type"</span>)<font></font>
		}<font></font>
	} <span class="hljs-keyword">else</span> {
		<span class="hljs-built_in">console</span>.log(<span class="hljs-string">"attr fail (add ID for element)"</span>)<font></font>
	}<font></font>
	<span class="hljs-comment">/* item */</span>
	<span class="hljs-keyword">if</span>(item) {
		<span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span>(item) == <span class="hljs-string">"string"</span>) {
			<span class="hljs-keyword">var</span> text = <span class="hljs-built_in">document</span>.createTextNode(item)<font></font>
			el.appendChild(text)<font></font>
		} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span>(item) == <span class="hljs-string">"object"</span>) {
			<span class="hljs-keyword">if</span>(<span class="hljs-built_in">Array</span>.isArray(item)) {
				<span class="hljs-keyword">if</span>(item.length &lt; <span class="hljs-number">1</span>) {
					<span class="hljs-built_in">console</span>.log(<span class="hljs-string">"not items in array"</span>)
					<span class="hljs-keyword">return</span><font></font>
				}<font></font>
				item.map(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">itm</span>) </span>{<font></font>
					el.appendChild(itm)<font></font>
				})<font></font>
			} <span class="hljs-keyword">else</span> {<font></font>
				el.appendChild(item)<font></font>
			}<font></font>
		} <span class="hljs-keyword">else</span> {
			<span class="hljs-built_in">console</span>.log(<span class="hljs-string">"text is not string or object type"</span>)<font></font>
		}<font></font>
	} <span class="hljs-keyword">else</span> {
		<span class="hljs-built_in">console</span>.log(<span class="hljs-string">"text fail"</span>)<font></font>
	}<font></font>
	<span class="hljs-keyword">return</span> el<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The function processes the parameters passed to it in the same sequence:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Create a component in the document tree.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Adding styles to it.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Attributes.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Adding a child element as a text or other element.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
When processing attributes, we also check their type, if a function is received as a value, then it is assumed that this is an event and we hang a wiretap on it. Therefore, it remains only to declare and implement the function indicated as an event. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It is in this event handling function that we call setAttr (), passing the object itself with the updated attr to it. There is one thing but - for each element to be created in attr, you must specify id; otherwise, it will not be updated via setAttr. She by id finds it in the DOM. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As for setAttr (), everything is worse than in React, although it is enough (or almost enough) to understand the principles.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setAttr</span>(<span class="hljs-params">update, slow</span>) </span>{
	<span class="hljs-keyword">if</span>(slow) {
		<span class="hljs-keyword">var</span> replace = <span class="hljs-built_in">document</span>.getElementById(update.id)
		<span class="hljs-keyword">var</span> opamax = <span class="hljs-number">0.99</span>
		<span class="hljs-keyword">var</span> opaint = <span class="hljs-number">0.01</span>
		<span class="hljs-keyword">var</span> outslow = setInterval(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{<font></font>
			opamax = opamax - opaint<font></font>
			<span class="hljs-keyword">if</span>(opamax &lt;= <span class="hljs-number">0</span>) {<font></font>
				clearInterval(outslow)<font></font>
				update.style.opacity = opamax<font></font>
				replace.parentNode.replaceChild(update, replace)<font></font>
				<span class="hljs-keyword">var</span> inslow = setInterval(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{<font></font>
					opamax = opamax + opaint<font></font>
					update.style.opacity = opamax<font></font>
					<span class="hljs-keyword">if</span>(opamax &gt;= <span class="hljs-number">1</span>) {<font></font>
						clearInterval(inslow)<font></font>
					}<font></font>
				}, slow)<font></font>
			}<font></font>
			replace.style.opacity = opamax<font></font>
		}, slow)<font></font>
	} <span class="hljs-keyword">else</span> {
		<span class="hljs-keyword">var</span> replace = <span class="hljs-built_in">document</span>.getElementById(update.id)<font></font>
		replace.parentNode.replaceChild(update, replace)<font></font>
	}<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As you can see here, only manipulations with the document tree and another fading effect, so that at least it looks and the code looks like a function, not helloworld. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The coolest in our children's framework is the rendering function:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">rend</span>(<span class="hljs-params">root, elem</span>) </span>{<font></font>
	root.appendChild(elem)<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I noticed that it is difficult for novice programmers to start learning things like React purely psychologically. </font><font style="vertical-align: inherit;">Seeing hundreds of megabytes of libraries and millions of lines of code, you have to get depressed and look for something else. </font><font style="vertical-align: inherit;">In particular, they are switching to Vue. </font><font style="vertical-align: inherit;">Of course, this is also a good framework, but it is even better to understand both approaches to frontend development. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It turns out that complex software environments arise from small but effective solutions. </font><font style="vertical-align: inherit;">Therefore, I wish good luck to all who seek knowledge of React. </font><font style="vertical-align: inherit;">May the force be with us!</font></font></div>
      
    </div><p class="reference-to-source js-reference-to-source">Source: https://habr.com/ru/post/undefined/</p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en486108/index.html">SSD for gamers and data storage of the future: Seagate at CES 2020</a></li>
<li><a href="../en486112/index.html">Flask web applications: how to deal with cyclic imports</a></li>
<li><a href="../en486114/index.html">Leading scientists in the field of neuroscience will gather at the annual congress of the neuronet industry union</a></li>
<li><a href="../en486116/index.html">Fermat and Miller-Rabin simplicity tests</a></li>
<li><a href="../en486120/index.html">Normalization of deviance. How bad practices are becoming the norm in our industry</a></li>
<li><a href="../en486124/index.html">Impala vs Hive vs Spark SQL: Choosing the right SQL engine to work properly in the Cloudera Data Warehouse</a></li>
<li><a href="../en486126/index.html">Microservices with Spring Boot. Part 5. Using the Eureka name server</a></li>
<li><a href="../en486128/index.html">Quality Architect: who is it and when is it needed</a></li>
<li><a href="../en486130/index.html">GSoC 2019: Checking Bipartite Counts and Monad Transformers</a></li>
<li><a href="../en486136/index.html">Imitating network problems in Linux</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>