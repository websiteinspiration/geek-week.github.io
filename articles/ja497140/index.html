<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>📐 🎶 👩🏿‍🤝‍👩🏾 CANバスVWポロセダンのデータの復号化 🍄 🐶 ♀️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="今日は、2019 VW Polo Sedan車の例を​​使用して、CANバスデータを復号化する方法について説明します。インターネットでは、このような記事はCANバスハックと呼ばれることがよくありますが、この名前は好きではありません。
 
 この記事では、車のCANバスで必要なデータを見つける方法、V...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>CANバスVWポロセダンのデータの復号化</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/497140/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">今日は、2019 VW Polo Sedan車の例を​​使用して、CANバスデータを復号化する方法について説明します。</font><font style="vertical-align: inherit;">インターネットでは、このような記事はCANバスハックと呼ばれることがよくありますが、この名前は好きではありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この記事では、車のCANバスで必要なデータを見つける方法、VWポロセダンでのこれらの技術の適用例について説明します。</font><font style="vertical-align: inherit;">Vega MTXは、CANバスに接続するための機器として使用されます。</font><font style="vertical-align: inherit;">テレマティクスについてもう少し話しましょう。</font><font style="vertical-align: inherit;">トピックの下の多くの写真のカットの下に、いくつかのgifとビデオ。</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
あなた自身について一言。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私の名前はアレクセイフォーキンです。現在、ベガアブソルートで働いています</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vega_absolute</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。ノボシビルスクの本社ですが、私はモスクワで働いています。私たちの方向性の1つはテレマティクスです。商用車の追跡、カーシェアリング、タクシーなどの機器を製造しています。私の仕事は、車からデータを収集し、それらを私たちの機器の設定に変えることです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
今車に。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CANバスへの接続は、ダッシュボードの背後（500 Kbit /秒バス）と無線の背後（100 Kビット/秒）の2箇所で行われました。冗長接続も1つあります。コネクタで直接OBDIIコネクタに接続します（500 Kbit / s）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
使用ツールから：CANスキャナーを搭載したVega MTX車両監視ユニット。 PCで構成するには、Configurator 1.27.14プログラムを使用します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
車とMTXへの接続の詳細については、記事の最後にあるビデオを参照してください。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべてのCANバスに接続すると、次の図が表示されます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/z4/j3/ad/z4j3ad0zxuso-cm1kzaa1omjpp8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このデータストリームでは、必要なパラメーターに関与するビットとバイトを見つける必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以下のスクリーンショットは、テレマティクスブロックに現在登録されているセンサーの数を示しています。これは完全なリストではありません。さらに深く調べて、さらに多くのセンサーを探すことができます。これらのセンサーの一部はリアルタイムで測定値をサーバーに送信し、いつでも車の状態を確認できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
テレマティクスは別の記事のトピックであるため、ここでは詳しく説明しません。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/kz/qr/_p/kzqr_pzavnxnqpai7jt42tsvrwa.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
問題がすぐに発生します。ELM327または他の診断デバイスでデータを確認できるのに、なぜストリーム内のデータを検索する必要があるのですか？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここでの質問は、なぜこのデータが必要なのかということです。私たちのケースでは、テレマティクスのためのデータが必要です。CANバスの動作に干渉したり、CANバスにデータを送信したりしないようにするために、ストリームでそれらを探します。 Vega MTXには、CANバスを操作するための特別なモード「リスニング」モードがあります。モードはそれ自体が意味を持ち、機器はバスのみをリッスンし、バスに何も送信しないため、通常の自動車システムへの影響を最小限に抑えます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
たとえば、ドアを開くためのセンサー。彼にリクエストを出すと、イグニッションがオンの場合にのみこれを実行できます。イグニッションがオフになり、CANバスがスリープ状態になると、このセンサーは使用できなくなります。 CANストリームでこのセンサーを見つけた場合、CANバスが動作しているときは常にそれが表示されます。そして、ドアを開けると、CANは自動的に起動します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以下の例はすべて、ポロセダンコネクトにのみ関連することも理解しておく必要があります。他の場合では、機器にリストされているセンサーがない場合がありますが、他のメーカーやモデルの車の場合、データは完全に異なるIDになります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
デフォルトではConfiguratorに値がHEX形式で表示されるという事実に注目します。</font><font style="vertical-align: inherit;">将来的には、データをHEX形式から10進値に複数回変換する必要があります。</font><font style="vertical-align: inherit;">これを行う最も簡単な方法は、Windows 10に組み込まれている電卓アプリケーションを使用することです。</font><font style="vertical-align: inherit;">これを「プログラマ」モードに変換します。データを入力するための番号システムを選択でき、それらは他の番号システムで複製されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
検索方法により、車内のすべてのセンサーをいくつかのタイプに分類します。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">バイナリセンサー。 </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">センサーを素早く交換。 </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">温度センサー。 </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">車の走行距離。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">レベルセンサー。 </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表示センサー</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リクエストのあるセンサー。 </font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、各タイプのセンサーを見つけることができる方法に移りましょう。 </font></font><br>
<br>
<h3><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.バイナリセンサー</font></font></b></h3> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最も単純なバイナリセンサーから始めましょう。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらのセンサーには、ドアセンサー、シートベルト、ブレーキ（ブレーキライトがオンになっているかどうか）、ハンドブレーキ、ボタンが押されているなどが含まれます。</font><font style="vertical-align: inherit;">それらの値は1ビットに配置されます。つまり、0（ドアが閉じている）または1（ドアが開いている）のいずれかです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それらを見つけるのは簡単ですが、注意が必要です。</font><font style="vertical-align: inherit;">運転席ドアを検索するには、ドアを開閉して、CANバスの変化を監視します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コンフィギュレータは、最後の数秒間に変更があったデータを赤で強調表示します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/zf/8x/jp/zf8xjpvzhahuxhbdadj6tsmmtum.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちの場合、運転席のドアは、ID 470のメッセージの最初のバイトのゼロビットを担当しています。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同じバイトには、他のすべてのドアのセンサーとトランクセンサーがあります。</font></font><br>
<br>
<h3><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.センサーをすばやく交換</font></font></b></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
迅速に変化するセンサーはバイナリセンサーに似ており、その値のみが1ビットを超えます。これらのセンサーを操作して、CANバスの変化をすぐに確認できます。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらのセンサーには、ほとんどの位置センサーが含まれます：アクセルペダルの位置、ガラスの位置、自動変速機の位置、イグニッションキーの位置。これらに加えて、これらは速度、回転数、ステアリングホイールの加速、アクセルペダルの加速などのセンサーです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まず、アクセルペダル位置センサーの例を使用して位置センサーを扱います。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これを行うには、車をオフにして、イグニッションをオンにし、エンジンを始動せずにアクセルペダルを押して、CANバスの変化を監視します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
原則として、アクセルペダルを離すと、このセンサーの値は0になり、アクセルペダルを押すと、ある値まで増加します。このようなパラメーターは、ID 280の最初のCANにあります。5番目のバイトは0（ペダルが解放されている）からFA（ペダルが「床まで」押されている）に変わります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/dx/k2/x9/dxk2x98zuq3b7bsbuv70t9yzzow.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
FAをHEXからDECに変換すると、数値は250になります。したがって、アクセルペダルをパーセントで（0から100まで）押すには、値に0.4を掛ける必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、エンジン速度など、1バイトに収まらないセンサーに移りましょう。 CANバスの変化を監視しながら、エンジン速度を徐々に上げ下げします。エンジンの回転数は、アクセルペダルと同じIDです。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/dx/k2/x9/dxk2x98zuq3b7bsbuv70t9yzzow.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アクセルペダルを操作すると、ここのデータが逆の順序になっていることがわかります。つまり、最も古い部分は3番目のバイト（ゼロからのカウントバイト）にあり、最も新しい部分は2番目のバイトにあります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、HEXからDECにデータを転送する必要があります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/oh/ev/zh/ohevzhgaspocuc3h3mp1o3z8ciw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、タコメーターまたは診断機器によって実際の革命を評価する必要があります。私の場合、タコメータの針は約1600 rpmでした。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、CANからのデータを10進形式（6508）でタコメーターからのエンジン速度（1600）で割ると、4.0675になります。目で回転数を決定する際のエラーを考慮して、分周器を4に四捨五入します。この後、いくつかの点で測定値を確認する必要があります。これを行うには、エンジン速度を異なる速度に設定し、CANバスからのデータでそれらを確認します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コンフィギュレータでは、センサー設定のすべての係数を置き換えて、速度の変化をリアルタイムで監視できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、ブレーキ力、ステアリングホイールの位置、ステアリングホイールの加速度、車速など、多数のセンサーが求められています。</font></font><br>
<br>
<h3><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.温度センサー</font></font></b></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ポロセダンの気温を知るのはとても大変でした。最初に、バイトが見つかりました。これは、車が加熱されたときにゆっくりと上向きに変化しました。その後、必要な係数の検索が始まりました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
診断を接続し、エンジン温度を選択して、CANバスの読み取り値と診断からのデータを比較します。対応表を作成し、係数を選択します。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
係数を選択した結果、温度の計算式が現れました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
XX * 0.75-48 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここで、XXはDECのID 288からの1バイトの値です。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/hy/vj/nf/hyvjnf90gsz8naskw2ep1q7ifsa.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
式に従って、スクリーンショットの温度が</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
179 * 0.75-48 = 86.25°Cで</font><font style="vertical-align: inherit;">あったと計算できます</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここで、179はID 288の最初のバイトからの10進数B3です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、これは難しいケースです。多くの車では、温度を見つけるのがはるかに簡単です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
バスで負の数を送信することは難しいため、製造元は-40°C、-48°C、または-58°Cの値を0測定として受け入れます。したがって、診断を接続して、現在の温度を確認します。これに40（48または58）を加え、それをHEXに変換します。結果の数をストリームで探しています。機械の温度が1度変化するのを待って、値を確認します。その値も1増加した場合、これが必要なセンサーです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CANバスからの値と診断クエリの値を混同しないことが重要です。バス上の測定値を同時に検索し、診断ツールが接続されている場合、診断要求への回答もバスに表示されます。 IDで識別できます。通常、700を超えるIDは診断要求と応答です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、クーラントの温度は常に要求することができます。この方法については、要求があるセンサーのセクションで後述します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
別の方法を使用して温度を検索することもできます。物理的にはエンジンの冷却水温度センサー（DTOZH）を見つけ、オフにして、可変抵抗器を車の配線に接続します。次に、急速に変化するデータを検索する方法に従って抵抗器を回転させ、CANバスをたどると、エンジン温度の読み取り値を見つけることができます。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実際には、ALTは常にストリーム内にあるか、マシンにリクエストを要求したため、この方法は使用しませんでした。 </font></font><br>
<br>
<h3><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.車の走行距離</font></font></b></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
テレマティクスの最も重要なパラメータの1つ。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初に、数値を探しているサイズを評価する必要があります。</font><font style="vertical-align: inherit;">2バイト（16ビット）のデータを取得する場合、最大数はFF FF = 65,535になります。車は明らかに65,000を超えて走行できます。つまり、車両には最低24ビットの長さが必要です。</font><font style="vertical-align: inherit;">すでに1600万kmに適合します。これは、実行するには明らかに十分です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、再び、さまざまな車でさまざまな方法で。</font><font style="vertical-align: inherit;">ポロセダンでは、走行距離はkmで表記され、フランス語では、100メートルの精度で送信されます。</font><font style="vertical-align: inherit;">その場合、数値は32ビット以上を占める可能性があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに検索するには、車のダッシュボードからマイレージを取得してHEXに転送する必要があります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/_g/y1/s6/_gy1s64ytgtjtxrkpxqccunxe2w.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちのケースでは、5732 kmです。これを16進数に変換して16 64を取得します。次に、この組み合わせが発生する行を見つけるために検索を行います。 1バイトで検索する必要があります。つまり、最初に16を検索し、次に見つかったオプションで、数値16の横に数値64があるかどうかを確認します。数値64は、数値16の左側または右側にあります。この車の走行距離は大きい場合は、おそらく64の横に00もあります。コンフィギュレーターには便利な検索（CTRL + F）があり、別のツールを使用する場合は、このデータを手動で検索する必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちの場合、走行距離は520 ID </font></font><br>
<br>
<img src="https://habrastorage.org/webt/kt/qs/0l/ktqs0lxxwbl7frstr8vjz9qvc54.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
00 16 64 = 5732 kmで</font><font style="vertical-align: inherit;">見つかりました</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
確認するには、さらに数キロ走行し、検出されたセンサーの値を確認することをお勧めします。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同様に、給油前に走行距離が検索されます。</font><font style="vertical-align: inherit;">この車では、ダッシュボードは燃費をガソリンスタンドまでタイヤに転送しませんので、ご要望に応じて行います。</font></font><br>
<br>
<h3><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.レベルセンサー</font></font></b></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
テレマティクスの2番目に重要なセンサーは、燃料レベルセンサーです。あなたはそれをストリームで見つけることができますが、それはリクエストによるものです（あまり好ましくありませんが、車によっては動作が異なる場合があります）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まず、診断ツールで燃料レベルの測定値を見つける必要があります。私の燃料レベルはメーターパネル（17ブロック）で見つかりました。メーターパネルでは、レベルセンサーの読み取り値はリットルです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
現在、車の燃料は21リットルです。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/t6/r-/rq/t6r-rq-pcbo-urm-pmfurhg7iwk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
21をDECからHEXに変換し、数値15を取得します。検索することで、それを見つけようとします。ストリームには、ID 320の指定された番号が含まれています。番号が見つからない場合は、1つ以上の値を探す必要があります。一部の車では、燃料は0.5リットルの精度で提供されるため、2倍大きい値を探す必要があります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/l-/mn/tw/l-mntw35tvcsswdhb_kh8sicrb4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
燃料レベルが判明したら、数リットルの燃料を車に注いで結果を確認する必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CANバスの読み取り値に従って、ガスタンクを分解し、タンクからFLSを引き出して移動することもできます。または、FLSからコネクタを取り外し、そこに可変抵抗器を接続します。それを回転させ、変更に従って燃料レベルセンサーを見つけることができます。分解する場合は、急速に変化するセンサーを探す方法で燃料レベルを調べる必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、検索時には、IDが700を超えるデータは考慮に入れないでください。これらは診断クエリです。診断機器を取り外すと、このデータは消えます。リクエストについては、以下で詳しく説明します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
例えば、ダッシュボードからの燃料残量診断機器の問い合わせに対する回答はこんな感じ。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/il/mj/pn/ilmjpn6qr8tru39qmxufwwwnpso.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、燃料レベル（パーセント）は標準のOBDIIクエリで確認できますが、VAGグループでは常に正しいデータが表示されるとは限りません。</font><font style="vertical-align: inherit;">タンクが満タンのSkoda RapidおよびSkoda Oktaviaでは、診断により85％の燃料レベルが示されます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/cp/bc/hg/cpbchg8ntk3n1qjolnygoq5zr_c.png"><br>
<br>
<h3><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.表示センサー</font></font></b></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
インジケーションセンサーはバイナリセンサーと非常によく似ており、同じ方法で検索する必要があります。これらのセンサーには、ダッシュボード上のさまざまなアイコンが含まれています。たとえば、チェックエンジンアイコンのステータスはID 480の最初のバイトにあります。このセンサー2Cでイグニッションがオンになっているとき。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/8r/sx/de/8rsxdelhyjgtedcykc0f4utt71s.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
起動後、チェックエンジン（CE）アイコンが消えると、このセンサーには00が表示されますが</font></font><br>
<br>
<img src="https://habrastorage.org/webt/8r/uq/su/8ruqsurccmkip9yhssm-8flrp00.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
、CEアイコンの原因となっているビットはどれですか。 2CをBINに変換して番号0010 1100を取得し</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ます。次に、480 ID全体をコピーし、最初のバイトを2C（0010 1100）に変更して、このパケットを車に送信してみます。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意！</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、車へのデータ送信は常に安全であるとは限りません。何かを壊したり、走行距離を伸ばしたりできます。</font><font style="vertical-align: inherit;">バイナリセンサーを検索してもセンサーが見つからない場合にのみ、この方法を使用する価値があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私の場合、巻き上げられた車に送られましたが（これはお勧めできません）、CEとEPCのアイコンがきちんと点滅します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/fj/ci/gb/fjcigbvg8hop-hhliayqzsz81fy.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、2C（0010 1100）08（0000 1000）の代わりに送信します。</font><font style="vertical-align: inherit;">きちんとCEが点滅します。</font><font style="vertical-align: inherit;">したがって、このアイコンは3ビットで処理されます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/kl/tl/up/kltlupgvkuuktk8bxujsft2shb8.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
04（0000 0100）を送信すると、EPCアイコンが点滅します。</font></font><br>
<br>
<h3><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.リクエストのあるセンサー</font></font></b></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ストリーム内にすべてのデータが見つかるわけではありません。たとえば、ディーゼルVWトランスポーターT4では、ストリーム内にエンジン温度はありません。彼女は片付けていません。したがって、これらのパラメーターについて車に尋ねる必要があります。 Rio \ Solarisの燃料レベルにも同じことが当てはまります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この例では、ポロセダンの燃料レベルを確認してみましょう。燃料レベルの検索に関する段落で行ったように、ブロック17に進み、ダッシュボードに質問します。要求を分析した後、次のコマンドで診断が燃料レベルを要求していることがわかります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/p4/xo/qg/p4xoqgno99-xktykwtl5gagpo1y.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、それに応じて、彼女</font></font><br>
<br>
<img src="https://habrastorage.org/webt/il/mj/pn/ilmjpn6qr8tru39qmxufwwwnpso.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
に届きます</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">次に、ID 714をコピーし、診断ツールをオフにして、要求を車に送信してみます。診断が接続されたときと同じ回答がID 77Eで返される場合、燃料レベル（4バイト。HEX15 = DEC 21）21リットルのパケットを受け取りました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vega MTXには、クエリを使用してセンサーを操作するための組み込みツールがあります。そこで、特定の間隔または特定の条件下でイグニッションがオンになった後に要求が送信されるように構成できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、CANバスでデータを検索する方法論で終わります。 CANバス上で必要なデータを見つけたり、経験を共有したりする方法を他の誰かが知っている場合は、喜んでそれらを聞きます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この記事を書く前に、このトピックに関するビデオを作成しました。ビデオには、車両のCANバスへの接続、コンフィギュレーターとファイルサーバーの操作に関する詳細が含まれています。</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/DkdOdCKI9HQ" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configuratorへのリンク</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
サーバーには、一部の車、トラック、農業機械用の設定があります。</font><font style="vertical-align: inherit;">すべてのファイルは暗号化されており、車両のCANに表示されているセンサーを確認できます。</font><font style="vertical-align: inherit;">接続すると、センサー値は表示されますが、アドレスを確認することはできません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
つづく。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja497116/index.html">Starsky Roboticsの無人トラックが終了</a></li>
<li><a href="../ja497118/index.html">[予報]無人トラックはすべて終わりますか、それともStarsky Roboticsだけですか？</a></li>
<li><a href="../ja497126/index.html">バックログのスコアリングと優先順位付けの手法</a></li>
<li><a href="../ja497132/index.html">#SaveFirstイニシアチブで社会的に重要なプロジェクトをサポート</a></li>
<li><a href="../ja497136/index.html">「Save Concord」または滑走路上の異物を検索するためのロシアのレーダーシステムのテストからのレポート</a></li>
<li><a href="../ja497142/index.html">Harmony OSサポートをinDriver Androidアプリケーションに追加する方法</a></li>
<li><a href="../ja497144/index.html">くさびでくさび：PIV5ウイルスを使用してMERS-CoVとおそらくSARS-CoV-2に対するワクチンを作成する</a></li>
<li><a href="../ja497146/index.html">応用暗号法。30万ドルでビットコインを復元した方法</a></li>
<li><a href="../ja497148/index.html">GolangとFyneを使用したデスクトップアプリケーションの作成</a></li>
<li><a href="../ja497152/index.html">プロダクトハートのあるところ：幸福を測る指標</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>