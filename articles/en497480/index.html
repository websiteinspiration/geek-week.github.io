<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤫 👧🏼 🍃 Video Lectures: unix way 🦆 🚴 🎒</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Quarantine is a wonderful time to learn something. However, as you know, for someone to learn something, someone must teach. If you have a presentatio...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Video Lectures: unix way</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/497480/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/vm/gw/wm/vmgwwmtfoo_hivajmmrsjdynktm.jpeg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quarantine is a wonderful time to learn something. </font><font style="vertical-align: inherit;">However, as you know, for someone to learn something, someone must teach. </font><font style="vertical-align: inherit;">If you have a presentation with which you want to speak to a millionth audience, gaining world fame, then this article is for you. </font><font style="vertical-align: inherit;">Here you will find step-by-step instructions on how to make a video from the presentation. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We mark the way of recording “audio comments” in PowerPoint and exporting the presentation in video as trivial and not giving a tenth of the possibilities that are needed for a truly cool video. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To begin with, we will decide which frames we need:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Actually slides with a voiceover</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Slide change</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Interrupt quotes from popular movies</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A few frames with the physiognomy of the lecturer and favorite cat (optional)</font></font></li>
</ol><br>
<a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Create a directory structure</font></font></h3><br>
<pre><code class="bash hljs">.<font></font>
├── clipart<font></font>
├── clips<font></font>
├── rec<font></font>
├── slide<font></font>
└── sound<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Assignment of catalogs in the order of listing: movies from which we will pull quotes (clipart), fragments of our future video (clips), videos from the camera (rec), image slides (slide), sound (sound).</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Making a presentation in pictures</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For a real </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">red-eyed</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Linuxoid, making a presentation in the form of pictures does not present any problems. </font><font style="vertical-align: inherit;">Let me just remind you that a pdf document can be parsed into images by</font></font><br>
<br>
<pre><code class="bash hljs">pdftocairo -png -r 128 ../lecture.pdf</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If there is no such command, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">install the poppler-utils</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> package </font><font style="vertical-align: inherit;">(instructions for Ubuntu; if you have Arch, then you already know what to do without me). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hereinafter, I believe that the video is being prepared in HD Ready format, i.e., 1280 × 720. </font><font style="vertical-align: inherit;">A presentation with a horizontal size of 10 inches gives exactly this size when unloading (see the -r 128 option).</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We are preparing the text</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If you want to make really cool material, then your speech must first be written. </font><font style="vertical-align: inherit;">I also thought that I could say the text without preparation, especially since I have a good lecture experience. </font><font style="vertical-align: inherit;">But it’s one thing to perform live, and another to record video. </font><font style="vertical-align: inherit;">Do not be lazy - the time spent on typing will pay off more than once. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/_6/jl/bb/_6jlbbte4tfrvad0s6ukynie_ou.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Here is my recording format. </font><font style="vertical-align: inherit;">The number in the heading is equal to the number of the slide, interruptions are highlighted in red. </font><font style="vertical-align: inherit;">Any editor is suitable for preparation, but it's better to take a full-fledged word processor - for example, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OnlyOffice</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sounding slides</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
What can I say - turn on the microphone and write :) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Experience shows that the recording quality even from the cheapest external microphone is incomparably better than with the laptop’s built-in microphone. If you want high-quality equipment, then I recommend </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">this article</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For recording, I used </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">audio-recorder</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - a very simple recording application. You can take it, for example, here:</font></font><br>
<br>
<pre><code class="bash hljs">sudo add-apt-repository ppa:audio-recorder/ppa<font></font>
sudo apt-get update<font></font>
sudo apt-get install audio-recorder</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The main thing in this step is the proper file naming. </font><font style="vertical-align: inherit;">The name must consist of a slide number and a fragment number. </font><font style="vertical-align: inherit;">Fragments are numbered with odd numbers - 1, 3, 5, etc. So, for a slide, the text of which is shown in the picture, two files will be created: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">002-1.mp3</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">002-3.mp3</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If you recorded all the videos at once in a quiet room, then nothing can be done with them. </font><font style="vertical-align: inherit;">If you recorded in several stages, it is better to equalize the volume level:</font></font><br>
<br>
<pre><code class="bash hljs">mp3gain -r *.mp3</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For </font><font style="vertical-align: inherit;">some reason, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mp3gain</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> utilities </font><font style="vertical-align: inherit;">are not in the standard repositories, but you can get it here:</font></font><br>
<br>
<pre><code class="bash hljs">sudo add-apt-repository ppa:flexiondotorg/audio<font></font>
sudo apt-get update<font></font>
sudo apt-get install mp3gain</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
After all this, you need to write another file with silence. </font><font style="vertical-align: inherit;">It is necessary to add a soundtrack to silent clips: if there is a soundtrack in one clip and not in the other, then it is difficult to glue these clips. </font><font style="vertical-align: inherit;">Silence can be recorded from the microphone, but it is better to create a file in the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Audacity</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> editor </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">The file must be at least a second </font><i><font style="vertical-align: inherit;">long</font></i><font style="vertical-align: inherit;"> (longer), and </font><i><font style="vertical-align: inherit;">silence.mp3</font></i><font style="vertical-align: inherit;"> should be </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">called</font></font></i><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cooking breakdown rollers</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Everything here is limited only by your imagination. </font><font style="vertical-align: inherit;">You can use the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Avidemux</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> editor to edit the video </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Once it was in standard repositories, but then for some reason it was sawn out. </font><font style="vertical-align: inherit;">This will not stop us:</font></font><br>
<br>
<pre><code class="bash hljs">sudo add-apt-repository ppa:ubuntuhandbook1/avidemux<font></font>
sudo apt-get update<font></font>
sudo apt-get install avidemux2.7-qt5</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Instructions for working with this editor on the sea, yes, in principle, everything is intuitive there. It is important to observe several conditions. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
First, the resolution of the movie must match the target resolution of the movie. To do this, in the “video for exit” you need to use two filters: swsResize to change the resolution and “add fields” to make the Soviet “narrow-format” film wide format. All other filters are optional. For example, if someone does not understand what Mr. Sharikov’s statement is in the fragment under discussion, using the “add logo” filter, you can add the PostgreSQL logo on top of “Dog’s Heart”.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Secondly, all fragments must use the same frame rate. I use 25 frames per second, because so much gives my camera and old Soviet films. If the movie from which you cut the frame is shot at a different speed, use the “Resample Video” filter. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Thirdly, all fragments must be compressed with the same codec and packed in the same containers. Therefore, in </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Avidemux</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> for the format, select the video - “ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mpeg4 AVC (x264)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”, audio - “ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AAC (Faac)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”, the output format - “ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MP4 Muxer</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fourthly, it is important to correctly name the cut clips. </font><font style="vertical-align: inherit;">The file name should consist of a slide number and a fragment number. </font><font style="vertical-align: inherit;">Fragments are numbered with even numbers, starting with 2. So, for the frame under discussion, the clip with the chopping should be called </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">002-2.mp4</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
After the clips are ready, you need to transfer them to the directory with the fragments. </font><font style="vertical-align: inherit;">The </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">avidemux</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> settings </font><font style="vertical-align: inherit;">differ from the </font><font style="vertical-align: inherit;">default </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ffmpeg</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> settings </font><font style="vertical-align: inherit;">by the mysterious parameters tbr, tbn, tbc. </font><font style="vertical-align: inherit;">They do not affect reproduction, but they do not allow the rollers to be glued. </font><font style="vertical-align: inherit;">Therefore, we recode:</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-keyword">for</span> f <span class="hljs-keyword">in</span> ???-?.mp4;
<span class="hljs-keyword">do</span>
  ffmpeg -hide_banner -y -i <span class="hljs-string">"<span class="hljs-variable">${f}</span>"</span> -c copy -r 25 -video_track_timescale 12800 ../clips/<span class="hljs-variable">$f</span>
<span class="hljs-keyword">done</span></code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We remove screensavers</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Everything here is also simple: shoot in the background of some kind of clever scheme, put the received videos in the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rec</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> directory </font><font style="vertical-align: inherit;">, and from there transfer to the directory with fragments. </font><font style="vertical-align: inherit;">Naming rules are the same as for quotation-breaks, the recoding command is as follows:</font></font><br>
<br>
<pre><code class="bash hljs">ffmpeg -y -i source_file -r 25 -vcodec libx264 -pix_fmt yuv420p -profile:v high -coder 1 -s 1280x720 -ar 44100 -ac 2 ../clips/xxx-x.mp4
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If you plan to start the video with your speech, name this fragment </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">000-1.mp4</font></font></i><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We make frames from static pictures</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It's time to mount clips from static pictures and sound. </font><font style="vertical-align: inherit;">This is done with this script:</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-meta">#!/bin/bash
</span>
<span class="hljs-keyword">for</span> sound <span class="hljs-keyword">in</span> sound/*.mp3
<span class="hljs-keyword">do</span>
  soundfile=<span class="hljs-variable">${sound##*/}</span>
  chunk=<span class="hljs-variable">${soundfile%%.mp3}</span>
  clip=<span class="hljs-variable">${chunk}</span>.mp4<font></font>
  pic=slide/<span class="hljs-variable">${chunk%%-?}</span>.png<font></font>
<font></font>
  duration=$(soxi -D <span class="hljs-variable">${sound}</span> 2&gt;/dev/null)
  <span class="hljs-built_in">echo</span> <span class="hljs-variable">${sound}</span> <span class="hljs-variable">${pic}</span> <span class="hljs-variable">${clip}</span> <span class="hljs-string">" - "</span> <span class="hljs-variable">${duration}</span><font></font>
<font></font>
  ffmpeg -hide_banner -y -loop 1 -i <span class="hljs-variable">${pic}</span> -i <span class="hljs-variable">${sound}</span> -r 25 -vcodec libx264 -tune stillimage -pix_fmt yuv420p -profile:v high -coder 1 -t <span class="hljs-variable">${duration}</span> clips/<span class="hljs-variable">${clip}</span>
<span class="hljs-keyword">done</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Please note that first the duration of the sound file is determined by the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">soxi</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> utility </font><font style="vertical-align: inherit;">, and then the video of the desired length is mounted. All the recommendations I found are simpler: instead of the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-t $ {duration}</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> flag, the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-shortest</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> flag is </font><i><font style="vertical-align: inherit;">used</font></i><font style="vertical-align: inherit;"> . In fact, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ffmpeg</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> determines the length of the mp3 very approximately, and during installation, the length of the audio track can be very (one to two seconds) different from the length of the video track. It doesn’t matter if the whole video consists of a single frame, but when gluing such a movie with a break at the border, extremely unpleasant effects with stuttering occur. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Another way to determine the duration of an mp3 file is to use </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mp3info</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . She is also mistaken, and sometimes</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ffmpeg</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> gives more than </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mp3info</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , sometimes vice versa, sometimes they both lie - I haven’t noticed any patterns. </font><font style="vertical-align: inherit;">But </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">soxi is</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> working correctly. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To install this useful utility, do this:</font></font><br>
<br>
<pre><code class="bash hljs">sudo apt-get install sox libsox-fmt-mp3</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Making transitions between slides</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Transition - a short video in which one slide turns into another. </font><font style="vertical-align: inherit;">To make such videos, take slides in pairs and </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">use imagemagick to</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> turn one into the other:</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-meta">#!/bin/bash
</span><font></font>
BUFFER=$(mktemp -d)<font></font>
<font></font>
<span class="hljs-keyword">for</span> pic <span class="hljs-keyword">in</span> slide/*.png
<span class="hljs-keyword">do</span>
  <span class="hljs-keyword">if</span> [[ <span class="hljs-variable">${prevpic}</span> != <span class="hljs-string">""</span> ]]
  <span class="hljs-keyword">then</span>
    clip=<span class="hljs-variable">${pic##*/}</span>
    clip=<span class="hljs-variable">${clip/.png/-0.mp4}</span>
    <span class="hljs-comment">#</span>
    <span class="hljs-comment">#  </span>
    <span class="hljs-comment">#</span>
    ./fade.pl <span class="hljs-variable">${prevpic}</span> <span class="hljs-variable">${BUFFER}</span> 1280 720 5 direct 0<font></font>
    ./fade.pl <span class="hljs-variable">${pic}</span> <span class="hljs-variable">${BUFFER}</span> 1280 720 5 reverse 12
    <span class="hljs-comment">#</span>
    <span class="hljs-comment">#   </span>
    <span class="hljs-comment">#</span>
    ffmpeg -y -hide_banner -i <span class="hljs-string">"<span class="hljs-variable">${BUFFER}</span>/%03d.png"</span> -i sound/silence.mp3 -r 25 -y -acodec aac -vcodec libx264 -pix_fmt yuv420p -profile:v high -coder 1 -shortest clips/<span class="hljs-variable">${clip}</span>
    rm -f <span class="hljs-variable">${BUFFER}</span>/*
  <span class="hljs-keyword">fi</span>
  prevpic=<span class="hljs-variable">${pic}</span>
<span class="hljs-keyword">done</span><font></font>
<font></font>
rmdir <span class="hljs-variable">${BUFFER}</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For some reason, I wanted the slide to scatter in dots, and then the next slide was assembled from the dots, and for this I wrote a script called </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fade.pl</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Having </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">imagemagick</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , a real Linuxoid will create any special effect, but if someone likes my idea of ​​scattering, here is the script:</font></font><br>
<br>
<pre><code class="perl hljs"><span class="hljs-comment">#!/usr/bin/perl</span><font></font>
<font></font>
<span class="hljs-keyword">use</span> strict;
<span class="hljs-keyword">use</span> warnings;
<span class="hljs-keyword">use</span> locale;
<span class="hljs-keyword">use</span> utf8;
<span class="hljs-keyword">use</span> <span class="hljs-keyword">open</span> <span class="hljs-string">qw(:std :utf8)</span>;
<span class="hljs-keyword">use</span> Encode <span class="hljs-string">qw(decode)</span>;
<span class="hljs-keyword">use</span> I18N::Langinfo <span class="hljs-string">qw(langinfo CODESET)</span>;<font></font>
<font></font>
<span class="hljs-keyword">my</span> $codeset = langinfo(CODESET);<font></font>
@ARGV = <span class="hljs-keyword">map</span> { decode $codeset, $_ } @ARGV;<font></font>
<font></font>
<span class="hljs-keyword">my</span> ($source, $target, $width, $height, $pixsize, $rev, $file_no) = @ARGV;<font></font>
<font></font>
<span class="hljs-keyword">my</span> @rects;<font></font>
$rects[$_] = <span class="hljs-string">"0123456789AB"</span> <span class="hljs-keyword">for</span> <span class="hljs-number">0</span>..$width*$height/$pixsize/$pixsize/<span class="hljs-number">12</span> - <span class="hljs-number">1</span>;<font></font>
<font></font>
<span class="hljs-keyword">for</span> <span class="hljs-keyword">my</span> $i (<span class="hljs-number">0</span>..<span class="hljs-number">11</span>) {
  <span class="hljs-keyword">substr</span>($_,<span class="hljs-keyword">int</span>(<span class="hljs-keyword">rand</span>(<span class="hljs-number">12</span>-$i)),<span class="hljs-number">1</span>) = <span class="hljs-string">""</span> <span class="hljs-keyword">for</span> (@rects);
  <span class="hljs-keyword">my</span> $s = $source;<font></font>
  $s =~ <span class="hljs-keyword">s</span><span class="hljs-comment">#^.*/##;</span>
  <span class="hljs-keyword">open</span>(PICTURE,<span class="hljs-string">"| convert - -transparent white PNG:- | convert \"$source\" - -composite \"$target/"</span>.substr(<span class="hljs-string">"00"</span>.($file_no+$i),-<span class="hljs-number">3</span>).<span class="hljs-string">".png\""</span>);
  <span class="hljs-keyword">printf</span> PICTURE (<span class="hljs-string">"P3\n%d %d\n255\n"</span>,$width,$height);
  <span class="hljs-keyword">for</span> <span class="hljs-keyword">my</span> $row (<span class="hljs-number">1</span>..$height/$pixsize/<span class="hljs-number">3</span>) {
    <span class="hljs-keyword">for</span> <span class="hljs-keyword">my</span> $j (<span class="hljs-number">0</span>..<span class="hljs-number">2</span>) {
      <span class="hljs-keyword">my</span> $l = <span class="hljs-string">""</span>;
      <span class="hljs-keyword">for</span> <span class="hljs-keyword">my</span> $col (<span class="hljs-number">1</span>..$width/$pixsize/<span class="hljs-number">4</span>) {
        <span class="hljs-keyword">for</span> <span class="hljs-keyword">my</span> $k (<span class="hljs-number">0</span>..<span class="hljs-number">3</span>) {<font></font>
          $l .= (<span class="hljs-keyword">index</span>($rects[($row-<span class="hljs-number">1</span>)*$width/$pixsize/<span class="hljs-number">4</span>+$col-<span class="hljs-number">1</span>],<span class="hljs-keyword">sprintf</span>(<span class="hljs-string">"%1X"</span>,$j*<span class="hljs-number">4</span>+$k))==-<span class="hljs-number">1</span> <span class="hljs-keyword">xor</span> $rev eq <span class="hljs-string">"reverse"</span>) ? <span class="hljs-string">"0 0 0\n"</span> : <span class="hljs-string">"255 255 255\n"</span> <span class="hljs-keyword">for</span> (<span class="hljs-number">1</span>..$pixsize);<font></font>
        }<font></font>
      }<font></font>
      <span class="hljs-keyword">print</span> PICTURE ($l) <span class="hljs-keyword">for</span> (<span class="hljs-number">1</span>..$pixsize);<font></font>
    }<font></font>
  }<font></font>
  <span class="hljs-keyword">close</span>(PICTURE);<font></font>
}</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mount the finished roller</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now we have all the fragments. </font><font style="vertical-align: inherit;">We go to the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">clips</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> directory </font><font style="vertical-align: inherit;">and collect the finished movie with two commands:</font></font><br>
<br>
<pre><code class="bash hljs">ls -1 ???-?.mp4 | gawk -e <span class="hljs-string">'{print "file " $0}'</span> &gt;list.txt<font></font>
ffmpeg -y -hide_banner -f concat -i list.txt -c copy MOVIE.mp4<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Enjoy your viewing to your grateful students!</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en497466/index.html">Sysbench and the distribution of random variables</a></li>
<li><a href="../en497468/index.html">[Master class] Practical attacks on the USB interface</a></li>
<li><a href="../en497470/index.html">How to Eject Viruses on the Corona SDK</a></li>
<li><a href="../en497476/index.html">Top 8 JavaScript Data Structures</a></li>
<li><a href="../en497478/index.html">Network simulator tutorial ns-3. Chapter 4</a></li>
<li><a href="../en497482/index.html">Authentication in Kubernetes with Dex: fasten LDAP</a></li>
<li><a href="../en497484/index.html">Using ML Algorithms to Classify Multipage Documents: VTB Experience</a></li>
<li><a href="../en497486/index.html">Data division. year 2013. Retrospective</a></li>
<li><a href="../en497488/index.html">Automate HR processes using Microsoft Teams, PowerApps and Power Automate. Employee withdrawal requests</a></li>
<li><a href="../en497490/index.html">Difficulties in paternity of seahorses: genetic metamorphoses of the immune system</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>