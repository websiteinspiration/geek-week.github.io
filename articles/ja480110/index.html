<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>😽 💻 ⛹🏻 uMCPIno：Arduino用のシンプルな配信保証プロトコルの作成 🎌 👏🏼 🔷</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="こんにちは、親愛なる皆さん！
 彼らの生活のある時点で、永続的なuporotyh DIY-schiku はそれぞれ、Kantian Arduinoとして十分に長くなりました。：LEDを点滅させ、センサーからデータを取得し、ワイヤーを介してPCに転送することは確かに楽しいですが、究極の目的は、「銅結合...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>uMCPIno：Arduino用のシンプルな配信保証プロトコルの作成</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/480110/"><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">こんにちは、親愛なる皆さん！</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
彼らの生活のある時点で、永続的な</font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">uporotyh</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> DIY-schiku </font><font style="vertical-align: inherit;">はそれぞれ、</font><s><font style="vertical-align: inherit;">Kantian</font></s><font style="vertical-align: inherit;"> Arduinoとして十分に長くなりました</font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：LEDを点滅させ、センサーからデータを取得し、ワイヤーを介してPCに転送することは確かに楽しいですが、究極の目的は、「銅結合」から解放され、普遍的なエーテルの波の真の自由の中で移動することです。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここで、不安定な通信チャネル、伝送エラー、未配信メッセージの厳しい現実が開かれます。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
神はこの分野で独創性を主張することを禁じています。人類は長い間、あらゆる機会に一連のプロトコルを使用してきました。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、私たちの目標は学ぶことであり、私は戦闘における偵察の熱心なサポーターであるため、独自のプロトコル「自転車」を発明することによって研究します。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
今日私は、2つのサブスクライバー（ポイントツーポイント、ポイントツーポイント）間のメッセージの配信、整合性、およびシーケンスを保証し、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nagle</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アルゴリズム</font><font style="vertical-align: inherit;">と</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プロトコルパイプライン</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用できるプロトコルを開発することを提案します</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">同時に、それは最小限の</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オーバーヘッドを</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">持ち、窮屈なArduino UNOにさえ押し込む</font><font style="vertical-align: inherit;">必要があり</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jt/7a/_b/jt7a_bc6uynr5uu08ab3plyuucq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
船上で興味を持っている皆さんにお願いします。ハッチを閉じ、キングストーンを開き、バラストタンクを満たします。</font><font style="vertical-align: inherit;">私たちは過去、目的地への遠足があります：1974年！</font></font><br>
<a name="habracut"></a><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">せっかちな人のために（私自身はそうです！）</font></font></b><div class="spoiler_text">   ,   :<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"> Arduino</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"> STM32</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"> PC (C#)</a></li>
</ul><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
古き良き伝統に従って、この分野で認められた少なくとも2人の専門家が暗号アルゴリズムとプロトコルの説明に関与しています。他の誰かがそれらを知らない場合は、知り合いになります。</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アリス</font></font></b><div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/fb4/6f4/f08/fb46f4f081e1affbfba68c39dcbc7768.jpg" alt="image"><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">豆</font></font></b><div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/048/a75/668/048a75668215c8147df3f5720f283899.jpg" alt="image"><br>
</div></div><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">まず、簡単なタスクについて説明します</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アリスとボブは隣接する塹壕に座っており、お互いを見るために頭を上げることはできません。</font><font style="vertical-align: inherit;">彼らは声だけで話すことができ、隣では弾丸の笛と砲弾が破裂して悲鳴を溺れさせます。さらに、彼らの1人が話すときは、何も聞こえないように悲鳴を上げる必要があります。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
状況が複雑になるのは、敵に盗聴されてしまうためです。何らかの理由で、長い数字のシーケンスで構成されるコード言語を使用する必要があります。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アリスとボブはどちらも人間なので、定期的に外食やトイレに行かなければならず、いらいらするので、いざというときにいらいらします！</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接続を確立する方法と理由は？</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべてが単純に失敗する運命にあるように思われる場合、このような憂鬱な状況で信頼できるデータ転送をどのように手配できますか？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
頭に浮かぶ最初の解決策は、</font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ストップワード</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コードフレーズを</font><font style="vertical-align: inherit;">使用し</font><font style="vertical-align: inherit;">て転送を開始および終了することです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さて、アリスがメッセージを送信したい場合、彼女は「送信を開始してください！」と叫ぶ必要があるとしましょう。ボブが「受付を開始します！」と応答するまで待ちます。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アリスがボブの応答を待たない場合は、転送を開始するためのリクエストを繰り返すだけです。当然、これを頻繁に行うべきではありません。そうしないと、ボブの答えが聞こえないだけです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
完璧に。しかし、アリスが次の塹壕「送信を開始！」から応答した場合はどうなりますか？</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ボブもいくつかの重要な情報を今すぐ転送することを決定したことがわかりました。アリスは穏やかな性格で、「まあ、私は待つつもりです。私のメッセージは原則として緊急ではないので、ボブが最初にそれを伝えましょう」と思ったかもしれません。これを考えて、彼女は「レセプションを始めましょう！」と答えます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以来</font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">戦時中の正弦値が4に到達することができ、</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">音の速度は有限であり、そして...それはアリスとボブは聞いたことがあるものを理解するいくつかの時間を要し、さらにボブは、紳士として、女性に与えることを決定することができ、彼は「私が受け取るために始めている！」肩をすくめると叫ぶ</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
について私たちが使用する怒りのイラストはタイムチャートになります。時間は彼らに下ります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アリスとボブが間に合わなかった</font></font><br>
<img src="https://habrastorage.org/webt/cz/ye/hn/czyehnoehw9e3wnxveaiwvef5ok.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
場合</font><font style="vertical-align: inherit;">：</font><font style="vertical-align: inherit;">メッセージが失われた場合：</font></font><br>
<img src="https://habrastorage.org/webt/5u/yk/md/5uykmdq7sxiagt-5twd3uhpnxas.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは大失敗です。すべてが混乱しすぎて、受信者はフレーズを聞いても聞いても聞こえない可能性があり、どちらの場合でも、対話者は自分のメッセージが受信者に聞いたかどうかを知りません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
現在、アリスとボブの両方が歓迎を期待しています。紛争が発生し、誰かが感染を再開する必要があることを理解するのは当然でしょう。しかし、すべてが新しい方法で再び発生した場合はどうなりますか？そして、ここがまた私たちの出発点です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
状況が非常にまれだと思う場合は、加入者またはあなた（またはその両方）のインターネット接続が遅いときに、最後に音声で誰かと話したことを思い出してください。 「こんにちはこんにちはこんにちは、あなたは消えます。」 「こんにちはこんにちは聞こえません。」</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一方、塹壕では、状況が激化しており、指揮官はレポートの送信を要求しています。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
時間です</font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">出典</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を参照してください。</font><s><font style="vertical-align: inherit;">マルクスを研究するために、エンゲルス</font></s><font style="vertical-align: inherit;">は40年以上前に戻り</font><font style="vertical-align: inherit;">、</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">DDCMP</font></a><font style="vertical-align: inherit;">プロトコルの設計時に</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DEC</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">エンジニアがそのような問題をどのように解決したかを確認し</font><font style="vertical-align: inherit;">ます</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">
DDCMPの開発者によると、アリスとボブは感情を拒否し、</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">有限状態機械の</font></a><font style="vertical-align: inherit;">ようになる必要があり</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">ます</font></a><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">
つまり、それ以降、アリスとボブにはいくつかの固定状態のみがあり、これらの状態間の遷移は、特定のイベントが発生したときに特定のルールに従って厳密に発生する可能性があります。</font><font style="vertical-align: inherit;">
最初に、単に状態をリストします。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">中止</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最初の開始</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">確認済みの開始</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ランニング</font></font></li>
</ul><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ご覧のとおり、4つしかありません。</font><font style="vertical-align: inherit;">そして今、何が起こっても、サブスクライバーのそれぞれは、少なくとも、自分に対して、これらの状態の1つだけにいることを確実に知っています。</font><font style="vertical-align: inherit;">実際、少し前を見ると、ほとんどの場合、1人のサブスクライバーが2番目のサブスクライバーの状態を知っていることになりますが、</font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これは正確ではありません</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">状態を個別に詳しく見ていきましょう</font></font></h3><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HALTED</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は最も単純な状態で、誰もどこにも行かず、誰もがその場所にとどまり、何も送信または受信されず、外部刺激は無視されます。 1つを除くすべて-上級当局の意志。元のDDCMPプロトコルでは、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HALTED</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">状態からの遷移</font><font style="vertical-align: inherit;">は、ユーザーの要求時に</font><font style="vertical-align: inherit;">のみ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">INITIAL START</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">状態</font><font style="vertical-align: inherit;">にすることができます-アリスまたはボブは、接続を確立するための命令を受け取ります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アリスまたはボブがそのような注文を受けるとどうなりますか？</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
彼らはすぐに、状態が</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HALTED</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">から</font><b><font style="vertical-align: inherit;">INITIAL STARTに</font></b><font style="vertical-align: inherit;">変わったことに</font><b><font style="vertical-align: inherit;">気付きます</font></b></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、この遷移には、他の遷移と同様に、厳密に定義された一連のアクションが含まれます。この場合、「DO IT ONCE！」と叫びます。時計の時刻を検出します。すべて。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それで、アリスは彼女に必要なものを叫び、ストップウォッチのボタンを押しました。ここで、ボブに何を期待するかを理解するために、アリスが</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">INITIAL START</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">状態のときにアリスがどうなるかを考え</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 -アリスが時間が経過したことに気付いた瞬間から10秒としましょう。彼女はボブから何の反応も聞きませんでした（注、ボブが彼女に何も叫んでいないと言っているのではありません。この時期に聞いたアリスは賢明で合理的な女性であり、事実のみに依存しています）。このイベントをタイムアウトと呼びます-待機間隔を超えました。この場合、プロトコルは繰り返しを指示します。「DO IT ONCE！」と叫びます。そして再び時間。まだ厚くない。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 -ボブが同じことを言ったことをアリスが聞いた場合-「DO ONE TIME！」、そしてアリスは</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">非選択的</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に</font><b><font style="vertical-align: inherit;">ACKNOWLEDGED START</font></b><font style="vertical-align: inherit;">状態になり</font><font style="vertical-align: inherit;">、それについて彼女はすぐに「DO TWO！」と叫ぶ必要があります。時計をもう一度計時します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 -繰り返しますが、アリスがボブから「DO TWO！」と聞いた場合、すぐに</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RUNNING</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（！）</font><font style="vertical-align: inherit;">状態になり</font><font style="vertical-align: inherit;">、「NOOOOOL ACCEPTED！」と叫びます。</font><font style="vertical-align: inherit;">彼女のストップウォッチが開始されている場合、彼女は警告の最前線からそれをオフにします。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
現在の状態では提供されない不必要な動きをしないことが非常に重要です。</font><font style="vertical-align: inherit;">ボブが泣いても、どんなにのろいや物乞いをしても、アリスは合意したように反応します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そのようなものを表の形で提示すると便利です。</font><font style="vertical-align: inherit;">それでは、すでに説明した</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HALTED</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">状態</font><font style="vertical-align: inherit;">と</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">INITIAL START</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">状態から始めて</font><font style="vertical-align: inherit;">、表をさらに補充していきます。</font></font><br>
<br>
<div class="scrollable-table"><table>
<tbody><tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">現在の状態</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">EVENT</font></font><br>
</th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新規条件</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">行為</font></font><br>
</th>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">誰でも</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注文は「つながりを断つ」</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">中止</font></font><br>
</td>
<td></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">中止</font></font><br>
</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「接続」を注文する</font></font><br>
</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">初期状態</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1）「DO IT ONCE！」と叫びます。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2）タイマーを開始する</font></font><br>
</td>
</tr>
<tr>
<td rowspan="3"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最初の開始</font></font><br>
</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「DO IT ONCE！」と聞いた</font></font><br>
</td>
<td>ACKNOWLEDGED START<br>
</td>
<td>1)  « !»<br>
2)  <br>
</td>
</tr>
<tr>
<td> « !»</td>
<td>RUNNING<br>
</td>
<td>1)  « !»<br>
2)  <br>
</td>
</tr>
<tr>
<td>  — </td>
<td>INITIAL START<br>
</td>
<td>1)  « !»<br>
2)  <br>
</td>
</tr>
</tbody></table></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DDCMPの元の説明からいくつかの点を意識的に省略しています。それらは必要ありません。DDCMPを繰り返すだけでなく、それに基づい</font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">て同じ、別の</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新しいプロトコル</font><s><font style="vertical-align: inherit;">のみを</font></s><font style="vertical-align: inherit;">構築したいの</font><font style="vertical-align: inherit;">です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、状態と遷移の説明に戻ります。次の状態は</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ACKNOWLEDGED START</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この状態になると、アリスまたはボブが心配することはすべて次のとおりです。- </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 待機時間が切れる前と同じように、この場合はその状態を維持する必要があるため、「DO TWO！」と叫びます。そして、新しいスタート時にタイマー</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 -「DO TWO！」を聞いた</font><font style="vertical-align: inherit;">「ACCEPTED NOOOOL！」と叫びながら、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RUNNING</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">状態</font><font style="vertical-align: inherit;">に</font><font style="vertical-align: inherit;">変換され</font><font style="vertical-align: inherit;">ます。タイマーを停止します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 -「DO IT ONCE！」と聞いた </font><font style="vertical-align: inherit;">同じ状態の葉は、「DO TWO！」と叫ぶ必要があります </font><font style="vertical-align: inherit;">タイマーを開始します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 -「ACCEPTED NOOOL！」と聞いた </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-RUNNING</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">状態に移行し</font><font style="vertical-align: inherit;">、タイマーを停止します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
上記のすべてをテーブルに入れました。</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">現在の状態</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">EVENT</font></font><br>
</th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新規条件</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">行為</font></font><br>
</th>
</tr>
<tr>
<td rowspan="4"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">確認済みの開始</font></font><br>
</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「DO IT ONCE！」と聞いた</font></font><br>
</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">確認済みの開始</font></font><br>
</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1）「DO TWO！」の叫び </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2）タイマーを開始する</font></font><br>
</td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「DO TWO！」と聞いた</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ランニング</font></font><br>
</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1）「NOOOL ACCEPTED！」と叫びます。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2）タイマーを停止します</font></font><br>
</td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「ACCEPTED NOOOL！」と聞いた</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ランニング</font></font><br>
</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1）タイマーを停止します</font></font><br>
</td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">時間切れ-タイムアウト</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">確認済みの開始</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1）「DO TWO！」の叫び </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2）タイマーを開始する</font></font><br>
</td>
</tr>
</tbody></table></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ハンドシェイクを使用すると、ほとんどすべての準備</font><font style="vertical-align: inherit;">ができています。サブスクライバーの1つが既にそれに入ることができるので、</font><font style="vertical-align: inherit;">1つの</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">実行</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">状態のみを考慮する</font><font style="vertical-align: inherit;">必要があります。2つ目-すぐにトイレに急ぎ、戻った後、すべてを忘れて新しい接続を確立しようとします。</font><b><font style="vertical-align: inherit;">RUNNING</font></b></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
状態でのハンドシェイク手順（すべてが開始されたデータ転送はまだ処理していません。これは別の話です）の観点から、</font><font style="vertical-align: inherit;">2つのイベントに興味があります</font><font style="vertical-align: inherit;">
 。-「DO ONCE！」と叫んだ場合-すべてが非常に悪いです、それは完全な非同期です、すべてを新たに始める必要があります。元のプロトコルは、単に</font><b><font style="vertical-align: inherit;">HALTED</font></b><font style="vertical-align: inherit;">状態に入るように指示しています</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。しかし、これは私たちには何の助けにもなりません-何らかの理由で、いくつかのセンサーからデータを送信する自律型Arduinoでこれが発生した場合、これは完全な障害です。私たちが知っているように、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HALTED</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">から</font><font style="vertical-align: inherit;">、当局の命令によってのみ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">INITIAL STARTに</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">進むことができます</font><font style="vertical-align: inherit;">。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、ここではプロトコルを変更しています</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。HALTED</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">状態で</font><font style="vertical-align: inherit;">「DO ONCE！」</font><b><font style="vertical-align: inherit;">コマンド</font></b><font style="vertical-align: inherit;">を受信し</font><font style="vertical-align: inherit;">てい</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">当局からの命令として機能する必要があります-つまり</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">INITIAL START</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">状態に設定し</font><font style="vertical-align: inherit;">、「DO IT ONCE！」と叫び、タイマーを開始します。また、電源投入後すぐに通信確立を指示すると便利な場合があります。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、今、最も不便なケースでは、接続をリセットするだけです。</font></font><br>
<br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-RUNNING</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
 状態で反応する必要がある2番目のイベント</font><font style="vertical-align: inherit;">-隣接するトレンチから「DO TWO！」と聞こえた場合。</font><font style="vertical-align: inherit;">これはもうもっと面白いです。</font><font style="vertical-align: inherit;">この場合、「ACCEPTED ER！」と叫ぶ必要があります。</font><font style="vertical-align: inherit;">ERとは、現在の通信セッションで正常に受信されたメッセージの数を意味します。</font><font style="vertical-align: inherit;">これは新しい概念です。</font><font style="vertical-align: inherit;">以下では、すべてをより詳細に検討しますが、ここでは、学習したすべてを現在のテーブルに持ってきます。</font></font><br>
<br>
<div class="scrollable-table"><table>
<tbody><tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">現在の状態</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">EVENT</font></font><br>
</th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新規条件</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">行為</font></font><br>
</th>
</tr>
<tr>
<td rowspan="4"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">確認済みの開始</font></font><br>
</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「DO IT ONCE！」と聞いた</font></font><br>
</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">確認済みの開始</font></font><br>
</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1）「DO TWO！」の叫び </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2）タイマーを開始する</font></font><br>
</td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「DO TWO！」と聞いた</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ランニング</font></font><br>
</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1）「NOOOL ACCEPTED！」と叫びます。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2）タイマーを停止します</font></font><br>
</td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「ACCEPTED NOOOL！」と聞いた</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ランニング</font></font><br>
</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1）タイマーを停止します</font></font><br>
</td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">時間切れ-タイムアウト</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">確認済みの開始</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1）「DO TWO！」の叫び </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2）タイマーを開始する</font></font><br>
</td>
</tr>
</tbody></table></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さて、アリスとボブがプロトコルに厳密に従っている場合</font><font style="vertical-align: inherit;">、接続を確立する方法、共同で</font><b><font style="vertical-align: inherit;">RUNNING</font></b><font style="vertical-align: inherit;">状態に切り替える方法、</font><font style="vertical-align: inherit;">または悪いケースで</font><font style="vertical-align: inherit;">は</font><font style="vertical-align: inherit;">、</font><font style="vertical-align: inherit;">勝利が</font><s><font style="vertical-align: inherit;">クリック</font></s><font style="vertical-align: inherit;">される</font><font style="vertical-align: inherit;">前</font><font style="vertical-align: inherit;">に確立しようとすること</font><font style="vertical-align: inherit;">を除いて、</font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">理解できない</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">何か</font><s><font style="vertical-align: inherit;">に入る</font></s><font style="vertical-align: inherit;">オプションはありません</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">
熱心な読者は、すべてのオプションを整理して、一連の状態と遷移が閉じていて厳密に決定されていることが判明するという結論に達するかもしれません。</font><font style="vertical-align: inherit;">私たち（DECエンジニアの心の助けを借りて）は現在、アリスとボブを一連のルールに結び付けています。これらのルールは、現在の状況でこれが原則として一般的に可能である場合に、接続を確立するだけです。</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><s><font style="vertical-align: inherit;"></font></s><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">今すぐデータを転送する方法は？</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さて、それは素晴らしいトレーニングでした。</font><font style="vertical-align: inherit;">2つのネットワークノードの関係におけるキャンディーブーケの期間。</font><font style="vertical-align: inherit;">ビジネスを開始したことを思い出してください。配信と優先度が保証されたデータを転送する必要があります。</font><font style="vertical-align: inherit;">災害復旧あり。</font><font style="vertical-align: inherit;">ハードウェアリソースが許可する範囲で（結局のところ、アリスとボブの両方が2キロバイトのRAMを備えた弱い8ビットコントローラーであることが判明する可能性があります！）</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DECエンジニアは、送信されたメッセージに番号を付ける必要があること、私たちが送信した数、受信した数、および送信したメッセージの数が宛先に到達したことを数える必要があることを教えてくれます。</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">余談です。</font></font></b><div class="spoiler_text">.         DDCMP,     :        .<br>
<br>
      ,      . <br>
    — <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">Dumb Or Overly Forced Astronomical Acronyms Site (or DOOFAAS)</a><br>
<br>
    !<br>
 :<br>
<br>
<b>WASP</b> — Wideband Analog SPectrometer (   ,  <s></s>  !)<br>
<b>SAURON</b> — Spectroscopic Areal Unit for Research on Optical Nebulae<br>
<b>CISCO</b> — Cooled Infrared Spectrograph and Camera for OHS (    !)<br>
<br>
 ,  :<br>
<b>SQUIRT</b> ( ,  18+!) — Satettile QUick Research Testbed<br>
<b>SHIT</b> (   !) — Super Huge Interferometric Telescope,   «look for yourself»,      abstract     .<br>
<br>
 , ,   ,             <b>R N A</b>. <br>
<br>
,         — RNA!    .  DECnet      ,     .<br>
</div></div><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">しかし、私たちの塹壕に戻る</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
元のプロトコル標準では、すべてのカウンターが8ビットで256を法としてインクリメントすることが定義されています。これは、確認がまだ受信されていない送信メッセージが最大256個存在する可能性があることを意味します。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、確認が受信されない場合は再送信する必要があり、必要な場合は確認まで保存する必要があります。</font><font style="vertical-align: inherit;">結局、私たちは配達を保証しました！</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちのアリスとボブの物理的パラメーターは、私たちに異なる条件を指示します。</font><font style="vertical-align: inherit;">8ビットのArduinoでは、この量のデータを保存する場所がなく、妥協する必要があります。</font><font style="vertical-align: inherit;">また、標準では、パケット（メッセージ）の長さ（バイト単位）が16ビットの数値に制限されている、つまり、</font><font style="vertical-align: inherit;">64キロバイトは許容できない贅沢です！</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">したがって、接続が確立されます。</font><font style="vertical-align: inherit;">次は何ですか？</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アリスまたはボブ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が実行</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">状態になる</font><font style="vertical-align: inherit;">と、カウンターがリセットされます。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すでに述べたように、元のプロトコルは256を法とするメッセージの番号付けを意味しますが、Arduinoのようなものの少量のメモリに合わせるには、この番号を減らす必要があります。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
カウンタのすべての増分をすぐに制限できるようにするために、特定の定数UMCP_PACKETS_NUMBERを導入​​します。これで、すべての増分がこのモジュールで発生します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
UMCP_PACKETS_NUMBER = 8を使用し、最大パケットサイズがUMCP_PACKET_DATA_SIZEである場合、一度に送信されるデータの部分は64バイトに制限されているため、すべてがArduino UNOに収まり、ユーザーのニーズに少し残ります。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらのパラメーターは両方とも同じでなければならないことを覚えておくことが重要です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
明らかに、今、アリスとボブが接続を正常に確立し、そのうちの1つがデータを転送する必要がある場合、データはまず64バイトを超えない部分に分割する必要があり、次に、各パケットも状態を含む必要があります2つの送信側カウンター：受信および送信されたメッセージの数（RおよびN）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
いわゆる組織化がいかに簡単かをご覧くださいパイプライン処理と、エラー状況の処理がいかに簡単か！</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
接続が確立された直後にアリスが3つのパケットを連続して送信する場合、それらすべてのカウンターRは0に設定され（彼女はまだ単一のパケットを受信して​​いません）、カウンターNは新しいパケットごとに1ずつ増加します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ボブがすべてのパケットを正常に受け入れた場合、3つのパケットすべての受信を確認するには、後者の確認のみを送信するだけで十分です。実際には、カウンターのステータスR = 3およびN = 0を返送するだけで、アリスはすべてが送信されたことをすぐに理解します。彼女のメッセージは宛先に届きました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
不可抗力が発生しない理想的なケースでした。次に、問題が発生する可能性のある原因とその対処方法を見てみましょう。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
なんらかの理由でボブが最初のパケットをスキップして次のパケットの1つを受信した場合、ボブはその中のカウンターN（アリスが送信したパケットの数）がボブ側のカウンターRを明らかに超えていることに気づき、ボブは最初のパケットを逃したことを簡単に認識します。この場合、彼は最もフラットなキャプテンエビデンスをプレイし、アリスに受信パケットのカウンターのステータスを通知する必要があります（R = 0）。同時に、アリスは、彼女がN = 3であり、ボブがR = 0であることを理解します。つまり、最初からパケットを新しい方法で転送する必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このスキームを注意深く見ると、サブスクライバーがカウンターのステータスを転送すると、すぐにデータパケットの送信結果が通知され、一方の側で送信されたカウンターともう一方の側で受信されたカウンターの差が、失われたパケットの数とそれが何番目から始まったか</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
つまり、最悪の場合、送信が完全に再送信されます。平均的な場合、送信側のカウンターAは受信側のカウンターRの値まで増加し、失われたパケットを「送信」します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このようにして、カウンターの増分の連続性が維持されることは容易に理解できます。つまり、メッセージ（パケット）の送信が保証されます。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
RNA変数に加えて、各サブスクライバーには2つのフラグSACKおよびSPEPがあります。最初が設定されている場合、確認を送信する必要があります（確認応答を送信）。2番目の場合は、確認メッセージを送信する必要があります（メッセージにREPlyを送信）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ちなみに、元のDDCMP-SNAK（Send Negative AcKnowledgement）には別のフラグが含まれていました。インストールには、いくつかのコードを含むエラーメッセージの送信が含まれます。ただし、このバージョンのプロトコルでは、タイムアウトメカニズムのみを使用してすべてのエラーを解決します。これは、プロトコルが、たとえば、音響音響や無線周波数通信で共通の周波数帯域で使用できるためです。エラーコードで共通の環境を詰まらせても意味がありません。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
メッセージが整合性エラーで受信された場合、厳密に言えば、それは受け入れられないメッセージです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この時点で、腐食性のある読者は何かが欠けているような感覚を持つはずです。</font><font style="vertical-align: inherit;">このスリムなスキームには何か問題があります。</font><font style="vertical-align: inherit;">そしてそれは本当です。</font><font style="vertical-align: inherit;">これについては後で詳しく説明します。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それまでの間、接続設定プロセスの例に従って、データをテーブルに転送することに関する断片的な考えをすべて収集することを提案します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これで状態が1つだけになったため、テーブルには2つの列（イベントと実行するアクション）のみが含まれます。</font><font style="vertical-align: inherit;">変数が属しているもの間の混乱を避けるために、Lインデックスでローカルのものと削除されたもの（Rインデックスで受信メッセージに含まれているもの）をマークします。</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">EVENT</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">行動</font></font></th>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">データパケットが来たNR = RL + 1</font></font></td>
<td>1)  <br>
2)   <br>
3) RL=RL+1<br>
4)  RR=NL  AL&lt;=RR&lt;=NL  <br>
     AL  RR <br>
<br>
5) AL=RR<br>
</td>
</tr>
<tr>
<td>    — REP</td>
<td>1) SACK = true<br>
2) SREP = false<br>
</td>
</tr>
<tr>
<td>  — ACK</td>
<td>1)  <br>
2) SREP = false<br>
3)  RR=NL  AL&lt;=RR&lt;=NL  <br>
     AL  RR <br>
<br>
4) AL=RR<br>
</td>
</tr>
<tr>
<td>  </td>
<td>1) SREP = true</td>
</tr>
<tr>
<td>     SREP</td>
<td>1)     REP(RL, NL)<br>
2)  <br>
</td>
</tr>
<tr>
<td>   AL&lt;NL</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1）番号AL + 1のメッセージを転送します</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2）タイマーを開始します</font></font><br>
</td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">送信完了、SACKフラグセット</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1）ACK確認の送信（RL、NL）</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">送信完了、AL = NL、SACKおよびSREPフラグが</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
設定され</font><font style="vertical-align: inherit;">て</font><font style="vertical-align: inherit;">いない、送信するデータがある</font></font><br>
</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1）NL = NL + 1 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2）次のデータパケットを送信</font></font><br>
</td>
</tr>
</tbody></table></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、よく見て、頭の中の回路全体をスクロールします。</font><font style="vertical-align: inherit;">ここで欠けているものを認識しています。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
非常に強く出発したDDCMPの最初の説明では、これはSELECTフラグと呼ばれます。ノード（AliceまたはBob）は「選択」される場合とされない場合があります。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちを混乱させたのは、転送を許可または禁止するメカニズムが承認されていないことでした。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これがSELECTフラグです。</font><font style="vertical-align: inherit;">これは非常に簡単に使用されます。フラグが設定されている場合は送信でき、そうでない場合は送信できません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ACKやREPなどのすべての制御メッセージには、このフラグが含まれている必要があります。</font><font style="vertical-align: inherit;">キューの最後のパケットにもこのフラグが含まれている必要があります。</font><font style="vertical-align: inherit;">ノードがフラグをパケットに「縫う」と、「与える」ため、ノードにまだインストールされていません。</font><font style="vertical-align: inherit;">逆に、パッケージでこのフラグを検出するノードは、独自にインストールする必要があります。</font><font style="vertical-align: inherit;">これはバトンを渡すことやミンスミートをすることと同じです（覚えていますか？）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このフラグを操作する上で最も重要なことは、デフォルトではノードの1つにこのフラグが必要で、もう1つには必要がないことです。</font><font style="vertical-align: inherit;">これは、もう1つの非常に重要なタイマーです。SELECTフラグはタイマーを返します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これで、接続を確立し、それを介してデータを送信するための完全なルールセットができました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この一連のルールの具体的な実装だけに触れたわけではありません。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さて、それを修正します！</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パッケージの形成とフォーマット</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これはメッセージフレーミングと呼ばれ、メッセージと形式を分析および生成するためのルールです。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
どれだけ必要か計算してみましょう。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1.少なくとも、各メッセージには送信者のカウンタRおよびNのステータスが含まれている必要があります。</font><font style="vertical-align: inherit;">Arduinoの場合、最大8つのメッセージを送信できますが、未確認のメッセージを送信できることに同意しました。</font><font style="vertical-align: inherit;">しかし、バイトを転送するので、両方のカウンターを1バイトにプッシュし、それらを4ビットにします。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このバイトは次のように形成されます：</font></font><br>
<pre><code class="cpp hljs"> = (RL &amp; <span class="hljs-number">0x0F</span>) | (NL &lt;&lt; <span class="hljs-number">4</span>);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、次のようにカウンターのステータスを読み取ります。</font></font><br>
<pre><code class="cpp hljs">NR = (c &gt;&gt; <span class="hljs-number">4</span>) &amp; <span class="hljs-number">0x0F</span>;<font></font>
RR = c &amp; <span class="hljs-number">0x0F</span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
cはメッセージ</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2の</font><font style="vertical-align: inherit;">対応するバイトです</font><font style="vertical-align: inherit;">。各メッセージにはSELECTフラグの状態が含まれている必要があることも覚えています。</font><font style="vertical-align: inherit;">そして、さまざまな種類のメッセージ自体は次のようになります。</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">面白い名前</font></font><br>
</th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">真面目な名前</font></font><br>
</th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">説明</font></font><br>
</th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SELECTフラグの値</font></font><br>
</th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PTYPE値</font></font></th>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「一度やってください！」</font></font><br>
</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">STR</font></font><br>
</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">開始</font></font><br>
</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">本当</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">40</font></font><br>
</td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「DO TWO！」</font></font><br>
</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">STA</font></font><br>
</td>
<td>STart Acknowledged</td>
<td>true</td>
<td>36</td>
</tr>
<tr>
<td>« !»<br>
</td>
<td>ACK(NL=0, RL=0)<br>
</td>
<td>ACKnowledgement<br>
</td>
<td>true</td>
<td>33<br>
</td>
</tr>
<tr>
<td>« ,  »</td>
<td>ACK(NL,RL)</td>
<td>ACKnowledgement</td>
<td>true</td>
<td>33</td>
</tr>
<tr>
<td>«,  ?»<br>
</td>
<td>REP(NL,RL)<br>
</td>
<td>REPly to a message</td>
<td>true</td>
<td>34</td>
</tr>
<tr>
<td>« »<br>
</td>
<td>DTA(NL,RL)<br>
</td>
<td>DaTA packet</td>
<td>false</td>
<td>17</td>
</tr>
<tr>
<td>«  »<br>
</td>
<td>DTE(NL,RL)</td>
<td>DaTa packet — End</td>
<td>true</td>
<td>49</td>
</tr>
</tbody></table></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、合計6種類のメッセージです。 DTAを除くすべてのメッセージはSELECTフラグを「解放」します。それらはリモートサブスクライバーの即時の反応を必要とし、フラグなしでは彼はそれを送信できません。 DTAメッセージは、パイプライン化を可能にするフラグを返しません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一般に、メッセージのタイプは3ビットで十分ですが、ビットをいじらないように、1バイト全体をタイプに割り当てます。改訂の場合は、ある程度のアクションの自由があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
メッセージにデータが含まれている場合は、その量とチェックサムを転送する必要があります。最大パケットサイズは64バイトであるため、チェックサムと長さにも1バイトを使用します-突然、パケットサイズを増やす必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3.また、メッセージの先頭の署名とヘッダーの個別のチェックサムも必要です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらすべてを念頭に置くと、ヘッダー（別名制御メッセージ）は次のようになります。</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オフセット、バイト</font></font><br>
</th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">説明</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サイズ、ビット</font></font></th>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">符号= 0xAD</font></font><br>
</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PTYPE</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TCNT</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4</font></font><br>
</td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RCNT</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">３</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hchk</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8</font></font></td>
</tr>
</tbody></table></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、データブロックは次のようになります。</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オフセット、バイト</font></font><br>
</th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">説明</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サイズ、ビット</font></font></th>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DCNT</font></font><br>
</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5..5 + DCNT-1</font></font><br>
</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">データ</font></font><br>
</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8 * DCNT</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5 + DCNT</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dchk</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8</font></font></td>
</tr>
</tbody></table></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それで全部です。</font><font style="vertical-align: inherit;">これは、DDCMPから取得したプロトコルの完全な説明です。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これで実装を行うことができます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">どのように配置され、どのように使用されますか？</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初に、リポジトリの構造について少し説明します。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初に述べたように、プロジェクトコードはgithubにあります：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">uMCPIno</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
すべてがどのように機能するかを確認するために、PCで</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">テストアプリケーション</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を実行できます</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アーカイブで、uMCPIno_Test.exeを実行し、目的のCOMポートを選択して、その動作を試します。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
仮想COMポートのペアを確認できます（通常はこれを行います）。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アプリケーションの2つのコピーを実行できる理由。 「SELECTED BY DEFAULT」を1つのコピーでオンにすることを忘れないでください。これはマスターになり、もう1つのコピーではオフにします。ちなみに、興味があれば、このルールに従わないとどうなるかわかります=）</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
EXTRASオプションを使用すると、プロトコルの脳内の思考のすべての動きを確認できます。</font><font style="vertical-align: inherit;">SELECTフラグの状態のすべての変更、タイマーからのイベント、ノードの状態の変更、および送受信されたメッセージの変数RとNの値が表示されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Arduino UNOをラップトップにUART &lt;-&gt; USBコンバーターを介して接続します。</font><font style="vertical-align: inherit;">ピンコネクタを使用すると、いつでも改行をシミュレートできます。</font></font><br>
<img src="https://habrastorage.org/webt/nn/vg/kp/nnvgkplqtoqbazpubopcb8bff-g.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ラップトップでアプリケーションを実行してから、[接続]ボタンを押すと、arduinaが接続を確立します。</font></font><br>
<img src="https://habrastorage.org/webt/cy/jm/lx/cyjmlxn_ga-_zvrzel5yjmfwdz4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これが、システムが「壊れた」回線を介して送信しようとした場合の反応</font></font><br>
<img src="https://habrastorage.org/webt/lu/kb/dw/lukbdwxot1xuopxjdqxgpq1xqsq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
です。uMCPInoを統合するためにPCのアプリケーション：</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リポジトリにはuMCPInoライブラリがあります。</font><font style="vertical-align: inherit;">プロジェクトの参照に接続します</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これにはuMCPInoPortクラスが含まれています。</font><font style="vertical-align: inherit;">インスタンスを宣言します。</font></font><br>
<pre><code class="cs hljs">uMCPInoPort port;<font></font>
port = <span class="hljs-keyword">new</span> uMCPInoPort(<span class="hljs-string">"COM1"</span>, UCNLDrivers.BaudRate.baudRate9600, <span class="hljs-literal">true</span>, <span class="hljs-number">8100</span>, <span class="hljs-number">2000</span>, <span class="hljs-number">64</span>, <span class="hljs-number">8</span>);
</code></pre><br>
  :  ,   ,  SELECT  ,   SELECT,  ,       .<br>
</li>
<li>  :<br>
   SELECT — port.Select:<br>
<pre><code class="cs hljs">OnSelectChangedEventHandler</code></pre><br>
   — port.State:<br>
<pre><code class="cs hljs">OnStateChangedEventHandler</code></pre><br>
     :<br>
<pre><code class="cs hljs">OnDataBlockAcknowledgedEventHandler</code></pre><br>
    :<br>
<pre><code class="cs hljs">OnDataBlockReceivedEventHandler</code></pre><br>
</li>
<li>   <br>
<pre><code class="cs hljs">port.Open();</code></pre><br>
</li>
<li>    : <pre><code class="cs hljs">port.Send(<span class="hljs-keyword">byte</span>[] data);</code></pre><br>
</li>
<li>    : <pre><code class="cs hljs">port.Close();</code></pre><br>
</li>
</ol> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2バイト送信するだけです！</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、Arduinoの実装に移りましょう。 2つの例は</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github.com/AlekUnderwater/uMCPIno/tree/master/Arduino</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">フォルダーにあり、</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1つ目</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">uMCP</font></a><font style="vertical-align: inherit;">との間の単なるコンバーターです。最初のシリアルはホストと通信し、シリアル1（ボード上にある場合）またはピン2と3のSoftwareSerialと通信します-別のuMCPInoノードと通信します。ここでBluetoothまたは無線モジュールを接続できます。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2つ目</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、uMCPInoプロトコルをサポートするプロジェクトテンプレートです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
どちらのプロジェクトにも、登れる場所と登るべき場所があります。ここで彼らは、次のとおりです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SELECTフラグのデフォルトの状態。 （true）に設定すると、リモートノードがフラグを返さなくても、タイマーによってtrueに設定されます。</font></font><br>
<pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> CFG_SELECT_DEFAULT_STATE          (false)</span></code></pre><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このタイマーの期間を設定するには、次の設定があります。SELECTフラグを返す間隔（ミリ秒）</font></font><br>
<pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> CFG_SELECT_DEFAULT_INTERVAL_MS    (4000)</span></code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ミリ秒単位で応答を待機する間隔。SELECTフラグを返す間隔よりも少し短い方がよい。</font></font><br>
<pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> CFG_TIMEOUT_INTERVAL_MS           (3000)</span></code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
回線の実際のボーレート。</font><font style="vertical-align: inherit;">このパラメーターは、転送がいつ終了するかを決定するために必要です。</font></font><br>
<pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> CFG_LINE_BAUDRATE_BPS             (9600)</span></code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nagleアルゴリズムのデータ累積間隔。</font><font style="vertical-align: inherit;">そっと100ミリ秒に等しいそれを取る。</font><font style="vertical-align: inherit;">この間、パッケージのセットを待機しています。入力されていない場合は、そのまま送信します。</font><font style="vertical-align: inherit;">Nagleアルゴリズムのタスクは、サイズが1〜数バイトの小さなパケットのヒープのネットワークを取り除くことです。</font></font><br>
<pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> CFG_NAGLE_DELAY_MS                (100)</span></code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらの設定は、制御システム（ホスト）および回線との通信用のポート速度を設定します。</font><font style="vertical-align: inherit;">ポート速度と物理転送速度の回線を混同しないでください。</font></font><br>
<pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> CFG_HOST_CONNECTION_BAUDRATE_BPS  (9600) <span class="hljs-comment">// Host connection port speed</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> CFG_LINE_CONNECTION_BAUDRATE_BPS  (9600) <span class="hljs-comment">// Line connection port speed</span></span></code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この設定が有効になっている場合、コントローラに電源が供給されると、プロトコル自体が接続の確立を開始するように命令します。</font></font><br>
<pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> CFG_IS_AUTOSTART_ON_POWERON       (true) </span></code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、着信データパケット用のバッファのバイト単位のサイズです。</font></font><br>
<pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> CFG_IL_RING_SIZE                  (255)</span></code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、メインのスケッチサイクルがどのようになるかを見てみましょう。</font></font><br>
<pre><code class="cpp hljs">
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">loop</span><span class="hljs-params">()</span>
</span>{<font></font>
  uMCP_ITimers_Process();<font></font>
  DC_Input_Process();<font></font>
  DC_Output_Process();<font></font>
<font></font>
  <span class="hljs-comment">//  ip_ready  ,     </span>
  <span class="hljs-keyword">if</span> (ip_ready)<font></font>
  {<font></font>
    uMCP_OnIncomingPacket();<font></font>
  }<font></font>
<font></font>
  <span class="hljs-comment">//        ,     - </span>
  <span class="hljs-keyword">if</span> ((state == uMCP_STATE_HALTED) &amp;&amp; ((ih_Cnt &gt; <span class="hljs-number">0</span>) || (isStartup &amp;&amp; CFG_IS_AUTOSTART_ON_POWERON)))<font></font>
  {<font></font>
    <span class="hljs-keyword">if</span> (isStartup)<font></font>
    {<font></font>
      isStartup = <span class="hljs-literal">false</span>;<font></font>
    }<font></font>
    <font></font>
    uMCP_STATE_Set(uMCP_STATE_ISTART);<font></font>
    uMCP_CtrlSend(uMCP_PTYPE_STR, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-literal">true</span>);<font></font>
  }<font></font>
  <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (state == uMCP_STATE_RUNNING)<font></font>
  {<font></font>
    uMCP_Protocol_Perform();<font></font>
<font></font>
    <span class="hljs-comment">//      -  </span>
    <span class="hljs-keyword">if</span> (il_ready)<font></font>
    {<font></font>
      il_ready = <span class="hljs-literal">false</span>;<font></font>
      USER_uMCPIno_DataPacketReceived();<font></font>
    }  <font></font>
  }<font></font>
}<font></font>
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、プロトコルがどのように機能するかを見てみましょう。</font><font style="vertical-align: inherit;">メインロジックは、uMCP_Protocol_Perform（）関数に含まれています。</font><font style="vertical-align: inherit;">これが彼女のコードです：</font></font><br>
<pre><code class="cpp hljs">
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">uMCP_Protocol_Perform</span><span class="hljs-params">()</span>
</span>{
  <span class="hljs-keyword">if</span> (state == uMCP_STATE_RUNNING)<font></font>
  {<font></font>
    <span class="hljs-comment">//              SELECT </span>
    <span class="hljs-keyword">if</span> ((!iTimer_State[uMCP_Timer_TX]) &amp;&amp;<font></font>
        (!iTimer_State[uMCP_Timer_TMO]) &amp;&amp;<font></font>
        (select))<font></font>
    {<font></font>
      <span class="hljs-comment">//    </span>
      <span class="hljs-keyword">if</span> (ih_Cnt == <span class="hljs-number">0</span>)<font></font>
      {<font></font>
        <span class="hljs-comment">//    REP - </span>
        <span class="hljs-keyword">if</span> (srep)<font></font>
        {<font></font>
          uMCP_CtrlSend(uMCP_PTYPE_REP, N, R, <span class="hljs-literal">true</span>);<font></font>
          srep = <span class="hljs-literal">false</span>;<font></font>
        }<font></font>
        <span class="hljs-comment">//     -  </span>
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (sentBlocksCnt &gt; <span class="hljs-number">0</span>)<font></font>
        {<font></font>
          uMCP_DataBlockResend((A + <span class="hljs-number">1</span>) % UMCP_PACKETS_NUMBER, <span class="hljs-literal">true</span>, <span class="hljs-literal">true</span>);<font></font>
        }<font></font>
        <span class="hljs-comment">//    SACK  -       </span>
        <span class="hljs-comment">//  -       ACK</span>
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ((!selectDefaultState) || (sack))<font></font>
        {<font></font>
          uMCP_CtrlSend(uMCP_PTYPE_ACK, N, R, <span class="hljs-literal">false</span>);<font></font>
          sack = <span class="hljs-literal">false</span>;<font></font>
        }<font></font>
      }<font></font>
      <span class="hljs-comment">//     - </span>
      <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (ih_Cnt &gt; <span class="hljs-number">0</span>)<font></font>
      {<font></font>
        <span class="hljs-comment">//              - </span>
        <span class="hljs-keyword">if</span> ((ih_Cnt &gt;= UMCP_PACKET_DATA_SIZE) || (millis() &gt;= ih_TS + CFG_NAGLE_DELAY_MS))<font></font>
        {<font></font>
          <span class="hljs-comment">//   N</span>
          N = (N + <span class="hljs-number">1</span>) % UMCP_PACKETS_NUMBER;<font></font>
          uMCP_NextDataBlockSend();<font></font>
        }<font></font>
      }<font></font>
    }<font></font>
  }<font></font>
}<font></font>
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
関数内に存在するパケットパーサー </font></font><pre><code class="cpp hljs">On_NewByte_From_Line</code></pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">また、有限状態マシンの原理によって配置され、「バイト単位」で動作します。</font><font style="vertical-align: inherit;">これは、メモリを節約するために行われます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
残りの実装は特に問題ではありません。</font><font style="vertical-align: inherit;">ユーザーがプロトコルをどのように操作するかをより適切に分析します。</font><font style="vertical-align: inherit;">この例では、4つの「連絡窓口」があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1つ目は、uMCPInoラインでデータを送信する機能です。</font></font><br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">uMCPIno_SendData</span><span class="hljs-params">(byte* dataToSend, byte dataSize)</span></span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここではすべてが単純です-dataToSendバイトバッファーがあり、そのサイズはdataSizeです。</font><font style="vertical-align: inherit;">送信が可能な場合（データを追加する余地がある場合）、関数はtrueを返し、それ以外の場合はfalseを返します。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
無駄に運転しないようにするために、次の関数を使用して、十分なスペースの可用性をすぐに確認できます。</font></font><br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">uMCP_IsCanSend</span><span class="hljs-params">(byte dataSize)</span></span>;</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
着信データパケットを分析するには、コードを関数本体に追加する必要があります </font></font><pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">USER_uMCPIno_DataPacketReceived</span><span class="hljs-params">()</span></span>;</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
着信データはil_ringリングバッファーに書き込まれます。</font><font style="vertical-align: inherit;">そこからの読み取りは、バイトごとに次のように構成できます。</font></font><br>
<pre><code class="cpp hljs">
  <span class="hljs-keyword">while</span> (il_Cnt &gt; <span class="hljs-number">0</span>)<font></font>
  {<font></font>
    c = il_ring[il_rPos];<font></font>
    il_rPos = (il_rPos + <span class="hljs-number">1</span>) %  CFG_IL_RING_SIZE;<font></font>
    il_Cnt--;<font></font>
<font></font>
    <span class="hljs-comment">//   "c" -      </span><font></font>
  }<font></font>
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
洗練された喜びのために機能があります</font></font><br>
<pre><code class="cpp hljs"> <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">USER_uMCP_OnTxBufferEmptry</span><span class="hljs-params">()</span></span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、すべてのデータが正常に送信されたときに呼び出されます。</font><font style="vertical-align: inherit;">ある種のコードをその中に入れることも可能であり、必要です。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">なぜこれがすべてでどこにあるのですか？</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私はこれを主に扱いました。さらに、私は</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">uWAVE</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ソナーモデムを介してデータを送信するために、ある種のシンプルで最も重要な「軽量」プロトコルが必要でした</font><font style="vertical-align: inherit;">。彼らはわずか80 bpsの速度で水を介してデータを送信し、最大通信距離は1000メートル、水中の音速は約1500 m /秒であるため、送信には顕著な遅延が伴い、ソナーチャネルは1つしかありません（最大ではない場合） ！）最もノイズが多く、最も遅く、最も不安定です。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
主にこれが原因で、否定的な確認応答（NAK）のメカニズムを放棄する必要がありました。送信できない場合は、水中では100％送信しない方がよいでしょう。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実際には、プロトコルは、</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">DORJI</font></a><font style="vertical-align: inherit;">モジュールを使用して無線でデータを送信するときに便利</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">でした。</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">そしてアーチュニスト</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://www.google.com/url%3Fsa%3Dt%26rct%3Dj%26q%3D%26esrc%3Ds%26source%3Dweb%26cd%3D1%26cad%3Drja%26uact%3D8%26ved%3D2ahUKEwja-sGFibrmAhXRo4sKHX-4B64QFjAAegQIAxAC%26url%3D" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NS-012に</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">よく知られてい</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">次は何ですか？</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
時間があれば、アドレス指定の可能性を追加する予定です（ちなみに、これはDDCMPにありました）。</font><font style="vertical-align: inherit;">このプロトコルの主なタスクは、ソナーモデムやその他のセンサーネットワークのあらゆる種類のテストに便利を提供することなので、そこには（文字通り！）落とし穴があります。</font><font style="vertical-align: inherit;">「Sender」と「Target」フィールドを追加するだけでは問題を解決できないとしか言​​えません。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
おそらくそれは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">地理的ルーティング</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">とそのすべてのジャズに</font><font style="vertical-align: inherit;">来るでしょう</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PS</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
伝統的に、私は建設的な批判、希望、提案にとても感謝しています。</font><font style="vertical-align: inherit;">人に役立つことをしているのか、時間を浪費しているのかを理解することは常に重要です。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
おそらく、この長編の小説「戦争と平和」への移行を避けるために、私はいくつかの詳細を見逃しました-遠慮なく質問してください。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PPS</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
エラー（文法的および論理的）を指摘した、文盲の恥に対する多くの感謝：</font></font><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ベレス</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">edo1h</font></font></a></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プロジェクトはもともとオープンソースでしたが、今では記事もオープンソースになっています。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja480100/index.html">SEOについての初心者</a></li>
<li><a href="../ja480102/index.html">11月の製品管理ダイジェスト</a></li>
<li><a href="../ja480104/index.html">9つの便利なHTMLトリック</a></li>
<li><a href="../ja480106/index.html">Testcontainers用のOracle DBイメージを構築する方法</a></li>
<li><a href="../ja480108/index.html">例としてモバイル戦闘を使用したUnityプロジェクトの物理</a></li>
<li><a href="../ja480112/index.html">一般レベルでのC ++ / Visual BasicとJavaの違い（初心者と学生向け）</a></li>
<li><a href="../ja480114/index.html">ITフリーランサーの税金に関するすべて。IEと自営業。パート1</a></li>
<li><a href="../ja480116/index.html">ロシアでのオープンソースの開発に関するMail.ruグループの立場</a></li>
<li><a href="../ja480118/index.html">純粋なJavaScriptを使用したタッチタイピングシミュレータを作成しています。パート1</a></li>
<li><a href="../ja480120/index.html">暗号化の新しい成果-795ビットのRSA数の因数分解</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>