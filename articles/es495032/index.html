<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßëüèæ üò∫ ‚öîÔ∏è Lo que necesita saber sobre las colecciones basadas en hash üë©üèø‚Äçü§ù‚Äçüë©üèª üéµ üç±</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hola a todos. En contacto Vladislav Rodin. Actualmente, soy el jefe del curso High Load Architect en OTUS, y tambi√©n doy cursos sobre arquitectura de ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Lo que necesita saber sobre las colecciones basadas en hash</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/495032/"><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hola a todos. </font><font style="vertical-align: inherit;">En contacto Vladislav Rodin. </font><font style="vertical-align: inherit;">Actualmente, soy el jefe del curso High Load Architect en OTUS, y tambi√©n doy cursos sobre arquitectura de software. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Adem√°s de la ense√±anza, como puede ver, he estado escribiendo para un blog de material de copyright OTUS Habr√© y el art√≠culo de hoy quiero dedicar el lanzamiento de los </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Algoritmos para desarrolladores"</font></font></a></b><font style="vertical-align: inherit;"><b><font style="vertical-align: inherit;"> de New Deal Flow</font></b><font style="vertical-align: inherit;"> .</font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/uz/cy/uo/uzcyuoeiheb64r-2xjnd8r4ntm4.png"><br>
<hr><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Introducci√≥n</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Las tablas hash (HashMap) junto con las matrices din√°micas son las estructuras de datos m√°s populares utilizadas en la producci√≥n. </font><font style="vertical-align: inherit;">Muy a menudo puede escuchar preguntas en las entrevistas sobre su prop√≥sito, caracter√≠sticas de su estructura interna, as√≠ como algoritmos relacionados. </font><font style="vertical-align: inherit;">Esta estructura de datos es cl√°sica y se encuentra no solo en Java, sino tambi√©n en muchos otros lenguajes de programaci√≥n.</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Formulaci√≥n del problema</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Establezcamos un objetivo para crear una estructura de datos que le permita:</font></font><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">contiene (Elemento del elemento)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> verifica si hay un elemento en √©l o no, para O (1)</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">add (elemento Element)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> agrega un elemento en O (1)</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">delete (Elemento del elemento)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> eliminar un elemento en O (1)</font></font></li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Formaci√≥n</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Intentemos hacer estas operaciones sobre una matriz, que es la estructura de datos m√°s simple. </font><font style="vertical-align: inherit;">Estamos de acuerdo en que consideraremos que la celda est√° vac√≠a si contiene nulo.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verificaci√≥n de disponibilidad</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es necesario hacer una b√∫squeda lineal a trav√©s de la matriz, porque el elemento puede estar potencialmente en cualquier celda. </font><font style="vertical-align: inherit;">Asint√≥ticamente, esto se puede hacer en O (n), donde n es el tama√±o de la matriz.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Agregando</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si necesitamos agregar un elemento en cualquier lugar, primero tenemos que encontrar una celda vac√≠a y luego escribirle el elemento. </font><font style="vertical-align: inherit;">As√≠, nuevamente realizamos una b√∫squeda lineal y obtenemos el comportamiento asint√≥tico de O (n).</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eliminar</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para eliminar un elemento, primero debe encontrarlo y luego escribir nulo en la celda encontrada. </font><font style="vertical-align: inherit;">Nuevamente, la b√∫squeda lineal nos lleva a O (n).</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El conjunto de hash m√°s simple</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tenga en cuenta que con cada operaci√≥n, primero buscamos el √≠ndice de la celda deseada, y luego realizamos la operaci√≥n, ¬°y es la b√∫squeda la que nos estropea las as√≠ntotas! Si aprendi√©ramos a obtener este √≠ndice para O (1), entonces el problema original estar√≠a resuelto. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora reemplacemos la b√∫squeda lineal con el siguiente algoritmo: calcularemos el valor de una determinada funci√≥n, una </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">funci√≥n hash</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> que asigna un objeto de clase a un entero. Despu√©s de eso, compararemos el entero resultante con el √≠ndice de la celda de la matriz (esto es bastante f√°cil de hacer, por ejemplo, tomando el resto de dividir este n√∫mero por el tama√±o de la matriz). Si la funci√≥n hash est√° escrita de tal manera que se considera que es O (1) (y generalmente se escribe as√≠), entonces hemos obtenido la implementaci√≥n m√°s simple del </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">conjunto hash</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Una celda de matriz en t√©rminos de un conjunto hash puede llamarse un </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dep√≥sito</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Los problemas de la implementaci√≥n m√°s simple de un conjunto hash</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No importa c√≥mo se escriba la funci√≥n hash, el n√∫mero de celdas en la matriz siempre es limitado, mientras que el conjunto de elementos que queremos almacenar en la estructura de datos es ilimitado. </font><font style="vertical-align: inherit;">Despu√©s de todo, no nos molestar√≠amos con la estructura de datos si fuera necesario guardar solo diez elementos previamente conocidos, ¬øverdad? </font><font style="vertical-align: inherit;">Este estado de cosas conduce a </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">conflictos</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> inevitables </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Una colisi√≥n es una situaci√≥n en la que, al agregar diferentes objetos, caemos en la misma celda de la matriz. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se inventaron dos m√©todos para resolver colisiones: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">el </font></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">m√©todo de </font></font></b><font style="vertical-align: inherit;"><b><font style="vertical-align: inherit;">encadenamiento</font></b><font style="vertical-align: inherit;"> y </font><b><font style="vertical-align: inherit;">el m√©todo de direccionamiento abierto</font></b><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M√©todo de encadenamiento</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El m√©todo de encadenamiento es el m√©todo m√°s simple para resolver colisiones. En la celda de la matriz no almacenaremos los elementos, sino una lista vinculada de estos elementos. Debido a que agregar a la parte superior de la lista (y no importa a qu√© parte de la lista agregar un elemento) tiene el comportamiento asint√≥tico de O (1), no estropearemos el comportamiento asint√≥tico general, y seguir√° siendo igual a O (1). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esta implementaci√≥n tiene un problema: si las listas crecen mucho (como √∫ltimo recurso, podemos considerar una funci√≥n hash que devuelve una constante para cualquier objeto), entonces obtenemos las asint√≥ticas O (m), donde m es el n√∫mero de elementos en el conjunto, si el tama√±o La matriz es fija. Para evitar tales problemas, se introduce el concepto </font><b><font style="vertical-align: inherit;">de</font></b><font style="vertical-align: inherit;"> ciclo </font><b><font style="vertical-align: inherit;">de trabajo</font></b><font style="vertical-align: inherit;"> .</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(puede ser igual, por ejemplo, 1.5). </font><font style="vertical-align: inherit;">Si al agregar un elemento resulta que la fracci√≥n del n√∫mero de elementos que est√°n en la estructura de datos en relaci√≥n con el tama√±o de la matriz excede el factor de relleno, entonces sucede lo siguiente: se selecciona una nueva matriz cuyo tama√±o excede el tama√±o de la matriz anterior (por ejemplo, 2 veces), y la estructura de datos se reconstruye en la nueva matriz. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este m√©todo de resoluci√≥n de colisiones se usa en Java, y la estructura de datos se llama </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HashSet</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M√©todo de direccionamiento abierto</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En este m√©todo, las celdas se almacenan en las celdas y, en caso de colisi√≥n, se produce una </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">secuencia de muestras</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , es decir, comenzamos a clasificar las celdas utilizando alg√∫n algoritmo con la esperanza de encontrar una libre. </font><font style="vertical-align: inherit;">Esto puede hacerse mediante diferentes algoritmos ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">secuencia lineal / cuadr√°tica de muestras</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">doble hashing</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), cada uno de los cuales tiene sus propios problemas (por ejemplo, la aparici√≥n de </font><b><font style="vertical-align: inherit;">grupos </font></b></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">primarios</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> o </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">secundarios</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ).</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">De un conjunto de hash a una tabla de hash (HashMap)</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Creemos una estructura de datos que le permita agregar, eliminar, buscar elementos, pero mediante alguna tecla, tan r√°pido como un conjunto de hash (es decir, m√°s all√° de O (1)). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Utilizaremos la misma estructura de datos que el conjunto de hash, pero no almacenaremos elementos, sino pares de elementos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por lo tanto, la inserci√≥n (put (Key key, Value value)) se implementar√° de la siguiente manera: calcularemos la celda de la matriz por un objeto de tipo Key, obtendremos el n√∫mero de bucket. Repasemos la lista en el cubo, comparando la clave con la clave en pares almacenados. Si encuentra la misma clave, simplemente exprima el valor anterior, si no la encontr√≥, agregue un par.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øC√≥mo se recibe un art√≠culo por clave? </font><font style="vertical-align: inherit;">S√≠, de acuerdo con un principio similar: obtenemos un dep√≥sito por clave, revisamos los pares y devolvemos el valor en un par, cuya clave es igual a la clave en la solicitud, si existe tal par, y nulo de lo contrario. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esta estructura de datos se llama </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tabla hash</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Preguntas t√≠picas de entrevista</font></font></h2><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P: ¬øC√≥mo se organizan HashSet y HashMap? </font><font style="vertical-align: inherit;">¬øC√≥mo se llevan a cabo las principales operaciones en estas colecciones? </font><font style="vertical-align: inherit;">¬øC√≥mo se aplican los m√©todos equals () y hashCode ()? </font></font></b><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">R</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : Las respuestas a estas preguntas se pueden encontrar arriba. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P: ¬øCu√°l es el contrato para equals () y hashCode ()? </font><font style="vertical-align: inherit;">¬øA qu√© se debe? </font></font></b><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">R</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : Si los objetos son iguales, entonces deben tener un c√≥digo hash igual. </font><font style="vertical-align: inherit;">Por lo tanto, hashCode debe determinarse por la capacidad de los campos involucrados en iguales. </font><font style="vertical-align: inherit;">La violaci√≥n de este contrato puede conducir a efectos muy interesantes. </font><font style="vertical-align: inherit;">Si los objetos son iguales, pero su c√≥digo hash es diferente, entonces es posible que no obtenga el valor correspondiente a la clave por la que acaba de agregar el objeto al HashSet o al HashMap.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusi√≥n</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En las entrevistas, les gusta preguntar diferentes casos relacionados con estas estructuras de datos. </font><font style="vertical-align: inherit;">Adem√°s, la decisi√≥n de cualquiera de ellos se puede deducir de la comprensi√≥n de los principios de su trabajo sin ning√∫n tipo de "hacinamiento".</font></font><br>
<br>
<hr><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eso es todo. </font><font style="vertical-align: inherit;">Si ha le√≠do el material hasta el final, invito a </font><font style="vertical-align: inherit;">mi colega Evgeny Volosatov a mostrarle </font><b><font style="vertical-align: inherit;">c√≥mo resolver el problema de la olimpiada utilizando las ideas de programaci√≥n din√°mica</font></b><font style="vertical-align: inherit;"> para una </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lecci√≥n gratuita</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sobre el tema "Secretos de la programaci√≥n din√°mica" </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></b></i><br>
<br>
<hr></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es495014/index.html">Abrir contenido en l√≠nea del Centro de Ciencias de la Computaci√≥n, Parte 2</a></li>
<li><a href="../es495022/index.html">Escribir un control deslizante de JavaScript complicado pero interesante</a></li>
<li><a href="../es495024/index.html">Hoja de trucos de Smali en ruso</a></li>
<li><a href="../es495026/index.html">Lo est√°s haciendo mal: calculando la profundidad</a></li>
<li><a href="../es495030/index.html">C√≥mo memorizar palabras y frases extranjeras</a></li>
<li><a href="../es495036/index.html">Un simple bot de Telegram en Flask con informes meteorol√≥gicos</a></li>
<li><a href="../es495038/index.html">Dise√±o en Confluence</a></li>
<li><a href="../es495042/index.html"># 01 - Y un byte completo no es suficiente ... | ¬øQu√© son las intro?</a></li>
<li><a href="../es495068/index.html">Primitivas de estilo OpenGL RAII</a></li>
<li><a href="../es495072/index.html">Home Office en un dispositivo m√≥vil: uso de Samsung DeX</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>