<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧔 🍺 👈🏿 Membuka porta 4321 dan 9898 pada Xiaomi Gateway 2 👩🏿‍✈️ 🎭 👨🏼‍🍳</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="pengantar
 Beristirahat di liburan Tahun Baru, saya bersemangat tentang gagasan untuk menciptakan "Rumah Pintar". Di antara ekosistem "populer", yang ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Membuka porta 4321 dan 9898 pada Xiaomi Gateway 2</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/487768/"><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pengantar</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beristirahat di liburan Tahun Baru, saya bersemangat tentang gagasan untuk menciptakan "Rumah Pintar". Di antara ekosistem "populer", yang paling populer karena murahnya dan berlimpahnya semua jenis perangkat yang terhubung bagi saya merupakan solusi dari Xiaomi. Segera meninggalkan pengelolaan rumah saya melalui server Cina (kemungkinan penundaan, keamanan, dan pengikatan ke perangkat dari produsen yang sama), saya mulai mempelajari semua jenis sistem kontrol rumah pintar dan memilih peralatan yang kompatibel untuk mereka. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setelah berjam-jam mencari, saya memutuskan bahwa Home Assistant tepat untuk saya. Saya memutuskan untuk membangun semuanya pada tahap awal menggunakan Raspberry Pi 4 Model B (2GB) dan sensor dari Xiaomi. Setelah membeli gateway (Anda memerlukan versi dengan </font><b><font style="vertical-align: inherit;">nomor</font></b><font style="vertical-align: inherit;"> artikel </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DGNWG02LM</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) dan menyalakan protokol komunikasi LAN, saya dihadapkan dengan fakta bahwa port 4321 dan 9898, yang diperlukan untuk integrasi ke dalam Home Assistant, masih tetap tertutup.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anda dapat </font><b><font style="vertical-align: inherit;">memverifikasi</font></b><font style="vertical-align: inherit;"> ini melalui </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nmap</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> menggunakan perintah </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nmap -sU -Pn &lt;Gateway IP&gt; -p 9898,4321,54321</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ta/rh/hl/tarhhleh9pcv7fmpaebftwvciuq.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pada artikel ini saya akan menjelaskan cara membuka port ini dan apa yang akan dilakukan.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Latihan</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya tidak yakin Anda dapat memposting tautan ke toko tertentu, jadi saya hanya akan menunjukkan harga di mana saya membeli semua yang saya butuhkan di Moskow. </font><font style="vertical-align: inherit;">Kita akan butuh:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kepala obeng U6 (alias SP6) - 36 rubel</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Konverter USB-to-TTL berdasarkan CH340 - 84 rubel</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Menghubungkan kabel ibu-ayah - Anda membutuhkan setidaknya 3 buah, tapi saya mengambil satu set 40 buah untuk 110 rubel</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Besi solder - Saya punya :)</font></font></li>
</ul><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mendapatkan bagian yang menyenangkan</font></font></h4><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anda melakukan semua tindakan lebih lanjut dengan risiko Anda sendiri. Membuka gateway akan membatalkan garansi Anda.</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Langkah pertama adalah melepas tiga bantalan karet yang menutupi sekrup. Bantalan tidak dilem, cukup mencungkilnya dengan sesuatu yang tipis: Saya menggunakan pisau. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zf/bi/qs/zfbiqsiq4yzt6xqk4rjwgerodcm.jpeg" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di bawah salah satu bantalan akan ada segel garansi. </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ini adalah point of no return</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Membuka </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
sekrup, </font><font style="vertical-align: inherit;">buka pintu </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dengan hati-hati</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Di bagian atas ada speaker yang dihubungkan oleh kabel ke papan di bagian bawah. Kami mencabut kabel sehingga tidak ada yang mengganggu. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/od/zu/6d/odzu6db1a8_ky6wic1lrtnfxunw.jpeg" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anda perlu menyolder tiga kabel ke papan gateway. Dengan dua poin semuanya jelas, yang ketiga ada di sisi tombol. Tempat ditunjukkan dalam gambar: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/h5/-x/1v/h5-x1vvavmnokro2iojyysyn76q.jpeg" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami mendapatkan sesuatu seperti ini:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/_a/g0/he/_ag0hesnmhhb2e7zk9hs1g4d-tg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Langkah selanjutnya adalah mengkonfigurasi koneksi untuk konverter. </font><font style="vertical-align: inherit;">Kami menghapus jumper dari konverter (ketika saya membelinya, itu berdiri di VCC dan 3V3), kami menghubungkannya ke port </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">USB 2.0</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pada Windows 10, driver memuat sendiri, koneksi pada port </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">COM3</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> muncul di manajer perangkat </font><font style="vertical-align: inherit;">(ingat, itu akan berguna nanti). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ar/iw/ew/ariwewaznpdg4oothlkls-mogl8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di properti perangkat kami, buka tab "Pengaturan Port" dan ubah nilainya:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Bit per detik" pada </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">115200</font></font></b></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Kontrol Aliran" ke </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tidak</font></font></b></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk berjaga-jaga, Anda dapat memeriksa tangkapan layar: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/df/g0/dr/dfg0drfos-u5pbh2t2nj_rpihx4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dengan konfigurasi konverter selesai, kami menariknya keluar dari port USB. Kami melanjutkan ke koneksi gateway: kami menghubungkan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TX</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -nya </font><font style="vertical-align: inherit;">ke </font><font style="vertical-align: inherit;">konverter </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RX</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , dan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GND</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ke </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GND</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami </font></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">belum menghubungkan</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> gateway </font><b><font style="vertical-align: inherit;">RX</font></b><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Colokkan gateway ke stopkontak. Jika semuanya dilakukan dengan benar, itu akan mulai berkedip biru. Kami menunggu unduhan lengkap (berkedip akan berhenti) dan menghubungkan konverter </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ke port USB yang sama</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> seperti pada tahap pengaturan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jalankan Putty sebagai administrator. Di bagian "Sesi", ubah </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Jenis koneksi"</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ke </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Serial</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Di bidang </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Serial line"</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Kecepatan"</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> menunjukkan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">port</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> yang kami ingat sebelumnya (dalam kasus saya - COM3), dan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">115200</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<br>
<img src="https://habrastorage.org/webt/d_/sc/lb/d_sclb65priuudogh09janyh8dg.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di bagian "Serial", periksa bahwa port COM kami ditentukan, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Kecepatan (baud)"</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">115200</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Kontrol aliran"</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tidak ada</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vh/c3/hh/vhc3hh2c3gdi4lzmmereg-hdtqo.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami kembali ke bagian "Sesi" dan terhubung ke gateway. Jika semuanya dilakukan dengan benar, teks yang dapat dibaca akan muncul di konsol. Ini terlihat seperti ini untuk saya: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/tw/aa/nj/twaanjonw54dshlwypcamd71lro.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selanjutnya, Anda perlu menghubungkan </font><font style="vertical-align: inherit;">gateway </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RX</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ke </font><font style="vertical-align: inherit;">konverter </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TX</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Seharusnya tidak ada kesalahan di konsol. Teks yang dapat dibaca terus muncul, kali ini dalam format JSON. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Masukkan perintah </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">psm-set network.open_pf 3</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan tekan Enter. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam beberapa video dan artikel yang saya ikuti, ada tertulis bahwa beberapa jawaban akan muncul di konsol. </font><font style="vertical-align: inherit;">Setelah memasukkan perintah, saya menunggu sekitar satu menit, tetapi tidak ada jawaban. </font><font style="vertical-align: inherit;">Di konsol, hanya sesekali mem-flash entri baru. </font><font style="vertical-align: inherit;">Oleh karena itu, untuk berjaga-jaga, saya mencoba tiga opsi lain untuk perintah:</font></font><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">psm-dapatkan jaringan open_pf 3</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (spasi bukan </font><b><font style="vertical-align: inherit;">periode</font></b><font style="vertical-align: inherit;"> )</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"># psm-get network.open_pf 3</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (setelah ada entri di konsol, tekan Enter, sehingga # muncul, dan tulis perintahnya)</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"># psm-dapatkan jaringan open_pf 3</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (analog dengan yang sebelumnya, tetapi dengan spasi)</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setelah empat upaya untuk menjawab, saya tidak menunggu dan memutuskan untuk memeriksa apakah port terbuka. </font><font style="vertical-align: inherit;">Untuk melakukan ini, matikan konverter dan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">reboot</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> gateway dengan menariknya keluar dari soket. </font><font style="vertical-align: inherit;">Tanpa menghubungkan konverter ke komputer, nyalakan gateway dan tunggu unduhan. </font><font style="vertical-align: inherit;">Setelah itu, gunakan perintah </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nmap -sU -Pn &lt;Gateway IP&gt; -p 9898,4321,54321 untuk</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> memeriksa port. </font><font style="vertical-align: inherit;">Dalam kasus saya, mereka terbuka!</font></font><br>
<br>
<img src="https://habrastorage.org/webt/9y/lx/pf/9ylxpfv2a9zr_pbupu5s-hodjvs.png" alt="gambar"></div>
      
    </div><p class="reference-to-source js-reference-to-source">Source: https://habr.com/ru/post/undefined/</p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id487750/index.html">Beberapa seluk-beluk koleksi injeksi di Spring</a></li>
<li><a href="../id487752/index.html">Optimalkan penyimpanan: kasus penyatuan dan biaya kepemilikan yang lebih rendah</a></li>
<li><a href="../id487754/index.html">Organisasi intranet (otomatisasi produksi TI). Bagian 1 - Pengguna dan Email</a></li>
<li><a href="../id487756/index.html">RIT, Maxim Lapshin (Erlyvideo): bagaimana seorang programmer menumbuhkan perusahaan</a></li>
<li><a href="../id487764/index.html">Saya berusia 14 tahun dan saya menggabungkan sekolah dengan pekerjaan di bidang TI</a></li>
<li><a href="../id487772/index.html">Temui bahasa Chuvash di Yandex. Terjemahan: bagaimana kami memecahkan masalah utama terjemahan mesin</a></li>
<li><a href="../id487774/index.html">Tanggal dan Waktu SQL Server Kesalahan</a></li>
<li><a href="../id487776/index.html">Hari Pelatihan Microsoft Azure: Migrasi Infrastruktur Server (pendaftaran selesai)</a></li>
<li><a href="../id487780/index.html">Manajemen Kerentanan - lebih lanjut: manajemen atau kerentanan?</a></li>
<li><a href="../id487782/index.html">Bagaimana saya bisa menghilangkan ribuan tab ...</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>