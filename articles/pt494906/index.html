<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üî´ üìº üëè Modos de opera√ß√£o de servidores de correio üñêÔ∏è üå∞ üëÆ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ao instalar o Postfix em distribui√ß√µes baseadas no Debian, uma interface pseudo-gr√°fica √© iniciada com um conjunto de modelos para instala√ß√£o. Esses m...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Modos de opera√ß√£o de servidores de correio</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/494906/"><img src="https://habrastorage.org/webt/be/i1/aj/bei1ajyzb92fj3gm59se_-3vgbs.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ao instalar o Postfix em distribui√ß√µes baseadas no Debian, uma interface pseudo-gr√°fica √© iniciada com um conjunto de modelos para instala√ß√£o. </font><font style="vertical-align: inherit;">Esses modelos destinam-se a diferentes modos de opera√ß√£o do servidor de correio, que dependem de o servidor aceitar ou n√£o, envi√°-lo e encaminhar v√°rias varia√ß√µes desses dois modos. </font><font style="vertical-align: inherit;">Mas esses s√£o apenas modelos f√°ceis de alterar ap√≥s a instala√ß√£o do servidor. </font><font style="vertical-align: inherit;">Embora eu use o Postfix no Debian como exemplo, esses modos s√£o universais para todos os servidores de correio.</font></font><br>
<a name="habracut"></a><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V√≠deo</font></font></b><div class="spoiler_text"><iframe width="560" height="315" src="https://www.youtube.com/embed/5SoT9XuT37E" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anterior &lt; </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como o email funciona</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Pr√≥ximo&gt; </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sobre portas e criptografia em servidores de correio </font></font></a><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A op√ß√£o "Sem configura√ß√£o"</font></font></b><br>
<br>
<img src="https://habrastorage.org/webt/gs/nq/kf/gsnqkfkaag7kki54t6cw-rh5zrm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
A primeira op√ß√£o na lista √© Sem configura√ß√£o - se voc√™ selecionar essa op√ß√£o, o servidor de correio n√£o criar√° o arquivo de configura√ß√£o principal, o que √© conveniente quando temos nosso pr√≥prio arquivo de configura√ß√£o . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se voc√™ deseja reiniciar o script de instala√ß√£o, precisar√° do comando:</font></font><br>
<br>
<pre><code class="bash hljs">sudo dpkg-reconfigure postfix</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Op√ß√£o ‚ÄúSite da Internet‚Äù O</font></font></b><br>
<br>
<img src="https://habrastorage.org/webt/qw/06/ly/qw06ly6bgwdfk0jqlmidtiplu1k.png"><br>
<br>
<img src="https://habrastorage.org/webt/eq/fz/cp/eqfzcpgtozivtmcnsazbyiap-zm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
segundo modo - Site da Internet - √© um modelo para um servidor de correio padr√£o que receber√° e o envia diretamente, sem intermedi√°rios. Vamos percorrer as op√ß√µes de configura√ß√£o. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/da/pf/56/dapf56wdickh-mi-vxhbpiwf15e.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Primeiro, precisamos especificar o nome do correio - ou seja, o dom√≠nio para os endere√ßos de correio indicados ap√≥s o cachorro. Por padr√£o, o postfix usa usu√°rios no sistema como usu√°rios do servidor de correio. Portanto, se voc√™ tiver um usu√°rio no sistema, ele poder√° receber e enviar um email para user@example.org</font></font><br>
<br>
<img src="https://habrastorage.org/webt/cx/q4/4_/cxq44_dwyn-wz8zb6v2vnlvkeqk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por motivos de seguran√ßa, n√£o √© recomend√°vel usar a conta raiz para trabalhar com correio, portanto, √©-nos solicitado que indique o usu√°rio para quem todo o correio que chegar nos endere√ßos do postmaster, root e outros usu√°rios do sistema ser√° encaminhado. Freq√ºentemente, v√°rios aplicativos no sistema, como o agendador de tarefas cron, enviam informa√ß√µes para esses endere√ßos.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/1g/81/y4/1g81y4pl9i43w9o3n9pmzv1a088.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al√©m disso, o instalador solicita que especifiquemos os dom√≠nios para os quais nosso servidor de correio receber√° correio. Aqui, al√©m do endere√ßo de dom√≠nio principal, tamb√©m existem entradas de host local e v√°rias varia√ß√µes de nome de host. Isso √© necess√°rio principalmente para v√°rios servi√ßos internos que enviam notifica√ß√µes. Al√©m disso, como op√ß√£o, alguns servi√ßos enviam determinadas notifica√ß√µes para o endere√ßo completo do seu servidor de email, digamos que seu servidor de email tenha sido listado nas listas de spam, por exemplo, para postmaster@mail.example.org.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ib/ox/2y/ibox2y2aq9y1ikesbhmrx7hfcxw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora, a pergunta √© sobre atualiza√ß√µes s√≠ncronas. Esta pergunta est√° mais relacionada aos servi√ßos de correio carregados e fala do seguinte. Se ativarmos as atualiza√ß√µes s√≠ncronas, o servidor de email garantir√° que a mensagem seja gravada no disco toda vez que uma mensagem for enviada e recebida. Isso reduz o desempenho do servidor de email, mas se o servidor for desligado repentinamente ao receber ou enviar email, n√£o haver√° mensagens perdidas. Mas se usarmos um sistema de arquivos de registro no di√°rio, como ext3 ou ext4, nosso sistema n√£o ter√° medo de um desligamento repentino. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/g7/st/ua/g7stuahlikrpjkwf6azqjritwzw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Isso ocorre porque, em um sistema de arquivos com di√°rio, todas as altera√ß√µes no sistema de arquivos s√£o pr√©-registradas em um di√°rio especial, que aplica essas altera√ß√µes e as exclui do di√°rio.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/-q/sb/kk/-qsbkkhd2px48wiszd0-zrbf4nu.png"><br>
<br>
<img src="https://habrastorage.org/webt/wb/wj/kl/wbwjklnmdisz-fmmi5rzwe4izp0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se o servidor desligou repentinamente no momento da grava√ß√£o, quando voc√™ o liga, o sistema de arquivos verifica o log, v√™ altera√ß√µes incompletas e as grava no disco. Portanto, se voc√™ usar um sistema de arquivos com di√°rio, sinta-se √† vontade para clicar em N√£o.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/wf/if/ky/wfifkydq9w-f2_crusnqpfbb6ku.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora, somos oferecidos a especificar as redes para as quais o postfix atuar√° como host de retransmiss√£o. Nesta fun√ß√£o, o servidor de email n√£o apenas aceita emails em seu dom√≠nio, mas tamb√©m pode encaminhar mensagens para outros servidores de email. Suponha que voc√™ possa enviar uma mensagem para o Gmail especificando n√£o smtp.gmail.com, mas mail.examle.org como o servidor de sa√≠da de e-mail, e seu servidor de e-mail se encarregar√° de enviar sua mensagem para smtp.gmail.com. Falaremos sobre isso com mais detalhes posteriormente, quando discutiremos outros modelos. Enquanto isso, se voc√™ n√£o planeja usar o servidor como retransmiss√£o do host, poder√° deixar apenas o host local no campo. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/cq/vi/8l/cqvi8lbs9atgnhuuatblmgjwbtg.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tudo √© simples aqui - o tamanho m√°ximo padr√£o da caixa de correio do usu√°rio, em bytes. Se for 0, n√£o h√° limite. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/wp/63/jy/wp63jyaih3-nnqdvsoc9tqld7ki.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ent√£o algo mais interessante -</font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aliases personalizados</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Em geral, os aliases nos servidores de email s√£o usados ‚Äã‚Äãpara que um usu√°rio possa receber emails em v√°rios endere√ßos, sem criar usu√°rios, caixas de correio, etc. Digamos, se voc√™ deseja que todas as mensagens para it@example.org sejam enviadas para user@example.org, um alias ser√° usado para isso. Al√©m disso, usando aliases, dom√≠nios diferentes s√£o vinculados a um usu√°rio. Esses aliases podem ser criados pelo administrador do servidor de email. Por√©m, um administrador pode permitir que os usu√°rios criem algo como aliases para facilitar o gerenciamento dos emails. Mas esses aliases de usu√°rio n√£o substituem o endere√ßo inteiro, mas s√£o adicionados antes do c√£o, depois de usar o caractere especial, digamos, um sinal de mais. Como exemplo, o gmail tamb√©m fornece este recurso:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/mw/cg/hz/mwcghzliwzwl9zepjrrpbns9bzg.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por exemplo, user+work@example.org ou user+social@example.org. O usu√°rio pode especificar esses endere√ßos em v√°rios recursos durante o registro, o que facilitar√° a classifica√ß√£o de cartas e o gerenciamento de mensagens. Se voc√™ n√£o precisar dessa funcionalidade, poder√° deixar esse campo em branco. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/nz/uy/dk/nzuydkjmn5sffso_vv-jxjtfsue.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em seguida, voc√™ deve escolher se nosso servidor de email funcionar√° com ipv4, ipv6 ou com os dois protocolos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nesta configura√ß√£o, o modelo do site da Intenet est√° pronto, teoricamente voc√™ pode come√ßar a trabalhar. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Op√ß√£o "Internet com smarthost"</font></font></b><br>
<br>
<img src="https://habrastorage.org/webt/yr/mi/uw/yrmiuwgbx9j_jbmbx3i5a2bua_i.png"><br>
<br>
<img src="https://habrastorage.org/webt/rk/ue/h7/rkueh78h0qk6ycqaqsstwdziyri.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A terceira op√ß√£o entre os modos operacionais do servidor de email √© a Internet com o mais inteligente. Este √© um modelo de configura√ß√£o para um servidor que aceitar√° emails diretamente ou usar√° utilit√°rios como o fetchmail, mas o servidor enviar√° emails para endere√ßos externos usando outros servidores de email - retransmiss√µes de host, que tamb√©m s√£o chamadas de hosts inteligentes. Isso pode ser usado em v√°rios casos, por exemplo, se o endere√ßo IP do servidor estiver em listas negras ou para passar o correio corporativo de sa√≠da atrav√©s de um servi√ßo de preven√ß√£o de vazamentos, etc.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/pg/oo/a6/pgooa68lttnnhinjy9ivmwacmdw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em geral, todas as op√ß√µes na configura√ß√£o desse modo tamb√©m t√™m a mesma apar√™ncia, com a exce√ß√£o de especificar um servidor de retransmiss√£o. Um host inteligente pode ser indicado entre colchetes e sem, dependendo se voc√™ precisa enviar mensagens imediatamente ou ap√≥s fazer uma solicita√ß√£o MX, o que permite equilibrar o tr√°fego entre v√°rios hosts inteligentes. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/dl/r2/0q/dlr20qquvluu7rhczwnuhnls19g.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No modelo, podemos especificar o smarthost padr√£o e, no futuro, podemos configurar v√°rios rel√©s, dependendo do dom√≠nio do destinat√°rio. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Op√ß√£o de sistema de sat√©lite</font></font></b><br>
<br>
<img src="https://habrastorage.org/webt/-5/gl/m0/-5glm0dvgiucq15rr-g9qzi3t8s.png"><br>
<br>
<img src="https://habrastorage.org/webt/nv/sc/yn/nvscynugnsuze6yadek_7rmeuv0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Outro modo de opera√ß√£o do servidor de email √© o sistema Satellite. Nesse modo, o servidor de correio n√£o aceita correio, mas apenas redireciona, ou seja, funciona exclusivamente como host de retransmiss√£o. Do exemplo anterior, isso pode ser √∫til em grandes organiza√ß√µes para servi√ßos internos, bem como para filtrar mensagens de spam, v√≠rus, etc. Nesse caso, a configura√ß√£o √© quase id√™ntica √†s op√ß√µes mencionadas anteriormente, mas em minhas instru√ß√µes voc√™ n√£o deve deixar dom√≠nios para que o host redirecione tudo para os servidores de correio necess√°rios. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Op√ß√£o "Apenas local"</font></font></b><br>
<br>
<img src="https://habrastorage.org/webt/7a/ej/z5/7aejz5t8_7rp6tjqmbw3s7dfqjo.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
E o √∫ltimo modelo - Somente local - quando o nosso servidor de correio n√£o enviar e receber correio de outros servidores.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tudo o que falamos anteriormente s√£o apenas modelos dos modos operacionais de servi√ßo de correio. </font><font style="vertical-align: inherit;">Os casos de usu√°rio s√£o diferentes e geralmente essas configura√ß√µes de modelo n√£o s√£o suficientes, e muitos pontos precisam ser reconfigurados para suas tarefas.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt494880/index.html">Novo modelo de software para o c√≥digo de c√≥digo do Hyperledger Fabric</a></li>
<li><a href="../pt494882/index.html">O que fazer para n√£o buscar novos olhos ap√≥s a quarentena</a></li>
<li><a href="../pt494884/index.html">O Ditado Digital 2020 ser√° realizado on-line de 28 de mar√ßo a 11 de abril</a></li>
<li><a href="../pt494890/index.html">Regras do bate-papo</a></li>
<li><a href="../pt494904/index.html">Gato infectado com o v√≠rus COVID-19 de seu propriet√°rio na B√©lgica</a></li>
<li><a href="../pt494908/index.html">De pilotos a testadores: como um ex-militar construiu um aer√≥dromo alternativo em TI</a></li>
<li><a href="../pt494910/index.html">O plasma sangu√≠neo dos sobreviventes de coronav√≠rus pode ser usado para combater infec√ß√µes</a></li>
<li><a href="../pt494912/index.html">Minha contribui√ß√£o para a prote√ß√£o contra o Covid-19</a></li>
<li><a href="../pt494916/index.html">Como vender contas de comerciante e atrair uma onda de interesse nos neg√≥cios on-line</a></li>
<li><a href="../pt494918/index.html">A terceira semana do v√¥o remoto - normal. Coment√°rios dos profissionais de TI QIWI sobre o trabalho em tempo integral em casa</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>