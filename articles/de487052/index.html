<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🍊 🦆 🧛🏽 Kaboom: ein ungewöhnlicher Pionier 🤟 🏣 🔆</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Als Kind saß ich dreimal pro Woche anderthalb Stunden bei der Arbeit meines Vaters. Ich durfte an einen Computer gehen, wo es von der Unterhaltung nur...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Kaboom: ein ungewöhnlicher Pionier</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/cloud4y/blog/487052/"><img src="https://habrastorage.org/webt/8r/zx/fj/8rzxfjri6jhsbbuodzrjy8eauae.png"><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Als Kind saß ich dreimal pro Woche anderthalb Stunden bei der Arbeit meines Vaters. Ich durfte an einen Computer gehen, wo es von der Unterhaltung nur einen Pionier und Farbe gab. Ich hatte es satt, schnell zu zeichnen, aber der Wunsch, das gesamte Feld zu öffnen und nicht zu explodieren, motivierte mich, nach neuen und neuen Wegen zu suchen, um dieses Spiel zu spielen. Viele Jahre später stieß ich versehentlich auf einen interessanten Artikel über einen Klon eines Pioniers und konnte nicht vorbeikommen. Ich schlage vor, dass Sie sich damit vertraut machen. Dies ist eine Geschichte über die Entwicklung von Kaboom, einem Klon des legendären Minesweeper-Spiels mit seiner eigenen Begeisterung.</font></font></i><a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Minesweeper erschien vor ziemlich langer Zeit nach den Maßstäben eines Computerspiels. </font><font style="vertical-align: inherit;">Aber es scheint mir, dass sich die meisten Leute an die Spiele erinnern, die Teil früherer Windows-Versionen waren. </font><font style="vertical-align: inherit;">Ich war nie gut in Minesweeper, aber ich habe es von Zeit zu Zeit gespielt. </font><font style="vertical-align: inherit;">Einige Leute spielen </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ernster</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Und für diejenigen, die sich aufmuntern möchten, empfehle ich </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Minesweeper - The Movie</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Idee</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vor kurzem hatte ich eine Idee: Was ist, wenn Sie Minesweeper gegen einen klügeren Computer spielen müssen? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Normalerweise wird die Position der Minen zu Beginn des Spiels festgelegt (hier gibt es jedoch einige Tricks - zum Beispiel, damit Sie den ersten Klick nicht verlieren können). Was aber, wenn der Standort der Minen nicht im Voraus festgelegt wurde und das Spiel den Standort der Minen nach Spielbeginn auswählen konnte? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das wäre ziemlich grausam: Wenn Sie auf ein Quadrat klicken, das eine Mine enthalten kann, wird es immer enthalten sein! Sie müssen also im Voraus nachweisen, dass das Quadrat sicher ist.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/um/0i/hg/um0ihg9b97wzjslibzfalc5ovmy.png"><br>
<font color="#999999"><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In der Abbildung oben sind in den mit einem Punkt gekennzeichneten Zellen garantiert keine Minen vorhanden, und in den mit einem Ausrufezeichen gekennzeichneten Zellen ist garantiert eine enthalten. Fragezeichen bedeuten Unsicherheit: Wenn Sie mehr Zellen öffnen, können Sie möglicherweise berechnen, ob dort eine Mine versteckt ist oder nicht.</font></font></i></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Andererseits gibt es Situationen, in denen Sie raten müssen:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ji/_r/c0/ji_rc06pslel8r2olgyyjfeqx5g.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In einer der unteren Zellen befindet sich eine Mine. Aber in welchem ​​ist es unmöglich zu verstehen. Sie müssen einen von ihnen auswählen. Aber unter der Bedingung, von der ich gerade gesprochen habe, würde dies einen sicheren Tod bedeuten! Ich wollte, dass das Spiel brutal ist, aber jetzt verliert es offensichtlich.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Daher werde ich die Idee leicht ändern. Sie können es erraten, aber nur, wenn keine sicheren Zellen mehr vorhanden sind. Somit wird das Spiel grausam, aber fair sein.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mit anderen Worten:</font></font><br>
<br>
<ul>
<li>      ,   .</li>
<li>      ,    ,   .</li>
<li>      , :<br>
<br>
<ol>
<li>     ,       ,      .</li>
<li>   ,   ,      .</li>
</ol></li>
</ul><br>
<h2>  </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie implementiere ich ein solches Spiel? Ich könnte versuchen, alle möglichen Felder zu berechnen, aber das ist unrealistisch: Selbst ein kleines 10x10-Feld bedeutet 2 ^ 100 Möglichkeiten. Es hilft nicht, nur diejenigen auszuwählen, die genau N min enthalten. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zum Glück muss ich mir keine Sorgen um das gesamte Feld machen. Wir wissen nichts über Landminen, die nicht an Tags angrenzen. Ich interessiere mich nur für diejenigen, die an der Grenze sind, der Rest kann ganz zufällig bestimmt werden. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zl/vp/qc/zlvpqcqpuapldwssoa5lhjtaff4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dann kann ich alle Optionen für den Standort von Minen an der Grenze gemäß den Etiketten berechnen. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Backtracking</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (Backtracking) - eine gute Technik, mit der Sie alle Kombinationen sortieren, aber auch schnell zurückziehen können, sobald wir feststellen, dass ein Zweig nicht berechnen kann.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/6z/0h/cf/6z0hcf6bfakj_2x3n0jyfz9bpf8.png"><br>
<font color="#999999"><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die zwei möglichen Standorte von Minen an der Grenze sind oben gezeigt. </font><font style="vertical-align: inherit;">Wenn wir sie kombinieren, werden wir verstehen, welche Zellen garantiert leer oder abgebaut sind. </font></font></i></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich muss auch die Gesamtzahl der Minen verfolgen. </font><font style="vertical-align: inherit;">Somit sieht der Ort wirklich wie "5 Minuten an der Grenze, 5 Minuten draußen" aus. </font><font style="vertical-align: inherit;">Dies ist wichtig, da ich sonst zu viele Minen an der Grenze hätte schaffen können (oder zu wenige!)</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
. Ich habe also alle Optionen. </font><font style="vertical-align: inherit;">Was passiert, wenn ein Spieler beschließt, einen Käfig zu öffnen?</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wählen Sie eine zufällige Option (eine, die den „grausamen, aber fairen“ Regeln entspricht). </font><font style="vertical-align: inherit;">Dadurch wird der Standort der Minen an der Grenze bestimmt.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Streuen Sie die außerhalb der Grenze verbleibenden nach dem Zufallsprinzip.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Befindet sich in der ausgewählten Zelle eine Mine, ist das Spiel beendet.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sonst:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Definieren Sie eine neue Bezeichnung für die identifizierte Zelle</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zeigen Sie zusätzliche Zellen an, wenn es 0 ist</font></font></li>
<li>    ,    !       .</li>
</ol></li>
</ul><br>
<h2>  </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Für kleine Felder ist dies normal. </font><font style="vertical-align: inherit;">Normalerweise gibt es nur wenige mögliche Kombinationen ... Moment, was ist das? </font></font><br>
<br>
<img src="https://habrastorage.org/webt/df/9n/k_/df9nk_sulyltttsf-u4pafb8fxe.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Oh nein! </font></font><br>
<br>
<img src="https://habrastorage.org/webt/g1/5w/nu/g15wnu_xlthcmvg94n7kjeqsg_k.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Irgendwie gelang es mir, 18 Millionen mögliche Minenstandorte freizuschalten. </font><font style="vertical-align: inherit;">Mein Firefox verschlingt 12 Gigabyte Speicher und das Öffnen einer Zelle dauert eine halbe Minute. </font><font style="vertical-align: inherit;">Natürlich brauche ich einen besseren Algorithmus. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jemand könnte bemerken, dass Minesweeper ein </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NP-vollständiges Spiel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ist und daher eine exponentiell zunehmende Zeit nicht vermieden werden kann. </font><font style="vertical-align: inherit;">Und im allgemeinen Fall ist dies wahr - es wird Positionen geben, deren Berechnung viel Zeit in Anspruch nimmt. </font><font style="vertical-align: inherit;">Aber für einen kleinen Bereich funktioniert das. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich muss mich nicht an alle Kombinationen erinnern. </font><font style="vertical-align: inherit;">Ich muss nicht einmal alle Kombinationen berechnen. </font><font style="vertical-align: inherit;">Alles was benötigt wird ist ein Weg:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Überprüfen Sie, ob die Zelle sicher, gefährlich oder vage ist.</font></font></li>
<li>    (,   ,       ).</li>
</ul><br>
<h2> </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anstatt die Optionen selbst auszuprobieren, werde ich den </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SAT-Solver verwenden</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Dies sind Werkzeuge, die eine Formel verwenden, die aus logischen Variablen besteht, und nach einer Reihe von Werten suchen, die die Formel wahr machen würden. Eine solche imaginäre, aber durchaus gültige Methode für unsere Aufgabe. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eine leistungsfähigere Klasse von Software sind </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SMT-Löser</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , die mit einem größeren Bereich von Werten und Formeln arbeiten, z. B. Logik erster Ordnung (Quantifizierer), Arrays, Ganzzahlen usw. Dies hilft zumindest dabei, einige Gleichungen für ganze Zahlen zu definieren. Aber ich brauche etwas, das im Browser funktioniert. Es gelang den Leuten, einige hochentwickelte Tools wie </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Z3Prover</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> auf den Browser </font><font style="vertical-align: inherit;">zu portieren </font><font style="vertical-align: inherit;">, aber die WebAssembly-Version wiegt</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">17 MB</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , und das ist zu viel. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich fand </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MiniSat</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , einen kleinen SAT-Löser, der von Joel Galenson für Javascript kompiliert wurde. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die kompilierte Datei</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> benötigt nur 200 Kilobyte, also benutze ich sie.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CNF-Formeln</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SAT-Löser arbeiten mit konjunktiven Normalformeln ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CNFs</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). Die CNF-Formel lautet beispielsweise „ein UND aus ODERs“: </font></font><br>
<br>
<code>(a | ~ b | ~ c) &amp; (c | d ~ e) &amp; f</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie können jede Formel der Satzlogik (Variablen und / oder nicht Implikation) in CNF konvertieren, sodass es sich um eine Art universelles Format handelt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie benutzen wir es? Angenommen, wir haben eine Karte: </font><font style="vertical-align: inherit;">
Wenn ich Variablen für unbekannte Zellen erstelle (im Uhrzeigersinn: x1, x2, x3), müssen diese die folgenden Gleichungen erfüllen: </font><font style="vertical-align: inherit;">
Aber wie kann man in CNF „die Summe der Variablen ist 2“ ausdrücken? </font><font style="vertical-align: inherit;">
Ich habe eine Methode gefunden, die, wie ich später erfuhr, "Binomialcodierung" heißt und die einfachste Codierung ist. Sie sollten alle möglichen Teilmengen von Variablen berücksichtigen. Zum Beispiel </font><font style="vertical-align: inherit;">benötigen </font><font style="vertical-align: inherit;">Sie </font><font style="vertical-align: inherit;">die folgenden Formeln:</font></font><br>
<br>
<code>? ? 1<br>
2 ? 1</code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<code>1 + 2 + 3 = 2<br>
2 + 3 = 1<br>
2 + 3 = 1 (   )</code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><code>x1 + x2 + x3 = 2 </code><font style="vertical-align: inherit;"></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Für jede Teilmenge von 2 Variablen ist mindestens eine wahr. </font><font style="vertical-align: inherit;">Dies stellt sicher, dass der Betrag größer als 1 ist.</font></font><br>
<code>(x1 | x2) &amp; (x1 | x3) &amp; (x2 | x3)</code></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mindestens eine Variable ist falsch. </font><font style="vertical-align: inherit;">Dies stellt sicher, dass der Betrag weniger als 3 beträgt.</font></font><br>
<code>(~ x1 | ~ x2 | ~ x3)</code></li>
</ul><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Für </font></font><code>x2 + x3 = 1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mich brauche ich einen ähnlichen Satz von Formeln:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mindestens eine der Variablen ist korrekt: </font></font><code>(x2 | x3)</code></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mindestens eine der Variablen ist falsch </font></font><code>(~ x2 | ~ x3)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Durch die Kombination erhalte ich eine CNF-Formel mit 6 Punkten. Im Standard-DIMACS-Format: </font><font style="vertical-align: inherit;">
Alle Positionslinien enden mit 0, und die Negation wird mit einem Minus markiert. Wenn ich es mit MiniSat verbinde (probieren Sie es selbst aus), erhalte ich </font><font style="vertical-align: inherit;">
Folgendes </font><font style="vertical-align: inherit;">: </font><font style="vertical-align: inherit;">Dies bedeutet, dass MiniSat eine Lösung gefunden hat, bei der x1 und x2 wahr und x3 falsch sind. So wird das Board aussehen: </font><font style="vertical-align: inherit;">
Das gesamte Programm ist etwas komplizierter: Dies ist nur eine Lösung, es gibt eine andere. Um herauszufinden, ob x1, x2, x3 wahr (oder falsch) sein kann, müssen Sie daher weitere Anforderungen stellen. Ich muss fragen: „Ist dies angesichts der obigen Formel und x1 machbar? Wie wäre es mit der obigen Formel sowie ~ x1 "?</font></font><br>
<br>
<code>p cnf 3 6<br>
1 2 0<br>
1 3 0<br>
2 3 0<br>
-1 -2 -3 0<br>
2 3 0<br>
-2 -3 0 </code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<code>SAT 1 2 -3</code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<code>! ! 1<br>
2 . 1</code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Codierung bedeutet, dass ich alle möglichen Kombinationen (zum Beispiel alle Teilmengen von 3) einer Reihe von Variablen finden muss. </font><font style="vertical-align: inherit;">Für diese Gleichung gibt es jedoch nur bis zu 8 Variablen, sodass die Formel normalerweise klein genug ist, damit MiniSat sie schnell lösen kann.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Min Tracking</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dies ist leider keine vollständige Lösung! Ich muss noch nachverfolgen, wie viele Minen noch übrig sind. Einige Kombinationen sind unmöglich, da Sie sonst mehr Minen als erlaubt erstellen können und es unmöglich ist, zu gewinnen. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vj/ic/pz/vjicpzij8cclzqcvewcn3hpzgpq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In der Tat ist auch der umgekehrte Fall möglich: Wenn zu wenige Minen vorhanden sind, endet das Spiel, da nichts zu platzieren ist. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Daher muss ich in der SAT-Formel angeben, dass „die Anzahl der Minen nicht weniger als X und nicht mehr als Y beträgt“. Zuerst dachte ich, ich könnte den Trick mit allen Kombinationen anwenden. Leider funktioniert es bei großen Zahlen nicht so gut. Wenn es beispielsweise 20 Zellen und 10 Minuten gibt </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, stellen</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> wir </font><font style="vertical-align: inherit;">nach dem Verbinden der Zahlen mit dem </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">Binomialkoeffizienten fest,</font></a><font style="vertical-align: inherit;"> dass die Anzahl der Kombinationen bereits 6 Stellen beträgt!</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Also fand ich heraus, dass es viele andere Möglichkeiten gibt, die Summe der Variablen in die SAT-Formel zu kodieren. Sie müssen ein Schema erstellen, das die einzelnen Variablen kombiniert. Siehe zum Beispiel </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">diese Antwort</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> auf StackExchange oder </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">diese</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Am Ende wurde mir die Idee aus einem Artikel mit dem Titel „Effektive CNF-Codierung mit booleschen Kardinalitätsbeschränkungen“ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">von</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Olivier Baillot und Yasin Bufhad klar. Wir sehen einen Baum, der rekursiv unäre Zahlen hinzufügt (oder Bits so sortiert, dass jeder am Anfang steht):</font></font><br>
<br>
<img src="https://habrastorage.org/webt/cg/_s/n8/cg_sn8kuz4tyzsklfiftc9pxr6i.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Am Ende dieses Diagramms erhalten Sie einen sortierten Satz von Ausgabevariablen. Um zu bestätigen, dass die Summe nicht kleiner als X ist, überprüfen Sie, ob das erste X der resultierenden Variablen 1 ist. Um zu behaupten, dass die Summe nicht mehr als Y ist, überprüfen Sie, ob das letzte N - Y der resultierenden Variablen 0 ist. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dies ist viel besser als die Verwendung aller möglichen Kombinationen. Dieses Schema ist jedoch immer noch irrational, da es Sätze Ө (N ^ 2) erzeugt. Wenn die Anzahl der offenen Zellen ungefähr 100 beträgt, wird das Spiel träge. Wir können das Spiel weiter optimieren. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anfragen reduzieren</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beim Studium des Problems habe ich festgestellt, dass ich die Anzahl der Abfragen an den Solver reduzieren kann. </font><font style="vertical-align: inherit;">Ich wollte den Status aller Zellen bestimmen (dh prüfen, ob sie garantiert gefährlich, sicher oder nicht sind). </font><font style="vertical-align: inherit;">Ich habe dies mit einer einfachen Schleife gemacht. </font><font style="vertical-align: inherit;">Angenommen, die Tafel wird durch die Formel F beschrieben:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Entscheide dich für </font></font><code>F &amp; ~ x1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zu prüfen, ob x1 0 sein kann</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Entscheide dich für </font></font><code>F &amp; x1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zu prüfen, ob x1 1 sein kann</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Entscheide dich für </font></font><code> F &amp; ~ x2 </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zu prüfen, ob x2 0 sein kann</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Entscheide dich für </font></font><code>F &amp; x2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zu prüfen, ob x2 1 sein kann</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Usw.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Was habe ich bemerkt? </font><font style="vertical-align: inherit;">Wenn ich eine Lösung für F &amp; ~ x1 bekomme, enthält sie auch die Werte aller anderen Variablen. </font><font style="vertical-align: inherit;">Dies beantwortet bereits viele andere Fragen: Wenn die Lösung x2 = 0 enthält, muss ich nicht fragen, ob x2 0 sein kann, da ich dies bereits weiß. </font><font style="vertical-align: inherit;">Dadurch kann ich die Anzahl der Anfragen um das 2-5-fache reduzieren.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Caching</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dies löst nicht das Problem der riesigen Formel, die von der "Zähl" -Schaltung erzeugt wird. Wie gesagt, die Anzahl der Sätze liegt in der Größenordnung von N ^ 2. Auf einer großen Tafel kann die Formel bis zu 10.000 Annahmen umfassen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Glücklicherweise kennen wir die meiste Zeit die genaue Bedeutung vieler Zellen. Wenn die Zelle garantiert leer oder garantiert gefüllt ist, ändert sich der Wert nie! Dies bedeutet, dass wir es zwischenspeichern und nicht in die SAT-Formel aufnehmen können. Sobald wir den Zustand der Zelle bestimmt haben, müssen wir ihn nicht mehr erneut in die Berechnung einbeziehen. Zellen werden verwendet, solange sie nicht definiert sind. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Diese Optimierung ist etwas gefährlich: Wir haben keine Formel mehr, die die Richtigkeit der gesamten Platine bestätigt. Wenn alles andere wie geplant funktioniert, ist dies kein Problem, kann jedoch die Fehlerverfolgung erschweren.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ein anderer Fall: im Ausland spielen </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dürfen Sie irgendwo auf der Karte außerhalb der Grenze zwischen dem offenen und dem ungeöffneten Bereich des Feldes klicken? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anfangs dachte ich, es sei dasselbe wie zu raten: Wenn es keine sicheren Zellen gibt, können Sie einfach irgendwo auf das Feld klicken. </font><font style="vertical-align: inherit;">Einige finden es jedoch seltsam, dass dies die Öffnung eines leeren Käfigs garantiert. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Deshalb habe ich das Spiel so geändert, dass ein Klick außerhalb des Rahmens immer bestraft wird. </font><font style="vertical-align: inherit;">Mit Ausnahme des Spielbeginns natürlich, denn dann ist das ganze Brett „draußen“. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es stellt sich jedoch heraus, dass es ein anderes Szenario gibt: Was ist, wenn alle Grenzfelder tödlich sind? </font><font style="vertical-align: inherit;">
Sie haben keine andere Wahl, als etwas anderes zu enthüllen. </font><font style="vertical-align: inherit;">Diese Situation kann das Spiel von Anfang an unpassierbar machen. </font><font style="vertical-align: inherit;">Jetzt gibt es noch eine Ausnahme. </font><font style="vertical-align: inherit;">Sie dürfen außerhalb der Grenzen spielen, wenn:</font></font><br>
<br>
<code>3 . .<br>
. . .<br>
. . .<br>
</code><br><font style="vertical-align: inherit;"></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das Feld ist nicht offen</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die abgebauten Zellen können sich am Rand befinden (ein Klicken auf die Außenseite sollte sicher sein) oder</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In allen Zellen an der Grenze müssen sich Bomben befinden (Sie müssen nach draußen klicken).</font></font></li>
</ul><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Update</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : Die Änderung erwies sich als kontrovers, da die Einschränkung etwas künstlich ist. </font><font style="vertical-align: inherit;">Ich habe einen Schalter hinzugefügt, der das Spielen mit diesen Bedingungen erlaubt / verbietet.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das ist alles</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie können </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Kaboom spielen </font><font style="vertical-align: inherit;">. Versuchen Sie, den Debugging-Modus zu aktivieren: Dies macht das Spiel trivial, zeigt aber gut, wie es funktioniert. </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">Github-</font></a></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Quellcode </font><font style="vertical-align: inherit;">. Er ist nicht sehr hübsch. </font><font style="vertical-align: inherit;">
Vielleicht interessiert Sie auch ein </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">ähnliches Spiel</font></a><font style="vertical-align: inherit;"> von Simon Tatham, dem Erfinder von PuTTY. Seine Version hat eine andere Wendung: Es ist immer ohne Spekulation lösbar. </font><font style="vertical-align: inherit;">
Spielen Sie mit Bedacht! </font><b><font style="vertical-align: inherit;">Was kann sonst noch nützlich sein, um im </font></b><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">Cloud4Y-</font></a></b><b><font style="vertical-align: inherit;"> Blog zu lesen</font></b><font style="vertical-align: inherit;"> 
→ </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">Wie die Bank „kaputt </font></a><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">gegangen</font></a></b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"> “ ist</font></a><font style="vertical-align: inherit;"> 
→ </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">Datenschutz? Nein, sie haben nicht gehört</font></a><font style="vertical-align: inherit;"> 
→ Die </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">große Theorie der Schneeflocken</font></a><font style="vertical-align: inherit;"> 
→ </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">Diagnose von Netzwerkverbindungen auf einem virtuellen EDGE-Router</font></a><font style="vertical-align: inherit;"> 
→</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<b><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"></font></a></b><br>
<br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"></font></a><br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"></font></a><br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"></font></a><br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"></font></a><br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CRISPR-resistente Viren bilden Schutzräume, um Genome vor DNA-durchdringenden Enzymen zu schützen.</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Abonnieren Sie unseren </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Telegrammkanal</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , damit Sie keinen weiteren Artikel verpassen! </font><font style="vertical-align: inherit;">Wir schreiben nicht mehr als zweimal pro Woche und nur geschäftlich. </font><font style="vertical-align: inherit;">Wir erinnern Sie daran, dass Startups 1 Million Rubel bekommen können. </font><font style="vertical-align: inherit;">von Cloud4Y. </font><font style="vertical-align: inherit;">Allgemeine Geschäftsbedingungen für diejenigen, die dies wünschen - auf unserer Website: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bit.ly/2sj6dPK</font></font></a></div>
      
    </div><p class="reference-to-source js-reference-to-source">Source: https://habr.com/ru/post/undefined/</p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de487038/index.html">Plötzlich reicht ein Müllsammelsystem allein nicht mehr aus</a></li>
<li><a href="../de487040/index.html">Firefox Preview Nightly für Android unterstützt uBlock Origin</a></li>
<li><a href="../de487042/index.html">Der 64-Kern Ryzen Threadripper 3990X besiegt alle Intel-Prozessoren in Tests, einschließlich 20.000 US-Dollar Xeon</a></li>
<li><a href="../de487044/index.html">Privatsphäre? Nein, nicht gehört</a></li>
<li><a href="../de487046/index.html">So erstellen Sie eine native Bibliothek für Android</a></li>
<li><a href="../de487054/index.html">ROS: Gewidmet denen, die im Pavillon festsitzen ... Plattform für einen Roboter für 28.000 Rubel</a></li>
<li><a href="../de487056/index.html">Ist es gefährlich, RDP im Internet offen zu halten?</a></li>
<li><a href="../de487058/index.html">"Hadoop. ZooKeeper “aus der Mail.Ru Group Technostream-Reihe„ Verteilte Verarbeitung großer Datenmengen in Hadoop “</a></li>
<li><a href="../de487060/index.html">Verwenden Sie Google Chrome? Google sammelt Ihre Daten also über X-Client-Daten</a></li>
<li><a href="../de487062/index.html">CBS erlaubte Linux-Benutzern, Star Trek zu sehen, dank ihr dafür</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>