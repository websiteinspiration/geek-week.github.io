<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🍈 ☑️ 🚏 私の最初の仮想マシン：混乱しないようにする方法 🦍 👩🏽 🛂</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="これがvCloud Directorの新しい組織です。最初の仮想マシンを作成するだけです。今日は、仮想マシンを作成するときにどの設定を選択すればよいかを説明します。これにより、仮想マシンが機能し、食べ物を要求しないようになります。行こう！
 
 
 ソース：drive2.ru
 
 オペレーティング...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>私の最初の仮想マシン：混乱しないようにする方法</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/dataline/blog/472814/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これがvCloud Directorの新しい組織です。最初の仮想マシンを作成するだけです。</font><font style="vertical-align: inherit;">今日は、仮想マシンを作成するときにどの設定を選択すればよいかを説明します。これにより、仮想マシンが機能し、食べ物を要求しないようになります。</font><font style="vertical-align: inherit;">行こう！</font></font><br>
<br>
<img src="https://habrastorage.org/webt/cw/kx/ed/cwkxedsfdfy2c1qdmhnal6cyti0.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ソース：drive2.ru</font></font></i><br>
<a name="habracut"></a><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オペレーティング・システム。</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最新のディストリビューションを選択してください。 Windows 2008 R2以前またはLinuxをカーネル4.19.xまで使用する場合は、問題が発生するまで待ちます。どれ？たとえば、ベンダーは既に2013年（EOL）にWindows 2008 R2の現在のステータスを維持することをすでに中止しています。これは、彼がリリースされたハードウェア用のドライバーをもはや開発せず、新しいもののためにOSを変更しないことを意味します。古代のOSでは、最新のハイパーバイザーが提供するすべての機能を使用することはできません。すでにこれらの年末年始には深刻なセキュリティ問題が発生します。2020年1月14日以降、Windows Server 2008 R2の拡張サポートが終了し、セキュリティアップデートのリリースが中止されます。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ソケットあたりのコア。</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ソケットごとに1コアを残し、仮想プロセッサに必要な数のソケットを配置します。はい、それは逆に論理的ですが、当然です。特別なライセンス要件がない限り。たとえば、ソケットの料金を支払うと、ソケットの数が増えるとライセンス数も増えます。 2/2を賭けて4を取得しないでください。4/ 1を実行してください。ハイパーバイザーはそのようなマシンに最適な方法でサービスを提供します。ハイパーバイザースケジューラは、そのようなVMにペナルティを課しません。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
指で説明します。指揮者がワゴンに乗客を乗せていると想像してください-サプサンのように。コンダクタースケジューラの役割では、乗客はVMです。一人で旅行する乗客（シングルプロセッサVM）は、最も簡単に配布できます。どこにでも配置できます。 4人家族（4プロセッサVM）は、すでに複雑です。 1台の車で4席を見つける必要があります。ここで、家族の全員が向かい合って行きたいだけで、馬車のテーブルの周りにそのような場所のグループが4つしかないことを想像してください。高い確率で、そのような家族は次の馬車（次の計画ティック）に行かなければならないでしょう。これは単なる状況であり、4を取得するために2コアの2ソケットを選択したかのように、適切な場所が見つかるまで待機する必要があります。これはVMでも同じです。1つのソケットと多数のプロセッサを備えた「風変わりな」VMよりも長く待機する必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このストーリーは、ESXiの古いバージョンに関連しています。 6.5以降（ただし、以前のバージョンではありません）、vNUMAメカニズムは仮想ソケットの数から解放されており、以前の推奨である「ソケットを生成しない」はそれほど明確ではありません。ただし、それでもゲストOS内のアプリケーションに依存します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/yk/ca/wb/ykcawbp3aughrvmyn_uil1scgtu.png"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CPUとメモリのホットアド。</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これは、実行中の仮想マシンにCPUメモリを追加するオプションです。それは素晴らしい機能のように思われるでしょう：あなたはその資源を排出するために車を消す必要はありません。したがって、すべてがそれほど単純なわけではありません。また、デフォルトで無効にされていることは、何のためでもありません。 NUMAトポロジが何であるかがわからない場合は、含めないことをお勧めします。クラウドの内部にデュアルソケットサーバーがあるとします。各ソケットには4つのコアがあります。 8コアではなく、4 + 4と同じように機能します。メモリに関する同じトピック：各ソケットに128 GBがある場合、これは合計で256 GBになりません。各プロセッサソケットは、特定のメモリスロットにのみ直接アクセスできます。各ソケットは、プロセッサとそれに起因するメモリとともに、物理NUMAノードです。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ds/a_/jz/dsa_jz-y7x9n53bbi4pljvq75_0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
仮想マシンが物理NUMAノードのサイズに割り込むと、そのノード内で実行されます。仮想マシンがメモリなどからNUMAノードに収まらない場合、隣接するNUMAノードのメモリを使用します。リモートメモリへのパスは曲がりくねっています-プロセッサ間バスを経由します。これは、仮想マシンが1つのノードのリソースを使用する場合ほど速く機能しません。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ye/co/l9/yecol9u3huiwnyvsgjvr98gs_0c.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ホットなものへの仮想プロセッサとメモリの追加を有効にすると、これらすべてがゼロのNUMAノードにのみ適用されます。たとえば、4つのプロセッサが追加され、NUMAノード0では6、NUMAノードでは1-2プロセッサになりました。車は少しゆがんでいて、斜めにも動きます。これは、vCPUをオンにすると、ホットプラグvNUMAが機能を停止し、vSphereがVMのNUMAトポロジを最適化しようとするためです。したがって、ホットアドCPUを有効にするかどうかを決定するときは、NUMA物理トポロジを考慮してVMのパフォーマンスを確保してください。何らかの理由でVMに複数の仮想ソケットがある場合、これは非常に重要です。この場合、物理トポロジーの不一致により、パフォーマンスが大幅に低下します。CPUスケジューラーは、そのようなVMにプロセッサー時間を提供しようと狂ってしまい、これにより、CPU ReadyおよびCo-Stopが増大します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/xq/l9/sx/xql9sx66vwhgndfopapipmc3fwq.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">追加されたすべての仮想プロセッサ（5〜8）とメモリがNUMAノード0に到達しまし</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
た。別の話は、そのような「</font><i><font style="vertical-align: inherit;">アドオン</font></i><font style="vertical-align: inherit;">」の後でOSとアプリケーションの内部で何が起こるかです。したがって、このオプションを使用する場合は、OSがこれをサポートしているかどうかを確認してください。非NUMA対応アプリケーションは、複数のNUMAノードに配置されると、パフォーマンスが大幅に低下する可能性があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それでもホットプロセッサにプロセッサまたはメモリを追加した場合は、最も近い予定されたダウンタイムのために、OSだけでなくVMを再起動することをすぐに計画してください。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/r6/3o/jv/r63ojvlyhjct7xjxnwnvcw3oklg.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">チェックは入れません。</font></font></i><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ディスクコントローラー（バスタイプ）。</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ディスクの場合、準仮想ディスクコントローラーを選択します。このタイプのコントローラーでは、VMware Tools OSにドライバーをインストールする必要があります。準仮想化は、仮想化で動作するように作成された特別な仮想デバイスであり、他のハードウェアデバイスの動作をエミュレートしません。ハードウェアデバイスのエミュレーションは、常に低速で実行されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
準仮想化を使用したくない場合（なぜですか？）、LSI Logic SASを選択してください。 OSもサポートしていない場合-LSI Logic Parallel。 SATAおよびIDEを使用しないでください。 VMの動作が遅くなり、その結果、クラウドのパフォーマンスが得られなくなります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
OSをインストールするときに、最新バージョンのWindowsであっても、準仮想化アダプターのドライバーが見つからない場合があります。この場合、WindowsブートイメージとVMwareツールディスクの2つのISOファイルをVMにマウントします。後者には必要なドライバーがあります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ui/vg/gd/uivggdf70jeowrco3lywhr3dre8.png"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ネットワークアダプター</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">正しい選択はVMXNet3です。 VMXNet3は、準仮想化ディスクアダプターと同様に、準仮想化デバイスです。また、VMware Toolsに含まれているドライバーも必要です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
突然VMXNet3が適合しない場合（一部の非互換性が表示される）、極端な場合はE1000Eを使用します。ただし、E1000Eで1 Gbpsを超えることは期待しないでください。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一般に、ベンダーからの明確な指示なしにE1000Eを使用しないでください。それは新しいようですが、レガシーとの互換性をさらに高めるように作られています。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/qj/gz/ia/qjgziamw9setcz5xsh0q1hyrj1o.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ここでは、E1000Eは必要ありません。</font></font></i><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VMwareツール</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">それらがOSにインストールされ、実行中で最新であることを確認してください。 VMware Toolsには、仮想マシンOSがハイパーバイザーと通信できるようにするデバイスドライバーやその他のさまざまなコンポーネントが含まれています。それらを介して、OS時間は仮想化ホストと同期され（切断され）、仮想マシンが稼働していることをハイパーバイザーに示すハートビートが続きます。仮想マシンでOSを実行するには、少なくともネットワークカード、ディスクアダプターのドライバーが必要です。これらすべての最新バージョンは、VMware Toolsに含まれています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
デフォルトでは、WindowsとLinuxの現在のバージョンにはVMware仮想デバイスを操作するためのドライバーが含まれていますが、VMware Toolsを使用している場合、これらのドライバーは常に最新のものです。 Linuxの場合、open-vm-toolsの使用をお勧めします。これは、OSとの最適な統合だけでなく、システムでのドライバーの更新も行います。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ou/81/op/ou81opmvo0by_eqmqcida4sehli.png"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">個別のデータドライブ。</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">データとオペレーティングシステムに異なる仮想ディスクを使用します。はい、物理サーバーではこれを行う価値があります。これらのディスクを別々に（たとえば、異なるスケジュールで）バックアップしたり、データディスクまたはそのクローンを別のVMに切り替えたりすることができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに、新しい仮想ディスクには、ディスクパフォ​​ーマンス用の追加のクォータも割り当てられます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jt/za/iy/jtzaiybj9af7wil_pfgj78n5b6m.png"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">カスタマイズ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VMを初めてオンにするときは、クラウドからのすべての設定（たとえば、クラウドによって発行されたIPアドレス）がOSに適用されるように、VMをカスタマイズする必要があります。</font><font style="vertical-align: inherit;">その後、誤ってOS設定（SID、管理者パスワードなど）をリセットしないように、このdawを罪から遠ざけます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/dy/hz/s_/dyhzs_p9kbutwrafz3pkw2hwufc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
もちろん、上記のすべては簡略化された画像であり、「キャプテンO」という言葉と、一般的には「これを知っている」という言葉です。</font><font style="vertical-align: inherit;">しかし、実際に示されているように、クラウド内のVMの70％以上に1つまたは複数の説明されたエラーが含まれています。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja472796/index.html">YESは、FAANG *または[実用ガイド]をITスペシャリスト向けの米国/ヨーロッパでの就職活動に活用します</a></li>
<li><a href="../ja472798/index.html">タクシーアプリケーションのYandexマップ</a></li>
<li><a href="../ja472802/index.html">MIROはオープンな屋内ロボットプラットフォームです。パート2-ロボットの設計</a></li>
<li><a href="../ja472810/index.html">初心者のシステム管理者：無秩序から秩序を作る方法</a></li>
<li><a href="../ja472812/index.html">データセンターの煙テストが「発砲」した場合、サーバーを「消火」する必要がありますか？</a></li>
<li><a href="../ja472816/index.html">最新のJavaScriptのエレガントなパターン（Bill Sourourコンパイルサイクルの記事）</a></li>
<li><a href="../ja472818/index.html">集団運動：科学者アリコルクの研究方法</a></li>
<li><a href="../ja472822/index.html">ロシア科学アカデミーが無力であるとき</a></li>
<li><a href="../ja472826/index.html">マイクロインタラクションとユーザーインターフェイスでの使用</a></li>
<li><a href="../ja472830/index.html">わかりやすいコードの書き方</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>