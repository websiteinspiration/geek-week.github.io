<!doctype html>
<html class="no-js" lang="ar">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ง๐ป ๐ด๐ฝ ๐จ๐ผโ๐ง ููู ุชุชุณูู ุดุฌุฑุฉ ๐ฝ โ๏ธ ๐๐ผ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ุจุชุนุจูุฑ ุฃุฏู ุ ููููุฉ ุงููุฒูู ููู. ููู ุฃูู ุงูุฃุดูุงุก ุฃููุงู. ูุฐู ุงูููุงูุฉ ุฎุงุฑุฌุฉ ููููุงู ุนู ุชูุณูู ุงูููุงูุฉ ุงููุนุชุงุฏ ูู PVS-Studio. ุบุงูุจูุง ูุง ููุชุจ ุนู ูุญุต ุงููุดุงุฑูุน ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>ููู ุชุชุณูู ุดุฌุฑุฉ</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pvs-studio/blog/502518/"><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/qf/qz/ys/qfqzys_fndtbks6hb68atbrnyrq.png" alt="ุงูุตูุฑุฉ 2"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุชุนุจูุฑ ุฃุฏู ุ ููููุฉ ุงููุฒูู ููู. </font><font style="vertical-align: inherit;">ููู ุฃูู ุงูุฃุดูุงุก ุฃููุงู. </font><font style="vertical-align: inherit;">ูุฐู ุงูููุงูุฉ ุฎุงุฑุฌุฉ ููููุงู ุนู ุชูุณูู ุงูููุงูุฉ ุงููุนุชุงุฏ ูู PVS-Studio. </font><font style="vertical-align: inherit;">ุบุงูุจูุง ูุง ููุชุจ ุนู ูุญุต ุงููุดุงุฑูุน ุงูุฃุฎุฑู ุ ูููู ุชูุฑูุจูุง ูุง ุชูุชุญ ุฃุจุฏูุง ุจุงุจ ูุทุจุฎูุง ุงูุฏุงุฎูู. </font><font style="vertical-align: inherit;">ุญุงู ุงูููุช ูุฅุตูุงุญูุง ูุงูุชุญุฏุซ ุนู ููููุฉ ุจูุงุก ุงููุญูู ูู ุงูุฏุงุฎู. </font><font style="vertical-align: inherit;">ุจุชุนุจูุฑ ุฃุฏู ุ ุนู ุฃูู ุฃุฌุฒุงุฆูุง - ุดุฌุฑุฉ ุงููุญู. </font><font style="vertical-align: inherit;">ุณุชุฑูุฒ ุงูููุงูุฉ ุนูู ุฌุฒุก PVS-Studio ุงูุฐู ูุชุนูู ุจูุบุงุช C ู C ++.</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูู ุงูุงุดูุงุก ุงููุง</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุดุฌุฑุฉ ุจูุงุก ุงูุฌููุฉ ูู ุงูุฌุฒุก ุงููุฑูุฒู ูู ุฃู ูุชุฑุฌู. ุจุทุฑููุฉ ุฃู ุจุฃุฎุฑู ุ ูุฌุจ ุชูุฏูู ุงูุดูุฑุฉ ูู ุดูู ููุงุณุจ ููุนุงูุฌุฉ ุงูุจุฑูุงูุฌ ุ ููุญุฏุซ ุฃู ูููู ุงูุดุฌุฑุฉ ูู ุงูุฃูุณุจ ูุฐูู. ูู ุฃุฎูุถ ูู ุงููุธุฑูุฉ ููุง - ูููู ุฃู ูููู ุฃู ุงูุดุฌุฑุฉ ุชุนูุณ ุฌูุฏูุง ุงูุชุณูุณู ุงููุฑูู ููุชุนุจูุฑุงุช ูุงููุชู ูู ุงูุดูุฑุฉ ุ ููู ููุณ ุงูููุช ุชุญุชูู ููุท ุนูู ุงูุจูุงูุงุช ุงููุงุฒูุฉ ููุนูู.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุง ุนูุงูุฉ ุงููุชุฑุฌู ุจุงููุญูู ุงูุณุงููุ ูุงูุญูููุฉ ูู ุฃู ูุงุชูู ุงูุฃุฏุงุชูู ุชุดุชุฑูุงู ูู ุงููุซูุฑ. ูู ุงููุฑุญูุฉ ุงูุฃููู ูู ุชุญููู ุงูููุฏ ุ ูููููู ุจููุณ ุงูุนูู. ุฃููุงู ุ ูููุณู ุงูุฑูุฒ ุฅูู ุชุฏูู ูู ุงูุฑููุฒ ุงููููุฒุฉ ุงูุชู ูุชู ุชุบุฐูุชูุง ุฅูู ุงููุญูู ุงููุบูู. ุซู ุ ูู ุนูููุฉ ุงูุชุญููู ุงููุญูู ูุงูุฏูุงูู ุ ูุชู ุชูุธูู ุงูุฑููุฒ ุงููููุฒุฉ ูู ุดุฌุฑุฉ ุ ูุงูุชู ูุชู ุฅุฑุณุงููุง ุจุดูู ุฃูุจุฑ ุนูู ุทูู ุฎุท ุงูุฃูุงุจูุจ. ูู ูุฐู ุงููุฑุญูุฉ ุ ูููู ูููุชุฑุฌููู ุฅุฌุฑุงุก ุชุญุณููุงุช ูุณูุทุฉ ูุจู ุฅูุดุงุก ููุฏ ุซูุงุฆู ุ ูุจุฏุฃ ุงููุญูููู ุงูุซุงุจุชูู ุจุชุฌุงูุฒ ุงูุนูุฏ ูุจุฏุก ุนูููุงุช ุงููุญุต ุงููุฎุชููุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ูุญูู PVS-Studio ูุน ุดุฌุฑุฉ ูุจููุฉ ุ ุชุญุฏุซ ุนุฏุฉ ุฃุดูุงุก:</font></font><br>
<br>
<ul>
<li>    .    , , ,     <i>using </i>  <i>typedef</i>,   . ,  .         ;</li>
<li>     .  ,          ;</li>
<li>   ,      ,    ,      ;</li>
<li>  .        (      ).          . ,         <i>nullptr</i>    ,    ,         .       ;</li>
<li>  .      ,      .        ,    .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅุฐุง ููุช ููุชููุง ุจุชูุงุตูู ููููุฉ ุนูู ุงูุชุญููู ุ ูุฅููู ุฃูุตูู ุจูุฑุงุกุฉ ุงูููุงูุฉ " </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชูููุงุช ุงููุณุชุฎุฏูุฉ ูู ูุญูู ุฑูุฒ PVS-Studio ููุนุซูุฑ ุนูู ุงูุฃุฎุทุงุก ูููุงุท ุงูุถุนู ุงููุญุชููุฉ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ". </font><font style="vertical-align: inherit;">ูุชู ูุญุต ุจุนุถ ุงูููุงุท ูู ุงููุงุฆูุฉ ุจุงูุชูุตูู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุณูุจุญุซ ุจูุฒูุฏ ูู ุงูุชูุตูู ูุง ูุญุฏุซ ููุดุฌุฑุฉ ุฏุงุฎู ุงููุญูู ูููู ุชุจุฏู ุนูู ุงูุฅุทูุงู. </font><font style="vertical-align: inherit;">ูุน ููุฏูุฉ ููุฌุฒุฉ ุ ุญุงู ุงูููุช ูููุตูู ุฅูู ููุงูุฉ ุงูุฃูุฑ.</font></font><br>
<br>
<p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/si/xk/o4/sixko4j1_uucanebxzup6slqpf8.png" alt="ุงูุตูุฑุฉ 1"></div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููู ุชุนูู</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชุงุฑูุฎูุงู ุ ูุณุชุฎุฏู PVS-Studio ุดุฌุฑุฉ ุซูุงุฆูุฉ ูุชูุซูู ุงูุฑูุฒ. ูููู ุงูุจูุงูุงุช ุงูููุงุณููู ูุฐุง ูุฃููู ููุฌููุน - ูุฏููุง ุนูุฏุฉ ุชุดูุฑ ุจุดูู ุนุงู ุฅูู ุทูููู. ุงูุนูุฏ ุงูุชู ูุง ููุชุฑุถ ุฃู ูููู ููุง ุฃุญูุงุฏ ุ ุณุฃุฏุนู ุงููุญุทุงุช ุงูุทุฑููุฉ ุ ุฌููุน ุงูุขุฎุฑูู - ุบูุฑ ุงููุญุทุงุช. ูู ุจุนุถ ุงูุญุงูุงุช ุ ูุฏ ูุง ุชุญุชูู ุงูุนูุฏ ุบูุฑ ุงูุชุงุจุนุฉ ุนูู ุนูุฏ ุชุงุจุนุฉ ุ ูููู ุงุฎุชูุงููุง ุงูุฑุฆูุณู ุนู ุงููุญุทุฉ ูู ุงูุณูุงุญ ููุฃุญูุงุฏ ุจุฐูู. ุชูุชูุฑ ุงูุนูุฏ ุงูุทุฑููุฉ (ุฃู ุงูุฃูุฑุงู) ุฅูู ุงููุฏุฑุฉ ุนูู ุงูุฅุดุงุฑุฉ ุฅูู ุดูุก ุขุฎุฑ ุบูุฑ ุงูุฃุตู.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฎุชูู ุงููููู ุงููุณุชุฎุฏู ูู PVS-Studio ููููุงู ุนู ุงูุดุฌุฑุฉ ุงูุซูุงุฆูุฉ ุงูููุงุณูููุฉ - ููุฐุง ุถุฑูุฑู ููุฑุงุญุฉ. </font><font style="vertical-align: inherit;">ุนุงุฏุฉู ูุง ุชุชูุงูู ุงูุนูุฏ ุงูุทุฑููุฉ ูุน ุงููููุงุช ุงูุฑุฆูุณูุฉ ูุฃุณูุงุก ุงููุชุบูุฑุงุช ูุงูุญุฑูู ููุง ุฅูู ุฐูู. </font><font style="vertical-align: inherit;">ุบูุฑ ุงููุญุทุงุช - ุฃููุงุน ูุฎุชููุฉ ูู ุงูุชุนุจูุฑุงุช ุ ููุชู ุงูููุฏ ุ ูุงูููุงุฆู ุ ููุง ุดุงุจู ุฐูู ุ ุงูุนูุงุตุฑ ุงูููููุฉ ููุดุฌุฑุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ูุฌูุฉ ูุธุฑ ุงููุชุฑุฌููู ุ ูู ุดูุก ููุงุณู ููุง ุ ุฃูุตุญ ุฌููุน ุงูููุชููู ุจููุงุณูููุงุช ูุฐุง ุงูููุน - </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชุงุจ ุงูุชููู</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุญู ููุถู ูุฏูุง. </font><font style="vertical-align: inherit;">ุฏุนููุง ูููู ูุธุฑุฉ ุนูู ูุซุงู ููุฏ ุจุณูุท ูููู ูุฑุงู ุงููุญูู. </font><font style="vertical-align: inherit;">ุนูุงูุฉ ุนูู ุฐูู ุ ุณูููู ููุงู ุงูุนุฏูุฏ ูู ุงูุตูุฑ ูู ุฃุฏุงุฉ ุชุตูุฑ ุงูุดุฌุฑุฉ ุงูุฏุงุฎููุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุงููุงูุน ุ ูุซุงู:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">f</span><span class="hljs-params">(<span class="hljs-keyword">int</span> a, <span class="hljs-keyword">int</span> b)</span>
</span>{
  <span class="hljs-keyword">return</span> a + b;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุณุชุจุฏู ูุฐู ุงููุธููุฉ ุงูุจุณูุทุฉ ุจุนุฏ ุงููุนุงูุฌุฉ ุจูุงุณุทุฉ ุงููุญูู ุงููุบูู ููุง ููู (ูุชู ุชูููุฒ ุงูุนูุฏ ุบูุฑ ุงูุทุฑููุฉ ุจุงูููู ุงูุฃุตูุฑ):</font></font><br>
<br>
<p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/eo/nj/od/eonjodrufyrv6p3w2riiysnfnpo.png" alt="ุตูุฑุฉ 6"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐุง ุงูุฑุฃู ูู ุฅูุฌุงุจูุงุชู ูุณูุจูุงุชู ุ ูุงูุฃุฎูุฑุฉ ุ ูู ุฑุฃูู ุ ุฃูุซุฑ ููููุงู. ูููู ุฏุนููุง ูููู ูุธุฑุฉ ุนูู ุงูุดุฌุฑุฉ. ูู ุจุงูุญุฌุฒ ุนูู ุงูููุฑ ุจุฃูู ุฒุงุฆุฏุฉ ุฅูู ุญุฏ ูุง ุ ุนูู ุณุจูู ุงููุซุงู ุ ูุฃูู ูุญุชูู ุนูู ุนูุงูุงุช ุชุฑููู ูุฃููุงุณ. ูู ูุฌูุฉ ูุธุฑ ุงูุชุฌููุน ุ ูุฐู ููุงูุฉ ุบูุฑ ุถุฑูุฑูุฉ ุ ูููู ูุญุชุงุฌ ุงููุญูู ุฃุญูุงููุง ุฅูู ูุฐู ุงููุนูููุงุช ูุจุนุถ ููุงุนุฏ ุงูุชุดุฎูุต. ุจูุนูู ุขุฎุฑ ุ ูุง ูุนูู ุงููุญูู ูุน ุดุฌุฑุฉ ุจูุงุก ุงูุฌููุฉ ุงููุฌุฑุฏุฉ (AST) ุ ูููู ูุน </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุดุฌุฑุฉ ุงูุชุญููู</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (DT). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชููู ุงูุดุฌุฑุฉ ูู ุงููุณุงุฑ ุฅูู ุงููููู ููู ุงูุฃุนูู ุฅูู ุงูุฃุณูู. ุชุญุชูู ุงูุนูุฏ ุงูุชุงุจุนุฉ ุงููุณุฑู ุฏุงุฆููุง ุนูู ุดูุก ุฐู ูุบุฒู ุ ูุซู ุงูููุณุฏูู. ุฅุฐุง ูุธุฑุช ุฅูู ุงููููู ุ </font><i><font style="vertical-align: inherit;">ูุณูุฑู</font></i><font style="vertical-align: inherit;"> ุงููุญุทุงุช ุงููุณูุทุฉ ุงููุชูุณุทุฉ ุงููููุฒุฉ ุจูููุฉ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NonLeaf</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุฅููุง ูุทููุจุฉ ููุท ุญุชู ุชุญุชูุธ ุงูุดุฌุฑุฉ ุจุจููุชูุง. </font><font style="vertical-align: inherit;">ุจุงููุณุจุฉ ูุงุญุชูุงุฌุงุช ุงูุชุญููู ุ ูุง ุชุญูู ูุฐู ุงูุนูุฏ ุฃู ุญูู ูููุนูููุงุช. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจูููุง ุณูููู ููุชููู ุจุงูุฌุฒุก ุงูุฃูุณุฑ ูู ุงูุดุฌุฑุฉ. </font><font style="vertical-align: inherit;">ูุง ูู ูู ุตูุฑุฉ ููุฑุจุฉ ุฃูุจุฑ:</font></font><br>
<br>
<p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/vf/gm/ku/vfgmku_i7oq4oakzu_2gnowmfk8.png" alt="ุตูุฑุฉ 10"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุชููุฒ ูุฐุง ุงูุฅุนูุงู. </font><font style="vertical-align: inherit;">ุงูุนูุฏุฉ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฃุตููุฉ PtreeDeclarator</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ูุงุฆู ููููู ูู ุฎูุงูู ุงููุตูู ุฅูู ุงูุนูุฏ ุจุงุณู ุงููุธููุฉ ููุนููุงุชูุง. </font><font style="vertical-align: inherit;">ููุง ูููู ุจุชุฎุฒูู ุงูุชูููุน ุงููุดูุฑ ููุธุงู ุงูููุน. </font><font style="vertical-align: inherit;">ูุจุฏู ูู ุฃู ูุฐู ุงูุตูุฑุฉ ูุฑุฆูุฉ ุฌุฏูุง ุ ููู ุงูุณูู ุฌุฏูุง ููุงุฑูุฉ ุนูุงุตุฑ ุงูุดุฌุฑุฉ ุจุงูุฑูุฒ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชุจุฏู ุณููุฉ ุ ุฃููุณ ูุฐููุ </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุชูุถูุญ ุ ููุฃุฎุฐ ูุซุงูุงู ุฃุจุณุท. </font><font style="vertical-align: inherit;">ุชุฎูู ุฃู ูุฏููุง ููุฏูุง ูุณุชุฏุนู ูุธููุชูุง </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">f</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="cpp hljs">f(<span class="hljs-number">42</span>, <span class="hljs-number">23</span>);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุณูุจุฏู ุงุณุชุฏุนุงุก ุฏุงูุฉ ูู ุงูุดุฌุฑุฉ ููุง ููู:</font></font><br>
<br>
<p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/mf/jx/r2/mfjxr27uqexjmd3olssajdys7lw.png" alt="ุตูุฑุฉ 12"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุจููุฉ ูุชุดุงุจูุฉ ููุบุงูุฉ ุ ููุง ููุท ูุฑู ุงุณุชุฏุนุงุก ุฏุงูุฉ ุจุฏูุงู ูู ุฅุนูุงููุง. ูููุชุฑุถ ุงูุขู ุฃููุง ุฃุฑุฏูุง ุฃู ูุฑุงุฌุน ูู ุงูุญุฌุฌ ูููุนู ุดูุฆูุง ูุน ูู ูููุง. ูุฐู ูููุฉ ุญููููุฉ ุชูุฌุฏ ุบุงูุจูุง ูู ููุฏ ุงููุญูู. ูู ุงููุงุถุญ ุฃู ูู ุดูุก ูุง ููุชุตุฑ ุนูู ุงูุญุฌุฌ ุ ููุฌุจ ูุฑุฒ ุฃููุงุน ุงูุนูุฏ ุงููุฎุชููุฉ ุ ูููู ุงูุขู ุณููุธุฑ ูู ูุฐุง ุงููุซุงู ุงููุญุฏุฏ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุชุฑุถ ุฃู ูุฏููุง ููุท ูุคุดุฑ ุฅูู ุงูุนูุฏุฉ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FUNCALL</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฃุตู </font><font style="vertical-align: inherit;">. ูู ุฃู ูุญุทุฉ ุบูุฑ ุทุฑููุฉ ุ ูููููุง ุงูุญุตูู ุนูู ุงูุนูุฏ ุงููุฑุนูุฉ ุงููุณุฑู ูุงููููู. ููุน ูู ูููู ูุนุฑูู. ูุญู ูุนุฑู ุจููุฉ ุงูุดุฌุฑุฉ ุ ุญุชู ูุชููู ูู ุงููุตูู ุนูู ุงูููุฑ ุฅูู ุงูุนูุฏุฉ ุงูุชู ุชููู ุจููุฌุจูุง ูุงุฆูุฉ ุงูุญุฌุฌ - ูุฐู ูู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NonLeaf</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ุงูุชู ุชููู ูููุง ุงููุญุทุฉ ูู ุงูุตูุฑุฉ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">42</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูุง ูุนุฑู ุนุฏุฏ ุงูุญุฌุฌ ููุฏููุง ุ ูููุงู ููุงุตู ูู ุงููุงุฆูุฉ ูุง ุชูููุง ูู ูุฐู ุงูุญุงูุฉ ุนูู ุงูุฅุทูุงู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููู ุณููุนู ุฐููุ </font><font style="vertical-align: inherit;">ูุงุตู ุงููุฑุงุกุฉ.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุตูุน ุฏุฑุงุฌุงุช</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุจุฏู ุฃู ุงูุชูุฑุงุฑ ูู ุฎูุงู ุดุฌุฑุฉ ุจุณูุท ููุบุงูุฉ. ุชุญุชุงุฌ ููุท ุฅูู ูุชุงุจุฉ ูุธููุฉ ูู ุดุฃููุง ุงูููุงู ุจุฐูู ุ ูุงุณุชุฎุฏุงููุง ูู ูู ููุงู. ูู ุงููููู ุชูุฑูุฑูุง ูุงูุฏุง ูุญุฌุฉ ููุชุนุงูู ูุน ูู ุนูุตุฑ. ุณูููู ุงูุฃูุฑ ูุฐูู ุญููุง ุ ุฅู ูู ููู ูุจุนุถ ุงููุฑูู ุงูุฏูููุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃููุงู ุ ุงูุชุฌูู ูู ุดุฌุฑุฉ ูู ูู ูุฑุฉ ูุฌุจ ุฃู ูููู ูุฎุชูููุง ููููุงู. ูุฎุชูู ููุทู ูุนุงูุฌุฉ ูู ุนูุฏุฉ ุ ููุฐูู ููุทู ุงูุนูู ูุน ุงููุงุฆูุฉ ุจุฃููููุง. ูููุชุฑุถ ุ ูู ุญุงูุฉ ูุงุญุฏุฉ ุ ุฃููุง ูุฑูุฏ ูุฑุงุฌุนุฉ ูุณูุทุงุช ุงููุงุฆูุฉ ูุชูุฑูุฑ ูู ูููุง ุฅูู ูุธููุฉ ูุนููุฉ ูููุนุงูุฌุฉ. ูู ุญุงูุฉ ุฃุฎุฑู ุ ูุฑูุฏ ุชุญุฏูุฏ ูุฅุฑุฌุงุน ูุณูุทุฉ ูุงุญุฏุฉ ุชูุจู ุจุนุถ ุงููุชุทูุจุงุช. ุฃู ูู ุจุชุตููุฉ ุงููุงุฆูุฉ ูุชุฌุงูู ุฃู ุนูุงุตุฑ ุบูุฑ ูุซูุฑุฉ ููุงูุชูุงู ูููุง.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุซุงูููุง ุ ุชุญุชุงุฌ ุฃุญูุงููุง ุฅูู ูุนุฑูุฉ ููุฑุณ ุงูุนูุตุฑ ุงูุญุงูู. </font><font style="vertical-align: inherit;">ุนูู ุณุจูู ุงููุซุงู ุ ูุฑูุฏ ูุนุงูุฌุฉ ุงููุณูุทุชูู ุงูุฃููููู ููุท ูุงูุชููู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุซุงูุซูุง ุ ุฏุนูุง ูุชุทุฑู ุฅูู ูุซุงู ุงููุธููุฉ. </font><font style="vertical-align: inherit;">ูููุชุฑุถ ุฃู ูุฏููุง ุฑูุฒูุง ูุซู ูุฐุง:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">f</span><span class="hljs-params">(<span class="hljs-keyword">int</span> a, <span class="hljs-keyword">int</span> b)</span>
</span>{
  <span class="hljs-keyword">int</span> c = a + b;<font></font>
  c *= <span class="hljs-number">2</span>;
  <span class="hljs-keyword">if</span> (c &lt; <span class="hljs-number">42</span>) <span class="hljs-keyword">return</span> c;
  <span class="hljs-keyword">return</span> <span class="hljs-number">42</span>;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃุนุฑู ุฃู ูุฐุง ุงูุฑูุฒ ุบุจู ุ ููู ุฏุนูุง ูุฑูุฒ ุงูุขู ุนูู ููููุฉ ุธููุฑ ุงูุดุฌุฑุฉ. </font><font style="vertical-align: inherit;">ููุฏ ุฑุฃููุง ุจุงููุนู ุฅุนูุงู ูุธููุฉ ุ ูููุง ูุญุชุงุฌ ุฅูู ุฌุณูู:</font></font><br>
<br>
<p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/f0/q6/hs/f0q6hsldd42blwuenxmv2t6vl7o.png" alt="ุตูุฑุฉ 4"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐู ุงูุญุงูุฉ ูุซู ูุงุฆูุฉ ุงูุญุฌุฌ ุ ูููู ูุฏ ุชูุงุญุธ ุจุนุถ ุงูุงุฎุชูุงู. </font><font style="vertical-align: inherit;">ุฃูู ูุธุฑุฉ ุฃุฎุฑู ุนูู ุงูุตูุฑุฉ ูู ุงููุณู ุงูุณุงุจู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ูุงุญุธุชุ </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐุง ุตุญูุญ ุ ูุง ุชูุฌุฏ ููุงุตู ูู ูุฐู ุงููุงุฆูุฉ ุ ููุง ูุนูู ุฃูู ููููู ูุนุงูุฌุชูุง ุนูู ุงูุชูุงูู ููุง ุชููู ุจุดุฃู ุชุฎุทู ุงูููุงุตู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุงููุฌููุน ุ ูุฏููุง ุญุงูุชุงู ุนูู ุงูุฃูู:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงุฆูุฉ ูููุตูุฉ.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุงุฆูุฉ ุงููุงููุฉ.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุขู ุฏุนููุง ูุฑู ููู ูุญุฏุซ ูู ูุฐุง ูู ููุฏ ุงููุญูู. ููุง ูุซุงู ุนูู ุงุฌุชูุงุฒ ูุงุฆูุฉ ูู ุงูุญุฌุฌ. ูุฐู ูุณุฎุฉ ูุจุณุทุฉ ูู ุฅุญุฏู ูุธุงุฆู ุงููุชุฑุฌู.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">ProcessArguments</span><span class="hljs-params">(Ptree* arglist)</span>
</span>{
  <span class="hljs-keyword">if</span> (!arglist) <span class="hljs-keyword">return</span>;<font></font>
<font></font>
  Ptree* args = Second(arglist);<font></font>
  <span class="hljs-keyword">while</span> (args)<font></font>
  {<font></font>
    Ptree* p = args-&gt;Car();<font></font>
    <span class="hljs-keyword">if</span> (!Eq(p, <span class="hljs-string">','</span>))<font></font>
    {<font></font>
      ProcessArg(p);<font></font>
    }<font></font>
<font></font>
    args = args-&gt;Cdr();<font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅุฐุง ููุช ุชุฏูุน ูู ุฏููุงุฑูุง ูู ูู ูุฑุฉ ุฃุฑู ูููุง ุฑูุฒูุง ูุดุงุจููุง ุ ูุณุฃููู ุบููุฉ ุจุงููุนู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฏุนูุง ูุฑู ูุง ูุญุฏุซ ููุง. ูุฌุจ ุฃู ุฃููู ุนูู ุงูููุฑ ุฃู ูุฐุง ุงูุฑูุฒ ูุฏูู ุฌุฏูุง ููุชูุจ ูุจู ูุชุฑุฉ ุทูููุฉ ุญุชู C ++ 11 ุ ูุงููู ุนู ุงููุนุงููุฑ ุงูุญุฏูุซุฉ. ูููููุง ุงูููู ุฃููู ุจุญุซุช ุนูู ูุฌู ุงูุชุญุฏูุฏ ุนู ุฌุฒุก ูู ุฃููุงุช ุงูุญุถุงุฑุงุช ุงููุฏููุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐุง ุ ุฃููุงู ุ ุชูุจู ูุฐู ุงูุฏุงูุฉ ูุงุฆูุฉ ุงูุญุฌุฌ ุจูู ููุณูู ููุฏุฎูุงุช. ุดูุก ูู ูุฐุง ุงููุจูู: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
(42 ุ 23) </font><font style="vertical-align: inherit;">ูุชู ุงุณุชุฏุนุงุก </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงููุธููุฉ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุซุงููุฉ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุง ููุญุตูู ุนูู ูุญุชููุงุช ุงูุฃููุงุณ. ูู ูุง ุชูุนูู ูู ุงูุชุญุฑู ูุฑุฉ ูุงุญุฏุฉ ุฅูู ุงููููู ุซู ูุฑุฉ ูุงุญุฏุฉ ุฅูู ุงููุณุงุฑ ูู ุฎูุงู ุดุฌุฑุฉ ุซูุงุฆูุฉ. ุจุนุฏ ุฐูู ุ ุชุญุตู ุงูุญููุฉ ุนูู ุงูุนูุงุตุฑ ุจุงูุชุณูุณู: 42 ุ ุซู ูุงุตูุฉ ุ ุซู 23 ุ ููู ุงูุฎุทูุฉ ุงูุชุงููุฉ ุ ูุคุดุฑ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููุณ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุตุจุญ ุตูุฑูุง ูุฃููุง ูุตู ุฅูู ููุงูุฉ ุงููุฑุน. ุชุชุฎุทู ุงูุญููุฉ ุ ุจุงูุทุจุน ุ ุงูููุงุตู ุบูุฑ ุงููุซูุฑุฉ ููุงูุชูุงู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููู ุงูุนุซูุฑ ุนูู ูุธุงุฆู ูุดุงุจูุฉ ุฐุงุช ููุทู ูุชุบูุฑ ููููุงู ูู ุงูุนุฏูุฏ ูู ุงูุฃูุงูู ุ ุฎุงุตุฉู ูู ุงูุฑูุฒ ุงููุฏูู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุซุงู ุขุฎุฑ. ููู ุฃุนุฑู ุฅุฐุง ูุงู ููุงู ุงุณุชุฏุนุงุก ููุธููุฉ ูุนููุฉ ูู ูุชูุฉ ูุนููุฉ ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉุ ูุซู ูุฐุง:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">IsFunctionCalled</span><span class="hljs-params">(<span class="hljs-keyword">const</span> Ptree* body, <span class="hljs-built_in">std</span>::string_view name)</span>
</span>{
  <span class="hljs-keyword">if</span> (!arglist) <span class="hljs-keyword">return</span>;<font></font>
<font></font>
  <span class="hljs-keyword">const</span> Ptree* statements = body;
  <span class="hljs-keyword">while</span> (statements)<font></font>
  {<font></font>
    <span class="hljs-keyword">const</span> Ptree* cur = statements-&gt;Car();
    <span class="hljs-keyword">if</span> (IsA(cur, ntExprStatement) &amp;&amp; IsA(cur-&gt;Car(), ntFuncallExpr))<font></font>
    {<font></font>
      <span class="hljs-keyword">const</span> Ptree* funcName = First(cur-&gt;Car());
      <span class="hljs-keyword">if</span> (Eq(funcName, name))
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<font></font>
    }<font></font>
<font></font>
    statements = statements-&gt;Cdr();<font></font>
  }<font></font>
  <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุญูุธุฉ. </font><font style="vertical-align: inherit;">ูุฏ ููุงุญุธ ุงููุงุฑุฆ ุงูููุธ. </font><font style="vertical-align: inherit;">ูู ุนูุฑูุ </font><font style="vertical-align: inherit;">ููุงู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">std :: string_view</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุนุตู. </font><font style="vertical-align: inherit;">ูู ุดูุก ุจุณูุท ุ ุญุชู ุฃู ุฃูุฏู ุฑูุฒ ูุชู ุฅุนุงุฏุฉ ููููุชู ุชุฏุฑูุฌููุง ููู ูุจูู ุฃู ุดูุก ูู ูุฐุง ุงููุจูู ุชุฏุฑูุฌููุง. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุณูููู ูู ุงูุฌููู ุงุณุชุฎุฏุงู ุดูุก ุฃูุซุฑ ุฃูุงูุฉ ููุง ุ ุฃููุณ ูุฐููุ </font><font style="vertical-align: inherit;">ุญุณููุง ุ ุนูู ุณุจูู ุงููุซุงู ุ ุฎูุงุฑุฒููุฉ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">find_if</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูููุงุณูุฉ </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูุง ูู ุงูุฎูุงุฑุฒููุฉ ููุงู ุ ุญุชู ุงููุณุชูุฏุฉ ุฅูู ุงููุทุงู ุงูุนุงุฏู ูู ุฃุฌู ุชุญุณูู ุงููุฑุงุกุฉ ุจุดูู ูุจูุฑ ูุชุณููู ุฏุนู ูุซู ูุฐุง ุงูุฑูุฒ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฏุนููุง ูุญุงูู ุชุญููู ุฐูู.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุถุน ุงูุดุฌุฑุฉ ูู ุงูุตูุฏูู</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฏููุง ูู ุฌุนู ุงูุดุฌุฑุฉ ุชุชุตุฑู ูุซู ุญุงููุฉ STL. </font><font style="vertical-align: inherit;">ุนูุงูุฉ ุนูู ุฐูู ุ ูุง ููุจุบู ุฃู ููุชู ุจุงูุจููุฉ ุงูุฏุงุฎููุฉ ููููุงุฆู ุ ูุฑูุฏ ุชูุฑุงุฑูุง ุจุดูู ููุญุฏ ููู ุงูุนูุฏ ุ ุนูู ุณุจูู ุงููุซุงู ุ ุนูู ุงููุญู ุงูุชุงูู:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">DoSomethingWithTree</span><span class="hljs-params">(<span class="hljs-keyword">const</span> Ptree* tree)</span>
</span>{<font></font>
  ....<font></font>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> cur : someTreeContainer)<font></font>
  {<font></font>
    ....<font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุง ุชุฑูู ุ ูุฏููุง ููุง ููุงู ูุนูู ูุณูู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">someTreeContainer</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ูุงูุฐู ูุง ูุนุฑู ุนูู ุจุนุฏ. </font><font style="vertical-align: inherit;">ูุฌุจ ุฃู ูููู ูุฐู ุงูุญุงููุฉ ุนูู ุงูุฃูู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุจุฏุก</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููุงูุฉ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฃุณุงููุจ </font><font style="vertical-align: inherit;">ุงูุชู ุงูููุฑุฑุงุช ุงูุนูุฏุฉ. </font><font style="vertical-align: inherit;">ุจุงูุญุฏูุซ ุนู ุงูุชูุฑุงุฑุงุช ุ ูุฌุจ ุฃู ุชุชุตุฑู ุฃูุถูุง ูุซู ุชูู ุงูููุงุณูุฉ. </font><font style="vertical-align: inherit;">ููุจุฏุฃ ูุนูู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุฃุจุณุท ุงูุญุงูุงุช ุ ูุจุฏู ุงูููุฑุฑ ููุง ููู:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> Node_t,
          <span class="hljs-built_in">std</span>::<span class="hljs-keyword">enable_if_t</span>&lt;<span class="hljs-built_in">std</span>::is_base_of_v&lt;Node_t, Ptree&gt;, <span class="hljs-keyword">int</span>&gt;&gt;
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PtreeIterator</span>
{</span>
<span class="hljs-keyword">public</span>:
  <span class="hljs-keyword">using</span> value_type = Node_t;
  <span class="hljs-keyword">using</span> dereference_type = value_type;
  <span class="hljs-keyword">using</span> reference = <span class="hljs-built_in">std</span>::<span class="hljs-keyword">add_lvalue_reference_t</span>&lt;value_type&gt;;
  <span class="hljs-keyword">using</span> pointer   = <span class="hljs-built_in">std</span>::<span class="hljs-keyword">add_pointer_t</span>&lt;value_type&gt;;
  <span class="hljs-keyword">using</span> difference_type =
    <span class="hljs-keyword">decltype</span>(<span class="hljs-built_in">std</span>::declval&lt;pointer&gt;() - <span class="hljs-built_in">std</span>::declval&lt;pointer&gt;());
  <span class="hljs-keyword">using</span> iterator_category = <span class="hljs-built_in">std</span>::forward_iterator_tag;<font></font>
<font></font>
<span class="hljs-keyword">public</span>:<font></font>
  PtreeIterator(Node_t* node) <span class="hljs-keyword">noexcept</span> : m_node{ node } {}<font></font>
  ....<font></font>
<font></font>
  PtreeIterator&amp; <span class="hljs-keyword">operator</span>++() <span class="hljs-keyword">noexcept</span><font></font>
  {<font></font>
    m_node = Rest(m_node);<font></font>
    <span class="hljs-keyword">return</span> *<span class="hljs-keyword">this</span>;<font></font>
  }<font></font>
  dereference_type <span class="hljs-keyword">operator</span>*() <span class="hljs-keyword">const</span> <span class="hljs-keyword">noexcept</span><font></font>
  {<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">static_cast</span>&lt;dereference_type&gt;(First(m_node));<font></font>
  }<font></font>
<font></font>
<span class="hljs-keyword">private</span>:<font></font>
  Node_t* m_node = <span class="hljs-literal">nullptr</span>;<font></font>
};</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุญุชู ูุง ุฃูุณุฏ ุงูุดูุฑุฉ ุ ุฃุฒูุช ุจุนุถ ุงูุชูุงุตูู. </font><font style="vertical-align: inherit;">ุงูููุงุท ุงูุฑุฆูุณูุฉ ููุง ูู dereference ูุงูุฒูุงุฏุฉ. </font><font style="vertical-align: inherit;">ุงููุงูุจ ูุทููุจ ุจุญูุซ ูููู ููููุฑุฑ ุงูุนูู ูุน ูู ูู ุงูุจูุงูุงุช ุงูุซุงุจุชุฉ ูุบูุฑ ุงูุซุงุจุชุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุขู ุณููุชุจ ุงูุญุงููุฉ ุงูุชู ุณูุถุน ูููุง ุนูุฏุฉ ุงูุดุฌุฑุฉ. </font><font style="vertical-align: inherit;">ุฅููู ุงูุฎูุงุฑ ุงูุฃุจุณุท:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> Node_t&gt;
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PtreeContainer</span>
{</span>
<span class="hljs-keyword">public</span>:
  <span class="hljs-keyword">using</span> Iterator = PtreeIterator&lt;Node_t&gt;;
  <span class="hljs-keyword">using</span> value_type = <span class="hljs-keyword">typename</span> Iterator::dereference_type;
  <span class="hljs-keyword">using</span> size_type  = <span class="hljs-keyword">size_t</span>;
  <span class="hljs-keyword">using</span> difference_type =
        <span class="hljs-keyword">typename</span> Iterator::difference_type;<font></font>
<font></font>
<span class="hljs-keyword">public</span>:<font></font>
  PtreeContainer(Node_t* nodes) :<font></font>
    m_nodes{ nodes }<font></font>
  {<font></font>
    <span class="hljs-keyword">if</span> (IsLeaf(m_nodes))<font></font>
    {<font></font>
      m_nodes = <span class="hljs-literal">nullptr</span>;<font></font>
    }<font></font>
  }<font></font>
<font></font>
  ....<font></font>
<font></font>
  <span class="hljs-function">Iterator <span class="hljs-title">begin</span><span class="hljs-params">()</span> <span class="hljs-keyword">const</span> <span class="hljs-keyword">noexcept</span>
  </span>{ 
    <span class="hljs-keyword">return</span> m_nodes;<font></font>
  }<font></font>
  <span class="hljs-function">Iterator <span class="hljs-title">end</span><span class="hljs-params">()</span> <span class="hljs-keyword">const</span> <span class="hljs-keyword">noexcept</span>
  </span>{ 
    <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>; <font></font>
  }<font></font>
  <span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">empty</span><span class="hljs-params">()</span> <span class="hljs-keyword">const</span> <span class="hljs-keyword">noexcept</span>
  </span>{
    <span class="hljs-keyword">return</span> begin() == end();<font></font>
  }<font></font>
<font></font>
<span class="hljs-keyword">private</span>:<font></font>
  Node_t* m_nodes = <span class="hljs-literal">nullptr</span>;<font></font>
};</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุฏ ุงูุชูููุง ุ ูููููุง ุงูุชูุฑูู ุ ุดูุฑุง ูุงูุชูุงููู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุง ุ ุงูุชุธุฑ ูุญุธุฉ. </font><font style="vertical-align: inherit;">ูุง ูููู ุฃู ูููู ุจูุฐู ุงูุจุณุงุทุฉ ุ ุฃููุณ ูุฐููุ </font><font style="vertical-align: inherit;">ุฏุนูุง ูุนูุฏ ุฅูู ุฎูุงุฑู ูุงุฆูุชูุง - ูุน ูุจุฏูู ูุญุฏุฏุงุช. </font><font style="vertical-align: inherit;">ููุง ุ ุนูุฏ ุงูุฒูุงุฏุฉ ุ ูุฃุฎุฐ ุจุจุณุงุทุฉ ุงูุนูุฏุฉ ุงูุตุญูุญุฉ ููุดุฌุฑุฉ ุ ูุฐูู ูุฐุง ูุง ูุญู ุงููุดููุฉ. </font><font style="vertical-align: inherit;">ูุง ุฒููุง ุจุญุงุฌุฉ ุฅูู ุชุฎุทู ุงูููุงุตู ุฅุฐุง ุฃุฑุฏูุง ุงูุนูู ูุน ุงูุจูุงูุงุช ููุท. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุณุช ูุดููุฉ ุ ูุญู ููุท ูุถูู ูุนููุฉ ูุงูุจ ุฅุถุงููุฉ ุฅูู ุงูููุฑุฑ. </font><font style="vertical-align: inherit;">ุฏุนูุง ูููู ูุซู ูุฐุง:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">enum</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PtreeIteratorTag</span> :</span> <span class="hljs-keyword">uint8_t</span><font></font>
{<font></font>
  Statement,<font></font>
  List<font></font>
};<font></font>
<font></font>
<span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> Node_t, PtreeIteratorTag tag,
  <span class="hljs-built_in">std</span>::<span class="hljs-keyword">enable_if_t</span>&lt;<span class="hljs-built_in">std</span>::is_base_of_v&lt;Node_t, Ptree&gt;, <span class="hljs-keyword">int</span>&gt; = <span class="hljs-number">0</span>&gt;<font></font>
class PtreeIterator { .... };</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููู ุณูุณุงุนุฏูุง ุฐููุ </font><font style="vertical-align: inherit;">ุงุจุชุฏุงุฆู. </font><font style="vertical-align: inherit;">ุณูู ูุชุญูู ูู ูุฐู ุงููุนููุฉ ุจุฒูุงุฏุงุช ููุชุตุฑู ููููุง ูุฐูู. </font><font style="vertical-align: inherit;">ูุญุณู ุงูุญุธ ุ ูู C ++ 17 ูููููุง ุญู ูุฐุง ูู ูุฑุญูุฉ ุงูุชุฌููุน ุจุงุณุชุฎุฏุงู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจูุงุก if constexpr</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="cpp hljs">PtreeIterator&amp; <span class="hljs-keyword">operator</span>++() <span class="hljs-keyword">noexcept</span><font></font>
{<font></font>
  <span class="hljs-function"><span class="hljs-keyword">if</span> <span class="hljs-title">constexpr</span> <span class="hljs-params">(tag == PtreeIteratorTag::Statement)</span>
  </span>{<font></font>
    m_node = Rest(m_node);<font></font>
  }<font></font>
  <span class="hljs-keyword">else</span><font></font>
  {<font></font>
    m_node = RestRest(m_node);<font></font>
  }<font></font>
  <span class="hljs-keyword">return</span> *<span class="hljs-keyword">this</span>;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐุง ุฃูุถู ุ ุงูุขู ูููููุง ุงุฎุชูุงุฑ ููุฑุฑ ูุชูุงุณุจ ุงุญุชูุงุฌุงุชูุง. </font><font style="vertical-align: inherit;">ูุงุฐุง ุชูุนู ุจุงูุญุงููุงุชุ </font><font style="vertical-align: inherit;">ููููู ุ ุนูู ุณุจูู ุงููุซุงู ุ ูุง ููู:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> Node_t, PtreeIteratorTag tag&gt;
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PtreeContainer</span>
{</span>
<span class="hljs-keyword">public</span>:
  <span class="hljs-keyword">using</span> Iterator = PtreeIterator&lt;Node_t, tag&gt;;<font></font>
  ....<font></font>
};</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุขู ุ ูู ุงูุชูููุง ุจุงูุชุฃููุฏุ </font><font style="vertical-align: inherit;">ูู ุงููุงูุน ุ ููุณ ุญููุง.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููู ูุฐุง ููุณ ูู ุดูุก</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฏุนููุง ูููู ูุธุฑุฉ ุนูู ูุฐุง ุงูุฑูุฒ:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">ProcessEnum</span><span class="hljs-params">(Ptree* argList, Ptree* enumPtree)</span>
</span>{
  <span class="hljs-keyword">const</span> <span class="hljs-keyword">ptrdiff_t</span> argListLen = Length(argList);
  <span class="hljs-keyword">if</span> (argListLen &lt; <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span>;<font></font>
<font></font>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">ptrdiff_t</span> i = <span class="hljs-number">0</span>; i &lt; argListLen; ++i)<font></font>
  {<font></font>
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span> name;<font></font>
    Ptree* elem;<font></font>
<font></font>
    <span class="hljs-keyword">const</span> EGetEnumElement r = GetEnumElementInfo(enumPtree, i, elem, name);<font></font>
    ....<font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃูุง ุญููุง ูุง ุฃุญุจ ุงููุซูุฑ ูู ูุฐุง ุงูุฑูุฒ ุ ุจุฏุกูุง ูู ุงูุญููุฉ ูุน ุงูุนุฏุงุฏ ุ ูุงูุชูุงุกู ุจุญูููุฉ ุฃู ูุธููุฉ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GetEnumElementInfo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุจุฏู ูุฑูุจุฉ ููุบุงูุฉ. </font><font style="vertical-align: inherit;">ุงูุขู ูุจูู ูุฑุจุนูุง ุฃุณูุฏ ุจุงููุณุจุฉ ููุง ุ ูููู ูููููุง ุฃู ููุชุฑุถ ุฃูู ูุฃุฎุฐ ุนูุตุฑ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุนุฏุงุฏ ุจุงูููุฑุณ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุนูุฏ ุงุณูู ูุงูุนูุฏุฉ ูู ุงูุดุฌุฑุฉ ูู ุฎูุงู ูุนููุงุช ุงูุฅุฎุฑุงุฌ. </font><font style="vertical-align: inherit;">ุงููููุฉ ุงููุฑุชุฌุนุฉ ุบุฑูุจุฉ ุจุนุถ ุงูุดูุก. </font><font style="vertical-align: inherit;">ุฏุนููุง ูุชุฎูุต ููู ุชูุงููุง - ูุธููุฉ ูุซุงููุฉ ูููุฑุฑ ุงููุงุฆูุฉ ูุฏููุง:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">ProcessEnum</span><span class="hljs-params">(<span class="hljs-keyword">const</span> Ptree* argList)</span>
</span>{
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> elem : PtreeContainer&lt;<span class="hljs-keyword">const</span> Ptree, PtreeIteratorTag::List&gt;(argList))<font></font>
  {<font></font>
    <span class="hljs-keyword">auto</span> name = PtreeToString(elem);<font></font>
    ....<font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุณ ุณูุฆุง. </font><font style="vertical-align: inherit;">ูุง ูุชู ุชุฑุฌูุฉ ูุฐุง ุงูุฑูุฒ ููุท. </font><font style="vertical-align: inherit;">ููุงุฐุง ุงุ </font><font style="vertical-align: inherit;">ูุฃูู ุชู ุงุณุชุฎุฏุงู ุงูููุฑุณ ุงูุฐู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุฒููุงู</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู </font><i><font style="vertical-align: inherit;">ูุต</font></i><font style="vertical-align: inherit;"> ุงูุญููุฉ ุฃุณูู ุงุณุชุฏุนุงุก </font><i><font style="vertical-align: inherit;">GetEnumElementInfo</font></i><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ูู ุฃููู ููุง ุจุงูุถุจุท ููู ุชู ุงุณุชุฎุฏุงููุง ุ ูุฃููุง ููุณุช ูููุฉ ุงูุขู. </font><font style="vertical-align: inherit;">ูููู ุฃู ูููู ุฃู ููุงู ุญุงุฌุฉ ุฅูู ููุฑุณ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุญุณููุง ุ ุฏุนูุง ูุถูู ูุชุบูุฑูุง ูููุณุฏ ุฑูุฒูุง ุงูุฌููู:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">ProcessEnum</span><span class="hljs-params">(<span class="hljs-keyword">const</span> Ptree* argList)</span>
</span>{
  <span class="hljs-keyword">size_t</span> i = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> elem : PtreeContainer&lt;<span class="hljs-keyword">const</span> Ptree, PtreeIteratorTag::List&gt;(argList))<font></font>
  {<font></font>
    <span class="hljs-keyword">auto</span> name = PtreeToString(elem);<font></font>
    ....<font></font>
    UseIndexSomehow(i++);<font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุง ูุฒุงู ุฎูุงุฑูุง ุนููููุง ุ ูููู ุฃุชูุงุนู ุดุฎุตููุง ูุน ุดูุก ููุฐุง:</font></font><br>
<br>
<p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/ov/11/ie/ov11ieyylfaa2qjppdyjjo-yljy.png" alt="ุตูุฑุฉ 7"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุญุณููุง ุ ุฏุนูุง ูุญุงูู ุญู ูุฐู ุงููุดููุฉ. </font><font style="vertical-align: inherit;">ูุญุชุงุฌ ุฅูู ุดูุก ููููู ุญุณุงุจ ุงูุนูุงุตุฑ ุชููุงุฆููุง. </font><font style="vertical-align: inherit;">ุฅุถุงูุฉ ููุฑุฑ ูุน ุนุฏุงุฏ. </font><font style="vertical-align: inherit;">ุชุฎุทูุช ูุฑุฉ ุฃุฎุฑู ุงูุชูุงุตูู ุงูุฅุถุงููุฉ ููุฅูุฌุงุฒ:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> Node_t, PtreeIteratorTag tag,
  <span class="hljs-built_in">std</span>::<span class="hljs-keyword">enable_if_t</span>&lt;<span class="hljs-built_in">std</span>::is_base_of_v&lt;Node_t, Ptree&gt;, <span class="hljs-keyword">int</span>&gt;&gt;
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PtreeCountingIterator</span>
{</span>
<span class="hljs-keyword">public</span>:
  <span class="hljs-keyword">using</span> size_type = <span class="hljs-keyword">size_t</span>;
  <span class="hljs-keyword">using</span> value_type = Node_t;
  <span class="hljs-keyword">using</span> dereference_type = <span class="hljs-built_in">std</span>::pair&lt;value_type, size_type&gt;;
  <span class="hljs-keyword">using</span> reference = <span class="hljs-built_in">std</span>::<span class="hljs-keyword">add_lvalue_reference_t</span>&lt;value_type&gt;;
  <span class="hljs-keyword">using</span> pointer = <span class="hljs-built_in">std</span>::<span class="hljs-keyword">add_pointer_t</span>&lt;value_type&gt;;
  <span class="hljs-keyword">using</span> difference_type =
        <span class="hljs-keyword">decltype</span>(<span class="hljs-built_in">std</span>::declval&lt;pointer&gt;() - <span class="hljs-built_in">std</span>::declval&lt;pointer&gt;());
  <span class="hljs-keyword">using</span> iterator_category = <span class="hljs-built_in">std</span>::forward_iterator_tag;<font></font>
<font></font>
<span class="hljs-keyword">public</span>:<font></font>
  PtreeCountingIterator(Node_t* node) <span class="hljs-keyword">noexcept</span> : m_node{ node } {}<font></font>
  ....<font></font>
<font></font>
  PtreeCountingIterator&amp; <span class="hljs-keyword">operator</span>++() <span class="hljs-keyword">noexcept</span><font></font>
  {<font></font>
    <span class="hljs-function"><span class="hljs-keyword">if</span> <span class="hljs-title">constexpr</span> <span class="hljs-params">(tag == PtreeIteratorTag::Statement)</span>
    </span>{<font></font>
      m_node = Rest(m_node);<font></font>
    }<font></font>
    <span class="hljs-keyword">else</span><font></font>
    {<font></font>
      m_node = RestRest(m_node);<font></font>
    }<font></font>
<font></font>
    ++m_counter;<font></font>
    <span class="hljs-keyword">return</span> *<span class="hljs-keyword">this</span>;<font></font>
  }<font></font>
<font></font>
  dereference_type <span class="hljs-keyword">operator</span>*() <span class="hljs-keyword">const</span> <span class="hljs-keyword">noexcept</span><font></font>
  {<font></font>
    <span class="hljs-keyword">return</span> { <span class="hljs-keyword">static_cast</span>&lt;value_type&gt;(First(m_node)), counter() };<font></font>
  }<font></font>
<font></font>
<span class="hljs-keyword">private</span>:<font></font>
  Node_t* m_node = <span class="hljs-literal">nullptr</span>;<font></font>
  size_type m_counter = <span class="hljs-number">0</span>;<font></font>
};</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุขู ูููููุง ูุชุงุจุฉ ูุฐุง ุงูุฑูุฒ ุ ุฃููุณ ูุฐููุ</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">ProcessEnum</span><span class="hljs-params">(<span class="hljs-keyword">const</span> Ptree* argList)</span>
</span>{
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> [elem, i] :<font></font>
            PtreeCountedContainer&lt;<span class="hljs-keyword">const</span> Ptree, PtreeIteratorTag::List&gt;(argList))<font></font>
  {<font></font>
    <span class="hljs-keyword">auto</span> name = PtreeToString(elem);<font></font>
    ....<font></font>
    UseIndexSomehow(i);<font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุดูู ุนุงู ุ ูููููุง ุฐูู ุญููุง ุ ูููู ููุงู ูุดููุฉ ูุงุญุฏุฉ. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุธุฑุช ุฅูู ูุฐุง ุงูุฑูุฒ ุ ููุฏ ุชูุงุญุธ ุฃููุง ูุฏููุง โโููุงููุง ุขุฎุฑ - ุดูุก ุงุณูู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PtreeCountedContainer</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ูุจุฏู ุฃู ุงููุถุน ูุฒุฏุงุฏ ุชุนููุฏูุง. </font><font style="vertical-align: inherit;">ูุง ุฃุฑุบุจ ูู ุงูุชูุงุนุจ ุจุฃููุงุน ูุฎุชููุฉ ูู ุงูุญุงููุงุช ุ ูุจุงููุธุฑ ุฅูู ุฃููุง ูุชุดุงุจูุฉ ูู ุงูุฏุงุฎู ุ ุชุตู ุงููุฏ ููุณูุง ุฅูู ูุงูููุฉ ุญูุงูุฉ Occam. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุณูุชุนูู ุนูููุง ุงุณุชุฎุฏุงู ููุฑุฑ ููุนููุฉ ูุงูุจ ููุญุงููุฉ ุ ูููู ุงููุฒูุฏ ุนู ุฐูู ูุงุญููุง.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃููุงุน ุญุฏููุฉ ุงูุญููุงู</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุดุชุช ุนู ุนุฏุงุฏุงุช ูุฃุตูุงู ุงูุชูุฑุงุฑ ููุฏุฉ ุฏูููุฉ. </font><font style="vertical-align: inherit;">ูู ุงูุณุนู ูุฑุงุก ุชุฌุงูุฒ ุนุงููู ููุนูุฏ ุ ูุณููุง ุฃูู ุดูุก - ุงูุดุฌุฑุฉ ููุณูุง. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃูู ูุธุฑุฉ ุนูู ูุฐุง ุงูุฑูุฒ:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">int</span> a, b, c = <span class="hljs-number">0</span>, d;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุง ูุฑุงู ูู ุงูุดุฌุฑุฉ:</font></font><br>
<br>
<p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/mi/cq/sh/micqshmftdnb7xstjo71sng02s4.png" alt="ุตูุฑุฉ 13"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฏุนูุง ุงูุขู ููุฑุฑ ูุงุฆูุฉ ุงููุฐูุนูู ุ ูููู ุฃููุงู ุณุฃุฎุจุฑู ุจุดูุก ุขุฎุฑ ุนู ุงูุดุฌุฑุฉ. </font><font style="vertical-align: inherit;">ุทูุงู ุงูููุช ูุจู ุฐูู ุ ููุง ูุชุนุงูู ูุน ูุคุดุฑ ููุฆุฉ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ptree</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ูุฐู ูู ุงููุฆุฉ ุงูุฃุณุงุณูุฉ ุงูุชู ูุชู ูุฑุงุซุฉ ุฌููุน ุฃููุงุน ุงูุนูุฏ ุงูุฃุฎุฑู ูููุง. </font><font style="vertical-align: inherit;">ูู ุฎูุงู ูุงุฌูุงุชูู ูููููุง ุงูุญุตูู ุนูู ูุนูููุงุช ุฅุถุงููุฉ. </font><font style="vertical-align: inherit;">ุนูู ูุฌู ุงูุฎุตูุตุ ูููู ููุงูุนููู ุนูุฏุฉ ูู ุงูุตูุฑุฉ ูุนูุฏ ููุง ูุงุฆูุฉ ุงููุนูููู ุฏูู ุงุณุชุฎุฏุงู ุงููุธุงุฆู ุฐุงุช ุงููููุนุฉ ูุซู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฃููู</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุซุงููุฉ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ุฃูุถุง ุ ูุญู ูุง ูุญุชุงุฌ ุฅูู ุทุฑู ููุฎูุถุฉ ุงููุณุชูู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Car</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cdr</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (ูุฑุญุจุง ููุญุจู ูุบุฉ Lisp). </font><font style="vertical-align: inherit;">ูุฐุง ุฃูุฑ ุฌูุฏ ููุบุงูุฉ ุ ูุฃูู ูู ุงูุชุดุฎูุต ูููููุง ุชุฌุงูู ุชูููุฐ ุงูุดุฌุฑุฉ. </font><font style="vertical-align: inherit;">ุฃุนุชูุฏ ุฃู ุงูุฌููุน ููุงูู ุนูู ุฃู ุงูุชุฌุฑูุฏ ุงูุญุงูู ุณูุก ููุบุงูุฉ.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐู ูู ุงูุทุฑููุฉ ุงูุชู ูุจุฏู ุจูุง ุชุฌุงูุฒ ุฌููุน ุงููุฐูุนูู:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">ProcessDecl</span><span class="hljs-params">(<span class="hljs-keyword">const</span> PtreeDeclarator* decl)</span> </span>{ .... }<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">ProcessDeclarators</span><span class="hljs-params">(<span class="hljs-keyword">const</span> PtreeDeclaration* declaration)</span>
</span>{
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> decl : declaration-&gt;GetDeclarators())<font></font>
  {<font></font>
    ProcessDecl(<span class="hljs-keyword">static_cast</span>&lt;<span class="hljs-keyword">const</span> PtreeDeclarator*&gt;(decl));<font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฑุฌุงุน </font><font style="vertical-align: inherit;">
ุงูุฃุณููุจ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GetDeclarators</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุญุงููุฉ ูุงุจูุฉ </font><i><font style="vertical-align: inherit;">ููุชูุฑุงุฑ</font></i><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ููุนู ูู ูุฐู ุงูุญุงูุฉ ูู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PtreeContainer &lt;const Ptree ุ PtreeIteratorTag :: List&gt;</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุน ูุฐุง ุงูุฑูุฒ ุ ุณูููู ูู ุดูุก ุนูู ูุง ูุฑุงู ุฅู ูู ููู ูุทุงูู ุงูุชูุซูู. </font><font style="vertical-align: inherit;">ูุงูุญูููุฉ ูู ุฃู ุงูุฏุงูุฉ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ProcessDecl</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุฑูุฏ ูุคุดุฑูุง ููุฆุฉ ูุดุชูุฉ ูู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ptree</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ููู </font><i><font style="vertical-align: inherit;">ุงูุชูุฑุงุฑุงุช ุงูุฎุงุตุฉ</font></i><font style="vertical-align: inherit;"> ุจูุง ูุง ุชุนุฑู ุดูุฆูุง ุนููุง. </font><font style="vertical-align: inherit;">ุฃูุฏ ุงูุชุฎูุต ูู ุงูุญุงุฌุฉ ุฅูู ุชุญููู ุงูุฃููุงุน ูุฏูููุง. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุจุฏู ุฃู ุงูููุช ูุฏ ุญุงู ูุชุบููุฑ ุงูููุฑุฑ ูุฑุฉ ุฃุฎุฑู ูุฅุถุงูุฉ ุงููุฏุฑุฉ ุนูู ุงูุฅุฑุณุงู.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> Node_t, <span class="hljs-keyword">typename</span> Deref_t, PtreeIteratorTag tag,
  <span class="hljs-built_in">std</span>::<span class="hljs-keyword">enable_if_t</span>&lt;<span class="hljs-built_in">std</span>::is_base_of_v&lt;Node_t, Ptree&gt;, <span class="hljs-keyword">int</span>&gt;&gt;
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PtreeIterator</span>
{</span>
<span class="hljs-keyword">public</span>:
  <span class="hljs-keyword">using</span> value_type = Deref_t;
  <span class="hljs-keyword">using</span> dereference_type = value_type;
  <span class="hljs-keyword">using</span> reference = <span class="hljs-built_in">std</span>::<span class="hljs-keyword">add_lvalue_reference_t</span>&lt;value_type&gt;;
  <span class="hljs-keyword">using</span> pointer = <span class="hljs-built_in">std</span>::<span class="hljs-keyword">add_pointer_t</span>&lt;value_type&gt;;
  <span class="hljs-keyword">using</span> difference_type =
        <span class="hljs-keyword">decltype</span>(<span class="hljs-built_in">std</span>::declval&lt;pointer&gt;() - <span class="hljs-built_in">std</span>::declval&lt;pointer&gt;());
  <span class="hljs-keyword">using</span> iterator_category = <span class="hljs-built_in">std</span>::forward_iterator_tag;<font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููู ูุง ููุชุจ ูู ูุณูุทุงุช ุงููููุฐุฌ ูุฐู ูุฏูููุง ูู ูู ูุฑุฉ ุ ูุถูู ุจุนุถ ุงูุฃุณูุงุก ุงููุณุชุนุงุฑุฉ ูุฌููุน ุงูููุงุณุจุงุช:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> Node_t, <span class="hljs-keyword">typename</span> Deref_t = <span class="hljs-built_in">std</span>::<span class="hljs-keyword">add_pointer_t</span>&lt;Node_t&gt;&gt;
<span class="hljs-keyword">using</span> PtreeStatementIterator =<font></font>
PtreeIterator&lt;Node_t, Deref_t, PtreeIteratorTag::Statement&gt;;<font></font>
<font></font>
<span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> Node_t, <span class="hljs-keyword">typename</span> Deref_t = <span class="hljs-built_in">std</span>::<span class="hljs-keyword">add_pointer_t</span>&lt;Node_t&gt;&gt;
<span class="hljs-keyword">using</span> PtreeListIterator =<font></font>
PtreeIterator&lt;Node_t, Deref_t, PtreeIteratorTag::List&gt;;<font></font>
<font></font>
<span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> Node_t, <span class="hljs-keyword">typename</span> Deref_t = <span class="hljs-built_in">std</span>::<span class="hljs-keyword">add_pointer_t</span>&lt;Node_t&gt;&gt;
<span class="hljs-keyword">using</span> PtreeStatementCountingIterator =<font></font>
PtreeCountingIterator&lt;Node_t, Deref_t, PtreeIteratorTag::Statement&gt;;<font></font>
<font></font>
<span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> Node_t, <span class="hljs-keyword">typename</span> Deref_t = <span class="hljs-built_in">std</span>::<span class="hljs-keyword">add_pointer_t</span>&lt;Node_t&gt;&gt;
<span class="hljs-keyword">using</span> PtreeListCountingIterator =<font></font>
PtreeCountingIterator&lt;Node_t, Deref_t, PtreeIteratorTag::List&gt;;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐุง ุฃูุถู. </font><font style="vertical-align: inherit;">ุงูุขู ุ ุฅุฐุง ูู ููู ุจุญุงุฌุฉ ุฅูู ุทุจูุงุช ุ ูููููุง ุชุญุฏูุฏ ูุณูุทุฉ ุงููุงูุจ ุงูุฃูู ููุท ุ ููุง ูููููุง ุฃูุถูุง ุณุฏ ุฑุคูุณูุง ุจูููุฉ ูุนููุฉ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุนูุงูุฉ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููู ูุงุฐุง ุชูุนู ุจุงูุญุงููุงุชุ </font><font style="vertical-align: inherit;">ุฏุนูู ุฃุฐูุฑู ุฃููุง ูุฑูุฏ ุฃู ูููู ูุฏููุง ูุฆุฉ ุนุงูููุฉ ูุงุญุฏุฉ ููุงุณุจุฉ ูุฃู ููุฑุฑ. </font><font style="vertical-align: inherit;">ุงูุขู ููุงู ุงูุนุฏูุฏ ูู ุงูุชุฑููุจุงุช ุงููุฎุชููุฉ ุจุดูู ุบูุฑ ูุงุฆู ุ ููุญู ุจุญุงุฌุฉ ุฅูู ุงูุจุณุงุทุฉ. </font><font style="vertical-align: inherit;">ุดูุก ูู ูุฐุง ุงููุจูู:</font></font><br>
<br>
<p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/xc/nv/ik/xcnvik7rkulnyybu6jngdpcrv4w.png" alt="ุตูุฑุฉ 39"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃู ุฃููุง ูุฑูุฏ ูุฆุฉ ุญุงููุฉ ูุงุญุฏุฉ ูุชููู ูุงุฏุฑุฉ ุนูู ุฏุนู ุฌููุน ุฃููุงุน ุงูุชูุฑุงุฑุงุช ูุฏููุง ูุฃู ูููู ูุงุฏุฑูู ุนูู ุฅุฎุจุงุฑูู ุจุงูููุน ุงูุฐู ูุฌุจ ุฅุฑุฌุงุนู ุนูุฏ ุฅูุบุงุก ุงูุฅุดุงุฑุฉ. </font><font style="vertical-align: inherit;">ุจุนุฏ ุฐูู ุ ูู ุงูููุฏ ุ ูููู ุจุจุณุงุทุฉ ุจุฅูุดุงุก ุงูุญุงููุฉ ุงูุชู ูุญุชุงุฌูุง ููุจุฏุฃ ุงูุนูู ูุนูุง ุฏูู ุงูุชูููุฑ ูู ุงูุชูุฑุงุฑุงุช ุงูุชู ูุญุชุงุฌูุง. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุณูุฏุฑุณ ูุฐุง ุงูุณุคุงู ูู ุงููุณู ุงูุชุงูู.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณุญุฑ ุงูููุท</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅุฐู ูุฐุง ูุง ูุญุชุงุฌู:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุงููุฉ ูุงุญุฏุฉ ูููู ุฃู ุชุนูู ุนุงููููุง ูุน ุฃู ููุฑุฑ.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู ุฃู ูุนูู ุงูููุฑุฑ ุ ุงูุฐู ูุนุชูุฏ ุนูู ูุงุฆูุฉ ุงูุนูุฏ ุ ูุน ูู ุนูุตุฑ ูุนู ุทุฑูู ุนูุตุฑ ูุงุญุฏ.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุณ ุงูููุฑุฑ ูููู ูุน ุนุฏุงุฏ.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฌุจ ุฃู ูููู ูู ูู ุงูููุฑุฑูู ูุงุฏุฑูู ุนูู ุงูุฅุฑุณุงู ุนูุฏ ุฅูุบุงุก ุงูุฅุดุงุฑุฉ ุ ุฅุฐุง ุชู ุชุญุฏูุฏ ุงูููุน ุจุดูู ุฅุถุงูู.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุงุฏุฆ ุฐู ุจุฏุก ุ ูุญู ุจุญุงุฌุฉ ุฅูู ุฑุจุท ููุน ุงูุญุงููุฉ ุจุทุฑููุฉ ูุง ุจููุน ุงูููุฑุฑ ูู ุฎูุงู ูุนููุงุช ุงููุงูุจ. </font><font style="vertical-align: inherit;">ุฅููู ูุง ุญุฏุซ:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span>, <span class="hljs-keyword">typename</span>&gt; <span class="hljs-keyword">typename</span> FwdIt,
          <span class="hljs-keyword">typename</span> Node_t,
          <span class="hljs-keyword">typename</span> Deref_t = <span class="hljs-built_in">std</span>::<span class="hljs-keyword">add_pointer_t</span>&lt;Node_t&gt;&gt;<font></font>
class PtreeContainer<font></font>
{<font></font>
<span class="hljs-keyword">public</span>:
  <span class="hljs-keyword">using</span> Iterator = FwdIt&lt;Node_t, Deref_t&gt;;
  <span class="hljs-keyword">using</span> value_type = <span class="hljs-keyword">typename</span> Iterator::dereference_type;
  <span class="hljs-keyword">using</span> size_type  = <span class="hljs-keyword">size_t</span>;
  <span class="hljs-keyword">using</span> difference_type = <span class="hljs-keyword">typename</span> Iterator::difference_type;<font></font>
<font></font>
<span class="hljs-keyword">public</span>:<font></font>
  PtreeContainer(Node_t* nodes) :<font></font>
    m_nodes{ nodes }<font></font>
  {<font></font>
    <span class="hljs-keyword">if</span> (IsLeaf(m_nodes))<font></font>
    {<font></font>
      m_nodes = <span class="hljs-literal">nullptr</span>;<font></font>
    }<font></font>
  }<font></font>
<font></font>
  ....<font></font>
  <span class="hljs-function">Iterator <span class="hljs-title">begin</span><span class="hljs-params">()</span> <span class="hljs-keyword">const</span> <span class="hljs-keyword">noexcept</span>
  </span>{ 
    <span class="hljs-keyword">return</span> m_nodes;<font></font>
  }<font></font>
  <span class="hljs-function">Iterator <span class="hljs-title">end</span><span class="hljs-params">()</span> <span class="hljs-keyword">const</span> <span class="hljs-keyword">noexcept</span>
  </span>{ 
    <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>; <font></font>
  }<font></font>
  <span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">empty</span><span class="hljs-params">()</span> <span class="hljs-keyword">const</span> <span class="hljs-keyword">noexcept</span>
  </span>{
    <span class="hljs-keyword">return</span> begin() == end();<font></font>
  }<font></font>
  ....<font></font>
<font></font>
<span class="hljs-keyword">private</span>:<font></font>
  Node_t* m_nodes = <span class="hljs-literal">nullptr</span>;<font></font>
};</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃูุถุง ุ ููููู ุฅุถุงูุฉ ุงููุฒูุฏ ูู ุงูุทุฑู ุฅูู ุงูุญุงููุฉ. </font><font style="vertical-align: inherit;">ุนูู ุณุจูู ุงููุซุงู ุ ูุฐู ูู ุงูุทุฑููุฉ ุงูุชู ูููููุง ุจูุง ูุนุฑูุฉ ุนุฏุฏ ุงูุนูุงุตุฑ:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function">difference_type <span class="hljs-title">count</span><span class="hljs-params">()</span> <span class="hljs-keyword">const</span> <span class="hljs-keyword">noexcept</span>
</span>{
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">std</span>::distance(begin(), end());<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃู ููุง ุนุงูู ุงูููุฑุณุฉ:</font></font><br>
<br>
<pre><code class="cpp hljs">value_type <span class="hljs-keyword">operator</span>[](size_type index) <span class="hljs-keyword">const</span> <span class="hljs-keyword">noexcept</span><font></font>
{<font></font>
  size_type i = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> it = begin(); it != end(); ++it)<font></font>
  {<font></font>
    <span class="hljs-keyword">if</span> (i++ == index)<font></font>
    {<font></font>
      <span class="hljs-keyword">return</span> *it;<font></font>
    }<font></font>
  }<font></font>
<font></font>
  <span class="hljs-keyword">return</span> value_type{};<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุงููุงุถุญ ุฃูู ุจุญุงุฌุฉ ุฅูู ุงูุชุนุงูู ูุน ูุฐู ุงูุฃุณุงููุจ ุจุนูุงูุฉ ุจุณุจุจ ุชุนููุฏูุง ุงูุฎุทู ุ ูููู ูู ุจุนุถ ุงูุฃุญูุงู ุชููู ูููุฏุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุณูููุฉ ุงูุงุณุชุฎุฏุงู ุ ุฃุถู ุงูุฃุณูุงุก ุงููุณุชุนุงุฑุฉ:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> Node_t, <span class="hljs-keyword">typename</span> Deref_t = <span class="hljs-built_in">std</span>::<span class="hljs-keyword">add_pointer_t</span>&lt;Node_t&gt;&gt;
<span class="hljs-keyword">using</span> PtreeStatementList =<font></font>
PtreeContainer&lt;PtreeStatementIterator, Node_t, Deref_t&gt;;<font></font>
<font></font>
<span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> Node_t, <span class="hljs-keyword">typename</span> Deref_t = <span class="hljs-built_in">std</span>::<span class="hljs-keyword">add_pointer_t</span>&lt;Node_t&gt;&gt;
<span class="hljs-keyword">using</span> PtreeItemList =<font></font>
PtreeContainer&lt;PtreeListIterator, Node_t, Deref_t&gt;;<font></font>
<font></font>
<span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> Node_t, <span class="hljs-keyword">typename</span> Deref_t = <span class="hljs-built_in">std</span>::<span class="hljs-keyword">add_pointer_t</span>&lt;Node_t&gt;&gt;
<span class="hljs-keyword">using</span> PtreeCountedStatementList =<font></font>
PtreeContainer&lt;PtreeStatementCountingIterator, Node_t, Deref_t&gt;;<font></font>
<font></font>
<span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> Node_t, <span class="hljs-keyword">typename</span> Deref_t = <span class="hljs-built_in">std</span>::<span class="hljs-keyword">add_pointer_t</span>&lt;Node_t&gt;&gt;
<span class="hljs-keyword">using</span> PtreeCountedItemList =<font></font>
PtreeContainer&lt;PtreeListCountingIterator, Node_t, Deref_t&gt;;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุขู ูููููุง ุฅูุดุงุก ุญุงููุงุช ุจุณูููุฉ. </font><font style="vertical-align: inherit;">ูููุชุฑุถ ุ ูู ูุฆุฉ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PtreeDeclaration</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงููุฐููุฑุฉ ุจุงููุนู </font><i><font style="vertical-align: inherit;">ุ</font></i><font style="vertical-align: inherit;"> ุฃููุง ูุฑูุฏ ุงูุญุตูู ุนูู </font><font style="vertical-align: inherit;">ุญุงููุฉ </font><font style="vertical-align: inherit;">ูู ุทุฑููุฉ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GetDeclarators</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ุญูุซ ูุชุฎุทู </font><i><font style="vertical-align: inherit;">ุงูููุฑุฑ</font></i><font style="vertical-align: inherit;"> ุงูููุงุตู ุ ุจูููุง ูุง ููุฌุฏ ุนุฏุงุฏ ูู ุฐูู ุ ูุนูุฏูุง ูุชู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅูุบุงุก</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฅุดุงุฑุฉ ุฅููู ุ ูุฅูู ููุฑุฌุน ูููุฉ ูู ููุน </font><i><font style="vertical-align: inherit;">PtreeDeclarator</font></i><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ููุง ูู ุฅุนูุงู ูุซู ูุฐู ุงูุญุงููุฉ:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">using</span> DeclList =<font></font>
      Iterators::PtreeItemList&lt;Ptree, PtreeDeclarator*&gt;;<font></font>
<span class="hljs-keyword">using</span> ConstDeclList =<font></font>
      Iterators::PtreeItemList&lt;<span class="hljs-keyword">const</span> Ptree, <span class="hljs-keyword">const</span> PtreeDeclarator*&gt;;<font></font>
             :<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">ProcessDecl</span><span class="hljs-params">(<span class="hljs-keyword">const</span> PtreeDeclarator* decl)</span> </span>{ .... }<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">ProcessDeclarators</span><span class="hljs-params">(<span class="hljs-keyword">const</span> PtreeDeclaration* declaration)</span>
</span>{
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> decl : declaration-&gt;GetDeclarators())<font></font>
  {<font></font>
    ProcessDecl(decl);<font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฃุฎูุฑูุง ุ ูุธุฑูุง ูุฃู ุงูุงุณุชุฏูุงู ุงูููุนู ููุฃุณูุงุก ุงููุณุชุนุงุฑุฉ ุณูุธูุฑ ููุท ูู C ++ 20 ุ ูู ุฃุฌู ุฅูุดุงุก ุญุงููุงุช ุฃูุซุฑ ููุงุกูุฉ ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุ ุฃุถููุง ูุฐู ุงููุธุงุฆู:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> Node_t&gt;
<span class="hljs-function">PtreeStatementList&lt;Node_t&gt; <span class="hljs-title">MakeStatementList</span><span class="hljs-params">(Node_t* node)</span>
</span>{
  <span class="hljs-keyword">return</span> { node };<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> Node_t&gt;
<span class="hljs-function">PtreeItemList&lt;Node_t&gt; <span class="hljs-title">MakeItemList</span><span class="hljs-params">(Node_t* node)</span>
</span>{
  <span class="hljs-keyword">return</span> { node };<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> Node_t&gt;
<span class="hljs-function">PtreeCountedStatementList&lt;Node_t&gt; <span class="hljs-title">MakeCountedStatementList</span><span class="hljs-params">(Node_t* node)</span>
</span>{
  <span class="hljs-keyword">return</span> { node };<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> Node_t&gt;
<span class="hljs-function">PtreeCountedItemList&lt;Node_t&gt; <span class="hljs-title">MakeCountedItemList</span><span class="hljs-params">(Node_t* node)</span>
</span>{
  <span class="hljs-keyword">return</span> { node };<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃุฐูุฑ ุงููุธููุฉ ุงูุชู ุนููุช ูุน </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุนุฏุงุฏ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ุงูุขู ูููููุง ูุชุงุจุชูุง ุนูู ุงููุญู ุงูุชุงูู:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">ProcessEnum</span><span class="hljs-params">(<span class="hljs-keyword">const</span> Ptree* argList)</span>
</span>{
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> [elem, i] : MakeCountedItemList(argList))<font></font>
  {<font></font>
    <span class="hljs-keyword">auto</span> name = PtreeToString(elem);<font></font>
    ....<font></font>
    UseIndexSomehow(i);<font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุงุฑูุฉ ูุน ุงููุณุฎุฉ ุงูุฃุตููุฉ ุ ูุจุฏู ูู ุฃูู ุฃุตุจุญ ุฃูุถู:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">ProcessEnum</span><span class="hljs-params">(Ptree* argList, Ptree* enumPtree)</span>
</span>{
  <span class="hljs-keyword">const</span> <span class="hljs-keyword">ptrdiff_t</span> argListLen = Length(argList);
  <span class="hljs-keyword">if</span> (argListLen &lt; <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span>;<font></font>
<font></font>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">ptrdiff_t</span> i = <span class="hljs-number">0</span>; i &lt; argListLen; ++i)<font></font>
  {<font></font>
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span> name;<font></font>
    Ptree* elem;<font></font>
<font></font>
    <span class="hljs-keyword">const</span> EGetEnumElement r = GetEnumElementInfo(enumPtree, i, elem, name);<font></font>
    ....<font></font>
    UseIndexSomehow(i);<font></font>
  }<font></font>
}</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฐุง ูู ูุง ูุฏู ุฃููุง ุงููุงุณ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐุง ูู ุดูุก ุจุงููุณุจุฉ ูู ุ ุดูุฑุง ููู ุนูู ุงูุชูุงููู. </font><font style="vertical-align: inherit;">ุขูู ุฃู ุชููู ูุฏ ุงูุชุดูุช ุดูุฆูุง ูุซูุฑูุง ููุงูุชูุงู ุฃู ุญุชู ูููุฏูุง. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููููุง ููุญุชูู ุงูููุงูุฉ ุ ูุฏ ูุจุฏู ุฃููู ุฃููู ุจุชูุจูุฎ ููุฏ ูุญูููุง ูุฃุฑูุฏ ุฃู ุฃููู ุฅู ูู ุดูุก ุณูุฆ ููุงู. </font><font style="vertical-align: inherit;">ูุฐุง ููุณ ุตุญูุญุง. </font><font style="vertical-align: inherit;">ูุซู ุฃู ูุดุฑูุน ูู ุชุงุฑูุฎ ุ ูุฅู ูุญูููุง ูููุก ุจุงูุฑูุงุณุจ ุงูุฌููููุฌูุฉ ุงูุชู ุจููุช ูู ุงูุนุตูุฑ ุงููุงุถูุฉ. </font><font style="vertical-align: inherit;">ุถุน ูู ุงุนุชุจุงุฑู ุฃููุง ูููุง ููุชู ุจุงูุชูููุจ ุ ูุณุญุจูุง ุงููุทุน ุงูุฃุซุฑูุฉ ููุญุถุงุฑุฉ ุงููุฏููุฉ ูู ุชุญุช ุงูุฃุฑุถ ููููุง ุจุงูุชุฑููู ูุฌุนููุง ุชุจุฏู ุฌูุฏุฉ ุนูู ุงูุฑู.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงุญุธุฉ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุณูููู ููุงู ุงููุซูุฑ ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ููุง. </font><font style="vertical-align: inherit;">ุดููุช ูููุง ุฅุฐุง ูุงู ุณูุชู ุชุถููู ุชูููุฐ ุงูุชูุฑุงุฑุงุช ููุง ุฃู ูุง ุ ููู ุงูููุงูุฉ ูุฑุฑุช ุชุถููููุง ุญุชู ูุง ุฃุชุฑู ุฃู ุดูุก ูุฑุงุก ุงูููุงููุณ. </font><font style="vertical-align: inherit;">ุฅุฐุง ูู ุชูู ููุชููุง ุจูุฑุงุกุฉ ุงูุฑูุฒ ุ ูุณุฃููู ูู ูุฏุงุนูุง. </font><font style="vertical-align: inherit;">ุงูุจุงูู ุฃุชููู ููู ููุชุง ููุชุนุง ูุน ุงูููุงูุจ.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฑูุฒ</font></font></b>
                        <div class="spoiler_text"><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฑุฑ ููุชุธู</font></font></h3><br>
<pre><code class="cpp hljs"><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> Node_t, <span class="hljs-keyword">typename</span> Deref_t, PtreeIteratorTag tag,
<span class="hljs-built_in">std</span>::<span class="hljs-keyword">enable_if_t</span>&lt;<span class="hljs-built_in">std</span>::is_base_of_v&lt;Node_t, Ptree&gt;, <span class="hljs-keyword">int</span>&gt; = <span class="hljs-number">0</span>&gt;<font></font>
class PtreeIterator<font></font>
{<font></font>
<span class="hljs-keyword">public</span>:
  <span class="hljs-keyword">using</span> value_type = Deref_t;
  <span class="hljs-keyword">using</span> dereference_type = value_type;
  <span class="hljs-keyword">using</span> reference = <span class="hljs-built_in">std</span>::<span class="hljs-keyword">add_lvalue_reference_t</span>&lt;value_type&gt;;
  <span class="hljs-keyword">using</span> pointer = <span class="hljs-built_in">std</span>::<span class="hljs-keyword">add_pointer_t</span>&lt;value_type&gt;;
  <span class="hljs-keyword">using</span> difference_type =
        <span class="hljs-keyword">decltype</span>(<span class="hljs-built_in">std</span>::declval&lt;pointer&gt;() - <span class="hljs-built_in">std</span>::declval&lt;pointer&gt;());
  <span class="hljs-keyword">using</span> iterator_category = <span class="hljs-built_in">std</span>::forward_iterator_tag;<font></font>
<font></font>
<span class="hljs-keyword">public</span>:<font></font>
  PtreeIterator(Node_t* node) <span class="hljs-keyword">noexcept</span> : m_node{ node } {}<font></font>
  PtreeIterator() = <span class="hljs-keyword">delete</span>;<font></font>
  PtreeIterator(<span class="hljs-keyword">const</span> PtreeIterator&amp;) = <span class="hljs-keyword">default</span>;<font></font>
  PtreeIterator&amp; <span class="hljs-keyword">operator</span>=(<span class="hljs-keyword">const</span> PtreeIterator&amp;) = <span class="hljs-keyword">default</span>;<font></font>
  PtreeIterator(PtreeIterator&amp;&amp;) = <span class="hljs-keyword">default</span>;<font></font>
  PtreeIterator&amp; <span class="hljs-keyword">operator</span>=(PtreeIterator&amp;&amp;) = <span class="hljs-keyword">default</span>;<font></font>
<font></font>
  <span class="hljs-keyword">bool</span> <span class="hljs-keyword">operator</span>==(<span class="hljs-keyword">const</span> PtreeIterator &amp; other) <span class="hljs-keyword">const</span> <span class="hljs-keyword">noexcept</span><font></font>
  {<font></font>
    <span class="hljs-keyword">return</span> m_node == other.m_node;<font></font>
  }<font></font>
  <span class="hljs-keyword">bool</span> <span class="hljs-keyword">operator</span>!=(<span class="hljs-keyword">const</span> PtreeIterator &amp; other) <span class="hljs-keyword">const</span> <span class="hljs-keyword">noexcept</span><font></font>
  {<font></font>
    <span class="hljs-keyword">return</span> !(*<span class="hljs-keyword">this</span> == other);<font></font>
  }<font></font>
  PtreeIterator&amp; <span class="hljs-keyword">operator</span>++() <span class="hljs-keyword">noexcept</span><font></font>
  {<font></font>
    <span class="hljs-function"><span class="hljs-keyword">if</span> <span class="hljs-title">constexpr</span> <span class="hljs-params">(tag == PtreeIteratorTag::Statement)</span>
    </span>{<font></font>
      m_node = Rest(m_node);<font></font>
    }<font></font>
    <span class="hljs-keyword">else</span><font></font>
    {<font></font>
      m_node = RestRest(m_node);<font></font>
    }<font></font>
    <span class="hljs-keyword">return</span> *<span class="hljs-keyword">this</span>;<font></font>
  }<font></font>
  PtreeIterator <span class="hljs-keyword">operator</span>++(<span class="hljs-keyword">int</span>) <span class="hljs-keyword">noexcept</span><font></font>
  {<font></font>
    <span class="hljs-keyword">auto</span> tmp = *<span class="hljs-keyword">this</span>;<font></font>
    ++(*<span class="hljs-keyword">this</span>);
    <span class="hljs-keyword">return</span> tmp;<font></font>
  }<font></font>
  dereference_type <span class="hljs-keyword">operator</span>*() <span class="hljs-keyword">const</span> <span class="hljs-keyword">noexcept</span><font></font>
  {<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">static_cast</span>&lt;dereference_type&gt;(First(m_node));<font></font>
  }<font></font>
  pointer <span class="hljs-keyword">operator</span>-&gt;() <span class="hljs-keyword">const</span> <span class="hljs-keyword">noexcept</span><font></font>
  {<font></font>
    <span class="hljs-keyword">return</span> &amp;(**<span class="hljs-keyword">this</span>);<font></font>
  }<font></font>
<font></font>
  <span class="hljs-function">Node_t* <span class="hljs-title">get</span><span class="hljs-params">()</span> <span class="hljs-keyword">const</span> <span class="hljs-keyword">noexcept</span>
  </span>{
    <span class="hljs-keyword">return</span> m_node;<font></font>
  }<font></font>
<font></font>
<span class="hljs-keyword">private</span>:<font></font>
  Node_t* m_node = <span class="hljs-literal">nullptr</span>;<font></font>
};<font></font>
<font></font>
<span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> Node_t, <span class="hljs-keyword">typename</span> Deref_t = <span class="hljs-built_in">std</span>::<span class="hljs-keyword">add_pointer_t</span>&lt;Node_t&gt;&gt;
<span class="hljs-keyword">using</span> PtreeStatementIterator =<font></font>
PtreeIterator&lt;Node_t, Deref_t, PtreeIteratorTag::Statement&gt;;<font></font>
<font></font>
<span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> Node_t, <span class="hljs-keyword">typename</span> Deref_t = <span class="hljs-built_in">std</span>::<span class="hljs-keyword">add_pointer_t</span>&lt;Node_t&gt;&gt;
<span class="hljs-keyword">using</span> PtreeListIterator =<font></font>
PtreeIterator&lt;Node_t, Deref_t, PtreeIteratorTag::List&gt;;</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฒูู ูุน ุนุฏุงุฏ</font></font></h3><br>
<pre><code class="cpp hljs"><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> Node_t, <span class="hljs-keyword">typename</span> Deref_t, PtreeIteratorTag tag,
<span class="hljs-built_in">std</span>::<span class="hljs-keyword">enable_if_t</span>&lt;<span class="hljs-built_in">std</span>::is_base_of_v&lt;Node_t, Ptree&gt;, <span class="hljs-keyword">int</span>&gt; = <span class="hljs-number">0</span>&gt;<font></font>
class PtreeCountingIterator<font></font>
{<font></font>
<span class="hljs-keyword">public</span>:
  <span class="hljs-keyword">using</span> size_type = <span class="hljs-keyword">size_t</span>;
  <span class="hljs-keyword">using</span> value_type = Deref_t;
  <span class="hljs-keyword">using</span> dereference_type = <span class="hljs-built_in">std</span>::pair&lt;value_type, size_type&gt;;
  <span class="hljs-keyword">using</span> reference = <span class="hljs-built_in">std</span>::<span class="hljs-keyword">add_lvalue_reference_t</span>&lt;value_type&gt;;
  <span class="hljs-keyword">using</span> pointer = <span class="hljs-built_in">std</span>::<span class="hljs-keyword">add_pointer_t</span>&lt;value_type&gt;;
  <span class="hljs-keyword">using</span> difference_type =
        <span class="hljs-keyword">decltype</span>(<span class="hljs-built_in">std</span>::declval&lt;pointer&gt;() - <span class="hljs-built_in">std</span>::declval&lt;pointer&gt;());
  <span class="hljs-keyword">using</span> iterator_category = <span class="hljs-built_in">std</span>::forward_iterator_tag;<font></font>
<font></font>
 <span class="hljs-keyword">public</span>:<font></font>
  PtreeCountingIterator(Node_t* node) <span class="hljs-keyword">noexcept</span> : m_node{ node } {}<font></font>
  PtreeCountingIterator() = <span class="hljs-keyword">delete</span>;<font></font>
  PtreeCountingIterator(<span class="hljs-keyword">const</span> PtreeCountingIterator&amp;) = <span class="hljs-keyword">default</span>;<font></font>
  PtreeCountingIterator&amp; <span class="hljs-keyword">operator</span>=(<span class="hljs-keyword">const</span> PtreeCountingIterator&amp;) = <span class="hljs-keyword">default</span>;<font></font>
  PtreeCountingIterator(PtreeCountingIterator&amp;&amp;) = <span class="hljs-keyword">default</span>;<font></font>
  PtreeCountingIterator&amp; <span class="hljs-keyword">operator</span>=(PtreeCountingIterator&amp;&amp;) = <span class="hljs-keyword">default</span>;<font></font>
<font></font>
  <span class="hljs-keyword">bool</span> <span class="hljs-keyword">operator</span>==(<span class="hljs-keyword">const</span> PtreeCountingIterator&amp; other) <span class="hljs-keyword">const</span> <span class="hljs-keyword">noexcept</span><font></font>
  {<font></font>
    <span class="hljs-keyword">return</span> m_node == other.m_node;<font></font>
  }<font></font>
  <span class="hljs-keyword">bool</span> <span class="hljs-keyword">operator</span>!=(<span class="hljs-keyword">const</span> PtreeCountingIterator&amp; other) <span class="hljs-keyword">const</span> <span class="hljs-keyword">noexcept</span><font></font>
  {<font></font>
    <span class="hljs-keyword">return</span> !(*<span class="hljs-keyword">this</span> == other);<font></font>
  }<font></font>
  PtreeCountingIterator&amp; <span class="hljs-keyword">operator</span>++() <span class="hljs-keyword">noexcept</span><font></font>
  {<font></font>
    <span class="hljs-function"><span class="hljs-keyword">if</span> <span class="hljs-title">constexpr</span> <span class="hljs-params">(tag == PtreeIteratorTag::Statement)</span>
    </span>{<font></font>
      m_node = Rest(m_node);<font></font>
    }<font></font>
    <span class="hljs-keyword">else</span><font></font>
    {<font></font>
      m_node = RestRest(m_node);<font></font>
    }<font></font>
<font></font>
    ++m_counter;<font></font>
    <span class="hljs-keyword">return</span> *<span class="hljs-keyword">this</span>;<font></font>
  }<font></font>
  PtreeCountingIterator <span class="hljs-keyword">operator</span>++(<span class="hljs-keyword">int</span>) <span class="hljs-keyword">noexcept</span><font></font>
  {<font></font>
    <span class="hljs-keyword">auto</span> tmp = *<span class="hljs-keyword">this</span>;<font></font>
    ++(*<span class="hljs-keyword">this</span>);
    <span class="hljs-keyword">return</span> tmp;<font></font>
  }<font></font>
  dereference_type <span class="hljs-keyword">operator</span>*() <span class="hljs-keyword">const</span> <span class="hljs-keyword">noexcept</span><font></font>
  {<font></font>
    <span class="hljs-keyword">return</span> { <span class="hljs-keyword">static_cast</span>&lt;value_type&gt;(First(m_node)), counter() };<font></font>
  }<font></font>
  value_type <span class="hljs-keyword">operator</span>-&gt;() <span class="hljs-keyword">const</span> <span class="hljs-keyword">noexcept</span><font></font>
  {<font></font>
    <span class="hljs-keyword">return</span> (**<span class="hljs-keyword">this</span>).first;<font></font>
  }<font></font>
<font></font>
  <span class="hljs-function">size_type <span class="hljs-title">counter</span><span class="hljs-params">()</span> <span class="hljs-keyword">const</span> <span class="hljs-keyword">noexcept</span>
  </span>{
    <span class="hljs-keyword">return</span> m_counter;<font></font>
  }<font></font>
  <span class="hljs-function">Node_t* <span class="hljs-title">get</span><span class="hljs-params">()</span> <span class="hljs-keyword">const</span> <span class="hljs-keyword">noexcept</span>
  </span>{
    <span class="hljs-keyword">return</span> m_node;<font></font>
  }<font></font>
<font></font>
<span class="hljs-keyword">private</span>:<font></font>
  Node_t* m_node = <span class="hljs-literal">nullptr</span>;<font></font>
  size_type m_counter = <span class="hljs-number">0</span>;<font></font>
};<font></font>
<font></font>
<span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> Node_t, <span class="hljs-keyword">typename</span> Deref_t = <span class="hljs-built_in">std</span>::<span class="hljs-keyword">add_pointer_t</span>&lt;Node_t&gt;&gt;
<span class="hljs-keyword">using</span> PtreeStatementCountingIterator =<font></font>
PtreeCountingIterator&lt;Node_t, Deref_t, PtreeIteratorTag::Statement&gt;;<font></font>
<font></font>
<span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> Node_t, <span class="hljs-keyword">typename</span> Deref_t = <span class="hljs-built_in">std</span>::<span class="hljs-keyword">add_pointer_t</span>&lt;Node_t&gt;&gt;
<span class="hljs-keyword">using</span> PtreeListCountingIterator =<font></font>
PtreeCountingIterator&lt;Node_t, Deref_t, PtreeIteratorTag::List&gt;;</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุงููุฉ ุนุงูุฉ</font></font></h3><br>
<pre><code class="cpp hljs"><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span>, <span class="hljs-keyword">typename</span>&gt; <span class="hljs-keyword">typename</span> FwdIt,
          <span class="hljs-keyword">typename</span> Node_t, <span class="hljs-keyword">typename</span> Deref_t = <span class="hljs-built_in">std</span>::<span class="hljs-keyword">add_pointer_t</span>&lt;Node_t&gt;&gt;<font></font>
class PtreeContainer<font></font>
{<font></font>
<span class="hljs-keyword">public</span>:
  <span class="hljs-keyword">using</span> Iterator = FwdIt&lt;Node_t, Deref_t&gt;;
  <span class="hljs-keyword">using</span> value_type = <span class="hljs-keyword">typename</span> Iterator::dereference_type;
  <span class="hljs-keyword">using</span> size_type  = <span class="hljs-keyword">size_t</span>;
  <span class="hljs-keyword">using</span> difference_type = <span class="hljs-keyword">typename</span> Iterator::difference_type;<font></font>
<font></font>
<span class="hljs-keyword">public</span>:<font></font>
  PtreeContainer(Node_t* nodes) :<font></font>
    m_nodes{ nodes }<font></font>
  {<font></font>
    <span class="hljs-keyword">if</span> (IsLeaf(m_nodes))<font></font>
    {<font></font>
      m_nodes = <span class="hljs-literal">nullptr</span>;<font></font>
    }<font></font>
  }<font></font>
<font></font>
  PtreeContainer() = <span class="hljs-keyword">default</span>;<font></font>
  PtreeContainer(<span class="hljs-keyword">const</span> PtreeContainer&amp;) = <span class="hljs-keyword">default</span>;<font></font>
  PtreeContainer&amp; <span class="hljs-keyword">operator</span>=(<span class="hljs-keyword">const</span> PtreeContainer&amp;) = <span class="hljs-keyword">default</span>;<font></font>
  PtreeContainer(PtreeContainer&amp;&amp;) = <span class="hljs-keyword">default</span>;<font></font>
  PtreeContainer&amp; <span class="hljs-keyword">operator</span>=(PtreeContainer&amp;&amp;) = <span class="hljs-keyword">default</span>;<font></font>
<font></font>
  <span class="hljs-keyword">bool</span> <span class="hljs-keyword">operator</span>==(<span class="hljs-built_in">std</span>::<span class="hljs-keyword">nullptr_t</span>) <span class="hljs-keyword">const</span> <span class="hljs-keyword">noexcept</span><font></font>
  {<font></font>
    <span class="hljs-keyword">return</span> empty();<font></font>
  }<font></font>
  <span class="hljs-keyword">bool</span> <span class="hljs-keyword">operator</span>!=(<span class="hljs-built_in">std</span>::<span class="hljs-keyword">nullptr_t</span>) <span class="hljs-keyword">const</span> <span class="hljs-keyword">noexcept</span><font></font>
  {<font></font>
    <span class="hljs-keyword">return</span> !(*<span class="hljs-keyword">this</span> == <span class="hljs-literal">nullptr</span>);<font></font>
  }<font></font>
  <span class="hljs-keyword">bool</span> <span class="hljs-keyword">operator</span>==(Node_t* node) <span class="hljs-keyword">const</span> <span class="hljs-keyword">noexcept</span><font></font>
  {<font></font>
    <span class="hljs-keyword">return</span> get() == node;<font></font>
  }<font></font>
  <span class="hljs-keyword">bool</span> <span class="hljs-keyword">operator</span>!=(Node_t* node) <span class="hljs-keyword">const</span> <span class="hljs-keyword">noexcept</span><font></font>
  {<font></font>
    <span class="hljs-keyword">return</span> !(*<span class="hljs-keyword">this</span> == node);<font></font>
  }<font></font>
  <span class="hljs-keyword">bool</span> <span class="hljs-keyword">operator</span>==(PtreeContainer other) <span class="hljs-keyword">const</span> <span class="hljs-keyword">noexcept</span><font></font>
  {<font></font>
    <span class="hljs-keyword">return</span> get() == other.get();<font></font>
  }<font></font>
  <span class="hljs-keyword">bool</span> <span class="hljs-keyword">operator</span>!=(PtreeContainer other) <span class="hljs-keyword">const</span> <span class="hljs-keyword">noexcept</span><font></font>
  {<font></font>
    <span class="hljs-keyword">return</span> !(*<span class="hljs-keyword">this</span> == other);<font></font>
  }<font></font>
  value_type <span class="hljs-keyword">operator</span>[](size_type index) <span class="hljs-keyword">const</span> <span class="hljs-keyword">noexcept</span><font></font>
  {<font></font>
    size_type i = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> it = begin(); it != end(); ++it)<font></font>
    {<font></font>
      <span class="hljs-keyword">if</span> (i++ == index)<font></font>
      {<font></font>
        <span class="hljs-keyword">return</span> *it;<font></font>
      }<font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">return</span> value_type{};<font></font>
  }<font></font>
<font></font>
  <span class="hljs-function">Iterator <span class="hljs-title">begin</span><span class="hljs-params">()</span> <span class="hljs-keyword">const</span> <span class="hljs-keyword">noexcept</span>
  </span>{ 
    <span class="hljs-keyword">return</span> m_nodes;<font></font>
  }<font></font>
  <span class="hljs-function">Iterator <span class="hljs-title">end</span><span class="hljs-params">()</span> <span class="hljs-keyword">const</span> <span class="hljs-keyword">noexcept</span>
  </span>{ 
    <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>; <font></font>
  }<font></font>
  <span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">empty</span><span class="hljs-params">()</span> <span class="hljs-keyword">const</span> <span class="hljs-keyword">noexcept</span>
  </span>{
    <span class="hljs-keyword">return</span> begin() == end();<font></font>
  }<font></font>
<font></font>
  <span class="hljs-function">value_type <span class="hljs-title">front</span><span class="hljs-params">()</span> <span class="hljs-keyword">const</span> <span class="hljs-keyword">noexcept</span>
  </span>{
    <span class="hljs-keyword">return</span> (*<span class="hljs-keyword">this</span>)[<span class="hljs-number">0</span>];<font></font>
  }<font></font>
  <span class="hljs-function">value_type <span class="hljs-title">back</span><span class="hljs-params">()</span> <span class="hljs-keyword">const</span> <span class="hljs-keyword">noexcept</span>
  </span>{<font></font>
    value_type last{};<font></font>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> cur : *<span class="hljs-keyword">this</span>)<font></font>
    {<font></font>
      last = cur;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">return</span> last;<font></font>
  }<font></font>
  <span class="hljs-function">Node_t* <span class="hljs-title">get</span><span class="hljs-params">()</span> <span class="hljs-keyword">const</span> <span class="hljs-keyword">noexcept</span>
  </span>{
    <span class="hljs-keyword">return</span> m_nodes;<font></font>
  }<font></font>
<font></font>
  <span class="hljs-function">difference_type <span class="hljs-title">count</span><span class="hljs-params">()</span> <span class="hljs-keyword">const</span> <span class="hljs-keyword">noexcept</span>
  </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">std</span>::distance(begin(), end());<font></font>
  }<font></font>
  <span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">has_at_least</span><span class="hljs-params">(size_type n)</span> <span class="hljs-keyword">const</span> <span class="hljs-keyword">noexcept</span>
  </span>{<font></font>
    size_type counter = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> it = begin(); it != end(); ++it)<font></font>
    {<font></font>
      <span class="hljs-keyword">if</span> (++counter == n)<font></font>
      {<font></font>
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<font></font>
      }<font></font>
    }<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<font></font>
  }<font></font>
<font></font>
<span class="hljs-keyword">private</span>:<font></font>
  Node_t* m_nodes = <span class="hljs-literal">nullptr</span>;<font></font>
};<font></font>
<font></font>
<span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> Node_t, <span class="hljs-keyword">typename</span> Deref_t = <span class="hljs-built_in">std</span>::<span class="hljs-keyword">add_pointer_t</span>&lt;Node_t&gt;&gt;
<span class="hljs-keyword">using</span> PtreeStatementList =<font></font>
PtreeContainer&lt;PtreeStatementIterator, Node_t, Deref_t&gt;;<font></font>
<font></font>
<span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> Node_t, <span class="hljs-keyword">typename</span> Deref_t = <span class="hljs-built_in">std</span>::<span class="hljs-keyword">add_pointer_t</span>&lt;Node_t&gt;&gt;
<span class="hljs-keyword">using</span> PtreeItemList =<font></font>
PtreeContainer&lt;PtreeListIterator, Node_t, Deref_t&gt;;<font></font>
<font></font>
<span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> Node_t, <span class="hljs-keyword">typename</span> Deref_t = <span class="hljs-built_in">std</span>::<span class="hljs-keyword">add_pointer_t</span>&lt;Node_t&gt;&gt;
<span class="hljs-keyword">using</span> PtreeCountedStatementList =<font></font>
PtreeContainer&lt;PtreeStatementCountingIterator, Node_t, Deref_t&gt;;<font></font>
<font></font>
<span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> Node_t, <span class="hljs-keyword">typename</span> Deref_t = <span class="hljs-built_in">std</span>::<span class="hljs-keyword">add_pointer_t</span>&lt;Node_t&gt;&gt;
<span class="hljs-keyword">using</span> PtreeCountedItemList =<font></font>
PtreeContainer&lt;PtreeListCountingIterator, Node_t, Deref_t&gt;;</code></pre><br>
</div>
                    </div><br>
<p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="></a></p><div style="text-align:center;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/898/3b6/5a7/8983b65a74adb29a2113eba12fbec3f1.png"></a></div><p></p><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅุฐุง ููุช ุชุฑุบุจ ูู ูุดุงุฑูุฉ ูุฐู ุงูููุงูุฉ ูุน ุฌูููุฑ ูุชุญุฏุซ ุงูุฅูุฌููุฒูุฉ ุ ููุฑุฌู ุงุณุชุฎุฏุงู ุฑุงุจุท ุงูุชุฑุฌูุฉ: Yuri Minaev. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููู ุชุชุณูู ุดุฌุฑุฉ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar502500/index.html">ุชุทูุฑ ูุงุณุญ ุถูุฆู ูุฌูุงุฒุงุช ุงูุณูุฑ: ูู ุงูุญุฑู ุงูุฎุดุจูุฉ ุฅูู ุงูุฃุนูุงู ุงูุญููููุฉ</a></li>
<li><a href="../ar502504/index.html">ุฃุญุท ุฑูู ุงููุณุชุฎุฏู</a></li>
<li><a href="../ar502508/index.html">ุนุฑุจุฉ ุงูุฑูุจูุช 2.0. ุงูุฌุฒุก 2. ุงูุชุฏุจูุฑ ูู ุฑููุฒ ูุฎุงุฑุฌู ุนูุงุตุฑ ุงูุฌูุงู ูู ุฑููุฒ</a></li>
<li><a href="../ar502510/index.html">ูุง ูุฌุจ ุญูุธู ูู ุงูุณุญุงุจุฉ</a></li>
<li><a href="../ar502512/index.html">ูุชุงุฆุฌ ูุณุงุจูุฉ ุฎุจุฑุงุก ุงูููุจุฉ: ููุงุนุฏ ุจุฏุณ ุนููู</a></li>
<li><a href="../ar502520/index.html">ุชูุงุฑูุฑ ููุฏูู ูุชูุงุฑูุฑ mitap ุนู ุชุญูููุงุช ุงูููุชุฌ</a></li>
<li><a href="../ar502554/index.html">ุชูููููุฌูุง ุงููุนูููุงุช ุงููุณุทู ูุทุฑููุฉ ููุฎุฑูุฌ ูู ุงูุฃุฒูุฉ</a></li>
<li><a href="../ar502556/index.html">ูุคุชูุฑ Microsoft Build 2020 - ุนุจุฑ ุงูุฅูุชุฑูุช ุจุงููุงูู ุงูููู (ุงูุธุฑ ูุจุงุดุฑุฉ ุฅูู Habrรฉ)</a></li>
<li><a href="../ar502558/index.html">ููู ุฌูุนุช ููุฒูุงุก ุงูุนุฌูุฉ ูู Unigine</a></li>
<li><a href="../ar502560/index.html">ููุท ูู ูุง ูุงุฎุชุจุงุฑุงุช ููุงูุฉ ุทุฑููู</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>