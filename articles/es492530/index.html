<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßîüèæ üòÑ ‚ÄºÔ∏è MVVM basados ‚Äã‚Äãen combinaci√≥n en aplicaciones UIKit y SwiftUI para desarrolladores de UIKit ‚ö™Ô∏è üç¨ üêü</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Sabemos que las ObservableObjecclases t con sus @Publishedpropiedades se crean Combineespecialmente para View Modelin SwiftUI. Pero exactamente lo mis...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>MVVM basados ‚Äã‚Äãen combinaci√≥n en aplicaciones UIKit y SwiftUI para desarrolladores de UIKit</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/492530/"><img src="https://habrastorage.org/webt/ku/lm/v5/kulmv5qftg5ynrc21jjj3rou7ro.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sabemos que las </font></font><code>ObservableObjec</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">clases t con sus </font></font><code>@Published</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">propiedades se crean </font></font><code>Combine</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">especialmente para </font></font><code>View Model</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in </font></font><code>SwiftUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Pero exactamente lo mismo </font></font><code> View Model</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">se puede utilizar en la </font></font><code>UIKit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">implementaci√≥n de la arquitectura&nbsp; </font></font><code>MVVM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, aunque en este caso tendremos que ‚Äúvincular‚Äù ( </font></font><code>bind</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font><font style="vertical-align: inherit;">manualmente </font><font style="vertical-align: inherit;">los </font></font><code>UI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">elementos a las </font></font><code>@Published </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">propiedades de </font></font><code>View Mode</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">l. Te sorprender√°s, pero con la ayuda de </font></font><code>Combine</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">esto puedes hacer un par de l√≠neas de c√≥digo. Adem√°s, al adherirse a esta ideolog√≠a al dise√±ar </font></font><code>UIKit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aplicaciones, posteriormente cambiar√° sin problemas </font></font><code>SwiftUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El prop√≥sito de este art√≠culo es mostrar con un ejemplo primitivamente simple c√≥mo implementar una </font></font><code>MVVM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">arquitectura </font></font><code>UIKit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">con </font><font style="vertical-align: inherit;">elegancia </font></font><code>&nbsp;Combine</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Por el contrario, mostramos el uso del mismo</font></font><code>View Model </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c </font></font><code>SwiftUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El art√≠culo discutir√° dos aplicaciones simples que le permiten seleccionar </font><font style="vertical-align: inherit;">la informaci√≥n meteorol√≥gica m√°s reciente para una ciudad espec√≠fica </font><font style="vertical-align: inherit;">del sitio </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenWeatherMa</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> p. Pero </font></font><code> UI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">uno de ellos se crear√° con la aplicaci√≥n </font></font><code>SwiftUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y el otro con ayuda </font></font><code>UIKit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Para el usuario, estas aplicaciones se ver√°n casi iguales. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/3r/2m/mo/3r2mmow1d4zuhf7a8gcaabv6adi.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El c√≥digo est√° en </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Github</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La interfaz de usuario ( </font></font><code>UI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) contendr√° solo 2 </font></font><code>UI </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">elementos: un campo de texto para ingresar la ciudad y una etiqueta para mostrar la temperatura. El cuadro de texto para ingresar a la ciudad es la ENTRADA activa ( </font></font><code>Input</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">), y la etiqueta de temperatura es la SALIDA pasiva ( </font></font><code>Output</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">).&nbsp;&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El papel </font></font><code>View Model </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en la arquitectura </font></font><code>MVVM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">es que toma las ENTRADAS de </font></font><code>View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(o </font></font><code>ViewController</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en </font></font><code>UIKit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">), implementa la l√≥gica de negocios de la aplicaci√≥n y devuelve las SALIDAS a&nbsp; </font></font><code>View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(o </font></font><code>ViewController</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en </font></font><code>UIKit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">), posiblemente presentando estos datos en el formato deseado. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Creaci√≥n&nbsp; </font></font><code>View Model</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">con </font></font><code>Combine</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">no importa qu√© tipo de l√≥gica de negocio - sincr√≥nica o asincr√≥nica - es muy simple si se utiliza una </font></font><code>ObservableObject </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">clase con sus </font></font><code> @Published</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">propiedades.</font></font><br>
<br>
<h2>   <code>API</code>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">OpenWeatherMap</a></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aunque el servicio&nbsp; </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenWeatherMap le</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &nbsp; permite seleccionar informaci√≥n meteorol√≥gica muy extensa, el modelo de los datos que nos interesa ser√° muy simple, proporciona informaci√≥n detallada&nbsp; </font></font><code>WeatherDetail</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sobre el clima actual en la ciudad seleccionada y se encuentra en el archivo&nbsp; </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Model.swift</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<br>
<img src="https://habrastorage.org/webt/nn/mk/bp/nnmkbpg0dfdnan0olkkx_amlwus.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
aunque en esta tarea espec√≠fica solo nos interesar√° la temperatura </font></font><code>temp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, que est√° en la estructura&nbsp; </font></font><code>Main</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, el Modelo proporciona informaci√≥n detallada completa sobre el clima actual como estructura ra√≠z&nbsp; </font></font><code>WeatherDetail</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, creyendo que en el futuro querr√° ampliar las capacidades de esta aplicaci√≥n. La estructura </font></font><code>WeatherDetail&nbsp;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">es codificable, esto nos permitir√° decodificar literalmente los </font></font><code>JSON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">datos en el modelo con </font><font style="vertical-align: inherit;">solo dos l√≠neas de c√≥digo&nbsp; </font><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La estructura&nbsp; </font></font><code>WeatherDetail</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;tambi√©n debe ser</font></font><code>Identifiable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">si queremos que sea m√°s f√°cil para nosotros en el futuro mostrar una serie de pron√≥sticos meteorol√≥gicos&nbsp; </font></font><code>[WeatherDetail]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;con varios d√≠as de anticipaci√≥n en forma de una lista&nbsp; </font></font><code>List</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;de </font></font><code>SwiftUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Esto tambi√©n es un espacio en blanco para una futura aplicaci√≥n meteorol√≥gica actual m√°s sofisticada. El protocolo </font></font><code>Identifiable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">requiere la presencia de la propiedad </font></font><code> id,</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que ya tenemos, por lo que no se requerir√°n esfuerzos adicionales de nuestra parte. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por lo general, los servicios, incluido el servicio&nbsp; </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenWeatherMap</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , ofrecen todo tipo de servicios </font></font><code>URLs </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para obtener los recursos que necesitamos. El servicio&nbsp; </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenWeatherMap</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nos ofrece </font></font><code>URLs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">obtener informaci√≥n detallada sobre el clima actual o el pron√≥stico para 5 d√≠as en una determinada ciudad </font></font><code>city</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. En esta aplicaci√≥n, solo nos interesar√° la informaci√≥n meteorol√≥gica actual y para este caso</font></font><code>URL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">calculado utilizando la funci√≥n </font></font><code>absoluteURL (city: String)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/i1/3i/ha/i13ihapejao-kzmclk5fz1k4vni.png"><br>
<br>
<code>API</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;para el servicio </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenWeatherMap</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font><font style="vertical-align: inherit;">&nbsp;lo </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">colocaremos</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en el archivo </font><i><font style="vertical-align: inherit;">WeatherAPI.swift</font></i><font style="vertical-align: inherit;"> . Su parte central ser√° un m√©todo para seleccionar informaci√≥n meteorol√≥gica detallada&nbsp; </font></font><code>WeatherDetail</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en una ciudad&nbsp; </font></font><code>city</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<ul>
<li><code>fetchWeather (for city: String) -&gt; AnyPublisher&lt;WeatherDetail, Never&gt;</code></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En el contexto del marco, </font></font><code>Combine</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;este m√©todo devuelve no solo informaci√≥n meteorol√≥gica detallada&nbsp; </font></font><code>WeatherDetail</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, sino el "editor" correspondiente </font></font><code>Publisher</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Nuestro "editor" </font></font><code>AnyPublisher&lt;WeatherDetail, Never&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">no devuelve ning√∫n error, </font></font><code>Never</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y si a√∫n se produce un error de muestreo o codificaci√≥n, el suplente regresa&nbsp; </font></font><code>WeatherDetail.placeholder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sin ning√∫n mensaje adicional sobre la causa del error.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Considere con m√°s detalle el m√©todo&nbsp; </font></font><code>fetchWeather (for city: String) -&gt; AnyPublisher&lt;WeatherDetail, Never&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que selecciona </font><font style="vertical-align: inherit;">&nbsp;informaci√≥n meteorol√≥gica detallada para la ciudad </font><font style="vertical-align: inherit;">del </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sitio</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> web </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">OpenWeatherMap</font></a></font><code>&nbsp;city</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y no devuelve ning√∫n error </font></font><code>Never</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/3h/am/tl/3hamtl2_qeyqozmtw3vnp6ezmeq.png"><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">seg√∫n el nombre de la ciudad,&nbsp; </font></font><code>city</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;formamos </font></font><code>URL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;utilizando la funci√≥n </font></font><code>absoluteURL(city:city)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para solicitar informaci√≥n meteorol√≥gica detallada&nbsp; </font></font><code>WeatherDetail</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">,</font></font></li>
<li> ¬´¬ª <code>dataTaskPublisher(for:)</code>,     <code>Output</code>   <code>(data: Data, response: URLResponse)</code>, &nbsp; <code>Failure</code>&nbsp;-&nbsp;<code>URLError</code>,</li>
<li>  <code>map { }</code>    (<code>data: Data, response: URLResponse) </code>    &nbsp;<code>data</code>,&nbsp;</li>
<li> <code>JSON </code>&nbsp;<code>data</code>   ,   &nbsp;<code>WeatherDetail</code>,     ,</li>
<li>  -     ¬´¬ª   &nbsp;<code>catch (error ... )</code>&nbsp;  ¬´¬ª <code>WeatherDetail.placeholder</code>,</li>
<li>  <code> main</code> ,          <code>UI</code>,</li>
<li>¬´¬ª  ¬´¬ª   <code>eraseToAnyPublisher()</code>    <code>AnyPublisher</code>.</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El "editor" as√≠ncrono as√≠ obtenido </font></font><code>AnyPublisher</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"no despega" por s√≠ mismo, no entrega nada hasta que alguien "se suscribe" a √©l. </font><font style="vertical-align: inherit;">Lo usaremos en una&nbsp; </font></font><code>ObservableObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;clase que juega un papel </font></font><code>View Model</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en&nbsp; </font></font><code>SwiftUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ambos y </font></font><code>UIKit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.&nbsp;</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Crear modelo de vista</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para </font></font><code> View Model</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">crear una clase muy simple&nbsp; </font></font><code>TempViewModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que implemente un protocolo </font></font><code>ObservableObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;con dos&nbsp; </font></font><code>@Published </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">propiedades: &nbsp;</font></font><br>
<br>
<img src="https://habrastorage.org/webt/db/gz/mt/dbgzmtbrpltinyd30ap_j6ykiok.png"><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">uno&nbsp; </font></font><code>@Published var city: String</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">es la ciudad (puede llamarlo condicionalmente una ENTRADA, ya que su valor est√° regulado por el usuario en </font></font><code>View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">),&nbsp;&nbsp;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">el segundo&nbsp; </font></font><code>@Published var currentWeather = WeatherDetail.placeholder </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">es el clima en esta ciudad en este momento (podemos llamar condicionalmente a esta propiedad EXIT, ya que se obtiene al obtener datos del </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sitio</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> web de&nbsp; </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">OpenWeatherMap</font></a><font style="vertical-align: inherit;"> ).</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Una vez que hemos establecido una&nbsp; </font></font><code>@Published</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;propiedad&nbsp; </font></font><code>city</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, podemos comenzar a usarla como una propiedad simple&nbsp; </font></font><code>city</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y como un "editor"&nbsp; </font></font><code>$city</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En una clase&nbsp; </font></font><code>TempViewModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, no solo puede declarar las propiedades que nos interesan, sino tambi√©n prescribir la l√≥gica comercial de su interacci√≥n. Con este fin, al inicializar una instancia de la clase&nbsp; </font></font><code>TempViewModel&nbsp;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en, </font></font><code>init?</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">podemos crear una "suscripci√≥n" que operar√° durante todo el "ciclo de vida" de la instancia de la clase&nbsp; </font></font><code>TempViewModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y reproducir√° la dependencia del clima actual&nbsp; </font></font><code>currentWeather</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;en la ciudad&nbsp; </font></font><code>city</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para hacer esto, </font></font><code>Combine</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">estiramos la cadena desde el "editor" de entrada hasta el "editor" </font></font><code>$city</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;de salida </font></font><code>AnyPublisher&lt;WeatherDetail, Never&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, cuyo valor es el clima actual. Posteriormente, nos "suscribimos" con la ayuda de un "suscriptor"&nbsp;</font></font><code>assign (to: \.currentWeather, on: self)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;y obtenga el valor deseado del clima actual&nbsp; </font></font><code>currentWeather</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;como una </font></font><code>@Published</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;propiedad de </font><font style="vertical-align: inherit;">"salida"&nbsp; </font><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Debemos extraer la cadena NO simplemente de las propiedades </font></font><code>city</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, es decir, de los "editores" </font></font><code>$city</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que participar√°n en la creaci√≥n </font></font><code>UI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;y es all√≠ donde la cambiaremos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øComo haremos esto? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ya tenemos una funci√≥n en nuestro arsenal </font></font><code> fetchWeather (for city: String)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que est√° en la clase&nbsp; </font></font><code>WeatherAPI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y devuelve al "editor" </font></font><code>AnyPublisher&lt;WeatherDetail, Never&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;con informaci√≥n meteorol√≥gica detallada seg√∫n la ciudad&nbsp; </font></font><code>city</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, y de alguna manera solo podemos usar el valor del "editor"&nbsp; </font></font><code>$city</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para convertirlo en un argumento de esta funci√≥n. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&nbsp;Dir√≠jase al editor correcto&nbsp; </font></font><code>fetchWeather (for city: String)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;para&nbsp; </font></font><code>Combine</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ayudarnos operador&nbsp; </font></font><code>flatMap</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/wz/1r/9j/wz1r9juemdlcse18ko2k4xcvgcs.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Operador</font></font><code>flatMap</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">crea un nuevo "editor" basado en los datos recibidos del "editor" anterior. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A continuaci√≥n, nos "suscribimos" a este "editor" reci√©n recibido con la ayuda de un "suscriptor" muy simple&nbsp; </font></font><code>assign (to: \.currentWeather, on: self)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y asignamos el valor recibido del "editor" a la </font></font><code>@Published</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">propiedad&nbsp; </font></font><code>currentWeather</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/yg/ug/yt/ygugytbie7fl6ezfiala6jn-p9o.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
acabamos de crear un </font></font><code>init( )</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"editor" ASINCR√ìNICO y "suscrito" a √©l, lo que resulta en una </font></font><code>AnyCancellable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"suscripci√≥n" ". </font></font><br>
<br>
<code>AnyCancellable </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La "suscripci√≥n" permite que la persona que llama cancele la "suscripci√≥n" en cualquier momento y ya no reciba valores del "editor", pero adem√°s, tan pronto como la </font></font><code>&nbsp;AnyCancellable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"suscripci√≥n" abandone su alcance, se libera la memoria ocupada por el "editor". Por lo tanto, tan pronto como se </font></font><code>init( ) </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">complete, esta "suscripci√≥n" ser√° eliminada por el sistema&nbsp;</font></font><code>ARC</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, y no tener tiempo para asignar la informaci√≥n asincr√≥nica sobre el clima actual recibido con un retraso de tiempo&nbsp; </font></font><code>currentWeather</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Para guardar dicha "suscripci√≥n", es necesario crear una </font></font><code>init()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">variable </font><font style="vertical-align: inherit;">EXTERIOR </font></font><code>var&nbsp;cancellableSet</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que mantendr√° nuestra </font></font><code>AnyCancellable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"suscripci√≥n" en esta variable durante todo el "ciclo de vida" de la instancia de clase&nbsp; </font></font><code>TempViewMode</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La </font></font><code>AnyCancellable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"suscripci√≥n" en la variable </font><font style="vertical-align: inherit;">
se almacena </font></font><code>cancellableSet</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">utilizando el operador&nbsp; </font></font><code>store ( in: &amp;self.cancellableSet)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/dq/xh/y9/dqxhy9d4lnobqznxdlhx_lt83k4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como resultado, la "suscripci√≥n" se conservar√° durante todo el "ciclo de vida" de la instancia de clase&nbsp; </font></font><code>TempViewModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Podemos cambiar el valor del editor seg√∫n lo desee </font></font><code>$city</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, y el clima actual </font></font><code>currentWeather</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;de esta ciudad </font><font style="vertical-align: inherit;">siempre estar√° a nuestra disposici√≥n </font><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para reducir la cantidad de llamadas al servidor al escribir una ciudad&nbsp;</font></font><code>city</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, no deber√≠amos usar directamente el "editor" de la l√≠nea con el nombre de la ciudad&nbsp; </font></font><code>$city</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, sino su versi√≥n modificada con operadores </font></font><code>debounce</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y </font></font><code>removeDuplicates</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ho/m9/ho/hom9ho7cbdou92ol4fd6dizlqd4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El operador se&nbsp; </font></font><code>debounce</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;usa para esperar hasta que el usuario termine de escribir la informaci√≥n necesaria en el teclado, y solo luego realice la tarea de uso intensivo de recursos una vez. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Del mismo modo, un operador </font></font><code>removeDuplicates</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">publicar√° valores solo si difieren de los valores anteriores. </font><font style="vertical-align: inherit;">Por ejemplo, si el usuario ingresa primero </font></font><code>john</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, luego </font></font><code>joe</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, y luego nuevamente </font></font><code>john</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, recibiremos </font></font><code>john</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">solo una vez. </font><font style="vertical-align: inherit;">Esto ayuda a que el nuestro sea </font></font><code>UI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">m√°s eficiente.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Crear una interfaz de usuario con SwiftUI</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora que lo tenemos </font></font><code>View Model</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font><font style="vertical-align: inherit;">comencemos </font></font><code>UI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Primero a las </font></font><code>SwiftUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, y luego a las </font></font><code>UIKit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En </font></font><code>Xcode</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">creamos un nuevo proyecto con </font></font><code>SwiftUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y en la estructura resultante colocamos el </font></font><code>ContentView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp; nuestro&nbsp; </font></font><code>View Model</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">como </font></font><code> @ObservedObject </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">variable </font></font><code>model</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Reemplace&nbsp; </font></font><code>Text ("Hello, World!") </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">con el t√≠tulo&nbsp; </font></font><code>Text ("WeatherApp")</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, agregue un cuadro de texto para ingresar la ciudad&nbsp; </font></font><code>TextField ("City", text: self.$model.city)&nbsp;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y una etiqueta para mostrar la temperatura: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zz/oc/si/zzocsimzbd7bpssf_-ckigkggdi.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Utilizamos directamente los valores de nuestra variable </font></font><code>model:&nbsp;TempViewModel()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Usamos en el cuadro de texto para ingresar la ciudad </font></font><code>$model.city</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, y en la etiqueta para mostrar la temperatura - </font></font><code>model.currentWeather.main?.temp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora, cualquier cambio en las&nbsp; </font></font><code>@Published</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;propiedades conducir√° a "redibujar" </font></font><code>View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/sd/jx/uk/sdjxukkrljf2xfbo944koyt4ee4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
esto est√° garantizado por el hecho de que el nuestro </font></font><code>View Model </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">es</font></font><code>@ObservedObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, es decir, se realiza un "enlace" AUTOM√ÅTICO ( </font></font><code>binding</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font></font><code>@Published</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">de nuestras propiedades </font></font><code>View Model</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y elementos de interfaz de usuario ( </font></font><code>UI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">). </font><font style="vertical-align: inherit;">Tal "enlace" AUTOM√ÅTICO solo es posible en </font></font><code>SwiftUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Crear una interfaz de usuario con UIKit</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øQu√© hacer con esto en </font></font><code>UIKit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">? </font><font style="vertical-align: inherit;">No esta ahi&nbsp;  </font></font><code>@ObservedObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">En&nbsp; </font></font><code>UIKit </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">realizaremos el "enlace" ( </font></font><code>binding</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) manualmente. </font><font style="vertical-align: inherit;">Hay muchas formas de hacer este "enlace manual":</font></font><br>
<br>
<ul>
<li><code>Key-Value Observing </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o </font></font><code>KVO</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: un mecanismo para usar&nbsp; </font></font><code>key paths</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para monitorear una propiedad y recibir notificaci√≥n de que ha cambiado.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Programaci√≥n funcional reactiva o </font></font><code>FRP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: uso de un framework </font></font><code>Combine</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li>
<li><code>Delegation</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: Uso de m√©todos delegados para enviar una notificaci√≥n de que el valor de una propiedad ha cambiado.</font></font></li>
<li><code>Boxing</code>:    <code>didSet { }</code>    ,    .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dado el t√≠tulo del art√≠culo, naturalmente trabajaremos en el campo </font></font><code>Combine</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. En la </font></font><code>UIKit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aplicaci√≥n, mostraremos lo f√°cil que es hacer un "enlace manual" </font></font><code>Combine</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En la </font></font><code>UIKit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aplicaci√≥n, tambi√©n tendremos dos </font></font><code>UI </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">elementos: </font></font><code>UITextField</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para ingresar a la ciudad y </font></font><code> UILabel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para mostrar la temperatura. En </font></font><code>ViewController</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">naturalmente a tener </font></font><code>Outlet</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">estos elementos: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/dc/_w/xs/dc_wxscdvx2gfvhkzpn2sppn_k8.png"><br>
<br>
<img src="https://habrastorage.org/webt/dp/hi/du/dphidu2qg7ym1bn1sorekv0opts.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
en la forma de una variable ordinaria </font></font><code>viewModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, tenemos el mismo que </font></font><code>View Model</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en el apartado anterior: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/py/lr/n1/pylrn1luepommf97vwrthhyz3oy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Antes de hacer el ‚ÄúManual de la uni√≥n‚Äù con </font></font><code>Combine</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, vamos a hacer el campo de texto </font></font><code>UITextField</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a nuestro aliado y el ‚Äúeditor‚Äù de nuestro contenido </font></font><code>text</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/z0/dn/wg/z0dnwgxqkqam7mcy8qbyo6ajvx4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esto nos permitir√° </font></font><code>viewDidLoad</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">implementar </font><font style="vertical-align: inherit;">muy f√°cilmente el </font><font style="vertical-align: inherit;">"enlace manual" usando la funci√≥n</font></font><code>binding ()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/q0/qu/-f/q0qu-ftfjqr_giedbnah50cwe2m.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En efecto, ‚Äúsuscribirse‚Äù a la ‚Äúeditorial‚Äù </font></font><code> cityTextField.textPublisher</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">con la ayuda de una manera muy sencilla ‚Äúsuscriptor‚Äù&nbsp; </font></font><code>assign (to: \.city, on: viewModel)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y asignar el texto escrito por el usuario en el campo de texto </font></font><code>cityTextField</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a nuestra ‚Äúentrada‚Äù&nbsp; </font></font><code>@Published</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">de propiedad de </font></font><code>city</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nuestra </font></font><code>View Model</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adem√°s, hacemos cambios en otra direcci√≥n: nos "suscribimos" a la </font></font><code>@Published</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">propiedad&nbsp; </font><font style="vertical-align: inherit;">"salida"&nbsp; </font></font><code>$currentWeather</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;con la ayuda del "suscriptor" </font></font><code>sink </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y su cierre </font></font><code>receiveValue</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, formamos el valor de temperatura y lo asignamos a la etiqueta </font></font><code> temperatureLabel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Recibido en la&nbsp; </font></font><code>viewDidLoad&nbsp;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"suscripci√≥n" se almacena en una variable </font></font><code>var&nbsp;cancellableSet</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Habi√©ndolos creado una vez, les permitimos actuar durante todo el "ciclo de vida" de la instancia de clase </font></font><code>ViewController</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y junto con la "suscripci√≥n" en nuestro&nbsp;</font></font><code>View Model</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Implementar toda la l√≥gica de negocios de la aplicaci√≥n. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por cierto, el protocolo </font></font><code>ObservableObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">no funciona </font></font><code>UIKit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, pero no interfiere. </font></font><code>UIKit </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">completamente indiferente al protocolo </font></font><code>ObservableObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y, en principio, podr√≠a eliminarse&nbsp; </font></font><code>View Model</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en las </font></font><code>UIKit </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aplicaciones: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/wp/fs/pi/wpfspirlf9jp-e2magbcorvzany.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero no haremos esto, porque queremos mantenerlo sin cambios </font></font><code>View Model</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tanto para la aplicaci√≥n actual </font></font><code> UIKit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">como para las futuras aplicaciones </font></font><code>SwiftUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eso es todo. El c√≥digo est√° en </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Github</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Conclusi√≥n </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un marco reactivo funcional le </font></font><code>Combine</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">permite implementar de manera muy simple y concisa la </font></font><code> MVVM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">arquitectura, tanto </font></font><code>SwiftUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en </font></font><code>UIKit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">forma de c√≥digo comprensible como legible. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Enlaces: </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Combinar + UIKit + MVVM</font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Uso de Combine </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">iOS MVVM Tutorial: Refactorizaci√≥n de MVC </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MVVM con Combine Tutorial para iOS</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
PS Si desea ver informaci√≥n sobre el clima, debe registrarse en </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenWeatherMap</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &nbsp;y obtener </font></font><code> API key</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Este proceso no te llevar√° m√°s de 2 minutos.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es492514/index.html">¬øC√≥mo establecer un flujo de documentos electr√≥nicos legalmente significativo de contrapartes en Rusia y Kazajst√°n?</a></li>
<li><a href="../es492518/index.html">El brote de virus requiere trabajo remoto, lo que significa la firma digital de documentos</a></li>
<li><a href="../es492520/index.html">Modelado 3D parametrizado de la copa del rodamiento en nanoCAD Plus 20</a></li>
<li><a href="../es492522/index.html">Comunicaci√≥n remota en equipo</a></li>
<li><a href="../es492524/index.html">C√≥mo gan√© $ 1,000,000 sin experiencia y conexiones, y luego los gast√© para hacer mi traductor</a></li>
<li><a href="../es492534/index.html">Entonces, ¬øhay huracanes reales en Mosc√∫ o no? Analizamos el caso del 13 de marzo de 2020 en persecuci√≥n</a></li>
<li><a href="../es492538/index.html">Wrike TechClub: Infraestructura de entrega: procesos y herramientas (DevOps + QAA). Papeles en ingles</a></li>
<li><a href="../es492540/index.html">El juego "¬°Espera un momento!" en arduino</a></li>
<li><a href="../es492546/index.html">Comprobaci√≥n de la vulnerabilidad de cualquier sitio que use Nikto</a></li>
<li><a href="../es492548/index.html">Aprendizaje autom√°tico de Unity: ense√±ar a los agentes de MO a saltar por encima de las paredes</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>