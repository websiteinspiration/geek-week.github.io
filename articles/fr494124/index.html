<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>✊🏾 🌇 👨🏾‍🔬 Assemblage d'un ordinateur 8 bits: comment réduire le nombre de puces à six ↘️ 👾 🧙🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="La combinaison de l'ancienne astuce avec le codage couleur NTSC et le fer moderne permet d'assembler une machine étonnamment efficace.Les
 
 systèmes ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Assemblage d'un ordinateur 8 bits: comment réduire le nombre de puces à six</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/vdsina/blog/494124/"><img src="https://habrastorage.org/webt/10/p7/70/10p770cfa9wj0aj3xrs0ajhonoq.jpeg"><br>
<font color="99999999"><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La combinaison de l'ancienne astuce avec le codage couleur NTSC et le fer moderne permet d'assembler une machine étonnamment efficace.Les</font></font></sup></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
systèmes 8 bits ont quelque chose de toujours attrayant: vous pouvez construire un système autonome suffisamment puissant pour prendre en charge une interaction utilisateur adéquate, mais assez simple pour assembler et programmer vous-même. La plupart des machines 8 bits modernes créées par des amateurs sont liées à des processeurs classiques qui vivaient à l'</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> âge d'or des</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ordinateurs personnels dans les années 1980, lorsque des millions de téléviseurs étaient utilisés comme écrans. Au départ, l'idée était de construire ma voiture à partir du</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> processeur Motorola 6809</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">de la même époque. J'ai essayé d'utiliser le moins de puces possible, mais malgré mes efforts, j'avais encore besoin de 13 puces supplémentaires pour travailler avec la RAM et le transfert de données série. Alors j'ai pensé: et si j'utilisais un processeur 8 bits plus moderne? De combien puis-je réduire le nombre de puces dont j'ai besoin?</font></font><br>
<a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En conséquence, j'ai assemblé une voiture dessus, qui s'appelait </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Améthyste</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Comme tout ordinateur domestique, il possède un clavier intégré et peut produire du son et de la vidéo. Il dispose également d'un langage de programmation intégré de haut niveau afin que les utilisateurs puissent y écrire leurs propres programmes. J'ai réussi à réduire le nombre de microcircuits à six: </font><font style="vertical-align: inherit;">CPU </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ATMEGA1284P</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , interface USB et quatre circuits intégrés simples. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'ATMEGA1284P 2008 (ou 1284P) a 128 kilo-octets de mémoire flash et 16 kilo-octets de RAM. Il peut fonctionner avec une fréquence allant jusqu'à 20 mégahertz. Il possède des contrôleurs série intégrés intégrés et 32 ​​entrées / sorties numériques.</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/6GKgxBEGH1M" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Grâce à la mémoire intégrée et aux interfaces série, le besoin de nombreuses puces auxiliaires a disparu. </font><font style="vertical-align: inherit;">Je pouvais générer directement de l'audio, interrompre et appliquer un signal à l'entrée / sortie avec différentes fréquences. </font><font style="vertical-align: inherit;">Ainsi, j'ai appris à donner un ton qui, cependant, possédait la netteté caractéristique d'une onde carrée. </font><font style="vertical-align: inherit;">Mais qu'en est-il de la génération d'un signal vidéo analogique? </font><font style="vertical-align: inherit;">Cela nécessitera-t-il vraiment un équipement spécial?</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Astuce standard</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
À la fin de 2018, j'ai vu une astuce que Steve Wozniak a utilisée dans les années 1970 pour implémenter le support graphique couleur dans Apple II. Aux États-Unis, cette astuce a été utilisée pour la diffusion couleur dans le système NTSC dans les années 1950. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Au départ, la télévision américaine n'était qu'en noir et blanc et utilisait la norme NTSC assez simple (développée par le Comité national des systèmes de télévision). Pour former une image à l'écran, un faisceau d'électrons trace des points sur sa surface, ligne après ligne. L'amplitude du signal vidéo reçu a déterminé la luminosité du faisceau à n'importe quel endroit donné le long de la rangée. Puis en 1953, NTSC a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">été mis</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> à </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;">niveau</font></a><font style="vertical-align: inherit;"> pour prendre en charge la télévision couleur, tout en conservant la compatibilité avec les téléviseurs noir et blanc existants.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les ingénieurs ont décidé de présenter les informations de couleur sous la forme d'un signal sinusoïdal haute fréquence. Pour cela, la sous-porteuse a été divisée en deux composantes avec un déphasage de 90 °, chacune ayant subi une modulation. Le résultat a été un signal modulé en amplitude et en phase. L'amplitude du signal a déterminé la saturation de la couleur. Ce signal de chrominance haute fréquence a ensuite été ajouté au signal de luminance basse fréquence pour créer le signal vidéo composite. Cette méthode est toujours utilisée pour de nombreux téléviseurs et écrans moins chers.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/bu/u_/aw/buu_awktun52nw_57p5oi95vopm.png"><br>
<br>
<blockquote><i><b>« »</b>:    ,    [ ],   - ,         [ ].      .         [ ]   ,       :      .             [ ],          .</i></blockquote><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un téléviseur noir et blanc perçoit un signal couleur comme du bruit et l'ignore. Mais un téléviseur couleur peut séparer le signal couleur du signal de luminance à l'aide de boucles de filtre.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans les années 1970, les ingénieurs ont réalisé que ce schéma de filtrage pourrait être très utile pour les ordinateurs personnels car il permet à un signal numérique rectangulaire de simuler la plupart du signal analogique composite. Le flux de zéros envoyé par l'ordinateur au téléviseur sera perçu comme une tension analogique basse fréquence constante, c'est-à-dire noire. Le flux d'unités sera considéré comme une tension haute fréquence constante, c'est-à-dire blanche. Mais avec un débit binaire suffisamment élevé, des structures binaires plus complexes apparaîtront que les schémas de filtrage passe-haut reconnaîtront comme des signaux de couleur. Cette astuce a permis à Apple II d'afficher jusqu'à 16 couleurs.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Au début, je pensais que je devais commuter la broche d'entrée / sortie très rapidement afin de générer directement un signal vidéo. Cependant, je me suis vite rendu compte qu'avec mon 1284P fonctionnant à 14,318 MHz, je ne pouvais pas le commuter assez rapidement pour afficher plus de quatre couleurs. Le fait est que ses interfaces série intégrées auraient besoin de deux cycles d'horloge pour envoyer un bit, ce qui limiterait ma fréquence d'horloge à 7,159 MHz. Apple II a utilisé un accès direct à la mémoire rapide pour connecter sa puce externe à la sortie vidéo, tandis que son processeur était occupé par le traitement interne. Mais, comme la RAM de mon ordinateur est intégrée dans la puce, je ne pouvais pas utiliser cette approche.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai donc regardé dans mes tiroirs et sorti quatre microcircuits de la série 7400 - deux multiplexeurs et deux registres à décalage série parallèle. </font><font style="vertical-align: inherit;">J'ai pu installer huit broches 1284P en parallèle et envoyer simultanément des données vers les multiplexeurs et les registres à décalage, qui les convertissent en un flux binaire série haute vitesse. </font><font style="vertical-align: inherit;">Ainsi, j'ai appris à générer des bits assez rapidement pour afficher environ 215 couleurs différentes à l'écran. </font><font style="vertical-align: inherit;">Cependant, j’ai dû payer avec ma puissance de calcul: le traitement vidéo consomme constamment 75% des ressources du processeur.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/67/ti/wd/67tiwdceh1mxpre-pg9qypcb43o.png"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ordinateur compact</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Amethyst est un ordinateur monocarte. Il est assemblé à partir de seulement six circuits intégrés - un processeur, une interface USB et quatre microcircuits de la série 7400, qui sont utilisés pour créer une image en 215 couleurs. Les commutateurs du clavier sont soudés directement sur la carte, qui prend également en charge l'audio et quatre connexions série E / S pour les périphériques tels que les contrôleurs de jeu et les périphériques de stockage. Vous pouvez écrire des programmes et les exécuter grâce à la machine virtuelle intégrée Forth.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'avais besoin d'un environnement de programmation léger pour les utilisateurs, ce qui m'a fait choisir Forth au lieu du traditionnel Basic. Forth est un ancien langage de programmation pour les systèmes embarqués, il prend en charge l'interactivité et est capable de compiler efficacement du code. Avec lui, vous pouvez faire beaucoup en utilisant le minimum de ressources. Étant donné que le 1284P ne permet pas au code machine compilé d'être exécuté directement à partir de sa RAM, le code utilisateur est plutôt compilé en bytecode intermédiaire. Ce bytecode est ensuite envoyé en entrée à une machine virtuelle exécutée à partir de la mémoire flash 1284P. Le code de la machine virtuelle a été écrit en assembleur et optimisé manuellement pour le rendre aussi rapide que possible.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En tant qu'ingénieur travaillant pour une entreprise qui produit des imprimantes laser 3D, j'ai accès à des machines de découpe laser avancées. </font><font style="vertical-align: inherit;">J'ai donc facilement conçu et fabriqué une caisse en bois (j'ai espionné la finition bois de l' </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Atari 2600</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font><font style="vertical-align: inherit;">Les commutateurs mécaniques du clavier ont été soudés directement sur une seule carte de circuit imprimé Amethyst. </font><font style="vertical-align: inherit;">Ce clavier a une caractéristique curieuse - l'absence du grand écart habituel. </font><font style="vertical-align: inherit;">Au lieu de cela, juste un bouton, modestement situé au-dessus de la touche Entrée. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le schéma complet, les fichiers PCB pour la carte de circuit imprimé et le code source sont disponibles dans mon </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">référentiel GitHub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Vous pouvez donc créer votre propre Améthyste ou même améliorer mon projet. </font><font style="vertical-align: inherit;">Et si vous pouviez trouver comment économiser quelques jetons supplémentaires?</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/9fa/cf4/a34/9facf4a348ef01048b4eb5e16ae66daa.png"></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr494096/index.html">Déploiement intranet. Expérience, erreurs, recommandations</a></li>
<li><a href="../fr494098/index.html">Approche impérative des données réactives sur l'exemple de Jetbrains KTor et R2DBC</a></li>
<li><a href="../fr494100/index.html">Ce dont vous avez besoin pour créer le modèle idéal d'un centre éducatif pour former des informaticiens</a></li>
<li><a href="../fr494114/index.html">Comment réduire le nombre et augmenter la lisibilité du code dans react-redux, redux-saga</a></li>
<li><a href="../fr494118/index.html">COVID-19 Telegram-bot // Nous répondons automatiquement aux questions fréquemment posées</a></li>
<li><a href="../fr494126/index.html">TOP SCIENCE. Février Media Ten: Féministes crabe zombies, salamandres préhistoriques et alcooliques exagérés</a></li>
<li><a href="../fr494128/index.html">Hackspace Neuron - un lieu de rencontre pour les pirates à Moscou</a></li>
<li><a href="../fr494130/index.html">Qu'advient-il des événements en ligne: certaines de nos statistiques</a></li>
<li><a href="../fr494132/index.html">Compilateur Befunge en Python</a></li>
<li><a href="../fr494136/index.html">Quoi égoutter dans les yeux, pour ne pas démanger</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>