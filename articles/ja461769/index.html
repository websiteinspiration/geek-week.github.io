<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘’ ğŸŒªï¸ ğŸˆ ï¼ˆã»ã¨ã‚“ã©ï¼‰å½¹ã«ç«‹ãŸãªã„JavaScriptã‚¦ã‚§ãƒ–ã‚«ãƒ¡ãƒ©ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ã‚’ä½œæˆã—ãŸæ–¹æ³• ğŸ‘¨ğŸ¿â€ğŸ³ âœ’ï¸ ğŸ‘Š</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ã“ã®è¨˜äº‹ã§ã¯ã€Adobe Flash Playerã®ã‚ˆã†ãªã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ã®ãƒ–ãƒ©ã‚¦ã‚¶ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ä½¿ç”¨ã›ãšã«ã€WebSocketã‚’ä»‹ã—ã¦ãƒ“ãƒ‡ã‚ªã‚’ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ã™ã‚‹è©¦ã¿ã‚’å…±æœ‰ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚ã“ã‚Œã‹ã‚‰ä½•ã‚’èª­ã‚“ã ã‹ã€‚
 
 Adobe Flash-ä»¥å‰ã®Macromedia Flashã¯ã€Webãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ã§...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>ï¼ˆã»ã¨ã‚“ã©ï¼‰å½¹ã«ç«‹ãŸãªã„JavaScriptã‚¦ã‚§ãƒ–ã‚«ãƒ¡ãƒ©ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ã‚’ä½œæˆã—ãŸæ–¹æ³•</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/461769/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã“ã®è¨˜äº‹ã§ã¯ã€Adobe Flash Playerã®ã‚ˆã†ãªã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ã®ãƒ–ãƒ©ã‚¦ã‚¶ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ä½¿ç”¨ã›ãšã«ã€WebSocketã‚’ä»‹ã—ã¦ãƒ“ãƒ‡ã‚ªã‚’ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ã™ã‚‹è©¦ã¿ã‚’å…±æœ‰ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã‚Œã‹ã‚‰ä½•ã‚’èª­ã‚“ã ã‹ã€‚</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adobe Flash-ä»¥å‰ã®Macromedia Flashã¯ã€Webãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ã§å®Ÿè¡Œã™ã‚‹ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œæˆã™ã‚‹ãŸã‚ã®ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§ã™ã€‚ Media Stream APIã®å®Ÿè£…ä»¥å‰ã¯ã€Webã‚«ãƒ¡ãƒ©ã‹ã‚‰ãƒ“ãƒ‡ã‚ªã‚„éŸ³å£°ã‚’ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ã—ãŸã‚Šã€ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ã§ã•ã¾ã–ã¾ãªä¼šè­°ã‚„ãƒãƒ£ãƒƒãƒˆã‚’ä½œæˆã—ãŸã‚Šã™ã‚‹ãŸã‚ã®å®Ÿè³ªçš„ã«å”¯ä¸€ã®ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§ã—ãŸã€‚ãƒ¡ãƒ‡ã‚£ã‚¢æƒ…å ±ã‚’é€ä¿¡ã™ã‚‹ãŸã‚ã®ãƒ—ãƒ­ãƒˆã‚³ãƒ«RTMPï¼ˆReal Time Messaging Protocolï¼‰ã¯ã€å®Ÿéš›ã«ã¯é•·ã„é–“é–‰é–ã•ã‚Œã¦ã„ã¾ã—ãŸã€‚ã¤ã¾ã‚Šã€ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ã‚µãƒ¼ãƒ“ã‚¹ã‚’å‘ä¸Šã•ã›ãŸã„å ´åˆã¯ã€Adobeè‡ªä½“ã®ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã§ã‚ã‚‹Adobe Media Serverï¼ˆAMSï¼‰ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2012å¹´ã«ã—ã°ã‚‰ãã—ã¦ã€ã‚¢ãƒ‰ãƒ“ã¯</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ä»•æ§˜</font></a><font style="vertical-align: inherit;">ã‚’ã€Œæ”¾æ£„ã—ã€å…¬é–‹è£åˆ¤æ‰€ã«æå‡ºã€ã—ã¾ã—ãŸã€‚</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¨ãƒ©ãƒ¼ã‚’å«ã¿ã€å®Ÿéš›ã«ã¯å®Œå…¨ã§ã¯ãªã‹ã£ãŸRTMPãƒ—ãƒ­ãƒˆã‚³ãƒ«ã€‚ãã®æ™‚ã¾ã§ã«ã€é–‹ç™ºè€…ã¯ã“ã®ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã®å®Ÿè£…ã‚’é–‹å§‹ã—ã€Wowzaã‚µãƒ¼ãƒãƒ¼ãŒç™»å ´ã—ã¾ã—ãŸã€‚ 2011å¹´ã€ã‚¢ãƒ‰ãƒ“ã¯RTMPã«é–¢é€£ã™ã‚‹ç‰¹è¨±ã®é•æ³•ä½¿ç”¨ã«ã¤ã„ã¦Wowzaã«å¯¾ã—ã¦è¨´è¨Ÿã‚’èµ·ã“ã—ã¾ã—ãŸã€‚4å¹´å¾Œã€ç´›äº‰ã¯ä¸–ç•Œä¸­ã§è§£æ±ºã•ã‚Œã¾ã—ãŸã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adobe Flashãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã¯20å¹´ä»¥ä¸Šå‰ã‹ã‚‰å­˜åœ¨ã—ã¦ãŠã‚Šã€ã“ã®é–“ã«å¤šãã®é‡å¤§ãªè„†å¼±æ€§ãŒç™ºè¦‹ã•ã‚Œã€</font><font style="vertical-align: inherit;">2020å¹´ã¾ã§ã«</font><font style="vertical-align: inherit;">ã‚µãƒãƒ¼ãƒˆ</font><font style="vertical-align: inherit;">ã‚’åœæ­¢</font><font style="vertical-align: inherit;">ã™ã‚‹ã“ã¨ãŒ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç´„æŸã•</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚ŒãŸãŸã‚ã€ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ã‚µãƒ¼ãƒ“ã‚¹ã«ä»£ã‚ã‚‹ã‚‚ã®ã¯ãã‚Œã»ã©å¤šãã‚ã‚Šã¾ã›ã‚“ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç§ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã€ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ã§ã®Flashã®ä½¿ç”¨ã‚’å®Œå…¨ã«æ–­å¿µã™ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚</font><font style="vertical-align: inherit;">ä¸Šè¨˜ã§ç¤ºã—ãŸä¸»ãªç†ç”±ã€ã¾ãŸãƒ¢ãƒã‚¤ãƒ«ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§ã¯FlashãŒã¾ã£ãŸãã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ãªã„ãŸã‚ã€Windowsï¼ˆãƒ¯ã‚¤ãƒ³ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ï¼‰ã§ã®é–‹ç™ºç”¨ã«Adobe Flashã‚’å±•é–‹ã—ãŸãã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚</font><font style="vertical-align: inherit;">ãã“ã§ç§ã¯JavaScriptã§ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’æ›¸ãå§‹ã‚ã¾ã—ãŸã€‚</font><font style="vertical-align: inherit;">ã“ã‚Œã¯å˜ãªã‚‹ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—ã«ãªã‚Šã¾ã™ã€‚ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ã¯p2pã«åŸºã¥ã„ã¦ã¯ã‚‹ã‹ã«åŠ¹ç‡çš„ã«å®Ÿè¡Œã§ãã‚‹ã“ã¨ã‚’å¾Œã§å­¦ã³ã¾ã—ãŸã€‚ãƒ”ã‚¢-ã‚µãƒ¼ãƒãƒ¼-ãƒ”ã‚¢ã®ã¿ãŒå­˜åœ¨ã—ã¾ã™ãŒã€ã¾ã æº–å‚™ãŒæ•´ã£ã¦ã„ãªã„ãŸã‚ã€ã•ã‚‰ã«åˆ¥ã®æ©Ÿä¼šã«ä½¿ç”¨ã—ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é–‹å§‹ã™ã‚‹ã«ã¯ã€websocketsã‚µãƒ¼ãƒãƒ¼è‡ªä½“ãŒå¿…è¦ã§ã™ã€‚</font><font style="vertical-align: inherit;">ç§ã¯ãƒ¡ãƒ­ãƒ‡ã‚£å›²ç¢ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«åŸºã¥ã„ã¦æœ€ã‚‚ç°¡å˜ãªã‚‚ã®ã‚’ä½œã‚Šã¾ã—ãŸï¼š</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚µãƒ¼ãƒãƒ¼ã‚³ãƒ¼ãƒ‰</font></font></b><div class="spoiler_text"><pre><code class="go hljs"><span class="hljs-keyword">package</span> main<font></font>
<font></font>
<span class="hljs-keyword">import</span> (
	<span class="hljs-string">"errors"</span>
	<span class="hljs-string">"github.com/go-chi/chi"</span>
	<span class="hljs-string">"gopkg.in/olahol/melody.v1"</span>
	<span class="hljs-string">"log"</span>
	<span class="hljs-string">"net/http"</span>
	<span class="hljs-string">"time"</span><font></font>
)<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {<font></font>
	r := chi.NewRouter()<font></font>
	m := melody.New()<font></font>
<font></font>
	m.Config.MaxMessageSize = <span class="hljs-number">204800</span><font></font>
<font></font>
	r.Get(<span class="hljs-string">"/"</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(w http.ResponseWriter, r *http.Request)</span></span> {<font></font>
		http.ServeFile(w, r, <span class="hljs-string">"public/index.html"</span>)<font></font>
	})<font></font>
	r.Get(<span class="hljs-string">"/ws"</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(w http.ResponseWriter, r *http.Request)</span></span> {<font></font>
		m.HandleRequest(w, r)<font></font>
	})<font></font>
<font></font>
         <span class="hljs-comment">//    </span>
	m.HandleMessageBinary(<span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(s *melody.Session, msg []<span class="hljs-keyword">byte</span>)</span></span> {<font></font>
		m.BroadcastBinary(msg)<font></font>
	})<font></font>
<font></font>
	log.Println(<span class="hljs-string">"Starting server..."</span>)<font></font>
<font></font>
	http.ListenAndServe(<span class="hljs-string">":3000"</span>, r)<font></font>
}<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆï¼ˆæ”¾é€å´ï¼‰ã§ã¯ã€ã¾ãšã‚«ãƒ¡ãƒ©ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã‚Œã¯</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MediaStream API</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚’ä»‹ã—ã¦è¡Œã‚ã‚Œ</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ã¾ã™</font></a><font style="vertical-align: inherit;">ã€‚</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">Media Devices API</font></a></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ã‚’é€šã˜ã¦ã‚«ãƒ¡ãƒ©/ãƒã‚¤ã‚¯ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ï¼ˆè§£åƒåº¦ï¼‰ã‚’å–å¾—ã—</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¾ã™</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">ã“ã®APIã¯ã€</font><font style="vertical-align: inherit;">ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã‚’è¡¨ç¤º</font><font style="vertical-align: inherit;">ã™ã‚‹</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MediaDevices.getUserMediaï¼ˆï¼‰</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ¡ã‚½ãƒƒãƒ‰ã‚’æä¾›ã—ã¾ã™</font><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">ã‚«ãƒ¡ãƒ©ã‚„ãƒã‚¤ã‚¯ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹è¨±å¯ã‚’ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«æ±‚ã‚ã‚‹ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã€‚</font><font style="vertical-align: inherit;">ç§ã¯Google Chromeã§ã™ã¹ã¦ã®å®Ÿé¨“ã‚’è¡Œã„ã¾ã—ãŸãŒã€Firefoxã§ã¯ã™ã¹ã¦ãŒã»ã¼åŒã˜ã‚ˆã†ã«æ©Ÿèƒ½ã™ã‚‹ã¨æ€ã„ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ¬¡ã«ã€getUserMediaï¼ˆï¼‰ã¯Promiseã‚’è¿”ã—ã¾ã™ã€‚Promiseã«ã¯ã€MediaStreamã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒæ¸¡ã•ã‚Œã¾ã™-ãƒ“ãƒ‡ã‚ªã¨ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªãƒ‡ãƒ¼ã‚¿ã®ã‚¹ãƒˆãƒªãƒ¼ãƒ ã§ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’srcã®ãƒ“ãƒ‡ã‚ªè¦ç´ ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã«å‰²ã‚Šå½“ã¦ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã‚³ãƒ¼ãƒ‰ï¼š</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ”¾é€å´</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs">&lt;style&gt;<font></font>
  #videoObjectHtml5ApiServer { <span class="hljs-attr">width</span>: <span class="hljs-number">320</span>px; height: <span class="hljs-number">240</span>px; background: #<span class="hljs-number">666</span>; }<font></font>
&lt;/style&gt;<font></font>
&lt;/head&gt;<font></font>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-comment">&lt;!--    ""     --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">video</span> <span class="hljs-attr">autoplay</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"videoObjectHtml5ApiServer"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">video</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"application/javascript"</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span>
        video = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'videoObjectHtml5ApiServer'</span>);

<span class="hljs-comment">//   MediaDevices API,      (    )</span>
<span class="hljs-comment">// getUserMedia  ,           video   </span>

<span class="hljs-keyword">if</span> (navigator.mediaDevices.getUserMedia) {
        navigator.mediaDevices.getUserMedia({<span class="hljs-attr">video</span>: <span class="hljs-literal">true</span>}).then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">stream</span>) </span>{
          <span class="hljs-comment">//     video ,        </span>
          video.srcObject = stream;
        });
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</span></code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚½ã‚±ãƒƒãƒˆã‚’ä»‹ã—ã¦ãƒ“ãƒ‡ã‚ªã‚¹ãƒˆãƒªãƒ¼ãƒ ã‚’ãƒ–ãƒ­ãƒ¼ãƒ‰ã‚­ãƒ£ã‚¹ãƒˆã™ã‚‹ã«ã¯ã€ã©ã“ã‹ã§ãã‚Œã‚’ä½•ã‚‰ã‹ã®å½¢ã§ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã—ã€ãã‚Œã‚’ãƒãƒƒãƒ•ã‚¡ãƒªãƒ³ã‚°ã—ã¦ã€éƒ¨åˆ†çš„ã«é€ä¿¡ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">ç”Ÿã®ãƒ“ãƒ‡ã‚ªã‚¹ãƒˆãƒªãƒ¼ãƒ ã¯WebSocketã‚’ä»‹ã—ã¦é€ä¿¡ã§ãã¾ã›ã‚“ã€‚</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã“ã“ã§MediaRecorder API</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãŒ</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">å½¹ã«ç«‹ã¡ã¾ã™</font></a><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">ã“ã®APIã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€ã‚¹ãƒˆãƒªãƒ¼ãƒ ã‚’ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã—ã¦æ–­ç‰‡ã«åˆ†å‰²ã§ãã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãƒ“ãƒ‡ã‚ªã‚¹ãƒˆãƒªãƒ¼ãƒ ã‚’åœ§ç¸®ã™ã‚‹ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚’è¡Œã†ã®ã§ã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ä¸Šã§ã‚ˆã‚Šå°‘ãªã„ãƒã‚¤ãƒˆæ•°ã‚’ãƒ‰ãƒ©ã‚¤ãƒ–ã§ãã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãƒãƒ©ãƒãƒ©ã«ãªã£ãŸã‚‰ã€å„ãƒ”ãƒ¼ã‚¹ã‚’ã‚¦ã‚§ãƒ–ã‚½ã‚±ãƒƒãƒˆã«é€ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã‚³ãƒ¼ãƒ‰ï¼š</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ“ãƒ‡ã‚ªã‚¹ãƒˆãƒªãƒ¼ãƒ ã‚’ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã—ã€ç´°ã‹ãåˆ†å‰²ã—ã¾ã™</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs">&lt;style&gt;<font></font>
  #videoObjectHtml5ApiServer { <span class="hljs-attr">width</span>: <span class="hljs-number">320</span>px; height: <span class="hljs-number">240</span>px; background: #<span class="hljs-number">666</span>; }<font></font>
&lt;/style&gt;<font></font>
&lt;/head&gt;<font></font>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-comment">&lt;!--    ""     --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">video</span> <span class="hljs-attr">autoplay</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"videoObjectHtml5ApiServer"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">video</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"application/javascript"</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span>
        video = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'videoObjectHtml5ApiServer'</span>);

<span class="hljs-comment">//   MediaDevices API,      (    )</span>
<span class="hljs-comment">// getUserMedia  ,           video   </span>

<span class="hljs-keyword">if</span> (navigator.mediaDevices.getUserMedia) {
        navigator.mediaDevices.getUserMedia({<span class="hljs-attr">video</span>: <span class="hljs-literal">true</span>}).then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">stream</span>) </span>{
          <span class="hljs-comment">//     video ,        </span>
          video.srcObject = s;
          <span class="hljs-keyword">var</span>
            recorderOptions = {
                <span class="hljs-attr">mimeType</span>: <span class="hljs-string">'video/webm; codecs=vp8'</span> <span class="hljs-comment">//      webm  vp8</span>
              },
              mediaRecorder = <span class="hljs-keyword">new</span> MediaRecorder(s, recorderOptions ); <span class="hljs-comment">//  MediaRecorder</span>

               mediaRecorder.ondataavailable = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
                <span class="hljs-keyword">if</span> (e.data &amp;&amp; e.data.size &gt; <span class="hljs-number">0</span>) {
                  <span class="hljs-comment">//     e.data</span>
                }
            }

            mediaRecorder.start(<span class="hljs-number">100</span>); <span class="hljs-comment">//      100  </span>

        });
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</span></code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ¬¡ã«ã€WebSocketã«è»¢é€ã‚’è¿½åŠ ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">é©šã„ãŸã“ã¨ã«ã€ã“ã‚Œã¯</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WebSocket</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ã¿ã‚’å¿…è¦ã¨ã—ã¾ã™</font><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">sendãƒ¡ã‚½ãƒƒãƒ‰ã¨closeãƒ¡ã‚½ãƒƒãƒ‰ã¯2ã¤ã—ã‹ã‚ã‚Šã¾ã›ã‚“ã€‚</font><font style="vertical-align: inherit;">åå‰ã¯ãã®åã®ã¨ãŠã‚Šã§ã™ã€‚</font><font style="vertical-align: inherit;">æ‹¡å¼µã‚³ãƒ¼ãƒ‰ï¼š</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ“ãƒ‡ã‚ªã‚¹ãƒˆãƒªãƒ¼ãƒ ã‚’ã‚µãƒ¼ãƒãƒ¼ã«é€ä¿¡ã—ã¾ã™</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs">&lt;style&gt;<font></font>
  #videoObjectHtml5ApiServer { <span class="hljs-attr">width</span>: <span class="hljs-number">320</span>px; height: <span class="hljs-number">240</span>px; background: #<span class="hljs-number">666</span>; }<font></font>
&lt;/style&gt;<font></font>
&lt;/head&gt;<font></font>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-comment">&lt;!--    ""     --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">video</span> <span class="hljs-attr">autoplay</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"videoObjectHtml5ApiServer"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">video</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"application/javascript"</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span>
        video = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'videoObjectHtml5ApiServer'</span>);

<span class="hljs-comment">//   MediaDevices API,      (    )</span>
<span class="hljs-comment">// getUserMedia  ,           video   </span>

<span class="hljs-keyword">if</span> (navigator.mediaDevices.getUserMedia) {
        navigator.mediaDevices.getUserMedia({<span class="hljs-attr">video</span>: <span class="hljs-literal">true</span>}).then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">stream</span>) </span>{
          <span class="hljs-comment">//     video ,        </span>
          video.srcObject = s;
          <span class="hljs-keyword">var</span>
            recorderOptions = {
                <span class="hljs-attr">mimeType</span>: <span class="hljs-string">'video/webm; codecs=vp8'</span> <span class="hljs-comment">//      webm  vp8</span>
              },
              mediaRecorder = <span class="hljs-keyword">new</span> MediaRecorder(s, recorderOptions ), <span class="hljs-comment">//  MediaRecorder</span>
              socket = <span class="hljs-keyword">new</span> WebSocket(<span class="hljs-string">'ws://127.0.0.1:3000/ws'</span>);

               mediaRecorder.ondataavailable = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
                <span class="hljs-keyword">if</span> (e.data &amp;&amp; e.data.size &gt; <span class="hljs-number">0</span>) {
                  <span class="hljs-comment">//     e.data</span>
                 socket.send(e.data);
                }
            }

            mediaRecorder.start(<span class="hljs-number">100</span>); <span class="hljs-comment">//      100  </span>

        }).catch(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">err</span>) </span>{ <span class="hljs-built_in">console</span>.log(err); });
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</span></code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ”¾é€å´ã®æº–å‚™ãŒã§ãã¾ã—ãŸï¼</font><font style="vertical-align: inherit;">æ¬¡ã«ã€ãƒ“ãƒ‡ã‚ªã‚¹ãƒˆãƒªãƒ¼ãƒ ã‚’å–å¾—ã—ã¦ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«è¡¨ç¤ºã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</font><font style="vertical-align: inherit;">ã“ã‚Œã«ã¯ä½•ãŒå¿…è¦ã§ã™ã‹ï¼Ÿ</font><font style="vertical-align: inherit;">ã¾ãšç¬¬ä¸€ã«ã€ã‚‚ã¡ã‚ã‚“ã€ã‚½ã‚±ãƒƒãƒˆæ¥ç¶šã€‚</font><font style="vertical-align: inherit;">WebSocketã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«ã€Œãƒªã‚¹ãƒŠãƒ¼ã€ã‚’ã¶ã‚‰ä¸‹ã’ã€ã€Œmessageã€ã‚¤ãƒ™ãƒ³ãƒˆã‚’ã‚µãƒ–ã‚¹ã‚¯ãƒ©ã‚¤ãƒ–ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãƒã‚¤ãƒŠãƒªãƒ‡ãƒ¼ã‚¿ã‚’å—ä¿¡ã™ã‚‹ã¨ã€ã‚µãƒ¼ãƒãƒ¼ã¯ãã‚Œã‚’ã‚µãƒ–ã‚¹ã‚¯ãƒ©ã‚¤ãƒãƒ¼ã€ã¤ã¾ã‚Šã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«ãƒ–ãƒ­ãƒ¼ãƒ‰ã‚­ãƒ£ã‚¹ãƒˆã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">åŒæ™‚ã«ã€ã€Œãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã€ã‚¤ãƒ™ãƒ³ãƒˆã®ã€Œãƒªã‚¹ãƒŠãƒ¼ã€ã«æ¥ç¶šã•ã‚ŒãŸã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•°ãŒã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã§ãƒˆãƒªã‚¬ãƒ¼ã•ã‚Œã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆè‡ªä½“ãŒé–¢æ•°å¼•æ•°ï¼ˆvp8ã§ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã•ã‚ŒãŸãƒ“ãƒ‡ã‚ªã‚¹ãƒˆãƒªãƒ¼ãƒ ã®ä¸€éƒ¨ï¼‰ã«æ¸¡ã•ã‚Œã¾ã™ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ“ãƒ‡ã‚ªã‚¹ãƒˆãƒªãƒ¼ãƒ ã‚’å—ã‘å…¥ã‚Œã¾ã™</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs">&lt;style&gt;<font></font>
  #videoObjectHtml5ApiServer { <span class="hljs-attr">width</span>: <span class="hljs-number">320</span>px; height: <span class="hljs-number">240</span>px; background: #<span class="hljs-number">666</span>; }<font></font>
&lt;/style&gt;<font></font>
&lt;/head&gt;<font></font>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-comment">&lt;!--    ""     --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">video</span> <span class="hljs-attr">autoplay</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"videoObjectHtml5ApiServer"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">video</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"application/javascript"</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span>
        video = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'videoObjectHtml5ApiServer'</span>),
         socket = <span class="hljs-keyword">new</span> WebSocket(<span class="hljs-string">'ws://127.0.0.1:3000/ws'</span>), 
         arrayOfBlobs = [];

         socket.addEventListener(<span class="hljs-string">'message'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">event</span>) </span>{
                <span class="hljs-comment">// ""     </span>
                arrayOfBlobs.push(event.data);
                <span class="hljs-comment">//    </span>
                readChunk();
            });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</span></code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é•·ã„é–“ã€å—ä¿¡ã—ãŸãƒ”ãƒ¼ã‚¹ã‚’ã™ãã«ãƒ“ãƒ‡ã‚ªè¦ç´ ã«é€ä¿¡ã—ã¦å†ç”Ÿã™ã‚‹ã“ã¨ãŒä¸å¯èƒ½ã§ã‚ã‚‹ç†ç”±ã‚’ç†è§£ã—ã‚ˆã†ã¨ã—ã¾ã—ãŸãŒã€ãã‚Œã¯ä¸å¯èƒ½ã§ã‚ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã—ãŸã€‚ã‚‚ã¡ã‚ã‚“ã€æœ€åˆã«ãã®è¦ç´ ã‚’ãƒ“ãƒ‡ã‚ªè¦ç´ ã«æ¥ç¶šã•ã‚ŒãŸç‰¹åˆ¥ãªãƒãƒƒãƒ•ã‚¡ãƒ¼ã«å…¥ã‚Œã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ãã†ã—ãªã„ã¨ã€ãƒ“ãƒ‡ã‚ªã‚¹ãƒˆãƒªãƒ¼ãƒ ã®å†ç”ŸãŒé–‹å§‹ã•ã‚Œã¾ã›ã‚“ã€‚</font><font style="vertical-align: inherit;">ã“ã‚Œã‚’è¡Œã†ã«ã¯ã€</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MediaSource API</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¨</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FileReader API</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãŒå¿…è¦</font><font style="vertical-align: inherit;">ã§ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MediaSourceã¯ã€ãƒ¡ãƒ‡ã‚£ã‚¢å†ç”Ÿã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ã“ã®ãƒ¡ãƒ‡ã‚£ã‚¢ã‚¹ãƒˆãƒªãƒ¼ãƒ ã®ã‚½ãƒ¼ã‚¹ã¨ã®é–“ã®ä¸€ç¨®ã®ä»²ä»‹å½¹ã¨ã—ã¦æ©Ÿèƒ½ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">MediaSourceã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«ã¯ã€ãƒ“ãƒ‡ã‚ª/ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªã‚¹ãƒˆãƒªãƒ¼ãƒ ã‚½ãƒ¼ã‚¹ç”¨ã®ãƒ—ãƒ©ã‚°å¯èƒ½ãªãƒãƒƒãƒ•ã‚¡ãƒ¼ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚</font><font style="vertical-align: inherit;">1ã¤ã®æ©Ÿèƒ½ã¯ã€ãƒãƒƒãƒ•ã‚¡ãƒ¼ã«ã¯Uint8ãƒ‡ãƒ¼ã‚¿ã®ã¿ã‚’å«ã‚ã‚‹ã“ã¨ãŒã§ãã‚‹ãŸã‚ã€ãã®ã‚ˆã†ãªãƒãƒƒãƒ•ã‚¡ãƒ¼ã‚’ä½œæˆã™ã‚‹ã«ã¯FileReaderãŒå¿…è¦ã§ã™ã€‚</font><font style="vertical-align: inherit;">ã‚³ãƒ¼ãƒ‰ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚ã‚³ãƒ¼ãƒ‰ã¯ã‚ˆã‚Šæ˜ç¢ºã«ãªã‚Šã¾ã™ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ“ãƒ‡ã‚ªã‚¹ãƒˆãƒªãƒ¼ãƒ ã‚’å†ç”Ÿã™ã‚‹</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs">&lt;style&gt;<font></font>
  #videoObjectHtml5ApiServer { <span class="hljs-attr">width</span>: <span class="hljs-number">320</span>px; height: <span class="hljs-number">240</span>px; background: #<span class="hljs-number">666</span>; }<font></font>
&lt;/style&gt;<font></font>
&lt;/head&gt;<font></font>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-comment">&lt;!--    ""     --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">video</span> <span class="hljs-attr">autoplay</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"videoObjectHtml5ApiServer"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">video</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"application/javascript"</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">var</span>
        video = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'videoObjectHtml5ApiServer'</span>),
         socket = <span class="hljs-keyword">new</span> WebSocket(<span class="hljs-string">'ws://127.0.0.1:3000/ws'</span>),
        mediaSource = <span class="hljs-keyword">new</span> MediaSource(), <span class="hljs-comment">//  MediaSource</span>
        vid2url = URL.createObjectURL(mediaSource), <span class="hljs-comment">//   URL     </span>
        arrayOfBlobs = [],
        sourceBuffer = <span class="hljs-literal">null</span>; <span class="hljs-comment">// ,  -</span>

         socket.addEventListener(<span class="hljs-string">'message'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">event</span>) </span>{
                <span class="hljs-comment">// ""     </span>
                arrayOfBlobs.push(event.data);
                <span class="hljs-comment">//    </span>
                readChunk();
            });

         <span class="hljs-comment">//   MediaSource   ,      </span>
        <span class="hljs-comment">// / </span>
        <span class="hljs-comment">//   ,   ,        </span>
        <span class="hljs-comment">//     ,      </span>
         mediaSource.addEventListener(<span class="hljs-string">'sourceopen'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">var</span> mediaSource = <span class="hljs-keyword">this</span>;
            sourceBuffer = mediaSource.addSourceBuffer(<span class="hljs-string">"video/webm; codecs=\"vp8\""</span>);
        });

      <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">readChunk</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> reader = <span class="hljs-keyword">new</span> FileReader();
        reader.onload = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{ 
          <span class="hljs-comment">//   FileReader  ,     </span>
          <span class="hljs-comment">//  ""   Uint8Array ( Blob)   , </span>
          <span class="hljs-comment">//  ,       /</span>
          sourceBuffer.appendBuffer(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>(e.target.result));

          reader.onload = <span class="hljs-literal">null</span>;
        }
        reader.readAsArrayBuffer(arrayOfBlobs.shift());
      }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</span></code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ã‚µãƒ¼ãƒ“ã‚¹ã®ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—ãŒå®Œæˆã—ã¾ã—ãŸã€‚</font><font style="vertical-align: inherit;">ä¸»ãªæ¬ ç‚¹ã¯ã€ãƒ“ãƒ‡ã‚ªã®å†ç”ŸãŒé€ä¿¡å´ã‹ã‚‰100ãƒŸãƒªç§’é…ã‚Œã‚‹ã“ã¨ã§ã™ã€‚ã‚µãƒ¼ãƒãƒ¼ã«é€ä¿¡ã™ã‚‹å‰ã«ãƒ“ãƒ‡ã‚ªã‚¹ãƒˆãƒªãƒ¼ãƒ ã‚’åˆ†å‰²ã™ã‚‹ã¨ãã«ã€ã“ã‚Œã‚’è‡ªåˆ†ã§è¨­å®šã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã¾ãŸã€ãƒãƒ¼ãƒˆãƒ‘ã‚½ã‚³ãƒ³ã§ç¢ºèªã—ãŸã¨ã“ã‚ã€é€ä¿¡å´ã¨å—ä¿¡å´ã®é–“ã«æ¬¡ç¬¬ã«ãšã‚ŒãŒç”Ÿã˜ã¦ãã¾ã—ãŸãŒã€ã¯ã£ãã‚Šã¨è¦‹ãˆã¾ã—ãŸã€‚</font><font style="vertical-align: inherit;">ã“ã®æ¬ ç‚¹ã‚’å…‹æœã™ã‚‹æ–¹æ³•ã‚’æ¢ã—å§‹ã‚ãŸã¨ã“ã‚ã€</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RTCPeerConnection API</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã«</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">å‡ºä¼šã„ã¾ã—ãŸ</font></a><font style="vertical-align: inherit;">ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ã‚¹ãƒˆãƒªãƒ¼ãƒ ã‚’æ–­ç‰‡ã«åˆ†å‰²ã™ã‚‹ã‚ˆã†ãªãƒˆãƒªãƒƒã‚¯ãªã—ã§ãƒ“ãƒ‡ã‚ªã‚¹ãƒˆãƒªãƒ¼ãƒ ã‚’è»¢é€ã§ãã¾ã™ã€‚</font><font style="vertical-align: inherit;">è“„ç©ã•ã‚ŒãŸé…å»¶ã¯ã€è»¢é€å‰ã®ãƒ–ãƒ©ã‚¦ã‚¶ã§ã¯ã€å„éƒ¨åˆ†ãŒwebmå½¢å¼ã«ãƒˆãƒ©ãƒ³ã‚¹ã‚³ãƒ¼ãƒ‰ã•ã‚Œã¦ã„ã‚‹ãŸã‚ã ã¨æ€ã„ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ç§ã¯ã“ã‚Œä»¥ä¸Šæ˜ã‚Šä¸‹ã’ã¾ã›ã‚“ã§ã—ãŸãŒã€WebRTCã®ç ”ç©¶ã‚’é–‹å§‹ã—ã¾ã—ãŸã€‚è‡ªåˆ†ã®ç ”ç©¶ã®çµæœã«ã¤ã„ã¦è€ƒãˆã€ã“ã®ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã«èˆˆå‘³ãŒã‚ã‚Œã°åˆ¥ã®è¨˜äº‹ã‚’æ›¸ãã¾ã™ã€‚</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja461759/index.html">æš—å·åŒ–ã•ã‚ŒãŸVoIPé€šä¿¡ã‚’èã</a></li>
<li><a href="../ja461761/index.html">DPKIï¼šãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³ã‚’ä½¿ç”¨ã—ã¦é›†ä¸­å‹PKIã®æ¬ ç‚¹ã«å¯¾å‡¦ã™ã‚‹</a></li>
<li><a href="../ja461763/index.html">åºƒå‘Šä»£ç†åº—ã¯æ—…è¡Œã®æœ€åˆã«ãƒ“ã‚¸ãƒã‚¹ã‚’æ®ºã™ã“ã¨ãŒã§ãã¾ã™ã‹</a></li>
<li><a href="../ja461765/index.html">ç§ãŸã¡ã¯k8ã¨Kafkaã‚’äº¤å·®ã•ã›ã€ã‚³ãƒ³ãƒ†ãƒŠãƒ¼ã‚’ä¿å­˜ã—ã€Ansibleã§ã‚´ãƒŸã‹ã‚‰è„±å‡ºã—ã¾ã™ï¼šDevOops 2018ã®ãƒˆãƒƒãƒ—10ãƒ¬ãƒãƒ¼ãƒˆ</a></li>
<li><a href="../ja461767/index.html">SVLABæ¤œç´¢æ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ </a></li>
<li><a href="../ja461771/index.html">æ²ˆé»™ã—ãªã„ã§ãã ã•ã„ï¼šä¿è‚²åœ’ã‹ã‚‰ã‚ªãƒ•ã‚£ã‚¹ã¾ã§</a></li>
<li><a href="../ja461773/index.html">Airtest IDE-ãƒ¢ãƒã‚¤ãƒ«ã‚²ãƒ¼ãƒ ã®è‡ªå‹•åŒ–ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹æ–°ã—ã„æ–¹æ³•ï¼Ÿ</a></li>
<li><a href="../ja461775/index.html">Djangoã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§Celeryã‚’ä½¿ç”¨ã™ã‚‹3ã¤ã®ã‚±ãƒ¼ã‚¹</a></li>
<li><a href="../ja461779/index.html">ä¼šç¤¾ã®ãƒ‡ãƒ¼ã‚¿ã®80ï¼…ã¯åˆ©ç”¨ã§ãã¾ã›ã‚“ã€‚ã©ã†ã™ã‚‹ï¼Ÿ</a></li>
<li><a href="../ja461781/index.html">ã€ŒYcombinator Startup School 2019ã€ã€‚æœ€åˆã®3é€±é–“ã®ãƒ“ãƒ‡ã‚ª</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>