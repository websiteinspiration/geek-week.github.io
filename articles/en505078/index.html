<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üöü üíÜüèø üë®üèæ‚Äç‚úàÔ∏è BLE under the microscope (ATT GATT ...) üë©üèø‚Äçü§ù‚Äçüë®üèΩ ‚èπÔ∏è üé±</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="BLE under the microscope (ATT GATT ...) Part 1, overview
 
 It‚Äôs been quite a while since the first specification for Bluetooth 4.0 came out. And alth...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>BLE under the microscope (ATT GATT ...)</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/505078/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/jc/9m/ea/jc9meakt15qji8lrruuauk5z_fw.png" alt="image"></div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BLE under the microscope (ATT GATT ...)</font></font></h2> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Part 1, overview</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
It‚Äôs been quite a while since the first specification for Bluetooth 4.0 came out. </font><font style="vertical-align: inherit;">And although the BLE topic is very interesting, it still pushes many developers away because of its complexity. </font><font style="vertical-align: inherit;">In my previous articles, I mainly looked at the lowest level Link Layer and Physical Layer. </font><font style="vertical-align: inherit;">This allowed us not to address such complex and confusing concepts as the Attribute Protocol (ATT) and the General Attribute Profile (GATT). </font><font style="vertical-align: inherit;">However, nowhere to go without understanding them, it is impossible to develop compatible devices. </font><font style="vertical-align: inherit;">Today I would like to share this knowledge with you. </font><font style="vertical-align: inherit;">In my article, I will draw on a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">primer</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> from the Nordic website. </font><font style="vertical-align: inherit;">So let's get started.</font></font><br>
<a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Why is everything so difficult?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In my opinion, it was immediately clear that device management via smartphones is a very promising and long-playing topic. Therefore, they decided to structure it immediately and to the maximum. So that manufacturers of various gadgets do not come up with their own protocols, which will then be incompatible. Hence the complexity. Already at the first stage, they tried to squeeze everything that was possible into the BLE protocol. And it doesn‚Äôt matter if it comes in handy or not. In addition, they provided for the possibility of expanding the list of devices for the future.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let's take a look at the picture where the diagram of the BLE protocol is drawn. It consists of several layers. The lowest physical layer (PHY) is responsible for the radio channel of the device. Link Layer (LL) contains the entire sequence of bytes in the transmitted message. In past articles, we studied it. Host Controller Interface (HCI) is a protocol for exchanging between layers or BLE chips if the Controller and Host are implemented on different chips. Logical Link Control and Adaptation Protocol (L2CAP) is responsible for the formation of packets, dividing by frames, error control and packet assembly. Packet encryption is the responsibility of the Security Manager Protocol (SMP). A shared access profile (GAP) is responsible for the initial communication between devices to determine who is who. It also includes scanning and advertising.In this article I will focus on the two remaining parts of the protocol - GATT and ATT. GATT is an add-on for ATT, so they are highly intertwined.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/51/qi/ms/51qimsv8ccop7bncjcrllcc7tcg.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To simplify the story, I would like to turn to an analogy. I heard her somewhere and would like to support. Imagine a BLE device as a bookcase with several shelves. Each shelf is a separate subject. For example, we have shelves with fiction, mathematics, encyclopedias. On each shelf are books with a specified topic. And in some books there are even paper bookmarks with notes. In addition, we have a small paper catalog of all books. If you remember school libraries, this is a narrow box with paper cards. With this analogy, the cabinet is the profile of our device. Shelves are services, books are features, and a directory is an attribute table. Bookmarks in books are descriptors, which I will also discuss later, in more detail.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Everyone who developed the device knows that many projects have similar pieces of code. The fact is that many devices have similar functionality. For example, if the devices are running on batteries, then the problem of charging and controlling their level will be the same. The same goes for sensors. Actually, the object-oriented approach to programming </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚Äúprovides the ability to create objects that combine properties and behaviors into an independent union, which can then be reused‚Äù</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. In my opinion, in BLE an attempt was made to a similar approach. The Bluetooth Special Interest Group (SIG) has developed profiles. Devices from different manufacturers with the same profiles should work with each other without difficulty. Profiles, in turn, consist of services, and services of characteristics, supplemented by descriptors. In general, it may look like this: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/yv/7v/w-/yv7vw-vhvlnavelyabkxtwe8p0e.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For an example, consider the profile of the heart rate monitor profile (fitness bracelet). It consists of two services and several characteristics. From it, the profile hierarchy immediately becomes clear. The checkpoint characteristic resets the total calorie count to zero. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1. The heart rate service includes three characteristics (0x180D): </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&nbsp;&nbsp;&nbsp;&nbsp;a) Mandatory characteristic of the heart rate (0x2A37)</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&nbsp;&nbsp;&nbsp;&nbsp;b) Optional characteristic of the position of the body sensor (0x2A38) </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&nbsp;&nbsp;&nbsp;&nbsp;c) Conditional characteristic of the heart rate reference point (0x2A39) </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2. Battery service (0x180F): </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&nbsp;&nbsp;&nbsp;&nbsp;a) Mandatory characteristic of the battery level (0x2A19)</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Uuid</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In order for us to unambiguously refer to the profile elements (services, characteristics and descriptors), we need to number them all somehow. For this purpose, a concept such as Universally Unique ID (UUID) or Universal Unique Identifier is introduced. In brackets of each line just UUID is specified. And there is one feature. For UUID, we decided to use a code length of 16 and 128 bits. Why, you ask? In the BLE protocol, everything is subject to energy conservation. Therefore, the dimension of 16 bits is quite reasonable. It is unlikely that more than 65 thousand will be created in the near future. unique services and features. At the moment, everything they could have already been counted (remember where it came from - ‚Äúhe counted you too‚Äù :-)) Numbered elements of </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">profiles</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">services</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">characteristics</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">descriptors</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> you can look at the links. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
However, I think everyone remembers the story with 4 bytes of IP address on the Internet. At first they thought that was enough, but now we still won‚Äôt go to the 6-byte address. In order not to repeat this mistake and give room to the playful hands of homemade manufacturers, SIG immediately decided to introduce also 128-bit UUIDs. This personally reminds me of the unlicensed 433 MHz band, which was given up to all kinds of Kulibin from the radio channel. In our case, a 128-bit identifier of services and characteristics was given away. This means that we, for our services and devices, can use almost any 128 bit value. Anyway, the probability of coming up with the same UUID tends to zero.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In fact, short 16-bit UUIDs have their extension up to 128-bit values. </font><font style="vertical-align: inherit;">In the specification, this extension is called the Bluetooth Base UUID and has the value 00000000-0000-1000-8000-00805F9B34FB. </font><font style="vertical-align: inherit;">If, for example, the 16-bit attribute UUID has the value 0x1234, then the equivalent 128-bit UUID will have the value 00001234-0000-1000-8000-00805F9B34FB. </font><font style="vertical-align: inherit;">And even the corresponding formula is given: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;128_bit_value = 16_bit_value * 2 ^ 96 + Bluetooth_Base_UUID </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I don‚Äôt know where this magic number came from. </font><font style="vertical-align: inherit;">If any of the readers know, let them write in the comments. </font><font style="vertical-align: inherit;">As for inventing 128-bit UUIDs, in principle, you can use a special </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">generator</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> that will do this for you.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ATT GATT ...</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Actually, the fun begins. I recall that ATT is based on a client-server relationship. Now we are considering the server device. It contains information such as sensor values, light switch status, location data, etc. Now that all the "participants in our parade" are numbered, we must somehow place them in the device‚Äôs memory. To do this, we put them in a table called an attribute table. Remember this well. This is the very heart of BLE. We will consider it in the future. Now we will call each line an attribute. This table is deep in the stack and, as a rule, we do not have direct access to it. We initialize it and turn to it, but what happens inside is hidden from us behind seven seals.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Consider the picture from the specification, but before that, I want to immediately draw attention to the frequent confusion in terms, namely in descriptors. The role of the descriptor is to supplement the description of the characteristic. When it is necessary to expand its capabilities, then they use descriptors. They are also attributes, and in the same way, along with services and characteristics, they are located in the attributes table. We will analyze them in detail in the second part of the article. However, sometimes descriptors are called the line number in the attribute table. This must be borne in mind. We, in order not to get confused, will use the term ‚Äúattribute pointer‚Äù for these purposes. </font></font><br>
<img src="https://habrastorage.org/webt/a5/rl/lk/a5rllkmo7i3doe3ripvpjd2ztwy.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So an attribute is a discrete value that has the following properties associated with it: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1. Attribute Handle is the index of the table corresponding to the attribute</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2. Attribute Type is the UUID that describes its type </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3. Attribute Value is the data indexed by the attribute pointer </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
4. Attribute Permissions are part of the attribute, permissions that cannot be read or written using the attribute protocol </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
How to understand all this? The attribute pointer is, relatively speaking, its number in our table.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It allows the client to refer to an attribute in read or write requests. We can number our lines (attributes) from 0x0001 to 0xFFFF. In our association with a bookcase, this is the card number in the paper catalog. Similarly, as in the library catalog, cards are arranged in order of increasing number. The number of each subsequent line must be greater than the previous one. As in the library, some cards are sometimes lost, so we have - there may be gaps in line numbering. This is allowed. The main thing is that they go on increasing. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The attribute type determines what this attribute is. By analogy with the C language, </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
where there are Boolean, numeric variables and strings, so here. By the type of attribute we recognize</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
what we are dealing with and how to continue to work with this attribute. Below we look at some specific types of attributes. For example, ‚Äúservice declaration‚Äù (0x2800), ‚Äúcharacteristic declaration‚Äù (0x2803), ‚Äúdescriptor declaration‚Äù (0x2902). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The value of the attribute is actually its value, sorry for the tautology. If the attribute type is a string, then the attribute value may be, for example, the slogan ‚ÄúHello World !!!‚Äù. If the type of attribute is a ‚Äúservice declaration‚Äù, then its value is the service itself. And sometimes this is information about where to find other attributes and their properties. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Attribute permissions allow the server to understand whether read or write access is allowed.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Note that these permissions apply only to the attribute value, and not to the pointer, type, and permissions field itself. </font><font style="vertical-align: inherit;">Those. </font><font style="vertical-align: inherit;">if attribute recording is allowed, then we can change, for example, the line ‚ÄúHello World !!!‚Äù </font><font style="vertical-align: inherit;">on the line "Good morning". </font><font style="vertical-align: inherit;">But we can not prohibit the recording of a new line or, change the type of attribute and designate the line as "service declaration". </font><font style="vertical-align: inherit;">When a client accesses the server, the client requests its attributes. </font><font style="vertical-align: inherit;">This allows the client to find out what the server can provide. </font><font style="vertical-align: inherit;">Although it is not necessary to read and write values.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What does it look like</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The concept of GATT is to group attributes in an attribute table together in a very specific and logical order. Let's take a closer look at the heart rate profile below. The leftmost column of this table is optional. He simply describes to us what this line (attribute) is. All other columns are already familiar to us.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/6k/vt/4l/6kvt4lzc9h6ll9kwdu9g6qps22c.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
At the top of each group, we always have a service advertisement attribute. Its type is always 0x2800, and the pointer depends on how many attributes are already present in the table. Its permissions are always read-only, without any authentication or authorization. We will talk about these concepts a little later. A value is another UUID that determines what kind of service it is. In the Table, the value is 0x180D, which is defined by Bluetooth SIG as a heart rate service.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Following the announcement of the service, the announcement of the characteristic. In form, it is similar to a service declaration. Its UUID is always 0x2803, and permissions are also always read-only without any authentication or authorization. Let's look at the Attribute Value field, which includes some data. It always contains a pointer, a UUID, and a set of properties. These three elements describe the subsequent declaration of the characteristic value. The pointer naturally indicates the place of declaration of the characteristic value in the attribute table. The UUID describes what type of information or value we can expect. For example, the temperature value, the state of the light switch, or some other arbitrary value. And finally, properties that describe how you can interact with a characteristic value.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Here we are waiting for another pitfall. It is associated with attribute permissions and characteristics properties. Let's look at a picture of the properties of a bit field from the specification. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ko/co/5y/koco5ykz3gqkfwww1k48ssxvjug.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As you can see, there are also fields here that provide read and write capabilities. You may wonder why we have read / write permissions for the attribute and </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
read / write </font><font style="vertical-align: inherit;">properties </font><font style="vertical-align: inherit;">for the characteristic value? Shouldn't they always be the same? The fact is that the properties for the characteristic value, in fact, are only recommendations for the client, used in the GATT and application layers. These are just clues about what a customer can expect from a feature ad attribute. Let's deal with this in more detail. What types of permissions does the attribute have? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1. Access Permissions:</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&nbsp;&nbsp;&nbsp;&nbsp; - reading </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&nbsp;&nbsp;&nbsp;&nbsp; - writing </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&nbsp;&nbsp;&nbsp;&nbsp; - reading and writing </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2. Authentication permission: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&nbsp;&nbsp;&nbsp;&nbsp; - authentication is required </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&nbsp;&nbsp;&nbsp;&nbsp; - authentication is not required </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3. Authorization permission: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&nbsp;&nbsp;&nbsp;&nbsp; - authorization is required </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&nbsp;&nbsp;&nbsp;&nbsp; - authorization is not required</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The main difference between attribute resolution and characteristics properties is that the former relate to servers, and the latter relate to clients. </font><font style="vertical-align: inherit;">The server may be allowed to read the value of the characteristic, but at the same time there is an authentication or authorization requirement. </font><font style="vertical-align: inherit;">Therefore, when the client requests properties of the characteristic, we get that reading is allowed. </font><font style="vertical-align: inherit;">But when we try to read, we get an error. </font><font style="vertical-align: inherit;">Therefore, we can safely talk about the priority of permissions over properties. </font><font style="vertical-align: inherit;">We cannot obtain knowledge about the permissions of the attribute on the client side.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Descriptor</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Back to our table. After declaring a characteristic value, the following attribute declarations are possible: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1. New declaration of a characteristic (there can be many characteristics in a service) </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2. New declaration of a service (there can be many of them in a table) </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3. Declaration of a descriptor</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In the case of a characteristic measuring the heart rate, in our table, the declaration of the value of the characteristic is accompanied by the declaration of a descriptor. A descriptor is an attribute with additional information about the characteristic. There are several types of descriptors. We will talk about them in detail in the second part of this article. Now we will only touch on the Client Characteristic Configuration Descriptor (CCCD). It has a UUID of 0x2902. Using this descriptor, the client has the ability to enable indication or notification on the server. The difference between them is small, but still there. Notification does not require confirmation of receipt by the client. Indication requires this, although it occurs at the GATT level, not reaching the application level. Why so, you ask? Alas, I do not know.I can only say that Nordic experts recommend using notification. Moreover, packet integrity checking (using CRC) occurs in both cases.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusion</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
At the end of the article, I would like to say this. </font><font style="vertical-align: inherit;">The last table is somewhat confusing. </font><font style="vertical-align: inherit;">However, I settled on it because it is given in the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">article</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> on which I rely. </font><font style="vertical-align: inherit;">In the second part of my article, I intend to delve into the BlueTooth 4.0 specification. </font><font style="vertical-align: inherit;">There we are waiting for more correct schemes and drawings. </font><font style="vertical-align: inherit;">In the third part, I would like to parse the log obtained with the help of the Wireshark program from one of the gadgets and see ‚Äúlive‚Äù all the theory that we are studying. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Employee of </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">the Caesar Satellite</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Group of Companies </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pecherskikh Vladimir</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en505052/index.html">Rapid testing of Motionia.js and Consoleimg.js</a></li>
<li><a href="../en505060/index.html">Insert numpy array into MySQL database via Python</a></li>
<li><a href="../en505064/index.html">Mikrotik split-dns: they did it</a></li>
<li><a href="../en505070/index.html">Intellectual masturbation about good writing</a></li>
<li><a href="../en505074/index.html">Hosting and dedicated servers: answer questions. Part 2. Why such an expensive Internet in the data center?</a></li>
<li><a href="../en505080/index.html">Mutex in the world of asynchronous code</a></li>
<li><a href="../en505090/index.html">About translating the words ‚Äúuseful‚Äù / ‚Äúuse‚Äù without use / useful</a></li>
<li><a href="../en505092/index.html">How I got a job at Microsoft</a></li>
<li><a href="../en505098/index.html">Snom D717 IP Phone Review</a></li>
<li><a href="../en505104/index.html">How we developed a service that entered the top 5 largest pharmacy sites in the world</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>