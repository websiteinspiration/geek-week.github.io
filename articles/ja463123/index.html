<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘• ğŸ˜¤ ğŸ‘©ğŸ¼â€ğŸš€ AVRãƒã‚¤ã‚¯ãƒ­ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ç”¨ã®ã‚¢ã‚»ãƒ³ãƒ–ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã€‚ãƒ‘ãƒ¼ãƒˆ3 ğŸ”¸ ğŸ‘¨ğŸ¾â€ğŸ« ğŸ›¥ï¸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="â†ãƒ‘ãƒ¼ãƒˆ2.ã¯ã˜ã‚ã«
 ãƒ‘ãƒ¼ãƒˆ4.å‘¨è¾ºæ©Ÿå™¨ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã¨å‰²ã‚Šè¾¼ã¿ã®å‡¦ç†â†’
 AVRãƒã‚¤ã‚¯ãƒ­ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ç”¨ã®ã‚¢ã‚»ãƒ³ãƒ–ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼ãƒ©ã‚¤ãƒ–ãƒ©ãƒª
 ãƒ‘ãƒ¼ãƒˆ3.é–“æ¥ã‚¢ãƒ‰ãƒ¬ã‚¹æŒ‡å®šã¨ãƒ•ãƒ­ãƒ¼åˆ¶å¾¡
 

å‰ã®ãƒ‘ãƒ¼ãƒˆã§ã¯ã€8ãƒ“ãƒƒãƒˆã®ãƒ¬ã‚¸ã‚¹ã‚¿å¤‰æ•°ã®æ“ä½œã«ã¤ã„ã¦è©³ã—ãèª¬æ˜ã—ã¾ã—ãŸã€‚ä»¥å‰ã®æŠ•ç¨¿ã‚’è¦‹é€ƒã—ãŸå ´åˆ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>AVRãƒã‚¤ã‚¯ãƒ­ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ç”¨ã®ã‚¢ã‚»ãƒ³ãƒ–ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã€‚ãƒ‘ãƒ¼ãƒˆ3</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/463123/"><p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">â†ãƒ‘ãƒ¼ãƒˆ2.ã¯ã˜ã‚ã«</font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ‘ãƒ¼ãƒˆ4.å‘¨è¾ºæ©Ÿå™¨ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã¨å‰²ã‚Šè¾¼ã¿ã®å‡¦ç†â†’</font></font></a></p><br>
<h2 id="biblioteka-generatora-assemblernogo-koda-dlya-mikrokontrollerov-avr"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AVRãƒã‚¤ã‚¯ãƒ­ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ç”¨ã®ã‚¢ã‚»ãƒ³ãƒ–ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼ãƒ©ã‚¤ãƒ–ãƒ©ãƒª</font></font></h2><br>
<h3 id="chast-3-kosvennaya-adresaciya-i-upravlenie-potokom-ispolneniya"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ‘ãƒ¼ãƒˆ3.é–“æ¥ã‚¢ãƒ‰ãƒ¬ã‚¹æŒ‡å®šã¨ãƒ•ãƒ­ãƒ¼åˆ¶å¾¡</font></font></h3><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å‰ã®ãƒ‘ãƒ¼ãƒˆã§ã¯ã€8ãƒ“ãƒƒãƒˆã®ãƒ¬ã‚¸ã‚¹ã‚¿å¤‰æ•°ã®æ“ä½œã«ã¤ã„ã¦è©³ã—ãèª¬æ˜ã—ã¾ã—ãŸã€‚ä»¥å‰ã®æŠ•ç¨¿ã‚’è¦‹é€ƒã—ãŸå ´åˆã¯ã€èª­ã‚€ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚ãã®ä¸­ã«ã¯ã€è¨˜äº‹ã®ä¾‹ã‚’è‡ªåˆ†ã§è©¦ã™ãŸã‚ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¸ã®ãƒªãƒ³ã‚¯ãŒã‚ã‚Šã¾ã™ã€‚ä»¥å‰ã«ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸæ–¹ã¯ã€æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¯å¸¸ã«æ›´æ–°ã•ã‚Œã¦ãŠã‚Šã€ä¸€éƒ¨ã®ä¾‹ã¯å¤ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã¯å‹•ä½œã—ãªã„å ´åˆãŒã‚ã‚‹ãŸã‚ã§ã™ã€‚</font></font></p><a name="habracut"></a><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ®‹å¿µãªãŒã‚‰ã€ä»¥å‰ã«è€ƒæ…®ã•ã‚ŒãŸãƒ¬ã‚¸ã‚¹ã‚¿å¤‰æ•°ã®ãƒ“ãƒƒãƒˆæ·±åº¦ã¯ã€ãƒ¡ãƒ¢ãƒªãƒã‚¤ãƒ³ã‚¿ã¨ã—ã¦ä½¿ç”¨ã™ã‚‹ã«ã¯æ˜ã‚‰ã‹ã«ä¸ååˆ†ã§ã™ã€‚ã—ãŸãŒã£ã¦ã€ãƒã‚¤ãƒ³ã‚¿ãƒ¼ã®èª¬æ˜ã«ç›´æ¥é€²ã‚€å‰ã«ã€åˆ¥ã®ã‚¯ãƒ©ã‚¹ã®ãƒ‡ãƒ¼ã‚¿è¨˜è¿°ã«ã¤ã„ã¦æ¤œè¨ã—ã¾ã™ã€‚ AVR Megaã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®ã»ã¨ã‚“ã©ã®ã‚³ãƒãƒ³ãƒ‰ã¯ã€ãƒ¬ã‚¸ã‚¹ã‚¿ã‚ªãƒšãƒ©ãƒ³ãƒ‰ã§ã®ã¿æ©Ÿèƒ½ã™ã‚‹ã‚ˆã†ã«è¨­è¨ˆã•ã‚Œã¦ã„ã¾ã™ã€‚ã¤ã¾ã‚Šã€ä¸¡æ–¹ã®ã‚ªãƒšãƒ©ãƒ³ãƒ‰ã¨çµæœã®ã‚µã‚¤ã‚ºã¯8ãƒ“ãƒƒãƒˆã§ã™ã€‚ãŸã ã—ã€é€£ç¶šã—ã¦é…ç½®ã•ã‚ŒãŸ2ã¤ã®RONãƒ¬ã‚¸ã‚¹ã‚¿ãŒ1ã¤ã®16ãƒ“ãƒƒãƒˆãƒ¬ã‚¸ã‚¹ã‚¿ã¨è¦‹ãªã•ã‚Œã‚‹æ“ä½œãŒã„ãã¤ã‹ã‚ã‚Šã¾ã™ã€‚ãã®ã‚ˆã†ãªæ“ä½œã¯ã»ã¨ã‚“ã©ãªãã€ä¸»ã«ãƒã‚¤ãƒ³ã‚¿ã‚’æ“ä½œã™ã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®æ§‹æ–‡ã®è¦³ç‚¹ã‹ã‚‰è¦‹ã‚‹ã¨ã€ãƒ¬ã‚¸ã‚¹ã‚¿ãƒšã‚¢ã®æ“ä½œã¯ã€ãƒ¬ã‚¸ã‚¹ã‚¿å¤‰æ•°ã®æ“ä½œã¨ã»ã¨ã‚“ã©åŒã˜ã§ã™ã€‚ãƒ¬ã‚¸ã‚¹ã‚¿ãƒšã‚¢ã‚’æ“ä½œã™ã‚‹å°ã•ãªä¾‹ã‚’è€ƒãˆã¦ã¿ã¾ã™ã€‚ã“ã“ã¨ä¸‹ã®ã‚¹ãƒšãƒ¼ã‚¹ã‚’ç¯€ç´„ã™ã‚‹ãŸã‚ã«ã€ã‚³ãƒ¼ãƒ‰ç”Ÿæˆã®ç‰¹å®šã®æ©Ÿèƒ½ã‚’èª¬æ˜ã™ã‚‹å¿…è¦ãŒã‚ã‚‹å ´åˆã«ã®ã¿å®Ÿè¡Œçµæœã‚’ç¤ºã—ã¾ã™ã€‚</font></font></p><br>
<pre><code class="cs hljs"> <span class="hljs-keyword">var</span> m = <span class="hljs-keyword">new</span> Mega328();
 <span class="hljs-keyword">var</span> dr1 = m.DREG();
 <span class="hljs-keyword">var</span> dr2 = m.DREG();<font></font>
 dr1.Load(<span class="hljs-number">0xAA55</span>);<font></font>
dr2.Load(<span class="hljs-number">0x55AA</span>);<font></font>
dr1++;<font></font>
dr1--;<font></font>
dr1 += <span class="hljs-number">0x100</span>;<font></font>
dr1 += dr2;<font></font>
dr2 *= dr1;<font></font>
dr2 /= dr1;<font></font>
<span class="hljs-keyword">var</span> t = AVRASM.Text(m);</code></pre><br>
<p>     DREG()   2-  ,    .            .   ,              .       ,     .   ,      8- ,    <em>High</em>     8    8- ,   <em>Low</em>     8 .       </p><br>
<pre><code class="cs hljs"><span class="hljs-keyword">var</span> m = <span class="hljs-keyword">new</span> Mega328();
<span class="hljs-keyword">var</span> dr1 = m.DREG();<font></font>
dr1.Load(<span class="hljs-number">0xAA55</span>);<font></font>
dr1.Low--;<font></font>
dr1.High += dr1.Low;<font></font>
<span class="hljs-keyword">var</span> t = AVRASM.Text(m);</code></pre><br>
<p>   ,     <em>High</em>  <em>Low</em>     ,            .</p><br>
<p>,       ,         .     8, 16-      .         .</p><br>
<pre><code class="cs hljs"><span class="hljs-keyword">var</span> m = <span class="hljs-keyword">new</span> Mega328();
<span class="hljs-keyword">var</span> bt = m.BYTE();  <span class="hljs-comment">//8-   </span>
<span class="hljs-keyword">var</span> wd = m.WORD();  <span class="hljs-comment">//16-   </span>
<span class="hljs-keyword">var</span> arr = m.ARRAY(<span class="hljs-number">16</span>); <span class="hljs-comment">//  16 </span>
<span class="hljs-keyword">var</span> t = AVRASM.Text(m);</code></pre><br>
<p>,  . </p><br>
<pre><code class="dos hljs"><span class="hljs-function">RESET: <span class="hljs-title">ldi</span> <span class="hljs-title">r16</span>, <span class="hljs-title">high</span>(<span class="hljs-title">RAMEND</span>)
    <span class="hljs-title">out</span> <span class="hljs-title">SPH</span>,<span class="hljs-title">r16</span>
    <span class="hljs-title">ldi</span> <span class="hljs-title">r16</span>, <span class="hljs-title">low</span>(<span class="hljs-title">RAMEND</span>)
    <span class="hljs-title">out</span> <span class="hljs-title">SPL</span>,<span class="hljs-title">r16</span>
.<span class="hljs-title">DSEG</span>
<span class="hljs-title">L0002</span>:  .<span class="hljs-title">BYTE</span>   16
<span class="hljs-title">L0001</span>:  .<span class="hljs-title">BYTE</span>   2
<span class="hljs-title">L0000</span>:  .<span class="hljs-title">BYTE</span>   1</span></code></pre><br>
<p>        .    ,         .   .              (   )  ,   2â†’   .  ,      4   64, 48,40  16 ,            :</p><br>
<p> 64 â€”  ,   2 = 64<br>
 48 â€”  ,   2 = 16<br>
 16 â€”  ,   2 = 16<br>
 40 â€”  ,   2 = 8<br>
   ,     <br>
       .           ,  ,    â€” /   .          </p><br>
<pre><code class="cs hljs"><span class="hljs-keyword">var</span> m = <span class="hljs-keyword">new</span> Mega328();
<span class="hljs-keyword">var</span> bt = m.BYTE(); <span class="hljs-comment">// 8-   </span>
<span class="hljs-keyword">var</span> rr = m.REG(); <span class="hljs-comment">//   </span>
rr.Load(<span class="hljs-number">0xAA</span>);  <span class="hljs-comment">//  rr   0xAA</span>
rr.Mstore(bt);  <span class="hljs-comment">//    </span>
rr.Clear(); <span class="hljs-comment">// </span>
rr.Mload(bt);   <span class="hljs-comment">//   </span>
<span class="hljs-keyword">var</span> t = AVRASM.Text(m);</code></pre><br>
<p>          .       0x55       .     . </p><br>
<p>        </p><br>
<pre><code class="cs hljs"><span class="hljs-keyword">var</span> rr = m.REG();
<span class="hljs-keyword">var</span> arr = m.ARRAY(<span class="hljs-number">10</span>);<font></font>
rr.MLoad(arr[<span class="hljs-number">5</span>]);</code></pre><br>
<p>      0.        rr   6  .</p><br>
<p>     .             â€” <em>MEMPtr</em>. ,     .     ,         . </p><br>
<pre><code class="cs hljs"><span class="hljs-keyword">var</span> m = <span class="hljs-keyword">new</span> Mega328();
<span class="hljs-keyword">var</span> bt1 = m.BYTE();
<span class="hljs-keyword">var</span> bt2  = m.BYTE();
<span class="hljs-keyword">var</span> rr = m.REG();
<span class="hljs-keyword">var</span> ptr = m.MEMPTR(); <span class="hljs-comment">//  ptr</span>
ptr.Load(bt1);      <span class="hljs-comment">//ptr   bt1</span>
rr.Load(<span class="hljs-number">0xAA</span>);      <span class="hljs-comment">// rr - 0xAA</span>
ptr.MStore(rr);     <span class="hljs-comment">//  bt1 0xAA</span>
rr.Load(<span class="hljs-number">0x55</span>);      <span class="hljs-comment">// rr - 0x55</span>
ptr.Load(bt2);      <span class="hljs-comment">//ptr   bt2    </span>
ptr.MStore(rr);     <span class="hljs-comment">//  bt2 0x55</span>
ptr.Load(bt1);      <span class="hljs-comment">//ptr   bt1</span>
ptr.MLoad(rr);      <span class="hljs-comment">//  rr  0xAA</span>
<span class="hljs-keyword">var</span> t = AVRASM.Text(m);</code></pre><br>
<p>  ,      <em>ptr</em>,          .        /  ,      ,   /  / .   ,      .</p><br>
<pre><code class="cs hljs"><span class="hljs-keyword">var</span> m = <span class="hljs-keyword">new</span> Mega328();
<span class="hljs-keyword">var</span> bt1 = m.ARRAY(<span class="hljs-number">4</span>);  <span class="hljs-comment">//   4  </span>
<span class="hljs-keyword">var</span> rr = m.REG();
<span class="hljs-keyword">var</span> ptr = m.MEMPTR();<font></font>
ptr.Load(bt1.Label);   <span class="hljs-comment">//ptr   bt1</span>
rr.Load(<span class="hljs-number">0xAA</span>);         <span class="hljs-comment">// rr - 0xAA</span>
ptr.MStoreInc(rr);     <span class="hljs-comment">//  bt1 0xAA</span>
ptr.MStoreInc(rr);     <span class="hljs-comment">//  bt1+1 0xAA</span>
ptr.MStoreInc(rr);     <span class="hljs-comment">//  bt1+2 0xAA</span>
ptr.MStoreInc(rr);     <span class="hljs-comment">//  bt1+3 0xAA</span><font></font>
rr.Clear();<font></font>
rr.MLoad(bt1[<span class="hljs-number">2</span>]);      <span class="hljs-comment">//  rr 3-  </span>
<span class="hljs-keyword">var</span> t = AVRASM.Text(m);</code></pre><br>
<p>           .<br>
         .   â€”  ,           .          .       .    ,   <em>AVRASM.Label</em>      ,       .       , .&nbsp;.   ,      .        ,    <em>AVRASM.newLabel([   ])</em>.        ,          <em>AVRASM.newLabel()</em>  . </p><br>
<p>      .       <em>GO([_])</em>. ,     .</p><br>
<pre><code class="cs hljs"><span class="hljs-keyword">var</span> m = <span class="hljs-keyword">new</span> Mega328();
<span class="hljs-keyword">var</span> r = m.REG();
<span class="hljs-comment">// </span>
<span class="hljs-keyword">var</span> lbl1 = AVRASM.Label;<span class="hljs-comment">//       </span><font></font>
m.GO(lbl1);<font></font>
r++;    <span class="hljs-comment">//   </span><font></font>
r++;<font></font>
AVRASM.NewLabel(lbl1);<span class="hljs-comment">// </span>
<span class="hljs-comment">// </span>
<span class="hljs-keyword">var</span> lbl2 = AVRASM.NewLabel();<span class="hljs-comment">//   </span>
r--;    <span class="hljs-comment">//   </span><font></font>
r--;<font></font>
m.GO(lbl2);<font></font>
<span class="hljs-keyword">var</span> t = AVRASM.Text(m);</code></pre><br>
<p>         .                    .      ,       ,   <em>IF</em>.    .</p><br>
<pre><code class="cs hljs"><span class="hljs-keyword">var</span> m = <span class="hljs-keyword">new</span> Mega328();
<span class="hljs-keyword">var</span> rr1 = m.REG();
<span class="hljs-keyword">var</span> rr2 = m.REG();<font></font>
rr1.Load(<span class="hljs-number">0x22</span>);<font></font>
rr2.Load(<span class="hljs-number">0x33</span>);<font></font>
m.IF(rr1 == rr2, () =&gt;<font></font>
             {<font></font>
                 AVRASM.Comment(<span class="hljs-string">" - ,  "</span>);<font></font>
             });<font></font>
<span class="hljs-keyword">var</span> t = AVRASM.Text(m);</code></pre><br>
<p>    <em>IF</em>   ,   .      .   ,     ,   ,   .       , . .  ,   ,    .       <em>AVRASM.Comment()</em>,          . </p><br>
<pre><code class="cs hljs"><span class="hljs-keyword">var</span> m = <span class="hljs-keyword">new</span> Mega328();
<span class="hljs-keyword">var</span> rr1 = m.REG();
<span class="hljs-keyword">var</span> rr2 = m.REG();<font></font>
rr1.Load(<span class="hljs-number">0x22</span>);<font></font>
rr2.Load(<span class="hljs-number">0x33</span>);<font></font>
m.IF(rr1 == rr2, () =&gt;<font></font>
             {<font></font>
                 AVRASM.Comment(<span class="hljs-string">" - ,  "</span>);<font></font>
             },()=&gt;<font></font>
             {<font></font>
                 AVRASM.Comment(<span class="hljs-string">" - ,   "</span>);<font></font>
             });<font></font>
AVRASM.Comment(<span class="hljs-string">" "</span>);
<span class="hljs-keyword">var</span> t = AVRASM.Text(m);</code></pre><br>
<p>       </p><br>
<pre><code class="dos hljs"><span class="hljs-function">RESET: <span class="hljs-title">ldi</span> <span class="hljs-title">r16</span>, <span class="hljs-title">high</span>(<span class="hljs-title">RAMEND</span>)
    <span class="hljs-title">out</span> <span class="hljs-title">SPH</span>,<span class="hljs-title">r16</span>
    <span class="hljs-title">ldi</span> <span class="hljs-title">r16</span>, <span class="hljs-title">low</span>(<span class="hljs-title">RAMEND</span>)
    <span class="hljs-title">out</span> <span class="hljs-title">SPL</span>,<span class="hljs-title">r16</span>
.<span class="hljs-title">DEF</span> <span class="hljs-title">R0000</span> = <span class="hljs-title">r20</span>
.<span class="hljs-title">DEF</span> <span class="hljs-title">R0001</span> = <span class="hljs-title">r21</span>
    <span class="hljs-title">ldi</span> <span class="hljs-title">R0000</span>,34
    <span class="hljs-title">ldi</span> <span class="hljs-title">R0001</span>,51
    <span class="hljs-title">cp</span>  <span class="hljs-title">R0000</span>,<span class="hljs-title">R0001</span>
    <span class="hljs-title">brne</span>    <span class="hljs-title">L0002</span>
;---  - ,   ---
    <span class="hljs-title">xjmp</span>    <span class="hljs-title">L0004</span>
<span class="hljs-title">L0002</span>:
;---  - ,    ---
<span class="hljs-title">L0004</span>:
;---   ---
.<span class="hljs-title">DSEG</span></span></code></pre><br>
<p>     ,         .      ,            .      </p><br>
<pre><code class="cs hljs"><span class="hljs-keyword">var</span> m = <span class="hljs-keyword">new</span> Mega328();
<span class="hljs-keyword">var</span> rr1 = m.REG();<font></font>
rr1.Load(<span class="hljs-number">0x22</span>);<font></font>
rr1--;<font></font>
m.IFEMPTY(() =&gt;AVRASM.Comment(<span class="hljs-string">",    0"</span>));
<span class="hljs-keyword">var</span> t = AVRASM.Text(m);</code></pre><br>
<p>    <em>IFEMPTY</em>    Z          0.<br>
        <em>LOOP</em>.       .   </p><br>
<pre><code class="cs hljs">LOOP(Register iter, Action&lt;Register, <span class="hljs-keyword">string</span>&gt; Condition, Action&lt;Register, <span class="hljs-keyword">string</span>&gt; body)</code></pre><br>
<p> <em>iter</em>   ,        .     ,     .             .          .     <em>LOOP</em>   â€” , .&nbsp;.       .        </p><br>
<pre><code class="cs hljs">m.LOOP(m.TempL, (r, l) =&gt; m.GO(l), (r,l) =&gt; { });</code></pre><br>
<p>   </p><br>
<pre><code class="dos hljs"><span class="hljs-function">L0002:  <span class="hljs-title">xjmp</span>    <span class="hljs-title">L0002</span></span></code></pre><br>
<p>            ,     </p><br>
<pre><code class="cs hljs"><span class="hljs-keyword">var</span> m = <span class="hljs-keyword">new</span> Mega328();
<span class="hljs-keyword">var</span> rr1 = m.REG();
<span class="hljs-keyword">var</span> rr2 = m.REG();
<span class="hljs-keyword">var</span> arr = m.ARRAY(<span class="hljs-number">16</span>);
<span class="hljs-keyword">var</span> ptr = m.MEMPTR();<font></font>
ptr.Load(arr[<span class="hljs-number">0</span>]);   <span class="hljs-comment">//    </span>
rr2.Load(<span class="hljs-number">16</span>);       <span class="hljs-comment">//   </span>
rr1.Load(<span class="hljs-number">0xAA</span>);     <span class="hljs-comment">//  </span>
m.LOOP(rr2, (r, l) =&gt; <span class="hljs-comment">//rr2     .</span><font></font>
            {<font></font>
                r--;            <span class="hljs-comment">//  </span>
                m.IFNOTEMPTY(l); <span class="hljs-comment">// ,  </span>
            }, (r,l) =&gt; ptr.MStoreInc(rr1)); <span class="hljs-comment">//  </span>
<span class="hljs-keyword">var</span> t = AVRASM.Text(m);</code></pre><br>
<p>          </p><br>
<pre><code class="dos hljs"><span class="hljs-function">RESET: <span class="hljs-title">ldi</span> <span class="hljs-title">r16</span>, <span class="hljs-title">high</span>(<span class="hljs-title">RAMEND</span>)
    <span class="hljs-title">out</span> <span class="hljs-title">SPH</span>,<span class="hljs-title">r16</span>
    <span class="hljs-title">ldi</span> <span class="hljs-title">r16</span>, <span class="hljs-title">low</span>(<span class="hljs-title">RAMEND</span>)
    <span class="hljs-title">out</span> <span class="hljs-title">SPL</span>,<span class="hljs-title">r16</span>
.<span class="hljs-title">DEF</span> <span class="hljs-title">R0000</span> = <span class="hljs-title">r20</span>
.<span class="hljs-title">DEF</span> <span class="hljs-title">R0001</span> = <span class="hljs-title">r21</span>
    <span class="hljs-title">ldi</span> <span class="hljs-title">YL</span>, <span class="hljs-title">LOW</span>(<span class="hljs-title">L0002</span>+0)
    <span class="hljs-title">ldi</span> <span class="hljs-title">YH</span>, <span class="hljs-title">HIGH</span>(<span class="hljs-title">L0002</span>+0)
    <span class="hljs-title">ldi</span> <span class="hljs-title">R0001</span>,16
    <span class="hljs-title">ldi</span> <span class="hljs-title">R0000</span>,170
<span class="hljs-title">L0003</span>:
    <span class="hljs-title">st</span>  <span class="hljs-title">Y</span>+,<span class="hljs-title">R0000</span>
    <span class="hljs-title">dec</span> <span class="hljs-title">R0001</span>
    <span class="hljs-title">brne</span>    <span class="hljs-title">L0003</span>
<span class="hljs-title">L0004</span>:
.<span class="hljs-title">DSEG</span>
<span class="hljs-title">L0002</span>:  .<span class="hljs-title">BYTE</span>   16</span></code></pre><br>
<p>    ,    .            .          ,    .   AVR              ,        MEMPtr,  ROMPtr.         </p><br>
<pre><code class="cs hljs"><span class="hljs-keyword">var</span> m = <span class="hljs-keyword">new</span> Mega328();
<span class="hljs-keyword">var</span> block1 = AVRASM.Label;
<span class="hljs-keyword">var</span> block2 = AVRASM.Label;
<span class="hljs-keyword">var</span> block3 = AVRASM.Label;
<span class="hljs-keyword">var</span> ptr = m.ROMPTR();<font></font>
ptr.Load(block1);<font></font>
<span class="hljs-comment">//    </span>
<span class="hljs-keyword">var</span> loop = AVRASM.NewLabel();<font></font>
AVRASM.Comment(<span class="hljs-string">"   "</span>);  <font></font>
m.GOIndirect(ptr);<font></font>
<span class="hljs-comment">//   ,    </span><font></font>
AVRASM.NewLabel(block1);<font></font>
AVRASM.Comment(<span class="hljs-string">"  1"</span>);<font></font>
ptr.Load(block2);<font></font>
m.GO(loop);<font></font>
AVRASM.NewLabel(block2);<font></font>
AVRASM.Comment(<span class="hljs-string">"  2"</span>);<font></font>
ptr.Load(block3);<font></font>
m.GO(loop);<font></font>
AVRASM.NewLabel(block3);<font></font>
AVRASM.Comment(<span class="hljs-string">"  3"</span>);<font></font>
ptr.Load(block1);<font></font>
m.GO(loop);<font></font>
<span class="hljs-keyword">var</span> t = AVRASM.Text(m);</code></pre><br>
<p>     3  .            .               ,      1 â†’ 2 â†’ 3 â†’ 1 â€¦     .  ,     ,           ,   . </p><br>
<p>        <em>SWITCH</em>.          ,      ,      .</p><br>
<pre><code class="cs hljs"><span class="hljs-keyword">var</span> m = <span class="hljs-keyword">new</span> Mega328();
<span class="hljs-keyword">var</span> block1 = AVRASM.Label;
<span class="hljs-keyword">var</span> block2 = AVRASM.Label;
<span class="hljs-keyword">var</span> block3 = AVRASM.Label;
<span class="hljs-keyword">var</span> arr = m.ARRAY(<span class="hljs-number">6</span>);
<span class="hljs-keyword">var</span> ptr = m.MEMPTR();
<span class="hljs-comment">//   </span><font></font>
m.Temp.Load(block1);<font></font>
m.Temp.Store(arr[<span class="hljs-number">0</span>]);<font></font>
m.Temp.Load(block2);<font></font>
m.Temp.Store(arr[<span class="hljs-number">2</span>]);<font></font>
m.Temp.Load(block3);<font></font>
m.Temp.Store(arr[<span class="hljs-number">4</span>]);<font></font>
ptr.Load(arr[<span class="hljs-number">0</span>]);
<span class="hljs-comment">//    </span>
<span class="hljs-keyword">var</span> loop = AVRASM.NewLabel();<font></font>
m.SWITCH(ptr);<font></font>
<span class="hljs-comment">//   ,    </span><font></font>
AVRASM.NewLabel(block1);<font></font>
AVRASM.Comment(<span class="hljs-string">"  1"</span>);<font></font>
ptr.Load(arr[<span class="hljs-number">2</span>]);  <span class="hljs-comment">//      </span><font></font>
m.GO(loop);<font></font>
AVRASM.NewLabel(block2);<font></font>
AVRASM.Comment(<span class="hljs-string">"  2"</span>);<font></font>
m.Temp.Load(block3);<font></font>
ptr.MStore(m.Temp);  <span class="hljs-comment">//      </span><font></font>
m.GO(loop);<font></font>
AVRASM.NewLabel(block3);<font></font>
AVRASM.Comment(<span class="hljs-string">"  3"</span>);<font></font>
ptr.Load(arr[<span class="hljs-number">0</span>]); <span class="hljs-comment">//      </span>
m.GO(loop);</code></pre><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã“ã®ä¾‹ã§ã¯ã€é·ç§»ã‚·ãƒ¼ã‚±ãƒ³ã‚¹ã¯æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚Block1â†’Block2â†’Block3â†’Block1â†’Block3â†’Block1â†’Block3â†’Block1 ...æœ€åˆã®ã‚µã‚¤ã‚¯ãƒ«ã§ã®ã¿Block2ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’å®Ÿè£…ã§ãã¾ã—ãŸã€‚</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æŠ•ç¨¿ã®æ¬¡ã®éƒ¨åˆ†ã§ã¯ã€å‘¨è¾ºæ©Ÿå™¨ã®æ“ä½œã€å‰²ã‚Šè¾¼ã¿ã€ãƒ«ãƒ¼ãƒãƒ³ã®å®Ÿè£…ãªã©ã‚’æ¤œè¨ã—ã¾ã™ã€‚</font></font></p></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja463107/index.html">ShIoTinyï¼šå°ã•ãªè‡ªå‹•åŒ–ã€ãƒ¢ãƒã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã€ã¾ãŸã¯ã€Œä¼‘æš‡ã®6ã‹æœˆå‰ã€</a></li>
<li><a href="../ja463113/index.html">Computer Vision Meetupã®ãƒ‡ãƒ¼ã‚¿ã¨ãƒ¢ãƒ‡ãƒ«ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†</a></li>
<li><a href="../ja463115/index.html">ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚²ãƒ¼ãƒ ãƒ‡ã‚¶ã‚¤ãƒ³ã®ãƒ‰ã‚¢ã®å•é¡Œ</a></li>
<li><a href="../ja463117/index.html">PHP 7.4ã§ã®ãƒ—ãƒªãƒ­ãƒ¼ãƒ‰</a></li>
<li><a href="../ja463121/index.html">è±¡ã‚’åˆ†ã‘ã¦é£Ÿã¹ã¾ã™ã€‚ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ˜ãƒ«ã‚¹ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°æˆ¦ç•¥ã®ä¾‹</a></li>
<li><a href="../ja463125/index.html">å†™çœŸã®OOP</a></li>
<li><a href="../ja463127/index.html">UPSãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ã€‚ãƒ‘ãƒ¼ãƒˆ2-åˆ†æã®è‡ªå‹•åŒ–</a></li>
<li><a href="../ja463135/index.html">2019å¹´ã«ITä¼æ¥­ã‚’ç™»éŒ²ã™ã‚‹ã“ã¨ãŒåç›Šã‚’ä¸Šã’ã¦ã„ã‚‹ã®ã¯ã©ã®å›½ã§ã™ã‹ï¼Ÿ</a></li>
<li><a href="../ja463137/index.html">ã‚ãªãŸãŒã‚²ãƒ¼ãƒ ãƒ‡ã‚¶ã‚¤ãƒŠãƒ¼ã«ãªã‚ŠãŸã„ã¨ã—ã¦ã‚‚ã€èª°ã‚‚ã‚ãªãŸã«æ–¹æ³•ã‚’æ•™ãˆã‚‹ã“ã¨ã¯ã‚ã‚Šã¾ã›ã‚“</a></li>
<li><a href="../ja463141/index.html">Habr Weeklyï¼ƒ13 /å‡ºä¼šã„ç³»ã‚µãƒ¼ãƒ“ã‚¹ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼150ä¸‡äººã®è„…å¨ã€ãƒ¡ãƒ‡ãƒ¥ãƒ¼ã‚µã®èª¿æŸ»ã€ãƒ­ã‚·ã‚¢äººã®å¤§ä»»</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>