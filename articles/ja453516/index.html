<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🚬 ✋🏽 ☯️ 最小のオートメーション。パートゼロ。企画 💼 🙁 👼🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="SDSMは終了しましたが、書き込みに対する制御されていない欲求が残っています。 長年にわたり、私たちの兄弟は日常業務の遂行に苦しみ、コミットする前に指を交差させ、夜のロールバックのために睡眠不足に陥りました。 しかし、暗い時代は終わりを迎えています。 この記事で、私は方法についてのシリーズを開始しま...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>最小のオートメーション。パートゼロ。企画</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/453516/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SDSMは終了しましたが、書き込みに対する制御されていない欲求が残っています。</font><font style="vertical-align: inherit;">
長年にわたり、私たちの兄弟は日常業務の遂行に苦しみ、コミットする前に指を交差させ、夜のロールバックのために睡眠不足に陥りました。</font><font style="vertical-align: inherit;">
しかし、暗い時代は終わりを迎えています。</font><font style="vertical-align: inherit;">
この記事で、私は方法についてのシリーズを開始します</font><i><font style="vertical-align: inherit;">、私は</font></i><font style="vertical-align: inherit;">自動化を参照します。</font><font style="vertical-align: inherit;">
このプロセスでは、RestAPI、NETCONF、YANG、YDKを使用して、自動化、変数の格納、設計の形式化の段階を扱い、多くのプログラムを行います。</font><i><font style="vertical-align: inherit;">それは</font></i><font style="vertical-align: inherit;">に意味</font><i><font style="vertical-align: inherit;">私</font></i><font style="vertical-align: inherit;">正直に言うと、ドラフト段階からI完全に書き直し、すべての出版物に二回- ）これは無条件客観真実、b）のない最良のアプローチc）は変更される可能性も、前回の記事の最初から移動中に私の意見ではないこと。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/a63/9b0/65d/a639b065d34f28321bd9918e155eb964.jpg" width="800"></a><br>
<br><font style="vertical-align: inherit;"></font><br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br><font style="vertical-align: inherit;"></font><br>
<i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br>
<br>
<a name="habracut"></a><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンテンツ</font></font></h1><br>
<ol>
<li> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ゴール</font></font></b><br>
 <ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ネットワークは単一の生物のようなものです</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">構成テスト</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">バージョン管理</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">監視および自己修復サービス</font></font></li>
</ol><br>
 </li>
<li> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">施設</font></font></b><br>
 <ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在庫システム</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IPスペース管理システム</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ネットワークサービス記述システム</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">デバイス初期化メカニズム</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ベンダーに依存しない構成モデル</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ベンダー固有のドライバー</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">デバイス配信メカニズム</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CI / CD</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">バックアップと偏差のメカニズム</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">監視システム</font></font></li>
</ol><br>
 </li>
<li> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">結論</font></font></b><br>
 </li>
</ol><br>
<hr><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ADSMをSDSMとは少し異なる形式で保持するようにします。</font><font style="vertical-align: inherit;">大きな詳細な番号の記事が引き続き表示され、それらの間に私は日常の経験からの小さなメモを公開します。</font><font style="vertical-align: inherit;">私はここで完璧主義と戦うようにし、それぞれを舐めないようにします。</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">二回目も同じように行かなければならないのはなんて面白いことでしょう。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 まず、RuNetにはないため、ネットワーク自体に関する記事を書く必要がありました。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 今では、自動化へのアプローチを体系化し、簡単な実用例を使用して上記のテクノロジーを分析する包括的なドキュメントを見つけることができませんでした。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 多分私は間違っているので、適切なリソースへのリンクを投げてください。</font><font style="vertical-align: inherit;">しかし、主な目的は私自身を学ぶことであり、隣人の生活を楽にすることなので、これは私の執筆への決意を変えるものではありません。経験の普及のために遺伝子を愛撫する素晴らしいボーナスです。</font></font><br>
</blockquote><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
中規模のLAN DCデータセンターを使用して、自動化スキーム全体に取り組みます。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私はあなたとほとんど最初にいくつかのことをします。</font></font><br>
<br>
<blockquote>          .      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">     </a>. <br>
        . <br>
</blockquote><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
LAN DCには4つのDC、約250のスイッチ、半ダースのルーター、および2つのファイアウォールがあります。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Facebookではありませんが、自動化について深く考えるには十分です。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ただし、複数のデバイスがある場合は、すでに自動化が必要であるという意見があります。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実際、誰かが少なくともニーハイのスクリプトがなくても生きられるとは想像しがたいです。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ExcelでIPアドレスが保持されているオフィスがあると聞きましたが、何千ものネットワークデバイスのそれぞれが手動で構成され、独自の構成を持っています。</font><font style="vertical-align: inherit;">もちろん、これは現代アートとして流用できますが、エンジニアの気持ちは確かに気分を害します。</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ゴール</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、最も抽象的な目標を設定します。</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ネットワークは単一の生物のようなものです</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">構成テスト</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ネットワークステータスのバージョン管理</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">監視および自己修復サービス</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この記事の後半では、使用する意味を分析し、以下では、目標と手段を詳細に分析します。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ネットワークは単一の生物のようなものです</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
サイクルの定義フレーズは、一見するとそれほど重要ではないように見え</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ますが、個々のデバイスではなくネットワークを構成します</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
過去数年にわたって、ネットワークを単一のエンティティとして扱う方法に重点が置かれるようになり、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ソフトウェア定義ネットワーク</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">インテントドリブンネットワーク</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">自律ネットワークが</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">私たちの生活に取り入れられています</font><font style="vertical-align: inherit;">。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
結局のところ、ネットワークからのアプリケーションがグローバルに必要とするもの：ポイントAとBの間の接続（まあ、場合によっては+ B-Z）と他のアプリケーションやユーザーからの分離。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/b86/c83/12c/b86c8312c49342c64d8ec3c2c471782c.jpg" width="400"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、このシリーズのタスク</font><font style="vertical-align: inherit;">は</font><b><font style="vertical-align: inherit;">、ネットワーク全体の</font></b><font style="vertical-align: inherit;">現在の構成をサポート</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">するシステム</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><b><font style="vertical-align: inherit;">構築する</font></b><font style="vertical-align: inherit;">こと</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、役割と場所に応じて、各デバイスの現在の構成にすでに分解されています。</font><font style="vertical-align: inherit;">ネットワーク管理システムは、それは我々がそれに目を向ける変更を加えることを意味し、そしてそれは、順番に、各デバイスと設定し、それのために望ましい状態を計算します。</font><font style="vertical-align: inherit;">
このようにして、私たちは手元でのCLIの使用をほぼゼロに最小限に抑えます（デバイス設定またはネットワーク設計の変更はすべて正式に文書化する必要があります）。その後、必要なネットワーク要素にのみ展開します。</font></font><br>
<b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br><font style="vertical-align: inherit;"></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> つまり、たとえば、Kazanのラックマウントスイッチで、1つではなく2つのネットワークをアナウンスすることにした場合、</font></font><br>
 <ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">まず、システムの変更を文書化します</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">すべてのネットワークデバイスのターゲット構成を生成します</font></font></li>
<li>    ,  ,      ,  ,      .</li>
</ol><br>
          .<br>
</blockquote><br>
<br>
<h2> </h2><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">問題の80％が構成の変更中に発生する</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ことが知られ</font></a><font style="vertical-align: inherit;">ています-これの間接的な証拠は、年末年始の間に、すべてが通常穏やかであることです。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私は人為的エラーによる数十のグローバルダウンタイムを個人的に目撃しました：間違ったコマンド、間違ったブランチで構成が実行され、コミュニティがルーターでMPLSをグローバルに解体し、5つの鉄を構成し、6番目のエラーに気付かず、別の人が行った古い変更をコミットしました。シナリオ闇は暗い。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
自動化により、ミスを減らすことができますが、規模は大きくなります。したがって、1つのデバイスではなく、ネットワーク全体を一度にブリックアップできます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
太古の昔から、私たちの祖父は鋭い目、鋼の卵、およびそれらを展開した後のネットワークの効率によって行われた変更の正確さを確認しました。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ダウンタイムと壊滅的な損失につながる仕事をした祖父は、子孫をほとんど残さず、時間の経過とともに絶滅するはずですが、進化は遅いプロセスであるため、誰もが以前に実験室での変化を確認するわけではありません。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ただし、構成のテストプロセスを自動化した人たちの最前線、およびネットワークへのそのさらなる適用。</font><font style="vertical-align: inherit;">つまり、</font><font style="vertical-align: inherit;">開発者から</font><font style="vertical-align: inherit;">CI / CD（</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">継続的インテグレーション、継続的デプロイメント</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）の</font><font style="vertical-align: inherit;">手順を借りました</font><font style="vertical-align: inherit;">。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1つの部分では、バージョンコントロールシステム（おそらくgithub）を使用してこれを実装する方法について説明します。</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ネットワークCI / CDの概念に慣れるとすぐに、それを本番ネットワークに適用して構成を確認する方法は、中世初期の無知に思えます。</font><font style="vertical-align: inherit;">弾頭をハンマーでハンマーで打つ方法について。</font></font><br>
</blockquote><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アイデアの有機継続</font><font style="vertical-align: inherit;">ネットワーク管理システムおよびCI / CDには、構成の完全なバージョン管理です。</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">バージョン管理</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
少しでも変化があれば、たとえ目立たないデバイスであっても、ネットワーク全体がある状態から別の状態に移行すると想定します。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、常にデバイス上でコマンドを実行するのではなく、ネットワークの状態を変更します。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、これらの状態を取得して、バージョンと呼びますか？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
現在のバージョンが1.0.0であるとしましょう。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ループバックインターフェイスのIPアドレスがいずれかのToRで変更されましたか？これはマイナーバージョンです-番号1.0.1を取得します。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
BGPのルートインポートポリシーを確認しました-もう少し真剣に-すでに1.1.0 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
IGPを削除してBGPのみに切り替えることにしました-これは根本的な設計変更-2.0.0です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同時に、異なるDCは異なるバージョンを持つことができます-ネットワークが開発中である、新しい機器がインストールされている、どこかに新しいスパインレベルが追加されている、どこかに-ないなど。</font></font><br>
<br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">セマンティックバージョニング</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
について</font><font style="vertical-align: inherit;">は、別の記事で説明します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私は繰り返します-変更（デバッグコマンドを除く）はバージョンの更新です。</font><font style="vertical-align: inherit;">管理者は、現在のバージョンからの逸脱について通知を受ける必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同じことが変更のロールバックにも当てはまります。これは、最後のコマンドの廃止ではなく、デバイスのオペレーティングシステムによるロールバックではありません。これにより、ネットワーク全体が新しい（古い）バージョンになります。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">監視および自己修復サービス</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
現代のネットワークにおけるこの自明のタスクは、新しいレベルに進みます。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
多くの場合、大規模なサービスプロバイダーは、何が起こったのかを把握するのではなく、停止したサービスを迅速に終了し、新しいサービスを立ち上げる必要があるというアプローチを実践しています。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
「非常に」とは、すべての面から監視を使って大量に塗抹する必要があることを意味し、数秒以内に標準からのわずかな逸脱を検出します。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、インターフェースのロードやノードのアクセシビリティなど、ここには十分に馴染みのあるメトリックはありません。彼らのための職務担当者の十分かつ手動の追跡ではありません。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
多くの場合、通常は</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">自己修復</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が必要です。</font><font style="vertical-align: inherit;">コントロールは赤く点灯し、痛むところに取り付けられた独自のオオバコに行きました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、ここでは、個々のデバイスだけでなく、ネットワーク全体の状態、および比較的明確なホワイトボックスとすでに複雑なブラックボックスの両方も監視します。</font></font><br>
<br>
<hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そのような野心的な計画を実行するために何が必要ですか？</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ネットワーク上のすべてのデバイス、それらの場所、役割、モデル、ソフトウェアバージョンのリストを用意します。</font></font><br>
 <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kazan-leaf-1.lmu.net、Kazan、leaf、Juniper QFX 5120、R18.3。</font></font></i><br>
 </li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ネットワークサービスを記述するためのシステムがある。</font></font><br>
 <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IGP、BGP、L2 / 3VPN、ポリシー、ACL、NTP、SSH。</font></font></i></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">デバイスを初期化できる。</font></font><br>
 <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ホスト名、管理IP、管理ルート、ユーザー、RSAキー、LLDP、NETCONF</font></font></i></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">デバイスを構成し、構成を目的の（古いバージョンを含む）バージョンにします。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">テスト構成</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">すべてのデバイスのステータスを定期的にチェックして、現在のデバイスからの逸脱を確認し、誰がすべきかを伝えます。</font></font><br>
 <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">夜、誰かが静かにACLにルールを追加しました</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パフォーマンスを監視します。</font></font></li>
</ul><br>
<hr><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">施設</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プロジェクトをコンポーネントに分解し始めるのに十分複雑に聞こえます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そしてそれらの10があります。</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在庫システム</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IPスペース管理システム</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ネットワークサービス記述システム</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">デバイス初期化メカニズム</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ベンダーに依存しない構成モデル</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ベンダー固有のドライバー</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">デバイス配信メカニズム</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CI / CD</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">バックアップと偏差のメカニズム</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">監視システム</font></font></li>
</ol><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ちなみに、これはサイクルの目標に対する見方がどのように変わったかの一例です。ドラフトコンポーネントには4つのコンポーネントがありました。</font></font><br>
</blockquote><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/5a5/d86/b10/5a5d86b106e67b2999c659a438394321.png" width="800"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この図では、すべてのコンポーネントとデバイス自体を示しています。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
交差するコンポーネントは互いに相互作用します。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ブロックが大きいほど、このコンポーネントに注意を払う必要があります。</font></font><br>
<br>
<hr><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンポーネント1.在庫システム</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
明らかに、どのような機器、それがどこにあるのか、何に接続されているのかを知りたいのです。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在庫システムは、あらゆる企業にとって不可欠な要素です。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ほとんどの場合、企業にはネットワークデバイスについて、より具体的なタスクを解決する個別の在庫システムがあります。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一連の記事の一部として、DCIM-Data Center Infrastructure Managementと呼びます。</font><font style="vertical-align: inherit;">厳密に言えば、DCIMという用語自体にはさらに多くのものが含まれます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このタスクでは、デバイスに関する次の情報を格納します。</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在庫番号</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タイトル説明 </font></font></li>
<li> (<i>Huawei CE12800, Juniper QFX5120 </i>)</li>
<li>  (<i>,  </i>)</li>
<li> (<i>Leaf, Spine, Border Router </i>)</li>
<li> (<i>, , -, , </i>)</li>
<li>  </li>
<li> </li>
</ul><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/1fa/be1/8fd/1fabe18fd786b3e5aeb432ee382fee64.png" width="400"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たち自身がこのすべてを知りたいことは完全に明らかです。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、それは自動化に役立ちますか？</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
もちろん。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
たとえば、リーフスイッチ上のこのデータセンターでは、Huaweiの場合、特定のトラフィックをフィルタリングするためのACLをVLANに適用し、Juniperの場合は、物理インターフェイスのユニット0に適用する必要があることがわかっています。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
または、地域内のすべての境界に新しいSyslogサーバーをロールアウトする必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その中に、仮想ルーターやルートリフレクターなどの仮想ネットワークデバイスを格納します。</font><font style="vertical-align: inherit;">DNSサーバー、NTP、Syslog、および一般的に何らかの形でネットワークに関連するすべてのものを追加できます。</font></font><br>
<hr><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンポーネント2. IPスペース管理システム</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
はい、そして今日では、ExcelファイルでプレフィックスとIPアドレスを追跡する人々のチームがあります。</font><font style="vertical-align: inherit;">しかし、現代のアプローチは依然としてデータベースであり、nginx / apacheのフロントエンド、API、およびVRFに分離されたIPアドレスとネットワークを考慮するための幅広い機能を備えています。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
IPAM-IPアドレス管理。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このタスクでは、次の情報を格納します。</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VLAN</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VRF</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ネットワーク/サブネット</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IPアドレス</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アドレスをデバイスに、ネットワークをロケーションに、VLAN番号をバインド</font></font></li>
</ul><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/c77/6f7/0fd/c776f70fd00c9292163c3e85e85b7ab2.png" width="400"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
繰り返しますが、ToRループバックに新しいIPアドレスを割り当てることで、すでに誰かに割り当てられているという事実に遭遇しないことを確認したいことは明らかです。または、ネットワークの異なる端で同じプレフィックスを2回使用したこと。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、これは自動化にどのように役立ちますか？</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
簡単です。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
割り当てに使用できるIPアドレスが存在するループバックの役割を持つシステムでプレフィックスを要求します。割り当て可能なIPアドレスがある場合はアドレスを選択し、そうでない場合は新しいプレフィックスの作成を要求します。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
または、デバイス構成を作成するときに、同じシステムからインターフェイスがどのVRFにあるかを見つけることができます。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして新しいサーバーを起動すると、スクリプトはシステムに入り、どのサーバーのどのスイッチ、どのポート、どのサブネットがインターフェースに割り当てられているかを調べます-それからサーバーアドレスを選択します。</font></font><br>
<br>
<hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DCIMとIPAMが1つのシステムに統合されて、機能が重複せず、2つの類似のエンティティにサービスを提供しないようにしたいという願望を訴えます。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
だから私たちはやります。</font></font><br>
<hr><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンポーネント3.ネットワークサービス記述システム</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初の2つのシステムがまだ何らかの方法で使用する必要がある変数を格納している場合、3番目のシステムは、デバイスの各役割について、その構成方法を説明します。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2つの異なるタイプのネットワークサービスを強調する価値があります。</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">インフラ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クライアント</font></font></li>
</ul><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
前者は、基本的な接続とデバイス管理を提供するように設計されています。</font><font style="vertical-align: inherit;">これらには、VTY、SNMP、NTP、Syslog、AAA、ルーティングプロトコル、CoPPなどが含まれます。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2つ目は、MPLS L2 / L3VPN、GRE、VXLAN、VLAN、L2TPなど、クライアントのサービスを整理します。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
もちろん、境界線のケースもあります-MPLS LDP、BGPをどこに含めるか？</font><font style="vertical-align: inherit;">はい、ルーティングプロトコルをクライアントに使用できます。</font><font style="vertical-align: inherit;">しかし、これは重要ではありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
どちらのタイプのサービスも、構成プリミティブに分解されます。</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">物理および論理インターフェース（タグ/ anteg、mtu）</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IPアドレスとVRF（IP、IPv6、VRF）</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ACLとトラフィック処理ポリシー</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プロトコル（IGP、BGP、MPLS）</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ルーティングポリシー（プレフィックスリスト、コミュニティ、ASNフィルター）。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サービスサービス（SSH、NTP、LLDP、Syslog ...）</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">等。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
どれほど正確にこれを行うのか、私はまだ心に留めません。</font><font style="vertical-align: inherit;">別記事で扱います。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/40b/ffe/b1b/40bffeb1b4f75f83d690bb96d2ca8ae1.png" width="400"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
もう少し人生に近い場合は、</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
リーフスイッチにすべての接続されたスパインスイッチとのBGPセッションがあり、接続されたネットワークをプロセスにインポートし、スパインスイッチからの特定のプレフィックスからのネットワークのみを受け入れる必要</font><font style="vertical-align: inherit;">があると説明でき</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">CoPP IPv6 NDを10 ppsなどに制限します。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次にスパインは、接続されたすべてのボディとのセッションを保持し、ルートリフレクタとして機能し、特定の長さのルートと特定のコミュニティのルートのみをそれらから受け取ります。</font></font><br>
<hr><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンポーネント4.デバイスの初期化メカニズム</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この見出しの下で、デバイスがレーダーに表示され、リモートからアクセスできるようにするために必要な多くのアクションを組み合わせます。</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">インベントリシステムでデバイスを起動します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">管理IPアドレスを強調表示します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">それに設定し、基本的なアクセス：</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ホスト名、管理IPアドレス、管理ネットワークへのルート、ユーザー、SSHキー、プロトコル-のTelnet / SSH / NETCONF</font></font></li>
</ol><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3つのアプローチがあります。</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">すべてが完全に手動です。</font><font style="vertical-align: inherit;">デバイスをスタンドに持ってきて、普通の有機的な人が彼をシステムに導き、コンソールに接続して設定します。</font><font style="vertical-align: inherit;">小規模な静的ネットワークで機能する場合があります。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ZTP-ゼロタッチプロビジョニング。</font><font style="vertical-align: inherit;">Ironが来て、立ち上がって、DHCP経由でアドレスを受け取り、特別なサーバーに行き、それ自体を構成しました。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンソールサーバーのインフラストラクチャ。初期構成は、自動モードのコンソールポートを介して行われます。</font></font></li>
</ul><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3つすべてについては、別の記事で説明します。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/16e/464/8dd/16e4648dd13249dc1da87a0b341c305c.png" width="400"><br>
<br>
<hr><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンポーネント5.ベンダーに依存しない構成モデル</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これまでのところ、すべてのシステムはぼろぼろに散らばっていて、変数と、ネットワーク上で見たいものを宣言的に説明しています。</font><font style="vertical-align: inherit;">しかし、遅かれ早かれ、詳細に対処する必要があります。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この段階では、特定のデバイスごとに、プリミティブ、サービス、および変数が、ベンダーに依存しない方法でのみ特定のデバイスの完全な構成を実際に記述する構成モデルに結合されます。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このステップを与えるものは何ですか？</font><font style="vertical-align: inherit;">すぐにデバイスを構成しませんか？</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実際、これにより3つの問題を解決できます。</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">デバイスと対話するために特定のインターフェースに適応しないでください。</font><font style="vertical-align: inherit;">CLI、NETCONF、RESTCONF、SNMPのいずれであっても、モデルは同じです。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> テンプレート/スクリプトの数をネットワーク上のベンダーの数で維持しないでください。設計を変更する場合は、いくつかの場所で同じに変更してください。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> デバイス（バックアップ）から構成をダウンロードし、完全に同じモデルに配置して、ターゲット構成と、デルタの計算および構成パッチの準備に使用できる構成を直接比較します。これにより、必要な部分のみが変更されるか、偏差を検出します。</font></font></li>
</ol><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/eda/ebf/9c0/edaebf9c0fc5b62c45a9bb555cc30824.png" width="400"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この段階の結果、ベンダーに依存しない構成が得られます。</font></font><br>
<hr><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンポーネント6.ベンダーインターフェイス固有のドライバー</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一度tsiskaを構成できれば、ジャンパーと同じ方法で、まったく同じ呼び出しを送信できることを期待して、自分を慰めないでください。ホワイトボックスの人気の高まりとNETCONF、RESTCONF、OpenConfigのサポートの出現にもかかわらず、これらのプロトコルが提供する特定のコンテンツはベンダーによって異なり、これはあきらめないだけの競争上の違いの1つです。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、NorthBoundインターフェースとしてRestAPIを使用するOpenContrailおよびOpenStackとほぼ同じであり、まったく異なる呼び出しを想定しています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、5番目のステップでは、ベンダーに依存しないモデルは、鉄に行く形を取る必要があります。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、ここでは、すべての手段が良い（いいえ）です：単純な秋のCLI、NETCONF、RESTCONF、SNMP。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、前のステップの結果を特定のベンダーの望ましい形式（CLIコマンドのセット、XML構造）に変換するドライバーが必要です。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/10d/e75/b99/10de75b9994bbfbb08fef4617baf8382.png" width="400"><br>
<br>
<hr><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンポーネント7.構成をデバイスに配信するメカニズム</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
構成を生成しましたが、それでもデバイスに配信する必要があります-もちろん、手動ではありません。</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">まず</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、どのような輸送手段を使用するのかという問題に直面しています。</font><font style="vertical-align: inherit;">そして、今日の選択肢はもはや小さくありません。</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CLI（telnet、ssh）</font></font></li>
<li><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SNMP</font></font></s></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NETCONF</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RESTCONF</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">REST API</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenFlow（これは設定ではなくFIBを配信する方法であるため、リストから除外されています）</font></font></li>
</ul><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここにeを付けましょう。</font><font style="vertical-align: inherit;">CLIはレガシーです。</font><font style="vertical-align: inherit;">SNMP ... khe khe。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
RESTCONFはまだ未知の動物であり、REST APIはほとんど誰もサポートしていません。</font><font style="vertical-align: inherit;">したがって、ループ内のNETCONFに焦点を当てます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実際、読者がすでに理解しているように、この時点ですでにインターフェースを決定していました。前のステップの結果は、選択されたインターフェースの形式ですでに提示されていました。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">次に</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、これを行うためのツールを教えてください。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここでも選択肢は大きいです：</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">自己記述のスクリプトまたはプラットフォーム。</font><font style="vertical-align: inherit;">私たちはncclientとasyncIOで武装し、自分ですべてを行います。</font><font style="vertical-align: inherit;">導入システムをゼロから構築するのにいくらかかりますか？</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ネットワークモジュールの豊富なライブラリでAnsible。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">彼の貧弱なネットワークでソルトし、ナパームとバンドルします。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">実際、いくつかのベンダーを知っているナパームは、それですべてです。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nornirは、将来に備えて準備している別の獣です。</font></font></li>
</ul><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まだお気に入りは選ばれていません-私たちは踏みつけます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここで他に何が重要ですか？</font><font style="vertical-align: inherit;">構成を適用した結果。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
成功したかどうか。</font><font style="vertical-align: inherit;">ハードウェアへのアクセスを維持したかどうか。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
commitは、デバイスにダウンロードされたものの確認と検証に役立ちます。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これとNETCONFの正しい実装を組み合わせると、適切なデバイスの範囲が大幅に狭まります。通常のコミットをサポートしているメーカーは多くありません。</font><font style="vertical-align: inherit;">しかし、これは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RFP</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の前提条件の1つにすぎません</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">結局のところ、32 * 100GEインターフェースの条件下で1人のロシアのベンダーが合格しないことを誰も心配していません。</font><font style="vertical-align: inherit;">または心配ですか？</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/368/608/fda/368608fdaff0eafaf308ce37ac008273.png" width="400"><br>
<hr><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンポーネント8. CI / CD</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この時点で、すべてのネットワークデバイスで構成を行う準備ができています。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちはネットワークの状態のバージョン管理について話しているので、「すべてに」と書いています。また、スイッチの設定を1つだけ変更する必要がある場合でも、ネットワーク全体の変更が計算されます。明らかに、ほとんどのノードでゼロになる可能性があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ただし、すでに述べたように、上記のとおり、すべてを一度に製品に組み込むための野蛮人ではありません。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
生成された構成は、最初にパイプラインCI / CDを通過する必要があります。</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CI / CDは、継続的インテグレーション、継続的デプロイメントの略です。</font><font style="vertical-align: inherit;">これは、チームが6か月に1回以上メジャーリリースを発行し、古いリリースを完全に置き換え、新しい機能を定期的に小さなバッチで展開するアプローチで、互換性、セキュリティ、およびパフォーマンス（統合）を包括的にテストします。</font></font><br>
</blockquote><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これを行うには、構成の変更を監視するバージョン管理システム、カスタマーサービスが機能しているかどうかを確認するラボ、この事実を確認する監視システムがあり、最後のステップは変更を本番ネットワークにロールアウトすることです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
デバッグチームを除いて、ネットワーク上のすべての変更はCI / CDパイプラインを経由する必要があります。これは、静かな生活と長い幸せなキャリアの保証です。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/f14/979/119/f14979119a9580b9d2f43c3f31cde326.png" width="400"><br>
<br>
<hr><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンポーネント9.バックアップおよび拒否システム</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さて、バックアップについて再度話す必要はありません。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
クラウンに応じて、またはgitの構成変更の事実に基づいて、それらを単に追加します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、2番目の部分はより興味深いものです。誰かがこれらのバックアップを監視する必要があります。</font><font style="vertical-align: inherit;">そして、いくつかのケースでは、この誰かが行ってすべてをそのまま回転させなければならず、他の人では、誰かが鳴く、その障害です。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
たとえば、変数に登録されていない新しいユーザーがいる場合は、ハックから削除する必要があります。</font><font style="vertical-align: inherit;">そして、新しいファイアウォールルールに触れない方がよい場合、誰かがデバッグをオンにしただけかもしれませんし、新しいサービス（混乱）がルールに従って登録しなかったかもしれませんが、人々はすでにそれに行きました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
とにかく、自動化システムと管理の鉄鋼の手にもかかわらず、ネットワーク全体の規模における特定の小さなデルタから逃れることはありません。</font><font style="vertical-align: inherit;">とにかく問題をデバッグするために、誰もシステムに構成を持ち込みません。</font><font style="vertical-align: inherit;">さらに、構成モデルでは提供されない場合もあります。</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">たとえば、問題を特定するための特定のIP上のパケット数をカウントするファイアウォールルール-完全に通常の一時的な構成。</font></font><br>
</blockquote><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/902/93e/570/90293e570db42ff6e1c9ca25fa8cead7.png" width="400"><br>
<br>
<hr><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンポーネント10.監視システム</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初は、監視のトピックは取り上げませんでした。それでも、議論の余地のある、複雑で複雑なトピックです。しかしその過程で、これは自動化の不可欠な部分であることがわかりました。そして、あなたは練習なしでそれを回避することはできません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
思考の発達は、CI / CDプロセスの有機的な部分です。構成をネットワークに展開した後、すべてが問題ないかどうかを判断できる必要があります。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、それはインターフェースやホストの可用性のグラフだけでなく、もっと微妙なこと、つまり必要なルートの可用性、それらの属性、BGPセッションの数、OSPFネイバー、エンドツーエンドの稼働時間サービスに関するものです。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、外部サーバーのSyslogはフォールディングを停止しましたか、SFlowエージェントは故障しましたか、キューのドロップは増大し始めましたか、そしてプレフィックスのペア間の接続は故障しましたか？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
別の記事で、これについて考察します。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/7c4/347/940/7c4347940b12f7eb41fd05a4102e4564.png" width="400"><br>
<hr><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/0ec/0ff/45f/0ec0ff45ff4384becf2ede765a56c091.png" width="800"><br>
<br>
<hr><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">結論</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
基本として、最新のデータセンターネットワーク設計の1つとして、ルーティングプロトコルとしてBGPを使用するL3 Closファブリックを選択しました。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
今回は、Juniper上にネットワークを構築します。これは、JunOsインターフェースがvanlavであるためです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
オープンソースツールとマルチベンダーネットワークのみを使用して私たちの生活を複雑にしてみましょう。そのため、ジュニパーを除いて、別の幸運な男を選びます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
今後の出版計画は次のようなものです。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初に、仮想ネットワークについてお話します。第一に、私が望んでいること、そして第二に、これがないと、インフラストラクチャネットワークの設計があまり明確にならないためです。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、ネットワーク設計自体について、トポロジ、ルーティング、ポリシーについて説明します。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実験台を組み立てましょう。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
じっくり考えて、ネットワーク上のデバイスの初期化を練習しましょう。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、各コンポーネントについて詳しく説明します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、はい、私は既製のソリューションでこのサイクルをエレガントに終わらせることを約束しません。</font><font style="vertical-align: inherit;">:)</font></font><br>
<br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">役立つリンク</font></font></h5><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">このシリーズを読む前に、Natasha Samoilenko </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pythonによるネットワークエンジニア向けの</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">本を読んでください</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">そして、おそらく、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コースを受講してください</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Peter Lapukhovによって作成されたFacebookのデータセンターファクトリの設計に関する</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RFC</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を読むことも役立ち</font><font style="vertical-align: inherit;">ます。</font></font></li>
<li><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tungsten Fabric</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アーキテクチャのドキュメント</font><font style="vertical-align: inherit;">（以前のOpen Contrail）</font><font style="vertical-align: inherit;">は、オーバーレイSDNがどのように機能するかを示してい</font><font style="vertical-align: inherit;">ます。</font></font></li>
</ul><br>
<br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ありがとう</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ローマ峡谷。</font><font style="vertical-align: inherit;">コメントと編集用。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Artyom Chernobay。</font><font style="vertical-align: inherit;">KDPVの場合。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja453502/index.html">私の熊手：ぼろから富まで</a></li>
<li><a href="../ja453508/index.html">スマートフォンを持たない男</a></li>
<li><a href="../ja453510/index.html">すべて：UiPath RPAの新しいアクションの作成に関するチュートリアル</a></li>
<li><a href="../ja453512/index.html">スタイル転送</a></li>
<li><a href="../ja453514/index.html">iOSの紹介オファー</a></li>
<li><a href="../ja453520/index.html">MitogenでAnsibleをスピードアップ</a></li>
<li><a href="../ja453522/index.html">ハッピーバースデー、Habr br</a></li>
<li><a href="../ja453524/index.html">モバイル＃299開発者向けの興味深い資料のダイジェスト（5月20〜26日）</a></li>
<li><a href="../ja453526/index.html">ITSM-それは何であり、実装を開始する場所</a></li>
<li><a href="../ja453528/index.html">Psion SIBO-エミュレートする必要さえないPDA</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>