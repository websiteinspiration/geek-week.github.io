<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>😾 👩🏾‍🍳 🏀 Utilisation des mécanismes de jetons cryptographiques PKCS # 11 sur la plate-forme Android 🙏🏽 🏴󠁧󠁢󠁥󠁮󠁧󠁿 🏡</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Le moment est venu d'utiliser les mécanismes cryptographiques PKCS # 1 1 sur la plateforme Android. Quelqu'un pourrait dire qu'il n'y a pas de jetons ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Utilisation des mécanismes de jetons cryptographiques PKCS # 11 sur la plate-forme Android</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/488528/"><img src="https://habrastorage.org/webt/7r/mo/fw/7rmofwangbuwxcas42acik2b-fs.png" align="left" width="150"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le moment est venu d'utiliser les </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mécanismes</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> cryptographiques </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;">PKCS # 1</font></a><font style="vertical-align: inherit;"> 1 sur la plateforme Android. Quelqu'un pourrait dire qu'il n'y a pas de jetons matériels pour Android. Mais s'il en est ainsi, ce n'est qu'un phénomène temporaire. Mais aujourd'hui, vous pouvez mettre un jeton logiciel ou utiliser un </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jeton cloud</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Étant donné que l'utilitaire </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cryptoarmpkcs-A</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est </font><font style="vertical-align: inherit;">développé pour la plate-forme Android à l'aide d'Androwish dans le langage de script Tcl / Tk, le </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">package TclPKCS11 version 1.0.1</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est utilisé pour connecter les jetons </font><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans le même temps, aucun traitement du colis n'était nécessaire. Tout ce qui a été fait a été un script a été ajouté au projet pour construire une bibliothèque de packages écrite en </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, pour Android et la distribution de la bibliothèque elle-même. </font><font style="vertical-align: inherit;">Il a été décidé d'ajouter les bibliothèques de logiciels ls11sw2016 et les jetons cloud ls11cloud pour différentes plates-formes au même projet.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le reste est simple. </font><font style="vertical-align: inherit;">Ajoutez les boutons pour sélectionner le jeton de travail dans la deuxième fenêtre et obtenez:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jeton logiciel ls11sw2016;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jeton cloud ls11cloud;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">un autre jeton PKCS11 # 11.</font></font></li>
</ul><br>
<img src="https://habrastorage.org/webt/s0/jq/mr/s0jqmregvxkcgvkwvsx7rmie2j0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par défaut, un jeton logiciel est connecté. S'il n'a pas été créé précédemment, il sera proposé de l'initialiser. Rappelons que l' </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">initialisation du token</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> consiste à attribuer une étiquette et à définir un code PIN personnalisé: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/xb/pc/ql/xbpcqlq7gvfyl8jst-eg4khvwx0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Notez que le token logiciel est conçu conformément aux recommandations de PKCS # 11 v.2.40 et TK-26. Pour obtenir des informations complètes sur le jeton, y compris les mécanismes cryptographiques pris en charge, cliquez simplement sur le bouton «À propos du jeton et de sa cryptographie» dans le menu principal («Fonctionnel»). Aujourd'hui, pas un seul jeton matériel prenant en charge la cryptographie russe ne possède cette fonctionnalité:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/qz/wp/qc/qzwpqcl1ba_uttm162zxb-pm1cs.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La question se pose: - comment installer un certificat personnel pour un token. Il y a deux options. La première option consiste à importer le certificat lui-même et sa paire de clés via le conteneur PKCS # 12 (le bouton «Travailler avec PKCS12 / PFX»): La </font></font><br>
<br>
<img src="https://habrastorage.org/webt/4s/a_/np/4sa_npp7rxr868puvwxjwoykljy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
deuxième option consiste à créer une demande (PKCS # 10) pour le certificat. Cette option (la fonction </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">«Demande de certificat»</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) fournit génération de paires de clés directement sur le token: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/f4/ib/sp/f4ibspc8cputip8abq-faar69ia.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
vous pouvez maintenant enregistrer la demande de lecteurs flash et vous rendre au </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">centre de certification</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> avec les documents </font><font style="vertical-align: inherit;">du certificat. Si vous utilisez le certificat à des fins de test ou intracorporatif, l'utilitaire </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CAFL63</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> peut également être utilisé pour émettre le certificat </font><font style="vertical-align: inherit;">. Le certificat reçu est importé dans le jeton dans l'onglet «Afficher la demande / le certificat»:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ez/4e/o9/ez4eo9ybytryui-9d_uz2477wdc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pouvez maintenant signer des documents avec des certificats stockés sur le jeton à l'aide de l'onglet </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Signer un document"</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans le prochain article, nous vous expliquerons comment vous connecter à un jeton cloud. </font><font style="vertical-align: inherit;">Et la question reste pour l'instant avec le transfert des fonctions de génération de certificats vers la plateforme mobile. </font><font style="vertical-align: inherit;">Y a-t-il un besoin pour cela? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La version mise à jour de l'utilitaire cryptoarmpkcs-A pour la plate-forme Android peut être téléchargée ici:</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AndroWishApp-debug.apk</font></font></a> </li>
</ul><br>
<h3><font color="blue"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Journal de sauvegarde PS</font></font></font></h3> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour construire le package, l'utilitaire bones du </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SDK AndroWish est utilisé</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Après avoir correctement assemblé le package, le bouton Installer et exécuter apparaît, après avoir cliqué sur une fenêtre de journal qui s'ouvre, qui affiche la sortie de adb logcat (fonction de journalisation Android Debug Bridge). </font><font style="vertical-align: inherit;">L'inconvénient de cet écran est qu'il est difficile d'y trouver un message d'erreur, en particulier lorsque le drapeau «V» (verbeux) est activé. </font><font style="vertical-align: inherit;">Par conséquent, le bouton "Enregistrer" a été ajouté, ce qui enregistre le journal dans le fichier /tmp/logBone.txt (nous parlons de Linux): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/gh/lt/mz/ghltmzkds3yf44as2-m28lbeulo.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Avec l'avènement de ce bouton, le processus de débogage de l'application a été grandement simplifié. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour ajouter un bouton, ajoutez simplement le code suivant au fichier Bones après la ligne 2591:</font></font><br>
<br>
<pre><code class="plaintext hljs">	    ttk::button $l.frame.clear -text "Clear" -width 6 \<font></font>
		-command [list adb_logcat_clear $l.text]<font></font>
# <font></font>
	    ttk::button $l.frame.save -text "Save" -width 6 \<font></font>
		-command [list adb_logcat_save $l.text]<font></font>
<font></font>
	    ttk::button $l.frame.run -text "Run" -width 6 \<font></font>
		-command [list adb_logcat_run $l]</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La commande save adb_logcat_save a la forme:</font></font><br>
<br>
<pre><code class="plaintext hljs">proc adb_logcat_save {text} {<font></font>
    set tt [$text get 1.0 end]<font></font>
    set file "/tmp/logBone.txt"<font></font>
    file delete -force $file<font></font>
  #   <font></font>
    set fd [open $file w]<font></font>
    chan configure $fd -translation binary<font></font>
    puts -nonewline $fd $tt<font></font>
    close $fd<font></font>
}</code></pre></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr488514/index.html">Débogueur à distance Android - Débogage à distance des applications Android</a></li>
<li><a href="../fr488516/index.html">Guide complet des balises iframe</a></li>
<li><a href="../fr488518/index.html">Examen comparatif des livres électroniques ONYX BOOX Livingstone et Amazon Kindle Paperwhite (2018)</a></li>
<li><a href="../fr488520/index.html">Bloopers et gribouillis. 2</a></li>
<li><a href="../fr488522/index.html">JOOQ et son terrier de lapin. Comment survivre sans hibernation</a></li>
<li><a href="../fr488530/index.html">Qu'est-ce que la réactivité?</a></li>
<li><a href="../fr488534/index.html">Lampe UV DIY 400-405 nm pour la polymérisation de modèles photopolymères 3D</a></li>
<li><a href="../fr488536/index.html">Réfléchissez bien avant d'utiliser Docker-in-Docker pour CI ou environnement de test.</a></li>
<li><a href="../fr488540/index.html">Pistolet Gauss</a></li>
<li><a href="../fr488544/index.html">Supprimer la couverture de code d'une application Node.JS déjà en cours d'exécution</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>