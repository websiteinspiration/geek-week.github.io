<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üéá üì∏ üë©‚ÄçüöÄ D√©mo d'analyse de code Second Reality üî∂ üë®üèΩ‚Äçü§ù‚Äçüë®üèª üßñüèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Le 23 juillet 2013, le code source de la d√©mo Second Reality (1993) a √©t√© publi√© . Comme beaucoup, j'avais h√¢te de voir l'int√©rieur de la d√©mo qui nou...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>D√©mo d'analyse de code Second Reality</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/501030/"><div style="text-align:center;"><img src="http://fabiensanglard.net/second_reality/second_reality.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le 23 juillet 2013, le </font><font style="vertical-align: inherit;">code source de la d√©mo Second Reality (1993) a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√©t√© publi√©</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Comme beaucoup, j'avais h√¢te de voir l'int√©rieur de la d√©mo qui nous a tant inspir√© au fil des ans. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je m'attendais √† voir le chaos monolithique de l'assembleur, mais au lieu de cela, √† ma grande surprise, j'ai d√©couvert une architecture complexe qui combine gracieusement plusieurs langages. </font><font style="vertical-align: inherit;">Je n'ai jamais vu un tel code auparavant, repr√©sentant parfaitement deux aspects int√©graux du d√©veloppement d'une d√©mo:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Travail en √©quipe.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Obfuscation.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme d'habitude, j'ai r√©dig√© un article pour mes notes: j'esp√®re que cela fera gagner quelques heures √† quelqu'un et incitera peut-√™tre les autres √† lire plus de code source et √† devenir des ing√©nieurs plus exp√©riment√©s.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Partie 1: Introduction</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D√©mo</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Avant de me lancer dans le code, je vais vous donner un lien pour capturer la d√©mo l√©gendaire en vid√©o HD (Michael Hut). </font><font style="vertical-align: inherit;">Aujourd'hui, c'est le seul moyen d'√©valuer pleinement la d√©mo sans probl√®mes graphiques (m√™me DOSBox ne peut pas le lancer correctement).</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/KTjnt_WSJu8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Premier contact avec le code</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le code source est publi√© sur GitHub. </font><font style="vertical-align: inherit;">Entrez simplement une commande </font></font><code>git</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<blockquote><code> git clone git@github.com:mtuomi/SecondReality.git</code></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Au d√©but, le contenu est d√©routant: 32 dossiers et un myst√©rieux </font></font><code>U2.EXE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">qui ne d√©marre pas dans DosBox.</font></font><br>
<br>
<div style="text-align:center;"><img src="http://fabiensanglard.net/second_reality/first_contact.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La d√©mo avait le titre de travail ¬´Unreal 2¬ª (le premier ¬´Unreal¬ª √©tait la pr√©c√©dente d√©mo Future Crew, sortie pour la premi√®re Assembl√©e en 1992). </font><font style="vertical-align: inherit;">Et ce n'est qu'au cours du processus de d√©veloppement que le nom a √©t√© chang√© pour ¬´Second Reality¬ª. </font><font style="vertical-align: inherit;">Cela explique le nom du fichier "U2.EXE", mais pas pourquoi le fichier ne fonctionne pas ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous ex√©cutez </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CLOC</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , nous obtiendrons des m√©triques int√©ressantes:</font></font><br>
<br>
<pre>    -------------------------------------------------------------------------------<font></font>
                                                   <font></font>
    -------------------------------------------------------------------------------<font></font>
    Assembly                        99           3029           1947          33350<font></font>
    C++                            121           1977            915          24551<font></font>
    C/C++ Header                     8             86            240            654<font></font>
    make                            17            159             25            294<font></font>
    DOS Batch                       71              3              1            253<font></font>
    -------------------------------------------------------------------------------<font></font>
    SUM:                           316           5254           3128          59102<font></font>
    -------------------------------------------------------------------------------<font></font>
</pre><br>
<ul>
<li>   ¬´¬ª  50% .</li>
<li>      Doom.</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Il a dix-sept makefiles. </font><font style="vertical-align: inherit;">Pourquoi pas un seul?</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lancer la d√©mo</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C'est difficile √† comprendre, mais la d√©mo publi√©e peut √™tre lanc√©e dans DosBox: vous devez la renommer </font></font><code>U2.EXE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et l'ex√©cuter au bon endroit. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quand j'ai appris le fonctionnement interne du code, il a commenc√© √† sembler tr√®s logique:</font></font><br>
<br>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">        CD MAIN</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        D√âPLACER LES DONN√âES U2.EXE / SECOND.EXE</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        DONN√âES CD</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        SECOND.EXE</font></font></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et le tour est jou√©!</font></font><br>
<br>
<div style="text-align:center;"><img src="http://fabiensanglard.net/second_reality/demo.png"></div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Architecture</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans les ann√©es 90, les d√©mos √©taient principalement distribu√©es sur disquettes. </font><font style="vertical-align: inherit;">Apr√®s le d√©ballage, il a fallu installer deux gros fichiers: </font></font><code>SECOND.EXE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et </font></font><code>REALITY.FC</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">    . </font><font style="vertical-align: inherit;">&lt;DIR&gt; 08/08/2013 16:40</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    .. &lt;DIR&gt; 08/01/2013 16:40</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    FCINFO10 TXT 48462 10/04/1993 11:48</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    FILE_ID DIZ 378 04-10-1993 11:30</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    README 1ST 4.222 04-10-1993 12:59</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    REALITY FC 992.188 07-10-1993 12:59 </font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    SECOND EXE 1,451,093 07-10-1993 13:35</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        5 fichier (s) 2,496,343 octets.</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        2 Dir (s) 262.111.744 octets libres.</font></font></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sur la base de mon exp√©rience dans le d√©veloppement de jeux, je m'attends toujours √† ce que l'image enti√®re ressemble √† ceci:</font></font><br>
<br>
<ul>
<li><code>SECOND.EXE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: moteur avec tous les effets dans un fichier ex√©cutable.</font></font></li>
<li><code>REALITY.FC</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: Actifs (musique, effets sonores, images) dans un format propri√©taire / crypt√© √† la </font></font><code>WAD</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Doom.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais apr√®s l'avoir lu, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><code>MAIN/PACK.C</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">j'ai trouv√© que je me trompais: le moteur Second Reality n'est qu'un chargeur et un serveur d'interruption (appel√© DIS). </font><font style="vertical-align: inherit;">Chaque d√©mo de sc√®ne (√©galement appel√©e ¬´PART¬ª) est un ex√©cutable DOS enti√®rement fonctionnel. </font><font style="vertical-align: inherit;">Chaque pi√®ce est charg√©e par le chargeur Loader et lanc√©e l'une apr√®s l'autre. </font><font style="vertical-align: inherit;">Les pi√®ces sont stock√©es sous forme crypt√©e √† la fin </font></font><code>SECOND.EXE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<div style="text-align:center;"><img src="http://fabiensanglard.net/second_reality/architecture.png"></div><br>
<ul>
<li><code>REALITY.FC</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> contient deux compositions musicales jou√©es pendant la d√©mo (pour le remplissage d'obfuscation ajout√© remplissage et marqueur au d√©but).</font></font></li>
<li><code>SECOND.EXE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> contient le chargeur de d√©marrage et le serveur d'interruption de d√©monstration (DIS).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apr√®s la fin </font></font><code>SECOND.EXE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, 32 parties (PART) de la d√©mo sont ajout√©es en tant que fichiers DOS ex√©cutables (crypt√©s).</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une telle architecture pr√©sente de nombreux avantages:</font></font><br>
<br>
<ul>
<li>     :         PART  ,       <code>_start</code>       (450 ).</li>
<li>  EXE   <code>SECOND.EXE</code>        -.</li>
<li> : Loader  DIS    20 . DOS    .</li>
<li>  :   PART     PART     . </li>
<li>   / :    ,  PART      (  ),   :   EXE     ,    .</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tout langage peut √™tre utilis√© pour la programmation PART: dans le code on trouve C, Assembly ... et Pascal.</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lecture recommand√©e</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les trois piliers pour comprendre le code source de Second Reality sont VGA, l'assembleur et l'architecture PC (programmation PIC et PIT). </font><font style="vertical-align: inherit;">Voici quelques liens incroyablement utiles:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Architecture VGA: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">projet FreeVGA</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'art de l'assemblage</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (en particulier le </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chapitre 17</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sur les interruptions et les ISR).</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Programmation PIT 8254</font></font></a></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comme le code source est plein de pointeurs ¬´FAR¬ª et ¬´NEAR¬ª, il sera utile de lire </font><font style="vertical-align: inherit;">la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">documentation d'architecture de base</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> d'Intel, et en particulier le chapitre 4.3 sur les types de donn√©es de pointeurs.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Articles complets par Michael Abrash du </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Graphic Programming Black Book</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chapitre 3</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : (Minuterie Zen et PIT), </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chapitre 24</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : Visite VGA, Chapitres </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">47</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">48</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">49</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : (Mode X).</font></font></li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Partie 2: Deuxi√®me moteur de r√©alit√©</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme discut√© dans la partie 1, le fondement de Second Reality consiste en:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le chargeur de d√©marrage en tant qu'ex√©cutable DOS.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gestionnaire de m√©moire (pool de pile simple)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Serveur d'interruption de d√©monstration (DIS).</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans cette partie, je donnerai des recommandations aux programmeurs qui souhaitent lire le moteur et le chargeur de d√©marrage (DIS sera discut√© dans la partie suivante).</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Code moteur</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le code moteur est 100% ASM, mais il est tr√®s bien √©crit et assez bien document√©:</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><code>MAIN/U2.ASM</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (coeur).</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><code>MAIN/U2A.ASM</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (utilitaires).</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><code>MAIN/VMODE.ASM</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (Proc√©dures VGA).</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En pseudo-code, il peut √™tre √©crit comme ceci:</font></font><br>
<br>
<pre><code class="cpp hljs">    exemus  db <span class="hljs-string">'STARTMUS.EXE'</span>,<span class="hljs-number">0</span>
    exe0    db <span class="hljs-string">'START.EXE'</span>,<span class="hljs-number">0</span><font></font>
    ...<font></font>
    exe23   db <span class="hljs-string">'ENDSCRL.EXE'</span>,<span class="hljs-number">0</span><font></font>
<font></font>
    start:<font></font>
       cli                         ; Disable all interrupts<font></font>
       mov     ah,<span class="hljs-number">4</span>ah              ; Deallocate all memory<font></font>
       call checkall               ; Check <span class="hljs-keyword">for</span> <span class="hljs-number">570</span>,<span class="hljs-number">000</span> bytes of mem, <span class="hljs-number">386</span> CPU <span class="hljs-keyword">and</span> VGA<font></font>
       call file_getexepath        <font></font>
       call dis_setint             ; Install Demo Interrupt Server on Interrupt <span class="hljs-number">0f</span>ch<font></font>
       call file_initpacking       ; <span class="hljs-function">Check exe <span class="hljs-title">signature</span> <span class="hljs-params">(no tempering)</span> !
       call file_setint            </span>; <span class="hljs-function">Replace DOS <span class="hljs-title">routines</span> <span class="hljs-params">(only OPENFILE, SEEK <span class="hljs-keyword">and</span> READ)</span> on Interrupt 021h
       call flushkbd               </span>; Flush the keyboard buffer<font></font>
       <font></font>
       call  checkcmdline          ; check/process commandline<font></font>
<font></font>
       ;======== Here we go! ========<font></font>
       call vmode_init             ; <span class="hljs-function">Init <span class="hljs-title">VGA</span> <span class="hljs-params">(<span class="hljs-keyword">not</span> necessarly Mode13h <span class="hljs-keyword">or</span> ModeX)</span>, each PARTs had its own resolution

       mov si,OFFSET exe0
       call executehigh            </span>; loaded to high in memory. Used <span class="hljs-keyword">for</span> loading music loaders <span class="hljs-keyword">and</span> stuff.<font></font>
   <font></font>
       call  _zinit ; Start music<font></font>
       call  restartmus<font></font>
<font></font>
       mov   si,OFFSET exe1     ;Parameter <span class="hljs-keyword">for</span> partexecute: Offset to exec name<font></font>
       call  partexecute<font></font>
       ; Execute all parts until exe23<font></font>
<font></font>
       call fademusic<font></font>
       ;======== And Done! (<span class="hljs-keyword">or</span> fatal <span class="hljs-built_in">exit</span>) ========<font></font>
<font></font>
    fatalexit:<font></font>
       mov cs:notextmode,<span class="hljs-number">0</span>
       call vmode_deinit</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Toutes les √©tapes sont assez faciles √† lire:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D√©finissez le serveur d'interruption DIS comme interruption </font></font><code>0fch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Remplacement des appels syst√®me DOS par interruption </font></font><code>021h</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(pour plus de d√©tails, voir la section </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Modes Dev et Prod"</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">T√©l√©chargez de la musique sur une carte son via la m√©moire EMS.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ex√©cution de musique.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ex√©cution de chaque partie de la d√©mo.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Termin√©!</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
D√©tails des proc√©dures </font></font><code>execute</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="cpp hljs"> execute:<font></font>
      cld<font></font>
      call  openfile ; Open the DOS executable <span class="hljs-keyword">for</span> <span class="hljs-keyword">this</span> PART<font></font>
      call  loadexe  ; loads the specified exe file to memory, does relocations <span class="hljs-keyword">and</span> creates psp<font></font>
      call  closefile<font></font>
      call  runexe   ;runs the exe file loaded previously with loadexe.<font></font>
                     ; returns after exe executed, <span class="hljs-keyword">and</span> frees the memory<font></font>
                     ; it uses.</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gestionnaire de m√©moire</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il y avait de nombreuses l√©gendes selon lesquelles Second Reality utilise un gestionnaire de m√©moire complexe via MMU; il n'y avait aucune trace dans le moteur. </font><font style="vertical-align: inherit;">La gestion de la m√©moire est en fait transf√©r√©e vers DOS: le moteur commence par </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lib√©rer toute la RAM</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> puis la distribue </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sur demande</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">La seule astuce d√©licate est la capacit√© d'allouer de la RAM √† partir de la fin du tas: cela se fait en utilisant la valeur de retour malloc DOS </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">quand trop de RAM est demand√©e</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Partie 3: DIS</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Demo Interrupt Server (DIS) fournit une large gamme de services pour chaque PART: de l'√©change de donn√©es entre diff√©rents PART √† la synchronisation avec VGA.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Services DIS</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Au moment de l'ex√©cution, PART, le serveur DIS lui fournit des services. </font><font style="vertical-align: inherit;">Une liste des fonctionnalit√©s peut √™tre consult√©e sur </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><code>DIS/DIS.H</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les services les plus importants:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√âchange entre diff√©rents PART ( </font></font><code>dis_msgarea</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">): DIS fournit trois tampons de 64 octets </font><font style="vertical-align: inherit;">chacun </font><font style="vertical-align: inherit;">afin que PART puisse recevoir les param√®tres du chargeur du PART pr√©c√©dent.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Emulation Copper ( </font></font><code>dis_setcopper</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">): Simulateur Amiga Copper qui vous permet d'effectuer des op√©rations qui sont commut√©es par l'√©tat de VGA.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mode Dev / Prod ( </font></font><code>dis_indemo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">): permet au PART de savoir qu'il s'ex√©cute en mode DEV (ce qui signifie qu'il doit initialiser la vid√©o) ou lanc√© √† partir du chargeur de d√©marrage en mode PROD.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nombre de trames VGA ( </font></font><code>_dis_getmframe</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En attente du backstop VGA ( </font></font><code>dis_waitb</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">).</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Code du serveur d'interruption de d√©monstration</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le code source DIS est √©galement 100% ASM ... et assez bien comment√©:</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><code>DIS/DIS.ASM</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(gestionnaire d'interruption d√©fini sur int </font></font><code>0fch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">).</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><code>DIS/DISINT.ASM</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (Proc√©dures DIS elles-m√™mes).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Puisque Second Reality est √©galement partiellement √©crit en C, le code a une interface pour C: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><code>DIS/DIS.H</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><code>DIS/DISC.ASM</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comment √ßa fonctionne</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DIS est d√©fini comme un gestionnaire d'interruption pour int programmatique </font></font><code>0fch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">La grande chose √† ce sujet est qu'il peut fonctionner en interne </font></font><code>SECOND.EXE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lorsque la d√©mo est en cours d'ex√©cution, ou en tant que programme r√©sident ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TSR</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) en mode Dev. </font><font style="vertical-align: inherit;">Cette flexibilit√© vous permet de tester individuellement diff√©rentes d√©mos de PART pendant le d√©veloppement:</font></font><br>
<br>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">                          // Imaginons que nous sommes un d√©veloppeur FC et que nous voulons d√©marrer directement la partie STAR.</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  C: \&gt; CD DDSTARS            </font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  C: \ DDSTARS&gt; K</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  ERREUR: DIS non charg√©. </font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                          // Oups, le PART n'a pas pu trouver le DIS √† int 0fch.</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  C: \ DDSTARS&gt; CD .. \ DIS</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  C: \ DIS&gt; DIS</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  Demo Int Server (DIS) V1.0 Copyright (C) 1993 The Future Crew</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  VERSION BETA - Compil√©: 26/07/93 03:15:53 </font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  Install√© (int fc).</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  REMARQUE: ce serveur DIS ne prend pas en charge la synchronisation cuivre ou musique!</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
                          // DIS est install√©, r√©essayons.</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  C: \ DIS&gt; CD ../DDSTARS</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  C: \ DDSTARS&gt; K</font></font></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et le tour est jou√©!</font></font><br>
<br>
<div style="text-align:center;"><img src="http://fabiensanglard.net/second_reality/DDSTARTS.EXE.png"></div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cuivre</font></font></h3> <br>
<div style="text-align:center;"><img src="http://fabiensanglard.net/second_reality/copper_emu.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
"Copper" est le coprocesseur que les d√©veloppeurs de la d√©mo pour Amiga ont ador√©. </font><font style="vertical-align: inherit;">Il faisait partie du </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jeu de puces d'origine</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et vous permettait d'ex√©cuter un flux programmable de commandes synchronis√©es avec l'√©quipement vid√©o. </font><font style="vertical-align: inherit;">Il n'y avait pas un tel coprocesseur sur le PC et Future Crew a d√ª √©crire un simulateur de cuivre fonctionnant √† l'int√©rieur de DIS. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'√©quipe FC a utilis√© les chipsets mat√©riels PC 8254-PIT et 8259-PIC pour simuler le cuivre. </font><font style="vertical-align: inherit;">Elle a cr√©√© un syst√®me </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">synchronis√© avec la fr√©quence VGA</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , capable de d√©marrer des proc√©dures √† </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">trois endroits du faisceau vertical arri√®re</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Place 0: apr√®s avoir allum√© l'√©cran (environ sur la ligne de balayage 25)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lieu 1: imm√©diatement apr√®s le balayage du faisceau inverse (IL EST POSSIBLE D'√âVITER CE POSSIBLE)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Place 2: dans le faisceau inverse du faisceau de balayage</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comment cela se fait peut √™tre lu </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><code>MAIN/COPPER.ASM</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(et voir dans le diagramme ci-dessous):</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La minuterie de la puce 8254 est configur√©e pour d√©clencher IRQ0 avec la fr√©quence souhait√©e.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le gestionnaire d'interruption de 8h (qui est appel√© par le PIC 8259 apr√®s avoir re√ßu IRQ0) </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">est</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> remplac√© par une proc√©dure ici </font></font><code>intti8</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Remarque: le service de comptage de trames DIS est en fait fourni par le simulateur de cuivre.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Partie 4: Modes de d√©veloppement et de production</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En lisant le code source de Second Reality, vous √™tes le plus frapp√© par l'attention port√©e par l'√©quipe au passage transparent de DEV √† PROD.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mode de d√©veloppement</font></font></h3><br>
<div style="text-align:center;"><img src="http://fabiensanglard.net/second_reality/sc_dev.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En mode D√©veloppement, chaque composant de la d√©mo √©tait un fichier ex√©cutable distinct.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le DIS a √©t√© charg√© dans le TSR r√©sident et accessible via une interruption </font></font><code>0cfh</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le chargeur de d√©marrage a provoqu√© une interruption DOS </font></font><code>21h</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pour ouvrir, lire, rechercher et fermer des fichiers.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cette configuration DEV pr√©sente les avantages suivants:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chaque codeur et artiste peut travailler sur le fichier ex√©cutable et le tester s√©par√©ment, sans affecter le reste de l'√©quipe.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La d√©mo compl√®te √† tout moment peut √™tre test√©e √† l'aide d'une petite </font></font><code>SECOND.EXE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(sans ajouter tous les EXE √† la fin). </font><font style="vertical-align: inherit;">L'ex√©cutable de chaque PART a √©t√© charg√© √† l'aide d'une interruption DOS √† </font></font><code>021h</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">partir d'un fichier s√©par√©.</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Production (mode d√©mo)</font></font></h3><br>
<div style="text-align:center;"><img src="http://fabiensanglard.net/second_reality/sc_prod.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En mode Production, le petit </font></font><code>SECOND.EXE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(contenant le chargeur de d√©marrage), le DIS et certaines parties de la d√©mo en tant qu'EXE s√©par√©s ont √©t√© combin√©s en un seul √©pais </font></font><code>SECOND.EXE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'acc√®s au DIS se faisait toujours par interruption </font></font><code>0fch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'API d'interruption DOS 21h a √©t√© corrig√©e par ses propres routines Future Crew, qui ouvrent les fichiers √† la fin d'un fichier volumineux </font></font><code>SECOND.EXE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cette configuration PROD pr√©sente un avantage en termes de temps de chargement et de protection contre l'ing√©nierie inverse ... mais surtout, du point de vue de la programmation ou du chargement de PART, RIEN ne change lors du passage de DEV √† PROD.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Partie 5: PARTIE distincte</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Chacun des effets visuels de Second Reality est un ex√©cutable DOS enti√®rement fonctionnel. </font><font style="vertical-align: inherit;">Ils sont appel√©s PART et tous 23. Une telle solution architecturale a permis un prototypage rapide, un d√©veloppement parall√®le (car FC n'avait probablement pas d'outils de contr√¥le de version) et le libre choix des langues (ASM, C et m√™me Pascal se trouvent dans la source).</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PARTIE s√©par√©e</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une liste de tous les PART / EXE se trouve dans le code source du moteur: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">U2.ASM</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Voici une br√®ve description plus pratique des 23 parties (avec l'emplacement du code source, bien que les noms puissent √™tre tr√®s d√©routants):</font></font><br>
<br>
<div class="scrollable-table"><table cellspacing="0" cellpadding="0" border="0">
<tbody><tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Titre</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fichier ex√©cutable</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Codeur</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Capture d'√©cran</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La source</font></font></td>
</tr>
<tr>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">STARTMUS.EXE</font></font></td>
<td></td>
<td></td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MAIN / STARTMUS.C</font></font></a></td>
</tr>
<tr>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">START.EXE</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">INCENDIES</font></font></td>
<td align="center"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><img src="http://fabiensanglard.net/second_reality/parts/02-START_thumb.png"></a></td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">START / MAIN.c</font></font></a></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Partie cach√©e</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DDSTARS.EXE</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">INCENDIES</font></font></td>
<td align="center"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><img src="http://fabiensanglard.net/second_reality/parts/03-DDSTARS_thumb.png"></a></td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DDSTARS / STARS.ASM</font></font></a></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alkutekstit i</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ALKU.EXE</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">INCENDIES</font></font></td>
<td align="center"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><img src="http://fabiensanglard.net/second_reality/parts/04-ALKU_thumb.png"></a></td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ALKU / MAIN.C</font></font></a></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alkutekstit II</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">U2A.EXE</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PSI</font></font></td>
<td align="center"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><img src="http://fabiensanglard.net/second_reality/parts/05-U2A_thumb.png"></a></td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VISU / C / CPLAY.C</font></font></a></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alkutekstit III</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PAM.EXE</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TRUG / WILDFIRE</font></font></td>
<td align="center"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><img src="http://fabiensanglard.net/second_reality/parts/06-PAM_thumb.png"></a></td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PAM /</font></font></a></td>
</tr>
<tr>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BEGLOGO.EXE</font></font></td>
<td></td>
<td align="center"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><img src="http://fabiensanglard.net/second_reality/parts/07-BEGLOGO_thumb.png"></a></td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BEG / BEG.C</font></font></a></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Glenz</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GLENZ.EXE</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PSI</font></font></td>
<td align="center"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><img src="http://fabiensanglard.net/second_reality/parts/08-GLENZ_thumb.png"></a></td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GLENZ /</font></font></a></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dottitunneli</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TUNNELI.EXE</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TRUG</font></font></td>
<td align="center"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><img src="http://fabiensanglard.net/second_reality/parts/09-TUNNELI_thumb.png"></a></td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TUNNELI / TUN10.PAS</font></font></a></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Techno</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TECHNO.EXE</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PSI</font></font></td>
<td align="center"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><img src="http://fabiensanglard.net/second_reality/parts/10-TECHNO_thumb.png"></a></td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TECHNO / KOEA.ASM</font></font></a></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Panicfake</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PANICEND.EXE</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PSI</font></font></td>
<td align="center"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><img src="http://fabiensanglard.net/second_reality/parts/11-PANICEND_thumb.png"></a></td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Panique</font></font></a></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vuori-scroll</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MNTSCRL.EXE</font></font></td>
<td></td>
<td align="center"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><img src="http://fabiensanglard.net/second_reality/parts/12-MNTSCRL_thumb.png"></a></td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FOREST / READ2.PAS</font></font></a></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√âtoiles de r√™ve du d√©sert</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DDSTARS.EXE</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TRUG</font></font></td>
<td align="center"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><img src="http://fabiensanglard.net/second_reality/parts/13-DDSTARS_thumb.png"></a></td>
<td></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lentille</font></font></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PSI</font></font></td>
<td align="center"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><img src="http://fabiensanglard.net/second_reality/parts/14-LNS&amp;ZOOM_thumb.png"></a></td>
<td></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rotazoomer</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LNS &amp; ZOOM.EXE</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PSI</font></font></td>
<td align="center"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><img src="http://fabiensanglard.net/second_reality/parts/14-LNS&amp;ZOOM-2_thumb.png"></a></td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OBJECTIF /</font></font></a></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Plasma</font></font></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">INCENDIES</font></font></td>
<td align="center"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><img src="http://fabiensanglard.net/second_reality/parts/15-PLZPART_thumb.png"></a></td>
<td></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Plasmacube</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PLZPART.EXE</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">INCENDIES</font></font></td>
<td align="center"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><img src="http://fabiensanglard.net/second_reality/parts/15-PLZPART-2_thumb.png"></a></td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PLZPART /</font></font></a></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MiniVectorBalls</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MINVBALL.EXE</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PSI</font></font></td>
<td align="center"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><img src="http://fabiensanglard.net/second_reality/parts/16-MINVBALL_thumb.png"></a></td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DOTS /</font></font></a></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Peilipalloscroll</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RAYSCRL.EXE</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TRUG</font></font></td>
<td align="center"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><img src="http://fabiensanglard.net/second_reality/parts/17-RAYSCRL_thumb.png"></a></td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">EAU / DEMO.PAS</font></font></a></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3D sinusfield</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3DSINFLD.EXE</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PSI</font></font></td>
<td align="center"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><img src="http://fabiensanglard.net/second_reality/parts/18-3DSINFLD_thumb.png"></a></td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">COMAN / DOLOOP.C</font></font></a></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jellypic</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JPLOGO.EXE</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PSI</font></font></td>
<td align="center"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><img src="http://fabiensanglard.net/second_reality/parts/19-JPLOGO_thumb.png"></a></td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JPLOGO / JP.C</font></font></a></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vector partie II '</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">U2E.EXE</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PSI</font></font></td>
<td align="center"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><img src="http://fabiensanglard.net/second_reality/parts/20-U2E_thumb.png"></a></td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VISU / C / CPLAY.C</font></font></a></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L√©gendes / Remerciements</font></font></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ENDLOGO.EXE</font></font></td>
<td></td>
<td align="center"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><img src="http://fabiensanglard.net/second_reality/parts/21-ENDLOGO_thumb.png"></a></td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">END / END.C</font></font></a></td>
</tr>
<tr>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CRED.EXE</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">INCENDIES</font></font></td>
<td align="center"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><img src="http://fabiensanglard.net/second_reality/parts/22-CRED_thumb.png"></a></td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CR√âDITS / MAIN.C</font></font></a></td>
</tr>
<tr>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ENDSCRL.EXE</font></font></td>
<td></td>
<td align="center"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><img src="http://fabiensanglard.net/second_reality/parts/23-ENDSCRL_thumb.png"></a></td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ENDSCRL / MAIN.C</font></font></a></td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il semble que chaque d√©veloppeur ait sa propre sp√©cialisation, qui pourrait √™tre partag√©e en une seule partie. </font><font style="vertical-align: inherit;">Cela est particuli√®rement visible dans la premi√®re sc√®ne avec d√©filement, navires et explosions (Alkutekstit). </font><font style="vertical-align: inherit;">Bien que cela ressemble √† un effet continu, il s'agit en fait de trois fichiers ex√©cutables √©crits par trois personnes diff√©rentes:</font></font><br>
<br>
<div class="scrollable-table"><table>
<tbody><tr>
<td colspan="3"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S√©quence Alkutekstit (Cr√©dits)</font></font></b></td>
</tr>
<tr>
<td><img src="http://fabiensanglard.net/second_reality/parts/04-ALKU_seq.png"></td>
<td><img src="http://fabiensanglard.net/second_reality/parts/05-U2A_seq.png"></td>
<td><img src="http://fabiensanglard.net/second_reality/parts/06-PAM_seq.png"></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ALKU par WILDFIRE</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">U2A par PSI</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PAM par TRUG / WILDFIRE</font></font></td>
</tr>
</tbody></table></div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les atouts</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les ressources d'image ( </font></font><code>.LBM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) sont g√©n√©r√©es √† l'aide de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Deluxe Paint</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , un √©diteur de bitmap extr√™mement populaire dans les ann√©es 90. </font><font style="vertical-align: inherit;">Fait int√©ressant, ils sont convertis en un tableau d'octets et compil√©s dans PART. </font><font style="vertical-align: inherit;">√Ä la suite de cela, le fichier exe t√©l√©charge √©galement tous les actifs. </font><font style="vertical-align: inherit;">De plus, cela complique l'ing√©nierie inverse. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Parmi les ensembles d'actifs sympas figurent les c√©l√®bres </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CITY</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SHIP</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de la derni√®re sc√®ne 3D:</font></font><br>
<br>
<div style="text-align:center;"><img src="http://fabiensanglard.net/second_reality/second%20reality%20city.png"></div><br>
<div style="text-align:center;"><img src="http://fabiensanglard.net/second_reality/second%20reality%20ship.png"></div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unit√© interne PART</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme ils ont tous √©t√© compil√©s en ex√©cutables DOS, dans PART, n'importe quel langage peut √™tre utilis√©:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ASM.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PASCAL: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">monstre en laiton (MNTSCRL.EXE)</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tunnel en pointill√© (TUNNELI.EXE)</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√©p√©e de lancer de rayons (RAYSCRL.EXE)</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Certaines PARTIES sont all√©es encore plus loin et utilisent C pour g√©n√©rer du code ASM: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GLENZ / DOLOOP.C</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (poly√®dre </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">t√©l√©chargeable</font></a><font style="vertical-align: inherit;"> ) et </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">effet Water (3DSINFLD.EXE)</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En ce qui concerne l'utilisation de la m√©moire, j'ai lu beaucoup de choses sur MMU sur Wikipedia et d'autres sites Web ... mais en fait, chaque partie pouvait utiliser n'importe quoi, car apr√®s l'ex√©cution, elle √©tait compl√®tement d√©charg√©e de la m√©moire. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lorsque vous travaillez avec VGA, chaque partie utilise son propre ensemble de trucs et travaille dans sa r√©solution. </font><font style="vertical-align: inherit;">Dans chacun d'eux, ni le Mode 13h ni le ModeX n'ont √©t√© utilis√©s, mais plut√¥t un mode 13h modifi√© avec sa propre r√©solution. </font><font style="vertical-align: inherit;">Le fichier </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SCRIPT</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mentionne souvent 320x200 et 320x400.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Malheureusement, lors de l'analyse de PART, la lecture du code source devient une t√¢che intimidante: la qualit√© du code et des commentaires diminue consid√©rablement. </font><font style="vertical-align: inherit;">Peut-√™tre que cela s'est produit √† cause de la ru√©e ou parce que chaque PARTIE a travaill√© sur son propre d√©veloppeur (c'est-√†-dire qu'il n'y avait pas de "vrai" besoin de commentaires ou de compr√©hensibilit√© du code), mais le r√©sultat √©tait quelque chose de compl√®tement d√©routant:</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Panique</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GLENZ</font></font></a></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Des algorithmes sophistiqu√©s ne sont pas seulement difficiles √† comprendre m√™me les noms des variables ( </font></font><code>a</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>b</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>co[]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">...). </font><font style="vertical-align: inherit;">Le code serait beaucoup plus lisible si les d√©veloppeurs nous laissaient des indices dans les notes de version. </font><font style="vertical-align: inherit;">En cons√©quence, je n'ai pas consacr√© beaucoup de temps √† l'√©tude de chaque partie; </font><font style="vertical-align: inherit;">L'exception √©tait le moteur 3D responsable de U2A.EXE et U2E.EXE.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Moteur 3D Second Reality</font></font></h3><br>
<div style="text-align:center;"><img src="http://fabiensanglard.net/second_reality/3d_end.png"></div><br>
<div style="text-align:center;"><img src="http://fabiensanglard.net/second_reality/3d_end2.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quoi qu'il en soit, j'ai d√©cid√© d'√©tudier en d√©tail le moteur 3D, qui √©tait utilis√© en deux parties: </font></font><code>U2A.EXE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et </font></font><code>U2E.EXE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le code source est C avec des proc√©dures optimis√©es par l'assembleur (en particulier le remplissage et l'ombrage Gouro):</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CITY.C</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (code principal).</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VISU.C</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (biblioth√®que </font></font><code>visu.lib</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">).</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AVID.ASM</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (vid√©o d'assemblage optimis√©e (nettoyage, copie d'√©cran, etc.)).</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ADRAW.ASM</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (dessiner des objets et tronquer).</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ACALC.ASM</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (matrices et calculs rapides sin / cos).</font></font></li>
</ul><br>
<div style="text-align:center;"><img src="http://fabiensanglard.net/second_reality/sr_3d_engine.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'architecture de ces composants est tout √† fait remarquable: la biblioth√®que </font></font><code>VISU</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">effectue toutes les t√¢ches complexes, par exemple le chargement des actifs: objets 3DS, mat√©riaux et flux (mouvements de cam√©ras et de navires). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le moteur trie les objets √† dessiner et les rend √† l'aide de l'algorithme de l'artiste. </font><font style="vertical-align: inherit;">Cela conduit √† une grande quantit√© de redessin, mais comme les verrous VGA vous permettent d'enregistrer 4 pixels en m√™me temps, ce n'est pas si mal. </font></font><br>
<br>
<u><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un fait int√©ressant: le</font></font></b></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> moteur effectue des transformations √† l'ancienne: au lieu d'utiliser des matrices 4x4 homog√®nes communes, il utilise des matrices de rotation 3 * 3 et un vecteur de d√©placement. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voici un r√©sum√© en pseudo code:</font></font><br>
<br>
<pre><code class="cpp hljs">      main(){<font></font>
<font></font>
            scenem=readfile(tmpname);  <span class="hljs-comment">// Load materials</span>
            scene0=readfile(tmpname);  <span class="hljs-comment">// Load animation</span><font></font>
<font></font>
            <span class="hljs-keyword">for</span>(f=<span class="hljs-number">-1</span>,c=<span class="hljs-number">1</span>;c&lt;d;c++){  <span class="hljs-comment">//Load objects</span>
              <span class="hljs-built_in">sprintf</span>(tmpname,<span class="hljs-string">"%s.%03i"</span>,scene,e);<font></font>
              co[c].o=vis_loadobject(tmpname);<font></font>
            }<font></font>
<font></font>
            vid_init(<span class="hljs-number">1</span>);<font></font>
            vid_setpal(cp);<font></font>
<font></font>
            <span class="hljs-keyword">for</span>(;;){<font></font>
<font></font>
                vid_switch();<font></font>
                _asm mov bx,<span class="hljs-number">1</span>   _asm <span class="hljs-keyword">int</span> <span class="hljs-number">0f</span>ch <span class="hljs-comment">// waitb for retrace via copper simulator interrupt call </span><font></font>
                vid_clear();<font></font>
                <font></font>
                <span class="hljs-comment">// parse animation stream, update objects</span>
                <span class="hljs-keyword">for</span>(;;){}<font></font>
<font></font>
                vid_cameraangle(fov); <span class="hljs-comment">// Field of vision</span><font></font>
<font></font>
                <span class="hljs-comment">// Calc matrices and add to order list (only enabled objects)</span>
                <span class="hljs-keyword">for</span>(a=<span class="hljs-number">1</span>;ac&lt;conum;a++) <span class="hljs-keyword">if</span>(co[a].on) <span class="hljs-comment">/* start at 1 to skip camera */</span><font></font>
                    calc_applyrmatrix(o-&gt;r,&amp;cam);<font></font>
<font></font>
                <span class="hljs-comment">// Zsort via Bubble Sort</span>
                <span class="hljs-keyword">for</span>(a=<span class="hljs-number">0</span>;ac&lt;ordernum;a++)
                    <span class="hljs-keyword">for</span>(b=a<span class="hljs-number">-1</span>;b&gt;=<span class="hljs-number">0</span> &amp;&amp; dis&gt;co[order[b]].dist;b--)<font></font>
<font></font>
                <span class="hljs-comment">// Draw</span>
                <span class="hljs-keyword">for</span>(a=<span class="hljs-number">0</span>;ac&lt;ordernum;a++)<font></font>
                    vis_drawobject(o);<font></font>
              }<font></font>
            }<font></font>
            <span class="hljs-keyword">return</span>(<span class="hljs-number">0</span>);<font></font>
     }</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ports pour syst√®mes modernes</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apr√®s la publication de cet article, de nombreux d√©veloppeurs ont commenc√© √† porter Second Reality sur des syst√®mes modernes. </font><font style="vertical-align: inherit;">Claudio Matsuoka a d√©cid√© de cr√©er </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sr-port</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , un port C pour Linux et OpenGL ES 2.0, qui jusqu'√† pr√©sent semble assez impressionnant. </font><font style="vertical-align: inherit;">Nick Kovacs a fait un excellent travail sur PART PLZ, le portant sur C (maintenant il fait partie du code source sr-port), ainsi que </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sur javascript</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/iw/l9/jm/iwl9jmypg-njcygljgtgi3zaxdg.png"></div></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr501016/index.html">Sur les tendances de d√©veloppement de l'architecture de processeur, ou pourquoi je crois au succ√®s de Huawei sur le march√© des serveurs</a></li>
<li><a href="../fr501018/index.html">Comment contourner certaines restrictions de Google Translate</a></li>
<li><a href="../fr501020/index.html">Comment tester le code contenant setTimeout / setInterval sous le capot</a></li>
<li><a href="../fr501022/index.html">¬´Je suis dans le d√©sert¬ª: pourquoi l'auto-isolement s'est av√©r√© √™tre un s√©rieux stress pour nous et ce que tout cela a entra√Æn√©</a></li>
<li><a href="../fr501026/index.html">Identification bancaire √† distance: du complexe au simple, ou aux banques, pourquoi avez-vous besoin de la biom√©trie?</a></li>
<li><a href="../fr501032/index.html">Serveur bon march√© des pi√®ces chinoises. Partie 1, fer</a></li>
<li><a href="../fr501034/index.html">S√©minaires hebdomadaires IBM - mai 2020</a></li>
<li><a href="../fr501040/index.html">Erreurs typiques dans les applications qui conduisent √† des ballonnements dans postgresql. Andrey Salnikov</a></li>
<li><a href="../fr501042/index.html">Likbez on Compliance: nous comprenons les exigences des r√©gulateurs dans le domaine de la s√©curit√© de l'information</a></li>
<li><a href="../fr501046/index.html">Autour de solides avantages: Top 10 des rapports de la conf√©rence C ++ Russia 2019 Piter</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>