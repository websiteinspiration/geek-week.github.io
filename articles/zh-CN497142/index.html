<!doctype html>
<html class="no-js" lang="zh-CN">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘³ ğŸš“ ğŸ¤¸ğŸ» æˆ‘ä»¬å¦‚ä½•å°†Harmony OSæ”¯æŒæ·»åŠ åˆ°inDriver Androidåº”ç”¨ç¨‹åº ğŸ• ğŸ•’ ğŸ‘²</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ä¸€åˆ‡å§‹äºç¾å›½å•†åŠ¡éƒ¨å°†åä¸ºåˆ—å…¥ç¦æ­¢ä¸ç¾å›½å…¬å¸å¼€å±•ä¸šåŠ¡çš„å…¬å¸åå•çš„äº‹å®ã€‚åä¸ºçš„å›åº”æ˜¯å…¶æ™ºèƒ½æ‰‹æœºé‡‡ç”¨äº†Harmony OSæ“ä½œç³»ç»Ÿï¼Œå¹¶ä¸”æ‹’ç»åœ¨å…¶ä¸­ä½¿ç”¨GoogleæœåŠ¡ã€‚ä¸ºäº†ä¸å¤±å»éƒ¨åˆ†å¸‚åœºï¼Œæˆ‘ä»¬åœ¨inDriverä¸­é›†æˆäº†å…¶æ”¯æŒã€‚å°½ç®¡â€œ OSé›†æˆâ€å¬èµ·æ¥å¾ˆå“äº®-æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºï¼Œå°±åƒå…¶ä»–ä»»ä½•ä¸ºAndroidç¼–å†™...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>æˆ‘ä»¬å¦‚ä½•å°†Harmony OSæ”¯æŒæ·»åŠ åˆ°inDriver Androidåº”ç”¨ç¨‹åº</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/indriver/blog/497142/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸€åˆ‡å§‹äº</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç¾å›½å•†åŠ¡éƒ¨å°†åä¸ºåˆ—å…¥ç¦æ­¢ä¸ç¾å›½å…¬å¸å¼€å±•ä¸šåŠ¡çš„å…¬å¸åå•çš„äº‹å®</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">åä¸ºçš„å›åº”æ˜¯å…¶æ™ºèƒ½æ‰‹æœºé‡‡ç”¨äº†Harmony OSæ“ä½œç³»ç»Ÿï¼Œå¹¶ä¸”æ‹’ç»åœ¨å…¶ä¸­ä½¿ç”¨GoogleæœåŠ¡ã€‚</font><font style="vertical-align: inherit;">ä¸ºäº†ä¸å¤±å»éƒ¨åˆ†å¸‚åœºï¼Œæˆ‘ä»¬åœ¨inDriverä¸­é›†æˆäº†å…¶æ”¯æŒã€‚</font><font style="vertical-align: inherit;">å°½ç®¡â€œ OSé›†æˆâ€å¬èµ·æ¥å¾ˆå“äº®-æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºï¼Œå°±åƒå…¶ä»–ä»»ä½•ä¸ºAndroidç¼–å†™çš„åº”ç”¨ç¨‹åºä¸€æ ·ï¼Œéƒ½å°†åœ¨Harmonyä¸Šè¿è¡Œï¼Œä½†æ˜¯ä¸ºäº†å®Œæˆå…¨éƒ¨å·¥ä½œï¼Œæœ‰å¿…è¦ç”¨ç±»ä¼¼çš„åä¸ºæœåŠ¡æ›¿æ¢GoogleæœåŠ¡ã€‚</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><img src="https://habrastorage.org/webt/fh/pk/zm/fhpkzmbmmqxja-nsck3uaj4giak.png"></a><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨inDriverä¸­ï¼Œæˆ‘ä»¬å°†GoogleæœåŠ¡ç”¨äºä»¥ä¸‹ä¸‰ä¸ªç›®çš„ï¼š</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å‘é€æ¨é€é€šçŸ¥ï¼›</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä½ç½®çš„å®šä¹‰ï¼›</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è°·æ­Œåœ°å›¾ã€‚</font></font></li>
</ul><br>
<h2><font color="#24af34"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ¨é€å·¥å…·åŒ…-å‘é€æ¨é€é€šçŸ¥</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é¦–å…ˆï¼Œåä¸ºæœ‰ä¸€äº›ä¸é”™çš„</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ–‡æ¡£</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚ä½†æ˜¯ï¼Œä¸ºäº†å¿«é€Ÿå…¥é—¨ï¼Œè¯·ä½¿ç”¨</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åˆ†æ­¥æ•™ç¨‹</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘å°†ä¸å¤è¿°é‚£é‡Œå†™çš„å†…å®¹ï¼Œå› ä¸ºåœ¨è¿™é‡Œéœ€è¦å‘è¡¨è¯„è®ºï¼Œæ‰€ä»¥æˆ‘åªä¼šè®²å‡ ç‚¹ã€‚</font></font><br>
<br>
<b><font color="#24af34"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¯ç”¨æœåŠ¡</font></font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
å°†è¦æ±‚æ‚¨è®¾ç½®æ•°æ®å­˜å‚¨ä½ç½®ã€‚è¯·æ³¨æ„ï¼Œ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ‚¨ä»¥åä¸èƒ½æ›´æ”¹</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å®ƒ</font><font style="vertical-align: inherit;">ã€‚è¯¥ä½ç½®ä¸å½±å“æ¨é€çš„ç›´æ¥æ“ä½œï¼Œè€Œä»…æ˜¯ç”¨äºå­˜å‚¨å’Œå¤„ç†æœ‰å…³å®ƒä»¬çš„æ•°æ®çš„ä½ç½®ã€‚</font></font><br>
<br>
<b><font color="#24af34"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é›†æˆHMS SDK</font></font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å®Œæˆé›†æˆåï¼Œæ‚¨å¯èƒ½ä¼šåœ¨æ„å»ºé¡¹ç›®æ—¶é‡åˆ°é—®é¢˜ã€‚æ— è®ºå¦‚ä½•ï¼Œåœ¨æˆ‘ä»¬çš„Ubuntu 16.04.5 LTSæ„å»ºæœåŠ¡å™¨ï¼ˆGNU / Linux 4.4.0-174é€šç”¨x86_64ï¼‰ä¸Šå°±æ˜¯è¿™ç§æƒ…å†µï¼Œè€Œåœ¨æœ¬åœ°è¿è¡Œçš„Mac miniï¼ˆ2018å¹´æœ«ï¼ŒMojaveï¼‰ä¸Šä¸€åˆ‡æ­£å¸¸ã€‚</font><font style="vertical-align: inherit;">
å¦‚æœæ·»åŠ ï¼Œåˆ™å¯ä»¥è§£å†³æ­¤é—®é¢˜</font></font><br>
<br>
<font color="#aa0000"><code>Execution failed for task ':app:processIndriverReleaseManifest'. org.gradle.api.GradleException: ERROR: no manifest file found</code><br>
</font><br><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="java hljs">agcp {<font></font>
   manifest <span class="hljs-keyword">false</span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨</font></font><code>build.gradle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åº”ç”¨ç¨‹åºçº§åˆ«</font><font style="vertical-align: inherit;">çš„æ–‡ä»¶æœ«å°¾</font><font style="vertical-align: inherit;">ç¦ç”¨çš„æ¸…å•</font></font><code>agcp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚è¿™é‡Œçš„é—®é¢˜æ˜¯ï¼Œå®ƒæ­£åœ¨</font></font><code>agcp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¯»æ‰¾æ¸…å•æ–‡ä»¶ï¼Œä½†æ‰¾ä¸åˆ°å¹¶åŠ è½½å®ƒï¼Œè¿™å¾ˆå¯èƒ½æ˜¯ä¸€ä¸ªé—®é¢˜</font></font><code>agconnect</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚è‡³å°‘è¿™æ˜¯åä¸ºå®˜æ–¹æŠ€æœ¯æ”¯æŒç­”å¤æˆ‘ä»¬çš„æ–¹å¼ã€‚</font></font><br>
<br>
<b><font color="#24af34"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é…ç½®AndroidManifest.xml</font></font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
æˆ‘ä¸çŸ¥é“ä¸ºä»€ä¹ˆï¼Œä½†æ˜¯å®ƒæ²¡æœ‰è¯´æ˜è‡ªåŠ¨åˆå§‹åŒ–ï¼Œ</font><font style="vertical-align: inherit;">å®Œæ•´æ–‡æ¡£çš„</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.6è‡ªåŠ¨åˆå§‹åŒ–ä¸­</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¯¹æ­¤è¿›è¡Œäº†æè¿°</font><font style="vertical-align: inherit;">ã€‚å¦‚æœæ‚¨åœ¨æ–¹æ³•ä¸­å°†ä»¤ç‰Œå‘é€åˆ°æœåŠ¡å™¨ï¼Œåˆ™è¿™æ˜¯å¿…éœ€çš„</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onNewToken</span><span class="hljs-params">(String token)</span> </span>{}</code></pre><br>
<b><font color="#24af34"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å‘é€æ¶ˆæ¯ï¼šåä¸ºæ¨é€å·¥å…·æ§åˆ¶å°ã€‚</font></font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ä½¿ç”¨å®ƒï¼Œæ‚¨å¯ä»¥æ£€æŸ¥æ¨é€çš„æ“ä½œã€‚ä¸€ä¸ªæœ‰è¶£çš„äº‹å®ï¼šå¦‚æœæ‚¨åœ¨æ§åˆ¶å°ä¸­é€‰æ‹©</font></font><code>Type: Notification Message</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œå®ƒä»¬</font></font><code>onMessageReceived(RemoteMessage message)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å°†</font><font style="vertical-align: inherit;">ç»•è¿‡å¤„ç†ç¨‹åº</font><font style="vertical-align: inherit;">ç«‹å³æ˜¾ç¤ºåœ¨ç”µè¯ä¸Šã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è®¾ç½®æ¨é€æ—¶ï¼Œæˆ‘ç»å¸¸ä¸å¾—ä¸ä½¿ç”¨æ§åˆ¶å°ã€‚å¥¹å’ŒæœåŠ¡å™¨å‘é€çš„æ¨é€éƒ½å»¶è¿Ÿäº†30åˆ†é’Ÿã€‚æˆ‘å¸Œæœ›è¿™äº›æ˜¯å¼€å‘äººå‘˜å·²ç»è§£å†³çš„æš‚æ—¶æ€§å›°éš¾ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç°åœ¨æˆ‘ä»¬çš„æ‰‹æœºä¸Šæœ‰ä¸¤ä¸ªæ¨é€æœåŠ¡ï¼Œä½†æ˜¯æˆ‘ä»¬å¦‚ä½•ç»„ç»‡ä»–ä»¬çš„è”åˆå·¥ä½œå‘¢ï¼Ÿé¦–å…ˆï¼Œæ‚¨éœ€è¦ç¡®å®šç”µè¯ä¸Šæä¾›äº†å“ªäº›æœåŠ¡ã€‚åœ¨æˆ‘ä»¬è¿™é‡Œï¼Œæˆ‘ä»¬å†³å®šå°†GoogleæœåŠ¡ä½œä¸ºæˆ‘ä»¬çš„ä¼˜å…ˆäº‹é¡¹ã€‚å‡è®¾æ‰‹æœºä¸ŠåŒæ—¶æä¾›Googleå’Œåä¸ºæœåŠ¡ï¼Œæˆ‘ä»¬å°†ä¸Googleåˆä½œã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘ä»¬ä½¿ç”¨å¯èƒ½çš„å€¼å°†æœåŠ¡çš„çŠ¶æ€æ ‡å¿—å‘é€åˆ°æœåŠ¡å™¨ï¼š</font></font><br>
<br>
<code>- UNKNOWN</code><br>
<code>- GOOGLE</code><br>
<code>- HUAWEI</code><br>
<br>
<pre><code class="kotlin hljs"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">checkServices</span><span class="hljs-params">(context: <span class="hljs-type">Context</span>)</span></span>: PlayServicesState {
   <span class="hljs-keyword">val</span> googleAPI = GoogleApiAvailability.getInstance()
   <span class="hljs-keyword">when</span> (googleAPI.isGooglePlayServicesAvailable(context)) {<font></font>
       ConnectionResult.SUCCESS,<font></font>
       ConnectionResult.SERVICE_MISSING,<font></font>
       ConnectionResult.SERVICE_VERSION_UPDATE_REQUIRED,<font></font>
       ConnectionResult.SERVICE_DISABLED -&gt; <span class="hljs-keyword">return</span> PlayServicesState.GOOGLE<font></font>
   }<font></font>
   <span class="hljs-keyword">val</span> huaweiAPI = HuaweiApiAvailability.getInstance()
   <span class="hljs-keyword">when</span> (huaweiAPI.isHuaweiMobileNoticeAvailable(context)) {<font></font>
       com.huawei.hms.api.ConnectionResult.SUCCESS,<font></font>
       com.huawei.hms.api.ConnectionResult.SERVICE_MISSING,<font></font>
       com.huawei.hms.api.ConnectionResult.SERVICE_VERSION_UPDATE_REQUIRED,<font></font>
       com.huawei.hms.api.ConnectionResult.SERVICE_DISABLED -&gt; <span class="hljs-keyword">return</span> PlayServicesState.HUAWEI<font></font>
   }<font></font>
   <span class="hljs-keyword">return</span> PlayServicesState.UNKNOWN<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æœåŠ¡å™¨å°†æ ¹æ®æ¥æ”¶åˆ°çš„å€¼å°†æ¨é€é€šçŸ¥å‘é€åˆ°ç›¸åº”çš„æœåŠ¡ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç»„ç»‡ä»–ä»¬çš„å·¥ä½œæ˜¯æŠ€æœ¯é—®é¢˜ã€‚</font><font style="vertical-align: inherit;">æˆ‘å°±æ˜¯è¿™æ ·åšçš„ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
FCMçš„äº‹ä»¶å¤„ç†ï¼š</font></font><br>
<br>
<pre><code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AppFcmListenerService</span> : <span class="hljs-type">FirebaseMessagingService</span></span>() {
   <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> cloudMessageHandler: CloudMessageHandler = GoogleMessageHandler(<span class="hljs-keyword">this</span>)
   <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onMessageReceived</span><span class="hljs-params">(message: <span class="hljs-type">RemoteMessage</span>)</span></span> {<font></font>
       cloudMessageHandler.onMessageReceived(message)<font></font>
   }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å’ŒHCMï¼š</font></font><br>
<br>
<pre><code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AppHmsListenerService</span> : <span class="hljs-type">HmsMessageService</span></span>() {
   <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> cloudMessageHandler: CloudMessageHandler = HuaweiMessageHandler(<span class="hljs-keyword">this</span>)
   <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onMessageReceived</span><span class="hljs-params">(message: <span class="hljs-type">RemoteMessage</span>)</span></span> {<font></font>
       cloudMessageHandler.onMessageReceived(message)<font></font>
   }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å§”æ‰˜ç»™æŠ½è±¡ç±»ï¼š</font></font><br>
<br>
<pre><code class="kotlin hljs"><span class="hljs-keyword">abstract</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CloudMessageHandler</span> </span>{ 
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onMessageReceived</span><span class="hljs-params">(message: <span class="hljs-type">Any</span>)</span></span> {
   <span class="hljs-keyword">val</span> <span class="hljs-keyword">data</span> = getData(message)<font></font>
   onMessageReceived(<span class="hljs-keyword">data</span>)<font></font>
}<font></font>
<span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onMessageReceived</span><span class="hljs-params">(<span class="hljs-keyword">data</span>: <span class="hljs-type">Map</span>&lt;<span class="hljs-type">String</span>, String&gt;)</span></span> {
   <span class="hljs-comment">//   </span><font></font>
}<font></font>
<span class="hljs-keyword">abstract</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getData</span><span class="hljs-params">(message: <span class="hljs-type">Any</span>)</span></span> :  Map&lt;String, String&gt; {<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å®ƒå…·æœ‰ä¸¤ä¸ªå®ç°ï¼š</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¯¹äºFCMï¼š</font></font><br>
<br>
<pre><code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FirebaseMessageHandler</span></span>(<span class="hljs-keyword">override</span> <span class="hljs-keyword">val</span> context: Context) : CloudMessageHandler(context) {
   <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getData</span><span class="hljs-params">(message: <span class="hljs-type">Any</span>)</span></span>: Map&lt;String, String&gt; {
       <span class="hljs-keyword">return</span> (message <span class="hljs-keyword">as</span> RemoteMessage).<span class="hljs-keyword">data</span><font></font>
   }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¯¹äºHCMï¼š</font></font><br>
<br>
<pre><code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HuaweiMessageHandler</span></span>(<span class="hljs-keyword">override</span> <span class="hljs-keyword">val</span> context: Context) : CloudMessageHandler(context) {
   <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getData</span><span class="hljs-params">(message: <span class="hljs-type">Any</span>)</span></span>: Map&lt;String, String&gt; {
       <span class="hljs-keyword">return</span> (message <span class="hljs-keyword">as</span> RemoteMessage).dataOfMap<font></font>
   }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åä¸ºè¯¾ç¨‹ä¸GoogleæœåŠ¡çš„ç•Œé¢å‡ ä¹ç›¸ä¼¼ã€‚</font><font style="vertical-align: inherit;">è¿™ä¸ªâ€œå‡ ä¹â€æˆ‘æ›¾äº²è‡ªä½“ç°åœ¨è¿™æ ·ä¸€ä¸ªäº‹å®</font></font><code>RemoteMessage</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å‡ºæ¥</font></font><code>com.google.firebase.messaging</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">äº†</font></font><code>Map&lt;String, String&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œä½ æƒ³æ‰“ç”µè¯</font></font><code>RemoteMessage.getData()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œå¹¶ä¸º</font></font><code>RemoteMessage</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å‡º</font></font><code>com.huawei.hms.push</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font></font><code>getDataOfMap()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<h2><font color="#24af34"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å®šä½å¥—ä»¶-ä½ç½®ç¡®å®š</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¯ä»¥å¤„ç†ä½ç½®</font></font><code>LOCATION_SERVICE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œè€Œæ— éœ€Googleå’Œåä¸ºæœåŠ¡å³å¯ä½¿ç”¨ã€‚</font><font style="vertical-align: inherit;">ä½†æ˜¯å¯¹äºå®¢è¿æœåŠ¡è€Œè¨€ï¼Œå‡†ç¡®çš„ä½ç½®ç¡®å®šæ˜¯é‡è¦çš„å‚æ•°ã€‚</font><font style="vertical-align: inherit;">å¹¸è¿çš„æ˜¯ï¼ŒLocation Kitç±»çš„æ¥å£ä¸GoogleæœåŠ¡çš„åŒåæ¥å£æ²¡æœ‰ä»€ä¹ˆä¸åŒï¼Œå› æ­¤å®ƒä»¬åœ¨ä»£ç ä¸­çš„åº”ç”¨ä¹Ÿæ²¡æœ‰ä¸åŒã€‚</font><font style="vertical-align: inherit;">ä½†æ˜¯ï¼Œåä¸ºæœåŠ¡çš„æ“ä½œå‡†ç¡®æ€§è¾ƒå·®ã€‚</font><font style="vertical-align: inherit;">å¸Œæœ›è¿™æ˜¯ä¸€ä¸ªæš‚æ—¶çš„é—®é¢˜ã€‚</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘ä»¬è¿˜é‡åˆ°äº†é€šè¿‡HMS Coreå‘é€åœ°ç†ä½ç½®è¯·æ±‚çš„äº‹å®ï¼Œè¿™æ„å‘³ç€ä¸ºäº†æ­£ç¡®æ“ä½œï¼Œæœ‰å¿…è¦å°†åœ°ç†ä½ç½®çš„æƒé™è®¾ç½®ä¸ºâ€œå§‹ç»ˆå…è®¸â€ã€‚</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/c8/ia/yv/c8iayvndnzt_nx1xlouausbdhge.jpeg" alt="ä½ç½®" width="300"></div><br>
<h2><font color="#24af34"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ›´æ¢è°·æ­Œåœ°å›¾</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨CISä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†å¸¦æœ‰2GISç£è´´çš„OSMå¼•æ“ã€‚</font><font style="vertical-align: inherit;">åœ¨é›†æˆçš„ç¬¬ä¸€é˜¶æ®µï¼Œæˆ‘ä»¬å†³å®šä¸ä½¿ç”¨HUAWEIçš„Map Kitï¼Œè€Œä»…å°†OSMå¼•æ“ä¸OSMåˆ‡ç‰‡ä¸€èµ·ä½¿ç”¨ã€‚</font><font style="vertical-align: inherit;">ä¸€åˆ‡éƒ½å¾ˆç®€å•ã€‚</font></font><br>
<br>
<h2><font color="#24af34"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å‘è¡Œå‰</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘å»ºè®®å¤§å®¶</font><font style="vertical-align: inherit;">åœ¨AppGalleryä¸­å¯åŠ¨åº”ç”¨ç¨‹åºä¹‹å‰ï¼Œè¯·</font><font style="vertical-align: inherit;">æ³¨æ„</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¤±è´¥</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">çš„</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">å¸¸è§åŸå› </font></a><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¾‹å¦‚ï¼Œåä¸ºå‘å¸ƒå›¢é˜Ÿå°†ä»¥ä¸‹è¿è§„è¡Œä¸ºå‘ŠçŸ¥æˆ‘ä»¬ã€‚</font></font><br>
<br>
<b><font color="#24af34"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸­å›½é¦™æ¸¯å’Œæ¾³é—¨çš„éæ ‡å‡†ä»‹ç»</font></font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ä¸­å›½å¯¹å…¶è‡ªæ²»è¡Œæ”¿åŒºçš„ä¸»æƒæŒè°¨æ…æ€åº¦ï¼Œå¹¶è¦æ±‚å°†å…¶ç§°ä¸ºâ€œåœ°åŒºâ€ã€‚è¿™è¿«ä½¿æˆ‘ä»¬å°†æåŠè¯¥å›½å®¶çš„æ‰€æœ‰æ ‡é¢˜æ›´æ”¹ä¸ºæåŠè¯¥å›½å®¶æˆ–åœ°åŒºã€‚</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/w-/ei/q3/w-eiq3tg2iaewq9dyf2-plqpftg.png" width="300"></div><br>
<br>
<b><font color="#24af34"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åº”ç”¨ç¨‹åºè¯¦ç»†ä¿¡æ¯ä¸­æœ‰å…³ç¬¬ä¸‰æ–¹ç«äº‰äº§å“çš„ä¿¡æ¯</font></font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ä¸è¦å¿˜äº†é€šè¿‡å°†ç”¨æˆ·å‘é€åˆ°App Galleryä¸­çš„é¡µé¢ï¼Œè€Œä¸æ˜¯Google Playå•†åº—ä¸­çš„é¡µé¢æ¥å¯¹åº”ç”¨ç¨‹åºè¿›è¡Œè¯„åˆ†ï¼šï¼‰</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é€šå¸¸ï¼Œåä¸ºæœåŠ¡ç±»ä¼¼äºGoogleæœåŠ¡ï¼Œå¹¶ä¸”ç›´æ¥åœ¨ä»£ç ä¸­æ”¯æŒå®ƒä»¬ä¸ä¼šé€ æˆå›°éš¾ã€‚</font><font style="vertical-align: inherit;">é—®é¢˜åªèƒ½æ˜¯æ•´ä¸ªåä¸ºçš„â€œç”Ÿæ€ç³»ç»Ÿâ€ï¼Œä½†å®ƒä»¬å¯ä»¥å½’å› äºå®ƒçš„å¹´è½»ï¼Œå¹¶ä¸”éšç€æ—¶é—´çš„æ¨ç§»ï¼Œä¸€åˆ‡éƒ½ä¼šå˜å¾—æ›´å¥½ã€‚</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN497118/index.html">[é¢„æµ‹]æ‰€æœ‰æ— äººé©¾é©¶å¡è½¦ä¼šç»ˆç»“è¿˜æ˜¯åªæœ‰Starsky Roboticsï¼Ÿ</a></li>
<li><a href="../zh-CN497126/index.html">ç§¯å‹è¯„åˆ†å’Œä¼˜å…ˆçº§æ’åºæŠ€æœ¯</a></li>
<li><a href="../zh-CN497132/index.html">#SaveFirstè®¡åˆ’ä»¥æ”¯æŒå…·æœ‰ç¤¾ä¼šæ„ä¹‰çš„é¡¹ç›®</a></li>
<li><a href="../zh-CN497136/index.html">â€œä¿å­˜ä¸€è‡´â€æˆ–ä¿„ç½—æ–¯é›·è¾¾ç³»ç»Ÿæµ‹è¯•ä¸­çš„æŠ¥å‘Šï¼Œç”¨äºåœ¨è·‘é“ä¸Šæœç´¢å¼‚ç‰©</a></li>
<li><a href="../zh-CN497140/index.html">CANæ€»çº¿å¤§ä¼—Poloè½¿è½¦ä¸­çš„æ•°æ®è§£å¯†</a></li>
<li><a href="../zh-CN497144/index.html">æ¥”å…¥æ¥”å½¢ï¼šä½¿ç”¨PIV5ç—…æ¯’åˆ¶é€ é’ˆå¯¹MERS-CoVä»¥åŠå¯èƒ½é’ˆå¯¹SARS-CoV-2çš„ç–«è‹—</a></li>
<li><a href="../zh-CN497146/index.html">åº”ç”¨å¯†ç å­¦ã€‚æˆ‘ä»¬å¦‚ä½•ä»¥30ä¸‡ç¾å…ƒçš„ä»·æ ¼æ¢å¤æ¯”ç‰¹å¸</a></li>
<li><a href="../zh-CN497148/index.html">ä½¿ç”¨Golangå’ŒFyneåˆ›å»ºæ¡Œé¢åº”ç”¨ç¨‹åº</a></li>
<li><a href="../zh-CN497152/index.html">äº§å“å¿ƒè„æ‰€åœ¨çš„åœ°æ–¹ï¼šè¡¡é‡å¹¸ç¦æ„Ÿçš„æŒ‡æ ‡</a></li>
<li><a href="../zh-CN497154/index.html">å…«ä¸ªOnticoä¼šè®®çš„æ‰€æœ‰æŠ¥å‘Šçš„è§†é¢‘</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>