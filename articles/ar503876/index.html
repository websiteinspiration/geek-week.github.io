<!doctype html>
<html class="no-js" lang="ar">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ ๐ง ๐ ุจุฑูุฌุฉ ูุนุจุฉ ูุฌูุงุฒ ูุถูู ุนูู ESP32: ูุญุฑู ุ ุจุทุงุฑูุฉ ุ ุตูุช ๐ฉ๏ธ ๐จ๐ผโ๐ซ ๐ง๐ผ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ุงุจุฏุฃ: ูุธุงู ุงูุชุฌููุน ุ ุงูุฅุฏุฎุงู ุ ุงูุนุฑุถ .
 
 ุงูุฌุฒุก 4: ุงูููุงุฏุฉ
 ูุญุชูู Odroid Go ุนูู ูุชุญุฉ ูุจุทุงูุฉ microSD ุ ูุงูุชู ุณุชููู ูููุฏุฉ ูุชูุฒูู ุงูููุงุฑุฏ (ุงูุนูุงุฑูุช ููููุง...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>ุจุฑูุฌุฉ ูุนุจุฉ ูุฌูุงุฒ ูุถูู ุนูู ESP32: ูุญุฑู ุ ุจุทุงุฑูุฉ ุ ุตูุช</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/503876/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/44b/800/42e/44b80042e94aa2f2da9da2d2296461ad.jpg" alt="ุตูุฑุฉ"></div><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุจุฏุฃ: ูุธุงู ุงูุชุฌููุน ุ ุงูุฅุฏุฎุงู ุ ุงูุนุฑุถ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฌุฒุก 4: ุงูููุงุฏุฉ</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุญุชูู Odroid Go ุนูู ูุชุญุฉ ูุจุทุงูุฉ microSD ุ ูุงูุชู ุณุชููู ูููุฏุฉ ูุชูุฒูู ุงูููุงุฑุฏ (ุงูุนูุงุฑูุช ููููุงุช ุงูุตูุช ูุงูุฎุทูุท) ุ ูุฑุจูุง ุญุชู ูุญูุธ ุญุงูุฉ ุงููุนุจุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุชู ุชูุตูู ูุงุฑุฆ ุงูุจุทุงูุฉ ุนุจุฑ SPI ุ ูููู IDF ูุฌุนู ูู ุงูุณูู ุงูุชูุงุนู ูุน ุจุทุงูุฉ SD ุนู ุทุฑูู ุชูุฎูุต ููุงููุงุช SPI ูุงุณุชุฎุฏุงู ูุธุงุฆู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">POSIX</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูููุงุณูุฉ </font><font style="vertical-align: inherit;">ูุซู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fopen</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fread</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fwrite</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ูู ูุฐุง ูุนุชูุฏ ุนูู ููุชุจุฉ </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FatFs</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ูุฐุง ูุฌุจ ุชููุฆุฉ ุจุทุงูุฉ SD ุจุชูุณูู FAT ุงูููุงุณู.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููู ูุชุตู ุจููุณ ูุงูู SPI ูุดุงุดุฉ LCD ุ ููููู ูุณุชุฎุฏู ุฎุท ุงุฎุชูุงุฑ ุฑูุงูุฉ ูุฎุชูููุง. </font><font style="vertical-align: inherit;">ุนูุฏูุง ูุญุชุงุฌ ุฅูู ุงููุฑุงุกุฉ ุฃู ุงููุชุงุจุฉ ุฅูู ุจุทุงูุฉ SD (ููุฐุง ูุง ูุญุฏุซ ูุซูุฑูุง) ุ ุณูููู ุจุฑูุงูุฌ ุชุดุบูู SPI ุจุชุจุฏูู ุฅุดุงุฑุฉ CS ูู ุงูุดุงุดุฉ ุฅูู ูุงุฑุฆ ุจุทุงูุฉ SD ุ ุซู ุฅุฌุฑุงุก ุงูุนูููุฉ. </font><font style="vertical-align: inherit;">ูุฐุง ูุนูู ุฃูู ุฃุซูุงุก ุฅุฑุณุงู ุงูุจูุงูุงุช ุฅูู ุงูุดุงุดุฉ ุ ูุง ูููููุง ุฅุฌุฑุงุก ุฃู ุนูููุงุช ุจุงุณุชุฎุฏุงู ุจุทุงูุฉ SD ุ ูุงูุนูุณ ุตุญูุญ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุงูููุช ุงูุญุงูู ุ ูููู ุจูู ุดูุก ูู ุณูุณูุฉ ูุงุญุฏุฉ ููุณุชุฎุฏู ุญุธุฑ ุงูุฅุฑุณุงู ุนุจุฑ SPI ุนูู ุงูุดุงุดุฉ ุ ูุฐูู ูุง ูููู ุฃู ุชููู ููุงู ูุนุงููุงุช ูุชุฒุงููุฉ ูุน ุจุทุงูุฉ SD ููุน ุดุงุดุฉ LCD. </font><font style="vertical-align: inherit;">ุนูู ุฃู ุญุงู ุ ููุงู ุงุญุชูุงู ูุจูุฑ ุจุฃู ูููู ุจุชุญููู ุฌููุน ุงูููุงุฑุฏ ูู ููุช ุงูุฅุทูุงู.</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุนุฏูู ESP-IDF</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅุฐุง ุญุงูููุง ุชููุฆุฉ ูุงุฌูุฉ ุจุทุงูุฉ SD ุจุนุฏ ุชููุฆุฉ ุงูุดุงุดุฉ ุ ูุณูู ููุงุฌู ูุดููุฉ ุชุฌุนู ูู ุงููุณุชุญูู ุชุญููู Odroid Go. </font><font style="vertical-align: inherit;">ูุง ูุฏุนู ESP-IDF v4.0 ุงููุตูู ุงููุดุชุฑู ุฅูู ูุงูู SPI ุนูุฏ ุงุณุชุฎุฏุงูู ูุน ุจุทุงูุฉ SD. </font><font style="vertical-align: inherit;">ูู ุงูุขููุฉ ุงูุฃุฎูุฑุฉ ุ ุฃุถุงู ุงููุทูุฑูู ูุฐู ุงููุธููุฉ ุ ูููู ูู ูุชู ุฅุตุฏุงุฑูุง ุจุนุฏ ุจุดูู ูุณุชูุฑ ุ ูุฐูู ุณูููู ุจุชุนุฏูู ุตุบูุฑ ูุฌูุด ุงูุฏูุงุน ุงูุฅุณุฑุงุฆููู ุจุฃููุณูุง. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุชุนููู ุฎุงุฑุฌ ุงูุณุทุฑ 303 </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">esp-idf / components / driver / sdspi_host.c</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-comment">// Initialize SPI bus</span>
<span class="hljs-keyword">esp_err_t</span> ret = spi_bus_initialize((<span class="hljs-keyword">spi_host_device_t</span>)slot, &amp;buscfg,<font></font>
    slot_config-&gt;dma_channel);<font></font>
<span class="hljs-keyword">if</span> (ret != ESP_OK) {<font></font>
    ESP_LOGD(TAG, <span class="hljs-string">"spi_bus_initialize failed with rc=0x%x"</span>, ret);
    <span class="hljs-comment">//return ret;</span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุนุฏ ุฅุฌุฑุงุก ูุฐุง ุงูุชุบููุฑ ุ ุณูุณุชูุฑ ูู ุฑุคูุฉ ุฎุทุฃ ุฃุซูุงุก ุงูุชููุฆุฉ ุ ููููู ูู ูุชุณุจุจ ูู ุฅุนุงุฏุฉ ุชุดุบูู ESP32 ุ ูุฃู ุฑูุฒ ุงูุฎุทุฃ ูุง ููุชุดุฑ ุฃุนูุงู.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชููุฆุฉ</font></font></h2><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/57f/4f8/b0f/57f4f8b0fcca66e243637eeb68b39ff7.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/554/eae/9ec/554eae9ec4a3e850eb44e817e8b7b181.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุญุชุงุฌ ุฅูู ุฅุฎุจุงุฑ IDF ุนู ุฏุจุงุจูุณ ESP32 ุงููุชุตูุฉ ุจูุงุฑุฆ MicroSD ุจุญูุซ ูููู ุจุชูููู ุจุฑูุงูุฌ ุชุดุบูู SPI ุงูุฃุณุงุณู ุ ูุงูุฐู ูุชุตู ูุนูููุง ุจุงููุงุฑุฆ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุชู ุงุณุชุฎุฏุงู ุงูููุงุญุธุงุช ุงูุนุงูุฉ </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VSPI.XXXX</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฑุฉ ุฃุฎุฑู ูู </font><strong><font style="vertical-align: inherit;">ุงูุฑุณู ุงูุชุฎุทูุทู</font></strong><font style="vertical-align: inherit;"> ุ ูููู ูููููุง ุฃู ูุฑุงุฌุนูุง ุฅูู ุฃุฑูุงู ุงูุงุชุตุงู ุงููุนููุฉ ุนูู ESP32. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุดุจู ุงูุชููุฆุฉ ุชููุฆุฉ ุดุงุดุฉ LCD ุ ูููู ุจุฏูุงู ูู ูููู ุชูููู SPI ุงูุนุงู ุ ูุณุชุฎุฏู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sdspi_slot_config_t</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ุงููุตูู ูุจุทุงูุฉ SD ูุชุตูุฉ ุนุจุฑ ูุงูู SPI. ูููู ุจุชููุฆุฉ ุฃุฑูุงู ุงูุงุชุตุงู ุงูููุงุจูุฉ ูุฎุตุงุฆุต ุชุฑููุจ ุงูุจุทุงูุฉ ูู ูุธุงู FatFS. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุง ุชูุตู ูุซุงุฆู ุฌูุด ุงูุฏูุงุน ุงูุฅุณุฑุงุฆููู ุจุงุณุชุฎุฏุงู ุงูุฏุงูุฉ </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">esp_vfs_fat_sdmmc_mount</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ููุฏ ุงูุจุฑูุงูุฌ ุงูููุงุฆู. ูุฐู ูุธููุฉ ูุฌูุนุฉ ุชุคุฏู ุงููุซูุฑ ูู ุงูุนูููุงุช ุจุงููุณุจุฉ ููุง ุ ููููุง ุชุนูู ุญุชู ุงูุขู ุจุดูู ุทุจูุนู ุ ูุฑุจูุง ูู ูุชุบูุฑ ุดูุก ูู ุงููุณุชูุจู. </font><font style="vertical-align: inherit;">ุชุนููู </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงููุนููุฉ </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"/ sdcard"</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุฐู ุงููุธููุฉ ููุทุฉ ุงูุชุซุจูุช ุงูุงูุชุฑุงุถูุฉ ูุจุทุงูุฉ SD ุ ูุงูุชู ุณูุณุชุฎุฏููุง ุจุนุฏ ุฐูู ูุจุงุฏุฆุฉ ุนูุฏ ุงูุนูู ูุน ุงููููุงุช. ุฅุฐุง ูุงู ูุฏููุง ููู ุจุงุณู "test.txt" ุนูู ุจุทุงูุฉ SD ุงูุฎุงุตุฉ ุจูุง ุ ูุฅู ุงููุณุงุฑ ุงูุฐู ุณูุณุชุฎุฏูู ููุงุฑุชุจุงุท ุจู ุณูููู "/sdcard/test.txt". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุนุฏ ุชููุฆุฉ ูุงุฌูุฉ ุจุทุงูุฉ SD ุ ูุตุจุญ ุงูุชูุงุนู ูุน ุงููููุงุช ุชุงููุง: ูููููุง ุจุจุณุงุทุฉ ุงุณุชุฎุฏุงู ุงูููุงููุงุช ุงูููุงุณูุฉ ููุธุงุฆู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">POSIX</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ููู ุฃูุฑ ูุฑูุญ ููุบุงูุฉ.</font></font><br>
<br>
<blockquote>     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">   8.3</a>,              .    ,   <b>fopen</b>   .        <b>make menuconfig</b>,       ,     <b>8.3</b>.</blockquote><br>
<h2></h2><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d94/62f/94a/d9462f94aeec7fbdce989e34967e637d.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุฏ ุฃูุดุฃุช </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุดูุง ูุชุญุฑููุง</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 64 ร 64 </font><font style="vertical-align: inherit;">ูู </font><strong><font style="vertical-align: inherit;">Aseprite</font></strong><font style="vertical-align: inherit;"> (ุฑููุจ) ูุณุชุฎุฏู ููููู ููุท: ุฃุณูุฏ ุชูุงููุง (ูุนุทู ุงูุจูุณู) ูุฃุจูุถ ุชูุงููุง (ุชู ุชูููู ุงูุจูุณู). ููุณ ูุฏู Aseprite ุฎูุงุฑ ุญูุธ ููู RGB565 ุฃู ุชุตุฏูุฑู ูุตูุฑุฉ ููุทูุฉ ุฃูููุฉ (ุฃู ุจุฏูู ุถุบุท ูุฑุคูุณ ุตูุฑ) ุ ูุฐูู ููุช ุจุชุตุฏูุฑ ุงูุนูุฑูุช ุฅูู ุชูุณูู PNG ูุคูุช. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุซู ุ ุจุงุณุชุฎุฏุงู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ImageMagick ุ โโููุช</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจุชุญููู ุงูุจูุงูุงุช ุฅูู ููู PPM ุ ูุงูุฐู ุญูู ุงูุตูุฑุฉ ุฅูู ุจูุงูุงุช ุฃูููุฉ ุบูุฑ ูุถุบูุทุฉ ุจุฑุฃุณ ุจุณูุท. ุจุนุฏ ุฐูู ุ ูุชุญุช ุงูุตูุฑุฉ ูู ูุญุฑุฑ ุณุฏุงุณู ุ ูุญุฐูุช ุงูุฑุฃุณ ูุญููุช ููู 24 ุจุช ุฅูู 16 ุจุช ุ ูุญุฐู ุฌููุน ุงูุชูุฑุงุฑุงุช ูู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0x000000</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅูู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0x0000</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ูุฌููุน ุงูุชูุฑุงุฑุงุช ูู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0xFFFFFF</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅูู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0xFFFF</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุชุฑุชูุจ ุงูุจุงูุช ููุง ููุณ ูุดููุฉ ุ ูุฃู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0x0000</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0xFFFF</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุง ูุชุบูุฑุงู ุนูุฏ ุชุบููุฑ ุชุฑุชูุจ ุงูุจุงูุช. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููู ุชูุฒูู ุงูููู ุงูุฎุงู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ููุง</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<pre><code class="cpp hljs">FILE* spriteFile = fopen(<span class="hljs-string">"/sdcard/key"</span>, <span class="hljs-string">"r"</span>);<font></font>
assert(spriteFile);<font></font>
<font></font>
<span class="hljs-keyword">uint16_t</span>* sprite = (<span class="hljs-keyword">uint16_t</span>*)<span class="hljs-built_in">malloc</span>(<span class="hljs-number">64</span> * <span class="hljs-number">64</span> * <span class="hljs-keyword">sizeof</span>(<span class="hljs-keyword">uint16_t</span>));<font></font>
<font></font>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">64</span>; ++i)<font></font>
{<font></font>
	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">64</span>; ++j)<font></font>
	{<font></font>
		fread(sprite, <span class="hljs-keyword">sizeof</span>(<span class="hljs-keyword">uint16_t</span>), <span class="hljs-number">64</span> * <span class="hljs-number">64</span>, spriteFile);<font></font>
	}<font></font>
}<font></font>
<font></font>
fclose(spriteFile);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃููุงู ุ ููุชุญ ุงูููู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฑุฆูุณู ุงูุฐู</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุญุชูู ุนูู ูุญุฏุงุช ุงูุจุงูุช ุงูุฎุงู ูููุฑุฃู ูู ุงููุฎุฒู ุงููุคูุช. </font><font style="vertical-align: inherit;">ูู ุงููุณุชูุจู ุ ุณูููู ุจุชุญููู ููุงุฑุฏ ุงูุนูุฑูุช ุจุดูู ูุฎุชูู ุ ูููู ุจุงููุณุจุฉ ุฅูู ุงูุนุฑุถ ุงูุชูุถูุญู ูุฐุง ูููู ุชูุงููุง.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">int</span> spriteRow = <span class="hljs-number">0</span>;
<span class="hljs-keyword">int</span> spriteCol = <span class="hljs-number">0</span>;<font></font>
<font></font>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> row = y; row &lt; y + <span class="hljs-number">64</span>; ++row)<font></font>
{<font></font>
	spriteCol = <span class="hljs-number">0</span>;<font></font>
<font></font>
	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> col = x; col &lt; x + <span class="hljs-number">64</span>; ++col)<font></font>
	{<font></font>
		<span class="hljs-keyword">uint16_t</span> pixelColor = sprite[<span class="hljs-number">64</span> * spriteRow + spriteCol];<font></font>
<font></font>
		<span class="hljs-keyword">if</span> (pixelColor != <span class="hljs-number">0</span>)<font></font>
		{<font></font>
			gFramebuffer[row * LCD_WIDTH + col] = color;<font></font>
		}<font></font>
<font></font>
		++spriteCol;<font></font>
	}<font></font>
<font></font>
	++spriteRow;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฑุณู ููุด ูุชุญุฑู ุ ูุฌุชุงุฒ ูุญุชููุงุชู ุจุดูู ูุชูุฑุฑ. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุงูุช ุงูุจูุณู ุจูุถุงุก ุ ูุฅููุง ูุฑุณููุง ุจุงูููู ุงูุฐู ุชุญุฏุฏู ุงูุฃุฒุฑุงุฑ. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุงู ุฃุณูุฏ ุ ููุญู ูุนุชุจุฑูุง ุฎูููุฉ ููุง ูุฑุณู.</font></font><br>
<br>
<div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชุตูุญู ูุง ูุฏุนู ููุฏูู HTML5.</font></font><source src="https://austinmorlan.com/posts/embedded_game_programming_4/media/sprite_drawing.mp4" type="video/mp4"></video></div></div></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงููุฑุง ูุงุชูู ุชุดูู ุงูุฃููุงู ุจุดูู ูุจูุฑ. </font><font style="vertical-align: inherit;">ูุขุณู ุนูู ูุฒูุง. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุงุฎุชุจุงุฑ ุชุณุฌูู ุงูุตูุฑุฉ ุ ุณูููู ุงูููุชุงุญ ุฅูู ููุงู ูุง ุนูู ุงูุดุงุดุฉ ุ ููุบูุฑ ูููู ุ ุซู ููุชุจ ูุฎุฒู ุงูุฅุทุงุฑุงุช ุงููุคูุช ุนูู ุจุทุงูุฉ SD ุจุญูุซ ูููู ุนุฑุถู ุนูู ุงูููุจููุชุฑ.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">if</span> (input.menu)<font></font>
{<font></font>
	<span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* snapFilename = <span class="hljs-string">"/sdcard/framebuf"</span>;<font></font>
<font></font>
	ESP_LOGI(LOG_TAG, <span class="hljs-string">"Writing snapshot to %s"</span>, snapFilename);<font></font>
<font></font>
	FILE* snapFile = fopen(snapFilename, <span class="hljs-string">"wb"</span>);<font></font>
	assert(snapFile);<font></font>
<font></font>
		fwrite(gFramebuffer, <span class="hljs-keyword">sizeof</span>(gFramebuffer[<span class="hljs-number">0</span>]), LCD_WIDTH * LCD_HEIGHT, snapFile);<font></font>
	}<font></font>
<font></font>
	fclose(snapFile);<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุคุฏู ุงูุถุบุท ุนูู ููุชุงุญ ุงููุงุฆูุฉ ุฅูู ุญูุธ ูุญุชููุงุช ุงููุฎุฒู ุงููุคูุช ููุฅุทุงุฑุงุช ูู ููู ูุณูู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Framebuf</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ุณูููู ูุฐุง ูุฎุฒููุง ูุคูุชูุง ููุฅุทุงุฑ ุงูุฎุงู ุ ูุฐูู ุณุชุธู ูุญุฏุงุช ุงูุจูุณู ุจุชูุณูู RGB565 ูุน ุนูุณ ุชุฑุชูุจ ุงูุจุงูุช. </font><font style="vertical-align: inherit;">ูููููุง ูุฑุฉ ุฃุฎุฑู ุงุณุชุฎุฏุงู ImageMagick ูุชุญููู ูุฐุง ุงูุชูุณูู ุฅูู PNG ูุนุฑุถู ุนูู ุฌูุงุฒ ููุจููุชุฑ.</font></font><br>
<br>
<pre><code class="cpp hljs">convert -depth <span class="hljs-number">16</span> -size <span class="hljs-number">320</span>x240+<span class="hljs-number">0</span> -endian msb rgb565:FRAMEBUF snap.png</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุงูุทุจุน ุ ูููููุง ุชูููุฐ ุงููุฑุงุกุฉ / ุงููุชุงุจุฉ ุจุชูุณูู BMP / PNG ูุงูุชุฎูุต ูู ูู ูุฐู ุงูุถุฌุฉ ูุน ImageMagick ุ โโูููู ูุฐุง ูุฌุฑุฏ ุฑูุฒ ุชุฌุฑูุจู. </font><font style="vertical-align: inherit;">ุญุชู ุงูุขู ูู ุฃูุฑุฑ ุชูุณูู ุงูููู ุงูุฐู ุฃุฑูุฏ ุงุณุชุฎุฏุงูู ูุชุฎุฒูู ุงููููุด ุงููุชุญุฑูุฉ.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0bd/09c/e66/0bd09ce669a61276676a87b01c15e6f2.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุง ูู! </font><font style="vertical-align: inherit;">ูุชู ุนุฑุถ ุงููุฎุฒู ุงููุคูุช ูุฅุทุงุฑ Odroid Go ุนูู ููุจููุชุฑ ุณุทุญ ุงูููุชุจ.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุฑุงุฌุน</font></font></h2><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Odroid ุงูุฐูุงุจ ุงูุชุฎุทูุทู</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุซุงุฆู ESP-IDF: SDMMC</font></font></a></li>
</ul><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฌุฒุก 5: ุงูุจุทุงุฑูุฉ</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุญุชูู Odroid Go ุนูู ุจุทุงุฑูุฉ ููุซููู ุฃููู ุ ุญุชู ูุชููู ูู ุฅูุดุงุก ูุนุจุฉ ููููู ูุนุจูุง ุฃุซูุงุก ุงูุชููู. </font><font style="vertical-align: inherit;">ูุฐู ููุฑุฉ ูุบุฑูุฉ ูุดุฎุต ูุนุจ ุฃูู Gameboy ุนูุฏูุง ูุงู ุทููุงู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐูู ุ ูุญุชุงุฌ ุฅูู ุทุฑููุฉ ูุทูุจ ูุณุชูู ุจุทุงุฑูุฉ Odroid Go. </font><font style="vertical-align: inherit;">ุงูุจุทุงุฑูุฉ ูุชุตูุฉ ุจุฌูุฉ ุงูุงุชุตุงู ุนูู ESP32 ุ ุญุชู ูุชููู ูู ูุฑุงุกุฉ ุงูุฌูุฏ ููุญุตูู ุนูู ููุฑุฉ ุชูุฑูุจูุฉ ุนู ููุช ุงูุชุดุบูู ุงููุชุจูู.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฎุทุท</font></font></h2><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1f2/ceb/13b/1f2ceb13bf408d8773f22047464e4e66.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุถุญ ุงูุฑุณู ุงูุจูุงูู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IO36</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุชุตูุงู </font><font style="vertical-align: inherit;">ุจุฌูุฏ </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VBAT</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจุนุฏ ุณุญุจู ุฅูู ุงูุฃุฑุถ ูู ุฎูุงู ุงูููุงูู. </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงููุชุงู</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font><strong><font style="vertical-align: inherit;">R21</font></strong><font style="vertical-align: inherit;"> ู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">R23</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) ูุดููุงู ููุณู ุฌูุฏ ูุดุงุจู ูุฐูู ุงูุฐู ูุณุชุฎุฏู ุนูู ุตููุจ ููุญุฉ ุงูุฃูุนุงุจ. ุงูููุงููุงุช ููุง ููุณ ุงูููุงููุฉ ูุฑุฉ ุฃุฎุฑู ุจุญูุซ ูููู ุงูุฌูุฏ ูุตู ุงูุฃุตูู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุณุจุจ ููุณู ุงูุฌูุฏ ุ </font><font style="vertical-align: inherit;">ุณูู ููุฑุฃ </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IO36</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฌูุฏูุง ูุณุงูู ูุตู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VBAT</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ูู ุงููุญุชูู ุฃู ูุชู ุฐูู ูุฃู ุฌูุงุช ุงุชุตุงู ADC ุนูู ESP32 ูุง ูููููุง ูุฑุงุกุฉ ุงูุฌูุฏ ุงูุนุงูู ูุจุทุงุฑูุฉ ููุซููู ุฃููู (4.2 ูููุช ุนูุฏ ุงูุดุญู ุงูุฃูุตู). ูุน ุฐูู ุ ูุฐุง ูุนูู ุฃูู ููุญุตูู ุนูู ุงูุฌูุฏ ุงูุญูููู ุ ุชุญุชุงุฌ ุฅูู ูุถุงุนูุฉ ุงูุฌูุฏ ุงูููุฑูุก ูู ADC (ADC).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุนูุฏ ูุฑุงุกุฉ ูููุฉ </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IO36 ุ</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุญุตู ุนูู ูููุฉ ุฑูููุฉ ุ ููููุง ูููุฏ ุงููููุฉ ุงูุชูุงุธุฑูุฉ ุงูุชู ุชูุซููุง. ูุญู ุจุญุงุฌุฉ ุฅูู ุทุฑููุฉ ูุชูุณูุฑ ุงููููุฉ ุงูุฑูููุฉ ุจุงุณุชุฎุฏุงู ADC ูู ุดูู ุฌูุฏ ุชูุงุธุฑู ูุงุฏู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุณูุญ ูู IDF ุจูุนุงูุฑุฉ ADC ุ ุงูุฐู ูุญุงูู ุฅุนุทุงุก ูุณุชูู ุงูุฌูุฏ ุจูุงุกู ุนูู ุงูุฌูุฏ ุงููุฑุฌุนู. ูุฐุง ุงูุฌูุฏ ุงููุฑุฌุนู ( </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vref</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) ูู 1100 mV ุงูุชุฑุงุถููุง ุ ูููู ูุธุฑูุง ููุฎุตุงุฆุต ุงููุงุฏูุฉ ุ ูุฎุชูู ูู ุฌูุงุฒ ููููุงู. ูุญุชูู ESP32 ูู Odroid Go ุนูู Vref ูุญุฏุฏ ูุฏูููุง ุ "flashed" ูู eFuse ุ ูุงูุฐู ูููููุง ุงุณุชุฎุฏุงูู ู Vref ุฃูุซุฑ ุฏูุฉ.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุณูููู ุงูุฅุฌุฑุงุก ููุง ููู: ุฃููุงู ุ ุณูููู ุจุชูููู ูุนุงูุฑุฉ ADC ุ ูุนูุฏูุง ูุฑูุฏ ูุฑุงุกุฉ ุงูุฌูุฏ ุ ุณูุฃุฎุฐ ุนุฏุฏูุง ูุนูููุง ูู ุงูุนููุงุช (ุนูู ุณุจูู ุงููุซุงู ุ 20) ูุญุณุงุจ ูุชูุณุท โโุงููุฑุงุกุงุช ุ ุซู ูุณุชุฎุฏู ุงูุฌูุด ุงูุฅุณุฑุงุฆููู ูุชุญููู ูุฐู ุงููุฑุงุกุงุช ุฅูู ุงูุฌูุฏ. ุญุณุงุจ ุงููุชูุณุท โโูุฒูู ุงูุถูุถุงุก ููุนุทู ูุฑุงุกุงุช ุฃูุซุฑ ุฏูุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุณูุก ุงูุญุธ ุ ูุง ููุฌุฏ ุงุชุตุงู ุฎุทู ุจูู ุงูุฌูุฏ ูุดุญู ุงูุจุทุงุฑูุฉ. ุนูุฏูุง ุชูุฎูุถ ุงูุดุญูุฉ ุ ููุฎูุถ โโุงูุฌูุฏ ุ ุนูุฏูุง ูุฒูุฏ ุ ูุฑุชูุน ุ ูููู ุจุทุฑููุฉ ูุง ูููู ุงูุชูุจุค ุจูุง. ูู ูุง ูููู ูููู: ุฅุฐุง ูุงู ุงูุฌูุฏ ุฃูู ูู ุญูุงูู 3.6 ูููุช ุ ุนูุฏูุง ูุชู ุชูุฑูุบ ุงูุจุทุงุฑูุฉ ุ ูููู ูู ุงูุตุนุจ ุจุดูู ูุฏูุด ุชุญููู ูุณุชูู ุงูุฌูุฏ ุจุฏูุฉ ุฅูู ูุณุจุฉ ูุฆููุฉ ูู ุดุญู ุงูุจุทุงุฑูุฉ.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุงููุณุจุฉ ููุดุฑูุนูุง ุ ูุฐุง ููุณ ููููุง ุจุดูู ุฎุงุต. </font><font style="vertical-align: inherit;">ูููููุง ุชูููุฐ ุชูุฑูุจ ุชูุฑูุจู ููุณูุงุญ ููุงุนุจ ุจูุนุฑูุฉ ุงูุญุงุฌุฉ ุฅูู ุดุญู ุงูุฌูุงุฒ ุจุณุฑุนุฉ ุ ููููุง ูู ูุนุงูู ุ ูู ูุญุงููุฉ ููุญุตูู ุนูู ุงููุณุจุฉ ุงูุฏูููุฉ.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LED ุงูุญุงูุฉ</font></font></h2><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b52/0ad/2d6/b520ad2d63e2a4c59924debb6c3613bc.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุฌุฏ ุนูู ุงูููุญุฉ ุงูุฃูุงููุฉ ุฃุณูู ุดุงุดุฉ Odroid Go ูุคุดุฑ LED ุฃุฒุฑู (LED) ุ ูุงูุฐู ูููููุง ุงุณุชุฎุฏุงูู ูุฃู ุบุฑุถ. ููููู ุฃู ุชุจูู ููู ุฃู ุงูุฌูุงุฒ ููุฏ ุงูุชุดุบูู ููุนูู ุ ูููู ูู ูุฐู ุงูุญุงูุฉ ุ ุนูุฏูุง ููุนุจ ูู ุงูุธูุงู ุ ุณูู ูุถูุก ูุคุดุฑ LED ุฃุฒุฑู ูู ูุฌูู. ูุฐูู ุ ุณูุณุชุฎุฏููุง ููุฅุดุงุฑุฉ ุฅูู ุงูุฎูุงุถ ุดุญู ุงูุจุทุงุฑูุฉ (ุนูู ุงูุฑุบู ูู ุฃููู ุฃูุถู ุงูููู ุงูุฃุญูุฑ ุฃู ุงูููุฑูุงูู ููุฐุง). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุงุณุชุฎุฏุงู LED ุ ุชุญุชุงุฌ ุฅูู ุชุนููู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IO2 ููุฎุฑุฌ</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ุซู ุชุทุจูู ุฅุดุงุฑุฉ ุนุงููุฉ ุฃู ููุฎูุถุฉ ุนููู ูุชุดุบูู ูุฅููุงู LED. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃุนุชูุฏ ุฃู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููุงูู</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 2 ูููู ุฃูู ( </font><strong><font style="vertical-align: inherit;">ุงูููุงูู ุงููุญุฏุฏ ุงูุญุงูู</font></strong><font style="vertical-align: inherit;"> ) ุณูููู ูุงูููุง ุญุชู ูุง ูุญุฑู LED </font><font style="vertical-align: inherit;">ููููุฑ </font><strong><font style="vertical-align: inherit;">ุชูุงุฑูุง</font></strong><font style="vertical-align: inherit;"> ูุจูุฑูุง ุฌุฏูุง ูู ุฏุจูุณ GPIO.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุชูุชุน LED ุจููุงููุฉ ููุฎูุถุฉ ุฅูู ุญุฏ ูุง ุ ูุฐูู ุฅุฐุง ุชู ุชุทุจูู 3.3 V ุนููู ุ ูุณูู ูุญุฑูู ุนู ุทุฑูู ุชุบููุฑ ุงูุชูุงุฑ. </font><font style="vertical-align: inherit;">ููุญูุงูุฉ ูู ูุฐุง ุ ุนุงุฏุฉ ูุง ูุชู ุชูุตูู ุงูููุงูู ูู ุณูุณูุฉ ูุน LED. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุน ุฐูู ุ ูุฅู ุงูููุงููุงุช ุงููููุฏุฉ ุงูุญุงููุฉ ููุตุงุจูุญ LED ุนุงุฏุฉ ูุง ุชููู ุฃูู ุจูุซูุฑ ูู 2 ูููู ุฃูู ุ ูุฐูู ูุง ุฃููู ููุงุฐุง ูุนุชุจุฑ ุงูููุงูู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">R7</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุซู ูุฐู ุงูููุงููุฉ.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชููุฆุฉ</font></font></h2><br>
<pre><code class="cpp hljs"><span class="hljs-keyword">static</span> <span class="hljs-keyword">const</span> <span class="hljs-keyword">adc1_channel_t</span> BATTERY_READ_PIN = ADC1_GPIO36_CHANNEL;
<span class="hljs-keyword">static</span> <span class="hljs-keyword">const</span> <span class="hljs-keyword">gpio_num_t</span> BATTERY_LED_PIN = GPIO_NUM_2;<font></font>
<font></font>
<span class="hljs-keyword">static</span> <span class="hljs-keyword">esp_adc_cal_characteristics_t</span> gCharacteristics;<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Odroid_InitializeBatteryReader</span><span class="hljs-params">()</span>
</span>{
	<span class="hljs-comment">// Configure LED</span><font></font>
	{<font></font>
		<span class="hljs-keyword">gpio_config_t</span> gpioConfig = {};<font></font>
<font></font>
		gpioConfig.mode = GPIO_MODE_OUTPUT;<font></font>
		gpioConfig.pin_bit_mask = <span class="hljs-number">1U</span>LL &lt;&lt; BATTERY_LED_PIN;<font></font>
<font></font>
		ESP_ERROR_CHECK(gpio_config(&amp;gpioConfig));<font></font>
	}<font></font>
<font></font>
	<span class="hljs-comment">// Configure ADC</span><font></font>
	{<font></font>
		adc1_config_width(ADC_WIDTH_BIT_12);<font></font>
    	adc1_config_channel_atten(BATTERY_READ_PIN, ADC_ATTEN_DB_11);<font></font>
    	adc1_config_channel_atten(BATTERY_READ_PIN, ADC_ATTEN_DB_11);<font></font>
<font></font>
    	<span class="hljs-keyword">esp_adc_cal_value_t</span> type = esp_adc_cal_characterize(<font></font>
    		ADC_UNIT_1, ADC_ATTEN_DB_11, ADC_WIDTH_BIT_12, <span class="hljs-number">1100</span>, &amp;gCharacteristics);<font></font>
<font></font>
    	assert(type == ESP_ADC_CAL_VAL_EFUSE_VREF);<font></font>
    }<font></font>
<font></font>
	ESP_LOGI(LOG_TAG, <span class="hljs-string">"Battery reader initialized"</span>);<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃููุงู ุ ูููู ุจุชุนููู GPIO LED ููุฎุฑุฌ ุญุชู ูุชููู ูู ุชุจุฏููู ุฅุฐุง ูุฒู ุงูุฃูุฑ. </font><font style="vertical-align: inherit;">ุซู ูููู ุจุชูููู ุฏุจูุณ ADC ุ ููุง ูุนููุง ูู ุญุงูุฉ ุงูุชูุงุทุน - ุจุนุฑุถ ุจุช 12 ูุญุฏ ุฃุฏูู ูู ุงูุชูููู. </font><font style="vertical-align: inherit;">ูููู </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">esp_adc_cal_characterize</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจุฅุฌุฑุงุก ุญุณุงุจุงุช ููุง ููุตู ADC ุญุชู ูุชููู ูุงุญููุง ูู ุชุญููู ุงููุฑุงุกุงุช ุงูุฑูููุฉ ุฅูู ุฅุฌูุงุฏ ูุงุฏู.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฑุงุกุฉ ุงูุจุทุงุฑูุฉ</font></font></h2><br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">uint32_t</span> <span class="hljs-title">Odroid_ReadBatteryLevel</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span>
</span>{
	<span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> SAMPLE_COUNT = <span class="hljs-number">20</span>;<font></font>
<font></font>
<font></font>
	<span class="hljs-keyword">uint32_t</span> raw = <span class="hljs-number">0</span>;<font></font>
<font></font>
	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> sampleIndex = <span class="hljs-number">0</span>; sampleIndex &lt; SAMPLE_COUNT; ++sampleIndex)<font></font>
	{<font></font>
		raw += adc1_get_raw(BATTERY_READ_PIN);<font></font>
	}<font></font>
<font></font>
	raw /= SAMPLE_COUNT;<font></font>
<font></font>
<font></font>
	<span class="hljs-keyword">uint32_t</span> voltage = <span class="hljs-number">2</span> * esp_adc_cal_raw_to_voltage(raw, &amp;gCharacteristics);<font></font>
<font></font>
	<span class="hljs-keyword">return</span> voltage;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฃุฎุฐ ุนุดุฑูู ุนููุฉ ุฃูููุฉ ูู ADC ูู ุงุชุตุงู ADC ุ ุซู ููุณููุง ููุญุตูู ุนูู ูุชูุณุท โโุงููููุฉ. ููุง ุฐูุฑ ุฃุนูุงู ุ ูุฐุง ูุณุงุนุฏ ุนูู ุชูููู ุถุฌูุฌ ุงููุฑุงุกุงุช. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุซู ูุณุชุฎุฏู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">esp_adc_cal_raw_to_voltage</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุชุญููู ุงููููุฉ ุงูุฎุงู ุฅูู ุงูุฌูุฏ ุงูุญูููู. ูุธุฑูุง ูููุณู ุงูุฌูุฏ ุงููุฐููุฑ ุฃุนูุงู ุ ูููู ุจูุถุงุนูุฉ ุงููููุฉ ุงููุฑุชุฌุนุฉ: ุณุชููู ูููุฉ ุงููุฑุงุกุฉ ูุตู ุฌูุฏ ุงูุจุทุงุฑูุฉ ุงููุนูู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุฏูุงู ูู ุงูุชูุตู ุฅูู ุทุฑู ุตุนุจุฉ ูุชุญููู ูุฐุง ุงูุฌูุฏ ุฅูู ูุณุจุฉ ูุฆููุฉ ูู ุดุญู ุงูุจุทุงุฑูุฉ ุ ูุณูุนูุฏ ุฌูุฏูุง ุจุณูุทูุง. ุฏุน ูุธููุฉ ุงูุงุณุชุฏุนุงุก ุชูุฑุฑ ุจููุณูุง ูุง ูุฌุจ ุงูููุงู ุจู ูุน ุงูุฌูุฏ - ุณูุงุก ูุชุญูููู ุฅูู ูุณุจุฉ ูุฆููุฉ ูู ุงูุดุญูุฉ ุ ุฃู ุจุจุณุงุทุฉ ุชูุณูุฑูุง ุนูู ุฃููุง ูููุฉ ุนุงููุฉ ุฃู ููุฎูุถุฉ.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุชู ุฅุฑุฌุงุน ุงููููุฉ ุจุงููููู ูููุช ุ ูุฐุง ุชุญุชุงุฌ ูุธููุฉ ุงูุงุณุชุฏุนุงุก ุฅูู ุฅุฌุฑุงุก ุงูุชุญููู ุงูููุงุณุจ. </font><font style="vertical-align: inherit;">ูุฐุง ูููุน ุชุนููู ุงููุงุฆุถ.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุนุฏุงุฏ LED</font></font></h2><br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Odroid_EnableBatteryLight</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span>
</span>{<font></font>
	gpio_set_level(BATTERY_LED_PIN, <span class="hljs-number">1</span>);<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Odroid_DisableBatteryLight</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span>
</span>{<font></font>
	gpio_set_level(BATTERY_LED_PIN, <span class="hljs-number">0</span>);<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุงุชุงู ุงููุธููุชุงู ุงูุจุณูุทุชุงู ุชูููุงู ูุงุณุชุฎุฏุงู LED. </font><font style="vertical-align: inherit;">ูููููุง ุฅูุง ุชุดุบูู ุฃู ุฅููุงู ุงูุถูุก. </font><font style="vertical-align: inherit;">ุฏุน ูุธููุฉ ุงูุงุณุชุฏุนุงุก ุชูุฑุฑ ูุชู ุชูุนู ุฐูู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููููุง ุฅูุดุงุก ูููุฉ ูู ุดุฃููุง ูุฑุงูุจุฉ ุฌูุฏ ุงูุจุทุงุฑูุฉ ุจุดูู ุฏูุฑู ูุชุจุฏูู ุญุงูุฉ LED ููููุง ูุฐูู ุ ูููู ูู ุงูุฃูุถู ุงุณุชุฌูุงุจ ุฌูุฏ ุงูุจุทุงุฑูุฉ ูู ุฏูุฑุชูุง ุงูุฑุฆูุณูุฉ ุ ููู ุซู ุชุญุฏูุฏ ููููุฉ ุถุจุท ุฌูุฏ ุงูุจุทุงุฑูุฉ ูู ููุงู.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุฌุฑูุจู</font></font></h2><br>
<pre><code class="cpp hljs"><span class="hljs-keyword">uint32_t</span> batteryLevel = Odroid_ReadBatteryLevel();<font></font>
<font></font>
<span class="hljs-keyword">if</span> (batteryLevel &lt; <span class="hljs-number">3600</span>)<font></font>
{<font></font>
	Odroid_EnableBatteryLight();<font></font>
}<font></font>
<span class="hljs-keyword">else</span><font></font>
{<font></font>
	Odroid_DisableBatteryLight();<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููููุง ุจุจุณุงุทุฉ ุทูุจ ูุณุชูู ุงูุจุทุงุฑูุฉ ูู ุงูุฏูุฑุฉ ุงูุฑุฆูุณูุฉ ุ ูุฅุฐุง ูุงู ุงูุฌูุฏ ุฃูู ูู ูููุฉ ุงูุนุชุจุฉ ุ ูู ุจุชุดุบูู LED ุ ูุดูุฑูุง ุฅูู ุงูุญุงุฌุฉ ุฅูู ุงูุดุญู. </font><font style="vertical-align: inherit;">ุงุณุชูุงุฏูุง ุฅูู ุงูููุงุฏ ุงูุชู ุชูุช ุฏุฑุงุณุชูุง ุ ูููููู ุงูููู ุฃู 3600 ูููู ูููุช (3.6 ูููุช) ูู ุนูุงูุฉ ุฌูุฏุฉ ุนูู ุงูุฎูุงุถ ุดุญูุฉ ุจุทุงุฑูุงุช ููุซููู ุฃููู ุ ูููู ุงูุจุทุงุฑูุงุช ููุณูุง ูุนูุฏุฉ.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุฑุงุฌุน</font></font></h2><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Odroid ุงูุฐูุงุจ ุงูุชุฎุทูุทู</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุซุงุฆู ESP-IDF: ADC</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฎุตุงุฆุต ุงูุจุทุงุฑูุฉ</font></font></a></li>
</ul><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฌุฒุก 6: ุงูุตูุช</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุฎุทูุฉ ุงูุฃุฎูุฑุฉ ููุญุตูู ุนูู ูุงุฌูุฉ ูุงููุฉ ูุฌููุน ุฃุฌูุฒุฉ Odroid Go ูู ูุชุงุจุฉ ุทุจูุฉ ุตูุช. ุจุนุฏ ุงูุงูุชูุงุก ูู ูุฐุง ุ ูููููุง ุงูุจุฏุก ูู ุงูุงูุชูุงู ูุญู ุจุฑูุฌุฉ ุฃูุซุฑ ุนููููุฉ ููุนุจุฉ ุ ุฃูู ุงุฑุชุจุงุทูุง ุจุจุฑูุฌุฉ Odroid. ุณูุชู ุชูููุฐ ุฌููุน ุงูุชูุงุนูุงุช ูุน ุงูุฃุฌูุฒุฉ ุงูุทุฑููุฉ ูู ุฎูุงู ูุธุงุฆู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Odroid</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุณุจุจ ููุฉ ุฎุจุฑุชู ูู ุงูุจุฑูุฌุฉ ุงูุตูุชูุฉ ูููุต ุงูุชูุซูู ุงูุฌูุฏ ูู ุฌุงูุจ ุฌูุด ุงูุฏูุงุน ุงูุฅุณุฑุงุฆููู ุ ุนูุฏ ุงูุนูู ุนูู ูุดุฑูุน ุ ุงุณุชุบุฑู ุชูููุฐ ุงูุตูุช ูุนุธู ุงูููุช. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุงูููุงูุฉ ุ ูู ููู ูุทููุจูุง ุงููุซูุฑ ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ูุชุดุบูู ุงูุตูุช. ุชู ุฅููุงู ูุนุธู ุงูููุช ุนูู ููููุฉ ุชุญููู ุจูุงูุงุช ุงูุตูุช ุฅูู ESP32 ุงููุทููุจ ูููููุฉ ุชูููู ุจุฑูุงูุฌ ุชุดุบูู ุงูุตูุช ESP32 ููุชูุงุณุจ ูุน ุชูููู ุงูุฃุฌูุฒุฉ.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุณุงุณูุงุช ุงูุตูุช ุงูุฑููู</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุชููู ุงูุตูุช ุงูุฑููู ูู ุฌุฒุฃูู: </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุณุฌูู</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุดุบูู</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณุฌู</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุชุณุฌูู ุงูุตูุช ุนูู ุฌูุงุฒ ููุจููุชุฑ ุ ูุญุชุงุฌ ุฃููุงู ุฅูู ุชุญูููู ูู ูุณุงูุฉ ุฅุดุงุฑุฉ (ุชูุงุธุฑูุฉ) ูุณุชูุฑุฉ ุฅูู ูุณุงุญุฉ ุฅุดุงุฑุฉ (ุฑูููุฉ) ูููุตูุฉ. </font><font style="vertical-align: inherit;">ูุชู ุฅูุฌุงุฒ ูุฐู ุงููููุฉ ุจุงุณุชุฎุฏุงู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญูู ุชูุงุธุฑู ุฅูู ุฑููู (ADC)</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (ูุงูุฐู ุชุญุฏุซูุง ุนูู ุนูุฏูุง ุนูููุง ูุน ุงูุตููุจ ูู ุงูุฌุฒุก 2). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุชููู ADC </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนููุฉ ูู</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูููุฌุฉ ุงููุงุฑุฏุฉ ููุฑูู ุงููููุฉ ุ ูุงูุชู ูููู ุจุนุฏ ุฐูู ุญูุธูุง ูู ููู.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุนุจ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููู ุฅุฑุฌุงุน ููู ุตูุชู ุฑููู ูู ุงููุถุงุก ุงูุฑููู ุฅูู ุงูุชูุงุธุฑู ุจุงุณุชุฎุฏุงู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญูู ุฑููู ุฅูู ุชูุงุธุฑู (DAC)</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ูููู ูู DAC ุฅุนุงุฏุฉ ุฅูุชุงุฌ ุงูููู ูู ูุทุงู ูุนูู ููุท. </font><font style="vertical-align: inherit;">ุนูู ุณุจูู ุงููุซุงู ุ ูููู ูู DAC 8 ุจุช ูุน ูุตุฏุฑ 3.3 ูููุช ุฅุฎุฑุงุฌ ุงููููุชูุฉ ุงูุชูุงุธุฑูุฉ ูู ุงููุทุงู ูู 0 ุฅูู 3.3 ูููู ูููุช ูู ุฎุทูุงุช 12.9 ูููู ูููุช (3.3 ูููุช ููุณููุฉ ุนูู 256). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชุฃุฎุฐ DAC ุงูููู ุงูุฑูููุฉ ูุชุญูููุง ูุฑุฉ ุฃุฎุฑู ุฅูู ุงูุฌูุฏ ุ ูุงูุชู ูููู ุฅุฑุณุงููุง ุฅูู ูุถุฎู ุตูุช ุฃู ููุจุฑ ุตูุช ุฃู ุฃู ุฌูุงุฒ ุขุฎุฑ ูุงุฏุฑ ุนูู ุงุณุชูุจุงู ุฅุดุงุฑุฉ ุตูุชูุฉ ุชูุงุธุฑูุฉ.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุนุฏู ุฃุฎุฐ ุงูุนููุงุช</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุนูุฏ ุชุณุฌูู ุงูุตูุช ุงูุชูุงุธุฑู ูู ุฎูุงู ADC ุ ูุชู ุฃุฎุฐ ุงูุนููุงุช ุจุชุฑุฏุฏ ูุนูู ุ ููู ุนููุฉ ูู "ููุทุฉ" ูุฅุดุงุฑุฉ ุงูุตูุช ูู ููุทุฉ ุฒูููุฉ. ุชุณูู ูุฐู ุงููุนููุฉ </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุฑุฏุฏ ุฃุฎุฐ ุงูุนููุงุช</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุชูุงุณ </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุงููุฑุชุฒ</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููุง ุฒุงุฏ ุชุฑุฏุฏ ุฃุฎุฐ ุงูุนููุงุช ุ ูููุง ูููุง ุจุฅุนุงุฏุฉ ุฅูุดุงุก ุชุฑุฏุฏุงุช ุงูุฅุดุงุฑุฉ ุงูุฃุตููุฉ ุจุฏูุฉ ุฃูุจุฑ. </font><font style="vertical-align: inherit;">ุชูุต </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุธุฑูุฉ Nyquist-Shannon (Kotelnikov)</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (ุจุนุจุงุฑุงุช ุจุณูุทุฉ) ุนูู ุฃู ุชุฑุฏุฏ ุฃุฎุฐ ุงูุนููุงุช ูุฌุจ ุฃู ูููู ุถุนู ุฃุนูู ุชุฑุฏุฏ ุฅุดุงุฑุฉ ูุฑูุฏ ุชุณุฌููู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููู ููุฃุฐู ุงูุจุดุฑูุฉ ุฃู ุชุณูุน ุชูุฑูุจูุง ูู ุงููุทุงู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู 20 ูุฑุชุฒ ุฅูู 20 ูููู ูุฑุชุฒ</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ูุฐูู ุบุงูุจูุง ูุง ูุณุชุฎุฏู ุชุฑุฏุฏ ุฃุฎุฐ ุงูุนููุงุช </font><strong><font style="vertical-align: inherit;">44.1 ูููู ูุฑุชุฒ</font></strong><font style="vertical-align: inherit;"> ูุฅุนุงุฏุฉ ุฅูุดุงุก ููุณููู ุนุงููุฉ ุงูุฌูุฏุฉ</font></font><strong><font style="vertical-align: inherit;"></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ููู ุฃูุซุฑ ุจูููู ูู ุถุนู ุงูุญุฏ ุงูุฃูุตู ููุชุฑุฏุฏ ุงูุฐู ูููู ููุฃุฐู ุงูุจุดุฑูุฉ ุงูุชุนุฑู ุนููู. ููุฐุง ูุถูู ุฅุนุงุฏุฉ ุฅูุดุงุก ูุฌููุนุฉ ูุงููุฉ ูู ุชุฑุฏุฏุงุช ุงูุฃุฌูุฒุฉ ูุงูุตูุช. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุน ุฐูู ุ ุชุฃุฎุฐ ูู ุนููุฉ ูุณุงุญุฉ ูู ุงูููู ุ ูุฐูู ูุง ูููููุง ุชุญุฏูุฏ ุงูุญุฏ ุงูุฃูุตู ููุนุฏู ุฃุฎุฐ ุงูุนููุงุช. ููุน ุฐูู ุ ุฅุฐุง ูู ุชุชูุงูู ุนููุฉ ุณุฑูุนุฉ ุจูุง ููู ุงูููุงูุฉ ุ ููุฏ ุชููุฏ ูุนูููุงุช ูููุฉ. ูุฌุจ ุฃู ูุนุชูุฏ ุชุฑุฏุฏ ุฃุฎุฐ ุงูุนููุงุช ุงููุญุฏุฏ ุนูู ุงูุชุฑุฏุฏุงุช ุงูููุฌูุฏุฉ ูู ุงูุตูุช ุงููุนุงุฏ ุฅูุดุงุคู. </font></font><br>
<br>
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฌุจ ุฃู ูุชู ุงูุชุดุบูู ุจููุณ ุชุฑุฏุฏ ุงููุตุฏุฑ ุ ูุฅูุง ุณูุฎุชูู ุงูุตูุช ููุฏุชู.</font></font></em><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุชุฑุถ ุฃู ุนุดุฑ ุซูุงู ูู ุงูุตูุช ุชู ุชุณุฌูููุง ุจุชุฑุฏุฏ ุฃุฎุฐ ุงูุนููุงุช ูุจูุบ 16 ูููู ูุฑุชุฒ. </font><font style="vertical-align: inherit;">ุฅุฐุง ููุช ุจุชุดุบููู ุจุชุฑุฏุฏ 8 ูููู ูุฑุชุฒ ุ ูุณุชููู ูุบูุชู ุฃูู ุ ูุณุชููู ุงููุฏุฉ ุนุดุฑูู ุซุงููุฉ. </font><font style="vertical-align: inherit;">ุฅุฐุง ููุช ุจุชุดุบููู ุจุชุฑุฏุฏ ุฃุฎุฐ ุงูุนููุงุช 32 ูููู ูุฑุชุฒ ุ ูุณุชููู ุงููุบูุฉ ุงููุณููุนุฉ ุฃุนูู ุ ูุณูุณุชูุฑ ุงูุตูุช ููุณู ุฎูุณ ุซูุงูู. </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุถุญ ูุฐุง ุงูููุฏูู ุงููุฑู ูู ูุนุฏูุงุช ุงูุนููุงุช ูุน ุงูุฃูุซูุฉ.</font></font></a><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูู ุงูุจุช</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชูุงุชุฑ ุฃุฎุฐ ุงูุนููุงุช ูู ูุตู ุงููุนุงุฏูุฉ ููุท. ูุญุชูู ุงูุตูุช ุฃูุถูุง ุนูู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูู ููููุงู</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ุฃู ุนุฏุฏ ุงูุจุชุงุช ููู ุนููุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุนูุฏูุง ููุชูุท ADC ุนููุฉ ูู ุฅุดุงุฑุฉ ุตูุชูุฉ ุ ูุฌุจ ุฃู ูุญูู ูุฐู ุงููููุฉ ุงูุชูุงุธุฑูุฉ ุฅูู ุฑูููุฉ ุ ููุนุชูุฏ ูุทุงู ุงูููู ุงูููุชูุทุฉ ุนูู ุนุฏุฏ ุงูุจุชุงุช ุงููุณุชุฎุฏูุฉ. 8 ุจุช (256 ูููุฉ) ุ 16 ุจุช (65ุ526 ููู) ุ 32 ุจุช (4ุ294ุ967ุ296 ููู) ุ ุฅูุฎ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฑุชุจุท ุนุฏุฏ ุงูุจุชุงุช ููู ุนููุฉ </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุงููุทุงู ุงูุฏููุงูููู</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุตูุช ุ ุฃู ุจุฃุนูู ุงูุฃุฌุฒุงุก ูุฃูุซุฑูุง ูุฏูุกูุง. ุนูู ุงูุจุช ุงูุฃูุซุฑ ุดููุนูุง ููููุณููู ูู 16 ุจุช. </font></font><br>
<br>
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุซูุงุก ุงูุชุดุบูู ุ ูู ุงูุถุฑูุฑู ุชูููุฑ ููุณ ุนูู ุงูุจุช ูุซู ุงููุตุฏุฑ ุ ูุฅูุง ุณูุชุบูุฑ ุงูุตูุช ููุฏุชู.</font></font></em><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุนูู ุณุจูู ุงููุซุงู ุ ูุฏูู ููู ุตูุชู ุจุฃุฑุจุน ุนููุงุช ูุฎุฒูุฉ ุนูู ููุฆุฉ 8 ุจุช: [0x25 ุ 0xAB ุ 0x34 ุ 0x80]. </font><font style="vertical-align: inherit;">ุฅุฐุง ุญุงููุช ุชุดุบูููุง ููุง ูู ูุงูุช 16 ุจุช ุ ูุณุชุญุตู ุนูู ุนููุชูู ููุท: [0x25AB ุ 0x3480]. </font><font style="vertical-align: inherit;">ูู ูุคุฏู ูุฐุง ููุท ุฅูู ููู ุบูุฑ ุตุญูุญุฉ ููุนููุงุช ุงูุตูุชูุฉ ุ ูููู ุฃูุถูุง ุฅูู ุชูููู ุนุฏุฏ ุงูุนููุงุช ุฅูู ุงููุตู ุ ูุจุงูุชุงูู ูุฏุฉ ุงูุตูุช. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุงูููู ุฃูุถูุง ูุนุฑูุฉ ุชูุณูู ุงูุนููุงุช. </font><font style="vertical-align: inherit;">8 ุจุช ุบูุฑ ูููุนุฉ ุ 8 ุจุช ุบูุฑ ูููุนุฉ ุ 16 ุจุช ุบูุฑ ูููุนุฉ ุ 16 ุจุช ุบูุฑ ูููุนุฉ ุ ุฅูุฎ. </font><font style="vertical-align: inherit;">ุนุงุฏุฉ ูุง ุชููู 8 ุจุช ุบูุฑ ูููุนุฉ ุ ู 16 ุจุช ูููุนุฉ. </font><font style="vertical-align: inherit;">ุฅุฐุง ุชู ุงูุฎูุท ุจููููุง ุ ุณูุชู ุชุดููู ุงูุตูุช ุฅูู ุญุฏ ูุจูุฑ. </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุนุฑุถ ูุฐุง ุงูููุฏูู ุงุฎุชูุงู ุนูู ุงูุจุช ูุน ุงูุฃูุซูุฉ.</font></font></a><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููุงุช Wav</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ูุนุธู ุงูุฃุญูุงู ุ ูุชู ุชุฎุฒูู ุจูุงูุงุช ุงูุตูุช ุงูุฎุงู ุนูู ุฌูุงุฒ ุงูููุจููุชุฑ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุชูุณูู WAV</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ูุงูุฐู ูุญุชูู ุนูู ุฑุฃุณ ุจุณูุท ูุตู ุชูุณูู ุงูุตูุช (ุชุฑุฏุฏ ุฃุฎุฐ ุงูุนููุงุช ุ ุนูู ุงูุจุช ุ ุงูุญุฌู ุ ุฅูุฎ) ุ ูุชุจูุนูุง ุจุจูุงูุงุช ุงูุตูุช ููุณูุง. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุง ูุชู ุถุบุท ุงูุตูุช ุนูู ุงูุฅุทูุงู (ุนูู ุนูุณ ุชูุณููุงุช ูุซู MP3) ุ ูุฐูู ูููููุง ุชุดุบููู ุจุณูููุฉ ุฏูู ุงูุญุงุฌุฉ ุฅูู ููุชุจุฉ ุชุฑููุฒ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงููุดููุฉ ุงูุฑุฆูุณูุฉ ูู ูููุงุช WAV ูู ุฃูู ุจุณุจุจ ููุต ุงูุถุบุท ุ ูููู ุฃู ุชููู ูุจูุฑุฉ ุฌุฏูุง. ูุฑุชุจุท ุญุฌู ุงูููู ูุจุงุดุฑุฉ ุจุงููุฏุฉ ููุนุฏู ุฃุฎุฐ ุงูุนููุงุช ูุนูู ุงูุจุช. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุญุฌู = ุงููุฏุฉ (ุจุงูุซูุงูู) ร ูุนุฏู ุฃุฎุฐ ุงูุนููุงุช (ุงูุนููุงุช / ุงูุนููุงุช) ร ุนูู ุงูุจุช (ุงูุจุช / ุงูุนููุฉ)</font></font></strong><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุคุซุฑ ุชูุฑุงุฑ ุฃุฎุฐ ุงูุนููุงุช ุนูู ุญุฌู ุงูููู ุจุดูู ุฃูุจุฑ ุ ูุฐุง ูุฅู ุฃุณูู ุทุฑููุฉ ูุชูููุฑ ุงููุณุงุญุฉ ูู ุชุญุฏูุฏ ูููุฉ ููุฎูุถุฉ ุจูุง ููู ุงูููุงูุฉ. </font><font style="vertical-align: inherit;">ุณููุดุฆ ุตูุชูุง ูู ุงููุฏุฑุณุฉ ุงููุฏููุฉ ุ ูุฐุง ูุฅู ุงูุชุฑุฏุฏ ุงูููุฎูุถ ูุฃุฎุฐ ุงูุนููุงุช ููุงุณุจูุง.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I2S</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุญุชูู ESP32 ุนูู ุฃุฌูุฒุฉ ุทุฑููุฉ ุ ููุง ูุฌุนู ูู ุงูุณูู ูุณุจููุง ุชูููุฑ ูุงุฌูุฉ ุจูุนุฏุงุช ุตูุชูุฉ: </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Inter-IC Sound (I2S)</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุฑูุชูููู I2S ุจุณูุท ููุบุงูุฉ ููุชููู ูู ุซูุงุซ ุฅุดุงุฑุงุช ููุท: ุฅุดุงุฑุฉ ุณุงุนุฉ ูุงุฎุชูุงุฑ ูููุงุช (ูุณุงุฑ ุฃู ูููู) ุ ููุฐูู ุฎุท ุงูุจูุงูุงุช ููุณู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุนุชูุฏ ุชุฑุฏุฏ ุงูุณุงุนุฉ ุนูู ุชุฑุฏุฏ ุฃุฎุฐ ุงูุนููุงุช ูุนูู ุงูุจุช ูุนุฏุฏ ุงููููุงุช. ูุชู ุงุณุชุจุฏุงู ุงูุฅููุงุนุงุช ููู ุจุช ูู ุงูุจูุงูุงุช ุ ูุจุงูุชุงูู ุ ูู ุฃุฌู ุฅุนุงุฏุฉ ุฅูุชุงุฌ ุงูุตูุช ุจุดูู ุตุญูุญ ุ ูุฌุจ ุนููู ุถุจุท ุชุฑุฏุฏ ุงูุณุงุนุฉ ููููุง ูุฐูู. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุฑุฏุฏ ุงูุณุงุนุฉ = ุชุฑุฏุฏ ุฃุฎุฐ ุงูุนููุงุช (ุงูุนููุงุช / ุงูุนููุงุช) ร ุนูู ุงูุจุช (ุงูุจุชุงุช / ุงูุนููุฉ) ร ุนุฏุฏ ุงููููุงุช</font></font></strong><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุญุชูู ุจุฑูุงูุฌ ุชุดุบูู ูุญุฏุฉ ุงูุชุญูู ุงูุฏูููุฉ E232 ESP32 ุนูู ูุถุนูู ูุญุชูููู: ููููู ุฅูุง ุฅุฎุฑุงุฌ ุงูุจูุงูุงุช ุฅูู ุฌูุงุช ุงูุงุชุตุงู ุงููุชุตูุฉ ุจุฌูุงุฒ ุงุณุชูุจุงู I2S ุฎุงุฑุฌู ุ ูุงูุชู ูููููุง ูู ุชุดููุฑ ุงูุจุฑูุชูููู ูููู ุงูุจูุงูุงุช ุฅูู ููุจุฑ ุงูุตูุช ุ ุฃู ูููููุง ููู ุงูุจูุงูุงุช ุฅูู ESP32 DAC ุงูุฏุงุฎูู ูุฅุฎุฑุงุฌ ุฅุดุงุฑุฉ ุชูุงุธุฑูุฉ ูููู ุฅุฑุณุงููุง ุฅูู ุงููุถุฎู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุง ูุญุชูู Odroid Go ุนูู ุฃู ูุญุฏุฉ ูู ุชุฑููุฒ I2S ุนูู ุงูููุญุฉ ุ ูุฐูู ุณูุชุนูู ุนูููุง ุงุณุชุฎุฏุงู EAC32 DAC 8 ุจุช ุงูุฏุงุฎูู ุ ุฃู ูุฌุจ ุนูููุง ุงุณุชุฎุฏุงู ุตูุช 8 ุจุช. </font><font style="vertical-align: inherit;">ูุญุชูู ุงูุฌูุงุฒ ุนูู ุฌูุงุฒู DACs ุ ุฃุญุฏููุง ูุชุตู ุจู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IO25</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุงูุขุฎุฑ ุจู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IO26</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุฅุฌุฑุงุก ูุจุฏู ูุงูุชุงูู:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู ุจููู ุงูุจูุงูุงุช ุงูุตูุชูุฉ ุฅูู ุจุฑูุงูุฌ ุชุดุบูู I2S</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฑุณู ุจุฑูุงูุฌ ุชุดุบูู I2S ุจูุงูุงุช ุงูุตูุช ุฅูู DAC ุฏุงุฎูู 8 ุจุช</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชููู DAC ุงูุฏุงุฎููุฉ ุจุฅุฎุฑุงุฌ ุฅุดุงุฑุฉ ุชูุซูููุฉ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชูุชูู ุงูุฅุดุงุฑุฉ ุงูุชูุงุธุฑูุฉ ุฅูู ูุถุฎู ุงูุตูุช</font></font></li>
<li>      </li>
<li>  </li>
</ol><br>
<h2></h2><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2d9/d93/a8e/2d9d93a8ed6eceb35846c0f31e336ec9.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅุฐุง ูุธุฑูุง ุฅูู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฏุงุฆุฑุฉ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุตูุช ูู </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">ุฏุงุฆุฑุฉ Odroid Go</font></a><font style="vertical-align: inherit;"> ุ ูุณูู ูุฑู ุฏุจุงุจูุณ GPIO ( </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IO25</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IO26</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) ูุชุตููู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุฅุฏุฎุงูุงุช</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุจุฑ ุงูุตูุช ( </font><strong><font style="vertical-align: inherit;">PAM8304A</font></strong><font style="vertical-align: inherit;"> ). </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชู</font></font></strong><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ุชูุตูู </font><strong><font style="vertical-align: inherit;">IO25</font></strong><font style="vertical-align: inherit;"> ุฃูุถูุง ุจุฅุดุงุฑุฉ </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ SD</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููููุจุฑ ุ ุฃู ุฌูุฉ ุงูุงุชุตุงู ุงูุชู ุชููู ุจุชุดุบูู ููุจุฑ ุงูุตูุช ุฃู ุฅููุงู ุชุดุบููู (ุฅุดุงุฑุฉ ููุฎูุถุฉ ุชุนูู ุฅููุงู ุงูุชุดุบูู). ูุชู ุชูุตูู ูุฎุฑุฌุงุช ููุจุฑ ุงูุตูุช ุจุณูุงุนุฉ ูุงุญุฏุฉ ( </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P1</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชุฐูุฑ ุฃู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IO25</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IO26</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุนุจุงุฑุฉ ุนู ูุฎุฑุฌุงุช ูู </font><strong><font style="vertical-align: inherit;">DACs</font></strong><font style="vertical-align: inherit;"> 8 ุจุช ESP32 ุ ุฃู ุฃู ุฅุญุฏู DAC ูุชุตูุฉ ุจู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IN-</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุงูุฃุฎุฑู ุจู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IN +</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IN-</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IN +</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุฏุฎูุงุช ุงูุชูุงุถููุฉ</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุถุฎู ุงูุตูุช. ุชุณุชุฎุฏู ุงููุฏุฎูุงุช ุงูุชูุงุถููุฉ ููุญุฏ ูู ุงูุถูุถุงุก ุงููุงุฌูุฉ ุนู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุฏุงุฎู ุงูููุฑููุบูุงุทูุณู</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ุฃู ุถุฌูุฌ ููุฌูุฏ ูู ุฅุดุงุฑุฉ ูุงุญุฏุฉ ุณูููู ููุฌูุฏูุง ุฃูุถูุง ูู ุฅุดุงุฑุฉ ุฃุฎุฑู. ูุชู ุทุฑุญ ุฅุดุงุฑุฉ ูุงุญุฏุฉ ูู ุฃุฎุฑู ุ ููุง ููุบู ุงูุถูุถุงุก. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅุฐุง ูุธุฑุช ุฅูู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงุตูุงุช ูุถุฎู ุงูุตูุช</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ูุฅู ูุฏููุง </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฏุงุฆุฑุฉ ุชุทุจููุงุช ูููุฐุฌูุฉ</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ููู ุงูุทุฑููุฉ ุงูููุตู ุจูุง ูู ูุจู ุงูุดุฑูุฉ ุงููุตูุนุฉ ูุงุณุชุฎุฏุงู ููุจุฑ ุงูุตูุช.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/044/d2a/323/044d2a323366c5ddb3c3b87f918bf5f9.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููุตู ุจุชูุตูู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IN-</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจุงูุฃุฑุถ ุ </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IN +</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจุฅุดุงุฑุฉ ุงูุฅุฏุฎุงู ุ ู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ SD</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจุฅุดุงุฑุฉ ุงูุชุดุบูู / ุงูุฅููุงู. ุฅุฐุง ูุงู ููุงู ุถูุถุงุก 0.005 ูููุช ุ </font><font style="vertical-align: inherit;">ูุณูุชู ูุฑุงุกุฉ </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IN- </font></font></strong><font style="vertical-align: inherit;"></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0V + 0.005V</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ููุน </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IN +</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VIN + 0.005V</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ูุฌุจ ุทุฑุญ ุฅุดุงุฑุงุช ุงูุฅุฏุฎุงู ูู ุจุนุถูุง ุงูุจุนุถ ูุงูุญุตูู ุนูู ูููุฉ ุงูุฅุดุงุฑุฉ ุงูุญููููุฉ ( </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VIN</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) ุจุฏูู ุถูุถุงุก. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุน ุฐูู ุ ูู ูุณุชุฎุฏู ูุตููู Odroid Go ุงูุชูููู ุงูููุตู ุจู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฑุฉ ุฃุฎุฑู ุจุงููุธุฑ ุฅูู ุฏุงุฆุฑุฉ Odroid Go ุ ูุฑู ุฃู ุงููุตูููู ุฑุจุทูุง ุฎุฑุฌ DAC ุจู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IN-</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฃู ููุณ ุฅุฎุฑุงุฌ DAC ูุชุตู ุจู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ SD</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ SD</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- ูุฐู ุฅุดุงุฑุฉ ุฅููุงู ุชุดุบูู ุฐุงุช ูุณุชูู ููุฎูุถ ูุดุท ุ ูุฐูู ููู ูุนูู ููุจุฑ ุงูุตูุช ุ ุชุญุชุงุฌ ุฅูู ุถุจุท ุฅุดุงุฑุฉ ุนุงููุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐุง ูุนูู ุฃูู ูุงุณุชุฎุฏุงู ูุถุฎู ุงูุตูุช ุ ูุฌุจ ุฃูุง ูุณุชุฎุฏู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IO25</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจุงุนุชุจุงุฑู DAC ุ ูููู </font><strong><font style="vertical-align: inherit;">ููุฎุฑุฌ</font></strong><font style="vertical-align: inherit;"> GPIO ูุน ุฅุดุงุฑุฉ ุนุงููุฉ ุฏุงุฆููุง. ููุน ุฐูู ุ ูู ูุฐู ุงูุญุงูุฉ ุ ูุชู ุชุนููู ุฅุดุงุฑุฉ ุนุงููุฉ ุฅูู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IN-</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ููู ูุง ูุง ุชูุตู ุจู ููุงุตูุงุช ููุจุฑ ุงูุตูุช (ูุฌุจ ุฃู ูุชู ุชุฃุฑูุถู). ุซู ูุฌุจ ุนูููุง ุงุณุชุฎุฏุงู DAC ุงููุชุตู ุจู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IO26</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ุญูุซ ูุฌุจ ุชุบุฐูุฉ ูุงุชุฌ I2S ุฅูู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IN +</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ูุฐุง ูุนูู ุฃููุง ูู ูุญูู ุงูุญุฏ ุงูุถุฑูุฑู ูู ุงูุถูุถุงุก ุ ูุฃู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IN- ุบูุฑ</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุชุตู ุจุงูุฃุฑุถ. ุชุตุฏุฑ ุงูุถูุถุงุก ุงููุงุนูุฉ ุจุงุณุชูุฑุงุฑ ูู ุงูุณูุงุนุงุช.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุญุชุงุฌ ุฅูู ุถูุงู ุงูุชูููู ุงูุตุญูุญ ูุจุฑูุงูุฌ ุชุดุบูู I2S ุ ูุฃููุง ูุฑูุฏ ุงุณุชุฎุฏุงู DAC ุงููุชุตู ุจู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IO26 ููุท</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ุฅุฐุง ุงุณุชุฎุฏููุง DAC ูุชุตู ุจู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IO25</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ </font><strong><font style="vertical-align: inherit;">ูุณูุคุฏู</font></strong><font style="vertical-align: inherit;"> ุฐูู ุจุงุณุชูุฑุงุฑ ุฅูู ุฅููุงู ุชุดุบูู ุฅุดุงุฑุฉ ููุจุฑ ุงูุตูุช ุ ูุณูููู ุงูุตูุช ุฑููุจูุง. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุงูุฅุถุงูุฉ ุฅูู ูุฐุง ุงูุบุฑุงุจุฉ ุ ุนูุฏ ุงุณุชุฎุฏุงู DAC ุฏุงุฎูู 8 ุจุช ุ ูุชุทูุจ ุจุฑูุงูุฌ ุชุดุบูู I2S ูู ESP32 ุฅุฑุณุงู ุนููุงุช 16 ุจุช ุฅููู ุ ููููู ูุฑุณู ููุท ุงูุจุงูุช ุงูุนุงูู ุฅูู DAC 8 ุจุช. </font><font style="vertical-align: inherit;">ูุฐูู ุ ูุญุชุงุฌ ุฅูู ุฃุฎุฐ ุตูุช 8 ุจุช ููุตูู ูู ุถุนู ุงููุฎุฒู ุงููุคูุช ุงููุจูุฑ ุ ูู ุญูู ุฃู ุงููุฎุฒู ุงููุคูุช ุณูููู ูุตู ูุงุฑุบ. </font><font style="vertical-align: inherit;">ุซู ููุฑุฑู ุฅูู ุจุฑูุงูุฌ ุชุดุบูู I2S ูููุฑุฑ DAC ุงูุจุงูุช ุงูุนุงูู ููู ุนููุฉ. </font><font style="vertical-align: inherit;">ูุณูุก ุงูุญุธ ุ ูุฐุง ูุนูู ุฃูู ูุฌุจ ุนูููุง "ุงูุฏูุน" ููุงุจู 16 ุจุช ุ ูููู ูุง ูููููุง ุงุณุชุฎุฏุงู 8 ุจุช ุฅูุง.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุนุฏุฏ ุงูููุงู</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุณูุก ุงูุญุธ ุ ูุง ูููู ุฃู ุชุนูู ุงููุนุจุฉ ุนูู ููุงุฉ ูุงุญุฏุฉ ุ ููุง ุฃุฑุฏุช ูู ุงูุฃุตู ุ ูุฃูู ูุจุฏู ุฃู ููุงู ุฎุทุฃ ูู ุจุฑูุงูุฌ ุชุดุบูู I2S. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฌุจ ุฃู ูุณุชุฎุฏู ุจุฑูุงูุฌ ุชุดุบูู I2S DMA (ูุซู ุจุฑูุงูุฌ ุชุดุบูู SPI) ุ ุฃู ูููููุง ููุท ุจุฏุก ููู I2S ุ ุซู ููุงุตู ุนูููุง ุฃุซูุงุก ููุงู ุจุฑูุงูุฌ ุชุดุบูู I2S ุจููู ุงูุจูุงูุงุช ุงูุตูุชูุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููู ุจุฏูุงู ูู ุฐูู ุ ูุชู ุญุธุฑ ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ุทูุงู ูุฏุฉ ุงูุตูุช ุ ููู ุบูุฑ ููุงุณุจ ุชูุงููุง ููุนุจุฉ. ุชุฎูู ุฃูู ุชุถุบุท ุนูู ุฒุฑ ุงูุงูุชูุงู ุ ุซู ุชููู ููุด ุงููุงุนุจ ูุคูุชูุง ุญุฑูุชู ููุฏุฉ 100 ูููู ุซุงููุฉ ุฃุซูุงุก ุชุดุบูู ุตูุช ุงูููุฒ.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุญู ูุฐู ุงููุดููุฉ ุ ูููููุง ุงูุงุณุชูุงุฏุฉ ูู ุญูููุฉ ูุฌูุฏ ููุงุชูู ุนูู ูุชู ESP32. </font><font style="vertical-align: inherit;">ูููููุง ุฅูุดุงุก ูููุฉ (ุฃู ุฎูุท) ูู ุงููุฑูุฒ ุงูุซุงูู ุ ูุงูุชู ุณุชุชุนุงูู ูุน ุฅุนุงุฏุฉ ุฅูุชุงุฌ ุงูุตูุช. </font><font style="vertical-align: inherit;">ุจูุถู ูุฐุง ุ ูููููุง ููู ุงููุคุดุฑ ุฅูู ุงููุฎุฒู ุงููุคูุช ููุตูุช ูู ุงููููุฉ ุงูุฑุฆูุณูุฉ ููุนุจุฉ ุฅูู ุงููููุฉ ุงูุตูุชูุฉ ุ ูุชุจุฏุฃ ูููุฉ ุงูุตูุช ูู ููู I2S ููุชู ุญุธุฑูุง ุทูุงู ูุฏุฉ ุชุดุบูู ุงูุตูุช. </font><font style="vertical-align: inherit;">ููู ุงููููุฉ ุงูุฑุฆูุณูุฉ ูู ุงูููุงุฉ ุงูุฃููู (ูุน ูุนุงูุฌุฉ ุงููุฏุฎูุงุช ูุงูุนุฑุถ) ุณุชุณุชูุฑ ูู ุงูุชูููุฐ ุฏูู ุญุธุฑ.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชููุฆุฉ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจูุนุฑูุฉ ุฐูู ุ ูููููุง ุจุฏุก ุชุดุบูู ุจุฑูุงูุฌ ุชุดุบูู I2S ุจุดูู ุตุญูุญ. </font><font style="vertical-align: inherit;">ููููุงู ุจุฐูู ุ ุชุญุชุงุฌ ููุท ุฅูู ุจุถุนุฉ ุฃุณุทุฑ ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุ ูููู ุงูุตุนูุจุฉ ุชููู ูู ูุนุฑูุฉ ุงููุนููุงุช ุงูุชู ุชุญุชุงุฌ ุฅูู ุชุนููููุง ูุฅุนุงุฏุฉ ุฅูุชุงุฌ ุงูุตูุช ุจุดูู ุตุญูุญ.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">static</span> <span class="hljs-keyword">const</span> <span class="hljs-keyword">gpio_num_t</span> AUDIO_AMP_SD_PIN = GPIO_NUM_25;<font></font>
<font></font>
<span class="hljs-keyword">static</span> QueueHandle_t gQueue;<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">PlayTask</span><span class="hljs-params">(<span class="hljs-keyword">void</span> *arg)</span>
</span>{
	<span class="hljs-keyword">for</span>(;;)<font></font>
	{<font></font>
		QueueData data;<font></font>
<font></font>
		<span class="hljs-keyword">if</span> (xQueueReceive(gQueue, &amp;data, <span class="hljs-number">10</span>))<font></font>
		{<font></font>
			<span class="hljs-keyword">size_t</span> bytesWritten;<font></font>
			i2s_write(I2S_NUM_0, data.buffer, data.length, &amp;bytesWritten, portMAX_DELAY);<font></font>
			i2s_zero_dma_buffer(I2S_NUM_0);<font></font>
		}<font></font>
<font></font>
		vTaskDelay(<span class="hljs-number">1</span> / portTICK_PERIOD_MS);<font></font>
	}<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Odroid_InitializeAudio</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span>
</span>{
	<span class="hljs-comment">// Configure the amplifier shutdown signal</span><font></font>
	{<font></font>
		<span class="hljs-keyword">gpio_config_t</span> gpioConfig = {};<font></font>
<font></font>
		gpioConfig.mode = GPIO_MODE_OUTPUT;<font></font>
		gpioConfig.pin_bit_mask = <span class="hljs-number">1U</span>LL &lt;&lt; AUDIO_AMP_SD_PIN;<font></font>
<font></font>
		ESP_ERROR_CHECK(gpio_config(&amp;gpioConfig));<font></font>
<font></font>
		gpio_set_level(AUDIO_AMP_SD_PIN, <span class="hljs-number">1</span>);<font></font>
	}<font></font>
<font></font>
	<span class="hljs-comment">// Configure the I2S driver</span><font></font>
	{<font></font>
		<span class="hljs-keyword">i2s_config_t</span> i2sConfig= {};<font></font>
<font></font>
		i2sConfig.mode = I2S_MODE_MASTER | I2S_MODE_TX | I2S_MODE_DAC_BUILT_IN;<font></font>
		i2sConfig.sample_rate = <span class="hljs-number">5012</span>;<font></font>
		i2sConfig.bits_per_sample = I2S_BITS_PER_SAMPLE_16BIT;<font></font>
		i2sConfig.communication_format = I2S_COMM_FORMAT_I2S_MSB;<font></font>
		i2sConfig.channel_format = I2S_CHANNEL_FMT_ONLY_LEFT;<font></font>
		i2sConfig.dma_buf_count = <span class="hljs-number">8</span>;<font></font>
		i2sConfig.dma_buf_len = <span class="hljs-number">64</span>;<font></font>
<font></font>
		ESP_ERROR_CHECK(i2s_driver_install(I2S_NUM_0, &amp;i2sConfig, <span class="hljs-number">0</span>, <span class="hljs-literal">NULL</span>));<font></font>
		ESP_ERROR_CHECK(i2s_set_dac_mode(I2S_DAC_CHANNEL_LEFT_EN));<font></font>
	}<font></font>
<font></font>
	<span class="hljs-comment">// Create task for playing sounds so that our main task isn't blocked</span><font></font>
	{<font></font>
		gQueue = xQueueCreate(<span class="hljs-number">1</span>, <span class="hljs-keyword">sizeof</span>(QueueData));<font></font>
		assert(gQueue);<font></font>
<font></font>
		BaseType_t result = xTaskCreatePinnedToCore(&amp;PlayTask, <span class="hljs-string">"I2S Task"</span>, <span class="hljs-number">1024</span>, <span class="hljs-literal">NULL</span>, <span class="hljs-number">5</span>, <span class="hljs-literal">NULL</span>, <span class="hljs-number">1</span>);<font></font>
		assert(result == pdPASS);<font></font>
	}<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃููุงู ุ ูููู ุจุชูููู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IO25</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (ุงููุชุตู ุจุฅุดุงุฑุฉ ุฅููุงู ุชุดุบูู ููุจุฑ ุงูุตูุช) ูุฅุฎุฑุงุฌ ุญุชู ูุชููู ูู ุงูุชุญูู ูู ูุถุฎู ุงูุตูุช ุ ูุชุทุจูู ุฅุดุงุฑุฉ ุนุงููุฉ ุนููู ูุชุดุบูู ููุจุฑ ุงูุตูุช. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุนุฏ ุฐูู ุ ูููู ุจุชูููู ูุชุซุจูุช ุจุฑูุงูุฌ ุชุดุบูู I2S ููุณู. </font><font style="vertical-align: inherit;">ุณุฃููู ุจุชุญููู ูู ุฌุฒุก ูู ุณุทุฑ ุงูุชูููู ูู ุณุทุฑ ุ ูุฃู ูู ุณุทุฑ ูุชุทูุจ ุดุฑุญูุง:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุถุน</font></font><ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููุง ุจุชุนููู ุจุฑูุงูุฌ ุงูุชุดุบูู ุจุงุนุชุจุงุฑู ุจุฑูุงูุฌูุง ุฑุฆูุณููุง (ุงูุชุญูู ูู ุงููุงูู) ุ ูุฌูุงุฒ ุฅุฑุณุงู (ูุฃููุง ูููู ุงูุจูุงูุงุช ุฅูู ุงููุณุชูููู) ุ ููููุง ุจุชููููู ูุงุณุชุฎุฏุงู DAC 8 ุจุช ุงููุฏูุฌ (ูุฃู ููุญุฉ Odroid Go ูุง ุชุญุชูู ุนูู DAC ุฎุงุฑุฌู).</font></font></li>
</ul></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุนุฏู ุงูุนููุฉ</font></font><ul>
<li>    5012,      ,   ,      .   ,      ,          .    -,           2500 .</li>
</ul></li>
<li>bits_per_sample<ul>
<li>  ,    ESP32  8-,   I2S ,      16    ,   8     .</li>
</ul></li>
<li>communication_format<ul>
<li>      ,   ,   -   ,   8-      16- .</li>
</ul></li>
<li>channel_format<ul>
<li> GPIO,    <strong>IN+</strong>   โ  <strong>IO26</strong>,       ยซยป   I2S.  ,  I2S      ,      <strong>IO25</strong>,      ,          .</li>
</ul></li>
<li>dma_buf_count  dma_buf_len<ul>
<li>  DMA-   ( )  ,        ,   ,        IDF.       ,     .</li>
</ul></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุซู ูููู ุจุฅูุดุงุก ูุงุฆูุฉ ุงูุชุธุงุฑ - ูุฐู ูู ุงูุทุฑููุฉ ุงูุชู ูุฑุณู ุจูุง FreeRTOS ุงูุจูุงูุงุช ุจูู ุงูููุงู. ูุถุน ุงูุจูุงูุงุช ูู ูุงุฆูุฉ ุงูุชุธุงุฑ ูููุฉ ูุงุญุฏุฉ ููุณุชุฎุฑุฌูุง ูู ูุงุฆูุฉ ุงูุชุธุงุฑ ูููุฉ ุฃุฎุฑู. ูู ุจุฅูุดุงุก ุจููุฉ ุชุณูู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">QueueData</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุฌูุน ุจูู ุงููุคุดุฑ ุฅูู ุงููุฎุฒู ุงููุคูุช ุงูุตูุชู ูุทูู ุงููุฎุฒู ุงููุคูุช ูู ุจููุฉ ูุงุญุฏุฉ ูููู ูุถุนูุง ูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุนุฏ ุฐูู ุ ูู ุจุฅูุดุงุก ูููุฉ ุชุนูู ุนูู ุงูููุงุฉ ุงูุซุงููุฉ. ูููู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุชูุตูููุง</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจูุธููุฉ </font><strong><font style="vertical-align: inherit;">PlayTask</font></strong><font style="vertical-align: inherit;"> ุ ุงูุชู ุชููู ุจุชุดุบูู ุงูุตูุช. ุงููููุฉ ููุณูุง ูู ุญููุฉ ูุง ููุงุฆูุฉ ุชุชุญูู ุจุงุณุชูุฑุงุฑ ููุนุฑูุฉ ูุง ุฅุฐุง ูุงูุช ููุงู ุฃู ุจูุงูุงุช ูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ. ุฅุฐุง ูุงูุช ูุฐูู ุ ุชุฑุณููุง ุฅูู ุณุงุฆู I2S ุญุชู ูููู ูุนุจูุง. ุณูุชู ุญุธุฑ ููุงููุฉ </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i2s_write</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฐุง ููุงุณุจูุง ุ ูุฃู ุงููููุฉ ุชุชู ุนูู ููุงุฉ ูููุตูุฉ ุนู ุงูุฎูุท ุงูุฑุฆูุณู ููุนุจุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุฒู ุฅุฌุฑุงุก ููุงููุฉ ุฅูู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i2s_zero_dma_buffer</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจุญูุซ ูุง ุชูุชูู ุงูุฃุตูุงุช ูู ููุจุฑุงุช ุงูุตูุช ุจุนุฏ ุงูุชูุงู ุงูุชุดุบูู. </font><font style="vertical-align: inherit;">ูุง ุฃุนุฑู ูุง ุฅุฐุง ูุงู ูุฐุง ุฎุทุฃ ูู ุจุฑูุงูุฌ ุชุดุบูู I2S ุฃู ุงูุณููู ุงููุชููุน ุ ูููู ุจุฏููู ุ ุจุนุฏ ุงูุชูุงุก ุชุดุบูู ุงููุฎุฒู ุงููุคูุช ููุตูุช ุ ุชุตุฏุฑ ุงูุณูุงุนุฉ ุฅุดุงุฑุฉ ุงูููุงูุฉ.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุดุบูู ุงูุตูุช</font></font></h2><br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Odroid_PlayAudio</span><span class="hljs-params">(<span class="hljs-keyword">uint16_t</span>* buffer, <span class="hljs-keyword">size_t</span> length)</span>
</span>{<font></font>
	QueueData data = {};<font></font>
<font></font>
	data.buffer = buffer;<font></font>
	data.length = length;<font></font>
<font></font>
	xQueueSendToBack(gQueue, &amp;data, portMAX_DELAY);<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุธุฑูุง ูุญูููุฉ ุฃู ุงูุชูููู ุจุงููุงูู ูุฏ ุงูุชูู ุจุงููุนู ุ ูุฅู ุงูุงุณุชุฏุนุงุก ููุธููุฉ ุชุดุบูู ุงููุฎุฒู ุงููุคูุช ููุตูุช ููุณู ุจุณูุท ููุบุงูุฉ ุ ูุฃู ุงูุนูู ุงูุฑุฆูุณู ูุชู ูู ูููุฉ ุฃุฎุฑู. </font><font style="vertical-align: inherit;">ูุถุน ุงููุคุดุฑ ูู ุงููุฎุฒู ุงููุคูุช ูุทูู ุงููุฎุฒู ุงููุคูุช ูู ุจููุฉ </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">QueueData</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ุซู ูุถุนู ูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ ุงูุชู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุณุชุฎุฏููุง</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุธููุฉ </font><strong><font style="vertical-align: inherit;">PlayTask</font></strong><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุณุจุจ ูุฐุง ุงูููุท ูู ุงูุนูููุฉ ุ ูุฌุจ ุฃู ูููู ุงููุฎุฒู ุงููุคูุช ุงูุตูุชู ุจุฅููุงู ุงูุชุดุบูู ูุจู ุฃู ูุชููู ูู ุจุฏุก ุงููุฎุฒู ุงููุคูุช ุงูุซุงูู. </font><font style="vertical-align: inherit;">ูุฐูู ุ ุฅุฐุง ุญุฏุซุช ููุฒุฉ ูุฅุทูุงู ูุงุฑ ูู ููุช ูุงุญุฏ ุ ูุณูุชู ุชุดุบูู ุงูุตูุช ุงูุฃูู ูุจู ุงูุซุงูู ุ ูููุณ ูู ููุณ ุงูููุช. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุนูู ุงูุฃุฑุฌุญ ุ ุณุฃููู ูู ุงููุณุชูุจู ุจุฎูุท ุฃุตูุงุช ุงูุฅุทุงุฑุงุช ุงููุฎุชููุฉ ูู ุงููุฎุฒู ุงููุคูุช ุงูุตูุชู ุงูุฐู ูุชู ูููู ุฅูู ุจุฑูุงูุฌ ุชุดุบูู I2S. </font><font style="vertical-align: inherit;">ุณูุณูุญ ูู ุฐูู ุจุชุดุบูู ุนุฏุฉ ุฃุตูุงุช ูู ููุณ ุงูููุช.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุฌุฑูุจู</font></font></h2><br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณููุดุฆ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ูุคุซุฑุงุช ุตูุชูุฉ ุฎุงุตุฉ ุจูุง ุจุงุณุชุฎุฏุงู </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">jsfxr</font></a><font style="vertical-align: inherit;"> ุ ููู ุฃุฏุงุฉ ูุตููุฉ ุฎุตูุตูุง ูุชูููุฏ ููุน ุฃุตูุงุช ุงูุฃูุนุงุจ ุงูุชู ูุญุชุงุฌูุง. </font><font style="vertical-align: inherit;">ูููููุง ุถุจุท ุชุฑุฏุฏ ุฃุฎุฐ ุงูุนููุงุช ูุนูู ุงูุจุชุงุช ูุจุงุดุฑุฉ ุ ุซู ุฅุฎุฑุงุฌ ููู WAV. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุฏ ููุช ุจุฅูุดุงุก ุชุฃุซูุฑ ุตูุช ููุฒุฉ ุจุณูุท ูุดุจู ุตูุช ููุฒุฉ ูุงุฑูู. </font><font style="vertical-align: inherit;">ูุญุชูู ุนูู ุชุฑุฏุฏ ุฃุฎุฐ ุนููุงุช 5012 (ููุง ุชู ุชููููู ุฃุซูุงุก ุงูุชููุฆุฉ) ูุนูู ุจุช 8 (ูุฃู DAC ูู 8 ุจุช).</font></font><br>
<br>
<div class="oembed"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://austinmorlan.com/posts/embedded_game_programming_6/media/jump.wav</font></font></a></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุฏูุงู ูู ุชุญููู ููู WAV ูู ุงูุดูุฑุฉ ูุจุงุดุฑุฉ ุ ุณููุนู ุดูุฆูุง ูุดุงุจููุง ููุง ูุนููุงู ูุชุญููู ุงูุนูุฑูุช ูู ุงูุนุฑุถ ุงูุชูุถูุญู ููุฌุฒุก 4: ุณูุฒูู ุฑุฃุณ WAV ูู ุงูููู ุจุงุณุชุฎุฏุงู ูุญุฑุฑ hex. ูุจูุถู ูุฐุง ุ ุณูููู ุงูููู ุงูููุฑูุก ูู ุจุทุงูุฉ SD ุจูุงูุงุช ุฃูููุฉ ููุท. ุฃูุถุง ุ ูู ููุฑุฃ ูุฏุฉ ุงูุตูุช ุ ุณููุชุจู ูู ุงูุฑูุฒ. ูู ุงููุณุชูุจู ุ ุณูููู ุจุชุญููู ุงูููุงุฑุฏ ุงูุตูุชูุฉ ุจุดูู ูุฎุชูู ุ ูููู ูุฐุง ูููู ููุนุฑุถ ุงูุชูุถูุญู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููู ุชูุฒูู ุงูููู ุงูุฎุงู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ููุง</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-comment">// Load sound effect</span>
<span class="hljs-keyword">uint16_t</span>* soundBuffer;
<span class="hljs-keyword">int</span> soundEffectLength = <span class="hljs-number">1441</span>;<font></font>
{<font></font>
	FILE* soundFile = fopen(<span class="hljs-string">"/sdcard/jump"</span>, <span class="hljs-string">"r"</span>);<font></font>
	assert(soundFile);<font></font>
<font></font>
	<span class="hljs-keyword">uint8_t</span>* soundEffect = <span class="hljs-built_in">malloc</span>(soundEffectLength);<font></font>
	assert(soundEffect);<font></font>
<font></font>
	soundBuffer = <span class="hljs-built_in">malloc</span>(soundEffectLength*<span class="hljs-number">2</span>);<font></font>
	assert(soundBuffer);<font></font>
<font></font>
	fread(soundEffect, soundEffectLength, <span class="hljs-number">1</span>, soundFile);<font></font>
<font></font>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; soundEffectLength; ++i)<font></font>
    {<font></font>
        <span class="hljs-comment">// 16 bits required but only MSB is actually sent to the DAC</span>
        soundBuffer[i] = (soundEffect[i] &lt;&lt; <span class="hljs-number">8u</span>);<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููู ุจุชุญููู ุจูุงูุงุช 8 ุจุช ูู ุงููุฎุฒู ุงููุคูุช </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">soundEffect</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 8 ุจุช </font><font style="vertical-align: inherit;">ุ ุซู ูุณุฎ ูุฐู ุงูุจูุงูุงุช ุฅูู ุงููุฎุฒู ุงููุคูุช </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">soundBuffer</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 16 ุจุช </font><font style="vertical-align: inherit;">ุ ุญูุซ ุณูุชู ุชุฎุฒูู ุงูุจูุงูุงุช ูู ุงูุซูุงูู ุจุชุงุช ุงูุนุงููุฉ. </font><font style="vertical-align: inherit;">ุฃูุฑุฑ - ูุฐุง ุถุฑูุฑู ุจุณุจุจ ููุฒุงุช ุชูููุฐ ุงูุฌูุด ุงูุฅุณุฑุงุฆููู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุนุฏ ุฅูุดุงุก ูุฎุฒู ูุคูุช 16 ุจุช ุ ูููููุง ุชุดุบูู ุตูุช ููุฑุฉ ุฒุฑ. </font><font style="vertical-align: inherit;">ุณูููู ูู ุงูููุทูู ุงุณุชุฎุฏุงู ุฒุฑ ูุณุชูู ุงูุตูุช ููุฐุง.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">int</span> lastState = <span class="hljs-number">0</span>;<font></font>
<font></font>
<span class="hljs-keyword">for</span> (;;)<font></font>
{<font></font>
	[...]<font></font>
<font></font>
	<span class="hljs-keyword">int</span> thisState = input.volume;<font></font>
<font></font>
	<span class="hljs-keyword">if</span> ((thisState == <span class="hljs-number">1</span>) &amp;&amp; (thisState != lastState))<font></font>
	{<font></font>
		Odroid_PlayAudio(soundBuffer, soundEffectLength*<span class="hljs-number">2</span>);<font></font>
	}<font></font>
<font></font>
	lastState = thisState;<font></font>
<font></font>
	[...]<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุญู ูุฑุงูุจ ุญุงูุฉ ุงูุฒุฑ ุจุญูุซ ุฃูู ุนู ุทุฑูู ุงูุฎุทุฃ ุ ุจููุฑุฉ ูุงุญุฏุฉ ุนูู ุงูุฒุฑ ุ ูุง </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชู ุงุณุชุฏุนุงุก Odroid_PlayAudio ุนู</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุทุฑูู ุงูุฎุทุฃ </font><font style="vertical-align: inherit;">ุนุฏุฉ ูุฑุงุช.</font></font><br>
<br>
<div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชุตูุญู ูุง ูุฏุนู ููุฏูู HTML5.</font></font><source src="https://austinmorlan.com/posts/embedded_game_programming_6/media/demo.mp4" type="video/mp4"></video></div></div></div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุตุฏุฑ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุฑูุฒ ุงููุตุฏุฑ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุง</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุฑุงุฌุน</font></font></h2><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Odroid ุงูุฐูุงุจ ุงูุชุฎุทูุทู</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฑูุฉ ุจูุงูุงุช ููุจุฑ ุงูุตูุช</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุซุงุฆู ESP-IDF: DAC</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุซุงุฆู ESP-IDF: I2S</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชูุณูู ููู WAVE</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฏูู: ุดุฑุญ ุนูู ุงูุจุช</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฏูู: ุดุฑุญ ูุนุฏู ุงูุนููุฉ</font></font></a></li>
</ul></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar503848/index.html">ูุฏุนูู ุฅูู ูุฏูุงุช ูุฌุงููุฉ ุนุจุฑ ุงูุฅูุชุฑูุช ุญูู ุทุจุงุนุฉ SLS ุนูู Sinterit 26.05 ููุงุณุญุงุช 3D Shining 28.05</a></li>
<li><a href="../ar503854/index.html">ุงุณุชุฎุฏู SIL ุฅูู ุฃูุตู ุญุฏ</a></li>
<li><a href="../ar503858/index.html">ูุชุงุจ "Terraform: ุงูุจููุฉ ุงูุชุญุชูุฉ ุนูู ูุณุชูู ุงูููุฏ"</a></li>
<li><a href="../ar503864/index.html">ููุธูุฉ ุงููููุงุช ูู Flutter</a></li>
<li><a href="../ar503866/index.html">ุชู ูุดุฑ ุชุทููุฑ ุฎุฑูุทุฉ ุงูุทุฑูู Zextras Suite ูุนุงู 2020</a></li>
<li><a href="../ar503880/index.html">ููู ุชุนููุช ุฃูุง ุฃููู ูุฃุญุจ ุฑุคูุฉ ุงูุขูุฉ</a></li>
<li><a href="../ar503884/index.html">ููู ุชุชุนูู ุงูุนูู ุจุดูู ุบูุฑ ูุชุฒุงูู</a></li>
<li><a href="../ar503888/index.html">ุฎูุงุฑุฒููุฉ AdaBoost</a></li>
<li><a href="../ar503890/index.html">ุญูุงูุฉ ููู ููุช ุจุชูููู Azure AD B2C ุนูู ุงูุชูุงุนู ูุงูุชูุงุนู ูุน ุงูุฌุฒุก ุงูุฃุตูู 1 (ุงูุจุฑูุงูุฌ ุงูุชุนูููู)</a></li>
<li><a href="../ar503892/index.html">Mitap: ุงูุญุฌุฑ ุงูุตุญู ุ ุงุฐูุจ ุจุนูุฏุง</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>