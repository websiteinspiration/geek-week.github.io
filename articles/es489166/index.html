<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèΩ‚Äçüî¨ üëßüèø ü•ã Acerca del funcionamiento de una PC con el ejemplo de Windows 10 y el teclado de la Parte 2 üò® üßö üë¥üèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En esta parte, consideraremos en qu√© direcci√≥n va la informaci√≥n sobre la tecla presionada desde el teclado a la CPU, habr√° muchas im√°genes y esta no ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Acerca del funcionamiento de una PC con el ejemplo de Windows 10 y el teclado de la Parte 2</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/489166/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En esta parte, consideraremos en qu√© direcci√≥n va la informaci√≥n sobre la tecla presionada desde el teclado a la CPU, habr√° muchas im√°genes y esta no es la √∫ltima parte. Hablar√© sobre esto desde el punto de vista de un programador que escribe en modo de usuario (programas de usuario, web, aplicaciones m√≥viles), por lo tanto, puede haber imprecisiones. Es poco probable que las personas involucradas en la electr√≥nica encuentren algo √∫til para s√≠ mismas. La primera parte est√° </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqu√≠</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/wl/me/mo/wlmemoyr_plutwlcq7nhezslr78.jpeg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El problema de la educaci√≥n superior de programadores es que los estudiantes estudian en detalle aspectos individuales sacados de contexto sin comprender c√≥mo encaja todo esto. Varios semestres de matem√°tica superior para comprender la f√≠sica, comprender la ingenier√≠a el√©ctrica, los electrodom√©sticos, el ensamblador, el sistema operativo, los algoritmos, la programaci√≥n del sistema y un mont√≥n de otras materias incluidas en un programa est√°ndar de cinco a√±os. La abundancia de detalles y nadie explica c√≥mo encaja esto en el panorama general, se supone que despu√©s de 5 a√±os, el estudiante se lo vincular√° a s√≠ mismo, y luego ir√° a trabajar con .Net y nunca tocar√° la electr√≥nica y el modo kernel. Creo que no es necesario saber con tanto detalle sobre el funcionamiento de una computadora, es suficiente tener una comprensi√≥n general de lo que est√° sucediendo en la pila tecnol√≥gica. Si las personas que conforman los programas de capacitaci√≥n para universidades abrieron escuelas de manejo,aprender√≠a ruso, caligraf√≠a e hidrodin√°mica, porque necesita comunicarse con los inspectores, cambiar fluidos y escribir notas explicativas. Habr√° algunas imprecisiones en el art√≠culo, por lo que no ser√° adecuado para aprobar el examen en materias especializadas, pero despu√©s ser√° m√°s f√°cil entender el dispositivo de la PC.</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bajo tr√°fico de gatos.</font></font></i><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Una tecla del teclado es un bot√≥n que cierra los contactos y una corriente el√©ctrica pasa a trav√©s de ellos. </font><font style="vertical-align: inherit;">El mecanismo de cierre / apertura est√° hecho de tal manera que no es necesario presionar el bot√≥n por completo, ya que de lo contrario los dedos se cansar√°n r√°pidamente y el teclado no ser√° ergon√≥mico. </font><font style="vertical-align: inherit;">En la secci√≥n, la clave se ve as√≠. </font><font style="vertical-align: inherit;">En el lado derecho est√° el contacto al que se aplica el voltaje.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/g5/c1/ay/g5c1aykcd7h6pbxwih_ci_dcsk0.gif"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El "cerebro" del teclado que puede determinar la pulsaci√≥n de tecla es un </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">microcontrolador</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que es esencialmente una mini computadora con un programa que verifica cada tecla aplicando voltaje y si pasa, entonces se presiona la tecla. Las patas del microcontrolador tienen sus propios nombres y se puede acceder en c√≥digo, se utilizan para comunicarse con el mundo exterior. Las patas pueden controlar el funcionamiento del microcontrolador, informar el estado del chip o servir para leer / transmitir datos.</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><img src="https://habrastorage.org/webt/ek/uq/om/ekuqom94exvedvmbel6ky6botvm.png"></td>
<td><img src="https://habrastorage.org/webt/mb/wm/14/mbwm14xm-h71gr7plnv5oglrhak.png"></td>
</tr>
</tbody></table></div><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El programa ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">firmware</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) se puede escribir en C o ensamblador, se carga en el microcontrolador a trav√©s del </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">programador</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Es un dispositivo con un conector para instalar un microcontrolador y se puede conectar a una computadora a trav√©s de USB, en el que se ejecuta un software especial. As√≠ es como se ve el programador en la vida real:</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><img src="https://habrastorage.org/webt/4q/qz/ut/4qqzutlhi4hlltp4ubcclyv2rtu.png"></td>
<td><img src="https://habrastorage.org/webt/hy/ex/xj/hyexxj5ezr-gkg4jva6rerfkbnw.png"></td>
</tr>
</tbody></table></div><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A trav√©s del programa, cada tramo se puede configurar o medir el voltaje. </font><font style="vertical-align: inherit;">El algoritmo para encontrar la tecla presionada es aplicar voltaje a una pata y medirlo en la otra, y si se presion√≥ la tecla, la segunda pata tendr√° aproximadamente el mismo voltio que la entrada. </font><font style="vertical-align: inherit;">Entonces, en un bucle infinito, se verifican todas las teclas. </font><font style="vertical-align: inherit;">Como regla general, el teclado tiene 80-110 botones, y el controlador de contacto (pines) es mucho m√°s peque√±o. </font><font style="vertical-align: inherit;">Por lo tanto, utilizan un enfoque como la "matriz de teclado": todas las teclas se distribuyen en columnas y filas, y el algoritmo se reduce a encontrar una columna que intersecte la fila a la que el programa aplic√≥ voltaje. </font><font style="vertical-align: inherit;">La correspondencia de columna / fila con los contactos se resalta aqu√≠.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/dm/3w/yn/dm3wynvz4faugjchr5h94ywdwgq.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En realidad, la matriz puede verse as√≠. </font><font style="vertical-align: inherit;">A la izquierda es industrial y a la derecha es casera.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/-y/3o/ik/-y3oikaoyykmeihyhgskuihxgoo.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En el pseudoc√≥digo, la parte del programa de firmware que determina las teclas presionadas puede tener este aspecto.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; COLSC; i++) {<font></font>
 	SetPower(columns[i], <span class="hljs-number">3.0</span> f);
  	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; ROWSC; j++) {
    		<span class="hljs-keyword">float</span> power = GetPower(rows[j]);
    		<span class="hljs-keyword">if</span> (power &gt;= <span class="hljs-number">3.0f</span> - THRESHOLD) {<font></font>
      			BYTE key = keys[i, j];<font></font>
      			SendKey(key);<font></font>
    		}<font></font>
  	}<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cada tecla corresponde a un c√≥digo de escaneo, est√° estandarizada y es un n√∫mero de 8 bits, es decir un byte Por lo tanto, cuando se presiona la tecla Y, el controlador del teclado tendr√° que enviar el n√∫mero 21 (0x15) y, cuando se suelte, 149 (0x95). ¬øC√≥mo se realiza el env√≠o? Seguramente trabaj√≥ con JSON, servicios web o envi√≥ datos entre procesos y sabe que para enviar datos necesita </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">serializar</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , es decir convertirse en una matriz de bytes o texto formateado que el destinatario puede </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">deserializar</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , es decir recrear un objeto en su espacio de direcciones. ¬øY qu√© puede serializar datos a un nivel tan bajo? Necesitamos transferir solo 1 byte (8 bits). Mirando hacia el futuro, dir√© que transmitiremos datos poco a poco.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En matem√°ticas, hay una f√≥rmula que puede convertir cualquier n√∫mero decimal que nos sea familiar en una secuencia de ceros y unos y viceversa. Esta f√≥rmula ha encontrado aplicaci√≥n en tecnolog√≠a inform√°tica. En la primera parte, mencion√© casualmente que la tecnolog√≠a anal√≥gica explota las leyes de la f√≠sica, mientras que la digital funciona a nivel de ceros y unos. Esto significa que un tel√©fono anal√≥gico codifica todo el espectro de la voz humana en una secuencia de ondas electromagn√©ticas, y un tel√©fono digital utiliza un microchip que convierte la voz humana en datos digitales, por ejemplo, en archivos WAV, y luego los transfiere en una secuencia de ceros y unos en forma de ondas electromagn√©ticas. Solo en este caso, en lugar de todo el espectro de la voz, solo se deben representar dos valores: 0 y 1. Pueden representarse mediante ondas de diferentes longitudes, diferentes voltajes,la luz pulsa a trav√©s de la fibra √≥ptica, rayas blancas y negras en el papel, agujeros en la tarjeta perforada.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El c√≥digo de escaneo de la tecla Y presionada en binario se parece a 0001 0101. Los transmitiremos a lo largo de la rama del microcontrolador que es responsable de los datos ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DATOS</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La unidad l√≥gica</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> es 3.3V o superior, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cero l√≥gico</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- el voltaje es de aproximadamente 0V. Aqu√≠ est√° el truco: ¬øc√≥mo paso tres ceros seguidos? Para hacer esto, necesitamos un segundo tramo que llamaremos CLOCK, cuando en √©l uno significa que la sesi√≥n de transmisi√≥n de un bit ha comenzado y cero ha finalizado. Tal cambio en los valores (voltajes) ocurrir√° con un cierto intervalo de tiempo, digamos 50 nanosegundos, porque en el otro extremo hay un segundo microcontrolador que funciona a su propia velocidad y escucha las patas a las que CLOCK y DATA est√°n conectados en un bucle sin fin. En este ejemplo, supondr√© que el teclado est√° conectado a trav√©s del conector PS2, que se muestra a continuaci√≥n. A trav√©s del puerto USB, el algoritmo de transferencia ser√° diferente. Como puede ver, el puerto PS2 tiene pines llamados Datos, Reloj.Adem√°s de ellos, tambi√©n hay un contacto a trav√©s del cual el controlador del puerto PS2 distribuye el voltaje de 5V necesario para la operaci√≥n al teclado y un contacto a tierra, que simplemente se muestra en el cuerpo del teclado. No se utilizan otros contactos.</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><img src="https://habrastorage.org/webt/8g/ug/g7/8gugg7htfuyfrzclfypvowdzkhq.png"></td>
<td><img src="https://habrastorage.org/webt/dy/zf/_w/dyzf_w-iqlutb2xiju_om0e4abq.png"></td>
</tr>
</tbody></table></div><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">puerto</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> PS / 2 se denomina </font><i><font style="vertical-align: inherit;">bus serie</font></i><font style="vertical-align: inherit;"> , porque transmite bits uno por uno (una secuencia de bits). </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El puerto paralelo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> transmite datos a la vez a varios contactos y puede transferir, por ejemplo, un byte (8 bits) a la vez para una sesi√≥n de transferencia de datos. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬øCu√°l es la diferencia entre un puerto, un bus y un protocolo? Un bus, como un puerto, es un conjunto de contactos (cableado) y un acuerdo sobre c√≥mo usarlos, solo el puerto tiene una conexi√≥n para conectar dispositivos externos, y el bus se usa para comunicar componentes en la placa base. Un puerto es esencialmente un bus con un conector en el medio. Un protocolo es una interacci√≥n a trav√©s de contactos. En el ejemplo con PS / 2, este fue el orden de transferencia de datos a trav√©s de los contactos Reloj y Datos.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anteriormente, el microcontrolador Intel 8042 era muy com√∫n y se usaba tanto en el teclado como en un controlador de puerto PS2, es decir. Dos chips id√©nticos intercambiaron datos. El controlador del puerto PS2 en Windows se llama 8042prt.sys.</font></font><br>
</i><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
De hecho, transmitimos no 8 bits, sino 11, porque los datos se transmiten como un </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">paquete</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> o </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mensaje de </font></font></i><font style="vertical-align: inherit;"><i><font style="vertical-align: inherit;">datos</font></i><font style="vertical-align: inherit;"> . Unos 3 bits adicionales indican el comienzo y el final de los datos: uno cero al principio y 0 1 al final, un protocolo de este tipo para transferir datos desde el dispositivo al host en PS2. Esto puede parecerse a la funci√≥n </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SendKey</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en pseudoc√≥digo, si prefiere comprender el c√≥digo. Env√≠a datos sobre la tecla presionada a trav√©s del bus PS2.</font></font><br>
<br>
<pre><code class="cpp hljs">
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">SendBit</span><span class="hljs-params">(BYTE bit)</span> </span>{
	<span class="hljs-keyword">float</span> power = (bit != <span class="hljs-number">0</span>) ? <span class="hljs-number">3.3f</span> : <span class="hljs-number">0.0f</span>;<font></font>
	SetPower(DATA, power);<font></font>
	SetPower(CLOCK, <span class="hljs-number">3.3f</span>);<font></font>
	Sleep(<span class="hljs-number">50</span>);<font></font>
	SetPower(CLOCK, <span class="hljs-number">0.0f</span>);<font></font>
	Sleep(<span class="hljs-number">50</span>);<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">SendData</span><span class="hljs-params">(BYTE data)</span> </span>{<font></font>
	SendBit(<span class="hljs-number">0</span>);<font></font>
	<font></font>
	<span class="hljs-keyword">for</span> (BYTE i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-keyword">sizeof</span>(BYTE); i++) {<font></font>
		BYTE bit = (data &gt;&gt; i) &amp; <span class="hljs-number">1</span>;<font></font>
		SendBit(bit);<font></font>
	}<font></font>
<font></font>
	SendBit(<span class="hljs-number">0</span>);<font></font>
	SendBit(<span class="hljs-number">1</span>);<font></font>
}<font></font>
</code></pre><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No siempre es necesario establecer manualmente el voltaje en cada pata individualmente para la transferencia de datos. </font><font style="vertical-align: inherit;">En algunos casos, el valor almacenado en el registro se muestra autom√°ticamente en los contactos. </font></font><br>
</i><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En el gr√°fico, dicha transferencia de datos se visualizar√° de la siguiente manera. </font><font style="vertical-align: inherit;">El tiempo est√° en el eje X y el voltaje en el eje Y.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/zs/cy/p8/zscyp8ur1i1t0lmau3n50evbuke.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En tecnolog√≠a anal√≥gica, la se√±al puede estar distorsionada, es decir </font><font style="vertical-align: inherit;">el cable no est√° conectado a nada, pero el volt√≠metro muestra 0,5 V debido al hecho de que hay un campo electromagn√©tico cerca. </font><font style="vertical-align: inherit;">Por lo tanto, se utiliza el concepto de voltaje umbral. </font><font style="vertical-align: inherit;">Si el voltaje es menor que el umbral, entonces suponemos que tenemos un cero l√≥gico, de lo contrario, la unidad. </font><font style="vertical-align: inherit;">Teniendo en cuenta las posibles distorsiones, el c√≥digo de escaneo de la tecla Y presionada puede aparecer as√≠:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/sl/u4/3k/slu43kce6evjxlk3qgrzzwpfhmg.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Antes de echar un vistazo m√°s de cerca a c√≥mo los datos del teclado llegan a la CPU, hablemos de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">microchips</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">buses</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">placas base</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Microcontroladores y microcircuitos</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El microcontrolador puede ejecutar un programa cosido, tiene una cierta cantidad de memoria RAM y un lugar para almacenar datos y c√≥digo de programa. En el </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chip, el</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> programa se puede configurar en la etapa de dise√±o. La creaci√≥n manual de un circuito el√©ctrico que implementa un algoritmo consume mucho tiempo y, por lo tanto, se puede utilizar un lenguaje de programaci√≥n especial llamado </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VHDL</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (Lenguaje de descripci√≥n de hardware) </font><font style="vertical-align: inherit;">para dise√±ar microcircuitos </font><font style="vertical-align: inherit;">. Este es un lenguaje de programaci√≥n de alto nivel que se traduce en un plan de circuito, se ejecuta a trav√©s de un programa que encuentra la ubicaci√≥n √≥ptima de los elementos de radio en el tablero y finalmente se realiza en forma f√≠sica. Las im√°genes son s√≥lo para fines ilustrativos.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/6c/rt/vp/6crtvpo861utguxs56v37-7syx4.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/gk/r8/q7/gkr8q7m78x8ldyxvdxu7tp9pxhc.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øC√≥mo se representan los datos y comandos en microchips y microcontroladores? </font><font style="vertical-align: inherit;">La base de la tecnolog√≠a inform√°tica es un transistor, que la humanidad ha aprendido a hacer en dimensiones microsc√≥picas. </font><font style="vertical-align: inherit;">Un transistor es un elemento de radio que tiene tres patas: una entrada, una salida, y entre ellas un control que abre o cierra una corriente entre dos patas. </font><font style="vertical-align: inherit;">La siguiente figura ilustra el funcionamiento del transistor, el agua ilustra la corriente.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/1g/kj/bw/1gkjbwtax3xmpshjmbllzgpvkoo.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El voltaje se aplica al tramo de entrada, si el control tiene voltaje, entonces la corriente pasa a la salida, de lo contrario habr√° 0V. </font><font style="vertical-align: inherit;">Con 8 transistores, cada uno de los cuales tiene un LED conectado a la pata de salida que se ilumina o no, podemos imaginar 256 combinaciones √∫nicas (2 a la potencia de 8). </font><font style="vertical-align: inherit;">Los lapochki se interpretan de derecha a izquierda, as√≠ como los n√∫meros decimales. </font><font style="vertical-align: inherit;">Los d√≠gitos inferiores est√°n a la derecha.</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><img src="https://habrastorage.org/webt/bt/gb/9l/btgb9ln9dejdgz-v-e7l_6mjx9u.png"></td>
<td><img src="https://habrastorage.org/webt/vb/js/yg/vbjsygneuovkp0ocaml6yfvoigy.png"></td>
</tr>
</tbody></table></div><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aquellos. </font><font style="vertical-align: inherit;">una bombilla representa un bit de informaci√≥n (0 o 1), y ocho de esas bombillas corresponden a un byte. </font><font style="vertical-align: inherit;">Es posible construir operadores l√≥gicos AND, OR, NOT, XOR en transistores.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/wu/rw/gz/wurwgzgga7mny0qhn3daju6hdic.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por ejemplo, en el circuito del operador AND (a la izquierda en la imagen de arriba), la salida solo tendr√° voltaje si ambos voltajes de entrada no son cero. </font><font style="vertical-align: inherit;">Alguien ya ha inventado algoritmos de suma, multiplicaci√≥n, divisi√≥n y sustracci√≥n basados ‚Äã‚Äãen operaciones l√≥gicas bit a bit y cambios de bit. </font><font style="vertical-align: inherit;">Los fabricantes de chips solo necesitan implementarlos. </font><font style="vertical-align: inherit;">A continuaci√≥n se ilustra el funcionamiento del algoritmo de adici√≥n bit a bit; no lo analizaremos:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/9k/t3/m5/9kt3m5uiw9wp1xk7ferifgngpzi.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los nanotransistores son microsc√≥picos y se pueden colocar en el tablero por millones. </font><font style="vertical-align: inherit;">A continuaci√≥n se muestra el procesador Intel y c√≥mo se ver√≠a aproximadamente uno de sus n√∫cleos. </font><font style="vertical-align: inherit;">La imagen es ilustrativa.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/hy/77/gt/hy77gt038gktsayjog-kg9rh65u.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los microcircuitos pueden contener un microcontrolador en la misma placa y en el mismo caso.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Llantas</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por lo general, en los libros de texto, los neum√°ticos se muestran como flechas en negrita, como en la imagen a continuaci√≥n. </font><font style="vertical-align: inherit;">Esto se hace para no dibujar todas las conexiones de los contactos, que pueden ser muchas. </font><font style="vertical-align: inherit;">El funcionamiento del bus PS2 es muy simple, todo lo que necesita son tres pines. </font><font style="vertical-align: inherit;">Pero hay buses que, por ejemplo, tienen 124 contactos para la transferencia de datos.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/zu/-a/vd/zu-avduvaicswxtkaeihnnwureu.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Existen los siguientes tipos de neum√°ticos:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Datos: los bits de estos contactos se interpretan como datos: n√∫mero, s√≠mbolo, parte de una imagen u otros datos binarios. </font><font style="vertical-align: inherit;">El ancho del bus afecta el rendimiento, n√∫mero de bits transmitidos por segundo</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Direcciones: los bits en estos pines se interpretan como una direcci√≥n f√≠sica en la memoria. </font><font style="vertical-align: inherit;">El ancho de este bus determina la capacidad m√°xima de RAM admitida.</font></font></li>
<li> ‚Äî          . CPU         RAM   I/O.</li>
<li>.         ,      .    ATX 24 Pin 12V PSU Connector,       .<br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/am/cb/mq/amcbmq-jxkqdth45s_79xrg6uwa.png"></div></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un neum√°tico puede consistir en </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sustratos</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , es decir </font><font style="vertical-align: inherit;">algunos contactos se usan para datos, otros para direcciones, otros para control y contactos a los que se transmite energ√≠a. </font><font style="vertical-align: inherit;">El enfoque cuando los mismos contactos se usan alternativamente para transmitir datos y direcciones se llama </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">multiplexaci√≥n</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Por ejemplo, el procesador Intel 8086 tiene un bus de datos y direcciones de 20 bits, en el diagrama de pines sus contactos se indican mediante </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AD0-AD19</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (patas 16-2 y 39-35).</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/jp/wy/tx/jpwytxl5cbiuv_hky79ledmfzjk.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En un caso m√°s complejo, podemos tener varios microcircuitos conectados a los mismos contactos. </font><font style="vertical-align: inherit;">Para una comunicaci√≥n normal, necesitan un chip adicional que determinar√° qui√©n puede usarlos en qu√© momento, se llama </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">controlador de bus</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. En la figura siguiente, un bus esf√©rico en el vac√≠o: cuatro microcontroladores id√©nticos transmiten datos al microcontrolador del consumidor a trav√©s del controlador del bus. El cable rojo es el voltaje que el controlador del bus distribuye a todos los chips conectados a √©l. Los datos se transmiten a trav√©s de los cables verdes y se realiza una "negociaci√≥n" con el controlador de bus, y el cable azul es Clock, a trav√©s del cual el controlador de bus sincroniza la comunicaci√≥n de los controladores, ya que pueden operar a diferentes velocidades. Si la unidad l√≥gica est√° en el cable azul, entonces el chip con derecho a usar el bus puede realizar un acto de interacci√≥n con el mundo exterior: leer un poco, por ejemplo.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/3a/tc/pq/3atcpqqtqdpmnbvrjho1h1y-bww.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El controlador de bus puede considerarse como un componente integral, ya que la comunicaci√≥n con el mundo exterior lo atravesar√° y cu√°ntos chips o dispositivos externos reales hay realmente en el bus no es importante. </font><font style="vertical-align: inherit;">Para la transferencia de datos, la placa base tiene una extensa red de autobuses. </font><font style="vertical-align: inherit;">A pesar del hecho de que hay una gran cantidad de conjuntos de chips, en su mayor parte siguen un dise√±o t√≠pico, porque todos los dispositivos conectados a la placa base se dividen en:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lento: teclado, disco duro, tarjeta de red, audio, etc. </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">R√°pido: CPU, RAM, GPU. </font></font></li>
</ul><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Basado en esta divisi√≥n, la placa base tiene dos chips principales: el </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">South Bridge</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que coordina el trabajo de todos los dispositivos lentos, y el </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">North Bridge,</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para la coordinaci√≥n de los dispositivos r√°pidos. En las computadoras modernas, el Northbridge est√° ubicado en la CPU misma, y ‚Äã‚Äãel Southbridge puede llamarse Platform Controller Hub, pero esto no cambia la esencia. Ambos puentes est√°n interconectados por un autob√∫s a trav√©s del cual se informan mutuamente sobre eventos importantes. De particular inter√©s es el </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">generador de reloj</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mediante el cual el procesador, la RAM y la tarjeta gr√°fica sincronizan su trabajo, el mismo cable azul. </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Overclocking</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Esto esencialmente est√° cambiando la configuraci√≥n del BIOS para que la sincronizaci√≥n ocurra con mayor frecuencia, mientras que el hardware, principalmente la CPU, se calentar√° m√°s, consumir√° m√°s energ√≠a y desarrollar√° sus recursos m√°s r√°pidamente. Lo contrario es el </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">overclocking</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , cuando la velocidad disminuye para ahorrar bater√≠a o reducir el ruido. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> conjunto de chips es un conjunto de chips que fueron dise√±ados para funcionar entre s√≠. Proporcionan comunicaci√≥n entre componentes en la placa base y proporcionan funcionalidad como temporizadores. El conjunto de chips funciona con una sola marca de procesador, AMD no se puede insertar en la placa base con el conjunto de chips Intel, incluso tienen contactos diferentes. El diagrama de la placa base se presenta a continuaci√≥n:</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><img src="https://habrastorage.org/webt/hd/zk/ld/hdzkldbz0h6vjddegg2iqwir-f0.png"></td>
<td><img src="https://habrastorage.org/webt/2h/sl/-f/2hsl-f2t77a-x4xy0dn5xqo2ua0.png"></td>
</tr>
</tbody></table></div><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬øQuieres un ejemplo de encapsulaci√≥n de hardware? </font><font style="vertical-align: inherit;">Los chipsets Intel tienen un chip llamado </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Super IO</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , se muestra en la imagen a continuaci√≥n y est√° conectado al Puente Sur a trav√©s del bus LPC. </font><font style="vertical-align: inherit;">LPC es el nombre inteligente para el cableado de CLOCK, DATA, VCC (POWER). </font><font style="vertical-align: inherit;">Este chip contiene la emulaci√≥n de todos los chips antiguos que alguna vez se usaron para perif√©ricos, incluido el chip 8042 que se us√≥ para el puerto PS2. </font><font style="vertical-align: inherit;">Tambi√©n hay un emulador de controlador de puerto para disquete y otras reliquias que interfieren con el progreso. </font><font style="vertical-align: inherit;">En el diagrama general de la placa base, tanto Super IO como el bus </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LPC</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> se indican arriba </font><font style="vertical-align: inherit;">.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/bf/wx/sm/bfwxsm3i9gekd4yjd0uizbusb3u.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El moderno puerto PS2 se conecta directamente al chip Super I / O. </font><font style="vertical-align: inherit;">El verde es el teclado, el p√∫rpura es el mouse. </font><font style="vertical-align: inherit;">Anteriormente, se conectaba al microcontrolador Intel 8042.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/ae/za/tj/aezatje8p9gbwod0uap92v7sv-e.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La placa base est√° hecha de diel√©ctrico, es decir </font><font style="vertical-align: inherit;">material que no conduce corriente. </font><font style="vertical-align: inherit;">La corriente solo puede pasar por las l√≠neas impresas en la pizarra. </font><font style="vertical-align: inherit;">La placa base tiene muchas capas, cada una de las cuales tiene sus propios contactos impresos y, por lo tanto, si perfora la placa base donde las l√≠neas no son visibles, puede estropearla da√±ando los contactos invisibles dentro de la placa. </font><font style="vertical-align: inherit;">Ahora puede echar un vistazo m√°s de cerca al proceso de distribuci√≥n de datos desde la PS2 a la CPU.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El camino de la PS2 al procesador</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como regla general, la arquitectura de la computadora se considera en el procesador 8086. Por un lado, esto es correcto, porque es bastante simple en comparaci√≥n con las CPU modernas, por otro lado, es incorrecto, porque es antiguo y no refleja la arquitectura de una m√°quina moderna. Intel 8086 no necesitaba ning√∫n puente, porque era tan lento que pod√≠a funcionar con perif√©ricos en un bus, es decir a una frecuencia No conozco los conjuntos modernos de CPU y chips, as√≠ que lo explicar√© en los ficticios que se parecen a los reales. En mi ejemplo, habr√° una CPU ficticia muy similar a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Intel 8086</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. El chip Super IO tiene m√°s de cien contactos y hay documentaci√≥n en Internet, pero no veo el punto de resolver qu√© pines el teclado y el bus LPC realmente usan para comunicarse con South Bridge. Lo principal es el principio, que se puede implementar de diferentes maneras. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Echemos un vistazo r√°pido a la imagen para recordar que ya hemos pasado. Las flechas verdes indican el camino que tomaremos.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/82/ic/2e/82ic2e8smxmv-z0epnfxzk1f6n8.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces, los datos del teclado ya llegaron al controlador de puerto PS2, que alguna vez fue un chip Intel 8042, y ahora es emulado por un chip Super IO. Y ahora analicemos el curso posterior de las acciones en mi placa base ficticia con una CPU ficticia. El controlador PS2 recibi√≥ un c√≥digo de escaneo de la tecla Y presionada y ahora suministra voltaje a la se√±al de contacto (l√≠nea p√∫rpura, vea la imagen a continuaci√≥n) en la cual el controlador de interrupci√≥n programable debe notificar sobre los datos del teclado. Esta se√±al se transmite de un chip a otro hasta que North Bridge la pasa al administrador de interrupciones.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/zh/jb/jb/zhjbjbwyj8dgyhydsaeryyfyfrm.jpeg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Controlador de interrupci√≥n programable</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> es un </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Intel 8259</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de chip </font><font style="vertical-align: inherit;">en la que 8 patas (sus nombres IRQ0-IRQ7) est√°n reservados para la recepci√≥n de las notificaciones de ciertos puertos ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nterrupt </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">R</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Q</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> uest). Un teclado est√° conectado al pin IRQ1, IRQ7 a una impresora, disquete a alg√∫n pin, tarjeta de sonido, puertos paralelos y </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">otros</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Por supuesto, puede haber mucho m√°s de ocho dispositivos, por lo que se utiliz√≥ una t√©cnica como la conexi√≥n en cascada cuando se conect√≥ otro PIC similar a una pata con el nombre IRQ2, en el que el recuento no comenz√≥ desde 0, sino 7. El mouse est√° conectado a IRQ12, es decir. pie IRQ5 en el segundo PIC. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El controlador de interrupci√≥n ahora debe notificar a la CPU del evento en el teclado. Esto sucede de la siguiente manera:</font></font><br>
<ol>
<li>      INT (Interrupt) ,     INTR (<i>Interrupt Request</i>) . CPU            ,        , ..       .     ,       .        exception  .</li>
<li>               INTR,        .</li>
<li>       ( D0-D7)  ,    .      PIC          (   IRQ).<br>
<br>
<i> ,   ?     .               .   ‚Äî      (x, y, z, w).        .</i></li>
<li>CPU     AD0-AD7  ,  .      IDT (<i>Interrupt Descriptior Table</i>)    ,     ,         .   CPU   .<br>
<br>
<i>             .       .    ,   IDT        C# .</i><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">IDT_entry</span>{</span>
	<span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">short</span> <span class="hljs-keyword">int</span> offset_lowerbits;
	<span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">short</span> <span class="hljs-keyword">int</span> selector;
	<span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">char</span> zero;
	<span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">char</span> type_attr;
	<span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">short</span> <span class="hljs-keyword">int</span> offset_higherbits;<font></font>
};<font></font>
 <font></font>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">IDT_entry</span> <span class="hljs-title">IDT</span>[256];</span>
</code></pre></li>
<li>        ,          INTA (<b>Int</b>errupt <b>A</b>cknowledged).<br>
</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El controlador de interrupci√≥n de teclado en el c√≥digo m√°s simple se ver√° as√≠. Llama a un comando que se√±ala la finalizaci√≥n del procesamiento de interrupci√≥n, es decir. env√≠a una se√±al al pie INTA.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">irq1_handler</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span> </span>{<font></font>
	  outb(<span class="hljs-number">0x20</span>, <span class="hljs-number">0x20</span>); <span class="hljs-comment">//EOI</span><font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Puede obtener m√°s informaci√≥n sobre c√≥mo se configura la tabla de vectores de interrupci√≥n en </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">osdev</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora sabemos c√≥mo ocurri√≥ la interrupci√≥n, pero no sabemos c√≥mo el manejador de interrupciones lee informaci√≥n sobre la tecla presionada. Desde el punto de vista del software, el puerto PS2 consta de dos registros, solo que el </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n√∫mero de puerto de E / S</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> no accede a ellos por nombres o direcciones en la memoria </font><font style="vertical-align: inherit;">. Estos dos registros de un solo byte se asignan a los puertos 0x60 y 0x64, el primero (0x60) contendr√° el c√≥digo de escaneo de la clave. El segundo puerto se usa para transferir el estado y los comandos al puerto PS2 (¬°no al teclado!). El conjunto de instrucciones de arquitectura x86 tiene el comando </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IN </font></font></a><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">storeTo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fromPortNum</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que lee el valor del puerto de E / S especificado en el registro especificado. </font><font style="vertical-align: inherit;">Por ejemplo, IN AL, 0x60 guardar√° los datos del teclado en el registro AL. </font><font style="vertical-align: inherit;">Podr√≠a funcionar algo como esto:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En el procesador que estamos considerando hay patas AD0-AD20, se pueden usar para indicar la direcci√≥n y los datos. </font><font style="vertical-align: inherit;">Esto es tanto un bus de datos como un bus de direcciones. </font><font style="vertical-align: inherit;">Adem√°s de ellos, hay una serie de patas de control, por ejemplo, el pin No. 28 (S2), cuyo valor indicar√° al puente norte donde se realizar√° la lectura, desde la memoria o un dispositivo de entrada / salida. </font><font style="vertical-align: inherit;">El comando IN establece el valor aqu√≠ hablando del dispositivo de E / S.</font></font></li>
<li>   CPU (-   AD0-AD20)   0110 0000,    0x60.      CPU    ,     .        , -   , - .       0x60        SuperIO ,    -    .</li>
<li>    Super IO            .   0x60        PS2,         . </li>
<li>    .   Intel 8042,     SuperIO,   LPC       ,       . ..        ,    .</li>
<li>     CPU              (- 8   AD0-AD20). </li>
<li> CPU                   AL.         .</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todo este algoritmo funciona en una escala de nanosegundos y, por lo tanto, se ejecuta casi instant√°neamente, a pesar de que el procesador pas√≥ alg√∫n tiempo esperando la operaci√≥n de E / S. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como ahora comprende la lectura desde dispositivos externos, incluso, por ejemplo, memoria RAM, etc. La CPU es bastante lenta. Esta lentitud se puede notar escribiendo un programa que imprima 10,000 l√≠neas en un archivo l√≠nea por l√≠nea, en lugar de copiarlas en el b√∫fer y guardarlas inmediatamente. El disco duro est√° conectado al Puente Sur y dentro de √©l tambi√©n hay un controlador que controla la ubicaci√≥n directa de los datos.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La RAM est√° conectada a la CPU a trav√©s del bus y la lectura de la misma lleva alg√∫n tiempo. Para acelerar la CPU, tiene un cach√©, es decir El √°rea en la que se ubican los transistores que representan datos que pronto se necesitar√°n o se usar√°n con frecuencia, su lectura es mucho m√°s r√°pida que la de la placa RAM, que se comunica con la CPU a trav√©s del Puente Norte. La RAM se llama memoria </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">din√°mica de acceso aleatorio</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , porque los condensadores se utilizan para representar datos en ella. Un condensador es un elemento de radio que, como una bater√≠a, mantiene una carga durante un tiempo hasta que se descarga por completo. Solo aqu√≠ la descarga ocurre muy r√°pidamente. Por lo tanto, los condensadores deben recargarse, esto sucede instant√°neamente, es suficiente para aplicar voltaje. Condensador cargado - l√≥gico 1, de lo contrario 0. Para la memoria cach√© se utiliza</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RAM est√°tica,</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> es decir </font><font style="vertical-align: inherit;">no necesita recargarse y, por lo tanto, funciona m√°s r√°pido, pero cuesta m√°s. </font><font style="vertical-align: inherit;">El cach√© se divide en 3 niveles, que se verifican secuencialmente durante la b√∫squeda de los datos solicitados antes de que el procesador acceda a la RAM. </font><font style="vertical-align: inherit;">En procesadores m√°s antiguos, el cach√© de primer nivel (L1) era parte de la CPU y funcionaba con √©l a la misma frecuencia, cuando los cach√©s L2 y L3 eran chips externos. </font><font style="vertical-align: inherit;">Ahora est√°n todos en el mismo chip con el procesador. </font><font style="vertical-align: inherit;">El cach√© L1 es el m√°s r√°pido y el m√°s peque√±o en tama√±o de memoria, L2 tiene m√°s memoria pero m√°s lento. </font><font style="vertical-align: inherit;">L3 es el cach√© m√°s grande y el m√°s lento, a menudo llamado </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cach√© compartido</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , porque almacena datos para todos los n√∫cleos de CPU, mientras que L1 y L2 se crean para cada n√∫cleo individual. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En la siguiente parte, hablaremos sobre c√≥mo Windows recibe y procesa los datos recibidos.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es489146/index.html">802.11ba (WUR) o c√≥mo cruzar una serpiente con un erizo</a></li>
<li><a href="../es489156/index.html">¬øQui√©n es m√°s inteligente que IDEA?</a></li>
<li><a href="../es489160/index.html">Resultados de un estudio sobre ofertas de trabajo para un dise√±ador de productos digitales. Primera parte - Resultados y estad√≠sticas</a></li>
<li><a href="../es489162/index.html">El gerente entregar√°</a></li>
<li><a href="../es489164/index.html">Actualizaci√≥n de cl√∫ster de Kubernetes sin tiempo de inactividad</a></li>
<li><a href="../es489172/index.html">Fijamos la autorizaci√≥n de ActiveDirectory a Kubernetes con Keycloak</a></li>
<li><a href="../es489174/index.html">Principio de responsabilidad √∫nica (SRP) con Laravel</a></li>
<li><a href="../es489178/index.html">GSMout: recibe SMS y llamadas "en casa"</a></li>
<li><a href="../es489182/index.html">varchar (max) -varchar (max) y en producci√≥n</a></li>
<li><a href="../es489188/index.html">Iniciar sesi√≥n en un entorno microservicio .Net en la pr√°ctica</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>